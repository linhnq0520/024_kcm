/*! For license information please see main.119419d3.js.LICENSE.txt */
(()=>{var __webpack_modules__={1716:(t,e,i)=>{"use strict";i.d(e,{Z:()=>ea});var o=i(3063),a=i(7313),s=i(5842),n=i(9676),r=i(1168),l=i(6417);class c extends a.Component{constructor(t){super(t),this.modalClose=()=>{r.render((0,l.jsx)("div",{}),this.refs.content_modal),this.setState({show:"none"},(()=>{void 0!==this.props.abs_CloseModal&&this.props.abs_CloseModal()}))},this.getElementContentModal=()=>this.refs.content_modal,this.getDatafull=()=>({config:{default:{title:this.props.modal_title||"",size:this.props.size?this.props.size:"M"},cmd:{visibility:"block"===this.state.show}},abs_Close:this.modalClose}),this.state={show:"none",class:"modal_webui",renderFormChildDone:!1},this.title="",this.props.info_component&&(this.title=this.props.info_component.name),this.ref_modal=(0,a.createRef)()}componentDidUpdate(t){var e,i;this.props.show!==t.show&&setTimeout((()=>{"none"===this.props.show?this.setState({show:"none"}):this.setState({show:"block"})}),300),this.props.renderFormChildDone!==t.renderFormChildDone&&setTimeout((()=>{this.setState({renderFormChildDone:this.props.renderFormChildDone})}),300),null!==(e=this.ref_modal)&&void 0!==e&&null!==(i=e.current)&&void 0!==i&&i.abs_Focus&&"block"===this.state.show&&setTimeout((()=>{this.ref_modal.current.abs_Focus()}),100)}render(){let t=(0,n.RP)("uModal");const e=(0,n.RP)("uForm");return(0,l.jsxs)(t,{dataFull:this.getDatafull(),ref:this.ref_modal,children:[(0,l.jsx)("div",{className:"modal-body",ref:"content_modal"}),"none"!==this.props.show&&!1===this.props.renderFormChildDone&&(0,l.jsx)(e,{dataFull:{config:{default:{title:""}},mode:{form_min:!0},cmd:{visibility:"none"!==this.props.show&&!1===this.props.renderFormChildDone,isLoading:!0}}})]})}}const d=c;var h=i(7903);const u={txFOActions:"",txFo:"",useAction:"true",is_upperCase:"false",action:"",structable:"",structable_read:"",data_default:"",isLookup:"false",isEvaluation:"false",callform:"",callform_detail:"",callform_detail_mode:"",data_view:"",data_value:"",is_password:"false",form_evaluation:""};const p=class{constructor(t,e,i){this.getProperty=()=>this.property,this.setCMD=t=>{void 0!==t.visible&&("true"!==t.visible&&"false"!==t.visible||(this.property.cmd.visible=t.visible)),void 0!==t.disabled&&("true"!==t.disabled&&"false"!==t.disabled||(this.property.cmd.disabled=t.disabled)),void 0!==t.block&&("true"!==t.block&&"false"!==t.block||(this.property.cmd.block=t.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=t=>{this.property.cmd.visible=t},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=t=>{this.property.cmd.disabled=t},this.getCMD_enable=()=>this.property.cmd.disabled,this.getConfig=()=>{let t=this.property.config,e=(0,o.Z)({},u);for(let i in e)t[i]&&(""!==t[i]&&""===t[i]||(e[i]=t[i]));return e||{}},this.getDefault=()=>this.property.default,this.property={inputType:t,config:i,default:e,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};var _=i(3745),f=i(7751),g=i(5258);class m extends a.Component{constructor(t){var e,i,n,r;super(t),this.setLoadingAction=(t,e)=>{const i=(null===e||void 0===e?void 0:e.isLoading)||!1;this.setState({isLoading:i})},this.getUInputConfig=()=>{var t;return{code:this.props_smooth.default.code,dataFull:{abs_ClickIcon:()=>{this.modalToggle()},abs_ClearData:()=>this.handleClearValue(),abs_Change:t=>this.handleChange(t),abs_Blur:t=>this.onBlur(),abs_KeyUp:this.onKeyUp,config:{default:{placeholder:"true"===String(this.state.CMD.disabled)?" ":"",title:(null===(t=this.state.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props_smooth.default.name,type:(this.props_smooth.config.is_password,"text"),class:this.props_smooth.default.class,required:this.state.validate.request,icon:!0===this.state.isLookup?"search":this.state.isEvaluation?"edit":"",component_code:this.component_code},cmd:{disable:this.state.CMD.disabled+""==="true",visible:this.state.CMD.visible+""!=="false",error:{message:this.renderMess(this.state.help_mess),type:""},isFocus:this.state.isFocus,isLoading:this.state.isLoading},mode:{textAlign:"",isView:!0===this.state.isEvaluation}},mode:{autoWrap:"true"!==this.props_smooth.config.is_password&&!this.state.isLookup&&"true"!==String(this.props.config.isSearch)||"true"===String(this.props.config.autoWrap),isSearch:"true"===String(this.props.config.isSearch),readOnly:!1},valueTitleHover:"true"===this.props_smooth.config.is_password||this.state.CMD.disabled+""!=="true"?"":this.LOGIC_PASSWORD.getPasswordDecode(),value:"true"===this.props_smooth.config.is_password?this.LOGIC_PASSWORD.getPasswordDisplay():this.LOGIC_PASSWORD.getPasswordDecode()}}},this.convertStringWithContext=t=>{let e=s.ZP.getlistCodeContext(t);for(let i=0;i<e.length;i++){let o=e[i],a=s.ZP.context_get(o.code);void 0!==a&&(t=t.replace(o.key,a))}return t},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props_smooth.infoView,default:this.props_smooth.default,layout:this.props_smooth.infoLayout,block:t.block}},this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.setValidate=(t,e)=>{const{validate:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);i.request!==o.request&&this.setState({validate:o})},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{if(void 0!==t.key&&void 0!==t.key_form){let e=t.key.split(";");this[e[0]]=t.key_form,e[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setCallBuildFormBack=(t,e)=>{if(void 0!==t.key&&void 0!==t.key_form){let e=t.key.split(";");this[e[0]]=t.key_form,e[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.closeModal=(t,e)=>{this.refs.b_modal.modalClose()},this.clearCacheCompare=()=>{let{compare_info:t}=this.state;t.cache_value=void 0,t.is_change_value=!1,this.setState({compare_info:t})},this.set=(t,e)=>{this.clearError(),this.clearCacheCompare(),clearTimeout(this._enterTimeout),this._enterTimeout=void 0;let i=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);if(void 0!==e&&null!==e){if(void 0!==this.props_smooth.config.structable_read&&this.props_smooth.config.structable_read.includes(".")){let t=this.props_smooth.config.structable_read.split(".");if(t.length>0)if(2===t.length){if(void 0!==e[t[0]]&&null!==e[t[0]]&&(this.data_debug.data_cpn=e[t[0]][t[1]],void 0!==e[t[0]][t[1]]&&null!==e[t[0]][t[1]])){let{compare_info:o}=this.state;return e[t[0]][t[1]]!==o.cache_value?o.cache_value=e[t[0]][t[1]]:o.is_change_value=!1,void this.setState({value:e[t[0]][t[1]],compare_info:o},(()=>{void 0!==i&&i.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"on_change")}))}}else{let o=e;for(let e=0;e<t.length;e++)if(e===t.length-1){if(void 0!==o&&null!==o[t[e]]){let{compare_info:a}=this.state;return o[t[e]]!==a.cache_value?a.cache_value=o[t[e]]:a.is_change_value=!1,void this.setState({value:o[t[e]],compare_info:a},(()=>{void 0!==i&&i.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"on_change")}))}}else void 0!==o&&null!==o[t[e]]&&(o=o[t[e]])}}this.setState({value:this.props_smooth.config.data_default},(()=>{void 0!==i&&i.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"on_change")}))}},this.getAdvanced=(t,e)=>this.LOGIC_PASSWORD.getPasswordDecode(),this.getDataOOP=(t,e)=>this.data_select,this.toolAutoValue=()=>{let{max:t}=this.state.validate;if(Number.isInteger(t)&&0!==t||(t=500),"false"===String(this.state.CMD.disabled)||"false"===String(this.state.CMD.visible)){let e=this.props_smooth.default.name+Math.round(1e3*Math.random());Number(t)<e.length&&(e="1"),this.setState({value:e,data_view:e})}},this.setAdvanced=(t,e)=>{if(t.codeHidden){if(t.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){let t="";void 0!==this.props_smooth.config.data_view&&(t=": "+s.ZP.getOOP(this.data_select,this.props_smooth.config.data_view.trim()));let e="";void 0!==this.props_smooth.config.data_value&&(e=s.ZP.getOOP(this.data_select,this.props_smooth.config.data_value.trim())+""),this.setState({value:e,data_view:t},(async()=>{let t=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==t&&await t.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"enter_tab")}))}}else if(t.list_component){let{list_component:i}=t,{code:o}=this.props_smooth.default;if(void 0!==e&&null!==e||(e=""),i){if(i.split(";").includes(o)){let i=t.component_action||"";this.setState({value:e},(()=>{let t=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==t&&(i.split(";").includes(o)||t.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"enter_tab"))}))}}}this.clearError()},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],t.codeHidden){if(t.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){let t="";void 0!==this.props_smooth.config.data_view&&(t=": "+s.ZP.getOOP(this.data_select,this.props_smooth.config.data_view.trim()));let e="";void 0!==this.props_smooth.config.data_value&&(e=s.ZP.getOOP(this.data_select,this.props_smooth.config.data_value.trim())+""),this.setState({value:e,data_view:t},(async()=>{let t=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==t&&await t.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"enter_tab")}))}}else if(t.list_component){let{list_component:i}=t,{code:o}=this.props_smooth.default;if(void 0!==e&&null!==e||(e=""),i){if(i.split(";").includes(o)){let i=t.component_action||"";this.setState({value:e},(()=>{let t=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==t&&(i.split(";").includes(o)||t.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"enter_tab"))}))}}}this.clearError()},this.get=(t,e)=>{let i=this.props_smooth.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.checkValidate=()=>{let t="",e=this.state.value;if(void 0===e||null===e)return!1;e=e.toString().trim();let{min:i,max:o,request:a,regex_format:n,validate_html:r}=this.state.validate;if(Number.isInteger(i)&&i>e.length&&(t="validateStringMin"),Number.isInteger(o)&&0!==o?(o<e.length||o<encodeURI(this.LOGIC_PASSWORD.getPasswordDecode()).split(/%..|./).length-1)&&(t="validateStringMax"):o=500,a&&""===e.trim()&&(t="validateRequest"),n&&""!==e){new RegExp(n,"gm").test(e)||(t="validateFormat")}if(void 0===r||"true"===r){/<\/?[a-z][\s\S]*>/g.test(e)&&(t="validateHtml")}if(""!==t){let e=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);return void 0!==e&&e.setFormValidateFromComponent(!0,this.props_smooth.default),this.state.help_mess=t,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:t}),!0}return this.setState({help_css:"",help_icon:"",help_mess:""}),!1},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.data_select={},this.setState({value:this.props_smooth.config.data_default},(()=>{let t=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"reload")}))},this.setDataDefault=()=>{this.data_select={},this.setState({value:this.props_smooth.config.data_default})},this.getInfoCompare=(t,e)=>{let{lang_compare:i,compare_info:o,isCompare:a}=this.state;if(a){let t=i[this.state.lang_select];if(o.is_change_value){let e=t.replace("{value_old}","");return e=e.replace("{value_new}",""),{is_change_value:o.is_change_value,compareInfo:{component_code:this.props_smooth.default.code,component_name:this.props_smooth.default.name,message:{title_before:o.cache_value,title_status:e,title_after:o.change_value}}}}}return{}},this.modalToggle=t=>{t||this.buildFormChild(),!0===this.state.CMD.disabled&&this.props.config.isEvaluation+""!=="true"||(void 0===t?this.setState({show_modal:s.ZP.autoID()}):t&&(this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})))},this.eventEnter=()=>{if(void 0!==this.props_smooth.config.useAction)if("true"===this.props_smooth.config.useAction){let t=s.ZP.parseJson(this.props_smooth.config.txFoActions);void 0!==t?_.ZP.runActionWithContext(t,{},this.props_smooth.infoA,this.props_smooth.infoA_parent,this.props_smooth.default):s.ZP.AppException("#CTEXTINPUT.onKeyDown","config_fo is undefined")}else if(void 0!==this.props_smooth.config.txFo){let t=s.ZP.parseJson(this.props_smooth.config.txFo);void 0!==t?_.ZP.runFoWithContext(t,{},this.props_smooth.infoA,this.props_smooth.infoA_parent,this.props_smooth.default):s.ZP.AppException("#CTEXTINPUT.onKeyDown","Error Json is undefined")}else s.ZP.AppException("#CTEXTINPUT.onKeyDown","txFo is undefined");else s.ZP.AppException("#CTEXTINPUT.onKeyDown","useAction is undefined");s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form).runRuleFunction(this.props_smooth.default,{},this.props_smooth.infoA_parent,"tab_enter")},this.onKeyUp=t=>{if("Enter"===t.key){this.eventEnter(),s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form).runRuleFunction(this.props_smooth.default,{},this.props_smooth.infoA_parent,"enter"),clearTimeout(this._enterTimeout),this._enterTimeout=void 0}},this.onBlur=()=>{if(clearTimeout(this._enterTimeout),this._enterTimeout=void 0,!1===this.checkValidate()){let t=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==t&&("true"!==String(this.props.config.isSearch)&&t.runRuleFunction(this.props_smooth.default,{},this.props_smooth.infoA_parent,"enter_tab"),!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(t.buildValidateForm(!1),t.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.buildValidateForm(!1)}})))}},this.onFocus=t=>{t.target.select()},this.checkDisable=()=>{let t=this.props_smooth.config.is_disabled;return"true"===t||!0===t},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props_smooth.default.name;return this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:t||this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props_smooth.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}}return""},this.renderDebug=()=>{if(s.ZP.isDebug()){this.props_smooth.config.structable=this.props_smooth.config.structable||"";let t=this.props_smooth.config.structable.split(".")[1],e=this.data_debug.data_cpn;return null===e&&(e="NULL"),(0,l.jsx)(a.Fragment,{children:(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${t}|:|${e}|`})})}},this.renderMess=t=>{switch(t){case"validateStringMin":return s.ZP.getLang(t).replace("{count}",this.state.validate.min);case"validateStringMax":return s.ZP.getLang(t).replace("{count}",this.state.validate.max);default:return s.ZP.getLang(t)}},this.setFocus=()=>{var t,e;null!==(t=this.myRef)&&void 0!==t&&null!==(e=t.current)&&void 0!==e&&e.ref_myInput&&this.myRef.current.ref_myInput.focus()},this.abs_CloseModal=()=>{this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})},this.renderFormChildDone=!1,this.LOGIC_PASSWORD=new g.y,this.component_code=s.ZP.autoID(),this.propertyConstructor=new p(t.inputType,t.default,t.config),this.props_smooth=(0,o.Z)({},this.props),null!==(e=this.props_smooth)&&void 0!==e&&null!==(i=e.validate)&&void 0!==i&&i.max&&(this.props_smooth.validate.max=Number(null===(n=this.props_smooth)||void 0===n||null===(r=n.validate)||void 0===r?void 0:r.max)),this.props_smooth.config=this.propertyConstructor.getConfig(),this.props_smooth.default=this.propertyConstructor.getDefault(),this._enterTimeout=void 0,this.data_default="",void 0!==this.props_smooth.config.data_default&&(this.props_smooth.config.data_default=this.convertStringWithContext(this.props_smooth.config.data_default),this.data_default=this.props_smooth.config.data_default);let c=this.props_smooth.validate;void 0===c&&(c={});let d="true"===this.props_smooth.config.isLookup,h="true"===this.props_smooth.config.isEvaluation,u="true"===String(this.props_smooth.validate.is_compare);this.callform_detail="",this.callform="",this.data_select={};let f={},m={};void 0!==this.props_smooth.lang&&(f=void 0!==this.props_smooth.lang.title?this.props_smooth.lang.title:this.props_smooth.lang,void 0!==this.props_smooth.lang.lang_compare&&(m=this.props_smooth.lang.lang_compare)),this.state={isCompare:u,compare_info:{cache_value:void 0,is_change_value:!1,change_value:void 0},value:this.data_default,value_old:"",lang_compare:m,lang:f,lang_select:s.ZP.getLangKey(),validate:c,isLookup:d,isEvaluation:h,data_view:"",show_modal:"none",show_modal_detail:"none",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:this.propertyConstructor.getCMD(),check_upper_case:this.props_smooth.config.is_upperCase,isFocus:!1,isLoading:!1,renderFormChildDone:!1,id_component:s.ZP.autoID(),hasErrorInForm:!1},this.data_debug={},this.myRef=a.createRef(),this.LOGIC_PASSWORD.setPassword(this.data_default)}componentDidUpdate(t){void 0===this.state.value&&this.setState({value:""}),t.value!==this.state.value&&this.state.value!==this.LOGIC_PASSWORD.getPasswordDisplay()&&(this.LOGIC_PASSWORD.setPassword(this.state.value),this.setState({value:this.LOGIC_PASSWORD.getPasswordDisplay()}))}buildFormChild(){if(this.state.isLookup){if(this.props_smooth.config.callform&&""!==this.props_smooth.config.callform.trim()){let t=s.ZP.cloneJson(this.props_smooth.infoA);t.componentParent=this.props_smooth.default,(0,h.BR)(this.props_smooth.config.callform,this.refs.b_modal.getElementContentModal(),t,this.props_smooth.default,"callform;"+this.state.id_component)}}else if(this.state.isEvaluation&&this.props_smooth.config.form_evaluation&&""!==this.props_smooth.config.form_evaluation.trim()){var t;let e=s.ZP.cloneJson(this.props_smooth.infoA);e.componentParent=this.props_smooth.default,(0,h.BR)(this.props_smooth.config.form_evaluation,this.refs.b_modal.getElementContentModal(),e,this.props_smooth.default,"callform;"+this.state.id_component,{title_component:(null===(t=this.state.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props_smooth.default.name,value_component:this.LOGIC_PASSWORD.getPasswordDecode().trim(),cmd_component:this.state.CMD})}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props_smooth.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){if(t.includes(".")){let i=t.split(".");const o=this.LOGIC_PASSWORD.getPasswordDecode().trim();void 0===e||"true"===e?s.ZP.putData(i[0],i[1],o,this.props_smooth.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],o):s.ZP.putDataGB(i[0],i[1],"")}}handleClearValue(){if("true"===String(this.props.config.isSearch)){let t="";this.LOGIC_PASSWORD.setPassword(t),this.setState({value:t})}}handleChange(t){if(t.target.value.includes("\n"))return;if(this.state.isLoading)return;let{compare_info:e}=this.state;e.cache_value!==t.target.value?(e.change_value=t.target.value,e.is_change_value=!0):e.is_change_value=!1;let i=t.target.value,o=Number(this.props_smooth.validate.max)||500;i.length>o||("true"===this.state.check_upper_case?i=i.toUpperCase():"-"===this.state.check_upper_case&&(i=i.toLowerCase()),this.LOGIC_PASSWORD.setPassword(i),this.setState({value:i,compare_info:e}))}openDetail(){if(""!==this.callform_detail&&void 0!==this.props_smooth.infoA){let t=s.ZP.getFormAppAuto(this.callform_detail);if(void 0!==t)return void("modal"===this.props_smooth.config.callform_detail_mode?(t.putDataAll_andSet(this.data_select),this.setState({show_modal_detail:s.ZP.autoID()})):(t.putDataAll_andSet(this.data_select),s.ZP.openForm(this.callform_detail)))}(0,h.QS)({form_code:this.props_smooth.config.callform_detail},this.props_smooth.infoA,this.props_smooth.default,"callform_detail",this.data_select)}listenHandlerUser(t){this.setState({value_old:t}),void 0===this.data_select&&(this.data_select={}),this.data_select.new_value=t;let e=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props_smooth.default,this.state.value,this.props_smooth.infoA_parent,"on_change")}render(){const t=(0,n.RP)("uInput"),e=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(e,{class:this.props.default.class_ofgroup+("false"===String(this.state.CMD.visible)?" malibu-invisible":""),children:[(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(t,(0,o.Z)({ref:this.myRef},this.getUInputConfig())),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal}),this.state.isLookup&&(0,l.jsx)(d,{info_component:this.props.default,show:this.state.show_modal_detail,infoA_call_form:this.state.infoA_call_form,ref:"b_modal_detail",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]}),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(t,(0,o.Z)({ref:this.myRef},this.getUInputConfig())),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal}),this.state.isLookup&&(0,l.jsx)(d,{info_component:this.props.default,show:this.state.show_modal_detail,infoA_call_form:this.state.infoA_call_form,ref:"b_modal_detail",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal}),this.state.isEvaluation&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("evaluation_modal_title"),info_component:this.props.default,size:"L",show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.props_smooth.config.form_evaluation,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]})}}const v=m,b={},y={},A={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class D{}D.get=()=>({main:b,position:y,cmd:A}),D.getCmd=()=>A,D.getValueCmd=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return void 0!==t.infoA.form_code&&(e=s.ZP.role_getComponent(t.infoA.form_code,t.default.codeHidden)||{},e=e.role||{}),e};const k=D,O=["tree","form","view","code","text"];class w extends a.Component{constructor(t){var e;super(t),e=this,this.setValidate=(t,e)=>{const{validate:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);i.request!==o.request&&this.setState({validate:o})},this.getUTextareaConfig=()=>{var t;let{schema:e}=this.state;return{config:{default:{title:(null===(t=this.state.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props.default.name,class:this.props.default.class,rows:10,isJson:"true"===this.props.config.isjson,required:"true"===this.state.validate.request,component_code:this.component_code},cmd:{disable:this.state.CMD.disabled+""==="true",visible:this.state.CMD.visible+""!=="false"},error:{message:s.ZP.getLang(this.state.help_mess),type:""!==this.state.help_mess?"danger":""},mode:{}},data:[],value:this.state.value,tooltip_copy:{icon:"copy",title:s.ZP.getLang("btn_copy")},abs_Copy:()=>{s.ZP.copyToClipboard(this.state.value)},json_config:"true"===this.props.config.isjson?{schema:e,mode:this.state.mode,indentation:4,modes:this.state.CMD.disabled+""==="true"?[]:O,text:this.getValueJson(),onChangeText:this.onChangeText,onModeChange:this.onModeChange}:{}}},this.onChangeText=t=>{this.setState({value:t})},this.onModeChange=t=>{this.setState({mode:t})},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.onRunRule=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"on_change",i=s.ZP.getFormAppAuto(e.props.infoA.key_form);void 0!==i&&i.runRuleFunction(e.props.default,{},e.props.infoA_parent,t)},this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o},(()=>{o.disabled+""==="true"?this.setState({mode:"view"}):this.setState({mode:"tree"})}))},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:t||this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}}return""},this.callDir=()=>this,this.setAdvanced=(t,e)=>{try{e||(e=JSON.stringify(JSON.parse(this.data_default),null,4))}catch(i){e=this.data_default}if(void 0!==this.props.config.isjson&&"true"===this.props.config.isjson)try{e=JSON.stringify(JSON.parse(e),null,4)}catch(i){}this.setState({value:e},(()=>{this.onRunRule("enter_tab")}))},this.setGetInfo=(t,e)=>{e=e[this.props.default.code];try{e||(e=JSON.stringify(JSON.parse(this.data_default),null,4))}catch(i){e=this.data_default}if(void 0!==this.props.config.isjson&&"true"===this.props.config.isjson)try{e=JSON.stringify(JSON.parse(e),null,4)}catch(i){}this.setState({value:e})},this.set=(t,e)=>{if(void 0!==e){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var i=this.props.config.structable_read.split(".");if(i.length>0&&void 0!==e[i[0]]&&void 0!==e[i[0]][i[1]]){if(void 0!==this.props.config.isjson)if("true"===this.props.config.isjson)try{"object"===typeof e[i[0]][i[1]]?this.setState({value:JSON.stringify(e[i[0]][i[1]])}):this.setState({value:e[i[0]][i[1]]})}catch(o){}else this.setState({value:e[i[0]][i[1]]});else this.setState({value:e[i[0]][i[1]]});return void this.onRunRule()}}let t="";this.data_default&&(t=this.data_default),this.setState({value:t})}},this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.getAdvanced=(t,e)=>this.state.value,this.reload=(t,e)=>{if(void 0!==this.props.config.isjson)if("true"===this.props.config.isjson)try{this.setState({value:this.data_default||""})}catch(i){this.setState({value:""})}else this.setState({value:this.data_default});else this.setState({value:this.data_default})},this.onBlur=t=>{if(!this.checkValidate()){if(void 0!==this.props.config.isjson&&"true"===this.props.config.isjson)try{this.setState({value:t.target.value})}catch(e){alert(e)}let i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(i.buildValidateForm(!1),i.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.buildValidateForm(!1)}}))}},this.component_code=s.ZP.autoID(),this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var i=this.props.lang;void 0===i&&(i={});let a=this.data_default,n=k.getValueCmd(this.props),r=this.props.validate;void 0===r&&(r={}),this.state={value:a,lang:i,validate:r,lang_select:s.ZP.getLangKey(),help_css:"",help_icon:"",help_mess:"",CMD:k.getValueCmd(this.props),schema:{title:this.props.default.name,type:"object",properties:{array:{type:"array",items:{type:"number"}},boolean:{type:"boolean"},number:{type:"number"},string:{type:"string"}},required:[]},mode:n.disabled+""==="true"?"view":"tree",hasErrorInForm:!1},this.handleChange=this.handleChange.bind(this)}isJson(t){try{JSON.parse(t)}catch(e){return!1}return!0}getValueJson(){try{return"code"===this.state.mode||"text"===this.state.mode?this.state.value?this.state.value:"":this.state.value?JSON.stringify(JSON.parse(this.state.value)):(this.setState({value:JSON.stringify({})}),"{}")}catch(t){return this.state.value}}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config!==t.config&&this.setState({config:this.props.config}),this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.property!==t.property&&this.setState({property:this.props.property})}readData(t,e){if(t.includes(".")){var i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}handleChange(t){this.setState({value:t.target.value})}checkValidate(){let t="",e=this.state.value.trim();if("true"===this.state.validate.request&&""===e&&(t="validateRequest"),""!==t){let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);return void 0!==e&&e.setFormValidateFromComponent(!0,this.props.default),this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:t}),!0}return this.setState({help_css:"",help_icon:"",help_mess:""}),!1}render(){const t=(0,n.RP)("uTextArea"),e=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(e,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getUTextareaConfig()),{},{abs_Change:this.handleChange,abs_Blur:this.onBlur})}),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getUTextareaConfig()),{},{abs_Change:this.handleChange,abs_Blur:this.onBlur})})}}const C=w;const x=class{constructor(t,e,i){this.getProperty=()=>this.property,this.setCMD=t=>{void 0!==t.visible&&("true"!==t.visible&&"false"!==t.visible||(this.property.cmd.visible=t.visible)),void 0!==t.disabled&&("true"!==t.disabled&&"false"!==t.disabled||(this.property.cmd.disabled=t.disabled)),void 0!==t.block&&("true"!==t.block&&"false"!==t.block||(this.property.cmd.block=t.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=t=>{this.property.cmd.visible=t},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=t=>{this.property.cmd.disabled=t},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};var S=i(1896);class M extends a.Component{constructor(t){var e;if(super(t),this.modalToggle=t=>{void 0===t?this.setState({show_modal:s.ZP.autoID()}):t&&this.setState({show_modal:"none"})},this.setDataOOP=(t,e)=>{this.setState({dataOOP:e},(()=>{s.ZP.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,e,this.props.infoA_parent,"update")}))},this.getDataOOP=(t,e)=>{const{list_component:i}=t,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.state.dataOOP}},this.setCMD=(t,e)=>{if(void 0!==t&&void 0!==e){const i=t.list_component;if(i&&i.includes(this.props.default.code)){const{CMD:t}=this.state;let i=Object.assign(s.ZP.cloneJson(t),e);t.disabled===i.disabled&&t.visible===i.visible&&t.block===i.block||this.setState({CMD:i})}}},this.getInfoCheckRun=()=>{let t=this.propertyConstructor.getCMD();return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.state.lang_default?this.setState({lang:s.ZP.getLang(this.props.default.code),lang_select:s.ZP.getLangKey()}):this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.get=(t,e)=>{void 0!==this.props.config.uploadfile&&"true"===this.props.config.uploadfile.active&&s.ZP.putData(this.props.default.code,"uploadFile",this.uploadfile_result,this.props.infoA)},this.runFO=(t,e)=>{e.action&&_.ZP.runActionWithContext(e.action,{},this.props.infoA,this.props.infoA_parent,this.props.default),e.txFo&&_.ZP.runFoWithContext(e.txFo,{},this.props.infoA,this.props.infoA_parent,this.props.default)},this.setLoadingAction=(t,e)=>{let i=(null===e||void 0===e?void 0:e.isLoading)||!1;this.setState({isLoading:i})},this.fileSelectHandler=t=>{},this.clearTimeOut=()=>{clearTimeout(this.timer),this.timer=null},this.reload=()=>{this.setState({test:"",isLoading:!1})},this.set=()=>{this.setState({test:""})},this.showToast=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s.ZP.showToast(t,e,i)},this.propertyConstructor=new x(t.inputType,t.default,t.config),this.timer=void 0,this.uploadfile_result={},this.disabled=!1,void 0!==this.props.infoA.form_code){var i=s.ZP.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=i&&void 0!==i.role&&(void 0!==i.role.disabled&&(!0===i.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==i.role.visible&&(!0===i.role.visible?this.propertyConstructor.setCMD_visible(t.visibility&&!0):this.propertyConstructor.setCMD_visible(t.visibility&&!1)))}let o=(null===(e=this.props.config.uploadfile)||void 0===e?void 0:e.filetype)||"*";this.fileTypeRegx=o.split(",").map((function(t){return new RegExp(t.replace("*","[^\\/,]+"))}));var a=this.props.lang;void 0===a&&(a={});let n=!1;void 0!=={btn_remove:{color:"danger",icon:"fa-trash-o"},btn_save:{color:"success",icon:"fa-save"},btn_add:{color:"primary",icon:"fa-plus"},btn_modified:{color:"warning",icon:"fa-pencil-square-o"},btn_update:{color:"warning",icon:"fa-cloud-upload"},btn_cancel:{color:"default",icon:"fa-ban"},btn_clear:{color:"default",icon:"fa-times"},btn_import:{color:"primary",icon:"fa-upload"},btn_export:{color:"primary",icon:"fa-download"},btn_accept:{color:"primary",icon:"fa-check"},btn_apply:{color:"primary",icon:"fa-check"},btn_search:{color:"primary",icon:"fa-search"},btn_copy:{color:"primary",icon:"fa-files-o"},btn_print:{color:"base",icon:"fa-print"},btn_printVoucher:{color:"base",icon:"fa-file-text-o"}}[this.props.default.code]&&(a=s.ZP.getLang(this.props.default.code),n=!0);var r=!1;void 0!==this.props.config.isLookup&&"true"===this.props.config.isLookup&&(r=!0),this.state={lang:a,lang_select:s.ZP.getLangKey(),lang_default:n,dataOOP:{},count:1,isLoading:!1,show_modal:"none",isLookup:r,CMD:this.propertyConstructor.getCMD()},this.time_last_click=0}getTitleButton(t,e,i,o){return t?e||o:e[i]?e[i]:o}getTemplateConfig(){var t,e;let{lang_default:i,lang:o,isLoading:a}=this.state;return{config:{default:{title:this.getTitleButton(i,o,s.ZP.getLangKey(),this.props.default.name),type:this.props.config.color,class:"true"===(null===(t=this.props.config.uploadfile)||void 0===t?void 0:t.active)?"malibu-button-upload":this.props.default.class,icon:this.props.config.icon,accept:null===(e=this.props.config.uploadfile)||void 0===e?void 0:e.filetype,att_content:""},cmd:{disable:a||"true"===String(this.state.CMD.disabled),isLoading:a,visible:"true"===String(this.state.CMD.visible)}}}}checkFileTypeAccept(t){return this.fileTypeRegx.some((e=>e.test(t)))}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config!==t.config&&this.setState({config:this.props.config}),this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.property!==t.property&&this.setState({property:this.props.property})}componentDidMount(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let t=s.ZP.cloneJson(this.props.infoA);t.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),t,this.props.default,"callform")}setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}onClick(){void 0!==this.timer&&null!==this.timer||(this.timer=setTimeout((()=>{clearTimeout(this.timer),this.timer=null}),3e3),void 0!==this.props.config.uploadfile&&"true"===this.props.config.uploadfile.active||this.this_redirect())}this_redirect(){if(this.propertyConstructor.getCMD_visible())if(void 0!==this.props.config.useAction)if("true"===this.props.config.useAction){var t=s.ZP.parseJson(this.props.config.txFoActions);void 0!==t?_.ZP.runActionWithContext(t,{},this.props.infoA,this.props.infoA_parent,this.props.default):s.ZP.AppException("#CBUTTON.onClick","config_fo is undefined")}else if(void 0!==this.props.config.txFo){var e=s.ZP.parseJson(this.props.config.txFo);void 0!==e?_.ZP.runFoWithContext(e,{},this.props.infoA,this.props.infoA_parent,this.props.default):s.ZP.AppException("#CBUTTON.onClick","Error Json is undefined")}else s.ZP.AppException("#CBUTTON.onClick","txFo is undefined");else s.ZP.AppException("#CBUTTON.onClick","useAction is undefined");else alert(s.ZP.getLang("#sysDontLoveMe"));var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click"),s.ZP.isDebug()&&s.ZP.copyToClipboard(JSON.stringify(this.props.config.txFo))}render(){var t,e;const i=(0,n.RP)("uButton"),r=(0,n.RP)("uInputFile");if("false"===this.state.CMD.visible)return null;const c=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(c,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(a.Fragment,{children:"true"===(null===(t=this.props.config.uploadfile)||void 0===t?void 0:t.active)?(0,l.jsx)(r,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Change:t=>{if(void 0!==t.target)if(t.target.files.length>0)if(this.file_upload=t.target.files[0],this.checkFileTypeAccept(t.target.files[0].type))if(this.props.config.isUploadFileZipNeptune){let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!0),(0,S.BH)(t.target.files[0],this.props.infoA)}else{(t.target.files[0].size/1024/1024).toFixed(4)<=10?(0,S.bq)(t.target.files[0],t.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((t=>{this.uploadfile_result=t,this.uploadfile_result.file=this.file_upload,this.this_redirect()}),(t=>{t.statusCode&&t.statusText?this.showToast(t.statusCode+":"+t.statusText+"#",!1):this.showToast(s.ZP.getLang("FileTypeError"),!1)})):this.showToast(s.ZP.getLang("FileSizeError"),!1)}else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1)},abs_Click:(t,e)=>{this.onClick()}})}):(0,l.jsx)(i,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Click:(t,e)=>{this.onClick()}})})}),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(a.Fragment,{children:"true"===(null===(e=this.props.config.uploadfile)||void 0===e?void 0:e.active)?(0,l.jsx)(r,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Change:t=>{if(void 0!==t.target)if(t.target.files.length>0)if(this.file_upload=t.target.files[0],this.checkFileTypeAccept(t.target.files[0].type))if(this.props.config.isUploadFileZipNeptune){let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!0),(0,S.BH)(t.target.files[0],this.props.infoA)}else{(t.target.files[0].size/1024/1024).toFixed(4)<=10?(0,S.bq)(t.target.files[0],t.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((t=>{this.uploadfile_result=t,this.uploadfile_result.file=this.file_upload,this.this_redirect()}),(t=>{t.statusCode&&t.statusText?this.showToast(t.statusCode+":"+t.statusText+"#",!1):this.showToast(s.ZP.getLang("FileTypeError"),!1)})):this.showToast(s.ZP.getLang("FileSizeError"),!1)}else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1)},abs_Click:(t,e)=>{this.onClick()}})}):(0,l.jsx)(i,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Click:(t,e)=>{this.onClick()}})})})}}const P=M;var T=i(2200);const I={btn_delete:{color:"danger",icon:"fa-trash-o"},btn_view:{color:"info",icon:"fa-eye"},btn_select:{color:"primary",icon:"fa-check"},btn_print:{color:"base",icon:"fa-print"},view:{color:"info",icon:"fa-eye"},delete:{color:"danger",icon:"fa-trash-o"}};class F extends a.Component{constructor(t){super(t),this.onClickButton=async t=>{var e,i,o,a;if(!0===((null===(e=this.props)||void 0===e||null===(i=e.tableContext)||void 0===i||null===(o=i.state)||void 0===o?void 0:o.CMD)||{}).disabled&&!0!==(null===(a=this.props)||void 0===a?void 0:a.isButtonSystem))return;let n=t.default,r=t.config,l=s.ZP.getFormAppAuto(this.props.infoA.key_form);if(await l.runRuleFunction(n,JSON.parse(this.row_data),this.props.infoA_parent,"on_click"),void 0!==r.useAction)if("true"===r.useAction){let t=s.ZP.parseJson(r.txFoActions);void 0!==t?_.ZP.runActionWithContext(t,JSON.parse(this.row_data),this.props.infoA,this.props.infoA_parent,n):s.ZP.AppException("#cColumnAction.onClick","config_fo is undefined")}else if(void 0!==r.txFo){let t=s.ZP.parseJson(r.txFo);void 0!==t?_.ZP.runFoWithContext(t,JSON.parse(this.row_data),this.props.infoA,this.props.infoA_parent,n):s.ZP.AppException("#cColumnAction.onClick","Error Json is undefined")}else s.ZP.AppException("#cColumnAction.onClick","txFo is undefined");else s.ZP.AppException("#cColumnAction.onClick","useAction is undefined");s.ZP.isDebug()&&s.ZP.copyToClipboard(r.txFo)},this.row_data={},this.state={lang_select:this.props.lang_select,data:this.callBuildColumn(!0)}}callBuildColumn(t){this.row_data=JSON.stringify(this.props.value);let e=this.props.data.filter((t=>s.ZP.checkDynamicCondition(this.props.value,t.default.condition)));if(void 0!==t&&t)return e;this.setState({data:e})}componentDidUpdate(t){this.props.lang_select!==t.lang_select&&this.setState({lang_select:this.props.lang_select}),this.props.value===t.value&&this.props.data===t.data||this.callBuildColumn()}getIcon(t){var e,i;return null!==(e=I[t.default.code])&&void 0!==e&&e.icon?null===(i=I[t.default.code])||void 0===i?void 0:i.icon:t.config.icon?t.config.icon:""}render(){var t;const e=(0,n.RP)("uTableColumnButtonHover");return 0===(null===(t=this.state.data)||void 0===t?void 0:t.length)?(0,l.jsx)("td",{style:{boxShadow:"inset 0 -1px 0 #cbd6e2, inset 1px 0 0 #cbd6e2, inset 0px 0 0 #ecf0f4 !important"}}):(0,l.jsx)(e,{title_parent:"title",dataFull:{icon:"more_vert",data:[...this.state.data].map((t=>{var e;return{icon_item:this.getIcon(t),title:(null===(e=t.lang)||void 0===e?void 0:e[this.props.lang_select])||t.default.name,dataItem:t,abs_Click:this.onClickButton}}))}})}}const N=F,L={},E={},j={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class Z{}Z.get=()=>({main:L,position:E,cmd:j}),Z.getCmd=()=>j,Z.getValueCmd=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return void 0!==t.infoA.form_code&&(e=s.ZP.role_getComponent(t.infoA.form_code,t.default.codeHidden)||{},e=e.role||{}),e};const R=Z;var Q=i(6633);class z extends a.Component{constructor(t){super(t),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.callDir=()=>this,this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)"true"===o[a]&&(o[a]=!0),"false"===o[a]&&(o[a]=!1);this.setState({CMD:o})},this.set=(t,e)=>{},this.reload=(t,e)=>{this.dataGlobal=s.ZP.getDataLimited(this.state.config_table.query_data,0,999999999);let i={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[],total:this.dataGlobal.total},o=[],a=0;void 0!==i.total&&(a=i.total);let n=this.buildPaging(a,this.state.config_table);void 0!==i.data&&(o=i.data),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:o,paging:n,page_index:1,total_record:a})},this.getData=()=>({total_paging:this.state.total_record}),this.getAdvanced=(t,e)=>this.getData(),this.get=(t,e)=>{if(null!==t&&void 0!==t&&t.list_component&&(";"+t.list_component+";").includes(";"+this.props.default.code+";")){let e=this.props.config.structable;if(e.includes("|")){let i=e.split("|");for(let e=0;e<i.length;e++)this.readData(i[e],t.inform)}else this.readData(e,t.inform)}},this.abs_getDataLimited=function(t,e){let i={data:this.state.dataFilter.slice(t,t+e)||[],total:this.state.dataFilter.length},o=i.data;if(!0===this.state.hasCheck)for(let n=0;n<o.length;n++)o[n].hasCheck__=!1;let a=1;void 0!==i.total&&(a=i.total);let s=this.buildPaging(a,this.state.config_table);this.setState({data:o,total_record:a,paging:s})},this.recordChangeHandler=t=>{let e=this.state.config_table;e.paging_record=this.state.paging_record[t];let i=this.buildPaging(this.state.total_record,e);this.setState({paging:i,page_index:1,selectedRecordIndex:t,config_table:e},(()=>{this.abs_getDataLimited(0,this.state.paging_record[t])}))},this.abs_PagingActive=t=>{let e=(t-1)*this.state.config_table.paging_record,i=this.state.config_table.paging_record;this.setState({page_index:t},(()=>{this.abs_getDataLimited(e,i)}))},this.getHeaderConfig=t=>{let e=[];return!0===t&&e.push({title:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),e=e.concat(this.state.columns.map((t=>{var e,i;return{title:(null===(e=this.state.lang)||void 0===e||null===(i=e[this.state.lang_select])||void 0===i?void 0:i[t.title])||t.title,id:t.code,config:{width:"",isFrozen:!1},value_search:this.state.columnSearchValue[t.code]}}))),e},this.handelClearSearch=()=>{let t=this.state.columnSearchValue;for(const s in t)t[s]="";let e=this.dataGlobal.data,i=e.slice(0,this.state.config_table.paging_record),o=e.length,a=this.buildPaging(o,this.state.config_table);this.setState({data:i,dataFilter:e,paging:a,page_index:1,total_record:o,columnSearchValue:t})},this.getCaptionLang=(t,e,i)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${e}_${i}`]&&(this.CACHE_CDLIST[`${e}_${i}`]=s.ZP.data_cdList(e,i,!0));let o={};for(const s of this.CACHE_CDLIST[`${e}_${i}`]){let t=s.c_cdlist.mcaption||{},e=s.c_cdlist.caption||"";o[s.c_cdlist.cdid]=s.c_cdlist={mcaption:t,caption:e}}const a=o[t]||{};let n=(null===a||void 0===a?void 0:a.mcaption)||{},r=(null===a||void 0===a?void 0:a.caption)||"";return n[s.ZP.getLangKey()]||r},this.handelChangeSearch=(t,e)=>{var i;let o=this.state.columnSearchValue;o[e]=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"";let a=this.dataGlobal.data.filter((t=>{let e=!0;for(const a in o){let n=s.ZP.getOOP(t,a);const r=this.cols_config[a];if("columnMask"===r.inputtype){var i;let t=r.config.mask;(t.includes("DD")&&t.includes("MM")&&t.includes("YY")||!0===(null===(i=r.config)||void 0===i?void 0:i.isDate))&&(void 0!==r.data_type&&"string"===r.data_type&&(n=Q.cI(n,"YYYY-MM-DDTHH:mm:ss.SSS[Z]")),n=Q.FW(n,t))}if("ColumnCdlist"===r.inputtype){let{cdgrp:t,cdname:e}=r.config;n=this.getCaptionLang(n,t,e)}!1===String(n).toLowerCase().includes(o[a].toLowerCase())&&(e=!1)}return e})),n=a.slice(0,this.state.config_table.paging_record),r=a.length,l=this.buildPaging(r,this.state.config_table);this.setState({data:n,dataFilter:a,paging:l,page_index:1,total_record:r,columnSearchValue:o})},this.abs_autoCallBackData=()=>{let t=this.state.paging_record;t[this.state.selectedRecordIndex]+=5,this.setState({paging_record:t},(()=>{this.recordChangeHandler(0)}))},this.handleClickTableRow=t=>{},this.handleMoveLeft=t=>{let e=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;e&&t--,"true"===i&&t--;let o=t-1,{columns:a}=this.state,s=a.splice(t,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.handleMoveRight=t=>{let e=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;e&&t--,"true"===i&&t--;let o=t+1,{columns:a}=this.state,s=a.splice(t,1)[0];a.splice(o,0,s),this.setState({columns:a})};let e=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let t=this.props.config.paging_record.split(",");t.length>1&&(e=t)}let i={paging_record:e[0],query_data:this.props.config.query_data};this.dataGlobal=s.ZP.getDataLimited(i.query_data,0,999999999)||{};let o={data:[],total:0};"false"!==this.props.config.isLoadDataStart&&(o={data:this.dataGlobal.data.slice(0,i.paging_record)||[],total:this.dataGlobal.total}),void 0===o&&(o={});let a=0;void 0!==o.total&&(a=o.total);let n=this.buildPaging(a,i),r=[];void 0!==o.data&&(r=o.data);let l=[],c=t.default.code.trim();if(void 0!==t.btn_of_grid&&""!==c)for(let s=0;s<t.btn_of_grid.length;s++){c===t.btn_of_grid[s].config.onTable.trim()&&(l[l.length]=t.btn_of_grid[s])}let d=this.props.lang;void 0===d&&(d={}),this.state={dataFilter:this.dataGlobal.data,data:r,lang:d,lang_select:s.ZP.getLangKey(),paging:n,total_record:a,paging_record:e,selectedRecordIndex:0,page_index:1,STT:!1,hasCheck:!1,columns:void 0===this.props.config.columns?[]:JSON.parse(this.props.config.columns),action:l,config_table:i,CMD:R.getValueCmd(this.props),columnSearchValue:{}},this.cols_config={};for(const s of this.state.columns)this.cols_config[s.code]=s}buildPaging(t,e){let i=[],o=1;if(t>0)for(let a=0;a<t;a+=parseInt(e.paging_record))i[i.length]=o,o++;else i[i.length]=1;return i}pageIndexChange(t){this.setState({page_index:t.target.value}),this.abs_getDataLimited((parseInt(t.target.value)-1)*this.state.config_table.paging_record,this.state.config_table.paging_record)}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config!==t.config&&this.setState({columns:JSON.parse(this.props.config.columns)}),this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.property!==t.property&&this.setState({property:this.props.property})}readData(t,e){if(t.includes(".")){let i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}checkAll(t){if(this.state.hasCheck){let e=this.state.data;for(let i=0;i<e.length;i++)e[i].hasCheck__=t.target.checked;this.setState({checkAll:t.target.checked,data:e})}}render(){var t,e,i,o,a;let r=this.state.action.length>0,c=this.getHeaderConfig(r);const d=(0,n.RP)("uTable"),h=(0,n.RP)("uTableBodyRow");return"false"===String(this.state.CMD.visible)?null:(0,l.jsx)(d,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,abs_MoveLeft:this.handleMoveLeft,abs_MoveRight:this.handleMoveRight,Header:{data:c,config:{mode:{hasSearch:!0}}},dataEmpty:{isShow:!(null!==(t=this.state)&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{modeTitle:"center",isFrozenHeader:!1,isMoveColumn:"true"===String(null===(i=this.props.config)||void 0===i?void 0:i.isMoveColumn),isResize:"true"===String(null===(o=this.props.config)||void 0===o?void 0:o.isResize)}},uPagination:{config:{show:s.ZP.getLang("cTable_Paging_show"),in:s.ZP.getLang("cTable_Paging_in"),jump_to_page:s.ZP.getLang("cTable_Paging_jump_to_page"),results:s.ZP.getLang("cTable_Paging_results")},mode:{paging_min:"MIN"===(null===(a=this.props.config)||void 0===a?void 0:a.paging_mode)},result_total:this.state.total_record,abs_PagingActive:this.abs_PagingActive,abs_setRecordActive:this.recordChangeHandler,paging_index:this.state.page_index,paging_record:this.state.paging_record.map(((t,e)=>({number:t,selected:e===this.state.selectedRecordIndex})))}},children:this.state.data.map(((t,e)=>(0,l.jsxs)(h,{abs_Click:this.handleClickTableRow,children:[!0===r&&(0,l.jsx)(N,{tableContext:this,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,data:this.state.action,value:t,title:"Action"},e),this.state.columns.map(((i,o)=>{var a,n;let r=T.Z[i.inputtype];return void 0===r&&(r=T.Z.ColumnDefault),(0,l.jsx)(r,{tableContext:this,title_parent:i.title,rowData:t,code_col:i.code,index_row:e,title:(null===(a=this.state.lang)||void 0===a||null===(n=a[this.state.lang_select])||void 0===n?void 0:n[i.title])||i.title,config:i.config,data:s.ZP.getOOP(t,i.code),value:t},o)}))]},e)))})}}const U=z,B={structable:"table.col",structable_read:"table.col",data_default:"",format:"#,###.00",decimal_length:2};var Y=i(9425);class H extends a.Component{constructor(t){super(t),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:t,infoComponent:this.props.default}}return""},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.setAdvanced=(t,e)=>{this.setValue(e)},this.setGetInfo=(t,e)=>{e=e[this.props.default.code],this.setValue(e)},this.set=(t,e)=>{let i=s.ZP.getNodeJson(e,this.props.config.structable_read);this.setValue(i,!0)},this.getAdvanced=(t,e)=>this.getValue(),this.get=(t,e)=>{var i=this.props.config.structable.split("|");let o=this.getValue();for(const n of i){var a=n.split(".");if("false"===t.inform)s.ZP.putDataGB(a[0],a[1],o);else s.ZP.putData(a[0],a[1],o,this.props.infoA)}},this.checkValidate=()=>{let t=!1,e=this.getValue();const{request:i,max:o,min:a,max_length:n}=this.props_smooth.validate;if(void 0!==e&&""!==e||"true"!==i.toString()){if(void 0!==e){let i=this.state.value.replace(/\D/g,"");i.length>Number(n)&&Number(n)>0&&encodeURI(i).split(/%..|./).length-1>Number(n)?(t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"jCurrency_maxLength"})):e>Number(o)&&null!==o&&void 0!==o&&""!==o?(t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"validateNumMax"})):e<Number(a)&&null!==a&&void 0!==a&&""!==a&&(t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"validateNumMin"}))}}else t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"});if(t){var r=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==r&&r.setFormValidateFromComponent(!0,this.props.default)}else this.setState({help_css:"",help_icon:"",help_mess:""});return t},this.reload=(t,e)=>{this.setValue(this.props_smooth.config.data_default)},this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o){let t=o[a];"false"===t&&(o[a]=!1),"true"===t&&(o[a]=!0)}this.setState({CMD:o})},this.onBlur=async()=>{void 0!==this.state.value&&!this.state.value.includes("-.")&&0!==Number(this.state.value)||""===this.state.value||await this.setValue(0),!1===this.checkValidate()&&!0===this.state.isChange&&(this.setState({isChange:!1}),this.onRunRule("enter_tab")),this.onFocus=!1},this.onChange=t=>{let e=t.target;const{selectionStart:i,value:o}=e,{decimal_char:a,int_char:s,decimal_length:n}=this,r=this.state.value;let l=o;if(l.includes("-")&&!1===this.isNegative)return void this.setState({value:r},(()=>{e.setSelectionRange(0,0)}));if(r.includes(a)&&!o.includes(a)&&a){let t=r.lastIndexOf(a);l=o.substring(0,t)+a+o.substring(t,o.length),l===a&&(l="")}let c=r,d=o.lastIndexOf(a);o.indexOf(a)!==o.lastIndexOf(a)&&a?d=c.length-n:(c=(0,Y.Nx)(l,n,s,a)||"",d=i-(o.length-c.length),1===i?d=1:i>o.lastIndexOf(a)&&(d+=1));let h=c.replace(/\D/g,"");const u=this.props_smooth.validate.max_length;h.length>Number(u)&&Number(u)>0&&(c=r),this.setState({value:c,isChange:!0},(()=>{e.setSelectionRange(d,d)}))},this.renderMess=t=>{switch(t){case"validateNumMin":return s.ZP.getLang(t).replace("{count}",this.props_smooth.validate.min);case"validateNumMax":return s.ZP.getLang(t).replace("{count}",this.props_smooth.validate.max);case"validateRequest":default:return s.ZP.getLang(t);case"jCurrency_maxLength":return s.ZP.getLang(t).replace("@{max_length}",this.props_smooth.validate.max_length)}},this.props_smooth=this.getConfigSmooth(this.props),this.int_char="",this.decimal_char="",this.decimal_length=0,this.decimal_char="",this.decimal_length=0,this.isNegative=!1,(void 0===(0,Y.XG)(this.props_smooth.validate.min)||(0,Y.XG)(this.props_smooth.validate.min)<0)&&(this.isNegative=!0),this.state={help_css:"",help_icon:"",help_mess:"",value:"",CMD:{},isChange:!1},this.onFocus=!1,this.data_debug={}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent()),this.setValue(this.props_smooth.config.data_default)}onRunRule(t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)}getConfigSmooth(t){let e=s.ZP.cloneJson(t);return e.config=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,o.Z)({},B);for(let i in e)void 0!==t[i]&&(""!==e[i]&&""===t[i]||(e[i]=t[i]));return e||{}}(e.config),e.validate.max_length||(e.validate.max_length=16),e}getValue(){return(0,Y.XG)(this.state.value,this.int_char,this.decimal_char)}setValue(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props_smooth.config.data_default,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.isNegative;t+="";const{decimal_char:i,int_char:o,decimal_length:a}=this;let s=(0,Y.Nx)(t,a,o,i);(void 0===s||s.includes("-")&&!1===e)&&(s=""),0===Number(s)&&""!==s&&(s=(0,Y.Nx)(0,a,o,i)),this.setState({value:s,help_css:"",help_icon:"",help_mess:""},(()=>{this.onRunRule("on_change")}))}renderDebug(){if(s.ZP.isDebug()){void 0===this.data_debug&&(this.data_debug={});let t=(this.props.config.structable||"").split(".")[1],e=this.data_debug.data_cpn;return null===e&&(e="NULL"),void 0===this.props.config.cdlist&&(this.props.config.cdlist={}),(0,l.jsx)(a.Fragment,{children:(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${t}|:|${e}|`})})}}render(){if(!1===this.state.CMD.visible)return null;const t=(0,n.RP)("uInput");return(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChange,abs_Blur:this.onBlur})})}getConfigTemplate(){return{config:{default:{title:this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.props_smooth.validate.request},cmd:{disable:this.state.CMD.disabled+""==="true",visible:!0,error:{message:this.renderMess(this.state.help_mess),type:""}},mode:{textAlign:"right"}},mode:{readOnly:"true"===String(this.props.config.readOnly)},value:this.state.value}}}const V=H,W={structable:"",structable_read:"",cdlist:{},data_default:"",data_mode:"query",query_data:"",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:'[\n        {\n            "c_cdlist": {\n                "cdid": null,\n                "caption": "val_1"\n            }\n        },\n        {\n            "c_cdlist": {\n                "cdid": "id_2",\n                "caption": "val_2"\n            }\n        }\n        ,\n        {\n            "c_cdlist": {\n                "cdid": "id_3",\n                "caption": "val_3"\n            }\n        }\n    ]',key_selected:"c_cdlist.cdid",useAction:"false",isAutoDefault:"true",isLabel:"false",isHasDataNull:"false"},G=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,o.Z)({},W);for(let i in e)t[i]&&(""!==e[i]&&""===t[i]||(e[i]=t[i]));return e||{}},J={ui:{},data:{}},q=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let e in J)void 0===t[e]&&(t[e]={});return t},K={c_cdlist:{cdid:"select_null",caption:"All"}},X=t=>{if(!t)return[];if(void 0!==t.data_mode){let e=[],{query_data:i,json_data:o}=t;if("cdlist"===t.data_mode){let i="",o="";void 0!==t.cdlist&&void 0!==t.cdlist.cdgrp&&void 0!==t.cdlist.cdname&&(i=t.cdlist.cdgrp,o=t.cdlist.cdname),e=s.ZP.data_cdList(i,o)||[]}else e=s.ZP.getDataLimited(i,0,99999)||[],e=e.data||[];let a=s.ZP.parseJson(o).concat(e)||[];return"true"===t.isHasDataNull&&a.unshift($(t)),a=tt(a),a||[]}return[]},$=t=>{if("cdlist"===t.data_mode)return K;{var e,i;let o=null===(e=t.key_selected)||void 0===e?void 0:e.split("."),a=null===(i=t.selected_view_format)||void 0===i?void 0:i.split(".");o[2]=a[a.length-1];let s={};return s[o[0]]={},s[o[0]][o[1]]="select_null",s[o[0]][o[2]]="All",s}},tt=t=>{for(let e=0;e<t.length;e++)t[e].key_jselect=e;return t},et=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1?arguments[1]:void 0;switch(arguments.length>2?arguments[2]:void 0){case"ArrowDown":t<e&&(t+=1);break;case"ArrowUp":t>0&&(t-=1)}return t<0&&(t=0),t>=e&&(t=e-1),t},it=(t,e)=>{let i=t.split(" "),o=!1;return i.forEach((i=>{if("@"===i[0]){let a=i.substring(1),n=s.ZP.getOOP(e,a);if("c_cdlist.caption"===a){let t=s.ZP.getOOP(e,"c_cdlist.mcaption");null!==t&&void 0!==t&&t[s.ZP.getLangKey()]&&(n=null===t||void 0===t?void 0:t[s.ZP.getLangKey()])}""===n&&(o=!0),t=t.replace(i,n)}})),o&&(t=t.replace(" - ","")),t},ot=(t,e,i)=>{if(void 0===t||void 0===e||void 0===i)return[];if(null===e||null===i)return[];if(""===t||""===i)return[];let o=(t+"").split(";"),a=[];return e.forEach(((t,e)=>{let n=s.ZP.getOOP(t,i)+"";null!==n&&void 0!==n&&o.includes(n+"")&&a.push(e)})),a},at=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,i="";for(let o=0;o<e.length;o++){const a=e[o].code||"";i+=s.ZP.getOOP(t,a)}return i},st=(t,e,i)=>{let o="";for(let a=0;a<t.length;a++){a>0&&(o+=";");const n=t[a];o=s.ZP.getOOP(e[n],i)}return o},nt={structable:"",structable_read:"",cdlist:{},data_default:"",data_mode:"query",query_data:"",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n            {\n                "title": "Name",\n                "code": "col.col_name"\n            },\n            {\n                "title": "ID",\n                "code": "col.col_id"\n            }\n        ]',col_format:"@c_cdlist.caption",json_data:'[\n            {\n                "col": {\n                    "col_name": "val_1",\n                    "col_id": "val_2"\n                }\n            },\n            {\n                "col": {\n                    "col_name": "val_3",\n                    "col_id": "val_4"\n                }\n            }\n        ]',key_selected:"c_cdlist.cdid",useAction:"false",isAutoDefault:"true",isLabel:"false",isHasDataNull:"false"};const rt=class{constructor(t,e,i){this.getProperty=()=>this.property,this.setCMD=t=>{void 0!==t.visible&&("true"!==t.visible&&"false"!==t.visible||(this.property.cmd.visible=t.visible)),void 0!==t.disabled&&("true"!==t.disabled&&"false"!==t.disabled||(this.property.cmd.disabled=t.disabled)),void 0!==t.block&&("true"!==t.block&&"false"!==t.block||(this.property.cmd.block=t.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=t=>{this.property.cmd.visible=t},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=t=>{this.property.cmd.disabled=t},this.getCMD_enable=()=>this.property.cmd.disabled,this.getConfig=()=>{let t=this.property.config,e=(0,o.Z)({},nt);for(let i in e)t[i]&&(""!==t[i]&&""===t[i]||(e[i]=t[i]));return e||{}},this.getDefault=()=>this.property.default,this.property={inputType:t,config:i,default:e,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class lt extends a.Component{constructor(){super(...arguments),this.convertMaskToValue=(t,e)=>{this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT");let i=e.mask;if(this.isDate=i.includes("DD")&&i.includes("MM")&&i.includes("YY")||!0===(null===e||void 0===e?void 0:e.isDate),String(i).startsWith("$")&&String(i).endsWith("$")&&(i=s.ZP.getParameterSystem(i.replace(/\$/g,""))),this.isDate){if(!t&&0!==t)return"";if(void 0!==this.dateFormat){var o;let t=(null===(o=i)||void 0===o?void 0:o.split(" "))||[];if(t.length>=1){let e="";for(let i=0;i<t.length;i++){var a,n,r;null!==(a=t[i])&&void 0!==a&&a.includes("DD")&&null!==(n=t[i])&&void 0!==n&&n.includes("MM")&&null!==(r=t[i])&&void 0!==r&&r.includes("YY")?e+=""===e?this.dateFormat:" "+this.dateFormat:e+=""===e?t[i]:" "+t[i]}i=e}else i=this.dateFormat}return Q.sx(Q.xY(t),i,e.mask_mode_time)}return Q.Ui(t,i)},this.getValue=(t,e)=>this.convertMaskToValue(t,e)||""}}const ct=lt;class dt extends a.Component{constructor(){super(...arguments),this.getValue=t=>t}}const ht={ColumnMask:ct,ColumnDefault:dt,columnDefault:dt,columnMask:ct};class ut extends a.Component{constructor(t){var e;super(t),e=this,this.convertStringWithContext=t=>{let e=s.ZP.getlistCodeContext(t);for(let i=0;i<e.length;i++){const o=e[i];let a=s.ZP.context_get(o.code);void 0!==a&&(t=t.replace(o.key,a))}return t},this.reloadData=()=>{let t=X(this.config);this.setState({datas:t,datas_view:t},(async()=>{await this.setSelected(ot(this.state.val_select_tmp,t,this.config.key_selected)||[])}))},this.getConfigSmooth=t=>{let e=s.ZP.cloneJson(t);return e.config=G(e.config),e.config.data_default=this.convertStringWithContext(e.config.data_default),e.config.json_data=this.convertStringWithContext(e.config.json_data),e},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.isRunRule=(t,e)=>{if(!t)return!1;if("*"===t)return!0;return t.split(";").includes(e)},this.setCMD=(t,e)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),e);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.toolAutoValue=()=>{let{datas:t}=this.state,e=t.length>1?[1]:[0];"false"!==String(this.state.CMD.disabled)&&"false"!==String(this.state.CMD.visible)||this.setSelected(e)},this.set=async(t,e)=>{this.data_debug.data_form=e;let{structable_read:i,key_selected:o}=this.config,{datas:a}=this.state,s="",n=[];if(e&&i){let t=i.split(".");if(2===t.length){if(!e[t[0]]||void 0===e[t[0]][t[1]])return void this.setSelectedDefault();if(s=e[t[0]][t[1]],this.data_debug.data_cpn=s,this.last_selected_data=s,n=ot(s,a,o),0!==n.length){let{compare_info:i}=this.state;return e[t[0]][t[1]]!==i.cache_value?i.cache_value=this.getSelectedView(n):i.is_change_value=!1,await this.setSelected(n),this.setState({val_select_tmp:s,compare_info:i}),void this.onRunRule("update")}}else{let i=e;for(let e=0;e<t.length;e++)if(e===t.length-1){if(void 0===i||null===i[t[e]])return void this.setSelectedDefault();if(s=i[t[e]],this.data_debug.data_cpn=s,this.last_selected_data=s,n=ot(s,a,o),0!==n.length){let{compare_info:o}=this.state;return i[t[e]]!==o.cache_value?o.cache_value=this.getSelectedView(n):o.is_change_value=!1,await this.setSelected(n),this.setState({val_select_tmp:s,compare_info:o}),void this.onRunRule("update")}}else void 0!==i&&null!==i[t[e]]&&(i=i[t[e]])}}void 0===this.data_debug.data_cpn&&(this.data_debug.data_cpn="undefined"),this.setState({list_selected:[],val_select_tmp:s,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jSelect_NotFindValue"})},this.setAdvanced=async(t,e)=>{let i=t.component_action||"",{code:o}=this.props.default,a=i.split(";").includes(o);if(void 0!==e&&""!==e){var s,n;let{key_selected:t}=this.config,{datas:i}=this.state,o=[];o=ot(e,i,t);let r=(null===(s=o)||void 0===s?void 0:s.toString())!==(null===(n=this.state.list_selected)||void 0===n?void 0:n.toString());if(0!==o.length)await this.setSelected(o),r&&!a&&this.onRunRule("enter_tab");else{let t=[0];0!==t.length&&(await this.setSelected(t),r&&!a&&this.onRunRule("enter_tab"))}}else{let t=[0];0!==t.length&&(await this.setSelected(t),a||this.onRunRule("enter_tab"))}},this.setGetInfo=async(t,e)=>{e=e[this.props.default.code];let i=t.component_action||"",{code:o}=this.props.default,a=i.split(";").includes(o);if(void 0!==e&&""!==e){var s,n;let{key_selected:t}=this.config,{datas:i}=this.state,o=[];o=ot(e,i,t);let r=(null===(s=o)||void 0===s?void 0:s.toString())!==(null===(n=this.state.list_selected)||void 0===n?void 0:n.toString());if(0!==o.length)await this.setSelected(o),r&&!a&&this.onRunRule("enter_tab");else{let t=[0];0!==t.length&&(await this.setSelected(t),r&&!a&&this.onRunRule("enter_tab"))}}else{let t=[0];0!==t.length&&(await this.setSelected(t),a||this.onRunRule("enter_tab"))}},this.getAdvanced=t=>{let{list_component:e}=t,{code:i}=this.props_smooth.default;if(this.isRunRule(e,i)){let{list_selected:t,datas:e,get_data_format:i,structable:o}=this.state,a=st(t,e,i);if(2===o.split(".").length)return a}},this.getInfoErrror=()=>{var t,e,i;return""!==this.state.help_mess&&!0===this.checkValidate()&&"jSelect_NotFindValue"!==this.state.help_mess?(this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:(null===(t=this.props_smooth.lang)||void 0===t||null===(e=t.ui)||void 0===e||null===(i=e[s.ZP.getLangKey()])||void 0===i?void 0:i[this.props_smooth.default.name])||this.props_smooth.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}):""},this.setDataGB=async(t,e)=>{let{datas:i,key_selected:o,list_selected:a,selected_view:n}=this.state,{json_data:r}=this.props_smooth.config;e=s.ZP.parseJson(r).concat(e)||[],e=tt(e);let l=s.ZP.getOOP(i[a[0]],o);this.setState({datas:e,datas_view:e,list_selected:a,selected_view:n},(()=>{let t=this.state.val_select_tmp||l,e=ot(t,this.state.datas,o);t&&0!==e.length?(this.state.val_select_tmp="",this.setSelected(e)):this.setSelected([0])}))},this.get=(t,e)=>{let i=this.props_smooth.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.getAdvanced=(t,e)=>{let{list_selected:i,datas:o,get_data_format:a}=this.state;return st(i,o,a)},this.runFO=(t,e)=>{e.action&&_.ZP.runActionWithContext(e.action,{},this.props.infoA,this.props.infoA_parent,this.props.default),e.txFo&&_.ZP.runFoWithContext(e.txFo,{},this.props.infoA,this.props.infoA_parent,this.props.default)},this.checkValidate=()=>{let t=!1,e=this.state.list_selected;if(void 0!==e&&void 0!==this.state.validate.request&&!t&&this.state.validate.request){let{list_selected:i,datas:o,get_data_format:a}=this.state,s=st(i,o,a);0!==e.length&&null!==s&&""!==s||(t=!0,this.state.help_mess="validateRequest",this.setState({help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"}))}if(t){let t=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==t&&t.setFormValidateFromComponent(!0,this.props.default)}else{this.clearError();let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(t.buildValidateForm(!1),t.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.buildValidateForm(!1)}}))}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.setSelectedDefault(),this.setState({search_input:"",datas_view:this.state.datas})},this.setDataDefault=()=>{this.setSelectedDefault()},this.onEvent=t=>{switch(t){case"closeTable":this.setState({isOpen:!1});break;case"openTable":!1===this.state.isOpen&&this.setState({isOpen:!0})}},this.onSelectedRow=async(t,e)=>{let{is_multi_select:i,list_selected:o}=this.state,a=[e];if(i){a=o;let t=a.indexOf(e);t>-1?a.splice(t,1):a.push(e)}await this.setSelected(a,e,!0),await this.checkValidate(),await this.onRunRule("enter_tab")},this.onRunRule=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"on_change",i=s.ZP.getFormAppAuto(e.props_smooth.infoA.key_form);void 0!==i&&i.runRuleFunction(e.props_smooth.default,{},e.props_smooth.infoA_parent,t)},this.setSelectedDefault=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"enter_tab",{datas:i,data_default:o}=e.state,{key_selected:a}=e.config,s=ot(o,i,a);0===s.length&&i.length>0&&"false"!==e.props_smooth.config.isAutoDefault&&(s=[0],e.state.search_input=""),await e.setSelected(s),e.onRunRule(t||"enter_tab")},this.setSelected=(t,e,i)=>{let o=this.getSelectedView(t),{compare_info:a}=this.state;a.cache_value!==o?(a.change_value=o,a.is_change_value=!0):a.is_change_value=!1;let s=this.state.val_select_tmp;i&&(s=""),this.setState({list_selected:t,selected_view:o,pos_row:e,isOpen:!1,val_select_tmp:s,compare_info:a},(()=>{this.clearError(),this.onRunRule()}))},this.getSelectedView=t=>{let{selected_view_format:e,datas:i,table_format:o,is_multi_col:a}=this.state,s="";for(let n=0;n<t.length;n++){n>0&&(s+=";");let r=i[t[n]],l=it(e,r);if(a){let t=o[this.props.config.index_view_value||0],e=ht[t.inputtype];void 0===e&&(e=ht.columnDefault),s+=(new e).getValue(l,t.config)}else s+=l}return s},this.onChangeSearch=t=>{let{datas:e,table_format:i,is_multi_col:o,col_format:a,compare_info:n}=this.state,r=t.target.value,l=e,c=s.ZP.getArrayWithRegex(a,"@([^\\s]*)");""!==r&&(l=e.filter((t=>{let e="";return e=at(t,!0===o?i:c),s.ZP.searchPerfect(r,e)}))),this.setState({search_input:r,datas_view:l,pos_row:-1,compare_info:n})},this.onKeyBoard=t=>{let{pos_row:e,datas_view:i}=this.state;switch(t.key){case"ArrowDown":this.setState({pos_row:et(e,i.length,"ArrowDown")},(()=>{this.refs.table_jselect&&this.refs.table_jselect.focus()}));break;case"ArrowUp":this.setState({pos_row:et(e,i.length,"ArrowUp")},(()=>{this.refs.table_jselect&&this.refs.table_jselect.focus()}));break;case"Enter":i[e]&&this.onSelectedRow(i[e].key_jselect);break;case"Delete":this.setSelected([],-1);break;case"Backspace":break;default:this.refs.search_jselect&&this.refs.search_jselect.focus()}},this.getDataOOP=(t,e)=>0===this.state.list_selected.length?void 0:this.state.datas[this.state.list_selected[0]],this.onBlur=()=>{this.checkValidate()},this.setValidate=(t,e)=>{let{validate:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),e);i.request!==o.request&&this.setState({validate:o})},this.getOptionConfig=t=>t.map(((t,e)=>{if(this.state.is_multi_col){return{data:this.state.table_format.map((e=>{let i=ht[e.inputtype];return void 0===i&&(i=ht.columnDefault),(new i).getValue(s.ZP.getOOP(t,e.code),e.config)})),value:t.key_jselect,selected:this.state.list_selected.includes(t.key_jselect)}}var i;return{title:it(this.props_smooth.config.col_format,t),value:t.key_jselect,selected:this.state.list_selected.includes(t.key_jselect),title_hover:this.props.config.cdlist?"CodeID: "+(null===t||void 0===t||null===(i=t.cdlist)||void 0===i?void 0:i.cdid)+" - CodeName: "+this.props.config.cdlist.cdname+" - CodeGroup: "+this.props.config.cdlist.cdgrp:void 0}})),this.abs_Change=async(t,e)=>{await this.onSelectedRow(t,t),this.checkValidate()},this.getInfoCompare=(t,e)=>{let{lang_compare:i,compare_info:o,isCompare:a}=this.state;if(a){let t=i[this.state.lang_select];if(o.is_change_value){let e=t.replace("{value_old}","");return e=e.replace("{value_new}",""),{is_change_value:o.is_change_value,compareInfo:{component_code:this.props_smooth.default.code,component_name:this.props_smooth.default.name,message:{title_before:o.cache_value,title_status:e,title_after:o.change_value}}}}}return{}},this.clearCacheCompare=()=>{let{compare_info:t}=this.state;t.cache_value=void 0,t.is_change_value=!1,this.setState({compare_info:t})},this.renderThisComponent=()=>{const t=(0,n.RP)("uSelectItem");if("true"===String(this.props.config.isLabel)){const t=(0,n.RP)("uLabel");return(0,l.jsx)(t,{dataFull:{config:{default:{title:this.getSelectedView(this.state.list_selected)||"",class:this.props_smooth.default.class},cmd:{visible:"true"===String(this.state.CMD.visible)}}}})}return(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_Change:this.abs_Change,abs_search:this.onChangeSearch})})},this.renderMess=t=>{switch(t){case"validateNumMin":return s.ZP.getLang(t).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(t).replace("{count}",this.state.validate.max);case"validateRequest":default:return s.ZP.getLang(t);case"jSelect_NotFindValue":return s.ZP.isDebug()?s.ZP.getLang(t):""}},this.propertyConstructor=new rt(t.inputType,t.default,t.config),this.props_smooth=this.getConfigSmooth(this.props),this.component_code=s.ZP.autoID();let{config:i,lang:a}=this.props_smooth;this.config=G(i),this.lang=q(a);let{table_format:r,is_multi_col:c,is_multi_select:d,selected_view_format:h,get_data_format:u,col_format:p,key_selected:f,structable:g,structable_read:m}=this.config;this.data_default="",void 0!==this.props_smooth.config.data_default&&(this.data_default=this.props_smooth.config.data_default);let v=this.props_smooth.validate;void 0===v&&(v={}),this.callform_detail="",this.callform="";let b="true"===String(this.props_smooth.validate.is_compare),y={},A={};void 0!==this.props_smooth.lang&&(y=void 0!==this.props_smooth.lang.title?this.props_smooth.lang.title:this.props_smooth.lang,void 0!==this.props_smooth.lang.lang_compare&&(A=this.props_smooth.lang.lang_compare));let D=X(this.config);this.state={isCompare:b,structable:g,structable_read:m,data_default:this.data_default,value:this.data_default,compare_info:{cache_value:void 0,is_change_value:!1},val_select_tmp:"",lang_compare:A,lang:y,lang_select:s.ZP.getLangKey(),validate:v,infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",datas:D,datas_view:D,is_multi_col:"false"!==c,table_format:("false"===c?r:s.ZP.parseJson(r))||[],col_format:p,get_data_format:u,key_selected:f,selected_view:"",selected_view_format:h,list_selected:[],pos_row:-1,search_input:"",isOpen:!1,is_multi_select:"false"!==d,CMD:this.propertyConstructor.getCMD(),max_item_length:50,hasErrorInForm:!1},this.data_debug={}}UNSAFE_componentWillMount(){this.data_view_template=this.getOptionConfig(this.state.datas_view)}componentDidMount(){this.setSelectedDefault(),setTimeout((()=>{s.ZP.FromAddComponent(this.props_smooth.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}UNSAFE_componentWillUpdate(t,e){this.state.datas_view===e.datas_view&&this.state.lang_select===e.lang_select||(this.data_view_template=this.getOptionConfig(e.datas_view))}componentDidUpdate(t){}readData(t,e){let{list_selected:i,datas:o,get_data_format:a}=this.state,n=st(i,o,a);""!==this.state.help_mess&&(n=null);let r=t.split(".");2===r.length&&(void 0===e||"true"===e?s.ZP.putData(r[0],r[1],n,this.props_smooth.infoA):"false"===e?s.ZP.putDataGB(r[0],r[1],n):s.ZP.putDataGB(r[0],r[1],""))}getConfigTemplate(){var t,e,i,o,a;let n=this.props_smooth.default.name;return{config:{default:{search:{placeholder:s.ZP.getLang("jselect_search")},placeholder:s.ZP.getLang("jselect_placeholder"),data_status:s.ZP.getLang("jselect_no_result"),title:(null===(t=this.props_smooth.lang)||void 0===t||null===(e=t.ui)||void 0===e||null===(i=e[s.ZP.getLangKey()])||void 0===i?void 0:i[n])||(null===(o=this.state.lang)||void 0===o?void 0:o[s.ZP.getLangKey()])||n,type:"",class:this.props_smooth.default.class,required:this.state.validate.request,title_hover:s.ZP.isDebug()&&this.props.config.cdlist?"CodeName: "+this.props.config.cdlist.cdname+" - CodeGroup: "+this.props.config.cdlist.cdgrp:void 0,component_code:this.component_code},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:"true"===String(this.state.CMD.visible),error:{message:"jSelect_NotFindValue"===this.state.help_mess?"":this.renderMess(this.state.help_mess),type:""}},mode:{moreColumn:this.state.is_multi_col},column:this.state.table_format},data:null===(a=this.data_view_template)||void 0===a?void 0:a.map((t=>{t.selected=t.value===this.state.list_selected[0];let e=JSON.parse(JSON.stringify(t));return e.title_hover=s.ZP.isDebug()?t.title_hover:void 0,e})),input_value:this.getSelectedView(this.state.list_selected)||"",search_value:this.state.search_input||""}}render(){const t=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup+("false"===String(this.state.CMD.visible)?" malibu-invisible":""),children:[this.renderThisComponent(),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):this.renderThisComponent()}}const pt=ut;var _t=i(4200);const ft=function(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"date";e=e.replace("_","0");let a=(0,Q.w5)(e,t,i,o);return(0,Q.sx)(a,t,i)},gt={a:/[a-zA-Z]/,9:/\d/,h:/\d/,H:/\d/,m:/\d/,s:/\d/,"*":/./,_:/[a-zA-Z\d]/,L:/[a-zA-Z\d]/,".":/./,0:/\d/,z:/[a-zA-Z]/,Z:/[a-zA-Z ]/,A:/[A-Za-z0-9\\_]/},mt={"#":"_"},vt={0:{status:!0,reg_remove:/[^\d/]/g},L:{status:!0,reg_remove:/[^a-zA-Z\d]/g},z:{status:!0,reg_remove:/[^a-zA-Z]/g},Z:{status:!0,reg_remove:/[^a-zA-Z ]/g},".":{status:!0,reg_remove:""},A:{status:!0,reg_remove:/[^A-Za-z0-9\\_]/g}},bt={EMAIL:{regex_validate:/^[\w-.]+@([\w-]+.)+[\w-]{2,4}$/,regex_lang:"jMaskInput_WrongFormat"},EMAIL_MULTI:{regex_validate:/^[\w-.]+@([\w-]+.)+[\w-]{2,4}$/,regex_lang:"jMaskInput_WrongFormat",isMulti:!0}},yt={"-":".{100}",EMAIL:".{100}",EMAIL_MULTI:".{500}"},At=t=>mt[t],Dt=t=>gt[t],kt=t=>{let e=t[0];return vt[e]},Ot=t=>{var e,i;if(!t)return!1;let o=t[0];if(!0!==(null===(e=vt[o])||void 0===e?void 0:e.status))return!1;let a=!0;for(const s of t)t[0]!==s&&(a=!1);return!0===(null===(i=kt(o))||void 0===i?void 0:i.status)&&a},wt=(t,e)=>{let i=[];const o=/(\\.|.)/g;let a;for(;null!==(a=o.exec(t));){a.index===o.lastIndex&&o.lastIndex++;const t=a[0],s=1===t.length?"regex":"const";let n={type:s,key:t};"regex"===s?Dt(t)?"date"!==e&&"time"!==e||!/[^/:]/.test(t)?(n.reg=Dt(t),n.value="_"):(n.reg=Dt("9"),n.value=t):"date"!==e&&"time"!==e||!/[^/:]/.test(t)?At(t)?(n.value=At(t),n.type="static"):(n.value=t,n.type="const"):(n.reg=Dt("9"),n.value=t):n.value=t[1],i.push(n)}return i},Ct=(t,e)=>{let i="";for(const o of t)i+="date"===e||"time"===e?o.key:o.value;return i},xt=(t,e)=>{let i="";for(const o of t)i+=o.key.includes("\\")?o.value:o.key;return i},St=t=>{let e=/\${([^}]+)}/gm.exec(t);if(null!==e)try{let i=s.ZP.context_get(e[1])||"";t=t.replace(e[0],i)}catch(i){}return t},Mt=(t,e,i,o,a,s)=>{if(!t||!e||!i)return"";let n="";if(!t)return"";switch(i){case"default":for(const o in e){let i=t[o];if("regex"===e[o].type){if(!1===e[o].reg.test(i))return"";n+=i}else"static"===e[o].type&&(n+=i)}break;case"date":case"time":let i=Ct(e);if("string"===o)n=a&&""!==a?(0,Q.Al)(t,i,a,s):(0,Q.w5)(t,i,s);else n=(0,Q.w5)(t,i,s);break;default:n=t}return n||0===n?n:""},Pt=function(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t||!e||!i)return"";let a="";if(!t)return"";switch(i){case"default":for(const i in e){let s=t[i];"regex"===e[i].type?!1===e[i].reg.test(s)?a+=" ":a+=s:("static"===e[i].type||"const"===e[i].type&&o)&&(a+=s)}break;case"date":case"time":break;default:a=t}return a||0===a?a:""},Tt=(t,e,i,o,a)=>{if(!t&&0!==t||!e||!i)return"";let s="";const n=xt(e);switch(i){case"default":let i=0;for(const a in e)if("regex"===e[a].type)if(Ot(n))s+=t[i]||"",i++;else{if(t[i]&&e[a].reg.test(t[i]))s+=t[i];else{if("OPTIMISTIC"!==o)return"";s+=e[a].value}i++}else"static"===e[a].type?(s+=e[a].value,e[a].value===t[i]&&i++):s+=e[a].value;break;case"date":case"time":let r=Ct(e);s=(0,Q.sx)(t,r,a);break;default:s=t}return s||""},It=(t,e,i,o,a,s,n)=>{let r=Mt(t,e,i,a,s,n);return null!==o&&void 0!==o&&o.length?Tt(r,o,i):r},Ft=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,n=t;return null!==o&&void 0!==o&&o.length&&(n=Mt(t,o,i,s)),Tt(n,e,i,a,s)},Nt=()=>["SUN","MON","TUE","WED","THU","FRI","SAT"].map(((t,e)=>({title:t,type:"gray"}))),Lt=t=>{t||(t=window.moment.utc().toDate().getMonth()+1);return["January","February","March","April","May","June","July","August","September","October","November","December"].map(((e,i)=>({title:e,selected:t-1===i})))},Et=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1900,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2100,i=[];if(t<=e)for(let o=t;o<=e;o++)i.push(o);return i},jt=t=>{let e=window.moment.utc(t).toDate().getMonth()+1,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];(t=>t%400===0||t%100!==0&&t%4===0)(window.moment.utc(t).toDate().getFullYear())&&i[2]++;let o=[];for(let a=1;a<=i[e];a++)o.push(a);return o},Zt=(t,e)=>{t||(t=Date.parse(window.moment.utc().toDate()));let i=window.moment.utc(t).toDate(),o=window.moment.utc((0,_t.X7)(t,{M:-1})).toDate(),a=window.moment.utc((0,_t.X7)(t,{M:1})).toDate(),s=Date.parse(o),n=Date.parse(a),r=jt(s),l=jt(t),c=jt(n),d=window.moment.utc([i.getFullYear(),i.getMonth(),1]).toDate(),h=window.moment.utc([i.getFullYear(),i.getMonth(),l.length]).toDate(),u=r.slice(r.length-d.getDay(),r.length),p=c.slice(0,6-h.getDay()),_=u.map((t=>{let e=String(t),a="gray",n=window.moment.utc(new Date(s).setDate(t)).valueOf();return t===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()&&(a="primary"),{title:e,type:a,value:n}})),f=l.map((e=>{let o=String(e),a="",s=window.moment.utc(new Date(t).setDate(e)).valueOf();return e===i.getDate()&&(a="primary"),{title:o,type:a,value:s}})),g=p.map((t=>{let e=String(t),o="gray",s=window.moment.utc(new Date(n).setDate(t)).valueOf();return t===i.getDate()&&a.getMonth()===i.getMonth()&&a.getFullYear()===i.getFullYear()&&(o="primary"),{title:e,type:o,value:s}})),m=_.concat(f);return m=m.concat(g),m},Rt={structable:"",structable_read:"",data_default:"",data_type:"edit",component_title:"",mask_format:"",mask_data_format:"",value_type:"all",auto_delete:"true",mask_mode:"default",content_style:"",format_value_type_string:"",min_year:"",max_year:"",hasSuggest:!1,keyLoadCache:"",PK_key:"",moreInformation_key:""};const Qt=class{constructor(t,e,i){this.getProperty=()=>this.property,this.setCMD=t=>{void 0!==t.visible&&("true"!==t.visible&&"false"!==t.visible||(this.property.cmd.visible=t.visible)),void 0!==t.disabled&&("true"!==t.disabled&&"false"!==t.disabled||(this.property.cmd.disabled=t.disabled)),void 0!==t.block&&("true"!==t.block&&"false"!==t.block||(this.property.cmd.block=t.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=t=>{this.property.cmd.visible=t},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=t=>{this.property.cmd.disabled=t},this.getCMD_enable=()=>this.property.cmd.disabled,this.combinePrevConfig=t=>{let e=t||this.property.config,i=(0,o.Z)({},Rt);for(let o in i)e[o]&&(""!==e[o]&&""===e[o]||(i[o]=e[o]));return i||{}},this.getDefault=()=>this.property.default,this.property={inputType:t,config:i,default:e,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class zt extends a.Component{constructor(t){var e;super(t),e=this,this.getComponentContructor=(t,e)=>{let i=this.buildPropsSmooth(e);return{props_smooth:i,state_smooth:this.buildStateSmooth(i)}},this.buildPropsSmooth=t=>{let e=s.ZP.cloneJson(t);if(e.config=this.propertyConstructor.combinePrevConfig(t.config),"date"===e.config.mask_mode&&void 0!==this.dateFormat){let t=e.config.mask_format.split(" ");if(t.length>=1){let s="";for(let e=0;e<t.length;e++){var i,o,a;null!==(i=t[e])&&void 0!==i&&i.includes("DD")&&null!==(o=t[e])&&void 0!==o&&o.includes("MM")&&null!==(a=t[e])&&void 0!==a&&a.includes("YY")?s+=""===s?this.dateFormat:" "+this.dateFormat:s+=""===s?t[e]:" "+t[e]}e.config.mask_format=s}else e.config.mask_format=this.dateFormat}else String(e.config.mask_format).startsWith("$")&&String(e.config.mask_format).endsWith("$")&&(e.config.mask_format=s.ZP.getParameterSystem(e.config.mask_format.replace(/\$/g,"")));var n;e.config.const_mask_format=e.config.mask_format,e.config.mask_format=(n=e.config.mask_format,yt[n]||n),e.config.mask_format=(t=>{for(const e in gt){let i,o=new RegExp(`\\${e}{(\\d+)}`,"g");for(;null!==(i=o.exec(t));){i.index===o.lastIndex&&o.lastIndex++;let a="";for(let t=0;t<Number(i[1]);t++)a+=e;t=t.replace(i[0],a)}}return t})(e.config.mask_format);let r="";""!==e.config.data_default&&(r=St(e.config.data_default),r="HH:mm"===e.config.format_value_type_string?Q.ec(r,e.config.format_value_type_string,e.config.mask_mode_time):Number(r)||"string"!==e.config.value_type||-1!==r.indexOf("libDate_cal")?((t,e)=>{let i=t,o=/libDate_cal\((.*),(.*)\)/gm.exec(i);if(null!==o)try{i=(0,_t.X7)((0,Q.xY)(o[1]),JSON.parse(o[2]))}catch(n){}let a=/JF_DATE\.([^(]+)\(([^)]*)\)/gm.exec(i);if(null!==a)try{t=s.ZP.persist_convertCondition(t);let e=a[1],o=a[2].split(",");i=_t.ZP[e].apply(null,o)}catch(n){}return i})(r,e.config.format_value_type_string):Q.cI(r,e.config.format_value_type_string)),void 0!==r&&null!==r||(r="");let l=2100,c=1900;if("date"===this.propertyConstructor.property.config.mask_mode){let t=St(e.config.max_year),i=St(e.config.min_year);(t||0===t)&&(l=Number(t)?new Date(Number(t)).getFullYear():new Date(t).getFullYear()),(i||0===i)&&(c=Number(i)?new Date(Number(i)).getFullYear():new Date(i).getFullYear())}return e.config.data_default=r,e.config.max_year=l,e.config.min_year=c,e},this.buildStateSmooth=t=>{let e=t.config,i=wt(e.mask_format,e.mask_mode),o=wt(e.mask_data_format,e.mask_mode),a=Ct(i,e.mask_mode),n=e.mask_mode,r={status:!1,reg_remove:""};if(Ot(e.mask_format)){let t=kt(e.mask_format);void 0!==t&&(r.status=t.status,r.reg_remove=t.reg_remove)}let l=a,c=Date.parse(new Date),d={mounth_data:Lt(),year_data:Et(t.config.min_year,t.config.max_year),day_data:Nt(),day_of_mounth_data:Zt(c,c),date_view:c};return{isLookup:"true"===this.props.config.isLookup,error_input:!1,lang_select:s.ZP.getLangKey(),component_title:this.props.default.name||"",CMD:this.propertyConstructor.getCMD(),format_value_type_string:t.config.format_value_type_string,value:"",mask_value:"",mask_value_temp:"",date_selected_cache:0,content_style:t.config.content_style,value_type:t.config.value_type,mask_mode:n,mask_format:l,mask_regs:i,mask_regs_to:o,mask_placeholder:a,free_style:r,date_picker:d,max_year:t.config.max_year,min_year:t.config.min_year,validate:t.validate,hasSuggest:"true"===t.config.hasSuggest,keyLoadCache:t.config.keyLoadCache,moreInformation_key:t.config.moreInformation_key,PK_key:t.config.PK_key}},this.getInfoErrror=()=>{var t;let{help_mess:e}=this.state;return e?(this.setState({hasErrorInForm:!0}),{info:this.getErrorLang(this.state.help_mess),key:(null===(t=this.state.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props_smooth.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}):""},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.getDataOOP=(t,e)=>this.data_select,this.getAdvanced=(t,e)=>{let{format_value_type_string:i}=this.state;return this.maskInputGet(i)},this.setAdvanced=(t,e)=>{if(t.codeHidden){if(t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(void 0!==this.props.config.data_view)var i="";void 0!==this.props.config.data_value&&(i=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),"date"!==this.state.mask_mode&&"time"!==this.state.mask_mode||(i=Q.xY(i)),this.maskInputSet(i,"enter_tab",void 0,void 0,void 0)}}else t.list_component&&(null!==e&&void 0!==e||(e=""),"date"!==this.state.mask_mode&&"time"!==this.state.mask_mode||(e=Q.xY(e)),this.maskInputSet(e,"on_change",void 0,void 0,void 0))},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],t.codeHidden){if(t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(void 0!==this.props.config.data_view)var i="";void 0!==this.props.config.data_value&&(i=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),"date"!==this.state.mask_mode&&"time"!==this.state.mask_mode||(i=Q.xY(i)),this.maskInputSet(i,"enter_tab",void 0,void 0,void 0)}}else t.list_component&&(null!==e&&void 0!==e||(e=""),"date"!==this.state.mask_mode&&"time"!==this.state.mask_mode||(e=Q.xY(e)),this.maskInputSet(e,"on_change",void 0,void 0,void 0))},this.get=(t,e)=>{let i=this.props_smooth.config.structable.split("|");for(const o of i)this.readData(o,t.inform)},this.runRule=t=>{if(t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)}},this.set=(t,e)=>{var i;let o=this.props_smooth.config.structable_read,{mask_mode:a,format_value_type_string:s,mask_mode_time:n}=this.state,r=o.split("."),l=null===e||void 0===e||null===(i=e[r[0]])||void 0===i?void 0:i[r[1]];void 0!==l||this.props_smooth.config.structable_read||(l=this.props_smooth.config.data_default),void 0!==l&&(null==l&&(l=""),"date"!==a&&"time"!==a||(l="HH:mm"===s?Q.ec(l,s,n):Q.xY(l)),this.maskInputSet(l,"on_change",void 0,void 0,void 0))},this.reload=(t,e)=>{let i=this.props_smooth.config;this.data_select={},this.maskInputSet(i.data_default,"reload",void 0,void 0,"OPTIMISTIC")},this.setDataDefault=()=>{let t=this.props_smooth.config;this.data_select={},this.maskInputSet(t.data_default,void 0,void 0,void 0,"OPTIMISTIC")},this.checkValidate=()=>{let t=this.maskInputGet(),e=new Date(t).getFullYear(),i="",{min_year:o,max_year:a,mask_mode:n}=this.state;if(this.state.validate.request&&!t&&(i="validateRequest",this.state.mask_value&&0!==t&&(i="jMaskInput_WrongFormat")),"date"===n&&(o>e&&""!==this.props_smooth.config.min_year&&(i="jDate_Min"),a<e&&""!==this.props_smooth.config.max_year&&(i="jDate_Max")),i||(i=this.maskInputValidate()),i){var r=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==r&&r.setFormValidateFromComponent(!0,this.props.default)}return this.state.help_mess=i,this.setState({help_mess:i}),!!i},this.setMaskConfig=(t,e)=>{let i=this.props_smooth;i.config.mask_format=e.mask_format,i.config.mask_data_format=e.mask_data_format,i.config.mask_mode=e.mask_mode,this.props_smooth=this.buildPropsSmooth(i);let o=this.buildStateSmooth(this.props_smooth),{mask_format:a,mask_mode:s,mask_reg:n,mask_regs:r,mask_regs_to:l,mask_placeholder:c,mask_value:d,mask_value_temp:h,free_style:u,date_picker:p,validate:_}=o;this.setState({validate:_,mask_format:a,mask_mode:s,mask_reg:n,mask_regs:r,mask_regs_to:l,mask_placeholder:c,mask_value:d,mask_value_temp:h,free_style:u,date_picker:p})},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()},(()=>{this.onBlur()}))},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{if(void 0!==t.key&&void 0!==t.key_form){let e=t.key.split(";");this[e[0]]=t.key_form,e[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setCallBuildFormBack=(t,e)=>{if(void 0!==t.key&&void 0!==t.key_form){let e=t.key.split(";");this[e[0]]=t.key_form,e[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.modalToggle=t=>{t||this.buildFormChild(),!0!==this.state.CMD.disabled&&(void 0===t?this.setState({show_modal:s.ZP.autoID()}):t&&(this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})))},this.clearError=()=>{this.setState({help_mess:""})},this.maskInputSet=(t,e,i,o,a,s)=>{let n,{mask_regs:r,mask_regs_to:l,mask_mode:c,mask_mode_time:d,max_year:h,min_year:u,mask_value:p,value_type:_}=this.state,f={end_pos:0,start_pos:0,help_mess:"",mask_value:"",value:t,mask_value_temp:""},g=xt(r,this.props_smooth.config.mask_mode);if("date"===c||"time"===c){n=Ft(t,r,c,[],"",d);let e=Q.ng(n,Ct(r),d);if(f.date_picker=((t,e,i)=>{t=t?new Date(t):window.moment.utc().toDate();const o=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));return{mounth_data:Lt(o.getMonth()+1),year_data:Et(e,i),day_data:Nt(),day_of_mounth_data:Zt(o.getTime()),date_view:t}})(e,u,h),s&&/\d\d:\d\d/.test(p)){let t=p.split(" ");if(/\d\d:\d\d/.test(t[t.length-1])){let e=n.split(" ");n=e.length>1?e[0]+" "+t[t.length-1]:t[t.length-1]}}}else g.includes("HH:mm")&&/\d\d:\d\d/.test(p)?t?(n=ft(g,p,d,c),"Invalid date"===n&&(n=this.state.mask_value)):n="":n=Ft(t,r,c,l,a);f.mask_value=n,f.mask_value_temp=n,f=Object.assign(f,o),this.setState(f,(()=>{this.runRule(e),i&&i()}))},this.maskInputGet=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{mask_regs:i,mask_regs_to:o,mask_value:a,mask_mode:s,value_type:n,mask_mode_time:r}=e.state,l="";if(e.state.free_style.status)return a;let c=xt(e.state.mask_regs,e.props_smooth.config.mask_mode);if("date"===s||"time"===s)l=It(a,i,s,[],n,t,r);else if(c.includes("HH:mm")){let t=ft(c,a,r,s);"Invalid date"===t&&(t=e.state.mask_value),l=t}else l=It(a,i,s,o);return l},this.maskInputClear=()=>{this.data_select={},this.setState({end_pos:0,start_pos:0,value:"",mask_value:"",mask_value_temp:"",help_mess:""},(()=>{}))},this.maskInputValidate=()=>{let{mask_value:t}=this.state,e="",i=this.maskInputGet(),o=(a=this.props_smooth.config.const_mask_format,bt[a]);var a;if(e=t&&!i&&0!==i?"jMaskInput_WrongFormat":function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[{title:"@VALUE",value:arguments.length>1?arguments[1]:void 0},{title:"@NOW",value:Date.parse(new Date)},{title:"@YEAR",value:31536e6.toString()},{title:"@MOUNTH",value:2592e6.toString()},{title:"@DAY",value:864e5.toString()},{title:"@HOURS",value:36e5.toString()},{title:"@MINUTE",value:6e4.toString()},{title:"@SECONDS",value:1e3.toString()}];for(const i of t){let{content:t,mess:o}=i;for(const i of e)t=t.replace(new RegExp(i.title,"g"),i.value);if(!1===s.ZP.checkDynamicConditionNoData(t))return o}return""}(this.props_smooth.validate.conditions,i),o&&t){let i=o.regex_validate;if(o.isMulti){let o=t.split(",");for(let t=0;t<o.length;t++){const a=o[t];if(!i.test(a)){e="jMaskInput_WrongFormat";break}}}else i.test(t)||(e="jMaskInput_WrongFormat")}return e},this.abs_calendar_changeMonth=t=>{let e=this.maskInputGet()||Date.parse(new Date),i=(0,_t.X7)(e,{M:t},"string"===this.state.value_type?this.state.format_value_type_string:this.state.mask_format,"string"===this.state.value_type);this.maskInputSet(i,void 0,void 0,void 0,void 0,!0)},this.abs_calendar_submit=t=>{let e=this.state.date_picker.day_of_mounth_data[t].value;this.maskInputSet(e,"enter_tab",void 0,void 0,void 0,!0),this.setState({isOpenCalender:!1})},this.abs_calendar_chooseYear=t=>{let e=this.maskInputGet()||Date.parse(new Date),i=new Date(e).setFullYear(t);this.maskInputSet(i,void 0,void 0,void 0,void 0,!0)},this.abs_calendar_changeYear=t=>{},this.abs_calendar_chooseMonth=t=>{let e=t,i=this.maskInputGet()||Date.parse(new Date),o=new Date(i).setMonth(e);this.maskInputSet(o,void 0,void 0,void 0,void 0,!0)},this.abs_calendar_openCalendar=t=>{let e=this.maskInputGet();e&&this.maskInputSet(e,"","",{date_selected_cache:e},void 0,!0),this.setState({isOpenCalender:t})},this.abs_calendar_KeyUp=t=>{let e,{isOpenCalender:i}=this.state,o=this.maskInputGet()||Date.parse(new Date),a=this.state.date_selected_cache;if(i)switch(t.key){case"ArrowLeft":i&&(e=(0,_t.X7)(o,{d:-1}),this.maskInputSet(e,void 0,void 0,void 0,void 0,!0));break;case"ArrowRight":i&&(e=(0,_t.X7)(o,{d:1}),this.maskInputSet(e,void 0,void 0,void 0,void 0,!0));break;case"ArrowUp":e=(0,_t.X7)(o,{d:-7}),this.maskInputSet(e,void 0,void 0,void 0,void 0,!0);break;case"ArrowDown":e=(0,_t.X7)(o,{d:7}),this.maskInputSet(e,void 0,void 0,void 0,void 0,!0);break;case"Enter":e=o,this.maskInputSet(e,void 0,void 0,void 0,void 0,!0),this.ref_maskinput.current.abs_CloseCalendar(),this.setState({isOpenCalender:!1});break;case"Escape":Number(a)!==Number(this.maskInputGet())&&a!==this.maskInputGet()?i&&this.maskInputSet(a,void 0,void 0,void 0,void 0,!0):(this.ref_maskinput.current.abs_CloseCalendar(),this.setState({isOpenCalender:!1}))}else switch(t.key){case"ArrowDown":e=(0,_t.X7)(o,{d:-1}),this.maskInputSet(e,void 0,void 0,void 0,void 0,!0);break;case"ArrowUp":e=(0,_t.X7)(o,{d:1}),this.maskInputSet(e,void 0,void 0,void 0,void 0,!0)}},this.abs_calendar_today=()=>{this.maskInputSet(Date.parse(new Date),"enter_tab",void 0,void 0,void 0,!0)},this.componentDidUpdate=(t,e)=>{},this.onEventKey=t=>{if("Delete"===t.key)this.maskInputClear()},this.onClick=t=>{this.clearError()},this.onBlur=()=>{let t=this.state.mask_mode;if(this.setState({isOpenCalender:!1}),"date"===t||"time"===t){let t=this.maskInputGet();this.maskInputSet(t,"",(()=>{if(!1===this.checkValidate()){this.runRule("enter_tab");let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(t.buildValidateForm(!1),t.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.buildValidateForm(!1)}}))}}),void 0,void 0,!0)}else if(!1===this.checkValidate()){this.runRule("enter_tab");let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(t.buildValidateForm(!1),t.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.buildValidateForm(!1)}}))}},this.setLastPost=t=>{let e=t.target;this.state.start_pos=e.selectionStart,this.state.end_pos=e.selectionEnd},this.setPos=(t,e)=>{t.selectionStart=e,t.selectionEnd=e},this.onChangeMaskInput=t=>{let{start_pos:e,mask_value:i,mask_regs:o,mask_placeholder:a,content_style:s,mask_mode:n,mask_mode_time:r}=this.state,l=t.target,c=l.selectionStart,d=l.value||"";"UPPER"===s&&(d=d.toLocaleUpperCase());let h=this.state.free_style;if(h.status)return d=d.replace(h.reg_remove,""),d=d.slice(0,o.length),void this.setState({mask_value:d,mask_value_temp:d});let u=d.slice(e,c)||"",p=0,_="",f=d.slice(0,c);for(let m=c;m<a.length;m++)m<c+(a.length-d.length)?f+=a[m]:f+=i[m]||a[m];i=f;for(const m in o){let t=o[m];"regex"===t.type||"const"===t.type&&t.value===u[p]||"static"===t.type&&t.value===u[p]?e<=m&&p<u.length?("static"===t.type&&t.value===u[p]||"const"===t.type&&t.value===u[p]||t.reg.test(u[p])?_+=u[p]||t.value:(_+=t.value,c--),p++):_+=i[m]||a[m]:(_+=t.value,e<=m&&p<u.length&&c++)}_===a&&(_="");let g=xt(this.state.mask_regs,this.props_smooth.config.mask_mode);if(g.includes("HH:mm")&&!0!==/[A-Za-z]/.test(_)){let t=ft(g,_,r,n);"Invalid date"===t&&(t=this.state.mask_value),_=t}this.setState({mask_value:_,mask_value_temp:_,value:"date"===n||"time"===n?Q.w5(_,g,r):""},(()=>{this.setPos(l,c);let{mask_format:t,hasSuggest:e,keyLoadCache:i,mask_value:o,mask_regs:a}=this.state;"default"===t&&e&&""!==i&&this.getDataKeyCache({key_cache:i+Pt(o,a,n,!1).replace(" ","")}).then((t=>{if(null!==t){let e=JSON.parse(t);Array.isArray(e)?this.setState({list_suggest:e}):this.setState({list_suggest:[e]})}else this.setState({list_suggest:[]})})).catch((t=>{}))}))},this.getDataKeyCache=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:"get_data_by_key_cache"}}];return i[0].input=Object.assign(i[0].input,t),await(0,S.Yr)(i,e).then((t=>{var e=s.ZP.foGetData("infoError",t);return void 0!==e?{infoError:e}:s.ZP.foGetData("data",t)})).finally((t=>{}))},this.setValidate=(t,e)=>{let{validate:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),e);i.request!==o.request&&this.setState({validate:o})},this.abs_ChooseSuggest=t=>{this.maskInputSet(t.value,void 0,void 0,void 0,void 0,!0)},this.handleTimeChange=(t,e,i)=>{let{mask_value_temp:o}=this.state,[a,s,n]=o.split(":").map(Number);switch(e){case-1:switch(t){case"hour":a-=1;break;case"minutes":s-=1;break;case"seconds":n-=1}break;case 0:switch(t){case"hour":a=Number(i);break;case"minutes":s=Number(i);break;case"seconds":n=Number(i)}break;case 1:switch(t){case"hour":a+=1;break;case"minutes":s+=1;break;case"seconds":n+=1}}this.setState({mask_value_temp:`${a<10?"0"+a:a}:${s<10?"0"+s:s}`+(void 0!==n?`:${n<10?"0"+n:n}`:"")})},this.handleCancel=()=>{this.setState({mask_value_temp:this.state.mask_value_temp||""})},this.handleSubmit=()=>{let{mask_value:t,mask_regs:e,mask_placeholder:i,mask_mode:o,mask_mode_time:a,mask_value_temp:s}=this.state,n="";t=s,n=s;let r=xt(this.state.mask_regs,this.props_smooth.config.mask_mode);if(r.includes("HH:mm")&&!0!==/[A-Za-z]/.test(n)){let t=ft(r,n,a,o);"Invalid date"===t&&(t=this.state.mask_value),n=t}this.setState({mask_value:n,mask_value_temp:n,value:"date"===o||"time"===o?Q.w5(n,r,a):""},(()=>{this.runRule("enter_tab")}))},this.getErrorLang=t=>{switch(t){case"validateNumMin":return s.ZP.getLang(t).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(t).replace("{count}",this.state.validate.max);case"jDate_Min":return s.ZP.getLang(t).replace("{count}",this.state.min_year);case"jDate_Max":return s.ZP.getLang(t).replace("{count}",this.state.max_year);default:return s.ZP.getLang(t)}},this.renderThisComponent=()=>{let t="uInput";switch(this.state.mask_mode){case"date":t="uDate";break;case"time":t="uTime"}const e=(0,n.RP)(t);if("true"===String(this.props.config.isLabel)){const t=(0,n.RP)("uLabel");return(0,l.jsx)(t,{dataFull:{config:{default:{title:this.state.mask_value||"",class:this.props_smooth.default.class},cmd:{visible:"true"===String(this.state.CMD.visible)}}}})}return(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChangeMaskInput,abs_Blur:this.onBlur,abs_Click:this.onClick,abs_KeyDown:this.setLastPost,abs_KeyUp:this.onEventKey,abs_MouseUp:this.setLastPost}),ref:this.ref_maskinput})},this.abs_CloseModal=()=>{this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})},this.propertyConstructor=new Qt(t.inputType,t.default,t.config),this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT"),this.component_code=s.ZP.autoID(),this.data_debug={},this.app_debug=[];let i="time_zone_c";"date"!==this.propertyConstructor.property.config.mask_mode&&"time"!==this.propertyConstructor.property.config.mask_mode||this.propertyConstructor.property.config.mask_mode_time&&(i=this.propertyConstructor.property.config.mask_mode_time),this.renderFormChildDone=!1,this.state={is_lookup:!1,is_error:!1,is_clicked:!1,lang:this.props.lang,help_mess:"",lang_select:"",title:"",CMD:{},format_value_type_string:"",end_pos:-1,start_pos:0,_type:"",value:"",mask_mode_time:i,mask_value:"",mask_value_temp:"",mask_format:"",mask_placeholder:"",mask_mode:"default",mask_regs:[],mask_regs_to:[],content_style:"",value_type:"long",free_style:{status:!1,reg_remove:""},date_picker:{mounth_data:[],year_data:[],day_data:[],day_of_mounth_data:[],date_view:Date.parse(new Date)},date_selected_cache:0,renderFormChildDone:!1,id_component:s.ZP.autoID(),isOpenCalender:!1,hasErrorInForm:!1,hasSuggest:!1,keyLoadCache:"",PK_key:"",moreInformation_key:"",list_suggest:[]},this.ref_maskinput=a.createRef();const r=this.getComponentContructor({},t);this.state=Object.assign(this.state,r.state_smooth),this.props_smooth=r.props_smooth}readData(t,e){let i=t.split(".");if(2!==i.length)return;let{format_value_type_string:o}=this.state,a=this.maskInputGet(o);switch(e){case void 0:case"true":s.ZP.putData(i[0],i[1],a,this.props.infoA);break;case"false":s.ZP.putDataGB(i[0],i[1]);break;default:s.ZP.putDataGB(i[0],i[1],"")}}openDetail(){let t=this.props.config.callform_detail;if(t){var e=s.ZP.getFormAppAuto(t);e&&this.props.config.callform_detail_mode,void 0===e?(0,h.QS)({form_code:this.props.config.callform_detail},this.props.infoA,this.props.default,"callform_detail;"+this.state.id_component,this.data_select):"modal"===this.props.config.callform_detail_mode?(e.putDataAll_andSet(this.data_select),this.setState({show_modal_detail:s.ZP.autoID()})):(e.putDataAll_andSet(this.data_select),s.ZP.openForm(t))}}buildFormChild(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let t=s.ZP.cloneJson(this.props.infoA);t.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),t,this.props.default,"callform;"+this.state.id_component)}}componentDidMount(){const t=()=>{setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())};this.props_smooth.config.data_default?this.maskInputSet(this.props_smooth.config.data_default,"on_change",t(),{},"OPTIMISTIC"):t()}getConfigTemplate(){var t,e;let{date_picker:i,free_style:o,format_value_type_string:a,mask_value:n,mask_value_temp:r,mask_regs:l,mask_mode:c,mask_regs_to:d,hasSuggest:h,mask_format:u}=this.state,p=[],_=[],f=[],[g,m,v]=r.split(":");if("time"===c){let[t,e,i]=u.split(":");if(void 0!==t){let e=12,i=1;"HH"===t&&(e=23,i=0);for(let t=i;t<=e;t++){let e=t<10?"0"+t:t+"";p.push({title:e,value:e,selected:void 0!==g?e===g:"00"===e})}}if(void 0!==e)for(let o=0;o<=59;o++){let t=o<10?"0"+o:o+"";_.push({title:t,value:t,selected:void 0!==e?t===m:"00"===t})}if(void 0!==i)for(let o=0;o<=59;o++){let t=o<10?"0"+o:o+"";f.push({title:t,value:t,selected:void 0!==i?t===v:"00"===t})}}return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{subTitle_isShow:"date"===c||"time"===c,subTitle:`(${this.state.mask_placeholder})`,placeholder:this.state.CMD.disabled+""==="true"?" ":xt(l,this.props_smooth.config.mask_mode),title:(null===(t=this.state.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:null===(e=this.state.validate)||void 0===e?void 0:e.request,icon:!0===this.state.isLookup?"search":"",component_code:this.component_code},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:"false"!==String(this.state.CMD.visible),error:{message:this.getErrorLang(this.state.help_mess),type:""}},mode:{textAlign:"left",letterSpacing:o.status?"":"M"}},valueTitleHover:"true"!==String(this.state.CMD.disabled)?"":n,value:n,cmd:{isLock:!1},suggest:{isShow:h,data:this.state.list_suggest.map((t=>{let e=Ft(t[this.state.PK_key],l,c,d,void 0),i=[];if(n){let t="",o="";for(let a=0;a<e.length;a++){let s=l.filter((t=>t.key===e[a]&&"const"===t.type));s.length>0?""!==o?o+=e[a]:""!==t&&(t+=e[a]):e[a]===n[a]?(o+=e[a],""!==t&&(i.push({value:t,mode:"suggest"}),t="")):(t+=e[a],""!=o&&(i.push({value:o}),o="")),a===e.length-1&&(""!==t?(i.push({value:t,mode:"suggest"}),t=""):""!=o&&(i.push({value:o}),o=""))}}return{title:i,more_information:t[this.state.moreInformation_key],value:t[this.state.PK_key]}})),title:{noData:s.ZP.getLang("header_searchNoResult")}},calendar_data:{value_current:"",today:{title:"Today"},config:{days_title:i.day_data},list_months:i.mounth_data,list_years:{value:new Date(i.date_view).getFullYear()||"",data:i.year_data},list_days:i.day_of_mounth_data},time_picker:{hour:{data:p,value:g},minutes:{data:_,value:m},seconds:{data:f,value:v},title:{button_cancel:"Cancel",button_ok:"Ok"}},abs_Cancel:this.handleCancel,abs_Submit:this.handleSubmit,abs_onTimeChange:this.handleTimeChange,abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_today:this.abs_calendar_today,abs_calendar_KeyUp:this.abs_calendar_KeyUp,abs_ChooseSuggest:this.abs_ChooseSuggest,tooltip_copy:{icon:"copy",title:s.ZP.getLang("btn_copy")},abs_Copy:()=>{s.ZP.copyToClipboard(this.maskInputGet(a))}}}render(){const t=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup+("false"===String(this.state.CMD.visible)?" malibu-invisible":""),children:[(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]}),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]})}}const Ut=zt;class Bt extends a.Component{constructor(t){var e;if(super(t),e=this,this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.setCMD=(t,e)=>{const{CMD:i}=this.state||{};let o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.set=(t,e)=>{if(void 0!==e){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){let t=this.props.config.structable_read;var i=t.split(".");if(i.length>0&&void 0!==e[i[0]]&&void 0!==e[i[0]][i[1]]){let o=0;if(void 0!==this.state.data_gb)for(let a=0;a<this.state.data_gb.length;a++){const n=this.state.data_gb[a];if(e[i[0]][i[1]]===s.ZP.getOOP(n,t)){o=a;break}}return void this.setState({value:{code:e[i[0]][i[1]]},index_selected:o})}}this.setState({value:this.state.data_gb[0]})}},this.setAdvanced=(t,e)=>{if(t.codeHidden&&t.codeHidden===this.props.default.codeHidden){if(this.data_select=e,void 0!==this.data_select){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change")}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:{code:a},data_view:o})}this.setState({value:this.state.data_gb[0]})}},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],t.codeHidden&&t.codeHidden===this.props.default.codeHidden){if(this.data_select=e,void 0!==this.data_select){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change")}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:{code:a},data_view:o})}this.setState({value:this.state.data_gb[0]})}},this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(var o=0;o<e.length;o++)this.readData(e[o],t.inform)}else this.readData(i,t.inform)},this.checkValidate=()=>{let t=!1,e=this.state.value;if(void 0!==e&&(void 0===this.state.validate.request||t||this.state.validate.request&&""===e&&(t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.setState({value:this.data_default})},this.onChangeRadio=t=>{let e=t.target.value,i=this.props.config.structable,o=s.ZP.getOOP(this.state.data_gb[e],i);this.setState({index_selected:e,value:o})},this.changeView=(t,e,i)=>{let o="",a=(e=e.trim()).split("@");for(let n=0;n<a.length;n++){let e=a[n].trim();if(""!==e&&void 0!==e)if(0===n)void 0!==this.state.lang[i]&&void 0!==this.state.lang[i][this.state.lang_select]&&void 0!==this.state.lang[i][this.state.lang_select][e]?o+=this.state.lang[i][this.state.lang_select][e]+" ":o+=a[n];else{let a=e.indexOf(" ");if(-1===a)o+=s.ZP.getOOP(t,e)+" ";else if(-1!==a){let n=e.substring(a,e.length).trim(),r=e.substring(0,a).trim();o+=s.ZP.getOOP(t,r)+" ",void 0!==this.state.lang[i]&&void 0!==this.state.lang[i][this.state.lang_select]&&void 0!==this.state.lang[i][this.state.lang_select][n]?o+=this.state.lang[i][this.state.lang_select][n]+" ":o+=n}}}return o},this.runRule=t=>{if(t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)}},this.getAdvanced=(t,e)=>{var i;return null===(i=this.state.value)||void 0===i?void 0:i.code},this.handleClick=function(){let t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).input;e.setState({value:t},(()=>{e.runRule("enter_tab")}))},this.getConfigComponent=(t,e)=>({value:t.code===this.state.value.code,dataItem:{index:e,input:t},abs_Click:this.handleClick,class:this.props.default.class,title:t.title,config:{cmd:{disable:this.state.CMD.disabled+""==="true",isLock:!1,error:{message:""}}}}),this.data_gb=[],void 0!==this.props.config.data_type){if("database"===this.props.config.data_type&&void 0!==this.props.config.data_query){let t=this.props.config.data_query;if(void 0!==t){let e=s.ZP.getDataLimited(t,0,50);void 0!==e?this.data_gb=e.data:s.ZP.AppException("#jSelect.constructor#1","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","data")}}if("json"===this.props.config.data_type&&void 0!==this.props.config.data_json){let t=s.ZP.parseJson(this.props.config.data_json);void 0!==t?this.data_gb=t:s.ZP.AppException("#jSelect.constructor#1","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","data")}}if(void 0!==this.props.config.data_more&&""!==this.props.config.data_more){let t=s.ZP.parseJson(this.props.config.data_more);if(void 0!==t)for(let e=0;e<t.length;e++){const i=t[e];this.data_gb.unshift(i)}}if(void 0!==this.props.config){this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var i=this.props.config.component_title;void 0===i&&(i=""),this.data_view_format_="",void 0!==this.props.config.data_view_format&&(this.data_view_format_=this.props.config.data_view_format)}var o=this.props.validate;void 0===o&&(o={});var a=this.props.lang;if(void 0===a&&(a={}),this.callform_detail="",this.callform="",this.data_select={},this.state={value:{},value_old:"",lang:a,lang_select:s.ZP.getLangKey(),validate:o,CMD:{},data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",data_gb:this.data_gb,index_selected:0,component_title:i,value_checked:!0,component_key:s.ZP.autoID()},void 0!==this.state.data_gb&&""!==this.data_default)for(let s=0;s<this.state.data_gb.length;s++){if(this.state.data_gb[s].code===this.data_default){this.state.index_selected=s,this.state.value={code:this.data_default};break}}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent()),void 0!==this.props.config.structable_read&&void 0!==this.state.data_gb&&void 0!==this.state.index_selected&&this.setState({value:this.state.data_gb[this.state.index_selected]})}readData(t,e){if(t.includes(".")){let i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.state.value.code,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.state.value.code):s.ZP.putDataGB(i[0],i[1],"")}}render(){const t=(0,n.RP)("uRadioButton");return"false"===String(this.state.CMD.visible)?null:(0,l.jsx)(a.Fragment,{children:""!==this.state.data_gb&&this.state.data_gb.map(((e,i)=>(0,l.jsx)(t,{dataFull:this.getConfigComponent(e,i)},i)))})}}const Yt=Bt;class Ht extends a.Component{constructor(t){if(super(t),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.set=(t,e)=>{if(void 0!==e){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var i=this.props.config.structable_read.split(".");if(i.length>0&&void 0!==e[i[0]]&&void 0!==e[i[0]][i[1]])return void this.setState({value:e[i[0]][i[1]]})}this.setState({value:""})}},this.setAdvanced=(t,e)=>{if(t.codeHidden&&t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}let t="";void 0!==this.props.config.data_view&&(t=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));let e="";void 0!==this.props.config.data_value&&(e=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:e,data_view:t})}},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],t.codeHidden&&t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.get=(t,e)=>{let i=!0;if(t.checkError&&"false"===t.checkError&&(i=!1),!i||!this.checkValidate()){let e=!1;if(null!==t&&void 0!==t&&(t.list_component?(";"+t.list_component+";").includes(";"+this.props.default.code+";")&&(e=!0):void 0!==t.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===t.list_view&&(e=!0),e)){let e=this.props.config.structable;if(e.includes("|")){let i=e.split("|");for(var o=0;o<i.length;o++)this.readData(i[o],t.inform)}else this.readData(e,t.inform)}}},this.checkValidate=()=>{let t=!1,e=this.state.value;if(void 0!==e&&(void 0===this.state.validate.request||t||this.state.validate.request&&""===e&&(t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.getResultData=()=>{let t=this.state.json_tree,e={value:[]};return"string"===this.props.config.get_value_type&&(e={value:""}),this.convertResultData(t,e),e},this.convertResultData=(t,e)=>{if(void 0!==this.props.config.get_value_type)switch(this.props.config.get_value_type){case"string":let i="";void 0!==this.props.config.get_value_string_format&&(i=this.props.config.get_value_string_format);for(let a=0;a<t.chil.length;a++){const i=t.chil[a];this.convertResultData(i,e)}if(!0===t.my_system.isChecked&&""!==i){""!==s.ZP.getOOP(t.value,i)&&(e.value+=s.ZP.getOOP(t.value,i),void 0!==this.props.config.get_value_string_format_split&&(e.value+=this.props.config.get_value_string_format_split))}break;case"array":let o="";if(void 0!==this.props.config.get_value_array_format&&(o=this.props.config.get_value_array_format,o=s.ZP.parseJson(o)),!0===t.my_system.isChecked&&void 0!==t.value){let i={};for(let e in o)i[e]=s.ZP.getOOP(t.value,o[e]);e.value.push(i)}for(let a=0;a<t.chil.length;a++){const i=t.chil[a];this.convertResultData(i,e)}}},this.changeView=(t,e,i)=>{let o="",a=(e=e.trim()).split("@");for(let n=0;n<a.length;n++){let e=a[n].trim();if(""!==e&&void 0!==e)if(0===n)void 0!==this.state.lang[i]&&void 0!==this.state.lang[i][this.state.lang_select]&&void 0!==this.state.lang[i][this.state.lang_select][e]?o+=this.state.lang[i][this.state.lang_select][e]+" ":o+=a[n];else{let a=e.indexOf(" ");if(-1===a)o+=s.ZP.getOOP(t,e)+" ";else if(-1!==a){let n=e.substring(a,e.length).trim(),r=e.substring(0,a).trim();o+=s.ZP.getOOP(t,r)+" ",void 0!==this.state.lang[i]&&void 0!==this.state.lang[i][this.state.lang_select]&&void 0!==this.state.lang[i][this.state.lang_select][n]?o+=this.state.lang[i][this.state.lang_select][n]+" ":o+=n}}}return o},this.reload=(t,e)=>{this.setState({value:this.data_default})},this.createJsonTree=(t,e,i,o)=>{if(void 0===t.parent&&(t.parent=[]),void 0!==o)for(let a=0;a<o.length;a++){const e=o[a];t.parent.push(e)}void 0!==i&&!1===t.parent.includes(i)&&t.parent.push(i),void 0===t&&(t={}),void 0===t.chil&&(t.chil=[]),void 0===t.my_system&&(t.my_system={isOpen:!0,isChecked:!0,isDisable:!1});if(t.parent.length<=this.tree_level||0===this.tree_level)for(let a=0;a<e.length;a++){const o=e[a];if(s.ZP.getOOP(o,this.key_get_parent)===i){let i=t.chil.length;t.chil[i]={value:o};let a=s.ZP.getOOP(o,this.key_set_parent);void 0!==a&&this.createJsonTree(t.chil[i],e,a,t.parent)}}},this.checkUnCheckChil=t=>{for(let e in t.data){if(!1===t.data[e].my_system.isChecked)return!0;if(!0===t.data[e].my_system.isDisable)return!0;this.checkUnCheckChil(t.data[e])}return!1},this.eventOnTree=(t,e)=>{let i=s.ZP.getOOP(t.value,this.key_private),o=this.state.json_tree;switch(e){case"change_isOpen":this.changeTreeItem(o,this.key_private,i,"isOpen",!t.my_system.isOpen);break;case"change_isChecked":this.changeTreeItem(o,this.key_private,i,"isChecked",!t.my_system.isChecked);break;case"isChecked":this.changeTreeItem(o,this.key_private,i,"isChecked",!0)}for(;"true"===this.auto_select;){let t=JSON.stringify(o);if(this.updateCheckboxTree(o),t===JSON.stringify(o))break}this.setState({json_tree:o})},this.changeTreeItem=(t,e,i,o,a)=>{let n=t.value;if(s.ZP.getOOP(n,e)===i)t.my_system[o]=a,"true"===this.auto_select&&this.changeTreeChil(t,o,a);else for(let s=0;s<t.chil.length;s++){const n=t.chil[s];this.changeTreeItem(n,e,i,o,a)}},this.changeTreeChil=(t,e,i)=>{for(let o=0;o<t.chil.length;o++){let a=t.chil[o];a.my_system[e]=i,this.changeTreeChil(a,e,i)}},this.checkTreeChil=(t,e,i,o)=>{for(let a=0;a<t.chil.length;a++){let s=t.chil[a];s.my_system[e]===i?o.value=!0:this.checkTreeChil(s,e,i,o)}},this.updateCheckboxTree=t=>{let e={value:!1},i={value:!1};this.checkTreeChil(t,"isChecked",!0,e),this.checkTreeChil(t,"isChecked",!1,i),!0===e.value&&!0===i.value?(t.my_system.isChecked=!0,t.my_system.isDisable=!0):!0===e.value?(t.my_system.isChecked=!0,t.my_system.isDisable=!1):!0===i.value?(t.my_system.isChecked=!1,t.my_system.isDisable=!1):t.my_system.isDisable=!1;for(let o=0;o<t.chil.length;o++){let e=t.chil[o];this.updateCheckboxTree(e)}},this.renderTreeView=t=>{if(void 0!==t&&t.chil.length>0)return(0,l.jsx)("div",{className:"item-jTreeView",children:(0,l.jsx)("ul",{children:t.chil.map(((t,e)=>(0,l.jsxs)("li",{children:[(0,l.jsxs)("span",{style:{position:"relative",display:"inline-block"},children:[!0===t.my_system.isDisable&&(0,l.jsx)("div",{style:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",cursor:"pointer"},onClick:()=>this.eventOnTree(t,"isChecked")}),(0,l.jsx)("input",{type:"checkbox",checked:t.my_system.isChecked,onChange:()=>this.eventOnTree(t,"change_isChecked"),disabled:t.my_system.isDisable})]}),t.chil.length>0?!0===t.my_system.isOpen?(0,l.jsx)("i",{className:this.icon_close_,onClick:()=>this.eventOnTree(t,"change_isOpen")}):(0,l.jsx)("i",{className:this.icon_open_,onClick:()=>this.eventOnTree(t,"change_isOpen")}):(0,l.jsx)("i",{className:this.icon_min_chil_}),(0,l.jsx)("span",{children:this.changeView(t.value,this.key_view,"data_view_format")}),!0===t.my_system.isOpen&&this.renderTreeView(t)]},e)))})})},this.data_gb=[],void 0!==this.props.config.data_type){if("query"===this.props.config.data_type&&void 0!==this.props.config.data_query){let t=this.props.config.data_query;if(void 0!==t){let e=s.ZP.getDataLimited(t,0,999999);void 0!==e?this.data_gb=e.data:s.ZP.AppException("#jTreeView.constructor#1","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","data")}}if("json"===this.props.config.data_type&&void 0!==this.props.config.data_json){let t=s.ZP.parseJson(this.props.config.data_json);void 0!==t?this.data_gb=t:s.ZP.AppException("#jTreeView.constructor#1","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","data")}}if(void 0!==this.props.config.data_more&&""!==this.props.config.data_more){let t=s.ZP.parseJson(this.props.config.data_more);if(void 0!==t)for(let e=0;e<t.length;e++){const i=t[e];this.data_gb.unshift(i)}}if(void 0!==this.props.config){this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var e=this.props.config.component_title;void 0===e&&(e=""),this.key_private="group_menu.group_menu_id",void 0!==this.props.config.key_private&&(this.key_private=this.props.config.key_private),this.key_set_parent="group_menu.group_menu_id",void 0!==this.props.config.key_set_parent&&(this.key_set_parent=this.props.config.key_set_parent),this.key_get_parent="group_menu.group_menu_parent",void 0!==this.props.config.key_get_parent&&(this.key_get_parent=this.props.config.key_get_parent),this.key_view="group_menu.group_menu_name",void 0!==this.props.config.key_view&&(this.key_view=this.props.config.key_view),this.icon_close_="",void 0!==this.props.config.icon_close&&(this.icon_close_=this.props.config.icon_close),this.icon_open_="",void 0!==this.props.config.icon_open&&(this.icon_open_=this.props.config.icon_open),this.icon_min_chil_="",void 0!==this.props.config.icon_min_chil&&(this.icon_min_chil_=this.props.config.icon_min_chil),this.auto_select=!0,void 0!==this.props.config.auto_select&&(this.auto_select=this.props.config.auto_select),this.tree_level="0",void 0!==this.props.config.tree_level&&(this.tree_level=this.props.config.tree_level),this.tree_level=parseInt(this.tree_level),this.max_parent_id="",void 0!==this.props.config.max_parent_id&&(this.max_parent_id=this.props.config.max_parent_id),""===this.max_parent_id&&(this.max_parent_id="0")}var i=this.props.validate;void 0===i&&(i={});var o=this.props.lang;void 0===o&&(o={}),this.callform_detail="",this.callform="",this.data_select={},this.state={value:this.data_default,value_old:"",lang:o,lang_select:s.ZP.getLangKey(),validate:i,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",data_gb:this.data_gb,json_tree:{},component_title:e,key_component:s.ZP.autoID(),update:!1};let a={};this.createJsonTree(a,this.state.data_gb,this.max_parent_id,[]),this.state.json_tree=a}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){let i=this.getResultData();if(t.includes(".")){var o=t.split(".");void 0===e||"true"===e?s.ZP.putData(o[0],o[1],i,this.props.infoA):"false"===e&&s.ZP.putDataGB(o[0],o[1],i),s.ZP.putDataGB(o[0],o[1],"")}}render(){return(0,l.jsx)("div",{className:this.props.default.class,children:(0,l.jsx)("div",{className:"col-sm-12 col-md-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsxs)("label",{children:[void 0!==this.state.lang.ui&&void 0!==this.state.lang.ui[this.state.lang_select]&&void 0!==this.state.lang.ui[this.state.lang_select][this.state.component_title]?this.state.lang.ui[this.state.lang_select][this.state.component_title]:this.state.component_title,""===this.state.component_title&&(0,l.jsx)("small",{className:"form-text text-success",children:"\xa0"})]}),this.renderTreeView(this.state.json_tree,this.state.key_component)]})})})}}const Vt=Ht;var Wt=i(3628);class Gt extends a.Component{constructor(t){super(t),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(t){var e={};return void 0===t&&(t={}),null!=t.data_elearning?e.data_elearning=t.data_elearning:e.data_elearning="",e}componentDidUpdate(t){this.props.data!==t.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(t,e){var i=this.state.data;i[t]=e.target.value,this.setState({data:i})}render(){return(0,l.jsx)("div",{className:"col-sm-12 col-md-12",children:(0,l.jsx)(Wt.Z,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u \u0111\xe0o t\u1ea1o",value:this.state.data.data_elearning,onChange:t=>this.onChange_Value("data_elearning",t)})})}}const Jt=Gt;class qt extends a.Component{constructor(t){super(t),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(t){var e={};return void 0===t&&(t={}),null!=t.request?e.request=t.request:e.request=!1,null!=t.min&&(e.min=t.min),null!=t.max&&(e.max=t.max),e}componentDidUpdate(t){this.props.data!==t.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return(0,l.jsx)("div",{className:"col-sm-12 col-md-12",children:(0,l.jsx)("div",{className:"prtm-block-content",children:(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsxs)("table",{className:"table table-striped",children:[(0,l.jsx)("thead",{className:"thead-primary",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"T\xean x\xe1c nh\u1eadn"}),(0,l.jsx)("th",{children:"D\u1eef li\u1ec7u"})]})}),(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"B\u1eaft bu\u1ed9c nh\u1eadp"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:t=>{var e=this.state.data;e.request=t.target.checked,this.setState({data:e})}})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"S\u1ed1 t\u1eeb kh\xf4ng nh\u1ecf h\u01a1n"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:t=>{var e=this.state.data;""!==t.target.value.trim()?e.min=parseFloat(t.target.value):void 0!==e.min&&delete e.min,this.setState({data:e})}})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"S\u1ed1 t\u1eeb kh\xf4ng v\u01b0\u1ee3t qu\xe1"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:t=>{var e=this.state.data;""!==t.target.value.trim()?e.max=parseFloat(t.target.value):void 0!==e.max&&delete e.max,this.setState({data:e})}})})]})]})]})})})})}}const Kt=qt;class Xt extends a.Component{constructor(t){super(t),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:s.ZP.getConfigUserDefault("list_lang_config")}}componentDidUpdate(t){this.props.data!==t.data&&this.setState({data:this.props.data})}render(){return(0,l.jsx)("div",{children:this.state.lang_system.map(((t,e)=>(0,l.jsx)(Wt.Z,{class:"col-sm-12 col-md-12",name:t.view,value:void 0!==this.state.data[t.key]?this.state.data[t.key]:t.key,onChange:e=>{var i=this.state.data;i[t.key]=e.target.value,this.setState({data:i})}},e)))})}}const $t=Xt;var te=i(5745);class ee extends a.Component{constructor(t){super(t),this.getValue=()=>this.state.data;var e=[];e[0]={},e[0].title="Not use",e[0].code="false",e[1]={},e[1].title="Use",e[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:e}}readConfig(t){var e={};return void 0===t&&(t={}),null!=t.visible?e.visible=t.visible:e.visible="",null!=t.disabled?e.disabled=t.disabled:e.disabled="",e}componentDidUpdate(t){this.props.data!==t.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(t,e){var i=this.state.data;i[t]=e.target.value,this.setState({data:i})}render(){return(0,l.jsxs)("div",{className:"col-sm-12 col-md-12",children:[(0,l.jsx)(te.Z,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:t=>this.onChange_Value("disabled",t)}),(0,l.jsx)(te.Z,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:t=>this.onChange_Value("visible",t)})]})}}const ie=ee;class oe extends a.Component{constructor(t){super(t),this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.getFormConfig=t=>(0,l.jsx)(Jt,{data:t,ref:t=>s.ZP.setConfigComponent("config",t)}),this.getFormRole=t=>(0,l.jsx)(ie,{data:t,ref:t=>s.ZP.setConfigComponent("role",t)}),this.getFormValidate=t=>(0,l.jsx)(Kt,{data:t,ref:t=>s.ZP.setConfigComponent("validate",t)}),this.getFormLang=(t,e,i,o,a)=>(0,l.jsx)($t,{data:o,default:t,config:e,validate:i,configAVD:a,ref:t=>s.ZP.setConfigComponent("lang",t)}),this.getCode=()=>this.props.default.code,this.getElearning=()=>r.findDOMNode(this),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}};var e="";void 0!==this.props.config.data_elearning&&(e=this.props.config.data_elearning),this.ob_mde=void 0,this.state={data_elearning:e,lang_select:s.ZP.getLangKey(),lang_system:s.ZP.getConfigUserDefault("list_lang_config"),data:{}}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this);let t=document.body.getElementsByClassName("content");for(let e of t)for(let t of e.getElementsByTagName("img"))t.style.width="100%"}),s.ZP.getTimeAddComponent()),this.downLoadOneELearning()}downLoadOneELearning(){for(var t="",e=0;e<this.state.lang_system.length;e++)t+=""===t?this.state.lang_system[e].key:";"+this.state.lang_system[e].key;(0,S.Yr)([{txcode:"#sys:bo-load-oneELearing",input:{eleaning_id:this.state.data_elearning,all_lang:t}}],{}).then((t=>{this.setState({data:s.ZP.foGetData("data",t)})}),(t=>{}))}render(){return(0,l.jsx)("div",{className:this.props.default.class,children:(0,l.jsx)("div",{className:"content",dangerouslySetInnerHTML:{__html:s.ZP.markdown_render(this.state.data[this.state.lang_select])}})})}}const ae=oe;class se extends a.Component{constructor(t){super(t),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.getCodeHidden=()=>this.props.default.codeHidden,this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.checkIsLoading=()=>this.isLoading,this.setCallFormBack=(t,e)=>{if(void 0!==t.key_form&&void 0!==t.key&&t.key===this.props.default.codeHidden){this.muti_form_didMount[this.muti_form_didMount.length]=t.key_form,this.isLoading=!0,this.setState({isLoadingComponent:!1});var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.hasOwnProperty("componentIsLoaded")&&i.componentIsLoaded(this.props.default.codeHidden)}},this.getAdvanced=(t,e)=>{if(this.muti_form_didMount.length>0){var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i)return i.getDataAll();s.ZP.AppException("#jMutivalue.setDataCallForm","form is undefined","system")}else s.ZP.AppException("#jMutivalue.setDataCallForm","muti_form_didMount is 0","system")},this.set=(t,e)=>{if(this.setState({isLoadingComponent:!0}),void 0!==e){if(void 0!==this.props.config.structable_read){if(this.props.config.structable_read.includes(".")){let t=this.props.config.structable_read.split(".");if(t.length>0&&void 0!==e[t[0]]&&void 0!==e[t[0]][t[1]]){let o=e[t[0]][t[1]];if(o=JSON.parse(JSON.stringify(o)),"object"!==typeof o)try{o=JSON.parse(o)}catch(i){o={}}return o={muti:o},this.setState({value:o}),void this.setDataCallForm(o)}return void this.setDataCallForm(void 0)}{let t=this.props.config.structable_read;if(void 0!==e[t]){let i=e[t];return i=JSON.parse(JSON.stringify(i)),"object"!==typeof i&&(i={}),i={muti:i},this.setState({value:i}),void this.setDataCallForm(i)}return void this.setDataCallForm(void 0)}}this.reloadForm(this.muti_form_didMount[0]),this.setState({isLoadingComponent:!1})}else this.setDataCallForm(void 0)},this.setAdvanced=(t,e)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,t.list_component);n||(n=t.list_component),"*"===n?i.putDataAll_andSet(e):i.callDirFromSupport("setAdvanced",{list_component:n,list_view:t.list_view},e)}},this.setGetInfo=(t,e)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g");for(;-1!==t.list_component.indexOf(o);){let n=s.ZP.getElementWithRegex(a,t.list_component);if("*"===n){let t=e[o+";"+o+"("+n+")"];i.putDataAll_andSet(t)}else{let a=e[o+";"+o+"("+n+")"];i.callDirFromSupport("setAdvanced",{list_component:n,list_view:t.list_view},a)}t.list_component.endsWith(o+";"+o+"("+n+")")?t.list_component=t.list_component.replace(o+";"+o+"("+n+")",""):t.list_component=t.list_component.replace(o+";"+o+"("+n+");","")}}},this.getInfoErrror=()=>{let t=[];var e=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==e&&e.hasOwnProperty("getValidateForm")){let i=e.getValidateForm();for(let e=0;e<i.length;e++){const o=i[e];t.push(o.key+": "+o.info)}}if(t.length>0)return{info:t,key:this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}},this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(var o=0;o<e.length;o++)this.readData(e[o],t.inform)}else this.readData(i,t.inform)},this.checkValidate=()=>{let t=!1;var e=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==e&&(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&(e.callDirFromSupport("clearError",{},{}),e.callDirFromSupport("checkValidate",{},{}),e.hasOwnProperty("getFormValidate")&&(t=e.getFormValidate()))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{!0!==this.props.config.notReload&&this.setState({value:this.data_default},(()=>{this.reloadForm(this.muti_form_didMount[0])}))},this.getDataCallForm=function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var i=s.ZP.getFormAppAuto(t);if(void 0===i)return"";if(i.hasOwnProperty("setFormValidateFromFunctionClient")&&i.setFormValidateFromFunctionClient(!1),i.hasOwnProperty("callDirFromSupport")){let t=!1;if(!1!==e&&(i.callDirFromSupport("clearError",{},{}),i.callDirFromSupport("checkValidate",{},{}),t=i.getFormValidate()),!t&&(i.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),i.hasOwnProperty("getData")))return i.getData("")}},this.toolAutoValue=()=>{var t=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&t.callDirFromSupport("toolAutoValue",{list_component:"*"},{})},this.setCMD=(t,e)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,t.list_component);if(n||(n="*"),"#"===n){let{CMD_multi:t}=this.state,i=Object.assign(s.ZP.cloneJson(t),e);for(let e in i)i[e]="true"===String(i[e]);this.setState({CMD_multi:i})}else{i.callDirFromSupport("setCMD",{list_component:n},e);let{CMD:t}=this.state,o=Object.assign(s.ZP.cloneJson(t),e);for(let e in o)o[e]="true"===String(o[e]);this.setState({CMD:o})}}},this.clearError=()=>{var t=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);void 0!==t&&t.hasOwnProperty("clearError")&&t.clearError()},this.reloadForm=t=>{var e=s.ZP.getFormAppAuto(t);void 0!==e&&(e.hasOwnProperty("reload")&&e.reload({}),e.hasOwnProperty("clearError")&&e.clearError())},this.setDataCallForm=t=>{if(this.muti_form_didMount.length>0){var e=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);void 0!==e?this.isLoading&&(void 0!==t?e.putDataAll_andSet(t):e.clearForm(),this.setState({isLoadingComponent:!1})):s.ZP.AppException("#jMutivalue.setDataCallForm","form is undefined","system")}else s.ZP.AppException("#jMutivalue.setDataCallForm","muti_form_didMount is 0","system");this.setState({isLoadingComponent:!1})},this.renderButton=()=>{let t=this.state.isOpenForm;return(0,l.jsx)("div",{style:{height:"34px"},children:(0,l.jsx)("div",{className:"btn btn-primary","data-toggle":"collapse",href:"#collapseOne"+this.id_component,onClick:()=>{this.setState({isOpenForm:!t})},children:t?(0,l.jsx)("i",{className:"fa fa-minus-circle","aria-hidden":"true"}):(0,l.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true"})})})},this.config={},this.component_code=s.ZP.autoID(),this.props.config&&(this.config=this.props.config),this.ref_callForm=a.createRef(),this.data_default="",void 0!==this.config.data_default&&(this.data_default=this.config.data_default);let e=this.props.validate;void 0===e&&(e={}),this.data_select={};let i=this.props.lang;void 0===i&&(i={}),this.is_open="true"===this.config.is_open,this.state={value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:e,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpenForm:this.is_open,call_form:this.props.config.callform||"",isLoadingComponent:!0,CMD:{},CMD_multi:{visable:!0}},this.id_component=s.ZP.autoID(),this.isLoading=!1,this.isErrorLoadForm=!1,this.muti_form_didMount=[]}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config!==t.config&&this.setState({config:this.props.config}),this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.lang!==t.lang&&this.setState({lang:this.props.lang}),this.props.validate!==t.validate&&this.setState({validate:this.props.validate}),this.props.property!==t.property&&this.setState({property:this.props.property})}componentDidMount(){let t=this.props.config.callform;t&&""!==t.trim()&&void 0!==this.ref_callForm.current&&(0,h.BR)(t,this.ref_callForm.current,this.props.infoA,(0,o.Z)((0,o.Z)({},this.props.default),{},{isReloadValidate:!0}),this.props.default.codeHidden),setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){let i=this.getDataCallForm(this.muti_form_didMount[0],!1);if(t.includes(".")){let o=t.split(".");if(void 0===e)s.ZP.putData(o[0],o[1],i.muti,this.props.infoA);else if("true"===e&&void 0!==i){let{address_default:t,value_default:e,has_default:a}=this.props.config;if(s.ZP.putData(o[0],o[1],i.muti,this.props.infoA),"true"===a){let o=t.split(".")||[],a=e.split(".")||[];if(2===o.length&&2===a.length){let t=i||{};t=t[a[0]]||{},t=t[a[1]],s.ZP.putData(o[0],o[1],t,this.props.infoA)}}}else"false"===e?s.ZP.putDataGB(o[0],o[1],i):s.ZP.putDataGB(o[0],o[1],"")}}render(){let t=this.state.lang||{};t=t[this.state.lang_select]||this.props.default.name;const e=(0,n.RP)("uMultiValue");return(0,l.jsx)(e,{cmd:this.state.CMD_multi,title:t,class:this.props.default.class,isLoadingEnd:!this.state.isLoadingComponent,isOpenDefault:this.state.isOpenForm,component_code:this.component_code,children:(0,l.jsx)("div",{ref:this.ref_callForm})})}}const ne=se;class re{}re.getProperty=()=>({main:[{tagType:{style:[{backgroundColor:"#ff471a"},{marginRight:"4px"}],attr:[{tabIndex:-1}],class:"tag label label-info tag-focus"}},{tagData:{style:[{backgroundColor:"#adad85"},{marginRight:"4px"}],attr:[{tabIndex:-1}],class:"tag label label-info tag-focus"}}],position:[{tagRemove:{style:[{marginRight:"10px"}],attr:[{tabIndex:-1}],class:""}}]});const le=re;class ce extends a.Component{constructor(t){super(t),this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.set=(t,e)=>{if(this.setState({value_selected:[]}),void 0!==e){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var i=this.props.config.structable_read.split(".");if(i.length>0&&void 0!==e[i[0]]&&void 0!==e[i[0]][i[1]]&&0!==e[i[0]][i[1]].length){let t=[],o=this.state.data_search;for(let a of e[i[0]][i[1]].split(";"))0===this.getDataFromValueSelected(a).length?t.push(a):t=t.concat(this.getDataFromValueSelected(a));for(let e of t)o=o.filter((t=>t!==e));return void this.setState({value_selected:t,data_search:o})}}this.setState({value:""})}},this.setAdvanced=(t,e)=>{if(t.codeHidden&&t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],t.codeHidden&&t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.get=(t,e)=>{var i=!0;if(t.checkError&&"false"===t.checkError&&(i=!1),!i){var o=!1;if(null!==t&&void 0!==t&&(t.list_component?(";"+t.list_component+";").includes(";"+this.props.default.code+";")&&(o=!0):void 0!==t.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===t.list_view&&(o=!0),o)){if(0!==this.state.value_selected.length){let t=[];for(let e of this.state.value_selected)"string"===typeof e?t.push(e):t.push(s.ZP.getOOP(e,this.state.config_.type_value_string_config));this.setState({result_:t.join(this.state.config_.separator_config)})}var a=this.props.config.structable;if(a.includes("|"))for(var n=a.split("|"),r=0;r<n.length;r++)this.readData(n[r],t.inform);else this.readData(a,t.inform)}}},this.checkValidate=()=>{let t=!1,e=this.state.value_selected;if(void 0!==e&&(void 0===this.state.validate.request||t||this.state.validate.request&&0===e.length&&(t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"}))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.setState({value:this.data_default,value_selected:[]})},this.onClickSelected=t=>{if(!this.state.value_selected.includes(t)){let e=this.state.data_search.filter((e=>e!==t));this.setState({value_selected:[...this.state.value_selected,t],data_search:e})}},this.onClickRemove=t=>{let e=this.state.value_selected.filter((e=>e!==t));"string"===typeof t?this.setState({value_selected:e}):this.setState({value_selected:e,data_search:[...this.state.data_search,t]})},this.getDataFromValueSelected=t=>{let e=s.ZP.convertStringToEn(t).replace(/ /g,""),i="";for(let o of this.state.config_.data_display_array)for(let t of this.state.data_search){s.ZP.convertStringToEn(s.ZP.getOOP(t,o)).replace(/ /g,"")===e&&(i=t)}return i},this.handleSearch=t=>{let e=this.state.arr_,i=this.state.value_selected,o=this.state.config_.data_display_array,a=s.ZP.convertStringToEn(t.target.value.trim()).replace(/ /g,""),n=[],r=[];if(0!==t.target.value.length&&0===i.length){for(let t of e)for(let e of o){s.ZP.convertStringToEn(s.ZP.getOOP(t,e)).replace(/ /g,"").includes(a)&&-1===n.indexOf(t)&&n.push(t)}r=n}if(0===t.target.value.length&&0===i.length&&(r=e),0!==i.length&&0===t.target.value.length){for(let t=0;t<i.length;t++)e=e.filter((e=>e!==i[t]));r=e}if(0!==i.length&&0!==t.target.value.length){for(let t=0;t<i.length;t++)e=e.filter((e=>e!==i[t]));for(let t of e)for(let e of o){s.ZP.convertStringToEn(s.ZP.getOOP(t,e)).replace(/ /g,"").includes(a)&&-1===n.indexOf(t)&&n.push(t)}r=n}this.setState({data_search:r})},this.handleChangeValue=t=>{const{name:e,value:i}=t.target;this.setState({[e]:i})},this.handleKeyDownForInput=t=>{switch(t.keyCode){case 37:if(0!==this.state.value_selected.length){let t=this.state.value_selected.length-1;this.refs["tag_"+t.toString()].focus(),this.setState({current_tag:t})}break;case 40:"true"===this.state.config_.isSearch_config?this.refs.input_search.focus():0!==this.state.data_search.length&&(this.refs.tr_0.focus(),this.setState({current_tableRow:0}));break;case 13:if(""!==t.target.value)if(this.state.value_selected.some((e=>e===t.target.value))){let e=this.state.value_selected.findIndex((e=>e===t.target.value));this.refs["tag_"+e.toString()].focus(),this.setState({current_tag:e,value:""})}else this.setState({value_selected:[...this.state.value_selected,t.target.value],value:""})}},this.handleKeyDownForInputSearch=t=>{switch(t.keyCode){case 38:this.refs.input_import.focus();break;case 40:0!==this.state.data_search.length&&(this.refs.tr_0.focus(),this.setState({current_tableRow:0}))}},this.handleKeyDownForSpanTag=t=>{let e=this.state.value_selected.length-1,i=this.state.current_tag-1,o=this.state.current_tag+1;switch(t.keyCode){case 37:this.state.current_tag>=0&&i>=0&&(this.refs["tag_"+i.toString()].focus(),this.setState({current_tag:i<0?0:i}));break;case 39:this.state.current_tag===e?(this.refs.input_import.focus(),this.setState({current_tag:void 0})):this.state.current_tag<e&&(this.refs["tag_"+o.toString()].focus(),this.setState({current_tag:o>e?e:o}));break;case 46:this.onClickRemove(this.state.value_selected[this.state.current_tag]),this.state.current_tag===e&&0!==this.state.current_tag&&(this.refs["tag_"+(0!==e&&e-1).toString()].focus(),this.setState({current_tag:0!==e&&e-1}))}},this.handleKeyDownForTable=t=>{let e=this.state.data_search.length-1,i=this.state.current_tableRow-1,o=this.state.current_tableRow+1;switch(t.keyCode){case 38:0===this.state.current_tableRow?"true"!==this.state.config_.isSearch_config?this.refs.input_import.focus():this.refs.input_search.focus():this.state.current_tableRow>0&&(this.refs["tr_"+i.toString()].focus(),this.setState({current_tableRow:i<0?0:i}));break;case 40:this.state.current_tableRow<e&&(this.refs["tr_"+o.toString()].focus(),this.setState({current_tableRow:o>e?e:o}));break;case 13:let t=this.refs["hiddenInput_"+this.state.current_tableRow.toString()].value;for(let e of this.state.config_.data_display_array){let i=this.state.data_search.filter((i=>s.ZP.getOOP(i,e).includes(t)));0!==i.length&&this.onClickSelected(i[0])}this.state.current_tableRow===e&&0!==e&&(this.refs["tr_"+(e-1).toString()].focus(),this.setState({current_tableRow:e-1}))}},this.renderTable=()=>(0,l.jsx)("div",{className:"selectize-dropdown-content",children:(0,l.jsx)("table",{id:"myTable",className:"table table-hover table-bordered table-striped",children:"true"===this.state.config_.format_col_config?(0,l.jsx)("tbody",{children:this.state.data_search.map(((t,e)=>(0,l.jsx)("tr",{style:{cursor:"pointer"},tabIndex:"-1",ref:"tr_"+e,onKeyDown:this.handleKeyDownForTable,onClick:()=>{this.onClickSelected(t)},children:"json"!==this.state.config_.data_type_config?this.state.config_.data_display_array.map(((i,o)=>(0,l.jsxs)("td",{children:[s.ZP.getOOP(t,i),this.state.config_.data_display_array[0]===i&&(0,l.jsx)("input",{ref:"hiddenInput_"+e,value:s.ZP.getOOP(t,this.state.config_.data_display_array[0]),hidden:!0,readOnly:!0})]},o))):this.state.config_.data_display_array.map(((e,i)=>(0,l.jsx)("td",{children:t[e]},i)))},e)))}):(0,l.jsx)("tbody",{children:this.state.data_search.map(((t,e)=>(0,l.jsx)("tr",{style:{cursor:"pointer"},tabIndex:"-1",ref:"tr_"+e,onKeyDown:this.handleKeyDownForTable,onClick:()=>{this.onClickSelected(t)},children:"json"!==this.state.config_.data_type_config?(0,l.jsxs)("td",{children:[this.convertMixDisplay(t),(0,l.jsx)("input",{ref:"hiddenInput_"+e,value:s.ZP.getOOP(t,this.state.config_.data_display_array[0]),hidden:!0,readOnly:!0})]}):(0,l.jsx)("td",{children:this.convertMixDisplay(t)})},e)))})})}),this.renderTag=()=>this.state.value_selected.map(((t,e)=>(0,l.jsx)("span",{children:-1===this.state.arr_.indexOf(t)?(0,l.jsxs)("span",(0,o.Z)((0,o.Z)({className:"tagInput "+this.state.property.main.tagType.class},this.state.property.main.tagType.attr),{},{ref:"tag_"+e,style:this.state.property.main.tagType.style,onKeyDown:this.handleKeyDownForSpanTag,children:[t,(0,l.jsx)("span",{"data-role":"remove",className:"tag-style",onClick:()=>{this.onClickRemove(t)}})]})):(0,l.jsxs)("span",(0,o.Z)((0,o.Z)({className:"tagInput "+this.state.property.main.tagData.class,ref:"tag_"+e},this.state.property.main.tagData.attr),{},{style:this.state.property.main.tagData.style,onKeyDown:this.handleKeyDownForSpanTag,children:["json"!==this.state.config_.data_type_config?s.ZP.getOOP(t,this.state.config_.tag_display_config):t[this.state.config_.tag_display_config],(0,l.jsx)("span",{"data-role":"remove",className:"tag-style",onClick:()=>{this.onClickRemove(t)}})]}))},e))),this.convertMixDisplay=t=>{let e=this.state.config_.display_mixing_col_config,i=s.ZP.component_getListCode(this.state.config_.display_mixing_col_config);if("json"!==this.state.config_.data_type_config)for(let o of i)e=e.replace(o.key,s.ZP.getOOP(t,o.code));else for(let o of i)e=e.replace(o.key,t[o.code]);return e.trim()},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.renderMess=t=>s.ZP.getLang(t),this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var e=this.props.validate;void 0===e&&(e={}),this.callform_detail="",this.callform="",this.data_select={};var i=s.ZP.component_propertyIndex(this.props.property.properties,le.getProperty());void 0===i&&(i={});var a=this.props.lang;void 0===a&&(a={});var n="";void 0!==this.props.config.data_type&&(n=this.props.config.data_type);var r="false";void 0!==this.props.config.isSearch&&(r=this.props.config.isSearch);var c="true";void 0!==this.props.config.format_col&&(c=this.props.config.format_col);var d="";void 0!==this.props.config.tag_display&&(d=this.props.config.tag_display);var h="";void 0!==this.props.config.data_gb&&(h=this.props.config.data_gb);var u="";void 0!==this.props.config.cdlist&&(u=this.props.config.cdlist);var p="";void 0!==this.props.config.data_display&&(p=this.props.config.data_display);var _="";void 0!==this.props.config.title_tag_input&&(_=this.props.config.title_tag_input);var f="";void 0!==this.props.config.type_value_string&&(f=this.props.config.type_value_string);var g=";";void 0!==this.props.config.separator&&(g=this.props.config.separator);var m="";void 0!==this.props.config.display_mixing_col&&(m=this.props.config.display_mixing_col),this.state={value:this.data_default,value_old:"",lang:a,lang_select:s.ZP.getLangKey(),validate:e,property:i,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",value_selected:[],arr_:[],data_search:[],result_:"",config_:{data_display_array:p.split(";"),query_db:h,isSearch_config:r,format_col_config:c,title_tag_input_config:_,type_value_string_config:f,separator_config:g,display_mixing_col_config:m,cdlist_config:u,data_type_config:n,tag_display_config:d},current_tag:void 0,current_tableRow:void 0,hover_event:!1}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent()),this.setState({data_search:this.state.arr_})}UNSAFE_componentWillMount(){switch(this.state.config_.data_type_config){case"database":0!==this.state.config_.query_db.length&&this.setState({arr_:s.ZP.getDataLimited(this.state.config_.query_db,0,999999).data});break;case"cdlist":let t=this.state.config_.cdlist_config.cdgrp,e=this.state.config_.cdlist_config.cdname;this.setState({arr_:s.ZP.data_cdList(t,e)||[]});break;case"json":if(void 0!==this.props.config.data_json){let t=s.ZP.parseJson(this.props.config.data_json);void 0!==t&&this.setState({arr_:t})}}}readData(t,e){if(t.includes(".")){var i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.state.result_,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.state.result_):s.ZP.putDataGB(i[0],i[1],"")}}render(){return(0,l.jsxs)("div",{ref:"jTagInput",children:[(0,l.jsxs)("div",{className:this.props.default.class,children:[(0,l.jsx)("label",{style:{fontWeight:400},children:void 0!==this.state.lang&&(void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:""!==this.state.config_.title_tag_input_config?this.state.config_.title_tag_input_config:this.props.default.name)}),(0,l.jsx)("div",{className:""!==this.state.help_css?"form-group has-"+this.state.help_css+" has-feedback":"prtm-block-content",children:(0,l.jsx)("div",{className:"bootstrap-tagsinput tag-input",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-sm-6 cont-tag",children:this.renderTag()}),(0,l.jsx)("div",{className:"col-sm-6 cont-main",children:(0,l.jsx)("div",{className:"selectize-control selectize-optgroup single plugin-optgroup_columns",children:(0,l.jsxs)("div",{className:"items has-options not-full",children:[(0,l.jsx)("input",{type:"text",className:"tag-register",ref:"input_import",autoComplete:"off",name:"value",placeholder:s.ZP.getLang("jTagInput_register_Input"),value:this.state.value,onChange:this.handleChangeValue,onKeyDown:this.handleKeyDownForInput}),(0,l.jsxs)("div",{className:"selectize-dropdown single selectize-optgroup plugin-optgroup_columns table-data cont-table",children:["true"===this.state.config_.isSearch_config&&(0,l.jsxs)("div",{className:"cont-search",children:[(0,l.jsx)("input",{type:"text",className:"tag-search",ref:"input_search",placeholder:s.ZP.getLang("jTagInput_search_Input"),name:"value_search",onKeyDown:this.handleKeyDownForInputSearch,onChange:this.handleSearch}),(0,l.jsx)("i",{className:"fa fa-search tag-remove"})]}),0!==this.state.data_search.length&&this.renderTable()]})]})})})]})})})]}),""!==this.state.help_icon&&(0,l.jsx)("span",{className:"glyphicon "+this.state.help_icon+" form-control-feedback","aria-hidden":"true"}),""===this.state.help_mess&&(0,l.jsx)("small",{className:"form-text text-danger",children:"\xa0"}),""!==this.state.help_mess&&(0,l.jsx)("small",{className:"form-text text-danger",children:this.renderMess(this.state.help_mess)})]})}}const de=ce;class he extends a.Component{constructor(){super(...arguments),this.getInfoCheckRun=()=>({view:this.props.infoView,default:this.props.default}),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.printComponent=()=>{let t=s.ZP.getFormAppAuto(this.props.infoA.key_form).callDirFromSupport("getElearning",{},{}),e=window.open("","","height=600,width=1200");for(let o in t){if(void 0===t[o])return;let a="",s="",n="",r="";if(null!==document.querySelector("code")&&void 0!==document.querySelector("code")){let t=window.getComputedStyle(document.querySelector("code"));for(let e=0;e<t.length;e++)a+=t[e]+":"+t.getPropertyValue(t[e])+";"}if(null!==document.querySelector("p")&&void 0!==document.querySelector("p")){let t=window.getComputedStyle(document.querySelector("p"));for(let e=0;e<t.length;e++)s+=t[e]+":"+t.getPropertyValue(t[e])+";"}if(null!==document.querySelector("pre")&&void 0!==document.querySelector("pre")){let t=window.getComputedStyle(document.querySelector("pre"));for(let e=0;e<t.length;e++)n+=t[e]+":"+t.getPropertyValue(t[e])+";"}if(null!==document.querySelector("blockquote")&&void 0!==document.querySelector("blockquote")){let t=window.getComputedStyle(document.querySelector("blockquote"));for(let e=0;e<t.length;e++)r+=t[e]+":"+t.getPropertyValue(t[e])+";"}var i=`code {${a}}p {${s}}pre {${n} height: auto; width: auto;}blockquote {${r} height: auto; width: auto;}hr {page-break-before:always;}`;e.document.write('<html><head><style type="text/css">'),e.document.write(i),e.document.write("</style></head><body>"),e.document.write(t[o].innerHTML),e.document.write("</body></html>")}e.document.close(),e.print()}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}render(){return(0,l.jsx)("div",{className:this.props.default.class,children:(0,l.jsx)("div",{style:{textAlign:"right"},children:(0,l.jsx)("button",{className:"btn btn-primary",onClick:()=>this.printComponent(),children:s.ZP.getLang("jButtonPrint_title")})})})}}const ue=he;class pe extends a.Component{constructor(t){super(t),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.setCMD=(t,e)=>{},this.getAdvanced=(t,e)=>{},this.getDataOOP=(t,e)=>{const{list_component:i}=t,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.setDataGB=(t,e)=>{},this.set=(t,e)=>{if(void 0!==e){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var i=this.props.config.structable_read.split(".");if(i.length>0&&void 0!==e[i[0]]&&void 0!==e[i[0]][i[1]])return void this.setState({value:e[i[0]][i[1]]})}this.setState({value:""})}},this.setAdvanced=(t,e)=>{if(t.codeHidden&&t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],t.codeHidden&&t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.get=(t,e)=>{var i=!0;if(t.checkError&&"false"===t.checkError&&(i=!1),!i||!this.checkValidate()){var o=!1;if(null!==t&&void 0!==t&&(t.list_component?(";"+t.list_component+";").includes(";"+this.props.default.code+";")&&(o=!0):void 0!==t.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===t.list_view&&(o=!0),o)){var a=this.props.config.structable;if(a.includes("|"))for(var s=a.split("|"),n=0;n<s.length;n++)this.readData(s[n],t.inform);else this.readData(a,t.inform)}}},this.checkValidate=()=>{var t=!1,e=this.state.value;if(void 0!==e&&(void 0===this.state.validate.request||t||this.state.validate.request&&""===e&&(t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.setState({value:this.data_default})},this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);let e=this.props.validate;void 0===e&&(e={}),this.callform_detail="",this.callform="",this.data_select={};let i=this.props.lang;void 0===i&&(i={}),this.state={value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:e,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:""}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){if(t.includes(".")){var i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}render(){return(0,l.jsx)("div",{className:this.props.default.class,children:"jTableCalculator"})}}const _e=pe;class fe extends a.Component{constructor(t){switch(super(t),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCMD=(t,e)=>{const{CMD:i}=this.state||{};let o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)"true"===o[a]&&(o[a]=!0),"false"===o[a]&&(o[a]=!1);this.setState({CMD:o})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.renderDebug=()=>{if(s.ZP.isDebug()){let t=this.props.config.structable.split(".")[1],e=this.data_debug.data_cpn;return null===e&&(e="NULL"),void 0===this.props.config.cdlist&&(this.props.config.cdlist={}),(0,l.jsx)(a.Fragment,{children:(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${t}|:|${e}|`})})}},this.set=(t,e)=>{if(void 0!==e){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){let t=this.props.config.structable_read.split(".");if(t.length>0&&void 0!==e[t[0]]&&(this.data_debug.data_cpn=e[t[0]][t[1]],void 0!==e[t[0]][t[1]])){let i=e[t[0]][t[1]]===this.IS_CHECKED;return void this.setState({value:i})}}this.setState({value:!1},(()=>{this.runRule("enter_tab")}))}},this.setAdvanced=(t,e)=>{if(t.codeHidden){if(t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o},(()=>{this.runRule("enter_tab")}))}}else{let t=e===this.IS_CHECKED;this.setState({value:t},(()=>{this.runRule("enter_tab")}))}},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],t.codeHidden){if(t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o},(()=>{this.runRule("enter_tab")}))}}else{let t=e===this.IS_CHECKED;this.setState({value:t},(()=>{this.runRule("enter_tab")}))}},this.get=(t,e)=>{var i=this.props.config.structable;if(i.includes("|"))for(var o=i.split("|"),a=0;a<o.length;a++)this.readData(o[a],t.inform);else this.readData(i,t.inform)},this.checkValidate=()=>{var t=!1,e=this.state.value;if(void 0!==e&&(void 0===this.state.validate.request||t||this.state.validate.request&&""===e&&(t=!0,this.state.help_mess=s.ZP.getLang("validateRequest"),this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.getAdvanced=(t,e)=>!0===this.state.value?this.IS_CHECKED:this.IS_UNCHECKED,this.reload=(t,e)=>{this.setState({value:this.getValueDefault()},(()=>{this.runRule("reload")}))},this.runRule=t=>{if(t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)}},this.props.config.checked_mode||"Y_N"){case"true_false":this.IS_CHECKED=!0,this.IS_UNCHECKED=!1;break;case"1_0":this.IS_CHECKED=1,this.IS_UNCHECKED=0;break;default:this.IS_CHECKED="Y",this.IS_UNCHECKED="N"}this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var e=this.props.validate;void 0===e&&(e={}),this.callform_detail="",this.callform="",this.data_select={};var i=this.props.lang;void 0===i&&(i={}),this.state={value:this.getValueDefault(),value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:e,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{}},this.data_debug={}}getValueDefault(){switch(this.props.config.checked_mode){case"true_false":return"true"===String(this.data_default);case"1_0":return"1"===String(this.data_default);default:return"Y"===String(this.data_default)}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){if(t.includes(".")){var i=t.split(".");void 0===e?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"true"===e?s.ZP.putData(i[0],i[1],!0===this.state.value?this.IS_CHECKED:this.IS_UNCHECKED,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}render(){var t,e;if(!1===this.state.CMD.visible)return null;let i=(0,n.RP)("uCheckBox");const a=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(a,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(i,{dataFull:{class:this.props.default.class,title:(null===(t=this.state.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props.default.name,value:this.state.value,config:{cmd:{disable:this.state.CMD.disabled+""==="true"}},abs_Click:()=>{this.setState({value:!this.state.value},(()=>{this.runRule("checked")}))}}}),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(i,{dataFull:{class:this.props.default.class,title:(null===(e=this.state.lang)||void 0===e?void 0:e[this.state.lang_select])||this.props.default.name,value:this.state.value,config:{cmd:{disable:this.state.CMD.disabled+""==="true"}},abs_Click:()=>{this.setState({value:!this.state.value},(()=>{this.runRule("checked")}))}}})}}const ge=fe,me={structable:"",structable_read:"",data_default:"",format:"#,###.00",decimal_length:2,hide_value_null:"false"};class ve extends a.Component{constructor(t){var e;super(t),e=this,this.getDataOOP=(t,e)=>this.data_select,this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{if(void 0!==t.key&&void 0!==t.key_form){let e=t.key.split(";");this[e[0]]=t.key_form,e[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setCallBuildFormBack=(t,e)=>{if(void 0!==t.key&&void 0!==t.key_form){let e=t.key.split(";");this[e[0]]=t.key_form,e[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setValidate=(t,e)=>{const{validate:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);i.request!==o.request&&this.setState({validate:o})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]&&""!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:t,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{layout_index:this.props.layoutIndex,component_code:this.component_code,view_code:this.props.viewID})}}return""},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.toolAutoValue=()=>{"false"!==String(this.state.CMD.disabled)&&"false"!==String(this.state.CMD.visible)||this.setValue(1,this.isNegative,"enter_tab")},this.setAdvanced=(t,e)=>{if(t.codeHidden){if(t.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){let t="";void 0!==this.props.config.data_value&&(t=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),this.setValue(t,this.isNegative,"enter_tab")}}else if(t.list_component){let{list_component:i}=t,{code:o}=this.props_smooth.default;if(void 0===e&&(e=""),i){i.split(";").includes(o)&&this.setValue(e,this.isNegative,"enter")}}else this.setValue(e,this.isNegative,"enter")},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],t.codeHidden){if(t.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){let t="";void 0!==this.props.config.data_value&&(t=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),this.setValue(t,this.isNegative,"enter_tab")}}else if(t.list_component){let{list_component:i}=t,{code:o}=this.props_smooth.default;if(void 0===e&&(e=""),i){i.split(";").includes(o)&&this.setValue(e,this.isNegative,"enter")}}else this.setValue(e,this.isNegative,"enter")},this.set=(t,e)=>{let i=this.props_smooth.config.structable_read?s.ZP.getNodeJson(e,this.props.config.structable_read):this.props_smooth.config.data_default;void 0!==i?this.setValue(i,this.isNegative):this.setDataDefault()},this.getAdvanced=(t,e)=>this.getValue(),this.get=(t,e)=>{let i=this.props.config.structable.split("|"),o=this.getValue();for(const a of i){let e=a.split(".");if("false"===t.inform)s.ZP.putDataGB(e[0],e[1],o);else s.ZP.putData(e[0],e[1],o,this.props.infoA)}},this.checkValidate=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=!1,o=e.getValue(),a="";const{request:n,max:r,min:l,max_length:c}=e.state.validate;if(null!==o||null===o&&"false"===e.props_smooth.config.hide_value_null)if(void 0!==o&&""!==o||"true"!==n.toString())if(void 0!==o){let t=e.state.value.replace(/\D/g,"");t.length>Number(c)&&Number(c)>0&&encodeURI(t).split(/%..|./).length-1>Number(c)?(i=!0,a="jCurrency_maxLength"):o>Number(r)&&null!==r&&void 0!==r&&""!==r?(i=!0,a="validateNumMax"):(o<Number(l)||""===o)&&null!==l&&void 0!==l&&""!==l&&(i=!0,a="validateNumMin")}else""===e.state.value&&null!==l&&void 0!==l&&""!==l&&!0===t&&(i=!0,a="validateNumMin");else i=!0,a="validateRequest";if(e.state.help_mess=a,e.setState({help_mess:a}),i){var d=s.ZP.getFormAppAuto(e.props.infoA.key_form);void 0!==d&&d.setFormValidateFromComponent(!0,e.props.default)}return i},this.convertConfigWithContext=t=>{let e=t,i=s.ZP.getlistCodeContext(t);for(const o of i){let t=s.ZP.context_get(o.code)||"";e=e.replace(o.key,t),"number"===typeof t&&(e=Number(e))}return e},this.reload=(t,e)=>{this.setValue(this.props_smooth.config.data_default,this.isNegative,"reload")},this.setDataDefault=()=>{this.setValue(this.props_smooth.config.data_default,this.isNegative)},this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.onBlur=async()=>{if("********"===this.state.value);else if(void 0!==this.state.value&&!this.state.value.includes("-.")&&0!==Number(this.state.value)||""===this.state.value||await this.setValue(0),!1===this.checkValidate(!0)&&!0===this.state.isChange){this.setState({isChange:!1}),this.onRunRule("enter_tab");let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(t.buildValidateForm(!1),t.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.buildValidateForm(!1)}}))}this.onFocus=!1},this.UNSAFE_componentWillUpdate=(t,e)=>{this.realtime_value=e.value},this.onChange=t=>{let e=t.target,{selectionStart:i,value:o}=e,{decimal_char:a,int_char:s,decimal_length:n}=this,r=this.state.value,l=o;if(r.replaceAll("*",""),l.replaceAll("*",""),l.includes("-")&&!1===this.isNegative)return void this.setState({value:r},(()=>{e.setSelectionRange(0,0)}));if(r.includes(a)&&!o.includes(a)&&a){let t=r.lastIndexOf(a);l=o.substring(0,t)+a+o.substring(t,o.length),l===a&&(l="")}let c=r,d=o.lastIndexOf(a);o.indexOf(a)!==o.lastIndexOf(a)&&a?d=c.length-n:(c=(0,Y.Nx)(l,n,s,a,!1)||"",d=i-(o.length-c.length),1===i?d=1:(i>o.lastIndexOf(a)||o[d]===this.int_char)&&(d+=1));let h=c.replace(/\D/g,""),u=this.props_smooth.validate.max_length;h.length>Number(u)&&Number(u)>0&&(c=r),this.setState({value:c,isChange:!0},(()=>{e.setSelectionRange(d,d)}))},this.renderThisComponent=()=>{const t=(0,n.RP)("uInput");if("true"===String(this.props.config.isLabel)){const t=(0,n.RP)("uLabel");return(0,l.jsx)(t,{dataFull:{config:{default:{title:null!==this.state.value&&void 0!==this.state.value?this.state.value:"",class:this.props_smooth.default.class},cmd:{visible:"false"!==String(this.state.CMD.visible)}}}})}return(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChange,abs_Blur:this.onBlur})})},this.modalToggle=t=>{t||this.buildFormChild(),!0!==this.state.CMD.disabled&&(void 0===t?this.setState({show_modal:s.ZP.autoID()}):t&&(this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})))},this.abs_CloseModal=()=>{this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})},this.renderMess=t=>{switch(t){case"validateNumMin":return s.ZP.getLang(t).replace("{count}",this.props_smooth.validate.min);case"validateNumMax":return s.ZP.getLang(t).replace("{count}",this.props_smooth.validate.max);case"validateRequest":default:return s.ZP.getLang(t);case"jCurrency_maxLength":return s.ZP.getLang(t).replace("@{max_length}",this.props_smooth.validate.max_length)}},this.props.config.data_default=this.convertConfigWithContext(this.props.config.data_default),this.props_smooth=this.getConfigSmooth(this.props),this.renderFormChildDone=!1,this.component_code=s.ZP.autoID(),this.int_char=s.ZP.getElementWithRegex(/#(\D)#/,this.props_smooth.config.format)||"",this.decimal_char=s.ZP.getElementWithRegex(/#(\D)0/,this.props_smooth.config.format)||"",this.decimal_length=this.props_smooth.config.decimal_length,""!==this.decimal_char&&this.decimal_char!==this.int_char||(this.decimal_length=0),this.isNegative=!1,(void 0===(0,Y.XG)(this.props_smooth.validate.min)||(0,Y.XG)(this.props_smooth.validate.min)<0)&&(this.isNegative=!0);let i=this.props_smooth.validate;void 0===i&&(i={}),this.state={isLookup:"true"===this.props.config.isLookup,help_css:"",help_icon:"",help_mess:"",value:"",CMD:{},validate:i,isChange:!1,renderFormChildDone:!1,id_component:s.ZP.autoID(),lang:this.props.lang,lang_select:s.ZP.getLangKey(),hasErrorInForm:!1},this.onFocus=!1,this.data_debug={}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent()),this.setValue(this.props_smooth.config.data_default,this.isNegative)}onRunRule(t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)}getConfigSmooth(t){let e=s.ZP.cloneJson(t);return e.config=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,o.Z)({},me);for(let i in e)void 0!==t[i]&&(""!==e[i]&&""===t[i]||(e[i]=t[i]));return e||{}}(e.config),e.validate.max_length&&!Number(e.validate.max_length>16)||(e.validate.max_length=16),e}getValue(){let t=this.realtime_value;return void 0===t&&(t=this.state.value),"********"===t?null:(0,Y.XG)(t,this.int_char,this.decimal_char)}setValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.isNegative,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on_change",o="";if(null===t&&"true"===this.props_smooth.config.hide_value_null)o="********";else{void 0!==t&&null!==t||(t=""),t+="";const{decimal_char:i,int_char:a,decimal_length:s}=this;o=(0,Y.Nx)(t,s,a,i),(void 0===o||o.includes("-")&&!1===e)&&(o=""),0===Number(o)&&""!==o&&(o=(0,Y.Nx)(0,s,a,i)),this.realtime_value=o}this.setState({value:o,help_css:"",help_icon:"",help_mess:""},(()=>{this.onRunRule(i||"on_change")}))}render(){const t=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup+("false"===String(this.state.CMD.visible)?" malibu-invisible":""),children:[(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]}),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]})}buildFormChild(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let t=s.ZP.cloneJson(this.props.infoA);t.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),t,this.props.default,"callform;"+this.state.id_component)}}getConfigTemplate(){var t;return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{title:(null===(t=this.state.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.state.validate.request,icon:!0===this.state.isLookup?"search":"",placeholder:"true"===String(this.state.CMD.disabled)?" ":"",component_code:this.component_code},cmd:{disable:this.state.CMD.disabled+""==="true",visible:this.state.CMD.visible+""!=="false",error:{message:this.renderMess(this.state.help_mess),type:""}},mode:{textAlign:"right"}},mode:{readOnly:"true"===String(this.props.config.readOnly)},valueTitleHover:this.state.CMD.disabled+""!=="true"?"":this.state.value,value:this.state.value}}}const be=ve,ye={structable:"",structable_read:"",data_default:"",format:"#,###.00",decimal_length:2},Ae={request:!1,min:"",max:void 0,max_length:void 0};var De=i(9773);class ke extends a.Component{constructor(t){var e;super(t),e=this,this.getDataOOP=(t,e)=>this.data_select,this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{if(void 0!==t.key&&void 0!==t.key_form){let e=t.key.split(";");this[e[0]]=t.key_form,e[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setCallBuildFormBack=(t,e)=>{if(void 0!==t.key&&void 0!==t.key_form){let e=t.key.split(";");this[e[0]]=t.key_form,e[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setValidate=(t,e)=>{const{validate:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);i.request!==o.request&&this.setState({validate:o})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]&&""!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:t,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{layout_index:this.props.layoutIndex,component_code:this.component_code,view_code:this.props.viewID})}}return""},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.toolAutoValue=()=>{"false"!==String(this.state.CMD.disabled)&&"false"!==String(this.state.CMD.visible)||this.setValue("1",this.isNegative,"enter_tab")},this.setAdvanced=(t,e)=>{if(t.codeHidden){if(t.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){let t="";void 0!==this.props.config.data_value&&(t=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),this.setValue(t,this.isNegative,"enter_tab")}}else if(t.list_component){let{list_component:i}=t,{code:o}=this.props_smooth.default;if(void 0===e&&(e=""),i){i.split(";").includes(o)&&this.setValue(e,this.isNegative,"enter")}}else this.setValue(e,this.isNegative,"enter")},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],t.codeHidden){if(t.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){let t="";void 0!==this.props.config.data_value&&(t=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),this.setValue(t,this.isNegative,"enter_tab")}}else if(t.list_component){let{list_component:i}=t,{code:o}=this.props_smooth.default;if(void 0===e&&(e=""),i){i.split(";").includes(o)&&this.setValue(e,this.isNegative,"enter")}}else this.setValue(e,this.isNegative,"enter")},this.set=(t,e)=>{let i=this.props_smooth.config.structable_read?s.ZP.getNodeJson(e,this.props.config.structable_read):this.props_smooth.config.data_default;void 0!==i?this.setValue(i,this.isNegative):this.setDataDefault()},this.getAdvanced=(t,e)=>this.getValue(),this.get=(t,e)=>{let i=this.props.config.structable.split("|"),o=this.getValue();for(const a of i){let e=a.split(".");if("false"===t.inform)s.ZP.putDataGB(e[0],e[1],o);else s.ZP.putData(e[0],e[1],o,this.props.infoA)}},this.checkValidate=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=!1,o=e.getValue(),a="";const{request:n,max:r,min:l,max_length:c}=e.state.validate;if(null!==o)if(void 0!==o&&""!==o||"true"!==n.toString())if(void 0!==o){let t=e.state.value.replace(/\D/g,"");t.length>Number(c)&&Number(c)>0&&encodeURI(t).split(/%..|./).length-1>Number(c)?(i=!0,a="jCurrency_maxLength"):null!==r&&void 0!==r&&""!==r?"greater"===(0,De.gM)(o,r)&&(i=!0,a="validateNumMax"):null!==l&&void 0!==l&&""!==l&&(""!==o&&"less"!==(0,De.gM)(o,l)||(i=!0,a="validateNumMin"))}else""===e.state.value&&null!==l&&void 0!==l&&""!==l&&!0===t&&(i=!0,a="validateNumMin");else i=!0,a="validateRequest";if(e.state.help_mess=a,e.setState({help_mess:a}),i){var d=s.ZP.getFormAppAuto(e.props.infoA.key_form);void 0!==d&&d.setFormValidateFromComponent(!0,e.props.default)}return i},this.convertConfigWithContext=t=>{let e=t,i=s.ZP.getlistCodeContext(t);for(const o of i){let t=s.ZP.context_get(o.code)||"";e=e.replace(o.key,t)}return e},this.reload=(t,e)=>{this.setValue(this.props_smooth.config.data_default,this.isNegative,"reload")},this.setDataDefault=()=>{this.setValue(this.props_smooth.config.data_default,this.isNegative)},this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.onBlur=async()=>{if("********"===this.state.value);else if(void 0!==this.state.value&&!this.state.value.includes("-.")&&"equal"!==(0,De.gM)(this.state.value,0)||""===this.state.value||await this.setValue("0"),!1===this.checkValidate(!0)&&!0===this.state.isChange){this.setState({isChange:!1}),this.onRunRule("enter_tab");let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(t.buildValidateForm(!1),t.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.buildValidateForm(!1)}}))}this.onFocus=!1},this.UNSAFE_componentWillUpdate=(t,e)=>{this.realtime_value=e.value},this.onChange=t=>{let e=t.target,{selectionStart:i,value:o}=e,{decimal_char:a,int_char:s,decimal_length:n}=this,r=this.state.value,l=o;if(r.replaceAll("*",""),l.replaceAll("*",""),l.includes("-")&&!1===this.isNegative)return void this.setState({value:r},(()=>{e.setSelectionRange(0,0)}));if(r.includes(a)&&!o.includes(a)&&a){let t=r.lastIndexOf(a);l=o.substring(0,t)+a+o.substring(t,o.length),l===a&&(l="")}let c=r,d=o.lastIndexOf(a);o.indexOf(a)!==o.lastIndexOf(a)&&a?d=c.length-n:(c=(0,Y.xD)(l,n,s,a,!1)||"",d=i-(o.length-c.length),1===i?d=1:(i>o.lastIndexOf(a)||o[d]===this.int_char)&&(d+=1));let h=c.replace(/\D/g,""),u=this.props_smooth.validate.max_length;if(h.length>Number(u)&&Number(u)>0){let t=h.length-Number(u);if(i<=c.lastIndexOf(a)-1){d=i-(o.length-c.length)-1,1===i?d=1:i>=o.lastIndexOf(a)&&(d+=1),r[i]===this.int_char&&d++;let e=i-this.countCommasBeforeIndex(r,i);h=(h.substring(0,e)+h.substring(e+t,h.length)).replace(/\D/g,""),l=h.substring(0,h.length-n)+a+h.substring(h.length-n,h.length),c=(0,Y.xD)(l,n,s,a,!1)||""}else c=r}this.setState({value:c,isChange:!0},(()=>{e.setSelectionRange(d,d)}))},this.renderThisComponent=()=>{const t=(0,n.RP)("uInput");if("true"===String(this.props.config.isLabel)){const t=(0,n.RP)("uLabel");return(0,l.jsx)(t,{dataFull:{config:{default:{title:null!==this.state.value&&void 0!==this.state.value?this.state.value:"",class:this.props_smooth.default.class},cmd:{visible:"false"!==String(this.state.CMD.visible)}}}})}return(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChange,abs_Blur:this.onBlur})})},this.modalToggle=t=>{t||this.buildFormChild(),!0!==this.state.CMD.disabled&&(void 0===t?this.setState({show_modal:s.ZP.autoID()}):t&&(this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})))},this.abs_CloseModal=()=>{this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})},this.renderMess=t=>{switch(t){case"validateNumMin":return s.ZP.getLang(t).replace("{count}",this.props_smooth.validate.min);case"validateNumMax":return s.ZP.getLang(t).replace("{count}",this.props_smooth.validate.max);case"validateRequest":default:return s.ZP.getLang(t);case"jCurrency_maxLength":return s.ZP.getLang(t).replace("@{max_length}",this.props_smooth.validate.max_length)}},this.props.config.data_default=this.convertConfigWithContext(this.props.config.data_default),this.props_smooth=this.getConfigSmooth(this.props),this.renderFormChildDone=!1,this.component_code=s.ZP.autoID(),this.int_char=s.ZP.getElementWithRegex(/#(\D)#/,this.props_smooth.config.format)||"",this.decimal_char=s.ZP.getElementWithRegex(/#(\D)0/,this.props_smooth.config.format)||"",this.decimal_length=this.props_smooth.config.decimal_length,""!==this.decimal_char&&this.decimal_char!==this.int_char||(this.decimal_length=0),this.isNegative=!1,""!==this.props_smooth.validate.min&&"less"!==(0,De.gM)(this.props_smooth.validate.min,0)||(this.isNegative=!0),this.state={isLookup:"true"===this.props.config.isLookup,help_css:"",help_icon:"",help_mess:"",value:"",CMD:{},validate:this.props_smooth.validate,isChange:!1,renderFormChildDone:!1,id_component:s.ZP.autoID(),lang:this.props.lang,lang_select:s.ZP.getLangKey(),hasErrorInForm:!1},this.onFocus=!1,this.data_debug={}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent()),this.setValue(this.props_smooth.config.data_default,this.isNegative)}onRunRule(t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)}getConfigSmooth(t){let e=s.ZP.cloneJson(t);return e.config=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,o.Z)({},ye);for(let i in e)void 0!==t[i]&&(""!==e[i]&&""===t[i]||(e[i]=t[i]));return e||{}}(e.config),e.validate=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,o.Z)({},Ae);for(let i in e)t[i]&&(""!==e[i]&&""===t[i]||(e[i]=t[i]));return e||{}}(e.validate),e}getValue(){let t=this.realtime_value;return void 0===t&&(t=this.state.value),"********"===t?null:(0,Y.Qy)(t,this.int_char,this.decimal_char)}setValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.isNegative,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on_change",o="";if(null===t)o="********";else{void 0===t&&(t=""),t+="";const{decimal_char:i,int_char:a,decimal_length:s}=this;o=(0,Y.xD)(t,s,a,i),(void 0===o||o.includes("-")&&!1===e)&&(o=""),"0"===o&&""!==o&&(o=(0,Y.xD)("0",s,a,i)),this.realtime_value=o}this.setState({value:o,help_css:"",help_icon:"",help_mess:""},(()=>{this.onRunRule(i||"on_change")}))}countCommasBeforeIndex(t,e){return t.substring(0,e).split(",").length-1}render(){const t=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup+("false"===String(this.state.CMD.visible)?" malibu-invisible":""),children:[(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]}),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]})}buildFormChild(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let t=s.ZP.cloneJson(this.props.infoA);t.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),t,this.props.default,"callform;"+this.state.id_component)}}getConfigTemplate(){var t;return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{title:(null===(t=this.state.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.state.validate.request,icon:!0===this.state.isLookup?"search":"",placeholder:"true"===String(this.state.CMD.disabled)?" ":"",component_code:this.component_code},cmd:{disable:this.state.CMD.disabled+""==="true",visible:this.state.CMD.visible+""!=="false",error:{message:this.renderMess(this.state.help_mess),type:""}},mode:{textAlign:"right"}},mode:{readOnly:"true"===String(this.props.config.readOnly)},valueTitleHover:this.state.CMD.disabled+""!=="true"?"":this.state.value,value:this.state.value}}}const Oe=ke;var we=i(1203);class Ce extends a.Component{constructor(t){super(t),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(t,e)=>{},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.getAdvanced=(t,e)=>{},this.getDataOOP=(t,e)=>{const{list_component:i}=t,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.setDataGB=(t,e)=>{},this.set=(t,e)=>{let i=e,o=this.state.json_path.split(".");if(void 0!==this.state.node_data_print&&void 0!==i[this.state.node_data_print]&&null!==i[this.state.node_data_print]&&""!==i[this.state.node_data_print]||this.setState({first_print:!1}),void 0!==i){if(o.length>0)for(let t=0;t<o.length;t++)void 0!==i[o[t]]&&(i=i[o[t]]);this.setState({value:i,first_print:!0})}else this.setState({value:""})},this.setAdvanced=(t,e)=>{},this.setGetInfo=(t,e)=>{e=e[this.props.default.code]},this.get=(t,e)=>{let i=!0;if(t.checkError&&"false"===t.checkError&&(i=!1),!i||!this.checkValidate()){let e=!1;if(null!==t&&void 0!==t&&(t.list_component?(";"+t.list_component+";").includes(";"+this.props.default.code+";")&&(e=!0):void 0!==t.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===t.list_view&&(e=!0),e)){let e=this.props.config.structable;if(e.includes("|")){let i=e.split("|");for(let e=0;e<i.length;e++)this.readData(i[e],t.inform)}else this.readData(e,t.inform)}}},this.checkValidate=()=>{let t=!1,e=this.state.value;if(void 0!==e&&(void 0===this.state.validate.request||t||this.state.validate.request&&""===e&&(t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),t){let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.printed=!1,this.setState({value:this.data_default})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:t,infoComponet:this.props.default}}return""},this.getValueByParam=t=>{let e=this.state.value;if(void 0!==e&&0!==e.length){if(-1===t.indexOf("."))return void 0!==e[t]&&0!==e[t].length?e[t]:"";{let i=t.split("."),o="";if(void 0!==e[i[0]]){for(let t=0;t<e[i[0]].length;t++){const a=e[i[0]][t];if(a[i[2]]){let t=a[i[2]]+"&"+a.order;o+=""===o?t:","+t}}return 0!==o.length?o:""}return""}}},this.printReportHandler=()=>{if(void 0!==this.props.config.useAction){let t=this.props.config.list_report.split(",");if("true"===this.props.config.useAction){let t=this.props.config.list_report.split(","),e=s.ZP.parseJson(this.props.config.txFoActions);void 0!==e&&_.ZP.runActionWithContext(e,{list_template_code:t},this.props.infoA,this.props.infoA_parent,this.props.default)}else if(void 0!==this.props.config.txFo){let e=s.ZP.parseJson(this.props.config.txFo);void 0!==e&&_.ZP.runFoWithContext(e,{list_template_code:t},this.props.infoA,this.props.infoA_parent,this.props.default)}}},this.printVoucher=()=>{if("type"===this.props.config.get_voucher_way)we.Qf(this.props.config.list_report,this.printReportHandler);else{if(0===this.state.value.length)return;{let t=this.state.node_data_print.split(".");void 0!==this.state.value[t[0]]&&null!==this.state.value[t[0]]&&""!==this.state.value[t[0]]||this.setState({first_print:!1})}let t=this.getValueByParam(this.state.node_data_print);if(void 0!==t&&""!==t){if("true"===this.state.auto_print&&!0===this.printed)return;this.printed=!0,we.xd(t.split(","),this.state.value.ref_id)}}},this.workFlowCall=(t,e)=>{void 0!==t&&void 0!==this.props.default.codeHidden&&(void 0!==t[this.props.default.codeHidden]?(this.visibility=t[this.props.default.codeHidden],this.setState({visibility:t[this.props.default.codeHidden]})):(this.visibility=!1,this.setState({visibility:!1})))},this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);let e=this.props.validate;void 0===e&&(e={}),this.callform_detail="",this.callform="",this.data_select={};let i=this.props.lang;void 0===i&&(i={});let o="";void 0!==this.props.config.node_data_print&&(o=this.props.config.node_data_print);let a="";void 0!==this.props.config.json_path&&(a=this.props.config.json_path);let n="true";void 0!==this.props.config.auto_print&&(n=this.props.config.auto_print),this.visibility=t.visibility&&this.visibility_role,this.VOUCHER_URL="";let r=s.ZP.getParameterSystem("VOUCHER_URL");void 0!==r&&(this.VOUCHER_URL=r),this.state={value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:e,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",node_data_print:o,auto_print:n,visibility:t.visibility&&this.visibility_role,block_send_mail:!1,json_path:a,first_print:void 0,str_voucher:"",str_style:""}}encodeQueryData(t){const e=[];for(let i in t)e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}componentDidUpdate(){this.state.first_print&&"true"===this.state.auto_print&&0!==this.state.value.length&&(this.printVoucher(),this.setState({first_print:!1}))}readData(t,e){if(t.includes(".")){let i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}render(){return(0,l.jsx)("div",{hidden:"true"===this.state.auto_print,children:(0,l.jsxs)("button",{className:"btn btn-primary",onClick:()=>this.printVoucher(),children:[(0,l.jsx)("i",{className:"fa fa-print",style:{padding:5}}),s.ZP.getLang("jPrintVoucher_title")]})})}}const xe=Ce;class Se extends a.Component{constructor(t){super(t),this.onCheck=t=>{const e=this.props.tableContext.props;s.ZP.getFormAppAuto(e.infoA.key_form).runRuleFunction(e.default,{value:t,rown_data:this.props.rowData},e.infoA_parent,"checked")},this.onCheckToSelected=()=>{this.onCheck(!0)},this.state={}}render(){var t,e,i,o=this;const a=(null===(t=this.props)||void 0===t||null===(e=t.tableContext)||void 0===e||null===(i=e.state)||void 0===i?void 0:i.CMD)||{};let s=(0,n.RP)("uTableColumnCheckbox");return(0,l.jsx)(s,{dataFull:{title_parent:this.props.title_parent,value:!!this.props.dataValue,config:{cmd:{disable:!0===a.disabled}},abs_Click:function(){let t=arguments.length>1?arguments[1]:void 0;o.onCheck(!t),void 0!==o.props.parent_handleCheckToSelected&&o.props.parent_handleCheckToSelected(o.props.dataIndex,!t,o.props.check_type)}}})}}const Me=Se;class Pe extends a.Component{constructor(t){var e,i,o,a,r,c,d,h,u,p;super(t),e=this,this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setAdvanced=(t,e)=>{if(!1===Array.isArray(e))this.setState({data:[]});else{let t=s.ZP.cloneJson(e),r=[],l=this.props.config.query_data,c=l.split(".")[1]||l;if(r=t,Array.isArray(r)){var i,o,a,n;for(let t=0;t<r.length;t++){const e=r[t];for(const i in e){const o=e[i];if("object"!==typeof o){let e=s.ZP.cloneJson(r[t]);r[t]={},r[t][c]=e,r[t][c].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(r[t][i].AFGHkeyIndexWJ=s.ZP.autoID())}}if(void 0!==(null===(i=this.props.config)||void 0===i||null===(o=i.columnSystemCheckBox)||void 0===o?void 0:o.methodGet)&&void 0!==(null===(a=this.props.config)||void 0===a?void 0:a.hasSystemColumnCheck)&&void 0!==(null===(n=this.props.config)||void 0===n?void 0:n.columnSystemCheckBox)){let t={},e=this.props.config.columnSystemCheckBox.methodGet;for(let i=0;i<r.length;i++)t[r[i][c].AFGHkeyIndexWJ]=r[i][c][e];this.setState({statusCheck:t,data:r,total_record:r.length,data_search:r,column_search:{}},(()=>{}))}else this.setState({data:r,total_record:r.length,data_search:r,column_search:{}},(()=>{}))}else this.setState({data:[],data_search:[]},(()=>{}))}},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],!1===Array.isArray(e))this.setState({data:[]});else{let t=s.ZP.cloneJson(e),r=[],l=this.props.config.query_data,c=l.split(".")[1]||l;if(r=t,Array.isArray(r)){var i,o,a,n;for(let t=0;t<r.length;t++){const e=r[t];for(const i in e){const o=e[i];if("object"!==typeof o||null===o||void 0===o){let e=s.ZP.cloneJson(r[t]);r[t]={},r[t][c]=e,r[t][c].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(r[t][i].AFGHkeyIndexWJ=s.ZP.autoID())}}if(void 0!==(null===(i=this.props.config)||void 0===i||null===(o=i.columnSystemCheckBox)||void 0===o?void 0:o.methodGet)&&void 0!==(null===(a=this.props.config)||void 0===a?void 0:a.hasSystemColumnCheck)&&void 0!==(null===(n=this.props.config)||void 0===n?void 0:n.columnSystemCheckBox)){let t={},e=this.props.config.columnSystemCheckBox.methodGet;for(let i=0;i<r.length;i++)t[r[i][c].AFGHkeyIndexWJ]=r[i][c][e];this.setState({statusCheck:t,data:r,total_record:r.length,data_search:r,column_search:{}},(()=>{}))}else this.setState({data:r,total_record:r.length,data_search:r,column_search:{}},(()=>{}))}else this.setState({data:[],data_search:[]},(()=>{}))}},this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);if(void 0!==t&&void 0!==e){const e=t.list_component;if(e&&e.includes(this.props.default.code)){for(let t in o)o[t]="true"===String(o[t]);this.setState({CMD:o})}}},this.pageIndexChange=t=>{this.setState({page_index:t})},this.callDir=()=>this,this.set=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on_change",a=s.ZP.cloneJson(i),n=[],r=e.props.config.query_data,l=r.split(".")[1]||r;if(void 0!==r&&""!==r&&(!0===r.includes(".")?void 0!==s.ZP.getOOP(a,r)&&(n=s.ZP.getOOP(a,r)):void 0!==a[r]&&(n=a[r])),Array.isArray(n)){var c,d,h,u;for(let t=0;t<n.length;t++){const e=n[t];for(const i in e){const o=e[i];if("object"!==typeof o){let e=s.ZP.cloneJson(n[t]);n[t]={},n[t][l]=e,n[t][l].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(n[t][i].AFGHkeyIndexWJ=s.ZP.autoID())}}if(void 0!==(null===(c=e.props.config)||void 0===c||null===(d=c.columnSystemCheckBox)||void 0===d?void 0:d.methodGet)&&void 0!==(null===(h=e.props.config)||void 0===h?void 0:h.hasSystemColumnCheck)&&void 0!==(null===(u=e.props.config)||void 0===u?void 0:u.columnSystemCheckBox)){let t={},i=e.props.config.columnSystemCheckBox.methodGet;for(let e=0;e<n.length;e++)t[n[e][l].AFGHkeyIndexWJ]=n[e][l][i];e.setState({statusCheck:t,data:n,total_record:n.length,data_search:n,column_search:{}},(()=>{e.runRule(o||"on_change")}))}else e.setState({data:n,total_record:n.length,data_search:n,column_search:{}},(()=>{e.runRule(o||"on_change")}))}else e.setState({data:[],data_search:[]},(()=>{e.runRule(o||"on_change")}))},this.runRule=(t,e)=>{if(t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.runRuleFunction(this.props.default,e||this.data_select,this.props.infoA_parent,t)}},this.reload=(t,e)=>{this.set(t,e)},this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.abs_getDataLimited=function(t,e){let i={data:this.state.dataFilter.slice(t,t+e)||[],total:this.state.dataFilter.length},o=i.data;if(!0===this.state.hasCheck)for(let n=0;n<o.length;n++)o[n].hasCheck__=!1;let a=1;void 0!==i.total&&(a=i.total);let s=this.buildPaging(a,this.state.config_table);this.setState({data:o,total_record:a,paging:s})},this.pageRecordChange=t=>{let e=this.state.config_table;e.paging_record=this.state.paging_record[t];let i=this.buildPaging(this.state.total_record,e);this.setState({paging:i,page_index:1,selectedRecordIndex:t,config_table:e})},this.getAdvanced=(t,e)=>this.getData(),this.checkAllDataHandler=()=>{let t=this.props.config.query_data,e=t.split(".")[1]||t,i=this.state.statusCheck;for(let o=0;o<this.state.data_search.length;o++)this.state.totalCheck?i={}:i[this.state.data_search[o][e].AFGHkeyIndexWJ]=!0;this.setState({statusCheck:i,totalCheck:!this.state.totalCheck},(()=>{this.runRule("checked")}))},this.getHeaderConfig=(t,e)=>{let i=[];return"true"===this.state.hasSystemColumnCheck&&"true"!==String(this.state.CMD.disabled)&&i.push({title:this.state.headerCheckTitle,id:"system_check_box",data:{value:this.state.totalCheck,abs_Click:this.checkAllDataHandler},config:{mode:{hasSearch:!1},hasCheck:"true"===String(this.state.hasSystemColumnCheckTotal),width:"true"===this.state.hasSystemColumnCheckTotal?"70px":"",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),(!0===t&&"true"!==String(this.state.CMD.disabled)||!0===e)&&i.push({title:"",id:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),i=i.concat(this.state.columns.map(((t,e)=>{var i,o;return{title:(null===(i=this.state.lang)||void 0===i||null===(o=i[this.state.lang_select])||void 0===o?void 0:o[t.title])||t.title,id:t.code,config:{width:"",isFrozen:!1},value_search:this.state.column_search[t.code]}}))),i},this.onChangeSearch=(t,e)=>{let i=this.state.column_search;i[e]=t.target.value;let o=this.state.data.filter((t=>{let o=!0;for(const r in i)if(i[r].trim()){var a;let l=s.ZP.getOOP(t,r);const c=this.cols_config[e];if("columnMask"===c.inputtype){var n;let t=c.config.mask;(t.includes("DD")&&t.includes("MM")&&t.includes("YY")||!0===(null===(n=c.config)||void 0===n?void 0:n.isDate))&&(l=Q.FW(l,t))}if(null===l)return!1;let d=null===(a=i[r])||void 0===a?void 0:a.split(" ");for(const t of d)t&&!l.toLowerCase().includes(t.toLowerCase())&&(o=!1)}return o})),a=o.length,n=this.buildPaging(a,this.state.config_table);this.setState({paging:n,page_index:1,total_record:a,data_search:o})},this.abs_autoCallBackData=()=>{let t=this.state.paging_record;t[this.state.selectedRecordIndex]+=5,this.setState({paging_record:t},(()=>{}))},this.getData=()=>{var t;let e=this.state.data,i="true"===this.state.hasSystemColumnCheck?null===(t=this.state.checked_to_selected)||void 0===t?void 0:t.mode:"",o=this.props.config.query_data,a=o.split(".")[1]||o,s=this.state.statusCheck;switch(i){case"CHECK_TO_SELECTED":case"DEFAULT":case"NO_EMPTY":return e.filter((t=>s[t[a].AFGHkeyIndexWJ]));default:return e}},this.parent_handleCheckToSelected=(t,e,i)=>{let o=this.props.config.query_data,a=o.split(".")[1]||o,s=this.state.statusCheck,n=[];const r=this.state.data_search;switch(i){case"CHECK_TO_SELECTED":for(let c=0;c<r.length;c++){let i=r[c][a].AFGHkeyIndexWJ;e?s[i]=c<=t||void 0:c>=t&&(s[i]=void 0),s[i]&&n.push(r[c])}break;case"DEFAULT":s[r[t][a].AFGHkeyIndexWJ]=e;for(let t=0;t<r.length;t++){s[r[t][a].AFGHkeyIndexWJ]&&n.push(this.state.data_search[t])}break;case"NO_EMPTY":let i,o,l=t;for(let t=0;t<r.length;t++){s[r[t][a].AFGHkeyIndexWJ]&&(void 0===i&&(i=t),o=t)}if(l<i)for(let t=l+1;t<i;t++){s[r[t][a].AFGHkeyIndexWJ]=!0}else if(l>i&&l<o)for(let t=l+1;t<=o;t++){s[r[t][a].AFGHkeyIndexWJ]=!1}else for(let t=o;t<l;t++){s[r[t][a].AFGHkeyIndexWJ]=!0}s[r[t][a].AFGHkeyIndexWJ]=e}let l=this.state.totalCheck;null!==n&&void 0!==n&&n.length||(l=!1),this.setState({statusCheck:s,totalCheck:l},(()=>{var t,e;void 0!==(null===(t=this.props.config.columnSystemCheckBox)||void 0===t?void 0:t.actionFo_SystemCheck)&&this.functionFo(n,null===(e=this.props.config.columnSystemCheckBox)||void 0===e?void 0:e.actionFo_SystemCheck),this.runRule("checked")}))},this.parent_handleSetChecked=t=>{let e=this.state.data_show_table,i=e[t].isCheck;void 0===i&&(i=!1),e[t].isCheck=!i,this.setState({data_show_table:e})},this.handleClickTableRow=t=>{var e,i,o;!0!==((null===(e=this.props)||void 0===e||null===(i=e.tableContext)||void 0===i||null===(o=i.state)||void 0===o?void 0:o.CMD)||{}).disabled&&void 0!==this.props.config.actionFo_RowSelect&&this.functionFo(t,this.props.config.actionFo_RowSelect)},this.handleChange=t=>{let{index_row:e,code_col:i,value_change:o}=t,a=i.split("."),s=[];s=this.hasPaging?this.getDataWithPaging(this.state.data_search,this.state.page_index,this.state.config_table.paging_record):this.state.data_search,s[e][a[0]][a[1]]!==o&&(s[e][a[0]][a[1]]=o,this.setState({data:s,data_search:s,column_search:{}},(()=>{this.runRule("enter_tab",s[e])})))},this.handleMoveLeft=t=>{let e=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;e&&t--,"true"===i&&t--;let o=t-1,{columns:a}=this.state,s=a.splice(t,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.handleMoveRight=t=>{let e=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;e&&t--,"true"===i&&t--;let o=t+1,{columns:a}=this.state,s=a.splice(t,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.getSumDataCol=t=>{let e=0;for(const o of this.state.data_search)e+=Number(s.ZP.getOOP(o,t.code));let i=2;return void 0!==t.config.decimal&&(i=t.config.decimal),(0,Y.Nx)(e,i)},this.isHasColumnAction=()=>this.state.action.length>0&&"true"!==String(this.state.CMD.disabled),this.renderColSum=()=>{const t=this.state.columns;let e=[],i=!1,o=this.isHasColumnAction()?1:0;"true"===String(this.state.hasSystemColumnCheck)&&o++;for(const n of t)n.isSum?(o&&e.push({type:"EMPTY",count:o}),e.push({type:"SUM",config:n}),i=!0,o=0):o++;if(o&&e.push({type:"EMPTY",count:o}),!i)return null;const a=(0,n.RP)("uTableBodyRowCalculator"),s=(0,n.RP)("uTableColumnCalculator"),r=(0,n.RP)("uTableColumnMerge");return(0,l.jsx)(a,{children:e.map(((t,e)=>"EMPTY"===t.type?(0,l.jsx)(r,{dataFull:{col_span:t.count}},e):(0,l.jsx)(s,{dataFull:{data:`${t.config.sumTitle||"Sum"} = ${this.getSumDataCol(t.config)}`}},e)))})};let _=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let t=this.props.config.paging_record.split(",");t.length>1&&(_=t)}let f={paging_record:_[0],query_data:this.props.config.query_data},g={},m=0;void 0!==g.total&&(m=g.total);let v=this.buildPaging(m,f),b=[];void 0!==g.data&&(b=g.data);let y=[],A=[],D=t.default.code.trim();if(void 0!==t.btn_of_grid&&""!==D)for(let s=0;s<t.btn_of_grid.length;s++){D===t.btn_of_grid[s].config.onTable.trim()&&(y[y.length]=t.btn_of_grid[s],-1!==t.btn_of_grid[s].default.code.indexOf("_system")&&(A[A.length]=t.btn_of_grid[s]))}let k=this.props.lang;void 0===k&&(k={}),void 0!==this.props.config.hasPaging&&(this.hasPaging="true"===this.props.config.hasPaging);let O="false";void 0!==this.props.config.hasSystemColumnCheck&&(O=this.props.config.hasSystemColumnCheck);let w="not_use";void 0!==(null===(i=this.props.config)||void 0===i||null===(o=i.columnSystemCheckBox)||void 0===o?void 0:o.check_type)&&(w=this.props.config.columnSystemCheckBox.check_type);let C="false";void 0!==(null===(a=this.props.config)||void 0===a||null===(r=a.columnSystemCheckBox)||void 0===r?void 0:r.hasSystemColumnCheckTotal)&&(C=this.props.config.columnSystemCheckBox.hasSystemColumnCheckTotal);let x="";void 0!==(null===(c=this.props.config)||void 0===c||null===(d=c.columnSystemCheckBox)||void 0===d?void 0:d.headerCheckTitle)&&(x=null===(h=this.props.config.columnSystemCheckBox)||void 0===h?void 0:h.headerCheckTitle);let S={};void 0!==(null===(u=this.props.config)||void 0===u||null===(p=u.columnSystemCheckBox)||void 0===p?void 0:p.checked_to_selected)&&(S=this.props.config.columnSystemCheckBox.checked_to_selected),this.state={dataFilter:b,data:b,lang:k,lang_select:s.ZP.getLangKey(),paging:v,total_record:m,paging_record:_,page_index:1,STT:!1,columns:void 0===this.props.config.columns?[]:JSON.parse(this.props.config.columns),action:y,action_system:A,config_table:f,check_screen_width:void 0,CMD:{disabled:!1},selectedRecordIndex:0,column_search:{},data_search:[],data_show_table:[],hasSystemColumnCheck:O,check_type:w,hasSystemColumnCheckTotal:C,headerCheckTitle:x,totalCheck:!1,checkedRow:!1,statusCheck:{},checked_to_selected:S},this.cols_config={};for(const s of this.state.columns)this.cols_config[s.code]=s;this.all_columnSystemCheck=[],this.value_row_select={}}buildPaging(t,e){let i=[],o=1;if(t>0)for(let a=0;a<t;a+=parseInt(e.paging_record))i[i.length]=o,o++;else i[i.length]=1;return i}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}getDataWithPaging(){let t=arguments.length>2?arguments[2]:void 0,e=((arguments.length>1?arguments[1]:void 0)-1)*t,i=e+t;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice(e,i)}readData(t,e){if(t.includes(".")){let i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.getData(),this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.getData()):s.ZP.putDataGB(i[0],i[1],"")}}getPagingConfig(){return{config:{show:s.ZP.getLang("cTable_Paging_show"),in:s.ZP.getLang("cTable_Paging_in"),jump_to_page:s.ZP.getLang("cTable_Paging_jump_to_page"),results:s.ZP.getLang("cTable_Paging_results")},result_total:this.state.total_record,abs_PagingActive:this.pageIndexChange,abs_setRecordActive:this.pageRecordChange,paging_index:this.state.page_index,paging_record:this.state.paging_record.map(((t,e)=>({number:t,selected:e===this.state.selectedRecordIndex})))}}UNSAFE_componentWillUpdate(t,e){this.state.data!==e.data&&(this.state.data_search=s.ZP.cloneJson(e.data))}functionFo(t,e){let i=void 0===e.useAction?"notUse":e.useAction,o=this.props.default;switch(i){case"txFo":var a=s.ZP.parseJson(e.txFo);void 0!==a?_.ZP.runFoWithContext(a,t,this.props.infoA,this.props.infoA_parent,o):s.ZP.AppException("#cColumnAction.onClick","Error Json is undefined");break;case"txFoAction":var n=s.ZP.parseJson(e.txFoActions);void 0!==n?_.ZP.runActionWithContext(n,t,this.props.infoA,this.props.infoA_parent,o):s.ZP.AppException("#cColumnAction.onClick","config_fo is undefined")}}render(){var t,e,i,r,c;if("false"===String(this.state.CMD.visible))return null;let d=this.state.action.length>0,h=this.state.action_system.length>0,u=this.getHeaderConfig(d,h),{hasSystemColumnCheck:p,check_type:_,statusCheck:f}=this.state;const g=(0,n.RP)("uTable"),m=(0,n.RP)("uTableBodyRow");if("false"===String(this.state.CMD.visible))return null;let v=[];return v=this.hasPaging?this.getDataWithPaging(this.state.data_search,this.state.page_index,this.state.config_table.paging_record):this.state.data_search,(0,l.jsx)(a.Fragment,{children:(0,l.jsxs)(g,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.onChangeSearch,abs_MoveLeft:this.handleMoveLeft,abs_MoveRight:this.handleMoveRight,Header:{data:u,config:{mode:{hasSearch:this.state.data.length>5,isFrozenHeader:!0}}},dataEmpty:{isShow:!(null!==(t=this.state)&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")||"Search"},title:this.props.default.name,mode:{maxHeight:!0,modeTitle:"center",isMoveColumn:"true"===String(null===(i=this.props.config)||void 0===i?void 0:i.isMoveColumn),isResize:"true"===String(null===(r=this.props.config)||void 0===r?void 0:r.isResize)},class:this.props.default.class,isBorder:!!this.props.default.name},uPagination:this.hasPaging?this.getPagingConfig():void 0},children:[null===(c=v)||void 0===c?void 0:c.map(((t,e)=>{let i=this.props.config.query_data,a=i.split(".")[1]||i;return(0,l.jsxs)(m,{dataItem:t,abs_Click:this.handleClickTableRow,children:["true"===p&&"true"!==String(this.state.CMD.disabled)&&(0,l.jsx)(Me,{ref:t=>{void 0===this.all_columnSystemCheck&&(this.all_columnSystemCheck=[]),this.all_columnSystemCheck[e]=t},tableContext:this,dataValue:!0===f[t[a].AFGHkeyIndexWJ],dataIndex:e,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,check_type:_,parent_handleCheckToSelected:this.parent_handleCheckToSelected},e),!0===d&&"true"!==String(this.state.CMD.disabled)&&(0,l.jsx)(N,{tableContext:this,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,data:this.state.action,title:"Action",value:(0,o.Z)((0,o.Z)({},t),{},{index:e,data_length:v.length})},e),"true"===String(this.state.CMD.disabled)&&!0===h&&(0,l.jsx)(N,{tableContext:this,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,data:this.state.action_system,isButtonSystem:!0,value:(0,o.Z)((0,o.Z)({},t),{},{index:e,data_length:v.length}),title:"Action"},e),this.state.columns.map(((i,o)=>{var a,n;let r=T.Z[i.inputtype];return void 0===r&&(r=T.Z.ColumnDefault),(0,l.jsx)(r,{code_col:i.code,index_row:e,rowData:t,tableContext:this,title_parent:i.title,title:(null===(a=this.state.lang)||void 0===a||null===(n=a[this.state.lang_select])||void 0===n?void 0:n[i.title])||i.title,config:i.config,data:s.ZP.getOOP(t,i.code),cmd:this.state.CMD,value:t,abs_TableChange:this.handleChange},o)}))]},e)})),this.renderColSum()]})})}}const Te=Pe;class Ie extends a.Component{constructor(t){if(super(t),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.getCodeHidden=()=>this.props.default.codeHidden,this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.checkIsLoading=()=>!!this.props.config.is_open_static_form||this.isLoading,this.setCallFormBack=(t,e)=>{if(this.props.config.is_open_static_form)this.isLoading=!0;else if(void 0!==t.key_form&&void 0!==t.key&&t.key===this.props.default.codeHidden){this.muti_form_didMount[this.muti_form_didMount.length]=t.key_form,this.isLoading=!0;var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.hasOwnProperty("componentIsLoaded")&&i.componentIsLoaded(this.props.default.codeHidden)}},this.set=(t,e)=>{this.setDataCallForm(e)},this.getKeyForm=()=>this.muti_form_didMount[0],this.getInfoErrror=()=>{let t="";var e=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(!0!==this.props.config.notCheckValidate&&void 0!==e&&e.hasOwnProperty("getValidateForm")){let i=e.getValidateForm();for(let e=0;e<i.length;e++){const o=i[e];t+=o.key+": "+o.info+";"}}if(""!==t)return{info:t,key:this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}},this.get=(t,e)=>{var i=this.props.config.structable;if(i.includes("|"))for(var o=i.split("|"),a=0;a<o.length;a++)this.readData(o[a],t.inform);else this.readData(i,t.inform)},this.setAdvanced=(t,e)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,t.list_component);n||(n=t.list_component),"*"===n?i.putDataAll_andSet(e):i.callDirFromSupport("setAdvanced",{list_component:n,list_view:t.list_view},e)}},this.setGetInfo=(t,e)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g");for(;-1!==t.list_component.indexOf(o);){let n=s.ZP.getElementWithRegex(a,t.list_component);if("*"===n){let t=e[o+";"+o+"("+n+")"];i.putDataAll_andSet(t)}else{let a=e[o+";"+o+"("+n+")"];i.callDirFromSupport("setAdvanced",{list_component:n,list_view:t.list_view},a)}t.list_component.endsWith(o+";"+o+"("+n+")")?t.list_component=t.list_component.replace(o+";"+o+"("+n+")",""):t.list_component=t.list_component.replace(o+";"+o+"("+n+");","")}}},this.checkValidate=()=>{let t=!1;var e=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==e&&(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&(e.callDirFromSupport("clearError",{},{}),!0!==this.props.config.notCheckValidate&&(e.callDirFromSupport("checkValidate",{},{}),e.hasOwnProperty("getFormValidate")&&(t=e.getFormValidate())))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.setState({value:this.data_default},(async()=>{this.props.config.is_open_static_form||(await this.reloadForm(this.muti_form_didMount[0],e),this.runRuleCPN("reload"))}))},this.getDataCallForm=t=>{var e=s.ZP.getFormAppAuto(t);if(void 0===e)return"";if(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport"))if(e.callDirFromSupport("clearError",{},{}),!0!==this.props.config.notCheckValidate){if(e.callDirFromSupport("checkValidate",{},{}),e.hasOwnProperty("getFormValidate")&&!e.getFormValidate()&&(e.callDirFromSupport("get",{list_component:"*",list_view:"",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")))return e.getData("")}else if(e.callDirFromSupport("get",{list_component:"*",list_view:"",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData"))return e.getData("")},this.setCMD=(t,e)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,t.list_component);if(n||(n=t.list_component),i.callDirFromSupport("setCMD",Object.assign(t,{list_component:n,list_view:t.list_view}),e),t.list_component.includes(`${o}()`)){let{CMD:t}=this.state,i=Object.assign(s.ZP.cloneJson(t),e);for(let e in i)i[e]="true"===String(i[e]);this.setState({CMD:i})}}},this.setDataGB=(t,e)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,t.list_component);n||(n=t.list_component),i.callDirFromSupport("setDataGB",{list_component:n,list_view:t.list_view},e)}},this.reloadForm=(t,e)=>{var i=s.ZP.getFormAppAuto(t);void 0!==i&&i.clearForm()},this.getAdvanced=(t,e)=>{if(this.muti_form_didMount.length>0){var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i)return i.getDataAll();s.ZP.AppException("#jTheSameMain.setDataCallForm","form is undefined","system")}else s.ZP.AppException("#jTheSameMain.setDataCallForm","muti_form_didMount is 0","system")},this.runRuleCPN=t=>{if(this.muti_form_didMount.length>0)if(void 0!==s.ZP.getFormAppAuto(this.muti_form_didMount[0])){if(this.isLoading){s.ZP.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,{},this.props.infoA_parent,t||"on_change")}}else s.ZP.AppException("#jTheSameMain.setDataCallForm","form is undefined","system");else s.ZP.AppException("#jTheSameMain.setDataCallForm","muti_form_didMount is 0","system")},this.setDataCallForm=async t=>{if(this.muti_form_didMount.length>0){var e=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==e){if(this.isLoading)if(void 0!==t){let i=s.ZP.getFormAppAuto(this.props.infoA.key_form);await e.putDataAll_andSet(t),i.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_change")}else e.clearForm()}else s.ZP.AppException("#jTheSameMain.setDataCallForm","form is undefined","system")}else s.ZP.AppException("#jTheSameMain.setDataCallForm","muti_form_didMount is 0","system")},this.ref_callForm=a.createRef(),this.component_code=s.ZP.autoID(),this.config={},this.props.config&&(this.config=this.props.config),this.data_default={},void 0!==this.config.data_default&&""!==this.config.data_default)try{this.data_default=JSON.parse(this.config.data_default)}catch(n){}var e=this.props.validate;void 0===e&&(e={}),this.data_select={};var i=this.props.lang;void 0===i&&(i={}),this.is_open="true"===this.config.is_open,this.state={value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:e,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpenForm:this.is_open,call_form:this.props.config.callform||"",CMD:{}},this.id_component=s.ZP.autoID(),this.isLoading=!1,this.isErrorLoadForm=!1,this.muti_form_didMount=[]}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config!==t.config&&this.setState({config:this.props.config}),this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.lang!==t.lang&&this.setState({lang:this.props.lang}),this.props.validate!==t.validate&&this.setState({validate:this.props.validate}),this.props.property!==t.property&&this.setState({property:this.props.property})}componentDidMount(){let t=this.state.call_form;t&&""!==t.trim()&&void 0!==this.ref_callForm.current&&(this.props.config.is_open_static_form?(0,h.HX)(t,this.ref_callForm.current,this.props.infoA,(0,o.Z)((0,o.Z)({},this.props.default),{},{isReloadValidate:!this.props.config.notCheckValidate}),this.props.default.codeHidden):(0,h.BR)(t,this.ref_callForm.current,this.props.infoA,(0,o.Z)((0,o.Z)({},this.props.default),{},{isReloadValidate:!this.props.config.notCheckValidate}),this.props.default.codeHidden)),setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){const i=this.getDataCallForm(this.muti_form_didMount[0]);if(t.includes(".")&&void 0!==i){var o=t.split(".");const{callData:a}=this.props.config;let n=i;n=a.includes(".")?s.ZP.getOOP(i,a):a?i[a]:i,void 0===e||"true"===e?s.ZP.putData(o[0],o[1],n,this.props.infoA):"false"===e?s.ZP.putDataGB(o[0],o[1],i):s.ZP.putDataGB(o[0],o[1],"")}else if(void 0!==i){const{callData:e}=this.props.config;let o=i;o=e.includes(".")?s.ZP.getOOP(i,e):e?i[e]||this.data_default:i,s.ZP.putDataOneKey(t,o,this.props.infoA)}}render(){const t=(0,n.RP)("uSameForm");let e=this.props.default.class||"col-12";return(0,l.jsx)("div",{style:{display:"false"===String(this.state.CMD.visible)?"none":""},className:e,children:(0,l.jsx)(t,{component_code:this.component_code,children:(0,l.jsx)("div",{ref:this.ref_callForm})})})}}const Fe=Ie;class Ne extends a.Component{constructor(t){super(t),this.getCode=()=>this.props.default.code,this.convertStringWithContext=t=>{let e=s.ZP.getlistCodeContext(t);for(let i=0;i<e.length;i++){const o=e[i];let a=s.ZP.context_get(o.code);void 0!==a&&(t=t.replace(o.key,a))}return t},this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(t,e)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.getAdvanced=(t,e)=>this.state.value,this.getDataOOP=(t,e)=>{const{list_component:i}=t,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.setDataGB=(t,e)=>{},this.set=(t,e)=>{if(void 0!==e){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){let t=this.props.config.structable_read.split(".");if(t.length>0&&void 0!==e[t[0]]&&void 0!==e[t[0]][t[1]])return this.data_debug.data_cpn=e[t[0]][t[1]],void this.setState({value:e[t[0]][t[1]]})}this.data_debug.data_cpn="undefined"}},this.setAdvanced=(t,e)=>{this.setState({value:e})},this.setGetInfo=(t,e)=>{e=e[this.props.default.code],this.setState({value:e})},this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.checkValidate=()=>{let t=!1,e=this.state.value;if(void 0!==e&&(void 0===this.state.validate.request||t||this.state.validate.request&&""===e&&(t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.setState({value:this.data_default})},this.setDataDefault=()=>{this.setState({value:this.data_default})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:t,infoComponet:this.props.default}}return""},this.renderDebug=()=>{if(s.ZP.isDebug()){this.props.config.structable=this.props.config.structable||"";let t=this.props.config.structable.split(".")[1],e=this.data_debug.data_cpn;return null===e&&(e="NULL"),(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${t}|:|${e}|`})}},this.getComponentConfig=()=>({config:{default:{title:this.getTitleLabel(),class:this.props.default.class,type:this.props.config.color,isBold:this.props.config.isBold,fontSize:this.props.config.fontSize},cmd:{visible:"false"!==String(this.state.CMD.visible)&&!!this.state.value}}}),this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.convertStringWithContext(this.props.config.data_default));var e=this.props.validate;void 0===e&&(e={}),this.callform_detail="",this.callform="",this.data_select={};var i=this.props.lang;void 0===i&&(i={}),this.state={value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:e,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{}},this.data_debug={}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){if(""!==t&&t.includes(".")){let i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}getTitleLabel(){return this.props.config.isUseTitle+""==="true"?this.state.lang&&this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name:s.ZP.isDebug()?this.props.default.name+"|->"+this.state.value:"{}"!==JSON.stringify(this.state.value)?this.state.value:""}render(){const t=(0,n.RP)("uLabel"),e=(0,n.RP)("uOfGroup");return"false"===String(this.state.CMD.visible)||!this.state.value&&0!==this.state.value&&"0"!==this.state.value?null:this.props.isOfgroupParent?(0,l.jsxs)(e,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(t,{dataFull:this.getComponentConfig()}),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(t,{dataFull:this.getComponentConfig()})}}const Le=Ne;class Ee extends a.Component{constructor(t){var e;super(t),e=this,this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(t,e)=>{},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.getAdvanced=(t,e)=>{},this.getDataOOP=(t,e)=>{let{list_component:i}=t,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.setDataGB=(t,e)=>{},this.set=(t,e)=>{},this.setAdvanced=(t,e)=>{this.setState({value:e})},this.setGetInfo=(t,e)=>{e=e[this.props.default.code],this.setState({value:e})},this.get=(t,e)=>{let i=!0;if(t.checkError&&"false"===t.checkError&&(i=!1),!i||!this.checkValidate()){let e=!1;if(null!==t&&void 0!==t&&(t.list_component?(";"+t.list_component+";").includes(";"+this.props.default.code+";")&&(e=!0):void 0!==t.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===t.list_view&&(e=!0),e)){let e=this.props.config.structable;if(e.includes("|")){let i=e.split("|");for(var o=0;o<i.length;o++)this.readData(i[o],t.inform)}else this.readData(e,t.inform)}}},this.checkValidate=()=>!1,this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.setState({value:[]})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:t,infoComponet:this.props.default}}return""},this.renderMess=t=>s.ZP.getLang(t),this.setPaging=t=>{this.callAPI(this.props.config.api_id,{page:t}).then((e=>{if(e.paging&&e.paging.total){let{value:i,dataFull_paging:o,titleNoData:a}=this.state;a="",o.result_total=e.paging.total,i=e.media,o.number_item=t-1,this.setState({dataFull_paging:o,value:i,titleNoData:a})}else{let{value:t,dataFull_paging:e,titleNoData:i}=this.state;e.result_total=0,t=[],e.number_item=0,i="Hasn't Signature Information",this.setState({value:t,dataFull_paging:e,titleNoData:i})}}))},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.state.isLoading||e.setState({isLoading:!0});var a=[{txcode:"#sys:bo-rule-getInfoAPI-Signature",input:{learn_api:t}}];let n={},r=s.ZP.getFormAppAuto(e.props.infoA.key_form);return void 0!==r&&(n=r.getDataAll()),n&&(i=Object.assign(n,i)),a[0].input=Object.assign(a[0].input,i),(0,S.Yr)(a,o).then((t=>{var i=s.ZP.foGetData("infoError",t);if(void 0!==i)return{infoError:i};var o=s.ZP.foGetData("data",t);return o&&o[e.props.config.api_map_data]?o[e.props.config.api_map_data]:o})).finally((t=>{e.setState({isLoading:!1})}))},this.renderModal=()=>{const t=this.MediaDetail;return this.state.isOpen?(0,l.jsx)(a.Suspense,{fallback:(0,l.jsx)("div",{}),children:(0,l.jsx)(t,(0,o.Z)({},this.getDefaultConfig(this.state.value)))}):null};let i={};void 0===i&&(i={}),this.accountNumberFormat=s.ZP.getParameterSystem("MEDIA_ACCOUNT_NUMBER"),this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);let r=this.props.validate;void 0===r&&(r={}),this.callform_detail="",this.callform="",this.data_select={};let c=this.props.lang;void 0===c&&(c={}),this.referenceTypeData=[{title:"Single customer",value:"C"}],this.businessLineTypeData=[{title:"-Select one-",value:"XX"}],this.state={value:[],value_old:"",lang:c,lang_select:s.ZP.getLangKey(),validate:r,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpen:!1,dataFull_paging:{result_total:0,paging_record:[{number:1,selected:!0}],abs_PagingActive:this.setPaging,number_item:0,config:{show:"Show",in:"in",jump_to_page:"Jump to page",results:"results"},mode:{noShowResult:!0}}},this.MediaDetail=(0,n.Iq)("O9_FormMediaDetail")}componentDidMount(){(0,S.Yr)([{txcode:"bo-get-cdlistMediaFile",input:{}}],{}).then((t=>{let e=s.ZP.foGetData("data",t);this.OWN_CDLIST={STS:{},TYPE:{},CATEGORIES:{}};for(const i of e)"MEDIASTS"===i.cdname?this.OWN_CDLIST.STS[i.cdid]=i:"CTMTYPE"===i.cdname?this.referenceTypeData.push({title:i.caption,value:i.cdid}):"CATEGORIES"===i.cdname&&this.businessLineTypeData.push({title:i.caption,value:i.cdid})})),setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){}render(){const t=(0,n.RP)("uButton");return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(t,{dataFull:{config:{default:{title:"",type:"",class:"",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyOCAyOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGQ9Ik0yMC40ODkgMTAuODM2NUwyNC43MDc0IDEyLjM4NkwyMS4xOTkyIDIxLjkzNzhDMjAuODcwOSAyMi44MzYyIDE5LjA5MDUgMjUuNjQ3MyAxNy44NTA3IDI2LjIyMDdMMTcuNTQ5OCAyNy4wNDE0QzE3LjQ3MzIgMjcuMjQ5MyAxNy4yNzYzIDI3LjM3OTYgMTcuMDY3MyAyNy4zNzk2QzE3LjAwODIgMjcuMzc5NiAxNi45NDkxIDI3LjM2ODYgMTYuODkgMjcuMzQ3OEMxNi42MjQxIDI3LjI0OTMgMTYuNDg2MiAyNi45NTUgMTYuNTg0NyAyNi42ODY5TDE2Ljg2OTIgMjUuOTExMUMxNi4yNCAyNC42ODg4IDE2LjcwOTQgMjEuMTM5IDE2Ljk4NTIgMjAuMzg4M0wyMC40ODkgMTAuODM2NVpNMjYuNTkzOSAwLjcyOTg3NkMyNS40MzQgMC4zMDUzMDIgMjQuMDc2IDEuMTgyOSAyMy42ODc1IDIuMjQzMjRMMjEuMTQ2NyA5LjE2NTU1TDI1LjM2NCAxMC43MTI4TDI3LjkwMTYgMy43OTE2MkMyOC4yMjExIDIuOTI0OTcgMjcuNzU2IDEuMTU1NTQgMjYuNTkzOSAwLjcyOTg3NlpNMTguOTYxNCAxMC40Nzg3QzE5LjA3OTYgMTAuNTIyNCAxOS4yMDExIDEwLjU0MzIgMTkuMzE5MyAxMC41NDMyQzE5LjczNzMgMTAuNTQzMiAyMC4xMzAxIDEwLjI4NzIgMjAuMjg0NCA5Ljg3MTM1TDIyLjk2NTMgMi42NDA0NkMyMy4xNjM0IDIuMTA3NTUgMjIuODkwOSAxLjUxNTU2IDIyLjM1OCAxLjMxODU5QzIxLjgyMDcgMS4xMjM4MSAyMS4yMzMxIDEuMzkzIDIxLjAzNTEgMS45MjU5MUwxOC4zNTQxIDkuMTU2NzlDMTguMTU2IDkuNjg5NyAxOC40Mjg1IDEwLjI4MTcgMTguOTYxNCAxMC40Nzg3Wk0xNC42NDU3IDI0LjAzNzdDMTQuMzY4OCAyMy43NzYxIDE0LjAyNDEgMjMuNDUwMSAxMy40NjYgMjMuMjAxN0MxMy4wMDY0IDIyLjk5NyAxMi41NTg5IDIyLjk4NzIgMTIuMjMxNyAyMi45Nzk1QzEyLjE5NzggMjIuOTc5NSAxMi4xNTg0IDIyLjk3ODQgMTIuMTE5IDIyLjk3NzNDMTEuOTE0NCAyMi40MTcxIDExLjQ5OTYgMjIuMDY0NyAxMC44NzcgMjEuOTI2OEMxMC4wNTMgMjEuNzUyOSA5LjM5NTM4IDIyLjE0MTMgOC45MzkwNyAyMi40NDExQzguOTc5NTYgMjIuMjExNCA5LjA0NjMxIDIxLjkzNzggOS4wOTU1NSAyMS43NDA4QzkuMjUzMTMgMjEuMTA2MSA5LjQxNTA4IDIwLjQ0OTYgOS4yOTQ3MSAxOS44MzQ2QzkuMTk5NTEgMTkuMzQ4OCA4Ljc4OTE2IDE4Ljk4NzcgOC4yOTQ1NSAxOC45NTI2QzcuMDE5NzMgMTguODgxNSA1Ljk3OCAxOS41Njc2IDUuMDU5OTEgMjAuMTg4MUM0LjA5NTg2IDIwLjgzOTEgMy40Nzc2MSAyMS4yMjc2IDIuODYyNjMgMjEuMDA3N0MyLjExMTk2IDIwLjc0MDcgMi4wMzY0NiAxOC43MDg2IDIuMzk3NTcgMTYuODk4N0MyLjcyMDM4IDE1LjI2ODMgMy4zMjExMyAxMi4yMzI4IDQuODYwNzUgMTAuODU0QzUuMzc5NDMgMTAuMzkgNi4xMzAxIDkuODg3NzYgNi43NDcyNiAxMC4xMzE4QzcuNDcyNzYgMTAuNDE2MyA4LjA3MjQyIDExLjYxMTIgOC4yMDU5MiAxMy4wMzQ5QzguMjYxNzIgMTMuNjM1NiA4Ljc4NTg4IDE0LjA3NjYgOS4zOTc1NyAxNC4wMjE5QzkuOTk5NDEgMTMuOTY2MSAxMC40NDE1IDEzLjQzMjEgMTAuMzg0NiAxMi44MzAyQzEwLjE2NzkgMTAuNTEwNCA5LjA4MDIzIDguNjk2MTEgNy41NDcxNyA4LjA5MzE3QzYuNjI5MDggNy43MzY0NCA1LjE2OTM0IDcuNjQwMTUgMy4zOTk5MSA5LjIyMzU1QzEuNDc1MSAxMC45NDcgMC43NjM4MzMgMTMuODY5OCAwLjI0ODQzNSAxNi40NzNDLTAuMDA5ODEwODUgMTcuNzczIC0wLjYzOTAxMiAyMi4wODY2IDIuMTI3MjggMjMuMDcwM0MzLjgxMjQ1IDIzLjY3MTEgNS4xODEzNyAyMi43NDQzIDYuMjgxMTEgMjIuMDAyM0M2LjQ4MjQ1IDIxLjg2NjcgNi42ODA1MSAyMS43MzMyIDYuODczMSAyMS42MTM5QzYuNjkwMzYgMjIuNDA3MiA2LjU3NjU2IDIzLjI1NjQgNy4wNTU4NSAyMy45NzJDNy43NzA0IDI1LjA0NjYgOC43ODA0IDI1LjE2MzcgMTAuMDU2MyAyNC4zMjMzQzEwLjEwNTYgMjQuMjkxNSAxMC4xNjI1IDI0LjI1NDMgMTAuMjE2MSAyNC4yMTcxQzEwLjMzNDMgMjQuNDY0NCAxMC41NDMzIDI0LjczNjkgMTAuOTIzIDI0LjkyMjlDMTEuMzgyNiAyNS4xNDg0IDExLjg0MjIgMjUuMTU5MyAxMi4xNzcgMjUuMTY4MUMxMi4zMjAzIDI1LjE3MTMgMTIuNTE2MiAyNS4xNzU3IDEyLjU3NTMgMjUuMjAyQzEyLjc4MSAyNS4yOTI4IDEyLjkwMjUgMjUuNDA0NCAxMy4xMzg5IDI1LjYyNzZDMTMuMzE2MSAyNS43OTUxIDEzLjUwMzIgMjUuOTY5MSAxMy43NDA3IDI2LjE0ODVDMTMuOTM3NyAyNi4yOTYyIDE0LjE2NzUgMjYuMzY2MyAxNC4zOTUxIDI2LjM2NjNDMTQuNzI3NyAyNi4zNjYzIDE1LjA1NzEgMjYuMjE0MiAxNS4yNzE2IDI1LjkyODZDMTUuNjMzOCAyNS40NDQ5IDE1LjUzNTMgMjQuNzU4OCAxNS4wNTE2IDI0LjM5NjZDMTQuODkzIDI0LjI3NCAxNC43NjcxIDI0LjE1MjYgMTQuNjQ1NyAyNC4wMzc3WiIgZmlsbD0iIzQ5NEY1OSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KPHJlY3Qgd2lkdGg9IjI4IiBoZWlnaHQ9IjI4IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="},cmd:{disable:!1,isLoading:!1},mode:"square"},abs_Click:()=>{var t;this.props.config.api_id?(this.setState({isOpen:!0}),this.callAPI(this.props.config.api_id,{page:"1"}).then((t=>{if(t.paging&&t.paging.total){let{value:e,dataFull_paging:i,titleNoData:o}=this.state;o="",i.result_total=t.paging.total,e=t.media,i.number_item=0,this.setState({dataFull_paging:i,value:e,titleNoData:o})}else{let{value:t,dataFull_paging:e,titleNoData:i}=this.state;e.result_total=0,t=[],e.number_item=0,i="Hasn't Signature Information",this.setState({value:t,dataFull_paging:e,titleNoData:i})}}))):(null===(t=this.state.value)||void 0===t?void 0:t.length)>0&&this.setState({isOpen:!0})}}}),this.renderModal()]})}isImage(t){let e=!1;try{e=btoa(atob(t))===t&&"/iR".includes(t[0])}catch(i){}return e}getRefTypeData(t){return[{title:"Single customer",value:"C"},{title:"Group of customer",value:"G"},{title:"Customer linkage",value:"L"}].map(((e,i)=>(0,o.Z)((0,o.Z)({},e),{},{selected:e.value===t})))}getDefaultConfig(t){return void 0!==t&&this.props.config.api_id?{modal:{title:"Signature Viewer",visibility:this.state.isOpen,abs_Close:()=>{this.setState({isOpen:!1})}},media_paging:{dataFull:(0,o.Z)({},this.state.dataFull_paging)},form:{config:{default:{title:this.state.titleNoData}},cmd:{isLoading:this.state.isLoading}},stateData:t.map((t=>({img_form:{title:t.fn,link:this.isImage(t.mcs)?`data:image/png;base64,${t.mcs}`:"../rs/global/img/file_icon.svg",content:this.isImage(t.mcs)?"":t.mcs,file_type:t.ft},code:{dataFull:{config:{default:{title:"File Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:t.fn}},infor1:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:this.getBusinessLineTypeData(t.infor1)}},infor2:{dataFull:{config:{default:{title:"Customer Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:t.infor2}},expireDate:{dataFull:{config:{default:{placeholder:this.dateFormat||" ",title:"Expire date",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:t.ed?(0,Q.sx)((0,Q.xY)(t.ed),"DD/MM/YYYY"):""}},other:{dataFull:{config:{default:{title:"Account Number",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:(0,Q.Ui)(t.ot,this.accountNumberFormat)}}})))}:void 0!==t?{modal:{title:"Signature Viewer",visibility:this.state.isOpen,abs_Close:()=>{this.setState({isOpen:!1})}},form:{config:{default:{title:this.state.titleNoData}},cmd:{isLoading:this.state.isLoading}},stateData:t.map((t=>({img_form:{title:t.fn,link:this.isImage(t.mcs)?`data:image/png;base64,${t.mcs}`:"../rs/global/img/file_icon.svg",content:this.isImage(t.mcs)?"":t.mcs,file_type:t.ft},code:{dataFull:{config:{default:{title:"File Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:t.fn}},infor1:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:this.getBusinessLineTypeData(t.infor1)}},infor2:{dataFull:{config:{default:{title:"Customer Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:t.infor2}},expireDate:{dataFull:{config:{default:{placeholder:this.dateFormat||" ",title:"Expire date",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:t.ed?(0,Q.sx)((0,Q.xY)(t.ed),"DD/MM/YYYY"):""}},other:{dataFull:{config:{default:{title:"Account Number",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:(0,Q.Ui)(t.ot,this.accountNumberFormat)}}})))}:void 0}getBusinessLineTypeData(t){return this.businessLineTypeData.map(((e,i)=>(0,o.Z)((0,o.Z)({},e),{},{selected:e.value===t})))}}const je=Ee;class Ze extends a.Component{constructor(t){super(t),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data),private_key_config:s.ZP.autoID()}}readConfig(t){var e={};void 0===t&&(t={}),null!=t.structable?e.structable=t.structable:e.structable="",null!=t.structable_read?e.structable_read=t.structable_read:e.structable_read="",null!=t.eventFoStart?e.eventFoStart=t.eventFoStart:e.eventFoStart="DataCoffeeShop",null!=t.eventFoStart_config?e.eventFoStart_config=t.eventFoStart_config:e.eventFoStart_config="";let i="eventClick",o="eventClick_config";return e[i]=t[i]?t[i]:"DataCoffeeShop",e[o]=t[o]?t[o]:"",null!=t.eventFo_Year?e.eventFo_Year=t.eventFo_Year:e.eventFo_Year="",null!=t.formatDateRead?e.formatDateRead=t.formatDateRead:e.formatDateRead="",null!=t.formatDateGet?e.formatDateGet=t.formatDateGet:e.formatDateGet="",e}componentDidUpdate(t){this.props.data!==t.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(t,e){var i=this.state.data;i[t]=e.target.value,this.setState({data:i})}render(){return(0,l.jsxs)("div",{className:"col-sm-12 col-md-12",children:[(0,l.jsx)(Wt.Z,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:t=>this.onChange_Value("structable",t)}),(0,l.jsx)(Wt.Z,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:t=>this.onChange_Value("structable_read",t)}),(0,l.jsx)(Wt.Z,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:t=>this.onChange_Value("data_default",t)}),(0,l.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:(0,l.jsxs)("div",{className:"panel panel-primary",children:[(0,l.jsx)("div",{className:"panel-heading",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-xs-8 col-sm-8 col-md-8",children:(0,l.jsx)("h3",{className:"panel-title text-capitalize",children:(0,l.jsx)("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse",children:"G\u1ecdi fo khi m\u1edbi m\u1edf calender"})})}),(0,l.jsx)("div",{className:"col-xs-4 col-sm-4 col-md-4",children:(0,l.jsx)("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse",children:(0,l.jsx)("i",{className:"fa fa-angle-down fa-lg fa-inverse"})})})]})}),(0,l.jsx)("div",{id:this.state.private_key_config+"_function",className:"collapse",children:(0,l.jsxs)("div",{className:"panel-body",children:[(0,l.jsx)(te.Z,{class:"col-sm-12 col-md-12",name:"H\xe0nh \u0111\u1ed9ng",value:this.state.data.eventFoStart,data:[{title:"L\u1ea5y v\u1edbi API",code:"LearnApi"},{title:"L\u1ea5y v\u1edbi SQL",code:"LearnSql"},{title:"Data Coffee Shop",code:"DataCoffeeShop"}],onChange:t=>this.onChange_Value("eventFoStart",t)}),(0,l.jsx)(Wt.Z,{class:"col-sm-12 col-md-12",name:"T\xean c\u1ea5u h\xecnh li\xean k\u1ebft (API,SQL,DCS)",value:this.state.data.eventFoStart_config,onChange:t=>this.onChange_Value("eventFoStart_config",t)})]})})]})}),(0,l.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:(0,l.jsxs)("div",{className:"panel panel-primary",children:[(0,l.jsx)("div",{className:"panel-heading",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-xs-8 col-sm-8 col-md-8",children:(0,l.jsx)("h3",{className:"panel-title text-capitalize",children:(0,l.jsx)("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse",children:"Click event"})})}),(0,l.jsx)("div",{className:"col-xs-4 col-sm-4 col-md-4",children:(0,l.jsx)("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse",children:(0,l.jsx)("i",{className:"fa fa-angle-down fa-lg fa-inverse"})})})]})}),(0,l.jsx)("div",{id:this.state.private_key_config+"_function",className:"collapse",children:(0,l.jsxs)("div",{className:"panel-body",children:[(0,l.jsx)(te.Z,{class:"col-sm-12 col-md-12",name:"H\xe0nh \u0111\u1ed9ng",value:this.state.data.eventClick,data:[{title:"L\u1ea5y v\u1edbi API",code:"LearnApi"},{title:"L\u1ea5y v\u1edbi SQL",code:"LearnSql"},{title:"Data Coffee Shop",code:"DataCoffeeShop"}],onChange:t=>this.onChange_Value("eventClick",t)}),(0,l.jsx)(Wt.Z,{class:"col-sm-12 col-md-12",name:"T\xean c\u1ea5u h\xecnh li\xean k\u1ebft (API,SQL,DCS)",value:this.state.data.eventClick_config,onChange:t=>this.onChange_Value("eventClick_config",t)})]})})]})}),(0,l.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:(0,l.jsxs)("div",{className:"panel panel-primary",children:[(0,l.jsx)("div",{className:"panel-heading",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-xs-8 col-sm-8 col-md-8",children:(0,l.jsx)("h3",{className:"panel-title text-capitalize",children:(0,l.jsx)("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse",children:"Chuy\u1ec3n date*"})})}),(0,l.jsx)("div",{className:"col-xs-4 col-sm-4 col-md-4",children:(0,l.jsx)("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse",children:(0,l.jsx)("i",{className:"fa fa-angle-down fa-lg fa-inverse"})})})]})}),(0,l.jsx)("div",{id:this.state.private_key_config+"_function",className:"collapse",children:(0,l.jsxs)("div",{className:"panel-body",children:[(0,l.jsx)(Wt.Z,{class:"col-sm-12 col-md-6",name:"\u0110\u1ecbnh d\u1ea1ng ng\xe0y \u0111\u1ea7u v\xe0o",value:this.state.data.eventFoStart_config,onChange:t=>this.onChange_Value("eventFoStart_config",t)}),(0,l.jsx)(Wt.Z,{class:"col-sm-12 col-md-6",name:"\u0110\u1ecbnh d\u1ea1ng ng\xe0y \u0111\u1ea7u ra",value:this.state.data.eventFoStart_config,onChange:t=>this.onChange_Value("eventFoStart_config",t)})]})})]})})]})}}const Re=Ze;class Qe extends a.Component{constructor(t){super(t),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(t){var e={};return void 0===t&&(t={}),null!=t.request?e.request=t.request:e.request=!1,null!=t.min&&(e.min=t.min),null!=t.max&&(e.max=t.max),null!=t.regex_format&&(e.regex_format=t.regex_format),e}componentDidUpdate(t){this.props.data!==t.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return(0,l.jsx)("div",{className:"col-sm-12 col-md-12",children:(0,l.jsx)("div",{className:"prtm-block-content",children:(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsxs)("table",{className:"table table-striped",children:[(0,l.jsx)("thead",{className:"thead-primary",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Confirmation Name"}),(0,l.jsx)("th",{children:"Data"})]})}),(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"Required"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:t=>{var e=this.state.data;e.request=t.target.checked,this.setState({data:e})}})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"The number of words is not less than"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:t=>{var e=this.state.data;""!==t.target.value.trim()?e.min=parseFloat(t.target.value):void 0!==e.min&&delete e.min,this.setState({data:e})}})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"The number of words does not exceed"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:t=>{var e=this.state.data;""!==t.target.value.trim()?e.max=parseFloat(t.target.value):void 0!==e.max&&delete e.max,this.setState({data:e})}})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"Regex structure"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"form-control",value:void 0!==this.state.data.regex_format?this.state.data.regex_format:"",type:"text",onChange:t=>{var e=this.state.data;""!==t.target.value.trim()?e.regex_format=t.target.value:e.regex_format="",this.setState({data:e})}})})]})]})]})})})})}}const ze=Qe;class Ue extends a.Component{constructor(t){super(t),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:s.ZP.getConfigUserDefault("list_lang_config")}}componentDidUpdate(t){this.props.data!==t.data&&this.setState({data:this.props.data})}render(){return(0,l.jsx)("div",{children:this.state.lang_system.map(((t,e)=>(0,l.jsx)(Wt.Z,{class:"col-sm-12 col-md-12",name:t.view,value:void 0!==this.state.data[t.key]?this.state.data[t.key]:t.key,onChange:e=>{var i=this.state.data;i[t.key]=e.target.value,this.setState({data:i})}},e)))})}}const Be=Ue;class Ye extends a.Component{constructor(t){super(t),this.getValue=()=>this.state.data;var e=[];e[0]={},e[0].title="Not use",e[0].code="false",e[1]={},e[1].title="Use",e[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:e}}readConfig(t){var e={};return void 0===t&&(t={}),null!=t.visible?e.visible=t.visible:e.visible="",null!=t.disabled?e.disabled=t.disabled:e.disabled="",e}componentDidUpdate(t){this.props.data!==t.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(t,e){var i=this.state.data;i[t]=e.target.value,this.setState({data:i})}render(){return(0,l.jsxs)("div",{className:"col-sm-12 col-md-12",children:[(0,l.jsx)(te.Z,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:t=>this.onChange_Value("disabled",t)}),(0,l.jsx)(te.Z,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:t=>this.onChange_Value("visible",t)})]})}}const He=Ye;class Ve extends a.Component{constructor(t){super(t),this.getValue=()=>({}),this.state={data:this.readConfig(this.props.data)}}readConfig(t){var e={};return void 0===t&&(t={}),null!=t.properties?e.properties=t.properties:e.properties="",e}render(){return(0,l.jsx)("div",{})}}const We=Ve;const Ge=class{constructor(t,e,i){this.getProperty=()=>this.property,this.setCMD=t=>{void 0!==t.visible&&("true"!==t.visible&&"false"!==t.visible||(this.property.cmd.visible=t.visible)),void 0!==t.disabled&&("true"!==t.disabled&&"false"!==t.disabled||(this.property.cmd.disabled=t.disabled)),void 0!==t.block&&("true"!==t.block&&"false"!==t.block||(this.property.cmd.block=t.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=t=>{this.property.cmd.visible=t},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=t=>{this.property.cmd.disabled=t},this.property={main:[],position:[],cmd:{visible:"true",disabled:"true",block:"false"}}}};class Je extends a.Component{render(){return(0,l.jsx)(a.Fragment,{children:""!==this.props.ofgroup&&"false"!==this.props.ofgroup&&void 0!==this.props.ofgroup_data&&this.props.ofgroup_data.map(((t,e)=>(void 0===t.config.onTable||""===t.config.onTable)&&(0,l.jsx)(f.Z,{btn_of_grid:this.props.btn_of_grid,index:e,default:t.default,visibility:t.visibility,config:t.config,role:t.role,property:t.property,validate:t.validate,lang:t.lang,configAVD:t.configAVD,inputType:t.inputtype,value:t.value,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,infoView:this.props.infoView,css_default:this.props.css_default,ofgroup_data:this.props.ofgroup_data,ofgroup_parent:this.props.ofgroup_parent,ofgroup_child:!0},e)))})}}const qe=Je;class Ke extends a.Component{constructor(t){super(t),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(t,e)=>{},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.getAdvanced=(t,e)=>{},this.getDataOOP=(t,e)=>{const{list_component:i}=t,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()},(()=>{this.calendar.setOption("locale",this.state.lang_select)}))},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.getFormConfig=t=>(0,l.jsx)(Re,{data:t,ref:t=>s.ZP.setConfigComponent("config",t)}),this.getFormRole=t=>(0,l.jsx)(He,{data:t,ref:t=>s.ZP.setConfigComponent("role",t)}),this.getFormValidate=t=>(0,l.jsx)(ze,{data:t,ref:t=>s.ZP.setConfigComponent("validate",t)}),this.getFormProperty=t=>(0,l.jsx)(We,{data:t,ref:t=>s.ZP.setConfigComponent("property",t)}),this.getFormLang=(t,e,i,o,a)=>(0,l.jsx)(Be,{data:o,default:t,config:e,validate:i,configAVD:a,ref:t=>s.ZP.setConfigComponent("lang",t)}),this.setDataGB=(t,e)=>{},this.set=(t,e)=>{if(void 0!==e&&void 0!==e.calender&&e.calender.length>=0){let t=[];for(let i=0;i<e.calender.length;i++){let o=e.calender[i];if(void 0!==o.calender&&void 0!==o.calender.start&&o.calender.title){let e=(0,_t.ji)(o.calender.start,"dd/mm/yyyy");null!=e&&t.push({id:s.ZP.autoID(),title:s.ZP.getLang(o.calender.title),start:(0,_t.Qv)(e,"ISOString"),end:null,constraint:o.calender.constraint?o.calender.constraint:"",color:o.calender.color?o.calender.color:"#257e4a",allDay:!!o.calender.allDay&&o.calender.allDay})}}this.addEvents(t)}},this.setAdvanced=(t,e)=>{if(void 0!==e&&void 0!==e&&e.length>0){let t=[];for(let i=0;i<e.length;i++){let o=e[i].calender.calender;if(void 0!==o&&void 0!==o.start&&o.title){let e=(0,_t.ji)(o.start,"dd/mm/yyyy");null!=e&&t.push({id:s.ZP.autoID(),title:s.ZP.getLang(o.title),start:(0,_t.Qv)(e,"ISOString"),end:null,constraint:o.constraint?o.constraint:"",color:o.color?o.color:"#257e4a",allDay:!!o.allDay&&o.allDay})}}this.addEvents(t)}},this.setGetInfo=(t,e)=>{if(void 0!==(e=e[this.props.default.code])&&void 0!==e&&e.length>0){let t=[];for(let i=0;i<e.length;i++){let o=e[i].calender.calender;if(void 0!==o&&void 0!==o.start&&o.title){let e=(0,_t.ji)(o.start,"dd/mm/yyyy");null!=e&&t.push({id:s.ZP.autoID(),title:s.ZP.getLang(o.title),start:(0,_t.Qv)(e,"ISOString"),end:null,constraint:o.constraint?o.constraint:"",color:o.color?o.color:"#257e4a",allDay:!!o.allDay&&o.allDay})}}this.addEvents(t)}},this.goToDate=(t,e)=>{this.calendar&&this.calendar.gotoDate(new Date(e))},this.get=(t,e)=>{var i=!0;if(t.checkError&&"false"===t.checkError&&(i=!1),!i||!this.checkValidate()){var o=!1;if(null!==t&&void 0!==t&&(t.list_component?(";"+t.list_component+";").includes(";"+this.props.default.code+";")&&(o=!0):void 0!==t.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===t.list_view&&(o=!0),o)){var a=this.props.config.structable;if(a.includes("|"))for(var s=a.split("|"),n=0;n<s.length;n++)this.readData(s[n],t.inform);else this.readData(a,t.inform)}}},this.checkValidate=()=>{var t=!1,e=this.state.value;if(void 0!==e&&(void 0===this.state.validate.request||t||this.state.validate.request&&""===e&&(t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{let i=this.calendar.getEventById(this.eventNeedDeleteId);i&&i.remove()},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:t,infoComponet:this.props.default}}return""},this.renderMess=t=>s.ZP.getLang(t),this.propertyConstructor=new Ge(t.inputType,t.default,t.config);var e=s.ZP.component_propertyIndex(this.props.property.properties,this.propertyConstructor.getProperty());void 0===e&&(e={});var i=this.props.validate;void 0===i&&(i={}),this.callform_detail="",this.callform="",this.data_select={};var o=this.props.lang;void 0===o&&(o={});let a={mode:"",col_text:"",col_input:""};void 0!==t.infoA.mode_form&&(a=t.infoA.mode_form);let n={parent:"",child:""},r={class:""},c=void 0!==this.props.ofgroup&&""!==this.props.ofgroup&&"false"!==this.props.ofgroup,d=void 0!==t.infoA.mode_form&&"1"===t.infoA.mode_form.mode,h=!!this.props.ofgroup_child;if(d)if(h)n={parent:"",child:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:void 0!==this.props.css_default.class&&""!==this.props.css_default.class?this.props.css_default.class:"col-sm-4"};else if(c){let t="col-sm-"+parseInt(10/(this.props.ofgroup_data.length+1));r={class:t},n={parent:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:t,child:""}}else n={parent:"col-sm-6",child:""};else n=h?{parent:"",child:this.props.default.class+" jwebui-ofgroup"}:c?0===this.props.ofgroup_data.length?{parent:this.props.default.class,child:""}:{parent:this.props.default.class_ofgroup,child:this.props.default.class+" jwebui-ofgroup-fisrt"}:{parent:this.props.default.class,child:""};this.resourceData={id:s.ZP.autoID(),title:"Resource"},this.state={value:{},value_old:{},data:[],lang:o,lang_select:s.ZP.getLangKey(),validate:i,date_now:(new Date).toISOString(),data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",config_mode:a,class_config:n,css_default:r}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this),_.ZP.runFoWithContext([{txcode:"#sys:fo-calender-loadData",input:{dataType:this.props.config.eventFoStart,dataContent:this.props.config.eventFoStart_config}}],{},this.props.infoA,this.props.infoA_parent,this.props.default)}),s.ZP.getTimeAddComponent());let t=s.ZP.getConfigUserDefault("list_lang_config");for(let e=0;e<t.length;e++)void 0!==t[e].key&&s.ZP.loadJs("/app/calender/core/locales/"+t[e].key+".js");s.ZP.loadCss("/app/calender/core/main.css"),s.ZP.loadCss("/app/calender/daygrid/main.css"),s.ZP.loadCss("/app/calender/timegrid/main.css"),s.ZP.loadCss("/app/calender/list/main.css"),s.ZP.loadJs("/app/calender/core/main.js").then((t=>{s.ZP.loadJs("/app/calender/interaction/main.js").then((t=>{s.ZP.loadJs("/app/calender/daygrid/main.js").then((t=>{s.ZP.loadJs("/app/calender/timegrid/main.js").then((t=>{s.ZP.loadJs("/app/calender/list/main.js").then((t=>{this.calendar=new window.FullCalendar.Calendar(this.refs.calendar,{plugins:["interaction","dayGrid","timeGrid","list"],header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},locale:s.ZP.getLangKey(),weekNumbers:!0,weekNumbersWithinDays:!0,weekNumberCalculation:"ISO",contentHeight:900,defaultDate:this.state.date_now,navLinks:!0,businessHours:!0,editable:!0,events:[],displayEventTime:!1,eventClick:t=>{this.eventNeedDeleteId=t.event.id,_.ZP.runFoWithContext([{txcode:"#sys:fo-calendar-removeEvent",input:{dataType:this.props.config.eventClick,dataContent:this.props.config.eventClick_config,start:(0,_t.p6)(t.event.start,"YYYY-MM-DD")}}],{},this.props.infoA,this.props.infoA_parent,this.props.default)},dateClick:t=>{}}),this.calendar.render()}),(t=>{}))}),(t=>{}))}),(t=>{}))}),(t=>{}))}),(t=>{}))}readData(t,e){if(t.includes(".")){var i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}readEvents(){let t=this.calendar.getEvents(),e=[];for(let i=0;i<t.length;i++){let o=t[i];void 0!==o.start&&void 0!==o.end&&void 0!==o.title&&e.push({start:o.start,end:o.end,title:o.title,backgroundColor:o.backgroundColor,borderColor:o.borderColor,textColor:o.textColor,rendering:o.rendering,groupId:o.groupId,allDay:o.allDay})}return e}addEvents(t){for(var e=this.calendar.getEventSources(),i=e.length,o=0;o<i;o++)e[o].remove();this.calendar.addEventSource(t)}render(){return(0,l.jsxs)("div",{className:"col-sm-12 col-md-12",children:[(0,l.jsx)("div",{ref:"calendar",className:"basic-full-calendar malibu-component-padding",style:{margin:"32px auto 32px"}}),(0,l.jsx)(qe,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,infoView:this.props.infoView,ofgroup:this.props.ofgroup,ofgroup_data:this.props.ofgroup_data,ofgroup_parent:s.ZP.cloneJson(this.props),css_default:this.state.css_default})]})}}const Xe=Ke;class $e extends a.Component{constructor(t){super(t),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(t,e)=>{},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.getAdvanced=(t,e)=>{},this.getDataOOP=(t,e)=>{const{list_component:i}=t,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.drawChart=()=>{if(void 0!==this.state.data&&void 0!==window.google&&void 0!==window.google.visualization){let t=window.google.visualization.arrayToDataTable(this.state.data),{options:e,chart_id:i,chartType:o}=this.state,a=this.getChartByIdAndType(i,o);null!=a&&a.draw(t,e)}},this.getChartByIdAndType=(t,e)=>{let i=null;switch(e){case"AreaChart":i=new window.google.visualization.AreaChart(document.getElementById(t));break;case"ColumnChart":i=new window.google.visualization.ColumnChart(document.getElementById(t));break;case"LineChart":i=new window.google.visualization.LineChart(document.getElementById(t));break;case"PieChart":i=new window.google.visualization.PieChart(document.getElementById(t))}return i},this.setDataGB=(t,e)=>{},this.set=(t,e)=>{if(void 0!==e&&void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){let t=this.props.config.structable_read.split(".");if(t.length>0&&void 0!==e[t[0]]&&void 0!==e[t[0]][t[1]])return void this.convertDataJWebUI_toDataChart(e)}this.convertDataJWebUI_toDataChart([])},this.setAdvanced=(t,e)=>{if(t.codeHidden&&t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],t.codeHidden&&t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.checkValidate=()=>{var t=!1,e=this.state.value;if(void 0!==e&&(void 0===this.state.validate.request||t||this.state.validate.request&&""===e&&(t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{let i=s.ZP.getDataLimited(this.props.config.query_data,0,9999999);this.setState({data:this.convertDataJWebUI_toDataChart(i.data,this.state.data_column)},(()=>this.drawChart()))},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:t,infoComponet:this.props.default}}return""},this.renderMess=t=>s.ZP.getLang(t);var e=s.ZP.getDataLimited(this.props.config.query_data,0,9999999);let i=this.props.lang;void 0===i&&(i={});let o={};void 0!==this.props.config.options&&(o=s.ZP.jsonParser(this.props.config.options),void 0===o&&(o={}));let a=[];void 0!==this.props.config.columns&&(a=s.ZP.jsonParser(this.props.config.columns),void 0===a&&(a=[]));let n=600;void 0!==this.props.config.chart_height&&"0"!==this.props.config.chart_height&&(n=parseInt(this.props.config.chart_height));let r=document.getElementById("content").offsetWidth-240;void 0!==this.props.config.chart_width&&""!==this.props.config.chart_width&&"0"!==this.props.config.chart_width&&(r=parseInt(this.props.config.chart_width)),o.width=r,o.height=n;let l=s.ZP.autoID();this.state={chart_id:l,value:this.data_default,data_column:a,data:this.convertDataJWebUI_toDataChart(e.data,a),options:o,chartType:this.props.config.chartType,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:""}}convertDataJWebUI_toDataChart(t,e){let i={},o=e,a=[];if(void 0!==t&&void 0!==e){for(let e=0;e<t.length;e++){let a=t[e];if(o.length>1&&void 0!==o[0].tableColumnGroup){var s;let t=this.readTableCode(o[0].tableColumnGroup,a);"date"===(null===(s=o[0].config)||void 0===s?void 0:s.value_type)&&(t=new Date(t)),void 0===i[t]&&(i[t]=[]);for(let e=1;e<o.length;e++)if(void 0!==o[e].tableColumn&&""!==o[e].tableColumn.trim()){let s=i[t][e-1];void 0===s&&(s=0);let n=this.readTableCode(o[e].tableColumn,a);""!==n&&(s=n,i[t][e-1]=s)}}}let r=[];for(let t=0;t<e.length;t++)void 0!==e[t].columnName&&r.push(e[t].columnName);a.push(r);for(let t in i){var n;let e=[];"date"===(null===(n=o[0].config)||void 0===n?void 0:n.value_type)?e.push(new Date(t)):e.push(t);let s=i[t];for(let t=0;t<s.length;t++)e.push(s[t]);a.push(e)}}return a}readTableCode(t,e){if(t.includes(".")&&void 0!==e){let i=t.split(".");if(i.length>1)return e[i[0]][[i[1]]]}return""}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this),this.drawChart()}),s.ZP.getTimeAddComponent())}readData(t,e){if(t.includes(".")){var i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}render(){return(0,l.jsx)("div",{className:"col-sm-12 col-md-12",children:(0,l.jsx)("div",{id:this.state.chart_id,style:{width:"100%"}})})}}const ti=$e;class ei extends a.Component{constructor(t){var e,i;super(t),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.getAdvanced=(t,e)=>this.state.value,this.getDataOOP=(t,e)=>{const{list_component:i}=t,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.setDataGB=(t,e)=>{},this.set=(t,e)=>{if(void 0!==e){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var i=this.props.config.structable_read.split(".");if(i.length>0&&void 0!==e[i[0]]&&void 0!==e[i[0]][i[1]])return this.data_debug.data_cpn=e[i[0]][i[1]],void this.setState({value:e[i[0]][i[1]]})}this.data_debug.data_cpn="undefined"}},this.setAdvanced=(t,e)=>{},this.get=(t,e)=>{},this.checkValidate=()=>{var t=!1,e=this.state.value;if(void 0!==e&&(void 0===this.state.validate.request||t||this.state.validate.request&&""===e&&(t=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.setState({value:this.data_default})},this.setDataDefault=()=>{this.setState({value:this.data_default})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:t,infoComponet:this.props.default}}return""},this.renderDebug=()=>{if(s.ZP.isDebug()){this.props.config.structable=this.props.config.structable||"";let t=this.props.config.structable.split(".")[1],e=this.data_debug.data_cpn;return null===e&&(e="NULL"),(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${t}|:|${e}|`})}},this.getComponentConfig=()=>{let t=this.state.total;return isNaN(parseInt(t))&&parseInt(t)<=0&&(t=100),{config:{default:{title:this.props.lang.label[this.state.lang_select],hasLabel:"true"===this.props.config.label},cmd:{percent:this.state.value},mode:!0}}},this.getComponentConfigLabel=()=>{let t=this.state.lang.label[this.state.lang_select];return{config:{default:{title:t,class:this.props.default.class},cmd:{visible:"false"!==String(this.state.hasLabel)&&!!t&&""!==t}}}},this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var o=this.props.validate;void 0===o&&(o={}),this.data_select={};var a=this.props.lang;void 0===a&&(a={});let n=null===(e=this.props.config)||void 0===e?void 0:e.label,r=null===(i=this.props.config)||void 0===i?void 0:i.total;this.state={value:this.data_default,value_old:"",lang:a,lang_select:s.ZP.getLangKey(),validate:o,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{},hasLabel:n,total:r},this.data_debug={}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){if(t.includes(".")){var i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}render(){if("false"===String(this.state.CMD.visible))return null;const t=(0,n.RP)("uProgressBarLogic");return(0,l.jsx)(t,{dataFull:this.getComponentConfig()})}}const ii=ei;const oi=class{constructor(t,e,i){this.getProperty=()=>this.property,this.setCMD=t=>{void 0!==t.visible&&("true"!==t.visible&&"false"!==t.visible||(this.property.cmd.visible=t.visible)),void 0!==t.disabled&&("true"!==t.disabled&&"false"!==t.disabled||(this.property.cmd.disabled=t.disabled)),void 0!==t.block&&("true"!==t.block&&"false"!==t.block||(this.property.cmd.block=t.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=t=>{this.property.cmd.visible=t},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=t=>{this.property.cmd.disabled=t},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class ai extends a.Component{constructor(t){var e;if(super(t),this.setDataOOP=(t,e)=>{this.setState({dataOOP:e},(()=>{s.ZP.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,e,this.props.infoA_parent,"update")}))},this.getDataOOP=(t,e)=>{let{list_component:i}=t,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.state.dataOOP}},this.setCMD=(t,e)=>{if(void 0!==t&&void 0!==e){let i=t.list_component;if(i&&i.includes(this.props.default.code)){const{CMD:t}=this.state;let i=Object.assign(s.ZP.cloneJson(t),e);t.disabled===i.disabled&&t.visible===i.visible&&t.block===i.block||this.setState({CMD:i})}}},this.getAdvanced=(t,e)=>this.state.file_content,this.setAdvanced=(t,e)=>{},this.getInfoCheckRun=()=>{let t=this.propertyConstructor.getCMD();return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.state.lang_default?this.setState({lang:s.ZP.getLang(this.props.default.code),lang_select:s.ZP.getLangKey()}):this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.reload=(t,e)=>{this.setState({file_value:void 0,file_content:void 0})},this.runFO=(t,e)=>{e.action&&_.ZP.runActionWithContext(e.action,{},this.props.infoA,this.props.infoA_parent,this.props.default),e.txFo&&_.ZP.runFoWithContext(e.txFo,{},this.props.infoA,this.props.infoA_parent,this.props.default)},this.setLoadingAction=(t,e)=>{let i=(null===e||void 0===e?void 0:e.isLoading)||!1;this.setState({isLoading:i})},this.fileSelectHandler=t=>{},this.runRule=t=>{if(t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)}},this.showToast=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s.ZP.showToast(t,e,i)},this.propertyConstructor=new oi(t.inputType,t.default,t.config),this.uploadfile_result={},this.disabled=!1,void 0!==this.props.infoA.form_code){var i=s.ZP.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=i&&void 0!==i.role&&(void 0!==i.role.disabled&&(!0===i.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==i.role.visible&&(!0===i.role.visible?this.propertyConstructor.setCMD_visible(t.visibility&&!0):this.propertyConstructor.setCMD_visible(t.visibility&&!1)))}var o=this.props.lang;void 0===o&&(o={});let a=(null===(e=this.props.config.uploadfile)||void 0===e?void 0:e.filetype)||"*";this.fileTypeRegx=a.split(",").map((function(t){return new RegExp(t.replace("*","[^\\/,]+"))}));let n=!1;void 0!=={btn_remove:{color:"danger",icon:"fa-trash-o"},btn_save:{color:"success",icon:"fa-save"},btn_add:{color:"primary",icon:"fa-plus"},btn_modified:{color:"warning",icon:"fa-pencil-square-o"},btn_update:{color:"warning",icon:"fa-cloud-upload"},btn_cancel:{color:"default",icon:"fa-ban"},btn_clear:{color:"default",icon:"fa-times"},btn_import:{color:"primary",icon:"fa-upload"},btn_export:{color:"primary",icon:"fa-download"},btn_accept:{color:"primary",icon:"fa-check"},btn_apply:{color:"primary",icon:"fa-check"},btn_search:{color:"primary",icon:"fa-search"},btn_copy:{color:"primary",icon:"fa-files-o"},btn_print:{color:"base",icon:"fa-print"},btn_printVoucher:{color:"base",icon:"fa-file-text-o"}}[this.props.default.code]&&(o=s.ZP.getLang(this.props.default.code),n=!0);var r=!1;void 0!==this.props.config.isLookup&&"true"===this.props.config.isLookup&&(r=!0),this.state={file_value:void 0,file_content:"",lang:o,lang_select:s.ZP.getLangKey(),lang_default:n,dataOOP:{},count:1,show_modal:"none",isLookup:r,CMD:this.propertyConstructor.getCMD(),isLoading:!1},this.time_last_click=0}getTemplateConfig(){var t;let{isLoading:e}=this.state;return{config:{default:{title:this.props.default.name,type:this.props.config.color,class:this.props.default.class,icon:this.props.config.icon,accept:null===(t=this.props.config.uploadfile)||void 0===t?void 0:t.filetype,att_content:this.state.file_value?this.state.file_value.name:"No file choose"},cmd:{disable:e||"true"===String(this.state.CMD.disabled),isLoading:e,visible:"true"===String(this.state.CMD.visible)}}}}checkFileTypeAccept(t){return this.fileTypeRegx.some((e=>e.test(t)))}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config!==t.config&&this.setState({config:this.props.config}),this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.property!==t.property&&this.setState({property:this.props.property})}readData(t,e){let i=t.split(".");if(2!==i.length)return;let o=this.uploadfile_result;switch(e){case void 0:case"true":s.ZP.putData(i[0],i[1],o,this.props.infoA);break;case"false":s.ZP.putDataGB(i[0],i[1]);break;default:s.ZP.putDataGB(i[0],i[1],"")}}componentDidMount(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let t=s.ZP.cloneJson(this.props.infoA);t.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),t,this.props.default,"callform")}setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}onClick(){let t=(new Date).getTime();t-this.time_last_click<1e3||(this.time_last_click=t,void 0!==this.props.config.uploadfile&&"true"===this.props.config.uploadfile.active?this.refs.uploadfile_hidden.click():this.this_redirect())}this_redirect(){if(this.propertyConstructor.getCMD_visible())if(void 0!==this.props.config.useAction)if("true"===this.props.config.useAction){var t=s.ZP.parseJson(this.props.config.txFoActions);void 0!==t?_.ZP.runActionWithContext(t,{},this.props.infoA,this.props.infoA_parent,this.props.default):s.ZP.AppException("#CBUTTON.onClick","config_fo is undefined")}else if(void 0!==this.props.config.txFo){var e=s.ZP.parseJson(this.props.config.txFo);void 0!==e?_.ZP.runFoWithContext(e,{},this.props.infoA,this.props.infoA_parent,this.props.default):s.ZP.AppException("#CBUTTON.onClick","Error Json is undefined")}else s.ZP.AppException("#CBUTTON.onClick","txFo is undefined");else s.ZP.AppException("#CBUTTON.onClick","useAction is undefined");else alert(s.ZP.getLang("#sysDontLoveMe"));var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click"),s.ZP.isDebug()&&s.ZP.copyToClipboard(JSON.stringify(this.props.config.txFo))}render(){const t=(0,n.RP)("uInputFile");if("false"===this.state.CMD.visible)return null;const e=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(e,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Change:t=>{if(t.preventDefault(),void 0!==t.target.files)if(t.target.files.length>0)if(this.checkFileTypeAccept(t.target.files[0].type)||""===t.target.files[0].type){if(this.uploadfile_result={name:t.target.files[0].name},"encode_server"!==this.props.config.read_style){let e=new FileReader,[i]=t.target.files;e.onloadend=()=>{this.setState({file_content:"base64"===this.props.config.read_style?e.result.split(",")[1]:e.result},(()=>{if(!this.props.config.structable){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click")}}))};let o=10;void 0!==i&&null!==i&&i.size/1024/1024<o&&("text_in_file"===this.props.config.read_style?e.readAsText(i):e.readAsDataURL(i))}else{if(this.props.config.structable)(t.target.files[0].size/1024/1024).toFixed(4)<=10?(0,S.bq)(t.target.files[0],t.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((t=>{this.this_redirect()}),(t=>{t.statusCode&&t.statusText?this.showToast(t.statusCode+":"+t.statusText+"#",!1):this.showToast(s.ZP.getLang("FileUploadError"),!1)})):this.showToast(s.ZP.getLang("FileSizeError"),!1)}this.setState({file_value:t.target.files[0]})}else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1)},abs_Click:(t,e)=>{this.onClick()}})})}),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Change:t=>{if(t.preventDefault(),void 0!==t.target.files)if(t.target.files.length>0)if(this.checkFileTypeAccept(t.target.files[0].type)||""===t.target.files[0].type){if(this.uploadfile_result={name:t.target.files[0].name},"encode_server"!==this.props.config.read_style){let e=new FileReader,[i]=t.target.files;e.onloadend=()=>{this.setState({file_content:"base64"===this.props.config.read_style?e.result.split(",")[1]:e.result},(()=>{if(!this.props.config.structable){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click")}}))};let o=100;void 0!==i&&null!==i&&i.size/1024/1024<o&&("text_in_file"===this.props.config.read_style?e.readAsText(i):e.readAsDataURL(i))}else{if(this.props.config.structable)(t.target.files[0].size/1024/1024).toFixed(4)<=10?(0,S.bq)(t.target.files[0],t.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((t=>{this.this_redirect()}),(t=>{t.statusCode&&t.statusText?this.showToast(t.statusCode+":"+t.statusText+"#",!1):this.showToast(s.ZP.getLang("FileUploadError"),!1)})):this.showToast(s.ZP.getLang("FileSizeError"),!1)}this.setState({file_value:t.target.files[0]})}else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1)},abs_Click:(t,e)=>{this.onClick()}})})})}}const si=ai;const ni=class{constructor(t,e,i){this.getProperty=()=>this.property,this.setCMD=t=>{void 0!==t.visible&&("true"!==t.visible&&"false"!==t.visible||(this.property.cmd.visible=t.visible)),void 0!==t.disabled&&("true"!==t.disabled&&"false"!==t.disabled||(this.property.cmd.disabled=t.disabled)),void 0!==t.block&&("true"!==t.block&&"false"!==t.block||(this.property.cmd.block=t.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=t=>{this.property.cmd.visible=t},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=t=>{this.property.cmd.disabled=t},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class ri extends a.Component{constructor(t){if(super(t),this.setDataOOP=(t,e)=>{this.setState({dataOOP:e},(()=>{s.ZP.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,e,this.props.infoA_parent,"update")}))},this.getDataOOP=(t,e)=>{const{list_component:i}=t,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.state.dataOOP}},this.setCMD=(t,e)=>{if(void 0!==t&&void 0!==e){const i=t.list_component;if(i&&i.includes(this.props.default.code)){const{CMD:t}=this.state;let i=Object.assign(s.ZP.cloneJson(t),e);t.disabled===i.disabled&&t.visible===i.visible&&t.block===i.block||this.setState({CMD:i})}}},this.getAdvanced=(t,e)=>{},this.setAdvanced=(t,e)=>{},this.setGetInfo=(t,e)=>{e=e[this.props.default.code]},this.getInfoCheckRun=()=>{let t=this.propertyConstructor.getCMD();return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.state.lang_default?this.setState({lang:s.ZP.getLang(this.props.default.code),lang_select:s.ZP.getLangKey()}):this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.reload=(t,e)=>{this.setState({file_value:void 0,img_value:"../rs/global/img/file_icon.svg"})},this.runFO=(t,e)=>{e.action&&_.ZP.runActionWithContext(e.action,{},this.props.infoA,this.props.infoA_parent,this.props.default),e.txFo&&_.ZP.runFoWithContext(e.txFo,{},this.props.infoA,this.props.infoA_parent,this.props.default)},this.setLoadingAction=(t,e)=>{let i=(null===e||void 0===e?void 0:e.isLoading)||!1;this.setState({isLoading:i})},this.fileSelectHandler=t=>{},this.set=(t,e)=>{if(void 0!==e&&null!==e&&void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){let t=this.props.config.structable_read.split(".");if(t.length>0&&void 0!==e[t[0]]&&null!==e[t[0]]&&void 0!==e[t[0]][t[1]]&&null!==e[t[0]][t[1]])return void(""!==e[t[0]][t[1]]?"string"===typeof e[t[0]][t[1]]&&(e[t[0]][t[1]].indexOf("../rs")>-1||e[t[0]][t[1]].indexOf(this.prefixImage)>-1?this.setState({img_value:e[t[0]][t[1]]},(()=>{})):this.setState({img_value:this.prefixImage+e[t[0]][t[1]]},(()=>{}))):this.setState({img_value:"../rs/global/img/file_icon.svg"},(()=>{})))}},this.runRule=t=>{if(t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)}},this.showToast=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s.ZP.showToast(t,e,i)},this.propertyConstructor=new ni(t.inputType,t.default,t.config),this.prefixImage="data:image/png;base64,",this.uploadfile_result={},this.disabled=!1,void 0!==this.props.infoA.form_code){var e=s.ZP.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=e&&void 0!==e.role&&(void 0!==e.role.disabled&&(!0===e.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==e.role.visible&&(!0===e.role.visible?this.propertyConstructor.setCMD_visible(t.visibility&&!0):this.propertyConstructor.setCMD_visible(t.visibility&&!1)))}var i=this.props.lang;void 0===i&&(i={});var o=!1;void 0!==this.props.config.isLookup&&"true"===this.props.config.isLookup&&(o=!0),this.state={file_value:void 0,lang:i,img_value:"",lang_select:s.ZP.getLangKey(),lang_default:!1,dataOOP:{},count:1,CMD:this.propertyConstructor.getCMD(),show_modal:"none",isLookup:o,isLoading:!1},this.time_last_click=0}getTemplateConfig(){let{isLoading:t,CMD:e}=this.state;return{config:{default:{title:this.props.default.name,type:this.props.config.color,class:this.props.default.class,icon:this.props.config.icon,accept:"image/png,image/jpeg",hasUpload:this.props.config.uploadfile,att_content:this.state.file_value?this.state.file_value.name:"No file choose"},cmd:{disable:t||"true"===String(e.disabled),visible:"true"===String(e.visible),isLoading:t}}}}checkFileTypeAccept(t){return"image/png,image/jpeg".split(",").map((function(t){return new RegExp(t.replace("*","[^\\/,]+"))})).some((e=>e.test(t)))}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config!==t.config&&this.setState({config:this.props.config}),this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.property!==t.property&&this.setState({property:this.props.property})}readData(t,e){var i=t.split(".");if(2!==i.length)return;let o=this.uploadfile_result;switch("{}"===JSON.stringify(o)&&(o=this.state.img_value),e){case void 0:case"true":s.ZP.putData(i[0],i[1],o,this.props.infoA);break;case"false":s.ZP.putDataGB(i[0],i[1]);break;default:s.ZP.putDataGB(i[0],i[1],"")}}componentDidMount(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let t=s.ZP.cloneJson(this.props.infoA);t.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),t,this.props.default,"callform")}setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}onClick(){let t=(new Date).getTime();t-this.time_last_click<1e3||(this.time_last_click=t,void 0!==this.props.config.uploadfile&&"true"===this.props.config.uploadfile.active?this.refs.uploadfile_hidden.click():this.this_redirect())}this_redirect(){if(this.propertyConstructor.getCMD_visible())if(void 0!==this.props.config.useAction)if("true"===this.props.config.useAction){var t=s.ZP.parseJson(this.props.config.txFoActions);void 0!==t?_.ZP.runActionWithContext(t,{},this.props.infoA,this.props.infoA_parent,this.props.default):s.ZP.AppException("#UploadImage.onClick","config_fo is undefined")}else if(void 0!==this.props.config.txFo){var e=s.ZP.parseJson(this.props.config.txFo);void 0!==e?_.ZP.runFoWithContext(e,{},this.props.infoA,this.props.infoA_parent,this.props.default):s.ZP.AppException("#UploadImage.onClick","Error Json is undefined")}else s.ZP.AppException("#UploadImage.onClick","txFo is undefined");else s.ZP.AppException("#UploadImage.onClick","useAction is undefined");else alert(s.ZP.getLang("#sysDontLoveMe"));var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click"),s.ZP.isDebug()&&s.ZP.copyToClipboard(JSON.stringify(this.props.config.txFo))}render(){const t=(0,n.RP)("uUploadImage");if("false"===this.state.CMD.visible)return null;const e=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(e,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Change:t=>{void 0!==t.target.files&&(t.target.files.length>0&&this.checkFileTypeAccept(t.target.files[0].type)?((0,S.bq)(t.target.files[0],t.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((t=>{this.uploadfile_result=t,this.this_redirect()}),(t=>{t.statusCode&&t.statusText?this.showToast(t.statusCode+":"+t.statusText+"#",!1):this.showToast(s.ZP.getLang("FileUploadError"),!1)})),this.setState({file_value:t.target.files[0]})):this.showToast(s.ZP.getLang("FileTypeError"),!1))},abs_Click:(t,e)=>{this.onClick()}})})}),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Change:t=>{if(t.preventDefault(),void 0!==t.target.files)if(t.target.files.length>0)if(this.checkFileTypeAccept(t.target.files[0].type)){let e=new FileReader,i=t.target.files[0];e.onloadend=()=>{let{img_value:t}=this.state;t=e.result,this.setState({img_value:t})};let o=10;void 0!==i&&null!==i&&i.size/1024/1024<o&&e.readAsDataURL(i),(0,S.bq)(t.target.files[0],t.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((t=>{this.uploadfile_result=t,this.this_redirect()}),(t=>{t.statusCode&&t.statusText?this.showToast(t.statusCode+":"+t.statusText+"#",!1):this.showToast(s.ZP.getLang("FileUploadError"),!1)})),this.setState({file_value:t.target.files[0]})}else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1)},abs_Click:(t,e)=>{this.onClick()},value:this.state.img_value})})})}}const li=ri;const ci=class{constructor(t,e,i){this.getProperty=()=>this.property,this.setCMD=t=>{void 0!==t.visible&&("true"!==t.visible&&"false"!==t.visible||(this.property.cmd.visible=t.visible)),void 0!==t.disabled&&("true"!==t.disabled&&"false"!==t.disabled||(this.property.cmd.disabled=t.disabled)),void 0!==t.block&&("true"!==t.block&&"false"!==t.block||(this.property.cmd.block=t.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=t=>{this.property.cmd.visible=t},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=t=>{this.property.cmd.disabled=t},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class di extends a.Component{constructor(t){var e;super(t),e=this,this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(t,e)=>{if(void 0!==t&&void 0!==e){const i=t.list_component;if(i&&i.includes(this.props.default.code)){this.propertyConstructor.setCMD(e);const{CMD:t}=this.state;let i=Object.assign(s.ZP.cloneJson(t),e);t.disabled===i.disabled&&t.visible===i.visible&&t.block===i.block||this.setState({CMD:i})}}},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.getAdvanced=(t,e)=>{},this.getDataOOP=(t,e)=>{const{list_component:i}=t,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{this.state.lang_default?this.setState({lang:s.ZP.getLang(this.props.default.code),lang_select:s.ZP.getLangKey()}):this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.setDataGB=(t,e)=>{},this.set=(t,e)=>{},this.get=(t,e)=>{var i=!0;if(t.checkError&&"false"===t.checkError&&(i=!1),!i||!this.checkValidate()){var o=!1;if(null!==t&&void 0!==t&&(t.list_component?(";"+t.list_component+";").includes(";"+this.props.default.code+";")&&(o=!0):void 0!==t.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===t.list_view&&(o=!0),o)){var a=this.props.config.structable;if(a.includes("|"))for(var s=a.split("|"),n=0;n<s.length;n++)this.readData(s[n],t.inform);else this.readData(a,t.inform)}}},this.checkValidate=()=>!1,this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.setState({value:[]})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:t,infoComponet:this.props.default}}return""},this.renderMess=t=>s.ZP.getLang(t),this.setPaging=t=>{this.callAPI(this.props.config.apiId,{page:t}).then((e=>{if(e.paging&&e.paging.total){let{value:i,dataFull_paging:o,titleNoData:a}=this.state;a="",o.result_total=e.paging.total,i=e.media,o.number_item=t-1,this.setState({dataFull_paging:o,value:i,titleNoData:a})}else{let{value:t,dataFull_paging:e,titleNoData:i}=this.state;e.result_total=0,t=[],e.number_item=0,i="Hasn't Signature Information",this.setState({value:t,dataFull_paging:e,titleNoData:i})}}))},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.state.isLoading||e.setState({isLoading:!0});var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:t}}];let n={},r=s.ZP.getFormAppAuto(e.props.infoA.key_form);return void 0!==r&&(n=r.getData("")),n&&(i=Object.assign(n,i)),a[0].input=Object.assign(a[0].input,i),(0,S.Yr)(a,o).then((t=>{var e=s.ZP.foGetData("infoError",t);return void 0!==e?{infoError:e}:s.ZP.foGetData("data",t)})).finally((t=>{e.setState({isLoading:!1})}))},this.renderModal=()=>{const t=this.MediaDetail;return this.state.isOpen?(0,l.jsxs)(a.Suspense,{fallback:(0,l.jsx)("div",{}),children:[" ",(0,l.jsx)(t,(0,o.Z)({},this.getDefaultConfig(this.state.value)))]}):null},this.propertyConstructor=new ci(t.inputType,t.default,t.config),this.accountNumberFormat=s.ZP.getParameterSystem("MEDIA_ACCOUNT_NUMBER");var i={};void 0===i&&(i={});var r=this.props.validate;void 0===r&&(r={}),this.callform_detail="",this.callform="",this.data_select={},this.referenceTypeData=[{title:"Single customer",value:"C"}],this.businessLineTypeData=[{title:"-Select one-",value:"XX"}];var c=this.props.lang;if(void 0===c&&(c={}),void 0!==this.props.infoA.form_code){var d=s.ZP.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=d&&void 0!==d.role&&(void 0!==d.role.disabled&&(!0===d.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==d.role.visible&&(!0===d.role.visible?this.propertyConstructor.setCMD_visible(t.visibility&&!0):this.propertyConstructor.setCMD_visible(t.visibility&&!1)))}this.businessLineTypeData=[{title:"-Select one-",value:"XX"}],this.state={value:[],value_old:"",CMD:this.propertyConstructor.getCMD(),lang:c,lang_select:s.ZP.getLangKey(),validate:r,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpen:!1,titleNoData:"",isLoading:!1,dataFull_paging:{result_total:0,paging_record:[{number:1,selected:!0}],abs_PagingActive:this.setPaging,number_item:0,config:{show:"Show",in:"in",jump_to_page:"Jump to page",results:"results"},mode:{noShowResult:!0}}},this.MediaDetail=(0,n.Iq)("O9_FormMediaDetail")}getTemplateConfig(){let{CMD:t,lang:e,lang_select:i,isLoading:o}=this.state;return{config:{default:{title:this.getTitleButton(e,i,this.props.default.name),type:this.props.config.color,class:this.props.default.class,icon:""},cmd:{disable:"true"===String(t.disabled),visible:"true"===String(this.state.CMD.visible),isLoading:o},mode:"signature"}}}getTitleButton(t,e,i,o){return e[i]?e[i]:o}componentDidMount(){(0,S.Yr)([{txcode:"bo-get-cdlistMediaFile",input:{}}],{}).then((t=>{let e=s.ZP.foGetData("data",t);this.OWN_CDLIST={STS:{},TYPE:{},CATEGORIES:{}};for(const i of e)"MEDIASTS"===i.cdname?this.OWN_CDLIST.STS[i.cdid]=i:"CTMTYPE"===i.cdname?this.referenceTypeData.push({title:i.caption,value:i.cdid}):"CATEGORIES"===i.cdname&&this.businessLineTypeData.push({title:i.caption,value:i.cdid})})),setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){}render(){const t=(0,n.RP)("uButton");return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Click:()=>{this.setState({isOpen:!0}),this.callAPI(this.props.config.apiId,{page:"1"}).then((t=>{if(t.paging&&t.paging.total){let{value:e,dataFull_paging:i,titleNoData:o}=this.state;o="",i.result_total=t.paging.total,e=t.media,i.number_item=0,this.setState({dataFull_paging:i,value:e,titleNoData:o})}else{let{value:t,dataFull_paging:e,titleNoData:i}=this.state;e.result_total=0,t=[],e.number_item=0,i="Hasn't Signature Information",this.setState({value:t,dataFull_paging:e,titleNoData:i})}}))}})}),this.renderModal()]})}isImage(t){let e=!1;try{e=btoa(atob(t))===t&&"/iR".includes(t[0])}catch(i){}return e}getRefTypeData(t){return[{title:"Single customer",value:"C"},{title:"Group of customer",value:"G"},{title:"Customer linkage",value:"L"}].map(((e,i)=>(0,o.Z)((0,o.Z)({},e),{},{selected:e.value===t})))}getDefaultConfig(t){if(void 0!==t)return{modal:{title:"Signature Viewer",visibility:this.state.isOpen,abs_Close:()=>{this.setState({isOpen:!1})}},media_paging:{dataFull:(0,o.Z)({},this.state.dataFull_paging)},form:{config:{default:{title:this.state.titleNoData}},cmd:{isLoading:this.state.isLoading}},stateData:t.map((t=>({img_form:{title:t.fn,link:this.isImage(t.mcs)?`data:image/png;base64,${t.mcs}`:"../rs/global/img/file_icon.svg",content:this.isImage(t.mcs)?"":t.mcs,file_type:t.FT},code:{dataFull:{config:{default:{title:"File Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:t.fn}},infor1:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:this.getBusinessLineTypeData(t.infor1)}},infor2:{dataFull:{config:{default:{title:"Customer Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:t.infor2}},expireDate:{dataFull:{config:{default:{placeholder:this.dateFormat||" ",title:"Expire date",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:t.ed?(0,Q.sx)((0,Q.xY)(t.ed),"DD/MM/YYYY"):""}},other:{dataFull:{config:{default:{title:"Account Number",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:(0,Q.Ui)(t.ot,this.accountNumberFormat)}}})))}}getBusinessLineTypeData(t){return this.businessLineTypeData.map(((e,i)=>(0,o.Z)((0,o.Z)({},e),{},{selected:e.value===t})))}}const hi=di,ui={},pi={},_i={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class fi{}fi.get=()=>({main:ui,position:pi,cmd:_i}),fi.getCmd=()=>_i,fi.getValueCmd=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return void 0!==t.infoA.form_code&&(e=s.ZP.role_getComponent(t.infoA.form_code,t.default.codeHidden)||{},e=e.role||{}),e};const gi=fi;var mi;class vi extends a.Component{constructor(t){var e,i,a,n,r,l,c,d,h,u;super(t),e=this,this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.callDir=()=>this,this.setCMD=(t,e)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.set=(t,e)=>{let i="false",o=0,a="table_paging";this.props.config.table_name&&(a=this.props.config.table_name+"_paging"),void 0!==e[a]&&(void 0!==e[a].total_items&&(o=e[a].total_items),void 0!==e[a].search_advanced&&(i=e[a].search_advanced));let n=this.buildPaging(o,this.state.config_table);this.dataGlobal=s.ZP.getDataLimited(this.state.config_table.query_data,0,999999999);let r={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[]},l=[];void 0!==r.data&&(l=r.data);let c=s.ZP.cloneJson(l),d=[],h=this.props.config.query_data.split(" "),u=h[h.length-1]||h;if(void 0!==c&&(d=c),Array.isArray(d)){var p,_,f,g;for(let t=0;t<d.length;t++)for(const e in d[t]){const i=d[t][e];if("object"!==typeof i){let e=s.ZP.cloneJson(d[t]);d[t]={},d[t][u]=e,d[t][u].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===i.AFGHkeyIndexWJ&&(d[t][e].AFGHkeyIndexWJ=s.ZP.autoID())}void 0!==(null===(p=this.props.config)||void 0===p||null===(_=p.columnSystemCheckBox)||void 0===_?void 0:_.methodGet)&&void 0!==(null===(f=this.props.config)||void 0===f?void 0:f.hasSystemColumnCheck)&&void 0!==(null===(g=this.props.config)||void 0===g?void 0:g.columnSystemCheckBox)?this.setState({statusCheck:{},column_search:{},total_record:o,paging:n,data:d,data_card:d,isSearchAdvanced:i,totalCheck:!1},(()=>{this.runRule("checked"),this.runRule("on_change")})):this.setState({column_search:{},total_record:o,paging:n,data:d,data_card:d,isSearchAdvanced:i,totalCheck:!1},(()=>{this.runRule("on_change")}))}else this.setState({data:l,data_card:l,total_record:o,paging:n,isSearchAdvanced:i,totalCheck:!1},(()=>{this.runRule("on_change")}))},this.runRule=t=>{t&&void 0!==(mi=s.ZP.getFormAppAuto(this.props.infoA.key_form))&&mi.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)},this.checkAllDataHandler=()=>{let t=this.props.config.query_data.split(" "),e=t[t.length-1]||t,i=this.state.statusCheck;for(let o=0;o<this.state.data.length;o++)this.state.totalCheck?i={}:i[this.state.data[o][e].AFGHkeyIndexWJ]=!0;this.setState({statusCheck:i,totalCheck:!this.state.totalCheck},(()=>{this.runRule("checked")}))},this.reload=(t,e)=>{this.page_index=1,this.card_page_index=1,this.setState({page_index:1},(()=>{}))},this.setData=function(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.length>0?e.dataGlobal.data=t:e.dataGlobal=s.ZP.getDataLimited(e.state.config_table.query_data,0,999999999);let o={data:e.dataGlobal.data.slice(0,e.state.config_table.paging_record)||[],total:e.dataGlobal.total},a=[];void 0!==o.data&&(a=o.data);let n=s.ZP.cloneJson(a),r=[],l=e.props.config.query_data.split(" "),c=l[l.length-1]||l;if(void 0!==l&&""!==l&&(!0===l.includes(".")?void 0!==s.ZP.getOOP(n,l)&&(r=s.ZP.getOOP(n,l)):void 0!==n&&(r=n)),Array.isArray(r)){var d,h,u,p;for(let t=0;t<r.length;t++){const e=r[t];for(const i in e){const o=e[i];if("object"!==typeof o){let e=s.ZP.cloneJson(r[t]);r[t]={},r[t][c]=e,r[t][c].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(r[t][i].AFGHkeyIndexWJ=s.ZP.autoID())}}if(void 0!==(null===(d=e.props.config)||void 0===d||null===(h=d.columnSystemCheckBox)||void 0===h?void 0:h.methodGet)&&void 0!==(null===(u=e.props.config)||void 0===u?void 0:u.hasSystemColumnCheck)&&void 0!==(null===(p=e.props.config)||void 0===p?void 0:p.columnSystemCheckBox)){let t={},i=e.props.config.columnSystemCheckBox.methodGet;for(let e=0;e<r.length;e++)t[r[e][c].AFGHkeyIndexWJ]=r[e][c][i];e.setState({statusCheck:t,column_search:{},data:r,totalCheck:!1},(()=>{e.runRule("on_change")}))}else e.setState({column_search:{},data:r,totalCheck:!1},(()=>{e.runRule("on_change")}));i&&e.setState({data_card:r})}else e.setState({data:a,totalCheck:!1},(()=>{e.runRule("on_change")})),i&&e.setState({data_card:a})},this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.abs_getDataLimited=function(t,e){let i={data:this.state.dataFilter.slice(t,t+e)||[],total:this.state.dataFilter.length},o=i.data;if(!0===this.state.hasCheck)for(let n=0;n<o.length;n++)o[n].hasCheck__=!1;let a=1;void 0!==i.total&&(a=i.total);let s=this.buildPaging(a,this.state.config_table);this.setState({data:o,total_record:a,paging:s})},this.buildDataPaging=t=>({pagingIndex:t?1:this.page_index,recordItem:this.state.paging_record.find(((t,e)=>e===this.state.selectedRecordIndex)),isSearchAdvanced:this.state.isSearchAdvanced}),this.getData=()=>{var t;let e=this.state.data,i="true"===this.state.hasSystemColumnCheck?null===(t=this.state.checked_to_selected)||void 0===t?void 0:t.mode:"",o=this.props.config.query_data.split(" "),a=o[o.length-1]||o,s=this.state.statusCheck;switch(i){case"CHECK_TO_SELECTED":case"DEFAULT":case"NO_EMPTY":return e.filter((t=>s[t[a].AFGHkeyIndexWJ]));default:return{data:e,total_paging:this.state.total_record}}},this.getAdvanced=(t,e)=>this.getData(),this.handleMoveLeft=t=>{let e=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;e&&t--,"true"===i&&t--;let o=t-1,{columns:a}=this.state,s=a.splice(t,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.handleMoveRight=t=>{let e=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;e&&t--,"true"===i&&t--;let o=t+1,{columns:a}=this.state,s=a.splice(t,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.readData=(t,e)=>{t.includes(".")&&(void 0===e||"true"===e?this.props.config.table_name?s.ZP.putData(this.props.config.table_name,"paging",this.buildDataPaging(!0),this.props.infoA):s.ZP.putData("table_search","paging",this.buildDataPaging(!0),this.props.infoA):"false"===e?this.props.config.table_name?s.ZP.putData(this.props.config.table_name,"paging",this.buildDataPaging(!0),this.props.infoA):s.ZP.putData("table_search","paging",this.buildDataPaging(!0)):this.props.config.table_name?s.ZP.putData(this.props.config.table_name,"paging"," "):s.ZP.putData("table_search","paging"," "))},this.recordChangeHandler=t=>{let e=this.state.config_table;e.paging_record=this.state.paging_record[t];let i=this.buildPaging(this.state.total_record,e);this.page_index=1,this.card_page_index=1,this.setState({paging:i,page_index:1,selectedRecordIndex:t,config_table:e},(()=>{let t="table_search",e={};this.props.config.table_name&&(t=this.props.config.table_name),e[t]={paging:this.buildDataPaging()},"true"===this.state.isSearchAdvanced&&this.props.config.apiSearchAdvanced?this.callBOSearchAdvanced(this.props.config.apiSearchAdvanced,(0,o.Z)({},e),this.props.config.BoSearchAdvance).then((t=>{this.setData(t,!0)})):this.callBOSearch(this.props.config.apiId,(0,o.Z)({},e),this.props.config.BoSearch).then((t=>{this.setData(t,!0)}))}))},this.abs_PagingActive=t=>{this.page_index=t,this.setState({page_index:t},(()=>{let t="table_search",e={};this.props.config.table_name&&(t=this.props.config.table_name),e[t]={paging:this.buildDataPaging()},"true"===this.state.isSearchAdvanced&&this.props.config.apiSearchAdvanced?this.callBOSearchAdvanced(this.props.config.apiSearchAdvanced,(0,o.Z)({},e),this.props.config.BoSearchAdvance).then((t=>{this.setData(t)})):this.callBOSearch(this.props.config.apiId,(0,o.Z)({},e),this.props.config.BoSearch).then((t=>{this.setData(t)}))}))},this.callBOSearch=function(t,i,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(""!==o&&void 0!==o||(o="bo-search-API"),""===t)return;var n=[{txcode:o,input:{learn_api:t}}];let r={},l=s.ZP.getFormAppAuto(e.props.infoA.key_form);return void 0!==l&&(l.setLoadingAction(!0),r=l.getData("")),r&&i?i=Object.assign(r,i):i||(i=r),e.props.config.api_data&&(i=Object.assign(i,JSON.parse(e.props.config.api_data))),n[0].input=Object.assign(n[0].input,i),(0,S.Yr)(n,a).then((t=>{var i,o,a=s.ZP.foGetData("infoError",t);if(void 0!==a)return{infoError:a};let n=e.props.config.query_data.split(" "),r=n[n.length-1]||n;var l=s.ZP.foGetData(r,t);let c="table_search";if(e.props.config.table_name&&(c=e.props.config.table_name),null!==(i=s.ZP.foGetData(c,t))&&void 0!==i&&i.total_items||0===(null===(o=s.ZP.foGetData(c,t))||void 0===o?void 0:o.total_items)){var d;let i=null===(d=s.ZP.foGetData(c,t))||void 0===d?void 0:d.total_items;i!==e.state.total_record&&e.setState({total_record:i})}return l||(l=[]),l})).finally((t=>{l.setLoadingAction(!1)}))},this.callBOSearchAdvanced=function(t,i,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(""!==o&&void 0!==o||(o="bo-search-advanced-API"),""===t)return;var n=[{txcode:o,input:{learn_api:t}}];let r={},l=s.ZP.getFormAppAuto(e.props.infoA.key_form);return void 0!==l&&(l.setLoadingAction(!0),r=l.getData("")),r&&i?i=Object.assign(r,i):i||(i=r),e.props.config.api_advanced_data&&(i=Object.assign(i,JSON.parse(e.props.config.api_advanced_data))),n[0].input=Object.assign(n[0].input,i),(0,S.Yr)(n,a).then((t=>{var i=s.ZP.foGetData("infoError",t);if(void 0!==i)return{infoError:i};let o=e.props.config.query_data.split(" "),a=o[o.length-1]||o;var n=s.ZP.foGetData(a,t);return n||(n=[]),n})).finally((t=>{l.setLoadingAction(!1)}))},this.parent_handleCheckToSelected=(t,e,i)=>{let o=this.props.config.query_data.split(" "),a=o[o.length-1]||o,s=this.state.statusCheck,n=[],r=this.state.data;switch(i){case"CHECK_TO_SELECTED":for(let c=0;c<r.length;c++){let i=r[c][a].AFGHkeyIndexWJ;e?s[i]=c<=t||void 0:c>=t&&(s[i]=void 0),s[i]&&n.push(r[c])}break;case"DEFAULT":s[r[t][a].AFGHkeyIndexWJ]=e;for(let t=0;t<r.length;t++){s[r[t][a].AFGHkeyIndexWJ]&&n.push(this.state.data[t])}break;case"NO_EMPTY":let i,o,l=t;for(let t=0;t<r.length;t++){s[r[t][a].AFGHkeyIndexWJ]&&(void 0===i&&(i=t),o=t)}if(l<i)for(let t=l+1;t<i;t++){s[r[t][a].AFGHkeyIndexWJ]=!0}else if(l>i&&l<o)for(let t=l+1;t<=o;t++){s[r[t][a].AFGHkeyIndexWJ]=!1}else for(let t=o;t<l;t++){s[r[t][a].AFGHkeyIndexWJ]=!0}s[r[t][a].AFGHkeyIndexWJ]=e}let l=this.state.totalCheck;null!==n&&void 0!==n&&n.length?n.length<r.length?l="-":n.length===r.length&&(l=!0):l=!1,this.setState({statusCheck:s,totalCheck:l},(()=>{var t,e;void 0!==(null===(t=this.props.config.columnSystemCheckBox)||void 0===t?void 0:t.actionFo_SystemCheck)&&this.functionFo(n,null===(e=this.props.config.columnSystemCheckBox)||void 0===e?void 0:e.actionFo_SystemCheck),this.runRule("checked")}))},this.parent_handleSetChecked=t=>{let e=this.state.data_show_table,i=e[t].isCheck;void 0===i&&(i=!1),e[t].isCheck=!i,this.setState({data_show_table:e})},this.getHeaderConfig=t=>{let e=[];return!0===t&&e.push({title:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),"true"===this.state.hasSystemColumnCheck&&"true"!==String(this.state.CMD.disabled)&&e.push({title:this.state.headerCheckTitle,id:"system_check_box",data:{value:this.state.totalCheck,abs_Click:this.checkAllDataHandler},config:{mode:{hasSearch:!1},hasCheck:"true"===String(this.state.hasSystemColumnCheckTotal),width:"true"===this.state.hasSystemColumnCheckTotal?"70px":"",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),e=e.concat(this.state.columns.map((t=>{var e,i;return{title:(null===(e=this.state.lang)||void 0===e||null===(i=e[this.state.lang_select])||void 0===i?void 0:i[t.title])||t.title,id:t.code,config:{width:"",isFrozen:!1},value_search:this.state.columnSearchValue[t.code]}}))),e},this.handelClearSearch=()=>{let t=this.state.columnSearchValue;for(const s in t)t[s]="";let e=this.dataGlobal.data,i=e.slice(0,this.state.config_table.paging_record),o=e.length,a=this.buildPaging(o,this.state.config_table);this.page_index=1,this.setState({data:i,dataFilter:e,paging:a,page_index:1,total_record:o,columnSearchValue:t})},this.getCaptionLang=(t,e,i)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${e}_${i}`]&&(this.CACHE_CDLIST[`${e}_${i}`]=s.ZP.data_cdList(e,i,!0));let o={};for(const s of this.CACHE_CDLIST[`${e}_${i}`]){let t=s.c_cdlist.mcaption||{},e=s.c_cdlist.caption||"";o[s.c_cdlist.cdid]=s.c_cdlist={mcaption:t,caption:e}}const a=o[t]||{};let n=(null===a||void 0===a?void 0:a.mcaption)||{},r=(null===a||void 0===a?void 0:a.caption)||"";return n[s.ZP.getLangKey()]||r},this.handelChangeSearch=(t,e)=>{var i;let o=this.state.columnSearchValue;o[e]=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"";let a=this.dataGlobal.data.filter((t=>{let e=!0;for(const a in o){let n=s.ZP.getOOP(t,a);const r=this.cols_config[a];if("columnMask"===r.inputtype){var i;let t=r.config.mask;(t.includes("DD")&&t.includes("MM")&&t.includes("YY")||!0===(null===(i=r.config)||void 0===i?void 0:i.isDate))&&(n=Q.FW(n,t))}if("ColumnCdlist"===r.inputtype){let{cdgrp:t,cdname:e}=r.config;n=this.getCaptionLang(n,t,e)}!1===String(n).toLowerCase().includes(o[a].toLowerCase())&&(e=!1)}return e})),n=a.slice(0,this.state.config_table.paging_record),r=a.length,l=this.buildPaging(r,this.state.config_table);this.page_index=1,this.setState({data:n,dataFilter:a,paging:l,page_index:1,total_record:r,columnSearchValue:o})},this.abs_autoCallBackData=()=>{let t=this.state.paging_record;t[this.state.selectedRecordIndex]+=5,this.setState({paging_record:t},(()=>{this.recordChangeHandler(0)}))},this.handleClickTableRow=t=>{},this.onClickButtonAction=async(t,e)=>{let i=e.default,o=e.config;if(mi=s.ZP.getFormAppAuto(this.props.infoA.key_form),await mi.runRuleFunction(i,JSON.parse(e.row_data),this.props.infoA_parent,"on_click"),void 0!==o.useAction)if("true"===o.useAction){var a=s.ZP.parseJson(o.txFoActions);void 0!==a?_.ZP.runActionWithContext(a,JSON.parse(e.row_data),this.props.infoA,this.props.infoA_parent,i):s.ZP.AppException("#cColumnAction.onClick","config_fo is undefined")}else if(void 0!==o.txFo){var n=s.ZP.parseJson(o.txFo);void 0!==n?_.ZP.runFoWithContext(n,JSON.parse(e.row_data),this.props.infoA,this.props.infoA_parent,i):s.ZP.AppException("#cColumnAction.onClick","Error Json is undefined")}else s.ZP.AppException("#cColumnAction.onClick","txFo is undefined");else s.ZP.AppException("#cColumnAction.onClick","useAction is undefined");s.ZP.isDebug()&&s.ZP.copyToClipboard(o.txFo)},this.handleScroll=()=>{this.card_page_index++;let t="table_search",e={};this.props.config.table_name&&(t=this.props.config.table_name),e[t]={paging:this.builCarddDataPaging()},this.state.data_card.length<this.state.total_record&&("true"===this.state.isSearchAdvanced&&this.props.config.apiSearchAdvanced?this.callBOSearchAdvanced(this.props.config.apiSearchAdvanced,(0,o.Z)({},e),this.props.config.BoSearchAdvance).then((t=>{this.setDataCard(t)})):this.callBOSearch(this.props.config.apiId,(0,o.Z)({},e),this.props.config.BoSearch).then((t=>{this.setDataCard(t)})))},this.builCarddDataPaging=t=>({pagingIndex:t?1:this.card_page_index,recordItem:this.state.paging_record.find(((t,e)=>e===this.state.selectedRecordIndex))}),this.setDataCard=t=>{t.length>0?this.dataGlobal.data=t:this.dataGlobal=s.ZP.getDataLimited(this.state.config_table.query_data,0,999999999);let e={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[],total:this.dataGlobal.total},i=[];void 0!==e.data&&(i=e.data);let o=s.ZP.cloneJson(i),a=[],n=this.props.config.query_data.split(" "),r=n[n.length-1]||n;if(void 0!==n&&""!==n&&(!0===n.includes(".")?void 0!==s.ZP.getOOP(o,n)&&(a=s.ZP.getOOP(o,n)):void 0!==o&&(a=o)),Array.isArray(a)){var l,c,d,h;for(let t=0;t<a.length;t++){const e=a[t];for(const i in e){const o=e[i];if("object"!==typeof o){let e=s.ZP.cloneJson(a[t]);a[t]={},a[t][r]=e,a[t][r].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(a[t][i].AFGHkeyIndexWJ=s.ZP.autoID())}}if(a=this.state.data_card.concat(a),void 0!==(null===(l=this.props.config)||void 0===l||null===(c=l.columnSystemCheckBox)||void 0===c?void 0:c.methodGet)&&void 0!==(null===(d=this.props.config)||void 0===d?void 0:d.hasSystemColumnCheck)&&void 0!==(null===(h=this.props.config)||void 0===h?void 0:h.columnSystemCheckBox)){let t={},e=this.props.config.columnSystemCheckBox.methodGet;for(let i=0;i<a.length;i++)t[a[i][r].AFGHkeyIndexWJ]=a[i][r][e];this.setState({statusCheck:t,column_search:{},data_card:a,totalCheck:!1},(()=>{this.runRule("on_change")}))}else this.setState({column_search:{},data_card:a,totalCheck:!1},(()=>{this.runRule("on_change")}))}else i=this.state.data_card.concat(i),this.setState({data_card:i,totalCheck:!1},(()=>{this.runRule("on_change")}))},this.page_index=1,this.card_page_index=1;let p=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let t=this.props.config.paging_record.split(",");t.length>1&&(p=t)}let f={paging_record:p[0],query_data:this.props.config.query_data};this.dataGlobal=s.ZP.getDataLimited(f.query_data,0,999999999)||{};let g={data:[],total:0};"false"!==this.props.config.isLoadDataStart&&(g={data:this.dataGlobal.data.slice(0,f.paging_record)||[],total:this.dataGlobal.total}),void 0===g&&(g={});let m=0;void 0!==g.total&&(m=g.total);let v=this.buildPaging(m,f),b=[],y=t.default.code.trim();if(void 0!==t.btn_of_grid&&""!==y)for(let o=0;o<t.btn_of_grid.length;o++){y===t.btn_of_grid[o].config.onTable.trim()&&(b[b.length]=t.btn_of_grid[o])}let A="false";void 0!==this.props.config.hasSystemColumnCheck&&(A=this.props.config.hasSystemColumnCheck);let D="not_use";void 0!==(null===(i=this.props.config)||void 0===i||null===(a=i.columnSystemCheckBox)||void 0===a?void 0:a.check_type)&&(D=this.props.config.columnSystemCheckBox.check_type);let k="false";void 0!==(null===(n=this.props.config)||void 0===n||null===(r=n.columnSystemCheckBox)||void 0===r?void 0:r.hasSystemColumnCheckTotal)&&(k=this.props.config.columnSystemCheckBox.hasSystemColumnCheckTotal);let O="";void 0!==(null===(l=this.props.config)||void 0===l||null===(c=l.columnSystemCheckBox)||void 0===c?void 0:c.headerCheckTitle)&&(O=null===(d=this.props.config.columnSystemCheckBox)||void 0===d?void 0:d.headerCheckTitle);let w={};void 0!==(null===(h=this.props.config)||void 0===h||null===(u=h.columnSystemCheckBox)||void 0===u?void 0:u.checked_to_selected)&&(w=this.props.config.columnSystemCheckBox.checked_to_selected);let C=this.props.lang;void 0===C&&(C={}),this.state={dataFilter:this.dataGlobal.data,data:[],data_card:[],lang:C,lang_select:s.ZP.getLangKey(),paging:v,total_record:0,paging_record:p,selectedRecordIndex:0,page_index:1,STT:!1,hasCheck:!1,columns:void 0===this.props.config.columns?[]:JSON.parse(this.props.config.columns),action:b,config_table:f,CMD:gi.getValueCmd(this.props),columnSearchValue:{},hasSystemColumnCheck:A,check_type:D,hasSystemColumnCheckTotal:k,headerCheckTitle:O,totalCheck:!1,checkedRow:!1,statusCheck:{},checked_to_selected:w,isSearchAdvanced:!1},this.all_columnSystemCheck=[],this.cols_config={};for(const o of this.state.columns)this.cols_config[o.code]=o}buildPaging(t,e){let i=[],o=1;if(t>0)for(let a=0;a<t;a+=parseInt(e.paging_record))i[i.length]=o,o++;else i[i.length]=1;return i}pageIndexChange(t){this.page_index=t.target.value,this.setState({page_index:t.target.value}),this.abs_getDataLimited((parseInt(t.target.value)-1)*this.state.config_table.paging_record,this.state.config_table.paging_record)}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config!==t.config&&this.setState({columns:JSON.parse(this.props.config.columns)}),this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.property!==t.property&&this.setState({property:this.props.property})}checkAll(t){if(this.state.hasCheck){let e=this.state.data;for(let i=0;i<e.length;i++)e[i].hasCheck__=t.target.checked;this.setState({checkAll:t.target.checked,data:e})}}functionFo(t,e){let i=void 0===e.useAction?"notUse":e.useAction,o=this.props.default;switch(i){case"txFo":var a=s.ZP.parseJson(e.txFo);void 0!==a?_.ZP.runFoWithContext(a,t,this.props.infoA,this.props.infoA_parent,o):s.ZP.AppException("#cColumnAction.onClick","Error Json is undefined");break;case"txFoAction":var n=s.ZP.parseJson(e.txFoActions);void 0!==n?_.ZP.runActionWithContext(n,t,this.props.infoA,this.props.infoA_parent,o):s.ZP.AppException("#cColumnAction.onClick","config_fo is undefined")}}renderTable(){var t,e,i,o,a;let r=this.state.action.length>0,c=this.getHeaderConfig(r),{hasSystemColumnCheck:d,check_type:h,statusCheck:u}=this.state;const p=(0,n.RP)("uTable"),_=(0,n.RP)("uTableBodyRow");return(0,l.jsx)(p,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,abs_MoveLeft:this.handleMoveLeft,abs_MoveRight:this.handleMoveRight,Header:{data:c,config:{mode:{hasSearch:!1}}},dataEmpty:{isShow:!(null!==(t=this.state)&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{modeTitle:"center",isFrozenHeader:!1,isMoveColumn:"true"===String(null===(i=this.props.config)||void 0===i?void 0:i.isMoveColumn),isResize:"true"===String(null===(o=this.props.config)||void 0===o?void 0:o.isResize)}},uPagination:{config:{show:s.ZP.getLang("cTable_Paging_show"),in:s.ZP.getLang("cTable_Paging_in"),jump_to_page:s.ZP.getLang("cTable_Paging_jump_to_page"),results:s.ZP.getLang("cTable_Paging_results")},mode:{paging_min:"MIN"===(null===(a=this.props.config)||void 0===a?void 0:a.paging_mode)},result_total:this.state.total_record,abs_PagingActive:this.abs_PagingActive,abs_setRecordActive:this.recordChangeHandler,paging_index:this.state.page_index,paging_record:this.state.paging_record.map(((t,e)=>({number:t,selected:e===this.state.selectedRecordIndex})))}},children:this.state.data.map(((t,e)=>{let i=this.props.config.query_data.split(" "),o=i[i.length-1]||i;return(0,l.jsxs)(_,{abs_Click:this.handleClickTableRow,children:[!0===r&&(0,l.jsx)(N,{tableContext:this,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,data:this.state.action,value:t,title:"Action"},e),"true"===d&&"true"!==String(this.state.CMD.disabled)&&(0,l.jsx)(Me,{ref:t=>{void 0===this.all_columnSystemCheck&&(this.all_columnSystemCheck=[]),this.all_columnSystemCheck[e]=t},tableContext:this,dataValue:!0===u[t[o].AFGHkeyIndexWJ],dataIndex:e,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,check_type:h,parent_handleCheckToSelected:this.parent_handleCheckToSelected}),this.state.columns.map(((e,i)=>{var o,a;let n=T.Z[e.inputtype];return void 0===n&&(n=T.Z.ColumnDefault),(0,l.jsx)(n,{tableContext:this,title_parent:e.title,rowData:t,code_col:e.code,title:(null===(o=this.state.lang)||void 0===o||null===(a=o[this.state.lang_select])||void 0===a?void 0:a[e.title])||e.title,config:e.config,data:s.ZP.getOOP(t,e.code),value:t},i)}))]},e)}))})}renderCard(){const t=(0,n.hr)(this.props.config.card_type);return this.state.data_card.map(((e,i)=>(0,l.jsx)(t,{dataFull:{config:{index:i+1,total:this.state.total_record,lang:{of:s.ZP.getLang("cTable_Paging_of")}},list_button:this.getConfigButtonCard(e),data_card:this.getConfigCard(void 0===this.props.config.card_config?[]:JSON.parse(this.props.config.card_config),e)}},i)))}getConfigButtonCard(t){return this.state.action.map((e=>{var i;return{dataFull:{config:{default:{title:(null===(i=e.lang)||void 0===i?void 0:i[s.ZP.getLangKey()])||e.default.name,type:e.config.color,class:e.default.class,icon:e.config.icon},cmd:{disable:!s.ZP.checkDynamicCondition(t,e.default.condition),isLoading:!1}},dataItem:(0,o.Z)((0,o.Z)({},e),{},{row_data:JSON.stringify(t)}),abs_Click:this.onClickButtonAction}}}))}getConfigCard(t,e){return t.map((t=>{var i,o;let a=s.ZP.getNodeJson(e,t.data);return a=this.getDataCard(t.inputtype,t.config,a),{data:a,title:(null===(i=this.state.lang)||void 0===i||null===(o=i[this.state.lang_select])||void 0===o?void 0:o[t.title])||t.title}}))}getDataCard(t,e,i){switch(t){case"columnMask":return((t,e)=>{let i=t.mask,o=i.includes("DD")&&i.includes("MM")&&i.includes("YY")||!0===(null===t||void 0===t?void 0:t.isDate);return String(i).startsWith("$")&&String(i).endsWith("$")&&(i=s.ZP.getParameterSystem(i.replace(/\$/g,""))),o?e||0===e?Q.sx(Q.xY(e),i):"":Q.Ui(e,i)})(e,i);case"columnCurrency":return((t,e)=>{if(0!==e&&!e)return"--";let i=t.decimal_length||t.decimal;return 0===i||i||(i=2),i=Number(i)||0,e=Math.round(Number(e)*Math.pow(10,i))/Math.pow(10,i),Q.Nx(e,i)})(e,i);default:return i}}render(){const t=(0,n.RP)("uViewList");return"false"===String(this.state.CMD.visible)?null:"table_card"===this.props.config.view_type?(0,l.jsx)(t,{dataFull:{view_as_table_DOM:this.renderTable(),view_as_card_DOM:this.renderCard(),abs_autoCallBackData:this.handleScroll}}):this.renderTable()}}const bi=vi,yi={structable:"",structable_read:"",cdlist:{},data_default:"",data_mode:"query",query_data:"",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:"[\n   \n    ]",key_selected:"c_cdlist.cdid",useAction:"false",isAutoDefault:"true",isLabel:"false",isHasDataNull:"false"},Ai=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,o.Z)({},yi);for(let i in e)t[i]&&(""!==e[i]&&""===t[i]||(e[i]=t[i]));return e||{}},Di={ui:{},data:{}},ki={c_cdlist:{cdid:"select_null",caption:"All"}},Oi=t=>{if("cdlist"===t.data_mode)return ki;{var e,i;let o=null===(e=t.key_selected)||void 0===e?void 0:e.split("."),a=null===(i=t.selected_view_format)||void 0===i?void 0:i.split(".");o[2]=a[a.length-1];let s={};return s[o[0]]={},s[o[0]][o[1]]="select_null",s[o[0]][o[2]]="All",s}},wi=t=>{for(let e=0;e<t.length;e++)t[e].value=!1,t[e].key_select=e;return t},Ci=(t,e)=>(t.split(" ").forEach((i=>{if("@"===i[0]){let o=i.substring(1),a=s.ZP.getOOP(e,o);if("c_cdlist.caption"===o){let t=s.ZP.getOOP(e,"c_cdlist.mcaption");null!==t&&void 0!==t&&t[s.ZP.getLangKey()]&&(a=null===t||void 0===t?void 0:t[s.ZP.getLangKey()])}t=t.replace(i,a)}})),t),xi=(t,e,i)=>{if(void 0===e||void 0===i)return[];if(null===e||null===i)return[];if(""===i)return[];let o=[];return e.forEach(((e,a)=>{let n=s.ZP.getOOP(e,i)+"",r=JSON.parse(JSON.stringify(e));null!==n&&void 0!==n&&t.includes(n+"")?r.value=!0:r.value=!1,o.push(r)})),o},Si=(t,e,i)=>{let o=[];for(let a=0;a<t.length;a++)!0===t[a].value&&o.push(s.ZP.getOOP(e[a],i));return o},Mi={structable:"",structable_read:"",cdlist:{},data_default:"",data_mode:"query",query_data:"",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n            {\n                "title": "Name",\n                "code": "col.col_name"\n            },\n            {\n                "title": "ID",\n                "code": "col.col_id"\n            }\n        ]',col_format:"@c_cdlist.caption",json_data:'[\n            {\n                "col": {\n                    "col_name": "val_1",\n                    "col_id": "val_2"\n                }\n            },\n            {\n                "col": {\n                    "col_name": "val_3",\n                    "col_id": "val_4"\n                }\n            }\n        ]',key_selected:"c_cdlist.cdid",useAction:"false",isAutoDefault:"true",isLabel:"false",isHasDataNull:"false"};const Pi=class{constructor(t,e,i){this.getProperty=()=>this.property,this.setCMD=t=>{void 0!==t.visible&&("true"!==t.visible&&"false"!==t.visible||(this.property.cmd.visible=t.visible)),void 0!==t.disabled&&("true"!==t.disabled&&"false"!==t.disabled||(this.property.cmd.disabled=t.disabled)),void 0!==t.block&&("true"!==t.block&&"false"!==t.block||(this.property.cmd.block=t.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=t=>{this.property.cmd.visible=t},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=t=>{this.property.cmd.disabled=t},this.getCMD_enable=()=>this.property.cmd.disabled,this.getConfig=()=>{let t=this.property.config,e=(0,o.Z)({},Mi);for(let i in e)t[i]&&(""!==t[i]&&""===t[i]||(e[i]=t[i]));return e||{}},this.getDefault=()=>this.property.default,this.property={inputType:t,config:i,default:e,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class Ti extends a.Component{constructor(t){var e;super(t),e=this,this.convertStringWithContext=t=>{let e=s.ZP.getlistCodeContext(t);for(let i=0;i<e.length;i++){const o=e[i];let a=s.ZP.context_get(o.code);void 0!==a&&(t=t.replace(o.key,a))}return t},this.getConfigSmooth=t=>{let e=s.ZP.cloneJson(t);return e.config=Ai(e.config),e},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.isRunRule=(t,e)=>{if(!t)return!1;return t.split(";").includes(e)},this.setCMD=(t,e)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),e);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.set=async(t,e)=>{this.data_debug.data_form=e;let{structable_read:i,key_selected:o}=this.config,{datas:a}=this.state,s="",n=[];if(e&&i){let t=i.split(".");if(2===t.length)return e[t[0]]&&void 0!==e[t[0]][t[1]]?(s=e[t[0]][t[1]],this.data_debug.data_cpn=s,this.last_selected_data=s,n=xi(s,a,o),this.setState({val_select_tmp:s,datas_view:n}),void this.onRunRule("update")):void 0;{let i=e;for(let e=0;e<t.length;e++){if(e===t.length-1)return void 0!==i&&null!==i[t[e]]?(s=i[t[e]],this.data_debug.data_cpn=s,this.last_selected_data=s,n=xi(s,a,o),this.setState({val_select_tmp:s,datas_view:n}),void this.onRunRule("update")):void 0;void 0!==i&&null!==i[t[e]]&&(i=i[t[e]])}}}void 0===this.data_debug.data_cpn&&(this.data_debug.data_cpn="undefined"),this.setState({list_selected:[],val_select_tmp:s,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jListCheckBox_NotFindValue"})},this.setAdvanced=async(t,e)=>{let i=t.component_action||"",{code:o}=this.props.default,a=i.split(";").includes(o);if(void 0!==e&&""!==e){var s,n;let{key_selected:t}=this.config,{datas:i}=this.state,o=[];o=xi(e,i,t);let r=(null===(s=o)||void 0===s?void 0:s.toString())!==(null===(n=this.state.list_selected)||void 0===n?void 0:n.toString());if(0!==o.length){if(r&&!a)return this.onRunRule("enter_tab"),void this.setState({val_select_tmp:e,datas_view:o})}else{let t=[0];if(0!==t.length&&r&&!a)return this.onRunRule("enter_tab"),void this.setState({val_select_tmp:e,datas_view:t})}this.setState({list_selected:[],val_select_tmp:e,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jListCheckBox_NotFindValue"})}else{0!==[0].length&&(a||this.onRunRule("enter_tab"))}},this.setGetInfo=async(t,e)=>{e=e[this.props.default.code];let i=t.component_action||"",{code:o}=this.props.default,a=i.split(";").includes(o);if(void 0!==e&&""!==e){var s,n;let{key_selected:t}=this.config,{datas:i}=this.state,o=[];o=xi(e,i,t);let r=(null===(s=o)||void 0===s?void 0:s.toString())!==(null===(n=this.state.list_selected)||void 0===n?void 0:n.toString());if(0!==o.length){if(r&&!a)return this.onRunRule("enter_tab"),void this.setState({val_select_tmp:e,datas_view:o})}else{let t=[0];if(0!==t.length&&r&&!a)return this.onRunRule("enter_tab"),void this.setState({val_select_tmp:e,datas_view:t})}this.setState({list_selected:[],val_select_tmp:e,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jListCheckBox_NotFindValue"})}else{0!==[0].length&&(a||this.onRunRule("enter_tab"))}},this.getAdvanced=t=>{let{list_component:e}=t,{code:i}=this.props_smooth.default;if(this.isRunRule(e,i)){let{list_selected:t,datas:e,get_data_format:i,structable:o}=this.state,a=Si(t,e,i);if(2===o.split(".").length)return a}},this.getInfoErrror=()=>{var t,e,i;return""!==this.state.help_mess&&!0===this.checkValidate()&&"jListCheckBox_NotFindValue"!==this.state.help_mess?{info:this.renderMess(this.state.help_mess),key:(null===(t=this.props_smooth.lang)||void 0===t||null===(e=t.ui)||void 0===e||null===(i=e[s.ZP.getLangKey()])||void 0===i?void 0:i[this.props_smooth.default.name])||this.props_smooth.default.name,infoComponent:this.props.default}:""},this.setDataGB=async(t,e)=>{let{datas:i,key_selected:o,list_selected:a,selected_view:n}=this.state,{json_data:r}=this.props_smooth.config;e=s.ZP.parseJson(r).concat(e)||[],e=wi(e);let l=s.ZP.getOOP(i[a[0]],o);this.setState({datas:e,datas_view:e,list_selected:a,selected_view:n},(()=>{let t=this.state.val_select_tmp||l,e=xi(t,this.state.datas,o);t&&0!==e.length&&(this.state.val_select_tmp="")}))},this.get=(t,e)=>{let i=this.props_smooth.config.structable;if(i.includes("|")){let e=i.split("|");for(var o=0;o<e.length;o++)this.readData(e[o],t.inform)}else this.readData(i,t.inform)},this.getAdvanced=(t,e)=>{let{list_selected:i,datas:o,get_data_format:a}=this.state;return Si(i,o,a)},this.checkValidate=()=>{let t=!1,e=this.state.list_selected;if(void 0!==e&&void 0!==this.state.validate.request&&!t&&this.state.validate.request){let{list_selected:i,datas:o,get_data_format:a}=this.state,s=Si(i,o,a);0!==e.length&&null!==s&&""!==s||(t=!0,this.state.help_mess="validateRequest",this.setState({help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"}))}if(t){var i=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}else this.clearError();return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.setState({search_input:"",datas_view:this.state.datas})},this.setDataDefault=()=>{},this.onEvent=t=>{switch(t){case"closeTable":this.setState({isOpen:!1});break;case"openTable":!1===this.state.isOpen&&this.setState({isOpen:!0})}},this.onRunRule=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"on_change";var i=s.ZP.getFormAppAuto(e.props_smooth.infoA.key_form);void 0!==i&&i.runRuleFunction(e.props_smooth.default,{},e.props_smooth.infoA_parent,t)},this.getSelectedView=t=>{let{selected_view_format:e,datas:i}=this.state,o="";for(let a=0;a<t.length;a++){a>0&&(o+=";");let s=i[t[a]];o+=Ci(e,s)}return o},this.getDataOOP=(t,e)=>0===this.state.list_selected.length?void 0:this.state.datas[this.state.list_selected[0]],this.onBlur=()=>{this.checkValidate()},this.getOptionConfig=t=>t.map(((t,e)=>({title:Ci(this.props_smooth.config.col_format,t),value:t.value,dataItem:{key_select:t.key_select},value_code:t.value_code}))),this.getInfoCompare=(t,e)=>{let{lang_compare:i,compare_info:o,isCompare:a}=this.state;if(a){let t=i[this.state.lang_select];if(o.is_change_value){let e=t.replace("{value_old}","");return e=e.replace("{value_new}",""),{is_change_value:o.is_change_value,compareInfo:{component_code:this.props_smooth.default.code,component_name:this.props_smooth.default.name,message:{title_before:o.cache_value,title_status:e,title_after:o.change_value}}}}}return{}},this.clearCacheCompare=()=>{let{compare_info:t}=this.state;t.cache_value=void 0,t.is_change_value=!1,this.setState({compare_info:t})},this.renderThisComponent=()=>{var t,e,i,o;const a=(0,n.RP)("uCheckBox"),r=(0,n.RP)("uMultiValue");let c=this.props_smooth.default.name;return(0,l.jsx)(r,{title:(null===(t=this.props_smooth.lang)||void 0===t||null===(e=t.ui)||void 0===e||null===(i=e[s.ZP.getLangKey()])||void 0===i?void 0:i[c])||c,class:this.props_smooth.default.class,isOpenDefault:!0,children:null===(o=this.data_view_template)||void 0===o?void 0:o.map(((t,e)=>(0,l.jsx)(a,{dataFull:{class:"col-sm-4 col-12",title:t.title,value:t.value,config:{cmd:{disable:"true"===String(this.state.CMD.disabled)}},dataItem:t.dataItem,abs_Click:(t,e)=>{let{datas_view:i}=this.state;i[t.key_select].value=!e,this.setState({datas_view:i})}}},e)))})},this.renderMess=t=>{switch(t){case"validateNumMin":return s.ZP.getLang(t).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(t).replace("{count}",this.state.validate.max);case"validateRequest":default:return s.ZP.getLang(t);case"jListCheckBox_NotFindValue":return s.ZP.isDebug()?s.ZP.getLang(t):""}},this.propertyConstructor=new Pi(t.inputType,t.default,t.config),this.props_smooth=this.getConfigSmooth(this.props);let{config:i,lang:o}=this.props_smooth;this.config=Ai(i),this.lang=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let e in Di)void 0===t[e]&&(t[e]={});return t}(o);let{selected_view_format:a,get_data_format:r,key_selected:c,structable:d,structable_read:h}=this.config,u=this.props_smooth.validate;void 0===u&&(u={}),this.callform_detail="",this.callform="";let p="true"===String(this.props_smooth.validate.is_compare),_={},f={};void 0!==this.props_smooth.lang&&(_=void 0!==this.props_smooth.lang.title?this.props_smooth.lang.title:this.props_smooth.lang,void 0!==this.props_smooth.lang.lang_compare&&(f=this.props_smooth.lang.lang_compare));let g=(t=>{if(!t)return[];let e=[];const{query_data:i,json_data:o}=t;if("cdlist"===t.data_mode){var a="",n="";void 0!==t.cdlist&&void 0!==t.cdlist.cdgrp&&void 0!==t.cdlist.cdname&&(a=t.cdlist.cdgrp,n=t.cdlist.cdname),e=s.ZP.data_cdList(a,n)||[]}else e=s.ZP.getDataLimited(i,0,99999)||[],e=e.data||[];let r=s.ZP.parseJson(o).concat(e)||[];return"true"===t.isHasDataNull&&r.unshift(Oi(t)),r=wi(r),r||[]})(this.config);this.state={isCompare:p,structable:d,structable_read:h,value:this.data_default,compare_info:{cache_value:void 0,is_change_value:!1},val_select_tmp:"",lang_compare:f,lang:_,lang_select:s.ZP.getLangKey(),validate:u,infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",datas:g,datas_view:g,get_data_format:r,key_selected:c,selected_view:"",selected_view_format:a,list_selected:[],pos_row:-1,search_input:"",isOpen:!1,CMD:this.propertyConstructor.getCMD(),max_item_length:50},this.data_debug={}}UNSAFE_componentWillMount(){this.data_view_template=this.getOptionConfig(this.state.datas_view)}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props_smooth.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}UNSAFE_componentWillUpdate(t,e){this.data_view_template=this.getOptionConfig(e.datas_view)}componentDidUpdate(t){}readData(t,e){let{datas_view:i,datas:o,get_data_format:a}=this.state,n=Si(i,o,a);""!==this.state.help_mess&&(n=null);let r=t.split(".");2===r.length&&(void 0===e||"true"===e?s.ZP.putData(r[0],r[1],n,this.props_smooth.infoA):"false"===e?s.ZP.putDataGB(r[0],r[1],n):s.ZP.putDataGB(r[0],r[1],""))}render(){if("false"===String(this.state.CMD.visible))return null;const t=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup,children:[this.renderThisComponent(),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):this.renderThisComponent()}}const Ii=Ti;const Fi=class{constructor(t,e,i){this.getProperty=()=>this.property,this.setCMD=t=>{void 0!==t.visible&&("true"!==t.visible&&"false"!==t.visible||(this.property.cmd.visible=t.visible)),void 0!==t.disabled&&("true"!==t.disabled&&"false"!==t.disabled||(this.property.cmd.disabled=t.disabled)),void 0!==t.block&&("true"!==t.block&&"false"!==t.block||(this.property.cmd.block=t.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=t=>{this.property.cmd.visible=t},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=t=>{this.property.cmd.disabled=t},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class Ni extends a.Component{constructor(t){var e;super(t),e=this,this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(t,e)=>{},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.getDataOOP=(t,e)=>{const{list_component:i}=t,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.setDataGB=(t,e)=>{},this.set=(t,e)=>{},this.getAdvanced=(t,e)=>this.getData(),this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.checkValidate=()=>!1,this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.getData=()=>{let t=this.state.data_config,e=[];for(let i=0;i<t.length;i++){const o=t[i];o.cmd.isDone&&e.push({authentic:{value:o.value_img_scan}})}return e},this.reload=(t,e)=>{this.setState({value:[]})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:t,infoComponet:this.props.default}}return""},this.renderMess=t=>s.ZP.getLang(t),this.runRule=t=>{if(t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)}},this.handleClick=(t,e)=>{let{data_config:i}=this.state;i[e.key_select].cmd.isLoading=!0,this.setState({data_config:i},(()=>{this.callAPI(e.api_id).then((t=>{let{data_config:i}=this.state;setTimeout((()=>{i[e.key_select].cmd.isLoading=!1,i[e.key_select].cmd.isDone=!0,i[e.key_select].title_button=s.ZP.getLang("done"),i[e.key_select].value_img_scan="https://static.remove.bg/remove-bg-web/669d7b10b2296142983fac5a5243789bd1838d00/assets/start_remove-c851bdf8d3127a24e2d137a55b1b427378cd17385b01aec6e59d5d4b5f39d2ec.png",this.setState({data_config:i}),this.runRule("enter_tab")}),4e3)}))}))},this.handleClear=t=>{let{data_config:e}=this.state;e[t.key_select].cmd.isLoading=!1,e[t.key_select].cmd.isDone=!1,e[t.key_select].title_button=s.ZP.getLang("scan"),e[t.key_select].value_img_scan="",this.setState({data_config:e},(()=>{})),this.runRule("enter_tab")},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:t}}];let n={},r=s.ZP.getFormAppAuto(e.props.infoA.key_form);return void 0!==r&&(n=r.getData("")),n&&(i=Object.assign(n,i)),a[0].input=Object.assign(a[0].input,i),(0,S.Yr)(a,o).then((t=>{var e=s.ZP.foGetData("infoError",t);return void 0!==e?{infoError:e}:s.ZP.foGetData("data",t)})).finally((t=>{}))},this.propertyConstructor=new Fi(t.inputType,t.default,t.config);var i={};void 0===i&&(i={});var o=this.props.validate;void 0===o&&(o={}),this.callform_detail="",this.callform="",this.data_select={};var a=this.props.lang;if(void 0===a&&(a={}),void 0!==this.props.infoA.form_code){var n=s.ZP.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=n&&void 0!==n.role&&(void 0!==n.role.disabled&&(!0===n.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==n.role.visible&&(!0===n.role.visible?this.propertyConstructor.setCMD_visible(t.visibility&&!0):this.propertyConstructor.setCMD_visible(t.visibility&&!1)))}this.state={value:[],value_old:"",lang:a,lang_select:s.ZP.getLangKey(),validate:o,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpen:!1,titleNoData:"",data_config:this.getDataConfig(JSON.parse(this.props.config.data_config)||[])}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){if(t.includes(".")){let i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.getData(),this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.getData()):s.ZP.putDataGB(i[0],i[1],"")}}getDataConfig(t){let e=[];for(let i=0;i<t.length;i++){const o=t[i];e.push({api_id:o.api_id,cmd:{isLoading:!1,isDone:!1},title_button:s.ZP.getLang("scan"),mode:o.mode,value_img_scan:"",dataItem:{key_select:i,api_id:o.api_id},abs_Click:this.handleClick,abs_Clear:this.handleClear})}return e}getDataFull(){return{config:{data_config:this.state.data_config}}}render(){const t=(0,n.RP)("uAuthentic");return(0,l.jsx)(t,{dataFull:this.getDataFull()})}}const Li=Ni;class Ei extends a.Component{constructor(t){super(t),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCMD=(t,e)=>{const{CMD:i}=this.state||{};let o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.renderDebug=()=>{if(s.ZP.isDebug()){let t=this.props.config.structable.split(".")[1],e=this.data_debug.data_cpn;return null===e&&(e="NULL"),void 0===this.props.config.cdlist&&(this.props.config.cdlist={}),(0,l.jsx)(a.Fragment,{children:(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${t}|:|${e}|`})})}},this.set=(t,e)=>{let i={},o=this.props.config.query_data.split(";");for(let a=0;a<o.length;a++){let t=o[a].split(" "),e=s.ZP.getDataLimited(o[a],0,9999999);i[t[t.length-1]]=e.data}this.setState({data:i})},this.setAdvanced=(t,e)=>{},this.get=(t,e)=>{},this.checkValidate=()=>{var t=!1,e=this.state.data;if(void 0!==e&&(void 0===this.state.validate.request||t||this.state.validate.request&&""===e&&(t=!0,this.state.help_mess=s.ZP.getLang("validateRequest"),this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.getAdvanced=(t,e)=>{},this.reload=(t,e)=>{let i={},o=this.props.config.query_data.split(";");for(let a=0;a<o.length;a++){let t=o[a].split(" "),e=s.ZP.getDataLimited(o[a],0,9999999);i[t[t.length-1]]=e.data}this.setState({data:i})},this.runRule=t=>{if(t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)}},this.report_file=void 0,this.id_theme_component=s.ZP.autoID();var e=this.props.validate;void 0===e&&(e={}),this.callform_detail="",this.callform="";var i=this.props.lang;void 0===i&&(i={});let o={},n=this.props.config.query_data.split(";");for(let a=0;a<n.length;a++){let t=n[a].split(" "),e=s.ZP.getDataLimited(n[a],0,9999999);o[t[t.length-1]]=e.data}let r=s.ZP.context_get("user_acc");this.user_data={},this.user_data.UserVariable={},this.user_data.UserVariable.BankStatus=r.bank_status,this.user_data.UserVariable.BranchCode=r.branch_code,this.user_data.UserVariable.BranchId=r.branch_id,this.user_data.UserVariable.BranchName=r.branch_name,this.user_data.UserVariable.BranchStatus=r.branch_status,this.user_data.UserVariable.UserID=r.id,this.user_data.UserVariable.LoginName=r.login_name,this.user_data.UserVariable.UserCode=r.user_code,this.user_data.UserVariable.UserName=r.user_name,this.user_data.UserVariable.WorkingDate=r.working_date,this.state={data:o,data_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:e,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{}},this.data_debug={}}async componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){}isEmpty(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return JSON.stringify(t)===JSON.stringify({})}convertData(){if(this.props.config.config_data&&!this.isEmpty(this.state.data)){let t=JSON.parse(this.props.config.config_data),e={};for(const i in t)if(Object.hasOwnProperty.call(t,i))if(Array.isArray(t[i])){let o=JSON.parse(JSON.stringify(t[i][0]));e[i.split(".")[0]]=[];for(let t=0;t<this.state.data[i.split(".")[1]].length;t++){const a=this.state.data[i.split(".")[1]][t];let n=JSON.parse(JSON.stringify(o));for(const t in n)n[t]=s.ZP.getNodeJson(a,n[t]);e[i.split(".")[0]].push(n)}}else{let o=JSON.parse(JSON.stringify(t[i]));for(const t in o)o[t]=s.ZP.getNodeJson(this.state.data[i.split(".")[1]],o[t]);e[i.split(".")[0]].push(o)}return Object.assign(e,this.user_data)}return{}}render(){return!1===this.state.CMD.visible?null:(0,l.jsx)("div",{className:"col-md-12 col-lg-12 col-xl-12 malibu-component-margin_top malibu-component-padding ",id:this.id_theme_component})}}const ji=Ei;class Zi extends a.Component{constructor(t){super(t),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCMD=(t,e)=>{const{CMD:i}=this.state||{};let o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)"true"===o[a]&&(o[a]=!0),"false"===o[a]&&(o[a]=!1);this.setState({CMD:o})},this.renderDebug=()=>{if(s.ZP.isDebug()){let t=this.props.config.structable.split(".")[1],e=this.data_debug.data_cpn;return null===e&&(e="NULL"),void 0===this.props.config.cdlist&&(this.props.config.cdlist={}),(0,l.jsx)(a.Fragment,{children:(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${t}|:|${e}|`})})}},this.set=(t,e)=>{},this.setAdvanced=(t,e)=>{},this.setGetInfo=(t,e)=>{},this.get=(t,e)=>{},this.checkValidate=()=>{var t=!1,e=this.state.data;if(void 0!==e&&(void 0===this.state.validate.request||t||this.state.validate.request&&""===e&&(t=!0,this.state.help_mess=s.ZP.getLang("validateRequest"),this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.getAdvanced=(t,e)=>{},this.reload=(t,e)=>{},this.runRule=t=>{if(t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)}},this.report_file=void 0,this.id_theme_component=s.ZP.autoID();var e=this.props.validate;void 0===e&&(e={}),this.user_acc=s.ZP.context_get("user_acc"),this.callform_detail="",this.callform="";var i=this.props.lang;void 0===i&&(i={}),this.file_report="",void 0!==this.props.config.file_report&&(this.file_report=this.props.config.file_report),this.more_config="",void 0!==this.props.config.more_config&&(this.more_config=this.props.config.more_config),this.design_type="",void 0!==this.props.config.design_type&&(this.design_type=this.props.config.design_type),this.REPORT_URL="https://localhost:7141";let o="REPORT_URL";if("dashboard"===this.design_type)o="DASHBOARD_URL";else o="REPORT_URL";let n=s.ZP.getParameterSystem(o);void 0!==n&&(this.REPORT_URL=n);var r="?"+this.encodeQueryData({report_code:this.file_report,token:(0,s.VN)()});this.state={url:r,data_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:e,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{}},this.data_debug={}}encodeQueryData(t){const e=[];for(let i in t)e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")}async componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){}isEmpty(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return JSON.stringify(t)===JSON.stringify({})}render(){return!1===this.state.CMD.visible||window.open(this.REPORT_URL+this.state.url),null}}const Ri=Zi;i(8022);const Qi={},zi={},Ui={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class Bi{}Bi.get=()=>({main:Qi,position:zi,cmd:Ui}),Bi.getCmd=()=>Ui,Bi.getValueCmd=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return void 0!==t.infoA.form_code&&(e=s.ZP.role_getComponent(t.infoA.form_code,t.default.codeHidden)||{},e=e.role||{}),e};const Yi=Bi;var Hi;class Vi extends a.Component{constructor(t){var e;super(t),e=this,this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.callDir=()=>this,this.setCMD=(t,e)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.set=(t,e)=>{this.card_page_index=1;let i=0,o="table_paging";this.props.config.table_name&&(o=this.props.config.table_name+"_paging"),void 0!==e[o]&&void 0!==e[o].total_items&&(i=e[o].total_items),this.dataGlobal=s.ZP.getDataLimited(this.state.config_table.query_data,0,999999999);let a={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[],total:this.dataGlobal.total};0===i&&(i=a.total);let n=[];void 0!==a.data&&(n=a.data),this.setState({columnSearchValue:{},data:n,page_index:1,total_record:i},(()=>{this.runRule("on_change")}))},this.runRule=t=>{t&&void 0!==(Hi=s.ZP.getFormAppAuto(this.props.infoA.key_form))&&Hi.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)},this.reload=(t,e)=>{this.page_index=1,this.card_page_index=1,this.setState({page_index:1,data:[]},(()=>{}))},this.setData=function(t){t.length>0?e.dataGlobal.data=t:e.dataGlobal=s.ZP.getDataLimited(e.state.config_table.query_data,0,999999999);let i={data:e.dataGlobal.data.slice(0,e.state.config_table.paging_record)||[],total:e.dataGlobal.total},o=[];void 0!==i.data&&(o=i.data);let a=s.ZP.cloneJson(o),n=[],r=e.props.config.query_data.split(" "),l=r[r.length-1]||r;if(void 0!==r&&""!==r&&(!0===r.includes(".")?void 0!==s.ZP.getOOP(a,r)&&(n=s.ZP.getOOP(a,r)):void 0!==a&&(n=a)),Array.isArray(n)){for(let t=0;t<n.length;t++){let e=n[t];for(const i in e){const o=e[i];if("object"!==typeof o){let e=s.ZP.cloneJson(n[t]);n[t]={},n[t][l]=e,n[t][l].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(n[t][i].AFGHkeyIndexWJ=s.ZP.autoID())}}e.setState({column_search:{},data:n,totalCheck:!1},(()=>{e.runRule("on_change")}))}else e.setState({data:o,totalCheck:!1},(()=>{e.runRule("on_change")}))},this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.abs_getDataLimited=function(t,e){let i={data:this.state.dataFilter.slice(t,t+e)||[],total:this.state.dataFilter.length},o=i.data;if(!0===this.state.hasCheck)for(let n=0;n<o.length;n++)o[n].hasCheck__=!1;let a=1;void 0!==i.total&&(a=i.total);let s=this.buildPaging(a,this.state.config_table);this.setState({data:o,total_record:a,paging:s})},this.getData=()=>{var t;let e=this.state.data,i="true"===this.state.hasSystemColumnCheck?null===(t=this.state.checked_to_selected)||void 0===t?void 0:t.mode:"",o=this.props.config.query_data.split(" "),a=o[o.length-1]||o,s=this.state.statusCheck;return"IS_SELECTED"===i?e.filter((t=>s[t[a].AFGHkeyIndexWJ])):{data:e,total_paging:this.state.total_record}},this.getAdvanced=(t,e)=>this.getData(),this.buildDataPaging=t=>({pagingIndex:t?1:this.card_page_index,recordItem:5}),this.callBOSearch=function(t,i,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(""!==o&&void 0!==o||(o="bo-search-API"),""===t)return;var n=[{txcode:o,input:{learn_api:t}}];let r={},l=s.ZP.getFormAppAuto(e.props.infoA.key_form);return void 0!==l&&(l.setLoadingAction(!0),r=l.getData("")),r&&i?i=Object.assign(r,i):i||(i=r),e.props.config.api_data&&(i=Object.assign(i,JSON.parse(e.props.config.api_data))),n[0].input=Object.assign(n[0].input,i),(0,S.Yr)(n,a).then((t=>{var i,o,a=s.ZP.foGetData("infoError",t);if(void 0!==a)return{infoError:a};let n=e.props.config.query_data.split(" "),r=n[n.length-1]||n;var l=s.ZP.foGetData(r,t);let c="table_search";if(e.props.config.table_name&&(c=e.props.config.table_name),null!==(i=s.ZP.foGetData(c,t))&&void 0!==i&&i.total_items||0===(null===(o=s.ZP.foGetData(c,t))||void 0===o?void 0:o.total_items)){var d;let i=null===(d=s.ZP.foGetData(c,t))||void 0===d?void 0:d.total_items;i!==e.state.total_record&&e.setState({total_record:i})}return l||(l=[]),l})).finally((t=>{l.setLoadingAction(!1)}))},this.setAdvanced=(t,e)=>{if(!1===Array.isArray(e))this.setState({data:[]});else{let t=s.ZP.cloneJson(e),i=[],o=this.props.config.query_data.split(" "),a=o[o.length-1]||o;if(i=t,Array.isArray(i)){for(let t=0;t<i.length;t++){let e=i[t];for(const o in e){const n=e[o];if("object"!==typeof n){let e=s.ZP.cloneJson(i[t]);i[t]={},i[t][a]=e,i[t][a].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===n.AFGHkeyIndexWJ&&(i[t][o].AFGHkeyIndexWJ=s.ZP.autoID())}}this.card_page_index=1,this.setState({data:i,total_record:i.length,data_search:i,column_search:{}},(()=>{}))}else this.setState({data:[],data_search:[]},(()=>{}))}},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],!1===Array.isArray(e))this.setState({data:[]});else{let t=s.ZP.cloneJson(e),i=[],o=this.props.config.query_data.split(" "),a=o[o.length-1]||o;if(i=t,Array.isArray(i)){for(let t=0;t<i.length;t++){let e=i[t];for(const o in e){const n=e[o];if("object"!==typeof n){let e=s.ZP.cloneJson(i[t]);i[t]={},i[t][a]=e,i[t][a].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===n.AFGHkeyIndexWJ&&(i[t][o].AFGHkeyIndexWJ=s.ZP.autoID())}}this.card_page_index=1,this.setState({data:i,total_record:i.length,data_search:i,column_search:{}},(()=>{}))}else this.setState({data:[],data_search:[]},(()=>{}))}},this.callBOSearchAdvanced=function(t,i,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(""!==o&&void 0!==o||(o="bo-search-advanced-API"),""===t)return;var n=[{txcode:o,input:{learn_api:t}}];let r={},l=s.ZP.getFormAppAuto(e.props.infoA.key_form);return void 0!==l&&(l.setLoadingAction(!0),r=l.getData("")),r&&i?i=Object.assign(r,i):i||(i=r),e.props.config.api_advanced_data&&(i=Object.assign(i,JSON.parse(e.props.config.api_advanced_data))),n[0].input=Object.assign(n[0].input,i),(0,S.Yr)(n,a).then((t=>{var i=s.ZP.foGetData("infoError",t);if(void 0!==i)return{infoError:i};let o=e.props.config.query_data.split(" "),a=o[o.length-1]||o;var n=s.ZP.foGetData(a,t);return n||(n=[]),n})).finally((t=>{l.setLoadingAction(!1)}))},this.abs_autoCallBackData=()=>{let t=this.state.paging_record;t[this.state.selectedRecordIndex]+=5,this.setState({paging_record:t},(()=>{this.recordChangeHandler(0)}))},this.handleClickTableRow=t=>{},this.handleOpenTransaction=t=>{t.tran_reference=t.ref_id,(0,S.Yr)([{txcode:"#sys:bo-view-dataAPIO9_F8",input:{table_code:"fof_transaction_journal",table_col_key:"",form_key:"@{a.b}",learn_api:"fof_transaction_journal_search_view_get_api_journal_txrefid_viewActivity",fof_transaction_journal:t}}],{})},this.handleScroll=()=>{this.card_page_index++;let t="table_search",e={};this.props.config.table_name&&(t=this.props.config.table_name),e[t]={paging:this.builCarddDataPaging()},this.state.data.length<this.state.total_record&&("true"===this.state.isSearchAdvanced&&this.props.config.apiSearchAdvanced?this.callBOSearchAdvanced(this.props.config.apiSearchAdvanced,(0,o.Z)({},e),this.props.config.BoSearchAdvance).then((t=>{this.setDataCard(t)})):this.callBOSearch(this.props.config.apiId,(0,o.Z)({},e),this.props.config.BoSearch).then((t=>{this.setDataCard(t)})))},this.builCarddDataPaging=t=>({pagingIndex:t?1:this.card_page_index,recordItem:5}),this.setDataCard=t=>{t.length>0?this.dataGlobal.data=t:this.dataGlobal=s.ZP.getDataLimited(this.state.config_table.query_data,0,999999999);let e={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[],total:this.dataGlobal.total},i=[];void 0!==e.data&&(i=e.data);let o=s.ZP.cloneJson(i),a=[],n=this.props.config.query_data.split(" "),r=n[n.length-1]||n;if(void 0!==n&&""!==n&&(!0===n.includes(".")?void 0!==s.ZP.getOOP(o,n)&&(a=s.ZP.getOOP(o,n)):void 0!==o&&(a=o)),Array.isArray(a)){for(let t=0;t<a.length;t++){let e=a[t];for(const i in e){const o=e[i];if("object"!==typeof o){let e=s.ZP.cloneJson(a[t]);a[t]={},a[t][r]=e,a[t][r].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(a[t][i].AFGHkeyIndexWJ=s.ZP.autoID())}}a=this.state.data.concat(a),this.setState({column_search:{},data:a,totalCheck:!1},(()=>{this.runRule("on_change")}))}else i=this.state.data.concat(i),this.setState({data:i,totalCheck:!1},(()=>{this.runRule("on_change")}))},this.page_index=1,this.card_page_index=1,this.timerType=s.ZP.getParameterSystem("TimerSpanType");let i={query_data:this.props.config.query_data};this.dataGlobal=s.ZP.getDataLimited(i.query_data,0,999999999)||{};let a={data:[],total:0};"false"!==this.props.config.isLoadDataStart&&(a={data:this.dataGlobal.data.slice(0,i.paging_record)||[],total:this.dataGlobal.total}),void 0===a&&(a={});let n=0;void 0!==a.total&&(n=a.total);let r=this.props.lang;void 0===r&&(r={}),this.state={config_table:i,data:[],lang:r,lang_select:s.ZP.getLangKey(),total_record:n,selectedRecordIndex:0,page_index:1,STT:!1,hasCheck:!1,CMD:Yi.getValueCmd(this.props),columnSearchValue:{},totalCheck:!1,checkedRow:!1,statusCheck:{},isSearchAdvanced:!1}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config!==t.config&&this.setState({columns:JSON.parse(this.props.config.columns)}),this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.property!==t.property&&this.setState({property:this.props.property})}readData(t,e){t.includes(".")&&(void 0===e||"true"===e?this.props.config.table_name?s.ZP.putData(this.props.config.table_name,"paging",this.buildDataPaging(!0),this.props.infoA):s.ZP.putData("table_search","paging",this.buildDataPaging(!0),this.props.infoA):"false"===e?this.props.config.table_name?s.ZP.putData(this.props.config.table_name,"paging",this.buildDataPaging(!0),this.props.infoA):s.ZP.putData("table_search","paging",this.buildDataPaging(!0)):this.props.config.table_name?s.ZP.putData(this.props.config.table_name,"paging"," "):s.ZP.putData("table_search","paging"," "))}functionFo(t,e){let i=void 0===e.useAction?"notUse":e.useAction,o=this.props.default;switch(i){case"txFo":var a=s.ZP.parseJson(e.txFo);void 0!==a?_.ZP.runFoWithContext(a,t,this.props.infoA,this.props.infoA_parent,o):s.ZP.AppException("#cColumnAction.onClick","Error Json is undefined");break;case"txFoAction":var n=s.ZP.parseJson(e.txFoActions);void 0!==n?_.ZP.runActionWithContext(n,t,this.props.infoA,this.props.infoA_parent,o):s.ZP.AppException("#cColumnAction.onClick","config_fo is undefined")}}renderTable(){const t=(0,n.RP)("uListActivity");return(0,l.jsx)(t,{dataFull:this.getDataActivity()})}getStatus(t){return"Completed"===t?"success":"default"}getDataConvert(t,e,i){switch(t){case"columnMask":return((t,e)=>{let i=t.mask,o=i.includes("DD")&&i.includes("MM")&&i.includes("YY")||!0===(null===t||void 0===t?void 0:t.isDate);return String(i).startsWith("$")&&String(i).endsWith("$")&&(i=s.ZP.getParameterSystem(i.replace(/\$/g,""))),o?e||0===e?Q.sx(Q.xY(e),i,t.mask_mode_time):"":Q.Ui(e,i)})(e,i);case"columnCurrency":return((t,e)=>{if(0!==e&&!e)return"--";let i=t.decimal_length||t.decimal;return 0===i||i||(i=2),i=Number(i)||0,e=Math.round(Number(e)*Math.pow(10,i))/Math.pow(10,i),Q.Nx(e,i)})(e,i);default:return i}}getDataActivity(t){let e=this.props.config.query_data.split(" ");return{abs_Click:this.handleOpenTransaction,cmd:{isLoading:this.state.isLoading},abs_autoCallBackData:this.handleScroll,data:this.state.data.map(((t,i)=>{let o=t[e[e.length-1]];return{cmd:{disable:!s.ZP.checkHasRoleForm("FO_"+o.transaction_code)},dataItem:o,img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG1SURBVHgB7ZlbT8IwFMf/bLDhGDKRi5J4efP7fw6fNfHFGwmRychwchk35dSQYBSm9Cw0pL9kL1uX9NfT9pxumevb5w/sAQb2BC2iGlpENbSIamgR1dAiqqFFVGNvRLJIiaJjo1Et4SCfQ9YwMBiN4Xff0en1kQapiDQqh0JiFSdv4bJRhluw8djqghv2qWXnsj8kVqmUChufbwu7yGn1MLFN/cgFN+wizmJNJGGahogcJ3r7XUfUjxPbjCczxJMpOGEXCXqDxDZpbMHsIpQvmi/h2uck0XrtgRu2FUcJsF4uwsqZaPohbu7bOD/xRP4wjYyYSn43QhiNcHVRE+8EYZ8tOhmOD3QkcFb3vt2jDgaLazicYDqfC9FiIY9a2RWZfkk0iHH35EMW6YjQNvpb7qDER1cSJEjtZCMjvUaoI6sjvA3HXrJwEtIiHJ2gwTAlB0NaxDQz4MC2TMggLeLYFjiQLVmUKVF2PrVmc57fK/FUrmSRFmkHb5CFaq+/1GibkM4jrc6XSMVzRVb/DxRNKmkeGE6MLCUKySyFdoU+j6iGFlENLaIaWkQ1tIhqaBHV0CKq8Qm17HooAQMieQAAAABJRU5ErkJggg==",title_bold:o.user_name,status:{title:o.status,type:this.getStatus(o.status)},title:s.ZP.getLang("activity_action")+" "+(o.description?o.description:""),time:this.getDataConvert("columnMask",{mask:"DD/MM/YYYY",mask_mode_time:"utc"},o.transaction_date)+" "+this.getDataConvert("columnMask",{mask:"HH:mm:ss",isDate:!0},o.transaction_date),title_ref:o.transaction_number,table:{header:{dataFull:{Header:{data:o.details.map((t=>({title:t.field_name,id:t.ref_id,config:{width:"",isFrozen:!1}}))),config:{}}}},data:o.details.map((t=>({data_new:t.new_value,data_old:t.old_value}))),config_row:o.details.map(((t,e)=>({type:"uTableColumnDefault"})))}}}))}}render(){return"false"===String(this.state.CMD.visible)?null:this.renderTable()}}const Wi=Vi,Gi={structable:"",structable_read:"",data_default:"",data_mode:"query",query_data:"",collect_method_style:"string",hasAddLabel:"true",hasCheckAll:"false",isLoadDataBegin:"false",api_id:"",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",col_format:"@c_cdlist.caption",json_data:"[\n   \n    ]",key_selected:"c_cdlist.cdid",isLabel:"false"},Ji=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,o.Z)({},Gi);for(let i in e)t[i]&&(""!==e[i]&&""===t[i]||(e[i]=t[i]));return e||{}},qi={ui:{},data:{}},Ki=t=>{if(!t)return[];let e=[];const{query_data:i,json_data:o}=t;if("cdlist"===t.data_mode){var a="",n="";void 0!==t.cdlist&&void 0!==t.cdlist.cdgrp&&void 0!==t.cdlist.cdname&&(a=t.cdlist.cdgrp,n=t.cdlist.cdname),e=s.ZP.data_cdList(a,n)||[]}else e=s.ZP.getDataLimited(i,0,99999)||[],e=e.data||[];let r=s.ZP.parseJson(o).concat(e)||[];return r=Xi(r,t.col_format,t.key_selected),r||[]},Xi=(t,e,i)=>{for(let o=0;o<t.length;o++)t[o].selected=!1,t[o].key_select=o,t[o].title=$i(e,t[o]),t[o].value=$i("@"+i,t[o]);return t},$i=(t,e)=>(t.split(" ").forEach((i=>{if("@"===i[0]){let o=i.substring(1),a=s.ZP.getOOP(e,o);if("c_cdlist.caption"===o){let t=s.ZP.getOOP(e,"c_cdlist.mcaption");null!==t&&void 0!==t&&t[s.ZP.getLangKey()]&&(a=null===t||void 0===t?void 0:t[s.ZP.getLangKey()])}t=t.replace(i,a)}})),t),to=(t,e,i,o,a)=>{if(void 0===t||void 0===e||void 0===i)return[];if(null===e||null===i)return[];if(""===i)return[];"string"===typeof t&&(t=t.includes(",")?t.split(","):t.includes("|")?t.split("|"):[t]);let n=[];return e.forEach(((e,r)=>{var l;let c=JSON.parse(JSON.stringify(e));void 0===c.key_select&&(c.key_select=r),void 0===c.title&&(c.title=$i(o,c)),void 0===c.value&&(c.value=$i("@"+a,c));let d=s.ZP.getOOP(e,i)+""||c.value;null!==d&&void 0!==d&&""!==d&&null!==(l=t)&&void 0!==l&&l.includes(d+"")?c.selected=!0:c.selected=!1,n.push(c)})),n},eo=(t,e)=>{let i=[];for(let o=0;o<t.length;o++)!0===t[o].selected&&i.push(s.ZP.getOOP(t[o],e));return i};const io=class{constructor(t,e,i){this.getProperty=()=>this.property,this.setCMD=t=>{void 0!==t.visible&&("true"!==t.visible&&"false"!==t.visible||(this.property.cmd.visible=t.visible)),void 0!==t.disabled&&("true"!==t.disabled&&"false"!==t.disabled||(this.property.cmd.disabled=t.disabled)),void 0!==t.block&&("true"!==t.block&&"false"!==t.block||(this.property.cmd.block=t.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=t=>{this.property.cmd.visible=t},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=t=>{this.property.cmd.disabled=t},this.getCMD_enable=()=>this.property.cmd.disabled,this.getDefault=()=>this.property.default,this.property={inputType:t,config:i,default:e,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class oo extends a.Component{constructor(t){var e;super(t),e=this,this.convertStringWithContext=t=>{let e=s.ZP.getlistCodeContext(t);for(let i=0;i<e.length;i++){const o=e[i];let a=s.ZP.context_get(o.code);void 0!==a&&(t=t.replace(o.key,a))}return t},this.getConfigSmooth=t=>{let e=s.ZP.cloneJson(t);return e.config=Ji(e.config),e},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.isRunRule=(t,e)=>!!t&&t.split(";").includes(e),this.setCMD=(t,e)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),e);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.set=async(t,e)=>{this.data_debug.data_form=e;let{structable_read:i,key_selected:o,collect_method_style:a}=this.config,{datas:s}=this.state,n="",r=[];if(e&&i){let t=i.split(".");if(2===t.length){if(e[t[0]]&&void 0!==e[t[0]][t[1]]){n=e[t[0]][t[1]],this.data_debug.data_cpn=n,this.last_selected_data=n,r=to(n,s,o,this.props_smooth.config.col_format,this.props_smooth.config.key_selected);let i=r.filter((t=>!0===t.selected));return"array"===a&&(n+=""),n+""!=="null"&&n+""!=="undefined"||(n=""),this.setState({val_select_tmp:n,datas:r,datas_view:r,input_value:i}),void this.onRunRule("update")}return}{let i=e;for(let e=0;e<t.length;e++){if(e===t.length-1){if(void 0!==i&&null!==i[t[e]]){n=i[t[e]],this.data_debug.data_cpn=n,this.last_selected_data=n,r=to(n,s,o,this.props_smooth.config.col_format,this.props_smooth.config.key_selected);let l=r.filter((t=>!0===t.selected));return"array"===a&&(n+=""),n+""!=="null"&&n+""!=="undefined"||(n=""),this.setState({input_value:l,val_select_tmp:n,datas:r,datas_view:r}),void this.onRunRule("update")}return}void 0!==i&&null!==i[t[e]]&&(i=i[t[e]])}}}void 0===this.data_debug.data_cpn&&(this.data_debug.data_cpn="undefined"),this.setState({list_selected:[],val_select_tmp:n,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jSelectMulti_NotFindValue"})},this.setAdvanced=async(t,e)=>{let i=t.component_action||"",{code:o}=this.props.default,a=i.split(";").includes(o);if(void 0!==e){var s;let{key_selected:t}=this.config,{datas:i,collect_method_style:o}=this.state,n=to(e,i,t,this.props_smooth.config.col_format,this.props_smooth.config.key_selected)||[],r=(null===n||void 0===n?void 0:n.toString())!==(null===(s=this.state.list_selected)||void 0===s?void 0:s.toString());if(0!==n.length){if(r&&!a){this.onRunRule("enter_tab");let t=n.filter((t=>!0===t.selected));return"array"===o&&(e+=""),e+""!=="null"&&e+""!=="undefined"||(e=""),void this.setState({input_value:t,val_select_tmp:e,datas:n,datas_view:n})}}else{let t=[0];if(0!==t.length&&r&&!a){this.onRunRule("enter_tab");let i=t.filter((t=>!0===t.selected));return"array"===o&&(e+=""),void this.setState({input_value:i,val_select_tmp:e,datas:t,datas_view:t})}}this.setState({list_selected:[],val_select_tmp:e,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jSelectMulti_NotFindValue"})}else{0!==[0].length&&(a||this.onRunRule("enter_tab"))}},this.setGetInfo=async(t,e)=>{e=e[this.props.default.code];let i=t.component_action||"",{code:o}=this.props.default,a=i.split(";").includes(o);if(void 0!==e&&""!==e){var s;let{key_selected:t}=this.config,{datas:i,collect_method_style:o}=this.state,n=to(e,i,t,this.props_smooth.config.col_format,this.props_smooth.config.key_selected)||[],r=(null===n||void 0===n?void 0:n.toString())!==(null===(s=this.state.list_selected)||void 0===s?void 0:s.toString());if(0!==n.length){if(r&&!a){this.onRunRule("enter_tab");let t=n.filter((t=>!0===t.selected));return"array"===o&&(e+=""),e+""!=="null"&&e+""!=="undefined"||(e=""),void this.setState({input_value:t,val_select_tmp:e,datas:n,datas_view:n})}}else{let t=[0];if(0!==t.length&&r&&!a){this.onRunRule("enter_tab");let i=t.filter((t=>!0===t.selected));return"array"===o&&(e+=""),void this.setState({input_value:i,val_select_tmp:e,datas:t,datas_view:t})}}this.setState({list_selected:[],val_select_tmp:e,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jSelectMulti_NotFindValue"})}else{0!==[0].length&&(a||this.onRunRule("enter_tab"))}},this.getAdvanced=t=>{let{list_component:e}=t,{code:i}=this.props_smooth.default;if(this.isRunRule(e,i)){let{collect_method_style:t,get_data_format:e,structable:i}=this.state,o=this.state.val_select_tmp;if("array"===t&&(o=eo(input_value,e)),2===i.split(".").length)return o}},this.getInfoErrror=()=>{var t,e,i;return""!==this.state.help_mess&&!0===this.checkValidate()&&"jSelectMulti_NotFindValue"!==this.state.help_mess?(this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:(null===(t=this.props_smooth.lang)||void 0===t||null===(e=t.ui)||void 0===e||null===(i=e[s.ZP.getLangKey()])||void 0===i?void 0:i[this.props_smooth.default.name])||this.props_smooth.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}):""},this.setDataGB=async(t,e)=>{let{datas:i,key_selected:o,list_selected:a,selected_view:n}=this.state,{json_data:r}=this.props_smooth.config;e=s.ZP.parseJson(r).concat(e)||[],e=Xi(e);let l=s.ZP.getOOP(i[a[0]],o);this.setState({datas:e,datas_view:e,list_selected:a,selected_view:n},(()=>{let t=this.state.val_select_tmp||l,e=to(t,this.state.datas,o,this.props_smooth.config.col_format,this.props_smooth.config.key_selected);t&&0!==e.length&&(this.state.val_select_tmp="")}))},this.get=(t,e)=>{let i=this.props_smooth.config.structable;if(i.includes("|")){let e=i.split("|");for(var o=0;o<e.length;o++)this.readData(e[o],t.inform)}else this.readData(i,t.inform)},this.checkValidate=()=>{let t=!1,e=this.state.input_value;if(void 0!==e&&void 0!==this.state.validate.request&&!t&&this.state.validate.request){let{input_value:i,get_data_format:o,collect_method_style:a}=this.state,s=this.state.val_select_tmp;"array"===a&&(s=eo(i,o)),0!==e.length&&null!==s&&""!==s&&0!==s.length||(t=!0,this.state.help_mess="validateRequest",this.setState({help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"}))}if(t){var i=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}else{this.clearError();let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(t.buildValidateForm(!1),t.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.buildValidateForm(!1)}}))}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{let{datas:i}=this.state;i.forEach((t=>{t.selected=!1})),this.setState({search_input:"",datas:i,datas_view:i,input_value:[],val_select_tmp:""})},this.setDataDefault=()=>{},this.onEvent=t=>{switch(t){case"closeTable":this.setState({isOpen:!1});break;case"openTable":!1===this.state.isOpen&&this.setState({isOpen:!0})}},this.onRunRule=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"on_change";var i=s.ZP.getFormAppAuto(e.props_smooth.infoA.key_form);void 0!==i&&i.runRuleFunction(e.props_smooth.default,{},e.props_smooth.infoA_parent,t)},this.getDataOOP=(t,e)=>0===this.state.list_selected.length?void 0:this.state.datas[this.state.list_selected[0]],this.onBlur=()=>{this.checkValidate()},this.getOptionConfig=t=>t.map(((t,e)=>({title:$i(this.props_smooth.config.col_format,t)||t.title,selected:t.selected,dataItem:{key_select:t.key_select,value:t.value},value:t.value,value_code:t.value_code}))),this.getInfoCompare=(t,e)=>{let{lang_compare:i,compare_info:o,isCompare:a}=this.state;if(a){let t=i[this.state.lang_select];if(o.is_change_value){let e=t.replace("{value_old}","");return e=e.replace("{value_new}",""),{is_change_value:o.is_change_value,compareInfo:{component_code:this.props_smooth.default.code,component_name:this.props_smooth.default.name,message:{title_before:o.cache_value,title_status:e,title_after:o.change_value}}}}}return{}},this.setValidate=(t,e)=>{let{validate:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),e);i.request!==o.request&&this.setState({validate:o})},this.clearCacheCompare=()=>{let{compare_info:t}=this.state;t.cache_value=void 0,t.is_change_value=!1,this.setState({compare_info:t})},this.abs_Change=async(t,e,i,a)=>{let{datas:n,search_input:r,datas_view:l,input_value:c,val_select_tmp:d}=this.state;n[a.key_select].selected=!n[a.key_select].selected;let h=d.split(",");if(n[a.key_select].selected)h.includes(n[a.key_select].value)||(c.push((0,o.Z)((0,o.Z)({},n[a.key_select]),{},{dataItem:a})),h.push(n[a.key_select].value),d=h+"");else for(let o=0;o<c.length;o++){var u;if((null===(u=c[o])||void 0===u?void 0:u.value)===t){c.splice(o,1),h=d.split(","),h.splice(h.indexOf(t)),d=h+"";break}}l=""!==r?n.filter((t=>s.ZP.searchPerfect(r,t.title))):n,this.setState({datas:n,datas_view:l,input_value:c,val_select_tmp:d},(()=>{this.checkValidate()})),await this.onRunRule("on_change")},this.onChangeSearch=t=>{let{datas:e,compare_info:i}=this.state,o=t.target.value,a=e;""!==o&&(a=e.filter((t=>s.ZP.searchPerfect(o,t.title)))),this.setState({search_input:o,datas_view:a,pos_row:-1,compare_info:i})},this.handleAddItem=t=>{let{datas:e,search_input:i,datas_view:o,list_item_add:a}=this.state;if(0===e.filter((e=>e.value===t)).length){const i=e.length;e.push({title:t,value:t,selected:!1,key_select:i}),a.push({title:t,value:t,selected:!1,key_select:i})}o=""!==i?e.filter((t=>s.ZP.searchPerfect(i,t.title))):e,this.setState({datas:e,datas_view:o,list_item_add:a})},this.handleOpen=()=>{this.setState({search_input:""},(()=>{let{datas:t,isLoadDataBegin:e,api_id:i,list_item_add:o}=this.state;e+""==="true"?this.callAPI(i).then((e=>{for(let t in e)s.ZP.setData(t,e[t]);let{key_selected:i}=this.config;t=Ki(this.config).concat(o);let a=to(this.state.val_select_tmp,t,i,this.props_smooth.config.col_format,this.props_smooth.config.key_selected),n=a.filter((t=>!0===t.selected));this.setState({input_value:n,datas:a,datas_view:a})})):this.setState({datas_view:t})}))},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.state.isLoading||e.setState({isLoading:!0});var a=[{txcode:"#sys:bo-getInfoArray-API",input:{learn_api:t}}];let n={},r=s.ZP.getFormAppAuto(e.props.infoA.key_form);return void 0!==r&&(n=r.getData("")),n&&(i=Object.assign(n,i)),a[0].input=Object.assign(a[0].input,i),(0,S.Yr)(a,o).then((t=>{var e=s.ZP.foGetData("infoError",t);return void 0!==e?{infoError:e}:s.ZP.foGetData("data",t)})).finally((t=>{e.setState({isLoading:!1})}))},this.renderThisComponent=()=>{const t=(0,n.RP)("uSelectMulti");return(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_CheckALL:this.handleCheckAll,abs_Open:this.handleOpen,abs_Change:this.abs_Change,abs_search:this.onChangeSearch,abs_Add:this.handleAddItem})})},this.handleCheckAll=t=>{let{datas_view:e,input_value:i,val_select_tmp:a}=this.state;switch(t){case!0:case"-":for(let t=0;t<e.length;t++)e[t].selected=!1;i=[],a="";break;case!1:for(let t=0;t<e.length;t++)e[t].selected||(e[t].selected=!0,i.push((0,o.Z)((0,o.Z)({},e[t]),{},{dataItem:{key_select:e[t].key_select,value:e[t].value}})),a+=(""!==a?",":"")+e[t].value)}this.setState({datas_view:e,input_value:i,val_select_tmp:a})},this.renderMess=t=>{switch(t){case"validateNumMin":return s.ZP.getLang(t).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(t).replace("{count}",this.state.validate.max);case"validateRequest":default:return s.ZP.getLang(t);case"jSelectMulti_NotFindValue":return s.ZP.isDebug()?s.ZP.getLang(t):""}},this.propertyConstructor=new io(t.inputType,t.default,t.config),this.props_smooth=this.getConfigSmooth(this.props),this.component_code=s.ZP.autoID();let{config:i,lang:a}=this.props_smooth;this.config=Ji(i),this.lang=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let e in qi)void 0===t[e]&&(t[e]={});return t}(a);let{isLoadDataBegin:r,hasAddLabel:c,hasCheckAll:d,api_id:h,selected_view_format:u,get_data_format:p,key_selected:_,structable:f,structable_read:g,col_format:m,collect_method_style:v}=this.config,b=this.props_smooth.validate;void 0===b&&(b={}),this.callform_detail="",this.callform="";let y="true"===String(this.props_smooth.validate.is_compare),A={},D={};void 0!==this.props_smooth.lang&&(A=void 0!==this.props_smooth.lang.title?this.props_smooth.lang.title:this.props_smooth.lang,void 0!==this.props_smooth.lang.lang_compare&&(D=this.props_smooth.lang.lang_compare));let k=Ki(this.config);this.state={isCompare:y,structable:f,structable_read:g,value:this.data_default,compare_info:{cache_value:void 0,is_change_value:!1},col_format:m,collect_method_style:v,val_select_tmp:"",lang_compare:D,lang:A,lang_select:s.ZP.getLangKey(),validate:b,input_value:[],infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isLoading:!1,datas:k,datas_view:k,get_data_format:p,key_selected:_,selected_view:"",selected_view_format:u,list_selected:[],pos_row:-1,search_input:"",isLoadDataBegin:r,hasAddLabel:c,hasCheckAll:d,api_id:h,isOpen:!1,CMD:this.propertyConstructor.getCMD(),max_item_length:50,hasErrorInForm:!1,list_item_add:[]},this.data_debug={}}UNSAFE_componentWillMount(){this.data_view_template=this.getOptionConfig(this.state.datas_view)}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props_smooth.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}UNSAFE_componentWillUpdate(t,e){this.data_view_template=this.getOptionConfig(e.datas_view)}readData(t,e){let{input_value:i,get_data_format:o,collect_method_style:a}=this.state,n=this.state.val_select_tmp;"array"===a&&(n=eo(i,o)),""!==this.state.help_mess&&(n=null);let r=t.split(".");2===r.length&&(void 0===e||"true"===e?s.ZP.putData(r[0],r[1],n,this.props_smooth.infoA):"false"===e?s.ZP.putDataGB(r[0],r[1],n):s.ZP.putDataGB(r[0],r[1],""))}getConfigTemplate(){var t,e,i,o,a,n,r,l,c;let d=this.props_smooth.default.name;return{config:{default:{search:{placeholder:s.ZP.getLang("jselect_search")},more_option:{title_header:(null===(t=this.props_smooth.lang)||void 0===t||null===(e=t.ui)||void 0===e||null===(i=e[s.ZP.getLangKey()])||void 0===i?void 0:i[d])||(null===(o=this.state.lang)||void 0===o?void 0:o[s.ZP.getLangKey()])||d,title_add:"Add new labels"},placeholder:s.ZP.getLang("jselect_placeholder"),data_status:s.ZP.getLang("jselect_no_result"),title:(null===(a=this.props_smooth.lang)||void 0===a||null===(n=a.ui)||void 0===n||null===(r=n[s.ZP.getLangKey()])||void 0===r?void 0:r[d])||(null===(l=this.state.lang)||void 0===l?void 0:l[s.ZP.getLangKey()])||d,type:"",class:this.props_smooth.default.class,required:this.state.validate.request,component_code:this.component_code},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:"false"!==String(this.state.CMD.visible),isLoading:this.state.isLoading,error:{message:"jSelect_NotFindValue"===this.state.help_mess?"":this.renderMess(this.state.help_mess),type:""}},mode:{hasCheckAll:"true"===String(this.state.hasCheckAll),noAddLabel:"false"===String(this.state.hasAddLabel)}},check_all:{value:this.getValueCheckAll(),title:"Check all items in show"},data:null===(c=this.data_view_template)||void 0===c?void 0:c.map((t=>t)),input_value:this.state.input_value.map((t=>(t.dataItem={key_select:t.key_select,value:t.value},t))),input_value_string:this.state.input_value.length>0?this.state.input_value[0].title+(this.state.input_value.length>1?" +"+(this.state.input_value.length-1)+"more":""):"",search_value:this.state.search_input||""}}getValueCheckAll(){let t=0;return this.state.datas_view.forEach((e=>{!0===e.selected&&t++})),0!==t&&(t===this.state.datas_view.length||"-")}render(){const t=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup+("false"===String(this.state.CMD.visible)?" malibu-invisible":""),children:[this.renderThisComponent(),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):this.renderThisComponent()}}const ao=oo,so={},no={},ro={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class lo{}lo.get=()=>({main:so,position:no,cmd:ro}),lo.getCmd=()=>ro,lo.getValueCmd=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return void 0!==t.infoA.form_code&&(e=s.ZP.role_getComponent(t.infoA.form_code,t.default.codeHidden)||{},e=e.role||{}),e};const co=lo;class ho extends a.Component{constructor(t){super(t),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.callDir=()=>this,this.setCMD=(t,e)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.set=(t,e)=>{if(e[this.state.config_table.query_data]&&Array.isArray(e[this.state.config_table.query_data])){let t=e[this.state.config_table.query_data],i=t[0];t.splice(0,1);let o={data:t||[],total:t.length},a=[],s=0;void 0!==o.total&&(s=o.total);let n=this.buildPaging(s,this.state.config_table);this.dataGlobal=JSON.parse(JSON.stringify(o)),void 0!==o.data&&(a=o.data.slice(0,this.state.config_table.paging_record)),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:a,paging:n,page_index:1,total_record:s,data_header:i})}},this.reload=(t,e)=>{},this.getData=()=>({total_paging:this.state.total_record}),this.getAdvanced=(t,e)=>this.getData(),this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.abs_getDataLimited=function(t,e){let i={data:this.state.dataFilter.slice(t,t+e)||[],total:this.state.dataFilter.length},o=i.data;if(!0===this.state.hasCheck)for(let n=0;n<o.length;n++)o[n].hasCheck__=!1;let a=1;void 0!==i.total&&(a=i.total);let s=this.buildPaging(a,this.state.config_table);this.setState({data:o,total_record:a,paging:s})},this.recordChangeHandler=t=>{let e=this.state.config_table;e.paging_record=this.state.paging_record[t];let i=this.buildPaging(this.state.total_record,e);this.setState({paging:i,page_index:1,selectedRecordIndex:t,config_table:e},(()=>{this.abs_getDataLimited(0,this.state.paging_record[t])}))},this.abs_PagingActive=t=>{let e=(t-1)*this.state.config_table.paging_record,i=this.state.config_table.paging_record;this.setState({page_index:t},(()=>{this.abs_getDataLimited(e,i)}))},this.getHeaderConfig=t=>{var e;let i=[];return!0===t&&i.push({title:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),void 0!==this.state.data_header&&(i=i.concat(null===(e=this.state.data_header)||void 0===e?void 0:e.map(((t,e)=>{var i,o;return{title:(null===(i=this.state.lang)||void 0===i||null===(o=i[this.state.lang_select])||void 0===o?void 0:o[t.title])||t,id:e,config:{width:"",isFrozen:!1},value_search:this.state.columnSearchValue[e]}})))),i},this.handelClearSearch=()=>{let t=this.state.columnSearchValue;for(const s in t)t[s]="";let e=this.dataGlobal.data,i=e.slice(0,this.state.config_table.paging_record),o=e.length,a=this.buildPaging(o,this.state.config_table);this.setState({data:i,dataFilter:e,paging:a,page_index:1,total_record:o,columnSearchValue:t})},this.getCaptionLang=(t,e,i)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${e}_${i}`]&&(this.CACHE_CDLIST[`${e}_${i}`]=s.ZP.data_cdList(e,i,!0));let o={};for(const s of this.CACHE_CDLIST[`${e}_${i}`]){let t=s.c_cdlist.mcaption||{},e=s.c_cdlist.caption||"";o[s.c_cdlist.cdid]=s.c_cdlist={mcaption:t,caption:e}}const a=o[t]||{};let n=(null===a||void 0===a?void 0:a.mcaption)||{},r=(null===a||void 0===a?void 0:a.caption)||"";return n[s.ZP.getLangKey()]||r},this.handelChangeSearch=(t,e)=>{var i;let o=this.state.columnSearchValue;o[e]=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"";let a=this.dataGlobal.data.filter((t=>{let e=!0;for(const i in o){let a=t[i];!1===String(a).toLowerCase().includes(o[i].toLowerCase())&&(e=!1)}return e})),s=a.slice(0,this.state.config_table.paging_record),n=a.length,r=this.buildPaging(n,this.state.config_table);this.setState({data:s,dataFilter:a,paging:r,page_index:1,total_record:n,columnSearchValue:o})},this.abs_autoCallBackData=()=>{let t=this.state.paging_record;t[this.state.selectedRecordIndex]+=5,this.setState({paging_record:t},(()=>{this.recordChangeHandler(0)}))},this.handleClickTableRow=t=>{},this.handleMoveLeft=t=>{let e=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;e&&t--,i&&t--;let o=t-1,{columns:a}=this.state,s=a.splice(t,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.handleMoveRight=t=>{let e=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;e&&t--,i&&t--;let o=t+1,{columns:a}=this.state,s=a.splice(t,1)[0];a.splice(o,0,s),this.setState({columns:a})};let e=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let t=this.props.config.paging_record.split(",");t.length>1&&(e=t)}let i={paging_record:e[0],query_data:this.props.config.query_data};this.dataGlobal={data:[],total:0};let o={data:[],total:0};void 0===o&&(o={});let a=0;void 0!==o.total&&(a=o.total);let n=this.buildPaging(a,i),r=[];void 0!==o.data&&(r=o.data);let l=[],c=t.default.code.trim();if(void 0!==t.btn_of_grid&&""!==c)for(let s=0;s<t.btn_of_grid.length;s++){c===t.btn_of_grid[s].config.onTable.trim()&&(l[l.length]=t.btn_of_grid[s])}let d=this.props.lang;void 0===d&&(d={}),this.state={dataFilter:this.dataGlobal.data,data_header:[],data:r,lang:d,lang_select:s.ZP.getLangKey(),paging:n,total_record:a,paging_record:e,selectedRecordIndex:0,page_index:1,STT:!1,hasCheck:!1,action:l,config_table:i,CMD:co.getValueCmd(this.props),columnSearchValue:{}}}buildPaging(t,e){let i=[],o=1;if(t>0)for(let a=0;a<t;a+=parseInt(e.paging_record))i[i.length]=o,o++;else i[i.length]=1;return i}pageIndexChange(t){this.setState({page_index:t.target.value}),this.abs_getDataLimited((parseInt(t.target.value)-1)*this.state.config_table.paging_record,this.state.config_table.paging_record)}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config,t.config,this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.property!==t.property&&this.setState({property:this.props.property})}readData(t,e){if(t.includes(".")){let i=[this.state.data_header];i.push.apply(i,this.dataGlobal.data);let o=t.split(".");void 0===e||"true"===e?s.ZP.putData(o[0],o[1],i,this.props.infoA):"false"===e?s.ZP.putDataGB(o[0],o[1],i):s.ZP.putDataGB(o[0],o[1],"")}}checkAll(t){if(this.state.hasCheck){let e=this.state.data;for(let i=0;i<e.length;i++)e[i].hasCheck__=t.target.checked;this.setState({checkAll:t.target.checked,data:e})}}render(){var t,e,i,o,a;let r=this.state.action.length>0,c=this.getHeaderConfig(r);const d=(0,n.RP)("uTable"),h=(0,n.RP)("uTableBodyRow");return"false"===String(this.state.CMD.visible)?null:(0,l.jsx)(d,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,abs_MoveLeft:this.handleMoveLeft,abs_MoveRight:this.handleMoveRight,Header:{data:c,config:{mode:{hasSearch:!0}}},dataEmpty:{isShow:!(null!==(t=this.state)&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{modeTitle:"center",isFrozenHeader:!1,isMoveColumn:"true"===String(null===(i=this.props.config)||void 0===i?void 0:i.isMoveColumn),isResize:"true"===String(null===(o=this.props.config)||void 0===o?void 0:o.isResize)}},uPagination:{config:{show:s.ZP.getLang("cTable_Paging_show"),in:s.ZP.getLang("cTable_Paging_in"),jump_to_page:s.ZP.getLang("cTable_Paging_jump_to_page"),results:s.ZP.getLang("cTable_Paging_results")},mode:{paging_min:"MIN"===(null===(a=this.props.config)||void 0===a?void 0:a.paging_mode)},result_total:this.state.total_record,abs_PagingActive:this.abs_PagingActive,abs_setRecordActive:this.recordChangeHandler,paging_index:this.state.page_index,paging_record:this.state.paging_record.map(((t,e)=>({number:t,selected:e===this.state.selectedRecordIndex})))}},children:this.state.data.map(((t,e)=>(0,l.jsx)(h,{abs_Click:this.handleClickTableRow,children:t.map(((i,o)=>{var a,s,n;let r=T.Z[i.inputtype];return void 0===r&&(r=T.Z.ColumnDefault),(0,l.jsx)(r,{tableContext:this,title_parent:null===(a=this.state.data_header)||void 0===a?void 0:a[o],rowData:t,code_col:i,index_row:e,title:(null===(s=this.state.lang)||void 0===s||null===(n=s[this.state.lang_select])||void 0===n?void 0:n[i])||i,config:{},data:i,value:t},o)}))},e)))})}}const uo=ho,po={},_o={},fo={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class go{}go.get=()=>({main:po,position:_o,cmd:fo}),go.getCmd=()=>fo,go.getValueCmd=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return void 0!==t.infoA.form_code&&(e=s.ZP.role_getComponent(t.infoA.form_code,t.default.codeHidden)||{},e=e.role||{}),e};const mo=go;class vo extends a.Component{constructor(t){var e;super(t),e=this,this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.callDir=()=>this,this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.set=(t,e)=>{if(e[this.state.config_table.query_data]&&Array.isArray(e[this.state.config_table.query_data])){let t=e[this.state.config_table.query_data],i=t[0];t.splice(0,1);let o={data:t||[],total:e.total_item||t.length},a=[],s=0;void 0!==o.total&&(s=o.total);let n=this.buildPaging(s,this.state.config_table);this.dataGlobal=JSON.parse(JSON.stringify(o)),void 0!==o.data&&(a=o.data.slice(0,this.state.config_table.paging_record)),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:a,paging:n,page_index:1,total_record:s,data_header:i})}},this.setData=t=>{if(t[this.state.config_table.query_data]&&Array.isArray(t[this.state.config_table.query_data])){let e=t[this.state.config_table.query_data],i=e[0];e.splice(0,1);let o={data:e||[],total:t.total_item||e.length},a=[],s=0;void 0!==o.total&&(s=o.total);let n=this.buildPaging(s,this.state.config_table);this.dataGlobal=JSON.parse(JSON.stringify(o)),void 0!==o.data&&(a=o.data.slice(0,this.state.config_table.paging_record)),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:a,paging:n,total_record:s,data_header:i})}},this.reload=(t,e)=>{},this.getData=()=>({total_paging:this.state.total_record}),this.getAdvanced=(t,e)=>this.getData(),this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.abs_getDataLimited=function(t,e){let i={data:this.state.dataFilter.slice(t,t+e)||[],total:this.state.dataFilter.length},o=i.data;if(!0===this.state.hasCheck)for(let n=0;n<o.length;n++)o[n].hasCheck__=!1;let a=1;void 0!==i.total&&(a=i.total);let s=this.buildPaging(a,this.state.config_table);this.setState({data:o,total_record:a,paging:s})},this.buildDataPaging=t=>({pagingIndex:t?1:this.page_index,recordItem:this.state.paging_record.find(((t,e)=>e===this.state.selectedRecordIndex))}),this.recordChangeHandler=t=>{let e=this.state.config_table;e.paging_record=this.state.paging_record[t];let i=this.buildPaging(this.state.total_record,e);this.page_index=1,this.setState({paging:i,page_index:1,selectedRecordIndex:t,config_table:e},(()=>{this.callAPI(this.props.config.bo_txcode,this.props.config.bo_input,this.buildDataPaging()).then((t=>{this.setData(t)}))}))},this.abs_PagingActive=t=>{this.page_index=t,this.setState({page_index:t},(()=>{this.callAPI(this.props.config.bo_txcode,this.props.config.bo_input,this.buildDataPaging()).then((t=>{this.setData(t)}))}))},this.callAPI=function(t,i,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"data_api";""!==t&&void 0!==t||(t="bo-load-dataArray");var r=[{txcode:t,input:JSON.parse(i)}];let l={},c=s.ZP.getFormAppAuto(e.props.infoA.key_form);return void 0!==c&&(c.setLoadingAction(!0),l=c.getData("")),l&&o?o=Object.assign(l,o):o||(o=l),r[0].input=Object.assign(r[0].input,o),(0,S.Yr)(r,a).then((t=>{var e=s.ZP.foGetData("infoError",t);if(void 0!==e)return{infoError:e};var i=s.ZP.foGetData(n,t);return i||(i=[]),i})).finally((t=>{c.setLoadingAction(!1)}))},this.getHeaderConfig=t=>{var e;let i=[];return!0===t&&i.push({title:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),void 0!==this.state.data_header&&(i=i.concat(null===(e=this.state.data_header)||void 0===e?void 0:e.map(((t,e)=>{var i,o;return{title:(null===(i=this.state.lang)||void 0===i||null===(o=i[this.state.lang_select])||void 0===o?void 0:o[t.title])||t,id:e,config:{width:"",isFrozen:!1},value_search:this.state.columnSearchValue[e]}})))),i},this.handelClearSearch=()=>{let t=this.state.columnSearchValue;for(const s in t)t[s]="";let e=this.dataGlobal.data,i=e.slice(0,this.state.config_table.paging_record),o=e.length,a=this.buildPaging(o,this.state.config_table);this.setState({data:i,dataFilter:e,paging:a,page_index:1,total_record:o,columnSearchValue:t})},this.getCaptionLang=(t,e,i)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${e}_${i}`]&&(this.CACHE_CDLIST[`${e}_${i}`]=s.ZP.data_cdList(e,i,!0));let o={};for(const s of this.CACHE_CDLIST[`${e}_${i}`]){let t=s.c_cdlist.mcaption||{},e=s.c_cdlist.caption||"";o[s.c_cdlist.cdid]=s.c_cdlist={mcaption:t,caption:e}}const a=o[t]||{};let n=(null===a||void 0===a?void 0:a.mcaption)||{},r=(null===a||void 0===a?void 0:a.caption)||"";return n[s.ZP.getLangKey()]||r},this.handelChangeSearch=(t,e)=>{var i;let o=this.state.columnSearchValue;o[e]=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"";let a=this.dataGlobal.data.filter((t=>{let e=!0;for(const i in o){let a=t[i];!1===String(a).toLowerCase().includes(o[i].toLowerCase())&&(e=!1)}return e})),s=a.slice(0,this.state.config_table.paging_record),n=a.length,r=this.buildPaging(n,this.state.config_table);this.setState({data:s,dataFilter:a,paging:r,page_index:1,total_record:n,columnSearchValue:o})},this.abs_autoCallBackData=()=>{let t=this.state.paging_record;t[this.state.selectedRecordIndex]+=5,this.setState({paging_record:t},(()=>{this.recordChangeHandler(0)}))},this.handleClickTableRow=t=>{},this.handleMoveLeft=t=>{let e=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;e&&t--,i&&t--;let o=t-1,{columns:a}=this.state,s=a.splice(t,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.handleMoveRight=t=>{let e=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;e&&t--,i&&t--;let o=t+1,{columns:a}=this.state,s=a.splice(t,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.page_index=1;let i=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let t=this.props.config.paging_record.split(",");t.length>1&&(i=t)}let o={paging_record:i[0],query_data:this.props.config.query_data};this.dataGlobal={data:[],total:0};let a={data:[],total:0};void 0===a&&(a={});let n=0;void 0!==a.total&&(n=a.total);let r=this.buildPaging(n,o),l=[];void 0!==a.data&&(l=a.data);let c=[],d=t.default.code.trim();if(void 0!==t.btn_of_grid&&""!==d)for(let s=0;s<t.btn_of_grid.length;s++){d===t.btn_of_grid[s].config.onTable.trim()&&(c[c.length]=t.btn_of_grid[s])}let h=this.props.lang;void 0===h&&(h={}),this.state={dataFilter:this.dataGlobal.data,data_header:[],data:l,lang:h,lang_select:s.ZP.getLangKey(),paging:r,total_record:n,paging_record:i,selectedRecordIndex:0,page_index:1,STT:!1,hasCheck:!1,action:c,config_table:o,CMD:mo.getValueCmd(this.props),columnSearchValue:{}}}buildPaging(t,e){let i=[],o=1;if(t>0)for(let a=0;a<t;a+=parseInt(e.paging_record))i[i.length]=o,o++;else i[i.length]=1;return i}pageIndexChange(t){this.setState({page_index:t.target.value}),this.abs_getDataLimited((parseInt(t.target.value)-1)*this.state.config_table.paging_record,this.state.config_table.paging_record)}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config,t.config,this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.property!==t.property&&this.setState({property:this.props.property})}readData(t,e){if(t.includes(".")){let i=[this.state.data_header];i.push.apply(i,this.dataGlobal.data);let o=t.split(".");void 0===e||"true"===e?(s.ZP.putData(o[0],o[1],i,this.props.infoA),s.ZP.putData("table_dynamic_search","paging",this.buildDataPaging(!0),this.props.infoA)):"false"===e?(s.ZP.putDataGB(o[0],o[1],i),s.ZP.putData("table_dynamic_search","paging",this.buildDataPaging(!0))):(s.ZP.putDataGB(o[0],o[1],""),s.ZP.putData("table_dynamic_search","paging",this.buildDataPaging(!0)))}}checkAll(t){if(this.state.hasCheck){let e=this.state.data;for(let i=0;i<e.length;i++)e[i].hasCheck__=t.target.checked;this.setState({checkAll:t.target.checked,data:e})}}render(){var t,e,i,o,a;let r=this.state.action.length>0,c=this.getHeaderConfig(r);const d=(0,n.RP)("uTable"),h=(0,n.RP)("uTableBodyRow");return"false"===String(this.state.CMD.visible)?null:(0,l.jsx)(d,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,abs_MoveLeft:this.handleMoveLeft,abs_MoveRight:this.handleMoveRight,Header:{data:c,config:{mode:{hasSearch:!1}}},dataEmpty:{isShow:!(null!==(t=this.state)&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{modeTitle:"center",isFrozenHeader:!1,isMoveColumn:"true"===String(null===(i=this.props.config)||void 0===i?void 0:i.isMoveColumn),isResize:"true"===String(null===(o=this.props.config)||void 0===o?void 0:o.isResize)}},uPagination:{config:{show:s.ZP.getLang("cTable_Paging_show"),in:s.ZP.getLang("cTable_Paging_in"),jump_to_page:s.ZP.getLang("cTable_Paging_jump_to_page"),results:s.ZP.getLang("cTable_Paging_results")},mode:{paging_min:"MIN"===(null===(a=this.props.config)||void 0===a?void 0:a.paging_mode)},result_total:this.state.total_record,abs_PagingActive:this.abs_PagingActive,abs_setRecordActive:this.recordChangeHandler,paging_index:this.state.page_index,paging_record:this.state.paging_record.map(((t,e)=>({number:t,selected:e===this.state.selectedRecordIndex})))}},children:this.state.data.map(((t,e)=>(0,l.jsx)(h,{abs_Click:this.handleClickTableRow,children:t.map(((i,o)=>{var a,s,n;let r=T.Z[i.inputtype];return void 0===r&&(r=T.Z.ColumnDefault),(0,l.jsx)(r,{tableContext:this,title_parent:null===(a=this.state.data_header)||void 0===a?void 0:a[o],rowData:t,code_col:i,index_row:e,title:(null===(s=this.state.lang)||void 0===s||null===(n=s[this.state.lang_select])||void 0===n?void 0:n[i])||i,config:{},data:i,value:t},o)}))},e)))})}}const bo=vo,yo=(t,e,i)=>{e=e.replace("_","0");let o=(0,Q.w5)(e,t,i);return(0,Q.sx)(o,t,i)},Ao={a:/[a-zA-Z]/,9:/\d/,h:/\d/,H:/\d/,m:/\d/,s:/\d/,"*":/./,_:/[a-zA-Z\d]/,L:/[a-zA-Z\d]/,".":/./,0:/\d/,z:/[a-zA-Z]/,Z:/[a-zA-Z ]/,A:/[A-Za-z0-9\\_]/},Do={"#":"_","/":"/"},ko={0:{status:!0,reg_remove:/[^\d/]/g},L:{status:!0,reg_remove:/[^a-zA-Z\d]/g},z:{status:!0,reg_remove:/[^a-zA-Z]/g},Z:{status:!0,reg_remove:/[^a-zA-Z ]/g},".":{status:!0,reg_remove:""},A:{status:!0,reg_remove:/[^A-Za-z0-9\\_]/g}},Oo={EMAIL:{regex_validate:/^[\w-.]+@([\w-]+.)+[\w-]{2,4}$/,regex_lang:"jMaskInput_WrongFormat"},EMAIL_MULTI:{regex_validate:/^[\w-.]+@([\w-]+.)+[\w-]{2,4}$/,regex_lang:"jMaskInput_WrongFormat",isMulti:!0}},wo={"-":".{100}",EMAIL:".{100}",EMAIL_MULTI:".{500}"},Co=t=>Do[t],xo=t=>Ao[t],So=t=>{let e=t[0];return ko[e]},Mo=t=>{var e,i;if(!t)return!1;let o=t[0];if(!0!==(null===(e=ko[o])||void 0===e?void 0:e.status))return!1;let a=!0;for(const s of t)t[0]!==s&&(a=!1);return!0===(null===(i=So(o))||void 0===i?void 0:i.status)&&a},Po=(t,e)=>{let i=[];const o=/(\\.|.)/g;let a;for(;null!==(a=o.exec(t));){a.index===o.lastIndex&&o.lastIndex++;const t=a[0],s=1===t.length?"regex":"const";let n={type:s,key:t};"regex"===s?xo(t)?"date"===e&&/[^/:]/.test(t)?(n.reg=xo("9"),n.value=t):(n.reg=xo(t),n.value="_"):"date"===e&&/[^/:]/.test(t)?(n.reg=xo("9"),n.value=t):Co(t)?(n.value=Co(t),n.type="static"):(n.value=t,n.type="const"):n.value=t[1],i.push(n)}return i},To=(t,e)=>{let i="";for(const o of t)i+="date"===e?o.key:o.value;return i},Io=(t,e)=>{let i="";for(const o of t)i+=o.key.includes("\\")?o.value:o.key;return i},Fo=t=>{let e=/\${([^}]+)}/gm.exec(t);if(null!==e)try{let i=s.ZP.context_get(e[1])||"";t=t.replace(e[0],i)}catch(i){}return t},No=(t,e,i,o,a,s)=>{if(!t||!e||!i)return"";let n="";if(!t)return"";switch(i){case"default":for(const o in e){let i=t[o];if("regex"===e[o].type){if(!1===e[o].reg.test(i))return"";n+=i}else"static"===e[o].type&&(n+=i)}break;case"date":let i=To(e);if("string"===o)n=a&&""!==a?(0,Q.Al)(t,i,a,s):(0,Q.w5)(t,i,s);else n=(0,Q.w5)(t,i,s);break;default:n=t}return n||0===n?n:""},Lo=(t,e,i,o,a)=>{if(!t&&0!==t||!e||!i)return"";let s="";const n=Io(e);switch(i){case"default":let i=0;for(const a in e)if("regex"===e[a].type)if(Mo(n))s+=t[i]||"",i++;else{if(t[i]&&e[a].reg.test(t[i]))s+=t[i];else{if("OPTIMISTIC"!==o)return"";s+=e[a].value}i++}else"static"===e[a].type?(s+=e[a].value,e[a].value===t[i]&&i++):s+=e[a].value;break;case"date":let r=To(e);s=(0,Q.sx)(t,r,a);break;default:s=t}return s||""},Eo=(t,e,i,o,a,s,n)=>{let r=No(t,e,i,a,s,n);return null!==o&&void 0!==o&&o.length?Lo(r,o,i):r},jo=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,n=t;return null!==o&&void 0!==o&&o.length&&(n=No(t,o,i,s)),Lo(n,e,i,a,s)},Zo=()=>["SUN","MON","TUE","WED","THU","FRI","SAT"].map(((t,e)=>({title:t,type:"gray"}))),Ro=t=>{t||(t=window.moment.utc().toDate().getMonth()+1);return["January","February","March","April","May","June","July","August","September","October","November","December"].map(((e,i)=>({title:e,selected:t-1===i})))},Qo=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1900,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2100,i=[];if(t<=e)for(let o=t;o<=e;o++)i.push(o);return i},zo=t=>{let e=window.moment.utc(t).toDate().getMonth()+1,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];(t=>t%400===0||t%100!==0&&t%4===0)(window.moment.utc(t).toDate().getFullYear())&&i[2]++;let o=[];for(let a=1;a<=i[e];a++)o.push(a);return o},Uo=(t,e)=>{t||(t=Date.parse(window.moment.utc().toDate()));let i=window.moment.utc(t).toDate(),o=window.moment.utc((0,_t.X7)(t,{M:-1})).toDate(),a=window.moment.utc((0,_t.X7)(t,{M:1})).toDate(),s=Date.parse(o),n=Date.parse(a),r=zo(s),l=zo(t),c=zo(n),d=window.moment.utc([i.getFullYear(),i.getMonth(),1]).toDate(),h=window.moment.utc([i.getFullYear(),i.getMonth(),l.length]).toDate(),u=r.slice(r.length-d.getDay(),r.length),p=c.slice(0,6-h.getDay()),_=u.map((t=>{let e=String(t),a="gray",n=window.moment.utc(new Date(s).setDate(t)).valueOf();return t===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()&&(a="primary"),{title:e,type:a,value:n}})),f=l.map((e=>{let o=String(e),a="",s=window.moment.utc(new Date(t).setDate(e)).valueOf();return e===i.getDate()&&(a="primary"),{title:o,type:a,value:s}})),g=p.map((t=>{let e=String(t),o="gray",s=window.moment.utc(new Date(n).setDate(t)).valueOf();return t===i.getDate()&&a.getMonth()===i.getMonth()&&a.getFullYear()===i.getFullYear()&&(o="primary"),{title:e,type:o,value:s}})),m=_.concat(f);return m=m.concat(g),m},Bo={structable:"",structable_read:"",data_default:"",data_type:"edit",component_title:"",mask_format:"",mask_data_format:"",value_type:"all",auto_delete:"true",mask_mode:"default",content_style:"",format_value_type_string:"",min_year:"",max_year:""};const Yo=class{constructor(t,e,i){this.getProperty=()=>this.property,this.setCMD=t=>{void 0!==t.visible&&("true"!==t.visible&&"false"!==t.visible||(this.property.cmd.visible=t.visible)),void 0!==t.disabled&&("true"!==t.disabled&&"false"!==t.disabled||(this.property.cmd.disabled=t.disabled)),void 0!==t.block&&("true"!==t.block&&"false"!==t.block||(this.property.cmd.block=t.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=t=>{this.property.cmd.visible=t},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=t=>{this.property.cmd.disabled=t},this.getCMD_enable=()=>this.property.cmd.disabled,this.combinePrevConfig=t=>{let e=t||this.property.config,i=(0,o.Z)({},Bo);for(let o in i)e[o]&&(""!==e[o]&&""===e[o]||(i[o]=e[o]));return i||{}},this.getDefault=()=>this.property.default,this.property={inputType:t,config:i,default:e,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class Ho extends a.Component{constructor(t){var e;super(t),e=this,this.getComponentContructor=(t,e)=>{let i=this.buildPropsSmooth(e);return{props_smooth:i,state_smooth:this.buildStateSmooth(i)}},this.buildPropsSmooth=t=>{let e=s.ZP.cloneJson(t);if(e.config=this.propertyConstructor.combinePrevConfig(t.config),"date"===e.config.mask_mode&&void 0!==this.dateFormat){let t=e.config.mask_format.split(" ");if(t.length>=1){let s="";for(let e=0;e<t.length;e++){var i,o,a;null!==(i=t[e])&&void 0!==i&&i.includes("DD")&&null!==(o=t[e])&&void 0!==o&&o.includes("MM")&&null!==(a=t[e])&&void 0!==a&&a.includes("YY")?s+=""===s?this.dateFormat:" "+this.dateFormat:s+=""===s?t[e]:" "+t[e]}e.config.mask_format=s}else e.config.mask_format=this.dateFormat}else String(e.config.mask_format).startsWith("$")&&String(e.config.mask_format).endsWith("$")&&(e.config.mask_format=s.ZP.getParameterSystem(e.config.mask_format.replace(/\$/g,"")));var n;e.config.const_mask_format=e.config.mask_format,e.config.mask_format=(n=e.config.mask_format,wo[n]||n),e.config.mask_format=(t=>{for(const e in Ao){let i,o=new RegExp(`\\${e}{(\\d+)}`,"g");for(;null!==(i=o.exec(t));){i.index===o.lastIndex&&o.lastIndex++;let a="";for(let t=0;t<Number(i[1]);t++)a+=e;t=t.replace(i[0],a)}}return t})(e.config.mask_format);let r="";""!==e.config.data_default&&(r=Fo(e.config.data_default),r=Number(r)||"string"!==e.config.value_type||-1!==r.indexOf("libDate_cal")?((t,e)=>{let i=t,o=/libDate_cal\((.*),(.*)\)/gm.exec(i);if(null!==o)try{i=(0,_t.X7)((0,Q.xY)(o[1]),JSON.parse(o[2]))}catch(n){}let a=/JF_DATE\.([^(]+)\(([^)]*)\)/gm.exec(i);if(null!==a)try{t=s.ZP.persist_convertCondition(t);let e=a[1],o=a[2].split(",");i=_t.ZP[e].apply(null,o)}catch(n){}return i})(r,e.config.format_value_type_string):Q.cI(r,e.config.format_value_type_string)),void 0!==r&&null!==r||(r="");let l=2100,c=1900;if("date"===this.propertyConstructor.property.config.mask_mode){let t=Fo(e.config.max_year),i=Fo(e.config.min_year);(t||0===t)&&(l=Number(t)?new Date(Number(t)).getFullYear():new Date(t).getFullYear()),(i||0===i)&&(c=Number(i)?new Date(Number(i)).getFullYear():new Date(i).getFullYear())}return e.config.data_default=r,e.config.max_year=l,e.config.min_year=c,e},this.buildStateSmooth=t=>{let e=t.config,i=Po(e.mask_format,e.mask_mode),o=Po(e.mask_data_format,e.mask_mode),a=To(i,e.mask_mode),n=e.mask_mode,r={status:!1,reg_remove:""};if(Mo(e.mask_format)){let t=So(e.mask_format);void 0!==t&&(r.status=t.status,r.reg_remove=t.reg_remove)}let l=a,c=Date.parse(new Date),d={mounth_data:Ro(),year_data:Qo(t.config.min_year,t.config.max_year),day_data:Zo(),day_of_mounth_data:Uo(c,c),date_view:c};return{isLookup:"true"===this.props.config.isLookup,error_input:!1,lang_select:s.ZP.getLangKey(),component_title:this.props.default.name||"",CMD:this.propertyConstructor.getCMD(),format_value_type_string:t.config.format_value_type_string,value:"",mask_value:"",date_selected_cache:0,content_style:t.config.content_style,value_type:t.config.value_type,mask_mode:n,mask_format:l,mask_regs:i,mask_regs_to:o,mask_placeholder:a,free_style:r,date_picker:d,max_year:t.config.max_year,min_year:t.config.min_year,validate:t.validate,hasSuggest:"true"===t.config.hasSuggest,keyLoadCache:t.config.keyLoadCache,moreInformation_key:t.config.moreInformation_key,PK_key:t.config.PK_key}},this.getInfoErrror=()=>{var t;let{help_mess:e}=this.state;return e?(this.setState({hasErrorInForm:!0}),{info:this.getErrorLang(this.state.help_mess),key:(null===(t=this.state.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props_smooth.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}):""},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.getDataOOP=(t,e)=>this.data_select,this.getAdvanced=(t,e)=>{let{format_value_type_string:i}=this.state;return this.maskInputGet(i)},this.setAdvanced=(t,e)=>{if(t.codeHidden){if(t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(void 0!==this.props.config.data_view)var i="";void 0!==this.props.config.data_value&&(i=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),"date"===this.state.mask_mode&&(i=Q.xY(i)),this.maskInputSet(i,"enter_tab",void 0,void 0,void 0,!0)}}else t.list_component&&(null!==e&&void 0!==e||(e=""),"date"===this.state.mask_mode&&(e=Q.xY(e)),this.maskInputSet(e,"on_change",void 0,void 0,void 0,!0))},this.setGetInfo=(t,e)=>{if(e=e[this.props.default.code],t.codeHidden){if(t.codeHidden===this.props.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(void 0!==this.props.config.data_view)var i="";void 0!==this.props.config.data_value&&(i=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),"date"===this.state.mask_mode&&(i=Q.xY(i)),this.maskInputSet(i,"enter_tab",void 0,void 0,void 0,!0)}}else t.list_component&&(null!==e&&void 0!==e||(e=""),"date"===this.state.mask_mode&&(e=Q.xY(e)),this.maskInputSet(e,"on_change",void 0,void 0,void 0,!0))},this.get=(t,e)=>{let i=this.props_smooth.config.structable.split("|");for(const o of i)this.readData(o,t.inform)},this.runRule=t=>{if(t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,t)}},this.set=(t,e)=>{var i;let o=this.props_smooth.config.structable_read,{mask_mode:a}=this.state,s=o.split("."),n=null===e||void 0===e||null===(i=e[s[0]])||void 0===i?void 0:i[s[1]];void 0!==n||this.props_smooth.config.structable_read||(n=this.props_smooth.config.data_default),void 0!==n&&(null==n&&(n=""),"date"===a&&(n=Q.xY(n)),this.maskInputSet(n,"on_change",void 0,void 0,void 0,!0))},this.reload=(t,e)=>{let i=this.props_smooth.config;this.data_select={},this.maskInputSet(i.data_default,"reload",void 0,void 0,"OPTIMISTIC")},this.setDataDefault=()=>{let t=this.props_smooth.config;this.data_select={},this.maskInputSet(t.data_default,void 0,void 0,void 0,"OPTIMISTIC")},this.checkValidate=()=>{let t=this.maskInputGet(),e=new Date(t).getFullYear(),i="",{min_year:o,max_year:a,mask_mode:n}=this.state;if(this.state.validate.request&&!t&&(i="validateRequest",this.state.mask_value&&0!==t&&(i="jMaskInput_WrongFormat")),"date"===n&&(o>e&&""!==this.props_smooth.config.min_year&&(i="jDate_Min"),a<e&&""!==this.props_smooth.config.max_year&&(i="jDate_Max")),i||(i=this.maskInputValidate()),i){var r=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==r&&r.setFormValidateFromComponent(!0,this.props.default)}return this.state.help_mess=i,this.setState({help_mess:i}),!!i},this.setMaskConfig=(t,e)=>{let i=this.props_smooth;i.config.mask_format=e.mask_format,i.config.mask_data_format=e.mask_data_format,i.config.mask_mode=e.mask_mode,this.props_smooth=this.buildPropsSmooth(i);let o=this.buildStateSmooth(this.props_smooth),{mask_format:a,mask_mode:s,mask_reg:n,mask_regs:r,mask_regs_to:l,mask_placeholder:c,mask_value:d,free_style:h,date_picker:u,validate:p}=o;this.setState({validate:p,mask_format:a,mask_mode:s,mask_reg:n,mask_regs:r,mask_regs_to:l,mask_placeholder:c,mask_value:d,free_style:h,date_picker:u})},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()},(()=>{this.onBlur()}))},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.setCallFormBack=(t,e)=>{if(void 0!==t.key&&void 0!==t.key_form){let e=t.key.split(";");this[e[0]]=t.key_form,e[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setCallBuildFormBack=(t,e)=>{if(void 0!==t.key&&void 0!==t.key_form){let e=t.key.split(";");this[e[0]]=t.key_form,e[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.modalToggle=t=>{t||this.buildFormChild(),!0!==this.state.CMD.disabled&&(void 0===t?this.setState({show_modal:s.ZP.autoID()}):t&&(this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})))},this.clearError=()=>{this.setState({help_mess:""})},this.maskInputSet=(t,e,i,o,a,s)=>{let n,{mask_regs:r,mask_regs_to:l,mask_mode:c,mask_mode_time:d,max_year:h,min_year:u,mask_value:p}=this.state,_={end_pos:0,start_pos:0,help_mess:"",mask_value:"",value:t},f=Io(r,this.props_smooth.config.mask_mode);"date"===c?(_.date_picker=((t,e,i)=>{t=t?new Date(t):window.moment.utc().toDate();const o=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));return{mounth_data:Ro(o.getMonth()+1),year_data:Qo(e,i),day_data:Zo(),day_of_mounth_data:Uo(o.getTime()),date_view:t}})(t,u,h),n=jo(t,r,c,[],"",d)):f.includes("HH:mm")?t?(n=yo(f,p,d),"Invalid date"===n&&(n=this.state.mask_value)):n="":n=jo(t,r,c,l,a),_.mask_value=n,_=Object.assign(_,o),this.setState(_,(()=>{this.runRule(e),i&&i()}))},this.maskInputGet=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{mask_regs:i,mask_regs_to:o,mask_value:a,mask_mode:s,value_type:n,mask_mode_time:r}=e.state,l="";if(e.state.free_style.status)return a;let c=Io(e.state.mask_regs,e.props_smooth.config.mask_mode);if("date"===s)l=Eo(a,i,s,[],n,t,r);else if(c.includes("HH:mm")){let t=yo(c,a,r);"Invalid date"===t&&(t=e.state.mask_value),l=t}else l=Eo(a,i,s,o);return l},this.maskInputClear=()=>{this.data_select={},this.setState({end_pos:0,start_pos:0,value:"",mask_value:"",help_mess:""},(()=>{}))},this.maskInputValidate=()=>{let{mask_value:t}=this.state,e="",i=this.maskInputGet(),o=(a=this.props_smooth.config.const_mask_format,Oo[a]);var a;if(e=t&&!i&&0!==i?"jMaskInput_WrongFormat":function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[{title:"@VALUE",value:arguments.length>1?arguments[1]:void 0},{title:"@NOW",value:Date.parse(new Date)},{title:"@YEAR",value:31536e6.toString()},{title:"@MOUNTH",value:2592e6.toString()},{title:"@DAY",value:864e5.toString()},{title:"@HOURS",value:36e5.toString()},{title:"@MINUTE",value:6e4.toString()},{title:"@SECONDS",value:1e3.toString()}];for(const i of t){let{content:t,mess:o}=i;for(const i of e)t=t.replace(new RegExp(i.title,"g"),i.value);if(!1===s.ZP.checkDynamicConditionNoData(t))return o}return""}(this.props_smooth.validate.conditions,i),o&&t){let i=o.regex_validate;if(o.isMulti){let o=t.split(",");for(let t=0;t<o.length;t++){const a=o[t];if(!i.test(a)){e="jMaskInput_WrongFormat";break}}}else i.test(t)||(e="jMaskInput_WrongFormat")}return e},this.abs_calendar_changeMonth=t=>{let{format_value_type_string:e}=this.state,i=this.maskInputGet()||Date.parse(new Date),o=(0,_t.X7)(i,{M:t},"string"===this.state.value_type?this.state.format_value_type_string:this.state.mask_format,"string"===this.state.value_type);this.maskInputSet(o,void 0,void 0,void 0,void 0,!0)},this.abs_calendar_submit=t=>{let e=this.state.date_picker.day_of_mounth_data[t].value;this.maskInputSet(e,"enter_tab",void 0,void 0,void 0,!0),this.setState({isOpenCalender:!1})},this.abs_calendar_chooseYear=t=>{let{format_value_type_string:e}=this.state,i=this.maskInputGet()||Date.parse(new Date),o=new Date(i).setFullYear(t);this.maskInputSet(o,void 0,void 0,void 0,void 0,!0)},this.abs_calendar_changeYear=t=>{},this.abs_calendar_chooseMonth=t=>{let e=t,{format_value_type_string:i}=this.state,o=this.maskInputGet()||Date.parse(new Date),a=new Date(o).setMonth(e);this.maskInputSet(a,void 0,void 0,void 0,void 0,!0)},this.abs_calendar_openCalendar=t=>{let{format_value_type_string:e}=this.state,i=this.maskInputGet();i&&this.maskInputSet(i,"","",{date_selected_cache:i},void 0,!0),this.setState({isOpenCalender:t})},this.abs_calendar_KeyUp=t=>{let e,{isOpenCalender:i}=this.state,o=this.maskInputGet()||Date.parse(new Date),a=this.state.date_selected_cache;if(i)switch(t.key){case"ArrowLeft":i&&(e=(0,_t.X7)(o,{d:-1}),this.maskInputSet(e,void 0,void 0,void 0,void 0,!0));break;case"ArrowRight":i&&(e=(0,_t.X7)(o,{d:1}),this.maskInputSet(e,void 0,void 0,void 0,void 0,!0));break;case"ArrowUp":e=(0,_t.X7)(o,{d:-7}),this.maskInputSet(e,void 0,void 0,void 0,void 0,!0);break;case"ArrowDown":e=(0,_t.X7)(o,{d:7}),this.maskInputSet(e,void 0,void 0,void 0,void 0,!0);break;case"Enter":e=o,this.maskInputSet(e,void 0,void 0,void 0,void 0,!0),this.ref_maskinput.current.abs_CloseCalendar(),this.setState({isOpenCalender:!1});break;case"Escape":Number(a)!==Number(this.maskInputGet())&&a!==this.maskInputGet()?i&&this.maskInputSet(a,void 0,void 0,void 0,void 0,!0):(this.ref_maskinput.current.abs_CloseCalendar(),this.setState({isOpenCalender:!1}))}else switch(t.key){case"ArrowDown":e=(0,_t.X7)(o,{d:-1}),this.maskInputSet(e,void 0,void 0,void 0,void 0,!0);break;case"ArrowUp":e=(0,_t.X7)(o,{d:1}),this.maskInputSet(e,void 0,void 0,void 0,void 0,!0)}},this.abs_calendar_today=()=>{this.maskInputSet(Date.parse(new Date),"enter_tab")},this.componentDidUpdate=(t,e)=>{},this.onEventKey=t=>{if("Delete"===t.key)this.maskInputClear()},this.onClick=t=>{this.clearError()},this.onBlur=()=>{let t=this.state.mask_mode;if(this.setState({isOpenCalender:!1}),"date"===t){let t=this.maskInputGet();this.maskInputSet(t,"",(()=>{if(!1===this.checkValidate()){this.runRule("enter_tab");let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(t.buildValidateForm(!1),t.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.buildValidateForm(!1)}}))}}))}else if(!1===this.checkValidate()){this.runRule("enter_tab");let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(t.buildValidateForm(!1),t.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.buildValidateForm(!1)}}))}},this.setLastPost=t=>{let e=t.target;this.state.start_pos=e.selectionStart,this.state.end_pos=e.selectionEnd},this.setPos=(t,e)=>{t.selectionStart=e,t.selectionEnd=e},this.onChangeMaskInput=t=>{let{start_pos:e,mask_value:i,mask_regs:o,mask_placeholder:a,content_style:s,mask_mode:n,mask_mode_time:r}=this.state,l=t.target,c=l.selectionStart,d=l.value||"";"UPPER"===s&&(d=d.toLocaleUpperCase());let h=this.state.free_style;if(h.status)return d=d.replace(h.reg_remove,""),d=d.slice(0,o.length),void this.setState({mask_value:d});let u=d.slice(e,c)||"",p=0,_="",f=d.slice(0,c);for(let m=c;m<a.length;m++)m<c+(a.length-d.length)?f+=a[m]:f+=i[m]||a[m];i=f;for(const m in o){let t=o[m];"regex"===t.type||"const"===t.type&&t.value===u[p]||"static"===t.type&&t.value===u[p]?e<=m&&p<u.length?("static"===t.type&&t.value===u[p]||"const"===t.type&&t.value===u[p]||t.reg.test(u[p])?_+=u[p]||t.value:(_+=t.value,c--),p++):_+=i[m]||a[m]:(_+=t.value,e<=m&&p<u.length&&c++)}_===a&&(_="");let g=Io(this.state.mask_regs,this.props_smooth.config.mask_mode);if(g.includes("HH:mm")){let t=yo(g,_,r);"Invalid date"===t&&(t=this.state.mask_value),_=t}this.setState({mask_value:_,value:"date"===n?Q.w5(_,g,r):""},(()=>{this.setPos(l,c);let{mask_format:t,hasSuggest:e,keyLoadCache:i,mask_value:o,mask_regs:a}=this.state;"date"!==t&&e&&""!==i&&(0,S.SQ)(i+function(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t||!e||!i)return"";let a="";if(!t)return"";switch(i){case"default":for(const i in e){let s=t[i];"regex"===e[i].type?!1===e[i].reg.test(s)?a+=" ":a+=s:("static"===e[i].type||"const"===e[i].type&&o)&&(a+=s)}break;case"date":break;default:a=t}return a||0===a?a:""}(o,a,n,!1).replace(" ","")).then((t=>{this.setState({list_suggest:t})})).catch((t=>{console.log("reason",t.split("\n")[0]),this.setState({list_suggest:[]})}))}))},this.setValidate=(t,e)=>{let{validate:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),e);i.request!==o.request&&this.setState({validate:o})},this.abs_ChooseSuggest=t=>{this.maskInputSet(t.value)},this.getErrorLang=t=>{switch(t){case"validateNumMin":return s.ZP.getLang(t).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(t).replace("{count}",this.state.validate.max);case"jDate_Min":return s.ZP.getLang(t).replace("{count}",this.state.min_year);case"jDate_Max":return s.ZP.getLang(t).replace("{count}",this.state.max_year);default:return s.ZP.getLang(t)}},this.renderThisComponent=()=>{let t=this.state.mask_mode;const e=(0,n.RP)("date"===t?"uDate":"uInput");if("true"===String(this.props.config.isLabel)){const t=(0,n.RP)("uLabel");return(0,l.jsx)(t,{dataFull:{config:{default:{title:this.state.mask_value||"",class:this.props_smooth.default.class},cmd:{visible:"true"===String(this.state.CMD.visible)}}}})}return(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChangeMaskInput,abs_Blur:this.onBlur,abs_Click:this.onClick,abs_KeyDown:this.setLastPost,abs_KeyUp:this.onEventKey,abs_MouseUp:this.setLastPost}),ref:this.ref_maskinput})},this.abs_CloseModal=()=>{this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})},this.propertyConstructor=new Yo(t.inputType,t.default,t.config),this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT"),this.component_code=s.ZP.autoID(),this.data_debug={},this.app_debug=[];let i="time_zone_c";"date"===this.propertyConstructor.property.config.mask_mode&&this.propertyConstructor.property.config.mask_mode_time&&(i=this.propertyConstructor.property.config.mask_mode_time),this.renderFormChildDone=!1,this.state={is_lookup:!1,is_error:!1,is_clicked:!1,lang:this.props.lang,help_mess:"",lang_select:"",title:"",CMD:{},format_value_type_string:"",end_pos:-1,start_pos:0,_type:"",value:"",mask_mode_time:i,mask_value:"",mask_format:"",mask_placeholder:"",mask_mode:"default",mask_regs:[],mask_regs_to:[],content_style:"",value_type:"long",free_style:{status:!1,reg_remove:""},date_picker:{mounth_data:[],year_data:[],day_data:[],day_of_mounth_data:[],date_view:Date.parse(new Date)},date_selected_cache:0,renderFormChildDone:!1,id_component:s.ZP.autoID(),isOpenCalender:!1,hasErrorInForm:!1,hasSuggest:!1,keyLoadCache:"",PK_key:"",moreInformation_key:"",list_suggest:[]},this.ref_maskinput=a.createRef();const r=this.getComponentContructor({},t);this.state=Object.assign(this.state,r.state_smooth),this.props_smooth=r.props_smooth}readData(t,e){let i=t.split(".");if(2!==i.length)return;let{format_value_type_string:o}=this.state,a=this.maskInputGet(o);switch(e){case void 0:case"true":s.ZP.putData(i[0],i[1],a,this.props.infoA);break;case"false":s.ZP.putDataGB(i[0],i[1]);break;default:s.ZP.putDataGB(i[0],i[1],"")}}openDetail(){let t=this.props.config.callform_detail;if(t){var e=s.ZP.getFormAppAuto(t);e&&this.props.config.callform_detail_mode,void 0===e?(0,h.QS)({form_code:this.props.config.callform_detail},this.props.infoA,this.props.default,"callform_detail;"+this.state.id_component,this.data_select):"modal"===this.props.config.callform_detail_mode?(e.putDataAll_andSet(this.data_select),this.setState({show_modal_detail:s.ZP.autoID()})):(e.putDataAll_andSet(this.data_select),s.ZP.openForm(t))}}buildFormChild(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let t=s.ZP.cloneJson(this.props.infoA);t.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),t,this.props.default,"callform;"+this.state.id_component)}}componentDidMount(){const t=()=>{setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())};this.props_smooth.config.data_default?this.maskInputSet(this.props_smooth.config.data_default,"on_change",t(),{},"OPTIMISTIC"):t()}getConfigTemplate(){var t,e;let{date_picker:i,free_style:o,format_value_type_string:a,mask_value:n,mask_regs:r,mask_mode:l,mask_regs_to:c,hasSuggest:d}=this.state;return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{subTitle_isShow:"date"===this.state.mask_mode,subTitle:`(${this.state.mask_placeholder})`,placeholder:this.state.CMD.disabled+""==="true"?" ":Io(this.state.mask_regs,this.props_smooth.config.mask_mode),title:(null===(t=this.state.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:null===(e=this.state.validate)||void 0===e?void 0:e.request,icon:!0===this.state.isLookup?"search":"",component_code:this.component_code},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:!0,error:{message:this.getErrorLang(this.state.help_mess),type:""}},mode:{textAlign:"left",letterSpacing:o.status?"":"M"}},valueTitleHover:"true"!==String(this.state.CMD.disabled)?"":this.state.mask_value,value:this.state.mask_value,cmd:{isLock:!1},suggest:{isShow:d,data:this.state.list_suggest.map((t=>{let e=jo(t[this.state.PK_key],r,l,c,void 0),i=[];if(n){let t="",o="";for(let a=0;a<e.length;a++){let s=r.filter((t=>t.key===e[a]&&"const"===t.type));s.length>0?""!==o?o+=e[a]:""!==t&&(t+=e[a]):e[a]===n[a]?(o+=e[a],""!==t&&(i.push({value:t,mode:"suggest"}),t="")):(t+=e[a],""!=o&&(i.push({value:o}),o="")),a===e.length-1&&(""!==t?(i.push({value:t,mode:"suggest"}),t=""):""!=o&&(i.push({value:o}),o=""))}}return{title:i,more_information:t[this.state.moreInformation_key],value:t[this.state.PK_key]}})),title:{noData:s.ZP.getLang("header_searchNoResult")}},calendar_data:{value_current:"",today:{title:"Today"},config:{days_title:i.day_data},list_months:i.mounth_data,list_years:{value:new Date(i.date_view).getFullYear()||"",data:i.year_data},list_days:i.day_of_mounth_data},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_today:this.abs_calendar_today,abs_calendar_KeyUp:this.abs_calendar_KeyUp,abs_ChooseSuggest:this.abs_ChooseSuggest,tooltip_copy:{icon:"copy",title:s.ZP.getLang("btn_copy")},abs_Copy:()=>{s.ZP.copyToClipboard(this.maskInputGet(a))}}}render(){if("false"===String(this.state.CMD.visible))return null;const t=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup,children:[(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]}),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]})}}const Vo=Ho;class Wo extends a.Component{constructor(t){super(t),this.setValidate=(t,e)=>{const{validate:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);i.request!==o.request&&this.setState({validate:o})},this.getConfig=()=>{var t;return{config:{default:{title:(null===(t=this.state.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props.default.name,class:this.props.default.class,required:"true"===this.state.validate.request,component_code:this.component_code},cmd:{disable:this.state.CMD.disabled+""==="true",visible:this.state.CMD.visible+""!=="false"},error:{message:s.ZP.getLang(this.state.help_mess),type:""!==this.state.help_mess?"danger":""}},value:this.state.value,mention:JSON.parse(this.props.config.mention||"[]")}},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o},(()=>{}))},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let t=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:t||this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}}return""},this.callDir=()=>this,this.setAdvanced=(t,e)=>{void 0!==e&&null!==e||(e=this.data_default),this.setState({value:e})},this.setGetInfo=(t,e)=>{void 0!==(e=e[this.props.default.code])&&null!==e||(e=this.data_default),this.setState({value:e})},this.set=(t,e)=>{if(void 0!==e){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var i=this.props.config.structable_read.split(".");if(i.length>0&&void 0!==e[i[0]]&&void 0!==e[i[0]][i[1]])return void this.setState({value:e[i[0]][i[1]]})}let t="";this.data_default&&(t=this.data_default),this.setState({value:t})}},this.get=(t,e)=>{let i=this.props.config.structable;if(i.includes("|")){let e=i.split("|");for(let i=0;i<e.length;i++)this.readData(e[i],t.inform)}else this.readData(i,t.inform)},this.getAdvanced=(t,e)=>this.state.value,this.reload=(t,e)=>{this.setState({value:this.data_default})},this.handleChange=t=>{t.trim()!==this.state.value.trim()&&this.setState({value:t})},this.onBlur=t=>{},this.component_code=s.ZP.autoID(),this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var e=this.props.lang;void 0===e&&(e={});let i=this.data_default,a=this.props.validate;void 0===a&&(a={}),this.state={value:i,lang:e,validate:a,lang_select:s.ZP.getLangKey(),help_css:"",help_icon:"",help_mess:"",CMD:{},hasErrorInForm:!1}}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config!==t.config&&this.setState({config:this.props.config}),this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.property!==t.property&&this.setState({property:this.props.property})}readData(t,e){if(t.includes(".")){var i=t.split(".");void 0===e||"true"===e?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}checkValidate(){let t="",e=this.state.value.trim();if("true"===this.state.validate.request&&""===e&&(t="validateRequest"),""!==t){let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);return void 0!==e&&e.setFormValidateFromComponent(!0,this.props.default),this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:t}),!0}return this.setState({help_css:"",help_icon:"",help_mess:""}),!1}render(){const t=(0,n.RP)("uRichTextEditor"),e=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(e,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfig()),{},{abs_Change:this.handleChange,abs_Blur:this.onBlur})}),this.props.ofGroupData.map((t=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},t),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfig()),{},{abs_Change:this.handleChange,abs_Blur:this.onBlur})})}}const Go=Wo,Jo=(t,e,i)=>{for(let o=0;o<t.length;o++)t[o].selected=!1,t[o].key_select=o,t[o].title=qo(e,t[o]),t[o].value=qo("@"+i,t[o]);return t},qo=(t,e)=>(t.split(" ").forEach((i=>{if("@"===i[0]){let o=i.substring(1),a=s.ZP.getOOP(e,o);if("c_cdlist.caption"===o){let t=s.ZP.getOOP(e,"c_cdlist.mcaption");null!==t&&void 0!==t&&t[s.ZP.getLangKey()]&&(a=null===t||void 0===t?void 0:t[s.ZP.getLangKey()])}t=t.replace(i,a)}})),t);var Ko=i(4419);class Xo extends a.Component{constructor(t){super(t),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.getCodeHidden=()=>this.props.default.codeHidden,this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.checkIsLoading=()=>!!this.props.config.is_open_static_form||this.isLoading,this.setCallFormBack=(t,e)=>{if(void 0!==t.key_form&&void 0!==t.key&&t.key===this.props.default.codeHidden){this.form_render_done++;let e=t.componentConfigDefault,{call_form:o}=this.state;if(o[e.index_form].tab_id===e.form_id)o[e.index_form].auto_form_key=t.key_form;else for(let i=0;i<o.length;i++){if(o[i].tab_id===e.form_id){o[i].auto_form_key=t.key_form;break}}this.setState({call_form:o});var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.hasOwnProperty("componentIsLoaded")&&i.componentIsLoaded(this.props.default.codeHidden)}this.form_render_done===this.state.call_form.length&&(this.isLoading=!0,this.setState({isLoading:!1}))},this.set=(t,e)=>{this.setDataCallForm(e)},this.getKeyForm=()=>this.muti_form_didMount+"",this.getInfoErrror=()=>{let t="";if(this.state.call_form.forEach((e=>{let i=e.auto_form_key,o="";var a=s.ZP.getFormAppAuto(i);if(!0!==this.props.config.notCheckValidate&&void 0!==a&&a.hasOwnProperty("getValidateForm")){let e=a.getValidateForm();for(let t=0;t<e.length;t++){const i=e[t];o+=i.key+": "+i.info+";"}t+=o}})),""!==t)return{info:t,key:this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}},this.get=(t,e)=>{void 0!==t.isCallFromFormChild&&null!==t.isCallFromFormChild||(t.isCallFromFormChild=!1);var i=this.props.config.structable;if(i.includes("|"))for(var o=i.split("|"),a=0;a<o.length;a++)this.readData(o[a],t.inform,t.isCallFromFormChild);else this.readData(i,t.inform,t.isCallFromFormChild)},this.checkValidate=()=>{let t=!1;if(this.state.call_form.forEach((e=>{let i=e.auto_form_key;var o=s.ZP.getFormAppAuto(i);void 0!==o&&(o.hasOwnProperty("setFormValidateFromFunctionClient")&&o.setFormValidateFromFunctionClient(!1),o.hasOwnProperty("callDirFromSupport")&&(o.callDirFromSupport("clearError",{},{}),!0!==this.props.config.notCheckValidate&&(o.callDirFromSupport("checkValidate",{},{}),o.hasOwnProperty("getFormValidate")&&(t=o.getFormValidate()))))})),t){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.setFormValidateFromComponent(!0,this.props.default)}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.setState({value:this.data_default},(async()=>{this.props.config.is_open_static_form||(await this.reloadForm(this.state.call_form,e),this.runRuleCPN("reload"))}))},this.getDataCallForm=function(t){return[]},this.setCMD=(t,e)=>{if(this.state.call_form.forEach((i=>{let o=i.auto_form_key;var a=s.ZP.getFormAppAuto(o);if(void 0!==a&&a.hasOwnProperty("callDirFromSupport")){let i=this.props.default.code,o=new RegExp(`${i}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(o,t.list_component);n||(n=t.list_component),a.callDirFromSupport("setCMD",Object.assign(t,{list_component:n,list_view:t.list_view}),e)}})),t.list_component.includes(`${code}()`)){let{CMD:t}=this.state,i=Object.assign(s.ZP.cloneJson(t),e);for(let e in i)i[e]="true"===String(i[e]);this.setState({CMD:i})}},this.setDataGB=(t,e)=>{this.state.call_form.forEach((i=>{let o=i.auto_form_key;var a=s.ZP.getFormAppAuto(o);if(void 0!==a&&a.hasOwnProperty("callDirFromSupport")){let i=this.props.default.code,o=new RegExp(`${i}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(o,t.list_component);n||(n=t.list_component),a.callDirFromSupport("setDataGB",{list_component:n,list_view:t.list_view},e)}}))},this.reloadForm=(t,e)=>{this.state.call_form.forEach((t=>{let e=t.auto_form_key;var i=s.ZP.getFormAppAuto(e);void 0!==i&&i.clearForm()}))},this.getAdvanced=(t,e)=>{if(this.state.call_form.length>0){let t=[];this.state.call_form.forEach((e=>{let i=e.auto_form_key;var o=s.ZP.getFormAppAuto(i);void 0!==o?t.push(o.getDataAll()):s.ZP.AppException("#jTabList.getData","form is undefined","system")}))}return[]},this.runRuleCPN=t=>{this.state.call_form.length>0?this.state.call_form.forEach((e=>{let i=e.auto_form_key;if(void 0!==s.ZP.getFormAppAuto(i)){if(this.isLoading){s.ZP.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,{},this.props.infoA_parent,t||"on_change")}}else s.ZP.AppException("#jTabList.runRuleCPN","form is undefined","system")})):s.ZP.AppException("#jTabList.runRuleCPN","muti_form_didMount is 0","system")},this.setDataCallForm=async t=>{this.state.call_form.length>0?this.state.call_form.forEach((async e=>{let i=e.auto_form_key;var o=s.ZP.getFormAppAuto(i);if(void 0!==o){if(this.isLoading)if(void 0!==t){let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);await o.putDataAll_andSet(t),e.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_change")}else o.clearForm()}else s.ZP.AppException("#jTabList.setDataCallForm","form is undefined","system")})):s.ZP.AppException("#jTabList.setDataCallForm","muti_form_didMount is 0","system")},this.onSelectTab=(t,e)=>{this.last_tab_view=this.state.view_active,this.setState({view_active:e})},this.ref_callForm=[],this.component_code=s.ZP.autoID(),this.config={},this.props.config&&(this.config=this.props.config),this.data_default="",void 0!==this.config.data_default&&(this.data_default=this.config.data_default);var e=this.props.validate;void 0===e&&(e={}),this.data_select={};var i=this.props.lang;void 0===i&&(i={}),this.is_open="true"===this.config.is_open;let a=(t=>{if(!t)return[];let e=[];const{query_data:i,json_data:o}=t;e=s.ZP.getDataLimited(i,0,99999)||[],e=e.data||[];let a=s.ZP.parseJson(o).concat(e)||[];return a=Jo(a,t.col_format,t.key_selected),a||[]})(this.config);this.state={view_active:"",value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:e,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpenForm:this.is_open,call_form:[],list_form_render:[],CMD:{},tab_add_config:a,isLoading:!1,value_search:""},this.id_component=s.ZP.autoID(),this.isLoading=0===this.state.call_form.length,this.isErrorLoadForm=!1,this.form_render_done=0,this.muti_form_didMount=[],this.list_DOM_tab=[]}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config!==t.config&&this.setState({config:this.props.config}),this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.lang!==t.lang&&this.setState({lang:this.props.lang}),this.props.validate!==t.validate&&this.setState({validate:this.props.validate}),this.props.property!==t.property&&this.setState({property:this.props.property})}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e,i){let o=[];if(this.state.call_form.forEach(((t,e)=>{let a={form_code:t.form_code,form_name:t.title,form_id:t.tab_id,form_auto_key:t.auto_form_key,form_data:{}};var n=s.ZP.getFormAppAuto(t.auto_form_key);void 0!==n&&(n.hasOwnProperty("setFormValidateFromFunctionClient")&&n.setFormValidateFromFunctionClient(!1),n.hasOwnProperty("callDirFromSupport")&&(n.callDirFromSupport("clearError",{},{}),!0===this.props.config.notCheckValidate||i?(n.callDirFromSupport("get",{list_component:"*",list_view:"",inform:"true",checkError:!1},{}),n.hasOwnProperty("getData")&&(a.form_data=n.getData("")[a.form_code])):(n.callDirFromSupport("checkValidate",{},{}),n.hasOwnProperty("getFormValidate")&&(n.getFormValidate()||(n.callDirFromSupport("get",{list_component:"*",list_view:"",inform:"true",checkError:!1},{}),n.hasOwnProperty("getData")&&(a.form_data=n.getData("")[a.form_code])))))),o[e]=a})),t.includes(".")&&void 0!==o){var a=t.split(".");let i=o;void 0===e||"true"===e?s.ZP.putData(a[0],a[1],i,this.props.infoA):"false"===e?s.ZP.putDataGB(a[0],a[1],o):s.ZP.putDataGB(a[0],a[1],"")}else if(void 0!==o){let e=o;s.ZP.putDataOneKey(t,e,this.props.infoA)}}getListTabView(){let t=[],{call_form:e}=this.state;for(let i=0;i<e.length;i++)e[i].form_code&&t.push({tabInfo:{title:e[i].title,id:e[i].tab_id},sysStyle:{show:""===this.state.view_active?0===i?"show":"":e[i].tab_id===this.state.view_active?"show":""}});return t}getListContentTabView(){let t=[],{list_form_render:e}=this.state;for(let i=0;i<e.length;i++)t.push({id:e[i].tab_id,DOM_elm:e[i].DOM_elm});return t}render(){const t=(0,n.RP)("uTabList");return(0,l.jsx)(t,{dataFull:{data:this.getListTabView(),button_add:{title:"Add Tabs"},search:{placeholder:s.ZP.getLang("jselect_search"),value:this.state.value_search},form_content:this.getListContentTabView(),cmd:{disable:"true"===String(this.state.CMD.disabled),isLoading:this.state.isLoading},tab_add_config:this.state.tab_add_config.filter((t=>""===this.state.value_search||(s.ZP.searchPerfect(this.state.value_search,t.title)||s.ZP.searchPerfect(this.state.value_search,t.value)))).map((t=>({title:t.title,value:t.value}))),abs_addTab:t=>{this.setState({isLoading:!0},(()=>{let{call_form:e,list_form_render:i}=this.state;const a=e.length;let n=(0,s.cb)();e.push({title:t.title+" (Tab "+(a+1)+")",form_code:t.value,tab_id:n,auto_form_key:""}),i.push({tab_id:n,DOM_elm:(0,l.jsx)("div",{ref:t=>{this.ref_callForm[a]=t}})}),this.setState({call_form:e,list_form_render:i,view_active:n},(()=>{setTimeout((()=>{(0,h.BR)(t.value,this.ref_callForm[a],this.props.infoA,(0,o.Z)((0,o.Z)({},this.props.default),{},{form_id:n,index_form:a}),this.props.default.codeHidden)}),1)}))}))},abs_Sort:t=>{let{oldIndex:e,newIndex:i}=t;this.setState({call_form:(0,Ko.q)(this.state.call_form,e,i)},(()=>{}))},abs_Close:t=>{let{call_form:e,list_form_render:i,view_active:o}=this.state;for(let a=0;a<e.length;a++){if(e[a].tab_id===t.id){e.splice(a,1);break}}for(let a=0;a<i.length;a++){if(i[a].tab_id===t.id){i.splice(a,1);break}}this.form_render_done--,o===t.id&&(o=this.last_tab_view?this.last_tab_view:e.length>0?e[0].tab_id:""),this.setState({call_form:e,list_form_render:i,view_active:o})},abs_select:this.onSelectTab,abs_search:t=>{this.setState({value_search:t.target.value})},abs_ChangeTitle:(t,e,i)=>{let{call_form:o}=this.state;if(o[e].tab_id===i.id)o[e].title=t.target.value;else for(let a=0;a<o.length;a++){if(o[a].tab_id===i.id){o[a].title=t.target.value;break}}this.setState({call_form:o})}}})}}const $o=Xo;class ta extends a.Component{constructor(t){if(super(t),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.getCodeHidden=()=>this.props.default.codeHidden,this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=t=>{!0!==t&&!1!==t||this.setState({isDebug:t})},this.checkIsLoading=()=>!!this.props.config.is_open_static_form||this.isLoading,this.setCallFormBack=(t,e)=>{if(this.props.config.is_open_static_form)this.isLoading=!0;else if(void 0!==t.key_form&&void 0!==t.key&&t.key===this.props.default.codeHidden){this.muti_form_didMount[this.muti_form_didMount.length]=t.key_form,this.isLoading=!0;var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.hasOwnProperty("componentIsLoaded")&&i.componentIsLoaded(this.props.default.codeHidden)}},this.setFormCode=(t,e)=>{this.setState({callForm:e},(()=>{let t=e;t&&""!==t.trim()&&(void 0!==this.ref_callForm.current?this.props.config.is_open_static_form?(0,h.HX)(t,this.ref_callForm.current,this.props.infoA,(0,o.Z)((0,o.Z)({},this.props.default),{},{isReloadValidate:!this.props.config.notCheckValidate}),this.props.default.codeHidden):(0,h.BR)(t,this.ref_callForm.current,this.props.infoA,(0,o.Z)((0,o.Z)({},this.props.default),{},{isReloadValidate:!this.props.config.notCheckValidate}),this.props.default.codeHidden,this.state.data_form):this.isLoading=!0)}))},this.set=(t,e)=>{let i=s.ZP.getNodeJson(e,this.props.config.structable_read.split(".")[0]);this.setState({data_form:i},(()=>{this.setDataCallForm(i)}))},this.getKeyForm=()=>this.muti_form_didMount[0],this.getInfoErrror=()=>{let t="";if(this.muti_form_didMount.length>0){var e=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(!0!==this.props.config.notCheckValidate&&void 0!==e&&e.hasOwnProperty("getValidateForm")){let i=e.getValidateForm();for(let e=0;e<i.length;e++){const o=i[e];t+=o.key+": "+o.info+";"}}}if(""!==t)return{info:t,key:this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}},this.get=(t,e)=>{var i=this.props.config.structable;if(i.includes("|"))for(var o=i.split("|"),a=0;a<o.length;a++)this.readData(o[a],t.inform);else this.readData(i,t.inform)},this.setAdvanced=(t,e)=>{this.setState({data_form:e},(()=>{if(this.muti_form_didMount.length>0){var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,t.list_component);n||(n=t.list_component),"*"===n?i.putDataAll_andSet(e):i.callDirFromSupport("setAdvanced",{list_component:n,list_view:t.list_view},e)}}}))},this.setGetInfo=(t,e)=>{if(this.muti_form_didMount.length>0){var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g");for(;-1!==t.list_component.indexOf(o);){let n=s.ZP.getElementWithRegex(a,t.list_component);if("*"===n){let t=e[o+";"+o+"("+n+")"];i.putDataAll_andSet(t)}else{let a=e[o+";"+o+"("+n+")"];i.callDirFromSupport("setAdvanced",{list_component:n,list_view:t.list_view},a)}t.list_component.endsWith(o+";"+o+"("+n+")")?t.list_component=t.list_component.replace(o+";"+o+"("+n+")",""):t.list_component=t.list_component.replace(o+";"+o+"("+n+");","")}}}},this.checkValidate=()=>{let t=!1;if(this.muti_form_didMount.length>0){var e=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==e&&(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&(e.callDirFromSupport("clearError",{},{}),!0!==this.props.config.notCheckValidate&&(e.callDirFromSupport("checkValidate",{},{}),e.hasOwnProperty("getFormValidate")&&(t=e.getFormValidate())))),t){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}}return t},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(t,e)=>{this.setState({value:this.data_default},(async()=>{this.props.config.is_open_static_form||(await this.reloadForm(this.muti_form_didMount[0],e),this.runRuleCPN("reload"))}))},this.getDataCallForm=t=>{if(!(this.muti_form_didMount.length>0))return"";var e=s.ZP.getFormAppAuto(t);if(void 0!==e&&(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")))if(e.callDirFromSupport("clearError",{},{}),!0!==this.props.config.notCheckValidate){if(e.callDirFromSupport("checkValidate",{},{}),e.hasOwnProperty("getFormValidate")&&!e.getFormValidate()&&(e.callDirFromSupport("get",{list_component:"*",list_view:"",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")))return e.getData("")}else if(e.callDirFromSupport("get",{list_component:"*",list_view:"",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData"))return e.getData("")},this.setCMD=(t,e)=>{if(this.muti_form_didMount.length>0){var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,t.list_component);if(n||(n=t.list_component),i.callDirFromSupport("setCMD",Object.assign(t,{list_component:n,list_view:t.list_view}),e),t.list_component.includes(`${o}()`)){let{CMD:t}=this.state,i=Object.assign(s.ZP.cloneJson(t),e);for(let e in i)i[e]="true"===String(i[e]);this.setState({CMD:i})}}}},this.setDataGB=(t,e)=>{if(this.muti_form_didMount.length>0){var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,t.list_component);n||(n=t.list_component),i.callDirFromSupport("setDataGB",{list_component:n,list_view:t.list_view},e)}}},this.reloadForm=(t,e)=>{var i=s.ZP.getFormAppAuto(t);void 0!==i&&i.clearForm()},this.getAdvanced=(t,e)=>{if(this.muti_form_didMount.length>0){var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i)return i.getDataAll();s.ZP.AppException("#jDynamicFormChild.setDataCallForm","form is undefined","system")}else s.ZP.AppException("#jDynamicFormChild.setDataCallForm","muti_form_didMount is 0","system")},this.runRuleCPN=t=>{if(this.muti_form_didMount.length>0)if(void 0!==s.ZP.getFormAppAuto(this.muti_form_didMount[0])){if(this.isLoading){s.ZP.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,{},this.props.infoA_parent,t||"on_change")}}else s.ZP.AppException("#jDynamicFormChild.setDataCallForm","form is undefined","system");else s.ZP.AppException("#jDynamicFormChild.setDataCallForm","muti_form_didMount is 0","system")},this.setDataCallForm=async t=>{if(this.muti_form_didMount.length>0){var e=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==e){if(this.isLoading)if(void 0!==t){let i=s.ZP.getFormAppAuto(this.props.infoA.key_form);await e.putDataAll_andSet(t),i.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_change")}else e.clearForm()}else s.ZP.AppException("#jDynamicFormChild.setDataCallForm","form is undefined","system")}else s.ZP.AppException("#jDynamicFormChild.setDataCallForm","muti_form_didMount is 0","system")},this.ref_callForm=a.createRef(),this.component_code=s.ZP.autoID(),this.config={},this.props.config&&(this.config=this.props.config),this.data_default={},void 0!==this.config.data_default&&""!==this.config.data_default)try{this.data_default=JSON.parse(this.config.data_default)}catch(n){}var e=this.props.validate;void 0===e&&(e={}),this.data_select={};var i=this.props.lang;void 0===i&&(i={}),this.is_open="true"===this.config.is_open,this.state={value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:e,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpenForm:this.is_open,call_form:this.props.config.callform||"",CMD:{},data_form:{}},this.id_component=s.ZP.autoID(),this.isLoading=!1,this.isErrorLoadForm=!1,this.muti_form_didMount=[]}componentDidUpdate(t){this.props.default!==t.default&&this.setState({default:this.props.default}),this.props.config!==t.config&&this.setState({config:this.props.config}),this.props.role!==t.role&&this.setState({role:this.props.role}),this.props.lang!==t.lang&&this.setState({lang:this.props.lang}),this.props.validate!==t.validate&&this.setState({validate:this.props.validate}),this.props.property!==t.property&&this.setState({property:this.props.property})}componentDidMount(){let t=this.state.call_form;t&&""!==t.trim()&&(void 0!==this.ref_callForm.current?this.props.config.is_open_static_form?(0,h.HX)(t,this.ref_callForm.current,this.props.infoA,(0,o.Z)((0,o.Z)({},this.props.default),{},{isReloadValidate:!this.props.config.notCheckValidate}),this.props.default.codeHidden):(0,h.BR)(t,this.ref_callForm.current,this.props.infoA,(0,o.Z)((0,o.Z)({},this.props.default),{},{isReloadValidate:!this.props.config.notCheckValidate}),this.props.default.codeHidden):this.isLoading=!0),setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(t,e){if(this.muti_form_didMount.length>0){const o=this.getDataCallForm(this.muti_form_didMount[0]);if(t.includes(".")&&void 0!==o){var i=t.split(".");const{callData:a}=this.props.config;let n=o;n=a.includes(".")?s.ZP.getOOP(o,a):a?o[a]:o,void 0===e||"true"===e?s.ZP.putData(i[0],i[1],n,this.props.infoA):"false"===e?s.ZP.putDataGB(i[0],i[1],o):s.ZP.putDataGB(i[0],i[1],"")}else if(void 0!==o){const{callData:e}=this.props.config;let i=o;i=e.includes(".")?s.ZP.getOOP(o,e):e?o[e]||this.data_default:o,s.ZP.putDataOneKey(t,i,this.props.infoA)}}}render(){const t=(0,n.RP)("uSameForm");let e=this.props.default.class||"col-12";return(0,l.jsx)("div",{style:{display:"false"===String(this.state.CMD.visible)?"none":""},className:e,children:(0,l.jsx)(t,{component_code:this.component_code,children:(0,l.jsx)("div",{ref:this.ref_callForm})})})}}const ea={jDynamicFormChild:ta,jTabList:$o,jRichTextEditor:Go,jMaskInputVer2:Vo,jTableDynamicSearch:bo,jTableDynamic:uo,jSelectMulti:ao,jListActivity:Wi,jIframeReport:Ri,jReport:ji,jAuthentic:Li,jListCheckBox:Ii,jTableSearch:bi,jCheckbox:ge,cTextInput:v,cTextArea:C,cButton:P,jButtonPrint:ue,cTableDefault:U,jTableCalculator:_e,jNumberInput:V,jSelect:pt,jMaskInput:Ut,jRadioBox:Yt,jTreeView:Vt,jeLearning:ae,jMutiValue:ne,jTagInput:de,jCurrency:be,jPrintVoucher:xe,jLabel:Le,jTableForm:Te,jSameMain:Fe,jSignature:je,jFullCalendar:Xe,jChart:ti,jProgressBar:ii,jUploadFile:si,jImage:li,jButtonSignature:hi,jCurrencyLongNumber:Oe}},8022:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var o=i(7313),a=i(5842),s=i(6633),n=i(6417);class r extends o.Component{constructor(t){super(t),this.timerType=this.props.timerType||"",this.state={time:this.getTimeType()-this.props.time}}getTimeType(){let t=a.ZP.context_get("user_acc");return"working_date"===this.timerType?(0,s.xY)(t.working_date):Date.now()}componentDidMount(){this.save_interval=setInterval((()=>{var t=this.state.time+6e4;this.setState({time:t})}),6e4)}componentWillUnmount(){clearInterval(this.save_interval)}render(){let t=this.state.time,e=new Date(this.getTimeType()-t);return(0,n.jsx)("span",{className:this.props.class,children:a.ZP.timeSince(e)})}}const l=r},2200:(t,e,i)=>{"use strict";i.d(e,{Z:()=>W});var o=i(7313),a=i(9676),s=i(6417);class n extends o.Component{render(){const t=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(t,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:null===this.props.data||""===this.props.data?"":"object"===typeof this.props.data?JSON.stringify(this.props.data):String(this.props.data),config:{mode:"number"===typeof this.props.data?"right":"left"}}})}}const r=n;var l=i(5842);class c extends o.Component{constructor(t){super(t),this.state={title:this.props.title,html:this.callBuildColumn(!0)}}componentDidUpdate(t){this.props.value===t.value&&this.props.data===t.data&&this.props.title===t.title||this.callBuildColumn()}callBuildColumn(t){let e="",i="",o=this.props.data;if(this.data_copy=JSON.stringify(this.props.value),void 0!==this.props.config){if(void 0!==this.props.config.data&&void 0!==this.props.config.data[this.props.data]){let t=this.props.config.data[this.props.data];t.color&&(e=t.color),t.icon_img&&(i=t.icon_img)}if(void 0!==this.props.config.cdname&&void 0!==this.props.config.cdgrp&&""!==this.props.config.cdname&&""!==this.props.config.cdgrp){let t=l.ZP.data_cdList(this.props.config.cdgrp,this.props.config.cdname)||[];for(let e=0;e<t.length;e++){let i=t[e];if(void 0!==i.c_cdlist.cdid&&i.c_cdlist.cdid===o){o=i.c_cdlist.caption;break}}}}let a=null;if(i.includes("data:image/png;base64")||i.includes("http")&&i.includes("//")?a=(0,s.jsx)("img",{src:i,alt:this.props.title,title:o}):i.includes("fa-")&&(a=(0,s.jsx)("i",{className:"fa "+i,"aria-hidden":"true",style:{color:e},title:o})),void 0!==t&&t)return a;this.setState({title:this.props.title,html:a})}render(){return(0,s.jsx)("td",{"data-title":this.state.title,className:"text-center",style:{textAlign:"center"},children:this.state.html})}}const d=c;class h extends o.Component{getNumber(t){return void 0===t||null===t||Number.isNaN(Number(t))?"":String(Number(t))}render(){const t=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(t,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.getNumber(this.props.data),config:{mode:"right"}}})}}const u=h;class p extends o.Component{isImage(t){let e=!1;try{e=btoa(atob(t))===t&&"/iR".includes(t[0])}catch(i){}return e}getImageTemplate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data:image/png;base64,";return void 0!==t&&null!==t&&this.isImage(t)?t.indexOf(e)>-1?t:e+t:t.indexOf("../")>-1?t:"../rs/global/img/file_icon.svg"}render(){const t=(0,a.RP)("uTableColumnImg");return(0,s.jsx)(t,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,src:this.getImageTemplate(this.props.data)}})}}const _=p;var f=i(6633);class g extends o.Component{constructor(t){var e;super(t),this.convertMaskToValue=t=>{var e,i,o;if(t&&String(t).startsWith("$")&&String(t).endsWith("$")&&(t=l.ZP.getParameterSystem(t.replace(/\$/g,""))),this.isDate){var a,s,n;if(void 0!==this.dateFormat){if(!0===this.props.config.show_text){let t="";if(!this.props.data)return"";let a=this.dateFormat.split("/");if(3===a.length)for(let s=0;s<a.length;s++){switch(a[s]){case"DD":t+=(null===(e=this.props.data)||void 0===e?void 0:e.substring(8,10))+"/";break;case"MM":t+=(null===(i=this.props.data)||void 0===i?void 0:i.substring(5,7))+"/";break;case"YYYY":t+=(null===(o=this.props.data)||void 0===o?void 0:o.substring(0,4))+"/"}}return t.endsWith("/")&&(t=t.slice(0,-1)),t}{var r;let e=(null===(r=t)||void 0===r?void 0:r.split(" "))||[];if(e.length>=1){let i="";for(let t=0;t<e.length;t++){var c,d,h;null!==(c=e[t])&&void 0!==c&&c.includes("DD")&&null!==(d=e[t])&&void 0!==d&&d.includes("MM")&&null!==(h=e[t])&&void 0!==h&&h.includes("YY")?i+=""===i?this.dateFormat:" "+this.dateFormat:i+=""===i?e[t]:" "+e[t]}t=i}else t=this.dateFormat}}return!0===this.props.config.show_text&&"DD/MM/YYYY"===t?this.props.data?(null===(a=this.props.data)||void 0===a?void 0:a.substring(8,10))+"/"+(null===(s=this.props.data)||void 0===s?void 0:s.substring(5,7))+"/"+(null===(n=this.props.data)||void 0===n?void 0:n.substring(0,4)):"":this.props.data||0===this.props.data?f.sx(f.xY(this.props.data),t,this.props.config.mask_mode_time):""}return f.Ui(this.props.data,t)},this.dateFormat=l.ZP.getParameterSystem("DATE_FORMAT");let i=this.props.config.mask;this.isDate=(null===i||void 0===i?void 0:i.includes("DD"))&&(null===i||void 0===i?void 0:i.includes("MM"))&&(null===i||void 0===i?void 0:i.includes("YY"))||!0===(null===(e=this.props.config)||void 0===e?void 0:e.isDate)}render(){const t=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(t,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.convertMaskToValue(this.props.config.mask)||"",config:{mode:this.isDate?"center":"left"},tooltip_copy:{icon:"copy",title:l.ZP.getLang("btn_copy")},abs_Copy:()=>{l.ZP.copyToClipboard(this.isDate?this.convertMaskToValue(this.props.config.mask):this.props.data)}}})}}const m=g;class v extends o.Component{render(){let t=this.props.data||{},e=l.ZP.getLangKey();t=this.props.data[e];const i=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(i,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:t,config:{mode:"number"===typeof this.props.data?"right":"left"}}})}}const b=v;class y extends o.Component{constructor(t){super(t),this.decimal_length=l.ZP.getNodeJson(this.props,"config.decimal_length")||l.ZP.getNodeJson(this.props,"config.decimal")}convertData(t){if(null===t&&!0===this.props.config.hideNullValue)return"********";if(0!==t&&!t)return"";let e=this.decimal_length;return 0===e||e||(e=2),e=Number(e)||0,t=Math.round(Number(t)*Math.pow(10,e))/Math.pow(10,e),(0,f.Nx)(t,e)}render(){const t=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(t,{dataFull:{title_parent:this.props.title_parent,data:this.convertData(this.props.data),config:{mode:"right"},tooltip_copy:{icon:"copy",title:l.ZP.getLang("btn_copy")},abs_Copy:()=>{l.ZP.copyToClipboard(this.props.data)}}})}}const A=y;var D=i(9425);const k={number:/[^\d/]/g,string:/[^a-zA-Z ]/g,free_style:/[^a-zA-Z\d]/g};class O extends o.Component{constructor(t){super(t),this.setLastPost=t=>{let e=t.target;this.state.start_pos=e.selectionStart,this.state.end_pos=e.selectionEnd},this.setPos=(t,e)=>{t.selectionStart=e,t.selectionEnd=e},this.handleChangeValue=(t,e,i,o)=>{const a=t.target;let s=a.selectionStart,n=a.value||"";if("currency"===this.props.config.columnEditType){let e=t.target;const{selectionStart:i,value:o}=e,{decimal_char:a,int_char:s,decimal_length:n}=this,r=this.state.valueChange;let l=o;if(l.includes("-")&&!1===this.isNegative)return void this.setState({value:r},(()=>{e.setSelectionRange(0,0)}));if(r.includes(a)&&!o.includes(a)&&a){let t=r.lastIndexOf(a);l=o.substring(0,t)+a+o.substring(t,o.length),l===a&&(l="")}let c=r,d=o.lastIndexOf(a);o.indexOf(a)!==o.lastIndexOf(a)&&a?d=c.length-n:(c=(0,D.Nx)(l,n,s,a,!1)||"",d=i-(o.length-c.length),1===i?d=1:(i>o.lastIndexOf(a)||o[d]===this.int_char)&&(d+=1));let h=c.replace(/\D/g,"");const u=this.props.config.max_length||15;if(h.length>Number(u)&&Number(u)>0){let t=h.length-Number(u);if(i<=c.lastIndexOf(a)-1){let e=i;c[i]===this.int_char&&e++,h=(c.substring(0,e)+c.substring(e+t,c.length)).replace(/\D/g,""),l=h.substring(0,h.length-n)+a+h.substring(h.length-n,h.length),c=(0,D.Nx)(l,n,s,a,!1)||""}else c=r}this.setState({valueChange:c,isChange:!0},(()=>{e.setSelectionRange(d,d)}))}else k[this.props.config.columnEditType]?(n=n.replace(k[this.props.config.columnEditType],""),this.setState({valueChange:n},(()=>{this.setPos(a,s)}))):this.setState({valueChange:n},(()=>{this.setPos(a,s)}))},this.handleSubmit=(t,e,i)=>{let{valueChange:o}=this.state,a=this.getValueReturn(o);"number"!==this.props.config.columnEditType&&"currency"!==this.props.config.columnEditType||(this.props.config.minValue&&parseFloat(a)<parseFloat(this.props.config.minValue)&&(a=0),this.props.config.maxValue&&parseFloat(a)>parseFloat(this.props.config.maxValue)&&(a=0)),0===a?this.setState({valueLogicDefault:"currency"===this.props.config.columnEditType?(0,D.Nx)(a,this.decimal_length,this.int_char,this.decimal_char,!1):a,valueChange:"currency"===this.props.config.columnEditType?(0,D.Nx)(a,this.decimal_length,this.int_char,this.decimal_char,!1):a},(()=>{this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:a,dataItem:t})})):this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:a,dataItem:t})},this.handleCancel=(t,e,i)=>{this.setState({valueChange:this.state.valueLogicDefault})},"currency"===this.props.config.columnEditType&&(this.int_char=l.ZP.getElementWithRegex(/#(\D)#/,this.props.config.format)||"",this.decimal_char=l.ZP.getElementWithRegex(/#(\D)0/,this.props.config.format)||"",this.decimal_length=this.props.config.decimal_length,""!==this.decimal_char&&this.decimal_char!==this.int_char||(this.decimal_length=0)),this.state={valueLogicDefault:"currency"===this.props.config.columnEditType?(0,D.Nx)(this.props.data,this.decimal_length,this.int_char,this.decimal_char,!1)||"":this.props.data,valueChange:"currency"===this.props.config.columnEditType?(0,D.Nx)(this.props.data,this.decimal_length,this.int_char,this.decimal_char,!1)||"":this.props.data,isUpdate:!1,end_pos:-1,start_pos:0}}getValueCurrency(t){return void 0===t&&(t=this.state.valueLogicDefault),(0,D.XG)(t,this.int_char,this.decimal_char)}getValueReturn(t){switch(this.props.config.columnEditType){case"number":return""===t||null===t||void 0===t?"":Number(t);case"currency":return this.getValueCurrency(t);default:return t}}componentDidUpdate(t){if(void 0!==t.data&&void 0!==this.props.data&&this.props.data!==t.data){let t=!1,{valueLogicDefault:e,valueChange:i}=this.state,o="currency"===this.props.config.columnEditType?(0,D.Nx)(this.props.data,this.decimal_length,this.int_char,this.decimal_char,!1)||"":this.props.data;o!==i&&(i=o,e=o,t=!0),this.setState({valueLogicDefault:e,valueChange:i,isUpdate:t})}}render(){var t;const e=(0,a.RP)("uTableColumnEditInput");return(0,s.jsx)(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.state.valueChange,dataItem:this.props.dataItem,isUpdate:this.state.isUpdate,abs_Change:this.handleChangeValue,abs_Submit:this.handleSubmit,abs_Cancel:this.handleCancel,abs_KeyDown:this.setLastPost,cmd:{disable:"true"===String(null===(t=this.props.cmd)||void 0===t?void 0:t.disabled)},default:{textAlign:"number"===this.props.config.columnEditType||"currency"===this.props.config.columnEditType?"right":"left"},config:{isResize:this.props.config.isResize}}})}}const w=O;class C extends o.Component{getStatusIconStep(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S"){case"S":return"check_circle";case"F":return"remove_circle";case"N":return"add_circle";case"R":return"trending_up";default:return""}}getStatusColorStep(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S"){case"S":return"success";case"F":return"danger";default:return"info"}}render(){const t=(0,a.RP)("uTableColumnIcon");return(0,s.jsx)(t,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:[{val:this.getStatusIconStep(this.props.data),color:this.getStatusColorStep(this.props.data),title:"warning",class:"-round"}],config:{mode:"left"}}})}}const x=C,S={number:/[^\d/]/g,string:/[^a-zA-Z ]/g,free_style:/[^a-zA-Z\d]/g};class M extends o.Component{constructor(t){super(t),this.setLastPost=t=>{let e=t.target;this.state.start_pos=e.selectionStart,this.state.end_pos=e.selectionEnd},this.setPos=(t,e)=>{t.selectionStart=e,t.selectionEnd=e},this.handleChangeValue=(t,e,i,o)=>{const a=t.target;let s=a.selectionStart,n=a.value||"";if("currency"===this.props.config.columnEditType){let e=t.target;const{selectionStart:i,value:o}=e,{decimal_char:a,int_char:s,decimal_length:n}=this,r=this.state.valueChange;let l=o;if(l.includes("-")&&!1===this.isNegative)return void this.setState({value:r},(()=>{e.setSelectionRange(0,0)}));if(r.includes(a)&&!o.includes(a)&&a){let t=r.lastIndexOf(a);l=o.substring(0,t)+a+o.substring(t,o.length),l===a&&(l="")}let c=r,d=o.lastIndexOf(a);o.indexOf(a)!==o.lastIndexOf(a)&&a?d=c.length-n:(c=(0,D.Nx)(l,n,s,a,!1)||"",d=i-(o.length-c.length),1===i?d=1:(i>o.lastIndexOf(a)||o[d]===this.int_char)&&(d+=1));let h=c.replace(/\D/g,"");const u=this.props.config.max_length||15;if(h.length>Number(u)&&Number(u)>0){let t=h.length-Number(u);if(i<=c.lastIndexOf(a)-1){let e=i;c[i]===this.int_char&&e++,h=(c.substring(0,e)+c.substring(e+t,c.length)).replace(/\D/g,""),l=h.substring(0,h.length-n)+a+h.substring(h.length-n,h.length),c=(0,D.Nx)(l,n,s,a,!1)||""}else c=r}this.setState({valueChange:c,isChange:!0},(()=>{e.setSelectionRange(d,d)}))}else S[this.props.config.columnEditType]?(n=n.replace(S[this.props.config.columnEditType],""),this.setState({valueChange:n},(()=>{this.setPos(a,s)}))):this.setState({valueChange:n},(()=>{this.setPos(a,s)}))},this.handleSubmit=(t,e,i)=>{let{valueChange:o}=this.state,a=this.getValueReturn(o);"number"!==this.props.config.columnEditType&&"currency"!==this.props.config.columnEditType||(this.props.config.minValue&&parseFloat(a)<parseFloat(this.props.config.minValue)&&(a=0),this.props.config.maxValue&&parseFloat(a)>parseFloat(this.props.config.maxValue)&&(a=0)),0===a?this.setState({valueLogicDefault:"currency"===this.props.config.columnEditType?(0,D.Nx)(a,this.decimal_length,this.int_char,this.decimal_char,!1):a,valueChange:"currency"===this.props.config.columnEditType?(0,D.Nx)(a,this.decimal_length,this.int_char,this.decimal_char,!1):a},(()=>{this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:a,dataItem:t})})):this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:a,dataItem:t})},this.handleCancel=(t,e,i)=>{this.setState({valueChange:this.state.valueLogicDefault})},"currency"===this.props.config.columnEditType&&(this.int_char=l.ZP.getElementWithRegex(/#(\D)#/,this.props.config.format)||"",this.decimal_char=l.ZP.getElementWithRegex(/#(\D)0/,this.props.config.format)||"",this.decimal_length=this.props.config.decimal_length,""!==this.decimal_char&&this.decimal_char!==this.int_char||(this.decimal_length=0)),this.state={valueLogicDefault:"currency"===this.props.config.columnEditType?(0,D.Nx)(this.props.data,this.decimal_length,this.int_char,this.decimal_char,!1)||"":this.props.data,valueChange:"currency"===this.props.config.columnEditType?(0,D.Nx)(this.props.data,this.decimal_length,this.int_char,this.decimal_char,!1)||"":this.props.data,isUpdate:!1,end_pos:-1,start_pos:0}}getValueCurrency(t){return void 0===t&&(t=this.state.valueLogicDefault),(0,D.XG)(t,this.int_char,this.decimal_char)}getValueReturn(t){switch(this.props.config.columnEditType){case"number":return""===t||null===t||void 0===t?"":Number(t);case"currency":return this.getValueCurrency(t);default:return t}}componentDidUpdate(t){if(void 0!==t.data&&void 0!==this.props.data&&this.props.data!==t.data){let t=!1,{valueLogicDefault:e,valueChange:i}=this.state,o="currency"===this.props.config.columnEditType?(0,D.Nx)(this.props.data,this.decimal_length,this.int_char,this.decimal_char,!1)||"":this.props.data;o!==i&&(i=o,e=o,t=!0),this.setState({valueLogicDefault:e,valueChange:i,isUpdate:t})}}render(){var t,e;const i=(0,a.RP)("uTableColumnEditInputWithHistory");return(0,s.jsx)(i,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.state.valueChange,dataItem:this.props.dataItem,isUpdate:this.state.isUpdate,abs_Change:this.handleChangeValue,abs_Submit:this.handleSubmit,abs_Cancel:this.handleCancel,abs_KeyDown:this.setLastPost,cmd:{disable:"true"===String(null===(t=this.props.cmd)||void 0===t?void 0:t.disabled)},default:{textAlign:"number"===this.props.config.columnEditType||"currency"===this.props.config.columnEditType?"right":"left"},config:{isResize:this.props.config.isResize},abs_ClickHistory:this.props.abs_ClickHistory,history:{isShow:null===(e=this.props.cmd)||void 0===e?void 0:e.isShowHistory,before_value:this.props.before_value}}})}}const P=M;class T extends o.Component{constructor(){super(...arguments),this.onChange=t=>{this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:t});const e=this.props.tableContext.props;l.ZP.getFormAppAuto(e.infoA.key_form).runRuleFunction(e.default,{value:t,rown_data:this.props.rowData},e.infoA_parent,"checked")}}render(){var t,e,i;const o=(null===(t=this.props)||void 0===t||null===(e=t.tableContext)||void 0===e||null===(i=e.state)||void 0===i?void 0:i.CMD)||{};let n=(0,a.RP)("uTableColumnCheckbox");return(0,s.jsx)(n,{dataFull:{title_parent:this.props.title_parent,value:!!this.props.data,config:{cmd:{disable:!0===o.disabled}},abs_Click:(t,e)=>{this.onChange(!e)}}})}}const I=T,F={Normal:"active",Draft:"default",Editing:"warning","Require NRC change":"success",Close:"danger",Block:"purple"};class N extends o.Component{constructor(t){super(t),this.getDataTemplate=()=>{let t=String(this.props.data);return this.config[t]?{title:this.config[t].lang,type:this.config[t].type}:{title:this.props.data,type:F[this.props.data]}},this.config=this.props.config}render(){const t=(0,a.RP)("uTableColumnAction");return(0,s.jsx)(t,{dataFull:{title_parent:this.props.title_parent,data:this.getDataTemplate(),config:{isFrozen:!1}}})}}const L=N;class E extends o.Component{constructor(t){var e,i;super(t),this.getCaptionLang=t=>{if(0===Object.keys(this.CDLIST_BUILD).length&&this.CDLIST_BUILD.constructor===Object){var e,i;let t=(null===(e=this.props.config)||void 0===e?void 0:e.cdgrp)||"",o=(null===(i=this.props.config)||void 0===i?void 0:i.cdname)||"",a=l.ZP.data_cdList(t,o,!0);this.CDLIST_BUILD={};for(const e of a){let t=e.c_cdlist.mcaption||{},i=e.c_cdlist.caption||"";this.CDLIST_BUILD[e.c_cdlist.cdid]=e.c_cdlist={mcaption:t,caption:i}}}let o=this.CDLIST_BUILD[t]||{},a=(null===o||void 0===o?void 0:o.mcaption)||{},s=(null===o||void 0===o?void 0:o.caption)||"";return a[l.ZP.getLangKey()]||s};let o=(null===(e=t.config)||void 0===e?void 0:e.cdgrp)||"",a=(null===(i=t.config)||void 0===i?void 0:i.cdname)||"",s=l.ZP.data_cdList(o,a,!0);this.CDLIST_BUILD={};for(const n of s){let t=n.c_cdlist.mcaption||{},e=n.c_cdlist.caption||"";this.CDLIST_BUILD[n.c_cdlist.cdid]=n.c_cdlist={mcaption:t,caption:e}}}render(){const t=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(t,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:null===this.props.data?"":this.getCaptionLang(this.props.data),config:{mode:"left"}}})}}const j=E;class Z extends o.Component{constructor(t){var e,i;super(t),this.getCaptionLang=t=>{const e=this.CDLIST_BUILD[t]||{};let i=(null===e||void 0===e?void 0:e.mcaption)||{},o=(null===e||void 0===e?void 0:e.caption)||"";return i[l.ZP.getLangKey()]||o},this.abs_Change=(t,e,i,o,a,s)=>{let{data_view:n,value_select:r,item_select:l}=this.state,c=n.filter((t=>!0===t.selected));c.length>0&&(c[0].selected=!1);let d=n.filter(((t,e)=>e===s));d.length>0&&(d[0].selected=!0,r=l=d[0].value,this.setState({data_view:n,value_select:r,item_select:l},(()=>{this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:this.state.value_select})})))};const o=(null===(e=t.config)||void 0===e?void 0:e.cdgrp)||"",a=(null===(i=t.config)||void 0===i?void 0:i.cdname)||"";this.C_CDLISTS=l.ZP.data_cdList(o,a,!0),this.CDLIST_BUILD={};for(const s of this.C_CDLISTS){let e=s.c_cdlist.mcaption||{},i=s.c_cdlist.caption||"",o=s.c_cdlist.cdid;this.CDLIST_BUILD[s.c_cdlist.cdid]=s.c_cdlist={mcaption:e,caption:i,cdid:o},s.selected=s.c_cdlist.cdid===t.data}this.state={data_view:this.C_CDLISTS,item_select:t.data,value_select:this.getCaptionLang(t.data),isUpdate:!1}}componentDidUpdate(t){if(void 0!==t.data&&void 0!==this.props.data&&this.props.data!==t.data){let t=!1,{item_select:e,value_select:i}=this.state;this.props.data!==e&&(e=this.props.data,i=this.getCaptionLang(this.props.data),t=!0),this.setState({item_select:e,value_select:i,isUpdate:t})}}render(){var t,e;const i=(0,a.RP)("uTableColumnEditSelect");return(0,s.jsx)(i,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,value:this.state.value_select,data:null===(t=this.state.data_view)||void 0===t?void 0:t.map(((t,e)=>(t.title=this.getCaptionLang(t.c_cdlist.cdid),t.value=t.c_cdlist.cdid,t))),config:{mode:"number"===typeof this.props.data?"right":"left"},isUpdate:this.state.isUpdate,cmd:{disable:"true"===String(null===(e=this.props.cmd)||void 0===e?void 0:e.disabled)},abs_Change:this.abs_Change}})}}const R=Z;class Q extends o.Component{render(){const t=(0,a.RP)("uTableColumnProgressBar");return(0,s.jsx)(t,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,percent:this.props.data?parseInt(this.props.data):0,config:{mode:"left"}}})}}const z=Q;class U extends o.Component{getStringHtml(){return this.props.data.replace(/\n/gm,"<br/>")}render(){const t=(0,a.RP)("uTableColumnHtmlDanger");return(0,s.jsx)(t,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:null===this.props.data||""===this.props.data?"":this.getStringHtml()}})}}const B=U;class Y extends o.Component{getData(){let t=this.getStringCalculator(),e=l.ZP.paramStringCaculator(t);return 0===e||e?Number.isNaN(Number(e))?"":String(Number(e)):""}getStringCalculator(){let t=this.props.config.calculator,e=l.ZP.getlistCodeContext(t);for(const o of e){let e=l.ZP.context_get(o.code)||"";t=t.replace(o.key,e)}let i=l.ZP.component_getListCode(this.props.config.calculator);for(let o of i){let e=this.getNodeJson(this.props.rowData,o.code);null!==e&&void 0!==e||(e=""),"object"===typeof e&&(e=JSON.stringify(e)),t=t.replace(o.key,e)}return t}getNodeJson(t,e){if("object"!==typeof t||!e)return;let i=e.split("."),o=t;for(const a of i){if(void 0===o||null===o)return;o=o[a]}return o}render(){const t=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(t,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.getData(),config:{mode:"right"}}})}}const H=Y;class V extends o.Component{render(){const t=(0,a.RP)("uTableColumnHiddenText");return(0,s.jsx)(t,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:null===this.props.data||""===this.props.data?"":"object"===typeof this.props.data?JSON.stringify(this.props.data):String(this.props.data),title_lang:{title_copy:l.ZP.getLang("btn_copy"),title_view:l.ZP.getLang("btn_view"),title_hide:l.ZP.getLang("btn_hide")},abs_Copy:t=>{l.ZP.copyToClipboard(this.props.data)}}})}}const W={ColumnInputEditHistory:P,ColumnProgressBar:z,ColumnHiddenText:V,ColumnImg:_,ColumnMask:m,ColumnLang:b,ColumnCurrency:A,ColumnInputEdit:w,ColumnString:r,ColumnDefault:r,ColumnStatus:d,ColumnNumber:u,columnImg:_,columnMask:m,columnLang:b,columnCurrency:A,ColumnCheckbox:I,ColumnStatusTitle:L,ColumnCdlist:j,ColumnHtmlDanger:B,columnInputEdit:w,ColumnSelectEdit:R,ColumnCalculator:H,ColumnIcon:x}},5258:(t,e,i)=>{"use strict";i.d(e,{y:()=>o});class o{constructor(t){this.setPassword=t=>(this.rebuildPassword(t),this.pwd_display),this.getPasswordDecode=()=>this.decodePassword(this.pwd_encode),this.getPasswordDisplay=()=>this.pwd_display,this.props=t,this.pwd_encode="",this.pwd_display=""}rebuildPassword(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=String(t);let e=0,i=this.decodePassword(this.pwd_encode),o="";for(const a of t)"\u2022"===a?(o+=i[e]||"",e++):o+=a;this.pwd_encode=this.encodePassword(o),this.pwd_display=t.replace(/./g,"\u2022")}encodePassword(t){let e="";for(let i of t){let t=i.charCodeAt(0);e+=String.fromCharCode(2*t)}return e}decodePassword(t){let e="";for(let i of t){let t=i.charCodeAt(0);e+=String.fromCharCode(t/2)}return e}}},9431:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});const o=class{constructor(){this.changeNumericToWords=(t,e,i,o,a)=>{let s=t.toString();return s.indexOf(".")>s.length-3&&(s=parseFloat(s).toFixed(2)),this.changeToWords(s,!1,e,i,o,a)},this.changeCurrencyToWords=(t,e,i,o,a)=>(t.indexOf(".")>t.length-3&&(t=parseFloat(t).toFixed(2)),""!==o&&void 0!==o&&null!==o?this.changeToWords(t,!0,o,a,o,a):this.changeToWords(t,!0,e,i,o,o)),this.changeCurrencyToWords=(t,e,i)=>(t.indexOf(".")>t.length-3&&(t=parseFloat(t).toFixed(2)),this.changeToWords(t,!0,e,i,"","")),this.changeNumericToWords=(t,e,i,o,a)=>(t.indexOf(".")>t.length-3&&(t=parseFloat(t).toFixed(2)),this.changeToWords(t,!1,e,i,o,a)),this.changeCurrencyToWords=(t,e,i)=>(t.indexOf(".")>t.length-3&&(t=parseFloat(t).toFixed(2)),this.changeToWords(t.toString(),!0,e,i,"","")),this.changeCurrencyToWords=(t,e,i,o,a,s)=>{let n=t.toString();return n.indexOf(".")>n.length-3&&(n=parseFloat(n).toFixed(2)),s?this.changeToWordsCents(n,!0,e,i,o,o):""!==o&&void 0!==o&&null!==o?this.changeToWords(n,!0,o,a,o,a):this.changeToWords(n,!0,e,i,o,o)},this.changeToWords=(t,e,i,o,a,s)=>{let n="",r=t,l="",c="",d="",h=i;try{let a=t.indexOf(".");if(a>0){r=t.substring(0,a),parseFloat(r)<=1&&(h=o),l=t.substring(a+1),parseInt(l)>0?(c=e?"and":"point",d=this.translateWholeNumber(l)+this.translateNameCents(h)):(c="only",d="")}else c="only",d="";let s=this.translateWholeNumber(r).trim();" Kyat/ Kyat"!==i&&"Zero"===s&&(s=""),n=s+" "+this.translateNameCurrency(i)+" "+c+" "+d," Kyat/ Kyat"!==i&&(n=n.toLowerCase()),n=n.substring(0,1).toUpperCase()+n.substring(1,n.length),n=n.trim()}catch(u){}return n},this.changeToWordsCents=(t,e,i,o,a,s)=>{let n="",r=t,l="",c="",d="",h=i;try{let i=t.indexOf(".");if(i>0){r=t.substring(0,i),parseFloat(r)<=1&&(h=o),l=t.substring(i+1),parseInt(l),c=e?"and":"point",d=this.translateCents(l)}else c=e?"and":"point",d=this.translateCents(l);n=this.translateWholeNumberCents(r).trim()+" "+c+" "+d+" "+h,n=n.substring(0,1).toUpperCase()+n.substring(1,n.length),n=n.trim()}catch(u){}return n},this.translateNameCents=t=>{let e=" "+t.split("/")[0];try{switch(t){case"THB":e=" satang";break;case"USD":e=" cent(s)"}}catch(i){}return e},this.translateNameCurrency=t=>{let e=t.split("/")[0];try{switch(t){case"USD":e="Dollars";break;case"KHR":e="Riels";break;case"THB":e="Baht";break;case"EUR":e="Euro";break;case"GBG":e="Pound Sterling";break;case"CNY":e="Yuan Renminbi";break;case"HKD":e="HongKongDollar";break;case"JPY":e="Yen";break;case"LAK":e="Kip";break;case"SGD":e="Singapore Dollar";break;case"Pay/ Pay":e=""}}catch(i){}return e.trim()},this.translateWholeNumberCents=t=>{let e="";try{let i=!1,o=!1;if(parseFloat(t)>0){i=t.startsWith("0");let a=t.length,s=0,n="";switch(a){case 1:e=this.ones(t),o=!0;break;case 2:e=this.tens(t),o=!0;break;case 3:s=a%3+1,n=" Hundred ";break;case 4:case 5:case 6:s=a%4+1,n=" Thousand ";break;case 7:case 8:case 9:s=a%7+1,n=" Million ";break;case 10:case 11:case 12:s=a%10+1,n=" Billion ";break;default:o=!0}if(!o){let o=this.translateWholeNumberCents(t.toString().substring(0,s));null!==o&&""!==o&&(o=this.translateWholeNumberCents(t.toString().substring(0,s))+n),e=o+this.translateWholeNumberCents(t.toString().substring(s)),i&&(e=e.trim())}e.trim().equals(n.trim())&&(e="")}}catch(i){}return e.trim()},this.translateWholeNumber=t=>{let e="";try{let i=!1,o=!1,a=parseFloat(t);if(0===a)e="Zero";else if(a>0){i=t.startsWith("0");let a=t.length,s=0,n="";switch(a){case 1:e=this.ones(t),o=!0;break;case 2:e=this.tens(t),o=!0;break;case 3:s=a%3+1,n=" hundred ";break;case 4:case 5:case 6:s=a%4+1,n=" thousand ";break;case 7:case 8:case 9:s=a%7+1,n=" million ";break;case 10:case 11:case 12:s=a%10+1,n=" billion ";break;default:o=!0}if(!o){let o=this.translateWholeNumber(t.toString().substring(0,s));null!==o&&""!==o&&(o=this.translateWholeNumber(t.toString().substring(0,s))+n),e=o+this.translateWholeNumber(t.toString().substring(s)),i&&(e=e.trim())}e.trim().equals(n.trim())&&(e="")}}catch(i){}return e.trim()},this.tens=t=>{let e=parseInt(t),i="";switch(e){case 10:i="Ten";break;case 11:i="Eleven";break;case 12:i="Twelve";break;case 13:i="Thirteen";break;case 14:i="Fourteen";break;case 15:i="Fifteen";break;case 16:i="Sixteen";break;case 17:i="Seventeen";break;case 18:i="Eighteen";break;case 19:i="Nineteen";break;case 20:i="Twenty";break;case 30:i="Thirty";break;case 40:i="Forty";break;case 50:i="Fifty";break;case 60:i="Sixty";break;case 70:i="Seventy";break;case 80:i="Eighty";break;case 90:i="Ninety";break;default:e>0&&(i=this.tens(t.substring(0,1)+"0")+" "+this.ones(t.substring(1)))}return i.toLowerCase()},this.ones=t=>{let e="";switch(parseInt(t)){case 1:e="One";break;case 2:e="Two";break;case 3:e="Three";break;case 4:e="Four";break;case 5:e="Five";break;case 6:e="Six";break;case 7:e="Seven";break;case 8:e="Eight";break;case 9:e="Nine"}return e},this.translateCents=t=>{let e="";return null===t||0===t.length?e="00/100":1===t.length?e=t+"0/100":t.length<=2?e=t+"/100":3===t.length?e=t+"/1000":4===t.length&&(e=t+"/10000"),e}}}},9664:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});const o=class{constructor(){this.changeNumericToWords=(t,e,i,o,a)=>{let s=t.toString();return this.changeToWords(s,!1,e,i,o,a)},this.changeCurrencyToWords=(t,e,i,o,a)=>""!==o&&void 0!==o&&null!==o?this.changeToWords(t,!0,o,a,o,a):this.changeToWords(t,!0,e,i,o,o),this.changeCurrencyToWords=(t,e,i)=>this.changeToWords(t,!0,e,i,"",""),this.changeNumericToWords=(t,e,i,o,a)=>this.changeToWords(t,!1,e,i,o,a),this.changeCurrencyToWords=(t,e,i)=>this.changeToWords(t.toString(),!0,e,i,"",""),this.changeCurrencyToWords=(t,e,i,o,a,s)=>{let n=t.toString();return s?this.changeToWordsCents(n,!0,e,i,o,o):""!==o&&void 0!==o&&null!==o?this.changeToWords(n,!0,o,a,o,a):this.changeToWords(n,!0,e,i,o,o)},this.changeToWords=(t,e,i,o,a,s)=>{let n="",r=t,l="",c="",d="";try{let o=t.indexOf(".");o>0?(r=t.substring(0,o),l=t.substring(o+1),parseInt(l)>0&&(c=e?" ":"point",d=this.readCurrency(i))):(c=e?" ":"point",d=this.readCurrency(i)),n=this.translateWholeNumber(r).trim()+c+d,n=n.trim()}catch(h){}return n},this.readCurrency=t=>{let e=" "+t.split("/")[0];try{switch(t){case"USD":e="Dollars";break;case"MMK":e="Pya";break;case"LAK":e="Kip";break;case"EUR":e="Euro";break;case"SGP":e="Singapore dollar";break;case"THB":e="Baht";break;case"KHR":e="Riel";break;case"VND":e="VN \u0111\u1ed3ng";break;case"HKD":e="HongKong Dollars"}}catch(i){}return e},this.translateWholeNumber=t=>{let e="";try{let i=!1,o=!1;if(parseFloat(t)>0){i=t.startsWith("0");let a=t.length,s=0,n="";switch(a){case 1:e=this.ones(t),o=!0;break;case 2:e=this.tens(t),o=!0;break;case 3:s=a%3+1,n=" Hundred ";break;case 4:case 5:case 6:s=a%4+1,n=" Thousand ";break;case 7:case 8:case 9:s=a%7+1,n=" Million ";break;case 10:s=a%10+1,n=" Billion ";break;default:o=!0}if(!o){let o=this.translateWholeNumber(t.toString().substring(0,s));null!==o&&""!==o&&(o=this.translateWholeNumber(t.toString().substring(0,s))+n),e=o+this.translateWholeNumber(t.toString().substring(s)),i&&(e=e.trim())}e.trim().equals(n.trim())&&(e="")}}catch(i){}return e.trim()},this.tens=t=>{let e=parseInt(t),i="";switch(e){case 10:i="Ten";break;case 11:i="Eleven";break;case 12:i="Twelve";break;case 13:i="Thirteen";break;case 14:i="Fourteen";break;case 15:i="Fifteen";break;case 16:i="Sixteen";break;case 17:i="Seventeen";break;case 18:i="Eighteen";break;case 19:i="Nineteen";break;case 20:i="Twenty";break;case 30:i="Thirty";break;case 40:i="Forty";break;case 50:i="Fifty";break;case 60:i="Sixty";break;case 70:i="Seventy";break;case 80:i="Eighty";break;case 90:i="Ninety";break;default:e>0&&(i=this.tens(t.substring(0,1)+"0")+" "+this.ones(t.substring(1)))}return i},this.ones=t=>{let e="";switch(parseInt(t)){case 1:e="One";break;case 2:e="Two";break;case 3:e="Three";break;case 4:e="Four";break;case 5:e="Five";break;case 6:e="Six";break;case 7:e="Seven";break;case 8:e="Eight";break;case 9:e="Nine"}return e},this.translateCents=t=>{let e="";return null===t||0===t.length?e="00/100":1===t.length?e=t+"0/100":t.length<=2?e=t+"/100":3===t.length?e=t+"/1000":4===t.length&&(e=t+"/10000"),e}}}},7210:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _lib_libSupport__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5842),_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(418),_NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9431),_NumberToEnglish_SBILH__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9664),_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6633);const _space='<div style="padding-right:24px"></div>',_space_small='<div style="padding-right:8px"></div>';class functionDynamic{constructor(){this.checkRenderThead_O9=(t,e)=>{let i=this.ob_data[t.data]||[],o=!1;for(let a=0;a<i.length;a++)if("A3"!==i[a].prn){o=!0;break}return i.length>0&&o?"<div>Acc</div><div>Name</div><div>CRC</div><div>Amount DR</div><div>Amount CR</div>":""},this.checkRender=(t,e)=>{let i=t.data,o=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.getNodeJson(this.ob_data,i);return o&&o.length>0?e:""},this.date_format=(t,e)=>e?(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(e).getTime(),t.mark):"",this.getCUSTACNO_A1=(t,e)=>{let i=this.ob_data_voucher.A1,o=i.transaction_body.account_number,a="";return"PMT_IITT"!==i.transaction_code&&"PMT_IIT"!==i.transaction_code&&"PMT_IDT"!==i.transaction_code||(o=i.transaction_body.racno),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||(o=i.transaction_body.sacno),""!==o&&void 0!==o||""===i.transaction_body.account_number||void 0===i.transaction_body.account_number||(o=i.transaction_body.account_number),void 0!==o&&null!==o&&(o=o.replace("-",""),o=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},o),"DPT_TRF"!==i.transaction_code&&"DPT_CDT"!==i.transaction_code||(a=i.transaction_body.pdoacc,a=a.replace("-",""),o+=_space+"Credit A/C No:  "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},a),o+=_space+i.transaction_body.caccount_name2)),o||""},this.checkNumberZero=(t,e)=>0===e||"0"===e?"":_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},e.toString()),this.getTotal_A801=(t,e)=>{let i=this.ob_data_voucher.A801,o=i.transaction_body.psamt||0,a=i.transaction_body.cfamt||0,s=i.transaction_body.cvat||0;return _functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o+a+s,2).toString())},this.getTotal_A802=(t,e)=>{let i=this.ob_data_voucher.A802,o=i.transaction_body.pramt||0,a=i.transaction_body.cfamt||0,s=i.transaction_body.cvat||0;return _functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o-a-s,2).toString())},this.getTotal_A803=(t,e)=>{let i=this.ob_data_voucher.A803,o=i.transaction_body.psamt||0,a=i.transaction_body.cfamt||0;return _functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o+a,2).toString())},this.getTXINFO1_A2=(t,e)=>{let i=this.ob_data_voucher.A2,o=i.transaction_body.account_number;if("PMT_IITT"!==i.transaction_code&&"PMT_IIT"!==i.transaction_code&&"PMT_IDT"!==i.transaction_code||""!==i.transaction_body.racno&&void 0!==i.transaction_body.racno&&null!==i.transaction_body.racno&&(o=i.transaction_body.racno),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||""!==i.transaction_body.sacno&&void 0!==i.transaction_body.sacno&&null!==i.transaction_body.sacno&&(o=i.transaction_body.sacno),void 0!==o&&null!==o&&""!==o){let t=o.replace("-","");o=15===t.length?"Cust. A/C No. "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},t):"Cust. A/C No. "+o,""===i.transaction_body.account_name||void 0===i.transaction_body.account_name||Array.isArray(i.transaction_body.account_name)?""!==i.transaction_body.customer_name&&void 0!==i.transaction_body.customer_name&&(o+=_space_small+i.transaction_body.customer_name):o+=_space_small+i.transaction_body.account_name,""!==i.branch_name&&void 0!==i.branch_name&&(o+=_space_small+"Branch:  "+i.branch_name),""!==i.transaction_date&&void 0!==i.transaction_date&&(o+=_space_small+(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(i.transaction_date).getTime(),"DD/MM/YYYY HH:mm:ss"))}return o||""},this.getTXINFO2_A2=(t,e)=>{let i="",o=this.ob_data_voucher.A2;return""!==o.transaction_refid&&void 0!==o.transaction_refid&&(i+="Ref: "+o.transaction_refid+_space_small),""!==o.transaction_body.system_user_code&&void 0!==o.transaction_body.system_user_code&&(i+="Teller ID: "+o.transaction_body.system_user_code+_space_small),""!==o.transaction_code&&void 0!==o.transaction_code&&(i+="Tran code:  "+o.transaction_code),i},this.getTXINFO2_A2Y=(t,e)=>{let i="",o=this.ob_data_voucher.A2;""!==o.transaction_refid&&void 0!==o.transaction_refid&&(i+="Ref: "+o.transaction_refid+_space_small),""!==o.transaction_body.system_user_code&&void 0!==o.transaction_body.system_user_code&&(i+="Teller ID: "+o.transaction_body.system_user_code+_space_small),""!==o.transaction_code&&void 0!==o.transaction_code&&(i+="Tran code:  "+o.transaction_code+_space_small);let a="";return""!==o.transaction_body.other_currency&&void 0!==o.transaction_body.other_currency?a=o.transaction_body.other_currency:""!==o.transaction_body.currency_code&&void 0!==o.transaction_body.currency_code&&(a=o.transaction_body.currency_code),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||(a=o.transaction_body.rccr),0!==o.transaction_body.account_amount&&void 0!==o.transaction_body.account_amount&&(i+=a+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.account_amount.toString())),"PMT_IITT"!==o.transaction_code&&"PMT_IIT"!==o.transaction_code&&"PMT_IDT"!==o.transaction_code||0!==o.transaction_body.psamt&&void 0!==o.transaction_body.psamt&&(i+=a+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.psamt.toString())),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||0!==o.transaction_body.pramt&&void 0!==o.transaction_body.pramt&&(i+=a+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.pramt.toString())),i},this.getTXDESCR_A2=(t,e)=>{let i=this.ob_data_voucher.A2,o="",a="";return""!==i.transaction_body.other_currency&&void 0!==i.transaction_body.other_currency&&null!==i.transaction_body.other_currency?o=i.transaction_body.other_currency:""!==i.transaction_body.currency_code&&void 0!==i.transaction_body.currency_code&&(o=i.transaction_body.currency_code),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||(o=i.transaction_body.rccr),0!==i.transaction_body.account_amount&&void 0!==i.transaction_body.account_amount&&(a=o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.account_amount.toString())),"PMT_IITT"!==i.transaction_code&&"PMT_IIT"!==i.transaction_code&&"PMT_IDT"!==i.transaction_code||0!==i.transaction_body.psamt&&void 0!==i.transaction_body.psamt&&(a=o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.psamt.toString())),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||0!==i.transaction_body.pramt&&void 0!==i.transaction_body.pramt&&(a=o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.pramt.toString())),a},this.getTxInfo_A2C=(t,e)=>{let i=t.line,o=this.ob_data_voucher.A2;if("1"===i){let t=o.transaction_body.account_number;if("PMT_IITT"!==o.transaction_code&&"PMT_IIT"!==o.transaction_code&&"PMT_IDT"!==o.transaction_code||""!==o.transaction_body.racno&&void 0!==o.transaction_body.racno&&null!==o.transaction_body.racno&&(t=o.transaction_body.racno),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||""!==o.transaction_body.sacno&&void 0!==o.transaction_body.sacno&&null!==o.transaction_body.sacno&&(t=o.transaction_body.sacno),void 0!==t&&null!==t&&""!==t){let e=t.replace("-","");t=15===e.length?"Cust. A/C No. "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},e):"Cust. A/C No. "+t,""===o.transaction_body.account_name||void 0===o.transaction_body.account_name||Array.isArray(o.transaction_body.account_name)?""!==o.transaction_body.caccount_name&&void 0!==o.transaction_body.caccount_name&&(t+=_space_small+o.transaction_body.caccount_name):t+=_space_small+o.transaction_body.account_name,""!==o.branch_name&&void 0!==o.branch_name&&(t+=_space_small+"Branch:  "+o.branch_name),""!==o.transaction_date&&void 0!==o.transaction_date&&(t+=_space_small+(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(o.transaction_date).getTime(),"DD/MM/YYYY HH:mm:ss"))}return t||""}if("2"===i){let t="";""!==o.transaction_refid&&void 0!==o.transaction_refid&&(t+="Ref: "+o.transaction_refid+_space_small),""!==o.transaction_body.system_user_code&&void 0!==o.transaction_body.system_user_code&&(t+="Teller ID: "+o.transaction_body.system_user_code+_space_small),""!==o.transaction_code&&void 0!==o.transaction_code&&(t+="Tran code:  "+o.transaction_code+_space_small);let e="";return""!==o.transaction_body.other_currency&&void 0!==o.transaction_body.other_currency?e=o.transaction_body.other_currency:""!==o.transaction_body.currency_code&&void 0!==o.transaction_body.currency_code&&(e=o.transaction_body.currency_code),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||(e=o.transaction_body.rccr),0!==o.transaction_body.account_amount&&void 0!==o.transaction_body.account_amount&&(t+=e+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.account_amount.toString())),"PMT_IITT"!==o.transaction_code&&"PMT_IIT"!==o.transaction_code&&"PMT_IDT"!==o.transaction_code||0!==o.transaction_body.psamt&&void 0!==o.transaction_body.psamt&&(t+=e+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.psamt.toString())),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||0!==o.transaction_body.pramt&&void 0!==o.transaction_body.pramt&&(t+=e+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.pramt.toString())),t}},this.getTxInfo_A2D=(t,e)=>{let i=t.line,o=this.ob_data_voucher.A2;if("1"===i){let t=o.transaction_body.account_number;if("PMT_IITT"!==o.transaction_code&&"PMT_IIT"!==o.transaction_code&&"PMT_IDT"!==o.transaction_code||""!==o.transaction_body.racno&&void 0!==o.transaction_body.racno&&null!==o.transaction_body.racno&&(t=o.transaction_body.racno),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||""!==o.transaction_body.sacno&&void 0!==o.transaction_body.sacno&&null!==o.transaction_body.sacno&&(t=o.transaction_body.sacno),void 0!==t&&null!==t&&""!==t){let e=t.replace("-","");t=15===e.length?"Cust. A/C No. "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},e):"Cust. A/C No. "+t,""===o.transaction_body.account_name||void 0===o.transaction_body.account_name||Array.isArray(o.transaction_body.account_name)?""!==o.transaction_body.caccount_name&&void 0!==o.transaction_body.caccount_name&&(t+=_space_small+o.transaction_body.caccount_name):t+=_space_small+o.transaction_body.account_name,""!==o.branch_name&&void 0!==o.branch_name&&(t+=_space_small+"Branch:  "+o.branch_name),""!==o.transaction_date&&void 0!==o.transaction_date&&(t+=_space_small+(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(o.transaction_date).getTime(),"DD/MM/YYYY HH:mm:ss"))}return t||""}if("2"===i){let t="";""!==o.transaction_refid&&void 0!==o.transaction_refid&&(t+="Ref: "+o.transaction_refid+_space_small),""!==o.transaction_body.system_user_code&&void 0!==o.transaction_body.system_user_code&&(t+="Teller ID: "+o.transaction_body.system_user_code+_space_small),""!==o.transaction_code&&void 0!==o.transaction_code&&(t+="Tran code:  "+o.transaction_code+_space_small);let e="";return""!==o.transaction_body.other_currency&&void 0!==o.transaction_body.other_currency?e=o.transaction_body.other_currency:""!==o.transaction_body.currency_code&&void 0!==o.transaction_body.currency_code&&(e=o.transaction_body.currency_code),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||(e=o.transaction_body.rccr),0!==o.transaction_body.account_amount&&void 0!==o.transaction_body.account_amount&&(t+=e+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.account_amount.toString())),"PMT_IITT"!==o.transaction_code&&"PMT_IIT"!==o.transaction_code&&"PMT_IDT"!==o.transaction_code||0!==o.transaction_body.psamt&&void 0!==o.transaction_body.psamt&&(t+=e+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.psamt.toString())),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||0!==o.transaction_body.pramt&&void 0!==o.transaction_body.pramt&&(t+=e+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.pramt.toString())),t}},this.getTXDESCR_A2_Lao=(t,e)=>{let i=this.ob_data_voucher.A2,o="",a="";return""!==i.transaction_body.other_currency&&void 0!==i.transaction_body.other_currency?o=i.transaction_body.other_currency:""!==i.transaction_body.currency_code&&void 0!==i.transaction_body.currency_code&&(o=i.transaction_body.currency_code),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||(o=i.transaction_body.rccr),0!==i.transaction_body.account_amount&&void 0!==i.transaction_body.account_amount&&(a=o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.account_amount.toString())),"PMT_IITT"!==i.transaction_code&&"PMT_IIT"!==i.transaction_code&&"PMT_IDT"!==i.transaction_code||0!==i.transaction_body.samt&&void 0!==i.transaction_body.samt&&(a=o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.samt.toString())),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||0!==i.transaction_body.ramt&&void 0!==i.transaction_body.ramt&&(a=o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.ramt.toString())),"CRD_FCD"===i.transaction_code&&""!==i.transaction_body.account_number&&void 0!==i.transaction_body.account_number&&(a+=_space_small+"Debit A/C No.  "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},i.transaction_body.account_number),a+=_space_small+i.transaction_body.caccount_name2),a},this.getTXINFO1_A203=(t,e)=>{let i=this.ob_data_voucher.A203,o="";return""!==i.transaction_body.account_number&&void 0!==i.transaction_body.account_number&&(o+="A/C No. "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},i.transaction_body.account_number)),""!==i.transaction_body.account_name&&void 0!==i.transaction_body.account_name?o+=_space_small+i.transaction_body.account_name:""!==i.transaction_body.caccount_name2&&void 0!==i.transaction_body.caccount_name2&&(o+=_space_small+i.transaction_body.caccount_name2),""!==i.branch_name&&void 0!==i.branch_name&&(o+=_space_small+"Branch:  "+i.branch_name),""!==i.transaction_date&&void 0!==i.transaction_date&&(o+=_space_small+(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(i.transaction_date).getTime(),"DD/MM/YYYY HH:mm:ss")),o},this.getTXINFO2_A203=(t,e)=>{let i="",o=this.ob_data_voucher.A203;return""!==o.transaction_refid&&void 0!==o.transaction_refid&&(i+="Ref:  "+o.transaction_refid),o.transaction_body.user_code&&(i+=_space_small+"Teller: "+o.transaction_body.user_code),i+=_space_small+"Tran code: "+o.transaction_code,i},this.getTXDESCR_A203=(t,e)=>{let i=this.ob_data_voucher.A203,o="";return 0!==i.transaction_body.account_amount&&void 0!==i.transaction_body.account_amount&&(""!==i.transaction_body.book_currency&&void 0!==i.transaction_body.book_currency&&(o+=i.transaction_body.book_currency),o+=_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.account_amount.toString())),o},this.getTXINFO1_A204=(t,e)=>{let i=this.ob_data_voucher.A204,o=i.transaction_body.account_number;return"PMT_IITT"!==i.transaction_code&&"PMT_IIT"!==i.transaction_code&&"PMT_IDT"!==i.transaction_code||""!==i.transaction_body.racno&&void 0!==i.transaction_body.racno&&(o=i.transaction_body.racno),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||""!==i.transaction_body.sacno&&void 0!==i.transaction_body.sacno&&(o=i.transaction_body.sacno),void 0!==o&&null!==o&&(o=o.replace("-",""),o="Cust. A/C No. "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},o),""!==i.transaction_body.account_name&&void 0!==i.transaction_body.account_name&&null!==i.transaction_body.account_name?o+=_space_small+i.transaction_body.account_name:""!==i.transaction_body.caccount_name&&void 0!==i.transaction_body.caccount_name&&null!==i.transaction_body.caccount_name&&(o+=_space_small+i.transaction_body.caccount_name),""!==i.branch_name&&void 0!==i.branch_name&&null!==i.branch_name&&(o+=_space_small+"Branch:  "+i.branch_name+_space_small),""!==i.transaction_date&&void 0!==i.transaction_date&&null!==i.transaction_date&&(o+=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(i.transaction_date).getTime(),"DD/MM/YYYY HH:mm:ss"))),o||""},this.getTXINFO2_A204=(t,e)=>{let i="",o=this.ob_data_voucher.A204;return""!==o.transaction_refid&&void 0!==o.transaction_refid&&(i+="Ref: "+o.transaction_refid+_space_small),""!==o.transaction_body.user_code&&void 0!==o.transaction_body.user_code&&null!==o.transaction_body.user_code&&(i+="Teller: "+o.transaction_body.user_code+_space_small),""!==o.transaction_code&&void 0!==o.transaction_code&&(i+="Tran code:  "+o.transaction_code),i},this.getTXDESCR_A204=(t,e)=>{let i=this.ob_data_voucher.A204,o="",a="Debit Amount ",s="interest amount  ",n="WHT ";return""!==i.transaction_body.other_currency&&void 0!==i.transaction_body.other_currency&&null!==i.transaction_body.other_currency?o=i.transaction_body.other_currency:""!==i.transaction_body.deposit_currency&&void 0!==i.transaction_body.deposit_currency&&null!==i.transaction_body.deposit_currency&&(o=i.transaction_body.deposit_currency),0!==i.transaction_body.account_amount&&void 0!==i.transaction_body.account_amount&&(a=a+o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.account_amount.toString())+_space),0!==i.transaction_body.interest_amount&&void 0!==i.transaction_body.interest_amount&&(s=s+o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.interest_amount.toString())+_space),0!==i.transaction_body.withholding_tax_amount&&void 0!==i.transaction_body.withholding_tax_amount&&(n=n+o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.withholding_tax_amount.toString())),a+s+n},this.getToday=()=>(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.FW)((new Date).getTime(),"DD/MM/YYYY"),this.getTXINFO1_A202=(t,e)=>{let i=this.ob_data_voucher.A202,o="",a="",s="",n="",r="";return""!==i.transaction_body.account_number&&void 0!==i.transaction_body.account_number&&(o="Debit A/C No.  "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},i.transaction_body.account_number)),""!==i.transaction_body.account_name&&void 0!==i.transaction_body.account_name&&(a=_space+i.transaction_body.account_name),""!==i.transaction_body.from_serial&&void 0!==i.transaction_body.from_serial&&(s=_space+"Cheque no.  "+i.transaction_body.from_serial),""!==i.branch_name&&void 0!==i.branch_name&&(n=_space+"Branch:  "+i.branch_name),""!==i.transaction_date&&(r=_space+(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(i.transaction_date).getTime(),"DD/MM/YYYY HH:mm:ss")),o+a+s+n+r},this.getTXINFO2_A202=(t,e)=>{let i=this.ob_data_voucher.A202,o="",a="",s="";return""!==i.transaction_refid&&void 0!==i.transaction_refid&&(o="Ref:  "+i.transaction_refid),""!==i.transaction_body.user_code&&void 0!==i.transaction_body.user_code&&(a=_space+"Teller:  "+i.transaction_body.user_code),""!==i.transaction_code&&void 0!==i.transaction_code&&(s=_space+"Tran code:  "+i.transaction_code),o+a+s},this.getTXDESCR_A202=(t,e)=>{let i=this.ob_data_voucher.A202,o="",a="",s="",n="",r="";return 0!==i.transaction_body.account_amount&&void 0!==i.transaction_body.account_amount&&(s=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.account_amount.toString())),""!==i.transaction_body.other_currency&&void 0!==i.transaction_body.other_currency&&"DPT_CWC"!==i.transaction_code?o=i.transaction_body.other_currency:""!==i.transaction_body.currency_code&&void 0!==i.transaction_body.currency_code&&(o=i.transaction_body.currency_code),""!==s&&(s=o+"  "+s),0!==i.transaction_body.cfamt&&void 0!==i.transaction_body.cfamt&&(n=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.cfamt.toString()),n=_space+"Fee. "+o+"  "+n),""!==i.transaction_body.pdoacc&&void 0!==i.transaction_body.pdoacc?a=i.transaction_body.pdoacc:""!==i.transaction_body.pcacc&&void 0!==i.transaction_body.pcacc&&(a=i.transaction_body.pcacc),""!==a&&(a=_space+"Credit A/C No. "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},a)),"DPT_CDT"!==i.transaction_code&&"DPT_TRF"!==i.transaction_code||(r=_space+i.transaction_body.caccount_name2),s+n+a+r},this.getTXCFNMS_A17=(t,e)=>{let i=this.ob_data_voucher.A17,o="";if(""!==i.transaction_body.fee_names&&void 0!==i.transaction_body.fee_names){var a;let t=null===(a=i.transaction_body.fee_names)||void 0===a?void 0:a.split("|");if(void 0!==t)for(const e of t)""!==e&&(o+=e+"<br/>")}return o},this.getLISTCFAMT_A17=(t,e)=>{let i=this.ob_data_voucher.A17,o="";if(""!==i.transaction_body.fee_amounts&&void 0!==i.transaction_body.fee_amounts){var a;let t=null===(a=i.transaction_body.fee_amounts)||void 0===a?void 0:a.split("|");if(void 0!==t)for(const e of t)""!==e&&(o+=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(e,2).toString())+"<br/>")}return o},this.getCurrency_A17=(t,e)=>{var i,o;let a=this.ob_data_voucher.A17,s=0,n=null===(i=a.transaction_body.fee_amounts)||void 0===i?void 0:i.split("|");if(void 0!==n)for(const u of n)""!==u&&(s+=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(u,2).toString()));let r=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,l="";var c,d,h;""!==(null===(o=a.transaction_body.rccr)||void 0===o?void 0:o.trim())&&void 0!==a.transaction_body.rccr?l=a.transaction_body.rccr.toString():""!==(null===(c=a.transaction_body.currency_code)||void 0===c?void 0:c.trim())&&void 0!==a.transaction_body.currency_code?l=a.transaction_body.currency_code.toString():"ACT_ACT"===a.transaction_code||"CSH_CSH"===a.transaction_code||"ACT_CSH"===a.transaction_code||"CSH_ACT"===a.transaction_code||"ACT_DPT"===a.transaction_code||"CSH_DPT"===a.transaction_code||"DPT_ACT"===a.transaction_code||"DPT_CSH"===a.transaction_code||"DPT_DPT"===a.transaction_code?""!==(null===(d=a.transaction_body.pgccr)||void 0===d?void 0:d.trim())&&void 0!==a.transaction_body.pgccr&&(l=a.transaction_body.pgccr.toString()):""!==(null===(h=a.transaction_body.other_currency)||void 0===h?void 0:h.trim())&&void 0!==a.transaction_body.other_currency&&(l=a.transaction_body.other_currency.toString());return"(Total amount in words:  "+r.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(s,2).toFixed(2),l,l)+")"},this.getTotal_A17=(t,e)=>{var i;let o="",a=0,s=null===(i=this.ob_data_voucher.A17.transaction_body.fee_amounts)||void 0===i?void 0:i.split("|");if(void 0!==s)for(const n of s)""!==n&&(a+=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(n,2).toString()));return o=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString()),o},this.getTotal_A171=(t,e)=>{var i;let o="",a=0,s=null===(i=this.ob_data_voucher.A171.transaction_body.fee_amounts)||void 0===i?void 0:i.split("|");if(void 0!==s)for(const n of s)""!==n&&(a+=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(n,2).toString()));return o=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString()),o},this.getTXCFNMS_A171=(t,e)=>{let i=this.ob_data_voucher.A171,o="";if(""!==i.transaction_body.fee_names&&void 0!==i.transaction_body.fee_names){var a;let t=null===(a=i.transaction_body.fee_names)||void 0===a?void 0:a.split("|");if(void 0!==t)for(const e of t)""!==e&&(o+=e+"<br/>")}return o},this.getLISTCFAMT_A171=(t,e)=>{let i=this.ob_data_voucher.A171,o="";if(""!==i.transaction_body.fee_amounts&&void 0!==i.transaction_body.fee_amounts){var a;let t=null===(a=i.transaction_body.fee_amounts)||void 0===a?void 0:a.split("|");if(void 0!==t)for(const e of t)""!==e&&(o+=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(e,2).toString())+"<br/>")}return o},this.getCurrency_A171=(t,e)=>{var i,o;let a=this.ob_data_voucher.A171,s=0,n=null===(i=a.transaction_body.fee_amounts)||void 0===i?void 0:i.split("|");if(void 0!==n)for(const u of n)""!==u&&(s+=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(u,2).toString()));let r=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,l="";var c,d,h;""!==(null===(o=a.transaction_body.rccr)||void 0===o?void 0:o.trim())&&void 0!==a.transaction_body.rccr?l=a.transaction_body.rccr.toString():""!==(null===(c=a.transaction_body.currency_code)||void 0===c?void 0:c.trim())&&void 0!==a.transaction_body.currency_code?l=a.transaction_body.currency_code.toString():"ACT_ACT"===a.transaction_code||"CSH_CSH"===a.transaction_code||"ACT_CSH"===a.transaction_code||"CSH_ACT"===a.transaction_code||"ACT_DPT"===a.transaction_code||"CSH_DPT"===a.transaction_code||"DPT_ACT"===a.transaction_code||"DPT_CSH"===a.transaction_code||"DPT_DPT"===a.transaction_code?""!==(null===(d=a.transaction_body.pgccr)||void 0===d?void 0:d.trim())&&void 0!==a.transaction_body.pgccr&&(l=a.transaction_body.pgccr.toString()):""!==(null===(h=a.transaction_body.other_currency)||void 0===h?void 0:h.trim())&&void 0!==a.transaction_body.other_currency&&(l=a.transaction_body.other_currency.toString());return"(Total amount in words:  "+r.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(s,2).toFixed(2),l,l)+")"},this.getTotal_A172=(t,e)=>{var i;let o="",a=0,s=null===(i=this.ob_data_voucher.A172.transaction_body.fee_amounts)||void 0===i?void 0:i.split("|");if(void 0!==s)for(const n of s)""!==n&&(a+=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(n,2).toString()));return o=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString()),o},this.getTXCFNMS_A172=(t,e)=>{let i=this.ob_data_voucher.A172,o="";if(""!==i.transaction_body.fee_names&&void 0!==i.transaction_body.fee_names){var a;let t=null===(a=i.transaction_body.fee_names)||void 0===a?void 0:a.split("|");if(void 0!==t)for(const e of t)""!==e&&(o+=e+"<br/>")}return o},this.getLISTCFAMT_A172=(t,e)=>{let i=this.ob_data_voucher.A172,o="";if(""!==i.transaction_body.fee_amounts&&void 0!==i.transaction_body.fee_amounts){var a;let t=null===(a=i.transaction_body.fee_amounts)||void 0===a?void 0:a.split("|");if(void 0!==t)for(const e of t)""!==e&&(o+=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(e,2).toString())+"<br/>")}return o},this.getCurrency_A172=(t,e)=>{var i,o;let a=this.ob_data_voucher.A172,s=0,n=null===(i=a.transaction_body.fee_amounts)||void 0===i?void 0:i.split("|");if(void 0!==n)for(const u of n)""!==u&&(s+=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(u,2).toString()));let r=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,l="";var c,d,h;""!==(null===(o=a.transaction_body.rccr)||void 0===o?void 0:o.trim())&&void 0!==a.transaction_body.rccr?l=a.transaction_body.rccr.toString():""!==(null===(c=a.transaction_body.currency_code)||void 0===c?void 0:c.trim())&&void 0!==a.transaction_body.currency_code?l=a.transaction_body.currency_code.toString():"ACT_ACT"===a.transaction_code||"CSH_CSH"===a.transaction_code||"ACT_CSH"===a.transaction_code||"CSH_ACT"===a.transaction_code||"ACT_DPT"===a.transaction_code||"CSH_DPT"===a.transaction_code||"DPT_ACT"===a.transaction_code||"DPT_CSH"===a.transaction_code||"DPT_DPT"===a.transaction_code?""!==(null===(d=a.transaction_body.pgccr)||void 0===d?void 0:d.trim())&&void 0!==a.transaction_body.pgccr&&(l=a.transaction_body.pgccr.toString()):""!==(null===(h=a.transaction_body.other_currency)||void 0===h?void 0:h.trim())&&void 0!==a.transaction_body.other_currency&&(l=a.transaction_body.other_currency.toString());return"(Total amount in words:  "+r.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(s,2).toFixed(2).toString(),l,l)+")"},this.getCurrency_A16=(t,e)=>{let i=this.ob_data_voucher.A16,o=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,a=i.transaction_body.amount;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),!0,!1,i.transaction_body.currency_code+"/"+i.transaction_body.currency_code,i.transaction_body.currency_code+"/"+i.transaction_body.currency_code)},this.getCustomerNo_A201=(t,e)=>""!==e&&void 0!==e?"Customer A/C no :":"",this.getCustomerName_A201=(t,e)=>""!==e&&void 0!==e?"Customer A/C name :":"",this.getCurrency_A201=(t,e)=>""!==e&&void 0!==e?"Currency :":"",this.getCurrency_A10=(t,e)=>{let i=this.ob_data_voucher.A10,o=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,a=i.transaction_body.txamt;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),!0,!0," Kyat/ Kyat"," Pya/ Pya").replace(" and "," ")},this.getCurrency_A15=(t,e)=>{let i=this.ob_data_voucher.A15;return(new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z).changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(e,2).toString(),i.transaction_body.other_currency,i.transaction_body.other_currency,i.transaction_body.other_currency,i.transaction_body.other_currency,!0)},this.getCurrency_A13=(t,e)=>{let i=this.ob_data_voucher.A13,o=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,a=i.result.balance;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),i.result.ccr,i.result.ccr)},this.getCurrency_A14=(t,e)=>{let i=this.ob_data_voucher.A14,o=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,a=i.voucher.amt1;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),!0,!0," Kyat/ Kyat"," Pya/ Pya").replace(" and "," ")},this.getNumber_A13=(t,e)=>{let i=this.ob_data_voucher.A13,o=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,a=i.result.balance;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),i.transaction_body.currency_code,"")},this.getNumber_A13_SBILH=(t,e)=>{let i=this.ob_data,o=new _NumberToEnglish_SBILH__WEBPACK_IMPORTED_MODULE_4__.Z,a=i.result.balance;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),i.transaction_body.currency_code,"")},this.getCurrency_A12=(t,e)=>{let i=this.ob_data_voucher.A12,o=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,a=i.transaction_body.samt;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),!0,!0," Kyat/ Kyat"," Pya/ Pya")},this.checkValueCFAMT_A801=(t,e)=>{let i=this.ob_data_voucher.A801;return 0!==i.transaction_body.cfamt&&i.transaction_body.currency_code,"<br/>",0!==i.transaction_body.cvat&&i.transaction_body.currency_code,""},this.checkValueCFAMT_A803=(t,e)=>{let i=this.ob_data_voucher.A803;return 0!==i.transaction_body.cfamt&&i.transaction_body.sccr,""},this.checkValueCFAMT_A802=(t,e)=>{let i=this.ob_data_voucher.A802;return 0!==i.transaction_body.cfamt&&i.transaction_body.rccr,"<br/>",0!==i.transaction_body.cvat&&i.transaction_body.rccr,""},this.formatDate=(t,e)=>e.split(" ")[0],this.checkValue_A801=(t,e)=>""===e||void 0===e||null===e||"null"===e||"undefined"===e?"&nbsp;":this.ob_data_voucher.A801.transaction_body.account_name,this.checkValue_A802=(t,e)=>""===e||void 0===e||null===e||"null"===e||"undefined"===e?"&nbsp;":e,this.getInfoA1=(t,e)=>{let i=t.data,o=[],a=this.ob_data_voucher.A1[i];for(let n=0;n<a.length;n++){var s;"A3"!==(null===(s=a[n][i])||void 0===s?void 0:s.prn)&&o.push(a[n])}return o},this.formatCurrency_A13=(t,e)=>{let i=parseFloat(e.replace("%",""));return _functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(i,2).toString())+"%"},this.getApprove_A1=(t,e)=>{var i,o;let a=this.ob_data_voucher.A1,s=0,n=0;if(void 0!==a.postings_debit&&(null===(i=a.postings_debit[0])||void 0===i?void 0:i.postings_debit.branchid)===a.transaction_body.branchid&&void 0!==a.transaction_body.branchid&&(s=a.postings_debit[0].postings_debit.amt),void 0!==a.postings_credit&&(null===(o=a.postings_credit[0])||void 0===o?void 0:o.postings_credit.branchid)===a.transaction_body.branchid&&void 0!==a.transaction_body.branchid&&(n=a.postings_credit[0].postings_credit.amt),s+n>0){let t=s+n;return(new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z).changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(t,2).toString(),!0,!0,a.transaction_body.ccrname+"/ "+a.transaction_body.ccrname,a.transaction_body.ccrunit+"/ "+a.transaction_body.ccrunit)}return""},this.getInfoA5=(t,e)=>{let i=t.data,o=[],a=this.ob_data_voucher.A5[i];for(let s=0;s<a.length;s++){let t=a[s];t[i].amt=t[i].balance,0===t[i].balance&&0===t[i].credit&&0===t[i].debit&&(t[i].amt=null),o.push(t)}return o},this.getDefaultTable=(t,e)=>{let i=t.data,o=[],a=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.getNodeJson(this.data_list,i),s=i.split("."),n=s[s.length-1];if(Array.isArray(a))for(let r=0;r<a.length;r++){const t=a[r];for(const e in t){const i=t[e];if("object"!==typeof i){let t=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.cloneJson(a[r]);a[r]={},a[r][n]=t,a[r][n].AFGHkeyIndexWJ=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.autoID();break}void 0===i.AFGHkeyIndexWJ&&(a[r][e].AFGHkeyIndexWJ=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.autoID())}}for(let r=0;r<a.length;r++)o.push(a[r]);return o},this.getInfoA3=(t,e)=>{let i=t.data,o=[],a=this.ob_data_voucher.A3[i];for(let s=0;s<a.length;s++)o.push(a[s]);return o},this.Summary=(t,e)=>{let i=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.getNodeJson(this.ob_data_voucher,t.data),o=t.data.split("."),a=o[o.length-1],s=0,n=!1,r="";for(let l=0;l<i.length;l++)s+=i[l][a].amount;if(0===s)return r;switch(t.decimal){case"1":r=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(s,1)).toFixed(1),n=!0;break;case"2":r=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(s,2)).toFixed(2),n=!0;break;case"3":r=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(s,3)).toFixed(3),n=!0}if(n)switch(r=""+r,t.type){case"us":r=r.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");break;case"vn":r=r.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}return-1!=="CSH_CSH;CSH_ACT;CSH_DPT;ACT_ACT;ACT_CSH;ACT_DPT;DPT_DPT;DPT_ACT;DPT_CSH".indexOf(this.ob_data.transaction_code)&&(r="&nbsp;"),r},this.checkValueAndReplace=(t,e)=>e?t.replace:"",this.checkValueAndReplaceNumber=(t,e)=>e?_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(t.replace,2).toString()):"",this.checkNumberAndReplace=(t,e)=>Number(e)<0||Number(e)>0?t.replace:"",this.checkValueZero=(t,e)=>e||"",this.getValueFromTo=(t,e)=>{if(e)return e.toString().substring(parseInt(t.from),parseInt(t.from)+parseInt(t.index))},this.checkValue=(json_param,value)=>{let value_format="";if(""===value||void 0===value||null===value)return"&nbsp;";let param=json_param.condition.split(";");switch(param[2]=""!==param[2]?param[2]:"&nbsp;",param[3]=""!==param[3]?param[3]:"&nbsp;",param[0]){case"=":value=value===param[1]?param[2]:param[3];break;case"!=":value=value!==param[1]?param[2]:param[3];break;case">":value=value>param[1]?param[2]:param[3];break;case"<":value=value<param[1]?param[2]:param[3];break;case">=":value=value>=param[1]?param[2]:param[3];break;case"<=":value=value<=param[1]?param[2]:param[3];break;default:value=param[3]}if(value&&""!==value.trim())try{value=eval(value)+""}catch(_unused){}if(isNaN(value))return value;let voucher_not_rate="CSH_CSH;CSH_ACT;CSH_DPT;ACT_ACT;ACT_CSH;ACT_DPT;DPT_DPT;DPT_ACT;DPT_CSH";return-1===voucher_not_rate.indexOf(this.ob_data.transaction_code)?value:(void 0!==json_param.decimal&&null!==json_param.decimal&&""!==json_param.decimal?(value_format=parseFloat(_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.condition_checkDynamicNoData(value)).toFixed(parseInt(json_param.decimal)),value_format=value_format.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")):value_format=value,value_format)},this.Calculator=(json_param,value)=>{let value_format="",calculation=json_param.calculation;if(calculation&&""!==calculation.trim())try{calculation=eval(calculation)+""}catch(_unused2){}return isNaN(calculation)?calculation:(void 0!==json_param.decimal&&null!==json_param.decimal&&""!==json_param.decimal?(value_format=parseFloat(_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.condition_checkDynamicNoData(calculation)).toFixed(parseInt(json_param.decimal)),value_format=value_format.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")):value_format=calculation,value_format)},this.formatMark=(t,e)=>{if(""===e||void 0===e||null===e||"null"===e||"undefined"===e||e.indexOf("null")>-1)return"&nbsp;";{let i=t.mark,o="",a=[],s=0,n=e.length-1;if(void 0!==i){for(let t=i.length-1;t>=0;t--){const o=i[t];"#"===o?(e[n]+""!=="undefined"?a[s]=e[n]:a[s]=0,n--):a[s]=o,s++}for(let t=n;t>=0;t--)a[s]=e[t],s++;for(let t=a.length-1;t>=0;t--)o+=a[t]}else o=e;return o}},this.Insert=(t,e)=>{if(""===e||void 0===e||null===e)return"";let i=t["config-insert"].split(";"),o=parseInt(i[0]),a=i[1];if("false"===i[2]){for(let t=0;t<e.length;t++)t%(o+1)||(e=e.substring(0,t)+a+e.substring(t));e=e.substring(1)}else e=e.substr(0,o)+a+e.substr(o+1);return e},this.Substring=(t,e)=>{if(""===e||void 0===e||null===e)return e;let i=parseInt(t["start-character"]),o=parseInt(t["end-character"]);return e=e.substring(i,o)},this.formatCurrency=(t,e)=>{if((""===e||void 0===e||null===e)&&0!==e)return"&nbsp;";let i="",o=e.replace(/[^-0-9.]/g,""),a=!1;switch(t.decimal){case"0":i=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,0)).toFixed(0),a=!0;break;case"1":i=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,1)).toFixed(1),a=!0;break;case"2":i=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,2)).toFixed(2),a=!0;break;case"3":i=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,3)).toFixed(3),a=!0;break;case"4":i=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.Nx)(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,4),4);break;case"5":i=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.Nx)(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,5),5);break;case"6":i=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.Nx)(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,6),6);break;case"7":i=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.Nx)(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,7),7);break;case"8":i=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.Nx)(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,8),8);break;case"9":i=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.Nx)(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,9),9)}if(a)switch(i=""+i,t.type){case"us":i=i.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");break;case"vn":i=i.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}return i},this.ToCurrencyWords_O9=(t,e)=>{let i=0,o="";if(void 0!==this.ob_data.postings_debit&&void 0!==this.ob_data.transaction_body){let t=this.ob_data;if(void 0!==t.branchid){for(let e=0;e<this.ob_data.postings_debit.length;e++){let o=this.ob_data.postings_debit[e];o.branchid===t.branchid&&(i+=o.amt)}for(let e=0;e<this.ob_data.postings_credit.length;e++){let o=this.ob_data.postings_credit[e];o.branchid===t.branchid&&(i+=o.amt)}}}let a,s,n,r,l,c,d,h,u,p,_,f,g=i.toString().split("."),m=g[0].toString();if(0===parseInt(m))return"Zero";for(a=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],s=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],n=["","thousand","million","billion","trillion"],r=m.length,c=[];r>0;)l=r,c.push(m.slice(r=Math.max(0,r-3),l));if(d=c.length,d>n.length)return"";for(f=[],p=0;p<d;p++)h=parseInt(c[p]),h&&(u=c[p].split("").reverse().map(parseFloat),1===u[1]&&(u[0]+=10),(_=n[p])&&f.push(_),(_=a[u[0]])&&f.push(_),(_=s[u[1]])&&f.push(_),(_=a[u[2]])&&f.push(_+" hundred"));let v="";if(void 0!==t.show&&"true"===t.show){let e=" "+t.dollars+" "+t.cents;if(void 0!==g[1])switch(g[1].length){case 0:v+=f.reverse().join(" ")+" "+e;break;case 1:v+=f.reverse().join(" ")+" and "+g[1]+"/10"+e;break;case 2:v+=f.reverse().join(" ")+" and "+g[1]+"/100"+e;break;case 3:v+=f.reverse().join(" ")+" and "+g[1]+"/1000"+e}else v+=f.reverse().join(" ")+" "+e}if(void 0!==t.uppercase&&"true"===t.uppercase)for(let b of v.split(" "))o+=b.charAt(0).toUpperCase()+b.slice(1)+" ";return o},this.renderCheckBox=(t,e)=>{let i=t.data.split(";"),o=t.selected,a="";for(let s=0;s<i.length;s++){let t=i[s].split("|"),e=t[0];a+=t[1]===o?'<div style="display:flex;align-items:center; margin-right:40px;margin-bottom:10px"><div style="width:15px;height:15px;border:1px solid transparent;border-radius:50%;background-color:#4085F7"><div style="width: 15px;height: 15px;background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iI0ZGRkZGRiI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTkgMTYuMTdMNC44MyAxMmwtMS40MiAxLjQxTDkgMTkgMjEgN2wtMS40MS0xLjQxTDkgMTYuMTd6Ii8+PC9zdmc+);border-radius: 50%;background-repeat: no-repeat;background-position: center;background-size:cover"></div></div><div style="padding-left:10px">'+e+"</div></div>":'<div style="display:flex;align-items:center; margin-right:40px;margin-bottom:10px"><div style="width:15px;height:15px;border:1px solid black;border-radius:50%"></div><div style="padding-left:10px">'+e+"</div></div>"}return'<div style="display: -webkit-box;display: -ms-flexbox;display: flex;-ms-flex-wrap: wrap;flex-wrap: wrap;">'+a+"</div>"},this.ToCurrencyWords=(t,e)=>{if(""===e||void 0===e||null===e)return"&nbsp;";let i,o,a,s,n,r,l,c,d,h,u,p,_="",f=e.split("."),g=f[0].toString();if(0===parseInt(g))return"Zero";for(i=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],o=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],a=["","thousand","million","billion","trillion"],s=g.length,r=[];s>0;)n=s,r.push(g.slice(s=Math.max(0,s-3),n));if(l=r.length,l>a.length)return"";for(p=[],h=0;h<l;h++)c=parseInt(r[h]),c&&(d=r[h].split("").reverse().map(parseFloat),1===d[1]&&(d[0]+=10),(u=a[h])&&p.push(u),(u=i[d[0]])&&p.push(u),(u=o[d[1]])&&p.push(u),(u=i[d[2]])&&p.push(u+" hundred"));let m="";if(void 0!==t.show&&"true"===t.show){let e=" "+t.dollars+" "+t.cents;if(void 0!==f[1])switch(f[1].length){case 0:m+=p.reverse().join(" ")+" "+e;break;case 1:m+=p.reverse().join(" ")+" and "+f[1]+"/10"+e;break;case 2:m+=p.reverse().join(" ")+" and "+f[1]+"/100"+e;break;case 3:m+=p.reverse().join(" ")+" and "+f[1]+"/1000"+e}else m+=p.reverse().join(" ")+" "+e}if(void 0!==t.uppercase&&"true"===t.uppercase)for(let v of m.split(" "))_+=v.charAt(0).toUpperCase()+v.slice(1)+" ";return _}}environmentVariables(t){void 0!==t&&(this.ob_data=t)}environmentDataList(t){void 0!==t&&(this.data_list=t)}environmentVariableVoucher(t,e){void 0===this.ob_data_voucher&&(this.ob_data_voucher={}),void 0!==t&&(this.ob_data_voucher[e]=t)}}const __WEBPACK_DEFAULT_EXPORT__=functionDynamic},418:(t,e,i)=>{"use strict";i.d(e,{QV:()=>s,eg:()=>o,xG:()=>a});const o=(t,e)=>{if(""===e||void 0===e||null===e||"null"===e||"undefined"===e||e.indexOf("null")>-1)return"&nbsp;";let i=t.mark,o="",a=[],s=0,n=e.length-1;if(void 0!==i){for(let t=i.length-1;t>=0;t--){const o=i[t];"#"===o?(a[s]=e[n],n--):a[s]=o,s++}for(let t=a.length-1;t>=0;t--)o+=a[t]}else o=e;return o},a=(t,e)=>{if(""===e||void 0===e||null===e)return"&nbsp;";let i="",o=e.replace(/[^-0-9.]/g,""),a=!1;switch(t.decimal){case"1":i=parseFloat(o).toFixed(1),a=!0;break;case"2":i=parseFloat(o).toFixed(2),a=!0;break;case"3":i=parseFloat(o).toFixed(3),a=!0}if(a)switch(i=""+i,t.type){case"us":i=i.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");break;case"vn":i=i.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}return i},s=(t,e)=>{if((""+t).includes("e")){var i=(""+t).split("e"),o="";return+i[1]+e>0&&(o="+"),+(Math.round(+i[0]+"e"+o+(+i[1]+e))+"e-"+e)}return+(Math.round(t+"e+"+e)+"e-"+e)}},7903:(t,e,i)=>{"use strict";i.d(e,{QS:()=>Dv,BR:()=>kv,HX:()=>Ov});var o=i(7313),a=i(1168),s=i(5842),n=i(3628),r=i(5745),l=i(3745),c=i(6417);class d extends o.Component{constructor(t){super(t),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.updateConnections=(t,e)=>{if(!this.state.Clock_updateConnections){var i=this.connections,o=[];if(e){for(var a=-1,s=0;s<i.length;s++)if(i[s]===t){a=s;break}-1!==a&&i.splice(a,1)}else i.push(t);if(i.length>0)for(var n=0;n<i.length;n++){var r={};r.sourceId=i[n].sourceId+"",r.targetId=i[n].targetId+"",o[o.length]=r}this.flow_layout=o,this.connections=i}},this.newNode=function(t,e,i,o){var a=document.createElement("div");a.className="w",a.id=o;var s='<i class="fa fa-table" aria-hidden="true"></i>&nbsp;'+i.type+"&nbsp&nbsp";if(void 0!==i.dbcoffee_create&&"true"===i.dbcoffee_create&&(s+='<i style="color: red;" class="fa '+this.state.icon_partition_user+'" aria-hidden="true"></i>&nbsp'),void 0!==i.dbcoffee_col1&&""!==i.dbcoffee_col1&&"none"!==i.dbcoffee_col1&&(s+='<i style="color: red;" class="fa '+this.state.icon_partition_lvl+'" aria-hidden="true"></i>&nbsp'),void 0!==i.dbcoffee_col2&&""!==i.dbcoffee_col2&&"none"!==i.dbcoffee_col2&&(s+='<i style="color: red;" class="fa '+this.state.icon_partition_lvl+'" aria-hidden="true"></i>&nbsp'),s+="<br />"+i.title+'<br></br><ul style="padding-inline-start: 10px;">',null!=i.detail)for(var n=0;n<i.detail.length;n++)s+='<li id="'+i.type+i.detail[n].code+'">+&nbsp',null!=i.detail[n].datapk&&"true"===i.detail[n].datapk&&(s+='<i class="fa  '+this.state.icon_datapk+'" aria-hidden="true"></i>&nbsp'),null!=i.detail[n].autoseq&&"true"===i.detail[n].autoseq&&(s+='<i class="fa '+this.state.icon_autoseq+'" aria-hidden="true"></i>&nbsp'),null!=i.detail[n].fileid&&"true"===i.detail[n].fileid&&(s+='<i style="color: red;" class="fa  '+this.state.icon_fileid+'" aria-hidden="true"></i>&nbsp'),s+=i.detail[n].code+"&nbsp;:&nbsp"+i.detail[n].title+"</li>";s+="</ul>",a.innerHTML=s,a.style.left=t+"px",a.style.top=e+"px",this.instance.getContainer().appendChild(a),this.initNode(a),this.all_node_flow[this.all_node_flow.length]=a},this.initNode=function(t){for(var e=t.querySelectorAll("li"),i=0;i<e.length;i++)this.instance.makeSource(e[i],{anchor:"Continuous",connectorStyle:{stroke:"#5c96bc",strokeWidth:2,outlineStroke:"transparent",outlineWidth:4},connectionType:"basic",extract:{action:"the-action"}}),this.instance.makeTarget(e[i],{anchor:"Continuous",dropOptions:{hoverClass:"dragHover"},allowLoopback:!0})},this.createButton=function(t,e,i){for(var o=t,a=e,s=0,n=0;n<o.length;n++){for(var r=0,l=0,c=0;c<a.length;c++)if(o[n].type===a[c].id){r=a[c].left,l=a[c].top;break}0===l&&(l=50*(++s+1)),this.newNode(r,l,o[n],o[n].type)}this.joinConnect(i)},this.resetFlowLayout=function(){this.setState({connections:[]}),this.all_node_flow=[],this.instance.empty("designDataBasecanvas"),this.instance.reset(!0)},this.key_form="designDataBase",this.all_node_flow=[],this.flow_layout=this.props.data.flow_layout,this.connections=[],this.all_id_button=this.props.data.all_id_button,this.node_position=this.props.data.node_position;for(var e=[],i=0;i<this.all_id_button.length;i++)e[i]={},e[i].title=this.all_id_button[i].title,e[i].code=this.all_id_button[i].type;var o=[];o[0]={},o[0].title="D\xf9ng",o[0].code="true",o[1]={},o[1].title="Kh\xf4ng",o[1].code="false";var a=[];a[0]={},a[0].title="Chu\u1ed7i",a[0].code="t_string",a[1]={},a[1].title="Ng\xe0y",a[1].code="t_date",a[2]={},a[2].title="Gi\u1edd",a[2].code="t_time",a[3]={},a[3].title="Ng\xe0y v\xe0 gi\u1edd",a[3].code="t_date_time",a[4]={},a[4].title="S\u1ed1 th\u1eadp ph\xe2n",a[4].code="t_double",a[5]={},a[5].title="S\u1ed1 nguy\xean",a[5].code="t_integer",a[6]={},a[6].title="Tr\u1ea1ng th\xe1i",a[6].code="t_status",a[7]={},a[7].title="H\xecnh",a[7].code="t_img",a[8]={},a[8].title="M\xe3 v\u1ea1ch",a[8].code="t_code",this.state={icon_autoseq:"fa-magic",icon_fileid:"fa-book",icon_datapk:"fa-key",icon_partition_user:"fa-user-circle-o",icon_partition_lvl:"fa-star",Clock_updateConnections:!1,list_true_false:o,list_column_type:a,list_table:e,visibility:"",editTable:{type:"",title:"",detail:[]},editColumns:{code:"",title:"",mapping:"",type:"t_string",autoseq:"false",is_share:"false",is_mater:"false",datapk:"false",fileid:"false"},infoA:{title:"Thi\u1ebft k\u1ebf Database",des:"Y\xeau c\u1ea7u l\xe0m tr\xean Desktop",openOne:"true",ofModal:!1}}}getLayoutNode(){for(var t=[],e=0;e<this.all_node_flow.length;e++){var i={};i.id=this.all_node_flow[e].id,i.left=this.all_node_flow[e].style.left.replace("px",""),i.top=this.all_node_flow[e].style.top.replace("px",""),t.push(i)}return t}componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.createButton(this.all_id_button,this.node_position,this.flow_layout)}onClickSaveDataBase(){this.node_position=this.getLayoutNode();var t={};t.node_position=this.node_position,t.all_id_button=this.all_id_button,t.flow_layout=this.flow_layout,l.ZP.quickPost([{txcode:"#sys:bo-save-database",input:{database:t}}],{})}joinConnect(t){for(var e=t,i=0;i<e.length;i++)this.instance.connect({source:e[i].sourceId,target:e[i].targetId,type:"basic"})}onClickAddTable(){for(var t=this.all_id_button,e=0;e<t.length;e++)if(t[e].type===this.state.editTable.type)return t[e]=this.state.editTable,this.all_id_button=t,void this.autoPaint();t[t.length]=this.state.editTable,this.all_id_button=t,this.autoPaint()}checkHasRelationshipTable(t,e){for(var i=this.all_id_button,o=0;o<i.length;o++)for(var a=i[o].detail,s=0;s<a.length;s++)for(var n=i[o].type+a[s].code,r=0;r<e.length;r++)for(var l=t+e[r].code,c=0;c<this.flow_layout.length;c++){if(this.flow_layout[c].sourceId===n)return!0;if(this.flow_layout[c].sourceId===l)return!0;if(this.flow_layout[c].targetId===n)return!0;if(this.flow_layout[c].targetId===l)return!0}return!1}onClickDeleteTable(){for(var t=this.all_id_button,e=0;e<t.length;e++)if(t[e].type===this.state.editTable.type)return this.checkHasRelationshipTable(this.state.editTable.type,this.state.editTable.detail)?void window.alert((0,s.VQ)("flowDatabase_hasrelationship")):(t.splice(e,1),window.alert((0,s.VQ)("flowDatabase_deleteTable")),void this.autoPaint())}autoPaint(){this.resetFlowLayout(),this.createButton(this.all_id_button,this.node_position,this.flow_layout)}onClickAddComlumn(){var t=this.state.editTable;if(null!=t.detail){for(var e=0;e<t.detail.length;e++)if(t.detail[e].code===this.state.editColumns.code)return void window.alert((0,s.VQ)("flowDatabase_doublekey"));t.detail[t.detail.length]=this.state.editColumns,this.setState({editColumns:{code:"",title:"",mapping:"",type:"t_string",autoseq:"false",datapk:"false",fileid:"false"}}),this.autoPaint()}}onClickDeleteComlumn(){var t=this.state.editTable;if(null!=t.detail)for(var e=0;e<t.detail.length;e++)if(t.detail[e].code===this.state.editColumns.code)return t.detail.splice(e,1),this.autoPaint(),void window.alert((0,s.VQ)("flowDatabase_deleteCol"))}onChange_AddTable(t,e){var i=this.state.editTable;i[t]=e.target.value,this.setState({editTable:i})}onChange_AddColumn(t,e){var i=this.state.editColumns;i[t]=e.target.value,this.setState({editColumns:i})}onSelectTableForEdit(t){if("new"!==t.target.value){for(var e=0;e<this.all_id_button.length;e++)if(this.all_id_button[e].type===t.target.value){this.setState({editTable:this.all_id_button[e]});break}}else this.setState({editTable:{type:"",title:"",detail:[]}})}onSelectColumnForEdit(t){if("new"!==t.target.value){for(var e=0;e<this.state.editTable.detail.length;e++)if(this.state.editTable.detail[e].code===t.target.value){var i=this.state.editTable.detail[e];void 0===i.mapping&&(i.mapping=""),this.setState({editColumns:i});break}}else this.setState({editColumns:{code:"",title:"",mapping:"",type:"t_string",autoseq:"false",datapk:"false",fileid:"false"}})}render(){return(0,c.jsx)("div",{className:"form-style",style:{display:this.state.visibility},children:(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12 col-lg-12",children:(0,c.jsx)("div",{className:"col-md-12 col-lg-12",children:(0,c.jsxs)("div",{className:"prtm-block",children:[(0,c.jsxs)("div",{className:"prtm-block-title mrgn-b",children:[(0,c.jsx)("h3",{children:this.state.infoA.title}),(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"note-box bg-danger",children:"Note !"}),this.state.infoA.des]})]}),(0,c.jsx)("button",{className:"btn btn-primary",type:"button",onClick:t=>this.onClickSaveDataBase(),children:"L\u01b0u database"}),(0,c.jsx)("div",{className:"jtk-demo-main",children:(0,c.jsx)("div",{className:"jtk-demo-canvas canvas-wide statemachine-demo jtk-surface jtk-surface-nopan",id:"designDataBasecanvas"})}),(0,c.jsxs)("div",{children:["Qu\u1ea3n l\xfd table",(0,c.jsx)("br",{}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-12",name:"Danh s\xe1ch table",data:this.all_id_button,d_key:"type",d_name:"title",hasNew:!0,onChange:t=>this.onSelectTableForEdit(t)}),(0,c.jsx)(n.Z,{name:"T\xean Table",class:"col-sm-12 col-md-6",onChange:t=>this.onChange_AddTable("title",t),value:this.state.editTable.title,disabled:!1}),(0,c.jsx)(n.Z,{name:"ID",class:"col-sm-12 col-md-6",onChange:t=>this.onChange_AddTable("type",t),disabled:!1,value:this.state.editTable.type}),(0,c.jsx)("br",{}),(0,c.jsxs)("div",{children:["C\u1ea5u h\xecnh Data Coffee Shop",(0,c.jsx)("br",{}),(0,c.jsx)(r.Z,{name:"L\u01b0u theo ng\u01b0\u1eddi t\u1ea1o",class:"col-sm-12 col-md-4",d_key:"code",d_name:"title",data:[{title:"Ch\u01b0a c\u1ea5u h\xecnh",code:"none"},{title:"\xc1p d\u1ee5ng",code:"true"},{title:"Kh\xf4ng \xe1p d\u1ee5ng",code:"false"}],value:void 0!==this.state.editTable.dbcoffee_create?this.state.editTable.dbcoffee_create:"none",onChange:t=>this.onChange_AddTable("dbcoffee_create",t)}),(0,c.jsx)(r.Z,{name:"L\u01b0u theo c\u1ed9t 1 (kh\xf4ng gi\u1ed1ng c\u1ed9t 2)",hasNew:!0,has_new_name:"Kh\xf4ng d\xf9ng",has_new_value:"none",class:"col-sm-12 col-md-4",d_key:"code",d_name:"title",data:this.state.editTable.detail,value:void 0!==this.state.editTable.dbcoffee_col1?this.state.editTable.dbcoffee_col1:"none",onChange:t=>this.onChange_AddTable("dbcoffee_col1",t)}),(0,c.jsx)(r.Z,{name:"L\u01b0u theo c\u1ed9t 2 (kh\xf4ng gi\u1ed1ng c\u1ed9t 1)",hasNew:!0,has_new_name:"Kh\xf4ng d\xf9ng",has_new_value:"none",class:"col-sm-12 col-md-4",d_key:"code",d_name:"title",data:this.state.editTable.detail,value:void 0!==this.state.editTable.dbcoffee_col2?this.state.editTable.dbcoffee_col2:"none",onChange:t=>this.onChange_AddTable("dbcoffee_col2",t)})]}),(0,c.jsx)("br",{}),(0,c.jsx)("button",{className:"btn btn-primary",type:"button",onClick:()=>this.onClickAddTable(),children:"L\u01b0u table v\xe0 v\u1ebd l\u1ea1i"}),(0,c.jsx)("button",{className:"btn btn-primary",type:"button",onClick:()=>this.onClickDeleteTable(),children:"X\xf3a table"})]}),(0,c.jsx)("br",{}),(0,c.jsxs)("div",{children:["Qu\u1ea3n l\xfd columns",(0,c.jsx)("br",{}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-12",name:"Danh s\xe1ch column",hasNew:!0,d_key:"code",d_name:"title",data:this.state.editTable.detail,onChange:t=>this.onSelectColumnForEdit(t)}),(0,c.jsx)(n.Z,{name:"ID",class:"col-sm-12 col-md-4",onChange:t=>this.onChange_AddColumn("code",t),value:this.state.editColumns.code}),(0,c.jsx)(n.Z,{name:"ID (\xc1nh x\u1ea1)",class:"col-sm-12 col-md-4",onChange:t=>this.onChange_AddColumn("mapping",t),value:this.state.editColumns.mapping}),(0,c.jsx)(n.Z,{name:"T\xean column",class:"col-sm-12 col-md-4",onChange:t=>this.onChange_AddColumn("title",t),value:this.state.editColumns.title}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-2",name:"Lo\u1ea1i column",hasNew:!1,data:this.state.list_column_type,onChange:t=>this.onChange_AddColumn("type",t),value:this.state.editColumns.type}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-2",name:"Kh\xf3a ch\xednh",hasNew:!1,data:this.state.list_true_false,onChange:t=>this.onChange_AddColumn("datapk",t),value:this.state.editColumns.datapk}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-2",name:"T\xean file",hasNew:!1,data:this.state.list_true_false,onChange:t=>this.onChange_AddColumn("fileid",t),value:this.state.editColumns.fileid}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-2",name:"T\u1ef1 t\u0103ng",hasNew:!1,data:this.state.list_true_false,onChange:t=>this.onChange_AddColumn("autoseq",t),value:this.state.editColumns.autoseq}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-2",name:"Chia s\u1ebd",hasNew:!1,data:this.state.list_true_false,onChange:t=>this.onChange_AddColumn("is_share",t),value:this.state.editColumns.is_share}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-2",name:"Master Data",hasNew:!1,data:this.state.list_true_false,onChange:t=>this.onChange_AddColumn("is_mater",t),value:this.state.editColumns.is_mater}),(0,c.jsx)("br",{}),(0,c.jsx)("button",{className:"btn btn-primary",type:"button",onClick:()=>this.onClickAddComlumn(),children:"Th\xeam c\u1ed9t (s\u1eeda th\xec ch\u1ec9 c\u1ea7n l\u01b0u table)"}),(0,c.jsx)("button",{className:"btn btn-primary",type:"button",onClick:()=>this.onClickDeleteComlumn(),children:"X\xf3a c\u1ed9t"})]})]})})})})})}}const h=d;var u=i(3063),p=i(7751),_=i(9676);class f extends o.Component{constructor(t){super(t),this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.getDataFull=()=>{var t;return{config:{default:{isBorder:"true"===this.props.isBorder,class:this.props.class||"col-12",title:"true"===String(this.props.isBorder)?(null===(t=this.props.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props.name:""}}}};var e={};"cView"===t.inputType&&(e.code=t.code),this.AUTO_ID=s.ZP.autoID(),this.state={list_group:[],data:s.ZP.cloneJson(t.list_input),infoView:e,lang_select:s.ZP.getLangKey()}}conVertModeForm(t,e){return e}getListComponent(){let t=this.state.data,e=[],i=0;for(let n of t){var o;n=this.conVertModeForm(this.props.infoA.mode_form,n);const t={btn_of_grid:this.props.btn_of_grid,key:n.default.codeHidden,index:i,default:n.default,visibility:n.visibility,config:n.config,role:n.role,property:n.property,validate:n.validate,lang:n.lang,configAVD:n.configAVD,inputType:n.inputtype,value:n.value,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,infoView:this.state.infoView};let r=null===(o=n.default)||void 0===o?void 0:o.ofgroup,l=e[e.length-1];if(!n.config.onTable)if(r&&"false"!==r&&r===(null===l||void 0===l?void 0:l.groupid))l.list_cpn.push(t);else{var a,s;let i={list_cpn:[],groupid:null===(a=n.default)||void 0===a?void 0:a.ofgroup,class:null===(s=n.default)||void 0===s?void 0:s.class_ofgroup};i.list_cpn.push(t),e.push(i)}i++}return e}componentDidMount(){setTimeout((()=>{let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.hasOwnProperty("addView")&&t.addView(this)}),s.ZP.getTimeAddComponent()),this.setState({list_group:this.getListComponent()})}render(){const t=(0,_.RP)("uView");return(0,c.jsx)(t,{dataFull:this.getDataFull(),children:this.state.list_group.map(((t,e)=>{if(0===t.list_cpn.length)return null;{const i=t.list_cpn.slice(1),a=i.length>0;return(0,o.createElement)(p.Z,(0,u.Z)((0,u.Z)({},t.list_cpn[0]),{},{layoutIndex:this.props.layoutIndex,viewID:this.props.viewID,isOfgroupParent:a,ofGroupData:i,key:this.AUTO_ID+e}))}}))})}}const g={cView:f};class m extends o.Component{render(){const t=g[this.props.inputType];return(0,c.jsx)(t,(0,u.Z)((0,u.Z)({},this.props),{},{list_view:this.props.list_view}))}}const v=m;class b extends o.Component{constructor(t){super(t),this.changeKeyLanguage=()=>{this.setState({key_lang:s.ZP.getLangKey()})},this.hanndleChangeTabActive=t=>new Promise((e=>{this.setState({view_active:t},(()=>{e(!0)}))})),this.onSelectTab=(t,e)=>{this.setState({view_active:e})},this.state={ID:s.ZP.autoID(),key_lang:s.ZP.getLangKey(),tab_selected:this.props.list_view[0].name,DOM_views_tab:[],DOM_view_top:[],DOM_view_bottom:[],view_active:""};let e=-1;for(let i=0;i<this.props.list_view.length;i++){const t=this.props.list_view[i];if("true"===t.isTab){-1==e&&(e=i);let o={};o.title=t.name,o.id=s.ZP.autoID(),o.condition=t.condition,o.more_information=t.more_information,o.lang=t.lang,o.DOM_elm=(0,c.jsx)(v,{btn_of_grid:this.props.btn_of_grid,index:i,name:t.name,code:t.code,isTab:t.isTab,isBorder:t.isBorder,class:t.class,inputType:t.inputtype,visibility:t.visibility,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,list_input:t.list_input,lang:t.lang,viewID:o.id,layoutIndex:this.props.index},i),this.state.DOM_views_tab.push(o),0===i&&this.setState({view_active:o.id})}else-1===e?this.state.DOM_view_top.push((0,c.jsx)(v,{btn_of_grid:this.props.btn_of_grid,index:i,name:t.name,code:t.code,isTab:t.isTab,isBorder:t.isBorder,class:t.class,inputType:t.inputtype,visibility:t.visibility,lang:t.lang,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,list_input:t.list_input,viewID:t.id},i)):this.state.DOM_view_bottom.push((0,c.jsx)(v,{btn_of_grid:this.props.btn_of_grid,index:i,name:t.name,code:t.code,isTab:t.isTab,isBorder:t.isBorder,class:t.class,inputType:t.inputtype,visibility:t.visibility,lang:t.lang,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,list_input:t.list_input,viewID:t.id},i))}}componentDidMount(){setTimeout((()=>{let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.hasOwnProperty("addLayout")&&t.addLayout(this)}),s.ZP.getTimeAddComponent())}isEmpty(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return JSON.stringify(t)===JSON.stringify({})}getListTabView(){let t=[],e=s.ZP.getFormAppAuto(this.props.infoA.key_form),i={};if(void 0!==e&&(i=e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{})),this.isEmpty(i))for(const s of this.state.DOM_views_tab){var o;t.push({tabInfo:{title:(null===(o=s.lang)||void 0===o?void 0:o[this.state.key_lang])||s.title,id:s.id,more_information:this.getMoreInformation(s.more_information,i)},DOM_elm:s.DOM_elm,isHidden:!1,sysStyle:{show:s.id===this.state.view_active?"show":""}})}else for(const r of this.state.DOM_views_tab){var a,n;t.push({tabInfo:{title:(null===(a=r.lang)||void 0===a?void 0:a[this.state.key_lang])||r.title,id:r.id,error:(null===(n=this.props.list_view_error)||void 0===n?void 0:n[r.id])||"",more_information:this.getMoreInformation(r.more_information,i)},DOM_elm:r.DOM_elm,isHidden:!s.ZP.checkDynamicCondition(i,r.condition||""),sysStyle:{show:r.id===this.state.view_active?"show":""}})}return t}getNodeJson(t,e){if("object"!==typeof t||!e)return;let i=e.split("."),o=t;for(const a of i){if(void 0===o||null===o)return;o=o[a]}return o}getMoreInformation(t,e){if(!t||""===t)return;let i=s.ZP.component_getListCode(t);for(let o of i){let i=this.getNodeJson(e,o.code);if("object"===typeof i)i=JSON.stringify(i);else{if(!i&&0!==i)return;i+=""}t=t.replace(o.key,i)}return t}render(){const t=(0,_.RP)("uFormTab"),e=(0,_.RP)("uLayout");return(0,c.jsxs)(o.Fragment,{children:[this.state.DOM_view_top.length>0&&(0,c.jsx)(e,{children:this.state.DOM_view_top}),this.state.DOM_views_tab.length>0&&(0,c.jsx)(t,{dataFull:{data:this.getListTabView(),isLoadingEnd:this.props.loading_form_end,abs_select:this.onSelectTab}}),this.state.DOM_view_bottom.length>0&&(0,c.jsx)(e,{children:this.state.DOM_view_bottom})]})}}const y={cLayout:b};class A extends o.Component{render(){const t=y[this.props.inputType];return(0,c.jsx)(t,(0,u.Z)((0,u.Z)({},this.props),{},{ref:t=>{this.ref_layoutControl=t},list_view:this.props.list_view}))}}const D=A,k=t=>{var e=t.childNodes,i={inputType:"cHtml"};i.tagHtml=t.tagName,i.tagAtt=C(t),void 0!==i.tagAtt&&void 0!==i.tagAtt.style&&(i.tagAtt.style=O(i.tagAtt.style)),1===t.childNodes.length&&(i.content=t.textContent),t.hasOwnProperty("getAttribute")&&(null!=t.getAttribute("class")?(i.class=t.getAttribute("class"),i.code=t.getAttribute("code")):i.class=""),i.loadScreen=[];for(var o=0;o<e.length;o++)if(e[o]&&void 0!==e[o].tagName)if(e[o].childNodes&&e[o].childNodes.length>0)i.loadScreen[i.loadScreen.length]=k(e[o]);else{var a={};a.inputType=e[o].tagName,a.tagAtt=C(e[o]),void 0!==a.tagAtt&&void 0!==a.tagAtt.style&&(a.tagAtt.style=O(a.tagAtt.style)),i.loadScreen[i.loadScreen.length]=a}return i},O=t=>{var e={};if(void 0!==t){for(var i=t.split(";"),o=0;o<i.length;o++)if(""!==i[o]){var a=i[o].split(":");a.length>0&&(e[w(a[0].trim())]=a[1].trim())}return e}return e},w=t=>{var e=t;if(""!==t&&t.includes("-")){var i=t.split("-");i.length>0&&(e=i[0]+i[1].charAt(0).toUpperCase()+i[1].slice(1))}return e},C=t=>{var e={},i=t.attributes;if(void 0!==i)for(var o=i.length-1;o>=0;o--)e[i[o].name]=i[o].value;return e},x=(t,e,i)=>{if(void 0!==t&&t.length>0)for(var o=0;o<t.length;o++){if(t[o].tagAtt&&void 0!==t[o].tagAtt.code){var a=S(t[o].tagAtt.code,e);if(void 0!==a)for(var s in a)t[o][s]=a[s];t[o].inputType.includes("TABLE")&&(t[o].btn_of_grid=i)}void 0!==t[o].loadScreen&&t[o].loadScreen.length>0&&(t[o].loadScreen=x(t[o].loadScreen,e,i))}return t},S=(t,e)=>{if(void 0!==t)for(var i=0;i<e.length;i++){var o=e[i].list_view;if(void 0!==o)for(var a=0;a<o.length;a++)for(var s=o[a].list_input,n=0;n<s.length;n++)if(void 0!==s[n].default.code&&s[n].default.code===t.trim())return s[n]}};var M=i(5197);class P{static async callRule(t,e,i,o,a,n){var r=[];let l=!1;var c={data:i,event:n,infoA:o,infoA_parent:a,configComponent:e};let d=s.ZP.getFormAppAuto(o.key_form);for(const s of t){const t=new M.Z[s.code];t.setConfig(s),T(s,c)&&t.checkUse(c)&&(r[r.length]={code:s.code,rule_elm:t})}l=(null===r||void 0===r?void 0:r.length)>0,d&&l&&d.setLoadingRule(!0);var h=-1;for(const s of r){let t=await s.rule_elm.start(c);"getInfo"===s.code&&(-1===h&&(h=0),!1===t&&h++)}return d&&l&&d.setLoadingRule(!1),-1!==h&&d.hasOwnProperty("setStatusToForm_AndRunRule")&&d.setStatusToForm_AndRunRule(h>0?11:0),s.ZP.isDebug?r.map((t=>t.rule_elm.config)):[]}}function T(t,e){if("isOpenFromOther"===e.event)return!0;if(!0===t.isStart&&"isStart"===e.event)return!0;{var i;const o=t.config,a=e.configComponent,s=e.event,n=o.component_event;if(("all"===n||s===n)&&`;${o.component_action.trim()};`.includes(`;${null===(i=a.code)||void 0===i?void 0:i.trim()};`))return!0}return!1}var I=i(8022),F=i(1896);const N=["All","setCMD","set","get","setAdvanced","getAdvanced","getDataOOP"],L=(t,e)=>{switch(e){case"build_api":!function(t,e){const i=[{code:"url",value:"/api/exp/exp"},{code:"body",value:"auto"},{code:"type",value:"create",data:["create","search","getinfo","delete"],type:"array"}],o={script:t,tutorial:[{value:"Giao di\u1ec7n t\u1ea1o api t\u1ef1 \u0111\u1ed9ng"}]};e.ref_debug.current.handleOpen(t,i,o,((t,i,o,a)=>{const{url:s,body:n}=a;let r=s.trim();r=r.trim();let l=e.props.form_code+r.replace(/\//g,"_");var c=n;let d={};d="auto"!==c?JSON.parse(c):e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}),delete d.errorjwebui_code;const h={learn_api_name:l,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+r,learn_api_data:e.props.form_code,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:"POST",learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(Z(d,e.props.form_code)),learn_api_id:l,AFGHkeyIndexWJ:l,AFGHkeyTime:1603872320968,AFGHkeyWorkFlow:"",AFGHTimeWJ:1603872320968,app_code:"o9"};j(t,{BUTTON:{txFO:`[{"txcode":"#sys:fo-create-dataAPI","input":{"list_component":"*","list_view":"","table_code":"${e.props.form_code}","learn_api":"${l}"}}]`},API:h},!0)}))}(e,t);break;case"h=f":!function(t){t.callDirFromSupport("setCMD",{list_component:`*;${JSON.stringify(E(t)).replace(/,/g,";")}`,list_view:"",inform:"true",checkError:"false"},{visible:!0})}(t);break;case"ai":!function(t){t.callDirFromSupport("toolAutoValue",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{})}(t);break;case"debug":!function(t,e){const i=[{code:"cpn_code",value:"- Select one -",data:E(e),type:"array"},{code:"func_call",value:"All",data:N,type:"array"},{code:"condition",value:""}],o={script:t,tutorial:[{value:"Giao di\u1ec7n debug c\xe1c h\xe0m t\xe1c \u0111\u1ed9ng \u0111\u1ebfn component \u0111\u01b0\u1ee3c ch\u1ecdn (code = cpn_code)"}]};e.ref_debug.current.handleOpen(t,i,o,((t,i,o,a)=>{var n,r;const{cpn_code:l,func_call:c,condition:d}=a,h=s.ZP.cloneJson(null===(n=e.debug_form.component[l])||void 0===n?void 0:n.callDirFromSupport)||[],u=s.ZP.cloneJson(null===(r=e.debug_form.component[l])||void 0===r?void 0:r.runRuleFunction)||[];j(t,{func_call:h.filter((t=>(t.function_name===c||"All"===c)&&(s.ZP.checkCondition(t,d)||!d))),rule_call:u},!0)}))}(e,t);break;case"condition":!function(t,e){var i=prompt("Nh\u1eadp c\xe2u \u0111i\u1ec1u ki\u1ec7n: ","");let o=function(t,e){let i=e,o={},a=s.ZP.component_getListCode(e);a.length>0&&(o=t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}));return e=s.ZP.convertCondition(e,o),{old_condition:i,condition:e,data_component:o}}(e,i);j(t,o,!0)}(e,t);break;case"build_getinfo":!function(t,e){const i=[{code:"api_getinfo",value:"/api/exp"},{code:"body_request",value:"{    }"},{code:"body_response",value:"{ }"},{code:"input_key",value:""},{code:"label_key",value:""}],o={script:t,tutorial:[{value:"Giao di\u1ec7n t\u1ea1o rule GetInfo t\u1ef1 \u0111\u1ed9ng"}]};e.ref_debug.current.handleOpen(t,i,o,((t,i,o,a)=>{let{api_getinfo:n,body_request:r,body_response:l,label_key:c,input_key:d}=a;r=JSON.parse(r),l=JSON.parse(l);let h=Object.keys(r).toString().replace(/,/,"_"),u=R(h.split("_")[0],e).config.structable_read.split(".")[0];const p=e.props.form_code;let _=Z(r,u);const f=`api_rulefunc_${p}_get_info_${h}`,g={learn_api_name:f,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+n,learn_api_data:f,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:"POST",learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(_),learn_api_id:f,AFGHkeyIndexWJ:f,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime(),app_code:"o9"};let m={};for(const s in l){let t=R(s,e);t?m[t.default.code]=`${f}.${s}`:m[s]=`${f}.${s}`}console.log("body_cpn_result",m);const v={code:"getInfo",config:{component_event:"enter_tab",component_action:R(d,e).default.code,component_result:JSON.stringify(m),isSetCode:"true",data_type:"api",api_id:f,condition:""},isStart:!1,inUse:!0,order:1};let b={info:s.ZP.cloneJson(e.props.infoA),list_layout:s.ZP.cloneJson(e.props.conf),react_txt:""};b.info.ruleStrong.push(v),b.list_layout.forEach((t=>{t.list_view.forEach((t=>{let e=t.list_input;e.forEach(((t,i)=>{var o,a,n;(null===(o=t.config)||void 0===o||null===(a=o.structable_read)||void 0===a||null===(n=a.split("."))||void 0===n?void 0:n[1])===d&&(t.default.ofgroup=t.default.code,t.default.class="col-sm-6 col-12",t.default.class_ofgroup="col-xl-4 col-lg-4 col-md-5 col-sm-5 offset-xl-2-right offset-lg-2-right offset-md-1-right offset-sm-1-right",e=e.splice(i+1,0,{config:{action:"",structable:`${u}.${c}`,structable_read:`${u}.${c}`,data_default:""},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"jLabel",default:{name:c,code:c,codeHidden:s.ZP.autoID(),class:"col-6",condition:"",role:"",ofgroup:t.default.code,class_ofgroup:""}}))}))}))}));const y={form_code:p,api_code:f,api_config:g,form_config:b,script:t};console.log("input",y);var A=[{txcode:"#sys:bo-jwebui-tools",input:y}];(0,F.Yr)(A,{}).then((t=>{console.log(t)}))}))}(e,t)}};function E(t){return Object.keys(t.debug_form.component)}function j(t,e,i){console.log("==================================================================="),console.log("SCRIPT  => ",t.toUpperCase()),console.log("CONTENT => ",e),console.log("-------------------------------------------------------------------"),i&&s.ZP.copyToClipboard(JSON.stringify(e))}function Z(t,e){let i={};for(const o in t)if(t.hasOwnProperty(o)){const a=t[o];"number"===typeof a&&(i[o.toLocaleLowerCase()]=`MapS.dataN(${e}.${o.toLocaleLowerCase()})`),"string"===typeof a&&(/\d\d\/\d\d\/\d\d\d\d/.test(a)?i[o.toLocaleLowerCase()]=`MapS.dateDDMMYYYY(${e}.${o.toLocaleLowerCase()})`:i[o.toLocaleLowerCase()]=`MapS.dataS(${e}.${o.toLocaleLowerCase()})`),"object"===typeof a&&!1===Array.isArray(a)&&(i[o.toLocaleLowerCase()]=Z(a,e)),"object"===typeof a&&!0===Array.isArray(a)&&(i[o.toLocaleLowerCase()]=`MapS.arrayJson(${e}.${o.toLocaleLowerCase()}|${JSON.stringify(Z(a[0],o))})`)}return i}function R(t,e){let i;return e.props.conf.forEach((e=>{e.list_view.forEach((e=>{e.list_input.forEach(((e,o)=>{var a,s,n;(null===(a=e.config)||void 0===a||null===(s=a.structable_read)||void 0===s||null===(n=s.split("."))||void 0===n?void 0:n[1])===t&&(i=e)}))}))})),i}class Q extends o.Component{constructor(t){super(t),this.handleOpen=(t,e,i,o)=>{let a={script:t,config:e,dataItem:i,funcCallBack:o,dataTool:{}};for(const s of e)a.dataTool[s.code]=s.value||"";this.setState({devTool:a,isOpen:!0})},this.handleClose=()=>{this.setState({isOpen:!1},(()=>{const{script:t,config:e,dataItem:i,dataTool:o,funcCallBack:a}=this.state.devTool;a&&a(t,e,i,o)}))},this.handleChange=(t,e)=>{let i=this.state.devTool,o=this.state.devTool.config;for(const a of o)a.code===t&&(a.value=e,i.dataTool[t]=e);this.setState({devTool:i})},this.buildDataFullInput=()=>{},this.buildDataFullSelect=()=>{},this.builDataFullCheckbox=()=>{},this.getDataFullModal=()=>({config:{default:{title:"",size:"M"},cmd:{visibility:this.state.isOpen}},abs_Close:this.handleClose}),this.getBtnDatafull=(t,e,i,o)=>({config:{default:{title:t,type:e,class:"",icon:i},cmd:{disable:!1,isLoading:!1}}}),this.builDataFull=(t,e)=>{var i;const o=t.code||"",a=t.value||"",n=t.icon||"",r=t.type||"string",l=t.data||[],c=null!==t&&void 0!==t&&null!==(i=t.data_filter)&&void 0!==i&&i.length?t.data_filter:l;switch(r){case"string":return{abs_Change:t=>{this.handleChange(o,t.target.value)},config:{default:{placeholder:o,title:o,type:"text",class:"col-6",required:!1,icon:n},cmd:{disable:!1,visible:!0,error:{message:"",type:""},isFocus:!1,isLoading:!1},mode:{textAlign:""}},mode:{isSearch:!1,readOnly:!1},valueTitleHover:o,value:a};case"array":return{abs_Change:t=>{this.handleChange(o,t)},abs_search:t=>{const e=t.target.value;let i=this.state.devTool;for(const a of i.config)a.code===o&&(a.search_value=e,a.data_filter=l.filter((t=>t.includes(e)||!e)));this.setState({devTool:i})},config:{default:{search:{placeholder:s.ZP.getLang("jselect_search")},data_status:s.ZP.getLang("jselect_no_result"),title:o,type:"",class:"col-6",required:!1},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{moreColumn:!1},column:[]},data:null===c||void 0===c?void 0:c.map((t=>({title:t,value:t,selected:t===a}))),input_value:a,search_value:t.search_value||""}}},this.state={devTool:{script:"",config:[],dataItem:{},dataTool:{},funcCallBack:null},isOpen:!1}}render(){const t=this.state.devTool.config,e={string:(0,_.RP)("uInput"),array:(0,_.RP)("uSelectItem")};let i=(0,_.RP)("uModal");const o=(0,_.RP)("uForm"),a=(0,_.RP)("uLayout"),n=(0,_.RP)("uView"),r=(0,_.RP)("uButton"),l=[{name:"Accept",color:"primary",icon:"check",key:"",onClick:()=>{const{script:t,config:e,dataItem:i,dataTool:o,funcCallBack:a}=this.state.devTool;a&&a(t,e,i,o)}},{name:"Clear",color:"danger",icon:"delete",onClick:()=>{let t=this.state.devTool;for(const e of t.config)t.dataTool[e.code]="",e.value="";this.setState({devTool:t})}}],d=this.state.devTool.dataItem.tutorial||[],h=this.state.devTool.dataItem.script||"";return(0,c.jsxs)(i,{dataFull:this.getDataFullModal(),children:[(0,c.jsxs)(o,{dataFull:{config:{default:{title:"Developer Tool: "+h,icon:"bug_report"}},title_button:{close_button:s.ZP.getLang("form_close_title"),add_form:s.ZP.getLang("form_add_title")},cmd:{visibility:!0}},children:[d.map((t=>(0,c.jsx)("div",{style:{marginTop:"20px",color:"darkgreen"},children:(0,c.jsx)("i",{children:t.value})}))),(0,c.jsx)(a,{children:(0,c.jsx)(n,{class:"col-12",children:t.map((t=>{const i=t.type||"string",o=e[i];return(0,c.jsx)(o,{dataFull:this.builDataFull(t,this)})}))})}),(0,c.jsx)(a,{children:(0,c.jsx)(n,{class:"col-12",children:l.map((t=>(0,c.jsx)(r,{dataFull:(0,u.Z)((0,u.Z)({},this.getBtnDatafull(t.name,t.color,t.icon,t.key)),{},{abs_Click:t.onClick})})))})})]}),(0,c.jsx)("div",{className:"modal-body",ref:"content_modal"})]})}}const z=Q;class U extends o.Component{constructor(t){var e;super(t),e=this,this.addView=t=>{void 0!==t&&this.list_view.push(t)},this.addDebug=(t,e)=>{t},this.addLayout=t=>{void 0!==t&&this.list_layout.push(t)},this.addComponent=t=>{if(s.ZP.isDebug())for(const i in this.list_component_debug){let e=this.list_component_debug[i];t.props.default.codeHidden===e.default.codeHidden&&delete this.list_component_debug[i]}if(void 0!==t&&(this.list_component.push(t),this.list_component_max===this.list_component.length&&this.form_blockCheckMaxComponent)){if(this.form_blockCheckMaxComponent=!1,this.list_component.length>0)for(var e=0;e<this.list_component.length;e++)this.list_component[e].hasOwnProperty("checkIsLoading")&&this.list_component[e].hasOwnProperty("getCodeHidden")&&!1===this.list_component[e].checkIsLoading()&&this.list_isLoading++;0===this.list_isLoading&&(this.loading_final=!0),this.formStart()}},this.changeKeyLanguage=()=>{if(this.list_layout.length>0)for(let e=0;e<this.list_layout.length;e++)this.list_layout[e].hasOwnProperty("changeKeyLanguage")&&this.list_layout[e].changeKeyLanguage();if(this.list_view.length>0)for(let e=0;e<this.list_view.length;e++)this.list_view[e].hasOwnProperty("changeKeyLanguage")&&this.list_view[e].changeKeyLanguage();if(this.list_component.length>0)for(let e=0;e<this.list_component.length;e++)this.list_component[e].hasOwnProperty("changeKeyLanguage")&&this.list_component[e].changeKeyLanguage();void 0!==this.refs.timeline_ref&&this.refs.timeline_ref.changeKeyLanguage(),"none"!==this.state.hasError&&this.buildValidateForm();let{lang:t}=this.state;t.close_button=s.ZP.getLang("form_close_title"),t.add_form=s.ZP.getLang("form_add_title"),this.setState({lang:t})},this.forDebug=t=>{if(this.list_component.length>0)for(var e=0;e<this.list_component.length;e++)this.list_component[e].hasOwnProperty("forDebug")&&this.list_component[e].forDebug(t);this.setState({isDebug:t})},this.rule_runIsStart=async()=>{const t=["setFocus"];for(var e=[],i=0;i<this.state.ruleStrong.length;i++){const o=this.state.ruleStrong[i];void 0!==o.isStart&&!1===t.includes(o.code)&&!0!==o.isDidStart&&(e[e.length]=this.state.ruleStrong[i])}if(e.length>0)return P.callRule(e,{},{},this.state.infoA,this.state.infoA_parent,"isStart")},this.ruleDidStart=async()=>{const t=["setFocus"];for(var e=[],i=0;i<this.state.ruleStrong.length;i++){const o=this.state.ruleStrong[i];o&&(void 0!==o.isStart&&!0===t.includes(o.code)||!0===o.isDidStart)&&(e[e.length]=this.state.ruleStrong[i])}if(e.length>0)return P.callRule(e,{},{},this.state.infoA,this.state.infoA_parent,"isStart")},this.setFormValidateFromComponent=(t,e)=>{void 0!==t&&!0===t&&!1===this.formValidate&&(s.ZP.isDebug(),this.formValidate=t)},this.setFormValidateFromFunctionClient=t=>{void 0!==t&&(!0!==t&&!1!==t||(this.formValidate=t))},this.setCompareroCpn=t=>{this.comprare=[t]},this.getFormValidate=()=>this.buildValidateForm(),this.getListError=()=>this.state.list_error,this.getValidateForm=()=>{let t=[];for(const e of this.list_component){let i=!1,o="";e.hasOwnProperty("getInfoCheckRun")&&(i=e.getInfoCheckRun().block),e.hasOwnProperty("getInfoErrror")&&(o=e.getInfoErrror()),!0!==i&&o&&t.push(Object.assign({type:"form"},o))}return t.length>0&&console.log("list_error",t),t},this.runRuleFunctionQueue=async()=>{for(;0!==this.queue_rules.length;){const{configComponent:t,dataComponent:e,infoA_Parent:i,event_code:o}=this.queue_rules.shift();await P.callRule(this.state.ruleStrong,t,e,this.state.infoA,i,o)}},this.runRuleFunction=async(t,e,i,o)=>{if(!0===this.state.is_loading_form||0!==this.queue_rules.length)this.queue_rules.push({configComponent:t,dataComponent:e,infoA_Parent:i,event_code:o});else if(this.state.ruleStrong.length>0){const r=await P.callRule(this.state.ruleStrong,t,e,this.state.infoA,i,o);var a,n;if(s.ZP.isDebug())null!==(a=this.debug_form.component)&&void 0!==a&&null!==(n=a[t.code])&&void 0!==n&&n.runRuleFunction||(this.debug_form.component=s.ZP.setNodeJson(this.debug_form.component,t.code+".runRuleFunction",[])),this.debug_form.component[t.code].runRuleFunction.push({event:o,start_rules:r})}},this.getInfoComponentParent=()=>this.props.componentConfigDefault,this.checkReloadValidateFormParent=()=>this.props.componentConfigDefault.isReloadValidate,this.getInfoA=()=>this.state.infoA,this.putData=(t,e,i)=>{null==this.obDataForm[t]&&(this.obDataForm[t]={}),this.obDataForm[t][e]=i},this.putDataOneKey=(t,e)=>{this.obDataForm[t]=e},this.putDataJoin=t=>{for(var e in t)if(void 0!==this.obDataForm[e])for(var i in t[e])this.obDataForm[e][i]=t[e][i];else this.obDataForm[e]=t[e]},this.getDataForm=t=>(!0!==this.is_did_set_data||this.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true",isCallFromFormChild:t},{}),this.getData("")),this.getDataAll=function(t){var i,o;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!0!==t)return e.getDataForm(n);let r=e.getDataForm(n),l=null===(i=e.props)||void 0===i||null===(o=i.infoA_parent)||void 0===o?void 0:o.key_form;if(l){let t=s.ZP.getFormAppAuto(l).getDataAll(!0,a,!0);r=a?Object.assign(r,t):Object.assign(t,r)}return r},this.getData=t=>void 0!==t&&""!==t.trim()&&null!=this.obDataForm[t]?s.ZP.cloneJson(this.obDataForm[t]):s.ZP.cloneJson(this.obDataForm),this.getDataAdvanced=()=>this.callDirFromSupport("getAdvanced",{list_component:"*"},{}),this.putDataAll=t=>{s.ZP.isDebug()&&console.log("putDataAll===>",s.ZP.cloneJson(t)),this.obDataForm=t},this.putDataAll_andSet=(t,e)=>{s.ZP.isDebug()&&console.log("putDataAll_andSet===>",s.ZP.cloneJson(t)),void 0!==e&&!0===e&&this.clearForm();for(const i in t)if(t.hasOwnProperty(i)){const e=t[i];if("object"===typeof e&&null!==e&&!1===Array.isArray(e)){for(const t in e)if(e.hasOwnProperty(t)){const o=e[t];void 0===this.obDataForm[i]&&(this.obDataForm[i]={}),this.obDataForm[i][t]=o}}else Array.isArray(e)&&(this.obDataForm[i]=e)}this.callDirFromSupport("set",{},s.ZP.cloneJson(this.obDataForm))},this.putDataAll_andSetComponent=(t,e)=>{s.ZP.isDebug()&&console.log("putDataAll_andSetComponent===>",s.ZP.cloneJson(t));for(const i in t)if(t.hasOwnProperty(i)){const e=t[i];if("object"===typeof e&&null!==e&&!1===Array.isArray(e)){for(const t in e)if(e.hasOwnProperty(t)){const o=e[t];void 0===this.obDataForm[i]&&(this.obDataForm[i]={}),this.obDataForm[i][t]=o}}else Array.isArray(e)&&(this.obDataForm[i]=e)}this.callDirFromSupport("setComponent",{list_component:e,list_view:""},s.ZP.cloneJson(this.obDataForm))},this.clearForm=()=>{this.obDataForm={},this.setState({follow:{hasFollow:!1,removeFollow:!1}}),this.showErrorFromServer(),this.callDirFromSupport("reload",{},this.obDataForm)},this.reload=t=>{void 0===t?this.callDirFromSupport("reload",{},this.obDataForm):this.callDirFromSupport("reload",{},t)},this.reloadComponent=t=>{this.callDirFromSupport("reloadComponent",{list_component:t})},this.clearTimeOut=()=>{this.callDirFromSupport("clearTimeOut",{},this.obDataForm)},this.componentIsLoaded=t=>{this.list_statusIsLoadingFromComponent++,this.list_statusIsLoadingFromComponent===this.list_isLoading&&(this.loading_final=!0,this.formStart())},this.clearError=()=>{this.callDirFromSupport("clearError","",{}),this.showError(!1)},this.callDirOneComponent=(t,e,i)=>{let o={};if(void 0===t)return o;if(this.list_component.length>0)for(let a=0;a<this.list_component.length;a++)if(this.list_component[a].hasOwnProperty("getInfoCheckRun")){let s=this.list_component[a].getInfoCheckRun();if(s.default.code===e&&this.list_component[a].hasOwnProperty(t)){o[s.default.code]=this.list_component[a][t](e,i);break}}},this.callDirFromSupport=(t,e,i)=>{let o=s.ZP.cloneJson(i);var a={};if(void 0===t)return a;let n=e.list_component||"";if(n=n.replace(/\w+\([^\\)]+\)/gm,";"),this.list_component.length>0)for(var r=0;r<this.list_component.length;r++)if(this.list_component[r].hasOwnProperty("getInfoCheckRun")){var l=this.list_component[r].getInfoCheckRun(),c=!1;if(",setCallBuildFormBack,setCallFormBack,clearError,checkValidate,reload,set,getElearning,clearTimeOut,".includes(","+t+",")?c=!0:(void 0!==e.list_view&&""!==e.list_view&&(";"+e.list_view+";").includes(";"+l.view.code+";")&&(c=!0),c||void 0===n||""!==n&&((";"+n+";").includes(";*;")||(";"+n+";").includes(";"+l.default.code+";"))&&(c=!0),c||void 0===e.codeHidden||""!==e.codeHidden&&(";"+e.codeHidden+";").includes(";"+l.default.codeHidden+";")&&(c=!0)),!0===l.block&&"setCMD"!==t&&(c=!1),!c)continue;if("setComponent"===t&&(t="set"),"reloadComponent"===t&&(t="reload"),this.list_component[r].hasOwnProperty(t)&&(a[l.default.code]=this.list_component[r][t](s.ZP.cloneJson(e),o),s.ZP.isDebug())){var d,h,u=new Error;null!==(d=this.debug_form.component)&&void 0!==d&&null!==(h=d[l.default.code])&&void 0!==h&&h.callDirFromSupport||(this.debug_form.component=s.ZP.setNodeJson(this.debug_form.component,l.default.code+".callDirFromSupport",[])),this.debug_form.component[l.default.code].callDirFromSupport.push({function_name:t,function_para:e,data:o,srack:u.stack.toString()})}}else s.ZP.log("not getInfoCheckRun");return a},this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.isDidSetData=()=>this.is_did_set_data,this.checkMasterData=()=>{var t=s.ZP.ms_getMasterData(this.key_form);void 0!==t&&l.ZP.quickPost([{txcode:"#sys:bo-masterdata-loadFollow",input:{master_data_start:t}}],l.ZP.createContext(this.obDataForm,this.state.infoA,this.state.infoA_parent,{}))},this.readMasterDataInfo=t=>{var e=this.state.follow;e.hasFollow=!0,e.removeFollow=!1,void 0!==t.table&&void 0!==t.data_key_value&&void 0!==this.obDataForm&&void 0!==t.pk&&void 0!==this.obDataForm[t.table]&&void 0!==this.obDataForm[t.table][t.pk]&&this.obDataForm[t.table][t.pk]===t.data_key_value&&(e.hasFollow=!1,e.removeFollow=!0),this.setState({follow:e})},this.showError=(t,e)=>{t?this.setState({hasError:"block"},(()=>{window.scroll(0,this.refs.hasError)})):(this.setState({hasError:"none",list_error:[]}),this.list_error_start=[])},this.toggleLoading=t=>{setTimeout((()=>{window.scrollTo(0,0),t?this.setState({status_loading:"none",status_form:"block"}):this.setState({status_loading:"block",status_form:"none"})}),2e3)},this.showErrorFromServer=function(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=e.state.list_error,a={};if(void 0!==t)if(t.length>0){o=[];let i=[];for(var n=0;n<t.length;n++){var r=t[n];if(["OverLimit","ApprovalRequired"].includes(r.key)&&!["BO_013001"].includes(e.state.infoA.form_code))continue;let _=s.ZP.getLang(r.typeError);void 0!==_&&""!==_||(_="warning");let f=!1;var l,c,d,h,u,p;if("form"===r.type)o.push({key:r.key,typeError:_,info:r.info,code:r.code||"",error_end:f,icon:e.showErrorFromServer_getIcon(r.key),dataItem:r.infoComponent?{view_code:null===(l=r.infoComponent)||void 0===l?void 0:l.view_code,component_code:null===(c=r.infoComponent)||void 0===c?void 0:c.component_code,layout_index:null===(d=r.infoComponent)||void 0===d?void 0:d.layout_index}:{}}),a[null===(h=r.infoComponent)||void 0===h?void 0:h.view_code]?a[null===(p=r.infoComponent)||void 0===p?void 0:p.view_code]++:a[null===(u=r.infoComponent)||void 0===u?void 0:u.view_code]=1;else"system"===r.type&&(i.includes(r.info)||(i.push(r.info),void 0!==r.code&&""!==r.code?o.push({key:r.key,info:r.info,typeError:_,code:r.code,error_end:f,icon:e.showErrorFromServer_getIcon(r.key),dataItem:{}}):o.push({key:r.key,info:r.info,typeError:_,code:"",error_end:f,icon:e.showErrorFromServer_getIcon(r.key),dataItem:{}})))}void 0!==o?void 0!==o[o.length-1]&&(o[o.length-1].error_end=!0):o=[]}else o=[];else o=[];o.length>0&&!1!==i?e.setState({hasError:"block",list_error:o,list_view_error:a},(()=>{document.getElementById("content").scrollTo(0,0)})):e.setState({hasError:"none",list_error:o,list_view_error:a}),e.list_error_start=t},this.getContext_FormOpenModal=()=>({list_error:this.list_error_start}),this.setStatusToForm_AndRunRule=t=>{var e=[];if(void 0!==this.state.ruleStatus[t])for(var i=0;i<this.state.ruleStatus[t].length;i++){let o=s.ZP.cloneJson(this.state.ruleStatus[t][i]);o.isStart=!0,e.push(o)}e.length>0&&P.callRule(e,{},{},this.state.infoA,this.state.infoA_parent,"isStart")},this.getNotification=()=>({dataFull:{title:s.ZP.getLang("error_occurr"),data:this.state.list_error.map(((t,e)=>({title:(null!==t.key&&""!==t.key?t.key+": ":"")+(!0===s.ZP.isDebug()&&""!==t.code?t.code+": ":"")+("object"===typeof t.info?"":t.info),list_error:"object"===typeof t.info?t.info:void 0,dataItem:t.dataItem,time:(0,c.jsx)(I.Z,{class:"pull-right display-ib",time:Date.now()},e)}))),abs_Click:this.handleJumpToComponentError}}),this.handleJumpToComponentError=async t=>{Object.keys(t).length>0&&t.constructor===Object&&(t.view_code&&t.layout_index?await this.list_ref_layout[t.layout_index].ref_layoutControl.hanndleChangeTabActive(t.view_code).then((()=>{this.jumpToComponentError(t)})):this.jumpToComponentError(t))},this.jumpToComponentError=t=>{let e=document.getElementById(t.component_code);e&&(e.scrollIntoView({behavior:"smooth"}),e.focus())},this.getTitleForm=()=>{var t,e;return null!==(t=this.props.infoA_parent)&&void 0!==t&&t.key_form?this.props.conf[0].name:(null===(e=this.props.infoA.lang_form)||void 0===e?void 0:e[s.ZP.getLangKey()])||this.props.infoA.des},this.setLoadingAction=t=>{this.setState({loading_action_flow:t})},this.getLoadingAction=()=>this.state.loading_action_flow,this.setLoadingRule=t=>{t?(this.count_loading++,this.setState({loading_action:t})):(this.count_loading--,this.count_loading||this.setState({loading_action:t}))},this.renderFormContent=()=>{const t=(0,_.RP)("uFormNotify");let e="hidden";return!1===this.state.is_loading_form&&(e=""),this.state.list_error.length>0&&this.ref_myFormScroll&&this.ref_myFormScroll.abs_ScrollTop&&this.ref_myFormScroll.abs_ScrollTop(),(0,c.jsxs)(o.Fragment,{children:[this.state.list_error.length>0&&(0,c.jsx)(t,(0,u.Z)({},this.getNotification())),this.state.data.map(((t,i)=>(0,c.jsx)("div",{style:{visibility:e},children:(0,c.jsx)(D,{ref:t=>{this.list_ref_layout[i]=t},index:i,list_view_error:this.state.list_view_error,btn_of_grid:this.state.btn_of_grid,name:t.name,des:t.des,lang:t.lang,lang_des:t.lang_des,inputType:t.inputtype,type:t.type,infoA:this.state.infoA,infoA_parent:this.state.infoA_parent,value:t.value,visibility:t.visibility,list_view:t.list_view,loading_form_end:!1===this.state.is_loading_form,jumpToComponentError:this.jumpToComponentError})},i)))]})},this.renderDebug=()=>{const t=(0,_.RP)("uButton"),e=(0,_.RP)("uForm"),i=(0,_.RP)("uLayout"),o=(0,_.RP)("uView");function a(t,e,i,o){return{config:{default:{title:t,type:e,class:"",icon:i},cmd:{disable:!1,isLoading:!1}}}}if(!s.ZP.isDebug())return null;const n=[{name:"Command line",color:"primary",icon:"code",key:"",onClick:()=>{var t=prompt("Enter code:","");t&&L(this,t)}},{name:"Debug component",color:"",icon:"adb",key:"",onClick:()=>{L(this,"debug")}},{name:"Clear Cache",color:"",icon:"delete",onClick:()=>{this.debug_form.component={},this.debug_form.rule={}}}];return(0,c.jsxs)(e,{dataFull:{config:{default:{title:"Debug",icon:"bug_report"}},title_button:{close_button:s.ZP.getLang("form_close_title"),add_form:s.ZP.getLang("form_add_title")},mode:{form_min:!0},cmd:{visibility:this.state.visibility}},children:[(0,c.jsx)(z,{ref:this.ref_debug}),(0,c.jsx)(i,{dataFull:{config:{title:this.props.form_code}},children:(0,c.jsx)(o,{class:"col-12",children:n.map((e=>(0,c.jsx)(t,{dataFull:(0,u.Z)((0,u.Z)({},a(e.name,e.color,e.icon,e.key)),{},{abs_Click:e.onClick})},e.name)))})})]})},this.closeForm=()=>{s.ZP.removeForm(this.key_form)},this.key_form=(0,s.cb)(),this.list_ref_layout=[],this.is_first_time_render=!1,null!=this.props.infoA.openOne&&"true"===this.props.infoA.openOne&&void 0!==this.props.form_code&&(this.key_form=this.props.form_code);var i=[],a={};if(void 0!==this.props.infoA.ruleStrong)for(var n=0;n<this.props.infoA.ruleStrong.length;n++){var r=this.props.infoA.ruleStrong[n];void 0!==r.inUse&&r.inUse&&(i[i.length]=r),void 0===a[r.isStatus]&&(a[r.isStatus]=[]),a[r.isStatus].push(r)}for(let o=0;o<i.length-1;o++)for(let t=o+1;t<i.length;t++)if(i[o].order>i[t].order){let e=s.ZP.cloneJson(i[o]);i[o]=s.ZP.cloneJson(i[t]),i[t]=e}for(const o in a)if(Object.hasOwnProperty.call(a,o)){const t=a[o];for(let e=0;e<t.length-1;e++)for(let i=e+1;i<t.length;i++)if(t[e].order>t[i].order){let o=s.ZP.cloneJson(t[e]);t[e]=s.ZP.cloneJson(t[i]),t[i]=o}a[o]=t}this.obDataForm={},void 0!==this.props.data_select&&(this.obDataForm=JSON.parse(JSON.stringify(this.props.data_select))),this.openFromFormOther=!1,void 0!==this.obDataForm.form_status&&"open_from_form_other"===this.obDataForm.form_status&&(this.openFromFormOther=!0),(0,s.ST)(this.props.form_code);var d=s.ZP.cloneJson(t.infoA);d.form_code=this.props.form_code,d.key_form=this.key_form,void 0===this.props.ofModal?d.ofModal=!1:d.ofModal=this.props.ofModal;var h="none",p="";void 0!==t.form_error&&(h="block",p=JSON.stringify(t.form_error)),this.formValidate=!1;var f=s.ZP.cloneJson(t.conf),g=s.ZP.role_getAllRoleRight(this.props.infoA.form_code);let m={mode:"",col_text:"",col_input:""};void 0!==this.props.infoA.mode_form&&(m=s.ZP.cloneJson(this.props.infoA.mode_form)),this.list_component_max=0;var v={},b={},y={};if(void 0!==g){for(var A in g)void 0!==g[A].view?!0!==g[A].view.install&&(v[A]=!1):void 0!==g[A].layout?!0!==g[A].layout.install&&(b[A]=!1):void 0!==g[A].component&&!0!==g[A].component.install&&(y[A]=!1);for(var O=0;O<f.length;O++)if(void 0===f[O].codeHidden||void 0===b[f[O].codeHidden]){if(void 0!==f[O].list_view)for(var w=f[O].list_view,C=0;C<w.length;C++)if(void 0===w[C].codeHidden||void 0===v[w[C].codeHidden]){if(void 0!==w[C].list_input)for(var S=w[C].list_input,M=0;M<S.length;M++)if(void 0!==S[M].default.codeHidden){if(void 0!==y[S[M].default.codeHidden]){S.splice(M,1),M--;continue}void 0!==S[M].default&&(S[M].default.mode_form=m),this.list_component_max++}}else w.splice(C,1),C--}else f.splice(O,1),O--;var T=this.analyticButton(f);this.list_component_max=this.list_component_max-T.length,this.reactTxt=[];var F=(0,s.C9)(this.props.form_code);void 0!==F&&(this.reactTxt=(t=>{for(var e=(new DOMParser).parseFromString(t,"text/html"),i=[],o=0;o<e.body.childNodes.length;o++)i[i.length]=k(e.body.childNodes[o]);return i})(F),this.reactTxt=x(this.reactTxt,t.conf,T)),this.state={is_loading_form:!0,is_first_time_render:!1,data:f,hasError:h,errorInfo:p,ruleStrong:i,ruleStatus:a,btn_of_grid:T,infoA:d,infoA_parent:s.ZP.cloneJson(t.infoA_parent),visibility:"",status_loading:"block",status_form:"none",list_isLoading:{},follow:{hasFollow:!1,removeFollow:!1},timeline_hidden:!1,list_error:[],list_view_error:[],isDebug:!1,isOpenModalDebug:!1,lang:{close_button:s.ZP.getLang("form_close_title"),add_form:s.ZP.getLang("form_add_title")}},this.queue_rules=[],this.list_error_start=[],this.list_component=[],this.list_layout=[],this.list_view=[],this.list_isLoading=0,this.list_statusIsLoadingFromComponent=0,this.loading_final=!1,this.form_didMount=!1,this.form_blockCheckMaxComponent=!0,this.debug_form={component:{},rule:[]},this.ref_debug=o.createRef(),this.list_rule_waiting=[],this.count_loading=0}}buildValidateForm(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.getValidateForm();return this.showErrorFromServer(e,t),e.length>0&&this.formValidate}analyticButton(t){for(var e=[],i=0;i<t.length;i++){var o=t[i].list_view;if(void 0!==o)for(var a=0;a<o.length;a++)for(var s=o[a].list_input,n=0;n<s.length;n++)s[n].inputtype.includes("Button")&&void 0!==s[n].config.onTable&&""!==s[n].config.onTable.trim()&&(e[e.length]=s[n])}return e}putDataSetAdvanced(t,e){void 0!==t&&void 0!==t.code&&(this.obDataForm[t.code]=e)}checkCompareIsLoading(){for(var t in this.list_statusIsLoadingFromComponent)if(void 0===this.list_isLoading[t])return!1;return!0}componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.form_didMount=!0,this.formStart()}async formStart(){if(this.list_component_max===this.list_component.length&&this.form_didMount&&this.loading_final&&!this.form_blockCheckMaxComponent&&this.list_statusIsLoadingFromComponent===this.list_isLoading){let t=0;void 0!==this.props.data_select&&"{}"!==JSON.stringify(this.props.data_select)&&(this.putDataAll_andSet(this.props.data_select),t=1e3),setTimeout((async()=>{this.is_did_set_data=!0,await this.rule_runIsStart(),await this.runRuleFunctionQueue(),this.setState({is_loading_form:!1},(()=>{this.formDidStart()})),this.toggleLoading(!0)}),t)}}async formDidStart(){await this.ruleDidStart(),void 0!==this.props.set_call_form_back&&void 0!==this.state.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.state.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form,componentConfigDefault:this.props.componentConfigDefault},{})}),s.ZP.getTimeAddComponent())}showErrorFromServer_getIcon(t){switch(t){case"info":return"fa-info-circle";case"warning":return"fa-bell";case"success":return"fa-check-square-o";case"danger":return"fa-exclamation-triangle";default:return"fa-question"}}render(){const t=(0,_.RP)("uForm");let e="hidden";if(!1===this.is_first_time_render&&(this.is_first_time_render=!0,this.props.infoA_parent&&this.props.infoA_parent.key_form)){let t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}return!1===this.state.is_loading_form&&(e=""),(0,c.jsx)(o.Fragment,{children:(0,c.jsxs)(t,{dataFull:{config:{default:{title:this.getTitleForm(),icon:"folder"}},mode:{form_min:this.props.ofModal},title_button:{close_button:this.state.lang.close_button,add_form:this.state.lang.add_form},list_button_on_header:[],cmd:{visibility:this.state.visibility,isLoading:"hidden"===e||!0===this.state.loading_action||!0===this.state.loading_action_flow,isFavorite:!1},abs_Close:this.closeForm,abs_AddMenuBar:this.addMenu},ref:t=>{this.ref_myFormScroll=t},children:[this.renderDebug(),this.renderFormContent()]})})}}const B=U;var Y=i(6633);const H="_",V=["D","M","Y","h","m","s"];function W(t){if(!t)return"";let e=["D","M","Y","h","m","s"];for(let i in e){let o=e[i];t=t.replace(new RegExp(o,"g"),H)}return t}function G(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=!1,a="";if(void 0!==t&&""!==t)if(t.includes("_"))o=!0,a="jMaskInput_WrongFormat";else if("date"===e)(function(t,e){let i={};if(void 0===e||null===e||void 0===t||null===t)return{};for(let o in e){let a=e[o];V.includes(a)&&t[o]!==H&&(i[a]=i[a]||"",i[a]+=t[o])}Number.isNaN(i.D)||(i.D=parseInt(i.D));Number.isNaN(i.M)||(i.M=parseInt(i.M));Number.isNaN(i.Y)||(i.Y=parseInt(i.Y));if(i.D||i.M||i.Y){const{D:t,M:e,Y:o}=i;if(e<=0||e>12||t<=0||o<=0)return!1;let a=[0,31,28,31,30,31,30,31,31,30,31,30,31];return(o%400===0||o%100!==0&&o%4===0)&&(a[2]=29),t<=a[e]}return!1})(t,i)||(o=!0,a="jMaskInput_WrongFormat");return{isError:o,message:a}}var J=i(4200);const q={a:/[a-zA-Z]/,9:/\d/,h:/\d/,H:/\d/,m:/\d/,s:/\d/,"*":/./,_:/[a-zA-Z\d]/,L:/[a-zA-Z\d]/,".":/./,0:/\d/,z:/[a-zA-Z]/,Z:/[a-zA-Z ]/,A:/[A-Za-z0-9\\_]/},K={"#":"_"},X={0:{status:!0,reg_remove:/[^\d/]/g},L:{status:!0,reg_remove:/[^a-zA-Z\d]/g},z:{status:!0,reg_remove:/[^a-zA-Z]/g},Z:{status:!0,reg_remove:/[^a-zA-Z ]/g},".":{status:!0,reg_remove:""},A:{status:!0,reg_remove:/[^A-Za-z0-9\\_]/g}},$={"-":".{100}",EMAIL:".{100}",EMAIL_MULTI:".{500}"},tt=t=>K[t],et=t=>q[t],it=t=>{let e=t[0];return X[e]},ot=t=>{var e,i;if(!t)return!1;let o=t[0];if(!0!==(null===(e=X[o])||void 0===e?void 0:e.status))return!1;let a=!0;for(const s of t)t[0]!==s&&(a=!1);return!0===(null===(i=it(o))||void 0===i?void 0:i.status)&&a},at=(t,e)=>{let i=[];const o=/(\\.|.)/g;let a;for(;null!==(a=o.exec(t));){a.index===o.lastIndex&&o.lastIndex++;const t=a[0],s=1===t.length?"regex":"const";let n={type:s,key:t};"regex"===s?et(t)?"date"===e&&/[^/:]/.test(t)?(n.reg=et("9"),n.value=t):(n.reg=et(t),n.value="_"):"date"===e&&/[^/:]/.test(t)?(n.reg=et("9"),n.value=t):tt(t)?(n.value=tt(t),n.type="static"):(n.value=t,n.type="const"):n.value=t[1],i.push(n)}return i},st=(t,e)=>{let i="";for(const o of t)i+="date"===e?o.key:o.value;return i},nt=(t,e)=>{let i="";for(const o of t)i+=o.key.includes("\\")?o.value:o.key;return i},rt=(t,e,i,o,a,s)=>{if(!t||!e||!i)return"";let n="";if(!t)return"";switch(i){case"default":for(const o in e){let i=t[o];if("regex"===e[o].type){if(!1===e[o].reg.test(i))return"";n+=i}else"static"===e[o].type&&(n+=i)}break;case"date":let i=st(e);if("string"===o)n=a&&""!==a?(0,Y.Al)(t,i,a,s):(0,Y.w5)(t,i,s);else n=(0,Y.w5)(t,i,s);break;default:n=t}return n||0===n?n:""},lt=(t,e,i,o,a)=>{if(!t&&0!==t||!e||!i)return"";let s="";const n=nt(e);switch(i){case"default":let i=0;for(const a in e)if("regex"===e[a].type)if(ot(n))s+=t[i]||"",i++;else{if(t[i]&&e[a].reg.test(t[i]))s+=t[i];else{if("OPTIMISTIC"!==o)return"";s+=e[a].value}i++}else"static"===e[a].type?(s+=e[a].value,e[a].value===t[i]&&i++):s+=e[a].value;break;case"date":let r=st(e);s=(0,Y.sx)(t,r,a);break;default:s=t}return s||""},ct=(t,e,i,o,a,s,n)=>{let r=rt(t,e,i,a,s,n);return null!==o&&void 0!==o&&o.length?lt(r,o,i):r},dt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,n=t;return null!==o&&void 0!==o&&o.length&&(n=rt(t,o,i,s)),lt(n,e,i,a,s)},ht=()=>["SUN","MON","TUE","WED","THU","FRI","SAT"].map(((t,e)=>({title:t,type:"gray"}))),ut=t=>{t||(t=window.moment.utc().toDate().getMonth()+1);return["January","February","March","April","May","June","July","August","September","October","November","December"].map(((e,i)=>({title:e,selected:t-1===i})))},pt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1900,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2100,i=[];if(t<=e)for(let o=t;o<=e;o++)i.push(o);return i},_t=t=>{let e=window.moment.utc(t).toDate().getMonth()+1,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];(t=>t%400===0||t%100!==0&&t%4===0)(window.moment.utc(t).toDate().getFullYear())&&i[2]++;let o=[];for(let a=1;a<=i[e];a++)o.push(a);return o},ft=(t,e)=>{t||(t=Date.parse(window.moment.utc().toDate()));let i=window.moment.utc(t).toDate(),o=window.moment.utc((0,J.X7)(t,{M:-1})).toDate(),a=window.moment.utc((0,J.X7)(t,{M:1})).toDate(),s=Date.parse(o),n=Date.parse(a),r=_t(s),l=_t(t),c=_t(n),d=window.moment.utc([i.getFullYear(),i.getMonth(),1]).toDate(),h=window.moment.utc([i.getFullYear(),i.getMonth(),l.length]).toDate(),u=r.slice(r.length-d.getDay(),r.length),p=c.slice(0,6-h.getDay()),_=u.map((t=>{let e=String(t),a="gray",n=window.moment.utc(new Date(s).setDate(t)).valueOf();return t===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()&&(a="primary"),{title:e,type:a,value:n}})),f=l.map((e=>{let o=String(e),a="",s=window.moment.utc(new Date(t).setDate(e)).valueOf();return e===i.getDate()&&(a="primary"),{title:o,type:a,value:s}})),g=p.map((t=>{let e=String(t),o="gray",s=window.moment.utc(new Date(n).setDate(t)).valueOf();return t===i.getDate()&&a.getMonth()===i.getMonth()&&a.getFullYear()===i.getFullYear()&&(o="primary"),{title:e,type:o,value:s}})),m=_.concat(f);return m=m.concat(g),m};class gt extends o.Component{constructor(t){super(t),this.BuildPropsDefault=t=>{const{name:e,code:i,mask_format:o,abs_Blur:a}=t,s=t.mask_mode||"default",n=t.data_default||"",r=t.request||!1;return{default:{name:e,code:i,class:t.class||""},config:{data_default:n,mask_format:o,mask_data_format:"",value_type:"all",mask_mode:s},validate:{request:r},lang:{}}},this.getComponentContructor=(t,e)=>{let i=this.buildPropsSmooth(e);return{props_smooth:i,state_smooth:this.buildStateSmooth(i)}},this.buildPropsSmooth=t=>{let e=s.ZP.cloneJson(t);e.config=t.config;let i=(t=>{let e=/\${([^}]+)}/gm.exec(t);if(null!==e)try{let i=s.ZP.context_get(e[1])||"";t=t.replace(e[0],i)}catch(i){}return t})(e.config.data_default);var o;return i=((t,e)=>{let i=t,o=/libDate_cal\((.*),(.*)\)/gm.exec(i);if(null!==o)try{i=(0,J.X7)((0,Y.xY)(o[1]),JSON.parse(o[2]))}catch(n){}let a=/JF_DATE\.([^(]+)\(([^)]*)\)/gm.exec(i);if(null!==a)try{t=s.ZP.persist_convertCondition(t);let e=a[1],o=a[2].split(",");i=J.ZP[e].apply(null,o)}catch(n){}return i})(i),void 0!==i&&null!==i||(i=""),e.config.data_default=i,e.config.mask_format=(o=e.config.mask_format,$[o]||o),e.config.mask_format=(t=>{for(const e in q){let i,o=new RegExp(`\\${e}{(\\d+)}`,"g");for(;null!==(i=o.exec(t));){i.index===o.lastIndex&&o.lastIndex++;let a="";for(let t=0;t<Number(i[1]);t++)a+=e;t=t.replace(i[0],a)}}return t})(e.config.mask_format),e},this.buildStateSmooth=t=>{const e=t.config;let i=at(e.mask_format,e.mask_mode),o=at(e.mask_data_format,e.mask_mode),a=st(i,e.mask_mode),n=e.mask_mode,r={status:!1,reg_remove:""};if(ot(e.mask_format)){let t=it(e.mask_format);void 0!==t&&(r.status=t.status,r.reg_remove=t.reg_remove)}const l=a,c=Date.parse(new Date);let d={mounth_data:ut(),year_data:pt(),day_data:ht(),day_of_mounth_data:ft(c,c),date_view:c};return{value_type:e.value_type||"all",error_input:!1,lang_select:s.ZP.getLangKey(),component_title:t.default.name||"",CMD:{},value:"",mask_value:"",date_selected_cache:0,mask_mode:n,mask_format:l,mask_regs:i,mask_regs_to:o,mask_placeholder:a,free_style:r,date_picker:d}},this.getInfoErrror=()=>{var t;const{help_mess:e}=this.state;return e?{info:this.getErrorLang(this.state.help_mess),key:(null===(t=this.state.lang)||void 0===t?void 0:t[this.props_smooth.default.name])||this.props_smooth.default.name,infoComponent:this.props_smooth.default}:""},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props_smooth.infoView,default:this.props_smooth.default,layout:this.props_smooth.infoLayout,block:t.block}},this.getDataOOP=(t,e)=>this.data_select,this.getAdvanced=(t,e)=>this.maskInputGet(),this.setAdvanced=(t,e)=>{if(t.codeHidden){if(t.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(void 0!==this.props_smooth.config.data_view)var i="";void 0!==this.props_smooth.config.data_value&&(i=s.ZP.getOOP(this.data_select,this.props_smooth.config.data_value.trim())+""),this.maskInputSet(i,"enter_tab")}}else t.list_component&&(null!==e&&void 0!==e||(e=""),this.maskInputSet(e,"on_change"))},this.get=()=>this.maskInputGet(),this.getValue=()=>this.state.mask_value,this.set=t=>{this.maskInputSet(t,"on_change")},this.reload=(t,e)=>{const i=this.props_smooth.config;this.data_select={},this.maskInputSet(i.data_default)},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.maskInputSet=(t,e,i,o)=>{const{mask_regs:a,mask_regs_to:s,mask_mode:n}=this.state;let r={end_pos:0,start_pos:0,help_mess:"",mask_value:"",value:t},l=dt(t,a,n,s);"date"===n&&(r.date_picker=((t,e,i)=>{t=t?new Date(t):window.moment.utc().toDate();const o=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));return{mounth_data:ut(o.getMonth()+1),year_data:pt(e,i),day_data:ht(),day_of_mounth_data:ft(o.getTime()),date_view:t}})(t),Number(t)&&(l=dt(Number(t),a,n,[]))),r.mask_value=l,r=Object.assign(r,o),this.setStateLogic(r,(()=>{i&&i()}))},this.maskInputGet=()=>{const{mask_regs:t,mask_regs_to:e,mask_value:i,mask_mode:o}=this.state;let a="";return this.state.free_style.status?i:(a=ct(i,t,o,"date"===o?[]:e),a)},this.maskInputClear=()=>{this.data_select={},this.setStateLogic({end_pos:0,start_pos:0,value:"",mask_value:"",help_mess:""},(()=>{}))},this.maskInputValidate=()=>{const{mask_value:t}=this.state;let e="",i=this.maskInputGet();return e=t&&!this.maskInputGet()?"jMaskInput_WrongFormat":function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[{title:"@VALUE",value:arguments.length>1?arguments[1]:void 0},{title:"@NOW",value:Date.parse(new Date)},{title:"@YEAR",value:31536e6.toString()},{title:"@MOUNTH",value:2592e6.toString()},{title:"@DAY",value:864e5.toString()},{title:"@HOURS",value:36e5.toString()},{title:"@MINUTE",value:6e4.toString()},{title:"@SECONDS",value:1e3.toString()}];for(const i of t){let{content:t,mess:o}=i;for(const i of e)t=t.replace(new RegExp(i.title,"g"),i.value);if(!1===s.ZP.checkDynamicConditionNoData(t))return o}return""}(this.props_smooth.validate.conditions,i),e},this.abs_calendar_changeMonth=t=>{const e=this.maskInputGet()||Date.parse(new Date),i=(0,J.X7)(e,{M:t});this.maskInputSet(i)},this.abs_calendar_submit=t=>{let e=this.state.date_picker.day_of_mounth_data[t].value;this.maskInputSet(e)},this.abs_calendar_chooseYear=t=>{const e=this.maskInputGet()||Date.parse(new Date),i=new Date(e).setFullYear(t);this.maskInputSet(i)},this.abs_calendar_changeYear=t=>{},this.abs_calendar_chooseMonth=t=>{const e=t,i=this.maskInputGet()||Date.parse(new Date),o=new Date(i).setMonth(e);this.maskInputSet(o)},this.abs_calendar_openCalendar=()=>{let t=this.maskInputGet();t&&this.maskInputSet(t,"","",{date_selected_cache:t})},this.abs_calendar_KeyUp=t=>{const e=this.maskInputGet()||Date.parse(new Date);let i,o=this.state.date_selected_cache;switch(t.key){case"ArrowLeft":i=(0,J.X7)(e,{d:-1}),this.maskInputSet(i);break;case"ArrowRight":i=(0,J.X7)(e,{d:1}),this.maskInputSet(i);break;case"ArrowUp":i=(0,J.X7)(e,{d:-7}),this.maskInputSet(i);break;case"ArrowDown":i=(0,J.X7)(e,{d:7}),this.maskInputSet(i);break;case"Enter":i=e,this.maskInputSet(i),this.ref_maskinput.current.abs_CloseCalendar();break;case"Escape":Number(o)!==Number(this.maskInputGet())?this.maskInputSet(o):this.ref_maskinput.current.abs_CloseCalendar()}},this.abs_calendar_today=()=>{const t=Date.parse(new Date);this.maskInputSet(t)},this.onEventKey=t=>{if("Delete"===t.key)this.maskInputClear();this.state.mask_mode},this.onClick=t=>{},this.onBlur=()=>{let t=this.maskInputValidate();void 0!==this.props.abs_Blur&&this.props.abs_Blur(),t&&this.maskInputSet("")},this.setLastPost=t=>{let e=t.target;this.state.start_pos=e.selectionStart,this.state.end_pos=e.selectionEnd},this.setPos=(t,e)=>{this.countInterVal=0,this.interValSetTimeOut&&(clearInterval(this.interValSetTimeOut),this.countInterVal=0),this.interValSetTimeOut=setTimeout((()=>{t.selectionStart=e,t.selectionEnd=e,this.countInterVal+=2}),2),this.countInterVal>300&&this.interValSetTimeOut&&clearInterval(this.interValSetTimeOut)},this.onChangeMaskInput=t=>{let{start_pos:e,mask_value:i,mask_regs:o,mask_placeholder:a}=this.state;const s=t.target;let n=s.selectionStart,r=s.value||"";const l=this.state.free_style;if(l.status)return r=r.replace(l.reg_remove,""),r=r.slice(0,o.length),void this.setStateLogic({mask_value:r});let c=r.slice(e,n)||"",d=0,h="",u=r.slice(0,n);for(let p=n;p<a.length;p++)p<n+(a.length-r.length)?u+=a[p]:u+=i[p]||a[p];i=u;for(const p in o){const t=o[p];"regex"===t.type||"const"===t.type&&t.value===c[d]?e<=p&&d<c.length?("const"===t.type&&t.value===c[d]||t.reg.test(c[d])?h+=c[d]||t.value:(h+=t.value,n--),d++):h+=i[p]||a[p]:(h+=t.value,e<=p&&d<c.length&&n++)}h===a&&(h=""),this.setStateLogic({mask_value:h},(()=>{this.setPos(s,n)}))},this.getErrorLang=t=>{switch(t){case"validateNumMin":return s.ZP.getLang(t).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(t).replace("{count}",this.state.validate.max);default:return s.ZP.getLang(t)}},this.getDataFullLogic=()=>(0,u.Z)((0,u.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChangeMaskInput,abs_Blur:this.onBlur,abs_Click:this.onClick,abs_KeyDown:this.setLastPost,abs_KeyUp:this.onEventKey,abs_MouseUp:this.setLastPost}),this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);if(i.disabled!==o.disabled||i.visible!==o.visible||i.block!==o.block){let t=this.state;t.CMD=o,this.setStateLogic(t)}},this.setStateLogic=(t,e)=>{this.prevStateLogic=s.ZP.cloneJson(this.state),this.state=Object.assign(this.state,t),e&&e(),this.props.abs_update&&this.props.abs_update()},this.prop_default=this.BuildPropsDefault(t),this.propertyConstructor={},this.data_debug={},this.app_debug=[],this.state={is_lookup:!1,is_error:!1,is_clicked:!1,help_mess:"",lang_select:"",title:"",CMD:{},end_pos:-1,start_pos:0,_type:"",value:"",mask_value:"",mask_format:"",mask_placeholder:"",mask_mode:"default",mask_regs:[],mask_regs_to:[],free_style:{status:!1,reg_remove:""},date_picker:{mounth_data:[],year_data:[],day_data:[],day_of_mounth_data:[],date_view:Date.parse(new Date)},date_selected_cache:0},this.ref_maskinput=o.createRef();const e=this.getComponentContructor({},this.prop_default);this.state=Object.assign(this.state,e.state_smooth),this.props_smooth=e.props_smooth}getConfigTemplate(){const{date_picker:t}=this.state;return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{subTitle_isShow:"date"===this.state.mask_mode,subTitle:`(${this.state.mask_placeholder})`,placeholder:this.state.CMD.disabled+""==="true"?" ":nt(this.state.mask_regs,this.props_smooth.config.mask_mode),title:this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.props_smooth.validate.request,icon:""},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:!0,error:{message:this.state.help_mess,type:""}},mode:{textAlign:"left",letterSpacing:"M"}},valueTitleHover:"true"!==String(this.state.CMD.disabled)?"":this.state.mask_value,value:this.state.mask_value,cmd:{isLock:!1},calendar_data:{value_current:"",today:{title:"Today"},config:{days_title:t.day_data},list_months:t.mounth_data,list_years:{value:new Date(t.date_view).getFullYear()||"",data:t.year_data},list_days:t.day_of_mounth_data},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_today:this.abs_calendar_today,abs_calendar_KeyUp:this.abs_calendar_KeyUp}}}const mt=gt;class vt extends o.Component{constructor(t){super(t),this.clickRunNormallyHandler=t=>{this.LOGIC_DATE.setCMD("",{disabled:!0}),this.setState({radio_step_summary:"nor"})},this.clickNumberRunningHandler=t=>{this.LOGIC_DATE.setCMD("",{disabled:!1}),this.setState({radio_step_summary:"num"})},this.onBlurMaskInput=()=>{let{maskNumberRunning:t}=this.state;t.help_mess=G(t.mask_value,t.mode,t.defaultMask).message,this.setState({maskNumberRunning:t})},this.onClickMaskInput=()=>{let{maskNumberRunning:t}=this.state;t.help_mess="",t.error_input=!1,this.setState({maskNumberRunning:t})},this.setLastPosition=t=>{let{maskNumberRunning:e}=this.state;e.start_pos=t.target.selectionStart,e.end_pos=t.target.selectionEnd,this.setState({maskNumberRunning:e})},this.onChangeBatchDate=t=>{this.propsTemplate.stateData.stepSummary.date_time.dataFull=this.LOGIC_DATE.getDataFullLogic();let{maskNumberRunning:e}=this.state,i={mask_value:this.LOGIC_DATE.getDataFullLogic().value,newPosition:0};e.mask_value=i.mask_value;let{date_select:o,date_calculator:a}=this.state;G(i.mask_value,e.mode,e.defaultMask).isError||(o=(0,Y.ec)(i.mask_value,this.dateFormat),a=Math.round((o-this.state.working_date_long)/1e3/60/60/24),a<0&&(a=0)),this.setState({date_select:o,date_calculator:a,maskNumberRunning:e})},this.checkStepHandler=t=>{t.checked=!t.checked;let e=this.state.O9_job_process_refesh_table_summary,i={S:""};if(e.length>0){e.filter((e=>e.ordinal<t.ordinal)).forEach((t=>{i.S+=t.stepname+","}))}t.checked&&(i.S+=t.stepname+","),this.callAPI("POST_api_job_check",i).then((t=>{this.refeshForm()}))},this.changeKeyLanguage=t=>{let e={title_:s.ZP.getLang("jobProcess_title"),des_:s.ZP.getLang("jobProcess_des"),btn_start:s.ZP.getLang("jobProcess_btnStart"),btn_stop:s.ZP.getLang("jobProcess_btnStop"),btn_refresh:s.ZP.getLang("jobProcess_btnRefresh"),tab_summary:s.ZP.getLang("jobProcess_tabSummary"),tab_step_summary:s.ZP.getLang("jobProcess_tabStepSummary"),tab_step_details:s.ZP.getLang("jobProcess_tabStepDetails"),tab_error_details:s.ZP.getLang("jobProcess_tabErrorDetails"),batch_date:s.ZP.getLang("jobProcess_batchDate"),progress:s.ZP.getLang("jobProcess_progress"),run_normally:s.ZP.getLang("jobProcess_runNormally"),number_running:s.ZP.getLang("jobProcess_numberRunning"),days:s.ZP.getLang("jobProcess_days"),stop_at:s.ZP.getLang("jobProcess_stopAt"),select:s.ZP.getLang("jobProcess_select"),step_name:s.ZP.getLang("jobProcess_stepName"),comments:s.ZP.getLang("jobProcess_comments"),status:s.ZP.getLang("jobProcess_status"),status_description:s.ZP.getLang("jobProcess_statusDescription"),percent_started:s.ZP.getLang("jobProcess_percentStarted"),start_at:s.ZP.getLang("jobProcess_startAt"),end_at:s.ZP.getLang("jobProcess_endAt"),threads_created:s.ZP.getLang("jobProcess_threadsCreated"),threads_running:s.ZP.getLang("jobProcess_threadsRunning"),threads_compeleted:s.ZP.getLang("jobProcess_threadsCompeleted"),threads_canceled:s.ZP.getLang("jobProcess_threadsCanceled"),threads_failed:s.ZP.getLang("jobProcess_threadsFailed"),threads_id:s.ZP.getLang("jobProcess_threadsID"),total_threads:s.ZP.getLang("jobProcess_totalThreads"),total_started:s.ZP.getLang("jobProcess_totalStarted"),total_duration:s.ZP.getLang("jobProcess_totalDuration"),total_remaining:s.ZP.getLang("jobProcess_totalRemaining"),job_name:s.ZP.getLang("jobProcess_jobName"),read_count:s.ZP.getLang("jobProcess_readCount"),write_count:s.ZP.getLang("jobProcess_writeCount"),commit_count:s.ZP.getLang("jobProcess_commitCount"),read_skip_count:s.ZP.getLang("jobProcess_readSkipCount"),write_skip_count:s.ZP.getLang("jobProcess_writeSkipCount"),process_skip_count:s.ZP.getLang("jobProcess_processSkipCount"),rollback_count:s.ZP.getLang("jobProcess_rollbackCount"),exit_code:s.ZP.getLang("jobProcess_exitCode"),exit_message:s.ZP.getLang("jobProcess_exitMessage")};if(void 0!==t)return e;let i=this.state.infoA;i.title=s.ZP.getLang("jobProcess_title"),i.des=s.ZP.getLang("jobProcess_des"),i.lang_form.vi=s.ZP.getLang("jobProcess_title"),i.lang_form.en=s.ZP.getLang("jobProcess_title"),this.setState({languages:e,infoA:i})},this.callAPI=(t,e)=>{let i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:t}}];return i[0].input=Object.assign(i[0].input,e),(0,F.Yr)(i,{}).then((t=>s.ZP.foGetData("data",t)))},this.componentDidMount=async()=>{s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.LOGIC_DATE.set(this.user_info.workingdate),this.LOGIC_DATE.setCMD("",{disabled:!0}),await this.callAPI("O9_job_process_create_table_summary").then((t=>{this.refeshForm()}))},this.reloadTableSummary=async()=>{let t=[];await this.callAPI("O9_job_process_refesh_table_summary").then((e=>{e&&(t=e.O9_job_process_refesh_table_summary,Array.isArray(t)||(t=[]))})),this.setState({O9_job_process_refesh_table_summary:t})},this.refeshForm=async()=>{let t=[],e="";await this.callAPI("O9_job_process_refesh_table_summary").then((e=>{e&&(t=e.O9_job_process_refesh_table_summary,Array.isArray(t)||(t=[]))})),await this.callAPI("O9_job_process_stop_error_mess").then((t=>{t&&(e=t.O9_job_process_stop_error_mess)})),this.setState({O9_job_process_refesh_table_summary:t,O9_job_process_stop_error_mess:e})},this.onClickStop=async()=>{await this.callAPI("O9_job_process_stop").then((t=>{this.setState({is_started:!1})}))},this.onClickRefresh=()=>{this.refeshForm(),this.setState({is_started:!1})},this.onClickStart=()=>{this.setState({is_started:!0},(()=>{let t=setInterval((()=>{let t=[];this.callAPI("O9_job_process_refesh_table_summary").then((e=>{e&&(t=e.O9_job_process_refesh_table_summary,Array.isArray(t)||(t=[])),this.setState({O9_job_process_refesh_table_summary:t})}))}),1e3),e=1;"num"===this.state.radio_step_summary&&(e=this.state.date_calculator),this.callAPI("O9_job_process_start",{days:e}).then((e=>{clearInterval(t),this.setState({is_started:!1}),this.refeshForm()}))}))},this.getProgress=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=0;for(let i=0;i<t.length;i++){const o=t[i];!0===o.checked&&100===o.percentstarted&&"S"===o.status&&e++}return Math.round(e/t.length*100)},this.onClickRowTableStepSummary=t=>{this.callAPI("O9_job_process_refesh_table_errror",t).then((t=>{let e=[];t&&(e=t.O9_job_process_refesh_table_errror,e&&Array.isArray(e)&&(e=e.filter((t=>void 0!==t[3]))),this.setState({O9_job_process_refesh_table_errror:e}))})),this.callAPI("O9_job_process_refesh_table_details",t).then((t=>{let e=[];t&&Array.isArray(t.O9_job_process_refesh_table_details)&&(e=t.O9_job_process_refesh_table_details),this.setState({O9_job_process_refesh_table_details:e})}))},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})};let e=this.changeKeyLanguage("start");this.key_form="016002",this.jobProcessForm=(0,_.Iq)("O9_jobProcess"),this.user_info=s.ZP.context_get("user_acc"),this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT");let i=(0,Y.FW)(this.user_info.workingdate,this.dateFormat);this.LOGIC_DATE=new mt({abs_update:this.onChangeBatchDate,name:"From",code:"from",mask_format:"DD/MM/YYYY",mask_mode:"date",class:"col-md-3 col-sm-8"}),this.mappingKeyToIndex={buttons:{start:0,stop:1,refresh:2}},this.propsTemplate={stateData:this.getStateData(this.user_info,e)},this.state={maskNumberRunning:{defaultMask:this.dateFormat,mask:W(this.dateFormat),error_input:!1,help_mess:"",start_pos:0,end_pos:0,mask_value:i,value_type:"number",mode:"date"},visibility:"",error_details_data:[],step_details_data:[],step_summary_data:[],languages:e,is_started:!1,tab_active:1,infoA:{lang_form:{vi:s.ZP.getLang("jobProcess_title"),en:s.ZP.getLang("jobProcess_title")},title:"Job Process",des:"",openOne:"true",form_code:this.key_form,ofModal:!1},O9_job_process_refesh_table_summary:[],O9_job_process_refesh_table_errror:[],O9_job_process_refesh_table_details:[],radio_step_summary:"nor",date_select:this.user_info.workingdate,date_calculator:0,working_date:i,working_date_long:this.user_info.workingdate}}getStateData(t,e){return{form:{dataFull:{config:{default:{title:"Job Process"}},cmd:{visibility:""}}},listButton:[{dataFull:{config:{default:{title:e.btn_start,icon:"play_circle_outline"},cmd:{disable:!1}}},abs_Click:this.onClickStart},{dataFull:{config:{default:{title:e.btn_stop,icon:"pause_circle_outline"},cmd:{disable:!0}}},abs_Click:this.onClickStop},{dataFull:{config:{default:{title:e.btn_refresh,icon:"autorenew"},cmd:{disable:!1}}},abs_Click:this.onClickRefresh}],tab:[{id:"summary",title:"Summary"},{id:"stepSummary",title:"Step Summary"},{id:"stepDetail",title:"Step Details"},{id:"errorDetail",title:"Error Details"}],summary:{date_batch:{title:"Batch Date",value:(0,Y.FW)(t.workingdate,this.dateFormat)},percent:{title:"Progress",value:0}},stepSummary:{run_normal:{dataFull:{title:"Run Normally",value:!0,dataItem:{},abs_Click:this.clickRunNormallyHandler}},number_run:{dataFull:{title:"Number Running",value:!1,dataItem:{},abs_Click:this.clickNumberRunningHandler}},date_day:0,date_time:{dataFull:this.LOGIC_DATE.getDataFullLogic()},table_header:this.getTableHeaderConfigStepSummary(),table_data:[],table_config:this.getTableConfigStepSummary()},stepDetail:{table_header:this.getTableHeaderConfigStepDetail(e),table_data:[],table_config:this.getTableConfigStepDetail()},errorDetail:{table_header:this.getTableHeaderConfigErrorDetail(),table_data:[],table_config:this.getTableConfigErrorDetail()}}}getStatusIconStep(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S"){case"S":return"check_circle";case"F":return"remove_circle";case"N":return"add_circle";case"R":return"trending_up";default:return""}}getStatusColorStep(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S"){case"S":return"success";case"F":return"danger";default:return"info"}}getTableHeaderConfigStepSummary(){return{dataFull:{Header:{data:[{title:"Select",config:{width:"",isFrozen:!1}},{title:"Step Name",config:{width:"",isFrozen:!1}},{title:"Comment",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Percent Started",config:{width:"",isFrozen:!1}},{title:"Status Decs",config:{width:"",isFrozen:!1}},{title:"Start At",config:{width:"",isFrozen:!1}},{title:"End At",config:{width:"",isFrozen:!1}},{title:"Threads Created",config:{width:"",isFrozen:!1}},{title:"Threads Running",config:{width:"",isFrozen:!1}},{title:"Threads Completed",config:{width:"",isFrozen:!1}},{title:"Threads Canceled",config:{width:"",isFrozen:!1}},{title:"Threads Failed",config:{width:"",isFrozen:!1}},{title:"Total Threads",config:{width:"",isFrozen:!1}},{title:"Total Started",config:{width:"",isFrozen:!1}},{title:"Total Duration",config:{width:"",isFrozen:!1}},{title:"Total Remaining",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}}}getTableConfigStepSummary(){return[{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnIcon"},{type:"uTableColumnProgressBar"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]}getTableDataStepSummary(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((t=>({data:[{value:t.checked,dataItem:t,abs_Click:this.checkStepHandler},{data:t.stepname},{data:t.comments},{data:[{val:this.getStatusIconStep(t.status),color:this.getStatusColorStep(t.status),title:"warning",class:"-round"}]},{percent:t.percentstarted},{data:t.statusdesc},{data:t.startat},{data:t.endat},{data:t.threadscreated},{data:t.threadsrunning},{data:t.threadscompleted},{data:t.threadscanceled},{data:t.threadsfailed},{data:t.totalthreads},{data:t.totalstarted},{data:t.totalduration},{data:t.totalstarted}],dataItem:t,abs_Click:this.onClickRowTableStepSummary})))}getTableHeaderConfigStepDetail(t){return{dataFull:{Header:{data:[{title:t.job_name,config:{width:"",isFrozen:!1}},{title:t.step_name,config:{width:"",isFrozen:!1}},{title:t.status,config:{width:"",isFrozen:!1}},{title:t.read_count,config:{width:"",isFrozen:!1}},{title:t.write_count,config:{width:"",isFrozen:!1}},{title:t.commit_count,config:{width:"",isFrozen:!1}},{title:t.read_skip_count,config:{width:"",isFrozen:!1}},{title:t.write_skip_count,config:{width:"",isFrozen:!1}},{title:t.process_skip_count,config:{width:"",isFrozen:!1}},{title:t.rollback_count,config:{width:"",isFrozen:!1}},{title:t.exit_code,config:{width:"",isFrozen:!1}},{title:t.exit_message,config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}}}getTableConfigStepDetail(){return[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}getTableDataStepDetail(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((t=>[{data:t.jobname},{data:t.stepname},{data:t.status},{data:t.readcount},{data:t.writecount},{data:t.commitcount},{data:t.readskipcount},{data:t.writeskipcount},{data:t.processskipcount},{data:t.rollbackcount},{data:t.exitcode},{data:t.exitmessage}]))}getTableHeaderConfigErrorDetail(){return{dataFull:{Header:{data:[{title:"Thread id",config:{width:"",isFrozen:!1}},{title:"Step name",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Status description",config:{width:"",isFrozen:!1}}]},config:{mode:{noHeader:!1}}}}}getTableConfigErrorDetail(){return[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}getTableDataErrorDetail(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null===t?[]:t.map((t=>[{data:t},{data:t},{data:t},{data:t}]))}UNSAFE_componentWillUpdate(t,e){var i,o,a;this.propsTemplate.stateData.stepSummary.table_header.dataFull.dataEmpty={isShow:!(null!==(i=e.O9_job_process_refesh_table_summary)&&void 0!==i&&i.length),title:s.ZP.getLang("header_searchNoResult")},this.propsTemplate.stateData.stepSummary.table_data=this.getTableDataStepSummary(e.O9_job_process_refesh_table_summary),this.propsTemplate.stateData.stepDetail.table_header.dataFull.dataEmpty={isShow:!(null!==(o=e.O9_job_process_refesh_table_details)&&void 0!==o&&o.length),title:s.ZP.getLang("header_searchNoResult")},this.propsTemplate.stateData.stepDetail.table_data=this.getTableDataStepDetail(e.O9_job_process_refesh_table_details),this.propsTemplate.stateData.errorDetail.table_header.dataFull.dataEmpty={isShow:!(null!==(a=e.O9_job_process_refesh_table_errror)&&void 0!==a&&a.length),title:s.ZP.getLang("header_searchNoResult")},this.propsTemplate.stateData.errorDetail.table_data=this.getTableDataErrorDetail(e.O9_job_process_refesh_table_errror),this.propsTemplate.stateData.summary.percent.value=this.getProgress(e.O9_job_process_refesh_table_summary),e.radio_step_summary!==this.state.radio_step_summary&&(this.propsTemplate.stateData.stepSummary.run_normal.dataFull.value="nor"===e.radio_step_summary,this.propsTemplate.stateData.stepSummary.number_run.dataFull.value=!this.propsTemplate.stateData.stepSummary.run_normal.dataFull.value,this.propsTemplate.stateData.stepSummary.date_time.dataFull.config.cmd.disable="nor"===e.radio_step_summary),e.is_started!==this.state.is_started&&(this.propsTemplate.stateData.listButton[this.mappingKeyToIndex.buttons.start].dataFull.config.cmd.disable=!!e.is_started,this.propsTemplate.stateData.listButton[this.mappingKeyToIndex.buttons.stop].dataFull.config.cmd.disable=!e.is_started),this.propsTemplate.stateData.stepSummary.date_time.dataFull.value=e.maskNumberRunning.mask_value,this.propsTemplate.stateData.stepSummary.date_time.dataFull.config.cmd.error.message=s.ZP.getLang(e.maskNumberRunning.help_mess),e.date_calculator!==this.state.date_calculator&&(this.propsTemplate.stateData.stepSummary.date_day=e.date_calculator)}render(){if("none"===this.state.visibility)return null;const t=this.jobProcessForm;return(0,c.jsx)(t,{stateData:this.propsTemplate.stateData})}}const bt=vt;var yt=i(9425);let At;class Dt extends o.Component{constructor(t){super(t),this.handleSelectTabID=t=>{this.setState({menu_select:t})},this.handelSearchInvokeLimit=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",a=this.state.invoke_limit_search_value;a[e]=o,this.setState({invoke_limit_search_value:a})},this.handelSearchApproveLimit=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",a=this.state.approve_limit_search_value;a[e]=o,this.setState({approve_limit_search_value:a})},this.handelChangeSearch=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",a=this.state.Col3_Assignment_Search;switch(a[e]=o,e){case"TBL_USER_CODE":this.stateData.column3.table_left.dataFull.Header.data[2].value_search=o;break;case"TBL_USER_NAME":this.stateData.column3.table_left.dataFull.Header.data[3].value_search=o;break;case"TBR_USER_CODE":this.stateData.column3.table_right.dataFull.Header.data[2].value_search=o;break;case"TBR_USER_NAME":this.stateData.column3.table_right.dataFull.Header.data[3].value_search=o}this.setState({Col3_Assignment_Search:a})},this.handelClearSearch=()=>{},this.getTableHeader=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return e.push({title:"Group",code:"module"}),e.push({title:"Caption",code:"tranname"}),t.forEach((t=>{e.push({title:t,code:t})})),e},this.abs_role_name_copying_select=(t,e,i)=>{this.setState({role_name_copying_selected:t.roleid,column2_role_select:t})},this.abs_Ckeck_invoke_approve_verification=(t,e)=>{this.callAPI("O9_Roles_Invoke_approve_Table_Change_save_approve",{roleid:t.roleid,data:[{roleid:t.roleid,cmdid:t.parentid,cmdiddt:t.cmdiddt,invoke:!1===e?1:0}]}).then((t=>{let e=t.O9_Roles_Invoke_approve_Table_Change_save_approve;this.reloadTableWithMenuInvokeApprove(),1===e[0].type?s.ZP.showToast("Save",!0):s.ZP.showToast("Save",!1)}))},this.abs_Ckeck_invoke_approve_operation=(t,e)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let i=this.state.menu_invoke_aprrove.filter((e=>e.parentid===t.parentid));this.callAPI("O9_Roles_Invoke_approve_Table_Change_save",{roleid:t.roleid,data:[{roleid:t.roleid,cmdid:t.parentid,cmdiddt:t.cmdiddt,invoke:!1===e?1:0}]}).then((o=>{let a=o.O9_Roles_Invoke_approve_Table_Change_save;if(this.reloadTableWithMenuInvokeApprove(!0),1===a[0].type){var n=[{txcode:"bo-update-roleBO-JWEBUI",input:{roleid:t.roleid,cmdid:t.parentid,cmdiddt:t.cmdiddt,invoke:!1===e?1:0,menu_child:i}}];return(0,F.Yr)(n,{}).then((t=>{s.ZP.showToast("Save",!0),this.setState({isLoading:!1})}))}s.ZP.showToast(a[0].message,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.UNSAFE_componentWillUpdate=(t,e)=>{var i,o,a;let n=e.role_action||{};this.stateData.tab.data=this.stateData.tab.data.map((t=>(t.isShow=t.id===e.menu_select,t))),this.stateData.column3.table_in_role_data=e.table_user_profile_user_in_role.map((t=>({config:{value:!1},data:[{data:t.rolename},{data:t.user_code},{data:t.usrname}]}))),this.stateData.column1.tree_data.tree_data=null===(i=e.menu_invoke_aprrove)||void 0===i?void 0:i.map((t=>({title:t.caption,parent_id:t.parentid,is_open:!1,DOM_elm:null,id:t.cmdid,dataItem:t,abs_click:this.onClickTreeMenuInvokeApprove}))),this.stateData.column1.table_up.dataFull.Header.data=e.O9_Roles_InvokeApprove_Table_header.map((t=>({title:t.caption,config:{width:"",isFrozen:!1}}))),this.stateData.column1.table_down.dataFull.Header.data=s.ZP.cloneJson(this.stateData.column1.table_up.dataFull.Header.data),this.stateData.column1.table_down.dataFull.Header.data[1]&&(this.stateData.column1.table_down.dataFull.Header.data[1].title="Self Approve");let r=e.O9_Roles_InvokeApprove_Table_header;this.stateData.column1.table_up_config=r.map(((t,e)=>0===e?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:"uTableColumnCheckbox",config:{cmd:{disable:!1===n.save}}})),this.stateData.column1.table_down_config=this.stateData.column1.table_up_config;let l=e.O9_Roles_InvokeApprove_Table_body;this.stateData.column1.table_up_data=[],this.stateData.column1.table_down_data=[];for(let s=0;s<l.length;s++){let t=r.length-1,e=[],i=[];for(let o=0;o<t;o++)0===o&&(e.push({data:l[s+o].rolename}),i.push({data:l[s+o].rolename})),e.push({value:1===l[s+o].invoke,dataItem:l[s+o],abs_Click:this.abs_Ckeck_invoke_approve_operation}),i.push({value:1===l[s+o].approve,dataItem:l[s+o],abs_Click:this.abs_Ckeck_invoke_approve_verification});this.stateData.column1.table_up_data.push(e),this.stateData.column1.table_down_data.push(i),s=s+t-1}if(this.stateData.column2.role_name_adding.dataFull.config.cmd.disable=!0!==e.addAndRemove_btnAddClick,this.stateData.column2.listButton[2].dataFull.config.cmd.disable=!0===e.addAndRemove_btnSaveClick,this.stateData.column2.role_name_copying.dataFull.search_value=e["column2.role_name_copying"],this.stateData.column2.listButton[0].dataFull.config.cmd.visible=!1!==n.save,this.stateData.column2.listButton[2].dataFull.config.cmd.visible=!1!==n.save,this.stateData.column2.listButton[1].dataFull.config.cmd.visible=!1!==n.delete,this.stateData.column3.next.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.next_all.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.preview.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.preview_all.dataFull.config.cmd.disable=!1===n.save,!e.role_name_copying_selected&&e.O9_Roles_Add_and_Remove_Role_Name.length>0)this.setState({role_name_copying_selected:e.O9_Roles_Add_and_Remove_Role_Name[0].roleid});else{var c;this.stateData.column2.role_name_copying.dataFull.input_value=null===(c=e.column2_role_select)||void 0===c?void 0:c.rolename;let t=e.O9_Roles_Add_and_Remove_Role_Name.filter((t=>(t.rolename||"").toLowerCase().includes(e["column2.role_name_copying"].toLowerCase())));this.stateData.column2.role_name_copying.dataFull.data=t.map(((t,i)=>{let o=!1;return t.roleid===e.role_name_copying_selected&&(o=!0),{title:t.rolename,value:t,selected:o}}))}this.stateData.column2.role_name_adding.dataFull.value=e.role_name_adding_input;let d=this.unCheck_user_assign_table_left,h=this.unCheck_user_assign_table_right;!0===this.unCheck_user_assign_table_left&&(this.unCheck_user_assign_table_left=!1),!0===this.unCheck_user_assign_table_right&&(this.unCheck_user_assign_table_right=!1),this.stateData.column3.table_left_data=e.O9_Roles_User_assignment_table_left.filter((t=>t.user_code.includes(e.Col3_Assignment_Search.TBL_USER_CODE||"")&&t.usrname.includes(e.Col3_Assignment_Search.TBL_USER_NAME||""))).map(((t,e)=>{var i,o,a;return{data:[{data:e+1},{value:!0!==d&&((null===(i=this.stateData.column3.table_left_data[e])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_left,dataItem:{value:t,index:e}},{data:t.user_code},{data:t.usrname}],config:{value:!1}}})),this.stateData.column3.table_right_data=e.O9_Roles_User_assignment_table_right.filter((t=>t.user_code.includes(e.Col3_Assignment_Search.TBR_USER_CODE||"")&&t.usrname.includes(e.Col3_Assignment_Search.TBR_USER_NAME||""))).map(((t,e)=>{var i,o,a;return{data:[{data:e+1},{value:!0!==h&&((null===(i=this.stateData.column3.table_right_data[e])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_right,dataItem:{value:t,index:e}},{data:t.user_code},{data:t.usrname}],config:{value:!1}}})),this.stateData.column3.role_choose_left.dataFull.data=[],this.stateData.column3.role_choose_left.dataFull.search_value=e["column3.role_choose_left"],this.stateData.column3.role_choose_left.dataFull.input_value=null===(o=e.column3_role_left_select)||void 0===o?void 0:o.rolename,e.O9_RolesUser_assignment_Role_Name_Left.filter((t=>null!==t.rolename&&t.rolename.toLowerCase().includes(e["column3.role_choose_left"].toLowerCase()))).forEach(((t,i)=>{let o=!1;(e.column3_role_left_select.roleid===t.roleid||0===i&&void 0===e.column3_role_left_select.roleid)&&(o=!0),this.stateData.column3.role_choose_left.dataFull.data.push({title:t.rolename,value:{id:t.roleid,item:t,type:"left"},selected:o})})),this.stateData.column3.role_choose_right.dataFull.search_value=e["column3.role_choose_right"],this.stateData.column3.role_choose_right.dataFull.input_value=null===(a=e.column3_role_right_select)||void 0===a?void 0:a.rolename;let u=e.O9_RolesUser_assignment_Role_Name_Right.filter((t=>null!==t.rolename&&t.rolename.toLowerCase().includes(e["column3.role_choose_right"].toLowerCase())));this.stateData.column3.role_choose_right.dataFull.data=u.map(((t,i)=>{let o=!1;return(e.column3_role_right_select.roleid===t.roleid||0===i&&void 0===e.column3_role_right_select.roleid)&&(o=!0),{title:t.rolename,value:{id:t.roleid,item:t,type:"right"},selected:o}})),this.stateData.column4.listItem=e.O9_Roles_Invoke_limit_menu.map((t=>{let i=!1;return e.Invoke_role_selected===t.roleid&&(i=!0),{dataFull:{title:t.rolename,dataItem:t,selected:i},abs_Click:this.onClickMenuInvokeLimit}})),this.stateData.column4.table.dataFull.Header.data=e.invoke_limit_header.map((t=>({id:t.code,title:t.title,config:{width:"",isFrozen:!1},value_search:e.invoke_limit_search_value[t.code]||""}))),this.stateData.column4.table_config=e.invoke_limit_header.map(((t,e)=>e<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===n.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),this.stateData.column4.table_data=e.O9_Roles_InvokeLimit_Table.filter((t=>{let i=!0;for(const o in e.invoke_limit_search_value){let a=e.invoke_limit_search_value[o];t[o].toLowerCase().includes(a.toLowerCase())||(i=!1)}return i})).map(((t,i)=>e.invoke_limit_header.map(((e,o)=>({hasChange:!1,default:{textAlign:"right"},data:t[e.code],dataItem:{header:e,row_idx:t.index_row,row_data:t},index_row:i,index_col:o,abs_Change:this.abs_change_invoke_table,abs_Submit:this.abs_submit_invoke_table}))))),this.stateData.column5.listItem=e.O9_Roles_Invoke_limit_menu.map((t=>{let i=!1;return e.Approve_role_selected===t.roleid&&(i=!0),{dataFull:{title:t.rolename,dataItem:t,selected:i},abs_Click:this.onClickMenuApproveLimit}})),this.stateData.column5.table.dataFull.Header.data=e.approve_limit_header.map((t=>({id:t.code,title:t.title,config:{width:"",isFrozen:!1},value_search:e.approve_limit_search_value[t.code]||""}))),this.stateData.column5.table_config=e.approve_limit_header.map(((t,e)=>e<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===n.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),this.stateData.column5.table_data=e.O9_Roles_ApproveLimit_Table.filter((t=>{let i=!0;for(const o in e.approve_limit_search_value){let a=e.approve_limit_search_value[o];t[o].toLowerCase().includes(a.toLowerCase())||(i=!1)}return i})).map(((t,i)=>e.approve_limit_header.map(((e,o)=>({hasChange:!1,default:{textAlign:"right"},data:t[e.code],dataItem:{header:e,row_idx:t.index_row,row_data:t},index_row:i,index_col:o,abs_Change:this.abs_change_approve_table,abs_Submit:this.abs_submit_approve_table})))))},this.CheckAddRoleName=t=>{let e=t.target.value,i=!1;for(const o of this.stateData.column2.role_name_copying.dataFull.data)if(o.title===e||""===e){i=!0;break}""===e&&(i=!0),this.setState({addAndRemove_btnSaveClick:i,role_name_adding_input:e})},this.abs_Check_role_profile_user_assign_left=t=>{this.onClickAssignLeftRow(t);let e=this.stateData.column3.table_left_data[t.index].data[1];e.value=!e.value,this.setState({autoReload:!0})},this.abs_Check_role_profile_user_assign_right=t=>{let e=this.stateData.column3.table_right_data[t.index].data[1];e.value=!e.value,this.setState({autoReload:!0})},this.abs_CheckAll_left=()=>{let t=this.stateData.column3.table_left.dataFull.Header.data[1],e=0;this.stateData.column3.table_left_data.forEach((()=>{!0===t.data.value?this.stateData.column3.table_left_data[e].data[1].value=!1:this.stateData.column3.table_left_data[e].data[1].value=!0,e++})),t.data.value=!t.data.value,this.setState({autoReload:!0})},this.abs_CheckAll_right=()=>{let t=this.stateData.column3.table_right.dataFull.Header.data[1],e=0;this.stateData.column3.table_right_data.forEach((()=>{!0===t.data.value?this.stateData.column3.table_right_data[e].data[1].value=!1:this.stateData.column3.table_right_data[e].data[1].value=!0,e++})),t.data.value=!t.data.value,this.setState({autoReload:!0})},this.abs_change_approve_table=(t,e,i,o)=>{let a=t.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_ApproveLimit_Table;let l=r[e.row_idx][e.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let t=l.lastIndexOf(".");c=n.substring(0,t)+"."+n.substring(t,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[e.row_idx][e.header.code]=d,this.setState({O9_Roles_ApproveLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_change_invoke_table=(t,e,i,o)=>{let a=t.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_InvokeLimit_Table;let l=r[e.row_idx][e.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let t=l.lastIndexOf(".");c=n.substring(0,t)+"."+n.substring(t,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[e.row_idx][e.header.code]=d,this.setState({O9_Roles_InvokeLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_submit_invoke_table=(t,e,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let e=this.state.O9_Roles_InvokeLimit_Table;this.callAPI("O9_Roles_InvokeLimit_Table_Change_save",{roleid:this.state.Invoke_role_selected,data:[{roleid:this.state.Invoke_role_selected,txcode:t.row_data.cmdid,ccrcd:t.header.code,amt:this.getValueCurrency(e[t.row_idx][t.header.code])}]}).then((i=>{if(1===i.O9_Roles_InvokeLimit_Table_Change_save[0].type){s.ZP.showToast("Save",!0);var o=[{txcode:"bo-update-roleFOJWEBUI",input:{roleid:this.state.Invoke_role_selected,txcode:t.row_data.cmdid,cmdid:t.row_data.cmdid,ccrcd:t.header.code,amt:this.getValueCurrency(e[t.row_idx][t.header.code]),list_currency:this.state.invoke_limit_currency,list_ccr:e[t.row_idx]}}];return(0,F.Yr)(o,{}).then((t=>{}))}s.ZP.showToast("Save",!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.abs_submit_approve_table=(t,e,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let e=this.state.O9_Roles_ApproveLimit_Table;this.callAPI("O9_Roles_ApproveLimit_Table_Change_save",{roleid:this.state.O9_Roles_Approve_limit_menu_select.roleid,data:[{roleid:this.state.Invoke_role_selected,txcode:t.row_data.cmdid,ccrcd:t.header.code,amt:this.getValueCurrency(e[t.row_idx][t.header.code])}]}).then((t=>{1===t.O9_Roles_ApproveLimit_Table_Change_save[0].type&&s.ZP.showToast("Save",!0)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.getRoleAction=(t,e)=>{let i=(0,s._M)(),o={};const a=e.list_layout;for(const s of i)for(const e of a)for(const i of e.list_view)for(const e of i.list_input){let i=e.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=t[s])||void 0===n||null===(r=n[e.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a}}return o},this.getAllRoleAction=()=>(0,F.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((t=>{var e=s.ZP.foGetData("form_design_detail",t);void 0===e&&(e={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",t)||{};void 0===i&&(i={});let o=this.getRoleAction(i,e);this.setState({role_action:o})})),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callAPI=(t,e)=>{this.state.isLoading||this.setState({isLoading:!0});var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:t}}];return i[0].input=Object.assign(i[0].input,e),(0,F.Yr)(i,{}).then((e=>s.ZP.foGetData("data",e)||{[t]:[]})).finally((t=>{this.setState({isLoading:!1})}))},this.AddRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.add&&this.state.role_action.save){let t=this.state.role_name_copying_selected,e=this.state.role_name_adding_input;""!==t&&""!==e&&this.callAPI("O9_Roles_User_Add_and_remove_add",{roleid:t,new_name:e}).then((i=>{let o=i.O9_Roles_User_Add_and_remove_add;1===o[0].type?this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((i=>{let o=i.O9_Roles_Add_and_Remove_Role_Name,a=[{roleid:0,rolename:"All"}],n=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((t=>{a=a.concat(t.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:a})})),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((t=>{n=t.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:n})})),this.setState({O9_Roles_Add_and_Remove_Role_Name:o,isAdd_add_and_remove:!1,addAndRemove_btnAddClick:!1,role_name_adding_input:"",addAndRemove_btnSaveClick:!0});let r=-1;for(const t of o)t.rolename===e&&(r=t.roleid);var l=[{txcode:"bo-create-roleJWEBUI",input:{roleID:r,roleName:e,roleCopy:t}}];return(0,F.Yr)(l,{}).then((t=>{s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(o[0].message,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.onSearch=(t,e)=>{this.setState({[e]:t.target.value})},this.abs_Click_next=()=>{this.onClickAssignLeftToRightArray()},this.abs_Click_next_all=()=>{this.onClickAssignLeftToRightAll()},this.abs_Click_previous=()=>{this.onClickAssignRightToLeftArray()},this.abs_Click_previous_all=()=>{this.onClickAssignRightToLeftAll()},this.onClickAssignLeftToRightAll=()=>{let t=this.state.O9_Roles_User_assignment_table_right,e=this.stateData.column3.table_left_data.filter((e=>0===t.filter((t=>t.user_code===e.data[1].dataItem.value.user_code)).length)).map((t=>t.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:i,data:e}).then((t=>{let e=t.O9_Roles_User_Assignment_left_to_right;1===e[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((t=>{let e=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:e,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:e}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_left.dataFull.Header.data[1],a=0;this.stateData.column3.table_left_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_left_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignRightToLeftAll=()=>{let t=this.stateData.column3.table_right_data.map((t=>t.data[1].dataItem.value)),e=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==e&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-e,data:t}).then((t=>{let i=t.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:e}).then((t=>{let i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:e,role_user_all:i}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(i[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let i=this.stateData.column3.table_right.dataFull.Header.data[1],o=0;this.stateData.column3.table_right_data.forEach((()=>{!0===i.data.value&&(this.stateData.column3.table_right_data[o].data[1].value=!1),o++})),i.data.value=!1},this.onClickAssignLeftToRightArray=()=>{let t=this.state.O9_Roles_User_assignment_table_right,e=this.stateData.column3.table_left_data.filter((e=>!0===e.data[1].value&&0===t.filter((t=>t.user_code===e.data[1].dataItem.value.user_code)).length)).map((t=>t.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_left=!0,""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:i,data:e}).then((t=>{let e=t.O9_Roles_User_Assignment_left_to_right;1===e[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((t=>{let e=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:e,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:e}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_left.dataFull.Header.data[1],a=0;this.stateData.column3.table_left_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_left_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignLeftRow=t=>{this.callAPI("user_profile_user_in_role",t.value).then((t=>{var e;let i=(null===t||void 0===t||null===(e=t.user_profile_user_in_role)||void 0===e?void 0:e.data)||[];this.setState({table_user_profile_user_in_role:i})}))},this.onClickAssignLeftToRight=t=>{let e=this.state.column3_role_right_select.roleid,i=this.state.O9_Roles_User_assignment_table_right;for(let o=0;o<i.length;o++){if(i[o].user_code===t.user_code)return}""!==e&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:e,data:[{usrid:t.usrid}]}).then((t=>{let i=t.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:e}).then((t=>{let i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:e,role_user_all:i}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i[0].message,!1)}))},this.onClickAssignRightToLeft=t=>{let e=this.refs.ref_assignment_list_role_name_right.value;""!==e&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-e,data:[{usrid:t.usrid}]}).then((t=>{let i=t.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:e}).then((t=>{let i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:e,role_user_all:i}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i[0].message,!1)}))},this.onClickAssignRightToLeftArray=t=>{let e=this.stateData.column3.table_right_data.filter((t=>!0===t.data[1].value)).map((t=>t.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-i,data:e}).then((t=>{let e=t.O9_Roles_User_Assignment_left_to_right;1===e[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((t=>{let e=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:e,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:e}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_right.dataFull.Header.data[1],a=0;this.stateData.column3.table_right_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_right_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onChangeUserAgm=(t,e)=>{switch(t.type){case"left":if(t.id===this.state.column3_role_right_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:t.id}).then((e=>{let i=this.state.O9_RolesUser_assignment_Role_Name_Left.filter((e=>e.roleid===t.id)),o=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_left:o,column3_role_left_select:i[0]})}));break;case"right":if(t.id===this.state.column3_role_left_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:t.id}).then((e=>{let i=this.state.O9_RolesUser_assignment_Role_Name_Right.filter((e=>e.roleid===t.id)),o=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:o,column3_role_right_select:i[0]})}))}},this.onChangeCurrency=t=>{t||0===t||(t="");let e=(t=String(t)).replace(/,/g,"");return e.length>16&&(e=e.slice(e.length-16,e.length)),(0,yt.Nx)(e,2)},this.getValueCurrency=t=>void 0===t||null===t||""===t?"":Number(t.replace(/,/g,"")),this.saveInvokeTable=()=>{},this.onClickMenuInvokeLimit=t=>{let e=t.dataFull.dataItem;this.callAPI("O9_Roles_InvokeLimit_Table",e).then((t=>{void 0===t&&(t={});let i=t.O9_Roles_InvokeLimit_Table;this.setState({O9_Roles_Invoke_limit_menu_select:e,Invoke_role_selected:e.roleid},(()=>{this.reloadTableInvokeLimit(i)}))}))},this.reloadTableInvokeLimit=t=>{if(t){let e=t.currency||[],i=t.data;for(const t of e)for(let e=0;e<i.length;e++){const o=i[e];o[t]=this.convertCurrency(o[t]),o.index_row=e}this.setState({O9_Roles_InvokeLimit_Table:i,invoke_limit_header:this.getTableHeader(e),invoke_limit_currency:e})}},this.onClickMenuApproveLimit=t=>{t=t.dataFull.dataItem,this.callAPI("O9_Roles_ApproveLimit_Table",t).then((e=>{if(e){let i=e.O9_Roles_ApproveLimit_Table,o=i.currency,a=i.data;for(const t of o)for(let e=0;e<a.length;e++){const i=a[e];i[t]=this.convertCurrency(i[t]),i.index_row=e}this.setState({O9_Roles_ApproveLimit_Table:a,O9_Roles_Approve_limit_menu_select:t,Approve_role_selected:t.roleid,approve_limit_header:this.getTableHeader(o)})}}))},this.onClickTreeMenuInvokeApprove=(t,e)=>{e=e.dataItem;let i=this.state.menu_invoke_aprrove;e.isOpen=!e.isOpen;let o=[],a=[];this.callAPI("O9_Roles_InvokeApprove_Table_header",e).then((t=>{o=[{cmdid:"0",caption:"Role Name"},{cmdid:"0",caption:"Self Invoke"}],o=o.concat(t.O9_Roles_InvokeApprove_Table_header),o=o.filter((t=>null!==t.cmdid)),this.callAPI("O9_Roles_InvokeApprove_Table_body",e).then((t=>{a=t.O9_Roles_InvokeApprove_Table_body,this.setState({menu_invoke_aprrove:i,O9_Roles_InvokeApprove_Table_body:a,O9_Roles_InvokeApprove_Table_header:o,menu_invoke_aprrove_select:e})}))}))},this.removeRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.delete){let t=this.state.role_name_copying_selected;""!==t&&this.callAPI("O9_Roles_User_Add_and_remove_delete",{roleid:t}).then((e=>{let i=e.O9_Roles_User_Add_and_remove_delete;if(1===i[0].type){this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((t=>{let e=t.O9_Roles_Add_and_Remove_Role_Name,i=e[0],o=[{roleid:0,rolename:"All"}],a=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((t=>{o=o.concat(t.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:o})})),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((t=>{a=t.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:a})})),this.setState({O9_Roles_Add_and_Remove_Role_Name:e,isAdd_add_and_remove:!1,isDelete_add_and_remove:!1,delete_err:"",role_name_copying_selected:i.roleid,column2_role_select:i})})),s.ZP.showToast("Save",!0);var o=[{txcode:"bo-delete-roleJWEBUI",input:{roleID:t}}];return(0,F.Yr)(o,{}).then((t=>{}))}s.ZP.showToast(e.O9_Roles_User_Add_and_remove_delete[0].message,!1),this.setState({delete_err:i[0].message||""})}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},At=(0,_.Iq)("jwebui_roleProfile"),this.key_form="BO_015003003",this.data_key_form={BO_015003003:{title:"ADM-Roles Profile",col_id:"column1"},BO_015003008:{title:"ADM-Invoke Limit",col_id:"column4"},BO_015003009:{title:"ADM-Approve Limit",col_id:"column5"}},this.state={menu_parent_select:"ADM - Roles Profile",menu_select:this.data_key_form[this.key_form].col_id,"column3.role_choose_right":"","column3.role_choose_left":"","column2.role_name_copying":"",column3_role_left_select:0,role_name_adding_input:"",role_name_copying_selected:"",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,menu_invoke_aprrove:[],O9_Roles_InvokeApprove_Table_header:[],O9_Roles_InvokeApprove_Table_body:[],menu_invoke_aprrove_select:{},O9_Roles_Add_and_Remove_Role_Name:[],O9_Roles_Add_and_Remove_Role_Name_select:"",O9_Roles_User_assignment_table_left:[],O9_Roles_User_assignment_table_right:[],O9_RolesUser_assignment_Role_Name_Left:[],O9_RolesUser_assignment_Role_Name_Right:[],user_assignment_select:"",O9_Roles_Invoke_limit_menu:[],O9_Roles_Invoke_limit_menu_select:{},O9_Roles_Approve_limit_menu:[],O9_Roles_Approve_limit_menu_select:{},O9_Roles_InvokeLimit_Table:[],O9_Roles_ApproveLimit_Table:[],table_user_profile_user_in_role:[],invoke_limit_header:[],approve_limit_header:[],Col3_Assignment_Search:{},invoke_limit_search_value:{},approve_limit_search_value:{}},this.menu_form=[{title:"Roles Profile",child:["Invoke - Aprrove","Add - Remove","User Assignment"]},{title:"Invoke Limit",child:[]},{title:"Approve Limit",child:[]}],this.user_profile=s.ZP.context_get("user_acc"),this.stateData={form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],abs_select:(t,e)=>{this.setState({menu_select:e})}},column1:{tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},title_table_up:"OPEARTION",table_up:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_up_data:[],table_up_config:[],title_table_down:"VERIFICATION",table_down:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_down_data:[],table_down_config:[]},column4:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchInvokeLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}]},column5:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchApproveLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]},column2:{role_name_adding:{dataFull:{config:{default:{title:"Role Name (for adding)",type:"text",class:"col-sm-5",code_form_component:"role_name_adding"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:t=>{this.CheckAddRoleName(t)}},listButton:[{dataFull:{config:{default:{title:"Add",icon:"add_circle_outline"},cmd:{}}},abs_Click:()=>{this.setState({addAndRemove_btnAddClick:!0})}},{dataFull:{config:{default:{title:"Delete",icon:"highlight_off"},cmd:{}}},abs_Click:this.removeRoleName},{dataFull:{config:{default:{title:"Save",type:"primary",icon:"check_circle_outline"},cmd:{}}},abs_Click:this.AddRoleName}],role_name_copying:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Role Name (for copying or deleting)",type:"text",class:"col-sm-5",code_form_component:"role_name_copying"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:[],input_value:"123",search_value:""},abs_Change:this.abs_role_name_copying_select,abs_search:t=>{this.onSearch(t,"column2.role_name_copying")}}},column3:{table_in_role:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"User Code",config:{width:"",isFrozen:!1}},{title:"User Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_in_role_data:[{data:[{data:"2"},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_in_role_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:t=>{this.onSearch(t,"column3.role_choose_left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:t=>{this.onSearch(t,"column3.role_choose_right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_left},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_left_data:[{data:[{data:"2"},{value:!1,abs_Click:this.abs_Ckeck},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_right},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_right_data:[{data:[],config:{value:!0}}],table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.getAllRoleAction(),await this.callAPI("O9_Roles_InvokeApprove_Menu").then((t=>{let{O9_Roles_InvokeApprove_Menu:e}=t||[];this.setState({menu_invoke_aprrove:e})}));let t=[],e=[{roleid:0,rolename:"All"}],i=[],o=[],a=[];await this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((e=>{t=e.O9_Roles_Add_and_Remove_Role_Name})),await this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((t=>{e=e.concat(t.O9_RolesUser_assignment_Role_Name_Left)})),await this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((t=>i=t.O9_RolesUser_assignment_Role_Name_Right)),e.length>0&&await this.callAPI("O9_Roles_User_assignment_table",{roleid:0}).then((t=>{o=t.O9_Roles_User_assignment_table})),i.length>0&&await this.callAPI("O9_Roles_User_assignment_table",i[0]).then((t=>{a=t.O9_Roles_User_assignment_table})),this.setState({role_left:e[0],column3_role_right_select:i[0],column3_role_left_select:e[0],column2_role_select:t[0],O9_Roles_Add_and_Remove_Role_Name:t,O9_RolesUser_assignment_Role_Name_Left:e,O9_RolesUser_assignment_Role_Name_Right:i,O9_Roles_User_assignment_table_left:o,O9_Roles_User_assignment_table_right:a,O9_Roles_Invoke_limit_menu:t,O9_Roles_Approve_limit_menu:t,isLoading:!1},(()=>{}))}render(){const t=(0,_.RP)("uFormLoading");return(0,c.jsxs)(o.Fragment,{children:[this.state.isLoading?(0,c.jsx)(t,{}):null,(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(At,{stateData:this.stateData})})]})}convertCurrency(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t||0===t||(t=""),t=String(t);let e=t.replace(/,/g,"");return(0,yt.Nx)(e,2)}reloadTableWithMenuInvokeApprove(t){let e=this.state.menu_invoke_aprrove_select,i=[];this.callAPI("O9_Roles_InvokeApprove_Table_body",e).then((e=>{i=e.O9_Roles_InvokeApprove_Table_body,this.setState({O9_Roles_InvokeApprove_Table_body:i,isLoading:!!t})}))}}const kt=Dt;let Ot;class wt extends o.Component{constructor(t){super(t),this.handleSelectTabID=t=>{this.setState({menu_select:t})},this.handleSelectRoleTabID=t=>{this.setState({menu_role_select:t})},this.handelClearSearch=()=>{},this.getRoleAction=(t,e)=>{let i=(0,s._M)(),o={};const a=e.list_layout;for(const s of i)for(const e of a)for(const i of e.list_view)for(const e of i.list_input){let i=e.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=t[s])||void 0===n||null===(r=n[e.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a}}return o},this.getAllRoleAction=()=>(0,F.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((t=>{var e=s.ZP.foGetData("form_design_detail",t);void 0===e&&(e={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",t)||{};void 0===i&&(i={});let o=this.getRoleAction(i,e);this.setState({role_action:o})})),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callAPI=(t,e)=>{this.state.isLoading||this.setState({isLoading:!0});var i=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return i[0].input=Object.assign(i[0].input,e),(0,F.Yr)(i,{}).then((e=>{let i;return i=s.ZP.foGetData("data",e)?s.ZP.foGetData("data",e):{error_data:s.ZP.foGetData("infoError",e)||[[{info:"Action error!"}]],hasError:!0},i.hasError&&s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info),i||{[t]:[]}})).finally((t=>{this.setState({isLoading:!1})}))},this.handelChangeSearch=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",{role_user:a}=this.state;a.search_value[e]=o,this.setState({role_user:a},(()=>{this.onSearchAdmin("role_user",-1!==e.indexOf("TBL")?"left":"right")}))},this.handelChangeSearchWorkflow=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",{role_workflow:a}=this.state;a.search_value[e]=o,this.setState({role_workflow:a},(()=>{this.onSearchAdmin("role_workflow",-1!==e.indexOf("TBL")?"left":"right")}))},this.onSearchSelect=(t,e,i)=>{switch(e){case"role_user":let{role_user:e}=this.state;switch(i){case"left":e.list_item_left_search=t.target.value,this.setState({role_user:e});break;case"right":e.list_item_right_search=t.target.value,this.setState({role_user:e})}break;case"role_workflow":let{role_workflow:o}=this.state;switch(i){case"left":o.list_item_left_search=t.target.value,this.setState({role_workflow:o});break;case"right":o.list_item_right_search=t.target.value,this.setState({role_workflow:o})}}},this.handleInputRoleViewChange=(t,e)=>{let{role_view:i}=this.state;i[e]=t.target.value,this.setState({role_view:i})},this.onModifyViewRole=()=>{let{role_view:t}=this.state;t.btn_save=!1,t.btn_modify=!0,t.role_name_disable=!1,this.setState({role_view:t})},this.onSaveViewRole=()=>{let{role_view:t}=this.state;t.btn_save=!0,t.btn_modify=!1,t.role_name_disable=!0,this.setState({role_view:t},(()=>{this.callAPI("ncbs_role_update",{ncbs_role:t}).then((e=>{e&&e.ncbs_role&&"COMPLETED"===e.ncbs_role.status?s.ZP.showToast("Save",!0):(t.btn_save=!1,t.btn_modify=!0,t.role_name_disable=!1,this.setState({role_view:t}))}))}))},this.handleInputRoleAddChange=(t,e)=>{let{role_add:i}=this.state;i[e]=t.target.value,"role_code"===e&&(i[e]=i[e].toUpperCase()),this.setState({role_add:i})},this.onSaveAddRole=()=>{let{role_add:t}=this.state;t.btn_save=!0,t.role_code_disable=!0,t.role_name_disable=!0,this.setState({role_add:t},(()=>{this.callAPI("ncbs_role_add",{ncbs_role_add:t}).then((e=>{e&&e.ncbs_role_add&&"COMPLETED"===e.ncbs_role_add.status&&s.ZP.showToast("Save",!0),t.btn_save=!1,t.role_code_disable=!1,t.role_name_disable=!1,this.setState({role_add:t})}))}))},this.onSearch=(t,e)=>{this.page_index=1;let i={paging:{pagingIndex:this.page_index,recordItem:this.state.role.table_search.record_item}},{role:o}=this.state;o.table_search.paging_index=1,this.setState({role:o},(()=>{this.callAPI("ncbs_role_search",{search_text:this.state.role.search_text,table_search:i}).then((t=>{if(t&&t.ncbs_role_search){let e=t.ncbs_role_search;o.table_search.result_total=e.total_items,o.table_search.paging_index=1,this.page_index=1,o.table_search.data=this.getDataTableSearch(e.results),this.setState({role:o})}}))}))},this.pageIndexChangeRoleAdminSearch=(t,e,i)=>{switch(e){case"role_user":let{role_user:e}=this.state;switch(i){case"left":this.page_role_user_left_index=t,e.table_left.paging_index=t,this.setState({role_user:e},(()=>{let t={paging:{pagingIndex:this.page_role_user_left_index,recordItem:100},user_code:e.search_value.TBL_USER_CODE,user_name:e.search_value.TBL_USER_NAME};"all"===e.item_select_left?this.callAPI("ncbs_role_get_user",{ncbs_user_search:{user_code:e.search_value.TBL_USER_CODE,user_name:e.search_value.TBL_USER_NAME},table_search:t}).then((t=>{e.table_left.result_total=t.ncbs_user_search.total_items,e.table_left.data=t.ncbs_user_search.results,this.setState({role_user:e})})):this.callAPI("ncbs_role_get_user_role",{role_code:e.item_select_left,user_code:e.search_value.TBL_USER_CODE,user_name:e.search_value.TBL_USER_NAME,table_search:t}).then((t=>{e.table_left.result_total=t.ncbs_role_get_user_role.total_items,e.table_left.data=t.ncbs_role_get_user_role.results||[],this.setState({role_user:e})}))}));break;case"right":this.page_role_user_right_index=t,e.table_right.paging_index=t,this.setState({role_user:e},(()=>{let t={paging:{pagingIndex:this.page_role_user_right_index,recordItem:100}};this.callAPI("ncbs_role_get_user_role",{role_code:e.item_select_right,user_code:e.search_value.TBR_USER_CODE,user_name:e.search_value.TBR_USER_NAME,table_search:t}).then((t=>{e.table_right.result_total=t.ncbs_role_get_user_role.total_items,e.table_right.data=t.ncbs_role_get_user_role.results||[],this.setState({role_user:e})}))}))}break;case"role_workflow":let{role_workflow:o}=this.state;switch(i){case"left":this.page_role_workflow_left_index=t,o.table_left.paging_index=t,this.setState({role_workflow:o},(()=>{let t={paging:{pagingIndex:this.page_role_workflow_left_index,recordItem:100}};"all"===o.item_select_left?this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{workflow_id:o.search_value.TBL_WORKFLOW_ID,workflow_name:o.search_value.TBL_WORKFLOW_NAME},table_search:t}).then((t=>{o.table_left.result_total=t.ncbs_role_get_workflow.total_items,o.table_left.data=t.ncbs_role_get_workflow.results,this.setState({role_workflow:o})})):this.callAPI("ncbs_role_get_workflow_role",{role_code:o.item_select_left,workflow_id:o.search_value.TBL_WORKFLOW_ID,workflow_name:o.search_value.TBL_WORKFLOW_NAME,table_search:t}).then((t=>{o.table_left.result_total=t.ncbs_role_get_workflow_role.total_items,o.table_left.data=t.ncbs_role_get_workflow_role.results||[],this.setState({role_workflow:o})}))}));break;case"right":this.page_role_workflow_right_index=t,o.table_right.paging_index=t,this.setState({role_workflow:o},(()=>{let t={paging:{pagingIndex:this.page_role_workflow_right_index,recordItem:100}};this.callAPI("ncbs_role_get_workflow_role",{role_code:o.item_select_right,workflow_id:o.search_value.TBR_WORKFLOW_ID,workflow_name:o.search_value.TBR_WORKFLOW_NAME,table_search:t}).then((t=>{o.table_right.result_total=t.ncbs_role_get_workflow_role.total_items,o.table_right.data=t.ncbs_role_get_workflow_role.results||[],this.setState({role_workflow:o})}))}))}}},this.onSearchAdmin=(t,e)=>{switch(t){case"role_user":let{role_user:t}=this.state;switch(e){case"left":this.setState({role_user:t},(()=>{let e={paging:{pagingIndex:this.page_role_user_left_index,recordItem:100}};"all"===t.item_select_left?this.callAPI("ncbs_role_get_user",{ncbs_user_search:{user_code:t.search_value.TBL_USER_CODE,user_name:t.search_value.TBL_USER_NAME},table_search:e}).then((e=>{t.table_left.result_total=e.ncbs_user_search.total_items,t.table_left.data=e.ncbs_user_search.results,this.setState({role_user:t})})):this.callAPI("ncbs_role_get_user_role",{role_code:t.item_select_left,user_code:t.search_value.TBL_USER_CODE,user_name:t.search_value.TBL_USER_NAME,table_search:e}).then((e=>{t.table_left.result_total=e.ncbs_role_get_user_role.total_items,t.table_left.data=e.ncbs_role_get_user_role.results||[],this.setState({role_user:t})}))}));break;case"right":this.setState({role_user:t},(()=>{let e={paging:{pagingIndex:this.page_role_user_right_index,recordItem:100}};this.callAPI("ncbs_role_get_user_role",{role_code:t.item_select_right,user_code:t.search_value.TBR_USER_CODE,user_name:t.search_value.TBR_USER_NAME,table_search:e}).then((e=>{t.table_right.result_total=e.ncbs_role_get_user_role.total_items,t.table_right.data=e.ncbs_role_get_user_role.results||[],this.setState({role_user:t})}))}))}break;case"role_workflow":let{role_workflow:i}=this.state;switch(e){case"left":this.setState({role_workflow:i},(()=>{let t={paging:{pagingIndex:this.page_role_workflow_left_index,recordItem:100}};"all"===i.item_select_left?this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{workflow_id:i.search_value.TBL_WORKFLOW_ID,workflow_name:i.search_value.TBL_WORKFLOW_NAME},table_search:t}).then((t=>{i.table_left.result_total=t.ncbs_role_get_workflow.total_items,i.table_left.data=t.ncbs_role_get_workflow.results,this.setState({role_workflow:i})})):this.callAPI("ncbs_role_get_workflow_role",{role_code:i.item_select_left,workflow_id:i.search_value.TBL_WORKFLOW_ID,workflow_name:i.search_value.TBL_WORKFLOW_NAME,table_search:t}).then((t=>{i.table_left.result_total=t.ncbs_role_get_workflow_role.total_items,i.table_left.data=t.ncbs_role_get_workflow_role.results||[],this.setState({role_workflow:i})}))}));break;case"right":this.setState({role_workflow:i},(()=>{let t={paging:{pagingIndex:this.page_role_workflow_right_index,recordItem:100}};this.callAPI("ncbs_role_get_workflow_role",{role_code:i.item_select_right,workflow_id:i.search_value.TBR_WORKFLOW_ID,workflow_name:i.search_value.TBR_WORKFLOW_NAME,table_search:t}).then((t=>{i.table_right.result_total=t.ncbs_role_get_workflow_role.total_items,i.table_right.data=t.ncbs_role_get_workflow_role.results||[],this.setState({role_workflow:i})}))}))}}},this.pageRecordChangeRoleSearch=t=>{this.page_index=1;let{role:e}=this.state;e.table_search.record_item=this.record[t],e.table_search.paging_index=1,this.setState({role:e},(()=>{let t={paging:{pagingIndex:this.page_index,recordItem:this.state.role.table_search.record_item}};this.callAPI("ncbs_role_search",{search_text:this.state.role.search_text,table_search:t}).then((t=>{if(t&&t.ncbs_role_search){let i=t.ncbs_role_search;e.table_search.result_total=i.total_items,e.table_search.data=this.getDataTableSearch(i.results),this.setState({role:e})}}))}))},this.pageIndexChangeRoleSearch=t=>{this.page_index=t;let{role:e}=this.state;e.table_search.paging_index=t,this.setState({role:e},(()=>{let t={paging:{pagingIndex:this.page_index,recordItem:this.state.role.table_search.record_item}};this.callAPI("ncbs_role_search",{search_text:this.state.role.search_text,table_search:t}).then((t=>{if(t&&t.ncbs_role_search){let i=t.ncbs_role_search;e.table_search.result_total=i.total_items,e.table_search.data=this.getDataTableSearch(i.results),this.setState({role:e})}}))}))},this.removeItemTable=t=>{let e={title:s.ZP.getLang("sysConfirmDelTitle"),content:s.ZP.getLang("sysConfirmDelContent")};s.ZP.confirmInfo(e,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],void 0,(e=>{e&&this.callAPI("ncbs_role_delete",{ncbs_role_search:t}).then((t=>{t&&"COMPLETED"===t.ncbs_role_search.status&&(s.ZP.showToast("Delete",!0),this.onSearch())}))}))},this.handleCheckTable=t=>{let{role_user:e}=this.state;switch(t.type){case"left":for(let i=0;i<e.table_left.data.length;i++){if(e.table_left.data[i].user_code===t.value.user_code){e.table_left.data[i].isCheck=!e.table_left.data[i].isCheck,!0===e.table_left.data[i].isCheck?e.number_item_check_left++:e.number_item_check_left--;break}}break;case"right":for(let i=0;i<e.table_right.data.length;i++){if(e.table_right.data[i].user_code===t.value.user_code){e.table_right.data[i].isCheck=!e.table_right.data[i].isCheck,!0===e.table_right.data[i].isCheck?e.number_item_check_right++:e.number_item_check_right--;break}}}this.setState({role_user:e})},this.handleCheckTableWorkflow=t=>{let{role_workflow:e}=this.state;switch(t.type){case"left":for(let i=0;i<e.table_left.data.length;i++){if(e.table_left.data[i].workflow_id===t.value.workflow_id){e.table_left.data[i].isCheck=!e.table_left.data[i].isCheck,!0===e.table_left.data[i].isCheck?e.number_item_check_left++:e.number_item_check_left--;break}}break;case"right":for(let i=0;i<e.table_right.data.length;i++){if(e.table_right.data[i].workflow_id===t.value.workflow_id){e.table_right.data[i].isCheck=!e.table_right.data[i].isCheck,!0===e.table_right.data[i].isCheck?e.number_item_check_right++:e.number_item_check_right--;break}}}this.setState({role_workflow:e})},this.viewItem=t=>{let{role_view:e}=this.state;e.role_code=t.role_code,e.role_name=t.role_name,e.btn_modify=!1,this.setState({menu_role_select:"role_view",role_view:e})},this.handleRoleSearch=t=>{let{role:e}=this.state;e.search_text=t.target.value,this.setState({role:e})},this.getListItemSelect=t=>{let e=[];for(let i=0;i<t.length;i++){const o=t[i];o.isCheck&&e.push(o)}return e},this.abs_Click_next=()=>{let{role_user:t}=this.state,e=[],i=this.getListItemSelect(t.table_left.data);i.length>0&&(e=this.getDataRoleUserAdd(i,t.item_select_right)),e.length>0?this.callAPI("ncbs_role_add_user",{data_array:e}).then((t=>{t&&t.ncbs_role_add_user&&"COMPLETED"===t.ncbs_role_add_user.status&&(s.ZP.showToast("Add Role",!0),this.resetTableRoleUser())})):s.ZP.showToast("Add Role",!1)},this.abs_Click_next_all=()=>{let{role_user:t}=this.state,e=[];t.table_left.data.length>0&&(e=this.getDataRoleUserAdd(t.table_left.data,t.item_select_right)),e.length>0?this.callAPI("ncbs_role_add_user",{data_array:e}).then((t=>{t&&t.ncbs_role_add_user&&"COMPLETED"===t.ncbs_role_add_user.status&&(s.ZP.showToast("Add Role",!0),this.resetTableRoleUser())})):s.ZP.showToast("Add Role",!1)},this.abs_Click_previous=()=>{let{role_user:t}=this.state,e=[],i=this.getListItemSelect(t.table_right.data);i.length>0&&(e=this.getDataRoleUserAdd(i,t.item_select_right)),e.length>0?this.callAPI("ncbs_role_delete_user",{data_array:e}).then((t=>{t&&t.ncbs_role_delete_user&&"COMPLETED"===t.ncbs_role_delete_user.status&&(s.ZP.showToast("Delete Role",!0),this.resetTableRoleUser())})):s.ZP.showToast("Delete Role",!1)},this.abs_Click_previous_all=()=>{let{role_user:t}=this.state,e=[];t.table_right.data.length>0&&(e=this.getDataRoleUserAdd(t.table_right.data,t.item_select_right)),e.length>0?this.callAPI("ncbs_role_delete_user",{data_array:e}).then((t=>{t&&t.ncbs_role_delete_user&&"COMPLETED"===t.ncbs_role_delete_user.status&&(s.ZP.showToast("Delete Role",!0),this.resetTableRoleUser())})):s.ZP.showToast("Delete Role",!1)},this.abs_Click_next_workflow=()=>{let{role_workflow:t}=this.state,e=[],i=this.getListItemSelect(t.table_left.data);i.length>0&&(e=this.getDataRoleWorkflowAdd(i,t.item_select_right)),e.length>0?this.callAPI("ncbs_role_add_workflow",{data_array:e}).then((t=>{t&&t.ncbs_role_add_workflow&&"COMPLETED"===t.ncbs_role_add_workflow.status&&(s.ZP.showToast("Add Workflow",!0),this.resetTableRoleWorkflow())})):s.ZP.showToast("Add Workflow",!1)},this.abs_Click_next_all_workflow=()=>{let{role_workflow:t}=this.state,e=[];t.table_left.data.length>0&&(e=this.getDataRoleWorkflowAdd(t.table_left.data,t.item_select_right)),e.length>0?this.callAPI("ncbs_role_add_workflow",{data_array:e}).then((t=>{t&&t.ncbs_role_add_workflow&&"COMPLETED"===t.ncbs_role_add_workflow.status&&(s.ZP.showToast("Add Workflow",!0),this.resetTableRoleWorkflow())})):s.ZP.showToast("Add Workflow",!1)},this.abs_Click_previous_workflow=()=>{let{role_workflow:t}=this.state,e=[],i=this.getListItemSelect(t.table_right.data);i.length>0&&(e=this.getDataRoleWorkflowAdd(i,t.item_select_right)),e.length>0?this.callAPI("ncbs_role_delete_workflow",{data_array:e}).then((t=>{t&&t.ncbs_role_delete_workflow&&"COMPLETED"===t.ncbs_role_delete_workflow.status&&(s.ZP.showToast("Delete Workflow",!0),this.resetTableRoleWorkflow())})):s.ZP.showToast("Delete Workflow",!1)},this.abs_Click_previous_all_workflow=()=>{let{role_workflow:t}=this.state,e=[];t.table_right.data.length>0&&(e=this.getDataRoleWorkflowAdd(t.table_right.data,t.item_select_right)),e.length>0?this.callAPI("ncbs_role_delete_workflow",{data_array:e}).then((t=>{t&&t.ncbs_role_delete_workflow&&"COMPLETED"===t.ncbs_role_delete_workflow.status&&(s.ZP.showToast("Delete Workflow",!0),this.resetTableRoleWorkflow())})):s.ZP.showToast("Delete Workflow",!1)},this.onChangeUserAgm=(t,e)=>{let{role_user:i}=this.state;switch(t.type){case"left":if(t.role_code===i.item_select_left)break;i.item_select_left=t.role_code,this.page_role_user_left_index=1;let e={paging:{pagingIndex:this.page_role_user_left_index,recordItem:100}};i.table_left.page_index=1,this.setState({role_user:i},(()=>{"all"===i.item_select_left?this.callAPI("ncbs_role_get_user",{ncbs_user_search:{search_text:""},table_search:e}).then((t=>{i.table_left.result_total=t.ncbs_user_search.total_items,i.table_left.data=t.ncbs_user_search.results||[],i.number_item_check_left=0,i.table_left.data.length>0?i.btn_next_all_disable=!1:i.btn_next_all_disable=!0,this.setState({role_user:i})})):this.callAPI("ncbs_role_get_user_role",{role_code:t.role_code,table_search:e}).then((t=>{i.table_left.result_total=t.ncbs_role_get_user_role.total_items,i.table_left.data=t.ncbs_role_get_user_role.results||[],i.table_left.data.length>0?i.btn_next_all_disable=!1:i.btn_next_all_disable=!0,i.number_item_check_left=0,this.setState({role_user:i})}))}));break;case"right":if(t.role_code===i.item_select_right)break;let o={paging:{pagingIndex:this.page_role_user_right_index,recordItem:100}};this.page_role_user_right_index=1,i.table_right.page_index=1,i.item_select_right=t.role_code,this.setState({role_user:i},(()=>{this.callAPI("ncbs_role_get_user_role",{role_code:t.role_code,table_search:o}).then((t=>{i.table_right.result_total=t.ncbs_role_get_user_role.total_items,i.table_right.data=t.ncbs_role_get_user_role.results||[],i.number_item_check_right=0,i.table_right.data.length>0?i.btn_preview_all_disable=!1:i.btn_preview_all_disable=!0,this.setState({role_user:i})}))}))}},this.onChangeWorkflowAgm=(t,e)=>{let{role_workflow:i}=this.state;switch(t.type){case"left":if(t.role_code===i.item_select_left)break;i.item_select_left=t.role_code,this.page_role_workflow_left_index=1;let e={paging:{pagingIndex:this.page_role_workflow_left_index,recordItem:100}};i.table_left.page_index=1,this.setState({role_workflow:i},(()=>{"all"===i.item_select_left?this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{search_text:""},table_search:e}).then((t=>{i.table_left.result_total=t.ncbs_role_get_workflow.total_items,i.table_left.data=t.ncbs_role_get_workflow.results||[],i.number_item_check_left=0,i.table_left.data.length>0?i.btn_next_all_disable=!1:i.btn_next_all_disable=!0,this.setState({role_workflow:i})})):this.callAPI("ncbs_role_get_workflow_role",{role_code:t.role_code,table_search:e}).then((t=>{i.table_left.result_total=t.ncbs_role_get_workflow_role.total_items,i.table_left.data=t.ncbs_role_get_workflow_role.results||[],i.number_item_check_left=0,i.table_left.data.length>0?i.btn_next_all_disable=!1:i.btn_next_all_disable=!0,this.setState({role_workflow:i})}))}));break;case"right":if(t.role_code===i.item_select_right)break;let o={paging:{pagingIndex:this.page_role_workflow_right_index,recordItem:100}};this.page_role_workflow_right_index=1,i.table_right.page_index=1,i.item_select_right=t.role_code,this.setState({role_workflow:i},(()=>{this.callAPI("ncbs_role_get_workflow_role",{role_code:t.role_code,table_search:o}).then((t=>{i.table_right.result_total=t.ncbs_role_get_workflow_role.total_items,i.table_right.data=t.ncbs_role_get_workflow_role.results||[],i.number_item_check_right=0,i.table_right.data.length>0?i.btn_preview_all_disable=!1:i.btn_preview_all_disable=!0,this.setState({role_workflow:i})}))}))}},this.onChangeCurrency=t=>{t||0===t||(t="");let e=(t=String(t)).replace(/,/g,"");return e.length>16&&(e=e.slice(e.length-16,e.length)),(0,yt.Nx)(e,2)},this.getValueCurrency=t=>void 0===t||null===t||""===t?"":Number(t.replace(/,/g,"")),this.saveInvokeTable=()=>{},Ot=(0,_.Iq)("ncbs_role_management"),this.key_form="ncbs_role_management",this.data_key_form={ncbs_role_management:{title:"Role Management",col_id:"column1"}},this.page_index=0,this.page_role_user_left_index=0,this.page_role_user_right_index=0,this.page_role_workflow_left_index=0,this.page_role_workflow_right_index=0,this.data_tab_global=[{id:"column1",title:"Role",isShow:!0},{id:"column2",title:"Role-User"},{id:"column3",title:"Role-Workflow"}],this.data_tab_column1=[{id:"role_search",title:"Search",isShow:!0},{id:"role_add",title:"Add"},{id:"role_view",title:"View"}],this.data_role_user_logic=[],this.state={menu_parent_select:"Role Management",menu_select:this.data_key_form[this.key_form].col_id,menu_role_select:"role_search",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,role:{search_text:"",table_search:{paging_index:1,result_total:0,data:[],record_item:5}},role_add:{role_code:"",role_name:"",btn_save:!1,role_code_disable:!1,role_name_disable:!1},role_view:{role_code:"",role_name:"",btn_modify:!0,btn_save:!0,role_name_disable:!0},role_user:{list_item_left:[],list_item_left_search:"",item_select_left:"all",table_left:{data:[],paging_index:1,result_total:0},table_right:{data:[],paging_index:1,result_total:0},search_value:{TBR_USER_CODE:"",TBR_USER_NAME:"",TBL_USER_CODE:"",TBL_USER_NAME:""},list_item_right:[],list_item_right_search:"",item_select_right:"",number_item_check_left:0,number_item_check_right:0,btn_next_disable:!0,btn_preview_disable:!0,btn_next_all_disable:!0,btn_preview_all_disable:!0},role_workflow:{list_item_left:[],list_item_left_search:"",item_select_left:"all",table_left:{data:[],paging_index:1,result_total:0},table_right:{data:[],paging_index:1,result_total:0},search_value:{TBR_WORKFLOW_ID:"",TBR_WORKFLOW_NAME:"",TBL_WORKFLOW_ID:"",TBL_WORKFLOW_NAME:""},list_item_right:[],list_item_right_search:"",item_select_right:"",number_item_check_left:0,number_item_check_right:0,btn_next_disable:!0,btn_preview_disable:!0,btn_next_all_disable:!1,btn_preview_all_disable:!1}},this.menu_form=[{title:"Role Management",child:["Role","Role-User","Role-Workflow"]}],this.user_profile=s.ZP.context_get("user_acc"),this.record=[5,10,20,50],this.record_10=[100]}getRecordPageConfig(t){return this.record.map((e=>({number:e,selected:t===e})))}getRecordPage_10Config(t){return this.record_10.map((e=>({number:e,selected:t===e})))}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.setState({isLoading:!1})}async getDataRoleUser(){let{role_user:t}=this.state;this.page_role_user_left_index=this.page_role_user_right_index=1,t.list_item_left=[{role_code:"all",role_name:"All"}],t.list_item_right=[];t.item_select_left="all",await this.callAPI("ncbs_role_search",{search_text:"",table_search:{paging:{pagingIndex:1,recordItem:100}}}).then((e=>{e&&!e.hasError&&(t.list_item_left=t.list_item_left.concat(e.ncbs_role_search.results),t.list_item_right=e.ncbs_role_search.results,t.item_select_right=e.ncbs_role_search.results[0].role_code)}));let e={paging:{pagingIndex:1,recordItem:100}};t.list_item_right.length>0&&await this.callAPI("ncbs_role_get_user_role",{role_code:t.item_select_right,table_search:e}).then((e=>{e&&!e.hasError&&(t.table_right.result_total=e.ncbs_role_get_user_role.total_items,t.table_right.paging_index=1,t.table_right.data=e.ncbs_role_get_user_role.results||[],t.table_right.data.length>0?t.btn_preview_all_disable=!1:t.btn_preview_all_disable=!0)})),t.list_item_left.length>0&&await this.callAPI("ncbs_role_get_user",{ncbs_user_search:{search_text:""},table_search:e}).then((e=>{e&&!e.hasError&&(t.table_left.result_total=e.ncbs_user_search.total_items,t.table_left.paging_index=1,t.table_left.data=e.ncbs_user_search.results,t.table_left.data.length>0?t.btn_next_all_disable=!1:t.btn_next_all_disable=!0)})),this.setState({isLoading:!1,role_user:t})}async getDataRoleWorkflow(){let{role_workflow:t}=this.state;this.page_role_workflow_left_index=this.page_role_workflow_right_index=1,t.list_item_left=[{role_code:"all",role_name:"All"}],t.list_item_right=[];t.item_select_left="all",await this.callAPI("ncbs_role_search",{search_text:"",table_search:{paging:{pagingIndex:1,recordItem:100}}}).then((e=>{e&&!e.hasError&&(t.list_item_left=t.list_item_left.concat(e.ncbs_role_search.results),t.list_item_right=e.ncbs_role_search.results,t.item_select_right=e.ncbs_role_search.results[0].role_code)}));let e={paging:{pagingIndex:1,recordItem:100}};t.list_item_right.length>0&&await this.callAPI("ncbs_role_get_workflow_role",{role_code:t.item_select_right,table_search:e}).then((e=>{e&&!e.hasError&&e&&e.ncbs_role_get_workflow_role&&(t.table_right.result_total=e.ncbs_role_get_workflow_role.total_items,t.table_right.paging_index=1,t.table_right.data=e.ncbs_role_get_workflow_role.results||[],t.table_right.data.length>0?t.btn_preview_all_disable=!1:t.btn_preview_all_disable=!0)})),t.list_item_left.length>0&&await this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{search_text:""},table_search:e}).then((e=>{e&&!e.hasError&&(t.table_left.result_total=e.ncbs_role_get_workflow.total_items,t.table_left.paging_index=1,t.table_left.data=e.ncbs_role_get_workflow.results,t.table_left.data.length>0?t.btn_next_all_disable=!1:t.btn_next_all_disable=!0)})),this.setState({isLoading:!1,role_workflow:t})}getDataForm(){return{form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:this.getDataTab(this.data_tab_global,this.state.menu_select),abs_select:(t,e)=>{this.setState({menu_select:e},(()=>{"column2"===e?this.getDataRoleUser():"column3"===e&&this.getDataRoleWorkflow()}))}},role_search:{search_text:{dataFull:{config:{default:{title:"Search",type:"text",class:"col-sm-4 ",code_form_component:"search_text"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},mode:{isSearch:!0},value:this.state.role.search_text,abs_Change:this.handleRoleSearch,abs_KeyUp:this.enterRoleSearch}},search_button:{dataFull:{config:{default:{title:"Search",icon:"fa-search",type:"primary"}},abs_Click:this.onSearch}},table_search:{dataFull:{Header:{data:[{title:"",config:{width:"50px",isFrozen:!1}},{title:"Role Code",config:{width:"",isFrozen:!1}},{title:"Role Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role.table_search.result_total,paging_index:this.state.role.table_search.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPageConfig(this.state.role.table_search.record_item),abs_PagingActive:t=>{this.pageIndexChangeRoleSearch(t)},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_search_config:[{type:"uTableColumnButtonHover",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_search_data:this.state.role.table_search.data},role_add:{role_code:{dataFull:{config:{default:{title:"Role Code",type:"text",class:"col-sm-6 offset-sm-6-right",code_form_component:"role_code"},cmd:{disable:this.state.role_add.role_code_disable,visible:!0,error:{message:"",type:""}}},value:this.state.role_add.role_code,abs_Change:this.handleInputRoleAddChange}},role_name:{dataFull:{config:{default:{title:"Role name",type:"text",class:"col-sm-6 offset-sm-6-right",code_form_component:"role_name"},cmd:{disable:this.state.role_add.role_name_disable,visible:!0,error:{message:"",type:""}}},value:this.state.role_add.role_name,abs_Change:this.handleInputRoleAddChange}},save_button:{dataFull:{config:{default:{title:"Save",icon:"fa-save",type:"primary"},cmd:{disable:this.state.role_add.btn_save}},abs_Click:this.onSaveAddRole}}},role_view:{role_code:{dataFull:{config:{default:{title:"Role Code",type:"text",class:"col-sm-6 offset-sm-6-right",code_form_component:"role_code"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:this.state.role_view.role_code,abs_Change:this.handleInputRoleViewChange}},role_name:{dataFull:{config:{default:{title:"Role Name",type:"text",class:"col-sm-6 offset-sm-6-right",code_form_component:"role_name"},cmd:{disable:this.state.role_view.role_name_disable,visible:!0,error:{message:"",type:""}}},value:this.state.role_view.role_name,abs_Change:this.handleInputRoleViewChange}},save_button:{dataFull:{config:{default:{title:"Save",icon:"fa-save",type:"primary"},cmd:{disable:this.state.role_view.btn_save}},abs_Click:this.onSaveViewRole}},modify_button:{dataFull:{config:{default:{title:"Modify",icon:"fa-pencil-square-o",type:""},cmd:{disable:this.state.role_view.btn_modify}},abs_Click:this.onModifyViewRole}}},column1:{tab:{data:this.getDataTab(this.data_tab_column1,this.state.menu_role_select),abs_select:(t,e)=>{this.setState({menu_role_select:e})}}},column2:{user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"role_choose_left"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:this.getListData(this.state.role_user.list_item_left,this.state.role_user.item_select_left,this.state.role_user.list_item_left_search,"left"),search_value:this.state.role_user.list_item_left_search},abs_Change:this.onChangeUserAgm,abs_search:t=>{this.onSearchSelect(t,"role_user","left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:this.getListData(this.state.role_user.list_item_right,this.state.role_user.item_select_right,this.state.role_user.list_item_right_search,"right"),search_value:this.state.role_user.list_item_right_search},abs_Change:this.onChangeUserAgm,abs_search:t=>{this.onSearchSelect(t,"role_user","right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{disable:this.state.role_user.btn_preview_disable}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{disable:this.state.role_user.btn_preview_all_disable}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{disable:this.state.role_user.btn_next_all_disable}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{disable:this.state.role_user.btn_next_disable}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1},value_search:this.state.role_user.search_value.TBL_USER_CODE},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1},value_search:this.state.role_user.search_value.TBL_USER_NAME}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role_user.table_left.result_total,paging_index:this.state.role_user.table_left.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPage_10Config(this.record_10[0]),abs_PagingActive:t=>{this.pageIndexChangeRoleAdminSearch(t,"role_user","left")},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_left_data:this.getDataTableRoleUser(this.state.role_user.table_left.data,100*(this.state.role_user.table_left.paging_index-1),"left"),table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1},value_search:this.state.role_user.search_value.TBR_USER_CODE},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1},value_search:this.state.role_user.search_value.TBR_USER_NAME}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role_user.table_right.result_total,paging_index:this.state.role_user.table_right.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPage_10Config(this.record_10[0]),abs_PagingActive:t=>{this.pageIndexChangeRoleAdminSearch(t,"role_user","right")},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_right_data:this.getDataTableRoleUser(this.state.role_user.table_right.data,100*(this.state.role_user.table_right.paging_index-1),"right"),table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]},column3:{user_assignment:{title:"Workflow assignment"},user_in_role:{title:"Workflow in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select workflow group",type:"text",class:"col-md-12",code_form_component:"role_choose_left"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:this.getListData(this.state.role_workflow.list_item_left,this.state.role_workflow.item_select_left,this.state.role_workflow.list_item_left_search,"left"),search_value:this.state.role_workflow.list_item_left_search},abs_Change:this.onChangeWorkflowAgm,abs_search:t=>{this.onSearchSelect(t,"role_workflow","left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:this.getListData(this.state.role_workflow.list_item_right,this.state.role_workflow.item_select_right,this.state.role_workflow.list_item_right_search,"right"),search_value:this.state.role_workflow.list_item_right_search},abs_Change:this.onChangeWorkflowAgm,abs_search:t=>{this.onSearchSelect(t,"role_workflow","right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{disable:this.state.role_workflow.btn_preview_disable}}},abs_Click:this.abs_Click_previous_workflow},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{disable:this.state.role_workflow.btn_preview_all_disable}}},abs_Click:this.abs_Click_previous_all_workflow},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{disable:this.state.role_workflow.btn_next_all_disable}}},abs_Click:this.abs_Click_next_all_workflow},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{disable:this.state.role_workflow.btn_next_disable}}},abs_Click:this.abs_Click_next_workflow},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"Workflow ID",id:"TBL_WORKFLOW_ID",config:{width:"",isFrozen:!1},value_search:this.state.role_workflow.search_value.TBL_WORKFLOW_ID},{title:"Workflow Name",id:"TBL_WORKFLOW_NAME",config:{width:"",isFrozen:!1},value_search:this.state.role_workflow.search_value.TBL_WORKFLOW_NAME}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearchWorkflow,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role_workflow.table_left.result_total,paging_index:this.state.role_workflow.table_left.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPage_10Config(this.record_10[0]),abs_PagingActive:t=>{this.pageIndexChangeRoleAdminSearch(t,"role_workflow","left")},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_left_data:this.getDataTableRoleWorkflow(this.state.role_workflow.table_left.data,100*(this.state.role_workflow.table_left.paging_index-1),"left"),table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearchWorkflow,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"Workflow code",id:"TBR_WORKFLOW_ID",config:{width:"",isFrozen:!1},value_search:this.state.role_workflow.search_value.TBR_WORKFLOW_ID},{title:"Work Name",id:"TBR_WORKFLOW_NAME",config:{width:"",isFrozen:!1},value_search:this.state.role_workflow.search_value.TBR_WORKFLOW_NAME}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role_workflow.table_right.result_total,paging_index:this.state.role_workflow.table_right.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPage_10Config(this.record_10[0]),abs_PagingActive:t=>{this.pageIndexChangeRoleAdminSearch(t,"role_workflow","right")},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_right_data:this.getDataTableRoleWorkflow(this.state.role_workflow.table_right.data,100*(this.state.role_workflow.table_right.paging_index-1),"right"),table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}UNSAFE_componentWillUpdate(t,e){let{role_user:i}=this.state;e.role_user.number_item_check_left>0?i.btn_next_disable=!1:i.btn_next_disable=!0,e.role_user.number_item_check_right>0?i.btn_preview_disable=!1:i.btn_preview_disable=!0,this.state.role_user.btn_next_disable===i.btn_next_disable&&this.state.role_user.btn_preview_disable===i.btn_preview_disable||this.setState({role_user:i});let{role_workflow:o}=this.state;e.role_workflow.number_item_check_left>0?o.btn_next_disable=!1:o.btn_next_disable=!0,e.role_workflow.number_item_check_right>0?o.btn_preview_disable=!1:o.btn_preview_disable=!0,this.state.role_workflow.btn_next_disable===o.btn_next_disable&&this.state.role_workflow.btn_preview_disable===o.btn_preview_disable||this.setState({role_workflow:o})}getListData(t,e,i,o){let a=t.filter((t=>(t.role_name||"").toLowerCase().includes(i.toLowerCase()))),s=[],n=!1;for(let r=0;r<a.length;r++){const t=a[r];let i=!1;t.role_code===e&&(i=!0,n=!0),s.push({title:t.role_name,value:(0,u.Z)((0,u.Z)({},t),{},{type:o}),selected:i}),r!==a.length-1||n||(s[0].selected=!0)}return s}getDataTab(t,e){return t.map((t=>(t.id===e?t.isShow=!0:t.isShow=!1,t)))}render(){const t=(0,_.RP)("uFormLoading");return(0,c.jsxs)(o.Fragment,{children:[this.state.isLoading?(0,c.jsx)(t,{}):null,(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(Ot,{stateData:this.getDataForm()})})]})}getDataTableSearch(t){return t.map((t=>{let e=[];return e.push({icon_item:"fa-eye",title:"View",dataItem:t,abs_Click:this.viewItem}),e.push({icon_item:"fa-trash-o",title:"Delete",dataItem:t,abs_Click:this.removeItemTable}),{data:[{dataFull:{icon:"three-dot"},data:e},{data:t.role_code},{data:t.role_name}],dataItem:t}}))}getDataTableRoleUser(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return t.map(((t,o)=>({data:[{data:e+o+1},{value:t.isCheck||!1,abs_Click:this.handleCheckTable,dataItem:{value:t,index:o,type:i}},{data:t.user_code},{data:t.user_name}],config:{value:!1}})))}getDataTableRoleWorkflow(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return t.map(((t,o)=>({data:[{data:e+o+1},{value:t.isCheck||!1,abs_Click:this.handleCheckTableWorkflow,dataItem:{value:t,index:o,type:i}},{data:t.workflow_id},{data:t.name?t.name:t.workflow_name}],config:{value:!1}})))}getDataRoleUserAdd(t,e){return t.map((t=>({user_code:t.user_code,role_code:e})))}async resetTableRoleUser(){let{role_user:t}=this.state,e={paging:{pagingIndex:1,recordItem:100}};await this.callAPI("ncbs_role_get_user_role",{role_code:t.item_select_right,table_search:e}).then((e=>{t.table_right.result_total=e.ncbs_role_get_user_role.total_items,t.table_right.paging_index=1,t.table_right.data=e.ncbs_role_get_user_role.results||[],t.number_item_check_right=0,t.table_right.data.length>0?t.btn_preview_all_disable=!1:t.btn_preview_all_disable=!0})),"all"===t.item_select_left?await this.callAPI("ncbs_role_get_user",{ncbs_user_search:{search_text:""},table_search:e}).then((e=>{t.table_left.result_total=e.ncbs_user_search.total_items,t.table_left.data=e.ncbs_user_search.results||[],t.number_item_check_left=0,t.table_left.data.length>0?t.btn_next_all_disable=!1:t.btn_next_all_disable=!0})):await this.callAPI("ncbs_role_get_user_role",{role_code:t.item_select_left,table_search:e}).then((e=>{t.table_left.result_total=e.ncbs_role_get_user_role.total_items,t.table_left.data=e.ncbs_role_get_user_role.results||[],t.number_item_check_left=0,t.table_left.data.length>0?t.btn_next_all_disable=!1:t.btn_next_all_disable=!0})),this.setState({isLoading:!1,role_user:t})}getDataRoleWorkflowAdd(t,e){return t.map((t=>({workflow_id:t.workflow_id,role_code:e})))}async resetTableRoleWorkflow(){let{role_workflow:t}=this.state,e={paging:{pagingIndex:1,recordItem:100}};await this.callAPI("ncbs_role_get_workflow_role",{role_code:t.item_select_right,table_search:e}).then((e=>{t.table_right.result_total=e.ncbs_role_get_workflow_role.total_items,t.table_right.paging_index=1,t.table_right.data=e.ncbs_role_get_workflow_role.results||[],t.number_item_check_right=0,t.table_right.data.length>0?t.btn_preview_all_disable=!1:t.btn_preview_all_disable=!0})),"all"===t.item_select_left?await this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{search_text:""},table_search:e}).then((e=>{t.table_left.result_total=e.ncbs_role_get_workflow.total_items,t.table_left.data=e.ncbs_role_get_workflow.results||[],t.number_item_check_left=0,t.table_left.data.length>0?t.btn_next_all_disable=!1:t.btn_next_all_disable=!0})):await this.callAPI("ncbs_role_get_workflow_role",{role_code:t.item_select_left,table_search:e}).then((e=>{t.table_left.result_total=e.ncbs_role_get_workflow_role.total_items,t.table_left.data=e.ncbs_role_get_workflow_role.results||[],t.number_item_check_left=0,t.table_left.data.length>0?t.btn_next_all_disable=!1:t.btn_next_all_disable=!0})),this.setState({isLoading:!1,role_workflow:t})}convertCurrency(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t||0===t||(t=""),t=String(t);let e=t.replace(/,/g,"");return(0,yt.Nx)(e,2)}}const Ct=wt;var xt=i(2200);class St extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)"true"===o[a]&&(o[a]=!0),"false"===o[a]&&(o[a]=!1);this.setState({CMD:o})},this.set=t=>{this.dataGlobal={data:t,total:t.length};let e={data:this.dataGlobal.data,total:this.dataGlobal.total},i=[],o=0;void 0!==e.total&&(o=e.total),void 0!==e.data&&(i=e.data),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:i,total_record:o})},this.getData=()=>({data:this.state.dataFilter}),this.getAdvanced=(t,e)=>this.getData(),this.getHeaderConfig=function(){let t=[];return!0===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&t.push({title:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),t=t.concat(e.state.columns.map((t=>{var i,o;return{title:(null===(i=e.state.lang)||void 0===i||null===(o=i[e.state.lang_select])||void 0===o?void 0:o[t.title])||t.title,id:t.code,config:{width:"",isFrozen:!1},value_search:e.state.columnSearchValue[t.code]}}))),t},this.handelClearSearch=()=>{let t=this.state.columnSearchValue;for(const a in t)t[a]="";let e=this.dataGlobal.data,i=e,o=e.length;this.setState({data:i,dataFilter:e,total_record:o,columnSearchValue:t})},this.getCaptionLang=(t,e,i)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${e}_${i}`]&&(this.CACHE_CDLIST[`${e}_${i}`]=s.ZP.data_cdList(e,i,!0));let o={};for(const s of this.CACHE_CDLIST[`${e}_${i}`]){let t=s.c_cdlist.mcaption||{},e=s.c_cdlist.caption||"";o[s.c_cdlist.cdid]=s.c_cdlist={mcaption:t,caption:e}}const a=o[t]||{};let n=(null===a||void 0===a?void 0:a.mcaption)||{},r=(null===a||void 0===a?void 0:a.caption)||"";return n[s.ZP.getLangKey()]||r},this.handelChangeSearch=(t,e)=>{var i;let o=this.state.columnSearchValue;o[e]=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"";let a=this.state.dataFilter.filter((t=>{let e=!0;for(const a in o){let s=t[a];const n=this.cols_config[a];if("columnMask"===n.inputtype){var i;let t=n.config.mask;(t.includes("DD")&&t.includes("MM")&&t.includes("YY")||!0===(null===(i=n.config)||void 0===i?void 0:i.isDate))&&(void 0!==n.data_type&&"string"===n.data_type&&(s=Y.cI(s,"YYYY-MM-DDTHH:mm:ss.SSS[Z]")),s=Y.FW(s,t))}if("ColumnCdlist"===n.inputtype){let{cdgrp:t,cdname:e}=n.config;s=this.getCaptionLang(s,t,e)}!1===String(s).toLowerCase().includes(o[a].toLowerCase())&&(e=!1)}return e})),s=a,n=a.length;this.setState({data:s,total_record:n,columnSearchValue:o})},this.handleChange=t=>{let{index_row:e,code_col:i,value_change:o}=t,a=i.split("."),s=[];s=this.state.data;let n=this.state.dataFilter;s[e][a[0]]!==o&&(s[e][a[0]]=o,n[t.dataItem.index_row][a[0]]=o,this.setState({data:s,dataFilter:n,column_search:{}},(()=>{this.props.callChange(s[e])})))},this.dataGlobal={data:this.props.data,total:this.props.data.length};let i=0;void 0!==this.dataGlobal.total&&(i=this.dataGlobal.total);let o=[];void 0!==this.dataGlobal.data&&(o=this.dataGlobal.data),this.state={dataFilter:this.dataGlobal.data,data:o,total_record:i,selectedRecordIndex:0,STT:!1,hasCheck:!1,columns:void 0===this.props.columns?[]:this.props.columns,CMD:{},columnSearchValue:{}},this.cols_config={};for(const a of this.state.columns)this.cols_config[a.code]=a}componentDidUpdate(t){if(t.data!==this.props.data){this.dataGlobal={data:this.props.data,total:this.props.data.length};let t={data:this.dataGlobal.data,total:this.dataGlobal.total},e=[],i=0;void 0!==t.total&&(i=t.total),void 0!==t.data&&(e=t.data),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:e,total_record:i})}}render(){var t,e,i;let o=this.getHeaderConfig();const a=(0,_.RP)("uTable"),n=(0,_.RP)("uTableBodyRow");return"false"===String(this.state.CMD.visible)?null:(0,c.jsx)(a,{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:o,config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},dataEmpty:{isShow:!(null!==(t=this.state)&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{maxHeight:!0,modeTitle:"center",isFrozenHeader:!1,isResize:"true"===String(null===(i=this.props.mode)||void 0===i?void 0:i.isResize)}}},children:this.state.data.map(((t,e)=>(0,c.jsx)(n,{children:this.state.columns.map(((i,o)=>{var a,s;let n=xt.Z[i.inputtype];return void 0===n&&(n=xt.Z.ColumnDefault),(0,c.jsx)(n,{tableContext:this,title_parent:i.title,rowData:t,code_col:i.code,index_row:e,title:(null===(a=this.state.lang)||void 0===a||null===(s=a[this.state.lang_select])||void 0===s?void 0:s[i.title])||i.title,config:i.config,data:t[i.code],value:t,dataItem:t,abs_TableChange:this.handleChange},o)}))},e)))})}}const Mt=St;let Pt;class Tt extends o.Component{constructor(t){var e;super(t),e=this,this.changeKeyLanguage=t=>{let e={form_btn_close:s.ZP.getLang("form_close_title"),form_btn_add:s.ZP.getLang("form_add_title")};if(void 0!==t)return e;this.setState({languages:e})},this.closeForm=()=>{s.ZP.removeForm(this.key_form)},this.handleSelectTabID=t=>{this.setState({menu_select:t})},this.handelSearchInvokeLimit=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",a=this.state.invoke_limit_search_value;a[e]=o,this.setState({invoke_limit_search_value:a})},this.handelSearchApproveLimit=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",a=this.state.approve_limit_search_value;a[e]=o,this.setState({approve_limit_search_value:a})},this.handelChangeSearch=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",a=this.state.Col3_Assignment_Search;switch(a[e]=o,e){case"TBL_USER_CODE":this.stateData.column3.table_left.dataFull.Header.data[2].value_search=o;break;case"TBL_USER_NAME":this.stateData.column3.table_left.dataFull.Header.data[3].value_search=o;break;case"TBR_USER_CODE":this.stateData.column3.table_right.dataFull.Header.data[2].value_search=o;break;case"TBR_USER_NAME":this.stateData.column3.table_right.dataFull.Header.data[3].value_search=o}this.setState({Col3_Assignment_Search:a})},this.handelClearSearch=()=>{},this.getTableHeader=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return e.push({title:"Group",code:"module"}),e.push({title:"Caption",code:"tranname"}),t.forEach((t=>{e.push({title:t,code:t})})),e},this.abs_role_name_copying_select=(t,e,i)=>{this.setState({role_name_copying_selected:t.id,column2_role_select:t})},this.abs_Ckeck_invoke_approve_verification=(t,e)=>{this.callAPI("O9_Roles_Invoke_approve_Table_Change_save_approve",{roleid:t.roleid,data:[{roleid:t.roleid,cmdid:t.parentid,cmdiddt:t.cmdiddt,invoke:!1===e?1:0}]}).then((t=>{let e=t.O9_Roles_Invoke_approve_Table_Change_save_approve;this.reloadTableWithMenuInvokeApprove(),1===e[0].type?s.ZP.showToast("Save",!0):s.ZP.showToast("Save",!1)}))},this.abs_Ckeck_invoke_approve_operation=(t,e)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){this.setState({isLoading:!0});let e=[];e.push({role_id:t.role_id,command_id:t.command_id,command_id_detail:"A",invoke:1===t.invoke?0:1,approve:1===t.approve?0:1}),e.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_RIGHT",api_data:{list_user_right:e}}).then((t=>{t&&!t.hasError?this.setState({isLoading:!1},(()=>{s.ZP.showToast("Save",!0),this.reloadTableWithMenuInvokeApprove(!1)})):s.ZP.showToast(t.error_data[0].info,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.UNSAFE_componentWillUpdate=(t,e)=>{var i,o,a,s,n,r,l,d,h,u,p,_,f,g,m,v,b,y,A,D,k,O,w,C,x,S,M,P;let T=e.role_action||{};this.stateData.tab.data=this.stateData.tab.data.map((t=>(t.isShow=t.id===e.menu_select,t))),this.stateData.form.dataFull.cmd.isLoading!==e.isLoading&&(this.stateData.form.dataFull.cmd.isLoading=e.isLoading),this.stateData.column3.table_in_role_data=e.table_user_profile_user_in_role.map((t=>({config:{value:!1},data:[{data:t.role_name},{data:t.user_code},{data:t.user_name+"("+t.login_name+")"}]}))),this.stateData.column1.tree_data.tree_data=null===(i=e.menu_invoke_aprrove)||void 0===i?void 0:i.map((t=>{let e=t;return{title:e.command_name,parent_id:e.parent_id,is_open:!1,DOM_elm:null,id:e.command_id,dataItem:e,abs_click:this.onClickTreeMenuInvokeApprove}})),this.stateData.column1.table_up.dataFull.Header.data=e.O9_Roles_InvokeApprove_Table_header.map(((t,e)=>({title:t.caption,config:{width:"",isFrozen:0===e}})));let I=e.O9_Roles_InvokeApprove_Table_header;this.stateData.column1.table_up_config=I.map(((t,e)=>0===e?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!0}}:{type:"uTableColumnCheckbox",config:{cmd:{disable:!1===T.save}}}));let F=e.O9_Roles_InvokeApprove_Table_body;this.stateData.column1.table_up_data=[];for(let c=0;c<F.length;c++){let t=I.length-1,e=[],i=[];for(let o=0;o<t;o++)0===o&&(e.push({data:F[c+o].role_name}),i.push({data:F[c+o].role_name})),e.push({value:1===F[c+o].invoke,dataItem:F[c+o],abs_Click:this.abs_Ckeck_invoke_approve_operation}),i.push({value:1===F[c+o].approve,dataItem:F[c+o],abs_Click:this.abs_Ckeck_invoke_approve_verification});this.stateData.column1.table_up_data.push(e),c=c+t-1}if(this.stateData.column2.role_name_adding.dataFull.config.cmd.disable=!0!==e.addAndRemove_btnAddClick,this.stateData.column2.listButton[2].dataFull.config.cmd.disable=!0===e.addAndRemove_btnSaveClick,this.stateData.column2.role_name_copying.dataFull.search_value=e["column2.role_name_copying"],this.stateData.column2.listButton[0].dataFull.config.cmd.visible=!1!==T.save,this.stateData.column2.listButton[2].dataFull.config.cmd.visible=!1!==T.save,this.stateData.column2.listButton[1].dataFull.config.cmd.visible=!1!==T.delete,this.stateData.column3.next.dataFull.config.cmd.disable=!1===T.save||0===e.number_item_check_left,this.stateData.column3.next_all.dataFull.config.cmd.disable=!1===T.save,this.stateData.column3.preview.dataFull.config.cmd.disable=!1===T.save||0===e.number_item_check_right,this.stateData.column3.preview_all.dataFull.config.cmd.disable=!1===T.save,!e.role_name_copying_selected&&e.O9_Roles_Add_and_Remove_Role_Name.length>0)this.setState({role_name_copying_selected:e.O9_Roles_Add_and_Remove_Role_Name[0].id});else{var N;this.stateData.column2.role_name_copying.dataFull.input_value=null===(N=e.column2_role_select)||void 0===N?void 0:N.role_name;let t=e.O9_Roles_Add_and_Remove_Role_Name.filter((t=>(t.role_name||"").toLowerCase().includes(e["column2.role_name_copying"].toLowerCase())));this.stateData.column2.role_name_copying.dataFull.data=t.map(((t,i)=>{let o=!1;return t.id===e.role_name_copying_selected&&(o=!0),{title:t.role_name,value:t,selected:o}}))}this.stateData.column2.role_name_adding.dataFull.value=e.role_name_adding_input;let L=this.unCheck_user_assign_table_left,E=this.unCheck_user_assign_table_right;!0===this.unCheck_user_assign_table_left&&(this.unCheck_user_assign_table_left=!1),!0===this.unCheck_user_assign_table_right&&(this.unCheck_user_assign_table_right=!1),this.stateData.column3.table_left_data=null===(o=e.O9_Roles_User_assignment_table_left)||void 0===o?void 0:o.filter((t=>{var i,o;return(null===(i=t.user_code)||void 0===i?void 0:i.toString().includes(e.Col3_Assignment_Search.TBL_USER_CODE||""))&&(null===(o=t.user_name)||void 0===o?void 0:o.toString().includes(e.Col3_Assignment_Search.TBL_USER_NAME||""))})).map(((t,e)=>{var i,o,a;return{data:[{data:e+1},{value:!0!==L&&((null===(i=this.stateData.column3.table_left_data[e])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_left,dataItem:{value:t,index:e}},{data:t.user_code},{data:t.user_name+"("+t.login_name+")"}],config:{value:!1}}})),this.stateData.column3.table_right_data=e.O9_Roles_User_assignment_table_right.filter((t=>t.user_code.includes(e.Col3_Assignment_Search.TBR_USER_CODE||"")&&t.user_name.includes(e.Col3_Assignment_Search.TBR_USER_NAME||""))).map(((t,e)=>{var i,o,a;return{data:[{data:e+1},{value:!0!==E&&((null===(i=this.stateData.column3.table_right_data[e])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_right,dataItem:{value:t,index:e}},{data:t.user_code},{data:t.user_name+"("+t.login_name+")"}],config:{value:!1}}})),this.stateData.column3.role_choose_left.dataFull.data=[],this.stateData.column3.role_choose_left.dataFull.search_value=e["column3.role_choose_left"],this.stateData.column3.role_choose_left.dataFull.input_value=null===(a=e.column3_role_left_select)||void 0===a?void 0:a.role_name,e.O9_RolesUser_assignment_Role_Name_Left.filter((t=>null!==t.role_name&&t.role_name.toLowerCase().includes(e["column3.role_choose_left"].toLowerCase()))).forEach(((t,i)=>{let o=!1;(e.column3_role_left_select.id===t.id||0===i&&void 0===e.column3_role_left_select.id)&&(o=!0),this.stateData.column3.role_choose_left.dataFull.data.push({title:t.role_name,value:{id:t.id,item:t,type:"left"},selected:o})})),this.stateData.column3.role_choose_right.dataFull.search_value=e["column3.role_choose_right"],this.stateData.column3.role_choose_right.dataFull.input_value=null===(s=e.column3_role_right_select)||void 0===s?void 0:s.role_name;let j=e.O9_RolesUser_assignment_Role_Name_Right.filter((t=>null!==t.role_name&&t.role_name.toLowerCase().includes(e["column3.role_choose_right"].toLowerCase())));this.stateData.column3.role_choose_right.dataFull.data=j.map(((t,i)=>{let o=!1;return(e.column3_role_right_select.id===t.id||0===i&&void 0===e.column3_role_right_select.id)&&(o=!0),{title:t.role_name,value:{id:t.id,item:t,type:"right"},selected:o}})),this.stateData.column4.listItem=e.O9_Roles_Invoke_limit_menu.map((t=>{let i=!1;return e.Invoke_role_selected===t.id&&(i=!0),{dataFull:{title:t.role_name,dataItem:t,selected:i},abs_Click:this.onClickMenuInvokeLimit}})),this.stateData.column4.table.dataFull.Header.data=e.invoke_limit_header.map((t=>({id:t.code,title:t.title,config:{width:"",isFrozen:!1},value_search:e.invoke_limit_search_value[t.code]||""}))),this.stateData.column4.table_config=e.invoke_limit_header.map(((t,e)=>e<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===T.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),e.invoke_limit_header.length>0&&(this.stateData.column4.DOM_elm=(0,c.jsx)(Mt,{ref:t=>{this.ref_table=t},data:e.O9_Roles_InvokeLimit_Table,columns:[{code:null===(n=e.invoke_limit_header)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.code,title:null===(l=e.invoke_limit_header)||void 0===l||null===(d=l[0])||void 0===d?void 0:d.title,inputtype:"ColumnString",config:{}},{code:null===(h=e.invoke_limit_header)||void 0===h||null===(u=h[1])||void 0===u?void 0:u.code,title:null===(p=e.invoke_limit_header)||void 0===p||null===(_=p[1])||void 0===_?void 0:_.title,inputtype:"ColumnString",config:{}},{code:null===(f=e.invoke_limit_header)||void 0===f||null===(g=f[2])||void 0===g?void 0:g.code,title:null===(m=e.invoke_limit_header)||void 0===m||null===(v=m[2])||void 0===v?void 0:v.title,inputtype:!1===T.save?"ColumnString":"columnInputEdit",config:{columnEditType:"currency",format:"#,###.00",decimal_length:2}}],callChange:this.abs_save_invoke_table})),this.ref_table&&this.ref_table.set(e.O9_Roles_InvokeLimit_Table),this.stateData.column5.listItem=e.O9_Roles_Invoke_limit_menu.map((t=>{let i=!1;return e.Approve_role_selected===t.id&&(i=!0),{dataFull:{title:t.role_name,dataItem:t,selected:i},abs_Click:this.onClickMenuApproveLimit}})),e.approve_limit_header.length>0&&(this.stateData.column5.DOM_elm=(0,c.jsx)(Mt,{ref:t=>{this.ref_table_approve=t},data:e.O9_Roles_ApproveLimit_Table,columns:[{code:null===(b=e.approve_limit_header)||void 0===b||null===(y=b[0])||void 0===y?void 0:y.code,title:null===(A=e.approve_limit_header)||void 0===A||null===(D=A[0])||void 0===D?void 0:D.title,inputtype:"ColumnString",config:{}},{code:null===(k=e.approve_limit_header)||void 0===k||null===(O=k[1])||void 0===O?void 0:O.code,title:null===(w=e.approve_limit_header)||void 0===w||null===(C=w[1])||void 0===C?void 0:C.title,inputtype:"ColumnString",config:{}},{code:null===(x=e.approve_limit_header)||void 0===x||null===(S=x[2])||void 0===S?void 0:S.code,title:null===(M=e.approve_limit_header)||void 0===M||null===(P=M[2])||void 0===P?void 0:P.title,inputtype:!1===T.save?"ColumnString":"columnInputEdit",config:{columnEditType:"currency",format:"#,###.00",decimal_length:2}}],callChange:this.abs_save_approve_table})),this.ref_table_approve&&this.ref_table_approve.set(e.O9_Roles_ApproveLimit_Table)},this.CheckAddRoleName=t=>{let e=t.target.value,i=!1;for(const o of this.stateData.column2.role_name_copying.dataFull.data)if(o.title===e||""===e){i=!0;break}""===e&&(i=!0),this.setState({addAndRemove_btnSaveClick:i,role_name_adding_input:e})},this.abs_Check_role_profile_user_assign_left=t=>{let{number_item_check_left:e}=this.state;this.onClickAssignLeftRow(t);let i=this.stateData.column3.table_left_data[t.index].data[1];i.value=!i.value,!0===i.value?e++:e--,this.setState({autoReload:!0,number_item_check_left:e})},this.abs_Check_role_profile_user_assign_right=t=>{let{number_item_check_right:e}=this.state,i=this.stateData.column3.table_right_data[t.index].data[1];i.value=!i.value,!0===i.value?e++:e--,this.setState({autoReload:!0,number_item_check_right:e})},this.abs_CheckAll_left=()=>{let t=this.stateData.column3.table_left.dataFull.Header.data[1],e=0;this.stateData.column3.table_left_data.forEach((()=>{!0===t.data.value?this.stateData.column3.table_left_data[e].data[1].value=!1:this.stateData.column3.table_left_data[e].data[1].value=!0,e++})),t.data.value=!t.data.value,this.setState({autoReload:!0})},this.abs_CheckAll_right=()=>{let t=this.stateData.column3.table_right.dataFull.Header.data[1],e=0;this.stateData.column3.table_right_data.forEach((()=>{!0===t.data.value?this.stateData.column3.table_right_data[e].data[1].value=!1:this.stateData.column3.table_right_data[e].data[1].value=!0,e++})),t.data.value=!t.data.value,this.setState({autoReload:!0})},this.abs_change_approve_table=(t,e,i,o)=>{let a=t.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_ApproveLimit_Table;let l=r[e.row_idx][e.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let t=l.lastIndexOf(".");c=n.substring(0,t)+"."+n.substring(t,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[e.row_idx][e.header.code]=d,this.setState({O9_Roles_ApproveLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_change_invoke_table=(t,e,i,o)=>{let a=t.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_InvokeLimit_Table;let l=r[e.row_idx][e.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let t=l.lastIndexOf(".");c=n.substring(0,t)+"."+n.substring(t,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[e.row_idx][e.header.code]=d,this.setState({O9_Roles_InvokeLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_submit_invoke_table=(t,e,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let e=this.state.O9_Roles_InvokeLimit_Table,i=[];i.push({role_id:this.state.Invoke_role_selected,command_id:t.row_data.cmdid,currency_code:t.header.code,limit_type:"I",u_limit:""!==this.getValueCurrency(e[t.row_idx][t.header.code])?this.getValueCurrency(e[t.row_idx][t.header.code]):null}),i.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_LIMIT",api_data:{list_user_limit:i}}).then((i=>{i&&!i.hasError?this.setState({isLoading:!1},(()=>{let i=[];i.push({role_id:this.state.Invoke_role_selected,command_id:t.row_data.cmdid,command_id_detail:"I",invoke:""!==this.getValueCurrency(e[t.row_idx][t.header.code])?1:0,approve:1}),i.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_RIGHT",api_data:{list_user_right:i}}).then((t=>{t.hasError?s.ZP.showToast(t.error_data[0].info,!1):s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i.error_data[0].info,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.abs_save_invoke_table=t=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let e=this.state.invoke_limit_header[2].code,i=[];i.push({role_id:this.state.Invoke_role_selected,command_id:t.cmdid,currency_code:e,limit_type:"I",u_limit:""!==t[e]&&void 0!==t[e]&&null!==t[e]?t[e]:null}),i.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_LIMIT",api_data:{list_user_limit:i}}).then((i=>{i&&!i.hasError?this.setState({isLoading:!1},(()=>{let i=[];i.push({role_id:this.state.Invoke_role_selected,command_id:t.cmdid,command_id_detail:"I",invoke:""!==t[e]&&void 0!==t[e]&&null!==t[e]?1:0,approve:1}),i.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_RIGHT",api_data:{list_user_right:i}}).then((t=>{t.hasError?s.ZP.showToast(t.error_data[0].info,!1):s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i.error_data[0].info,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.abs_submit_approve_table=(t,e,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let e=this.state.O9_Roles_ApproveLimit_Table,i=[];i.push({role_id:this.state.Approve_role_selected,command_id:t.row_data.cmdid,currency_code:t.header.code,limit_type:"A",u_limit:""!==this.getValueCurrency(e[t.row_idx][t.header.code])?this.getValueCurrency(e[t.row_idx][t.header.code]):null}),i.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_LIMIT",api_data:{list_user_limit:i}}).then((t=>{t&&!t.hasError?this.setState({isLoading:!1},(()=>{s.ZP.showToast("Save",!0)})):s.ZP.showToast(t.error_data[0].info,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.abs_save_approve_table=(t,e,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let e=this.state.approve_limit_header[2].code,i=[];i.push({role_id:this.state.Approve_role_selected,command_id:t.cmdid,currency_code:e,limit_type:"A",u_limit:""!==t[e]&&void 0!==t[e]&&null!==t[e]?t[e]:null}),i.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_LIMIT",api_data:{list_user_limit:i}}).then((t=>{t&&!t.hasError?this.setState({isLoading:!1},(()=>{s.ZP.showToast("Save",!0)})):s.ZP.showToast(t.error_data[0].info,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.getRoleAction=(t,e)=>{let i=(0,s._M)(),o={};const a=e.list_layout;for(const s of i)for(const e of a)for(const i of e.list_view)for(const e of i.list_input){let i=e.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=t[s])||void 0===n||null===(r=n[e.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a}}return o},this.getAllRoleAction=()=>(0,F.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((t=>{var e=s.ZP.foGetData("form_design_detail",t);void 0===e&&(e={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",t)||{};void 0===i&&(i={});let o=this.getRoleAction(i,e);this.setState({role_action:o})})),this.getMenuTreeTemplate=()=>this.DATA_MENU.map((t=>({title:t.command_name||"#ERROR",parent_id:t.parent_id,is_open:!1,DOM_elm:null,id:t.command_id,dataItem:{menu:t},abs_click:this.abs_select_item_menu}))),this.findListAuthorzieForms=t=>{let e="";for(let i=0;i<this.DATA_MENU.length;i++){const o=this.DATA_MENU[i].group_menu;void 0!==o.group_menu_function_code&&o.group_menu_function_code===t&&void 0!==o.group_menu_list_authorize_form&&(e=o.group_menu_list_authorize_form)}return e},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.convertDataUser=t=>{let e=[];for(let i=0;i<t.length;i++){const o=t[i];void 0!==o.usr_code&&(o.user_code=o.usr_code),void 0!==o.usr_name&&(o.user_name=o.usr_name),void 0!==o.usr_id&&(o.user_id=o.usr_id),void 0!==o.user_code?o.user_code=o.user_code:void 0!==o.id&&(o.user_id=o.id),e.push(o)}return e},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t,app:"ncbsCbs"}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>{var e;return(e=s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0}).hasError&&s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1),e})).finally((t=>{e.setState({isLoading:!1})}))},this.AddRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.add&&this.state.role_action.save){let t=this.state.role_name_copying_selected,e=this.state.role_name_adding_input;""!==t&&""!==e&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_INSERT_USER_ROLE",api_data:{role_name:e,role_template_id:t,user_role_status:"N"}}).then((t=>{if(t&&!t.hasError){let t=[{id:0,role_name:"All"}],e=[],i=[];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_SIMPLE_SEARCH_USER_ROLE",api_data:{page_size:0,page_index:0,search_text:""}}).then((o=>{i=o.items||[],t=t.concat(o.items||[]),e=o.items||[];this.state.role_name_adding_input;this.setState({O9_Roles_Add_and_Remove_Role_Name:i,isAdd_add_and_remove:!1,addAndRemove_btnAddClick:!1,role_name_adding_input:"",addAndRemove_btnSaveClick:!0,O9_RolesUser_assignment_Role_Name_Left:t,O9_RolesUser_assignment_Role_Name_Right:e,O9_Roles_Invoke_limit_menu:i,O9_Roles_Approve_limit_menu:i}),s.ZP.showToast("Save",!0)}))}else s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.onSearch=(t,e)=>{this.setState({[e]:t.target.value})},this.abs_Click_next=()=>{this.onClickAssignLeftToRightArray()},this.abs_Click_next_all=()=>{this.onClickAssignLeftToRightAll()},this.abs_Click_previous=()=>{this.onClickAssignRightToLeftArray()},this.abs_Click_previous_all=()=>{this.onClickAssignRightToLeftAll()},this.onClickAssignLeftToRightAll=()=>{let t=this.state.O9_Roles_User_assignment_table_right,e=this.stateData.column3.table_left_data.filter((e=>0===t.filter((t=>t.user_code===e.data[1].dataItem.value.user_code)).length)).map((t=>t.data[1].dataItem.value)),i=this.state.column3_role_right_select.id,o=this.converDataApiAddUserRole(e,i);""!==i&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_INSERT_LIST_ROLE_OF_USER",api_data:{list_role_of_user:o}}).then((t=>{t&&!t.hasError?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:i,user_code:null}}).then((t=>{let e=t.items||[];e=this.convertDataUser(e),this.setState({O9_Roles_User_assignment_table_right:e,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:e,app:this.state.app_select}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1,number_item_check_left:0}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t.error_data[0].info,!1,!1),this.setState({jwebuiAutoReload:!0,number_item_check_left:0}))}));let a=this.stateData.column3.table_left.dataFull.Header.data[1],n=0;this.stateData.column3.table_left_data.forEach((()=>{!0===a.data.value&&(this.stateData.column3.table_left_data[n].data[1].value=!1),n++})),a.data.value=!1},this.onClickAssignRightToLeftAll=()=>{let t=this.stateData.column3.table_right_data.map((t=>t.data[1].dataItem.value)),e=this.state.column3_role_right_select.id;this.unCheck_user_assign_table_right=!0;let i=this.converDataApiAddUserRole(t,e);""!==e&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_DELETE_LIST_ROLE_OF_USER",api_data:{list_role_of_user:i}}).then((t=>{t&&!t.hasError?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:e,user_code:null}}).then((t=>{let i=t.items||[];i=this.convertDataUser(i),this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:e,role_user_all:i,app:this.state.app_select}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1,number_item_check_right:0}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t.error_data[0].info,!1,!1),this.setState({jwebuiAutoReload:!0,number_item_check_right:0}))}));let o=this.stateData.column3.table_right.dataFull.Header.data[1],a=0;this.stateData.column3.table_right_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_right_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignLeftToRightArray=()=>{let t=this.state.O9_Roles_User_assignment_table_right,e=this.stateData.column3.table_left_data.filter((e=>!0===e.data[1].value&&0===t.filter((t=>t.user_code===e.data[1].dataItem.value.user_code)).length)).map((t=>t.data[1].dataItem.value)),i=this.state.column3_role_right_select.id;this.unCheck_user_assign_table_left=!0;let o=this.converDataApiAddUserRole(e,i);""!==i&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_INSERT_LIST_ROLE_OF_USER",api_data:{list_role_of_user:o}}).then((t=>{t&&!t.hasError?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:i,user_code:null}}).then((t=>{let e=t.items||[];e=this.convertDataUser(e),this.setState({O9_Roles_User_assignment_table_right:e,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:e,app:this.state.app_select}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1,number_item_check_left:0}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t.error_data[0].info,!1,!1),this.setState({jwebuiAutoReload:!0,number_item_check_left:0}))}));let a=this.stateData.column3.table_left.dataFull.Header.data[1],n=0;this.stateData.column3.table_left_data.forEach((()=>{!0===a.data.value&&(this.stateData.column3.table_left_data[n].data[1].value=!1),n++})),a.data.value=!1},this.onClickAssignLeftRow=t=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:null,user_code:t.value.user_code}}).then((t=>{let e=(null===t||void 0===t?void 0:t.items)||[];e=this.convertDataUser(e),this.setState({table_user_profile_user_in_role:e})}))},this.onClickAssignRightToLeftArray=t=>{let e=this.stateData.column3.table_right_data.filter((t=>!0===t.data[1].value)).map((t=>t.data[1].dataItem.value)),i=this.state.column3_role_right_select.id;this.unCheck_user_assign_table_right=!0;let o=this.converDataApiAddUserRole(e,i);""!==i&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_DELETE_LIST_ROLE_OF_USER",api_data:{list_role_of_user:o}}).then((t=>{t&&!t.hasError?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:i,user_code:null}}).then((t=>{let e=t.items||[];e=this.convertDataUser(e),this.setState({O9_Roles_User_assignment_table_right:e,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:e,app:this.state.app_select}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1,number_item_check_right:0}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t.error_data[0].info,!1,!1),this.setState({jwebuiAutoReload:!0,number_item_check_right:0}))}));let a=this.stateData.column3.table_right.dataFull.Header.data[1],n=0;this.stateData.column3.table_right_data.forEach((()=>{!0===a.data.value&&(this.stateData.column3.table_right_data[n].data[1].value=!1),n++})),a.data.value=!1},this.onChangeUserAgm=(t,e)=>{switch(t.type){case"left":if(t.id===this.state.column3_role_right_select.id)break;0===t.id?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_LOOKUP_USER_ACCOUNT",api_data:{user_code:"",user_name:"",login_name:"",branch_name:"",department_name:"",user_account_status:"N",is_online:"",email:"",page_index:0,page_size:0},number_of_step:1}).then((e=>{let i=e.items||[];i=this.convertDataUser(i);let o=this.state.O9_RolesUser_assignment_Role_Name_Left.filter((e=>e.id===t.id));this.setState({O9_Roles_User_assignment_table_left:i,column3_role_left_select:o[0]})})):this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:t.id,user_code:null}}).then((e=>{let i=e.items||[],o=this.state.O9_RolesUser_assignment_Role_Name_Left.filter((e=>e.id===t.id));i=this.convertDataUser(i),this.setState({O9_Roles_User_assignment_table_left:i,column3_role_left_select:o[0]})}));break;case"right":if(t.id===this.state.column3_role_left_select.roleid)break;this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:t.id,user_code:null}}).then((e=>{let i=e.items||[],o=this.state.O9_RolesUser_assignment_Role_Name_Right.filter((e=>e.id===t.id));i=this.convertDataUser(i),this.setState({O9_Roles_User_assignment_table_right:i,column3_role_right_select:o[0]})}))}},this.onChangeCurrency=t=>{t||0===t||(t="");let e=(t=String(t)).replace(/,/g,"");return e.length>16&&(e=e.slice(e.length-16,e.length)),(0,yt.Nx)(e,2)},this.getValueCurrency=t=>void 0===t||null===t||""===t?"":Number(t.replace(/,/g,"")),this.saveInvokeTable=()=>{},this.onClickMenuInvokeLimit=t=>{let e=t.dataFull.dataItem;this.callAPI("O9_Roles_InvokeLimit_Table",e).then((t=>{void 0===t&&(t={}),t&&!t.hasError?this.setState({O9_Roles_Invoke_limit_menu_select:e,Invoke_role_selected:e.id},(()=>{this.reloadTableInvokeLimit(t)})):(s.ZP.showToast(t.error_data[0].info,!1,!1),this.setState({jwebuiAutoReload:!0}))}))},this.reloadTableInvokeLimit=t=>{if(t){let e=t.currency||[],i=t.data;for(const t of e)for(let e=0;e<i.length;e++){const o=i[e];o[t]=this.convertCurrency(o[t]),o.index_row=e}this.setState({O9_Roles_InvokeLimit_Table:i,invoke_limit_header:this.getTableHeader(e),invoke_limit_currency:e})}},this.onClickMenuApproveLimit=t=>{t=t.dataFull.dataItem,this.callAPI("O9_Roles_ApproveLimit_Table",t).then((e=>{if(e&&!e.hasError){let i=e,o=i.currency,a=i.data;for(const t of o)for(let e=0;e<a.length;e++){const i=a[e];i[t]=this.convertCurrency(i[t]),i.index_row=e}this.setState({O9_Roles_ApproveLimit_Table:a,O9_Roles_Approve_limit_menu_select:t,Approve_role_selected:t.id,approve_limit_header:this.getTableHeader(o)})}else s.ZP.showToast(e.error_data[0].info,!1,!1),this.setState({jwebuiAutoReload:!0})}))},this.onClickTreeMenuInvokeApprove=(t,e)=>{(e=e.dataItem).isOpen=!e.isOpen;let i=this.state.menu_invoke_aprrove,o=[{cmdid:"0",caption:"Role Name"},{cmdid:"0",caption:"Self Invoke"}],a=[];this.loadInvokeApproveTable(e).then((t=>{void 0!==t.operation_header&&(o=o.concat(t.operation_header)),void 0!==t.operation_body&&(a=t.operation_body),this.setState({menu_invoke_aprrove:i,O9_Roles_InvokeApprove_Table_body:a,O9_Roles_InvokeApprove_Table_header:o,menu_invoke_aprrove_select:e})}))},this.removeRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.delete){let t=this.state.role_name_copying_selected;""!==t&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_DELETE_USER_ROLE",api_data:{id:t}}).then((t=>{if(t&&!t.hasError){let t=[{id:0,role_name:"All"}],e=[],i=[];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_SIMPLE_SEARCH_USER_ROLE",api_data:{page_size:0,page_index:0,search_text:""}}).then((o=>{i=o.items||[],t=t.concat(o.items||[]);let a=i[0];e=o.items||[];let n=this.state.role_name_copying_selected;this.setState({O9_Roles_Add_and_Remove_Role_Name:i,isAdd_add_and_remove:!1,isDelete_add_and_remove:!1,delete_err:"",role_name_copying_selected:a.roleid,column2_role_select:a,O9_RolesUser_assignment_Role_Name_Left:t,O9_RolesUser_assignment_Role_Name_Right:e,O9_Roles_Invoke_limit_menu:i,O9_Roles_Approve_limit_menu:i}),s.ZP.showToast("Save",!0);var r=[{txcode:"bo-delete-roleJWEBUI",input:{roleID:n,app:this.state.app_select}}];return(0,F.Yr)(r,{}).then((t=>{}))}))}else s.ZP.showToast(t.error_data[0].info,!1),this.setState({delete_err:t.error_data[0].info||""})}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))};let i=this.changeKeyLanguage("start");Pt=(0,_.Iq)("system_roleProfile"),this.key_form="BO_015003003",this.list_app=this.props.list_app.filter((t=>"A"===t.list_appliaction.status&&"designForm"!==t.list_appliaction.list_appliaction_id)).sort(((t,e)=>t.list_appliaction.list_appliaction_order-e.list_appliaction.list_appliaction_order)),this.data_key_form={BO_015003003:{title:"ADM-Roles Profile",col_id:"column1"},BO_015003008:{title:"ADM-Invoke Limit",col_id:"column4"},BO_015003009:{title:"ADM-Approve Limit",col_id:"column5"}},this.state={app_select:this.list_app[0].list_appliaction.list_appliaction_id,menu_parent_select:"ADM - Roles Profile",menu_select:this.data_key_form[this.key_form].col_id,number_item_check_left:0,number_item_check_right:0,"column3.role_choose_right":"","column3.role_choose_left":"","column2.role_name_copying":"",column3_role_left_select:0,role_name_adding_input:"",role_name_copying_selected:"",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,menu_invoke_aprrove:[],O9_Roles_InvokeApprove_Table_header:[],O9_Roles_InvokeApprove_Table_body:[],menu_invoke_aprrove_select:{},O9_Roles_Add_and_Remove_Role_Name:[],O9_Roles_Add_and_Remove_Role_Name_select:"",O9_Roles_User_assignment_table_left:[],O9_Roles_User_assignment_table_right:[],O9_RolesUser_assignment_Role_Name_Left:[],O9_RolesUser_assignment_Role_Name_Right:[],user_assignment_select:"",O9_Roles_Invoke_limit_menu:[],O9_Roles_Invoke_limit_menu_select:{},O9_Roles_Approve_limit_menu:[],O9_Roles_Approve_limit_menu_select:{},O9_Roles_InvokeLimit_Table:[],O9_Roles_ApproveLimit_Table:[],table_user_profile_user_in_role:[],invoke_limit_header:[],approve_limit_header:[],Col3_Assignment_Search:{},languages:i,invoke_limit_search_value:{},approve_limit_search_value:{}},this.menu_form=[{title:"Roles Profile",child:["Invoke - Aprrove","Add - Remove","User Assignment"]},{title:"Invoke Limit",child:[]},{title:"Approve Limit",child:[]}],this.user_profile=s.ZP.context_get("user_acc"),this.stateData={form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},title_button:{close_button:i.form_btn_close,add_form:i.form_btn_add},cmd:{visibility:"",isLoading:!1},abs_Close:this.closeForm,abs_AddMenuBar:this.addMenu}},list_app:{data:this.list_app.map((t=>({id:t.list_appliaction.list_appliaction_id,title:t.list_appliaction.list_appliaction_name}))),abs_select:async(t,e)=>{if(e!==this.state.app_select){this.setState({isLoading:!0});var i=[{txcode:"#sys:bo-load-groupMenu-forApp",input:{app:e}}];await(0,F.Yr)(i,{}).then((t=>{let i=s.ZP.foGetData("data",t)||[];this.stateData.tab.data="ncbsCbs"!==e?[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0}]:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],this.setState({menu_invoke_aprrove:i,isLoading:!1,app_select:e,menu_select:this.data_key_form[this.key_form].col_id})}))}}},tab:{data:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],abs_select:(t,e)=>{this.setState({menu_select:e})}},column1:{tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},title_table_up:"OPEARTION",table_up:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1,maxHeight:!0}}}},table_up_data:[],table_up_config:[],title_table_down:"",table_down:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_down_data:[],table_down_config:[]},column4:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchInvokeLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}]},column5:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchApproveLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]},column2:{role_name_adding:{dataFull:{config:{default:{title:"Role Name (for adding)",type:"text",class:"col-sm-5",code_form_component:"role_name_adding"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:t=>{this.CheckAddRoleName(t)}},listButton:[{dataFull:{config:{default:{title:"Add",icon:"add_circle_outline"},cmd:{}}},abs_Click:()=>{this.setState({addAndRemove_btnAddClick:!0})}},{dataFull:{config:{default:{title:"Delete",icon:"highlight_off"},cmd:{}}},abs_Click:this.removeRoleName},{dataFull:{config:{default:{title:"Save",type:"primary",icon:"check_circle_outline"},cmd:{}}},abs_Click:this.AddRoleName}],role_name_copying:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Role Name (for copying or deleting)",type:"text",class:"col-sm-5",code_form_component:"role_name_copying"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:[],input_value:"123",search_value:""},abs_Change:this.abs_role_name_copying_select,abs_search:t=>{this.onSearch(t,"column2.role_name_copying")}}},column3:{table_in_role:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"User Code",config:{width:"",isFrozen:!1}},{title:"User Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_in_role_data:[{data:[{data:"2"},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_in_role_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:t=>{this.onSearch(t,"column3.role_choose_left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:t=>{this.onSearch(t,"column3.role_choose_right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{disable:!0}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{disable:!0}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{disable:!0}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{disable:!0}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_left},config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_left_data:[{data:[{data:"2"},{value:!1,abs_Click:this.abs_Ckeck},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_right},config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_right_data:[{data:[],config:{value:!0}}],table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}getListRoleForm(t){let e=[];if("0"===t.cmdiddt){let i=t.list_component_codeHidden.split(";");for(let o=0;o<i.length;o++){const a=i[o];""!==a&&a.includes("_")&&3===a.split("_").length&&e.push({role_id:t.role_id,command_id:a,command_id_detail:"A",invoke:1===t.invoke?0:1,approve:1===t.approve?0:1})}}else{let i=t.cmdiddt.split(";");for(let o=0;o<i.length;o++){const a=i[o];""!==a&&a.includes("_")&&3===a.split("_").length&&e.push({role_id:t.roleid,command_id:a,command_id_detail:"0",invoke:1===t.invoke?0:1,approve:1===t.approve?0:1})}}return e}onCallForm(t,e,i){if(!t)return;this.setState({isLoading:!0});let o=!1,a=this.findListAuthorzieForms(t);""===a?(o=!0,a=this.findListAuthorzieForms(i),""===a?a=i+a:""!==i&&(a=i+";"+a)):a=t+";"+a;let n=this.state.menu_invoke_aprrove.filter((e=>e.group_menu.group_menu_parent===t)),r=n;for(;r.length>0;){let t=[];for(let e=0;e<r.length;e++){const i=r[e];let o=this.state.menu_invoke_aprrove.filter((t=>t.group_menu.group_menu_parent===i.group_menu.group_menu_id));o.length>0&&(t=t.concat(o))}r=t,r.length>0&&(n=n.concat(r))}if(n.length>0)for(let s=0;s<n.length;s++){const t=n[s].group_menu;let e=this.findListAuthorzieForms(t.group_menu_function_code),i=t.group_menu_function_code;""===i?i=e:""!==e&&(i+=";"+e),a+=""!==a?";"+i:i}(0,F.Yr)([{txcode:"#sys:bo-load-list-authorize-forms",input:{list_authorize_forms:a,app:this.state.app_select}}],{infoA:{key_form:this.key_form}}).then((a=>{let r=[],l=s.ZP.foGetData("list_authorize_forms",a)||[],c=this.stateData.column1.tree_data.tree_data;for(let s of c)if(s.dataItem.group_menu_id===t){let a=[];if(l.length>0)for(let e=0;e<l.length;e++){let i=l[e],o=i.form_design_detail,s=i.form_role_task||{};r.push(s),void 0===o&&(o={info:{form_code:t,form_name:o.info.title},list_layout:[]}),a=a.concat(this.getListButton(o))}let s=[{cmdid:"0",caption:"Role Name"}],c=this.convertListButton(a,this.convertMenuChild(n),!0===o?i:t);s=0===n.length?s.concat(c):s.concat(c.slice(0,1));let d=[],h=this.state.O9_RolesUser_assignment_Role_Name_Right;for(let t=0;t<h.length;t++){const i=h[t];for(let t=0;t<s.length;t++){const o=s[t];let a={approve:0,cmdiddt:o.cmdid,invoke:0,parentid:e,roleid:i.id,role_name:i.role_name,menu_child:o.menu_child,list_component_codeHidden:o.list_component};for(let t=0;t<r.length;t++){const e=r[t];if(e[i.id]&&e[i.id][o.cmdid]&&e[i.id][o.cmdid].component&&e[i.id][o.cmdid].component.install){a.approve=!0===e[i.id][o.cmdid].component.install?1:0,a.invoke=!0===e[i.id][o.cmdid].component.install?1:0;break}if(e[i.id]&&e[i.id][o.form_id]&&e[i.id][o.form_id].form&&e[i.id][o.form_id].form.accept&&!0===e[i.id][o.form_id].form.accept){a.approve=!0===e[i.id][o.form_id].form.accept?1:0,a.invoke=!0===e[i.id][o.form_id].form.accept?1:0;break}if(n.length>0){let o=this.convertMenuChild(n);if(o[t]&&e[i.id]&&e[i.id][o[t].form_id]&&e[i.id][o[t].form_id].form&&e[i.id][o[t].form_id].form.accept&&!0===e[i.id][o[t].form_id].form.accept){a.approve=!0===e[i.id][o[t].form_id].form.accept?1:0,a.invoke=!0===e[i.id][o[t].form_id].form.accept?1:0;break}}}d.push(a)}}this.setState({O9_Roles_InvokeApprove_Table_header:s,O9_Roles_InvokeApprove_Table_body:d},(()=>{setTimeout((()=>{this.setState({isLoading:!1})}),500)}))}}),(t=>{}))}convertMenuChild(t){if(t.length>0){let e=[];for(let i=0;i<t.length;i++){const o=t[i];o.group_menu&&o.group_menu.group_menu_module_form&&e.push({cmdid:o.group_menu.group_menu_module_form,form_id:o.group_menu.group_menu_function_code})}return e}return t}convertListButton(t,e,i){let o=[{caption:"Self Invoke",menu_child:e,cmdid:"0",form_id:i}],a="";if(t.length>0)for(let s=0;s<t.length;s++){let e=t[s].default;-1===a.indexOf(e.codeHidden)&&(a+=";"+e.codeHidden,o.push({caption:e.name,menu_child:[],cmdid:e.codeHidden}))}return o[0].list_component=a,o}getListButton(t){let e=[];if(t&&t.list_layout&&t.list_layout.length>0)for(let i=0;i<t.list_layout.length;i++){const o=t.list_layout[i];if(o&&o.list_view&&o.list_view.length>0)for(let t=0;t<o.list_view.length;t++){const i=o.list_view[t];if(i&&i.list_input&&i.list_input.length>0)for(let t=0;t<i.list_input.length;t++){const o=i.list_input[t];o&&"cButton"===o.inputtype&&e.push(o)}}}return e}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.getAllRoleAction();var t=[{txcode:"#sys:bo-load-groupMenu-forApp",input:{app:this.state.app_select}}];await(0,F.Yr)(t,{}).then((t=>{let e=s.ZP.foGetData("data",t)||[];this.setState({menu_invoke_aprrove:e,isLoading:!1})}));let e=[],i=[{id:0,role_name:"All"}],o=[],a=[],n=[];await this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_SIMPLE_SEARCH_USER_ROLE",api_data:{page_size:0,page_index:0,search_text:""}}).then((t=>{e=t.items||[],i=i.concat(t.items||[]),o=t.items||[]})),i.length>0&&await this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_LOOKUP_USER_ACCOUNT",api_data:{user_code:"",user_name:"",login_name:"",branch_name:"",department_name:"",user_account_status:"N",is_online:"",email:"",page_index:0,page_size:0},number_of_step:1}).then((t=>{a=t.items||[],a=this.convertDataUser(a)})),o.length>0&&await this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:o[0].id,user_code:null}}).then((t=>{n=t.items||[],n=this.convertDataUser(n)})),this.setState({role_left:i[0],column3_role_right_select:o[0],column3_role_left_select:i[0],column2_role_select:e[0],O9_Roles_Add_and_Remove_Role_Name:e,O9_RolesUser_assignment_Role_Name_Left:i,O9_RolesUser_assignment_Role_Name_Right:o,O9_Roles_User_assignment_table_left:a,O9_Roles_User_assignment_table_right:n,O9_Roles_Invoke_limit_menu:e,O9_Roles_Approve_limit_menu:e,isLoading:!1},(()=>{}))}render(){return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(Pt,{stateData:this.stateData})})})}converDataApiAddUserRole(t,e){let i=[];for(let o=0;o<t.length;o++){let a={role_id:e,user_code:t[o].user_code};i.push(a)}return i}convertCurrency(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t||0===t||(t=""),t=String(t);let e=t.replace(/,/g,"");return(0,yt.Nx)(e,2)}loadInvokeApproveTable(t){var e=[{txcode:"bo-get-table-header",input:{command_id:t.command_id,app_select:this.state.app_select}}];return(0,F.Yr)(e,{}).then((t=>s.ZP.foGetData("data",t)||[]))}reloadTableWithMenuInvokeApprove(t){let e=this.state.menu_invoke_aprrove_select;this.loadInvokeApproveTable(e).then((e=>{void 0!==e.operation_body&&this.setState({O9_Roles_InvokeApprove_Table_body:e.operation_body,isLoading:!!t})}))}}const It=Tt;class Ft extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}},this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);for(let a in o)"true"===o[a]&&(o[a]=!0),"false"===o[a]&&(o[a]=!1);this.setState({CMD:o})},this.set=t=>{this.dataGlobal={data:t,total:t.length};let e={data:this.dataGlobal.data,total:this.dataGlobal.total},i=[],o=0;void 0!==e.total&&(o=e.total),void 0!==e.data&&(i=e.data),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:i,total_record:o})},this.getData=()=>({data:this.state.dataFilter}),this.getAdvanced=(t,e)=>this.getData(),this.getHeaderConfig=function(){let t=[];return!0===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&t.push({title:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),t=t.concat(e.state.columns.map((t=>{var i,o;return{title:(null===(i=e.state.lang)||void 0===i||null===(o=i[e.state.lang_select])||void 0===o?void 0:o[t.title])||t.title,id:t.code,config:{width:"",isFrozen:!1},value_search:e.state.columnSearchValue[t.code]}}))),t},this.handelClearSearch=()=>{let t=this.state.columnSearchValue;for(const a in t)t[a]="";let e=this.dataGlobal.data,i=e,o=e.length;this.setState({data:i,dataFilter:e,total_record:o,columnSearchValue:t})},this.getCaptionLang=(t,e,i)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${e}_${i}`]&&(this.CACHE_CDLIST[`${e}_${i}`]=s.ZP.data_cdList(e,i,!0));let o={};for(const s of this.CACHE_CDLIST[`${e}_${i}`]){let t=s.c_cdlist.mcaption||{},e=s.c_cdlist.caption||"";o[s.c_cdlist.cdid]=s.c_cdlist={mcaption:t,caption:e}}const a=o[t]||{};let n=(null===a||void 0===a?void 0:a.mcaption)||{},r=(null===a||void 0===a?void 0:a.caption)||"";return n[s.ZP.getLangKey()]||r},this.handelChangeSearch=(t,e)=>{var i;let o=this.state.columnSearchValue;o[e]=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"";let a=this.state.dataFilter.filter((t=>{let e=!0;for(const a in o){let s=t[a];const n=this.cols_config[a];if("columnMask"===n.inputtype){var i;let t=n.config.mask;(t.includes("DD")&&t.includes("MM")&&t.includes("YY")||!0===(null===(i=n.config)||void 0===i?void 0:i.isDate))&&(void 0!==n.data_type&&"string"===n.data_type&&(s=Y.cI(s,"YYYY-MM-DDTHH:mm:ss.SSS[Z]")),s=Y.FW(s,t))}if("ColumnCdlist"===n.inputtype){let{cdgrp:t,cdname:e}=n.config;s=this.getCaptionLang(s,t,e)}!1===String(s).toLowerCase().includes(o[a].toLowerCase())&&(e=!1)}return e})),s=a,n=a.length;this.setState({data:s,total_record:n,columnSearchValue:o})},this.handleChange=t=>{let{index_row:e,code_col:i,value_change:o}=t,a=i.split("."),s=[];s=this.state.data;let n=this.state.dataFilter;s[e][a[0]]!==o&&(s[e][a[0]]=o,n[t.dataItem.index_row][a[0]]=o,this.setState({data:s,dataFilter:n,column_search:{}},(()=>{this.props.callChange(s[e],o,t.dataItem)})))},this.dataGlobal={data:this.props.data,total:this.props.data.length};let i=0;void 0!==this.dataGlobal.total&&(i=this.dataGlobal.total);let o=[];void 0!==this.dataGlobal.data&&(o=this.dataGlobal.data),this.state={dataFilter:this.dataGlobal.data,data:o,total_record:i,selectedRecordIndex:0,STT:!1,hasCheck:!1,columns:void 0===this.props.columns?[]:this.props.columns,CMD:{},columnSearchValue:{}},this.cols_config={};for(const a of this.state.columns)this.cols_config[a.code]=a}componentDidUpdate(t){if(t.data!==this.props.data){this.dataGlobal={data:this.props.data,total:this.props.data.length};let t={data:this.dataGlobal.data,total:this.dataGlobal.total},e=[],i=0;void 0!==t.total&&(i=t.total),void 0!==t.data&&(e=t.data),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:e,total_record:i})}}render(){var t,e,i;let o=this.getHeaderConfig();const a=(0,_.RP)("uTable"),n=(0,_.RP)("uTableBodyRow");return"false"===String(this.state.CMD.visible)?null:(0,c.jsx)(a,{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:o,config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},dataEmpty:{isShow:!(null!==(t=this.state)&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{maxHeight:!0,modeTitle:"center",isFrozenHeader:!1,isResize:"true"===String(null===(i=this.props.mode)||void 0===i?void 0:i.isResize)}}},children:this.state.data.map(((t,e)=>(0,c.jsx)(n,{children:this.state.columns.map(((i,o)=>{var a,s,n,r;let l=xt.Z[i.inputtype];return void 0===l&&(l=xt.Z.ColumnDefault),"ColumnInputEditHistory"===i.inputtype?(0,c.jsx)(l,{tableContext:this,title_parent:i.title,rowData:t,code_col:i.code,index_row:e,title:(null===(a=this.state.lang)||void 0===a||null===(s=a[this.state.lang_select])||void 0===s?void 0:s[i.title])||i.title,config:i.config,data:t[i.code],value:t,dataItem:t.dataItem[i.code],before_value:t[i.code+"_before_value"],abs_ClickHistory:this.props.abs_ClickHistory,abs_TableChange:this.handleChange,cmd:{disabled:this.props.CMD.disable,isShowHistory:this.props.CMD.isShowHistory}},o):(0,c.jsx)(l,{tableContext:this,title_parent:i.title,rowData:t,code_col:i.code,index_row:e,title:(null===(n=this.state.lang)||void 0===n||null===(r=n[this.state.lang_select])||void 0===r?void 0:r[i.title])||i.title,config:i.config,data:t[i.code],value:t,dataItem:t,abs_TableChange:this.handleChange},o)}))},e)))})}}const Nt=Ft;let Lt=8;const Et={book_rate:"BK rate",transfer_bid_rate:"TB rate",transfer_ask_rate:"TA rate",cash_ask_rate:"CA rate",cash_bid_big_rate:"CB rate",cs_rate:"CS rate",in_rate:"IN rate",jp_rate:"JP rate",medium_bill_rate:"CM rate"},jt=["book_rate","cash_bid_small_rate","transfer_bid_rate","transfer_ask_rate","cash_ask_rate","cash_bid_big_rate","medium_bill_rate"],Zt={book_rate:"Reference rate",short_id:"Short ID",transfer_bid_rate:"Buying Transfer Rate",transfer_ask_rate:"Selling Transfer Rate",cash_ask_rate:"Selling Counter Rate",cash_bid_big_rate:"Buying Counter Rate",cash_bid_small_rate:"Policy Rate"};class Rt extends o.Component{constructor(t){var e,i;super(t),e=this,this.getTableHeader=()=>"KTB"===this.TABLE_TYPE?this.getTableHeaderKTB():this.getTableHeaderDefault(),this.getTableConfig=()=>"KTB"===this.TABLE_TYPE?this.getTableConfigKTB():this.getTableConfigDefault(),this.closeForm=()=>{s.ZP.removeForm(this.key_form)},this.onClickViewModify=async()=>{this.getAllRoleAndAction().then((()=>{let{role_action:t}=this.state;t.view_modify?(this.stateData.approve.dataFull.config.cmd.disable=!1,this.stateData.reject.dataFull.config.cmd.disable=!1,this.resetDataTable(),this.setState({isShowHistory:!0})):s.ZP.showToast("View_Modify: #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.onClickModify=()=>{this.setState({modify:!this.state.modify}),this.disable=!this.disable},this.getConfigButtonModify=(t,e)=>{let i=(null===e||void 0===e?void 0:e.role_action)||{};return{dataFull:{config:{default:{title:t,type:"",class:"",icon:"fa-pencil-square-o"},cmd:{disable:!this.disable,visible:!1!==i.modify}},dataItem:{test:"321"}},abs_Click:this.onClickModify}},this.getValueEdit=t=>t?t.base_currency_rate+" "+s.ZP.getLang("foreignExchangeRate_lang_by")+" "+t.user_name:"",this.getStatusEdit=(t,e)=>{if(!0===t){if(!0===this.isModifyLocal&&!0===e)return this.disable}else if(!1===this.isModifyLocal||!0===e)return this.disable;return!0},this.onChangeItemTable=(t,e,i,o)=>{let a=t.target,{selectionStart:s,value:n}=a,r=[],l="-1",c=e.type;e.isLocal?(r=this.state.O9_foreign_exchange_rate_local_table,l=this.O9_foreign_exchange_rate_local_table_logic[i][c]):(r=this.state.O9_foreign_exchange_rate_table,l=this.O9_foreign_exchange_rate_table_logic[i][c]);let d=r[i][c],h=d,u=n;if(h.includes(".")&&!n.includes(".")){let t=h.lastIndexOf(".");u=n.substring(0,t)+"."+n.substring(t,n.length),"."===u&&(u="")}let p=d,_=n.lastIndexOf(".");var f;n.indexOf(".")!==n.lastIndexOf(".")?_=p.length-Lt:(p=this.onChangeCurrency(u),p?(_=s-((null===n||void 0===n?void 0:n.length)-(null===(f=p)||void 0===f?void 0:f.length)),1===s?_=1:s>n.lastIndexOf(".")&&(_+=1)):(p="0.00000000",_=1));r[i][c]=p;let{editedItems:g}=this.state,m={currency_code:r[i].currency_code,exchange_rate_type:this.getexchange_rate_type(c),base_currency_rate:p,branch_code_fx:e.isLocal?this.branch_user_code:this.HO_branch_code};l!==p?g=this.pushEditedItem(m):l===p&&(g=this.removeEditedItem(m)),e.isLocal?this.setState({O9_foreign_exchange_rate_local_table:r}):this.setState({O9_foreign_exchange_rate_table:r}),this.setState({editedItems:g},(()=>{setTimeout((()=>{a.setSelectionRange(_,_)}),50)}))},this.handleOpenConfirm=(t,e,i)=>{this.getAllRoleAndAction().then((()=>{let{role_action:e}=this.state;if(e.view_modify){var i;let e={title:s.ZP.getLang("sysConfirmApproveRejectTitle"),message_save:s.ZP.getLang("sysConfirmApproveRejectMessage"),content:[{list_component:[{component_name:s.ZP.getLang("foreignExchangeRate_approve_reject_item_title").replace("@{param1}",null===(i=t.data_change)||void 0===i?void 0:i.user_name).replace("@{param2}",this.getTypeItem(t.type)).replace("@{param3}",t.currency_code),message:{title_before:t.before_value,title_status:s.ZP.getLang("foreignExchangeRate_lang_to"),title_after:t.after_value}}]}]};s.ZP.compareInfo(e,[{name:"sysConfirmReject",icon:"",color:"info",val:!1},{name:"sysConfirmApprove",color:"primary",icon:"",val:!0}],void 0,(e=>{this.stateData.form.cmd.isLoading=!0,!0===e?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_APR",api_data:{data_modify:[{currency_code:t.data_change.currency_code,exchange_rate_type:t.data_change.exchange_rate_type,branch_code_fx:t.data_change.branch_code}]}}).then((t=>{if(t&&!t.hasError)s.ZP.showToast("Approve",!0),this.resetDataTable();else if(void 0!==t.error_data){var e="";t.error_data.map((t=>e+="#"+t.key+": "+(s.ZP.isDebug()&&t.code?t.code+": ":"")+t.info)),s.ZP.showToast(e,!1)}else s.ZP.showToast("Approve",!1)})):!1===e&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_REJECT",api_data:{data_modify:[{currency_code:t.data_change.currency_code,exchange_rate_type:t.data_change.exchange_rate_type,branch_code_fx:t.data_change.branch_code}]}}).then((t=>{if(t&&!t.hasError)s.ZP.showToast("Reject",!0),this.resetDataTable();else if(void 0!==t.error_data){var e="";t.error_data.map((t=>e+="#"+t.key+": "+(s.ZP.isDebug()&&t.code?t.code+": ":"")+t.info)),s.ZP.showToast(e,!1)}else s.ZP.showToast("Reject",!1)})),this.stateData.form.cmd.isLoading=!1,this.setState({isUpdate:!0}),setTimeout((()=>{this.setState({isUpdate:!1})}),1e3)}))}else s.ZP.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.resetDataTable=()=>{if("KTB"===this.TABLE_TYPE)this.resetDataTableKTB();else this.resetDataTableDefault()},this.onClickApproveAll=()=>{this.getAllRoleAndAction().then((()=>{let{role_action:t}=this.state;if(t.view_modify||t.approve){let t={title:s.ZP.getLang("sysConfirmApprove"),content:s.ZP.getLang("sysConfirmApproveAllContent")};s.ZP.confirmInfo(t,[{name:"sysConfirmCancel",icon:"",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"",val:!0}],void 0,(t=>{if(!0===t){this.stateData.form.cmd.isLoading=!0;let t=this.state.table_HO_modify.concat(this.state.table_local_modify);this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_APR",api_data:{data_modify:t}}).then((t=>{if(t&&!t.hasError)s.ZP.showToast("Approve",!0),this.resetDataTable();else if(void 0!==t.error_data){var e="";t.error_data.map((t=>e+="#"+t.key+": "+(s.ZP.isDebug()&&t.code?t.code+": ":"")+t.info)),s.ZP.showToast(e,!1)}else s.ZP.showToast("Approve",!1)}))}}))}else s.ZP.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.onClickRejectAll=()=>{this.getAllRoleAndAction().then((()=>{let{role_action:t}=this.state;if(t.view_modify||t.reject){let t={title:s.ZP.getLang("sysConfirmReject"),content:s.ZP.getLang("sysConfirmRejectAllContent")};s.ZP.confirmInfo(t,[{name:"sysConfirmCancel",icon:"",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"",val:!0}],void 0,(t=>{if(!0===t){this.stateData.form.cmd.isLoading=!0;let t=this.state.table_HO_modify.concat(this.state.table_local_modify);this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_REJECT",api_data:{data_modify:t}}).then((t=>{if(t&&!t.hasError)s.ZP.showToast("Reject",!0),this.resetDataTable();else if(void 0!==t.error_data){var e="";t.error_data.map((t=>e+="#"+t.key+": "+(s.ZP.isDebug()&&t.code?t.code+": ":"")+t.info)),s.ZP.showToast(e,!1)}else s.ZP.showToast("Reject",!1)}))}}))}else s.ZP.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.pushEditedItem=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.state.editedItems,o=0;for(;o<i.length&&(i[o].currency_code!==t.currency_code||i[o].exchange_rate_type!==t.exchange_rate_type);o++);return o==i.length?i.push(t):i[o]=t,i},this.removeEditedItem=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.state.editedItems,o=0;for(;o<i.length;o++)i[o].currency_code===t.currency_code&&i[o].exchange_rate_type===t.exchange_rate_type&&i.splice(o,1);return i},this.getRoleAction=(t,e)=>{let i=(0,s._M)(),o={};const a=e.list_layout;for(const s of i)for(const e of a)for(const i of e.list_view)for(const e of i.list_input){let i=e.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=t[s])||void 0===n||null===(r=n[e.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a,void 0!==e.default.codeHidden&&(o[i+"_codeHidden"]=e.default.codeHidden)}}return o},this.componentDidMount=()=>{this.getAllRoleAndAction().then((()=>{this.getbranch_codeHO()})),s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key)},this.getAllRoleAndAction=()=>(0,F.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((t=>{var e=s.ZP.foGetData("form_design_detail",t);void 0===e&&(e={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",t)||{};void 0===i&&(i={});let o=this.getRoleAction(i,e);this.setState({role_action:o})})),this.getbranch_codeHO=()=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_GET_HOST_BRANCH_ID",number_of_step:1}).then((t=>{t&&(this.HO_branch_code=t.branch_code_ho,null!==this.HO_branch_code&&""!==this.HO_branch_code&&this.resetDataTable())}))},this.changeKeyLanguage=t=>{let e={title_:s.ZP.getLang("foreignExchangeRate_title"),des_:s.ZP.getLang("foreignExchangeRate_des"),btn_save:s.ZP.getLang("foreignExchangeRate_btnSave"),btn_modifiy:s.ZP.getLang("foreignExchangeRate_btnModify"),tab_base:s.ZP.getLang("foreignExchangeRate_tabBase"),tab_local:s.ZP.getLang("foreignExchangeRate_tabLocal"),currency_code:s.ZP.getLang("foreignExchangeRate_currencyCode"),currency_shortID:s.ZP.getLang("foreignExchangeRate_currencyShortID"),rate:s.ZP.getLang("foreignExchangeRate_rate"),last_update:s.ZP.getLang("foreignExchangeRate_lastUpdate"),last_update_local:s.ZP.getLang("foreignExchangeRate_lastUpdateLocal"),form_btn_close:s.ZP.getLang("form_close_title"),form_btn_add:s.ZP.getLang("form_add_title")};if(void 0!==t)return e;let i=this.state.infoA;i.title=s.ZP.getLang("foreignExchangeRate_title"),i.des=s.ZP.getLang("foreignExchangeRate_des"),i.lang_form.vi=s.ZP.getLang("foreignExchangeRate_title"),i.lang_form.en=s.ZP.getLang("foreignExchangeRate_title"),this.setState({languages:e,infoA:i})},this.abs_changeItemTable=(t,e,i)=>{let o=[],a="-1",s=i.type,n=i.index_row;i.isLocal?(o=this.state.O9_foreign_exchange_rate_local_table,a=this.O9_foreign_exchange_rate_local_table_logic[n][s]):(o=this.state.O9_foreign_exchange_rate_table,a=this.O9_foreign_exchange_rate_table_logic[n][s]),o[n]=t;let{editedItems:r}=this.state,l={currency_code:t.currency_code,exchange_rate_type:this.getexchange_rate_type(s),base_currency_rate:e,branch_code_fx:i.isLocal?this.branch_user_code:this.HO_branch_code};a!==this.convertCurrency(e)?r=this.pushEditedItem(l):a===this.convertCurrency(e)&&(r=this.removeEditedItem(l)),i.isLocal?this.setState({O9_foreign_exchange_rate_local_table:o}):this.setState({O9_foreign_exchange_rate_table:o}),this.setState({editedItems:r})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a,n=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return n[0].input=Object.assign(n[0].input,i),(0,F.Yr)(n,{}).then((t=>a=s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1},(()=>{if(a.hasError){var t="";a.error_data.map((e=>t+=(s.ZP.isDebug()&&e.code?e.code+": ":"")+e.info)),s.ZP.showToast(t,!1)}}))}))},this.onChangeCurrency=t=>{t||0===t||(t="");let e=(t=String(t)).replace(/,/g,"");return(0,yt.Nx)(e,Lt)},this.getValueCurrency=t=>{let e=t.split(".");return void 0===e[0]&&(e[0]="0"),void 0===e[1]&&(e[1]="0"),e[0]=e[0].replace(/[^\d]/gm,""),e[1]=e[1].replace(/[^\d]/gm,""),Number(e[0]+"."+e[1])},this.getValueCurrencyNumber=t=>void 0===t||null===t||""===t?"":Number(t.toString().replace(/,/g,"")),this.onClickSave=()=>{this.getAllRoleAndAction().then((()=>{let{role_action:t}=this.state;if(t.modify){let t=this.state.editedItems;for(let e of t)e.base_currency_rate=this.getValueCurrencyNumber(e.base_currency_rate);this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_MDF",api_data:{data_modify:t}}).then((t=>{if(t&&!t.hasError)s.ZP.showToast("Save",!0),this.resetDataTable(),this.setState({editedItems:[]}),this.setState({is_disable:!0,isUpdate:!0,modify:!1}),this.disable=!0,setTimeout((()=>{this.setState({isUpdate:!1})}),1e3);else{let e="Save : ";void 0!==t.error_data&&t.error_data.map((t=>e+="#"+t.key+": "+(s.ZP.isDebug()&&t.code?t.code+": ":"")+t.info)),s.ZP.showToast(e,!1)}}))}else s.ZP.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})};let o=this.changeKeyLanguage("start");this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT");let a=s.ZP.getParameterSystem("015003011_DECIMAL_NUMBER");a&&(Lt=Number(a)),this.formRender=(0,_.Iq)("O9_ForeignExchangeRate"),this.key_form="BO_015003011",this.disable=!0,this.isModifyLocal=!1,void 0!==s.ZP.getParameterSystem("FX_RATE_MODIFY_LOCAL")&&(this.isModifyLocal=s.ZP.getParameterSystem("FX_RATE_MODIFY_LOCAL")),this.TABLE_TYPE="",void 0!==s.ZP.getParameterSystem("FX_RATE_TABLE_TYPE")&&(this.TABLE_TYPE=s.ZP.getParameterSystem("FX_RATE_TABLE_TYPE")),this.branch_user_code=(null===(i=s.ZP.context_get("user_acc"))||void 0===i?void 0:i.branch_code)||-1,this.HO_branch_code=null,this.O9_foreign_exchange_rate_table_logic=[],this.O9_foreign_exchange_rate_local_table_logic=[],this.stateData={local_tab_DOM_elm:(0,c.jsx)(Nt,{ref:t=>{this.ref_table_local=t},data:[],columns:this.getColumnConfig(),CMD:{disable:!0,isShowHistory:!1},callChange:this.abs_changeItemTable,abs_ClickHistory:this.handleOpenConfirm}),HO_tab_DOM_elm:(0,c.jsx)(Nt,{ref:t=>{this.ref_table=t},data:[],columns:this.getColumnConfig(),CMD:{disable:!0,isShowHistory:!1},callChange:this.abs_changeItemTable,abs_ClickHistory:this.handleOpenConfirm}),form:{config:{default:{title:o.title_,title_sub:""}},title_button:{close_button:o.form_btn_close,add_form:o.form_btn_add},cmd:{visibility:"",isLoading:!0},abs_Close:this.closeForm,abs_AddMenuBar:this.addMenu},save_rate:{dataFull:{config:{default:{title:o.btn_save,type:"submit",class:"",icon:"save"},cmd:{disable:!0}},dataItem:{test:"123"}},abs_Click:this.onClickSave},view_modify:{dataFull:{config:{default:{title:"View modify",type:"",class:"",icon:""},cmd:{disable:!1,visible:!1}},dataItem:{test:"123"}},abs_Click:this.onClickViewModify},approve:{dataFull:{config:{default:{title:"Approve (ALL)",type:"",class:"",icon:""},cmd:{disable:!0,visible:!1}},dataItem:{test:"123"}},abs_Click:this.onClickApproveAll},reject:{dataFull:{config:{default:{title:"Reject (All)",type:"",class:"",icon:""},cmd:{disable:!0,visible:!1}},dataItem:{test:"123"}},abs_Click:this.onClickRejectAll},modify_rate:this.getConfigButtonModify(o.btn_modifiy),dateTimeUpdate:{title:o.last_update,date:""},last_update_local:{title:o.last_update_local,date:""},tab:[{title:o.tab_base,id:"1"},{title:o.tab_local,id:"2"}],table:{dataFull:{Header:{data:this.getTableHeader(),config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}},table_config:this.getTableConfig(),table_local:{dataFull:{Header:{data:this.getTableHeader(),config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}},table_local_config:this.getTableConfig(),table_data:this.getConfigTableData([]),table_local_data:[]},this.state={isShowHistory:!1,visibility:"",languages:o,tab_active:1,is_disable:!0,modify:!1,infoA:{lang_form:{vi:s.ZP.getLang("foreignExchangeRate_title"),en:s.ZP.getLang("foreignExchangeRate_title")},title:s.ZP.getLang("foreignExchangeRate_title"),des:s.ZP.getLang("foreignExchangeRate_title"),openOne:"true",form_code:this.key_form,ofModal:!1},O9_foreign_exchange_rate_table:[],table_HO_modify:[],table_local_modify:[],O9_foreign_exchange_rate_local_table:[],last_update:"",isUpdate:!1,last_update_local:"",editedItems:[],isLoadingDefault:!1}}getTableConfigDefault(){return[{type:"uTableColumnDefault",config:{mode:"left"}},{type:"uTableColumnDefault",config:{mode:"right"}},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"}]}getTableConfigKTB(){return[{type:"uTableColumnDefault",config:{mode:"left"}},{type:"uTableColumnDefault",config:{mode:"right"}},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"}]}getTableHeaderDefault(){return[{title:"Currency code",config:{width:"",isFrozen:!1}},{title:"Short ID",config:{width:"",isFrozen:!1}},{title:"BK rate",config:{width:"",isFrozen:!1}},{title:"TB rate",config:{width:"",isFrozen:!1}},{title:"TA rate",config:{width:"",isFrozen:!1}},{title:"CA rate",config:{width:"",isFrozen:!1}},{title:"CB rate",config:{width:"",isFrozen:!1}},{title:"CS rate",config:{width:"",isFrozen:!1}},{title:"IN rate\t",config:{width:"",isFrozen:!1}},{title:"JP rate",config:{width:"",isFrozen:!1}},{title:"CM rate",config:{width:"",isFrozen:!1}}]}getTableHeaderKTB(){return[{title:"Currency code",config:{width:"",isFrozen:!1}},{title:Zt.short_id,config:{width:"",isFrozen:!1}},{title:Zt.book_rate,config:{width:"",isFrozen:!1}},{title:Zt.transfer_bid_rate,config:{width:"",isFrozen:!1}},{title:Zt.transfer_ask_rate,config:{width:"",isFrozen:!1}},{title:Zt.cash_bid_small_rate,config:{width:"",isFrozen:!1}},{title:Zt.cash_bid_big_rate,config:{width:"",isFrozen:!1}},{title:Zt.cash_ask_rate,config:{width:"",isFrozen:!1}}]}getConfigTableData(t,e,i,o){return t.map(((t,a)=>this.getEachDataRowConfig(t,a,e,i,o)))}getEachDataRowConfig(t,e,i,o,a){var s,n,r,l,c,d,h,u,p,_,f,g,m,v,b;return"KTB"===this.TABLE_TYPE?[{data:t.currency_code},{data:t.short_id},{data:t.book_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.book_rate_modify,type:"book_rate",currency_code:t.currency_code,before_value:t.book_rate,after_value:null===(s=t.book_rate_modify)||void 0===s?void 0:s.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.book_rate_modify)}},{data:t.transfer_bid_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.transfer_bid_rate_modify,type:"transfer_bid_rate",currency_code:t.currency_code,before_value:t.transfer_bid_rate,after_value:null===(n=t.transfer_bid_rate_modify)||void 0===n?void 0:n.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.transfer_bid_rate_modify)}},{data:t.transfer_ask_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.transfer_ask_rate_modify,type:"transfer_ask_rate",currency_code:t.currency_code,before_value:t.transfer_ask_rate,after_value:null===(r=t.transfer_ask_rate_modify)||void 0===r?void 0:r.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.transfer_ask_rate_modify)}},{data:t.cash_bid_small_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.cash_bid_small_rate_modify,type:"cash_bid_small_rate",currency_code:t.currency_code,before_value:t.cash_bid_small_rate,after_value:null===(l=t.cash_bid_small_rate_modify)||void 0===l?void 0:l.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.cash_bid_small_rate_modify)}},{data:t.cash_bid_big_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.cash_bid_big_rate_modify,type:"cash_bid_big_rate",currency_code:t.currency_code,before_value:t.cash_bid_big_rate,after_value:null===(c=t.cash_bid_big_rate_modify)||void 0===c?void 0:c.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.cash_bid_big_rate_modify)}},{data:t.cash_ask_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.cash_ask_rate_modify,type:"cash_ask_rate",currency_code:t.currency_code,before_value:t.cash_ask_rate,after_value:null===(d=t.cash_ask_rate_modify)||void 0===d?void 0:d.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.cash_ask_rate_modify)}}]:[{data:t.currency_code},{data:t.short_id},{data:t.book_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.book_rate_modify,type:"book_rate",currency_code:t.currency_code,before_value:t.book_rate,after_value:null===(h=t.book_rate_modify)||void 0===h?void 0:h.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.book_rate_modify)}},{data:t.transfer_bid_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.transfer_bid_rate_modify,type:"transfer_bid_rate",currency_code:t.currency_code,before_value:t.transfer_bid_rate,after_value:null===(u=t.transfer_bid_rate_modify)||void 0===u?void 0:u.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.transfer_bid_rate_modify)}},{data:t.transfer_ask_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.transfer_ask_rate_modify,type:"transfer_ask_rate",currency_code:t.currency_code,before_value:t.transfer_ask_rate,after_value:null===(p=t.transfer_ask_rate_modify)||void 0===p?void 0:p.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.transfer_ask_rate_modify)}},{data:t.cash_bid_big_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.cash_bid_big_rate_modify,type:"cash_bid_big_rate",currency_code:t.currency_code,before_value:t.cash_bid_big_rate,after_value:null===(_=t.cash_bid_big_rate_modify)||void 0===_?void 0:_.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.cash_bid_big_rate_modify)}},{data:t.cash_ask_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.cash_ask_rate_modify,type:"cash_ask_rate",currency_code:t.currency_code,before_value:t.cash_ask_rate,after_value:null===(f=t.cash_ask_rate_modify)||void 0===f?void 0:f.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.cash_ask_rate_modify)}},{data:t.cs_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.cs_rate_modify,type:"cs_rate",currency_code:t.currency_code,before_value:t.cs_rate,after_value:null===(g=t.cs_rate_modify)||void 0===g?void 0:g.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.cs_rate_modify)}},{data:t.in_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.in_rate_modify,type:"in_rate",currency_code:t.currency_code,before_value:t.in_rate,after_value:null===(m=t.in_rate_modify)||void 0===m?void 0:m.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.in_rate_modify)}},{data:t.jp_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.jp_rate_modify,type:"jp_rate",currency_code:t.currency_code,before_value:t.jp_rate,after_value:null===(v=t.jp_rate_modify)||void 0===v?void 0:v.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.jp_rate_modify)}},{data:t.medium_bill_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:t.medium_bill_rate_modify,type:"medium_bill_rate",currency_code:t.currency_code,before_value:t.medium_bill_rate,after_value:null===(b=t.medium_bill_rate_modify)||void 0===b?void 0:b.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(t.medium_bill_rate_modify)}}]}getTypeItem(t){return"KTB"===this.TABLE_TYPE?Zt[t]:Et[t]}resetDataTableDefault(){let t=[],e=[],i=[];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_VIEW"}).then((o=>{if(o){i=o.data_modify||[];let a=["book_rate","transfer_bid_rate","transfer_ask_rate","cash_ask_rate","cash_bid_big_rate","cm_rate","cs_rate","in_rate","jp_rate","medium_bill_rate"],s=[],n=[],r=[],l=[];for(const t of i)if(!1===this.isModifyLocal||!0===this.isModifyLocal&&this.HO_branch_code===this.branch_user_code){if(t.branch_code===this.HO_branch_code){let e={currency_code:t.currency_code,exchange_rate_type:t.exchange_rate_type,branch_code_fx:t.branch_code};s.push(e),r.push(t)}}else if(this.isModifyLocal&&this.HO_branch_code!==this.branch_user_code&&t.branch_code===this.branch_user_code){let e={currency_code:t.currency_code,exchange_rate_type:t.exchange_rate_type,branch_code_fx:t.branch_code};n.push(e),l.push(t)}this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.HO_branch_code}}).then((e=>{if(e){t=e.fx_rate_data||[];for(const e of t){for(const t of a)e[t]=this.convertCurrency(e[t]);if(this.HO_branch_code===this.branch_user_code||!1===this.isModifyLocal)for(const t of r)t.currency_code===e.currency_code&&(t.base_currency_rate=this.convertCurrency(t.base_currency_rate),e[this.getCodeFormType(t.exchange_rate_type)+"_modify"]=t)}this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(t)),this.setState({O9_foreign_exchange_rate_table:t})}})),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.branch_user_code}}).then((t=>{if(t){e=t.fx_rate_data||[];for(const t of e){for(const e of a)t[e]=this.convertCurrency(t[e]);if(this.isModifyLocal&&this.HO_branch_code!==this.branch_user_code)for(const e of l)e.currency_code===t.currency_code&&(e.base_currency_rate=this.convertCurrency(e.base_currency_rate),t[this.getCodeFormType(e.exchange_rate_type)+"_modify"]=e)}this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(e)),this.setState({O9_foreign_exchange_rate_local_table:e})}})),this.setState({table_HO_modify:s,table_local_modify:n}),this.stateData.form.cmd.isLoading=!1,this.setState({isUpdate:!0}),setTimeout((()=>{this.setState({isUpdate:!1})}),1e3)}else{let i=["book_rate","transfer_bid_rate","transfer_ask_rate","cash_ask_rate","cash_bid_big_rate","cm_rate","cs_rate","in_rate","jp_rate","medium_bill_rate"];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.HO_branch_code}}).then((e=>{if(e){t=e.fx_rate_data||[];for(const e of t)for(const t of i)e[t]=this.convertCurrency(e[t]);this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(t)),this.setState({O9_foreign_exchange_rate_table:t})}})),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.branch_user_code}}).then((t=>{if(t){e=t.fx_rate_data||[];for(const t of e)for(const e of i)t[e]=this.convertCurrency(t[e]);this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(e)),this.setState({O9_foreign_exchange_rate_local_table:e})}})),this.setState({isUpdate:!0}),setTimeout((()=>{this.setState({isUpdate:!1})}),1e3)}}))}resetDataTableKTB(){let t=[],e=[],i=[],{role_action:o}=this.state;o.view_modify?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_VIEW"}).then((o=>{if(o){i=o.data_modify||[];let a=[],s=[],n=[],r=[];for(const t of i)if(!1===this.isModifyLocal||!0===this.isModifyLocal&&this.HO_branch_code===this.branch_user_code){if(t.branch_code===this.HO_branch_code){let e={currency_code:t.currency_code,exchange_rate_type:t.exchange_rate_type,branch_code_fx:t.branch_code};a.push(e),n.push(t)}}else if(this.isModifyLocal&&this.HO_branch_code!==this.branch_user_code&&t.branch_code===this.branch_user_code){let e={currency_code:t.currency_code,exchange_rate_type:t.exchange_rate_type,branch_code_fx:t.branch_code};s.push(e),r.push(t)}this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.HO_branch_code}}).then((e=>{if(e){this.setState({isLoading:!0}),t=e.fx_rate_data||[];for(const e of t){for(const t of jt)e[t]=this.convertCurrency(e[t]);if(this.HO_branch_code===this.branch_user_code||!1===this.isModifyLocal)for(const t of n)t.currency_code===e.currency_code&&(t.base_currency_rate=this.convertCurrency(t.base_currency_rate),e[this.getCodeFormType(t.exchange_rate_type)+"_modify"]=t)}this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(t));let i="Invalid date"===(0,Y.jl)(e.last_update_date,this.dateFormat)?"":(0,Y.jl)(e.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_table:t,isLoading:!1,last_update:i})}})),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.branch_user_code}}).then((t=>{if(t){this.setState({isLoading:!0}),e=t.fx_rate_data||[];for(const t of e){for(const e of jt)t[e]=this.convertCurrency(t[e]);if(this.isModifyLocal&&this.HO_branch_code!==this.branch_user_code)for(const e of r)e.currency_code===t.currency_code&&(e.base_currency_rate=this.convertCurrency(e.base_currency_rate),t[this.getCodeFormType(e.exchange_rate_type)+"_modify"]=e)}this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(e));let i="Invalid date"===(0,Y.jl)(t.last_update_date,this.dateFormat)?"":(0,Y.jl)(t.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_local_table:e,isLoading:!1,last_update_local:i})}})),this.setState({isLoading:!0},(()=>{this.setState({table_HO_modify:a,table_local_modify:s},(()=>{this.setState({isLoading:!1})}))})),this.setState({isUpdate:!0}),setTimeout((()=>{this.setState({isUpdate:!1})}),1e3)}else this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.HO_branch_code}}).then((e=>{if(e){this.setState({isLoading:!0}),t=e.fx_rate_data||[];for(const e of t)for(const t of jt)e[t]=this.convertCurrency(e[t]);this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(t));let i="Invalid date"===(0,Y.jl)(e.last_update_date,this.dateFormat)?"":(0,Y.jl)(e.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_table:t,last_update:i,isLoading:!1})}})),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.branch_user_code}}).then((t=>{if(t){this.setState({isLoading:!0}),e=t.fx_rate_data||[];for(const t of e)for(const e of jt)t[e]=this.convertCurrency(t[e]);this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(e));let i="Invalid date"===(0,Y.jl)(t.last_update_date,this.dateFormat)?"":(0,Y.jl)(t.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_local_table:e,last_update_local:i,isLoading:!1})}})),this.setState({isUpdate:!0}),setTimeout((()=>{this.setState({isUpdate:!1})}),1e3)})):(this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.HO_branch_code}}).then((e=>{if(e){this.setState({isLoading:!0}),t=e.fx_rate_data||[];for(const e of t)for(const t of jt)e[t]=this.convertCurrency(e[t]);this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(t));let i="Invalid date"===(0,Y.jl)(e.last_update_date,this.dateFormat)?"":(0,Y.jl)(e.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_table:t,last_update:i,isLoading:!1})}})),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.branch_user_code}}).then((t=>{if(t){this.setState({isLoading:!0}),e=t.fx_rate_data||[];for(const t of e)for(const e of jt)t[e]=this.convertCurrency(t[e]);this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(e));let i="Invalid date"===(0,Y.jl)(t.last_update_date,this.dateFormat)?"":(0,Y.jl)(t.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_local_table:e,last_update_local:i,isLoading:!1})}})),this.setState({isUpdate:!0}),setTimeout((()=>{this.setState({isUpdate:!1})}),1e3))}getexchange_rate_type(t){let e="";switch(t){case"book_rate":e="BK";break;case"cash_ask_rate":e="CA";break;case"cash_bid_small_rate":e="SB";break;case"cash_bid_big_rate":e="CB";break;case"cs_rate":e="CS";break;case"in_rate":e="IN";break;case"jp_rate":e="JP";break;case"transfer_ask_rate":e="TA";break;case"transfer_bid_rate":e="TB";break;case"medium_bill_rate":e="CM"}return e}getCodeFormType(t){let e="";switch(t){case"BK":e="book_rate";break;case"CA":e="cash_ask_rate";break;case"SB":e="cash_bid_small_rate";break;case"CB":e="cash_bid_big_rate";break;case"CS":e="cs_rate";break;case"IN":e="in_rate";break;case"JP":e="jp_rate";break;case"TA":e="transfer_ask_rate";break;case"TB":e="transfer_bid_rate";break;case"CM":e="medium_bill_rate"}return e}getColumnConfig(){return this.TABLE_TYPE,this.getColumnConfigKTB()}getColumnConfigKTB(){return[{code:"currency_code",title:"Currency code",inputtype:"ColumnString",config:{}},{code:"short_id",title:Zt.short_id,inputtype:"ColumnString",config:{}},{code:"book_rate",title:Zt.book_rate,inputtype:"ColumnInputEditHistory",config:{columnEditType:"currency",format:"#,###.00",decimal_length:8}},{code:"transfer_bid_rate",title:Zt.transfer_bid_rate,inputtype:"ColumnInputEditHistory",config:{columnEditType:"currency",format:"#,###.00",decimal_length:8}},{code:"transfer_ask_rate",title:Zt.transfer_ask_rate,inputtype:"ColumnInputEditHistory",config:{columnEditType:"currency",format:"#,###.00",decimal_length:8}},{code:"cash_bid_small_rate",title:Zt.cash_bid_small_rate,inputtype:"ColumnInputEditHistory",config:{columnEditType:"currency",format:"#,###.00",decimal_length:8}},{code:"cash_bid_big_rate",title:Zt.cash_bid_big_rate,inputtype:"ColumnInputEditHistory",config:{columnEditType:"currency",format:"#,###.00",decimal_length:8}},{code:"cash_ask_rate",title:Zt.cash_ask_rate,inputtype:"ColumnInputEditHistory",config:{columnEditType:"currency",format:"#,###.00",decimal_length:8}}]}getDataTableDom(t,e){return t.map(((t,i)=>{t.dataItem||(t.dataItem={});for(const a in t){var o;if("currency_code"!==a&&"short_id"!==a&&-1===a.indexOf("_modify")&&-1===a.indexOf("_before_value"))t.dataItem[a]={isLocal:e,index_row:i,data_change:t[a+"_modify"],type:a,currency_code:t.currency_code,before_value:t[a],after_value:null===(o=t[a+"_modify"])||void 0===o?void 0:o.base_currency_rate},t[a+"_before_value"]=this.getValueEdit(t[a+"_modify"])}return t}))}UNSAFE_componentWillUpdate(t,e){var i;let o=e.role_action||{};this.stateData.table.dataFull.dataEmpty={isShow:!(null!==(i=e.O9_foreign_exchange_rate_table)&&void 0!==i&&i.length),title:s.ZP.getLang("header_searchNoResult")},(!1===this.isModifyLocal||!0===this.isModifyLocal&&this.branch_user_code===this.HO_branch_code||0===this.state.O9_foreign_exchange_rate_table.length&&e.O9_foreign_exchange_rate_table.length>0)&&(this.stateData.table_data=this.getConfigTableData(e.O9_foreign_exchange_rate_table,e.isShowHistory,!1,this.HO_branch_code===this.branch_user_code),this.stateData.HO_tab_DOM_elm=(0,c.jsx)(Nt,{ref:t=>{this.ref_table=t},data:this.getDataTableDom(e.O9_foreign_exchange_rate_table,!1),columns:this.getColumnConfig(),CMD:{disable:this.getStatusEdit(!1,this.HO_branch_code===this.branch_user_code),isShowHistory:e.isShowHistory},callChange:this.abs_changeItemTable,abs_ClickHistory:this.handleOpenConfirm}),this.ref_table&&this.ref_table.set(e.O9_foreign_exchange_rate_table)),(!0===this.isModifyLocal&&this.branch_user_code!==this.HO_branch_code||0===this.state.O9_foreign_exchange_rate_local_table.length&&e.O9_foreign_exchange_rate_local_table.length>0)&&(this.stateData.table_local_data=this.getConfigTableData(e.O9_foreign_exchange_rate_local_table,e.isShowHistory,!0,this.HO_branch_code!==this.branch_user_code),this.stateData.local_tab_DOM_elm=(0,c.jsx)(Nt,{ref:t=>{this.ref_table_local=t},data:this.getDataTableDom(e.O9_foreign_exchange_rate_local_table,!0),columns:this.getColumnConfig(),CMD:{disable:this.getStatusEdit(!0,this.HO_branch_code!==this.branch_user_code),isShowHistory:e.isShowHistory},callChange:this.abs_changeItemTable,abs_ClickHistory:this.handleOpenConfirm}),this.ref_table_local&&this.ref_table_local.set(e.O9_foreign_exchange_rate_local_table)),this.stateData.modify_rate=this.getConfigButtonModify(this.state.languages.btn_modifiy,e),this.stateData.save_rate.dataFull.config.cmd.disable=this.disable,this.stateData.save_rate.dataFull.config.cmd.visible=!1!==o.save,this.stateData.view_modify.dataFull.config.cmd.visible=!1!==o.view_modify,this.stateData.approve.dataFull.config.cmd.visible=!1!==o.view_modify,this.stateData.reject.dataFull.config.cmd.visible=!1!==o.view_modify,this.stateData.view_modify.dataFull.config.cmd.disable=e.table_HO_modify.length+e.table_local_modify.length===0,this.stateData.approve.dataFull.config.cmd.disable=!(e.table_HO_modify.length+e.table_local_modify.length>0&&e.isShowHistory),this.stateData.reject.dataFull.config.cmd.disable=!(e.table_HO_modify.length+e.table_local_modify.length>0&&e.isShowHistory),this.state.last_update!==e.last_update&&(this.stateData.dateTimeUpdate.date=e.last_update),this.state.last_update_local!==e.last_update_local&&(this.stateData.last_update_local.date=e.last_update_local),this.stateData.form.config.default.title=this.state.languages.title_,this.stateData.save_rate.dataFull.config.default.title=this.state.languages.btn_save,this.stateData.tab[0].title=this.state.languages.tab_base,this.stateData.tab[1].title=this.state.languages.tab_local,e.isLoading!==this.stateData.form.cmd.isLoading&&(this.stateData.form.cmd.isLoading=e.isLoading)}convertCurrency(t){if(void 0===t||null===t||""===t)return"";let e=Number(t);return Number.isNaN(e)?"":(0,yt.Nx)(e,Lt)}render(){const t=this.formRender;return"none"===this.state.visibility?null:(0,c.jsx)("div",{children:(0,c.jsx)(t,{stateData:this.stateData})})}}const Qt=Rt;let zt;class Ut extends o.Component{constructor(t){var e;super(t),this.changeKeyLanguage=t=>{let e={title_:s.ZP.getLang("importDataFiles_title"),des_:s.ZP.getLang("importDataFiles_des"),date_from:s.ZP.getLang("importDataFiles_dateFrom"),date_to:s.ZP.getLang("importDataFiles_dateTo"),file_id:s.ZP.getLang("importDataFiles_id"),date:s.ZP.getLang("importDataFiles_date"),user_id:s.ZP.getLang("importDataFiles_userID"),file_name:s.ZP.getLang("importDataFiles_fileName"),status:s.ZP.getLang("importDataFiles_status"),processed:s.ZP.getLang("importDataFiles_processed"),size:s.ZP.getLang("importDataFiles_size"),lines:s.ZP.getLang("importDataFiles_lines"),messages:s.ZP.getLang("importDataFiles_messages"),file_type:s.ZP.getLang("importDataFiles_fileType"),btn_delete:s.ZP.getLang("importDataFiles_btnDelete"),btn_save:s.ZP.getLang("importDataFiles_btnSave"),btn_import:s.ZP.getLang("importDataFiles_btnImport"),btn_refresh:s.ZP.getLang("importDataFiles_btnRefresh"),tab_info:s.ZP.getLang("importDataFiles_tabInfo"),tab_import:s.ZP.getLang("importDataFiles_tabImport"),file_info:s.ZP.getLang("importDataFiles_fileInfo")};if(void 0!==t)return e;let i=this.state.infoA;i.title=s.ZP.getLang("importDataFiles_title"),i.des=s.ZP.getLang("importDataFiles_des"),i.lang_form.vi=s.ZP.getLang("importDataFiles_title"),i.lang_form.en=s.ZP.getLang("importDataFiles_title"),this.setState({languages:e,infoA:i})},this.UNSAFE_componentWillUpdate=(t,e)=>{var i;this.stateData.dateFrom.dataFull.value=e.dateFrom,this.stateData.dateTo.dataFull.value=e.dateTo,e.file_selected.length>0&&(this.stateData.valueDataFile={data:!0===e.save_click?{status:{title:"Status",value:"Imported"},file_name:{title:"File Name",value:e.file_selected[0].name},file_size:{title:"File Size",value:e.file_selected[0].size},url:e.file_selected[0].name}:{status:{title:"Status",value:""},file_name:{title:"File Name",value:e.file_selected[0].name},file_size:{title:"File Size",value:e.file_selected[0].size},url:e.file_selected[0].name}}),e.O9_admin_import_file_table!==this.state.O9_admin_import_file_table&&(this.stateData.table_data_fileimport=e.O9_admin_import_file_table.map((t=>[{type:"uTableColumnDefault",dataFull:{title_parent:"Full Name",data:this.convertCurrency(t.servertime),config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:(0,Y.FW)(t.idate,this.dateFormat),config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:t.lgname,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:t.name,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnAction",dataFull:{data:-1===t.status?{title:"Error",type:"danger"}:{title:"Success",type:"success"},config:{isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:t.isprocessed,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:this.convertCurrency(t.filesize),config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:t.lineinput,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnHtmlDanger",dataFull:{title_parent:"Email",data:t.msg?t.msg.replace(/\n/gm,"<br/>"):t.msg,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:t.filetype,config:{mode:"left",isFrozen:!1}}}]))),this.stateData.table_fileimport.dataFull.dataEmpty={isShow:!(null!==(i=e.O9_admin_import_file_table)&&void 0!==i&&i.length),title:s.ZP.getLang("header_searchNoResult")}},this.callAPI=(t,e)=>{var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:t}}];return i[0].input=Object.assign(i[0].input,e),(0,F.Yr)(i,{}).then((t=>s.ZP.foGetData("data",t)))},this.toBase64=t=>new Promise(((e,i)=>{const o=new FileReader;o.readAsDataURL(t),o.onload=()=>e(o.result),o.onerror=t=>i(t)})),this.abs_btn_refresh=()=>{let t=(0,Y.FW)(this.LogicDate_from.get(),this.dateFormat),e=(0,Y.FW)(this.LogicDate_to.get(),this.dateFormat);this.callAPI("O9_admin_import_file_table",{datefrom:t,dateto:e}).then((t=>{t&&this.setState({O9_admin_import_file_table:t.O9_admin_import_file_table||[]})}))},this.abs_btn_import=t=>{var e;let i=t.target.files,o=this.state.file_selected;i.length>0&&(o=i),this.stateData.btnImport.dataFull.config.default.att_content=null!==(e=o)&&void 0!==e&&e.length?"":"No file choose",this.setState({file_selected:o,save_click:!1})},this.abs_date_from=t=>{this.stateData.dateFrom.dataFull=this.LogicDate_from.getDataFullLogic(),this.setState({dateFrom:this.stateData.dateFrom.dataFull.value})},this.abs_date_to=t=>{this.stateData.dateTo.dataFull=this.LogicDate_to.getDataFullLogic(),this.setState({dateTo:this.stateData.dateTo.dataFull.value})},this.abs_btn_save=async()=>{let t=this.state.file_selected;t.length>0&&(0,F.bq)(t[0],void 0,{infoA:this.state.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((t=>{t&&7===t.status?this.callAPI("O9_admin_import_file_save",{filename:t.name}).then((t=>{s.ZP.showToast("Import",!0)})):s.ZP.showToast("Import",!1),setTimeout((()=>{let t=(0,Y.FW)(this.state.dateFrom,this.dateFormat),e=(0,Y.FW)(this.state.dateTo,this.dateFormat);this.callAPI("O9_admin_import_file_table",{datefrom:t,dateto:e}).then((t=>{t&&this.setState({O9_admin_import_file_table:t.O9_admin_import_file_table||[]})}))}),1e3)}),(t=>{})),this.setState({save_click:!0})},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},zt=(0,_.Iq)("O9_ImportDataFile");let i=this.changeKeyLanguage("start");this.user_info=s.ZP.context_get("user_acc"),this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT"),this.LogicDate_from=new mt({abs_update:this.abs_date_from,name:"From",code:"from",mask_format:"DD/MM/YYYY",mask_mode:"date",class:"col-md-6"}),this.LogicDate_to=new mt({abs_update:this.abs_date_to,name:"To",code:"To",mask_format:"DD/MM/YYYY",mask_mode:"date",class:"col-md-6"}),this.key_form="015001005",this.state={visibility:"",working_date_long:this.user_info.workingdate,data:this.props.data||[],languages:i,dateFrom:(0,Y.FW)(this.user_info.workingdate,this.dateFormat),dateTo:(0,Y.FW)(this.user_info.workingdate,this.dateFormat),tab_active:1,infoA:{lang_form:{vi:s.ZP.getLang("importDataFiles_title"),en:s.ZP.getLang("importDataFiles_title")},title:s.ZP.getLang("importDataFiles_title"),des:"Data files management",openOne:"true",form_code:this.key_form,ofModal:!1},save_click:!1,file_selected:[],O9_admin_import_file_table:[]},this.stateData={form:{title:s.ZP.getLang("importDataFiles_title")},table_fileimport:{dataFull:{Header:{data:[{title:"File ID",config:{width:"",isFrozen:!1}},{title:"Date",config:{width:"",isFrozen:!1}},{title:"User ID",config:{width:"",isFrozen:!1}},{title:"File name",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Processed",config:{width:"",isFrozen:!1}},{title:"Size",config:{width:"",isFrozen:!1}},{title:"Lines",config:{width:"",isFrozen:!1}},{title:"Messages",config:{width:"",isFrozen:!1}},{title:"File type",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1},height:"300px"}}},table_data_fileimport:[],delete:{dataFull:{config:{default:{title:"Delete",type:"submit",class:"",icon:"delete"},cmd:{visible:!1}}},abs_Click:this.abs_Click},tab_importdata:[{title:"General information",id:"1"},{title:"Import files",id:"2"}],dateFrom:{dataFull:this.LogicDate_from.getDataFullLogic()},dateTo:{dataFull:this.LogicDate_to.getDataFullLogic()},save:{dataFull:{config:{default:{title:"Save",type:"default",class:"",icon:"save"}}},abs_Click:this.abs_btn_save},refresh:{dataFull:{config:{default:{title:"Refresh",type:"submit",class:"",icon:"delete"}}},abs_Click:this.abs_btn_refresh},uPagination:{number_show:2,result_total:500,mode:{noJumpPage:!0},paging_record:[{number:5,selected:!0},{number:10},{number:15},{number:50}]},importFile:{dataFull:{config:{default:{title:"Save",type:"default",class:"col-md-2",icon:"save"}}}},valueDataFile:{data:{status:{title:"Status",value:""},file_name:{title:"File Name",value:"YEN"},file_size:{title:"File Size",value:"6202 Bytes"},url:""}},uForm:{dataFull:{config:{default:{title:"",title_sub:""}},cmd:{visibility:""}}},btnImport:{dataFull:{config:{default:{att_content:null!==(e=this.state.file_selected)&&void 0!==e&&e.length?"":"No file choose",title:"Import File"}},abs_Change:this.abs_btn_import}}}}convertCurrency(t){if(void 0===t||null===t||""===t)return"";let e=Number(t);return Number.isNaN(e)?"":e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}render(){return(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(zt,{stateData:this.stateData,dataFull:this.state})})}componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.LogicDate_from.set(this.user_info.workingdate),this.LogicDate_to.set(this.user_info.workingdate),this.callAPI("O9_admin_import_file_table").then((t=>{t&&this.setState({O9_admin_import_file_table:t.O9_admin_import_file_table||[]})}))}}const Bt=Ut;class Yt extends o.Component{constructor(t){super(t),this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT"),this.MediaDetail=(0,_.Iq)("O9_FormMediaDetail"),this.accountNumberFormat=s.ZP.getParameterSystem("MEDIA_ACCOUNT_NUMBER"),this.MediaConfig=this.getDefaultConfig(t.data),this.state={}}UNSAFE_componentWillUpdate(t){this.MediaConfig=""}render(){const t=this.MediaDetail,e=this.getDefaultConfig(this.props.data);return(0,c.jsx)(t,(0,u.Z)({},e))}getModalTitle(){let{customerType:t}=this.props.data;switch(t){case"C":return"Customer Information";case"G":return"Group Information";case"L":return"Signature Viewer";default:return""}}getRefTypeData(t){return[{title:"Single customer",value:"C"},{title:"Group of customer",value:"G"},{title:"Customer linkage",value:"L"}].map(((e,i)=>(0,u.Z)((0,u.Z)({},e),{},{selected:e.value===t})))}getBusinessData(t){return this.props.businessLineTypeData.map(((e,i)=>(0,u.Z)((0,u.Z)({},e),{},{selected:e.value===t})))}getComponentsInformation(t,e){switch(t){case"C":return[{key:"Customer Code",value:e.data1},{key:"Full Name",value:e.data2},{key:"DOB",value:e.data3?(0,Y.X2)(new Date(e.data3).getTime(),this.dateFormat):e.data3},{key:"Identification",value:e.data4}];case"G":return[{key:"Group Code",value:e.data1},{key:"Group Name",value:e.data2},{key:"Group Type",value:e.data3},{key:"Description",value:e.data4}];case"L":return[{key:"Linkage Code",value:e.data1},{key:"Master Code",value:e.data3},{key:"Master Name",value:e.data2},{key:"Description",value:e.data4}];default:return s.ZP.isDebug()&&console.log('Get Components information !== "C", "G" and "L"'),[]}}getDefaultConfig(t){if(void 0!==t)return{modal:{title:this.getModalTitle(),visibility:!0,abs_Close:this.props.closeModal},data_info:{valueModal:{dataFull:{data:t.info?this.getComponentsInformation(t.customerType,t.info):[]}}},stateData:t.media.map((t=>({img_form:{title:t.media_name,link:this.isImage(t.media_data)?`data:image/png;base64,${t.media_data}`:"../rs/global/img/file_icon.svg",content:this.isImage(t.media_data)?"":t.media_data,file_type:t.media_type},code:{dataFull:{config:{default:{title:"Code",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:t.customer_code}},reference_type:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Reference type",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!1,error:{message:"",type:""}}},data:this.getRefTypeData(t.reference_type)}},infor2:{dataFull:{config:{default:{title:"Customer name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:t.infor2}},infor1:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:this.getBusinessData(t.infor1)}},expireDate:{dataFull:{config:{default:{placeholder:this.dateFormat,title:"Expire date",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:t.expire_date?(0,Y.X2)(new Date(t.expire_date).getTime(),this.dateFormat):null}},other:{dataFull:{config:{default:{title:"Account number",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:(0,Y.Ui)(t.other,this.accountNumberFormat)}}})))}}isImage(t){let e=!1;try{e=btoa(atob(t))===t&&"/iR".includes(t[0])}catch(i){}return e}}const Ht=Yt,Vt={a:/[a-zA-Z]/,9:/\d/,h:/\d/,H:/\d/,m:/\d/,s:/\d/,"*":/./,_:/[a-zA-Z\d]/,L:/[a-zA-Z\d]/,".":/./,0:/\d/,z:/[a-zA-Z]/,Z:/[a-zA-Z ]/,A:/[A-Za-z0-9\\_]/},Wt={"#":"_"},Gt={0:{status:!0,reg_remove:/[^\d/]/g},L:{status:!0,reg_remove:/[^a-zA-Z\d]/g},z:{status:!0,reg_remove:/[^a-zA-Z]/g},Z:{status:!0,reg_remove:/[^a-zA-Z ]/g},".":{status:!0,reg_remove:""},A:{status:!0,reg_remove:/[^A-Za-z0-9\\_]/g}},Jt={"-":".{100}",EMAIL:".{100}",EMAIL_MULTI:".{500}"},qt=t=>Wt[t],Kt=t=>Vt[t],Xt=t=>{let e=t[0];return Gt[e]},$t=t=>{var e,i;if(!t)return!1;let o=t[0];if(!0!==(null===(e=Gt[o])||void 0===e?void 0:e.status))return!1;let a=!0;for(const s of t)t[0]!==s&&(a=!1);return!0===(null===(i=Xt(o))||void 0===i?void 0:i.status)&&a},te=(t,e)=>{let i=[];const o=/(\\.|.)/g;let a;for(;null!==(a=o.exec(t));){a.index===o.lastIndex&&o.lastIndex++;const t=a[0],s=1===t.length?"regex":"const";let n={type:s,key:t};"regex"===s?Kt(t)?"date"===e&&/[^/:]/.test(t)?(n.reg=Kt("9"),n.value=t):(n.reg=Kt(t),n.value="_"):"date"===e&&/[^/:]/.test(t)?(n.reg=Kt("9"),n.value=t):qt(t)?(n.value=qt(t),n.type="static"):(n.value=t,n.type="const"):n.value=t[1],i.push(n)}return i},ee=(t,e)=>{let i="";for(const o of t)i+="date"===e?o.key:o.value;return i},ie=(t,e)=>{let i="";for(const o of t)i+=o.key.includes("\\")?o.value:o.key;return i},oe=(t,e,i,o,a,s)=>{if(!t||!e||!i)return"";let n="";if(!t)return"";switch(i){case"default":for(const o in e){let i=t[o];if("regex"===e[o].type){if(!1===e[o].reg.test(i))return"";n+=i}else"static"===e[o].type&&(n+=i)}break;case"date":let i=ee(e);if("string"===o)n=a&&""!==a?(0,Y.Al)(t,i,a,s):(0,Y.w5)(t,i,s);else n=(0,Y.w5)(t,i,s);break;default:n=t}return n||0===n?n:""},ae=(t,e,i,o,a)=>{if(!t&&0!==t||!e||!i)return"";let s="";const n=ie(e);switch(i){case"default":let i=0;for(const a in e)if("regex"===e[a].type)if($t(n))s+=t[i]||"",i++;else{if(t[i]&&e[a].reg.test(t[i]))s+=t[i];else{if("OPTIMISTIC"!==o)return"";s+=e[a].value}i++}else"static"===e[a].type?(s+=e[a].value,e[a].value===t[i]&&i++):s+=e[a].value;break;case"date":let r=ee(e);s=(0,Y.sx)(t,r,a);break;default:s=t}return s||""},se=(t,e,i,o,a,s,n)=>{let r=oe(t,e,i,a,s,n);return null!==o&&void 0!==o&&o.length?ae(r,o,i):r},ne=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,n=t;return null!==o&&void 0!==o&&o.length&&(n=oe(t,o,i,s)),ae(n,e,i,a,s)},re=(t,e,i)=>{t=t?new Date(t):window.moment.utc().toDate();const o=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));return{mounth_data:ce(o.getMonth()+1),year_data:de(e,i),day_data:le(),day_of_mounth_data:ue(o.getTime()),date_view:t}},le=()=>["SUN","MON","TUE","WED","THU","FRI","SAT"].map(((t,e)=>({title:t,type:"gray"}))),ce=t=>{t||(t=window.moment.utc().toDate().getMonth()+1);return["January","February","March","April","May","June","July","August","September","October","November","December"].map(((e,i)=>({title:e,selected:t-1===i})))},de=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1900,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2100,i=[];if(t<=e)for(let o=t;o<=e;o++)i.push(o);return i},he=t=>{let e=window.moment.utc(t).toDate().getMonth()+1,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];(t=>t%400===0||t%100!==0&&t%4===0)(window.moment.utc(t).toDate().getFullYear())&&i[2]++;let o=[];for(let a=1;a<=i[e];a++)o.push(a);return o},ue=(t,e)=>{t||(t=Date.parse(window.moment.utc().toDate()));let i=window.moment.utc(t).toDate(),o=window.moment.utc((0,J.X7)(t,{M:-1})).toDate(),a=window.moment.utc((0,J.X7)(t,{M:1})).toDate(),s=Date.parse(o),n=Date.parse(a),r=he(s),l=he(t),c=he(n),d=window.moment.utc([i.getFullYear(),i.getMonth(),1]).toDate(),h=window.moment.utc([i.getFullYear(),i.getMonth(),l.length]).toDate(),u=r.slice(r.length-d.getDay(),r.length),p=c.slice(0,6-h.getDay()),_=u.map((t=>{let e=String(t),a="gray",n=window.moment.utc(new Date(s).setDate(t)).valueOf();return t===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()&&(a="primary"),{title:e,type:a,value:n}})),f=l.map((e=>{let o=String(e),a="",s=window.moment.utc(new Date(t).setDate(e)).valueOf();return e===i.getDate()&&(a="primary"),{title:o,type:a,value:s}})),g=p.map((t=>{let e=String(t),o="gray",s=window.moment.utc(new Date(n).setDate(t)).valueOf();return t===i.getDate()&&a.getMonth()===i.getMonth()&&a.getFullYear()===i.getFullYear()&&(o="primary"),{title:e,type:o,value:s}})),m=_.concat(f);return m=m.concat(g),m};class pe extends o.Component{constructor(t){super(t),this.BuildPropsDefault=t=>{const{name:e,code:i,mask_format:o,abs_Blur:a,CMD:s,value:n,mask_mode_time:r}=t,l=t.mask_mode||"default",c=t.data_default||"",d=t.request||!1;return{default:{name:e,code:i,class:t.class||""},config:{data_default:c,mask_format:o,mask_data_format:"",value_type:"all",mask_mode:l,mask_mode_time:r},validate:{request:d},value:n,lang:{},CMD:s}},this.getComponentContructor=(t,e)=>{let i=this.buildPropsSmooth(e);return{props_smooth:i,state_smooth:this.buildStateSmooth(i)}},this.buildPropsSmooth=t=>{let e=s.ZP.cloneJson(t);e.config=t.config;let i=(t=>{let e=/\${([^}]+)}/gm.exec(t);if(null!==e)try{let i=s.ZP.context_get(e[1])||"";t=t.replace(e[0],i)}catch(i){}return t})(e.config.data_default);var o;return i=((t,e)=>{let i=t,o=/libDate_cal\((.*),(.*)\)/gm.exec(i);if(null!==o)try{i=(0,J.X7)((0,Y.xY)(o[1]),JSON.parse(o[2]))}catch(n){}let a=/JF_DATE\.([^(]+)\(([^)]*)\)/gm.exec(i);if(null!==a)try{t=s.ZP.persist_convertCondition(t);let e=a[1],o=a[2].split(",");i=J.ZP[e].apply(null,o)}catch(n){}return i})(i),void 0!==i&&null!==i||(i=""),e.config.data_default=i,e.config.mask_format=(o=e.config.mask_format,Jt[o]||o),e.config.mask_format=(t=>{for(const e in Vt){let i,o=new RegExp(`\\${e}{(\\d+)}`,"g");for(;null!==(i=o.exec(t));){i.index===o.lastIndex&&o.lastIndex++;let a="";for(let t=0;t<Number(i[1]);t++)a+=e;t=t.replace(i[0],a)}}return t})(e.config.mask_format),e},this.buildStateSmooth=t=>{const e=t.config;let i=te(e.mask_format,e.mask_mode),o=te(e.mask_data_format,e.mask_mode),a=ee(i,e.mask_mode),n=e.mask_mode,r={status:!1,reg_remove:""};if($t(e.mask_format)){let t=Xt(e.mask_format);void 0!==t&&(r.status=t.status,r.reg_remove=t.reg_remove)}const l=a,c=Date.parse(new Date);let d={mounth_data:ce(),year_data:de(),day_data:le(),day_of_mounth_data:ue(c,c),date_view:c},h=ne(t.value,i,n,o);return"date"===n&&Number(t.value)&&(h=ne(Number(t.value),i,n,[])),{value_type:e.value_type||"all",error_input:!1,lang_select:s.ZP.getLangKey(),component_title:t.default.name||"",CMD:t.CMD,value:t.value,mask_value:h,date_selected_cache:0,date_picker:re(t.value),mask_mode:n,mask_format:l,mask_regs:i,mask_regs_to:o,mask_placeholder:a,mask_mode_time:e.mask_mode_time||"",free_style:r,date_picker:d}},this.getInfoErrror=()=>{var t;const{help_mess:e}=this.state;return e?{info:this.getErrorLang(this.state.help_mess),key:(null===(t=this.state.lang)||void 0===t?void 0:t[this.props_smooth.default.name])||this.props_smooth.default.name,infoComponent:this.props_smooth.default}:""},this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props_smooth.infoView,default:this.props_smooth.default,layout:this.props_smooth.infoLayout,block:t.block}},this.getDataOOP=(t,e)=>this.data_select,this.getAdvanced=(t,e)=>this.maskInputGet(),this.setAdvanced=(t,e)=>{if(t.codeHidden){if(t.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=e,void 0!==this.data_select)){if(void 0!==this.props_smooth.config.data_view)var i="";void 0!==this.props_smooth.config.data_value&&(i=s.ZP.getOOP(this.data_select,this.props_smooth.config.data_value.trim())+""),this.maskInputSet(i,"enter_tab")}}else t.list_component&&(null!==e&&void 0!==e||(e=""),this.maskInputSet(e,"on_change"))},this.get=()=>this.maskInputGet(),this.getValue=()=>this.state.mask_value,this.set=t=>{this.maskInputSet(t,"on_change")},this.reload=(t,e)=>{const i=this.props_smooth.config;this.data_select={},this.maskInputSet(i.data_default)},this.setCallFormBack=(t,e)=>{void 0!==t.key&&void 0!==t.key_form&&(this[t.key]=t.key_form)},this.maskInputSet=(t,e,i,o)=>{const{mask_regs:a,mask_regs_to:s,mask_mode:n}=this.state;let r={end_pos:0,start_pos:0,help_mess:"",mask_value:"",value:t},l=ne(t,a,n,s);"date"===n&&(r.date_picker=re(t),Number(t)&&(l=ne(Number(t),a,n,[]))),r.mask_value=l,r=Object.assign(r,o),this.setState(r,(()=>{this.props.abs_update&&this.props.abs_update(this.state)}))},this.maskInputGet=()=>{const{mask_regs:t,mask_regs_to:e,mask_value:i,mask_mode:o}=this.state;let a="";return this.state.free_style.status?i:(a=se(i,t,o,"date"===o?[]:e),a)},this.maskInputClear=()=>{this.data_select={},this.setState({end_pos:0,start_pos:0,value:"",mask_value:"",help_mess:""},(()=>{}))},this.maskInputValidate=()=>{const{mask_value:t,mask_mode:e,value:i}=this.state;let o="",a=this.maskInputGet();return o=t&&!this.maskInputGet()||"date"===e&&!this.isDateValid(i)?"jMaskInput_WrongFormat":function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[{title:"@VALUE",value:arguments.length>1?arguments[1]:void 0},{title:"@NOW",value:Date.parse(new Date)},{title:"@YEAR",value:31536e6.toString()},{title:"@MOUNTH",value:2592e6.toString()},{title:"@DAY",value:864e5.toString()},{title:"@HOURS",value:36e5.toString()},{title:"@MINUTE",value:6e4.toString()},{title:"@SECONDS",value:1e3.toString()}];for(const i of t){let{content:t,mess:o}=i;for(const i of e)t=t.replace(new RegExp(i.title,"g"),i.value);if(!1===s.ZP.checkDynamicConditionNoData(t))return o}return""}(this.props_smooth.validate.conditions,a),o},this.abs_calendar_changeMonth=t=>{const e=this.maskInputGet()||Date.parse(new Date),i=(0,J.X7)(e,{M:t});this.maskInputSet(i)},this.abs_calendar_submit=t=>{let e=this.state.date_picker.day_of_mounth_data[t].value;this.maskInputSet(e)},this.abs_calendar_chooseYear=t=>{const e=this.maskInputGet()||Date.parse(new Date),i=new Date(e).setFullYear(t);this.maskInputSet(i)},this.abs_calendar_changeYear=t=>{},this.abs_calendar_chooseMonth=t=>{const e=t,i=this.maskInputGet()||Date.parse(new Date),o=new Date(i).setMonth(e);this.maskInputSet(o)},this.abs_calendar_openCalendar=()=>{let t=this.maskInputGet();t&&this.maskInputSet(t,"","",{date_selected_cache:t})},this.abs_calendar_KeyUp=t=>{const e=this.maskInputGet()||Date.parse(new Date);let i,o=this.state.date_selected_cache;switch(t.key){case"ArrowLeft":i=(0,J.X7)(e,{d:-1}),this.maskInputSet(i);break;case"ArrowRight":i=(0,J.X7)(e,{d:1}),this.maskInputSet(i);break;case"ArrowUp":i=(0,J.X7)(e,{d:-7}),this.maskInputSet(i);break;case"ArrowDown":i=(0,J.X7)(e,{d:7}),this.maskInputSet(i);break;case"Enter":i=e,this.maskInputSet(i),this.ref_maskinput.current.abs_CloseCalendar();break;case"Escape":Number(o)!==Number(this.maskInputGet())?this.maskInputSet(o):this.ref_maskinput.current.abs_CloseCalendar()}},this.abs_calendar_today=()=>{const t=Date.parse(new Date);this.maskInputSet(t)},this.onEventKey=t=>{if("Delete"===t.key)this.maskInputClear();this.state.mask_mode},this.onClick=t=>{},this.onBlur=()=>{let t=this.maskInputValidate();void 0!==this.props.abs_Blur&&this.props.abs_Blur(),t&&this.maskInputSet("")},this.setLastPost=t=>{let e=t.target;this.state.start_pos=e.selectionStart,this.state.end_pos=e.selectionEnd},this.setPos=(t,e)=>{t.selectionStart=e,t.selectionEnd=e},this.onChangeMaskInput=t=>{let{start_pos:e,mask_value:i,mask_regs:o,mask_placeholder:a,mask_mode:s,mask_regs_to:n,mask_mode_time:r}=this.state;const l=t.target;let c=l.selectionStart,d=l.value||"";const h=this.state.free_style;if(h.status)return d=d.replace(h.reg_remove,""),d=d.slice(0,o.length),void this.setState({mask_value:d});let u=d.slice(e,c)||"",p=0,_="",f=d.slice(0,c);for(let m=c;m<a.length;m++)m<c+(a.length-d.length)?f+=a[m]:f+=i[m]||a[m];i=f;for(const m in o){const t=o[m];"regex"===t.type||"const"===t.type&&t.value===u[p]?e<=m&&p<u.length?("const"===t.type&&t.value===u[p]||t.reg.test(u[p])?_+=u[p]||t.value:(_+=t.value,c--),p++):_+=i[m]||a[m]:(_+=t.value,e<=m&&p<u.length&&c++)}_===a&&(_="");let g=ie(this.state.mask_regs);this.setState({mask_value:_,value:"date"===s?(0,Y.w5)(_,g,r):se(_,o,s,n)},(()=>{this.setPos(l,c),this.props.abs_update&&this.props.abs_update(this.state)}))},this.getErrorLang=t=>{switch(t){case"validateNumMin":return s.ZP.getLang(t).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(t).replace("{count}",this.state.validate.max);default:return s.ZP.getLang(t)}},this.getDataFullLogic=()=>(0,u.Z)((0,u.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChangeMaskInput,abs_Blur:this.onBlur,abs_Click:this.onClick,abs_KeyDown:this.setLastPost,abs_KeyUp:this.onEventKey,abs_MouseUp:this.setLastPost}),this.setCMD=(t,e)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),e);if(i.disabled!==o.disabled||i.visible!==o.visible||i.block!==o.block){let t=this.state;t.CMD=o,this.setState(t)}},this.prop_default=this.BuildPropsDefault(t),this.propertyConstructor={},this.data_debug={},this.app_debug=[],this.state={is_lookup:!1,is_error:!1,is_clicked:!1,help_mess:"",lang_select:"",title:"",CMD:this.props.CMD,end_pos:-1,start_pos:0,_type:"",value:"",mask_value:"",mask_format:"",mask_placeholder:"",mask_mode:"default",mask_regs:[],mask_regs_to:[],mask_mode_time:"",free_style:{status:!1,reg_remove:""},date_picker:{mounth_data:[],year_data:[],day_data:[],day_of_mounth_data:[],date_view:Date.parse(new Date)},date_selected_cache:0},this.ref_maskinput=o.createRef();const e=this.getComponentContructor({},this.prop_default);this.state=Object.assign(this.state,e.state_smooth),this.props_smooth=e.props_smooth}UNSAFE_componentWillUpdate(t,e){t.CMD.disabled!==this.state.CMD.disabled&&this.setCMD(void 0,t.CMD),t.value===this.state.value||Number.isNaN(t.value)||this.maskInputSet(t.value)}isDateValid(t){return!isNaN(new Date(t))}getConfigTemplate(){const{date_picker:t}=this.state;return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{subTitle_isShow:"date"===this.state.mask_mode,subTitle:`(${this.state.mask_placeholder})`,placeholder:this.state.CMD.disabled+""==="true"?" ":ie(this.state.mask_regs,this.props_smooth.config.mask_mode),title:this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.props_smooth.validate.request,icon:""},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:!0,error:{message:this.state.help_mess,type:""}},mode:{textAlign:"left",letterSpacing:"M"}},valueTitleHover:"true"!==String(this.state.CMD.disabled)?"":this.state.mask_value,value:this.state.mask_value,cmd:{isLock:!1},calendar_data:{value_current:"",today:{title:"Today"},config:{days_title:t.day_data},list_months:t.mounth_data,list_years:{value:new Date(t.date_view).getFullYear()||"",data:t.year_data},list_days:t.day_of_mounth_data},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_today:this.abs_calendar_today,abs_calendar_KeyUp:this.abs_calendar_KeyUp}}render(){let t=this.state.mask_mode;const e=(0,_.RP)("date"===t?"uDate":"uInput");return(0,c.jsx)(e,{dataFull:(0,u.Z)((0,u.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChangeMaskInput,abs_Blur:this.onBlur,abs_Click:this.onClick,abs_KeyDown:this.setLastPost,abs_KeyUp:this.onEventKey,abs_MouseUp:this.setLastPost}),ref:this.ref_maskinput})}}const _e=pe;class fe extends o.Component{constructor(t){var e,i;super(t),e=this,this.changeValueMask=(t,e,i)=>{switch(t){case"import_tab":let{tab_import:t}=this.state;t[e].value=i,this.setState({tab_import:t});break;case"view_tab":let{tab_view:o}=this.state;o[e].value=i,this.setState({tab_view:o});break;case"advanced_search_tab":let{tab_search:a}=this.state;a.advanced_search[e].value=i,this.setState({tab_search:a})}},this.absViewModifyExpire=t=>{let{tab_view:e}=this.state,i=this.logicViewModifyExpiredDate.getDataFullLogic();e.expire_date.value=i.value,this.setState({tab_view:e})},this.absViewModifyAccountNumber=t=>{let{tab_view:e}=this.state,i=this.logicViewModifyAccountNumber.getDataFullLogic();e.other.value=i.value,this.setState({tab_view:e})},this.absImportExpire=t=>{let{tab_import:e}=this.state,i=this.logicImportExpiredDate.getDataFullLogic();e.expire_date.value=i.value,this.setState({tab_import:e})},this.absImportCode=t=>{let{tab_import:e}=this.state,i=this.logicImportCode.getDataFullLogic();e.customer_code.value=i.value,this.setState({tab_import:e})},this.absImportAccountNumber=t=>{let{tab_import:e}=this.state,i=this.logicImportAccountNumber.getDataFullLogic();e.other.value=i.value,this.setState({tab_import:e})},this.closeForm=()=>{s.ZP.removeForm(this.key_form)},this.getDefaultPropsTemplate=function(){var t,i,o;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!==(t=e.state)&&void 0!==t&&t.role_action&&(a=e.state.role_action);let{languages:s}=e.state;return{stateData:{form:{title:"CTM-Customer media files",title_button:{close_button:s.form_btn_close,add_form:s.form_btn_add},cmd:{isLoading:e.state.isLoading},abs_Close:e.closeForm,abs_AddMenuBar:e.addMenu},noti_system:"System support view for image (png, img..) and pdf only",tab_search:{search:{placeholder:"Search text",value:e.state.tab_search.search_text.value,abs_Change:e.changeValueSearch,abs_search:e.onSearch,cmd:{visible:!1!==a.search}},btn_search:{dataFull:{config:{default:{title:"Search",icon:"fa-search",type:"primary"},cmd:{visible:!1!==a.search}},abs_Click:e.onSearch}},table_config:e.getTableConfig(),table_header:e.getHeaderConfig(),table_data:e.getDataTableConfig(e.state.tab_search.table_search.data),advanced_search:{title:"Advanced search",class:"col-xl-10 col-lg-10 col-md-11 col-sm-12 offset-xl-2-right offset-lg-2-right offset-md-1-right",cmd:{visible:a["advanced search"]},customer_code:(0,c.jsx)(_e,{abs_update:t=>{e.changeValueMask("advanced_search_tab","customer_code",t.value)},name:"Code",code:"code",mask_format:e.customerCdFormat,mask_mode:"default",class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",CMD:{},value:e.state.tab_search.advanced_search.customer_code.value}),account_number:(0,c.jsx)(_e,{abs_update:t=>{e.changeValueMask("advanced_search_tab","account_number",t.value)},name:"Account Number",code:"other",mask_format:e.accountNumberFormat,mask_mode:"default",class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",CMD:{},value:e.state.tab_search.advanced_search.account_number.value}),business_line:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",code_form_component:"business_line"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:e.getListDataSelect(e.businessLineAdvancedTypeData,e.state.tab_search.advanced_search.business_line.value||(null===(i=e.businessLineAdvancedTypeData[0])||void 0===i?void 0:i.value)),abs_Change:e.onChangeValueSelect}},customer_name:{dataFull:{config:{default:{title:"Customer Name",type:"text",class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",code_form_component:"customer_name"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:e.state.tab_search.advanced_search.customer_name.value,abs_Change:e.onInputChangeValue}},media_name:{dataFull:{config:{default:{title:"Media Name",type:"text",class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",code_form_component:"media_name"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:e.state.tab_search.advanced_search.media_name.value,abs_Change:e.onInputChangeValue}},status:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Status",type:"text",class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",code_form_component:"status"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:e.getListDataSelect(e.statusData,e.state.tab_search.advanced_search.status.value||e.statusData[0].value),abs_Change:e.onChangeValueSelect}},open_date_from:(0,c.jsx)(_e,{abs_update:t=>{e.changeValueMask("advanced_search_tab","open_date_from",t.value)},name:"Open date from",code:"open_date_from",mask_format:e.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-sm-6 col-12",CMD:{},value:e.state.tab_search.advanced_search.open_date_from.value}),open_date_to:(0,c.jsx)(_e,{abs_update:t=>{e.changeValueMask("advanced_search_tab","open_date_to",t.value)},name:"Open date to",code:"open_date_to",mask_format:e.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-sm-6 col-12",CMD:{},value:e.state.tab_search.advanced_search.open_date_to.value}),last_date_from:(0,c.jsx)(_e,{abs_update:t=>{e.changeValueMask("advanced_search_tab","last_date_from",t.value)},name:"Last date from",code:"last_date_from",mask_format:e.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-sm-6 col-12",CMD:{},value:e.state.tab_search.advanced_search.last_date_from.value}),last_date_to:(0,c.jsx)(_e,{abs_update:t=>{e.changeValueMask("advanced_search_tab","last_date_to",t.value)},name:"Last date to",code:"last_date_to",mask_format:e.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-sm-6 col-12",CMD:{},value:e.state.tab_search.advanced_search.last_date_to.value}),expire_date_from:(0,c.jsx)(_e,{abs_update:t=>{e.changeValueMask("advanced_search_tab","expire_date_from",t.value)},name:"Expire date from",code:"expire_date_from",mask_format:e.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-sm-6 col-12",CMD:{},value:e.state.tab_search.advanced_search.expire_date_from.value}),expire_date_to:(0,c.jsx)(_e,{abs_update:t=>{e.changeValueMask("advanced_search_tab","expire_date_to",t.value)},name:"Expire date to",code:"expire_date_to",mask_format:e.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-sm-6 col-12",CMD:{},value:e.state.tab_search.advanced_search.expire_date_to.value}),btn_search:{dataFull:{config:{default:{title:"Search",icon:"fa-search",type:"primary"}},abs_Click:e.onSearchAdvanced}}}},tab:{data:e.getTabDataConfig(),abs_select:e.clickTabHandler},tab_import:(0,u.Z)((0,u.Z)({},e.getImportDataFileConfig()),{},{para_import:{note_import:"File name must only have alphanumeric characters and no spaces",isImported:e.state.tab_import.isImported}}),tab_view:{para_view:{isHasData:e.state.tab_view.isHasData},img_form:{link:e.getImageTemplate(e.state.tab_view.data_view.media_data),content:e.state.tab_view.data_view.media_data,title:e.state.tab_view.data_view.media_title,file_type:e.state.tab_view.data_view.media_type},code:{dataFull:{config:{default:{title:"Code",type:"text",class:"col-md-12",code_form_component:"code"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:(0,Y.Ui)(e.state.tab_view.customer_code.value,e.customerCdFormat)},abs_Change:e.onInputChangeValue,abs_Blur:e.onBlurGetInfoCustomer},reference_type:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Reference Type",type:"text",class:"col-md-12",code_form_component:"reference_type"},cmd:{disable:!0,visible:!1,error:{message:"",type:""}}},data:e.getReferenceTypeData(e.state.tab_view.reference_type.value||e.referenceTypeData[0].value)},abs_Change:e.onChangeValueSelect},infor1:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-md-12",code_form_component:"infor1"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:e.getBusinessLineTypeData(e.state.tab_view.infor1.value||(null===(o=e.businessLineTypeData[0])||void 0===o?void 0:o.value))},abs_Change:e.onChangeValueSelect},infor2:{dataFull:{config:{default:{title:"Customer Name",type:"text",class:"col-md-12",code_form_component:"infor2"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.state.tab_view.infor2.value},abs_Change:e.onInputChangeValue},expireDate:{dataFull:e.logicViewModifyExpiredDate.getDataFullLogic()},expireDate_DOM:(0,c.jsx)(_e,{abs_update:t=>{e.changeValueMask("view_tab","expire_date",t.value)},name:"Expire Date",code:"expireDate",mask_format:e.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-md-12",CMD:e.state.tab_view.expire_date.CMD,value:e.state.tab_view.expire_date.value}),other:{dataFull:e.logicViewModifyAccountNumber.getDataFullLogic()},other_DOM:(0,c.jsx)(_e,{abs_update:t=>{e.changeValueMask("view_tab","other",t.value)},name:"Account Number",code:"other",mask_format:e.accountNumberFormat,mask_mode:"default",class:"col-md-12",CMD:e.state.tab_view.other.CMD,value:e.state.tab_view.other.value}),getInfo:{dataFull:{config:{default:{title:"Get information",type:"default",class:""}},dataItem:{tab_select:"tab_view"}},abs_Click:e.onClickGetInfo},printVoucher:{dataFull:{config:{default:{title:"Print",type:"default",class:""},cmd:{disable:!1,visible:!1}}},abs_Click:e.printVoucher},approveBtn:{dataFull:{config:{default:{title:"Approve",type:"default",class:""},cmd:{disable:!1===e.state.isApprove?"N"!==e.state.tab_view.data_view.media_status:e.state.isApprove,visible:a.approve}}},abs_Click:e.onClickApproved},modify:{dataFull:{config:{default:{title:"Modify",type:"default",class:""},cmd:{disable:e.state.isClickModify,visible:a.modify}}},abs_Click:e.onClickModify},saveForm:{dataFull:{config:{default:{title:"Save",type:"primary",class:""},cmd:{disable:!e.state.isClickModify,visible:a.modify}}},abs_Click:e.onClickSave}}}}},this.getTabDataConfig=function(t){var i;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[];return void 0!==(null===(i=e.state)||void 0===i?void 0:i.role_action)&&(o=e.state.role_action),!1===o.search&&!1===o["advanced search"]||a.push({title:"Search",id:e.tabIds.search}),o.import&&a.push({title:"Import",id:e.tabIds.import}),!1!==o.view&&a.push({title:"View - Modify",id:e.tabIds.viewModify}),e.state.tab_active&&void 0===t&&(t=e.state.tab_active),void 0===t&&(t=a[0].id),a.map((e=>(0,u.Z)((0,u.Z)({},e),{},{isShow:e.id===t})))},this.pageRecordChangeRoleSearch=t=>{let{tab_search:e}=this.state;e.table_search.page_size=this.record[t],e.table_search.paging_index=1,this.search_page_index=1;let i=(0,Y.FT)(e.advanced_search.open_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),o=(0,Y.FT)(e.advanced_search.open_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),a=(0,Y.FT)(e.advanced_search.last_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),n=(0,Y.FT)(e.advanced_search.last_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),r=(0,Y.FT)(e.advanced_search.expire_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),l=(0,Y.FT)(e.advanced_search.expire_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]");this.setState({tab_search:e},(()=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:e.isSearchAdvanced?"SQL_ADSEARCH_MEDIA":"SQL_SEARCH_MEDIA",api_data:{search_text:e.search_text.value,customer_code:e.advanced_search.customer_code.value,account_number:e.advanced_search.account_number.value,business_line:e.advanced_search.business_line.value,customer_name:e.advanced_search.customer_name.value,media_name:e.advanced_search.media_name.value,status:e.advanced_search.status.value,open_date_from:"Invalid date"===i||""===i?null:i,open_date_to:"Invalid date"===o||""===o?null:o,last_date_from:"Invalid date"===a||""===a?null:a,last_date_to:"Invalid date"===n||""===n?null:n,expire_date_from:"Invalid date"===r||""===r?null:r,expire_date_to:"Invalid date"===l||""===l?null:l,page_size:this.state.tab_search.table_search.page_size,page_index:this.search_page_index-1}}).then((t=>{let i=[];t&&(i=t.items||[]);for(let e of i){var o,a,n;e.media_status=(null===(o=this.OWN_CDLIST.STS[e.media_status])||void 0===o?void 0:o.caption)||e.media_status,e.reference_type=(null===(a=this.OWN_CDLIST.TYPE[e.reference_type])||void 0===a?void 0:a.caption)||e.reference_type,e.infor1=(null===(n=this.OWN_CDLIST.CATEGORIES[e.infor1])||void 0===n?void 0:n.caption)||e.infor1}e.table_search.data=i,e.table_search.result_total=(null===t||void 0===t?void 0:t.total_count)||0,this.setState({tab_search:e},(()=>{0===i.length&&s.ZP.showToast("Data not found")}))}))}))},this.pageChangeRoleSearch=t=>{this.search_page_index=t;let{tab_search:e}=this.state;e.table_search.paging_index=t;let i=this.state.tab_search.search_text.value,o=(0,Y.FT)(e.advanced_search.open_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),a=(0,Y.FT)(e.advanced_search.open_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),n=(0,Y.FT)(e.advanced_search.last_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),r=(0,Y.FT)(e.advanced_search.last_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),l=(0,Y.FT)(e.advanced_search.expire_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),c=(0,Y.FT)(e.advanced_search.expire_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]");this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:e.isSearchAdvanced?"SQL_ADSEARCH_MEDIA":"SQL_SEARCH_MEDIA",api_data:{search_text:i,customer_code:e.advanced_search.customer_code.value,account_number:e.advanced_search.account_number.value,business_line:e.advanced_search.business_line.value,customer_name:e.advanced_search.customer_name.value,media_name:e.advanced_search.media_name.value,status:e.advanced_search.status.value,open_date_from:"Invalid date"===o||""===o?null:o,open_date_to:"Invalid date"===a||""===a?null:a,last_date_from:"Invalid date"===n||""===n?null:n,last_date_to:"Invalid date"===r||""===r?null:r,expire_date_from:"Invalid date"===l||""===l?null:l,expire_date_to:"Invalid date"===c||""===c?null:c,page_size:this.state.tab_search.table_search.page_size,page_index:this.search_page_index-1}}).then((t=>{let i=[];t&&(i=t.items||[]);for(let e of i){var o,a,n;e.media_status=(null===(o=this.OWN_CDLIST.STS[e.media_status])||void 0===o?void 0:o.caption)||e.media_status,e.reference_type=(null===(a=this.OWN_CDLIST.TYPE[e.reference_type])||void 0===a?void 0:a.caption)||e.reference_type,e.infor1=(null===(n=this.OWN_CDLIST.CATEGORIES[e.infor1])||void 0===n?void 0:n.caption)||e.infor1}e.table_search.result_total=(null===t||void 0===t?void 0:t.total_count)||0,e.table_search.data=i,this.setState({tab_search:e},(()=>{0===i.length&&s.ZP.showToast("Data not found")}))}))},this.changeValueSearch=t=>{let{tab_search:e}=this.state;e.search_text.value=t.target.value,this.setState({tab_search:e})},this.onSearch=()=>{let{tab_search:t}=this.state,e=t.search_text.value;this.search_page_index=1,this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_SEARCH_MEDIA",api_data:{search_text:e,page_size:t.table_search.page_size,page_index:this.search_page_index-1}}).then((e=>{let i=[];if(e.hasError)s.ZP.showToast(e.error_data[0].info,!1);else{i=e.items;for(let t of i){var o,a,n;t.media_status=(null===(o=this.OWN_CDLIST.STS[t.media_status])||void 0===o?void 0:o.caption)||t.media_status,t.reference_type=(null===(a=this.OWN_CDLIST.TYPE[t.reference_type])||void 0===a?void 0:a.caption)||t.reference_type,t.infor1=(null===(n=this.OWN_CDLIST.CATEGORIES[t.infor1])||void 0===n?void 0:n.caption)||t.infor1}t.table_search.data=i,t.table_search.result_total=(null===e||void 0===e?void 0:e.total_count)||0,t.table_search.paging_index=1,t.isSearchAdvanced=!1,this.setState({tab_search:t},(()=>{0===i.length&&s.ZP.showToast("Data not found")}))}}))},this.onSearchAdvanced=()=>{let{tab_search:t}=this.state;this.search_page_index=1;let e=(0,Y.FT)(t.advanced_search.open_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),i=(0,Y.FT)(t.advanced_search.open_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),o=(0,Y.FT)(t.advanced_search.last_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),a=(0,Y.FT)(t.advanced_search.last_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),n=(0,Y.FT)(t.advanced_search.expire_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),r=(0,Y.FT)(t.advanced_search.expire_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]");this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_ADSEARCH_MEDIA",api_data:{customer_code:t.advanced_search.customer_code.value,account_number:t.advanced_search.account_number.value,business_line:t.advanced_search.business_line.value,customer_name:t.advanced_search.customer_name.value,media_name:t.advanced_search.media_name.value,status:t.advanced_search.status.value,open_date_from:"Invalid date"===e||""===e?null:e,open_date_to:"Invalid date"===i||""===i?null:i,last_date_from:"Invalid date"===o||""===o?null:o,last_date_to:"Invalid date"===a||""===a?null:a,expire_date_from:"Invalid date"===n||""===n?null:n,expire_date_to:"Invalid date"===r||""===r?null:r,page_size:t.table_search.page_size,page_index:this.search_page_index-1}}).then((e=>{let i=[];if(e.hasError)s.ZP.showToast(e.error_data[0].info,!1);else{i=e.items;for(let t of i){var o,a,n;t.media_status=(null===(o=this.OWN_CDLIST.STS[t.media_status])||void 0===o?void 0:o.caption)||t.media_status,t.reference_type=(null===(a=this.OWN_CDLIST.TYPE[t.reference_type])||void 0===a?void 0:a.caption)||t.reference_type,t.infor1=(null===(n=this.OWN_CDLIST.CATEGORIES[t.infor1])||void 0===n?void 0:n.caption)||t.infor1}t.table_search.data=i,t.table_search.result_total=(null===e||void 0===e?void 0:e.total_count)||0,t.table_search.paging_index=1,t.isSearchAdvanced=!0,this.setState({tab_search:t},(()=>{0===i.length&&s.ZP.showToast("Data not found")}))}}))},this.changeKeyLanguage=t=>{let e={title_:s.ZP.getLang("customerMediaFiles_title"),des_:s.ZP.getLang("customerMediaFiles_des"),btn_search:s.ZP.getLang("customerMediaFiles_btnSearch"),btn_view:s.ZP.getLang("customerMediaFiles_btnView"),btn_modify:s.ZP.getLang("customerMediaFiles_btnModify"),btn_delete:s.ZP.getLang("customerMediaFiles_btnDelete"),btn_save:s.ZP.getLang("customerMediaFiles_btnSave"),btn_import:s.ZP.getLang("customerMediaFiles_btnImport"),btn_approve:s.ZP.getLang("customerMediaFiles_btnApprove"),customer_code:s.ZP.getLang("customerMediaFiles_ctmCode"),customer_type:s.ZP.getLang("customerMediaFiles_ctmType"),media_name:s.ZP.getLang("customerMediaFiles_mediaName"),status:s.ZP.getLang("customerMediaFiles_status"),media_type:s.ZP.getLang("customerMediaFiles_mediaType"),open_date:s.ZP.getLang("customerMediaFiles_openDate"),last_date:s.ZP.getLang("customerMediaFiles_lastDate"),expire_date:s.ZP.getLang("customerMediaFiles_expireDate"),other:s.ZP.getLang("customerMediaFiles_accountNumber"),code:s.ZP.getLang("customerMediaFiles_code"),reference_type:s.ZP.getLang("customerMediaFiles_refType"),get_info:s.ZP.getLang("customerMediaFiles_getInfo"),customer_info:s.ZP.getLang("customerMediaFiles_ctmInfo"),full_name:s.ZP.getLang("customerMediaFiles_fullName"),DOB:s.ZP.getLang("customerMediaFiles_DOB"),address:s.ZP.getLang("customerMediaFiles_address"),identification:s.ZP.getLang("customerMediaFiles_identification"),form_btn_close:s.ZP.getLang("form_close_title"),form_btn_add:s.ZP.getLang("form_add_title")};if(void 0!==t)return e;let i=this.state.infoA;i.title=s.ZP.getLang("customerMediaFiles_title"),i.des=s.ZP.getLang("customerMediaFiles_des"),i.lang_form.vi=s.ZP.getLang("customerMediaFiles_title"),i.lang_form.en=s.ZP.getLang("customerMediaFiles_title"),this.setState({languages:e,infoA:i})},this.abs_autoCallBackData=()=>{this.setState({record_index:this.state.record_index+5})},this.pushNotification=function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i={},o=s.ZP.getLang(t);i={class_:!0===e?"success":"error",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}},s.ZP.pushNotify("notifyToast",i,{}),s.ZP.pushNotify("notifyDefault",i,{}),s.ZP.callAllScreenListen()},this.handleImageChange=t=>{t.preventDefault();let e=new FileReader,i=t.target.files[0];e.onloadend=()=>{let{tab_import:t}=this.state;t.data_import.file=i,t.data_import.fileName=i.name,t.data_import.fileType=i.type,t.data_import.img=e.result,t.isImported=!0,t.data_import.att_content="",t.data_import.link_img="img"===this.getFileType(i.type,i.name)?e.result:"../rs/global/img/file_icon.svg",t.data_import.content_img="img"===this.getFileType(i.type,i.name)?"":e.result.split(",")[1],t.data_import.file_type=this.getFileType(i.type,i.name),t.data_import.title_img=i.name,this.setState({tab_import:t})};let o=s.ZP.getParameterSystem("MEDIA_UPLOAD_MAX_SIZE")||5;void 0!==i&&null!==i&&i.size/1024/1024<o&&e.readAsDataURL(i)},this.clickTabHandler=(t,e)=>{this.setState({tab_active:e})},this.onClickApproved=(t,e)=>{let{tab_view:i}=this.state;void 0!==i.data_view.id&&"N"===i.data_view.media_status&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_APPROVE_MEDIA",api_data:{id:i.data_view.id}}).then((t=>{t&&!t.hasError?(s.ZP.showToast("Approve ",!0),this.setState({isApprove:!0})):s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1)}))},this.onClickModify=()=>{let{tab_view:t}=this.state;t.expire_date.CMD.disabled=!1,t.other.CMD.disabled=!1,this.setState({isClickModify:!0,isApprove:!0,tab_view:t},(()=>{}))},this.onClickSave=()=>{if(void 0!==this.state.tab_view.isHasData){let{tab_view:t}=this.state,e=(0,Y.FT)(t.expire_date.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),i={media_id:t.data_view.id,expire_date:"Invalid date"===e||""===e?null:e,other:t.other.value,infor1:t.infor1.value,infor2:t.infor2.value};this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_UPDATE_MEDIA",api_data:(0,u.Z)({},i)}).then((t=>{if(t&&!t.hasError){let{tab_view:t}=this.state;t.expire_date.CMD.disabled=!0,t.other.CMD.disabled=!0,s.ZP.showToast("Save",!0),this.setState({isClickModify:!1,isApprove:!1,tab_view:t},(()=>{}))}else s.ZP.showToast("Save",!1)}))}},this.onInputChangeValue=(t,e)=>{let i=t.target.value;if(this.state.tab_active===this.tabIds.import){let{tab_import:o}=this.state;if("code"===e&&(i=i.replace(/\D/g,""),i=i.substring(0,this.customerCdFormat.length),i===o[e].value||""===i))return!1;o[e].value=t.target.value,this.setState({tab_import:o})}else if(this.state.tab_active===this.tabIds.viewModify){let{tab_view:t}=this.state;t[e].value=i,this.setState({tab_view:t})}else{let{tab_search:t}=this.state;t.advanced_search[e].value=i,this.setState({tab_search:t})}},this.onChangeValueSelect=(t,e,i)=>{if(this.state.tab_active===this.tabIds.import){let{tab_import:e}=this.state;e[i].value=t,this.setState({tab_import:e})}else if(this.state.tab_active===this.tabIds.viewModify){let{tab_view:e}=this.state;e[i].value=t,this.setState({tab_view:e})}else{let{tab_search:e}=this.state;e.advanced_search[i].value=t,this.setState({tab_search:e})}},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;e.setState({isLoading:!0});var n=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t,number_of_step:a}}];return n[0].input=Object.assign(n[0].input,i),(0,F.Yr)(n,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onBlurGetInfoCustomer=(t,e)=>{let i={};if("tab_import"===this.state.tab_active){i={customer_code:this.state.tab_import.customer_code.value};let t=this.state.tab_import;this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CTM_GET_INFO_RULEFUNC",api_data:(0,u.Z)({},i)},"data_api",1).then((e=>{void 0===e||e.hasError||(t.infor1.value=e.categories,t.infor2.value=e.fullname),this.setState({tab_import:t})}))}},this.onClickGetInfo=(t,e)=>{let i={};i="tab_import"===e.tab_select?{customer_code:this.state.tab_import.customer_code.value,other:this.state.tab_import.other.value,reference_type:this.state.tab_import.reference_type.value}:{customer_code:this.state.tab_view.customer_code.value,other:this.state.tab_view.other.value,reference_type:this.state.tab_view.reference_type.value},this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_GETINFO_MEDIA",api_data:(0,u.Z)({page_size:0,page_index:0},i)}).then((t=>{if(void 0!==t&&void 0!==t.items){let e={};e={media:[...t.items],customerType:i.reference_type}||{},this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_GETINFO2_MEDIA",api_data:(0,u.Z)({},i)}).then((t=>{void 0===t||t.hasError||(e.info=t),this.setState({O9_media_get_information:e,openModal:!0})}))}}))},this.onSaveImportFile=()=>{let{tab_import:t}=this.state;this.setState({isLoading:!0});const e="Import file";if(t.isImported&&""!==t.customer_code.value){let i=(0,Y.FT)(t.expire_date.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),o={customer_code:t.customer_code.value.replace(/-/g,""),open_date:this.user_info.working_date,expire_date:"Invalid date"===i||""===i?"":i,media_name:t.data_import.fileName,media_type:this.getFileType(t.data_import.fileType,t.data_import.fileName),reference_type:t.reference_type.value,other:t.other.value.replace(/-/g,""),last_update_date:this.user_info.working_date,media_status:"N",infor1:t.infor1.value,infor2:t.infor2.value};t.btn_save.disable=!0,this.setState({tab_import:t});let a={infoA:{form_code:this.key_form},componentConfigDefault:{codeHidden:this.state.role_action.save_codeHidden}};(0,F.bq)(t.data_import.file,t.data_import.fileName,a).then((i=>{this.callAPI("media_file_import_save",o).then((i=>{t.btn_save.disable=!1,i.hasError?s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1):(s.ZP.showToast(e,!0),t.isImported=!1,t.customer_code.value="",t.reference_type.value="C",t.expire_date.value="",t.other.value="",t.data_import={att_content:"No file choose"}),this.setState({tab_import:t})})).catch((t=>{s.ZP.isDebug()&&console.log("err",t),s.ZP.showToast(e,!1)}))}),(t=>{this.setState({isLoading:!1}),t.statusCode&&t.statusText?s.ZP.showToast(t.statusCode+":"+t.statusText+"#"+e,!1):s.ZP.showToast(e,!1)}))}else s.ZP.showToast(e,!1);this.setState({isLoading:!1})},this.removeItemTable=t=>{let e={title:s.ZP.getLang("sysConfirmDelTitle"),content:s.ZP.getLang("sysConfirmDelContent")};s.ZP.confirmInfo(e,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],void 0,(e=>{e&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_DELETE_MEDIA",api_data:{id:t.id}}).then((t=>{t?(s.ZP.showToast("Delete",!0),this.onSearch()):s.ZP.showToast("Delete",!1)}))}))},this.pageIndexChange=t=>{this.setState({page_index:t})},this.pageRecordChange=t=>{this.setState({record_index:this.record[t],page_index:1})},this.getInfoMedia=t=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_VIEW_MEDIA",api_data:{id:t.id}}).then((async t=>{if(t){let e=t,{tab_view:i}=this.state;i.data_view.id=e.id,i.customer_code.value=e.customer_code,i.reference_type.value=e.reference_type,i.expire_date.value=(0,Y.xY)(e.expire_date+"Z"),i.expire_date.CMD.disabled=!0,i.other.value=e.other,i.other.CMD.disabled=!0,i.other.value=e.other,i.data_view.media_type=e.media_type,i.data_view.media_status=e.media_status,i.data_view.media_data=e.media_data,i.data_view.media_title=e.media_name,i.infor1.value=e.infor1,i.infor2.value=e.infor2,i.isHasData=!0,this.setState({tab_active:this.tabIds.viewModify,tab_view:i,isClickModify:!1,isApprove:!1})}}))},this.closeModal=()=>{this.setState({openModal:!1})},this.printVoucher=()=>{},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.getRoleAction=(t,e)=>{let i=(0,s._M)(),o={};const a=e.list_layout;for(const s of i)for(const e of a)for(const i of e.list_view)for(const e of i.list_input){let i=e.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=t[s])||void 0===n||null===(r=n[e.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a,void 0!==e.default.codeHidden&&(o[i+"_codeHidden"]=e.default.codeHidden)}}return o};let o=this.changeKeyLanguage("start");this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT"),this.customerCdFormat=s.ZP.getParameterSystem("MASK_CUSTOMERCD"),this.customerCdFormat=s.ZP.getParameterSystem("MASK_CUSTOMERCD"),this.accountNumberFormat=s.ZP.getParameterSystem("MEDIA_ACCOUNT_NUMBER"),this.key_form="BO_003005",this.MediaFileForm=(0,_.Iq)("Ncbs_FormMedia"),this.branch_user_id=(null===(i=s.ZP.context_get("user_acc"))||void 0===i?void 0:i.branchid)||-1,this.search_page_index=1,this.record=[5,10,15,20,50],this.tabIds={search:"tab_search",import:"tab_import",viewModify:"tab_view"},this.prefixImage="data:image/png;base64,",this.referenceTypeData=[{title:"Single customer",value:"C"}],this.businessLineTypeData=[],this.businessLineAdvancedTypeData=[{title:"All",value:""}],this.statusData=[{title:"All",value:""},{title:"New",value:"N"},{title:"Approved",value:"A"}],this.user_info=s.ZP.context_get("user_acc"),this.logicViewModifyExpiredDate=new mt({abs_update:this.absViewModifyExpire,name:"Expire Date",code:"expireDate",mask_format:this.dateFormat,mask_mode:"date",class:"col-md-12"}),this.logicImportExpiredDate=new mt({abs_update:this.absImportExpire,name:"Expire Date",code:"expireDate",mask_format:this.dateFormat,mask_mode:"date",class:"col-md-12"}),this.logicImportCode=new mt({abs_update:this.absImportCode,abs_Blur:this.onBlurGetInfoCustomer,name:"Code",code:"code",mask_format:this.customerCdFormat,mask_mode:"default",value_type:"number",class:"col-md-12"}),this.logicImportAccountNumber=new mt({abs_update:this.absImportAccountNumber,name:"Account Number",code:"other",mask_format:this.accountNumberFormat,mask_mode:"default",value_type:"number",class:"col-md-12"}),this.logicViewModifyAccountNumber=new mt({abs_update:this.absViewModifyAccountNumber,name:"Account Number",code:"other",mask_format:this.accountNumberFormat,mask_mode:"default",class:"col-md-12",value_type:"number"}),this.state={isLoading:!1,isApprove:!1,openModal:!1,visibility:"",data:this.props.data||[],languages:o,tab_active:this.tabIds.search,file:"",infoA:{lang_form:{vi:s.ZP.getLang("customerMediaFiles_title"),en:s.ZP.getLang("customerMediaFiles_title")},title:"CTM-Customer media files",des:"CTM-Customer media files",openOne:"true",form_code:this.key_form,ofModal:!1},O9_media_get_information:void 0,page_index:1,record_index:this.record[0],isClickModify:!1,tab_search:{search_text:{value:""},table_search:{paging_index:1,result_total:0,data:[],page_size:5},isSearchAdvanced:!1,advanced_search:{customer_code:{value:""},account_number:{value:""},business_line:{value:""},customer_name:{value:""},media_name:{value:""},status:{value:""},open_date_from:{value:""},open_date_to:{value:""},last_date_from:{value:""},last_date_to:{value:""},expire_date_from:{value:""},expire_date_to:{value:""}}},tab_import:{isImported:!1,data_import:{att_content:"No file choose"},customer_code:{value:"",CMD:{disabled:!1}},other:{value:"",CMD:{disabled:!1}},reference_type:{value:"C"},expire_date:{value:"",CMD:{disabled:!1}},infor1:{value:"XX"},infor2:{value:""},btn_save:{disable:!1}},tab_view:{data_view:{att_content:"No file choose"},customer_code:{value:""},other:{value:"",CMD:{disabled:!0}},reference_type:{value:"C"},infor1:{value:"XX"},infor2:{value:""},expire_date:{value:"",CMD:{disabled:!0}}}},this.isDisableSaveButton=!1}getImportDataFileConfig(){var t;let e="";return e=void 0!==s.ZP.getParameterSystem("MEDIA_UPLOAD_FILE_TYPE")?s.ZP.getParameterSystem("MEDIA_UPLOAD_FILE_TYPE"):".jpg, .jpeg, .gif, .bmp, .png, .pdf, .doc, .docx, .xls, .xlsx, .txt, .text, .mp3, .wav, .avi",{file:{dataFull:{config:{default:{title:"Choose file or drop file in here",att_content:this.state.tab_import.data_import.att_content,accept:e}},abs_Change:this.handleImageChange},handleImageChange:this.handleImageChange},img_form:{link:this.state.tab_import.data_import.link_img,title:this.state.tab_import.data_import.title_img,content:this.state.tab_import.data_import.content_img,file_type:this.state.tab_import.data_import.file_type},code:{dataFull:this.logicImportCode.getDataFullLogic()},code_DOM:(0,c.jsx)(_e,{abs_update:t=>{this.changeValueMask("import_tab","customer_code",t.value)},abs_Blur:this.onBlurGetInfoCustomer,name:"Code",code:"code",mask_format:this.customerCdFormat,mask_mode:"default",class:"col-md-12",CMD:this.state.tab_import.customer_code.CMD,value:this.state.tab_import.customer_code.value}),reference_type:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Reference Type",type:"text",class:"col-md-12",code_form_component:"reference_type"},cmd:{disable:!0,visible:!1,error:{message:"",type:""}}},data:this.getReferenceTypeData(this.state.tab_import.reference_type.value||this.referenceTypeData[0].value)},abs_Change:this.onChangeValueSelect},infor1:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-md-12",code_form_component:"infor1"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:this.getBusinessLineTypeData(this.state.tab_import.infor1.value||(null===(t=this.businessLineTypeData[0])||void 0===t?void 0:t.value))},abs_Change:this.onChangeValueSelect},infor2:{dataFull:{config:{default:{title:"Customer Name",type:"text",class:"col-md-12",code_form_component:"infor2"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:this.state.tab_import.infor2.value},abs_Change:this.onInputChangeValue},expireDate_DOM:(0,c.jsx)(_e,{abs_update:t=>{this.changeValueMask("import_tab","expire_date",t.value)},name:"Expire Date",code:"expireDate",mask_format:this.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-md-12",CMD:this.state.tab_import.expire_date.CMD,value:this.state.tab_import.expire_date.value}),expireDate:{dataFull:this.logicImportExpiredDate.getDataFullLogic()},other:{dataFull:this.logicImportAccountNumber.getDataFullLogic()},other_DOM:(0,c.jsx)(_e,{abs_update:t=>{this.changeValueMask("import_tab","other",t.value)},name:"Account Number",code:"other",mask_format:this.accountNumberFormat,mask_mode:"default",class:"col-md-12",CMD:this.state.tab_import.other.CMD,value:this.state.tab_import.other.value}),getInfo:{dataFull:{config:{default:{title:"Get information",type:"default",class:""}},dataItem:{tab_select:"tab_import"}},abs_Click:this.onClickGetInfo},saveForm:{dataFull:{config:{default:{title:"Save",type:"submit",class:""},cmd:{disable:this.state.tab_import.btn_save.disable}}},abs_Click:this.onSaveImportFile}}}getReferenceTypeData(t){return this.referenceTypeData.map(((e,i)=>(0,u.Z)((0,u.Z)({},e),{},{selected:e.value===t})))}getBusinessLineTypeData(t){return this.businessLineTypeData.map(((e,i)=>(0,u.Z)((0,u.Z)({},e),{},{selected:e.value===t})))}getListDataSelect(t,e){return t.map(((t,i)=>(0,u.Z)((0,u.Z)({},t),{},{selected:t.value===e})))}getTableConfig(){return[{type:"uTableColumnButtonHover"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}getHeaderConfig(){return{dataFull:{Header:{data:[{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"Customer code",config:{width:"",isFrozen:!1}},{title:"Account Number",config:{width:"",isFrozen:!1}},{title:"Business line",config:{width:"",isFrozen:!1}},{title:"Customer name",config:{width:"",isFrozen:!1}},{title:"Media name",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Media type",config:{width:"",isFrozen:!1}},{title:"Open date",config:{width:"",isFrozen:!1}},{title:"Last date",config:{width:"",isFrozen:!1}},{title:"Expire date",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}},uPagination:{number_show:0,result_total:this.state.tab_search.table_search.result_total,paging_index:this.state.tab_search.table_search.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPageConfig(this.state.tab_search.table_search.page_size),abs_PagingActive:t=>{this.pageChangeRoleSearch(t)},abs_setRecordActive:this.pageRecordChangeRoleSearch}}}}getDataTableConfig(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=(null===(t=this.state)||void 0===t?void 0:t.role_action)||{};return e.map((t=>{let e=[];return i["get information"]&&e.push({icon_item:"fa-eye",title:"View",dataItem:t,abs_Click:this.getInfoMedia}),i.delete&&e.push({icon_item:"fa-trash-o",title:"Delete",dataItem:t,abs_Click:this.removeItemTable}),0===e.length&&e.push({icon_item:"more_horiz",title:""}),{data:[{dataFull:{icon:"three-dot"},data:e},{data:(0,Y.Ui)(t.customer_code,this.customerCdFormat),tooltip_copy:{icon:"copy",title:s.ZP.getLang("btn_copy")},abs_Copy:()=>{s.ZP.copyToClipboard(t.customer_code)}},{data:(0,Y.Ui)(t.other,this.accountNumberFormat)},{data:t.infor1},{data:t.infor2},{data:t.media_name},{data:t.media_status},{data:t.media_type},{data:t.open_date?(0,Y.X2)(new Date(t.open_date).getTime(),this.dateFormat):t.open_date},{data:t.last_update_date?(0,Y.X2)(new Date(t.last_update_date).getTime(),this.dateFormat):t.last_update_date},{data:t.expire_date?(0,Y.X2)(new Date(t.expire_date).getTime(),this.dateFormat):t.expire_date}],dataItem:t}}))}getImageTemplate(t){return void 0!==t&&null!==t&&this.isImage(t)?`${this.prefixImage}${t}`:"../rs/global/img/file_icon.svg"}getRecordPageConfig(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return this.record.map((e=>({number:e,selected:t===e})))}getDataPaging(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=[],a=parseInt(e)*(i-1),s=a+parseInt(e)-1;for(let n=a;n<=s;n++)void 0!==t[n]&&o.push(t[n]);return o}getFileType(t,e){if("application/pdf"===t)return"pdf";if("text/plain"===t)return"text";if(/image.*/.test(t))return"img";let i=e.split(".");return"xlsx"===i[i.length-1]||"xls"===i[i.length-1]?"excel":i[i.length-1]}isImage(t){let e=!1;try{e=btoa(atob(t))===t&&"/iR".includes(t[0])}catch(i){}return e}render(){const t=this.MediaFileForm;return(0,c.jsx)(o.Fragment,{children:(0,c.jsxs)("div",{style:{display:this.state.visibility},children:[this.state.openModal&&(0,c.jsx)(Ht,{data:this.state.O9_media_get_information,businessLineTypeData:this.businessLineTypeData,closeModal:this.closeModal}),(0,c.jsx)(t,(0,u.Z)({},this.getDefaultPropsTemplate()))]})})}componentDidMount(){this.setState({isLoading:!0});(0,F.Yr)([{txcode:"bo-get-cdlistMediaFile",input:{}}],{}).then((t=>{let e=s.ZP.foGetData("data",t);this.OWN_CDLIST={STS:{},TYPE:{},CATEGORIES:{}};for(const i of e)"MEDIASTS"===i.cdname?this.OWN_CDLIST.STS[i.cdid]=i:"CTMTYPE"===i.cdname?(this.OWN_CDLIST.TYPE[i.cdid]=i,this.referenceTypeData.push({title:i.caption,value:i.cdid})):"CATEGORIES"===i.cdname&&(this.OWN_CDLIST.CATEGORIES[i.cdid]=i,this.businessLineTypeData.push({title:i.caption,value:i.cdid}),"XX"!==i.cdid&&this.businessLineAdvancedTypeData.push({title:i.caption,value:i.cdid}));(0,F.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((t=>{var e=s.ZP.foGetData("form_design_detail",t);void 0===e&&(e={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",t)||{};void 0===i&&(i={});let o=this.getRoleAction(i,e);this.setState({isLoading:!1,role_action:o},(()=>{}))}))})),s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key)}}const ge=fe;let me;class ve extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.getDataBranch=()=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CSH_CASHFLOW_GETINFO",number_of_step:1,api_data:{user_code_cash_flow:this.user_profile.user_code}}).then((t=>{if(t&&!t.hasError){let e=[];e=t.branchs.filter((t=>t.branch_code===this.user_profile.branch_code)),this.setState({branchs:e})}else this.setState({branchs:[]})}))},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a,n=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return n[0].input=Object.assign(n[0].input,i),(0,F.Yr)(n,{}).then((t=>a=s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).catch((t=>{console.log(t)})).finally((t=>{e.setState({isLoading:!1},(()=>{if(a&&a.hasError){var t="";a.error_data.map((e=>t+=(s.ZP.isDebug()&&e.code?e.code+": ":"")+e.info)),s.ZP.showToast(t,!1)}}))}))},this.closeForm=()=>{s.ZP.removeForm(this.key_form)},this.clickLevel1=(t,e)=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CSH_CASHFLOW_BRANCH",api_data:{branch_code:e.dataItem.id},number_of_step:1}).then((t=>{let e=[];t&&!t.hasError&&(e=t.branch_cash_data),this.setState({table:e})}))},this.clickLevel2=(t,e)=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CSH_CASHFLOW_DEPARTMENT",number_of_step:1,api_data:{department_code:e.dataItem.id}}).then((t=>{let e=[];t&&!t.hasError&&(e=t.department_cash_data),this.setState({table:e})}))},this.clickLevel3=(t,e)=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CSH_CASHFLOW_USER",number_of_step:1,api_data:{user_code_cash_flow:e.dataItem.id}}).then((t=>{let e=[];t&&!t.hasError&&(e=t.user_cash_data),this.setState({table:e})}))},me=(0,_.Iq)("O9_CashFlow"),this.key_form="BO_011001",this.stateData=this.getDataForm(),this.state={visibility:"",data:this.props.data,infoA:{title:s.ZP.getLang("011001_title"),des:s.ZP.getLang("011001_title"),openOne:"true",ofModal:!1},isLoading:!1,branchs:[],table:[]},this.user_profile=s.ZP.context_get("user_acc")}componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.getDataBranch()}convertCurrency(t){let e=Number(t);return Number.isNaN(e)?t:t.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}getDataForm(){var t;return{form:{dataFull:{config:{default:{title:s.ZP.getLang("011001_title")}},title_button:{close_button:s.ZP.getLang("form_close_title"),add_form:s.ZP.getLang("form_add_title")},cmd:{visibility:"",isLoading:(null===(t=this.state)||void 0===t?void 0:t.isLoading)||!1},abs_Close:this.closeForm,abs_AddMenuBar:this.addMenu}},tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},table:{dataFull:{Header:{data:[{title:"Currency",config:{width:"",isFrozen:!1}},{title:"Opening balance",config:{width:"",isFrozen:!1}},{title:"Internal In",config:{width:"",isFrozen:!1}},{title:"Customer deposit",config:{width:"",isFrozen:!1}},{title:"Total In",config:{width:"",isFrozen:!1}},{title:"Internal Out",config:{width:"",isFrozen:!1}},{title:"Customer withdrawal",config:{width:"",isFrozen:!1}},{title:"Total out",config:{width:"",isFrozen:!1}},{title:"Closing balance",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]}}getTreeData(t){let e=[];return t.forEach((t=>{let i={title:`${t.branch_code} - ${t.branch_name}`,parent_id:"0",is_open:!1,DOM_elm:null,tree_id:t.branch_code+"lv1",id:t.branch_code+"lv1",dataItem:{id:t.branch_code},abs_click:this.clickLevel1};e.push(i),t.departments&&t.departments.forEach((i=>{let o={title:`${i.department_code} - ${i.department_name}`,parent_id:t.branch_code+"lv1",is_open:!1,DOM_elm:null,tree_id:i.department_code+"lv2",id:i.department_code+"lv2",dataItem:{id:i.department_code},abs_click:this.clickLevel2};e.push(o),i.cashier_accounts&&i.cashier_accounts.forEach((t=>{let o={title:`${t.user_code} - ${t.login_name}`,parent_id:i.department_code+"lv2",is_open:!1,DOM_elm:null,id:t.user_code+"lv3",tree_id:t.user_code+"lv3",dataItem:{id:t.user_code,user_code:t.user_code},abs_click:this.clickLevel3};e.push(o)}))}))})),e}getTableData(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((t=>[{data:t.currency},{data:this.convertCurrency(t.opening_balance)},{data:this.convertCurrency(t.internal_in)},{data:this.convertCurrency(t.customer_deposit)},{data:this.convertCurrency(t.total_in)},{data:this.convertCurrency(t.internal_out)},{data:this.convertCurrency(t.customer_withdrawal)},{data:this.convertCurrency(t.total_out)},{data:this.convertCurrency(t.closing_balance)}]))}UNSAFE_componentWillUpdate(t,e){this.stateData.tree_data.tree_data=this.getTreeData(e.branchs),this.stateData.table_data=this.getTableData(e.table),this.stateData.form.dataFull.cmd.isLoading=e.isLoading}render(){return(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(me,{stateData:this.stateData})})}}const be=ve;let ye;class Ae extends o.Component{constructor(t){super(t),this.handleSelectTabID=t=>{this.setState({menu_select:t})},this.handelSearchInvokeLimit=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",a=this.state.invoke_limit_search_value;a[e]=o,this.setState({invoke_limit_search_value:a})},this.handelSearchApproveLimit=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",a=this.state.approve_limit_search_value;a[e]=o,this.setState({approve_limit_search_value:a})},this.handelChangeSearch=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",a=this.state.Col3_Assignment_Search;switch(a[e]=o,e){case"TBL_USER_CODE":this.stateData.column3.table_left.dataFull.Header.data[2].value_search=o;break;case"TBL_USER_NAME":this.stateData.column3.table_left.dataFull.Header.data[3].value_search=o;break;case"TBR_USER_CODE":this.stateData.column3.table_right.dataFull.Header.data[2].value_search=o;break;case"TBR_USER_NAME":this.stateData.column3.table_right.dataFull.Header.data[3].value_search=o}this.setState({Col3_Assignment_Search:a})},this.handelClearSearch=()=>{},this.getTableHeader=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return e.push({title:"Group",code:"module"}),e.push({title:"Caption",code:"tranname"}),t.forEach((t=>{e.push({title:t,code:t})})),e},this.abs_role_name_copying_select=(t,e,i)=>{this.setState({role_name_copying_selected:t.roleid,column2_role_select:t})},this.abs_Ckeck_invoke_approve_verification=(t,e)=>{this.callAPI("O9_Roles_Invoke_approve_Table_Change_save_approve",{roleid:t.roleid,data:[{roleid:t.roleid,cmdid:t.parentid,cmdiddt:t.cmdiddt,invoke:!1===e?1:0}]}).then((t=>{let e=t.O9_Roles_Invoke_approve_Table_Change_save_approve;this.reloadTableWithMenuInvokeApprove(),1===e[0].type?s.ZP.showToast("Save",!0):s.ZP.showToast("Save",!1)}))},this.abs_Ckeck_invoke_approve_operation=(t,e)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let i=this.state.menu_invoke_aprrove.filter((e=>e.parentid===t.parentid));this.callAPI("O9_Roles_Invoke_approve_Table_Change_save",{roleid:t.roleid,data:[{roleid:t.roleid,cmdid:t.parentid,cmdiddt:t.cmdiddt,invoke:!1===e?1:0}]}).then((o=>{let a=o.O9_Roles_Invoke_approve_Table_Change_save;if(this.reloadTableWithMenuInvokeApprove(!0),1===a[0].type){var n=[{txcode:"bo-update-roleBO-JWEBUI",input:{roleid:t.roleid,cmdid:t.parentid,cmdiddt:t.cmdiddt,invoke:!1===e?1:0,menu_child:i}}];return(0,F.Yr)(n,{}).then((t=>{s.ZP.showToast("Save",!0),this.setState({isLoading:!1})}))}s.ZP.showToast(a[0].message,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.UNSAFE_componentWillUpdate=(t,e)=>{var i,o,a;let n=e.role_action||{};this.stateData.tab.data=this.stateData.tab.data.map((t=>(t.isShow=t.id===e.menu_select,t))),this.stateData.column3.table_in_role_data=e.table_user_profile_user_in_role.map((t=>({config:{value:!1},data:[{data:t.rolename},{data:t.user_code},{data:t.usrname}]}))),this.stateData.column1.tree_data.tree_data=null===(i=e.menu_invoke_aprrove)||void 0===i?void 0:i.map((t=>({title:t.caption,parent_id:t.parentid,is_open:!1,DOM_elm:null,id:t.cmdid,dataItem:t,abs_click:this.onClickTreeMenuInvokeApprove}))),this.stateData.column1.table_up.dataFull.Header.data=e.O9_Roles_InvokeApprove_Table_header.map((t=>({title:t.caption,config:{width:"",isFrozen:!1}}))),this.stateData.column1.table_down.dataFull.Header.data=s.ZP.cloneJson(this.stateData.column1.table_up.dataFull.Header.data),this.stateData.column1.table_down.dataFull.Header.data[1]&&(this.stateData.column1.table_down.dataFull.Header.data[1].title="Self Approve");let r=e.O9_Roles_InvokeApprove_Table_header;this.stateData.column1.table_up_config=r.map(((t,e)=>0===e?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:"uTableColumnCheckbox",config:{cmd:{disable:!1===n.save}}})),this.stateData.column1.table_down_config=this.stateData.column1.table_up_config;let l=e.O9_Roles_InvokeApprove_Table_body;this.stateData.column1.table_up_data=[],this.stateData.column1.table_down_data=[];for(let s=0;s<l.length;s++){let t=r.length-1,e=[],i=[];for(let o=0;o<t;o++)0===o&&(e.push({data:l[s+o].rolename}),i.push({data:l[s+o].rolename})),e.push({value:1===l[s+o].invoke,dataItem:l[s+o],abs_Click:this.abs_Ckeck_invoke_approve_operation}),i.push({value:1===l[s+o].approve,dataItem:l[s+o],abs_Click:this.abs_Ckeck_invoke_approve_verification});this.stateData.column1.table_up_data.push(e),this.stateData.column1.table_down_data.push(i),s=s+t-1}if(this.stateData.column2.role_name_adding.dataFull.config.cmd.disable=!0!==e.addAndRemove_btnAddClick,this.stateData.column2.listButton[2].dataFull.config.cmd.disable=!0===e.addAndRemove_btnSaveClick,this.stateData.column2.role_name_copying.dataFull.search_value=e["column2.role_name_copying"],this.stateData.column2.listButton[0].dataFull.config.cmd.visible=!1!==n.save,this.stateData.column2.listButton[2].dataFull.config.cmd.visible=!1!==n.save,this.stateData.column2.listButton[1].dataFull.config.cmd.visible=!1!==n.delete,this.stateData.column3.next.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.next_all.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.preview.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.preview_all.dataFull.config.cmd.disable=!1===n.save,!e.role_name_copying_selected&&e.O9_Roles_Add_and_Remove_Role_Name.length>0)this.setState({role_name_copying_selected:e.O9_Roles_Add_and_Remove_Role_Name[0].roleid});else{var c;this.stateData.column2.role_name_copying.dataFull.input_value=null===(c=e.column2_role_select)||void 0===c?void 0:c.rolename;let t=e.O9_Roles_Add_and_Remove_Role_Name.filter((t=>(t.rolename||"").toLowerCase().includes(e["column2.role_name_copying"].toLowerCase())));this.stateData.column2.role_name_copying.dataFull.data=t.map(((t,i)=>{let o=!1;return t.roleid===e.role_name_copying_selected&&(o=!0),{title:t.rolename,value:t,selected:o}}))}this.stateData.column2.role_name_adding.dataFull.value=e.role_name_adding_input;let d=this.unCheck_user_assign_table_left,h=this.unCheck_user_assign_table_right;!0===this.unCheck_user_assign_table_left&&(this.unCheck_user_assign_table_left=!1),!0===this.unCheck_user_assign_table_right&&(this.unCheck_user_assign_table_right=!1),this.stateData.column3.table_left_data=e.O9_Roles_User_assignment_table_left.filter((t=>t.user_code.includes(e.Col3_Assignment_Search.TBL_USER_CODE||"")&&t.usrname.includes(e.Col3_Assignment_Search.TBL_USER_NAME||""))).map(((t,e)=>{var i,o,a;return{data:[{data:e+1},{value:!0!==d&&((null===(i=this.stateData.column3.table_left_data[e])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_left,dataItem:{value:t,index:e}},{data:t.user_code},{data:t.usrname}],config:{value:!1}}})),this.stateData.column3.table_right_data=e.O9_Roles_User_assignment_table_right.filter((t=>t.user_code.includes(e.Col3_Assignment_Search.TBR_USER_CODE||"")&&t.usrname.includes(e.Col3_Assignment_Search.TBR_USER_NAME||""))).map(((t,e)=>{var i,o,a;return{data:[{data:e+1},{value:!0!==h&&((null===(i=this.stateData.column3.table_right_data[e])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_right,dataItem:{value:t,index:e}},{data:t.user_code},{data:t.usrname}],config:{value:!1}}})),this.stateData.column3.role_choose_left.dataFull.data=[],this.stateData.column3.role_choose_left.dataFull.search_value=e["column3.role_choose_left"],this.stateData.column3.role_choose_left.dataFull.input_value=null===(o=e.column3_role_left_select)||void 0===o?void 0:o.rolename,e.O9_RolesUser_assignment_Role_Name_Left.filter((t=>null!==t.rolename&&t.rolename.toLowerCase().includes(e["column3.role_choose_left"].toLowerCase()))).forEach(((t,i)=>{let o=!1;(e.column3_role_left_select.roleid===t.roleid||0===i&&void 0===e.column3_role_left_select.roleid)&&(o=!0),this.stateData.column3.role_choose_left.dataFull.data.push({title:t.rolename,value:{id:t.roleid,item:t,type:"left"},selected:o})})),this.stateData.column3.role_choose_right.dataFull.search_value=e["column3.role_choose_right"],this.stateData.column3.role_choose_right.dataFull.input_value=null===(a=e.column3_role_right_select)||void 0===a?void 0:a.rolename;let u=e.O9_RolesUser_assignment_Role_Name_Right.filter((t=>null!==t.rolename&&t.rolename.toLowerCase().includes(e["column3.role_choose_right"].toLowerCase())));this.stateData.column3.role_choose_right.dataFull.data=u.map(((t,i)=>{let o=!1;return(e.column3_role_right_select.roleid===t.roleid||0===i&&void 0===e.column3_role_right_select.roleid)&&(o=!0),{title:t.rolename,value:{id:t.roleid,item:t,type:"right"},selected:o}})),this.stateData.column4.listItem=e.O9_Roles_Invoke_limit_menu.map((t=>{let i=!1;return e.Invoke_role_selected===t.roleid&&(i=!0),{dataFull:{title:t.rolename,dataItem:t,selected:i},abs_Click:this.onClickMenuInvokeLimit}})),this.stateData.column4.table.dataFull.Header.data=e.invoke_limit_header.map((t=>({id:t.code,title:t.title,config:{width:"",isFrozen:!1},value_search:e.invoke_limit_search_value[t.code]||""}))),this.stateData.column4.table_config=e.invoke_limit_header.map(((t,e)=>e<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===n.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),this.stateData.column4.table_data=e.O9_Roles_InvokeLimit_Table.filter((t=>{let i=!0;for(const o in e.invoke_limit_search_value){let a=e.invoke_limit_search_value[o];t[o].toLowerCase().includes(a.toLowerCase())||(i=!1)}return i})).map(((t,i)=>e.invoke_limit_header.map(((e,o)=>({hasChange:!1,default:{textAlign:"right"},data:t[e.code],dataItem:{header:e,row_idx:t.index_row,row_data:t},index_row:i,index_col:o,abs_Change:this.abs_change_invoke_table,abs_Submit:this.abs_submit_invoke_table}))))),this.stateData.column5.listItem=e.O9_Roles_Invoke_limit_menu.map((t=>{let i=!1;return e.Approve_role_selected===t.roleid&&(i=!0),{dataFull:{title:t.rolename,dataItem:t,selected:i},abs_Click:this.onClickMenuApproveLimit}})),this.stateData.column5.table.dataFull.Header.data=e.approve_limit_header.map((t=>({id:t.code,title:t.title,config:{width:"",isFrozen:!1},value_search:e.approve_limit_search_value[t.code]||""}))),this.stateData.column5.table_config=e.approve_limit_header.map(((t,e)=>e<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===n.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),this.stateData.column5.table_data=e.O9_Roles_ApproveLimit_Table.filter((t=>{let i=!0;for(const o in e.approve_limit_search_value){let a=e.approve_limit_search_value[o];t[o].toLowerCase().includes(a.toLowerCase())||(i=!1)}return i})).map(((t,i)=>e.approve_limit_header.map(((e,o)=>({hasChange:!1,default:{textAlign:"right"},data:t[e.code],dataItem:{header:e,row_idx:t.index_row,row_data:t},index_row:i,index_col:o,abs_Change:this.abs_change_approve_table,abs_Submit:this.abs_submit_approve_table})))))},this.CheckAddRoleName=t=>{let e=t.target.value,i=!1;for(const o of this.stateData.column2.role_name_copying.dataFull.data)if(o.title===e||""===e){i=!0;break}""===e&&(i=!0),this.setState({addAndRemove_btnSaveClick:i,role_name_adding_input:e})},this.abs_Check_role_profile_user_assign_left=t=>{this.onClickAssignLeftRow(t);let e=this.stateData.column3.table_left_data[t.index].data[1];e.value=!e.value,this.setState({autoReload:!0})},this.abs_Check_role_profile_user_assign_right=t=>{let e=this.stateData.column3.table_right_data[t.index].data[1];e.value=!e.value,this.setState({autoReload:!0})},this.abs_CheckAll_left=()=>{let t=this.stateData.column3.table_left.dataFull.Header.data[1],e=0;this.stateData.column3.table_left_data.forEach((()=>{!0===t.data.value?this.stateData.column3.table_left_data[e].data[1].value=!1:this.stateData.column3.table_left_data[e].data[1].value=!0,e++})),t.data.value=!t.data.value,this.setState({autoReload:!0})},this.abs_CheckAll_right=()=>{let t=this.stateData.column3.table_right.dataFull.Header.data[1],e=0;this.stateData.column3.table_right_data.forEach((()=>{!0===t.data.value?this.stateData.column3.table_right_data[e].data[1].value=!1:this.stateData.column3.table_right_data[e].data[1].value=!0,e++})),t.data.value=!t.data.value,this.setState({autoReload:!0})},this.abs_change_approve_table=(t,e,i,o)=>{let a=t.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_ApproveLimit_Table;let l=r[e.row_idx][e.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let t=l.lastIndexOf(".");c=n.substring(0,t)+"."+n.substring(t,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[e.row_idx][e.header.code]=d,this.setState({O9_Roles_ApproveLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_change_invoke_table=(t,e,i,o)=>{let a=t.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_InvokeLimit_Table;let l=r[e.row_idx][e.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let t=l.lastIndexOf(".");c=n.substring(0,t)+"."+n.substring(t,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[e.row_idx][e.header.code]=d,this.setState({O9_Roles_InvokeLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_submit_invoke_table=(t,e,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let e=this.state.O9_Roles_InvokeLimit_Table;this.callAPI("O9_Roles_InvokeLimit_Table_Change_save",{roleid:this.state.Invoke_role_selected,data:[{roleid:this.state.Invoke_role_selected,txcode:t.row_data.cmdid,ccrcd:t.header.code,amt:this.getValueCurrency(e[t.row_idx][t.header.code])}]}).then((i=>{if(1===i.O9_Roles_InvokeLimit_Table_Change_save[0].type){s.ZP.showToast("Save",!0);var o=[{txcode:"bo-update-roleFOJWEBUI",input:{roleid:this.state.Invoke_role_selected,txcode:t.row_data.cmdid,cmdid:t.row_data.cmdid,ccrcd:t.header.code,amt:this.getValueCurrency(e[t.row_idx][t.header.code]),list_currency:this.state.invoke_limit_currency,list_ccr:e[t.row_idx]}}];return(0,F.Yr)(o,{}).then((t=>{}))}s.ZP.showToast("Save",!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.abs_submit_approve_table=(t,e,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let e=this.state.O9_Roles_ApproveLimit_Table;this.callAPI("O9_Roles_ApproveLimit_Table_Change_save",{roleid:this.state.O9_Roles_Approve_limit_menu_select.roleid,data:[{roleid:this.state.Invoke_role_selected,txcode:t.row_data.cmdid,ccrcd:t.header.code,amt:this.getValueCurrency(e[t.row_idx][t.header.code])}]}).then((t=>{1===t.O9_Roles_ApproveLimit_Table_Change_save[0].type&&s.ZP.showToast("Save",!0)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.getRoleAction=(t,e)=>{let i=(0,s._M)(),o={};const a=e.list_layout;for(const s of i)for(const e of a)for(const i of e.list_view)for(const e of i.list_input){let i=e.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=t[s])||void 0===n||null===(r=n[e.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a}}return o},this.getAllRoleAction=()=>(0,F.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((t=>{var e=s.ZP.foGetData("form_design_detail",t);void 0===e&&(e={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",t)||{};void 0===i&&(i={});let o=this.getRoleAction(i,e);this.setState({role_action:o})})),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callAPI=(t,e)=>{this.state.isLoading||this.setState({isLoading:!0});var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:t}}];return i[0].input=Object.assign(i[0].input,e),(0,F.Yr)(i,{}).then((e=>s.ZP.foGetData("data",e)||{[t]:[]})).finally((t=>{this.setState({isLoading:!1})}))},this.AddRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.add&&this.state.role_action.save){let t=this.state.role_name_copying_selected,e=this.state.role_name_adding_input;""!==t&&""!==e&&this.callAPI("O9_Roles_User_Add_and_remove_add",{roleid:t,new_name:e}).then((i=>{let o=i.O9_Roles_User_Add_and_remove_add;1===o[0].type?this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((i=>{let o=i.O9_Roles_Add_and_Remove_Role_Name,a=[{roleid:0,rolename:"All"}],n=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((t=>{a=a.concat(t.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:a})})),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((t=>{n=t.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:n})})),this.setState({O9_Roles_Add_and_Remove_Role_Name:o,isAdd_add_and_remove:!1,addAndRemove_btnAddClick:!1,role_name_adding_input:"",addAndRemove_btnSaveClick:!0});let r=-1;for(const t of o)t.rolename===e&&(r=t.roleid);var l=[{txcode:"bo-create-roleJWEBUI",input:{roleID:r,roleName:e,roleCopy:t}}];return(0,F.Yr)(l,{}).then((t=>{s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(o[0].message,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.onSearch=(t,e)=>{this.setState({[e]:t.target.value})},this.abs_Click_next=()=>{this.onClickAssignLeftToRightArray()},this.abs_Click_next_all=()=>{this.onClickAssignLeftToRightAll()},this.abs_Click_previous=()=>{this.onClickAssignRightToLeftArray()},this.abs_Click_previous_all=()=>{this.onClickAssignRightToLeftAll()},this.onClickAssignLeftToRightAll=()=>{let t=this.state.O9_Roles_User_assignment_table_right,e=this.stateData.column3.table_left_data.filter((e=>0===t.filter((t=>t.user_code===e.data[1].dataItem.value.user_code)).length)).map((t=>t.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:i,data:e}).then((t=>{let e=t.O9_Roles_User_Assignment_left_to_right;1===e[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((t=>{let e=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:e,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:e}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_left.dataFull.Header.data[1],a=0;this.stateData.column3.table_left_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_left_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignRightToLeftAll=()=>{let t=this.stateData.column3.table_right_data.map((t=>t.data[1].dataItem.value)),e=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==e&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-e,data:t}).then((t=>{let i=t.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:e}).then((t=>{let i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:e,role_user_all:i}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(i[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let i=this.stateData.column3.table_right.dataFull.Header.data[1],o=0;this.stateData.column3.table_right_data.forEach((()=>{!0===i.data.value&&(this.stateData.column3.table_right_data[o].data[1].value=!1),o++})),i.data.value=!1},this.onClickAssignLeftToRightArray=()=>{let t=this.state.O9_Roles_User_assignment_table_right,e=this.stateData.column3.table_left_data.filter((e=>!0===e.data[1].value&&0===t.filter((t=>t.user_code===e.data[1].dataItem.value.user_code)).length)).map((t=>t.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_left=!0,""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:i,data:e}).then((t=>{let e=t.O9_Roles_User_Assignment_left_to_right;1===e[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((t=>{let e=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:e,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:e}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_left.dataFull.Header.data[1],a=0;this.stateData.column3.table_left_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_left_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignLeftRow=t=>{this.callAPI("user_profile_user_in_role",t.value).then((t=>{var e;let i=(null===t||void 0===t||null===(e=t.user_profile_user_in_role)||void 0===e?void 0:e.data)||[];this.setState({table_user_profile_user_in_role:i})}))},this.onClickAssignLeftToRight=t=>{let e=this.state.column3_role_right_select.roleid,i=this.state.O9_Roles_User_assignment_table_right;for(let o=0;o<i.length;o++){if(i[o].user_code===t.user_code)return}""!==e&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:e,data:[{usrid:t.usrid}]}).then((t=>{let i=t.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:e}).then((t=>{let i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:e,role_user_all:i}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i[0].message,!1)}))},this.onClickAssignRightToLeft=t=>{let e=this.refs.ref_assignment_list_role_name_right.value;""!==e&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-e,data:[{usrid:t.usrid}]}).then((t=>{let i=t.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:e}).then((t=>{let i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:e,role_user_all:i}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i[0].message,!1)}))},this.onClickAssignRightToLeftArray=t=>{let e=this.stateData.column3.table_right_data.filter((t=>!0===t.data[1].value)).map((t=>t.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-i,data:e}).then((t=>{let e=t.O9_Roles_User_Assignment_left_to_right;1===e[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((t=>{let e=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:e,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:e}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_right.dataFull.Header.data[1],a=0;this.stateData.column3.table_right_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_right_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onChangeUserAgm=(t,e)=>{switch(t.type){case"left":if(t.id===this.state.column3_role_right_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:t.id}).then((e=>{let i=this.state.O9_RolesUser_assignment_Role_Name_Left.filter((e=>e.roleid===t.id)),o=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_left:o,column3_role_left_select:i[0]})}));break;case"right":if(t.id===this.state.column3_role_left_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:t.id}).then((e=>{let i=this.state.O9_RolesUser_assignment_Role_Name_Right.filter((e=>e.roleid===t.id)),o=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:o,column3_role_right_select:i[0]})}))}},this.onChangeCurrency=t=>{t||0===t||(t="");let e=(t=String(t)).replace(/,/g,"");return e.length>16&&(e=e.slice(e.length-16,e.length)),(0,yt.Nx)(e,2)},this.getValueCurrency=t=>void 0===t||null===t||""===t?"":Number(t.replace(/,/g,"")),this.saveInvokeTable=()=>{},this.onClickMenuInvokeLimit=t=>{let e=t.dataFull.dataItem;this.callAPI("O9_Roles_InvokeLimit_Table",e).then((t=>{void 0===t&&(t={});let i=t.O9_Roles_InvokeLimit_Table;this.setState({O9_Roles_Invoke_limit_menu_select:e,Invoke_role_selected:e.roleid},(()=>{this.reloadTableInvokeLimit(i)}))}))},this.reloadTableInvokeLimit=t=>{if(t){let e=t.currency||[],i=t.data;for(const t of e)for(let e=0;e<i.length;e++){const o=i[e];o[t]=this.convertCurrency(o[t]),o.index_row=e}this.setState({O9_Roles_InvokeLimit_Table:i,invoke_limit_header:this.getTableHeader(e),invoke_limit_currency:e})}},this.onClickMenuApproveLimit=t=>{t=t.dataFull.dataItem,this.callAPI("O9_Roles_ApproveLimit_Table",t).then((e=>{if(e){let i=e.O9_Roles_ApproveLimit_Table,o=i.currency,a=i.data;for(const t of o)for(let e=0;e<a.length;e++){const i=a[e];i[t]=this.convertCurrency(i[t]),i.index_row=e}this.setState({O9_Roles_ApproveLimit_Table:a,O9_Roles_Approve_limit_menu_select:t,Approve_role_selected:t.roleid,approve_limit_header:this.getTableHeader(o)})}}))},this.onClickTreeMenuInvokeApprove=(t,e)=>{e=e.dataItem;let i=this.state.menu_invoke_aprrove;e.isOpen=!e.isOpen;let o=[],a=[];this.callAPI("O9_Roles_InvokeApprove_Table_header",e).then((t=>{o=[{cmdid:"0",caption:"Role Name"},{cmdid:"0",caption:"Self Invoke"}],o=o.concat(t.O9_Roles_InvokeApprove_Table_header),o=o.filter((t=>null!==t.cmdid)),this.callAPI("O9_Roles_InvokeApprove_Table_body",e).then((t=>{a=t.O9_Roles_InvokeApprove_Table_body,this.setState({menu_invoke_aprrove:i,O9_Roles_InvokeApprove_Table_body:a,O9_Roles_InvokeApprove_Table_header:o,menu_invoke_aprrove_select:e})}))}))},this.removeRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.delete){let t=this.state.role_name_copying_selected;""!==t&&this.callAPI("O9_Roles_User_Add_and_remove_delete",{roleid:t}).then((e=>{let i=e.O9_Roles_User_Add_and_remove_delete;if(1===i[0].type){this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((t=>{let e=t.O9_Roles_Add_and_Remove_Role_Name,i=e[0],o=[{roleid:0,rolename:"All"}],a=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((t=>{o=o.concat(t.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:o})})),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((t=>{a=t.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:a})})),this.setState({O9_Roles_Add_and_Remove_Role_Name:e,isAdd_add_and_remove:!1,isDelete_add_and_remove:!1,delete_err:"",role_name_copying_selected:i.roleid,column2_role_select:i})})),s.ZP.showToast("Save",!0);var o=[{txcode:"bo-delete-roleJWEBUI",input:{roleID:t}}];return(0,F.Yr)(o,{}).then((t=>{}))}s.ZP.showToast(e.O9_Roles_User_Add_and_remove_delete[0].message,!1),this.setState({delete_err:i[0].message||""})}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},ye=(0,_.Iq)("jwebui_roleProfile"),this.key_form="BO_015003009",this.data_key_form={BO_015003003:{title:"ADM-Roles Profile",col_id:"column1"},BO_015003008:{title:"ADM-Invoke Limit",col_id:"column4"},BO_015003009:{title:"ADM-Approve Limit",col_id:"column5"}},this.state={menu_parent_select:"ADM - Roles Profile",menu_select:this.data_key_form[this.key_form].col_id,"column3.role_choose_right":"","column3.role_choose_left":"","column2.role_name_copying":"",column3_role_left_select:0,role_name_adding_input:"",role_name_copying_selected:"",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,menu_invoke_aprrove:[],O9_Roles_InvokeApprove_Table_header:[],O9_Roles_InvokeApprove_Table_body:[],menu_invoke_aprrove_select:{},O9_Roles_Add_and_Remove_Role_Name:[],O9_Roles_Add_and_Remove_Role_Name_select:"",O9_Roles_User_assignment_table_left:[],O9_Roles_User_assignment_table_right:[],O9_RolesUser_assignment_Role_Name_Left:[],O9_RolesUser_assignment_Role_Name_Right:[],user_assignment_select:"",O9_Roles_Invoke_limit_menu:[],O9_Roles_Invoke_limit_menu_select:{},O9_Roles_Approve_limit_menu:[],O9_Roles_Approve_limit_menu_select:{},O9_Roles_InvokeLimit_Table:[],O9_Roles_ApproveLimit_Table:[],table_user_profile_user_in_role:[],invoke_limit_header:[],approve_limit_header:[],Col3_Assignment_Search:{},invoke_limit_search_value:{},approve_limit_search_value:{}},this.menu_form=[{title:"Roles Profile",child:["Invoke - Aprrove","Add - Remove","User Assignment"]},{title:"Invoke Limit",child:[]},{title:"Approve Limit",child:[]}],this.user_profile=s.ZP.context_get("user_acc"),this.stateData={form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],abs_select:(t,e)=>{this.setState({menu_select:e})}},column1:{tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},title_table_up:"OPEARTION",table_up:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_up_data:[],table_up_config:[],title_table_down:"VERIFICATION",table_down:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_down_data:[],table_down_config:[]},column4:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchInvokeLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}]},column5:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchApproveLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]},column2:{role_name_adding:{dataFull:{config:{default:{title:"Role Name (for adding)",type:"text",class:"col-sm-5",code_form_component:"role_name_adding"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:t=>{this.CheckAddRoleName(t)}},listButton:[{dataFull:{config:{default:{title:"Add",icon:"add_circle_outline"},cmd:{}}},abs_Click:()=>{this.setState({addAndRemove_btnAddClick:!0})}},{dataFull:{config:{default:{title:"Delete",icon:"highlight_off"},cmd:{}}},abs_Click:this.removeRoleName},{dataFull:{config:{default:{title:"Save",type:"primary",icon:"check_circle_outline"},cmd:{}}},abs_Click:this.AddRoleName}],role_name_copying:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Role Name (for copying or deleting)",type:"text",class:"col-sm-5",code_form_component:"role_name_copying"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:[],input_value:"123",search_value:""},abs_Change:this.abs_role_name_copying_select,abs_search:t=>{this.onSearch(t,"column2.role_name_copying")}}},column3:{table_in_role:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"User Code",config:{width:"",isFrozen:!1}},{title:"User Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_in_role_data:[{data:[{data:"2"},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_in_role_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:t=>{this.onSearch(t,"column3.role_choose_left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:t=>{this.onSearch(t,"column3.role_choose_right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_left},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_left_data:[{data:[{data:"2"},{value:!1,abs_Click:this.abs_Ckeck},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_right},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_right_data:[{data:[],config:{value:!0}}],table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.getAllRoleAction(),await this.callAPI("O9_Roles_InvokeApprove_Menu").then((t=>{let{O9_Roles_InvokeApprove_Menu:e}=t||[];this.setState({menu_invoke_aprrove:e})}));let t=[],e=[{roleid:0,rolename:"All"}],i=[],o=[],a=[];await this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((e=>{t=e.O9_Roles_Add_and_Remove_Role_Name})),await this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((t=>{e=e.concat(t.O9_RolesUser_assignment_Role_Name_Left)})),await this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((t=>i=t.O9_RolesUser_assignment_Role_Name_Right)),e.length>0&&await this.callAPI("O9_Roles_User_assignment_table",{roleid:0}).then((t=>{o=t.O9_Roles_User_assignment_table})),i.length>0&&await this.callAPI("O9_Roles_User_assignment_table",i[0]).then((t=>{a=t.O9_Roles_User_assignment_table})),this.setState({role_left:e[0],column3_role_right_select:i[0],column3_role_left_select:e[0],column2_role_select:t[0],O9_Roles_Add_and_Remove_Role_Name:t,O9_RolesUser_assignment_Role_Name_Left:e,O9_RolesUser_assignment_Role_Name_Right:i,O9_Roles_User_assignment_table_left:o,O9_Roles_User_assignment_table_right:a,O9_Roles_Invoke_limit_menu:t,O9_Roles_Approve_limit_menu:t,isLoading:!1},(()=>{}))}render(){const t=(0,_.RP)("uFormLoading");return(0,c.jsxs)(o.Fragment,{children:[this.state.isLoading?(0,c.jsx)(t,{}):null,(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(ye,{stateData:this.stateData})})]})}convertCurrency(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t||0===t||(t=""),t=String(t);let e=t.replace(/,/g,"");return(0,yt.Nx)(e,2)}reloadTableWithMenuInvokeApprove(t){let e=this.state.menu_invoke_aprrove_select,i=[];this.callAPI("O9_Roles_InvokeApprove_Table_body",e).then((e=>{i=e.O9_Roles_InvokeApprove_Table_body,this.setState({O9_Roles_InvokeApprove_Table_body:i,isLoading:!!t})}))}}const De=Ae;let ke;class Oe extends o.Component{constructor(t){super(t),this.handleSelectTabID=t=>{this.setState({menu_select:t})},this.handelSearchInvokeLimit=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",a=this.state.invoke_limit_search_value;a[e]=o,this.setState({invoke_limit_search_value:a})},this.handelSearchApproveLimit=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",a=this.state.approve_limit_search_value;a[e]=o,this.setState({approve_limit_search_value:a})},this.handelChangeSearch=(t,e)=>{var i;let o=(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)||"",a=this.state.Col3_Assignment_Search;switch(a[e]=o,e){case"TBL_USER_CODE":this.stateData.column3.table_left.dataFull.Header.data[2].value_search=o;break;case"TBL_USER_NAME":this.stateData.column3.table_left.dataFull.Header.data[3].value_search=o;break;case"TBR_USER_CODE":this.stateData.column3.table_right.dataFull.Header.data[2].value_search=o;break;case"TBR_USER_NAME":this.stateData.column3.table_right.dataFull.Header.data[3].value_search=o}this.setState({Col3_Assignment_Search:a})},this.handelClearSearch=()=>{},this.getTableHeader=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return e.push({title:"Group",code:"module"}),e.push({title:"Caption",code:"tranname"}),t.forEach((t=>{e.push({title:t,code:t})})),e},this.abs_role_name_copying_select=(t,e,i)=>{this.setState({role_name_copying_selected:t.roleid,column2_role_select:t})},this.abs_Ckeck_invoke_approve_verification=(t,e)=>{this.callAPI("O9_Roles_Invoke_approve_Table_Change_save_approve",{roleid:t.roleid,data:[{roleid:t.roleid,cmdid:t.parentid,cmdiddt:t.cmdiddt,invoke:!1===e?1:0}]}).then((t=>{let e=t.O9_Roles_Invoke_approve_Table_Change_save_approve;this.reloadTableWithMenuInvokeApprove(),1===e[0].type?s.ZP.showToast("Save",!0):s.ZP.showToast("Save",!1)}))},this.abs_Ckeck_invoke_approve_operation=(t,e)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let i=this.state.menu_invoke_aprrove.filter((e=>e.parentid===t.parentid));this.callAPI("O9_Roles_Invoke_approve_Table_Change_save",{roleid:t.roleid,data:[{roleid:t.roleid,cmdid:t.parentid,cmdiddt:t.cmdiddt,invoke:!1===e?1:0}]}).then((o=>{let a=o.O9_Roles_Invoke_approve_Table_Change_save;if(this.reloadTableWithMenuInvokeApprove(!0),1===a[0].type){var n=[{txcode:"bo-update-roleBO-JWEBUI",input:{roleid:t.roleid,cmdid:t.parentid,cmdiddt:t.cmdiddt,invoke:!1===e?1:0,menu_child:i}}];return(0,F.Yr)(n,{}).then((t=>{s.ZP.showToast("Save",!0),this.setState({isLoading:!1})}))}s.ZP.showToast(a[0].message,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.UNSAFE_componentWillUpdate=(t,e)=>{var i,o,a;let n=e.role_action||{};this.stateData.tab.data=this.stateData.tab.data.map((t=>(t.isShow=t.id===e.menu_select,t))),this.stateData.column3.table_in_role_data=e.table_user_profile_user_in_role.map((t=>({config:{value:!1},data:[{data:t.rolename},{data:t.user_code},{data:t.usrname}]}))),this.stateData.column1.tree_data.tree_data=null===(i=e.menu_invoke_aprrove)||void 0===i?void 0:i.map((t=>({title:t.caption,parent_id:t.parentid,is_open:!1,DOM_elm:null,id:t.cmdid,dataItem:t,abs_click:this.onClickTreeMenuInvokeApprove}))),this.stateData.column1.table_up.dataFull.Header.data=e.O9_Roles_InvokeApprove_Table_header.map((t=>({title:t.caption,config:{width:"",isFrozen:!1}}))),this.stateData.column1.table_down.dataFull.Header.data=s.ZP.cloneJson(this.stateData.column1.table_up.dataFull.Header.data),this.stateData.column1.table_down.dataFull.Header.data[1]&&(this.stateData.column1.table_down.dataFull.Header.data[1].title="Self Approve");let r=e.O9_Roles_InvokeApprove_Table_header;this.stateData.column1.table_up_config=r.map(((t,e)=>0===e?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:"uTableColumnCheckbox",config:{cmd:{disable:!1===n.save}}})),this.stateData.column1.table_down_config=this.stateData.column1.table_up_config;let l=e.O9_Roles_InvokeApprove_Table_body;this.stateData.column1.table_up_data=[],this.stateData.column1.table_down_data=[];for(let s=0;s<l.length;s++){let t=r.length-1,e=[],i=[];for(let o=0;o<t;o++)0===o&&(e.push({data:l[s+o].rolename}),i.push({data:l[s+o].rolename})),e.push({value:1===l[s+o].invoke,dataItem:l[s+o],abs_Click:this.abs_Ckeck_invoke_approve_operation}),i.push({value:1===l[s+o].approve,dataItem:l[s+o],abs_Click:this.abs_Ckeck_invoke_approve_verification});this.stateData.column1.table_up_data.push(e),this.stateData.column1.table_down_data.push(i),s=s+t-1}if(this.stateData.column2.role_name_adding.dataFull.config.cmd.disable=!0!==e.addAndRemove_btnAddClick,this.stateData.column2.listButton[2].dataFull.config.cmd.disable=!0===e.addAndRemove_btnSaveClick,this.stateData.column2.role_name_copying.dataFull.search_value=e["column2.role_name_copying"],this.stateData.column2.listButton[0].dataFull.config.cmd.visible=!1!==n.save,this.stateData.column2.listButton[2].dataFull.config.cmd.visible=!1!==n.save,this.stateData.column2.listButton[1].dataFull.config.cmd.visible=!1!==n.delete,this.stateData.column3.next.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.next_all.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.preview.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.preview_all.dataFull.config.cmd.disable=!1===n.save,!e.role_name_copying_selected&&e.O9_Roles_Add_and_Remove_Role_Name.length>0)this.setState({role_name_copying_selected:e.O9_Roles_Add_and_Remove_Role_Name[0].roleid});else{var c;this.stateData.column2.role_name_copying.dataFull.input_value=null===(c=e.column2_role_select)||void 0===c?void 0:c.rolename;let t=e.O9_Roles_Add_and_Remove_Role_Name.filter((t=>(t.rolename||"").toLowerCase().includes(e["column2.role_name_copying"].toLowerCase())));this.stateData.column2.role_name_copying.dataFull.data=t.map(((t,i)=>{let o=!1;return t.roleid===e.role_name_copying_selected&&(o=!0),{title:t.rolename,value:t,selected:o}}))}this.stateData.column2.role_name_adding.dataFull.value=e.role_name_adding_input;let d=this.unCheck_user_assign_table_left,h=this.unCheck_user_assign_table_right;!0===this.unCheck_user_assign_table_left&&(this.unCheck_user_assign_table_left=!1),!0===this.unCheck_user_assign_table_right&&(this.unCheck_user_assign_table_right=!1),this.stateData.column3.table_left_data=e.O9_Roles_User_assignment_table_left.filter((t=>t.user_code.includes(e.Col3_Assignment_Search.TBL_USER_CODE||"")&&t.usrname.includes(e.Col3_Assignment_Search.TBL_USER_NAME||""))).map(((t,e)=>{var i,o,a;return{data:[{data:e+1},{value:!0!==d&&((null===(i=this.stateData.column3.table_left_data[e])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_left,dataItem:{value:t,index:e}},{data:t.user_code},{data:t.usrname}],config:{value:!1}}})),this.stateData.column3.table_right_data=e.O9_Roles_User_assignment_table_right.filter((t=>t.user_code.includes(e.Col3_Assignment_Search.TBR_USER_CODE||"")&&t.usrname.includes(e.Col3_Assignment_Search.TBR_USER_NAME||""))).map(((t,e)=>{var i,o,a;return{data:[{data:e+1},{value:!0!==h&&((null===(i=this.stateData.column3.table_right_data[e])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_right,dataItem:{value:t,index:e}},{data:t.user_code},{data:t.usrname}],config:{value:!1}}})),this.stateData.column3.role_choose_left.dataFull.data=[],this.stateData.column3.role_choose_left.dataFull.search_value=e["column3.role_choose_left"],this.stateData.column3.role_choose_left.dataFull.input_value=null===(o=e.column3_role_left_select)||void 0===o?void 0:o.rolename,e.O9_RolesUser_assignment_Role_Name_Left.filter((t=>null!==t.rolename&&t.rolename.toLowerCase().includes(e["column3.role_choose_left"].toLowerCase()))).forEach(((t,i)=>{let o=!1;(e.column3_role_left_select.roleid===t.roleid||0===i&&void 0===e.column3_role_left_select.roleid)&&(o=!0),this.stateData.column3.role_choose_left.dataFull.data.push({title:t.rolename,value:{id:t.roleid,item:t,type:"left"},selected:o})})),this.stateData.column3.role_choose_right.dataFull.search_value=e["column3.role_choose_right"],this.stateData.column3.role_choose_right.dataFull.input_value=null===(a=e.column3_role_right_select)||void 0===a?void 0:a.rolename;let u=e.O9_RolesUser_assignment_Role_Name_Right.filter((t=>null!==t.rolename&&t.rolename.toLowerCase().includes(e["column3.role_choose_right"].toLowerCase())));this.stateData.column3.role_choose_right.dataFull.data=u.map(((t,i)=>{let o=!1;return(e.column3_role_right_select.roleid===t.roleid||0===i&&void 0===e.column3_role_right_select.roleid)&&(o=!0),{title:t.rolename,value:{id:t.roleid,item:t,type:"right"},selected:o}})),this.stateData.column4.listItem=e.O9_Roles_Invoke_limit_menu.map((t=>{let i=!1;return e.Invoke_role_selected===t.roleid&&(i=!0),{dataFull:{title:t.rolename,dataItem:t,selected:i},abs_Click:this.onClickMenuInvokeLimit}})),this.stateData.column4.table.dataFull.Header.data=e.invoke_limit_header.map((t=>({id:t.code,title:t.title,config:{width:"",isFrozen:!1},value_search:e.invoke_limit_search_value[t.code]||""}))),this.stateData.column4.table_config=e.invoke_limit_header.map(((t,e)=>e<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===n.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),this.stateData.column4.table_data=e.O9_Roles_InvokeLimit_Table.filter((t=>{let i=!0;for(const o in e.invoke_limit_search_value){let a=e.invoke_limit_search_value[o];t[o].toLowerCase().includes(a.toLowerCase())||(i=!1)}return i})).map(((t,i)=>e.invoke_limit_header.map(((e,o)=>({hasChange:!1,default:{textAlign:"right"},data:t[e.code],dataItem:{header:e,row_idx:t.index_row,row_data:t},index_row:i,index_col:o,abs_Change:this.abs_change_invoke_table,abs_Submit:this.abs_submit_invoke_table}))))),this.stateData.column5.listItem=e.O9_Roles_Invoke_limit_menu.map((t=>{let i=!1;return e.Approve_role_selected===t.roleid&&(i=!0),{dataFull:{title:t.rolename,dataItem:t,selected:i},abs_Click:this.onClickMenuApproveLimit}})),this.stateData.column5.table.dataFull.Header.data=e.approve_limit_header.map((t=>({id:t.code,title:t.title,config:{width:"",isFrozen:!1},value_search:e.approve_limit_search_value[t.code]||""}))),this.stateData.column5.table_config=e.approve_limit_header.map(((t,e)=>e<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===n.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),this.stateData.column5.table_data=e.O9_Roles_ApproveLimit_Table.filter((t=>{let i=!0;for(const o in e.approve_limit_search_value){let a=e.approve_limit_search_value[o];t[o].toLowerCase().includes(a.toLowerCase())||(i=!1)}return i})).map(((t,i)=>e.approve_limit_header.map(((e,o)=>({hasChange:!1,default:{textAlign:"right"},data:t[e.code],dataItem:{header:e,row_idx:t.index_row,row_data:t},index_row:i,index_col:o,abs_Change:this.abs_change_approve_table,abs_Submit:this.abs_submit_approve_table})))))},this.CheckAddRoleName=t=>{let e=t.target.value,i=!1;for(const o of this.stateData.column2.role_name_copying.dataFull.data)if(o.title===e||""===e){i=!0;break}""===e&&(i=!0),this.setState({addAndRemove_btnSaveClick:i,role_name_adding_input:e})},this.abs_Check_role_profile_user_assign_left=t=>{this.onClickAssignLeftRow(t);let e=this.stateData.column3.table_left_data[t.index].data[1];e.value=!e.value,this.setState({autoReload:!0})},this.abs_Check_role_profile_user_assign_right=t=>{let e=this.stateData.column3.table_right_data[t.index].data[1];e.value=!e.value,this.setState({autoReload:!0})},this.abs_CheckAll_left=()=>{let t=this.stateData.column3.table_left.dataFull.Header.data[1],e=0;this.stateData.column3.table_left_data.forEach((()=>{!0===t.data.value?this.stateData.column3.table_left_data[e].data[1].value=!1:this.stateData.column3.table_left_data[e].data[1].value=!0,e++})),t.data.value=!t.data.value,this.setState({autoReload:!0})},this.abs_CheckAll_right=()=>{let t=this.stateData.column3.table_right.dataFull.Header.data[1],e=0;this.stateData.column3.table_right_data.forEach((()=>{!0===t.data.value?this.stateData.column3.table_right_data[e].data[1].value=!1:this.stateData.column3.table_right_data[e].data[1].value=!0,e++})),t.data.value=!t.data.value,this.setState({autoReload:!0})},this.abs_change_approve_table=(t,e,i,o)=>{let a=t.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_ApproveLimit_Table;let l=r[e.row_idx][e.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let t=l.lastIndexOf(".");c=n.substring(0,t)+"."+n.substring(t,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[e.row_idx][e.header.code]=d,this.setState({O9_Roles_ApproveLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_change_invoke_table=(t,e,i,o)=>{let a=t.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_InvokeLimit_Table;let l=r[e.row_idx][e.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let t=l.lastIndexOf(".");c=n.substring(0,t)+"."+n.substring(t,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[e.row_idx][e.header.code]=d,this.setState({O9_Roles_InvokeLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_submit_invoke_table=(t,e,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let e=this.state.O9_Roles_InvokeLimit_Table;this.callAPI("O9_Roles_InvokeLimit_Table_Change_save",{roleid:this.state.Invoke_role_selected,data:[{roleid:this.state.Invoke_role_selected,txcode:t.row_data.cmdid,ccrcd:t.header.code,amt:this.getValueCurrency(e[t.row_idx][t.header.code])}]}).then((i=>{if(1===i.O9_Roles_InvokeLimit_Table_Change_save[0].type){s.ZP.showToast("Save",!0);var o=[{txcode:"bo-update-roleFOJWEBUI",input:{roleid:this.state.Invoke_role_selected,txcode:t.row_data.cmdid,cmdid:t.row_data.cmdid,ccrcd:t.header.code,amt:this.getValueCurrency(e[t.row_idx][t.header.code]),list_currency:this.state.invoke_limit_currency,list_ccr:e[t.row_idx]}}];return(0,F.Yr)(o,{}).then((t=>{}))}s.ZP.showToast("Save",!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.abs_submit_approve_table=(t,e,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let e=this.state.O9_Roles_ApproveLimit_Table;this.callAPI("O9_Roles_ApproveLimit_Table_Change_save",{roleid:this.state.O9_Roles_Approve_limit_menu_select.roleid,data:[{roleid:this.state.Invoke_role_selected,txcode:t.row_data.cmdid,ccrcd:t.header.code,amt:this.getValueCurrency(e[t.row_idx][t.header.code])}]}).then((t=>{1===t.O9_Roles_ApproveLimit_Table_Change_save[0].type&&s.ZP.showToast("Save",!0)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.getRoleAction=(t,e)=>{let i=(0,s._M)(),o={};const a=e.list_layout;for(const s of i)for(const e of a)for(const i of e.list_view)for(const e of i.list_input){let i=e.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=t[s])||void 0===n||null===(r=n[e.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a}}return o},this.getAllRoleAction=()=>(0,F.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((t=>{var e=s.ZP.foGetData("form_design_detail",t);void 0===e&&(e={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",t)||{};void 0===i&&(i={});let o=this.getRoleAction(i,e);this.setState({role_action:o})})),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callAPI=(t,e)=>{this.state.isLoading||this.setState({isLoading:!0});var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:t}}];return i[0].input=Object.assign(i[0].input,e),(0,F.Yr)(i,{}).then((e=>s.ZP.foGetData("data",e)||{[t]:[]})).finally((t=>{this.setState({isLoading:!1})}))},this.AddRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.add&&this.state.role_action.save){let t=this.state.role_name_copying_selected,e=this.state.role_name_adding_input;""!==t&&""!==e&&this.callAPI("O9_Roles_User_Add_and_remove_add",{roleid:t,new_name:e}).then((i=>{let o=i.O9_Roles_User_Add_and_remove_add;1===o[0].type?this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((i=>{let o=i.O9_Roles_Add_and_Remove_Role_Name,a=[{roleid:0,rolename:"All"}],n=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((t=>{a=a.concat(t.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:a})})),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((t=>{n=t.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:n})})),this.setState({O9_Roles_Add_and_Remove_Role_Name:o,isAdd_add_and_remove:!1,addAndRemove_btnAddClick:!1,role_name_adding_input:"",addAndRemove_btnSaveClick:!0});let r=-1;for(const t of o)t.rolename===e&&(r=t.roleid);var l=[{txcode:"bo-create-roleJWEBUI",input:{roleID:r,roleName:e,roleCopy:t}}];return(0,F.Yr)(l,{}).then((t=>{s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(o[0].message,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.onSearch=(t,e)=>{this.setState({[e]:t.target.value})},this.abs_Click_next=()=>{this.onClickAssignLeftToRightArray()},this.abs_Click_next_all=()=>{this.onClickAssignLeftToRightAll()},this.abs_Click_previous=()=>{this.onClickAssignRightToLeftArray()},this.abs_Click_previous_all=()=>{this.onClickAssignRightToLeftAll()},this.onClickAssignLeftToRightAll=()=>{let t=this.state.O9_Roles_User_assignment_table_right,e=this.stateData.column3.table_left_data.filter((e=>0===t.filter((t=>t.user_code===e.data[1].dataItem.value.user_code)).length)).map((t=>t.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:i,data:e}).then((t=>{let e=t.O9_Roles_User_Assignment_left_to_right;1===e[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((t=>{let e=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:e,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:e}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_left.dataFull.Header.data[1],a=0;this.stateData.column3.table_left_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_left_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignRightToLeftAll=()=>{let t=this.stateData.column3.table_right_data.map((t=>t.data[1].dataItem.value)),e=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==e&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-e,data:t}).then((t=>{let i=t.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:e}).then((t=>{let i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:e,role_user_all:i}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(i[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let i=this.stateData.column3.table_right.dataFull.Header.data[1],o=0;this.stateData.column3.table_right_data.forEach((()=>{!0===i.data.value&&(this.stateData.column3.table_right_data[o].data[1].value=!1),o++})),i.data.value=!1},this.onClickAssignLeftToRightArray=()=>{let t=this.state.O9_Roles_User_assignment_table_right,e=this.stateData.column3.table_left_data.filter((e=>!0===e.data[1].value&&0===t.filter((t=>t.user_code===e.data[1].dataItem.value.user_code)).length)).map((t=>t.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_left=!0,""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:i,data:e}).then((t=>{let e=t.O9_Roles_User_Assignment_left_to_right;1===e[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((t=>{let e=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:e,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:e}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_left.dataFull.Header.data[1],a=0;this.stateData.column3.table_left_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_left_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignLeftRow=t=>{this.callAPI("user_profile_user_in_role",t.value).then((t=>{var e;let i=(null===t||void 0===t||null===(e=t.user_profile_user_in_role)||void 0===e?void 0:e.data)||[];this.setState({table_user_profile_user_in_role:i})}))},this.onClickAssignLeftToRight=t=>{let e=this.state.column3_role_right_select.roleid,i=this.state.O9_Roles_User_assignment_table_right;for(let o=0;o<i.length;o++){if(i[o].user_code===t.user_code)return}""!==e&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:e,data:[{usrid:t.usrid}]}).then((t=>{let i=t.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:e}).then((t=>{let i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:e,role_user_all:i}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i[0].message,!1)}))},this.onClickAssignRightToLeft=t=>{let e=this.refs.ref_assignment_list_role_name_right.value;""!==e&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-e,data:[{usrid:t.usrid}]}).then((t=>{let i=t.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:e}).then((t=>{let i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:e,role_user_all:i}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i[0].message,!1)}))},this.onClickAssignRightToLeftArray=t=>{let e=this.stateData.column3.table_right_data.filter((t=>!0===t.data[1].value)).map((t=>t.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-i,data:e}).then((t=>{let e=t.O9_Roles_User_Assignment_left_to_right;1===e[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((t=>{let e=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:e,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:e}}];return(0,F.Yr)(o,{}).then((t=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_right.dataFull.Header.data[1],a=0;this.stateData.column3.table_right_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_right_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onChangeUserAgm=(t,e)=>{switch(t.type){case"left":if(t.id===this.state.column3_role_right_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:t.id}).then((e=>{let i=this.state.O9_RolesUser_assignment_Role_Name_Left.filter((e=>e.roleid===t.id)),o=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_left:o,column3_role_left_select:i[0]})}));break;case"right":if(t.id===this.state.column3_role_left_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:t.id}).then((e=>{let i=this.state.O9_RolesUser_assignment_Role_Name_Right.filter((e=>e.roleid===t.id)),o=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:o,column3_role_right_select:i[0]})}))}},this.onChangeCurrency=t=>{t||0===t||(t="");let e=(t=String(t)).replace(/,/g,"");return e.length>16&&(e=e.slice(e.length-16,e.length)),(0,yt.Nx)(e,2)},this.getValueCurrency=t=>void 0===t||null===t||""===t?"":Number(t.replace(/,/g,"")),this.saveInvokeTable=()=>{},this.onClickMenuInvokeLimit=t=>{let e=t.dataFull.dataItem;this.callAPI("O9_Roles_InvokeLimit_Table",e).then((t=>{void 0===t&&(t={});let i=t.O9_Roles_InvokeLimit_Table;this.setState({O9_Roles_Invoke_limit_menu_select:e,Invoke_role_selected:e.roleid},(()=>{this.reloadTableInvokeLimit(i)}))}))},this.reloadTableInvokeLimit=t=>{if(t){let e=t.currency||[],i=t.data;for(const t of e)for(let e=0;e<i.length;e++){const o=i[e];o[t]=this.convertCurrency(o[t]),o.index_row=e}this.setState({O9_Roles_InvokeLimit_Table:i,invoke_limit_header:this.getTableHeader(e),invoke_limit_currency:e})}},this.onClickMenuApproveLimit=t=>{t=t.dataFull.dataItem,this.callAPI("O9_Roles_ApproveLimit_Table",t).then((e=>{if(e){let i=e.O9_Roles_ApproveLimit_Table,o=i.currency,a=i.data;for(const t of o)for(let e=0;e<a.length;e++){const i=a[e];i[t]=this.convertCurrency(i[t]),i.index_row=e}this.setState({O9_Roles_ApproveLimit_Table:a,O9_Roles_Approve_limit_menu_select:t,Approve_role_selected:t.roleid,approve_limit_header:this.getTableHeader(o)})}}))},this.onClickTreeMenuInvokeApprove=(t,e)=>{e=e.dataItem;let i=this.state.menu_invoke_aprrove;e.isOpen=!e.isOpen;let o=[],a=[];this.callAPI("O9_Roles_InvokeApprove_Table_header",e).then((t=>{o=[{cmdid:"0",caption:"Role Name"},{cmdid:"0",caption:"Self Invoke"}],o=o.concat(t.O9_Roles_InvokeApprove_Table_header),o=o.filter((t=>null!==t.cmdid)),this.callAPI("O9_Roles_InvokeApprove_Table_body",e).then((t=>{a=t.O9_Roles_InvokeApprove_Table_body,this.setState({menu_invoke_aprrove:i,O9_Roles_InvokeApprove_Table_body:a,O9_Roles_InvokeApprove_Table_header:o,menu_invoke_aprrove_select:e})}))}))},this.removeRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.delete){let t=this.state.role_name_copying_selected;""!==t&&this.callAPI("O9_Roles_User_Add_and_remove_delete",{roleid:t}).then((e=>{let i=e.O9_Roles_User_Add_and_remove_delete;if(1===i[0].type){this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((t=>{let e=t.O9_Roles_Add_and_Remove_Role_Name,i=e[0],o=[{roleid:0,rolename:"All"}],a=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((t=>{o=o.concat(t.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:o})})),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((t=>{a=t.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:a})})),this.setState({O9_Roles_Add_and_Remove_Role_Name:e,isAdd_add_and_remove:!1,isDelete_add_and_remove:!1,delete_err:"",role_name_copying_selected:i.roleid,column2_role_select:i})})),s.ZP.showToast("Save",!0);var o=[{txcode:"bo-delete-roleJWEBUI",input:{roleID:t}}];return(0,F.Yr)(o,{}).then((t=>{}))}s.ZP.showToast(e.O9_Roles_User_Add_and_remove_delete[0].message,!1),this.setState({delete_err:i[0].message||""})}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},ke=(0,_.Iq)("jwebui_roleProfile"),this.key_form="BO_015003008",this.data_key_form={BO_015003003:{title:"ADM-Roles Profile",col_id:"column1"},BO_015003008:{title:"ADM-Invoke Limit",col_id:"column4"},BO_015003009:{title:"ADM-Approve Limit",col_id:"column5"}},this.state={menu_parent_select:"ADM - Roles Profile",menu_select:this.data_key_form[this.key_form].col_id,"column3.role_choose_right":"","column3.role_choose_left":"","column2.role_name_copying":"",column3_role_left_select:0,role_name_adding_input:"",role_name_copying_selected:"",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,menu_invoke_aprrove:[],O9_Roles_InvokeApprove_Table_header:[],O9_Roles_InvokeApprove_Table_body:[],menu_invoke_aprrove_select:{},O9_Roles_Add_and_Remove_Role_Name:[],O9_Roles_Add_and_Remove_Role_Name_select:"",O9_Roles_User_assignment_table_left:[],O9_Roles_User_assignment_table_right:[],O9_RolesUser_assignment_Role_Name_Left:[],O9_RolesUser_assignment_Role_Name_Right:[],user_assignment_select:"",O9_Roles_Invoke_limit_menu:[],O9_Roles_Invoke_limit_menu_select:{},O9_Roles_Approve_limit_menu:[],O9_Roles_Approve_limit_menu_select:{},O9_Roles_InvokeLimit_Table:[],O9_Roles_ApproveLimit_Table:[],table_user_profile_user_in_role:[],invoke_limit_header:[],approve_limit_header:[],Col3_Assignment_Search:{},invoke_limit_search_value:{},approve_limit_search_value:{}},this.menu_form=[{title:"Roles Profile",child:["Invoke - Aprrove","Add - Remove","User Assignment"]},{title:"Invoke Limit",child:[]},{title:"Approve Limit",child:[]}],this.user_profile=s.ZP.context_get("user_acc"),this.stateData={form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],abs_select:(t,e)=>{this.setState({menu_select:e})}},column1:{tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},title_table_up:"OPEARTION",table_up:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_up_data:[],table_up_config:[],title_table_down:"VERIFICATION",table_down:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_down_data:[],table_down_config:[]},column4:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchInvokeLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}]},column5:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchApproveLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]},column2:{role_name_adding:{dataFull:{config:{default:{title:"Role Name (for adding)",type:"text",class:"col-sm-5",code_form_component:"role_name_adding"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:t=>{this.CheckAddRoleName(t)}},listButton:[{dataFull:{config:{default:{title:"Add",icon:"add_circle_outline"},cmd:{}}},abs_Click:()=>{this.setState({addAndRemove_btnAddClick:!0})}},{dataFull:{config:{default:{title:"Delete",icon:"highlight_off"},cmd:{}}},abs_Click:this.removeRoleName},{dataFull:{config:{default:{title:"Save",type:"primary",icon:"check_circle_outline"},cmd:{}}},abs_Click:this.AddRoleName}],role_name_copying:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Role Name (for copying or deleting)",type:"text",class:"col-sm-5",code_form_component:"role_name_copying"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:[],input_value:"123",search_value:""},abs_Change:this.abs_role_name_copying_select,abs_search:t=>{this.onSearch(t,"column2.role_name_copying")}}},column3:{table_in_role:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"User Code",config:{width:"",isFrozen:!1}},{title:"User Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_in_role_data:[{data:[{data:"2"},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_in_role_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:t=>{this.onSearch(t,"column3.role_choose_left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:t=>{this.onSearch(t,"column3.role_choose_right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_left},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_left_data:[{data:[{data:"2"},{value:!1,abs_Click:this.abs_Ckeck},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_right},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_right_data:[{data:[],config:{value:!0}}],table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.getAllRoleAction(),await this.callAPI("O9_Roles_InvokeApprove_Menu").then((t=>{let{O9_Roles_InvokeApprove_Menu:e}=t||[];this.setState({menu_invoke_aprrove:e})}));let t=[],e=[{roleid:0,rolename:"All"}],i=[],o=[],a=[];await this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((e=>{t=e.O9_Roles_Add_and_Remove_Role_Name})),await this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((t=>{e=e.concat(t.O9_RolesUser_assignment_Role_Name_Left)})),await this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((t=>i=t.O9_RolesUser_assignment_Role_Name_Right)),e.length>0&&await this.callAPI("O9_Roles_User_assignment_table",{roleid:0}).then((t=>{o=t.O9_Roles_User_assignment_table})),i.length>0&&await this.callAPI("O9_Roles_User_assignment_table",i[0]).then((t=>{a=t.O9_Roles_User_assignment_table})),this.setState({role_left:e[0],column3_role_right_select:i[0],column3_role_left_select:e[0],column2_role_select:t[0],O9_Roles_Add_and_Remove_Role_Name:t,O9_RolesUser_assignment_Role_Name_Left:e,O9_RolesUser_assignment_Role_Name_Right:i,O9_Roles_User_assignment_table_left:o,O9_Roles_User_assignment_table_right:a,O9_Roles_Invoke_limit_menu:t,O9_Roles_Approve_limit_menu:t,isLoading:!1},(()=>{}))}render(){const t=(0,_.RP)("uFormLoading");return(0,c.jsxs)(o.Fragment,{children:[this.state.isLoading?(0,c.jsx)(t,{}):null,(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(ke,{stateData:this.stateData})})]})}convertCurrency(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t||0===t||(t=""),t=String(t);let e=t.replace(/,/g,"");return(0,yt.Nx)(e,2)}reloadTableWithMenuInvokeApprove(t){let e=this.state.menu_invoke_aprrove_select,i=[];this.callAPI("O9_Roles_InvokeApprove_Table_body",e).then((e=>{i=e.O9_Roles_InvokeApprove_Table_body,this.setState({O9_Roles_InvokeApprove_Table_body:i,isLoading:!!t})}))}}const we=Oe,Ce=t=>{switch(t.form_code){case"myProfile":return l.ZP.quickPost([{txcode:"#sys:bo-load-myProfile",input:{}}],{}),!0;case"BO_015003011":return function(){var t=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Qt,{mapping_key:t},t)},t))}(),!0;case"016002":return function(){var t=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(bt,{mapping_key:t},t)},t))}(),!0;case"BO_015003003":return function(){var t=s.ZP.autoID();"ncbsCbs"===(0,s.Py)()||"ncbsAdmin"===(0,s.Py)()||"shwebank"===(0,s.Py)()?(0,F.Yr)([{txcode:"#sys:bo-load-allApp"}],{}).then((e=>{let i=s.ZP.foGetData("list_appliaction",e);s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(It,{list_app:i,mapping_key:t},t)},t))})):s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(kt,{mapping_key:t},t)},t))}(),!0;case"ncbs_role_management":return function(){var t=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Ct,{mapping_key:t},t)},t))}(),!0;case"015001005":return function(){var t=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Bt,{mapping_key:t},t)},t))}(),!0;case"BO_003005":return function(){let t=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(ge,{mapping_key:t},t)},t))}(),!0;case"BO_011001":return function(){let t=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(be,{mapping_key:t},t)},t))}(),!0;case"BO_015003009":return function(){var t=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(De,{mapping_key:t},t)},t))}(),!0;case"BO_015003008":return function(){var t=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(we,{mapping_key:t},t)},t))}(),!0;case"mangerFeedback":return l.ZP.quickPost([{txcode:"#sys:bo-feedback-loadData",input:{}}],{}),!0}return!1};var xe=i(4324);let Se={designform:"Design Form",dev:"Developer",o9:"Optimize 9",sys:"System"};class Me extends o.Component{constructor(t){super(t),this.loadDataToState=()=>{let t=this.createListApp(this.allListApp),e=this.createListLangOfApp(this.lang_system_),i=[],o={};return this.allListApp.forEach((t=>{i.push({id:t.app,title:Se[t.app]});const e={title:t.app,btn_save:{dataFull:{config:{default:{title:"Save",type:"primary",class:"",icon:""}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.test3}},table_list_forms:{title:"LIST FORMS",table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table:{dataFull:{Header:{data:[{title:"Form structure",config:{width:"",isFrozen:!1}},{title:"English",config:{width:"",isFrozen:!1}},{title:"Ti\u1ebfng vi\u1ec7t",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:[{data:[{data:"Form"},{data:" Admin User Profile "},{data:" Qu\u1ea3n tr\u1ecb ng\u01b0\u1eddi d\xf9ng"}],config:{value:!1}},{data:[{data:"-- Layout"},{data:"Profile  "},{data:"H\u1ed3 s\u01a1"}],config:{value:!1}},{data:[{data:"---- View"},{data:"Button"},{data:"N\xfat b\u1ea5m"}],config:{value:!1}},{data:[{data:"------- Component"},{data:"Text input"},{data:"\xd4 nh\u1eadp li\u1ec7u"}],config:{value:!1}}]},table_list_lang:{title:"LIST LANG",table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table:{Header:{data:this.getHeaderTableLangDetailConfig(this.lang_system_),config:{mode:{hasSearch:!1}}}},table_data:{data:this.getDataTableLangDetailConfig(this.lang_arr,this.lang_system_)}}};o[t.app]=e})),{form:{dataFull:{config:{default:{title:"Lang Manager Global"}},cmd:{visibility:""}}},form_add:{code:{dataFull:{config:{default:{title:"Code lang",class:"col-md-4 ",required:!0,placeholder:"Code lang",code_form_component:"code"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},name:{dataFull:{config:{default:{title:"Name lang",class:"col-md-4 ",required:!1,placeholder:"Name lang",code_form_component:"name"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},image:{dataFull:{config:{default:{title:"Image",class:"col-md-4 ",required:!1,placeholder:"Image",code_form_component:"image"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},of_app:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No Result",title:"Of App",class:"col-md-4",required:!1,code_form_component:"of_app"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:t,search_value:"",abs_Change:this.onChangeValueSelect_formAdd,abs_search:this.search}},lang_copy:{dataFull:{config:{default:{search:{placeholder:"Lang copy"},data_status:"No Result",title:"Lang copy",class:"col-md-4",required:!1,code_form_component:"lang_copy"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:e,search_value:"",abs_Change:this.onChangeValueSelect_formAdd,abs_search:this.search}},btn_add:{dataFull:{config:{default:{title:"Add",type:"primary",class:"",icon:"",code_form_component:"btn_add"}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.test3}}},tab:{data:i,abs_select:this.test},list_app:o}},this.createListLangOfApp=t=>{let e=[];return t.forEach((t=>{e.push({title:t.view,value:t.key,selected:t.selected})})),e},this.createListApp=t=>{let e=[];return t.forEach((t=>{e.push({title:Se[t.app],value:t.app}),e[0].selected=!0})),e},this.createListFormTable=t=>(this.allListForms.forEach((t=>{})),[]),this.onChangeValue_formAdd=(t,e)=>{let{stateData:i}=this.state;i.form_add[e].dataFull.value=t.target.value,this.setState({stateData:i})},this.onChangeValueSelect_formAdd=(t,e,i)=>{let{stateData:o}=this.state;if(i){for(const e of o.form_add[i].dataFull.data)e.selected=e.value===t;this.setState({stateData:o})}},this.table_input_change=(t,e,i,o)=>{let a=t.target.value;if(0!==o||0===o&&a.length<=2){let t=this.state.stateData;t.table_lang_data.data[i].all_column[o].data=a,t.table_lang_data.data[i].all_column[o].isUpdate=!1,this.updateLanguageSystem(i,this.mappingIndexToKeyLanguage[o.toString()],a),this.setState({stateData:t})}},this.table_input_change_detail=(t,e,i,o)=>{let a=t.target.value,s=this.state.stateData;if(s.table_lang_detail_data.data[i].all_column[o].data=a,s.table_lang_detail_data.data[i].all_column[o].isUpdate=!1,o>1){let t=this.logicState.lang_system[o-2].key;this.logicState.data[i].lang[t]=a}else this.logicState.data[i].key=a;this.setState({stateData:s})},this.clickAddLangButtonHandler=()=>{let t=prompt(this.logicState.languages.alert,"");if(null!=t&&"yes"===t){this.logicState.lang_system.push({key:"",view:"",img:""});let{stateData:t}=this.state;t.table_lang_data.data=this.getDataTableLangConfig(this.logicState.lang_system),this.setState({stateData:t})}},this.clickAddLangDetailHandler=()=>{let t=prompt(this.logicState.languages.alert,"");if(null!=t&&"yes"===t){let t={key:"",lang:{}};this.logicState.data.push(t);let{stateData:e}=this.state,i=this.getEachRowDataLangDetailConfig(t,e.table_lang_detail_data.data.length,this.logicState.lang_system);e.table_lang_detail_data.data.push(i),this.setState({stateData:e})}},this.changeKeyLanguage=t=>{let e={note:s.ZP.getLang("note"),title_detail:s.ZP.getLang("langApplication_titleDetail"),title_:s.ZP.getLang("langApplication_title"),des_:s.ZP.getLang("langApplication_des"),lang_code:s.ZP.getLang("langApplication_code"),lang_name:s.ZP.getLang("langApplication_name"),lang_img:s.ZP.getLang("langApplication_img"),lowercase:s.ZP.getLang("langApplication_lowercase"),btn_save:s.ZP.getLang("langApplication_btnSave"),btn_add:s.ZP.getLang("langApplication_btnAdd"),btn_save_detail:s.ZP.getLang("langApplication_btnSaveDetail"),btn_add_detail:s.ZP.getLang("langApplication_btnAddDetail"),alert:s.ZP.getLang("langApplication_alert")};if(void 0!==t)return e;let i=this.logicState.infoA;i.title=s.ZP.getLang("langApplication_title"),i.des=s.ZP.getLang("langApplication_des"),i.lang_form.vi=s.ZP.getLang("langApplication_title"),i.lang_form.en=s.ZP.getLang("langApplication_title"),this.logicState.languages=e,this.logicState.infoA=i,this.changeLanguageTemplate(e)},this.saveLangSystem=()=>{let t=s.ZP.getConfigUserDefault("");if(void 0!==t){t.list_lang_config=this.logicState.lang_system,l.ZP.quickPost([{txcode:"#sys:bo-save-langList",input:{content:t}}],{});let{stateData:e}=this.state;e.table_lang_data.data=this.getDataTableLangConfig(this.logicState.lang_system,!0),e.table_lang_detail_header.Header.data=this.getHeaderTableLangDetailConfig(this.logicState.lang_system),e.table_lang_detail_data.data=this.getDataTableLangDetailConfig(this.logicState.data,this.logicState.lang_system),this.setState({stateData:e})}},this.saveLangDetail=()=>{let t=this.logicState.data,e=this.logicState.lang_system,i={};for(let s=0;s<e.length;s++)i[e[s].key]={};for(let s=0;s<t.length;s++)if(void 0!==t[s].lang&&void 0!==t[s].key){let e=t[s].lang,o=t[s].key.trim();for(let t in e)i[t][o]=e[t].trim()}let o=[];for(let s in i)o[o.length]={key:s,content:i[s]};l.ZP.quickPost([{txcode:"#sys:bo-save-langDetail",input:{lang_detail:o}}],{});let{stateData:a}=this.state;a.table_lang_detail_data.data=this.getDataTableLangDetailConfig(this.logicState.data,this.logicState.lang_system,!0),this.setState({stateData:a})},this.getInfoA=()=>this.logicState.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.key_form="langManagerGlobal",this.DESIGNFORM_CODE_DATABASE="designForm",this.lang_system_=s.ZP.getConfigUserDefault("list_lang_config"),this.LangManagerGlobalForm=(0,_.Iq)("langManagerGlobal"),this.allListForms=[],this.allListApp=[];let e=this.props.list_lang_data,i=[];for(let a in e){let t=e[a];for(let e in t){let o=t[e],s=this.checkHasKey(i,e);if(-1!==s){let t=i[s];t.lang[a]=o,i[s]=t}else{let t={key:e,lang:{}};t.lang[a]=o,i[i.length]=t}}}i.sort((function(t,e){return t.key===e.key?0:t.key>e.key?1:-1}));let o=this.changeKeyLanguage("start");this.mappingIndexToKeyLanguage={0:"key",1:"view",2:"img"},this.lang=e,this.languages_=o,this.lang_arr=i,this.logicState={data:i,lang_system:this.lang_system_,infoA:{lang_form:{vi:s.ZP.getLang("langApplication_title"),en:s.ZP.getLang("langApplication_title")},title:"Global language management",des:"Qu\u1ea3n l\xfd t\u1ea5t c\u1ea3 ng\xf4n ng\u1eef thu\u1ed9c \u1ee9ng d\u1ee5ng, ng\xf4n ng\u1eef \u0111\xe3 t\u1ea1o kh\xf4ng \u0111\u01b0\u1ee3c x\xf3a!",openOne:"true",form_code:this.key_form,ofModal:!1},check_screen_width:void 0,languages:o},this.state={isReload:!1,visibility:"",stateData:{}}}getDataTableLangConfig(){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>({all_column:[{data:e.key,isUpdate:t,dataItem:{},abs_Change:this.table_input_change},{data:e.view,isUpdate:t,dataItem:{},abs_Change:this.table_input_change},{data:e.img||"",isUpdate:t,dataItem:{},abs_Change:this.table_input_change}]})))}getDataTableLangDetailConfig(){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(((i,o)=>this.getEachRowDataLangDetailConfig(i,o,t,e)))}getEachRowDataLangDetailConfig(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,a=[{data:e+1,config:{mode:"center"}},{data:t.key,isUpdate:o,dataItem:{},abs_Change:this.table_input_change_detail}];return i.forEach((e=>{a.push({data:void 0!==t.lang[e.key]?t.lang[e.key]:"",isUpdate:o,dataItem:{},abs_Change:this.table_input_change_detail})})),{all_column:a}}getHeaderTableLangDetailConfig(){let t=[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"Key",config:{width:"",isFrozen:!1}}];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>{t.push({title:e.view,config:{width:"",isFrozen:!1}})})),t}updateLanguageSystem(t,e,i){this.logicState.lang_system[t][e]=i}changeLanguageTemplate(t){let{stateData:e}=this.state;e.form.config.default.title=t.title_,e.form.config.default.title_sub=t.des_,e.layout.dataFull.config.title=t.title_detail,e.save_lang.dataFull.config.default.title=t.btn_save,e.add_lang.dataFull.config.default.title=t.btn_add,e.save_detail.dataFull.config.default.title=t.btn_save_detail,e.add_detail.dataFull.config.default.title=t.btn_add_detail,e.table_lang_header.Header.data[0].title=`${t.lang_code} ${t.lowercase}`,e.table_lang_header.Header.data[1].title=t.lang_name,e.table_lang_header.Header.data[2].title=t.lang_img,this.setState({stateData:e})}checkHasKey(t,e){for(let i=0;i<t.length;i++)if(void 0!==t[i].key&&t[i].key===e)return i;return-1}render(){if("none"===this.state.visibility)return null;const t=this.LangManagerGlobalForm;return(0,c.jsx)(t,{stateData:this.state.stateData})}componentDidMount(){let{stateData:t}=this.state;s.ZP.addAppAuto(this.key_form,this,this.logicState.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.allListForms=this.props.list_forms.map((t=>t[this.DESIGNFORM_CODE_DATABASE])),this.allListApp=this.props.list_app,t=this.loadDataToState(),this.setState({stateData:t})}}const Pe=Me;let Te={designform:"Design Form",dev:"Developer",o9:"Optimize 9",sys:"System"};class Ie extends o.Component{constructor(t){super(t),this.loadDataToState=()=>{let t=this.createListApp(this.allListApp),e=this.createListLangOfApp(this.lang_system_),i=[],o={};return this.allListApp.forEach((t=>{i.push({id:t.app,title:Te[t.app]});const e={title:t.app,btn_save:{dataFull:{config:{default:{title:"Save",type:"primary",class:"",icon:""}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.test3}},table_list_forms:{title:"LIST FORMS",table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table:{dataFull:{Header:{data:[{title:"Form structure",config:{width:"",isFrozen:!1}},{title:"English",config:{width:"",isFrozen:!1}},{title:"Ti\u1ebfng vi\u1ec7t",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:[{data:[{data:"Form"},{data:" Admin User Profile "},{data:" Qu\u1ea3n tr\u1ecb ng\u01b0\u1eddi d\xf9ng"}],config:{value:!1}},{data:[{data:"-- Layout"},{data:"Profile  "},{data:"H\u1ed3 s\u01a1"}],config:{value:!1}},{data:[{data:"---- View"},{data:"Button"},{data:"N\xfat b\u1ea5m"}],config:{value:!1}},{data:[{data:"------- Component"},{data:"Text input"},{data:"\xd4 nh\u1eadp li\u1ec7u"}],config:{value:!1}}]},table_list_lang:{title:"LIST LANG",table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table:{Header:{data:this.getHeaderTableLangDetailConfig(this.lang_system_),config:{mode:{hasSearch:!1}}}},table_data:{data:this.getDataTableLangDetailConfig(this.lang_arr,this.lang_system_)}}};o[t.app]=e})),{form:{dataFull:{config:{default:{title:"Lang Manager Global"}},cmd:{visibility:""}}},form_add:{code:{dataFull:{config:{default:{title:"Code lang",class:"col-md-4 ",required:!0,placeholder:"Code lang",code_form_component:"code"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},name:{dataFull:{config:{default:{title:"Name lang",class:"col-md-4 ",required:!1,placeholder:"Name lang",code_form_component:"name"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},image:{dataFull:{config:{default:{title:"Image",class:"col-md-4 ",required:!1,placeholder:"Image",code_form_component:"image"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},of_app:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No Result",title:"Of App",class:"col-md-4",required:!1,code_form_component:"of_app"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:t,search_value:"",abs_Change:this.onChangeValueSelect_formAdd,abs_search:this.search}},lang_copy:{dataFull:{config:{default:{search:{placeholder:"Lang copy"},data_status:"No Result",title:"Lang copy",class:"col-md-4",required:!1,code_form_component:"lang_copy"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:e,search_value:"",abs_Change:this.onChangeValueSelect_formAdd,abs_search:this.search}},btn_add:{dataFull:{config:{default:{title:"Add",type:"primary",class:"",icon:"",code_form_component:"btn_add"}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.test3}}},tab:{data:i,abs_select:this.test},list_app:o}},this.abs_change=(t,e,i)=>{let o,a=this.state.data_select,s=this.state.input_value;for(let r=0;r<a.length;r++)void 0===a[r].selected&&(a[r].selected=!1),a[r].value===t&&(a[r].selected=!a[r].selected,a[r].selected&&(o=a[r]));for(let r=0;r<s.length;r++){var n;(null===(n=s[r])||void 0===n?void 0:n.value)===t&&s.splice(r,1)}s.push(o),this.setState({input_value:s,data_select:a})},this.click=t=>{},this.table_input_change_detail=(t,e,i,o)=>{let a=this.state.stateData;a.table_search_rows[i][o].data=t.target.value,this.setState({stateData:a})},this.table_select_change_detail=(t,e,i,o,a,s)=>{let{stateData:n}=this.state,r=n.table_search_rows[i][o].data.filter((t=>!0===t.selected));r.length>0&&(r[0].selected=!1);let l=n.table_search_rows[i][o].data.filter(((t,e)=>e===s));l.length>0&&(l[0].selected=!0,n.table_search_rows[i][o].value=l[0].title,this.setState({stateData:n}))},this.abs_calendar_changeMonth=t=>{},this.abs_calendar_submit=t=>{},this.abs_calendar_chooseYear=t=>{},this.abs_calendar_changeYear=t=>{},this.abs_calendar_chooseMonth=t=>{},this.abs_calendar_openCalendar=()=>{},this.abs_calendar_changeDay=t=>{},this.abs_calendar_reset=()=>{},this.onChangeValueSelect_formAdd=(t,e,i)=>{let{stateData:o}=this.state;if(i){for(const e of o.form_add[i].dataFull.data)e.selected=e.value===t;this.setState({stateData:o})}},this.getInfoA=()=>this.logicState.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.key_form="activity",this.DESIGNFORM_CODE_DATABASE="designForm",this.ActivityForm=(0,_.Iq)("activity"),this.logicState={infoA:{lang_form:{vi:s.ZP.getLang("langApplication_title"),en:s.ZP.getLang("langApplication_title")},title:"User activity",des:"",openOne:"true",form_code:this.key_form,ofModal:!1},check_screen_width:void 0},this.state={isReload:!1,visibility:"",stateData:{title:{date_from_to:"to"},form:{dataFull:{config:{default:{title:"User Activity Monitoring"}},cmd:{visibility:""}}},app_code:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No Result",title:"App code",class:"col-md-4",required:!0},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},data:[{title:"New",value:"123"},{title:"New acc",value:"1234"},{title:"New aa",value:"12345"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New aaaa",value:"122",selected:!0}],search_value:"",abs_Change:this.abs_change,abs_search:this.search,input_value:[{title:"New aaaa",value:"new_Aa"}]}},user_select:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No Result",title:"User",class:"col-md-4",required:!1},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},data:[{title:"New",value:"123"},{title:"New acc",value:"1234"},{title:"New aa",value:"12345"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New aaaa",value:"122",selected:!0}],search_value:"",abs_Change:this.abs_change,abs_search:this.search,input_value:[{title:"New aaaa",value:"new_Aa"}]}},date_form:{dataFull:{config:{default:{subTitle_isShow:!0,subTitle:"(dd/mm/yyyy)",title:"Date,time",class:"col-sm-3 ",required:!0},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{textAlign:"right"}},value:"20/11/2020",timepicker:{hour:"00",time:"00",title:"(24 hours)"},calendar_data:{value_current:"123",today:{title:"Today"},config:{days_title:[{title:"SUN",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"SAT",type:"gray"}]},list_months:[{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September",selected:!0},{title:"September"},{title:"September"}],list_years:{value:2020,data:[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025]},list_days:[{title:"30",type:"gray"},{title:"31",type:"gray"},{title:"1"},{title:"2"},{title:"3"},{title:"4"},{title:"5"},{title:"6"},{title:"7",type:"primary"},{title:"8"},{title:"9"},{title:"10"},{title:"11"},{title:"12"},{title:"13",isDisable:!0},{title:"14"},{title:"15"},{title:"16",isDisable:!0},{title:"17",isDisable:!0},{title:"18",isDisable:!0},{title:"19"},{title:"20",isDisable:!0},{title:"21"},{title:"22"},{title:"23"},{title:"24"},{title:"25"},{title:"26"},{title:"27"},{title:"28"},{title:"29"},{title:"30"},{title:"1",type:"gray"},{title:"2",type:"gray"},{title:"3",type:"gray"}]},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_changeDay:this.abs_calendar_changeDay,abs_calendar_reset:this.abs_calendar_reset,abs_calendar_today:this.abs_calendar_today}},date_to:{dataFull:{config:{default:{subTitle_isShow:!0,subTitle:"(dd/mm/yyyy)",title:"date, time",class:"col-sm-3 ",required:!0},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{textAlign:"right"}},timepicker:{hour:"00",time:"00",title:"(24 hours)"},value:"20/11/2020",calendar_data:{value_current:"123",today:{title:"Today"},config:{days_title:[{title:"SUN",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"SAT",type:"gray"}]},list_months:[{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September",selected:!0},{title:"September"},{title:"September"}],list_years:{value:2020,data:[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025]},list_days:[{title:"30",type:"gray"},{title:"31",type:"gray"},{title:"1"},{title:"2"},{title:"3"},{title:"4"},{title:"5"},{title:"6"},{title:"7",type:"primary"},{title:"8"},{title:"9"},{title:"10"},{title:"11"},{title:"12"},{title:"13",isDisable:!0},{title:"14"},{title:"15"},{title:"16",isDisable:!0},{title:"17",isDisable:!0},{title:"18",isDisable:!0},{title:"19"},{title:"20",isDisable:!0},{title:"21"},{title:"22"},{title:"23"},{title:"24"},{title:"25"},{title:"26"},{title:"27"},{title:"28"},{title:"29"},{title:"30"},{title:"1",type:"gray"},{title:"2",type:"gray"},{title:"3",type:"gray"}]},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_changeDay:this.abs_calendar_changeDay,abs_calendar_reset:this.abs_calendar_reset,abs_calendar_today:this.abs_calendar_today}},btn_search:{dataFull:{config:{default:{title:"Search",type:"primary",icon:"search"}},abs_Click:this.abs_Click}},btn_export:{dataFull:{config:{default:{title:"Export",type:"primary",icon:"open_in_new"}},abs_Click:this.abs_Click}},table_activity:{header:this.getConfigTableSearch(),data:this.getConfigTableSearchRows(),config_row:this.getConfigTableSearchRowsCofig()}}}}getConfigTableSearch(){return{dataFull:{Header:{data:[{title:"Date Time",id:"dt",sort_active:"up",config:{width:""}},{title:"User Code",id:"uc",sort_active:"",config:{width:"",isFrozen:!1}},{title:"Activity",id:"act",sort_active:"",config:{width:"",isFrozen:!1}},{title:"ActionGroup",sort_active:"",id:"ag",config:{width:"",isFrozen:!1}},{title:"Section",sort_active:"",id:"st",config:{width:"",isFrozen:!1}},{title:"App info",sort_active:"",id:"ai",config:{width:"300px",isFrozen:!1}}],config:{mode:{hasSearch:!0,isSort:!0,isFrozenHeader:!0}}},uPagination:{abs_PagingActive:this.pagingActive,abs_setRecordActive:this.abs_setRecordActive,result_total:10,paging_index:1,paging_record:[{number:5,selected:!0},{number:10}]},abs_search:this.search_table,abs_SortUp:this.sort_up,abs_SortDown:this.sort_down}}}getConfigTableSearchRows(){return[[{data:"20-10-2020 09:50:03"},{data:{header:{dataFull:{Header:{data:[{title:"Code",config:{width:""}},{title:"Full Name",config:{width:"",isFrozen:!1}}],config:{}}}},data:[{data:"ac01"},{data:"Le Minh Thanh"}],config_row:[{type:"uTableColumnDefault"},{type:"uTableColumnDefault"}]}},{data:"Login"},{data:"Login/Logout"},{data:{header:{dataFull:{Header:{data:[{title:"Token",config:{width:""}},{title:"IP",config:{width:"",isFrozen:!1}},{title:"WS",config:{width:"",isFrozen:!1}}],config:{}}}},data:[{data:"7b593f7a-bd59-47f3-a263-cf4cd232883c"},{data:"192.168.12.30"},{data:"Chrome- 86.0.4240.193"}],config_row:[{type:"uTableColumnDefault"},{type:"uTableColumnDefault"},{type:"uTableColumnDefault"}]}},{data:{header:{dataFull:{Header:{data:[{title:"App code",config:{width:""}},{title:"API",config:{width:"",isFrozen:!1}},{title:"Request",config:{width:"",isFrozen:!1}},{title:"Response",config:{width:"",isFrozen:!1}}],config:{}}}},data:[{data:"CMS2.0"},{data:"192.168.12.30:8080/api/o9/ctm-create/"},{data:{title:"Copy",icon:"copy",dataItem:{abs:"123"},abs_Click:this.click}},{data:{title:"Copy",icon:"copy",dataItem:{abs:"123"},abs_Click:this.click}}],config_row:[{type:"uTableColumnDefault"},{type:"uTableColumnDefault"},{type:"uTableColumnLink"},{type:"uTableColumnLink"}]}}]]}getConfigTableSearchRowsCofig(){return[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnTable"},{type:"uTableColumnDefault"},{type:"uTableColumnDefault"},{type:"uTableColumnTable"},{type:"uTableColumnTable"}]}render(){if("none"===this.state.visibility)return null;const t=this.ActivityForm;return(0,c.jsx)(t,{stateData:this.state.stateData})}componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.logicState.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key)}}const Fe=Ie;class Ne extends o.Component{constructor(t){super(t),this.key_form="test_123987654",this.stateHidden={infoA:{lang_form:{vi:s.ZP.getLang("test_123987654_title"),en:s.ZP.getLang("test_123987654_title")},title:s.ZP.getLang("test_123987654_title"),des:"Form test!",openOne:"true",ofModal:!1},visibility:!1,user_info:{}},this.state={}}componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.stateHidden.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key)}render(){const t=(0,_.Iq)("jwebui_404");return console.log("loadTest_123987654===list_form_ne====",this.props.list_form_ne),console.log("loadTest_123987654===list_app_ne====",this.props.list_app_ne),(0,c.jsx)("div",{children:(0,c.jsx)(t,{stateData:{form:{cmd:{visible:!0},title:"The webpage you are looking for is not here!"},btn_home:{dataFull:{config:{default:{title:"GO TO HOMEPAGE hehe",type:"",class:""}},abs_Click:this.abs_Click}}}})})}}const Le=Ne;function Ee(){return Ee=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},Ee.apply(this,arguments)}class je{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,i){let o=[];return this.decompose(0,t,o,2),i.length&&i.decompose(0,i.length,o,3),this.decompose(e,this.length,o,1),Re.from(o,this.length-(e-t)+i.length)}append(t){return this.replace(this.length,this.length,t)}slice(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,i=[];return this.decompose(t,e,i,0),Re.from(i,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),i=this.length-this.scanIdentical(t,-1),o=new Ue(this),a=new Ue(t);for(let s=e,n=e;;){if(o.next(s),a.next(s),s=0,o.lineBreak!=a.lineBreak||o.done!=a.done||o.value!=a.value)return!1;if(n+=o.value.length,o.done||n>=i)return!0}}iter(){return new Ue(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)}iterRange(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return new Be(this,t,e)}iterLines(t,e){let i;if(null==t)i=this.iter();else{null==e&&(e=this.lines+1);let o=this.line(t).from;i=this.iterRange(o,Math.max(o,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new Ye(i)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(0==t.length)throw new RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new Ze(t):Re.from(Ze.split(t,[])):je.empty}}class Ze extends je{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){let e=-1;for(let i of t)e+=i.length+1;return e}(t);super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,i,o){for(let a=0;;a++){let s=this.text[a],n=o+s.length;if((e?i:n)>=t)return new He(o,n,i,s);o=n+1,i++}}decompose(t,e,i,o){let a=t<=0&&e>=this.length?this:new Ze(ze(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(1&o){let t=i.pop(),e=Qe(a.text,t.text.slice(),0,a.length);if(e.length<=32)i.push(new Ze(e,t.length+a.length));else{let t=e.length>>1;i.push(new Ze(e.slice(0,t)),new Ze(e.slice(t)))}}else i.push(a)}replace(t,e,i){if(!(i instanceof Ze))return super.replace(t,e,i);let o=Qe(this.text,Qe(i.text,ze(this.text,0,t)),e),a=this.length+i.length-(e-t);return o.length<=32?new Ze(o,a):Re.from(Ze.split(o,[]),a)}sliceString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",o="";for(let a=0,s=0;a<=e&&s<this.text.length;s++){let n=this.text[s],r=a+n.length;a>t&&s&&(o+=i),t<r&&e>a&&(o+=n.slice(Math.max(0,t-a),e-a)),a=r+1}return o}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let i=[],o=-1;for(let a of t)i.push(a),o+=a.length+1,32==i.length&&(e.push(new Ze(i,o)),i=[],o=-1);return o>-1&&e.push(new Ze(i,o)),e}}class Re extends je{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let i of t)this.lines+=i.lines}lineInner(t,e,i,o){for(let a=0;;a++){let s=this.children[a],n=o+s.length,r=i+s.lines-1;if((e?r:n)>=t)return s.lineInner(t,e,i,o);o=n+1,i=r+1}}decompose(t,e,i,o){for(let a=0,s=0;s<=e&&a<this.children.length;a++){let n=this.children[a],r=s+n.length;if(t<=r&&e>=s){let a=o&((s<=t?1:0)|(r>=e?2:0));s>=t&&r<=e&&!a?i.push(n):n.decompose(t-s,e-s,i,a)}s=r+1}}replace(t,e,i){if(i.lines<this.lines)for(let o=0,a=0;o<this.children.length;o++){let s=this.children[o],n=a+s.length;if(t>=a&&e<=n){let r=s.replace(t-a,e-a,i),l=this.lines-s.lines+r.lines;if(r.lines<l>>4&&r.lines>l>>6){let a=this.children.slice();return a[o]=r,new Re(a,this.length-(e-t)+i.length)}return super.replace(a,n,r)}a=n+1}return super.replace(t,e,i)}sliceString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",o="";for(let a=0,s=0;a<this.children.length&&s<=e;a++){let n=this.children[a],r=s+n.length;s>t&&a&&(o+=i),t<r&&e>s&&(o+=n.sliceString(t-s,e-s,i)),s=r+1}return o}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof Re))return 0;let i=0,[o,a,s,n]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;o+=e,a+=e){if(o==s||a==n)return i;let r=this.children[o],l=t.children[a];if(r!=l)return i+r.scanIdentical(l,e);i+=r.length+1}}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.reduce(((t,e)=>t+e.length+1),-1),i=0;for(let u of t)i+=u.lines;if(i<32){let i=[];for(let e of t)e.flatten(i);return new Ze(i,e)}let o=Math.max(32,i>>5),a=o<<1,s=o>>1,n=[],r=0,l=-1,c=[];function d(t){let e;if(t.lines>a&&t instanceof Re)for(let i of t.children)d(i);else t.lines>s&&(r>s||!r)?(h(),n.push(t)):t instanceof Ze&&r&&(e=c[c.length-1])instanceof Ze&&t.lines+e.lines<=32?(r+=t.lines,l+=t.length+1,c[c.length-1]=new Ze(e.text.concat(t.text),e.length+1+t.length)):(r+t.lines>o&&h(),r+=t.lines,l+=t.length+1,c.push(t))}function h(){0!=r&&(n.push(1==c.length?c[0]:Re.from(c,l)),l=-1,r=c.length=0)}for(let u of t)d(u);return h(),1==n.length?n[0]:new Re(n,e)}}function Qe(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e9;for(let a=0,s=0,n=!0;s<t.length&&a<=o;s++){let r=t[s],l=a+r.length;l>=i&&(l>o&&(r=r.slice(0,o-a)),a<i&&(r=r.slice(i-a)),n?(e[e.length-1]+=r,n=!1):e.push(r)),a=l+1}return e}function ze(t,e,i){return Qe(t,[""],e,i)}je.empty=new Ze([""],0);class Ue{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof Ze?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,o=this.nodes[i],a=this.offsets[i],s=a>>1,n=o instanceof Ze?o.text.length:o.children.length;if(s==(e>0?n:0)){if(0==i)return this.done=!0,this.value="",this;e>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&a)==(e>0?0:1)){if(this.offsets[i]+=e,0==t)return this.lineBreak=!0,this.value="\n",this;t--}else if(o instanceof Ze){let a=o.text[s+(e<0?-1:0)];if(this.offsets[i]+=e,a.length>Math.max(0,t))return this.value=0==t?a:e>0?a.slice(t):a.slice(0,a.length-t),this;t-=a.length}else{let a=o.children[s+(e<0?-1:0)];t>a.length?(t-=a.length,this.offsets[i]+=e):(e<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(e>0?1:(a instanceof Ze?a.text.length:a.children.length)<<1))}}}next(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class Be{constructor(t,e,i){this.value="",this.done=!1,this.cursor=new Ue(t,e>i?-1:1),this.pos=e>i?t.length:0,this.from=Math.min(e,i),this.to=Math.max(e,i)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let i=e<0?this.pos-this.from:this.to-this.pos;t>i&&(t=i),i-=t;let{value:o}=this.cursor.next(t);return this.pos+=(o.length+t)*e,this.value=o.length<=i?o:e<0?o.slice(o.length-i):o.slice(0,i),this.done=!this.value,this}next(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class Ye{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,{done:e,lineBreak:i,value:o}=this.inner.next(t);return e?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(je.prototype[Symbol.iterator]=function(){return this.iter()},Ue.prototype[Symbol.iterator]=Be.prototype[Symbol.iterator]=Ye.prototype[Symbol.iterator]=function(){return this});class He{constructor(t,e,i,o){this.from=t,this.to=e,this.number=i,this.text=o}get length(){return this.to-this.from}}let Ve="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((t=>t?parseInt(t,36):1));for(let Mv=1;Mv<Ve.length;Mv++)Ve[Mv]+=Ve[Mv-1];function We(t){for(let e=1;e<Ve.length;e+=2)if(Ve[e]>t)return Ve[e-1]<=t;return!1}function Ge(t){return t>=127462&&t<=127487}const Je=8205;function qe(t,e){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?Ke:Xe)(t,e,!(arguments.length>3&&void 0!==arguments[3])||arguments[3])}function Ke(t,e,i){if(e==t.length)return e;e&&$e(t.charCodeAt(e))&&ti(t.charCodeAt(e-1))&&e--;let o=ei(t,e);for(e+=oi(o);e<t.length;){let a=ei(t,e);if(o==Je||a==Je||i&&We(a))e+=oi(a),o=a;else{if(!Ge(a))break;{let i=0,o=e-2;for(;o>=0&&Ge(ei(t,o));)i++,o-=2;if(i%2==0)break;e+=2}}}return e}function Xe(t,e,i){for(;e>0;){let o=Ke(t,e-2,i);if(o<e)return o;e--}return 0}function $e(t){return t>=56320&&t<57344}function ti(t){return t>=55296&&t<56320}function ei(t,e){let i=t.charCodeAt(e);if(!ti(i)||e+1==t.length)return i;let o=t.charCodeAt(e+1);return $e(o)?o-56320+(i-55296<<10)+65536:i}function ii(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function oi(t){return t<65536?1:2}const ai=/\r\n?|\n/;var si=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(si||(si={}));class ni{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e+1];t+=i<0?this.sections[e]:i}return t}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(t){for(let e=0,i=0,o=0;e<this.sections.length;){let a=this.sections[e++],s=this.sections[e++];s<0?(t(i,o,a),o+=a):o+=s,i+=a}}iterChangedRanges(t){di(this,t,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let i=this.sections[e++],o=this.sections[e++];o<0?t.push(i,o):t.push(o,i)}return new ni(t)}composeDesc(t){return this.empty?t:t.empty?this:ui(this,t)}mapDesc(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.empty?this:hi(this,t,e)}mapPos(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:si.Simple,o=0,a=0;for(let s=0;s<this.sections.length;){let n=this.sections[s++],r=this.sections[s++],l=o+n;if(r<0){if(l>t)return a+(t-o);a+=n}else{if(i!=si.Simple&&l>=t&&(i==si.TrackDel&&o<t&&l>t||i==si.TrackBefore&&o<t||i==si.TrackAfter&&l>t))return null;if(l>t||l==t&&e<0&&!n)return t==o||e<0?a:a+r;a+=r}o=l}if(t>o)throw new RangeError(`Position ${t} is out of range for changeset of length ${o}`);return a}touchesRange(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;for(let i=0,o=0;i<this.sections.length&&o<=e;){let a=o+this.sections[i++];if(this.sections[i++]>=0&&o<=e&&a>=t)return!(o<t&&a>e)||"cover";o=a}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let i=this.sections[e++],o=this.sections[e++];t+=(t?" ":"")+i+(o>=0?":"+o:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some((t=>"number"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ni(t)}static create(t){return new ni(t)}}class ri extends ni{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return di(this,((e,i,o,a,s)=>t=t.replace(o,o+(i-e),s)),!1),t}mapDesc(t){return hi(this,t,arguments.length>1&&void 0!==arguments[1]&&arguments[1],!0)}invert(t){let e=this.sections.slice(),i=[];for(let o=0,a=0;o<e.length;o+=2){let s=e[o],n=e[o+1];if(n>=0){e[o]=n,e[o+1]=s;let r=o>>1;for(;i.length<r;)i.push(je.empty);i.push(s?t.slice(a,a+s):je.empty)}a+=s}return new ri(e,i)}compose(t){return this.empty?t:t.empty?this:ui(this,t,!0)}map(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.empty?this:hi(this,t,e,!0)}iterChanges(t){di(this,t,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}get desc(){return ni.create(this.sections)}filter(t){let e=[],i=[],o=[],a=new pi(this);t:for(let s=0,n=0;;){let r=s==t.length?1e9:t[s++];for(;n<r||n==r&&0==a.len;){if(a.done)break t;let t=Math.min(a.len,r-n);li(o,t,-1);let s=-1==a.ins?-1:0==a.off?a.ins:0;li(e,t,s),s>0&&ci(i,e,a.text),a.forward(t),n+=t}let l=t[s++];for(;n<l;){if(a.done)break t;let t=Math.min(a.len,l-n);li(e,t,-1),li(o,t,-1==a.ins?-1:0==a.off?a.ins:0),a.forward(t),n+=t}}return{changes:new ri(e,i),filtered:ni.create(o)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e],o=this.sections[e+1];o<0?t.push(i):0==o?t.push([i]):t.push([i].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,i){let o=[],a=[],s=0,n=null;function r(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&!o.length)return;s<e&&li(o,e-s,-1);let t=new ri(o,a);n=n?n.compose(t.map(n)):t,o=[],a=[],s=0}return function t(l){if(Array.isArray(l))for(let e of l)t(e);else if(l instanceof ri){if(l.length!=e)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${e})`);r(),n=n?n.compose(l.map(n)):l}else{let{from:t,to:n=t,insert:c}=l;if(t>n||t<0||n>e)throw new RangeError(`Invalid change range ${t} to ${n} (in doc of length ${e})`);let d=c?"string"==typeof c?je.of(c.split(i||ai)):c:je.empty,h=d.length;if(t==n&&0==h)return;t<s&&r(),t>s&&li(o,t-s,-1),li(o,n-t,h),ci(a,o,d),s=n}}(t),r(!n),n}static empty(t){return new ri(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],i=[];for(let o=0;o<t.length;o++){let a=t[o];if("number"==typeof a)e.push(a,-1);else{if(!Array.isArray(a)||"number"!=typeof a[0]||a.some(((t,e)=>e&&"string"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==a.length)e.push(a[0],0);else{for(;i.length<o;)i.push(je.empty);i[o]=je.of(a.slice(1)),e.push(a[0],i[o].length)}}}return new ri(e,i)}static createSet(t,e){return new ri(t,e)}}function li(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0==e&&i<=0)return;let a=t.length-2;a>=0&&i<=0&&i==t[a+1]?t[a]+=e:0==e&&0==t[a]?t[a+1]+=i:o?(t[a]+=e,t[a+1]+=i):t.push(e,i)}function ci(t,e,i){if(0==i.length)return;let o=e.length-2>>1;if(o<t.length)t[t.length-1]=t[t.length-1].append(i);else{for(;t.length<o;)t.push(je.empty);t.push(i)}}function di(t,e,i){let o=t.inserted;for(let a=0,s=0,n=0;n<t.sections.length;){let r=t.sections[n++],l=t.sections[n++];if(l<0)a+=r,s+=r;else{let c=a,d=s,h=je.empty;for(;c+=r,d+=l,l&&o&&(h=h.append(o[n-2>>1])),!(i||n==t.sections.length||t.sections[n+1]<0);)r=t.sections[n++],l=t.sections[n++];e(a,c,s,d,h),a=c,s=d}}}function hi(t,e,i){let o=[],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?[]:null,s=new pi(t),n=new pi(e);for(let r=-1;;)if(-1==s.ins&&-1==n.ins){let t=Math.min(s.len,n.len);li(o,t,-1),s.forward(t),n.forward(t)}else if(n.ins>=0&&(s.ins<0||r==s.i||0==s.off&&(n.len<s.len||n.len==s.len&&!i))){let t=n.len;for(li(o,n.ins,-1);t;){let e=Math.min(s.len,t);s.ins>=0&&r<s.i&&s.len<=e&&(li(o,0,s.ins),a&&ci(a,o,s.text),r=s.i),s.forward(e),t-=e}n.next()}else{if(!(s.ins>=0)){if(s.done&&n.done)return a?ri.createSet(o,a):ni.create(o);throw new Error("Mismatched change set lengths")}{let t=0,e=s.len;for(;e;)if(-1==n.ins){let i=Math.min(e,n.len);t+=i,e-=i,n.forward(i)}else{if(!(0==n.ins&&n.len<e))break;e-=n.len,n.next()}li(o,t,r<s.i?s.ins:0),a&&r<s.i&&ci(a,o,s.text),r=s.i,s.forward(s.len-e)}}}function ui(t,e){let i=[],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?[]:null,a=new pi(t),s=new pi(e);for(let n=!1;;){if(a.done&&s.done)return o?ri.createSet(i,o):ni.create(i);if(0==a.ins)li(i,a.len,0,n),a.next();else if(0!=s.len||s.done){if(a.done||s.done)throw new Error("Mismatched change set lengths");{let t=Math.min(a.len2,s.len),e=i.length;if(-1==a.ins){let e=-1==s.ins?-1:s.off?0:s.ins;li(i,t,e,n),o&&e&&ci(o,i,s.text)}else-1==s.ins?(li(i,a.off?0:a.len,t,n),o&&ci(o,i,a.textBit(t))):(li(i,a.off?0:a.len,s.off?0:s.ins,n),o&&!s.off&&ci(o,i,s.text));n=(a.ins>t||s.ins>=0&&s.len>t)&&(n||i.length>e),a.forward2(t),s.forward(t)}}else li(i,0,s.ins,n),o&&ci(o,i,s.text),s.next()}}class pi{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?je.empty:t[e]}textBit(t){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length&&!t?je.empty:e[i].slice(this.off,null==t?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){-1==this.ins?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class _i{constructor(t,e,i){this.from=t,this.to=e,this.flags=i}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let t=3&this.flags;return 3==t?null:t}get goalColumn(){let t=this.flags>>5;return 33554431==t?void 0:t}map(t){let e,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.empty?e=i=t.mapPos(this.from,o):(e=t.mapPos(this.from,1),i=t.mapPos(this.to,-1)),e==this.from&&i==this.to?this:new _i(e,i,this.flags)}extend(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(t<=this.anchor&&e>=this.anchor)return fi.range(t,e);let i=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return fi.range(this.anchor,i)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid JSON representation for SelectionRange");return fi.range(t.anchor,t.head)}static create(t,e,i){return new _i(t,e,i)}}class fi{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return t.empty?this:fi.create(this.ranges.map((i=>i.map(t,e))),this.mainIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let e=0;e<this.ranges.length;e++)if(!this.ranges[e].eq(t.ranges[e]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new fi([this.main],0)}addRange(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return fi.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainIndex,i=this.ranges.slice();return i[e]=t,fi.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((t=>t.toJSON())),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.main||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new fi(t.ranges.map((t=>_i.fromJSON(t))),t.main)}static single(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return new fi([fi.range(t,e)],0)}static create(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==t.length)throw new RangeError("A selection needs at least one range");for(let i=0,o=0;o<t.length;o++){let a=t[o];if(a.empty?a.from<=i:a.from<i)return fi.normalized(t.slice(),e);i=a.to}return new fi(t,e)}static cursor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return _i.create(t,t,(0==e?0:e<0?4:8)|(null==i?3:Math.min(2,i))|(null!==o&&void 0!==o?o:33554431)<<5)}static range(t,e,i,o){let a=(null!==i&&void 0!==i?i:33554431)<<5|(null==o?3:Math.min(2,o));return e<t?_i.create(e,t,24|a):_i.create(t,e,(e>t?4:0)|a)}static normalized(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t[e];t.sort(((t,e)=>t.from-e.from)),e=t.indexOf(i);for(let o=1;o<t.length;o++){let i=t[o],a=t[o-1];if(i.empty?i.from<=a.to:i.from<a.to){let s=a.from,n=Math.max(i.to,a.to);o<=e&&e--,t.splice(--o,2,i.anchor>i.head?fi.range(n,s):fi.range(s,n))}}return new fi(t,e)}}function gi(t,e){for(let i of t.ranges)if(i.to>e)throw new RangeError("Selection points outside of document")}let mi=0;class vi{constructor(t,e,i,o,a){this.combine=t,this.compareInput=e,this.compare=i,this.isStatic=o,this.id=mi++,this.default=t([]),this.extensions="function"==typeof a?a(this):a}static define(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new vi(t.combine||(t=>t),t.compareInput||((t,e)=>t===e),t.compare||(t.combine?(t,e)=>t===e:bi),!!t.static,t.enables)}of(t){return new yi([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new yi(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new yi(t,this,2,e)}from(t,e){return e||(e=t=>t),this.compute([t],(i=>e(i.field(t))))}}function bi(t,e){return t==e||t.length==e.length&&t.every(((t,i)=>t===e[i]))}class yi{constructor(t,e,i,o){this.dependencies=t,this.facet=e,this.type=i,this.value=o,this.id=mi++}dynamicSlot(t){var e;let i=this.value,o=this.facet.compareInput,a=this.id,s=t[a]>>1,n=2==this.type,r=!1,l=!1,c=[];for(let d of this.dependencies)"doc"==d?r=!0:"selection"==d?l=!0:0==(1&(null!==(e=t[d.id])&&void 0!==e?e:1))&&c.push(t[d.id]);return{create:t=>(t.values[s]=i(t),1),update(t,e){if(r&&e.docChanged||l&&(e.docChanged||e.selection)||Di(t,c)){let e=i(t);if(n?!Ai(e,t.values[s],o):!o(e,t.values[s]))return t.values[s]=e,1}return 0},reconfigure:(t,e)=>{let r,l=e.config.address[a];if(null!=l){let a=ji(e,l);if(this.dependencies.every((i=>i instanceof vi?e.facet(i)===t.facet(i):!(i instanceof wi)||e.field(i,!1)==t.field(i,!1)))||(n?Ai(r=i(t),a,o):o(r=i(t),a)))return t.values[s]=a,0}else r=i(t);return t.values[s]=r,1}}}}function Ai(t,e,i){if(t.length!=e.length)return!1;for(let o=0;o<t.length;o++)if(!i(t[o],e[o]))return!1;return!0}function Di(t,e){let i=!1;for(let o of e)1&Ei(t,o)&&(i=!0);return i}function ki(t,e,i){let o=i.map((e=>t[e.id])),a=i.map((t=>t.type)),s=o.filter((t=>!(1&t))),n=t[e.id]>>1;function r(t){let i=[];for(let e=0;e<o.length;e++){let s=ji(t,o[e]);if(2==a[e])for(let t of s)i.push(t);else i.push(s)}return e.combine(i)}return{create(t){for(let e of o)Ei(t,e);return t.values[n]=r(t),1},update(t,i){if(!Di(t,s))return 0;let o=r(t);return e.compare(o,t.values[n])?0:(t.values[n]=o,1)},reconfigure(t,a){let s=Di(t,o),l=a.config.facets[e.id],c=a.facet(e);if(l&&!s&&bi(i,l))return t.values[n]=c,0;let d=r(t);return e.compare(d,c)?(t.values[n]=c,0):(t.values[n]=d,1)}}}const Oi=vi.define({static:!0});class wi{constructor(t,e,i,o,a){this.id=t,this.createF=e,this.updateF=i,this.compareF=o,this.spec=a,this.provides=void 0}static define(t){let e=new wi(mi++,t.create,t.update,t.compare||((t,e)=>t===e),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(Oi).find((t=>t.field==this));return((null===e||void 0===e?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:t=>(t.values[e]=this.create(t),1),update:(t,i)=>{let o=t.values[e],a=this.updateF(o,i);return this.compareF(o,a)?0:(t.values[e]=a,1)},reconfigure:(t,i)=>null!=i.config.address[this.id]?(t.values[e]=i.field(this),0):(t.values[e]=this.create(t),1)}}init(t){return[this,Oi.of({field:this,create:t})]}get extension(){return this}}const Ci=4,xi=3,Si=2,Mi=1;function Pi(t){return e=>new Ii(e,t)}const Ti={highest:Pi(0),high:Pi(Mi),default:Pi(Si),low:Pi(xi),lowest:Pi(Ci)};class Ii{constructor(t,e){this.inner=t,this.prec=e}}class Fi{of(t){return new Ni(this,t)}reconfigure(t){return Fi.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class Ni{constructor(t,e){this.compartment=t,this.inner=e}}class Li{constructor(t,e,i,o,a,s){for(this.base=t,this.compartments=e,this.dynamicSlots=i,this.address=o,this.staticValues=a,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]}static resolve(t,e,i){let o=[],a=Object.create(null),s=new Map;for(let h of function(t,e,i){let o=[[],[],[],[],[]],a=new Map;function s(t,n){let r=a.get(t);if(null!=r){if(r<=n)return;let e=o[r].indexOf(t);e>-1&&o[r].splice(e,1),t instanceof Ni&&i.delete(t.compartment)}if(a.set(t,n),Array.isArray(t))for(let e of t)s(e,n);else if(t instanceof Ni){if(i.has(t.compartment))throw new RangeError("Duplicate use of compartment in extensions");let o=e.get(t.compartment)||t.inner;i.set(t.compartment,o),s(o,n)}else if(t instanceof Ii)s(t.inner,t.prec);else if(t instanceof wi)o[n].push(t),t.provides&&s(t.provides,n);else if(t instanceof yi)o[n].push(t),t.facet.extensions&&s(t.facet.extensions,Si);else{let e=t.extension;if(!e)throw new Error(`Unrecognized extension value in extension set (${t}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(e,n)}}return s(t,Si),o.reduce(((t,e)=>t.concat(e)))}(t,e,s))h instanceof wi?o.push(h):(a[h.facet.id]||(a[h.facet.id]=[])).push(h);let n=Object.create(null),r=[],l=[];for(let h of o)n[h.id]=l.length<<1,l.push((t=>h.slot(t)));let c=null===i||void 0===i?void 0:i.config.facets;for(let h in a){let t=a[h],e=t[0].facet,o=c&&c[h]||[];if(t.every((t=>0==t.type)))if(n[e.id]=r.length<<1|1,bi(o,t))r.push(i.facet(e));else{let o=e.combine(t.map((t=>t.value)));r.push(i&&e.compare(o,i.facet(e))?i.facet(e):o)}else{for(let e of t)0==e.type?(n[e.id]=r.length<<1|1,r.push(e.value)):(n[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));n[e.id]=l.length<<1,l.push((i=>ki(i,e,t)))}}let d=l.map((t=>t(n)));return new Li(t,s,d,n,r,a)}}function Ei(t,e){if(1&e)return 2;let i=e>>1,o=t.status[i];if(4==o)throw new Error("Cyclic dependency between fields and/or facets");if(2&o)return o;t.status[i]=4;let a=t.computeSlot(t,t.config.dynamicSlots[i]);return t.status[i]=2|a}function ji(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}const Zi=vi.define(),Ri=vi.define({combine:t=>t.some((t=>t)),static:!0}),Qi=vi.define({combine:t=>t.length?t[0]:void 0,static:!0}),zi=vi.define(),Ui=vi.define(),Bi=vi.define(),Yi=vi.define({combine:t=>!!t.length&&t[0]});class Hi{constructor(t,e){this.type=t,this.value=e}static define(){return new Vi}}class Vi{of(t){return new Hi(this,t)}}class Wi{constructor(t){this.map=t}of(t){return new Gi(this,t)}}class Gi{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return void 0===e?void 0:e==this.value?this:new Gi(this.type,e)}is(t){return this.type==t}static define(){return new Wi((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map||(t=>t))}static mapEffects(t,e){if(!t.length)return t;let i=[];for(let o of t){let t=o.map(e);t&&i.push(t)}return i}}Gi.reconfigure=Gi.define(),Gi.appendConfig=Gi.define();class Ji{constructor(t,e,i,o,a,s){this.startState=t,this.changes=e,this.selection=i,this.effects=o,this.annotations=a,this.scrollIntoView=s,this._doc=null,this._state=null,i&&gi(i,e.newLength),a.some((t=>t.type==Ji.time))||(this.annotations=a.concat(Ji.time.of(Date.now())))}static create(t,e,i,o,a,s){return new Ji(t,e,i,o,a,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(Ji.userEvent);return!(!e||!(e==t||e.length>t.length&&e.slice(0,t.length)==t&&"."==e[t.length]))}}function qi(t,e){let i=[];for(let o=0,a=0;;){let s,n;if(o<t.length&&(a==e.length||e[a]>=t[o]))s=t[o++],n=t[o++];else{if(!(a<e.length))return i;s=e[a++],n=e[a++]}!i.length||i[i.length-1]<s?i.push(s,n):i[i.length-1]<n&&(i[i.length-1]=n)}}function Ki(t,e,i){var o;let a,s,n;return i?(a=e.changes,s=ri.empty(e.changes.length),n=t.changes.compose(e.changes)):(a=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),n=t.changes.compose(a)),{changes:n,selection:e.selection?e.selection.map(s):null===(o=t.selection)||void 0===o?void 0:o.map(a),effects:Gi.mapEffects(t.effects,a).concat(Gi.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Xi(t,e,i){let o=e.selection,a=eo(e.annotations);return e.userEvent&&(a=a.concat(Ji.userEvent.of(e.userEvent))),{changes:e.changes instanceof ri?e.changes:ri.of(e.changes||[],i,t.facet(Qi)),selection:o&&(o instanceof fi?o:fi.single(o.anchor,o.head)),effects:eo(e.effects),annotations:a,scrollIntoView:!!e.scrollIntoView}}function $i(t,e,i){let o=Xi(t,e.length?e[0]:{},t.doc.length);e.length&&!1===e[0].filter&&(i=!1);for(let s=1;s<e.length;s++){!1===e[s].filter&&(i=!1);let a=!!e[s].sequential;o=Ki(o,Xi(t,e[s],a?o.changes.newLength:t.doc.length),a)}let a=Ji.create(t,o.changes,o.selection,o.effects,o.annotations,o.scrollIntoView);return function(t){let e=t.startState,i=e.facet(Bi),o=t;for(let a=i.length-1;a>=0;a--){let s=i[a](t);s&&Object.keys(s).length&&(o=Ki(o,Xi(e,s,t.changes.newLength),!0))}return o==t?t:Ji.create(e,t.changes,t.selection,o.effects,o.annotations,o.scrollIntoView)}(i?function(t){let e=t.startState,i=!0;for(let a of e.facet(zi)){let e=a(t);if(!1===e){i=!1;break}Array.isArray(e)&&(i=!0===i?e:qi(i,e))}if(!0!==i){let o,a;if(!1===i)a=t.changes.invertedDesc,o=ri.empty(e.doc.length);else{let e=t.changes.filter(i);o=e.changes,a=e.filtered.mapDesc(e.changes).invertedDesc}t=Ji.create(e,o,t.selection&&t.selection.map(a),Gi.mapEffects(t.effects,a),t.annotations,t.scrollIntoView)}let o=e.facet(Ui);for(let a=o.length-1;a>=0;a--){let i=o[a](t);t=i instanceof Ji?i:Array.isArray(i)&&1==i.length&&i[0]instanceof Ji?i[0]:$i(e,eo(i),!1)}return t}(a):a)}Ji.time=Hi.define(),Ji.userEvent=Hi.define(),Ji.addToHistory=Hi.define(),Ji.remote=Hi.define();const to=[];function eo(t){return null==t?to:Array.isArray(t)?t:[t]}var io=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(io||(io={}));const oo=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ao;try{ao=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(Sv){}function so(t){return e=>{if(!/\S/.test(e))return io.Space;if(function(t){if(ao)return ao.test(t);for(let e=0;e<t.length;e++){let i=t[e];if(/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||oo.test(i)))return!0}return!1}(e))return io.Word;for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return io.Word;return io.Other}}class no{constructor(t,e,i,o,a,s){this.config=t,this.doc=e,this.selection=i,this.values=o,this.status=t.statusTemplate.slice(),this.computeSlot=a,s&&(s._state=this);for(let n=0;n<this.config.dynamicSlots.length;n++)Ei(this,n<<1);this.computeSlot=null}field(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.config.address[t.id];if(null!=i)return Ei(this,i),ji(this,i);if(e)throw new RangeError("Field is not present in this state")}update(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return $i(this,e,!0)}applyTransaction(t){let e,i=this.config,{base:o,compartments:a}=i;for(let s of t.effects)s.is(Fi.reconfigure)?(i&&(a=new Map,i.compartments.forEach(((t,e)=>a.set(e,t))),i=null),a.set(s.value.compartment,s.value.extension)):s.is(Gi.reconfigure)?(i=null,o=s.value):s.is(Gi.appendConfig)&&(i=null,o=eo(o).concat(s.value));if(i)e=t.startState.values.slice();else{i=Li.resolve(o,a,this),e=new no(i,this.doc,this.selection,i.dynamicSlots.map((()=>null)),((t,e)=>e.reconfigure(t,this)),null).values}new no(i,t.newDoc,t.newSelection,e,((e,i)=>i.update(e,t)),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:t},range:fi.cursor(e.from+t.length)})))}changeByRange(t){let e=this.selection,i=t(e.ranges[0]),o=this.changes(i.changes),a=[i.range],s=eo(i.effects);for(let n=1;n<e.ranges.length;n++){let i=t(e.ranges[n]),r=this.changes(i.changes),l=r.map(o);for(let t=0;t<n;t++)a[t]=a[t].map(l);let c=o.mapDesc(r,!0);a.push(i.range.map(c)),o=o.compose(l),s=Gi.mapEffects(s,l).concat(Gi.mapEffects(eo(i.effects),c))}return{changes:o,selection:fi.create(a,e.mainIndex),effects:s}}changes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t instanceof ri?t:ri.of(t,this.doc.length,this.facet(no.lineSeparator))}toText(t){return je.of(t.split(this.facet(no.lineSeparator)||ai))}sliceDoc(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.doc.length;return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return null==e?t.default:(Ei(this,e),ji(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let i in t){let o=t[i];o instanceof wi&&null!=this.config.address[o.id]&&(e[i]=o.spec.toJSON(this.field(t[i]),this))}return e}static fromJSON(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(i)for(let a in i)if(Object.prototype.hasOwnProperty.call(t,a)){let e=i[a],s=t[a];o.push(e.init((t=>e.spec.fromJSON(s,t))))}return no.create({doc:t.doc,selection:fi.fromJSON(t.selection),extensions:e.extensions?o.concat([e.extensions]):o})}static create(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Li.resolve(t.extensions||[],new Map),i=t.doc instanceof je?t.doc:je.of((t.doc||"").split(e.staticFacet(no.lineSeparator)||ai)),o=t.selection?t.selection instanceof fi?t.selection:fi.single(t.selection.anchor,t.selection.head):fi.single(0);return gi(o,i.length),e.staticFacet(Ri)||(o=o.asSingle()),new no(e,i,o,e.dynamicSlots.map((()=>null)),((t,e)=>e.create(t)),null)}get tabSize(){return this.facet(no.tabSize)}get lineBreak(){return this.facet(no.lineSeparator)||"\n"}get readOnly(){return this.facet(Yi)}phrase(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];for(let a of this.facet(no.phrases))if(Object.prototype.hasOwnProperty.call(a,t)){t=a[t];break}return i.length&&(t=t.replace(/\$(\$|\d*)/g,((t,e)=>{if("$"==e)return"$";let o=+(e||1);return!o||o>i.length?t:i[o-1]}))),t}languageDataAt(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=[];for(let a of this.facet(Zi))for(let s of a(this,e,i))Object.prototype.hasOwnProperty.call(s,t)&&o.push(s[t]);return o}charCategorizer(t){return so(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:e,from:i,length:o}=this.doc.lineAt(t),a=this.charCategorizer(t),s=t-i,n=t-i;for(;s>0;){let t=qe(e,s,!1);if(a(e.slice(t,s))!=io.Word)break;s=t}for(;n<o;){let t=qe(e,n);if(a(e.slice(n,t))!=io.Word)break;n=t}return s==n?null:fi.range(s+i,n+i)}}function ro(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={};for(let a of t)for(let t of Object.keys(a)){let e=a[t],s=o[t];if(void 0===s)o[t]=e;else if(s===e||void 0===e);else{if(!Object.hasOwnProperty.call(i,t))throw new Error("Config merge conflict for field "+t);o[t]=i[t](s,e)}}for(let a in e)void 0===o[a]&&(o[a]=e[a]);return o}no.allowMultipleSelections=Ri,no.tabSize=vi.define({combine:t=>t.length?t[0]:4}),no.lineSeparator=Qi,no.readOnly=Yi,no.phrases=vi.define({compare(t,e){let i=Object.keys(t),o=Object.keys(e);return i.length==o.length&&i.every((i=>t[i]==e[i]))}}),no.languageData=Zi,no.changeFilter=zi,no.transactionFilter=Ui,no.transactionExtender=Bi,Fi.reconfigure=Gi.define();class lo{eq(t){return this==t}range(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return co.create(t,e,this)}}lo.prototype.startSide=lo.prototype.endSide=0,lo.prototype.point=!1,lo.prototype.mapMode=si.TrackDel;class co{constructor(t,e,i){this.from=t,this.to=e,this.value=i}static create(t,e,i){return new co(t,e,i)}}function ho(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class uo{constructor(t,e,i,o){this.from=t,this.to=e,this.value=i,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=i?this.to:this.from;for(let s=o,n=a.length;;){if(s==n)return s;let o=s+n>>1,r=a[o]-t||(i?this.value[o].endSide:this.value[o].startSide)-e;if(o==s)return r>=0?s:n;r>=0?n=o:s=o+1}}between(t,e,i,o){for(let a=this.findIndex(e,-1e9,!0),s=this.findIndex(i,1e9,!1,a);a<s;a++)if(!1===o(this.from[a]+t,this.to[a]+t,this.value[a]))return!1}map(t,e){let i=[],o=[],a=[],s=-1,n=-1;for(let r=0;r<this.value.length;r++){let l,c,d=this.value[r],h=this.from[r]+t,u=this.to[r]+t;if(h==u){let t=e.mapPos(h,d.startSide,d.mapMode);if(null==t)continue;if(l=c=t,d.startSide!=d.endSide&&(c=e.mapPos(h,d.endSide),c<l))continue}else if(l=e.mapPos(h,d.startSide),c=e.mapPos(u,d.endSide),l>c||l==c&&d.startSide>0&&d.endSide<=0)continue;(c-l||d.endSide-d.startSide)<0||(s<0&&(s=l),d.point&&(n=Math.max(n,c-l)),i.push(d),o.push(l-s),a.push(c-s))}return{mapped:i.length?new uo(o,a,i,n):null,pos:s}}}class po{constructor(t,e,i,o){this.chunkPos=t,this.chunk=e,this.nextLayer=i,this.maxPoint=o}static create(t,e,i,o){return new po(t,e,i,o)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:i=!1,filterFrom:o=0,filterTo:a=this.length}=t,s=t.filter;if(0==e.length&&!s)return this;if(i&&(e=e.slice().sort(ho)),this.isEmpty)return e.length?po.of(e):this;let n=new go(this,null,-1).goto(0),r=0,l=[],c=new _o;for(;n.value||r<e.length;)if(r<e.length&&(n.from-e[r].from||n.startSide-e[r].value.startSide)>=0){let t=e[r++];c.addInner(t.from,t.to,t.value)||l.push(t)}else 1==n.rangeIndex&&n.chunkIndex<this.chunk.length&&(r==e.length||this.chunkEnd(n.chunkIndex)<e[r].from)&&(!s||o>this.chunkEnd(n.chunkIndex)||a<this.chunkPos[n.chunkIndex])&&c.addChunk(this.chunkPos[n.chunkIndex],this.chunk[n.chunkIndex])?n.nextChunk():((!s||o>n.to||a<n.from||s(n.from,n.to,n.value))&&(c.addInner(n.from,n.to,n.value)||l.push(co.create(n.from,n.to,n.value))),n.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?po.empty:this.nextLayer.update({add:l,filter:s,filterFrom:o,filterTo:a}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],i=[],o=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],n=this.chunk[s],r=t.touchesRange(a,a+n.length);if(!1===r)o=Math.max(o,n.maxPoint),e.push(n),i.push(t.mapPos(a));else if(!0===r){let{mapped:s,pos:r}=n.map(a,t);s&&(o=Math.max(o,s.maxPoint),e.push(s),i.push(r))}}let a=this.nextLayer.map(t);return 0==e.length?a:new po(i,e,a||po.empty,o)}between(t,e,i){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],s=this.chunk[o];if(e>=a&&t<=a+s.length&&!1===s.between(a,t-a,e-a,i))return}this.nextLayer.between(t,e,i)}}iter(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return mo.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return mo.from(t).goto(e)}static compare(t,e,i,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=t.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=a)),n=e.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=a)),r=fo(s,n,i),l=new bo(s,r,a),c=new bo(n,r,a);i.iterGaps(((t,e,i)=>yo(l,t,c,e,i,o))),i.empty&&0==i.length&&yo(l,0,c,0,0,o)}static eq(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0;null==o&&(o=999999999);let a=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0)),s=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0));if(a.length!=s.length)return!1;if(!a.length)return!0;let n=fo(a,s),r=new bo(a,n,0).goto(i),l=new bo(s,n,0).goto(i);for(;;){if(r.to!=l.to||!Ao(r.active,l.active)||r.point&&(!l.point||!r.point.eq(l.point)))return!1;if(r.to>o)return!0;r.next(),l.next()}}static spans(t,e,i,o){let a=new bo(t,null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1).goto(e),s=e,n=a.openStart;for(;;){let t=Math.min(a.to,i);if(a.point){let i=a.activeForPoint(a.to),r=a.pointFrom<e?i.length+1:Math.min(i.length,n);o.point(s,t,a.point,i,r,a.pointRank),n=Math.min(a.openEnd(t),i.length)}else t>s&&(o.span(s,t,a.active,n),n=a.openEnd(t));if(a.to>i)return n+(a.point&&a.to>i?1:0);s=a.to,a.next()}}static of(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=new _o;for(let o of t instanceof co?[t]:e?function(t){if(t.length>1)for(let e=t[0],i=1;i<t.length;i++){let o=t[i];if(ho(e,o)>0)return t.slice().sort(ho);e=o}return t}(t):t)i.add(o.from,o.to,o.value);return i.finish()}}po.empty=new po([],[],null,-1),po.empty.nextLayer=po.empty;class _o{finishChunk(t){this.chunks.push(new uo(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,i){this.addInner(t,e,i)||(this.nextLayer||(this.nextLayer=new _o)).add(t,e,i)}addInner(t,e,i){let o=t-this.lastTo||i.startSide-this.last.endSide;if(o<=0&&(t-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(o<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=i,this.lastFrom=t,this.lastTo=e,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let i=e.value.length-1;return this.last=e.value[i],this.lastFrom=e.from[i]+t,this.lastTo=e.to[i]+t,!0}finish(){return this.finishInner(po.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;let e=po.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function fo(t,e,i){let o=new Map;for(let s of t)for(let t=0;t<s.chunk.length;t++)s.chunk[t].maxPoint<=0&&o.set(s.chunk[t],s.chunkPos[t]);let a=new Set;for(let s of e)for(let t=0;t<s.chunk.length;t++){let e=o.get(s.chunk[t]);null==e||(i?i.mapPos(e):e)!=s.chunkPos[t]||(null===i||void 0===i?void 0:i.touchesRange(e,e+s.chunk[t].length))||a.add(s.chunk[t])}return a}class go{constructor(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.layer=t,this.skip=e,this.minPoint=i,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,i){for(;this.chunkIndex<this.layer.chunk.length;){let e=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(e)||this.layer.chunkEnd(this.chunkIndex)<t||e.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!i||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],i=t+e.from[this.rangeIndex];if(this.from=i,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class mo{constructor(t){this.heap=t}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=[];for(let a=0;a<t.length;a++)for(let s=t[a];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&o.push(new go(s,e,i,a));return 1==o.length?o[0]:new mo(o)}get startSide(){return this.value?this.value.startSide:0}goto(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;for(let i of this.heap)i.goto(t,e);for(let i=this.heap.length>>1;i>=0;i--)vo(this.heap,i);return this.next(),this}forward(t,e){for(let i of this.heap)i.forward(t,e);for(let i=this.heap.length>>1;i>=0;i--)vo(this.heap,i);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),vo(this.heap,0)}}}function vo(t,e){for(let i=t[e];;){let o=1+(e<<1);if(o>=t.length)break;let a=t[o];if(o+1<t.length&&a.compare(t[o+1])>=0&&(a=t[o+1],o++),i.compare(a)<0)break;t[o]=i,t[e]=a,e=o}}class bo{constructor(t,e,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=mo.from(t,e,i)}goto(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){Do(this.active,t),Do(this.activeTo,t),Do(this.activeRank,t),this.minActive=Oo(this.active,this.activeTo)}addActive(t){let e=0,{value:i,to:o,rank:a}=this.cursor;for(;e<this.activeRank.length&&this.activeRank[e]<=a;)e++;ko(this.active,e,i),ko(this.activeTo,e,o),ko(this.activeRank,e,a),t&&ko(t,e,this.cursor.from),this.minActive=Oo(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>t){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),i&&Do(i,o)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let t=this.cursor.value;if(t.point){if(!(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=t,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=t.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(i),this.cursor.next()}}}if(i){this.openStart=0;for(let e=i.length-1;e>=0&&i[e]<t;e--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>t||this.activeTo[i]==t&&this.active[i].endSide>=this.point.endSide)&&e.push(this.active[i]);return e.reverse()}openEnd(t){let e=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>t;i--)e++;return e}}function yo(t,e,i,o,a,s){t.goto(e),i.goto(o);let n=o+a,r=o,l=o-e;for(;;){let e=t.to+l-i.to||t.endSide-i.endSide,o=e<0?t.to+l:i.to,a=Math.min(o,n);if(t.point||i.point?t.point&&i.point&&(t.point==i.point||t.point.eq(i.point))&&Ao(t.activeForPoint(t.to),i.activeForPoint(i.to))||s.comparePoint(r,a,t.point,i.point):a>r&&!Ao(t.active,i.active)&&s.compareRange(r,a,t.active,i.active),o>n)break;r=o,e<=0&&t.next(),e>=0&&i.next()}}function Ao(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!=e[i]&&!t[i].eq(e[i]))return!1;return!0}function Do(t,e){for(let i=e,o=t.length-1;i<o;i++)t[i]=t[i+1];t.pop()}function ko(t,e,i){for(let o=t.length-1;o>=e;o--)t[o+1]=t[o];t[e]=i}function Oo(t,e){let i=-1,o=1e9;for(let a=0;a<e.length;a++)(e[a]-o||t[a].endSide-t[i].endSide)<0&&(i=a,o=e[a]);return i}function wo(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,o=0;for(let a=0;a<i;)9==t.charCodeAt(a)?(o+=e-o%e,a++):(o++,a=qe(t,a));return o}function Co(t,e,i,o){for(let a=0,s=0;;){if(s>=e)return a;if(a==t.length)break;s+=9==t.charCodeAt(a)?i-s%i:1,a=qe(t,a)}return!0===o?-1:t.length}const xo="undefined"==typeof Symbol?"__\u037c":Symbol.for("\u037c"),So="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Mo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Po{constructor(t,e){this.rules=[];let{finish:i}=e||{};function o(t){return/^@/.test(t)?[t]:t.split(/,\s*/)}function a(t,e,s,n){let r=[],l=/^@(\w+)\b/.exec(t[0]),c=l&&"keyframes"==l[1];if(l&&null==e)return s.push(t[0]+";");for(let i in e){let n=e[i];if(/&/.test(i))a(i.split(/,\s*/).map((e=>t.map((t=>e.replace(/&/,t))))).reduce(((t,e)=>t.concat(e))),n,s);else if(n&&"object"==typeof n){if(!l)throw new RangeError("The value of a property ("+i+") should be a primitive value.");a(o(i),n,r,c)}else null!=n&&r.push(i.replace(/_.*/,"").replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()))+": "+n+";")}(r.length||c)&&s.push((!i||l||n?t:t.map(i)).join(", ")+" {"+r.join(" ")+"}")}for(let s in t)a(o(s),t[s],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let t=Mo[xo]||1;return Mo[xo]=t+1,"\u037c"+t.toString(36)}static mount(t,e){(t[So]||new Io(t)).mount(Array.isArray(e)?e:[e])}}let To=new Map;class Io{constructor(t){let e=t.ownerDocument||t,i=e.defaultView;if(!t.head&&t.adoptedStyleSheets&&i.CSSStyleSheet){let o=To.get(e);if(o)return t.adoptedStyleSheets=[o.sheet,...t.adoptedStyleSheets],t[So]=o;this.sheet=new i.CSSStyleSheet,t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets],To.set(e,this)}else{this.styleTag=e.createElement("style");let i=t.head||t;i.insertBefore(this.styleTag,i.firstChild)}this.modules=[],t[So]=this}mount(t){let e=this.sheet,i=0,o=0;for(let a=0;a<t.length;a++){let s=t[a],n=this.modules.indexOf(s);if(n<o&&n>-1&&(this.modules.splice(n,1),o--,n=-1),-1==n){if(this.modules.splice(o++,0,s),e)for(let t=0;t<s.rules.length;t++)e.insertRule(s.rules[t],i++)}else{for(;o<n;)i+=this.modules[o++].rules.length;i+=s.rules.length,o++}}if(!e){let t="";for(let e=0;e<this.modules.length;e++)t+=this.modules[e].getRules()+"\n";this.styleTag.textContent=t}}}for(var Fo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},No={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Lo="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Eo="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),jo=0;jo<10;jo++)Fo[48+jo]=Fo[96+jo]=String(jo);for(jo=1;jo<=24;jo++)Fo[jo+111]="F"+jo;for(jo=65;jo<=90;jo++)Fo[jo]=String.fromCharCode(jo+32),No[jo]=String.fromCharCode(jo);for(var Zo in Fo)No.hasOwnProperty(Zo)||(No[Zo]=Fo[Zo]);function Ro(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function Qo(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function zo(t,e){if(!e.anchorNode)return!1;try{return Qo(t,e.anchorNode)}catch(Sv){return!1}}function Uo(t){return 3==t.nodeType?$o(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function Bo(t,e,i,o){return!!i&&(Ho(t,e,i,o,-1)||Ho(t,e,i,o,1))}function Yo(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function Ho(t,e,i,o,a){for(;;){if(t==i&&e==o)return!0;if(e==(a<0?0:Vo(t))){if("DIV"==t.nodeName)return!1;let i=t.parentNode;if(!i||1!=i.nodeType)return!1;e=Yo(t)+(a<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(a<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=a<0?Vo(t):0}}}function Vo(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Wo(t,e){let i=e?t.left:t.right;return{left:i,right:i,top:t.top,bottom:t.bottom}}function Go(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}class Jo{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:i}=t;this.set(e,Math.min(t.anchorOffset,e?Vo(e):0),i,Math.min(t.focusOffset,i?Vo(i):0))}set(t,e,i,o){this.anchorNode=t,this.anchorOffset=e,this.focusNode=i,this.focusOffset=o}}let qo,Ko=null;function Xo(t){if(t.setActive)return t.setActive();if(Ko)return t.focus(Ko);let e=[];for(let i=t;i&&(e.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(t.focus(null==Ko?{get preventScroll(){return Ko={preventScroll:!0},!0}}:void 0),!Ko){Ko=!1;for(let t=0;t<e.length;){let i=e[t++],o=e[t++],a=e[t++];i.scrollTop!=o&&(i.scrollTop=o),i.scrollLeft!=a&&(i.scrollLeft=a)}}}function $o(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,o=qo||(qo=document.createRange());return o.setEnd(t,i),o.setStart(t,e),o}function ta(t,e,i){let o={key:e,code:e,keyCode:i,which:i,cancelable:!0},a=new KeyboardEvent("keydown",o);a.synthetic=!0,t.dispatchEvent(a);let s=new KeyboardEvent("keyup",o);return s.synthetic=!0,t.dispatchEvent(s),a.defaultPrevented||s.defaultPrevented}function ea(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}class ia{constructor(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.node=t,this.offset=e,this.precise=i}static before(t,e){return new ia(t.parentNode,Yo(t),e)}static after(t,e){return new ia(t.parentNode,Yo(t)+1,e)}}const oa=[];class aa{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let i of this.children){if(i==t)return e;e+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(2&this.dirty){let i,o=this.dom,a=null;for(let s of this.children){if(s.dirty){if(!s.dom&&(i=a?a.nextSibling:o.firstChild)){let t=aa.get(i);(!t||!t.parent&&t.canReuseDOM(s))&&s.reuseDOM(i)}s.sync(t,e),s.dirty=0}if(i=a?a.nextSibling:o.firstChild,e&&!e.written&&e.node==o&&i!=s.dom&&(e.written=!0),s.dom.parentNode==o)for(;i&&i!=s.dom;)i=sa(i);else o.insertBefore(s.dom,i);a=s.dom}for(i=a?a.nextSibling:o.firstChild,i&&e&&e.node==o&&(e.written=!0);i;)i=sa(i)}else if(1&this.dirty)for(let i of this.children)i.dirty&&(i.sync(t,e),i.dirty=0)}reuseDOM(t){}localPosFromDOM(t,e){let i;if(t==this.dom)i=this.dom.childNodes[e];else{let o=0==Vo(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==o&&e.firstChild!=e.lastChild&&(o=t==e.firstChild?-1:1),t=e}i=o<0?t:t.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!aa.get(i);)i=i.nextSibling;if(!i)return this.length;for(let o=0,a=0;;o++){let t=this.children[o];if(t.dom==i)return a;a+=t.length+t.breakAfter}}domBoundsAround(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=-1,a=-1,s=-1,n=-1;for(let r=0,l=i,c=i;r<this.children.length;r++){let i=this.children[r],d=l+i.length;if(l<t&&d>e)return i.domBoundsAround(t,e,l);if(d>=t&&-1==o&&(o=r,a=l),l>e&&i.dom.parentNode==this.dom){s=r,n=c;break}c=d,l=d+i.breakAfter}return{from:a,to:n<0?i+this.length:n,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dirty|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.dirty|=2),1&e.dirty)return;e.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oa;this.markDirty();for(let o=t;o<e;o++){let t=this.children[o];t.parent==this&&t.destroy()}this.children.splice(t,e-t,...i);for(let o=0;o<i.length;o++)i[o].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length;return new na(this.children,t,this.children.length)}childPos(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,i,o,a,s){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function sa(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}aa.prototype.breakAfter=0;class na{constructor(t,e,i){this.children=t,this.pos=e,this.i=i,this.off=0}findPos(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function ra(t,e,i,o,a,s,n,r,l){let{children:c}=t,d=c.length?c[e]:null,h=s.length?s[s.length-1]:null,u=h?h.breakAfter:n;if(!(e==o&&d&&!n&&!u&&s.length<2&&d.merge(i,a,s.length?h:null,0==i,r,l))){if(o<c.length){let t=c[o];t&&a<t.length?(e==o&&(t=t.split(a),a=0),!u&&h&&t.merge(0,a,h,!0,0,l)?s[s.length-1]=t:(a&&t.merge(0,a,null,!1,0,l),s.push(t))):(null===t||void 0===t?void 0:t.breakAfter)&&(h?h.breakAfter=1:n=1),o++}for(d&&(d.breakAfter=n,i>0&&(!n&&s.length&&d.merge(i,d.length,s[0],!1,r,0)?d.breakAfter=s.shift().breakAfter:(i<d.length||d.children.length&&0==d.children[d.children.length-1].length)&&d.merge(i,d.length,null,!1,r,0),e++));e<o&&s.length;)if(c[o-1].become(s[s.length-1]))o--,s.pop(),l=s.length?0:r;else{if(!c[e].become(s[0]))break;e++,s.shift(),r=s.length?0:l}!s.length&&e&&o<c.length&&!c[e-1].breakAfter&&c[o].merge(0,0,c[e-1],!1,r,l)&&e--,(e<o||s.length)&&t.replaceChildren(e,o,s)}}function la(t,e,i,o,a,s){let n=t.childCursor(),{i:r,off:l}=n.findPos(i,1),{i:c,off:d}=n.findPos(e,-1),h=e-i;for(let u of o)h+=u.length;t.length+=h,ra(t,c,d,r,l,o,0,a,s)}let ca="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},da="undefined"!=typeof document?document:{documentElement:{style:{}}};const ha=/Edge\/(\d+)/.exec(ca.userAgent),ua=/MSIE \d/.test(ca.userAgent),pa=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ca.userAgent),_a=!!(ua||pa||ha),fa=!_a&&/gecko\/(\d+)/i.test(ca.userAgent),ga=!_a&&/Chrome\/(\d+)/.exec(ca.userAgent),ma="webkitFontSmoothing"in da.documentElement.style,va=!_a&&/Apple Computer/.test(ca.vendor),ba=va&&(/Mobile\/\w+/.test(ca.userAgent)||ca.maxTouchPoints>2);var ya={mac:ba||/Mac/.test(ca.platform),windows:/Win/.test(ca.platform),linux:/Linux|X11/.test(ca.platform),ie:_a,ie_version:ua?da.documentMode||6:pa?+pa[1]:ha?+ha[1]:0,gecko:fa,gecko_version:fa?+(/Firefox\/(\d+)/.exec(ca.userAgent)||[0,0])[1]:0,chrome:!!ga,chrome_version:ga?+ga[1]:0,ios:ba,android:/Android\b/.test(ca.userAgent),webkit:ma,safari:va,webkit_version:ma?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=da.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Aa extends aa{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,i){return(!i||i instanceof Aa&&!(this.length-(e-t)+i.length>256))&&(this.text=this.text.slice(0,t)+(i?i.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new Aa(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new ia(this.dom,t)}domBoundsAround(t,e,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return ka(this.dom,t,e)}}class Da extends aa{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(),this.mark=t,this.children=e,this.length=i;for(let o of e)o.setParent(this)}setAttrs(t){if(ea(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}sync(t,e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,i,o,a,s){return(!i||!(!(i instanceof Da&&i.mark.eq(this.mark))||t&&a<=0||e<this.length&&s<=0))&&(la(this,t,e,i?i.children:[],a-1,s-1),this.markDirty(),!0)}split(t){let e=[],i=0,o=-1,a=0;for(let n of this.children){let s=i+n.length;s>t&&e.push(i<t?n.split(t-i):n),o<0&&i>=t&&(o=a),i=s,a++}let s=this.length-t;return this.length=t,o>-1&&(this.children.length=o,this.markDirty()),new Da(this.mark,e,s)}domAtPos(t){return Ta(this,t)}coordsAt(t,e){return Fa(this,t,e)}}function ka(t,e,i){let o=t.nodeValue.length;e>o&&(e=o);let a=e,s=e,n=0;0==e&&i<0||e==o&&i>=0?ya.chrome||ya.gecko||(e?(a--,n=1):s<o&&(s++,n=-1)):i<0?a--:s<o&&s++;let r=$o(t,a,s).getClientRects();if(!r.length)return null;let l=r[(n?n<0:i>=0)?0:r.length-1];return ya.safari&&!n&&0==l.width&&(l=Array.prototype.find.call(r,(t=>t.width))||l),n?Wo(l,n<0):l||null}class Oa extends aa{constructor(t,e,i){super(),this.widget=t,this.length=e,this.side=i,this.prevWidget=null}static create(t,e,i){return new(t.customView||Oa)(t,e,i)}split(t){let e=Oa.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,e,i,o,a,s){return!(i&&(!(i instanceof Oa&&this.widget.compare(i.widget))||t>0&&a<=0||e<this.length&&s<=0))&&(this.length=t+(i?i.length:0)+(this.length-e),!0)}become(t){return t instanceof Oa&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return je.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,i=e&&e.state.doc,o=this.posAtStart;return i?i.slice(o,o+this.length):je.empty}domAtPos(t){return(this.length?0==t:this.side>0)?ia.before(this.dom):ia.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let i=this.widget.coordsAt(this.dom,t,e);if(i)return i;let o=this.dom.getClientRects(),a=null;if(!o.length)return null;let s=this.side?this.side<0:t>0;for(let n=s?o.length-1:0;a=o[n],!(t>0?0==n:n==o.length-1||a.top<a.bottom);n+=s?-1:1);return Wo(a,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class wa extends Oa{domAtPos(t){let{topView:e,text:i}=this.widget;return e?Ca(t,0,e,i,this.length-e.length,((t,e)=>t.domAtPos(e)),((t,e)=>new ia(t,Math.min(e,t.nodeValue.length)))):new ia(i,Math.min(t,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(t,e){let{topView:i,text:o}=this.widget;return i?Sa(t,e,i,o,this.length-i.length):Math.min(e,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,e){let{topView:i,text:o}=this.widget;return i?Ca(t,e,i,o,this.length-i.length,((t,e,i)=>t.coordsAt(e,i)),((t,e,i)=>ka(t,e,i))):ka(o,t,e)}destroy(){var t;super.destroy(),null===(t=this.widget.topView)||void 0===t||t.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function Ca(t,e,i,o,a,s,n){if(i instanceof Da){for(let r=i.dom.firstChild;r;r=r.nextSibling){let i=aa.get(r);if(i){let l=Qo(r,o),c=i.length+(l?a:0);if(t<c||t==c&&i.getSide()<=0)return l?Ca(t,e,i,o,a,s,n):s(i,t,e);t-=c}else{let i=xa(t,e,r,n);if("number"!=typeof i)return i;t=i}}return s(i,i.length,-1)}return i.dom==o?n(o,t,e):s(i,t,e)}function xa(t,e,i,o){if(3==i.nodeType){let a=i.nodeValue.length;if(t<=a)return o(i,t,e);t-=a}else if(1==i.nodeType&&"false"!=i.contentEditable)for(let a=i.firstChild;a;a=a.nextSibling){let i=xa(t,e,a,o);if("number"!=typeof i)return i;t=i}return t}function Sa(t,e,i,o,a){if(i instanceof Da){let s=0;for(let n=i.dom.firstChild;n;n=n.nextSibling){let i=aa.get(n);if(i){let r=Qo(n,o);if(Qo(n,t))return s+(r?Sa(t,e,i,o,a):i.localPosFromDOM(t,e));s+=i.length+(r?a:0)}else{let i=Ma(t,e,n);if(null!=i.result)return s+i.result;s+=i.size}}}else if(i.dom==o)return Math.min(e,o.nodeValue.length);return i.localPosFromDOM(t,e)}function Ma(t,e,i){if(3==i.nodeType)return t==i?{result:e}:{size:i.nodeValue.length};if(1!=i.nodeType||"false"==i.contentEditable)return i.contains(t)?{result:0}:{size:0};{let o=0;for(let a=i.firstChild,s=0;;a=a.nextSibling,s++){if(t==i&&s==e)return{result:o};if(!a)return{size:o};let n=Ma(t,e,a);if(null!=n.result)return{result:e+n.result};o+=n.size}}}class Pa extends aa{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof Pa&&t.side==this.side}split(){return new Pa(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?ia.before(this.dom):ia.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return je.empty}get isHidden(){return!0}}function Ta(t,e){let i=t.dom,{children:o}=t,a=0;for(let s=0;a<o.length;a++){let t=o[a],n=s+t.length;if(!(n==s&&t.getSide()<=0)){if(e>s&&e<n&&t.dom.parentNode==i)return t.domAtPos(e-s);if(e<=s)break;s=n}}for(let s=a;s>0;s--){let t=o[s-1];if(t.dom.parentNode==i)return t.domAtPos(t.length)}for(let s=a;s<o.length;s++){let t=o[s];if(t.dom.parentNode==i)return t.domAtPos(0)}return new ia(i,0)}function Ia(t,e,i){let o,{children:a}=t;i>0&&e instanceof Da&&a.length&&(o=a[a.length-1])instanceof Da&&o.mark.eq(e.mark)?Ia(o,e.children[0],i-1):(a.push(e),e.setParent(t)),t.length+=e.length}function Fa(t,e,i){let o=null,a=-1,s=null,n=-1;!function t(e,r){for(let l=0,c=0;l<e.children.length&&c<=r;l++){let d=e.children[l],h=c+d.length;h>=r&&(d.children.length?t(d,r-c):(!s||s.isHidden&&i>0)&&(h>r||c==h&&d.getSide()>0)?(s=d,n=r-c):(c<r||c==h&&d.getSide()<0&&!d.isHidden)&&(o=d,a=r-c)),c=h}}(t,e);let r=(i<0?o:s)||o||s;return r?r.coordsAt(Math.max(0,r==o?a:n),i):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let i=Uo(e);return i[i.length-1]||null}(t)}function Na(t,e){for(let i in t)"class"==i&&e.class?e.class+=" "+t.class:"style"==i&&e.style?e.style+=";"+t.style:e[i]=t[i];return e}function La(t,e){if(t==e)return!0;if(!t||!e)return!1;let i=Object.keys(t),o=Object.keys(e);if(i.length!=o.length)return!1;for(let a of i)if(-1==o.indexOf(a)||t[a]!==e[a])return!1;return!0}function Ea(t,e,i){let o=null;if(e)for(let a in e)i&&a in i||t.removeAttribute(o=a);if(i)for(let a in i)e&&e[a]==i[a]||t.setAttribute(o=a,i[a]);return!!o}Aa.prototype.children=Oa.prototype.children=Pa.prototype.children=oa;class ja{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,i){return null}get customView(){return null}get isHidden(){return!1}destroy(t){}}var Za=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Za||(Za={}));class Ra extends lo{constructor(t,e,i,o){super(),this.startSide=t,this.endSide=e,this.widget=i,this.spec=o}get heightRelevant(){return!1}static mark(t){return new Qa(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),i=!!t.block;return e+=i?e>0?3e8:-4e8:e>0?1e8:-1e8,new Ua(t,e,e,i,t.widget||null,!1)}static replace(t){let e,i,o=!!t.block;if(t.isBlockGap)e=-5e8,i=4e8;else{let{start:a,end:s}=Ba(t,o);e=(a?o?-3e8:-1:5e8)-1,i=1+(s?o?2e8:1:-6e8)}return new Ua(t,e,i,o,t.widget||null,!0)}static line(t){return new za(t)}static set(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return po.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Ra.none=po.empty;class Qa extends Ra{constructor(t){let{start:e,end:i}=Ba(t);super(e?-1:5e8,i?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){return this==t||t instanceof Qa&&this.tagName==t.tagName&&this.class==t.class&&La(this.attrs,t.attrs)}range(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}Qa.prototype.point=!1;class za extends Ra{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof za&&this.spec.class==t.spec.class&&La(this.spec.attributes,t.spec.attributes)}range(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}za.prototype.mapMode=si.TrackBefore,za.prototype.point=!0;class Ua extends Ra{constructor(t,e,i,o,a,s){super(e,i,a,t),this.block=o,this.isReplace=s,this.mapMode=o?e<=0?si.TrackBefore:si.TrackAfter:si.TrackDel}get type(){return this.startSide<this.endSide?Za.WidgetRange:this.startSide<=0?Za.WidgetBefore:Za.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof Ua&&(e=this.widget,i=t.widget,e==i||!!(e&&i&&e.compare(i)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var e,i}range(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function Ba(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{inclusiveStart:i,inclusiveEnd:o}=t;return null==i&&(i=t.inclusive),null==o&&(o=t.inclusive),{start:null!==i&&void 0!==i?i:e,end:null!==o&&void 0!==o?o:e}}function Ya(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=i.length-1;a>=0&&i[a]+o>=t?i[a]=Math.max(i[a],e):i.push(t,e)}Ua.prototype.point=!0;class Ha extends aa{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,i,o,a,s){if(i){if(!(i instanceof Ha))return!1;this.dom||i.transferDOM(this)}return o&&this.setDeco(i?i.attrs:null),la(this,t,e,i?i.children:[],a,s),!0}split(t){let e=new Ha;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:i,off:o}=this.childPos(t);o&&(e.append(this.children[i].split(o),0),this.children[i].merge(o,this.children[i].length,null,!1,0,0),i++);for(let a=i;a<this.children.length;a++)e.append(this.children[a],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){La(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){Ia(this,t,e)}addLineDeco(t){let e=t.spec.attributes,i=t.spec.class;e&&(this.attrs=Na(e,this.attrs||{})),i&&(this.attrs=Na({class:i},this.attrs||{}))}domAtPos(t){return Ta(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.dirty|=6)}sync(t,e){var i;this.dom?4&this.dirty&&(ea(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Ea(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let o=this.dom.lastChild;for(;o&&aa.get(o)instanceof Da;)o=o.lastChild;if(!o||!this.length||"BR"!=o.nodeName&&0==(null===(i=aa.get(o))||void 0===i?void 0:i.isEditable)&&(!ya.ios||!this.children.some((t=>t instanceof Aa)))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let i of this.children){if(!(i instanceof Aa)||/[^ -~]/.test(i.text))return null;let o=Uo(i.dom);if(1!=o.length)return null;e+=o[0].width,t=o[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(t,e){let i=Fa(this,t,e);if(!this.children.length&&i&&this.parent){let{heightOracle:t}=this.parent.view.viewState,e=i.bottom-i.top;if(Math.abs(e-t.lineHeight)<2&&t.textHeight<e){let o=(e-t.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(t){return!1}get type(){return Za.Text}static find(t,e){for(let i=0,o=0;i<t.children.length;i++){let a=t.children[i],s=o+a.length;if(s>=e){if(a instanceof Ha)return a;if(s>e)break}o=s+a.breakAfter}return null}}class Va extends aa{constructor(t,e,i){super(),this.widget=t,this.length=e,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(t,e,i,o,a,s){return!(i&&(!(i instanceof Va&&this.widget.compare(i.widget))||t>0&&a<=0||e<this.length&&s<=0))&&(this.length=t+(i?i.length:0)+(this.length-e),!0)}domAtPos(t){return 0==t?ia.before(this.dom):ia.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let i=new Va(this.widget,e,this.type);return i.breakAfter=this.breakAfter,i}get children(){return oa}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):je.empty}domBoundsAround(){return null}become(t){return t instanceof Va&&t.widget.constructor==this.widget.constructor&&(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.type=t.type,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){return this.widget.coordsAt(this.dom,t,e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Wa{constructor(t,e,i,o){this.doc=t,this.pos=e,this.end=i,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!t.breakAfter&&!(t instanceof Va&&t.type==Za.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ha),this.atCursorPos=!0),this.curLine}flushBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.bufferMarks;this.pendingBuffer&&(this.curLine.append(Ga(new Pa(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(t,e,i){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:i,done:o}=this.cursor.next(this.skip);if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(i){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let o=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-i)),this.getLine().append(Ga(new Aa(this.text.slice(this.textOff,this.textOff+o)),e),i),this.atCursorPos=!0,this.textOff+=o,t-=o,i=0}}span(t,e,i,o){this.buildText(e-t,i,o),this.pos=e,this.openStart<0&&(this.openStart=o)}point(t,e,i,o,a,s){if(this.disallowBlockEffectsFor[s]&&i instanceof Ua){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let n=e-t;if(i instanceof Ua)if(i.block){let{type:t}=i;t!=Za.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Va(i.widget||new Ja("div"),n,t))}else{let s=Oa.create(i.widget||new Ja("span"),n,n?0:i.startSide),r=this.atCursorPos&&!s.isEditable&&a<=o.length&&(t<e||i.startSide>0),l=!s.isEditable&&(t<e||a>o.length||i.startSide<=0),c=this.getLine();2!=this.pendingBuffer||r||s.isEditable||(this.pendingBuffer=0),this.flushBuffer(o),r&&(c.append(Ga(new Pa(1),o),a),a=o.length+Math.max(0,a-o.length)),c.append(Ga(s,o),a),this.atCursorPos=l,this.pendingBuffer=l?t<e||a>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);n&&(this.textOff+n<=this.text.length?this.textOff+=n:(this.skip+=n-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=a)}static build(t,e,i,o,a){let s=new Wa(t,e,i,a);return s.openEnd=po.spans(o,e,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function Ga(t,e){for(let i of e)t=new Da(i,[t],t.length);return t}class Ja extends ja{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const qa=vi.define(),Ka=vi.define(),Xa=vi.define(),$a=vi.define(),ts=vi.define(),es=vi.define(),is=vi.define(),os=vi.define({combine:t=>t.some((t=>t))}),as=vi.define({combine:t=>t.some((t=>t))});class ss{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;this.range=t,this.y=e,this.x=i,this.yMargin=o,this.xMargin=a}map(t){return t.empty?this:new ss(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}const ns=Gi.define({map:(t,e)=>t.map(e)});function rs(t,e,i){let o=t.facet($a);o.length?o[0](e):window.onerror?window.onerror(String(e),i,void 0,void 0,e):i?console.error(i+":",e):console.error(e)}const ls=vi.define({combine:t=>!t.length||t[0]});let cs=0;const ds=vi.define();class hs{constructor(t,e,i,o){this.id=t,this.create=e,this.domEventHandlers=i,this.extension=o(this)}static define(t,e){const{eventHandlers:i,provide:o,decorations:a}=e||{};return new hs(cs++,t,i,(t=>{let e=[ds.of(t)];return a&&e.push(fs.of((e=>{let i=e.plugin(t);return i?a(i):Ra.none}))),o&&e.push(o(t)),e}))}static fromClass(t,e){return hs.define((e=>new t(e)),e)}}class us{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(rs(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(Sv){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){rs(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(i){rs(t.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ps=vi.define(),_s=vi.define(),fs=vi.define(),gs=vi.define(),ms=vi.define();function vs(t){let e=0,i=0,o=0,a=0;for(let s of t.state.facet(ms)){let n=s(t);n&&(null!=n.left&&(e=Math.max(e,n.left)),null!=n.right&&(i=Math.max(i,n.right)),null!=n.top&&(o=Math.max(o,n.top)),null!=n.bottom&&(a=Math.max(a,n.bottom)))}return{left:e,right:i,top:o,bottom:a}}const bs=vi.define();class ys{constructor(t,e,i,o){this.fromA=t,this.toA=e,this.fromB=i,this.toB=o}join(t){return new ys(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,i=this;for(;e>0;e--){let o=t[e-1];if(!(o.fromA>i.toA)){if(o.toA<i.fromA)break;i=i.join(o),t.splice(e-1,1)}}return t.splice(e,0,i),t}static extendWithRanges(t,e){if(0==e.length)return t;let i=[];for(let o=0,a=0,s=0,n=0;;o++){let r=o==t.length?null:t[o],l=s-n,c=r?r.fromB:1e9;for(;a<e.length&&e[a]<c;){let t=e[a],o=e[a+1],s=Math.max(n,t),r=Math.min(c,o);if(s<=r&&new ys(s+l,r+l,s,r).addToSet(i),o>c)break;a+=2}if(!r)return i;new ys(r.fromA,r.toA,r.fromB,r.toB).addToSet(i),s=r.toA,n=r.toB}}}class As{constructor(t,e,i){this.view=t,this.state=e,this.transactions=i,this.flags=0,this.startState=t.state,this.changes=ri.empty(this.startState.doc.length);for(let a of i)this.changes=this.changes.compose(a.changes);let o=[];this.changes.iterChangedRanges(((t,e,i,a)=>o.push(new ys(t,e,i,a)))),this.changedRanges=o}static create(t,e,i){return new As(t,e,i)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var Ds=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ds||(Ds={}));const ks=Ds.LTR,Os=Ds.RTL;function ws(t){let e=[];for(let i=0;i<t.length;i++)e.push(1<<+t[i]);return e}const Cs=ws("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),xs=ws("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ss=Object.create(null),Ms=[];for(let Mv of["()","[]","{}"]){let t=Mv.charCodeAt(0),e=Mv.charCodeAt(1);Ss[t]=e,Ss[e]=-t}const Ps=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ts{constructor(t,e,i){this.from=t,this.to=e,this.level=i}get dir(){return this.level%2?Os:ks}side(t,e){return this.dir==e==t?this.to:this.from}static find(t,e,i,o){let a=-1;for(let s=0;s<t.length;s++){let n=t[s];if(n.from<=e&&n.to>=e){if(n.level==i)return s;(a<0||(0!=o?o<0?n.from<e:n.to>e:t[a].level>n.level))&&(a=s)}}if(a<0)throw new RangeError("Index out of range");return a}}const Is=[];function Fs(t,e){let i=t.length,o=e==ks?1:2,a=e==ks?2:1;if(!t||1==o&&!Ps.test(t))return Ns(i);for(let r=0,l=o,c=o;r<i;r++){let e=(s=t.charCodeAt(r))<=247?Cs[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?xs[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8203?256:64336<=s&&s<=65023?4:8204==s?256:1;512==e?e=l:8==e&&4==c&&(e=16),Is[r]=4==e?2:e,7&e&&(c=e),l=e}var s;for(let r=0,l=o,c=o;r<i;r++){let t=Is[r];if(128==t)r<i-1&&l==Is[r+1]&&24&l?t=Is[r]=l:Is[r]=256;else if(64==t){let t=r+1;for(;t<i&&64==Is[t];)t++;let e=r&&8==l||t<i&&8==Is[t]?1==c?1:8:256;for(let i=r;i<t;i++)Is[i]=e;r=t-1}else 8==t&&1==c&&(Is[r]=1);l=t,7&t&&(c=t)}for(let r,l,c,d=0,h=0,u=0;d<i;d++)if(l=Ss[r=t.charCodeAt(d)])if(l<0){for(let t=h-3;t>=0;t-=3)if(Ms[t+1]==-l){let e=Ms[t+2],i=2&e?o:4&e?1&e?a:o:0;i&&(Is[d]=Is[Ms[t]]=i),h=t;break}}else{if(189==Ms.length)break;Ms[h++]=d,Ms[h++]=r,Ms[h++]=u}else if(2==(c=Is[d])||1==c){let t=c==o;u=t?0:1;for(let e=h-3;e>=0;e-=3){let i=Ms[e+2];if(2&i)break;if(t)Ms[e+2]|=2;else{if(4&i)break;Ms[e+2]|=4}}}for(let r=0;r<i;r++)if(256==Is[r]){let t=r+1;for(;t<i&&256==Is[t];)t++;let e=1==(r?Is[r-1]:o),a=e==(1==(t<i?Is[t]:o))?e?1:2:o;for(let i=r;i<t;i++)Is[i]=a;r=t-1}let n=[];if(1==o)for(let r=0;r<i;){let t=r,e=1!=Is[r++];for(;r<i&&e==(1!=Is[r]);)r++;if(e)for(let i=r;i>t;){let e=i,o=2!=Is[--i];for(;i>t&&o==(2!=Is[i-1]);)i--;n.push(new Ts(i,e,o?2:1))}else n.push(new Ts(t,r,0))}else for(let r=0;r<i;){let t=r,e=2==Is[r++];for(;r<i&&e==(2==Is[r]);)r++;n.push(new Ts(t,r,e?1:2))}return n}function Ns(t){return[new Ts(0,t,0)]}let Ls="";function Es(t,e,i,o,a){var s;let n=o.head-t.from,r=-1;if(0==n){if(!a||!t.length)return null;e[0].level!=i&&(n=e[0].side(!1,i),r=0)}else if(n==t.length){if(a)return null;let t=e[e.length-1];t.level!=i&&(n=t.side(!0,i),r=e.length-1)}r<0&&(r=Ts.find(e,n,null!==(s=o.bidiLevel)&&void 0!==s?s:-1,o.assoc));let l=e[r];n==l.side(a,i)&&(l=e[r+=a?1:-1],n=l.side(!a,i));let c=a==(l.dir==i),d=qe(t.text,n,c);if(Ls=t.text.slice(Math.min(n,d),Math.max(n,d)),d!=l.side(a,i))return fi.cursor(d+t.from,c?-1:1,l.level);let h=r==(a?e.length-1:0)?null:e[r+(a?1:-1)];return h||l.level==i?h&&h.level<l.level?fi.cursor(h.side(!a,i)+t.from,a?1:-1,h.level):fi.cursor(d+t.from,a?-1:1,l.level):fi.cursor(a?t.to:t.from,a?-1:1,i)}const js="\uffff";class Zs{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(no.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=js}readRange(t,e){if(!t)return this;let i=t.parentNode;for(let o=t;;){this.findPointBefore(i,o);let t=this.text.length;this.readNode(o);let a=o.nextSibling;if(a==e)break;let s=aa.get(o),n=aa.get(a);(s&&n?s.breakAfter:(s?s.breakAfter:Rs(o))||Rs(a)&&("BR"!=o.nodeName||o.cmIgnore)&&this.text.length>t)&&this.lineBreak(),o=a}return this.findPointBefore(i,e),this}readTextNode(t){let e=t.nodeValue;for(let i of this.points)i.node==t&&(i.pos=this.text.length+Math.min(i.offset,e.length));for(let i=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let a,s=-1,n=1;if(this.lineSeparator?(s=e.indexOf(this.lineSeparator,i),n=this.lineSeparator.length):(a=o.exec(e))&&(s=a.index,n=a[0].length),this.append(e.slice(i,s<0?e.length:s)),s<0)break;if(this.lineBreak(),n>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=n-1);i=s+n}}readNode(t){if(t.cmIgnore)return;let e=aa.get(t),i=e&&e.overrideDOMText;if(null!=i){this.findPointInside(t,i.length);for(let t=i.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let i of this.points)i.node==t&&t.childNodes[i.offset]==e&&(i.pos=this.text.length)}findPointInside(t,e){for(let i of this.points)(3==t.nodeType?i.node==t:t.contains(i.node))&&(i.pos=this.text.length+Math.min(e,i.offset))}}function Rs(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class Qs{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class zs extends aa{constructor(t){super(),this.view=t,this.compositionDeco=Ra.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new Ha],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ys(0,0,0,t.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(t){let e=t.changedRanges;this.minWidth>0&&e.length&&(e.every((t=>{let{fromA:e,toA:i}=t;return i<this.minWidthFrom||e>this.minWidthTo}))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Ra.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=function(t,e){let i=Bs(t);if(!i)return Ra.none;let{from:o,to:a,node:s,text:n}=i,r=e.mapPos(o,1),l=Math.max(r,e.mapPos(a,-1)),{state:c}=t,d=new Zs([],c);3==s.nodeType?d.readTextNode(s):d.readRange(s.firstChild,null);let{text:h}=d;if(h.indexOf(js)>-1)return Ra.none;if(l-r<h.length)if(c.doc.sliceString(r,Math.min(c.doc.length,r+h.length))==h)l=r+h.length;else{if(c.doc.sliceString(Math.max(0,l-h.length),l)!=h)return Ra.none;r=l-h.length}else if(c.doc.sliceString(r,l)!=h)return Ra.none;let u=aa.get(s);u instanceof wa?u=u.widget.topView:u&&(u.parent=null);return Ra.set(Ra.replace({widget:new Ys(s,n,u),inclusive:!0}).range(r,l))}(this.view,t.changes)),(ya.ie||ya.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let i=function(t,e,i){let o=new Vs;return po.compare(t,e,i,o),o.changes}(this.decorations,this.updateDeco(),t.changes);return e=ys.extendWithRanges(e,i),(0!=this.dirty||0!=e.length)&&(this.updateInner(e,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=ya.chrome||ya.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,t),this.dirty=0,t&&(t.written||i.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Va&&a.widget instanceof Us&&o.push(a.dom);i.updateGaps(o)}updateChildren(t,e){let i=this.childCursor(e);for(let o=t.length-1;;o--){let e=o>=0?t[o]:null;if(!e)break;let{fromA:a,toA:s,fromB:n,toB:r}=e,{content:l,breakAtStart:c,openStart:d,openEnd:h}=Wa.build(this.view.state.doc,n,r,this.decorations,this.dynamicDecorationMap),{i:u,off:p}=i.findPos(s,1),{i:_,off:f}=i.findPos(a,-1);ra(this,_,f,u,p,l,c,d,h)}}updateSelection(){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let e=this.view.root.activeElement,i=e==this.dom,o=!i&&zo(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e));if(!(i||t||o))return;let a=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,n=this.domAtPos(s.anchor),r=s.empty?n:this.domAtPos(s.head);if(ya.gecko&&s.empty&&!this.compositionDeco.size&&(1==(l=n).node.nodeType&&l.node.firstChild&&(0==l.offset||"false"==l.node.childNodes[l.offset-1].contentEditable)&&(l.offset==l.node.childNodes.length||"false"==l.node.childNodes[l.offset].contentEditable))){let t=document.createTextNode("");this.view.observer.ignore((()=>n.node.insertBefore(t,n.node.childNodes[n.offset]||null))),n=r=new ia(t,0),a=!0}var l;let c=this.view.observer.selectionRange;!a&&c.focusNode&&Bo(n.node,n.offset,c.anchorNode,c.anchorOffset)&&Bo(r.node,r.offset,c.focusNode,c.focusOffset)||(this.view.observer.ignore((()=>{ya.android&&ya.chrome&&this.dom.contains(c.focusNode)&&function(t,e){for(let i=t;i&&i!=e;i=i.assignedSlot||i.parentNode)if(1==i.nodeType&&"false"==i.contentEditable)return!0;return!1}(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=Ro(this.view.root);if(t)if(s.empty){if(ya.gecko){let t=(i=n.node,a=n.offset,1!=i.nodeType?0:(a&&"false"==i.childNodes[a-1].contentEditable?1:0)|(a<i.childNodes.length&&"false"==i.childNodes[a].contentEditable?2:0));if(t&&3!=t){let e=Hs(n.node,n.offset,1==t?1:-1);e&&(n=new ia(e,1==t?0:e.nodeValue.length))}}t.collapse(n.node,n.offset),null!=s.bidiLevel&&null!=c.cursorBidiLevel&&(c.cursorBidiLevel=s.bidiLevel)}else if(t.extend){t.collapse(n.node,n.offset);try{t.extend(r.node,r.offset)}catch(Sv){}}else{let e=document.createRange();s.anchor>s.head&&([n,r]=[r,n]),e.setEnd(r.node,r.offset),e.setStart(n.node,n.offset),t.removeAllRanges(),t.addRange(e)}else;var i,a;o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),e&&e.focus())})),this.view.observer.setSelectionRange(n,r)),this.impreciseAnchor=n.precise?null:new ia(c.anchorNode,c.anchorOffset),this.impreciseHead=r.precise?null:new ia(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:t}=this,e=t.state.selection.main,i=Ro(t.root),{anchorNode:o,anchorOffset:a}=t.observer.selectionRange;if(!i||!e.empty||!e.assoc||!i.modify)return;let s=Ha.find(this,e.head);if(!s)return;let n=s.posAtStart;if(e.head==n||e.head==n+s.length)return;let r=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!r||!l||r.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);i.collapse(c.node,c.offset),i.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let d=t.observer.selectionRange;t.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=e.from&&i.collapse(o,a)}nearest(t){for(let e=t;e;){let t=aa.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let i=this.nearest(t);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(t,e)+i.posAtStart}domAtPos(t){let{i:e,off:i}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(i<t.length||t instanceof Ha)break;e++,i=0}return this.children[e].domAtPos(i)}coordsAt(t,e){for(let i=this.length,o=this.children.length-1;;o--){let a=this.children[o],s=i-a.breakAfter-a.length;if(t>s||t==s&&a.type!=Za.WidgetBefore&&a.type!=Za.WidgetAfter&&(!o||2==e||this.children[o-1].breakAfter||this.children[o-1].type==Za.WidgetBefore&&e>-2))return a.coordsAt(t-s,e);i=s}}measureVisibleLineHeights(t){let e=[],{from:i,to:o}=t,a=this.view.contentDOM.clientWidth,s=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,n=-1,r=this.view.textDirection==Ds.LTR;for(let l=0,c=0;c<this.children.length;c++){let t=this.children[c],d=l+t.length;if(d>o)break;if(l>=i){let i=t.dom.getBoundingClientRect();if(e.push(i.height),s){let e=t.dom.lastChild,o=e?Uo(e):[];if(o.length){let t=o[o.length-1],e=r?t.right-i.left:i.right-t.left;e>n&&(n=e,this.minWidth=a,this.minWidthFrom=l,this.minWidthTo=d)}}}l=d+t.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?Ds.RTL:Ds.LTR}measureTextSize(){for(let a of this.children)if(a instanceof Ha){let t=a.measureTextSize();if(t)return t}let t,e,i,o=document.createElement("div");return o.className="cm-line",o.style.width="99999px",o.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(o);let a=Uo(o.firstChild)[0];t=o.getBoundingClientRect().height,e=a?a.width/27:7,i=a?a.height:t,o.remove()})),{lineHeight:t,charWidth:e,textHeight:i}}childCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length,e=this.children.length;return e&&(t-=this.children[--e].length),new na(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let i=0,o=0;;o++){let a=o==e.viewports.length?null:e.viewports[o],s=a?a.from-1:this.length;if(s>i){let o=e.lineBlockAt(s).bottom-e.lineBlockAt(i).top;t.push(Ra.replace({widget:new Us(o),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!a)break;i=a.to+1}return Ra.set(t)}updateDeco(){let t=this.view.state.facet(fs).map(((t,e)=>(this.dynamicDecorationMap[e]="function"==typeof t)?t(this.view):t));for(let e=t.length;e<t.length+3;e++)this.dynamicDecorationMap[e]=!1;return this.decorations=[...t,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){let e,{range:i}=t,o=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1);if(!o)return;!i.empty&&(e=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(o={left:Math.min(o.left,e.left),top:Math.min(o.top,e.top),right:Math.max(o.right,e.right),bottom:Math.max(o.bottom,e.bottom)});let a=vs(this.view),s={left:o.left-a.left,top:o.top-a.top,right:o.right+a.right,bottom:o.bottom+a.bottom};!function(t,e,i,o,a,s,n,r){let l=t.ownerDocument,c=l.defaultView||window;for(let d=t;d;)if(1==d.nodeType){let t,h=d==l.body;if(h)t=Go(c);else{if(d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let e=d.getBoundingClientRect();t={left:e.left,right:e.left+d.clientWidth,top:e.top,bottom:e.top+d.clientHeight}}let u=0,p=0;if("nearest"==a)e.top<t.top?(p=-(t.top-e.top+n),i>0&&e.bottom>t.bottom+p&&(p=e.bottom-t.bottom+p+n)):e.bottom>t.bottom&&(p=e.bottom-t.bottom+n,i<0&&e.top-p<t.top&&(p=-(t.top+p-e.top+n)));else{let o=e.bottom-e.top,s=t.bottom-t.top;p=("center"==a&&o<=s?e.top+o/2-s/2:"start"==a||"center"==a&&i<0?e.top-n:e.bottom-s+n)-t.top}if("nearest"==o?e.left<t.left?(u=-(t.left-e.left+s),i>0&&e.right>t.right+u&&(u=e.right-t.right+u+s)):e.right>t.right&&(u=e.right-t.right+s,i<0&&e.left<t.left+u&&(u=-(t.left+u-e.left+s))):u=("center"==o?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==o==r?e.left-s:e.right-(t.right-t.left)+s)-t.left,u||p)if(h)c.scrollBy(u,p);else{let t=0,i=0;if(p){let t=d.scrollTop;d.scrollTop+=p,i=d.scrollTop-t}if(u){let e=d.scrollLeft;d.scrollLeft+=u,t=d.scrollLeft-e}e={left:e.left-t,top:e.top-i,right:e.right-t,bottom:e.bottom-i},t&&Math.abs(t-u)<1&&(o="nearest"),i&&Math.abs(i-p)<1&&(a="nearest")}if(h)break;d=d.assignedSlot||d.parentNode}else{if(11!=d.nodeType)break;d=d.host}}(this.view.scrollDOM,s,i.head<i.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==Ds.LTR)}}class Us extends ja{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Bs(t){let e=t.observer.selectionRange,i=e.focusNode&&Hs(e.focusNode,e.focusOffset,0);if(!i)return null;let o=t.docView.nearest(i);if(!o)return null;if(o instanceof Ha){let t=i;for(;t.parentNode!=o.dom;)t=t.parentNode;let e=t.previousSibling;for(;e&&!aa.get(e);)e=e.previousSibling;let a=e?aa.get(e).posAtEnd:o.posAtStart;return{from:a,to:a,node:t,text:i}}{for(;;){let{parent:t}=o;if(!t)return null;if(t instanceof Ha)break;o=t}let t=o.posAtStart;return{from:t,to:t+o.length,node:o.dom,text:i}}}class Ys extends ja{constructor(t,e,i){super(),this.top=t,this.text=e,this.topView=i}eq(t){return this.top==t.top&&this.text==t.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return wa}}function Hs(t,e,i){if(i<=0)for(let o=t,a=e;;){if(3==o.nodeType)return o;if(!(1==o.nodeType&&a>0))break;o=o.childNodes[a-1],a=Vo(o)}if(i>=0)for(let o=t,a=e;;){if(3==o.nodeType)return o;if(!(1==o.nodeType&&a<o.childNodes.length&&i>=0))break;o=o.childNodes[a],a=0}return null}class Vs{constructor(){this.changes=[]}compareRange(t,e){Ya(t,e,this.changes)}comparePoint(t,e){Ya(t,e,this.changes)}}function Ws(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Gs(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Js(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function qs(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Ks(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Xs(t,e,i){let o,a,s,n,r,l,c,d,h=!1;for(let p=t.firstChild;p;p=p.nextSibling){let t=Uo(p);for(let u=0;u<t.length;u++){let _=t[u];a&&Js(a,_)&&(_=qs(Ks(_,a.bottom),a.top));let f=Ws(e,_),g=Gs(i,_);if(0==f&&0==g)return 3==p.nodeType?$s(p,e,i):Xs(p,e,i);if(!o||n>g||n==g&&s>f){o=p,a=_,s=f,n=g;let r=g?i<_.top?-1:1:f?e<_.left?-1:1:0;h=!r||(r>0?u<t.length-1:u>0)}0==f?i>_.bottom&&(!c||c.bottom<_.bottom)?(r=p,c=_):i<_.top&&(!d||d.top>_.top)&&(l=p,d=_):c&&Js(c,_)?c=Ks(c,_.bottom):d&&Js(d,_)&&(d=qs(d,_.top))}}if(c&&c.bottom>=i?(o=r,a=c):d&&d.top<=i&&(o=l,a=d),!o)return{node:t,offset:0};let u=Math.max(a.left,Math.min(a.right,e));return 3==o.nodeType?$s(o,u,i):h&&"false"!=o.contentEditable?Xs(o,u,i):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,o)+(e>=(a.left+a.right)/2?1:0)}}function $s(t,e,i){let o=t.nodeValue.length,a=-1,s=1e9,n=0;for(let r=0;r<o;r++){let o=$o(t,r,r+1).getClientRects();for(let l=0;l<o.length;l++){let c=o[l];if(c.top==c.bottom)continue;n||(n=e-c.left);let d=(c.top>i?c.top-i:i-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let i=e>=(c.left+c.right)/2,o=i;if(ya.chrome||ya.gecko){$o(t,r).getBoundingClientRect().left==c.right&&(o=!i)}if(d<=0)return{node:t,offset:r+(o?1:0)};a=r+(o?1:0),s=d}}}return{node:t,offset:a>-1?a:n>0?t.nodeValue.length:0}}function tn(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;var a,s;let n,r=t.contentDOM.getBoundingClientRect(),l=r.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,{x:d,y:h}=e,u=h-l;if(u<0)return 0;if(u>c)return t.state.doc.length;for(let y=t.defaultLineHeight/2,A=!1;n=t.elementAtHeight(u),n.type!=Za.Text;)for(;u=o>0?n.bottom+y:n.top-y,!(u>=0&&u<=c);){if(A)return i?null:0;A=!0,o=-o}h=l+u;let p=n.from;if(p<t.viewport.from)return 0==t.viewport.from?0:i?null:en(t,r,n,d,h);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:i?null:en(t,r,n,d,h);let _=t.dom.ownerDocument,f=t.root.elementFromPoint?t.root:_,g=f.elementFromPoint(d,h);g&&!t.contentDOM.contains(g)&&(g=null),g||(d=Math.max(r.left+1,Math.min(r.right-1,d)),g=f.elementFromPoint(d,h),g&&!t.contentDOM.contains(g)&&(g=null));let m,v=-1;if(g&&0!=(null===(a=t.docView.nearest(g))||void 0===a?void 0:a.isEditable))if(_.caretPositionFromPoint){let t=_.caretPositionFromPoint(d,h);t&&({offsetNode:m,offset:v}=t)}else if(_.caretRangeFromPoint){let e=_.caretRangeFromPoint(d,h);e&&(({startContainer:m,startOffset:v}=e),(!t.contentDOM.contains(m)||ya.safari&&function(t,e,i){let o;if(3!=t.nodeType||e!=(o=t.nodeValue.length))return!1;for(let a=t.nextSibling;a;a=a.nextSibling)if(1!=a.nodeType||"BR"!=a.nodeName)return!1;return $o(t,o-1,o).getBoundingClientRect().left>i}(m,v,d)||ya.chrome&&function(t,e,i){if(0!=e)return!1;for(let a=t;;){let t=a.parentNode;if(!t||1!=t.nodeType||t.firstChild!=a)return!1;if(t.classList.contains("cm-line"))break;a=t}let o=1==t.nodeType?t.getBoundingClientRect():$o(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return i-o.left>5}(m,v,d))&&(m=void 0))}if(!m||!t.docView.dom.contains(m)){let e=Ha.find(t.docView,p);if(!e)return u>n.top+n.height/2?n.to:n.from;({node:m,offset:v}=Xs(e.dom,d,h))}let b=t.docView.nearest(m);if(!b)return null;if(b.isWidget&&1==(null===(s=b.dom)||void 0===s?void 0:s.nodeType)){let t=b.dom.getBoundingClientRect();return e.y<t.top||e.y<=t.bottom&&e.x<=(t.left+t.right)/2?b.posAtStart:b.posAtEnd}return b.localPosFromDOM(m,v)+b.posAtStart}function en(t,e,i,o,a){let s=Math.round((o-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&i.height>1.5*t.defaultLineHeight){s+=Math.floor((a-i.top)/t.defaultLineHeight)*t.viewState.heightOracle.lineLength}let n=t.state.sliceDoc(i.from,i.to);return i.from+Co(n,s,t.state.tabSize)}function on(t,e){let i=t.lineBlockAt(e);if(Array.isArray(i.type))for(let o of i.type)if(o.to>e||o.to==e&&(o.to==i.to||o.type==Za.Text))return o;return i}function an(t,e,i,o){let a=t.state.doc.lineAt(e.head),s=t.bidiSpans(a),n=t.textDirectionAt(a.from);for(let r=e,l=null;;){let e=Es(a,s,n,r,i),c=Ls;if(!e){if(a.number==(i?t.state.doc.lines:1))return r;c="\n",a=t.state.doc.line(a.number+(i?1:-1)),s=t.bidiSpans(a),e=fi.cursor(i?a.from:a.to)}if(l){if(!l(c))return r}else{if(!o)return e;l=o(c)}r=e}}function sn(t,e,i){for(;;){let o=0;for(let a of t)a.between(e-1,e+1,((t,a,s)=>{if(e>t&&e<a){let s=o||i||(e-t<a-e?-1:1);e=s<0?t:a,o=s}}));if(!o)return e}}function nn(t,e,i){let o=sn(t.state.facet(gs).map((e=>e(t))),i.from,e.head>i.from?-1:1);return o==i.from?i:fi.cursor(o,o<i.from?1:-1)}class rn{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let e=(e,i)=>{this.ignoreDuringComposition(i)||"keydown"==i.type&&this.keydown(t,i)||(this.mustFlushObserver(i)&&t.observer.forceFlush(),this.runCustomHandlers(i.type,t,i)?i.preventDefault():e(t,i))};for(let i in _n){let o=_n[i];t.contentDOM.addEventListener(i,(i=>{pn(t,i)&&e(o,i)}),fn[i]),this.registeredEvents.push(i)}t.scrollDOM.addEventListener("mousedown",(i=>{if(i.target==t.scrollDOM&&i.clientY>t.contentDOM.getBoundingClientRect().bottom&&(e(_n.mousedown,i),!i.defaultPrevented&&2==i.button)){let e=t.contentDOM.style.minHeight;t.contentDOM.style.minHeight="100%",setTimeout((()=>t.contentDOM.style.minHeight=e),200)}})),t.scrollDOM.addEventListener("drop",(i=>{i.target==t.scrollDOM&&i.clientY>t.contentDOM.getBoundingClientRect().bottom&&e(_n.drop,i)})),ya.chrome&&102==ya.chrome_version&&t.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=t.hasFocus,ya.safari&&t.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t,e){var i;let o;this.customHandlers=[];for(let a of e)if(o=null===(i=a.update(t).spec)||void 0===i?void 0:i.domEventHandlers){this.customHandlers.push({plugin:a.value,handlers:o});for(let e in o)this.registeredEvents.indexOf(e)<0&&"scroll"!=e&&(this.registeredEvents.push(e),t.contentDOM.addEventListener(e,(i=>{pn(t,i)&&this.runCustomHandlers(e,t,i)&&i.preventDefault()})))}}runCustomHandlers(t,e,i){for(let a of this.customHandlers){let s=a.handlers[t];if(s)try{if(s.call(a.plugin,i,e)||i.defaultPrevented)return!0}catch(o){rs(e.state,o)}}return!1}runScrollHandlers(t,e){this.lastScrollTop=t.scrollDOM.scrollTop,this.lastScrollLeft=t.scrollDOM.scrollLeft;for(let o of this.customHandlers){let a=o.handlers.scroll;if(a)try{a.call(o.plugin,e,t)}catch(i){rs(t.state,i)}}}keydown(t,e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(27!=e.keyCode&&dn.indexOf(e.keyCode)<0&&(t.inputState.lastEscPress=0),ya.android&&ya.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return t.observer.delayAndroidKey(e.key,e.keyCode),!0;let i;return!(!ya.ios||e.synthetic||e.altKey||e.metaKey||!((i=ln.find((t=>t.keyCode==e.keyCode)))&&!e.ctrlKey||cn.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey))&&(this.pendingIOSKey=i||e,setTimeout((()=>this.flushIOSKey(t)),250),!0)}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&(this.pendingIOSKey=void 0,ta(t.contentDOM,e.key,e.keyCode))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(ya.safari&&!ya.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}mustFlushObserver(t){return"keydown"==t.type&&229!=t.keyCode}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const ln=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],cn="dthko",dn=[16,17,18,20,91,92,224,225];function hn(t){return.7*Math.max(0,t)+8}class un{constructor(t,e,i,o){this.view=t,this.style=i,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParent=function(t){let e=t.ownerDocument;for(let i=t.parentNode;i&&i!=e.body;)if(1==i.nodeType){if(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)return i;i=i.assignedSlot||i.parentNode}else{if(11!=i.nodeType)break;i=i.host}return null}(t.contentDOM),this.atoms=t.state.facet(gs).map((e=>e(t)));let a=t.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(no.allowMultipleSelections)&&function(t,e){let i=t.state.facet(qa);return i.length?i[0](e):ya.mac?e.metaKey:e.ctrlKey}(t,e),this.dragMove=function(t,e){let i=t.state.facet(Ka);return i.length?i[0](e):ya.mac?!e.altKey:!e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:i}=t.state.selection;if(i.empty)return!1;let o=Ro(t.root);if(!o||0==o.rangeCount)return!0;let a=o.getRangeAt(0).getClientRects();for(let s=0;s<a.length;s++){let t=a[s];if(t.left<=e.clientX&&t.right>=e.clientX&&t.top<=e.clientY&&t.bottom>=e.clientY)return!0}return!1}(t,e)||1!=xn(e))&&null}start(t){!1===this.dragging&&(t.preventDefault(),this.select(t))}move(t){var e;if(0==t.buttons)return this.destroy();if(!1!==this.dragging)return;this.select(this.lastEvent=t);let i=0,o=0,a=(null===(e=this.scrollParent)||void 0===e?void 0:e.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},s=vs(this.view);t.clientX-s.left<=a.left+6?i=-hn(a.left-t.clientX):t.clientX+s.right>=a.right-6&&(i=hn(t.clientX-a.right)),t.clientY-s.top<=a.top+6?o=-hn(a.top-t.clientY):t.clientY+s.bottom>=a.bottom-6&&(o=hn(t.clientY-a.bottom)),this.setScrollSpeed(i,o)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let i=0;i<t.ranges.length;i++){let o=t.ranges[i],a=null;if(o.empty){let t=sn(this.atoms,o.from,0);t!=o.from&&(a=fi.cursor(t,-1))}else{let t=sn(this.atoms,o.from,-1),e=sn(this.atoms,o.to,1);t==o.from&&e==o.to||(a=fi.range(o.from==o.anchor?t:e,o.from==o.head?t:e))}a&&(e||(e=t.ranges.slice()),e[i]=a)}return e?fi.create(e,t.mainIndex):t}select(t){let{view:e}=this,i=this.skipAtoms(this.style.get(t,this.extend,this.multiple));!this.mustSelect&&i.eq(e.state.selection)&&i.main.assoc==e.state.selection.main.assoc||this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function pn(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i,o=e.target;o!=t.contentDOM;o=o.parentNode)if(!o||11==o.nodeType||(i=aa.get(o))&&i.ignoreEvent(e))return!1;return!0}const _n=Object.create(null),fn=Object.create(null),gn=ya.ie&&ya.ie_version<15||ya.ios&&ya.webkit_version<604;function mn(t,e){let i,{state:o}=t,a=1,s=o.toText(e),n=s.lines==o.selection.ranges.length;if(null!=Mn&&o.selection.ranges.every((t=>t.empty))&&Mn==s.toString()){let t=-1;i=o.changeByRange((i=>{let r=o.doc.lineAt(i.from);if(r.from==t)return{range:i};t=r.from;let l=o.toText((n?s.line(a++).text:e)+o.lineBreak);return{changes:{from:r.from,insert:l},range:fi.cursor(i.from+l.length)}}))}else i=n?o.changeByRange((t=>{let e=s.line(a++);return{changes:{from:t.from,to:t.to,insert:e.text},range:fi.cursor(t.from+e.length)}})):o.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}function vn(t,e,i,o){if(1==o)return fi.cursor(e,i);if(2==o)return function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=t.charCategorizer(e),a=t.doc.lineAt(e),s=e-a.from;if(0==a.length)return fi.cursor(e);0==s?i=1:s==a.length&&(i=-1);let n=s,r=s;i<0?n=qe(a.text,s,!1):r=qe(a.text,s);let l=o(a.text.slice(n,r));for(;n>0;){let t=qe(a.text,n,!1);if(o(a.text.slice(t,n))!=l)break;n=t}for(;r<a.length;){let t=qe(a.text,r);if(o(a.text.slice(r,t))!=l)break;r=t}return fi.range(n+a.from,r+a.from)}(t.state,e,i);{let i=Ha.find(t.docView,e),o=t.state.doc.lineAt(i?i.posAtEnd:e),a=i?i.posAtStart:o.from,s=i?i.posAtEnd:o.to;return s<t.state.doc.length&&s==o.to&&s++,fi.range(a,s)}}_n.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),27==e.keyCode&&(t.inputState.lastEscPress=Date.now())},_n.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},_n.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},fn.touchstart=fn.touchmove={passive:!0},_n.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let i=null;for(let o of t.state.facet(Xa))if(i=o(t,e),i)break;if(i||0!=e.button||(i=function(t,e){let i=Dn(t,e),o=xn(e),a=t.state.selection;return{update(t){t.docChanged&&(i.pos=t.changes.mapPos(i.pos),a=a.map(t.changes))},get(e,s,n){let r,l=Dn(t,e),c=vn(t,l.pos,l.bias,o);if(i.pos!=l.pos&&!s){let e=vn(t,i.pos,i.bias,o),a=Math.min(e.from,c.from),s=Math.max(e.to,c.to);c=a<c.from?fi.range(a,s):fi.range(s,a)}return s?a.replaceRange(a.main.extend(c.from,c.to)):n&&1==o&&a.ranges.length>1&&(r=function(t,e){for(let i=0;i<t.ranges.length;i++){let{from:o,to:a}=t.ranges[i];if(o<=e&&a>=e)return fi.create(t.ranges.slice(0,i).concat(t.ranges.slice(i+1)),t.mainIndex==i?0:t.mainIndex-(t.mainIndex>i?1:0))}return null}(a,l.pos))?r:n?a.addRange(c):fi.create([c])}}}(t,e)),i){let o=t.root.activeElement!=t.contentDOM;t.inputState.startMouseSelection(new un(t,e,i,o)),o&&t.observer.ignore((()=>Xo(t.contentDOM))),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};let bn=(t,e)=>t>=e.top&&t<=e.bottom,yn=(t,e,i)=>bn(e,i)&&t>=i.left&&t<=i.right;function An(t,e,i,o){let a=Ha.find(t.docView,e);if(!a)return 1;let s=e-a.posAtStart;if(0==s)return 1;if(s==a.length)return-1;let n=a.coordsAt(s,-1);if(n&&yn(i,o,n))return-1;let r=a.coordsAt(s,1);return r&&yn(i,o,r)?1:n&&bn(o,n)?-1:1}function Dn(t,e){let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:i,bias:An(t,i,e.clientX,e.clientY)}}const kn=ya.ie&&ya.ie_version<=11;let On=null,wn=0,Cn=0;function xn(t){if(!kn)return t.detail;let e=On,i=Cn;return On=t,Cn=Date.now(),wn=!e||i>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(wn+1)%3:1}function Sn(t,e,i,o){if(!i)return;let a=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,n=o&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,r={from:a,insert:i},l=t.state.changes(n?[n,r]:r);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(a,-1),head:l.mapPos(a,1)},userEvent:n?"move.drop":"input.drop"})}_n.dragstart=(t,e)=>{let{selection:{main:i}}=t.state,{mouseSelection:o}=t.inputState;o&&(o.dragging=i),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(i.from,i.to)),e.dataTransfer.effectAllowed="copyMove")},_n.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let i=e.dataTransfer.files;if(i&&i.length){e.preventDefault();let o=Array(i.length),a=0,s=()=>{++a==i.length&&Sn(t,e,o.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<i.length;t++){let e=new FileReader;e.onerror=s,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(o[t]=e.result),s()},e.readAsText(i[t])}}else Sn(t,e,e.dataTransfer.getData("Text"),!0)},_n.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let i=gn?null:e.clipboardData;i?(mn(t,i.getData("text/plain")||i.getData("text/uri-text")),e.preventDefault()):function(t){let e=t.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((()=>{t.focus(),i.remove(),mn(t,i.value)}),50)}(t)};let Mn=null;_n.copy=_n.cut=(t,e)=>{let{text:i,ranges:o,linewise:a}=function(t){let e=[],i=[],o=!1;for(let a of t.selection.ranges)a.empty||(e.push(t.sliceDoc(a.from,a.to)),i.push(a));if(!e.length){let a=-1;for(let{from:o}of t.selection.ranges){let s=t.doc.lineAt(o);s.number>a&&(e.push(s.text),i.push({from:s.from,to:Math.min(t.doc.length,s.to+1)})),a=s.number}o=!0}return{text:e.join(t.lineBreak),ranges:i,linewise:o}}(t.state);if(!i&&!a)return;Mn=a?i:null;let s=gn?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",i)):function(t,e){let i=t.dom.parentNode;if(!i)return;let o=i.appendChild(document.createElement("textarea"));o.style.cssText="position: fixed; left: -10000px; top: 10px",o.value=e,o.focus(),o.selectionEnd=e.length,o.selectionStart=0,setTimeout((()=>{o.remove(),t.focus()}),50)}(t,i),"cut"!=e.type||t.state.readOnly||t.dispatch({changes:o,scrollIntoView:!0,userEvent:"delete.cut"})};const Pn=Hi.define();function Tn(t,e){let i=[];for(let o of t.facet(is)){let a=o(t,e);a&&i.push(a)}return i?t.update({effects:i,annotations:Pn.of(!0)}):null}function In(t){setTimeout((()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let i=Tn(t.state,e);i?t.dispatch(i):t.update([])}}),10)}_n.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),In(t)},_n.blur=t=>{t.observer.clearSelectionRange(),In(t)},_n.compositionstart=_n.compositionupdate=t=>{null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)},_n.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,ya.chrome&&ya.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then((()=>t.observer.flush())):setTimeout((()=>{t.inputState.composing<0&&t.docView.compositionDeco.size&&t.update([])}),50)},_n.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},_n.beforeinput=(t,e)=>{var i;let o;if(ya.chrome&&ya.android&&(o=ln.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(o.key,o.keyCode),"Backspace"==o.key||"Delete"==o.key)){let e=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var i;((null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}};const Fn=["pre-wrap","normal","pre-line","break-spaces"];class Nn{constructor(t){this.lineWrapping=t,this.doc=je.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(t,e){let i=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((e-t-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(t){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return Fn.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let i=0;i<t.length;i++){let o=t[i];o<0?i++:this.heightSamples[Math.floor(10*o)]||(e=!0,this.heightSamples[Math.floor(10*o)]=!0)}return e}refresh(t,e,i,o,a,s){let n=Fn.indexOf(t)>-1,r=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=n;if(this.lineWrapping=n,this.lineHeight=e,this.charWidth=i,this.textHeight=o,this.lineLength=a,r){this.heightSamples={};for(let t=0;t<s.length;t++){let e=s[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return r}}class Ln{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class En{constructor(t,e,i,o,a){this.from=t,this.length=e,this.top=i,this.height=o,this._content=a}get type(){return"number"==typeof this._content?Za.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ua?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new En(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var jn=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(jn||(jn={}));const Zn=.001;class Rn{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this.length=t,this.height=e,this.flags=i}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t,e){this.height!=e&&(Math.abs(this.height-e)>Zn&&(t.heightChanged=!0),this.height=e)}replace(t,e,i){return Rn.of(i)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,i,o){let a=this,s=i.doc;for(let n=o.length-1;n>=0;n--){let{fromA:r,toA:l,fromB:c,toB:d}=o[n],h=a.lineAt(r,jn.ByPosNoHeight,i.setDoc(e),0,0),u=h.to>=l?h:a.lineAt(l,jn.ByPosNoHeight,i,0,0);for(d+=u.to-l,l=u.to;n>0&&h.from<=o[n-1].toA;)r=o[n-1].fromA,c=o[n-1].fromB,n--,r<h.from&&(h=a.lineAt(r,jn.ByPosNoHeight,i,0,0));c+=h.from-r,r=h.from;let p=Hn.build(i.setDoc(s),t,c,d);a=a.replace(r,l,p)}return a.updateHeight(i,0)}static empty(){return new zn(0,0)}static of(t){if(1==t.length)return t[0];let e=0,i=t.length,o=0,a=0;for(;;)if(e==i)if(o>2*a){let a=t[e-1];a.break?t.splice(--e,1,a.left,null,a.right):t.splice(--e,1,a.left,a.right),i+=1+a.break,o-=a.size}else{if(!(a>2*o))break;{let e=t[i];e.break?t.splice(i,1,e.left,null,e.right):t.splice(i,1,e.left,e.right),i+=2+e.break,a-=e.size}}else if(o<a){let i=t[e++];i&&(o+=i.size)}else{let e=t[--i];e&&(a+=e.size)}let s=0;return null==t[e-1]?(s=1,e--):null==t[e]&&(s=1,i++),new Bn(Rn.of(t.slice(0,e)),s,Rn.of(t.slice(i)))}}Rn.prototype.size=1;class Qn extends Rn{constructor(t,e,i){super(t,e),this.deco=i}blockAt(t,e,i,o){return new En(o,this.length,i,this.height,this.deco||0)}lineAt(t,e,i,o,a){return this.blockAt(0,i,o,a)}forEachLine(t,e,i,o,a,s){t<=a+this.length&&e>=a&&s(this.blockAt(0,i,o,a))}updateHeight(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>3?arguments[3]:void 0;return i&&i.from<=e&&i.more&&this.setHeight(t,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class zn extends Qn{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,i,o){return new En(o,this.length,i,this.height,this.breaks)}replace(t,e,i){let o=i[0];return 1==i.length&&(o instanceof zn||o instanceof Un&&4&o.flags)&&Math.abs(this.length-o.length)<10?(o instanceof Un?o=new zn(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):Rn.of(i)}updateHeight(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return o&&o.from<=e&&o.more?this.setHeight(t,o.heights[o.index++]):(i||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Un extends Rn{constructor(t){super(t,0)}heightMetrics(t,e){let i,o=t.doc.lineAt(e).number,a=t.doc.lineAt(e+this.length).number,s=a-o+1,n=0;if(t.lineWrapping){let e=Math.min(this.height,t.lineHeight*s);i=e/s,this.length>s+1&&(n=(this.height-e)/(this.length-s-1))}else i=this.height/s;return{firstLine:o,lastLine:a,perLine:i,perChar:n}}blockAt(t,e,i,o){let{firstLine:a,lastLine:s,perLine:n,perChar:r}=this.heightMetrics(e,o);if(e.lineWrapping){let a=o+Math.round(Math.max(0,Math.min(1,(t-i)/this.height))*this.length),s=e.doc.lineAt(a),l=n+s.length*r,c=Math.max(i,t-l/2);return new En(s.from,s.length,c,l,0)}{let o=Math.max(0,Math.min(s-a,Math.floor((t-i)/n))),{from:r,length:l}=e.doc.line(a+o);return new En(r,l,i+n*o,n,0)}}lineAt(t,e,i,o,a){if(e==jn.ByHeight)return this.blockAt(t,i,o,a);if(e==jn.ByPosNoHeight){let{from:e,to:o}=i.doc.lineAt(t);return new En(e,o-e,0,0,0)}let{firstLine:s,perLine:n,perChar:r}=this.heightMetrics(i,a),l=i.doc.lineAt(t),c=n+l.length*r,d=l.number-s,h=o+n*d+r*(l.from-a-d);return new En(l.from,l.length,Math.max(o,Math.min(h,o+this.height-c)),c,0)}forEachLine(t,e,i,o,a,s){t=Math.max(t,a),e=Math.min(e,a+this.length);let{firstLine:n,perLine:r,perChar:l}=this.heightMetrics(i,a);for(let c=t,d=o;c<=e;){let e=i.doc.lineAt(c);if(c==t){let i=e.number-n;d+=r*i+l*(t-a-i)}let o=r+l*e.length;s(new En(e.from,e.length,d,o,0)),d+=o,c=e.to+1}}replace(t,e,i){let o=this.length-e;if(o>0){let t=i[i.length-1];t instanceof Un?i[i.length-1]=new Un(t.length+o):i.push(null,new Un(o-1))}if(t>0){let e=i[0];e instanceof Un?i[0]=new Un(t+e.length):i.unshift(new Un(t-1),null)}return Rn.of(i)}decomposeLeft(t,e){e.push(new Un(t-1),null)}decomposeRight(t,e){e.push(null,new Un(this.length-t-1))}updateHeight(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=e+this.length;if(o&&o.from<=e+this.length&&o.more){let i=[],s=Math.max(e,o.from),n=-1;for(o.from>e&&i.push(new Un(o.from-e-1).updateHeight(t,e));s<=a&&o.more;){let e=t.doc.lineAt(s).length;i.length&&i.push(null);let a=o.heights[o.index++];-1==n?n=a:Math.abs(a-n)>=Zn&&(n=-2);let r=new zn(e,a);r.outdated=!1,i.push(r),s+=e+1}s<=a&&i.push(null,new Un(a-s).updateHeight(t,s));let r=Rn.of(i);return(n<0||Math.abs(r.height-this.height)>=Zn||Math.abs(n-this.heightMetrics(t,e).perLine)>=Zn)&&(t.heightChanged=!0),r}return(i||this.outdated)&&(this.setHeight(t,t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Bn extends Rn{constructor(t,e,i){super(t.length+e+i.length,t.height+i.height,e|(t.outdated||i.outdated?2:0)),this.left=t,this.right=i,this.size=t.size+i.size}get break(){return 1&this.flags}blockAt(t,e,i,o){let a=i+this.left.height;return t<a?this.left.blockAt(t,e,i,o):this.right.blockAt(t,e,a,o+this.left.length+this.break)}lineAt(t,e,i,o,a){let s=o+this.left.height,n=a+this.left.length+this.break,r=e==jn.ByHeight?t<s:t<n,l=r?this.left.lineAt(t,e,i,o,a):this.right.lineAt(t,e,i,s,n);if(this.break||(r?l.to<n:l.from>n))return l;let c=e==jn.ByPosNoHeight?jn.ByPosNoHeight:jn.ByPos;return r?l.join(this.right.lineAt(n,c,i,s,n)):this.left.lineAt(n,c,i,o,a).join(l)}forEachLine(t,e,i,o,a,s){let n=o+this.left.height,r=a+this.left.length+this.break;if(this.break)t<r&&this.left.forEachLine(t,e,i,o,a,s),e>=r&&this.right.forEachLine(t,e,i,n,r,s);else{let l=this.lineAt(r,jn.ByPos,i,o,a);t<l.from&&this.left.forEachLine(t,l.from-1,i,o,a,s),l.to>=t&&l.from<=e&&s(l),e>l.to&&this.right.forEachLine(l.to+1,e,i,n,r,s)}}replace(t,e,i){let o=this.left.length+this.break;if(e<o)return this.balanced(this.left.replace(t,e,i),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-o,e-o,i));let a=[];t>0&&this.decomposeLeft(t,a);let s=a.length;for(let n of i)a.push(n);if(t>0&&Yn(a,s-1),e<this.length){let t=a.length;this.decomposeRight(e,a),Yn(a,t)}return Rn.of(a)}decomposeLeft(t,e){let i=this.left.length;if(t<=i)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(i++,t>=i&&e.push(null)),t>i&&this.right.decomposeLeft(t-i,e)}decomposeRight(t,e){let i=this.left.length,o=i+this.break;if(t>=o)return this.right.decomposeRight(t-o,e);t<i&&this.left.decomposeRight(t,e),this.break&&t<o&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?Rn.of(this.break?[t,null,e]:[t,e]):(this.left=t,this.right=e,this.height=t.height+e.height,this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,{left:a,right:s}=this,n=e+a.length+this.break,r=null;return o&&o.from<=e+a.length&&o.more?r=a=a.updateHeight(t,e,i,o):a.updateHeight(t,e,i),o&&o.from<=n+s.length&&o.more?r=s=s.updateHeight(t,n,i,o):s.updateHeight(t,n,i),r?this.balanced(a,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Yn(t,e){let i,o;null==t[e]&&(i=t[e-1])instanceof Un&&(o=t[e+1])instanceof Un&&t.splice(e-1,3,new Un(i.length+1+o.length))}class Hn{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof zn?i.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new zn(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,i){if(t<e||i.heightRelevant){let o=i.widget?i.widget.estimatedHeight:0,a=i.widget?i.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let s=e-t;i.block?this.addBlock(new Qn(s,o,i)):(s||a||o>=5)&&this.addLineDeco(o,a,s)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new zn(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let i=new Un(e-t);return this.oracle.doc.lineAt(t).to==e&&(i.flags|=4),i}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof zn)return t;let e=new zn(0,-1);return this.nodes.push(e),e}addBlock(t){var e;this.enterLine();let i=null===(e=t.deco)||void 0===e?void 0:e.type;i!=Za.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,i!=Za.WidgetBefore&&(this.covering=t)}addLineDeco(t,e,i){let o=this.ensureLine();o.length+=i,o.collapsed+=i,o.widgetHeight=Math.max(o.widgetHeight,t),o.breaks+=e,this.writtenTo=this.pos=this.pos+i}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof zn||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new zn(0,-1));let i=t;for(let o of this.nodes)o instanceof zn&&o.updateHeight(this.oracle,i),i+=o?o.length:1;return this.nodes}static build(t,e,i,o){let a=new Hn(i,t);return po.spans(e,i,o,a,0),a.finish(i)}}class Vn{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,i,o){(t<e||i&&i.heightRelevant||o&&o.heightRelevant)&&Ya(t,e,this.changes,5)}}function Wn(t,e){let i=t.getBoundingClientRect(),o=t.ownerDocument,a=o.defaultView||window,s=Math.max(0,i.left),n=Math.min(a.innerWidth,i.right),r=Math.max(0,i.top),l=Math.min(a.innerHeight,i.bottom);for(let c=t.parentNode;c&&c!=o.body;)if(1==c.nodeType){let e=c,i=window.getComputedStyle(e);if((e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&"visible"!=i.overflow){let i=e.getBoundingClientRect();s=Math.max(s,i.left),n=Math.min(n,i.right),r=Math.max(r,i.top),l=c==t.parentNode?i.bottom:Math.min(l,i.bottom)}c="absolute"==i.position||"fixed"==i.position?e.offsetParent:e.parentNode}else{if(11!=c.nodeType)break;c=c.host}return{left:s-i.left,right:Math.max(s,n)-i.left,top:r-(i.top+e),bottom:Math.max(r,l)-(i.top+e)}}function Gn(t,e){let i=t.getBoundingClientRect();return{left:0,right:i.right-i.left,top:e,bottom:i.bottom-(i.top+e)}}class Jn{constructor(t,e,i){this.from=t,this.to=e,this.size=i}static same(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++){let o=t[i],a=e[i];if(o.from!=a.from||o.to!=a.to||o.size!=a.size)return!1}return!0}draw(t){return Ra.replace({widget:new qn(this.size,t)}).range(this.from,this.to)}}class qn extends ja{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class Kn{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=ir,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ds.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(_s).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new Nn(e),this.stateDeco=t.facet(fs).filter((t=>"function"!=typeof t)),this.heightMap=Rn.empty().applyChanges(this.stateDeco,je.empty,this.heightOracle.setDoc(t.doc),[new ys(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ra.set(this.lineGaps.map((t=>t.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let i=0;i<=1;i++){let o=i?e.head:e.anchor;if(!t.some((t=>{let{from:e,to:i}=t;return o>=e&&o<=i}))){let{from:e,to:i}=this.lineBlockAt(o);t.push(new Xn(e,i))}}this.viewports=t.sort(((t,e)=>t.from-e.from)),this.scaler=this.heightMap.height<=7e6?ir:new or(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(t=>{this.viewportLines.push(1==this.scaler.scale?t:ar(t,this.scaler))}))}update(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.state=t.state;let i=this.stateDeco;this.stateDeco=this.state.facet(fs).filter((t=>"function"!=typeof t));let o=t.changedRanges,a=ys.extendWithRanges(o,function(t,e,i){let o=new Vn;return po.compare(t,e,i,o,0),o.changes}(i,this.stateDeco,t?t.changes:ri.empty(this.state.doc.length))),s=this.heightMap.height,n=this.scrolledToBottom?null:this.lineBlockAtHeight(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=s&&(t.flags|=2),n?(this.scrollAnchorPos=t.changes.mapPos(n.from,-1),this.scrollAnchorHeight=n.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let r=a.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<r.from||e.range.head>r.to)||!this.viewportIsAppropriate(r))&&(r=this.getViewport(0,e));let l=!t.changes.empty||2&t.flags||r.from!=this.viewport.from||r.to!=this.viewport.to;this.viewport=r,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(as)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,i=window.getComputedStyle(e),o=this.heightOracle,a=i.whiteSpace;this.defaultTextDirection="rtl"==i.direction?Ds.RTL:Ds.LTR;let s=this.heightOracle.mustRefreshForWrapping(a),n=e.getBoundingClientRect(),r=s||this.mustMeasureContent||this.contentDOMHeight!=n.height;this.contentDOMHeight=n.height,this.mustMeasureContent=!1;let l=0,c=0,d=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;this.paddingTop==d&&this.paddingBottom==h||(this.paddingTop=d,this.paddingBottom=h,l|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(o.lineWrapping&&(r=!0),this.editorWidth=t.scrollDOM.clientWidth,l|=8),this.scrollTop!=t.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=t.scrollDOM.scrollTop),this.scrolledToBottom=this.scrollTop>t.scrollDOM.scrollHeight-t.scrollDOM.clientHeight-4;let u=(this.printing?Gn:Wn)(e,this.paddingTop),p=u.top-this.pixelViewport.top,_=u.bottom-this.pixelViewport.bottom;this.pixelViewport=u;let f=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(f!=this.inView&&(this.inView=f,f&&(r=!0)),!this.inView&&!this.scrollTarget)return 0;let g=n.width;if(this.contentDOMWidth==g&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=n.width,this.editorHeight=t.scrollDOM.clientHeight,l|=8),r){let e=t.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(e)&&(s=!0),s||o.lineWrapping&&Math.abs(g-this.contentDOMWidth)>o.charWidth){let{lineHeight:i,charWidth:n,textHeight:r}=t.docView.measureTextSize();s=i>0&&o.refresh(a,i,n,r,g/n,e),s&&(t.docView.minWidth=0,l|=8)}p>0&&_>0?c=Math.max(p,_):p<0&&_<0&&(c=Math.min(p,_)),o.heightChanged=!1;for(let i of this.viewports){let a=i.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(i);this.heightMap=(s?Rn.empty().applyChanges(this.stateDeco,je.empty,this.heightOracle,[new ys(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(o,0,s,new Ln(i.from,a))}o.heightChanged&&(l|=2)}let m=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return m&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(2&l||m)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,t)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let i=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),o=this.heightMap,a=this.heightOracle,{visibleTop:s,visibleBottom:n}=this,r=new Xn(o.lineAt(s-1e3*i,jn.ByHeight,a,0,0).from,o.lineAt(n+1e3*(1-i),jn.ByHeight,a,0,0).to);if(e){let{head:t}=e.range;if(t<r.from||t>r.to){let i,s=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),n=o.lineAt(t,jn.ByPos,a,0,0);i="center"==e.y?(n.top+n.bottom)/2-s/2:"start"==e.y||"nearest"==e.y&&t<r.from?n.top:n.bottom-s,r=new Xn(o.lineAt(i-500,jn.ByHeight,a,0,0).from,o.lineAt(i+s+500,jn.ByHeight,a,0,0).to)}}return r}mapViewport(t,e){let i=e.mapPos(t.from,-1),o=e.mapPos(t.to,1);return new Xn(this.heightMap.lineAt(i,jn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,jn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate(t){let{from:e,to:i}=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.inView)return!0;let{top:a}=this.heightMap.lineAt(e,jn.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(i,jn.ByPos,this.heightOracle,0,0),{visibleTop:n,visibleBottom:r}=this;return(0==e||a<=n-Math.max(10,Math.min(-o,250)))&&(i==this.state.doc.length||s>=r+Math.max(10,Math.min(o,250)))&&a>n-2e3&&s<r+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let i=[];for(let o of t)e.touchesRange(o.from,o.to)||i.push(new Jn(e.mapPos(o.from),e.mapPos(o.to),o.size));return i}ensureLineGaps(t,e){let i=this.heightOracle.lineWrapping,o=i?1e4:2e3,a=o>>1,s=o<<1;if(this.defaultTextDirection!=Ds.LTR&&!i)return[];let n=[],r=(o,s,l,c)=>{if(s-o<a)return;let d=this.state.selection.main,h=[d.from];d.empty||h.push(d.to);for(let t of h)if(t>o&&t<s)return r(o,t-10,l,c),void r(t+10,s,l,c);let u=function(t,e){for(let i of t)if(e(i))return i;return}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-o)<a&&Math.abs(t.to-s)<a&&!h.some((e=>t.from<e&&t.to>e))));if(!u){if(s<l.to&&e&&i&&e.visibleRanges.some((t=>t.from<=s&&t.to>=s))){let t=e.moveToLineBoundary(fi.cursor(s),!1,!0).head;t>o&&(s=t)}u=new Jn(o,s,this.gapSize(l,o,s,c))}n.push(u)};for(let l of this.viewportLines){if(l.length<s)continue;let t=$n(l.from,l.to,this.stateDeco);if(t.total<s)continue;let e,a,n=this.scrollTarget?this.scrollTarget.range.head:null;if(i){let i,s,r=o/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=n){let e=er(t,n),o=((this.visibleBottom-this.visibleTop)/2+r)/l.height;i=e-o,s=e+o}else i=(this.visibleTop-l.top-r)/l.height,s=(this.visibleBottom-l.top+r)/l.height;e=tr(t,i),a=tr(t,s)}else{let i,s,r=t.total*this.heightOracle.charWidth,l=o*this.heightOracle.charWidth;if(null!=n){let e=er(t,n),o=((this.pixelViewport.right-this.pixelViewport.left)/2+l)/r;i=e-o,s=e+o}else i=(this.pixelViewport.left-l)/r,s=(this.pixelViewport.right+l)/r;e=tr(t,i),a=tr(t,s)}e>l.from&&r(l.from,e,l,t),a<l.to&&r(a,l.to,l,t)}return n}gapSize(t,e,i,o){let a=er(o,i)-er(o,e);return this.heightOracle.lineWrapping?t.height*a:o.total*this.heightOracle.charWidth*a}updateLineGaps(t){Jn.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=Ra.set(t.map((t=>t.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let e=[];po.spans(t,this.viewport.from,this.viewport.to,{span(t,i){e.push({from:t,to:i})},point(){}},20);let i=e.length!=this.visibleRanges.length||this.visibleRanges.some(((t,i)=>t.from!=e[i].from||t.to!=e[i].to));return this.visibleRanges=e,i?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||ar(this.heightMap.lineAt(t,jn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return ar(this.heightMap.lineAt(this.scaler.fromDOM(t),jn.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(t){return ar(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Xn{constructor(t,e){this.from=t,this.to=e}}function $n(t,e,i){let o=[],a=t,s=0;return po.spans(i,t,e,{span(){},point(t,e){t>a&&(o.push({from:a,to:t}),s+=t-a),a=e}},20),a<e&&(o.push({from:a,to:e}),s+=e-a),{total:s,ranges:o}}function tr(t,e){let{total:i,ranges:o}=t;if(e<=0)return o[0].from;if(e>=1)return o[o.length-1].to;let a=Math.floor(i*e);for(let s=0;;s++){let{from:t,to:e}=o[s],i=e-t;if(a<=i)return t+a;a-=i}}function er(t,e){let i=0;for(let{from:o,to:a}of t.ranges){if(e<=a){i+=e-o;break}i+=a-o}return i/t.total}const ir={toDOM:t=>t,fromDOM:t=>t,scale:1};class or{constructor(t,e,i){let o=0,a=0,s=0;this.viewports=i.map((i=>{let{from:a,to:s}=i,n=e.lineAt(a,jn.ByPos,t,0,0).top,r=e.lineAt(s,jn.ByPos,t,0,0).bottom;return o+=r-n,{from:a,to:s,top:n,bottom:r,domTop:0,domBottom:0}})),this.scale=(7e6-o)/(e.height-o);for(let n of this.viewports)n.domTop=s+(n.top-a)*this.scale,s=n.domBottom=n.domTop+(n.bottom-n.top),a=n.bottom}toDOM(t){for(let e=0,i=0,o=0;;e++){let a=e<this.viewports.length?this.viewports[e]:null;if(!a||t<a.top)return o+(t-i)*this.scale;if(t<=a.bottom)return a.domTop+(t-a.top);i=a.bottom,o=a.domBottom}}fromDOM(t){for(let e=0,i=0,o=0;;e++){let a=e<this.viewports.length?this.viewports[e]:null;if(!a||t<a.domTop)return i+(t-o)/this.scale;if(t<=a.domBottom)return a.top+(t-a.domTop);i=a.bottom,o=a.domBottom}}}function ar(t,e){if(1==e.scale)return t;let i=e.toDOM(t.top),o=e.toDOM(t.bottom);return new En(t.from,t.length,i,o-i,Array.isArray(t._content)?t._content.map((t=>ar(t,e))):t._content)}const sr=vi.define({combine:t=>t.join(" ")}),nr=vi.define({combine:t=>t.indexOf(!0)>-1}),rr=Po.newName(),lr=Po.newName(),cr=Po.newName(),dr={"&light":"."+lr,"&dark":"."+cr};function hr(t,e,i){return new Po(e,{finish:e=>/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!i||!i[e])throw new RangeError(`Unsupported selector: ${e}`);return i[e]})):t+" "+e})}const ur=hr("."+rr,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},dr);class pr{constructor(t,e,i,o){this.typeOver=o,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:s}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,i,0))){let e=a||s?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:i,anchorOffset:o,focusNode:a,focusOffset:s}=t.observer.selectionRange;i&&(e.push(new Qs(i,o)),a==i&&s==o||e.push(new Qs(a,s)));return e}(t),i=new Zs(e,t.state);i.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=i.text,this.newSel=function(t,e){if(0==t.length)return null;let i=t[0].pos,o=2==t.length?t[1].pos:i;return i>-1&&o>-1?fi.single(i+e,o+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,i=a&&a.node==e.focusNode&&a.offset==e.focusOffset||!Qo(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),o=s&&s.node==e.anchorNode&&s.offset==e.anchorOffset||!Qo(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset);this.newSel=fi.single(o,i)}}}function _r(t,e){let i,{newSel:o}=e,a=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:n}=e.bounds,r=a.from,l=null;(8===s||ya.android&&e.text.length<n-o)&&(r=a.to,l="end");let c=function(t,e,i,o){let a=Math.min(t.length,e.length),s=0;for(;s<a&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==a&&t.length==e.length)return null;let n=t.length,r=e.length;for(;n>0&&r>0&&t.charCodeAt(n-1)==e.charCodeAt(r-1);)n--,r--;if("end"==o){i-=n+Math.max(0,s-Math.min(n,r))-s}if(n<s&&t.length<e.length){s-=i<=s&&i>=n?s-i:0,r=s+(r-n),n=s}else if(r<s){s-=i<=s&&i>=r?s-i:0,n=s+(n-r),r=s}return{from:s,toA:n,toB:r}}(t.state.doc.sliceString(o,n,js),e.text,r-o,l);c&&(ya.chrome&&13==s&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==js+js&&c.toB--,i={from:o+c.from,to:o+c.toA,insert:je.of(e.text.slice(c.from,c.toB).split(js))})}else o&&(!t.hasFocus&&t.state.facet(ls)||o.main.eq(a))&&(o=null);if(!i&&!o)return!1;if(!i&&e.typeOver&&!a.empty&&o&&o.main.empty?i={from:a.from,to:a.to,insert:t.state.doc.slice(a.from,a.to)}:i&&i.from>=a.from&&i.to<=a.to&&(i.from!=a.from||i.to!=a.to)&&a.to-a.from-(i.to-i.from)<=4?i={from:a.from,to:a.to,insert:t.state.doc.slice(a.from,i.from).append(i.insert).append(t.state.doc.slice(i.to,a.to))}:(ya.mac||ya.android)&&i&&i.from==i.to&&i.from==a.head-1&&/^\. ?$/.test(i.insert.toString())&&"off"==t.contentDOM.getAttribute("autocorrect")?(o&&2==i.insert.length&&(o=fi.single(o.main.anchor-1,o.main.head-1)),i={from:a.from,to:a.to,insert:je.of([" "])}):ya.chrome&&i&&i.from==i.to&&i.from==a.head&&"\n "==i.insert.toString()&&t.lineWrapping&&(o&&(o=fi.single(o.main.anchor-1,o.main.head-1)),i={from:a.from,to:a.to,insert:je.of([" "])}),i){let e=t.state;if(ya.ios&&t.inputState.flushIOSKey(t))return!0;if(ya.android&&(i.from==a.from&&i.to==a.to&&1==i.insert.length&&2==i.insert.lines&&ta(t.contentDOM,"Enter",13)||(i.from==a.from-1&&i.to==a.to&&0==i.insert.length||8==s&&i.insert.length<i.to-i.from)&&ta(t.contentDOM,"Backspace",8)||i.from==a.from&&i.to==a.to+1&&0==i.insert.length&&ta(t.contentDOM,"Delete",46)))return!0;let n,r=i.insert.toString();if(t.state.facet(es).some((e=>e(t,i.from,i.to,r))))return!0;if(t.inputState.composing>=0&&t.inputState.composing++,i.from>=a.from&&i.to<=a.to&&i.to-i.from>=(a.to-a.from)/3&&(!o||o.main.empty&&o.main.from==i.from+i.insert.length)&&t.inputState.composing<0){let o=a.from<i.from?e.sliceDoc(a.from,i.from):"",s=a.to>i.to?e.sliceDoc(i.to,a.to):"";n=e.replaceSelection(t.state.toText(o+i.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=e.changes(i),r=o&&o.main.to<=s.newLength?o.main:void 0;if(e.selection.ranges.length>1&&t.inputState.composing>=0&&i.to<=a.to&&i.to>=a.to-10){let o=t.state.sliceDoc(i.from,i.to),l=Bs(t)||t.state.doc.lineAt(a.head),c=a.to-i.to,d=a.to-a.from;n=e.changeByRange((n=>{if(n.from==a.from&&n.to==a.to)return{changes:s,range:r||n.map(s)};let h=n.to-c,u=h-o.length;if(n.to-n.from!=d||t.state.sliceDoc(u,h)!=o||l&&n.to>=l.from&&n.from<=l.to)return{range:n};let p=e.changes({from:u,to:h,insert:i.insert}),_=n.to-a.to;return{changes:p,range:r?fi.range(Math.max(0,r.anchor+_),Math.max(0,r.head+_)):n.map(p)}}))}else n={changes:s,selection:r&&e.selection.replaceRange(r)}}let l="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,l+=".compose",t.inputState.compositionFirstChange&&(l+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(n,{scrollIntoView:!0,userEvent:l}),!0}if(o&&!o.main.eq(a)){let e=!1,i="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),i=t.inputState.lastSelectionOrigin),t.dispatch({selection:o,scrollIntoView:e,userEvent:i}),!0}return!1}const fr={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},gr=ya.ie&&ya.ie_version<=11;class mr{constructor(t){this.view=t,this.active=!1,this.selectionRange=new Jo,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(ya.ie&&ya.ie_version<=11||ya.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),gr&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM),this.resizeContent=new ResizeObserver((()=>this.view.requestMeasure())),this.resizeContent.observe(t.contentDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runScrollHandlers(this.view,t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,i)=>e!=t[i])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,o=this.selectionRange;if(i.state.facet(ls)?i.root.activeElement!=this.dom:!zo(i.dom,o))return;let a=o.anchorNode&&i.docView.nearest(o.anchorNode);a&&a.ignoreEvent(t)?e||(this.selectionChanged=!1):(ya.ie&&ya.ie_version<=11||ya.android&&ya.chrome)&&!i.state.selection.main.empty&&o.focusNode&&Bo(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=ya.safari&&11==t.root.nodeType&&function(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom&&function(t){let e=null;function i(t){t.preventDefault(),t.stopImmediatePropagation(),e=t.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),!e)return null;let o=e.startContainer,a=e.startOffset,s=e.endContainer,n=e.endOffset,r=t.docView.domAtPos(t.state.selection.main.anchor);Bo(r.node,r.offset,s,n)&&([o,a,s,n]=[s,n,o,a]);return{anchorNode:o,anchorOffset:a,focusNode:s,focusOffset:n}}(this.view)||Ro(t.root);if(!e||this.selectionRange.eq(e))return!1;let i=zo(this.dom,e);return i&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let i=e.focusNode,o=e.focusOffset;if(!i||e.anchorNode!=i||e.anchorOffset!=o)return!1;for(o=Math.min(o,Vo(i));;)if(o){if(1!=i.nodeType)return!1;let t=i.childNodes[o-1];"false"==t.contentEditable?o--:(i=t,o=Vo(i))}else{if(i==t)return!0;o=Yo(i),i=i.parentNode}}(this.dom,e)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(e),i&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let i=this.dom;i;)if(1==i.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==i?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(i),i=i.assignedSlot||i.parentNode;else{if(11!=i.nodeType)break;i=i.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,fr),gr&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),gr&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var i;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;if(t){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=t.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&t.force&&ta(this.dom,t.key,t.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(i=this.delayedAndroidKey)||void 0===i?void 0:i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,i=-1,o=!1;for(let a of t){let t=this.readMutation(a);t&&(t.typeOver&&(o=!0),-1==e?({from:e,to:i}=t):(e=Math.min(t.from,e),i=Math.max(t.to,i)))}return{from:e,to:i,typeOver:o}}readChange(){let{from:t,to:e,typeOver:i}=this.processRecords(),o=this.selectionChanged&&zo(this.dom,this.selectionRange);return t<0&&!o?null:(t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new pr(this.view,t,e,i))}flush(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return!1;let i=this.view.state,o=_r(this.view,e);return this.view.state==i&&this.view.update([]),o}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.dirty|=4),"childList"==t.type){let i=vr(e,t.previousSibling||t.target.previousSibling,-1),o=vr(e,t.nextSibling||t.target.nextSibling,1);return{from:i?e.posAfter(i):e.posAtStart,to:o?e.posBefore(o):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,e,i,o;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(i=this.resizeScroll)||void 0===i||i.disconnect(),null===(o=this.resizeContent)||void 0===o||o.disconnect();for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function vr(t,e,i){for(;e;){let o=aa.get(e);if(o&&o.parent==t)return o;let a=e.parentNode;e=a!=t.dom?a:i>0?e.nextSibling:e.previousSibling}return null}class br{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new Kn(t.state||no.create(t)),this.plugins=this.state.facet(ds).map((t=>new us(t)));for(let e of this.plugins)e.update(this);this.observer=new mr(this),this.inputState=new rn(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new zs(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(){let t=1==arguments.length&&(arguments.length<=0?void 0:arguments[0])instanceof Ji?arguments.length<=0?void 0:arguments[0]:this.state.update(...arguments);this._dispatch(t,this)}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,i=!1,o=!1,a=this.state;for(let h of t){if(h.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=h.state}if(this.destroyed)return void(this.viewState.state=a);let s=this.hasFocus,n=0,r=null;t.some((t=>t.annotation(Pn)))?(this.inputState.notifiedFocused=s,n=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,r=Tn(a,s),r||(n=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(c=null)):this.observer.clear(),a.facet(no.phrases)!=this.state.facet(no.phrases))return this.setState(a);e=As.create(this,a,t),e.flags|=n;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(d&&(d=d.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;d=new ss(t.empty?t:fi.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(ns)&&(d=t.value)}this.viewState.update(e,d),this.bidiCache=Dr.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),i=this.docView.update(e),this.state.facet(bs)!=this.styleModules&&this.mountStyles(),o=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(i,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(sr)!=e.state.facet(sr)&&(this.viewState.mustMeasureContent=!0),(i||o||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!e.empty)for(let h of this.state.facet(ts))h(e);(r||c)&&Promise.resolve().then((()=>{r&&this.state==r.startState&&this.dispatch(r),c&&!_r(this,c)&&l.force&&ta(this.contentDOM,l.key,l.keyCode)}))}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new Kn(t),this.plugins=t.facet(ds).map((t=>new us(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView=new zs(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(ds),i=t.state.facet(ds);if(e!=i){let o=[];for(let a of i){let i=e.indexOf(a);if(i<0)o.push(new us(a));else{let e=this.plugins[i];e.mustUpdate=t,o.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=o,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let o of this.plugins)o.mustUpdate=t;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this)}measure(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,i=this.scrollDOM,{scrollTop:o}=i,{scrollAnchorPos:a,scrollAnchorHeight:s}=this.viewState;if(this.viewState.scrollAnchorHeight=-1,s<0||o!=this.viewState.scrollTop)if(o>i.scrollHeight-i.clientHeight-4)a=-1,s=this.viewState.heightMap.height;else{let t=this.viewState.lineBlockAtHeight(o);a=t.from,s=t.top}try{for(let t=0;;t++){this.updateState=1;let r=this.viewport,l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];4&l||([this.measureRequests,c]=[c,this.measureRequests]);let d=c.map((t=>{try{return t.read(this)}catch(e){return rs(this.state,e),Ar}})),h=As.create(this,this.state,[]),u=!1,p=!1;h.flags|=l,e?e.flags|=l:e=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),u=this.docView.update(h));for(let t=0;t<c.length;t++)if(d[t]!=Ar)try{let e=c[t];e.write&&e.write(d[t],this)}catch(n){rs(this.state,n)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,p=!0;else if(s>-1){let t=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-s;(t>1||t<-1)&&(i.scrollTop=o+t,p=!0)}if(u&&this.docView.updateSelection(!0),this.viewport.from==r.from&&this.viewport.to==r.to&&!p&&0==this.measureRequests.length)break;s=-1}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let r of this.state.facet(ts))r(e)}get themeClasses(){return rr+" "+(this.state.facet(nr)?cr:lr)+" "+this.state.facet(sr)}updateAttrs(){let t=kr(this,ps,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ls)?"true":"false",class:"cm-content",style:`${ya.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),kr(this,_s,e);let i=this.observer.ignore((()=>{let i=Ea(this.contentDOM,this.contentAttrs,e),o=Ea(this.dom,this.editorAttrs,t);return i||o}));return this.editorAttrs=t,this.contentAttrs=e,i}showAnnouncements(t){let e=!0;for(let i of t)for(let t of i.effects)if(t.is(br.announce)){e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value}}mountStyles(){this.styleModules=this.state.facet(bs),Po.mount(this.root,this.styleModules.concat(ur).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,i){return nn(this,t,an(this,t,e,i))}moveByGroup(t,e){return nn(this,t,an(this,t,e,(e=>function(t,e,i){let o=t.state.charCategorizer(e),a=o(i);return t=>{let e=o(t);return a==io.Space&&(a=e),a==e}}(this,t.head,e))))}moveToLineBoundary(t,e){return function(t,e,i,o){let a=on(t,e.head),s=o&&a.type==Za.Text&&(t.lineWrapping||a.widgetLineBreaks)?t.coordsAtPos(e.assoc<0&&e.head>a.from?e.head-1:e.head):null;if(s){let e=t.dom.getBoundingClientRect(),o=t.textDirectionAt(a.from),n=t.posAtCoords({x:i==(o==Ds.LTR)?e.right-1:e.left+1,y:(s.top+s.bottom)/2});if(null!=n)return fi.cursor(n,i?-1:1)}return fi.cursor(i?a.to:a.from,i?-1:1)}(this,t,e,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}moveVertically(t,e,i){return nn(this,t,function(t,e,i,o){let a=e.head,s=i?1:-1;if(a==(i?t.state.doc.length:0))return fi.cursor(a,e.assoc);let n,r=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(a),d=t.documentTop;if(c)null==r&&(r=c.left-l.left),n=s<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(a);null==r&&(r=Math.min(l.right-l.left,t.defaultCharacterWidth*(a-e.from))),n=(s<0?e.top:e.bottom)+d}let h=l.left+r,u=null!==o&&void 0!==o?o:t.defaultLineHeight>>1;for(let p=0;;p+=10){let i=n+(u+p)*s,o=tn(t,{x:h,y:i},!1,s);if(i<l.top||i>l.bottom||(s<0?o<a:o>a))return fi.cursor(o,e.assoc,void 0,r)}}(this,t,e,i))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.posFromDOM(t,e)}posAtCoords(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.readMeasured(),tn(this,t,e)}coordsAtPos(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.readMeasured();let i=this.docView.coordsAt(t,e);if(!i||i.left==i.right)return i;let o=this.state.doc.lineAt(t),a=this.bidiSpans(o);return Wo(i,a[Ts.find(a,t-o.from,-1,e)].dir==Ds.LTR==e>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(os)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>yr)return Ns(t.length);let e=this.textDirectionAt(t.from);for(let o of this.bidiCache)if(o.from==t.from&&o.dir==e)return o.order;let i=Fs(t.text,e);return this.bidiCache.push(new Dr(t.from,t.to,e,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||ya.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Xo(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ns.of(new ss("number"==typeof t?fi.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}static domEventHandlers(t){return hs.define((()=>({})),{eventHandlers:t})}static theme(t,e){let i=Po.newName(),o=[sr.of(i),bs.of(hr(`.${i}`,t))];return e&&e.dark&&o.push(nr.of(!0)),o}static baseTheme(t){return Ti.lowest(bs.of(hr("."+rr,t,dr)))}static findFromDOM(t){var e;let i=t.querySelector(".cm-content"),o=i&&aa.get(i)||aa.get(t);return(null===(e=null===o||void 0===o?void 0:o.rootView)||void 0===e?void 0:e.view)||null}}br.styleModule=bs,br.inputHandler=es,br.focusChangeEffect=is,br.perLineTextDirection=os,br.exceptionSink=$a,br.updateListener=ts,br.editable=ls,br.mouseSelectionStyle=Xa,br.dragMovesSelection=Ka,br.clickAddsSelectionRange=qa,br.decorations=fs,br.atomicRanges=gs,br.scrollMargins=ms,br.darkTheme=nr,br.contentAttributes=_s,br.editorAttributes=ps,br.lineWrapping=br.contentAttributes.of({class:"cm-lineWrapping"}),br.announce=Gi.define();const yr=4096,Ar={};class Dr{constructor(t,e,i,o){this.from=t,this.to=e,this.dir=i,this.order=o}static update(t,e){if(e.empty)return t;let i=[],o=t.length?t[t.length-1].dir:Ds.LTR;for(let a=Math.max(0,t.length-10);a<t.length;a++){let s=t[a];s.dir!=o||e.touchesRange(s.from,s.to)||i.push(new Dr(e.mapPos(s.from,1),e.mapPos(s.to,-1),s.dir,s.order))}return i}}function kr(t,e,i){for(let o=t.state.facet(e),a=o.length-1;a>=0;a--){let e=o[a],s="function"==typeof e?e(t):e;s&&Na(s,i)}return i}const Or=ya.mac?"mac":ya.windows?"win":ya.linux?"linux":"key";function wr(t,e,i){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==i&&e.shiftKey&&(t="Shift-"+t),t}const Cr=Ti.default(br.domEventHandlers({keydown:(t,e)=>Ir(Mr(e.state),t,e,"editor")})),xr=vi.define({enables:Cr}),Sr=new WeakMap;function Mr(t){let e=t.facet(xr),i=Sr.get(e);return i||Sr.set(e,i=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or,i=Object.create(null),o=Object.create(null),a=(t,e)=>{let i=o[t];if(null==i)o[t]=e;else if(i!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},s=(t,o,s,n)=>{var r,l;let c=i[t]||(i[t]=Object.create(null)),d=o.split(/ (?!$)/).map((t=>function(t,e){const i=t.split(/-(?!$)/);let o,a,s,n,r=i[i.length-1];"Space"==r&&(r=" ");for(let l=0;l<i.length-1;++l){const t=i[l];if(/^(cmd|meta|m)$/i.test(t))n=!0;else if(/^a(lt)?$/i.test(t))o=!0;else if(/^(c|ctrl|control)$/i.test(t))a=!0;else if(/^s(hift)?$/i.test(t))s=!0;else{if(!/^mod$/i.test(t))throw new Error("Unrecognized modifier name: "+t);"mac"==e?n=!0:a=!0}}return o&&(r="Alt-"+r),a&&(r="Ctrl-"+r),n&&(r="Meta-"+r),s&&(r="Shift-"+r),r}(t,e)));for(let e=1;e<d.length;e++){let i=d.slice(0,e).join(" ");a(i,!0),c[i]||(c[i]={preventDefault:!0,run:[e=>{let o=Pr={view:e,prefix:i,scope:t};return setTimeout((()=>{Pr==o&&(Pr=null)}),Tr),!0}]})}let h=d.join(" ");a(h,!1);let u=c[h]||(c[h]={preventDefault:!1,run:(null===(l=null===(r=c._any)||void 0===r?void 0:r.run)||void 0===l?void 0:l.slice())||[]});s&&u.run.push(s),n&&(u.preventDefault=!0)};for(let n of t){let t=n.scope?n.scope.split(" "):["editor"];if(n.any)for(let e of t){let t=i[e]||(i[e]=Object.create(null));t._any||(t._any={preventDefault:!1,run:[]});for(let e in t)t[e].run.push(n.any)}let o=n[e]||n.key;if(o)for(let e of t)s(e,o,n.run,n.preventDefault),n.shift&&s(e,"Shift-"+o,n.shift,n.preventDefault)}return i}(e.reduce(((t,e)=>t.concat(e)),[]))),i}let Pr=null;const Tr=4e3;function Ir(t,e,i,o){let a=function(t){var e=!(Lo&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Eo&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?No:Fo)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(e),s=oi(ei(a,0))==a.length&&" "!=a,n="",r=!1;Pr&&Pr.view==i&&Pr.scope==o&&(n=Pr.prefix+" ",(r=dn.indexOf(e.keyCode)<0)&&(Pr=null));let l,c,d=new Set,h=t=>{if(t){for(let o of t.run)if(!d.has(o)&&(d.add(o),o(i,e)))return!0;t.preventDefault&&(r=!0)}return!1},u=t[o];if(u){if(h(u[n+wr(a,e,!s)]))return!0;if(s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ya.windows&&e.ctrlKey&&e.altKey)&&(l=Fo[e.keyCode])&&l!=a){if(h(u[n+wr(l,e,!0)]))return!0;if(e.shiftKey&&(c=No[e.keyCode])!=a&&c!=l&&h(u[n+wr(c,e,!1)]))return!0}else if(s&&e.shiftKey&&h(u[n+wr(a,e,!0)]))return!0;if(h(u._any))return!0}return r}class Fr{constructor(t,e,i,o,a){this.className=t,this.left=e,this.top=i,this.width=o,this.height=a}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className==this.className&&(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",null!=this.width&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,i){if(i.empty){let o=t.coordsAtPos(i.head,i.assoc||1);if(!o)return[];let a=Nr(t);return[new Fr(e,o.left-a.left,o.top-a.top,null,o.bottom-o.top)]}return function(t,e,i){if(i.to<=t.viewport.from||i.from>=t.viewport.to)return[];let o=Math.max(i.from,t.viewport.from),a=Math.min(i.to,t.viewport.to),s=t.textDirection==Ds.LTR,n=t.contentDOM,r=n.getBoundingClientRect(),l=Nr(t),c=n.querySelector(".cm-line"),d=c&&window.getComputedStyle(c),h=r.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),u=r.right-(d?parseInt(d.paddingRight):0),p=on(t,o),_=on(t,a),f=p.type==Za.Text?p:null,g=_.type==Za.Text?_:null;f&&(t.lineWrapping||p.widgetLineBreaks)&&(f=Lr(t,o,f));g&&(t.lineWrapping||_.widgetLineBreaks)&&(g=Lr(t,a,g));if(f&&g&&f.from==g.from)return v(b(i.from,i.to,f));{let e=f?b(i.from,null,f):y(p,!1),o=g?b(null,i.to,g):y(_,!0),a=[];return(f||p).to<(g||_).from-(f&&g?1:0)||p.widgetLineBreaks>1&&e.bottom+t.defaultLineHeight/2<o.top?a.push(m(h,e.bottom,u,o.top)):e.bottom<o.top&&t.elementAtHeight((e.bottom+o.top)/2).type==Za.Text&&(e.bottom=o.top=(e.bottom+o.top)/2),v(e).concat(a).concat(v(o))}function m(t,i,o,a){return new Fr(e,t-l.left,i-l.top-.01,o-t,a-i+.01)}function v(t){let{top:e,bottom:i,horizontal:o}=t,a=[];for(let s=0;s<o.length;s+=2)a.push(m(o[s],e,o[s+1],i));return a}function b(e,i,o){let a=1e9,n=-1e9,r=[];function l(e,i,l,c,d){let p=t.coordsAtPos(e,e==o.to?-2:2),_=t.coordsAtPos(l,l==o.from?2:-2);p&&_&&(a=Math.min(p.top,_.top,a),n=Math.max(p.bottom,_.bottom,n),d==Ds.LTR?r.push(s&&i?h:p.left,s&&c?u:_.right):r.push(!s&&c?h:_.left,!s&&i?u:p.right))}let c=null!==e&&void 0!==e?e:o.from,d=null!==i&&void 0!==i?i:o.to;for(let s of t.visibleRanges)if(s.to>c&&s.from<d)for(let o=Math.max(s.from,c),a=Math.min(s.to,d);;){let s=t.state.doc.lineAt(o);for(let n of t.bidiSpans(s)){let t=n.from+s.from,r=n.to+s.from;if(t>=a)break;r>o&&l(Math.max(t,o),null==e&&t<=c,Math.min(r,a),null==i&&r>=d,n.dir)}if(o=s.to+1,o>=a)break}return 0==r.length&&l(c,null==e,d,null==i,t.textDirection),{top:a,bottom:n,horizontal:r}}function y(t,e){let i=r.top+(e?t.top:t.bottom);return{top:i,bottom:i,horizontal:[]}}}(t,e,i)}}function Nr(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Ds.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function Lr(t,e,i){let o=fi.cursor(e);return{from:Math.max(i.from,t.moveToLineBoundary(o,!1,!0).from),to:Math.min(i.to,t.moveToLineBoundary(o,!0,!0).from),type:Za.Text}}class Er{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(jr)!=t.state.facet(jr)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&t.view.requestMeasure(this.measureReq)}setOrder(t){let e=0,i=t.facet(jr);for(;e<i.length&&i[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}draw(t){if(t.length!=this.drawn.length||t.some(((t,e)=>{return i=t,o=this.drawn[e],!(i.constructor==o.constructor&&i.eq(o));var i,o}))){let e=this.dom.firstChild,i=0;for(let o of t)o.update&&e&&o.constructor&&this.drawn[i].constructor&&o.update(e,this.drawn[i])?(e=e.nextSibling,i++):this.dom.insertBefore(o.draw(),e);for(;e;){let t=e.nextSibling;e.remove(),e=t}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const jr=vi.define();function Zr(t){return[hs.define((e=>new Er(e,t))),jr.of(t)]}const Rr=!ya.ios,Qr=vi.define({combine:t=>ro(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})});function zr(t){return t.startState.facet(Qr)!=t.state.facet(Qr)}const Ur=Zr({above:!0,markers(t){let{state:e}=t,i=e.facet(Qr),o=[];for(let a of e.selection.ranges){let s=a==e.selection.main;if(a.empty?!s||Rr:i.drawRangeCursor){let e=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",i=a.empty?a:fi.cursor(a.head,a.head>a.anchor?-1:1);for(let a of Fr.forRange(t,e,i))o.push(a)}}return o},update(t,e){t.transactions.some((t=>t.selection))&&(e.style.animationName="cm-blink"==e.style.animationName?"cm-blink2":"cm-blink");let i=zr(t);return i&&Br(t.state,e),t.docChanged||t.selectionSet||i},mount(t,e){Br(e.state,t)},class:"cm-cursorLayer"});function Br(t,e){e.style.animationDuration=t.facet(Qr).cursorBlinkRate+"ms"}const Yr=Zr({above:!1,markers:t=>t.state.selection.ranges.map((e=>e.empty?[]:Fr.forRange(t,"cm-selectionBackground",e))).reduce(((t,e)=>t.concat(e))),update:(t,e)=>t.docChanged||t.selectionSet||t.viewportChanged||zr(t),class:"cm-selectionLayer"}),Hr={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Rr&&(Hr[".cm-line"].caretColor="transparent !important");const Vr=Ti.highest(br.theme(Hr)),Wr=Gi.define({map:(t,e)=>null==t?null:e.mapPos(t)}),Gr=wi.define({create:()=>null,update:(t,e)=>(null!=t&&(t=e.changes.mapPos(t)),e.effects.reduce(((t,e)=>e.is(Wr)?e.value:t),t))}),Jr=hs.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let i=t.state.field(Gr);null==i?null!=this.cursor&&(null===(e=this.cursor)||void 0===e||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Gr)!=i||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Gr),e=null!=t&&this.view.coordsAtPos(t);if(!e)return null;let i=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-i.left+this.view.scrollDOM.scrollLeft,top:e.top-i.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Gr)!=t&&this.view.dispatch({effects:Wr.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){t.target!=this.view.contentDOM&&this.view.contentDOM.contains(t.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function qr(t,e,i,o,a){e.lastIndex=0;for(let s,n=t.iterRange(i,o),r=i;!n.next().done;r+=n.value.length)if(!n.lineBreak)for(;s=e.exec(n.value);)a(r+s.index,s)}class Kr{constructor(t){const{regexp:e,decoration:i,decorate:o,boundary:a,maxLength:s=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,o)this.addMatch=(t,e,i,a)=>o(a,i,i+t[0].length,t,e);else if("function"==typeof i)this.addMatch=(t,e,o,a)=>{let s=i(t,e,o);s&&a(o,o+t[0].length,s)};else{if(!i)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(t,e,o,a)=>a(o,o+t[0].length,i)}this.boundary=a,this.maxLength=s}createDeco(t){let e=new _o,i=e.add.bind(e);for(let{from:o,to:a}of function(t,e){let i=t.visibleRanges;if(1==i.length&&i[0].from==t.viewport.from&&i[0].to==t.viewport.to)return i;let o=[];for(let{from:a,to:s}of i)a=Math.max(t.state.doc.lineAt(a).from,a-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),o.length&&o[o.length-1].to>=a?o[o.length-1].to=s:o.push({from:a,to:s});return o}(t,this.maxLength))qr(t.state.doc,this.regexp,o,a,((e,o)=>this.addMatch(o,t,e,i)));return e.finish()}updateDeco(t,e){let i=1e9,o=-1;return t.docChanged&&t.changes.iterChanges(((e,a,s,n)=>{n>t.view.viewport.from&&s<t.view.viewport.to&&(i=Math.min(s,i),o=Math.max(n,o))})),t.viewportChanged||o-i>1e3?this.createDeco(t.view):o>-1?this.updateRange(t.view,e.map(t.changes),i,o):e}updateRange(t,e,i,o){for(let a of t.visibleRanges){let s=Math.max(a.from,i),n=Math.min(a.to,o);if(n>s){let i=t.state.doc.lineAt(s),o=i.to<n?t.state.doc.lineAt(n):i,r=Math.max(a.from,i.from),l=Math.min(a.to,o.to);if(this.boundary){for(;s>i.from;s--)if(this.boundary.test(i.text[s-1-i.from])){r=s;break}for(;n<o.to;n++)if(this.boundary.test(o.text[n-o.from])){l=n;break}}let c,d=[],h=(t,e,i)=>d.push(i.range(t,e));if(i==o)for(this.regexp.lastIndex=r-i.from;(c=this.regexp.exec(i.text))&&c.index<l-i.from;)this.addMatch(c,t,c.index+i.from,h);else qr(t.state.doc,this.regexp,r,l,((e,i)=>this.addMatch(i,t,e,h)));e=e.update({filterFrom:r,filterTo:l,filter:(t,e)=>t<r||e>l,add:d})}}return e}}const Xr=null!=/x/.unicode?"gu":"g",$r=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]",Xr),tl={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let el=null;const il=vi.define({combine(t){let e=ro(t,{render:null,specialChars:$r,addSpecialChars:null});return(e.replaceTabs=!function(){var t;if(null==el&&"undefined"!=typeof document&&document.body){let e=document.body.style;el=null!=(null!==(t=e.tabSize)&&void 0!==t?t:e.MozTabSize)}return el||!1}())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,Xr)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Xr)),e}});let ol=null;class al extends ja{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=function(t){return t>=32?"\u2022":10==t?"\u2424":String.fromCharCode(9216+t)}(this.code),i=t.state.phrase("Control character")+" "+(tl[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,i,e);if(o)return o;let a=document.createElement("span");return a.textContent=e,a.title=i,a.setAttribute("aria-label",i),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class sl extends ja{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="\t",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}const nl=Ra.line({class:"cm-activeLine"}),rl=hs.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,i=[];for(let o of t.state.selection.ranges){let a=t.lineBlockAt(o.head);a.from>e&&(i.push(nl.range(a.from)),e=a.from)}return Ra.set(i)}},{decorations:t=>t.decorations});class ll extends ja{constructor(t){super(),this.content=t}toDOM(){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(t){let e=t.firstChild?Uo(t.firstChild):[];if(!e.length)return null;let i=window.getComputedStyle(t.parentNode),o=Wo(e[0],"rtl"!=i.direction),a=parseInt(i.lineHeight);return o.bottom-o.top>1.5*a?{left:o.left,right:o.right,top:o.top,bottom:o.top+a}:o}ignoreEvent(){return!1}}const cl=2e3;function dl(t,e){let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),o=t.state.doc.lineAt(i),a=i-o.from,s=a>cl?-1:a==o.length?function(t,e){let i=t.coordsAtPos(t.viewport.from);return i?Math.round(Math.abs((i.left-e)/t.defaultCharacterWidth)):-1}(t,e.clientX):wo(o.text,t.state.tabSize,i-o.from);return{line:o.number,col:s,off:a}}function hl(t,e){let i=dl(t,e),o=t.state.selection;return i?{update(t){if(t.docChanged){let e=t.changes.mapPos(t.startState.doc.line(i.line).from),a=t.state.doc.lineAt(e);i={line:a.number,col:i.col,off:Math.min(i.off,a.length)},o=o.map(t.changes)}},get(e,a,s){let n=dl(t,e);if(!n)return o;let r=function(t,e,i){let o=Math.min(e.line,i.line),a=Math.max(e.line,i.line),s=[];if(e.off>cl||i.off>cl||e.col<0||i.col<0){let n=Math.min(e.off,i.off),r=Math.max(e.off,i.off);for(let e=o;e<=a;e++){let i=t.doc.line(e);i.length<=r&&s.push(fi.range(i.from+n,i.to+r))}}else{let n=Math.min(e.col,i.col),r=Math.max(e.col,i.col);for(let e=o;e<=a;e++){let i=t.doc.line(e),o=Co(i.text,n,t.tabSize,!0);if(o<0)s.push(fi.cursor(i.to));else{let e=Co(i.text,r,t.tabSize);s.push(fi.range(i.from+o,i.from+e))}}}return s}(t.state,i,n);return r.length?s?fi.create(r.concat(o.ranges)):fi.create(r):o}}:null}const ul={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},pl={style:"cursor: crosshair"};const _l="-10000px";class fl{constructor(t,e,i){this.facet=e,this.createTooltipView=i,this.input=t.state.facet(e),this.tooltips=this.input.filter((t=>t)),this.tooltipViews=this.tooltips.map(i)}update(t){var e;let i=t.state.facet(this.facet),o=i.filter((t=>t));if(i===this.input){for(let e of this.tooltipViews)e.update&&e.update(t);return!1}let a=[];for(let s=0;s<o.length;s++){let e=o[s],i=-1;if(e){for(let t=0;t<this.tooltips.length;t++){let o=this.tooltips[t];o&&o.create==e.create&&(i=t)}if(i<0)a[s]=this.createTooltipView(e);else{let e=a[s]=this.tooltipViews[i];e.update&&e.update(t)}}}for(let s of this.tooltipViews)a.indexOf(s)<0&&(s.dom.remove(),null===(e=s.destroy)||void 0===e||e.call(s));return this.input=i,this.tooltips=o,this.tooltipViews=a,!0}}function gl(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const ml=vi.define({combine:t=>{var e,i,o;return{position:ya.ios?"absolute":(null===(e=t.find((t=>t.position)))||void 0===e?void 0:e.position)||"fixed",parent:(null===(i=t.find((t=>t.parent)))||void 0===i?void 0:i.parent)||null,tooltipSpace:(null===(o=t.find((t=>t.tooltipSpace)))||void 0===o?void 0:o.tooltipSpace)||gl}}}),vl=new WeakMap,bl=hs.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(ml);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new fl(t,Dl,(t=>this.createTooltip(t))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let i=e||t.geometryChanged,o=t.state.facet(ml);if(o.position!=this.position){this.position=o.position;for(let t of this.manager.tooltipViews)t.dom.style.position=this.position;i=!0}if(o.parent!=this.parent){this.parent&&this.container.remove(),this.parent=o.parent,this.createContainer();for(let t of this.manager.tooltipViews)this.container.appendChild(t.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=_l,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),null===(t=i.destroy)||void 0===t||t.call(i);null===(e=this.intersectionObserver)||void 0===e||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map(((t,e)=>{let i=this.manager.tooltipViews[e];return i.getCoords?i.getCoords(t.pos):this.view.coordsAtPos(t.pos)})),size:this.manager.tooltipViews.map((t=>{let{dom:e}=t;return e.getBoundingClientRect()})),space:this.view.state.facet(ml).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:i,space:o}=t,a=[];for(let s=0;s<this.manager.tooltips.length;s++){let n=this.manager.tooltips[s],r=this.manager.tooltipViews[s],{dom:l}=r,c=t.pos[s],d=t.size[s];if(!c||c.bottom<=Math.max(i.top,o.top)||c.top>=Math.min(i.bottom,o.bottom)||c.right<Math.max(i.left,o.left)-.1||c.left>Math.min(i.right,o.right)+.1){l.style.top=_l;continue}let h=n.arrow?r.dom.querySelector(".cm-tooltip-arrow"):null,u=h?7:0,p=d.right-d.left,_=null!==(e=vl.get(r))&&void 0!==e?e:d.bottom-d.top,f=r.offset||Al,g=this.view.textDirection==Ds.LTR,m=d.width>o.right-o.left?g?o.left:o.right-d.width:g?Math.min(c.left-(h?14:0)+f.x,o.right-p):Math.max(o.left,c.left-p+(h?14:0)-f.x),v=!!n.above;!n.strictSide&&(v?c.top-(d.bottom-d.top)-f.y<o.top:c.bottom+(d.bottom-d.top)+f.y>o.bottom)&&v==o.bottom-c.bottom>c.top-o.top&&(v=!v);let b=(v?c.top-o.top:o.bottom-c.bottom)-u;if(b<_&&!1!==r.resize){if(b<this.view.defaultLineHeight){l.style.top=_l;continue}vl.set(r,_),l.style.height=(_=b)+"px"}else l.style.height&&(l.style.height="");let y=v?c.top-_-u-f.y:c.bottom+u+f.y,A=m+p;if(!0!==r.overlap)for(let t of a)t.left<A&&t.right>m&&t.top<y+_&&t.bottom>y&&(y=v?t.top-_-2-u:t.bottom+u+2);"absolute"==this.position?(l.style.top=y-t.parent.top+"px",l.style.left=m-t.parent.left+"px"):(l.style.top=y+"px",l.style.left=m+"px"),h&&(h.style.left=c.left+(g?f.x:-f.x)-(m+14-7)+"px"),!0!==r.overlap&&a.push({left:m,top:y,right:A,bottom:y+_}),l.classList.toggle("cm-tooltip-above",v),l.classList.toggle("cm-tooltip-below",!v),r.positioned&&r.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=_l}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),yl=br.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Al={x:0,y:0},Dl=vi.define({enables:[bl,yl]}),kl=vi.define();class Ol{constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new fl(t,kl,(t=>this.createHostedView(t)))}static create(t){return new Ol(t)}createHostedView(t){let e=t.create(this.view);return e.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(e.dom),this.mounted&&e.mount&&e.mount(this.view),e}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let e of this.manager.tooltipViews)null===(t=e.destroy)||void 0===t||t.call(e)}}const wl=Dl.compute([kl],(t=>{let e=t.facet(kl).filter((t=>t));return 0===e.length?null:{pos:Math.min(...e.map((t=>t.pos))),end:Math.max(...e.filter((t=>null!=t.end)).map((t=>t.end))),create:Ol.create,above:e[0].above,arrow:e.some((t=>t.arrow))}}));class Cl{constructor(t,e,i,o,a){this.view=t,this.source=e,this.field=i,this.setHover=o,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:t}=this,e=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(null==e)return;let i=this.view.coordsAtPos(e);if(null==i||t.y<i.top||t.y>i.bottom||t.x<i.left-this.view.defaultCharacterWidth||t.x>i.right+this.view.defaultCharacterWidth)return;let o=this.view.bidiSpans(this.view.state.doc.lineAt(e)).find((t=>t.from<=e&&t.to>=e)),a=o&&o.dir==Ds.RTL?-1:1,s=this.source(this.view,e,t.x<i.left?-a:a);if(null===s||void 0===s?void 0:s.then){let t=this.pending={pos:e};s.then((e=>{this.pending==t&&(this.pending=null,e&&this.view.dispatch({effects:this.setHover.of(e)}))}),(t=>rs(this.view.state,t,"hover tooltip")))}else s&&this.view.dispatch({effects:this.setHover.of(s)})}mousemove(t){var e;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!xl(this.lastMove.target)||this.pending){let{pos:o}=i||this.pending,a=null!==(e=null===i||void 0===i?void 0:i.end)&&void 0!==e?e:o;(o==a?this.view.posAtCoords(this.lastMove)==o:function(t,e,i,o,a,s){let n=document.createRange(),r=t.domAtPos(e),l=t.domAtPos(i);n.setEnd(l.node,l.offset),n.setStart(r.node,r.offset);let c=n.getClientRects();n.detach();for(let d=0;d<c.length;d++){let t=c[d];if(Math.max(t.top-a,a-t.bottom,t.left-o,o-t.right)<=s)return!0}return!1}(this.view,o,a,t.clientX,t.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!xl(t.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function xl(t){for(let e=t;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip"))return!0;return!1}function Sl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Gi.define(),o=wi.define({create:()=>null,update(t,o){if(t&&(e.hideOnChange&&(o.docChanged||o.selection)||e.hideOn&&e.hideOn(o,t)))return null;if(t&&o.docChanged){let e=o.changes.mapPos(t.pos,-1,si.TrackDel);if(null==e)return null;let i=Object.assign(Object.create(null),t);i.pos=e,null!=t.end&&(i.end=o.changes.mapPos(t.end)),t=i}for(let e of o.effects)e.is(i)&&(t=e.value),e.is(Pl)&&(t=null);return t},provide:t=>kl.from(t)});return[o,hs.define((a=>new Cl(a,t,o,i,e.hoverTime||300))),wl]}function Ml(t,e){let i=t.plugin(bl);if(!i)return null;let o=i.manager.tooltips.indexOf(e);return o<0?null:i.manager.tooltipViews[o]}const Pl=Gi.define();const Tl=vi.define({combine(t){let e,i;for(let o of t)e=e||o.topContainer,i=i||o.bottomContainer;return{topContainer:e,bottomContainer:i}}});function Il(t,e){let i=t.plugin(Fl),o=i?i.specs.indexOf(e):-1;return o>-1?i.panels[o]:null}const Fl=hs.fromClass(class{constructor(t){this.input=t.state.facet(El),this.specs=this.input.filter((t=>t)),this.panels=this.specs.map((e=>e(t)));let e=t.state.facet(Tl);this.top=new Nl(t,!0,e.topContainer),this.bottom=new Nl(t,!1,e.bottomContainer),this.top.sync(this.panels.filter((t=>t.top))),this.bottom.sync(this.panels.filter((t=>!t.top)));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(t){let e=t.state.facet(Tl);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Nl(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Nl(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=t.state.facet(El);if(i!=this.input){let e=i.filter((t=>t)),o=[],a=[],s=[],n=[];for(let i of e){let e,r=this.specs.indexOf(i);r<0?(e=i(t.view),n.push(e)):(e=this.panels[r],e.update&&e.update(t)),o.push(e),(e.top?a:s).push(e)}this.specs=e,this.panels=o,this.top.sync(a),this.bottom.sync(s);for(let t of n)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}else for(let o of this.panels)o.update&&o.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>br.scrollMargins.of((e=>{let i=e.plugin(t);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}}))});class Nl{constructor(t,e,i){this.view=t,this.top=e,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=Ll(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=Ll(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function Ll(t){let e=t.nextSibling;return t.remove(),e}const El=vi.define({enables:Fl});class jl extends lo{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}jl.prototype.elementClass="",jl.prototype.toDOM=void 0,jl.prototype.mapMode=si.TrackBefore,jl.prototype.startSide=jl.prototype.endSide=-1,jl.prototype.point=!0;const Zl=vi.define(),Rl={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>po.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ql=vi.define();function zl(t){return[Bl(),Ql.of(Object.assign(Object.assign({},Rl),t))]}const Ul=vi.define({combine:t=>t.some((t=>t))});function Bl(t){let e=[Yl];return t&&!1===t.fixed&&e.push(Ul.of(!0)),e}const Yl=hs.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Ql).map((e=>new Gl(t,e)));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(Ul),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,i=t.view.viewport,o=Math.min(e.to,i.to)-Math.max(e.from,i.from);this.syncGutters(o<.8*(i.to-i.from))}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Ul)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let i=po.iter(this.view.state.facet(Zl),this.view.viewport.from),o=[],a=this.gutters.map((t=>new Wl(t,this.view.viewport,-this.view.documentPadding.top)));for(let s of this.view.viewportLineBlocks)if(o.length&&(o=[]),Array.isArray(s.type)){let t=!0;for(let e of s.type)if(e.type==Za.Text&&t){Vl(i,o,e.from);for(let t of a)t.line(this.view,e,o);t=!1}else if(e.widget)for(let t of a)t.widget(this.view,e)}else if(s.type==Za.Text){Vl(i,o,s.from);for(let t of a)t.line(this.view,s,o)}for(let s of a)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Ql),i=t.state.facet(Ql),o=t.docChanged||t.heightChanged||t.viewportChanged||!po.eq(t.startState.facet(Zl),t.state.facet(Zl),t.view.viewport.from,t.view.viewport.to);if(e==i)for(let a of this.gutters)a.update(t)&&(o=!0);else{o=!0;let a=[];for(let o of i){let i=e.indexOf(o);i<0?a.push(new Gl(this.view,o)):(this.gutters[i].update(t),a.push(this.gutters[i]))}for(let t of this.gutters)t.dom.remove(),a.indexOf(t)<0&&t.destroy();for(let t of a)this.dom.appendChild(t.dom);this.gutters=a}return o}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>br.scrollMargins.of((e=>{let i=e.plugin(t);return i&&0!=i.gutters.length&&i.fixed?e.textDirection==Ds.LTR?{left:i.dom.offsetWidth}:{right:i.dom.offsetWidth}:null}))});function Hl(t){return Array.isArray(t)?t:[t]}function Vl(t,e,i){for(;t.value&&t.from<=i;)t.from==i&&e.push(t.value),t.next()}class Wl{constructor(t,e,i){this.gutter=t,this.height=i,this.i=0,this.cursor=po.iter(t.markers,e.from)}addElement(t,e,i){let{gutter:o}=this,a=e.top-this.height;if(this.i==o.elements.length){let s=new Jl(t,e.height,a,i);o.elements.push(s),o.dom.appendChild(s.dom)}else o.elements[this.i].update(t,e.height,a,i);this.height=e.bottom,this.i++}line(t,e,i){let o=[];Vl(this.cursor,o,e.from),i.length&&(o=o.concat(i));let a=this.gutter.config.lineMarker(t,e,o);a&&o.unshift(a);let s=this.gutter;(0!=o.length||s.config.renderEmptyElements)&&this.addElement(t,e,o)}widget(t,e){let i=this.gutter.config.widgetMarker(t,e.widget,e);i&&this.addElement(t,e,[i])}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class Gl{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in e.domEventHandlers)this.dom.addEventListener(i,(o=>{let a,s=o.target;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let t=s.getBoundingClientRect();a=(t.top+t.bottom)/2}else a=o.clientY;let n=t.lineBlockAtHeight(a-t.documentTop);e.domEventHandlers[i](t,n,o)&&o.preventDefault()}));this.markers=Hl(e.markers(t)),e.initialSpacer&&(this.spacer=new Jl(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=Hl(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let e=this.config.updateSpacer(this.spacer.markers[0],t);e!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[e])}let i=t.view.viewport;return!po.eq(this.markers,e,i.from,i.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(t)}destroy(){for(let t of this.elements)t.destroy()}}class Jl{constructor(t,e,i,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,i,o)}update(t,e,i,o){this.height!=e&&(this.dom.style.height=(this.height=e)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),function(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].compare(e[i]))return!1;return!0}(this.markers,o)||this.setMarkers(t,o)}setMarkers(t,e){let i="cm-gutterElement",o=this.dom.firstChild;for(let a=0,s=0;;){let n=s,r=a<e.length?e[a++]:null,l=!1;if(r){let t=r.elementClass;t&&(i+=" "+t);for(let e=s;e<this.markers.length;e++)if(this.markers[e].compare(r)){n=e,l=!0;break}}else n=this.markers.length;for(;s<n;){let t=this.markers[s++];if(t.toDOM){t.destroy(o);let e=o.nextSibling;o.remove(),o=e}}if(!r)break;r.toDOM&&(l?o=o.nextSibling:this.dom.insertBefore(r.toDOM(t),o)),l&&s++}this.dom.className=i,this.markers=e}destroy(){this.setMarkers(null,[])}}const ql=vi.define(),Kl=vi.define({combine:t=>ro(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let i=Object.assign({},t);for(let o in e){let t=i[o],a=e[o];i[o]=t?(e,i,o)=>t(e,i,o)||a(e,i,o):a}return i}})});class Xl extends jl{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function $l(t,e){return t.state.facet(Kl).formatNumber(e,t.state)}const tc=Ql.compute([Kl],(t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:t=>t.state.facet(ql),lineMarker:(t,e,i)=>i.some((t=>t.toDOM))?null:new Xl($l(t,t.state.doc.lineAt(e.from).number)),widgetMarker:()=>null,lineMarkerChange:t=>t.startState.facet(Kl)!=t.state.facet(Kl),initialSpacer:t=>new Xl($l(t,ec(t.state.doc.lines))),updateSpacer(t,e){let i=$l(e.view,ec(e.view.state.doc.lines));return i==t.number?t:new Xl(i)},domEventHandlers:t.facet(Kl).domEventHandlers})));function ec(t){let e=9;for(;e<t;)e=10*e+9;return e}const ic=new class extends jl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},oc=Zl.compute(["selection"],(t=>{let e=[],i=-1;for(let o of t.selection.ranges){let a=t.doc.lineAt(o.head).from;a>i&&(i=a,e.push(ic.range(a)))}return po.of(e)}));const ac=1024;let sc=0;class nc{constructor(t,e){this.from=t,this.to=e}}class rc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=sc++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof t&&(t=cc.match(t)),e=>{let i=t(e);return void 0===i?null:[this,i]}}}rc.closedBy=new rc({deserialize:t=>t.split(" ")}),rc.openedBy=new rc({deserialize:t=>t.split(" ")}),rc.group=new rc({deserialize:t=>t.split(" ")}),rc.contextHash=new rc({perNode:!0}),rc.lookAhead=new rc({perNode:!0}),rc.mounted=new rc({perNode:!0});const lc=Object.create(null);class cc{constructor(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=t,this.props=e,this.id=i,this.flags=o}static define(t){let e=t.props&&t.props.length?Object.create(null):lc,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),o=new cc(t.name||"",e,t.id,i);if(t.props)for(let a of t.props)if(Array.isArray(a)||(a=a(o)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[a[0].id]=a[1]}return o}prop(t){return this.props[t.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(t){if("string"==typeof t){if(this.name==t)return!0;let e=this.prop(rc.group);return!!e&&e.indexOf(t)>-1}return this.id==t}static match(t){let e=Object.create(null);for(let i in t)for(let o of i.split(" "))e[o]=t[i];return t=>{for(let i=t.prop(rc.group),o=-1;o<(i?i.length:0);o++){let a=e[o<0?t.name:i[o]];if(a)return a}}}}cc.none=new cc("",Object.create(null),0,8);class dc{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(){let t=[];for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];for(let a of this.types){let e=null;for(let t of i){let i=t(a);i&&(e||(e=Object.assign({},a.props)),e[i[0].id]=i[1])}t.push(e?new cc(a.name,e,a.id,a.flags):a)}return new dc(t)}}const hc=new WeakMap,uc=new WeakMap;var pc;!function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"}(pc||(pc={}));class _c{constructor(t,e,i,o,a){if(this.type=t,this.children=e,this.positions=i,this.length=o,this.props=null,a&&a.length){this.props=Object.create(null);for(let[t,e]of a)this.props["number"==typeof t?t:t.id]=e}}toString(){let t=this.prop(rc.mounted);if(t&&!t.overlay)return t.tree.toString();let e="";for(let i of this.children){let t=i.toString();t&&(e&&(e+=","),e+=t)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new wc(this.topNode,t)}cursorAt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=hc.get(this)||this.topNode,o=new wc(i);return o.moveTo(t,e),hc.set(this,o._tree),o}get topNode(){return new yc(this,0,0,null)}resolve(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=bc(hc.get(this)||this.topNode,t,e,!1);return hc.set(this,i),i}resolveInner(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=bc(uc.get(this)||this.topNode,t,e,!0);return uc.set(this,i),i}iterate(t){let{enter:e,leave:i,from:o=0,to:a=this.length}=t,s=t.mode||0,n=(s&pc.IncludeAnonymous)>0;for(let r=this.cursor(s|pc.IncludeAnonymous);;){let t=!1;if(r.from<=a&&r.to>=o&&(!n&&r.type.isAnonymous||!1!==e(r))){if(r.firstChild())continue;t=!0}for(;t&&i&&(n||!r.type.isAnonymous)&&i(r),!r.nextSibling();){if(!r.parent())return;t=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:Mc(cc.none,this.children,this.positions,0,this.children.length,0,this.length,((t,e,i)=>new _c(this.type,t,e,i,this.propValues)),t.makeTree||((t,e,i)=>new _c(cc.none,t,e,i)))}static build(t){return function(t){var e;let{buffer:i,nodeSet:o,maxBufferLength:a=ac,reused:s=[],minRepeatType:n=o.types.length}=t,r=Array.isArray(i)?new fc(i,i.length):i,l=o.types,c=0,d=0;function h(t,e,i,m,v){let{id:b,start:y,end:A,size:D}=r,k=d;for(;D<0;){if(r.next(),-1==D){let e=s[b];return i.push(e),void m.push(y-t)}if(-3==D)return void(c=b);if(-4==D)return void(d=b);throw new RangeError(`Unrecognized record size: ${D}`)}let O,w,C=l[b],x=y-t;if(A-y<=a&&(w=f(r.pos-e,v))){let e=new Uint16Array(w.size-w.skip),i=r.pos-w.size,a=e.length;for(;r.pos>i;)a=g(w.start,e,a);O=new gc(e,A-w.start,o),x=w.start-t}else{let t=r.pos-D;r.next();let e=[],i=[],o=b>=n?b:-1,s=0,l=A;for(;r.pos>t;)o>=0&&r.id==o&&r.size>=0?(r.end<=l-a&&(p(e,i,y,s,r.end,l,o,k),s=e.length,l=r.end),r.next()):h(y,t,e,i,o);if(o>=0&&s>0&&s<e.length&&p(e,i,y,s,y,l,o,k),e.reverse(),i.reverse(),o>-1&&s>0){let t=u(C);O=Mc(C,e,i,0,e.length,0,A-y,t,t)}else O=_(C,e,i,A-y,k-A)}i.push(O),m.push(x)}function u(t){return(e,i,o)=>{let a,s,n=0,r=e.length-1;if(r>=0&&(a=e[r])instanceof _c){if(!r&&a.type==t&&a.length==o)return a;(s=a.prop(rc.lookAhead))&&(n=i[r]+a.length+s)}return _(t,e,i,o,n)}}function p(t,e,i,a,s,n,r,l){let c=[],d=[];for(;t.length>a;)c.push(t.pop()),d.push(e.pop()+i-s);t.push(_(o.types[r],c,d,n-s,l-n)),e.push(s-i)}function _(t,e,i,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(c){let t=[rc.contextHash,c];s=s?[t].concat(s):[t]}if(a>25){let t=[rc.lookAhead,a];s=s?[t].concat(s):[t]}return new _c(t,e,i,o,s)}function f(t,e){let i=r.fork(),o=0,s=0,l=0,c=i.end-a,d={size:0,start:0,skip:0};t:for(let a=i.pos-t;i.pos>a;){let t=i.size;if(i.id==e&&t>=0){d.size=o,d.start=s,d.skip=l,l+=4,o+=4,i.next();continue}let r=i.pos-t;if(t<0||r<a||i.start<c)break;let h=i.id>=n?4:0,u=i.start;for(i.next();i.pos>r;){if(i.size<0){if(-3!=i.size)break t;h+=4}else i.id>=n&&(h+=4);i.next()}s=u,o+=t,l+=h}return(e<0||o==t)&&(d.size=o,d.start=s,d.skip=l),d.size>4?d:void 0}function g(t,e,i){let{id:o,start:a,end:s,size:l}=r;if(r.next(),l>=0&&o<n){let n=i;if(l>4){let o=r.pos-(l-4);for(;r.pos>o;)i=g(t,e,i)}e[--i]=n,e[--i]=s-t,e[--i]=a-t,e[--i]=o}else-3==l?c=o:-4==l&&(d=o);return i}let m=[],v=[];for(;r.pos>0;)h(t.start||0,t.bufferStart||0,m,v,-1);let b=null!==(e=t.length)&&void 0!==e?e:m.length?v[0]+m[0].length:0;return new _c(l[t.topID],m.reverse(),v.reverse(),b)}(t)}}_c.empty=new _c(cc.none,[],[],0);class fc{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new fc(this.buffer,this.index)}}class gc{constructor(t,e,i){this.buffer=t,this.length=e,this.set=i}get type(){return cc.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],i=this.buffer[t+3],o=this.set.types[e],a=o.name;if(/\W/.test(a)&&!o.isError&&(a=JSON.stringify(a)),i==(t+=4))return a;let s=[];for(;t<i;)s.push(this.childString(t)),t=this.buffer[t+3];return a+"("+s.join(",")+")"}findChild(t,e,i,o,a){let{buffer:s}=this,n=-1;for(let r=t;r!=e&&!(mc(a,o,s[r+1],s[r+2])&&(n=r,i>0));r=s[r+3]);return n}slice(t,e,i){let o=this.buffer,a=new Uint16Array(e-t),s=0;for(let n=t,r=0;n<e;){a[r++]=o[n++],a[r++]=o[n++]-i;let e=a[r++]=o[n++]-i;a[r++]=o[n++]-t,s=Math.max(s,e)}return new gc(a,s,this.set)}}function mc(t,e,i,o){switch(t){case-2:return i<e;case-1:return o>=e&&i<e;case 0:return i<e&&o>e;case 1:return i<=e&&o>e;case 2:return o>e;case 4:return!0}}function vc(t,e){let i=t.childBefore(e);for(;i;){let e=i.lastChild;if(!e||e.to!=i.to)break;e.type.isError&&e.from==e.to?(t=i,i=e.prevSibling):i=e}return t}function bc(t,e,i,o){for(var a;t.from==t.to||(i<1?t.from>=e:t.from>e)||(i>-1?t.to<=e:t.to<e);){let e=!o&&t instanceof yc&&t.index<0?null:t.parent;if(!e)return t;t=e}let s=o?0:pc.IgnoreOverlays;if(o)for(let n=t,r=n.parent;r;n=r,r=n.parent)n instanceof yc&&n.index<0&&(null===(a=r.enter(e,i,s))||void 0===a?void 0:a.from)!=n.from&&(t=r);for(;;){let o=t.enter(e,i,s);if(!o)return t;t=o}}class yc{constructor(t,e,i,o){this._tree=t,this.from=e,this.index=i,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,i,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:n,positions:r}=s._tree,l=e>0?n.length:-1;t!=l;t+=e){let l=n[t],c=r[t]+s.from;if(mc(o,i,c,c+l.length))if(l instanceof gc){if(a&pc.ExcludeBuffers)continue;let n=l.findChild(0,l.buffer.length,e,i-c,o);if(n>-1)return new Oc(new kc(s,l,t,c),null,n)}else if(a&pc.IncludeAnonymous||!l.type.isAnonymous||Cc(l)){let n;if(!(a&pc.IgnoreMounts)&&l.props&&(n=l.prop(rc.mounted))&&!n.overlay)return new yc(n.tree,c,t,s);let r=new yc(l,c,t,s);return a&pc.IncludeAnonymous||!r.type.isAnonymous?r:r.nextChild(e<0?l.children.length-1:0,e,i,o)}}if(a&pc.IncludeAnonymous||!s.type.isAnonymous)return null;if(t=s.index>=0?s.index+e:e<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e){let i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(o&pc.IgnoreOverlays)&&(i=this._tree.prop(rc.mounted))&&i.overlay){let o=t-this.from;for(let{from:t,to:a}of i.overlay)if((e>0?t<=o:t<o)&&(e<0?a>=o:a>o))return new yc(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,o)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(){return new wc(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}get tree(){return this._tree}toTree(){return this._tree}resolve(t){return bc(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(t){return bc(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}enterUnfinishedNodesBefore(t){return vc(this,t)}getChild(t){let e=Ac(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return e.length?e[0]:null}getChildren(t){return Ac(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return Dc(this,t)}}function Ac(t,e,i,o){let a=t.cursor(),s=[];if(!a.firstChild())return s;if(null!=i)for(;!a.type.is(i);)if(!a.nextSibling())return s;for(;;){if(null!=o&&a.type.is(o))return s;if(a.type.is(e)&&s.push(a.node),!a.nextSibling())return null==o?s:[]}}function Dc(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-1;for(let o=t.parent;i>=0;o=o.parent){if(!o)return!1;if(!o.type.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}class kc{constructor(t,e,i,o){this.parent=t,this.buffer=e,this.index=i,this.start=o}}class Oc{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,i){this.context=t,this._parent=e,this.index=i,this.type=t.buffer.set.types[t.buffer.buffer[i]]}child(t,e,i){let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],t,e-this.context.start,i);return a<0?null:new Oc(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&pc.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return o<0?null:new Oc(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Oc(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new Oc(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}cursor(){return new wc(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}get tree(){return null}toTree(){let t=[],e=[],{buffer:i}=this.context,o=this.index+4,a=i.buffer[this.index+3];if(a>o){let s=i.buffer[this.index+1];t.push(i.slice(o,a,s)),e.push(0)}return new _c(this.type,t,e,this.to-this.from)}resolve(t){return bc(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(t){return bc(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}enterUnfinishedNodesBefore(t){return vc(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t){let e=Ac(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return e.length?e[0]:null}getChildren(t){return Ac(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}get node(){return this}matchContext(t){return Dc(this,t)}}class wc{get name(){return this.type.name}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof yc)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let e=t._parent;e;e=e._parent)this.stack.unshift(e.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return!!t&&(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0)}yieldBuf(t,e){this.index=t;let{start:i,buffer:o}=this.buffer;return this.type=e||o.set.types[o.buffer[t]],this.from=i+o.buffer[t+1],this.to=i+o.buffer[t+2],!0}yield(t){return!!t&&(t instanceof yc?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,i){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,i,this.mode));let{buffer:o}=this.buffer,a=o.findChild(this.index+4,o.buffer[this.index+3],t,e-this.buffer.start,i);return!(a<0)&&(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(i&pc.ExcludeBuffers)&&this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&pc.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&pc.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode));let{buffer:e}=this.buffer,i=this.stack.length-1;if(t<0){let t=i<0?0:this.stack[i]+4;if(this.index!=t)return this.yieldBuf(e.findChild(t,this.index,-1,0,4))}else{let t=e.buffer[this.index+3];if(t<(i<0?e.buffer.length:e.buffer[this.stack[i]+3]))return this.yieldBuf(t)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,i,{buffer:o}=this;if(o){if(t>0){if(this.index<o.buffer.buffer.length)return!1}else for(let t=0;t<this.index;t++)if(o.buffer.buffer[t+3]<this.index)return!1;({index:e,parent:i}=o)}else({index:e,_parent:i}=this._tree);for(;i;({index:e,_parent:i}=i))if(e>-1)for(let o=e+t,a=t<0?-1:i._tree.children.length;o!=a;o+=t){let t=i._tree.children[o];if(this.mode&pc.IncludeAnonymous||t instanceof gc||!t.type.isAnonymous||Cc(t))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,t)}prev(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,t)}moveTo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,i=0;if(t&&t.context==this.buffer)t:for(let o=this.index,a=this.stack.length;a>=0;){for(let s=t;s;s=s._parent)if(s.index==o){if(o==this.index)return s;e=s,i=a+1;break t}o=this.stack[--a]}for(let o=i;o<this.stack.length;o++)e=new Oc(this.buffer,e,this.stack[o]);return this.bufferNode=new Oc(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let i=0;;){let o=!1;if(this.type.isAnonymous||!1!==t(this)){if(this.firstChild()){i++;continue}this.type.isAnonymous||(o=!0)}for(;o&&e&&e(this),o=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,o=!0}}}matchContext(t){if(!this.buffer)return Dc(this.node,t);let{buffer:e}=this.buffer,{types:i}=e.set;for(let o=t.length-1,a=this.stack.length-1;o>=0;a--){if(a<0)return Dc(this.node,t,o);let s=i[e.buffer[this.stack[a]]];if(!s.isAnonymous){if(t[o]&&t[o]!=s.name)return!1;o--}}return!0}}function Cc(t){return t.children.some((t=>t instanceof gc||!t.type.isAnonymous||Cc(t)))}const xc=new WeakMap;function Sc(t,e){if(!t.isAnonymous||e instanceof gc||e.type!=t)return 1;let i=xc.get(e);if(null==i){i=1;for(let o of e.children){if(o.type!=t||!(o instanceof _c)){i=1;break}i+=Sc(t,o)}xc.set(e,i)}return i}function Mc(t,e,i,o,a,s,n,r,l){let c=0;for(let p=o;p<a;p++)c+=Sc(t,e[p]);let d=Math.ceil(1.5*c/8),h=[],u=[];return function e(i,o,a,n,r){for(let c=a;c<n;){let a=c,p=o[c],_=Sc(t,i[c]);for(c++;c<n;c++){let e=Sc(t,i[c]);if(_+e>=d)break;_+=e}if(c==a+1){if(_>d){let t=i[a];e(t.children,t.positions,0,t.children.length,o[a]+r);continue}h.push(i[a])}else{let e=o[c-1]+i[c-1].length-p;h.push(Mc(t,i,o,a,c,p,e,null,l))}u.push(p+r-s)}}(e,i,o,a,0),(r||l)(h,u,n)}class Pc{constructor(t,e,i,o){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=t,this.to=e,this.tree=i,this.offset=o,this.open=(a?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[new Pc(0,t.length,t,0,!1,i)];for(let a of e)a.to>t.length&&o.push(a);return o}static applyChanges(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!e.length)return t;let o=[],a=1,s=t.length?t[0]:null;for(let n=0,r=0,l=0;;n++){let c=n<e.length?e[n]:null,d=c?c.fromA:1e9;if(d-r>=i)for(;s&&s.from<d;){let e=s;if(r>=e.from||d<=e.to||l){let t=Math.max(e.from,r)-l,i=Math.min(e.to,d)-l;e=t>=i?null:new Pc(t,i,e.tree,e.offset+l,n>0,!!c)}if(e&&o.push(e),s.to>d)break;s=a<t.length?t[a++]:null}if(!c)break;r=c.toA,l=c.toA-c.toB}return o}}class Tc{startParse(t,e,i){return"string"==typeof t&&(t=new Ic(t)),i=i?i.length?i.map((t=>new nc(t.from,t.to))):[new nc(0,0)]:[new nc(0,t.length)],this.createParse(t,e||[],i)}parse(t,e,i){let o=this.startParse(t,e,i);for(;;){let t=o.advance();if(t)return t}}}class Ic{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new rc({perNode:!0});let Fc=0;class Nc{constructor(t,e,i){this.set=t,this.base=e,this.modified=i,this.id=Fc++}static define(t){if(null===t||void 0===t?void 0:t.base)throw new Error("Can not derive from a modified tag");let e=new Nc([],null,[]);if(e.set.push(e),t)for(let i of t.set)e.set.push(i);return e}static defineModifier(){let t=new Ec;return e=>e.modified.indexOf(t)>-1?e:Ec.get(e.base||e,e.modified.concat(t).sort(((t,e)=>t.id-e.id)))}}let Lc=0;class Ec{constructor(){this.instances=[],this.id=Lc++}static get(t,e){if(!e.length)return t;let i=e[0].instances.find((i=>{return i.base==t&&(o=e,a=i.modified,o.length==a.length&&o.every(((t,e)=>t==a[e])));var o,a}));if(i)return i;let o=[],a=new Nc(o,t,e);for(let n of e)n.instances.push(a);let s=function(t){let e=[[]];for(let i=0;i<t.length;i++)for(let o=0,a=e.length;o<a;o++)e.push(e[o].concat(t[i]));return e.sort(((t,e)=>e.length-t.length))}(e);for(let n of t.set)if(!n.modified.length)for(let t of s)o.push(Ec.get(n,t));return a}}function jc(t){let e=Object.create(null);for(let i in t){let o=t[i];Array.isArray(o)||(o=[o]);for(let t of i.split(" "))if(t){let i=[],a=2,s=t;for(let e=0;;){if("..."==s&&e>0&&e+3==t.length){a=1;break}let o=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!o)throw new RangeError("Invalid path: "+t);if(i.push("*"==o[0]?"":'"'==o[0][0]?JSON.parse(o[0]):o[0]),e+=o[0].length,e==t.length)break;let n=t[e++];if(e==t.length&&"!"==n){a=0;break}if("/"!=n)throw new RangeError("Invalid path: "+t);s=t.slice(e)}let n=i.length-1,r=i[n];if(!r)throw new RangeError("Invalid path: "+t);let l=new Rc(o,a,n>0?i.slice(0,n):null);e[r]=l.sort(e[r])}}return Zc.add(e)}const Zc=new rc;class Rc{constructor(t,e,i,o){this.tags=t,this.mode=e,this.context=i,this.next=o}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function Qc(t,e){let i=Object.create(null);for(let s of t)if(Array.isArray(s.tag))for(let t of s.tag)i[t.id]=s.class;else i[s.tag.id]=s.class;let{scope:o,all:a=null}=e||{};return{style:t=>{let e=a;for(let o of t)for(let t of o.set){let o=i[t.id];if(o){e=e?e+" "+o:o;break}}return e},scope:o}}function zc(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length,s=new Uc(o,Array.isArray(e)?e:[e],i);s.highlightRange(t.cursor(),o,a,"",s.highlighters),s.flush(a)}Rc.empty=new Rc([],2,null);class Uc{constructor(t,e,i){this.at=t,this.highlighters=e,this.span=i,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,i,o,a){let{type:s,from:n,to:r}=t;if(n>=i||r<=e)return;s.isTop&&(a=this.highlighters.filter((t=>!t.scope||t.scope(s))));let l=o,c=function(t){let e=t.type.prop(Zc);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}(t)||Rc.empty,d=function(t,e){let i=null;for(let o of t){let t=o.style(e);t&&(i=i?i+" "+t:t)}return i}(a,c.tags);if(d&&(l&&(l+=" "),l+=d,1==c.mode&&(o+=(o?" ":"")+d)),this.startSpan(Math.max(e,n),l),c.opaque)return;let h=t.tree&&t.tree.prop(rc.mounted);if(h&&h.overlay){let s=t.node.enter(h.overlay[0].from+n,1),c=this.highlighters.filter((t=>!t.scope||t.scope(h.tree.type))),d=t.firstChild();for(let u=0,p=n;;u++){let _=u<h.overlay.length?h.overlay[u]:null,f=_?_.from+n:r,g=Math.max(e,p),m=Math.min(i,f);if(g<m&&d)for(;t.from<m&&(this.highlightRange(t,g,m,o,a),this.startSpan(Math.min(m,t.to),l),!(t.to>=f)&&t.nextSibling()););if(!_||f>i)break;p=_.to+n,p>e&&(this.highlightRange(s.cursor(),Math.max(e,_.from+n),Math.min(i,p),"",c),this.startSpan(Math.min(i,p),l))}d&&t.parent()}else if(t.firstChild()){h&&(o="");do{if(!(t.to<=e)){if(t.from>=i)break;this.highlightRange(t,e,i,o,a),this.startSpan(Math.min(i,t.to),l)}}while(t.nextSibling());t.parent()}}}const Bc=Nc.define,Yc=Bc(),Hc=Bc(),Vc=Bc(Hc),Wc=Bc(Hc),Gc=Bc(),Jc=Bc(Gc),qc=Bc(Gc),Kc=Bc(),Xc=Bc(Kc),$c=Bc(),td=Bc(),ed=Bc(),id=Bc(ed),od=Bc(),ad={comment:Yc,lineComment:Bc(Yc),blockComment:Bc(Yc),docComment:Bc(Yc),name:Hc,variableName:Bc(Hc),typeName:Vc,tagName:Bc(Vc),propertyName:Wc,attributeName:Bc(Wc),className:Bc(Hc),labelName:Bc(Hc),namespace:Bc(Hc),macroName:Bc(Hc),literal:Gc,string:Jc,docString:Bc(Jc),character:Bc(Jc),attributeValue:Bc(Jc),number:qc,integer:Bc(qc),float:Bc(qc),bool:Bc(Gc),regexp:Bc(Gc),escape:Bc(Gc),color:Bc(Gc),url:Bc(Gc),keyword:$c,self:Bc($c),null:Bc($c),atom:Bc($c),unit:Bc($c),modifier:Bc($c),operatorKeyword:Bc($c),controlKeyword:Bc($c),definitionKeyword:Bc($c),moduleKeyword:Bc($c),operator:td,derefOperator:Bc(td),arithmeticOperator:Bc(td),logicOperator:Bc(td),bitwiseOperator:Bc(td),compareOperator:Bc(td),updateOperator:Bc(td),definitionOperator:Bc(td),typeOperator:Bc(td),controlOperator:Bc(td),punctuation:ed,separator:Bc(ed),bracket:id,angleBracket:Bc(id),squareBracket:Bc(id),paren:Bc(id),brace:Bc(id),content:Kc,heading:Xc,heading1:Bc(Xc),heading2:Bc(Xc),heading3:Bc(Xc),heading4:Bc(Xc),heading5:Bc(Xc),heading6:Bc(Xc),contentSeparator:Bc(Kc),list:Bc(Kc),quote:Bc(Kc),emphasis:Bc(Kc),strong:Bc(Kc),link:Bc(Kc),monospace:Bc(Kc),strikethrough:Bc(Kc),inserted:Bc(),deleted:Bc(),changed:Bc(),invalid:Bc(),meta:od,documentMeta:Bc(od),annotation:Bc(od),processingInstruction:Bc(od),definition:Nc.defineModifier(),constant:Nc.defineModifier(),function:Nc.defineModifier(),standard:Nc.defineModifier(),local:Nc.defineModifier(),special:Nc.defineModifier()};Qc([{tag:ad.link,class:"tok-link"},{tag:ad.heading,class:"tok-heading"},{tag:ad.emphasis,class:"tok-emphasis"},{tag:ad.strong,class:"tok-strong"},{tag:ad.keyword,class:"tok-keyword"},{tag:ad.atom,class:"tok-atom"},{tag:ad.bool,class:"tok-bool"},{tag:ad.url,class:"tok-url"},{tag:ad.labelName,class:"tok-labelName"},{tag:ad.inserted,class:"tok-inserted"},{tag:ad.deleted,class:"tok-deleted"},{tag:ad.literal,class:"tok-literal"},{tag:ad.string,class:"tok-string"},{tag:ad.number,class:"tok-number"},{tag:[ad.regexp,ad.escape,ad.special(ad.string)],class:"tok-string2"},{tag:ad.variableName,class:"tok-variableName"},{tag:ad.local(ad.variableName),class:"tok-variableName tok-local"},{tag:ad.definition(ad.variableName),class:"tok-variableName tok-definition"},{tag:ad.special(ad.variableName),class:"tok-variableName2"},{tag:ad.definition(ad.propertyName),class:"tok-propertyName tok-definition"},{tag:ad.typeName,class:"tok-typeName"},{tag:ad.namespace,class:"tok-namespace"},{tag:ad.className,class:"tok-className"},{tag:ad.macroName,class:"tok-macroName"},{tag:ad.propertyName,class:"tok-propertyName"},{tag:ad.operator,class:"tok-operator"},{tag:ad.comment,class:"tok-comment"},{tag:ad.meta,class:"tok-meta"},{tag:ad.invalid,class:"tok-invalid"},{tag:ad.punctuation,class:"tok-punctuation"}]);var sd;const nd=new rc;function rd(t){return vi.define({combine:t?e=>e.concat(t):void 0})}const ld=new rc;class cd{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=t,this.name=o,no.prototype.hasOwnProperty("tree")||Object.defineProperty(no.prototype,"tree",{get(){return ud(this)}}),this.parser=e,this.extension=[Ad.of(this),no.languageData.of(((t,e,i)=>{let o=dd(t,e,i),a=o.type.prop(nd);if(!a)return[];let s=t.facet(a),n=o.type.prop(ld);if(n){let a=o.resolve(e-o.from,i);for(let e of n)if(e.test(a,t)){let i=t.facet(e.facet);return"replace"==e.type?i:i.concat(s)}}return s}))].concat(i)}isActiveAt(t,e){return dd(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop(nd)==this.data}findRegions(t){let e=t.facet(Ad);if((null===e||void 0===e?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let i=[],o=(t,e)=>{if(t.prop(nd)==this.data)return void i.push({from:e,to:e+t.length});let a=t.prop(rc.mounted);if(a){if(a.tree.prop(nd)==this.data){if(a.overlay)for(let t of a.overlay)i.push({from:t.from+e,to:t.to+e});else i.push({from:e,to:e+t.length});return}if(a.overlay){let t=i.length;if(o(a.tree,a.overlay[0].from+e),i.length>t)return}}for(let i=0;i<t.children.length;i++){let a=t.children[i];a instanceof _c&&o(a,t.positions[i]+e)}};return o(ud(t),0),i}get allowsNesting(){return!0}}function dd(t,e,i){let o=t.facet(Ad),a=ud(t).topNode;if(!o||o.allowsNesting)for(let s=a;s;s=s.enter(e,i,pc.ExcludeBuffers))s.type.isTop&&(a=s);return a}cd.setState=Gi.define();class hd extends cd{constructor(t,e,i){super(t,e,[],i),this.parser=e}static define(t){let e=rd(t.languageData);return new hd(e,t.parser.configure({props:[nd.add((t=>t.isTop?e:void 0))]}),t.name)}configure(t,e){return new hd(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ud(t){let e=t.field(cd.state,!1);return e?e.tree:_c.empty}class pd{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let i=this.cursorPos-this.string.length;return t<i||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-i,e-i)}}let _d=null;class fd{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,n=arguments.length>6?arguments[6]:void 0,r=arguments.length>7?arguments[7]:void 0;this.parser=t,this.state=e,this.fragments=i,this.tree=o,this.treeLen=a,this.viewport=s,this.skipped=n,this.scheduleOn=r,this.parse=null,this.tempSkipped=[]}static create(t,e,i){return new fd(t,e,[],_c.empty,0,i,[],null)}startParse(){return this.parser.startParse(new pd(this.state.doc),this.fragments)}work(t,e){return null!=e&&e>=this.state.doc.length&&(e=void 0),this.tree!=_c.empty&&this.isDone(null!==e&&void 0!==e?e:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var i;if("number"==typeof t){let e=Date.now()+t;t=()=>Date.now()>e}for(this.parse||(this.parse=this.startParse()),null!=e&&(null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let o=this.parse.advance();if(o){if(this.fragments=this.withoutTempSkipped(Pc.addTree(o,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(i=this.parse.stoppedAt)&&void 0!==i?i:this.state.doc.length,this.tree=o,this.parse=null,!(this.treeLen<(null!==e&&void 0!==e?e:this.state.doc.length)))return!0;this.parse=this.startParse()}if(t())return!1}}))}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext((()=>{for(;!(e=this.parse.advance()););})),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(Pc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=_d;_d=this;try{return t()}finally{_d=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=gd(t,e.from,e.to);return t}changes(t,e){let{fragments:i,tree:o,treeLen:a,viewport:s,skipped:n}=this;if(this.takeTree(),!t.empty){let e=[];if(t.iterChangedRanges(((t,i,o,a)=>e.push({fromA:t,toA:i,fromB:o,toB:a}))),i=Pc.applyChanges(i,e),o=_c.empty,a=0,s={from:t.mapPos(s.from,-1),to:t.mapPos(s.to,1)},this.skipped.length){n=[];for(let e of this.skipped){let i=t.mapPos(e.from,1),o=t.mapPos(e.to,-1);i<o&&n.push({from:i,to:o})}}}return new fd(this.parser,e,i,o,a,s,n,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:e,to:o}=this.skipped[i];e<t.to&&o>t.from&&(this.fragments=gd(this.fragments,e,o),this.skipped.splice(i--,1))}return!(this.skipped.length>=e)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends Tc{createParse(e,i,o){let a=o[0].from,s=o[o.length-1].to;return{parsedPos:a,advance(){let e=_d;if(e){for(let t of o)e.tempSkipped.push(t);t&&(e.scheduleOn=e.scheduleOn?Promise.all([e.scheduleOn,t]):t)}return this.parsedPos=s,new _c(cc.none,[],[],s-a)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&0==e[0].from&&e[0].to>=t}static get(){return _d}}function gd(t,e,i){return Pc.applyChanges(t,[{fromA:e,toA:i,fromB:e,toB:i}])}class md{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),i=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,i)||e.takeTree(),new md(e)}static init(t){let e=Math.min(3e3,t.doc.length),i=fd.create(t.facet(Ad).parser,t,{from:0,to:e});return i.work(20,e)||i.takeTree(),new md(i)}}cd.state=wi.define({create:md.init,update(t,e){for(let i of e.effects)if(i.is(cd.setState))return i.value;return e.startState.facet(Ad)!=e.state.facet(Ad)?md.init(e.state):t.apply(e)}});let vd=t=>{let e=setTimeout((()=>t()),500);return()=>clearTimeout(e)};"undefined"!=typeof requestIdleCallback&&(vd=t=>{let e=-1,i=setTimeout((()=>{e=requestIdleCallback(t,{timeout:400})}),100);return()=>e<0?clearTimeout(i):cancelIdleCallback(e)});const bd="undefined"!=typeof navigator&&(null===(sd=navigator.scheduling)||void 0===sd?void 0:sd.isInputPending)?()=>navigator.scheduling.isInputPending():null,yd=hs.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(cd.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),t.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(cd.state);e.tree==e.context.tree&&e.context.isDone(t.doc.length)||(this.working=vd(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:o}}=this.view,a=i.field(cd.state);if(a.tree==a.context.tree&&a.context.isDone(o+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,t&&!bd?Math.max(25,t.timeRemaining()-5):1e9),n=a.context.treeLen<o&&i.doc.length>o+1e3,r=a.context.work((()=>bd&&bd()||Date.now()>s),o+(n?0:1e5));this.chunkBudget-=Date.now()-e,(r||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:cd.setState.of(new md(a.context))})),this.chunkBudget>0&&(!r||n)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then((()=>this.scheduleWork())).catch((t=>rs(this.view.state,t))).then((()=>this.workScheduled--)),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ad=vi.define({combine:t=>t.length?t[0]:null,enables:t=>[cd.state,yd,br.contentAttributes.compute([t],(e=>{let i=e.facet(t);return i&&i.name?{"data-language":i.name}:{}}))]});class Dd{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.language=t,this.support=e,this.extension=[t,e]}}const kd=vi.define(),Od=vi.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some((t=>t!=e[0])))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function wd(t){let e=t.facet(Od);return 9==e.charCodeAt(0)?t.tabSize*e.length:e.length}function Cd(t,e){let i="",o=t.tabSize,a=t.facet(Od)[0];if("\t"==a){for(;e>=o;)i+="\t",e-=o;a=" "}for(let s=0;s<e;s++)i+=a;return i}function xd(t,e){t instanceof no&&(t=new Sd(t));for(let o of t.state.facet(kd)){let i=o(t,e);if(void 0!==i)return i}let i=ud(t.state);return i?function(t,e,i){return Td(e.resolveInner(i).enterUnfinishedNodesBefore(i),i,t)}(t,i,e):null}class Sd{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.state=t,this.options=e,this.unit=wd(t)}lineAt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.state.doc.lineAt(t),{simulateBreak:o,simulateDoubleBreak:a}=this.options;return null!=o&&o>=i.from&&o<=i.to?a&&o==t?{text:"",from:t}:(e<0?o<t:o<=t)?{text:i.text.slice(o-i.from),from:o}:{text:i.text.slice(0,o-i.from),from:i.from}:i}textAfterPos(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:i,from:o}=this.lineAt(t,e);return i.slice(t-o,Math.min(i.length,t+100-o))}column(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{text:i,from:o}=this.lineAt(t,e),a=this.countColumn(i,t-o),s=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return s>-1&&(a+=s-this.countColumn(i,i.search(/\S|$/))),a}countColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length;return wo(t,this.state.tabSize,e)}lineIndent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{text:i,from:o}=this.lineAt(t,e),a=this.options.overrideIndentation;if(a){let t=a(o);if(t>-1)return t}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Md=new rc;function Pd(t){let e=t.type.prop(Md);if(e)return e;let i,o=t.firstChild;if(o&&(i=o.type.prop(rc.closedBy))){let e=t.lastChild,o=e&&i.indexOf(e.name)>-1;return t=>Ed(t,!0,1,void 0,o&&!function(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}(t)?e.from:void 0)}return null==t.parent?Id:null}function Td(t,e,i){for(;t;t=t.parent){let o=Pd(t);if(o)return o(Fd.create(i,e,t))}return null}function Id(){return 0}class Fd extends Sd{constructor(t,e,i){super(t.state,t.options),this.base=t,this.pos=e,this.node=i}static create(t,e,i){return new Fd(t,e,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let i=t.resolve(e.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Nd(i,t))break;e=this.state.doc.lineAt(i.from)}return this.lineIndent(e.from)}continue(){let t=this.node.parent;return t?Td(t,this.pos,this.base):0}}function Nd(t,e){for(let i=e;i;i=i.parent)if(t==i)return!0;return!1}function Ld(t){let{closing:e,align:i=!0,units:o=1}=t;return t=>Ed(t,i,o,e)}function Ed(t,e,i,o,a){let s=t.textAfter,n=s.match(/^\s*/)[0].length,r=o&&s.slice(n,n+o.length)==o||a==t.pos+n,l=e?function(t){let e=t.node,i=e.childAfter(e.from),o=e.lastChild;if(!i)return null;let a=t.options.simulateBreak,s=t.state.doc.lineAt(i.from),n=null==a||a<=s.from?s.to:Math.min(s.to,a);for(let r=i.to;;){let t=e.childAfter(r);if(!t||t==o)return null;if(!t.type.isSkipped)return t.from<n?i:null;r=t.to}}(t):null;return l?r?t.column(l.from):t.column(l.to):t.baseIndent+(r?0:t.unit*i)}function jd(){let{except:t,units:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i=>{let o=t&&t.test(i.textAfter);return i.baseIndent+(o?0:e*i.unit)}}const Zd=vi.define(),Rd=new rc;function Qd(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function zd(t,e,i){for(let o of t.facet(Zd)){let a=o(t,e,i);if(a)return a}return function(t,e,i){let o=ud(t);if(o.length<i)return null;let a=null;for(let s=o.resolveInner(i,1);s;s=s.parent){if(s.to<=i||s.from>i)continue;if(a&&s.from<e)break;let n=s.type.prop(Rd);if(n&&(s.to<o.length-50||o.length==t.doc.length||!Qd(s))){let o=n(s,t);o&&o.from<=i&&o.from>=e&&o.to>i&&(a=o)}}return a}(t,e,i)}function Ud(t,e){let i=e.mapPos(t.from,1),o=e.mapPos(t.to,-1);return i>=o?void 0:{from:i,to:o}}const Bd=Gi.define({map:Ud}),Yd=Gi.define({map:Ud});function Hd(t){let e=[];for(let{head:i}of t.state.selection.ranges)e.some((t=>t.from<=i&&t.to>=i))||e.push(t.lineBlockAt(i));return e}const Vd=wi.define({create:()=>Ra.none,update(t,e){t=t.map(e.changes);for(let i of e.effects)i.is(Bd)&&!Gd(t,i.value.from,i.value.to)?t=t.update({add:[eh.range(i.value.from,i.value.to)]}):i.is(Yd)&&(t=t.update({filter:(t,e)=>i.value.from!=t||i.value.to!=e,filterFrom:i.value.from,filterTo:i.value.to}));if(e.selection){let i=!1,{head:o}=e.selection.main;t.between(o,o,((t,e)=>{t<o&&e>o&&(i=!0)})),i&&(t=t.update({filterFrom:o,filterTo:o,filter:(t,e)=>e<=o||t>=o}))}return t},provide:t=>br.decorations.from(t),toJSON(t,e){let i=[];return t.between(0,e.doc.length,((t,e)=>{i.push(t,e)})),i},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let i=0;i<t.length;){let o=t[i++],a=t[i++];if("number"!=typeof o||"number"!=typeof a)throw new RangeError("Invalid JSON for fold state");e.push(eh.range(o,a))}return Ra.set(e,!0)}});function Wd(t,e,i){var o;let a=null;return null===(o=t.field(Vd,!1))||void 0===o||o.between(e,i,((t,e)=>{(!a||a.from>t)&&(a={from:t,to:e})})),a}function Gd(t,e,i){let o=!1;return t.between(e,e,((t,a)=>{t==e&&a==i&&(o=!0)})),o}function Jd(t,e){return t.field(Vd,!1)?e:e.concat(Gi.appendConfig.of(th()))}function qd(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=t.state.doc.lineAt(e.from).number,a=t.state.doc.lineAt(e.to).number;return br.announce.of(`${t.state.phrase(i?"Folded lines":"Unfolded lines")} ${o} ${t.state.phrase("to")} ${a}.`)}const Kd=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:t=>{for(let e of Hd(t)){let i=zd(t.state,e.from,e.to);if(i)return t.dispatch({effects:Jd(t.state,[Bd.of(i),qd(t,i)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:t=>{if(!t.state.field(Vd,!1))return!1;let e=[];for(let i of Hd(t)){let o=Wd(t.state,i.from,i.to);o&&e.push(Yd.of(o),qd(t,o,!1))}return e.length&&t.dispatch({effects:e}),e.length>0}},{key:"Ctrl-Alt-[",run:t=>{let{state:e}=t,i=[];for(let o=0;o<e.doc.length;){let a=t.lineBlockAt(o),s=zd(e,a.from,a.to);s&&i.push(Bd.of(s)),o=(s?t.lineBlockAt(s.to):a).to+1}return i.length&&t.dispatch({effects:Jd(t.state,i)}),!!i.length}},{key:"Ctrl-Alt-]",run:t=>{let e=t.state.field(Vd,!1);if(!e||!e.size)return!1;let i=[];return e.between(0,t.state.doc.length,((t,e)=>{i.push(Yd.of({from:t,to:e}))})),t.dispatch({effects:i}),!0}}],Xd={placeholderDOM:null,placeholderText:"\u2026"},$d=vi.define({combine:t=>ro(t,Xd)});function th(t){let e=[Vd,ah];return t&&e.push($d.of(t)),e}const eh=Ra.replace({widget:new class extends ja{toDOM(t){let{state:e}=t,i=e.facet($d),o=e=>{let i=t.lineBlockAt(t.posAtDOM(e.target)),o=Wd(t.state,i.from,i.to);o&&t.dispatch({effects:Yd.of(o)}),e.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,o);let a=document.createElement("span");return a.textContent=i.placeholderText,a.setAttribute("aria-label",e.phrase("folded code")),a.title=e.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=o,a}}}),ih={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class oh extends jl{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}const ah=br.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class sh{constructor(t,e){let i;function o(t){let e=Po.newName();return(i||(i=Object.create(null)))["."+e]=t,e}this.specs=t;const a="string"==typeof e.all?e.all:e.all?o(e.all):void 0,s=e.scope;this.scope=s instanceof cd?t=>t.prop(nd)==s.data:s?t=>t==s:void 0,this.style=Qc(t.map((t=>({tag:t.tag,class:t.class||o(Object.assign({},t,{tag:null}))}))),{all:a}).style,this.module=i?new Po(i):null,this.themeType=e.themeType}static define(t,e){return new sh(t,e||{})}}const nh=vi.define(),rh=vi.define({combine:t=>t.length?[t[0]]:null});function lh(t){let e=t.facet(nh);return e.length?e:t.facet(rh)}function ch(t,e){let i,o=[hh];return t instanceof sh&&(t.module&&o.push(br.styleModule.of(t.module)),i=t.themeType),(null===e||void 0===e?void 0:e.fallback)?o.push(rh.of(t)):i?o.push(nh.computeN([br.darkTheme],(e=>e.facet(br.darkTheme)==("dark"==i)?[t]:[]))):o.push(nh.of(t)),o}class dh{constructor(t){this.markCache=Object.create(null),this.tree=ud(t.state),this.decorations=this.buildDeco(t,lh(t.state))}update(t){let e=ud(t.state),i=lh(t.state),o=i!=lh(t.startState);e.length<t.view.viewport.to&&!o&&e.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(e!=this.tree||t.viewportChanged||o)&&(this.tree=e,this.decorations=this.buildDeco(t.view,i))}buildDeco(t,e){if(!e||!this.tree.length)return Ra.none;let i=new _o;for(let{from:o,to:a}of t.visibleRanges)zc(this.tree,e,((t,e,o)=>{i.add(t,e,this.markCache[o]||(this.markCache[o]=Ra.mark({class:o})))}),o,a);return i.finish()}}const hh=Ti.high(hs.fromClass(dh,{decorations:t=>t.decorations})),uh=sh.define([{tag:ad.meta,color:"#404740"},{tag:ad.link,textDecoration:"underline"},{tag:ad.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.keyword,color:"#708"},{tag:[ad.atom,ad.bool,ad.url,ad.contentSeparator,ad.labelName],color:"#219"},{tag:[ad.literal,ad.inserted],color:"#164"},{tag:[ad.string,ad.deleted],color:"#a11"},{tag:[ad.regexp,ad.escape,ad.special(ad.string)],color:"#e40"},{tag:ad.definition(ad.variableName),color:"#00f"},{tag:ad.local(ad.variableName),color:"#30a"},{tag:[ad.typeName,ad.namespace],color:"#085"},{tag:ad.className,color:"#167"},{tag:[ad.special(ad.variableName),ad.macroName],color:"#256"},{tag:ad.definition(ad.propertyName),color:"#00c"},{tag:ad.comment,color:"#940"},{tag:ad.invalid,color:"#f00"}]),ph=br.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),_h=1e4,fh="()[]{}",gh=vi.define({combine:t=>ro(t,{afterCursor:!0,brackets:fh,maxScanDistance:_h,renderMatch:bh})}),mh=Ra.mark({class:"cm-matchingBracket"}),vh=Ra.mark({class:"cm-nonmatchingBracket"});function bh(t){let e=[],i=t.matched?mh:vh;return e.push(i.range(t.start.from,t.start.to)),t.end&&e.push(i.range(t.end.from,t.end.to)),e}const yh=wi.define({create:()=>Ra.none,update(t,e){if(!e.docChanged&&!e.selection)return t;let i=[],o=e.state.facet(gh);for(let a of e.state.selection.ranges){if(!a.empty)continue;let t=wh(e.state,a.head,-1,o)||a.head>0&&wh(e.state,a.head-1,1,o)||o.afterCursor&&(wh(e.state,a.head,1,o)||a.head<e.state.doc.length&&wh(e.state,a.head+1,-1,o));t&&(i=i.concat(o.renderMatch(t,e.state)))}return Ra.set(i,!0)},provide:t=>br.decorations.from(t)}),Ah=[yh,ph];const Dh=new rc;function kh(t,e,i){let o=t.prop(e<0?rc.openedBy:rc.closedBy);if(o)return o;if(1==t.name.length){let o=i.indexOf(t.name);if(o>-1&&o%2==(e<0?1:0))return[i[o+e]]}return null}function Oh(t){let e=t.type.prop(Dh);return e?e(t.node):t}function wh(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=o.maxScanDistance||_h,s=o.brackets||fh,n=ud(t),r=n.resolveInner(e,i);for(let l=r;l;l=l.parent){let o=kh(l.type,i,s);if(o&&l.from<l.to){let a=Oh(l);if(a&&(i>0?e>=a.from&&e<a.to:e>a.from&&e<=a.to))return Ch(t,e,i,l,a,o,s)}}return function(t,e,i,o,a,s,n){let r=i<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=n.indexOf(r);if(l<0||l%2==0!=i>0)return null;let c={from:i<0?e-1:e,to:i>0?e+1:e},d=t.doc.iterRange(e,i>0?t.doc.length:0),h=0;for(let u=0;!d.next().done&&u<=s;){let t=d.value;i<0&&(u+=t.length);let s=e+u*i;for(let e=i>0?0:t.length-1,r=i>0?t.length:-1;e!=r;e+=i){let r=n.indexOf(t[e]);if(!(r<0||o.resolveInner(s+e,1).type!=a))if(r%2==0==i>0)h++;else{if(1==h)return{start:c,end:{from:s+e,to:s+e+1},matched:r>>1==l>>1};h--}}i>0&&(u+=t.length)}return d.done?{start:c,matched:!1}:null}(t,e,i,n,r.type,a,s)}function Ch(t,e,i,o,a,s,n){let r=o.parent,l={from:a.from,to:a.to},c=0,d=null===r||void 0===r?void 0:r.cursor();if(d&&(i<0?d.childBefore(o.from):d.childAfter(o.to)))do{if(i<0?d.to<=o.from:d.from>=o.to){if(0==c&&s.indexOf(d.type.name)>-1&&d.from<d.to){let t=Oh(d);return{start:l,end:t?{from:t.from,to:t.to}:void 0,matched:!0}}if(kh(d.type,i,n))c++;else if(kh(d.type,-i,n)){if(0==c){let t=Oh(d);return{start:l,end:t&&t.from<t.to?{from:t.from,to:t.to}:void 0,matched:!1}}c--}}}while(i<0?d.prevSibling():d.nextSibling());return{start:l,matched:!1}}const xh=Object.create(null),Sh=[cc.none],Mh=[],Ph=Object.create(null);for(let[Mv,Pv]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Ph[Mv]=Ih(xh,Pv);function Th(t,e){Mh.indexOf(t)>-1||(Mh.push(t),console.warn(e))}function Ih(t,e){let i=null;for(let s of e.split(".")){let e=t[s]||ad[s];e?"function"==typeof e?i?i=e(i):Th(s,`Modifier ${s} used at start of tag`):i?Th(s,`Tag ${s} used as modifier`):i=e:Th(s,`Unknown highlighting tag ${s}`)}if(!i)return 0;let o=e.replace(/ /g,"_"),a=cc.define({id:Sh.length,name:o,props:[jc({[o]:i})]});return Sh.push(a),a.id}function Fh(t,e){return i=>{let{state:o,dispatch:a}=i;if(o.readOnly)return!1;let s=t(e,o);return!!s&&(a(o.update(s)),!0)}}const Nh=Fh(Qh,0),Lh=Fh(Rh,0),Eh=Fh(((t,e)=>Rh(t,e,function(t){let e=[];for(let i of t.selection.ranges){let o=t.doc.lineAt(i.from),a=i.to<=o.to?o:t.doc.lineAt(i.to),s=e.length-1;s>=0&&e[s].to>o.from?e[s].to=a.to:e.push({from:o.from+/^\s*/.exec(o.text)[0].length,to:a.to})}return e}(e))),0);function jh(t,e){let i=t.languageDataAt("commentTokens",e);return i.length?i[0]:{}}const Zh=50;function Rh(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.selection.ranges,o=i.map((t=>jh(e,t.from).block));if(!o.every((t=>t)))return null;let a=i.map(((t,i)=>function(t,e,i,o){let a,s,{open:n,close:r}=e,l=t.sliceDoc(i-Zh,i),c=t.sliceDoc(o,o+Zh),d=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(c)[0].length,u=l.length-d;if(l.slice(u-n.length,u)==n&&c.slice(h,h+r.length)==r)return{open:{pos:i-d,margin:d&&1},close:{pos:o+h,margin:h&&1}};o-i<=2*Zh?a=s=t.sliceDoc(i,o):(a=t.sliceDoc(i,i+Zh),s=t.sliceDoc(o-Zh,o));let p=/^\s*/.exec(a)[0].length,_=/\s*$/.exec(s)[0].length,f=s.length-_-r.length;return a.slice(p,p+n.length)==n&&s.slice(f,f+r.length)==r?{open:{pos:i+p+n.length,margin:/\s/.test(a.charAt(p+n.length))?1:0},close:{pos:o-_-r.length,margin:/\s/.test(s.charAt(f-1))?1:0}}:null}(e,o[i],t.from,t.to)));if(2!=t&&!a.every((t=>t)))return{changes:e.changes(i.map(((t,e)=>a[e]?[]:[{from:t.from,insert:o[e].open+" "},{from:t.to,insert:" "+o[e].close}])))};if(1!=t&&a.some((t=>t))){let t=[];for(let e,i=0;i<a.length;i++)if(e=a[i]){let a=o[i],{open:s,close:n}=e;t.push({from:s.pos-a.open.length,to:s.pos+s.margin},{from:n.pos-n.margin,to:n.pos+a.close.length})}return{changes:t}}return null}function Qh(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.selection.ranges,o=[],a=-1;for(let{from:s,to:n}of i){let t=o.length,i=1e9,r=jh(e,s).line;if(r){for(let t=s;t<=n;){let l=e.doc.lineAt(t);if(l.from>a&&(s==n||n>l.from)){a=l.from;let t=/^\s*/.exec(l.text)[0].length,e=t==l.length,s=l.text.slice(t,t+r.length)==r?t:-1;t<l.text.length&&t<i&&(i=t),o.push({line:l,comment:s,token:r,indent:t,empty:e,single:!1})}t=l.to+1}if(i<1e9)for(let e=t;e<o.length;e++)o[e].indent<o[e].line.text.length&&(o[e].indent=i);o.length==t+1&&(o[t].single=!0)}}if(2!=t&&o.some((t=>t.comment<0&&(!t.empty||t.single)))){let t=[];for(let{line:e,token:a,indent:s,empty:n,single:r}of o)!r&&n||t.push({from:e.from+s,insert:a+" "});let i=e.changes(t);return{changes:i,selection:e.selection.map(i,1)}}if(1!=t&&o.some((t=>t.comment>=0))){let t=[];for(let{line:e,comment:i,token:a}of o)if(i>=0){let o=e.from+i,s=o+a.length;" "==e.text[s-e.from]&&s++,t.push({from:o,to:s})}return{changes:t}}return null}const zh=Hi.define(),Uh=Hi.define(),Bh=vi.define(),Yh=vi.define({combine:t=>ro(t,{minDepth:100,newGroupDelay:500,joinToEvent:(t,e)=>e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,e)=>(i,o)=>t(i,o)||e(i,o)})});const Hh=wi.define({create:()=>ru.empty,update(t,e){let i=e.state.facet(Yh),o=e.annotation(zh);if(o){let a=e.docChanged?fi.single(function(t){let e=0;return t.iterChangedRanges(((t,i)=>e=i)),e}(e.changes)):void 0,s=Kh.fromTransaction(e,a),n=o.side,r=0==n?t.undone:t.done;return r=s?Xh(r,r.length,i.minDepth,s):iu(r,e.startState.selection),new ru(0==n?o.rest:r,0==n?r:o.rest)}let a=e.annotation(Uh);if("full"!=a&&"before"!=a||(t=t.isolate()),!1===e.annotation(Ji.addToHistory))return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Kh.fromTransaction(e),n=e.annotation(Ji.time),r=e.annotation(Ji.userEvent);return s?t=t.addChanges(s,n,r,i,e):e.selection&&(t=t.addSelection(e.startState.selection,n,r,i.newGroupDelay)),"full"!=a&&"after"!=a||(t=t.isolate()),t},toJSON:t=>({done:t.done.map((t=>t.toJSON())),undone:t.undone.map((t=>t.toJSON()))}),fromJSON:t=>new ru(t.done.map(Kh.fromJSON),t.undone.map(Kh.fromJSON))});function Vh(t,e){return function(i){let{state:o,dispatch:a}=i;if(!e&&o.readOnly)return!1;let s=o.field(Hh,!1);if(!s)return!1;let n=s.pop(t,o,e);return!!n&&(a(n),!0)}}const Wh=Vh(0,!1),Gh=Vh(1,!1),Jh=Vh(0,!0),qh=Vh(1,!0);class Kh{constructor(t,e,i,o,a){this.changes=t,this.effects=e,this.mapped=i,this.startSelection=o,this.selectionsAfter=a}setSelAfter(t){return new Kh(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,i;return{changes:null===(t=this.changes)||void 0===t?void 0:t.toJSON(),mapped:null===(e=this.mapped)||void 0===e?void 0:e.toJSON(),startSelection:null===(i=this.startSelection)||void 0===i?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map((t=>t.toJSON()))}}static fromJSON(t){return new Kh(t.changes&&ri.fromJSON(t.changes),[],t.mapped&&ni.fromJSON(t.mapped),t.startSelection&&fi.fromJSON(t.startSelection),t.selectionsAfter.map(fi.fromJSON))}static fromTransaction(t,e){let i=tu;for(let o of t.startState.facet(Bh)){let e=o(t);e.length&&(i=i.concat(e))}return!i.length&&t.changes.empty?null:new Kh(t.changes.invert(t.startState.doc),i,void 0,e||t.startState.selection,tu)}static selection(t){return new Kh(void 0,tu,void 0,void 0,t)}}function Xh(t,e,i,o){let a=e+1>i+20?e-i-1:0,s=t.slice(a,e);return s.push(o),s}function $h(t,e){return t.length?e.length?t.concat(e):t:e}const tu=[],eu=200;function iu(t,e){if(t.length){let i=t[t.length-1],o=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-eu));return o.length&&o[o.length-1].eq(e)?t:(o.push(e),Xh(t,t.length-1,1e9,i.setSelAfter(o)))}return[Kh.selection([e])]}function ou(t){let e=t[t.length-1],i=t.slice();return i[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),i}function au(t,e){if(!t.length)return t;let i=t.length,o=tu;for(;i;){let a=su(t[i-1],e,o);if(a.changes&&!a.changes.empty||a.effects.length){let e=t.slice(0,i);return e[i-1]=a,e}e=a.mapped,i--,o=a.selectionsAfter}return o.length?[Kh.selection(o)]:tu}function su(t,e,i){let o=$h(t.selectionsAfter.length?t.selectionsAfter.map((t=>t.map(e))):tu,i);if(!t.changes)return Kh.selection(o);let a=t.changes.map(e),s=e.mapDesc(t.changes,!0),n=t.mapped?t.mapped.composeDesc(s):s;return new Kh(a,Gi.mapEffects(t.effects,e),n,t.startSelection.map(s),o)}const nu=/^(input\.type|delete)($|\.)/;class ru{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.done=t,this.undone=e,this.prevTime=i,this.prevUserEvent=o}isolate(){return this.prevTime?new ru(this.done,this.undone):this}addChanges(t,e,i,o,a){let s=this.done,n=s[s.length-1];return s=n&&n.changes&&!n.changes.empty&&t.changes&&(!i||nu.test(i))&&(!n.selectionsAfter.length&&e-this.prevTime<o.newGroupDelay&&o.joinToEvent(a,function(t,e){let i=[],o=!1;return t.iterChangedRanges(((t,e)=>i.push(t,e))),e.iterChangedRanges(((t,e,a,s)=>{for(let n=0;n<i.length;){let t=i[n++],e=i[n++];s>=t&&a<=e&&(o=!0)}})),o}(n.changes,t.changes))||"input.type.compose"==i)?Xh(s,s.length-1,o.minDepth,new Kh(t.changes.compose(n.changes),$h(t.effects,n.effects),n.mapped,n.startSelection,tu)):Xh(s,s.length,o.minDepth,t),new ru(s,tu,e,i)}addSelection(t,e,i,o){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:tu;return a.length>0&&e-this.prevTime<o&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&(s=a[a.length-1],n=t,s.ranges.length==n.ranges.length&&0===s.ranges.filter(((t,e)=>t.empty!=n.ranges[e].empty)).length)?this:new ru(iu(this.done,t),this.undone,e,i);var s,n}addMapping(t){return new ru(au(this.done,t),au(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,i){let o=0==t?this.done:this.undone;if(0==o.length)return null;let a=o[o.length-1];if(i&&a.selectionsAfter.length)return e.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:zh.of({side:t,rest:ou(o)}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let i=1==o.length?tu:o.slice(0,o.length-1);return a.mapped&&(i=au(i,a.mapped)),e.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:zh.of({side:t,rest:i}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}ru.empty=new ru(tu,tu);const lu=[{key:"Mod-z",run:Wh,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Gh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Gh,preventDefault:!0},{key:"Mod-u",run:Jh,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:qh,preventDefault:!0}];function cu(t,e){return fi.create(t.ranges.map(e),t.mainIndex)}function du(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function hu(t,e){let{state:i,dispatch:o}=t,a=cu(i.selection,e);return!a.eq(i.selection)&&(o(du(i,a)),!0)}function uu(t,e){return fi.cursor(e?t.to:t.from)}function pu(t,e){return hu(t,(i=>i.empty?t.moveByChar(i,e):uu(i,e)))}function _u(t){return t.textDirectionAt(t.state.selection.main.head)==Ds.LTR}const fu=t=>pu(t,!_u(t)),gu=t=>pu(t,_u(t));function mu(t,e){return hu(t,(i=>i.empty?t.moveByGroup(i,e):uu(i,e)))}function vu(t,e,i){if(e.type.prop(i))return!0;let o=e.to-e.from;return o&&(o>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function bu(t,e,i){let o,a,s=ud(t).resolveInner(e.head),n=i?rc.closedBy:rc.openedBy;for(let r=e.head;;){let e=i?s.childAfter(r):s.childBefore(r);if(!e)break;vu(t,e,n)?s=e:r=i?e.to:e.from}return a=s.type.prop(n)&&(o=i?wh(t,s.from,1):wh(t,s.to,-1))&&o.matched?i?o.end.to:o.end.from:i?s.to:s.from,fi.cursor(a,i?-1:1)}function yu(t,e){return hu(t,(i=>{if(!i.empty)return uu(i,e);let o=t.moveVertically(i,e);return o.head!=i.head?o:t.moveToLineBoundary(i,e)}))}const Au=t=>yu(t,!1),Du=t=>yu(t,!0);function ku(t){let e,i=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,o=0,a=0;if(i){for(let e of t.state.facet(br.scrollMargins)){let i=e(t);(null===i||void 0===i?void 0:i.top)&&(o=Math.max(null===i||void 0===i?void 0:i.top,o)),(null===i||void 0===i?void 0:i.bottom)&&(a=Math.max(null===i||void 0===i?void 0:i.bottom,a))}e=t.scrollDOM.clientHeight-o-a}else e=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:o,marginBottom:a,selfScroll:i,height:Math.max(t.defaultLineHeight,e-5)}}function Ou(t,e){let i,o=ku(t),{state:a}=t,s=cu(a.selection,(i=>i.empty?t.moveVertically(i,e,o.height):uu(i,e)));if(s.eq(a.selection))return!1;if(o.selfScroll){let e=t.coordsAtPos(a.selection.main.head),n=t.scrollDOM.getBoundingClientRect(),r=n.top+o.marginTop,l=n.bottom-o.marginBottom;e&&e.top>r&&e.bottom<l&&(i=br.scrollIntoView(s.main.head,{y:"start",yMargin:e.top-r}))}return t.dispatch(du(a,s),{effects:i}),!0}const wu=t=>Ou(t,!1),Cu=t=>Ou(t,!0);function xu(t,e,i){let o=t.lineBlockAt(e.head),a=t.moveToLineBoundary(e,i);if(a.head==e.head&&a.head!=(i?o.to:o.from)&&(a=t.moveToLineBoundary(e,i,!1)),!i&&a.head==o.from&&o.length){let i=/^\s*/.exec(t.state.sliceDoc(o.from,Math.min(o.from+100,o.to)))[0].length;i&&e.head!=o.from+i&&(a=fi.cursor(o.from+i))}return a}function Su(t,e,i){let o=!1,a=cu(t.selection,(e=>{let a=wh(t,e.head,-1)||wh(t,e.head,1)||e.head>0&&wh(t,e.head-1,1)||e.head<t.doc.length&&wh(t,e.head+1,-1);if(!a||!a.end)return e;o=!0;let s=a.start.from==e.head?a.end.to:a.end.from;return i?fi.range(e.anchor,s):fi.cursor(s)}));return!!o&&(e(du(t,a)),!0)}function Mu(t,e){let i=cu(t.state.selection,(t=>{let i=e(t);return fi.range(t.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)}));return!i.eq(t.state.selection)&&(t.dispatch(du(t.state,i)),!0)}function Pu(t,e){return Mu(t,(i=>t.moveByChar(i,e)))}const Tu=t=>Pu(t,!_u(t)),Iu=t=>Pu(t,_u(t));function Fu(t,e){return Mu(t,(i=>t.moveByGroup(i,e)))}function Nu(t,e){return Mu(t,(i=>t.moveVertically(i,e)))}const Lu=t=>Nu(t,!1),Eu=t=>Nu(t,!0);function ju(t,e){return Mu(t,(i=>t.moveVertically(i,e,ku(t).height)))}const Zu=t=>ju(t,!1),Ru=t=>ju(t,!0),Qu=t=>{let{state:e,dispatch:i}=t;return i(du(e,{anchor:0})),!0},zu=t=>{let{state:e,dispatch:i}=t;return i(du(e,{anchor:e.doc.length})),!0},Uu=t=>{let{state:e,dispatch:i}=t;return i(du(e,{anchor:e.selection.main.anchor,head:0})),!0},Bu=t=>{let{state:e,dispatch:i}=t;return i(du(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0};function Yu(t,e){if(t.state.readOnly)return!1;let i="delete.selection",{state:o}=t,a=o.changeByRange((o=>{let{from:a,to:s}=o;if(a==s){let o=e(a);o<a?(i="delete.backward",o=Hu(t,o,!1)):o>a&&(i="delete.forward",o=Hu(t,o,!0)),a=Math.min(a,o),s=Math.max(s,o)}else a=Hu(t,a,!1),s=Hu(t,s,!0);return a==s?{range:o}:{changes:{from:a,to:s},range:fi.cursor(a)}}));return!a.changes.empty&&(t.dispatch(o.update(a,{scrollIntoView:!0,userEvent:i,effects:"delete.selection"==i?br.announce.of(o.phrase("Selection deleted")):void 0})),!0)}function Hu(t,e,i){if(t instanceof br)for(let o of t.state.facet(br.atomicRanges).map((e=>e(t))))o.between(e,e,((t,o)=>{t<e&&o>e&&(e=i?o:t)}));return e}const Vu=(t,e)=>Yu(t,(i=>{let o,a,{state:s}=t,n=s.doc.lineAt(i);if(!e&&i>n.from&&i<n.from+200&&!/[^ \t]/.test(o=n.text.slice(0,i-n.from))){if("\t"==o[o.length-1])return i-1;let t=wo(o,s.tabSize)%wd(s)||wd(s);for(let e=0;e<t&&" "==o[o.length-1-e];e++)i--;a=i}else a=qe(n.text,i-n.from,e,e)+n.from,a==i&&n.number!=(e?s.doc.lines:1)&&(a+=e?1:-1);return a})),Wu=t=>Vu(t,!1),Gu=t=>Vu(t,!0),Ju=(t,e)=>Yu(t,(i=>{let o=i,{state:a}=t,s=a.doc.lineAt(o),n=a.charCategorizer(o);for(let t=null;;){if(o==(e?s.to:s.from)){o==i&&s.number!=(e?a.doc.lines:1)&&(o+=e?1:-1);break}let r=qe(s.text,o-s.from,e)+s.from,l=s.text.slice(Math.min(o,r)-s.from,Math.max(o,r)-s.from),c=n(l);if(null!=t&&c!=t)break;" "==l&&o==i||(t=c),o=r}return o})),qu=t=>Ju(t,!1),Ku=t=>Yu(t,(e=>{let i=t.lineBlockAt(e).to;return e<i?i:Math.min(t.state.doc.length,e+1)}));function Xu(t){let e=[],i=-1;for(let o of t.selection.ranges){let a=t.doc.lineAt(o.from),s=t.doc.lineAt(o.to);if(o.empty||o.to!=s.from||(s=t.doc.lineAt(o.to-1)),i>=a.number){let t=e[e.length-1];t.to=s.to,t.ranges.push(o)}else e.push({from:a.from,to:s.to,ranges:[o]});i=s.number+1}return e}function $u(t,e,i){if(t.readOnly)return!1;let o=[],a=[];for(let s of Xu(t)){if(i?s.to==t.doc.length:0==s.from)continue;let e=t.doc.lineAt(i?s.to+1:s.from-1),n=e.length+1;if(i){o.push({from:s.to,to:e.to},{from:s.from,insert:e.text+t.lineBreak});for(let e of s.ranges)a.push(fi.range(Math.min(t.doc.length,e.anchor+n),Math.min(t.doc.length,e.head+n)))}else{o.push({from:e.from,to:s.from},{from:s.to,insert:t.lineBreak+e.text});for(let t of s.ranges)a.push(fi.range(t.anchor-n,t.head-n))}}return!!o.length&&(e(t.update({changes:o,scrollIntoView:!0,selection:fi.create(a,t.selection.mainIndex),userEvent:"move.line"})),!0)}function tp(t,e,i){if(t.readOnly)return!1;let o=[];for(let a of Xu(t))i?o.push({from:a.from,insert:t.doc.slice(a.from,a.to)+t.lineBreak}):o.push({from:a.to,insert:t.lineBreak+t.doc.slice(a.from,a.to)});return e(t.update({changes:o,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const ep=ip(!1);function ip(t){return e=>{let{state:i,dispatch:o}=e;if(i.readOnly)return!1;let a=i.changeByRange((e=>{let{from:o,to:a}=e,s=i.doc.lineAt(o),n=!t&&o==a&&function(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let i,o=ud(t).resolveInner(e),a=o.childBefore(e),s=o.childAfter(e);return a&&s&&a.to<=e&&s.from>=e&&(i=a.type.prop(rc.closedBy))&&i.indexOf(s.name)>-1&&t.doc.lineAt(a.to).from==t.doc.lineAt(s.from).from?{from:a.to,to:s.from}:null}(i,o);t&&(o=a=(a<=s.to?s:i.doc.lineAt(a)).to);let r=new Sd(i,{simulateBreak:o,simulateDoubleBreak:!!n}),l=xd(r,o);for(null==l&&(l=/^\s*/.exec(i.doc.lineAt(o).text)[0].length);a<s.to&&/\s/.test(s.text[a-s.from]);)a++;n?({from:o,to:a}=n):o>s.from&&o<s.from+100&&!/\S/.test(s.text.slice(0,o))&&(o=s.from);let c=["",Cd(i,l)];return n&&c.push(Cd(i,r.lineIndent(s.from,-1))),{changes:{from:o,to:a,insert:je.of(c)},range:fi.cursor(o+1+c[1].length)}}));return o(i.update(a,{scrollIntoView:!0,userEvent:"input"})),!0}}function op(t,e){let i=-1;return t.changeByRange((o=>{let a=[];for(let n=o.from;n<=o.to;){let s=t.doc.lineAt(n);s.number>i&&(o.empty||o.to>s.from)&&(e(s,a,o),i=s.number),n=s.to+1}let s=t.changes(a);return{changes:a,range:fi.range(s.mapPos(o.anchor,1),s.mapPos(o.head,1))}}))}const ap=t=>{let{state:e,dispatch:i}=t;return!e.readOnly&&(i(e.update(op(e,((t,i)=>{i.push({from:t.from,insert:e.facet(Od)})})),{userEvent:"input.indent"})),!0)},sp=t=>{let{state:e,dispatch:i}=t;return!e.readOnly&&(i(e.update(op(e,((t,i)=>{let o=/^\s*/.exec(t.text)[0];if(!o)return;let a=wo(o,e.tabSize),s=0,n=Cd(e,Math.max(0,a-wd(e)));for(;s<o.length&&s<n.length&&o.charCodeAt(s)==n.charCodeAt(s);)s++;i.push({from:t.from+s,to:t.from+o.length,insert:n.slice(s)})})),{userEvent:"delete.dedent"})),!0)},np=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:t=>hu(t,(e=>bu(t.state,e,!_u(t)))),shift:t=>Mu(t,(e=>bu(t.state,e,!_u(t))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:t=>hu(t,(e=>bu(t.state,e,_u(t)))),shift:t=>Mu(t,(e=>bu(t.state,e,_u(t))))},{key:"Alt-ArrowUp",run:t=>{let{state:e,dispatch:i}=t;return $u(e,i,!1)}},{key:"Shift-Alt-ArrowUp",run:t=>{let{state:e,dispatch:i}=t;return tp(e,i,!1)}},{key:"Alt-ArrowDown",run:t=>{let{state:e,dispatch:i}=t;return $u(e,i,!0)}},{key:"Shift-Alt-ArrowDown",run:t=>{let{state:e,dispatch:i}=t;return tp(e,i,!0)}},{key:"Escape",run:t=>{let{state:e,dispatch:i}=t,o=e.selection,a=null;return o.ranges.length>1?a=fi.create([o.main]):o.main.empty||(a=fi.create([fi.cursor(o.main.head)])),!!a&&(i(du(e,a)),!0)}},{key:"Mod-Enter",run:ip(!0)},{key:"Alt-l",mac:"Ctrl-l",run:t=>{let{state:e,dispatch:i}=t,o=Xu(e).map((t=>{let{from:i,to:o}=t;return fi.range(i,Math.min(o+1,e.doc.length))}));return i(e.update({selection:fi.create(o),userEvent:"select"})),!0}},{key:"Mod-i",run:t=>{let{state:e,dispatch:i}=t,o=cu(e.selection,(t=>{var i;let o=ud(e).resolveInner(t.head,1);for(;!(o.from<t.from&&o.to>=t.to||o.to>t.to&&o.from<=t.from)&&(null===(i=o.parent)||void 0===i?void 0:i.parent);)o=o.parent;return fi.range(o.to,o.from)}));return i(du(e,o)),!0},preventDefault:!0},{key:"Mod-[",run:sp},{key:"Mod-]",run:ap},{key:"Mod-Alt-\\",run:t=>{let{state:e,dispatch:i}=t;if(e.readOnly)return!1;let o=Object.create(null),a=new Sd(e,{overrideIndentation:t=>{let e=o[t];return null==e?-1:e}}),s=op(e,((t,i,s)=>{let n=xd(a,t.from);if(null==n)return;/\S/.test(t.text)||(n=0);let r=/^\s*/.exec(t.text)[0],l=Cd(e,n);(r!=l||s.from<t.from+r.length)&&(o[t.from]=n,i.push({from:t.from,to:t.from+r.length,insert:l}))}));return s.changes.empty||i(e.update(s,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:t=>{if(t.state.readOnly)return!1;let{state:e}=t,i=e.changes(Xu(e).map((t=>{let{from:i,to:o}=t;return i>0?i--:o<e.doc.length&&o++,{from:i,to:o}}))),o=cu(e.selection,(e=>t.moveVertically(e,!0))).map(i);return t.dispatch({changes:i,selection:o,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:t=>{let{state:e,dispatch:i}=t;return Su(e,i,!1)}},{key:"Mod-/",run:t=>{let{state:e}=t,i=e.doc.lineAt(e.selection.main.from),o=jh(t.state,i.from);return o.line?Nh(t):!!o.block&&Eh(t)}},{key:"Alt-A",run:Lh}].concat([{key:"ArrowLeft",run:fu,shift:Tu,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:t=>mu(t,!_u(t)),shift:t=>Fu(t,!_u(t)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:t=>hu(t,(e=>xu(t,e,!_u(t)))),shift:t=>Mu(t,(e=>xu(t,e,!_u(t)))),preventDefault:!0},{key:"ArrowRight",run:gu,shift:Iu,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:t=>mu(t,_u(t)),shift:t=>Fu(t,_u(t)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:t=>hu(t,(e=>xu(t,e,_u(t)))),shift:t=>Mu(t,(e=>xu(t,e,_u(t)))),preventDefault:!0},{key:"ArrowUp",run:Au,shift:Lu,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Qu,shift:Uu},{mac:"Ctrl-ArrowUp",run:wu,shift:Zu},{key:"ArrowDown",run:Du,shift:Eu,preventDefault:!0},{mac:"Cmd-ArrowDown",run:zu,shift:Bu},{mac:"Ctrl-ArrowDown",run:Cu,shift:Ru},{key:"PageUp",run:wu,shift:Zu},{key:"PageDown",run:Cu,shift:Ru},{key:"Home",run:t=>hu(t,(e=>xu(t,e,!1))),shift:t=>Mu(t,(e=>xu(t,e,!1))),preventDefault:!0},{key:"Mod-Home",run:Qu,shift:Uu},{key:"End",run:t=>hu(t,(e=>xu(t,e,!0))),shift:t=>Mu(t,(e=>xu(t,e,!0))),preventDefault:!0},{key:"Mod-End",run:zu,shift:Bu},{key:"Enter",run:ep},{key:"Mod-a",run:t=>{let{state:e,dispatch:i}=t;return i(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0}},{key:"Backspace",run:Wu,shift:Wu},{key:"Delete",run:Gu},{key:"Mod-Backspace",mac:"Alt-Backspace",run:qu},{key:"Mod-Delete",mac:"Alt-Delete",run:t=>Ju(t,!0)},{mac:"Mod-Backspace",run:t=>Yu(t,(e=>{let i=t.lineBlockAt(e).from;return e>i?i:Math.max(0,e-1)}))},{mac:"Mod-Delete",run:Ku}].concat([{key:"Ctrl-b",run:fu,shift:Tu,preventDefault:!0},{key:"Ctrl-f",run:gu,shift:Iu},{key:"Ctrl-p",run:Au,shift:Lu},{key:"Ctrl-n",run:Du,shift:Eu},{key:"Ctrl-a",run:t=>hu(t,(e=>fi.cursor(t.lineBlockAt(e.head).from,1))),shift:t=>Mu(t,(e=>fi.cursor(t.lineBlockAt(e.head).from)))},{key:"Ctrl-e",run:t=>hu(t,(e=>fi.cursor(t.lineBlockAt(e.head).to,-1))),shift:t=>Mu(t,(e=>fi.cursor(t.lineBlockAt(e.head).to)))},{key:"Ctrl-d",run:Gu},{key:"Ctrl-h",run:Wu},{key:"Ctrl-k",run:Ku},{key:"Ctrl-Alt-h",run:qu},{key:"Ctrl-o",run:t=>{let{state:e,dispatch:i}=t;if(e.readOnly)return!1;let o=e.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:je.of(["",""])},range:fi.cursor(t.from)})));return i(e.update(o,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:t=>{let{state:e,dispatch:i}=t;if(e.readOnly)return!1;let o=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let i=t.from,o=e.doc.lineAt(i),a=i==o.from?i-1:qe(o.text,i-o.from,!1)+o.from,s=i==o.to?i+1:qe(o.text,i-o.from,!0)+o.from;return{changes:{from:a,to:s,insert:e.doc.slice(i,s).append(e.doc.slice(a,i))},range:fi.cursor(s)}}));return!o.changes.empty&&(i(e.update(o,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:Cu}].map((t=>({mac:t.key,run:t.run,shift:t.shift}))))),rp={key:"Tab",run:ap,shift:sp};function lp(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,i=arguments[1];if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i)){for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)){var a=i[o];"string"==typeof a?t.setAttribute(o,a):null!=a&&(t[o]=a)}e++}for(;e<arguments.length;e++)cp(t,arguments[e]);return t}function cp(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var i=0;i<e.length;i++)cp(t,e[i])}}const dp="function"==typeof String.prototype.normalize?t=>t.normalize("NFKD"):t=>t;class hp{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(i,o),this.bufferStart=i,this.normalize=a?t=>a(dp(t)):dp,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ei(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=ii(t),i=this.bufferStart+this.bufferPos;this.bufferPos+=oi(t);let o=this.normalize(e);for(let a=0,s=i;;a++){let t=o.charCodeAt(a),n=this.match(t,s);if(n)return this.value=n,this;if(a==o.length-1)break;s==i&&a<e.length&&e.charCodeAt(a)==t&&s++}}}match(t,e){let i=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],s=!1;this.query.charCodeAt(a)==t&&(a==this.query.length-1?i={from:this.matches[o+1],to:e+1}:(this.matches[o]++,s=!0)),s||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==t&&(1==this.query.length?i={from:e,to:e+1}:this.matches.push(1,e)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}"undefined"!=typeof Symbol&&(hp.prototype[Symbol.iterator]=function(){return this});const up={from:-1,to:-1,match:/.*/.exec("")},pp="gm"+(null==/x/.unicode?"":"u");class _p{constructor(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length;if(this.text=t,this.to=a,this.curLine="",this.done=!1,this.value=up,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new mp(t,e,i,o,a);this.re=new RegExp(e,pp+((null===i||void 0===i?void 0:i.ignoreCase)?"i":"")),this.test=null===i||void 0===i?void 0:i.test,this.iter=t.iter();let s=t.lineAt(o);this.curLineStart=s.from,this.matchPos=vp(t,o),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let i=this.curLineStart+e.index,o=i+e[0].length;if(this.matchPos=vp(this.text,o+(i==o?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<o||i>this.value.to)&&(!this.test||this.test(i,o,e)))return this.value={from:i,to:o,match:e},this;t=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),t=0}}}}const fp=new WeakMap;class gp{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,i){let o=fp.get(t);if(!o||o.from>=i||o.to<=e){let o=new gp(e,t.sliceString(e,i));return fp.set(t,o),o}if(o.from==e&&o.to==i)return o;let{text:a,from:s}=o;return s>e&&(a=t.sliceString(e,s)+a,s=e),o.to<i&&(a+=t.sliceString(o.to,i)),fp.set(t,new gp(s,a)),new gp(e,a.slice(e-s,i-s))}}class mp{constructor(t,e,i,o,a){this.text=t,this.to=a,this.done=!1,this.value=up,this.matchPos=vp(t,o),this.re=new RegExp(e,pp+((null===i||void 0===i?void 0:i.ignoreCase)?"i":"")),this.test=null===i||void 0===i?void 0:i.test,this.flat=gp.get(t,o,this.chunkEnd(o+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let t=this.flat.from+e.index,i=t+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(t,i,e)))return this.value={from:t,to:i,match:e},this.matchPos=vp(this.text,i+(t==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=gp.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function vp(t,e){if(e>=t.length)return e;let i,o=t.lineAt(e);for(;e<o.to&&(i=o.text.charCodeAt(e-o.from))>=56320&&i<57344;)e++;return e}function bp(t){let e=lp("input",{class:"cm-textfield",name:"line"});function i(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,s,n,r,l]=i,c=r?+r.slice(1):0,d=n?+n:a.number;if(n&&l){let t=d/100;s&&(t=t*("-"==s?-1:1)+a.number/o.doc.lines),d=Math.round(o.doc.lines*t)}else n&&s&&(d=d*("-"==s?-1:1)+a.number);let h=o.doc.line(Math.max(1,Math.min(o.doc.lines,d)));t.dispatch({effects:yp.of(!1),selection:fi.cursor(h.from+Math.max(0,Math.min(c,h.length))),scrollIntoView:!0}),t.focus()}return{dom:lp("form",{class:"cm-gotoLine",onkeydown:e=>{27==e.keyCode?(e.preventDefault(),t.dispatch({effects:yp.of(!1)}),t.focus()):13==e.keyCode&&(e.preventDefault(),i())},onsubmit:t=>{t.preventDefault(),i()}},lp("label",t.state.phrase("Go to line"),": ",e)," ",lp("button",{class:"cm-button",type:"submit"},t.state.phrase("go")))}}"undefined"!=typeof Symbol&&(_p.prototype[Symbol.iterator]=mp.prototype[Symbol.iterator]=function(){return this});const yp=Gi.define(),Ap=wi.define({create:()=>!0,update(t,e){for(let i of e.effects)i.is(yp)&&(t=i.value);return t},provide:t=>El.from(t,(t=>t?bp:null))}),Dp=br.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),kp={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Op=vi.define({combine:t=>ro(t,kp,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})});const wp=Ra.mark({class:"cm-selectionMatch"}),Cp=Ra.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function xp(t,e,i,o){return(0==i||t(e.sliceDoc(i-1,i))!=io.Word)&&(o==e.doc.length||t(e.sliceDoc(o,o+1))!=io.Word)}const Sp=hs.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(Op),{state:i}=t,o=i.selection;if(o.ranges.length>1)return Ra.none;let a,s=o.main,n=null;if(s.empty){if(!e.highlightWordAroundCursor)return Ra.none;let t=i.wordAt(s.head);if(!t)return Ra.none;n=i.charCategorizer(s.head),a=i.sliceDoc(t.from,t.to)}else{let t=s.to-s.from;if(t<e.minSelectionLength||t>200)return Ra.none;if(e.wholeWords){if(a=i.sliceDoc(s.from,s.to),n=i.charCategorizer(s.head),!xp(n,i,s.from,s.to)||!function(t,e,i,o){return t(e.sliceDoc(i,i+1))==io.Word&&t(e.sliceDoc(o-1,o))==io.Word}(n,i,s.from,s.to))return Ra.none}else if(a=i.sliceDoc(s.from,s.to).trim(),!a)return Ra.none}let r=[];for(let l of t.visibleRanges){let t=new hp(i.doc,a,l.from,l.to);for(;!t.next().done;){let{from:o,to:a}=t.value;if((!n||xp(n,i,o,a))&&(s.empty&&o<=s.from&&a>=s.to?r.push(Cp.range(o,a)):(o>=s.to||a<=s.from)&&r.push(wp.range(o,a)),r.length>e.maxMatches))return Ra.none}}return Ra.set(r)}},{decorations:t=>t.decorations}),Mp=br.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const Pp=vi.define({combine:t=>ro(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new s_(t),scrollToMatch:t=>br.scrollIntoView(t)})});class Tp{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||function(t){try{return new RegExp(t,pp),!0}catch(sd){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,((t,e)=>"n"==e?"\n":"r"==e?"\r":"t"==e?"\t":"\\"))}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new Zp(this):new Np(this)}getCursor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,o=t.doc?t:no.create({doc:t});return null==i&&(i=o.doc.length),this.regexp?Lp(this,o,e,i):Fp(this,o,e,i)}}class Ip{constructor(t){this.spec=t}}function Fp(t,e,i,o){return new hp(e.doc,t.unquoted,i,o,t.caseSensitive?void 0:t=>t.toLowerCase(),t.wholeWord?function(t,e){return(i,o,a,s)=>((s>i||s+a.length<o)&&(s=Math.max(0,i-2),a=t.sliceString(s,Math.min(t.length,o+2))),(e(Ep(a,i-s))!=io.Word||e(jp(a,i-s))!=io.Word)&&(e(jp(a,o-s))!=io.Word||e(Ep(a,o-s))!=io.Word))}(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}class Np extends Ip{constructor(t){super(t)}nextMatch(t,e,i){let o=Fp(this.spec,t,i,t.doc.length).nextOverlapping();return o.done&&(o=Fp(this.spec,t,0,e).nextOverlapping()),o.done?null:o.value}prevMatchInRange(t,e,i){for(let o=i;;){let i=Math.max(e,o-1e4-this.spec.unquoted.length),a=Fp(this.spec,t,i,o),s=null;for(;!a.nextOverlapping().done;)s=a.value;if(s)return s;if(i==e)return null;o-=1e4}}prevMatch(t,e,i){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,i,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let i=Fp(this.spec,t,0,t.doc.length),o=[];for(;!i.next().done;){if(o.length>=e)return null;o.push(i.value)}return o}highlight(t,e,i,o){let a=Fp(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,t.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}}function Lp(t,e,i,o){return new _p(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?(a=e.charCategorizer(e.selection.main.head),(t,e,i)=>!i[0].length||(a(Ep(i.input,i.index))!=io.Word||a(jp(i.input,i.index))!=io.Word)&&(a(jp(i.input,i.index+i[0].length))!=io.Word||a(Ep(i.input,i.index+i[0].length))!=io.Word)):void 0},i,o);var a}function Ep(t,e){return t.slice(qe(t,e,!1),e)}function jp(t,e){return t.slice(e,qe(t,e))}class Zp extends Ip{nextMatch(t,e,i){let o=Lp(this.spec,t,i,t.doc.length).next();return o.done&&(o=Lp(this.spec,t,0,e).next()),o.done?null:o.value}prevMatchInRange(t,e,i){for(let o=1;;o++){let a=Math.max(e,i-1e4*o),s=Lp(this.spec,t,a,i),n=null;for(;!s.next().done;)n=s.value;if(n&&(a==e||n.from>a+10))return n;if(a==e)return null}}prevMatch(t,e,i){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,i,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,((e,i)=>"$"==i?"$":"&"==i?t.match[0]:"0"!=i&&+i<t.match.length?t.match[i]:e)))}matchAll(t,e){let i=Lp(this.spec,t,0,t.doc.length),o=[];for(;!i.next().done;){if(o.length>=e)return null;o.push(i.value)}return o}highlight(t,e,i,o){let a=Lp(this.spec,t,Math.max(0,e-250),Math.min(i+250,t.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}}const Rp=Gi.define(),Qp=Gi.define(),zp=wi.define({create:t=>new Up($p(t).create(),null),update(t,e){for(let i of e.effects)i.is(Rp)?t=new Up(i.value.create(),t.panel):i.is(Qp)&&(t=new Up(t.query,i.value?Xp:null));return t},provide:t=>El.from(t,(t=>t.panel))});class Up{constructor(t,e){this.query=t,this.panel=e}}const Bp=Ra.mark({class:"cm-searchMatch"}),Yp=Ra.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Hp=hs.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(zp))}update(t){let e=t.state.field(zp);(e!=t.startState.field(zp)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight(t){let{query:e,panel:i}=t;if(!i||!e.spec.valid)return Ra.none;let{view:o}=this,a=new _o;for(let s=0,n=o.visibleRanges,r=n.length;s<r;s++){let{from:t,to:i}=n[s];for(;s<r-1&&i>n[s+1].from-500;)i=n[++s].to;e.highlight(o.state,t,i,((t,e)=>{let i=o.state.selection.ranges.some((i=>i.from==t&&i.to==e));a.add(t,e,i?Yp:Bp)}))}return a.finish()}},{decorations:t=>t.decorations});function Vp(t){return e=>{let i=e.state.field(zp,!1);return i&&i.query.spec.valid?t(e,i):i_(e)}}const Wp=Vp(((t,e)=>{let{query:i}=e,{to:o}=t.state.selection.main,a=i.nextMatch(t.state,o,o);if(!a)return!1;let s=fi.single(a.from,a.to),n=t.state.facet(Pp);return t.dispatch({selection:s,effects:[c_(t,a),n.scrollToMatch(s.main,t)],userEvent:"select.search"}),e_(t),!0})),Gp=Vp(((t,e)=>{let{query:i}=e,{state:o}=t,{from:a}=o.selection.main,s=i.prevMatch(o,a,a);if(!s)return!1;let n=fi.single(s.from,s.to),r=t.state.facet(Pp);return t.dispatch({selection:n,effects:[c_(t,s),r.scrollToMatch(n.main,t)],userEvent:"select.search"}),e_(t),!0})),Jp=Vp(((t,e)=>{let{query:i}=e,o=i.matchAll(t.state,1e3);return!(!o||!o.length)&&(t.dispatch({selection:fi.create(o.map((t=>fi.range(t.from,t.to)))),userEvent:"select.search.matches"}),!0)})),qp=Vp(((t,e)=>{let{query:i}=e,{state:o}=t,{from:a,to:s}=o.selection.main;if(o.readOnly)return!1;let n=i.nextMatch(o,a,a);if(!n)return!1;let r,l,c=[],d=[];if(n.from==a&&n.to==s&&(l=o.toText(i.getReplacement(n)),c.push({from:n.from,to:n.to,insert:l}),n=i.nextMatch(o,n.from,n.to),d.push(br.announce.of(o.phrase("replaced match on line $",o.doc.lineAt(a).number)+"."))),n){let e=0==c.length||c[0].from>=n.to?0:n.to-n.from-l.length;r=fi.single(n.from-e,n.to-e),d.push(c_(t,n)),d.push(o.facet(Pp).scrollToMatch(r.main,t))}return t.dispatch({changes:c,selection:r,effects:d,userEvent:"input.replace"}),!0})),Kp=Vp(((t,e)=>{let{query:i}=e;if(t.state.readOnly)return!1;let o=i.matchAll(t.state,1e9).map((t=>{let{from:e,to:o}=t;return{from:e,to:o,insert:i.getReplacement(t)}}));if(!o.length)return!1;let a=t.state.phrase("replaced $ matches",o.length)+".";return t.dispatch({changes:o,effects:br.announce.of(a),userEvent:"input.replace.all"}),!0}));function Xp(t){return t.state.facet(Pp).createPanel(t)}function $p(t,e){var i,o,a,s,n;let r=t.selection.main,l=r.empty||r.to>r.from+100?"":t.sliceDoc(r.from,r.to);if(e&&!l)return e;let c=t.facet(Pp);return new Tp({search:(null!==(i=null===e||void 0===e?void 0:e.literal)&&void 0!==i?i:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(o=null===e||void 0===e?void 0:e.caseSensitive)&&void 0!==o?o:c.caseSensitive,literal:null!==(a=null===e||void 0===e?void 0:e.literal)&&void 0!==a?a:c.literal,regexp:null!==(s=null===e||void 0===e?void 0:e.regexp)&&void 0!==s?s:c.regexp,wholeWord:null!==(n=null===e||void 0===e?void 0:e.wholeWord)&&void 0!==n?n:c.wholeWord})}function t_(t){let e=Il(t,Xp);return e&&e.dom.querySelector("[main-field]")}function e_(t){let e=t_(t);e&&e==t.root.activeElement&&e.select()}const i_=t=>{let e=t.state.field(zp,!1);if(e&&e.panel){let i=t_(t);if(i&&i!=t.root.activeElement){let o=$p(t.state,e.query.spec);o.valid&&t.dispatch({effects:Rp.of(o)}),i.focus(),i.select()}}else t.dispatch({effects:[Qp.of(!0),e?Rp.of($p(t.state,e.query.spec)):Gi.appendConfig.of(h_)]});return!0},o_=t=>{let e=t.state.field(zp,!1);if(!e||!e.panel)return!1;let i=Il(t,Xp);return i&&i.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Qp.of(!1)}),!0},a_=[{key:"Mod-f",run:i_,scope:"editor search-panel"},{key:"F3",run:Wp,shift:Gp,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Wp,shift:Gp,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:o_,scope:"editor search-panel"},{key:"Mod-Shift-l",run:t=>{let{state:e,dispatch:i}=t,o=e.selection;if(o.ranges.length>1||o.main.empty)return!1;let{from:a,to:s}=o.main,n=[],r=0;for(let l=new hp(e.doc,e.sliceDoc(a,s));!l.next().done;){if(n.length>1e3)return!1;l.value.from==a&&(r=n.length),n.push(fi.range(l.value.from,l.value.to))}return i(e.update({selection:fi.create(n,r),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:t=>{let e=Il(t,bp);if(!e){let i=[yp.of(!0)];null==t.state.field(Ap,!1)&&i.push(Gi.appendConfig.of([Ap,Dp])),t.dispatch({effects:i}),e=Il(t,bp)}return e&&e.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:t=>{let{state:e,dispatch:i}=t,{ranges:o}=e.selection;if(o.some((t=>t.from===t.to)))return(t=>{let{state:e,dispatch:i}=t,{selection:o}=e,a=fi.create(o.ranges.map((t=>e.wordAt(t.head)||fi.cursor(t.head))),o.mainIndex);return!a.eq(o)&&(i(e.update({selection:a})),!0)})({state:e,dispatch:i});let a=e.sliceDoc(o[0].from,o[0].to);if(e.selection.ranges.some((t=>e.sliceDoc(t.from,t.to)!=a)))return!1;let s=function(t,e){let{main:i,ranges:o}=t.selection,a=t.wordAt(i.head),s=a&&a.from==i.from&&a.to==i.to;for(let n=!1,r=new hp(t.doc,e,o[o.length-1].to);;){if(r.next(),!r.done){if(n&&o.some((t=>t.from==r.value.from)))continue;if(s){let e=t.wordAt(r.value.from);if(!e||e.from!=r.value.from||e.to!=r.value.to)continue}return r.value}if(n)return null;r=new hp(t.doc,e,0,Math.max(0,o[o.length-1].from-1)),n=!0}}(e,a);return!!s&&(i(e.update({selection:e.selection.addRange(fi.range(s.from,s.to),!1),effects:br.scrollIntoView(s.to)})),!0)},preventDefault:!0}];class s_{constructor(t){this.view=t;let e=this.query=t.state.field(zp).query.spec;function i(t,e,i){return lp("button",{class:"cm-button",name:t,onclick:e,type:"button"},i)}this.commit=this.commit.bind(this),this.searchField=lp("input",{value:e.search,placeholder:n_(t,"Find"),"aria-label":n_(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=lp("input",{value:e.replace,placeholder:n_(t,"Replace"),"aria-label":n_(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=lp("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=lp("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=lp("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit}),this.dom=lp("div",{onkeydown:t=>this.keydown(t),class:"cm-search"},[this.searchField,i("next",(()=>Wp(t)),[n_(t,"next")]),i("prev",(()=>Gp(t)),[n_(t,"previous")]),i("select",(()=>Jp(t)),[n_(t,"all")]),lp("label",null,[this.caseField,n_(t,"match case")]),lp("label",null,[this.reField,n_(t,"regexp")]),lp("label",null,[this.wordField,n_(t,"by word")]),...t.state.readOnly?[]:[lp("br"),this.replaceField,i("replace",(()=>qp(t)),[n_(t,"replace")]),i("replaceAll",(()=>Kp(t)),[n_(t,"replace all")])],lp("button",{name:"close",onclick:()=>o_(t),"aria-label":n_(t,"close"),type:"button"},["\xd7"])])}commit(){let t=new Tp({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:Rp.of(t)}))}keydown(t){var e,i,o;e=this.view,i=t,o="search-panel",Ir(Mr(e.state),i,e,o)?t.preventDefault():13==t.keyCode&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Gp:Wp)(this.view)):13==t.keyCode&&t.target==this.replaceField&&(t.preventDefault(),qp(this.view))}update(t){for(let e of t.transactions)for(let t of e.effects)t.is(Rp)&&!t.value.eq(this.query)&&this.setQuery(t.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Pp).top}}function n_(t,e){return t.state.phrase(e)}const r_=30,l_=/[\s\.,:;?!]/;function c_(t,e){let{from:i,to:o}=e,a=t.state.doc.lineAt(i),s=t.state.doc.lineAt(o).to,n=Math.max(a.from,i-r_),r=Math.min(s,o+r_),l=t.state.sliceDoc(n,r);if(n!=a.from)for(let c=0;c<r_;c++)if(!l_.test(l[c+1])&&l_.test(l[c])){l=l.slice(c);break}if(r!=s)for(let c=l.length-1;c>l.length-r_;c--)if(!l_.test(l[c-1])&&l_.test(l[c])){l=l.slice(0,c);break}return br.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${a.number}.`)}const d_=br.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),h_=[zp,Ti.lowest(Hp),d_];class u_{constructor(t,e,i){this.state=t,this.pos=e,this.explicit=i,this.abortListeners=[]}tokenBefore(t){let e=ud(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),i=Math.max(e.from,this.pos-250),o=e.text.slice(i-e.from,this.pos-e.from),a=o.search(m_(t,!1));return a<0?null:{from:i+a,to:this.pos,text:o.slice(a)}}get aborted(){return null==this.abortListeners}addEventListener(t,e){"abort"==t&&this.abortListeners&&this.abortListeners.push(e)}}function p_(t){let e=Object.keys(t).join(""),i=/\w/.test(e);return i&&(e=e.replace(/\w/g,"")),`[${i?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function __(t){let e=t.map((t=>"string"==typeof t?{label:t}:t)),[i,o]=e.every((t=>/^\w+$/.test(t.label)))?[/\w*$/,/\w+$/]:function(t){let e=Object.create(null),i=Object.create(null);for(let{label:a}of t){e[a[0]]=!0;for(let t=1;t<a.length;t++)i[a[t]]=!0}let o=p_(e)+p_(i)+"*$";return[new RegExp("^"+o),new RegExp(o)]}(e);return t=>{let a=t.matchBefore(o);return a||t.explicit?{from:a?a.from:t.pos,options:e,validFor:i}:null}}class f_{constructor(t,e,i,o){this.completion=t,this.source=e,this.match=i,this.score=o}}function g_(t){return t.selection.main.from}function m_(t,e){var i;let{source:o}=t,a=e&&"^"!=o[0],s="$"!=o[o.length-1];return a||s?new RegExp(`${a?"^":""}(?:${o})${s?"$":""}`,null!==(i=t.flags)&&void 0!==i?i:t.ignoreCase?"i":""):t}const v_=Hi.define();const b_=new WeakMap;function y_(t){if(!Array.isArray(t))return t;let e=b_.get(t);return e||b_.set(t,e=__(t)),e}const A_=Gi.define(),D_=Gi.define();class k_{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let e=0;e<t.length;){let i=ei(t,e),o=oi(i);this.chars.push(i);let a=t.slice(e,e+o),s=a.toUpperCase();this.folded.push(ei(s==a?a.toLowerCase():s,0)),e+=o}this.astral=t.length!=this.chars.length}match(t){if(0==this.pattern.length)return[-100];if(t.length<this.pattern.length)return null;let{chars:e,folded:i,any:o,precise:a,byWord:s}=this;if(1==e.length){let o=ei(t,0),a=oi(o),s=a==t.length?0:-100;if(o==e[0]);else{if(o!=i[0])return null;s+=-200}return[s,0,a]}let n=t.indexOf(this.pattern);if(0==n)return[t.length==this.pattern.length?0:-100,0,this.pattern.length];let r=e.length,l=0;if(n<0){for(let a=0,s=Math.min(t.length,200);a<s&&l<r;){let s=ei(t,a);s!=e[l]&&s!=i[l]||(o[l++]=a),a+=oi(s)}if(l<r)return null}let c=0,d=0,h=!1,u=0,p=-1,_=-1,f=/[a-z]/.test(t),g=!0;for(let m=0,v=Math.min(t.length,200),b=0;m<v&&d<r;){let o=ei(t,m);n<0&&(c<r&&o==e[c]&&(a[c++]=m),u<r&&(o==e[u]||o==i[u]?(0==u&&(p=m),_=m+1,u++):u=0));let l,v=o<255?o>=48&&o<=57||o>=97&&o<=122?2:o>=65&&o<=90?1:0:(l=ii(o))!=l.toLowerCase()?1:l!=l.toUpperCase()?2:0;(!m||1==v&&f||0==b&&0!=v)&&(e[d]==o||i[d]==o&&(h=!0)?s[d++]=m:s.length&&(g=!1)),b=v,m+=oi(o)}return d==r&&0==s[0]&&g?this.result((h?-200:0)-100,s,t):u==r&&0==p?[-200-t.length+(_==t.length?0:-100),0,_]:n>-1?[-700-t.length,n,n+this.pattern.length]:u==r?[-900-t.length,p,_]:d==r?this.result((h?-200:0)-100-700+(g?0:-1100),s,t):2==e.length?null:this.result((o[0]?-700:0)-200-1100,o,t)}result(t,e,i){let o=[t-i.length],a=1;for(let s of e){let t=s+(this.astral?oi(ei(i,s)):1);a>1&&o[a-1]==s?o[a-1]=t:(o[a++]=s,o[a++]=t)}return o}}const O_=vi.define({combine:t=>ro(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:C_,compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>i=>w_(t(i),e(i)),optionClass:(t,e)=>i=>w_(t(i),e(i)),addToOptions:(t,e)=>t.concat(e)})});function w_(t,e){return t?e?t+" "+e:t:e}function C_(t,e,i,o,a){let s,n,r=t.textDirection==Ds.RTL,l=r,c=!1,d="top",h=e.left-a.left,u=a.right-e.right,p=o.right-o.left,_=o.bottom-o.top;if(l&&h<Math.min(p,u)?l=!1:!l&&u<Math.min(p,h)&&(l=!0),p<=(l?h:u))s=Math.max(a.top,Math.min(i.top,a.bottom-_))-e.top,n=Math.min(400,l?h:u);else{c=!0,n=Math.min(400,(r?e.right:a.right-e.left)-30);let t=a.bottom-e.bottom;t>=_||t>e.top?s=i.bottom-e.top:(d="bottom",s=e.bottom-i.top)}return{style:`${d}: ${s}px; max-width: ${n}px`,class:"cm-completionInfo-"+(c?r?"left-narrow":"right-narrow":l?"left":"right")}}function x_(t,e,i){if(t<=i)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let t=Math.floor(e/i);return{from:t*i,to:(t+1)*i}}let o=Math.floor((t-e)/i);return{from:t-(o+1)*i,to:t-o*i}}class S_{constructor(t,e,i){this.view=t,this.stateField=e,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:t=>this.placeInfo(t),key:this},this.space=null,this.currentClass="";let o=t.state.field(e),{options:a,selected:s}=o.open,n=t.state.facet(O_);this.optionContent=function(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(t){let e=document.createElement("div");return e.classList.add("cm-completionIcon"),t.type&&e.classList.add(...t.type.split(/\s+/g).map((t=>"cm-completionIcon-"+t))),e.setAttribute("aria-hidden","true"),e},position:20}),e.push({render(t,e,i){let o=document.createElement("span");o.className="cm-completionLabel";let{label:a}=t,s=0;for(let n=1;n<i.length;){let t=i[n++],e=i[n++];t>s&&o.appendChild(document.createTextNode(a.slice(s,t)));let r=o.appendChild(document.createElement("span"));r.appendChild(document.createTextNode(a.slice(t,e))),r.className="cm-completionMatchedText",s=e}return s<a.length&&o.appendChild(document.createTextNode(a.slice(s))),o},position:50},{render(t){if(!t.detail)return null;let e=document.createElement("span");return e.className="cm-completionDetail",e.textContent=t.detail,e},position:80}),e.sort(((t,e)=>t.position-e.position)).map((t=>t.render))}(n),this.optionClass=n.optionClass,this.tooltipClass=n.tooltipClass,this.range=x_(a.length,s,n.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",(e=>{for(let i,o=e.target;o&&o!=this.dom;o=o.parentNode)if("LI"==o.nodeName&&(i=/-(\d+)$/.exec(o.id))&&+i[1]<a.length)return this.applyCompletion(t,a[+i[1]]),void e.preventDefault()})),this.dom.addEventListener("focusout",(e=>{let i=t.state.field(this.stateField,!1);i&&i.tooltip&&t.state.facet(O_).closeOnBlur&&e.relatedTarget!=t.contentDOM&&t.dispatch({effects:D_.of(null)})})),this.list=this.dom.appendChild(this.createListBox(a,o.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}mount(){this.updateSel()}update(t){var e,i,o;let a=t.state.field(this.stateField),s=t.startState.field(this.stateField);this.updateTooltipClass(t.state),a!=s&&(this.updateSel(),(null===(e=a.open)||void 0===e?void 0:e.disabled)!=(null===(i=s.open)||void 0===i?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(null===(o=a.open)||void 0===o?void 0:o.disabled)))}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let t of this.currentClass.split(" "))t&&this.dom.classList.remove(t);for(let t of e.split(" "))t&&this.dom.classList.add(t);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=x_(e.options.length,e.selected,this.view.state.facet(O_).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e.options,t.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))),this.updateSelectedOption(e.selected)){this.destroyInfo();let{completion:i}=e.options[e.selected],{info:o}=i;if(!o)return;let a="string"===typeof o?document.createTextNode(o):o(i);if(!a)return;"then"in a?a.then((e=>{e&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(e,i)})).catch((t=>rs(this.view.state,t,"completion info"))):this.addInfoPane(a,i)}}addInfoPane(t,e){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",null!=t.nodeType)i.appendChild(t),this.infoDestroy=null;else{let{dom:e,destroy:o}=t;i.appendChild(e),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let e=null;for(let i=this.list.firstChild,o=this.range.from;i;i=i.nextSibling,o++)"LI"==i.nodeName&&i.id?o==t?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),e=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected"):o--;return e&&function(t,e){let i=t.getBoundingClientRect(),o=e.getBoundingClientRect();o.top<i.top?t.scrollTop-=i.top-o.top:o.bottom>i.bottom&&(t.scrollTop+=o.bottom-i.bottom)}(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),o=t.getBoundingClientRect(),a=this.space;if(!a){let t=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:t.innerWidth,bottom:t.innerHeight}}return o.top>Math.min(a.bottom,e.bottom)-10||o.bottom<Math.max(a.top,e.top)+10?null:this.view.state.facet(O_).positionInfo(this.view,e,o,i,a)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,e,i){const o=document.createElement("ul");o.id=e,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let s=i.from;s<i.to;s++){let{completion:n,match:r}=t[s],{section:l}=n;if(l){let t="string"==typeof l?l:l.name;if(t!=a&&(s>i.from||0==i.from))if(a=t,"string"!=typeof l&&l.header)o.appendChild(l.header(l));else{o.appendChild(document.createElement("completion-section")).textContent=t}}const c=o.appendChild(document.createElement("li"));c.id=e+"-"+s,c.setAttribute("role","option");let d=this.optionClass(n);d&&(c.className=d);for(let t of this.optionContent){let e=t(n,this.view.state,r);e&&c.appendChild(e)}}return i.from&&o.classList.add("cm-completionListIncompleteTop"),i.to<t.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function M_(t,e){return i=>new S_(i,t,e)}function P_(t){return 100*(t.boost||0)+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}class T_{constructor(t,e,i,o,a,s){this.options=t,this.attrs=e,this.tooltip=i,this.timestamp=o,this.selected=a,this.disabled=s}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new T_(this.options,N_(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,i,o,a){let s=function(t,e){let i=[],o=null,a=t=>{i.push(t);let{section:e}=t.completion;if(e){o||(o=[]);let t="string"==typeof e?e:e.name;o.some((e=>e.name==t))||o.push("string"==typeof e?{name:t}:e)}};for(let l of t)if(l.hasResult())if(!1===l.result.filter){let t=l.result.getMatch;for(let e of l.result.options){let o=[1e9-i.length];if(t)for(let i of t(e))o.push(i);a(new f_(e,l.source,o,o[0]))}}else{let t,i=new k_(e.sliceDoc(l.from,l.to));for(let e of l.result.options)(t=i.match(e.label))&&a(new f_(e,l.source,t,t[0]+(e.boost||0)))}if(o){let t=Object.create(null),e=0,a=(t,e)=>{var i,o;return(null!==(i=t.rank)&&void 0!==i?i:1e9)-(null!==(o=e.rank)&&void 0!==o?o:1e9)||(t.name<e.name?-1:1)};for(let i of o.sort(a))e-=1e5,t[i.name]=e;for(let o of i){let{section:e}=o.completion;e&&(o.score+=t["string"==typeof e?e:e.name])}}let s=[],n=null,r=e.facet(O_).compareCompletions;for(let l of i.sort(((t,e)=>e.score-t.score||r(t.completion,e.completion))))!n||n.label!=l.completion.label||n.detail!=l.completion.detail||null!=n.type&&null!=l.completion.type&&n.type!=l.completion.type||n.apply!=l.completion.apply?s.push(l):P_(l.completion)>P_(n)&&(s[s.length-1]=l),n=l.completion;return s}(t,e);if(!s.length)return o&&t.some((t=>1==t.state))?new T_(o.options,o.attrs,o.tooltip,o.timestamp,o.selected,!0):null;let n=e.facet(O_).selectOnOpen?0:-1;if(o&&o.selected!=n&&-1!=o.selected){let t=o.options[o.selected].completion;for(let e=0;e<s.length;e++)if(s[e].completion==t){n=e;break}}return new T_(s,N_(i,n),{pos:t.reduce(((t,e)=>e.hasResult()?Math.min(t,e.from):t),1e8),create:M_(z_,U_),above:a.aboveCursor},o?o.timestamp:Date.now(),n,!1)}map(t){return new T_(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class I_{constructor(t,e,i){this.active=t,this.id=e,this.open=i}static start(){return new I_(L_,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(t){let{state:e}=t,i=e.facet(O_),o=(i.override||e.languageDataAt("autocomplete",g_(e)).map(y_)).map((e=>(this.active.find((t=>t.source==e))||new j_(e,this.active.some((t=>0!=t.state))?1:0)).update(t,i)));o.length==this.active.length&&o.every(((t,e)=>t==this.active[e]))&&(o=this.active);let a=this.open;a&&t.docChanged&&(a=a.map(t.changes)),t.selection||o.some((e=>e.hasResult()&&t.changes.touchesRange(e.from,e.to)))||!function(t,e){if(t==e)return!0;for(let i=0,o=0;;){for(;i<t.length&&!t[i].hasResult;)i++;for(;o<e.length&&!e[o].hasResult;)o++;let a=i==t.length,s=o==e.length;if(a||s)return a==s;if(t[i++].result!=e[o++].result)return!1}}(o,this.active)?a=T_.build(o,e,this.id,a,i):a&&a.disabled&&!o.some((t=>1==t.state))&&(a=null),!a&&o.every((t=>1!=t.state))&&o.some((t=>t.hasResult()))&&(o=o.map((t=>t.hasResult()?new j_(t.source,0):t)));for(let s of t.effects)s.is(Q_)&&(a=a&&a.setSelected(s.value,this.id));return o==this.active&&a==this.open?this:new I_(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:F_}}const F_={"aria-autocomplete":"list"};function N_(t,e){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(i["aria-activedescendant"]=t+"-"+e),i}const L_=[];function E_(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class j_{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.source=t,this.state=e,this.explicitPos=i}hasResult(){return!1}update(t,e){let i=E_(t),o=this;i?o=o.handleUserEvent(t,i,e):t.docChanged?o=o.handleChange(t):t.selection&&0!=o.state&&(o=new j_(o.source,0));for(let a of t.effects)if(a.is(A_))o=new j_(o.source,1,a.value?g_(t.state):-1);else if(a.is(D_))o=new j_(o.source,0);else if(a.is(R_))for(let t of a.value)t.source==o.source&&(o=t);return o}handleUserEvent(t,e,i){return"delete"!=e&&i.activateOnTyping?new j_(this.source,1):this.map(t.changes)}handleChange(t){return t.changes.touchesRange(g_(t.startState))?new j_(this.source,0):this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new j_(this.source,this.state,t.mapPos(this.explicitPos))}}class Z_ extends j_{constructor(t,e,i,o,a){super(t,2,e),this.result=i,this.from=o,this.to=a}hasResult(){return!0}handleUserEvent(t,e,i){var o;let a=t.changes.mapPos(this.from),s=t.changes.mapPos(this.to,1),n=g_(t.state);if((this.explicitPos<0?n<=a:n<this.from)||n>s||"delete"==e&&g_(t.startState)==this.from)return new j_(this.source,"input"==e&&i.activateOnTyping?1:0);let r,l=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos);return function(t,e,i,o){if(!t)return!1;let a=e.sliceDoc(i,o);return"function"==typeof t?t(a,i,o,e):m_(t,!0).test(a)}(this.result.validFor,t.state,a,s)?new Z_(this.source,l,this.result,a,s):this.result.update&&(r=this.result.update(this.result,a,s,new u_(t.state,n,l>=0)))?new Z_(this.source,l,r,r.from,null!==(o=r.to)&&void 0!==o?o:g_(t.state)):new j_(this.source,1,l)}handleChange(t){return t.changes.touchesRange(this.from,this.to)?new j_(this.source,0):this.map(t.changes)}map(t){return t.empty?this:new Z_(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1))}}const R_=Gi.define({map:(t,e)=>t.map((t=>t.map(e)))}),Q_=Gi.define(),z_=wi.define({create:()=>I_.start(),update:(t,e)=>t.update(e),provide:t=>[Dl.from(t,(t=>t.tooltip)),br.contentAttributes.from(t,(t=>t.attrs))]});function U_(t,e){const i=e.completion.apply||e.completion.label;let o=t.state.field(z_).active.find((t=>t.source==e.source));return o instanceof Z_&&("string"==typeof i?t.dispatch(Object.assign(Object.assign({},function(t,e,i,o){let{main:a}=t.selection,s=i-a.from,n=o-a.from;return Object.assign(Object.assign({},t.changeByRange((r=>r!=a&&i!=o&&t.sliceDoc(r.from+s,r.from+n)!=t.sliceDoc(i,o)?{range:r}:{changes:{from:r.from+s,to:o==a.from?r.to:r.from+n,insert:e},range:fi.cursor(r.from+s+e.length)}))),{userEvent:"input.complete"})}(t.state,i,o.from,o.to)),{annotations:v_.of(e.completion)})):i(t,e.completion,o.from,o.to),!0)}function B_(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"option";return i=>{let o=i.state.field(z_,!1);if(!o||!o.open||o.open.disabled||Date.now()-o.open.timestamp<i.state.facet(O_).interactionDelay)return!1;let a,s=1;"page"==e&&(a=Ml(i,o.open.tooltip))&&(s=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:n}=o.open.options,r=o.open.selected>-1?o.open.selected+s*(t?1:-1):t?0:n-1;return r<0?r="page"==e?0:n-1:r>=n&&(r="page"==e?n-1:0),i.dispatch({effects:Q_.of(r)}),!0}}class Y_{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const H_=hs.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of t.state.field(z_).active)1==e.state&&this.startQuery(e)}update(t){let e=t.state.field(z_);if(!t.selectionSet&&!t.docChanged&&t.startState.field(z_)==e)return;let i=t.transactions.some((t=>(t.selection||t.docChanged)&&!E_(t)));for(let a=0;a<this.running.length;a++){let e=this.running[a];if(i||e.updates.length+t.transactions.length>50&&Date.now()-e.time>1e3){for(let t of e.context.abortListeners)try{t()}catch(o){rs(this.view.state,o)}e.context.abortListeners=null,this.running.splice(a--,1)}else e.updates.push(...t.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some((t=>1==t.state&&!this.running.some((e=>e.active.source==t.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let a of t.transactions)"input"==E_(a)?this.composing=2:2==this.composing&&a.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:t}=this.view,e=t.field(z_);for(let i of e.active)1!=i.state||this.running.some((t=>t.active.source==i.source))||this.startQuery(i)}startQuery(t){let{state:e}=this.view,i=g_(e),o=new u_(e,i,t.explicitPos==i),a=new Y_(t,o);this.running.push(a),Promise.resolve(t.source(o)).then((t=>{a.context.aborted||(a.done=t||null,this.scheduleAccept())}),(t=>{this.view.dispatch({effects:D_.of(null)}),rs(this.view.state,t)}))}scheduleAccept(){this.running.every((t=>void 0!==t.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],i=this.view.state.facet(O_);for(let o=0;o<this.running.length;o++){let a=this.running[o];if(void 0===a.done)continue;if(this.running.splice(o--,1),a.done){let o=new Z_(a.active.source,a.active.explicitPos,a.done,a.done.from,null!==(t=a.done.to)&&void 0!==t?t:g_(a.updates.length?a.updates[0].startState:this.view.state));for(let t of a.updates)o=o.update(t,i);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(z_).active.find((t=>t.source==a.active.source));if(s&&1==s.state)if(null==a.done){let t=new j_(a.active.source,0);for(let e of a.updates)t=t.update(e,i);1!=t.state&&e.push(t)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:R_.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(z_,!1);if(e&&e.tooltip&&this.view.state.facet(O_).closeOnBlur){let i=e.open&&Ml(this.view,e.open.tooltip);i&&i.dom.contains(t.relatedTarget)||this.view.dispatch({effects:D_.of(null)})}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:A_.of(!1)})),20),this.composing=0}}}),V_=br.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\ud835\udc65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\ud835\udc36'"}},".cm-completionIcon-type":{"&:after":{content:"'\ud835\udc61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\ud83d\udd11\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});const W_={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},G_=Gi.define({map(t,e){let i=e.mapPos(t,-1,si.TrackAfter);return null==i?void 0:i}}),J_=new class extends lo{};J_.startSide=1,J_.endSide=-1;const q_=wi.define({create:()=>po.empty,update(t,e){if(e.selection){let i=e.state.doc.lineAt(e.selection.main.head).from,o=e.startState.doc.lineAt(e.startState.selection.main.head).from;i!=e.changes.mapPos(o,-1)&&(t=po.empty)}t=t.map(e.changes);for(let i of e.effects)i.is(G_)&&(t=t.update({add:[J_.range(i.value,i.value+1)]}));return t}});const K_="()[]{}<>";function X_(t){for(let e=0;e<K_.length;e+=2)if(K_.charCodeAt(e)==t)return K_.charAt(e+1);return ii(t<128?t:t+1)}function $_(t,e){return t.languageDataAt("closeBrackets",e)[0]||W_}const tf="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),ef=br.inputHandler.of(((t,e,i,o)=>{if((tf?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let a=t.state.selection.main;if(o.length>2||2==o.length&&1==oi(ei(o,0))||e!=a.from||i!=a.to)return!1;let s=function(t,e){let i=$_(t,t.selection.main.head),o=i.brackets||W_.brackets;for(let a of o){let s=X_(ei(a,0));if(e==a)return s==a?lf(t,a,o.indexOf(a+a+a)>-1,i):nf(t,a,s,i.before||W_.before);if(e==s&&af(t,t.selection.main.from))return rf(t,a,s)}return null}(t.state,o);return!!s&&(t.dispatch(s),!0)})),of=[{key:"Backspace",run:t=>{let{state:e,dispatch:i}=t;if(e.readOnly)return!1;let o=$_(e,e.selection.main.head).brackets||W_.brackets,a=null,s=e.changeByRange((t=>{if(t.empty){let i=function(t,e){let i=t.sliceString(e-2,e);return oi(ei(i,0))==i.length?i:i.slice(1)}(e.doc,t.head);for(let a of o)if(a==i&&sf(e.doc,t.head)==X_(ei(a,0)))return{changes:{from:t.head-a.length,to:t.head+a.length},range:fi.cursor(t.head-a.length)}}return{range:a=t}}));return a||i(e.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!a}}];function af(t,e){let i=!1;return t.field(q_).between(0,t.doc.length,(t=>{t==e&&(i=!0)})),i}function sf(t,e){let i=t.sliceString(e,e+2);return i.slice(0,oi(ei(i,0)))}function nf(t,e,i,o){let a=null,s=t.changeByRange((s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:i,from:s.to}],effects:G_.of(s.to+e.length),range:fi.range(s.anchor+e.length,s.head+e.length)};let n=sf(t.doc,s.head);return!n||/\s/.test(n)||o.indexOf(n)>-1?{changes:{insert:e+i,from:s.head},effects:G_.of(s.head+e.length),range:fi.cursor(s.head+e.length)}:{range:a=s}}));return a?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function rf(t,e,i){let o=null,a=t.changeByRange((e=>e.empty&&sf(t.doc,e.head)==i?{changes:{from:e.head,to:e.head+i.length,insert:i},range:fi.cursor(e.head+i.length)}:o={range:e}));return o?null:t.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function lf(t,e,i,o){let a=o.stringPrefixes||W_.stringPrefixes,s=null,n=t.changeByRange((o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:G_.of(o.to+e.length),range:fi.range(o.anchor+e.length,o.head+e.length)};let n,r=o.head,l=sf(t.doc,r);if(l==e){if(cf(t,r))return{changes:{insert:e+e,from:r},effects:G_.of(r+e.length),range:fi.cursor(r+e.length)};if(af(t,r)){let o=i&&t.sliceDoc(r,r+3*e.length)==e+e+e?e+e+e:e;return{changes:{from:r,to:r+o.length,insert:o},range:fi.cursor(r+o.length)}}}else{if(i&&t.sliceDoc(r-2*e.length,r)==e+e&&(n=df(t,r-2*e.length,a))>-1&&cf(t,n))return{changes:{insert:e+e+e+e,from:r},effects:G_.of(r+e.length),range:fi.cursor(r+e.length)};if(t.charCategorizer(r)(l)!=io.Word&&df(t,r,a)>-1&&!function(t,e,i,o){let a=ud(t).resolveInner(e,-1),s=o.reduce(((t,e)=>Math.max(t,e.length)),0);for(let n=0;n<5;n++){let n=t.sliceDoc(a.from,Math.min(a.to,a.from+i.length+s)),r=n.indexOf(i);if(!r||r>-1&&o.indexOf(n.slice(0,r))>-1){let e=a.firstChild;for(;e&&e.from==a.from&&e.to-e.from>i.length+r;){if(t.sliceDoc(e.to-i.length,e.to)==i)return!1;e=e.firstChild}return!0}let l=a.to==e&&a.parent;if(!l)break;a=l}return!1}(t,r,e,a))return{changes:{insert:e+e,from:r},effects:G_.of(r+e.length),range:fi.cursor(r+e.length)}}return{range:s=o}}));return s?null:t.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function cf(t,e){let i=ud(t).resolveInner(e+1);return i.parent&&i.from==e}function df(t,e,i){let o=t.charCategorizer(e);if(o(t.sliceDoc(e-1,e))!=io.Word)return e;for(let a of i){let i=e-a.length;if(t.sliceDoc(i,e)==a&&o(t.sliceDoc(i-1,i))!=io.Word)return i}return-1}const hf=[{key:"Ctrl-Space",run:t=>!!t.state.field(z_,!1)&&(t.dispatch({effects:A_.of(!0)}),!0)},{key:"Escape",run:t=>{let e=t.state.field(z_,!1);return!(!e||!e.active.some((t=>0!=t.state)))&&(t.dispatch({effects:D_.of(null)}),!0)}},{key:"ArrowDown",run:B_(!0)},{key:"ArrowUp",run:B_(!1)},{key:"PageDown",run:B_(!0,"page")},{key:"PageUp",run:B_(!1,"page")},{key:"Enter",run:t=>{let e=t.state.field(z_,!1);return!(t.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<t.state.facet(O_).interactionDelay)&&(!!e.open.disabled||U_(t,e.open.options[e.open.selected]))}}],uf=Ti.highest(xr.computeN([O_],(t=>t.facet(O_).defaultKeymap?[hf]:[])));class pf{constructor(t,e,i){this.from=t,this.to=e,this.diagnostic=i}}class _f{constructor(t,e,i){this.diagnostics=t,this.panel=e,this.selected=i}static init(t,e,i){let o=t,a=i.facet(xf).markerFilter;a&&(o=a(o));let s=Ra.set(o.map((t=>t.from==t.to||t.from==t.to-1&&i.doc.lineAt(t.from).to==t.from?Ra.widget({widget:new Pf(t),diagnostic:t}).range(t.from):Ra.mark({attributes:{class:"cm-lintRange cm-lintRange-"+t.severity},diagnostic:t}).range(t.from,t.to))),!0);return new _f(s,e,ff(s))}}function ff(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=null;return t.between(i,1e9,((t,i,a)=>{let{spec:s}=a;if(!e||s.diagnostic==e)return o=new pf(t,i,s.diagnostic),!1})),o}function gf(t,e){let i=t.startState.doc.lineAt(e.pos);return!(!t.effects.some((t=>t.is(vf)))&&!t.changes.touchesRange(i.from,i.to))}function mf(t,e){return t.field(Af,!1)?e:e.concat(Gi.appendConfig.of(Ef))}const vf=Gi.define(),bf=Gi.define(),yf=Gi.define(),Af=wi.define({create:()=>new _f(Ra.none,null,null),update(t,e){if(e.docChanged){let i=t.diagnostics.map(e.changes),o=null;if(t.selected){let a=e.changes.mapPos(t.selected.from,1);o=ff(i,t.selected.diagnostic,a)||ff(i,null,a)}t=new _f(i,t.panel,o)}for(let i of e.effects)i.is(vf)?t=_f.init(i.value,t.panel,e.state):i.is(bf)?t=new _f(t.diagnostics,i.value?If.open:null,t.selected):i.is(yf)&&(t=new _f(t.diagnostics,t.panel,i.value));return t},provide:t=>[El.from(t,(t=>t.panel)),br.decorations.from(t,(t=>t.diagnostics))]});const Df=Ra.mark({class:"cm-lintRange cm-lintRange-active"});function kf(t,e,i){let{diagnostics:o}=t.state.field(Af),a=[],s=2e8,n=0;o.between(e-(i<0?1:0),e+(i>0?1:0),((t,o,r)=>{let{spec:l}=r;e>=t&&e<=o&&(t==o||(e>t||i>0)&&(e<o||i<0))&&(a.push(l.diagnostic),s=Math.min(t,s),n=Math.max(o,n))}));let r=t.state.facet(xf).tooltipFilter;return r&&(a=r(a)),a.length?{pos:s,end:n,above:t.state.doc.lineAt(s).to<n,create:()=>({dom:Of(t,a)})}:null}function Of(t,e){return lp("ul",{class:"cm-tooltip-lint"},e.map((e=>Mf(t,e,!1))))}const wf=t=>{let e=t.state.field(Af,!1);return!(!e||!e.panel)&&(t.dispatch({effects:bf.of(!1)}),!0)},Cf=[{key:"Mod-Shift-m",run:t=>{let e=t.state.field(Af,!1);e&&e.panel||t.dispatch({effects:mf(t.state,[bf.of(!0)])});let i=Il(t,If.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:t=>{let e=t.state.field(Af,!1);if(!e)return!1;let i=t.state.selection.main,o=e.diagnostics.iter(i.to+1);return!(!o.value&&(o=e.diagnostics.iter(0),!o.value||o.from==i.from&&o.to==i.to))&&(t.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0}),!0)}}],xf=vi.define({combine:t=>Object.assign({sources:t.map((t=>t.source))},ro(t.map((t=>t.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(t,e)=>t?e?i=>t(i)||e(i):t:e}))});function Sf(t){let e=[];if(t)t:for(let{name:i}of t){for(let t=0;t<i.length;t++){let o=i[t];if(/[a-zA-Z]/.test(o)&&!e.some((t=>t.toLowerCase()==o.toLowerCase()))){e.push(o);continue t}}e.push("")}return e}function Mf(t,e,i){var o;let a=i?Sf(e.actions):[];return lp("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},lp("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),null===(o=e.actions)||void 0===o?void 0:o.map(((i,o)=>{let s=!1,n=o=>{if(o.preventDefault(),s)return;s=!0;let a=ff(t.state.field(Af).diagnostics,e);a&&i.apply(t,a.from,a.to)},{name:r}=i,l=a[o]?r.indexOf(a[o]):-1,c=l<0?r:[r.slice(0,l),lp("u",r.slice(l,l+1)),r.slice(l+1)];return lp("button",{type:"button",class:"cm-diagnosticAction",onclick:n,onmousedown:n,"aria-label":` Action: ${r}${l<0?"":` (access key "${a[o]})"`}.`},c)})),e.source&&lp("div",{class:"cm-diagnosticSource"},e.source))}class Pf extends ja{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return lp("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Tf{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Mf(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class If{constructor(t){this.view=t,this.items=[];this.list=lp("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e=>{if(27==e.keyCode)wf(this.view),this.view.focus();else if(38==e.keyCode||33==e.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==e.keyCode||34==e.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==e.keyCode)this.moveSelection(0);else if(35==e.keyCode)this.moveSelection(this.items.length-1);else if(13==e.keyCode)this.view.focus();else{if(!(e.keyCode>=65&&e.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:i}=this.items[this.selectedIndex],o=Sf(i.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==e.keyCode){let e=ff(this.view.state.field(Af).diagnostics,i);e&&i.actions[a].apply(t,e.from,e.to)}}}e.preventDefault()},onclick:t=>{for(let e=0;e<this.items.length;e++)this.items[e].dom.contains(t.target)&&this.moveSelection(e)}}),this.dom=lp("div",{class:"cm-panel-lint"},this.list,lp("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>wf(this.view)},"\xd7")),this.update()}get selectedIndex(){let t=this.view.state.field(Af).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(Af),i=0,o=!1,a=null;for(t.between(0,this.view.state.doc.length,((t,s,n)=>{let r,{spec:l}=n,c=-1;for(let e=i;e<this.items.length;e++)if(this.items[e].diagnostic==l.diagnostic){c=e;break}c<0?(r=new Tf(this.view,l.diagnostic),this.items.splice(i,0,r),o=!0):(r=this.items[c],c>i&&(this.items.splice(i,c-i),o=!0)),e&&r.diagnostic==e.diagnostic?r.dom.hasAttribute("aria-selected")||(r.dom.setAttribute("aria-selected","true"),a=r):r.dom.hasAttribute("aria-selected")&&r.dom.removeAttribute("aria-selected"),i++}));i<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();0==this.items.length&&(this.items.push(new Tf(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:t=>{let{sel:e,panel:i}=t;e.top<i.top?this.list.scrollTop-=i.top-e.top:e.bottom>i.bottom&&(this.list.scrollTop+=e.bottom-i.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let t=this.list.firstChild;function e(){let e=t;t=e.nextSibling,e.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;t!=i.dom;)e();t=i.dom.nextSibling}else this.list.insertBefore(i.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=ff(this.view.state.field(Af).diagnostics,this.items[t].diagnostic);e&&this.view.dispatch({selection:{anchor:e.from,head:e.to},scrollIntoView:!0,effects:yf.of(e)})}static open(t){return new If(t)}}function Ff(t){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${arguments.length>1&&void 0!==arguments[1]?arguments[1]:'viewBox="0 0 40 40"'}>${encodeURIComponent(t)}</svg>')`}function Nf(t){return Ff(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Lf=br.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Nf("#d11")},".cm-lintRange-warning":{backgroundImage:Nf("orange")},".cm-lintRange-info":{backgroundImage:Nf("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});const Ef=[Af,br.decorations.compute([Af],(t=>{let{selected:e,panel:i}=t.field(Af);return e&&i&&e.from!=e.to?Ra.set([Df.range(e.from,e.to)]):Ra.none})),Sl(kf,{hideOn:gf}),Lf];var jf=function(t){void 0===t&&(t={});var e=[];!1!==t.closeBracketsKeymap&&(e=e.concat(of)),!1!==t.defaultKeymap&&(e=e.concat(np)),!1!==t.searchKeymap&&(e=e.concat(a_)),!1!==t.historyKeymap&&(e=e.concat(lu)),!1!==t.foldKeymap&&(e=e.concat(Kd)),!1!==t.completionKeymap&&(e=e.concat(hf)),!1!==t.lintKeymap&&(e=e.concat(Cf));var i=[];return!1!==t.lineNumbers&&i.push(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Kl.of(t),Bl(),tc]}()),!1!==t.highlightActiveLineGutter&&i.push(oc),!1!==t.highlightSpecialChars&&i.push(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[il.of(t),ol||(ol=hs.fromClass(class{constructor(t){this.view=t,this.decorations=Ra.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(il)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Kr({regexp:t.specialChars,decoration:(e,i,o)=>{let{doc:a}=i.state,s=ei(e[0],0);if(9==s){let t=a.lineAt(o),e=i.state.tabSize,s=wo(t.text,e,o-t.from);return Ra.replace({widget:new sl((e-s%e)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Ra.replace({widget:new al(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(il);t.startState.facet(il)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))]}()),!1!==t.history&&i.push(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Hh,Yh.of(t),br.domEventHandlers({beforeinput(t,e){let i="historyUndo"==t.inputType?Wh:"historyRedo"==t.inputType?Gh:null;return!!i&&(t.preventDefault(),i(e))}})]}()),!1!==t.foldGutter&&i.push(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign(Object.assign({},ih),t),i=new oh(e,!0),o=new oh(e,!1),a=hs.fromClass(class{constructor(t){this.from=t.viewport.from,this.markers=this.buildMarkers(t)}update(t){(t.docChanged||t.viewportChanged||t.startState.facet(Ad)!=t.state.facet(Ad)||t.startState.field(Vd,!1)!=t.state.field(Vd,!1)||ud(t.startState)!=ud(t.state)||e.foldingChanged(t))&&(this.markers=this.buildMarkers(t.view))}buildMarkers(t){let e=new _o;for(let a of t.viewportLineBlocks){let s=Wd(t.state,a.from,a.to)?o:zd(t.state,a.from,a.to)?i:null;s&&e.add(a.from,a.from,s)}return e.finish()}}),{domEventHandlers:s}=e;return[a,zl({class:"cm-foldGutter",markers(t){var e;return(null===(e=t.plugin(a))||void 0===e?void 0:e.markers)||po.empty},initialSpacer:()=>new oh(e,!1),domEventHandlers:Object.assign(Object.assign({},s),{click:(t,e,i)=>{if(s.click&&s.click(t,e,i))return!0;let o=Wd(t.state,e.from,e.to);if(o)return t.dispatch({effects:Yd.of(o)}),!0;let a=zd(t.state,e.from,e.to);return!!a&&(t.dispatch({effects:Bd.of(a)}),!0)}})}),th()]}()),!1!==t.drawSelection&&i.push(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Qr.of(t),Ur,Yr,Vr,as.of(!0)]}()),!1!==t.dropCursor&&i.push([Gr,Jr]),!1!==t.allowMultipleSelections&&i.push(no.allowMultipleSelections.of(!0)),!1!==t.indentOnInput&&i.push(no.transactionFilter.of((t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let i=t.newDoc,{head:o}=t.newSelection.main,a=i.lineAt(o);if(o>a.from+200)return t;let s=i.sliceString(a.from,o);if(!e.some((t=>t.test(s))))return t;let{state:n}=t,r=-1,l=[];for(let{head:c}of n.selection.ranges){let t=n.doc.lineAt(c);if(t.from==r)continue;r=t.from;let e=xd(n,t.from);if(null==e)continue;let i=/^\s*/.exec(t.text)[0],o=Cd(n,e);i!=o&&l.push({from:t.from,to:t.from+i.length,insert:o})}return l.length?[t,{changes:l,sequential:!0}]:t}))),!1!==t.syntaxHighlighting&&i.push(ch(uh,{fallback:!0})),!1!==t.bracketMatching&&i.push(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[gh.of(t),Ah]}()),!1!==t.closeBrackets&&i.push([ef,q_]),!1!==t.autocompletion&&i.push(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[z_,O_.of(t),H_,uf,V_]}()),!1!==t.rectangularSelection&&i.push(function(t){let e=(null===t||void 0===t?void 0:t.eventFilter)||(t=>t.altKey&&0==t.button);return br.mouseSelectionStyle.of(((t,i)=>e(i)?hl(t,i):null))}()),!1!==t.crosshairCursor&&i.push(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[e,i]=ul[t.key||"Alt"],o=hs.fromClass(class{constructor(t){this.view=t,this.isDown=!1}set(t){this.isDown!=t&&(this.isDown=t,this.view.update([]))}},{eventHandlers:{keydown(t){this.set(t.keyCode==e||i(t))},keyup(t){t.keyCode!=e&&i(t)||this.set(!1)},mousemove(t){this.set(i(t))}}});return[o,br.contentAttributes.of((t=>{var e;return(null===(e=t.plugin(o))||void 0===e?void 0:e.isDown)?pl:null}))]}()),!1!==t.highlightActiveLine&&i.push(rl),!1!==t.highlightSelectionMatches&&i.push(function(t){let e=[Mp,Sp];return t&&e.push(Op.of(t)),e}()),t.tabSize&&"number"===typeof t.tabSize&&i.push(Od.of(" ".repeat(t.tabSize))),i.concat([xr.of(e.flat())]).filter(Boolean)};const Zf="#e5c07b",Rf="#e06c75",Qf="#56b6c2",zf="#ffffff",Uf="#abb2bf",Bf="#7d8799",Yf="#61afef",Hf="#98c379",Vf="#d19a66",Wf="#c678dd",Gf="#21252b",Jf="#2c313a",qf="#282c34",Kf="#353a42",Xf="#3E4451",$f="#528bff",tg=[br.theme({"&":{color:Uf,backgroundColor:qf},".cm-content":{caretColor:$f},".cm-cursor, .cm-dropCursor":{borderLeftColor:$f},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Xf},".cm-panels":{backgroundColor:Gf,color:Uf},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:qf,color:Bf,border:"none"},".cm-activeLineGutter":{backgroundColor:Jf},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Kf},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Kf,borderBottomColor:Kf},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Jf,color:Uf}}},{dark:!0}),ch(sh.define([{tag:ad.keyword,color:Wf},{tag:[ad.name,ad.deleted,ad.character,ad.propertyName,ad.macroName],color:Rf},{tag:[ad.function(ad.variableName),ad.labelName],color:Yf},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:Vf},{tag:[ad.definition(ad.name),ad.separator],color:Uf},{tag:[ad.typeName,ad.className,ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:Zf},{tag:[ad.operator,ad.operatorKeyword,ad.url,ad.escape,ad.regexp,ad.link,ad.special(ad.string)],color:Qf},{tag:[ad.meta,ad.comment],color:Bf},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.link,color:Bf,textDecoration:"underline"},{tag:ad.heading,fontWeight:"bold",color:Rf},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:Vf},{tag:[ad.processingInstruction,ad.string,ad.inserted],color:Hf},{tag:ad.invalid,color:zf}]))];var eg=br.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),ig=function(t){void 0===t&&(t={});var{indentWithTab:e=!0,editable:i=!0,readOnly:o=!1,theme:a="light",placeholder:s="",basicSetup:n=!0}=t,r=[];switch(e&&r.unshift(xr.of([rp])),n&&("boolean"===typeof n?r.unshift(jf()):r.unshift(jf(n))),s&&r.unshift(function(t){return hs.fromClass(class{constructor(e){this.view=e,this.placeholder=Ra.set([Ra.widget({widget:new ll(t),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?Ra.none:this.placeholder}},{decorations:t=>t.decorations})}(s)),a){case"light":r.push(eg);break;case"dark":r.push(tg);break;case"none":break;default:r.push(a)}return!1===i&&r.push(br.editable.of(!1)),o&&r.push(no.readOnly.of(!0)),[...r]},og=Hi.define();var ag=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],sg=(0,o.forwardRef)(((t,e)=>{var{className:i,value:a="",selection:s,extensions:n=[],onChange:r,onStatistics:l,onCreateEditor:d,onUpdate:h,autoFocus:u,theme:p="light",height:_,minHeight:f,maxHeight:g,width:m,minWidth:v,maxWidth:b,basicSetup:y,placeholder:A,indentWithTab:D,editable:k,readOnly:O,root:w,initialState:C}=t,x=function(t,e){if(null==t)return{};var i,o,a={},s=Object.keys(t);for(o=0;o<s.length;o++)i=s[o],e.indexOf(i)>=0||(a[i]=t[i]);return a}(t,ag),S=(0,o.useRef)(null),{state:M,view:P,container:T}=function(t){var{value:e,selection:i,onChange:a,onStatistics:s,onCreateEditor:n,onUpdate:r,extensions:l=[],autoFocus:c,theme:d="light",height:h="",minHeight:u="",maxHeight:p="",placeholder:_="",width:f="",minWidth:g="",maxWidth:m="",editable:v=!0,readOnly:b=!1,indentWithTab:y=!0,basicSetup:A=!0,root:D,initialState:k}=t,[O,w]=(0,o.useState)(),[C,x]=(0,o.useState)(),[S,M]=(0,o.useState)(),P=br.theme({"&":{height:h,minHeight:u,maxHeight:p,width:f,minWidth:g,maxWidth:m},"& .cm-scroller":{height:"100% !important"}}),T=br.updateListener.of((t=>{if(t.docChanged&&"function"===typeof a&&!t.transactions.some((t=>t.annotation(og)))){var e=t.state.doc.toString();a(e,t)}s&&s((t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map((e=>t.state.sliceDoc(e.from,e.to))),selectedText:t.state.selection.ranges.some((t=>!t.empty))}))(t))})),I=[T,P,...ig({theme:d,editable:v,readOnly:b,placeholder:_,indentWithTab:y,basicSetup:A})];return r&&"function"===typeof r&&I.push(br.updateListener.of(r)),I=I.concat(l),(0,o.useEffect)((()=>{if(O&&!S){var t={doc:e,selection:i,extensions:I},o=k?no.fromJSON(k.json,t,k.fields):no.create(t);if(M(o),!C){var a=new br({state:o,parent:O,root:D});x(a),n&&n(a,o)}}return()=>{C&&(M(void 0),x(void 0))}}),[O,S]),(0,o.useEffect)((()=>w(t.container)),[t.container]),(0,o.useEffect)((()=>()=>{C&&(C.destroy(),x(void 0))}),[C]),(0,o.useEffect)((()=>{c&&C&&C.focus()}),[c,C]),(0,o.useEffect)((()=>{C&&C.dispatch({effects:Gi.reconfigure.of(I)})}),[d,l,h,u,p,f,g,m,_,v,b,y,A,a,r]),(0,o.useEffect)((()=>{if(void 0!==e){var t=C?C.state.doc.toString():"";C&&e!==t&&C.dispatch({changes:{from:0,to:t.length,insert:e||""},annotations:[og.of(!0)]})}}),[e,C]),{state:S,setState:M,view:C,setView:x,container:O,setContainer:w}}({container:S.current,root:w,value:a,autoFocus:u,theme:p,height:_,minHeight:f,maxHeight:g,width:m,minWidth:v,maxWidth:b,basicSetup:y,placeholder:A,indentWithTab:D,editable:k,readOnly:O,selection:s,onChange:r,onStatistics:l,onCreateEditor:d,onUpdate:h,extensions:n,initialState:C});if((0,o.useImperativeHandle)(e,(()=>({editor:S.current,state:M,view:P})),[S,T,M,P]),"string"!==typeof a)throw new Error("value must be typeof string but got "+typeof a);var I="string"===typeof p?"cm-theme-"+p:"cm-theme";return(0,c.jsx)("div",Ee({ref:S,className:I+(i?" "+i:"")},x))}));sg.displayName="CodeMirror";const ng=sg;class rg{constructor(t,e,i,o,a,s,n,r,l){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,d=arguments.length>10?arguments[10]:void 0;this.p=t,this.stack=e,this.state=i,this.reducePos=o,this.pos=a,this.score=s,this.buffer=n,this.bufferBase=r,this.curContext=l,this.lookAhead=c,this.parent=d}toString(){return`[${this.stack.filter(((t,e)=>e%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t.parser.context;return new rg(t,[],e,i,i,0,[],0,o?new lg(o,o.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var e;let i=t>>19,o=65535&t,{parser:a}=this.p,s=a.dynamicPrecedence(o);if(s&&(this.score+=s),0==i)return this.pushState(a.getGoto(this.state,o,!0),this.reducePos),o<a.minRepeatTerm&&this.storeNode(o,this.reducePos,this.reducePos,4,!0),void this.reduceContext(o,this.reducePos);let n=this.stack.length-3*(i-1)-(262144&t?6:0),r=n?this.stack[n-2]:this.p.ranges[0].from,l=this.reducePos-r;l>=2e3&&!(null===(e=this.p.parser.nodeSet.types[o])||void 0===e?void 0:e.isAnonymous)&&(r==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=r,this.p.lastBigReductionSize=l));let c=n?this.stack[n-1]:0,d=this.bufferBase+this.buffer.length-c;if(o<a.minRepeatTerm||131072&t){let t=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(o,r,t,d+4,!0)}if(262144&t)this.state=this.stack[n];else{let t=this.stack[n-3];this.state=a.getGoto(t,o,!0)}for(;this.stack.length>n;)this.stack.pop();this.reduceContext(o,r)}storeNode(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(0==t&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let t=this,o=this.buffer.length;if(0==o&&t.parent&&(o=t.bufferBase-t.parent.bufferBase,t=t.parent),o>0&&0==t.buffer[o-4]&&t.buffer[o-1]>-1){if(e==i)return;if(t.buffer[o-2]>=e)return void(t.buffer[o-2]=i)}}if(a&&this.pos!=i){let a=this.buffer.length;if(a>0&&0!=this.buffer[a-4])for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,o>4&&(o-=4);this.buffer[a]=t,this.buffer[a+1]=e,this.buffer[a+2]=i,this.buffer[a+3]=o}else this.buffer.push(t,e,i,o)}shift(t,e,i){let o=this.pos;if(131072&t)this.pushState(65535&t,this.pos);else if(0==(262144&t)){let a=t,{parser:s}=this.p;(i>this.pos||e<=s.maxNode)&&(this.pos=i,s.stateFlag(a,1)||(this.reducePos=i)),this.pushState(a,o),this.shiftContext(e,o),e<=s.maxNode&&this.buffer.push(e,o,i,4)}else this.pos=i,this.shiftContext(e,o),e<=this.p.parser.maxNode&&this.buffer.push(e,o,i,4)}apply(t,e,i){65536&t?this.reduce(t):this.shift(t,e,i)}useNode(t,e){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=t)&&(this.p.reused.push(t),i++);let o=this.pos;this.reducePos=this.pos=o+t.length,this.pushState(e,o),this.buffer.push(i,o,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let i=t.buffer.slice(e),o=t.bufferBase+e;for(;t&&o==t.bufferBase;)t=t.parent;return new rg(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,o,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let i=t<=this.p.parser.maxNode;i&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,i?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new dg(this);;){let i=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(0==i)return!1;if(0==(65536&i))return!0;e.reduce(i)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){let i=[];for(let o,a=0;a<e.length;a+=2)(o=e[a+1])!=this.state&&this.p.parser.hasAction(o,t)&&i.push(e[a],o);if(this.stack.length<120)for(let t=0;i.length<8&&t<e.length;t+=2){let o=e[t+1];i.some(((t,e)=>1&e&&t==o))||i.push(e[t],o)}e=i}let i=[];for(let o=0;o<e.length&&i.length<4;o+=2){let t=e[o+1];if(t==this.state)continue;let a=this.split();a.pushState(t,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(e[o],this.pos),a.score-=200,i.push(a)}return i}forceReduce(){let{parser:t}=this.p,e=t.stateSlot(this.state,5);if(0==(65536&e))return!1;if(!t.validAction(this.state,e)){let i=e>>19,o=65535&e,a=this.stack.length-3*i;if(a<0||t.getGoto(this.stack[a],o,!1)<0){let t=this.findForcedReduction();if(null==t)return!1;e=t}this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}findForcedReduction(){let{parser:t}=this.p,e=[],i=(o,a)=>{if(!e.includes(o))return e.push(o),t.allActions(o,(e=>{if(393216&e);else if(65536&e){let i=(e>>19)-a;if(i>1){let o=65535&e,a=this.stack.length-3*i;if(a>=0&&t.getGoto(this.stack[a],o,!1)>=0)return i<<19|65536|o}}else{let t=i(e,a+1);if(null!=t)return t}}))};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:t}=this.p;return 65535==t.data[t.stateSlot(this.state,1)]&&!t.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||-3!=this.buffer[t])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||-4!=this.buffer[t])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new lg(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class lg{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}var cg;!function(t){t[t.Insert=200]="Insert",t[t.Delete=190]="Delete",t[t.Reduce=100]="Reduce",t[t.MaxNext=4]="MaxNext",t[t.MaxInsertStackDepth=300]="MaxInsertStackDepth",t[t.DampenInsertStackDepth=120]="DampenInsertStackDepth",t[t.MinBigReduction=2e3]="MinBigReduction"}(cg||(cg={}));class dg{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=65535&t,i=t>>19;0==i?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(i-1);let o=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=o}}class hg{constructor(t,e,i){this.stack=t,this.pos=e,this.index=i,this.buffer=t.buffer,0==this.index&&this.maybeNext()}static create(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.bufferBase+t.buffer.length;return new hg(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;null!=t&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new hg(this.stack,this.pos,this.index)}}function ug(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uint16Array;if("string"!=typeof t)return t;let i=null;for(let o=0,a=0;o<t.length;){let s=0;for(;;){let e=t.charCodeAt(o++),i=!1;if(126==e){s=65535;break}e>=92&&e--,e>=34&&e--;let a=e-32;if(a>=46&&(a-=46,i=!0),s+=a,i)break;s*=46}i?i[a++]=s:i=new e(s)}return i}class pg{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const _g=new pg;class fg{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=_g,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let i=this.range,o=this.rangeIndex,a=this.pos+t;for(;a<i.from;){if(!o)return null;let t=this.ranges[--o];a-=i.from-t.to,i=t}for(;e<0?a>i.to:a>=i.to;){if(o==this.ranges.length-1)return null;let t=this.ranges[++o];a+=t.from-i.to,i=t}return a}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e,i,o=this.chunkOff+t;if(o>=0&&o<this.chunk.length)e=this.pos+t,i=this.chunk.charCodeAt(o);else{let o=this.resolveOffset(t,1);if(null==o)return-1;if(e=o,e>=this.chunk2Pos&&e<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(e-this.chunk2Pos);else{let t=this.rangeIndex,o=this.range;for(;o.to<=e;)o=this.ranges[++t];this.chunk2=this.input.chunk(this.chunk2Pos=e),e+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-e)),i=this.chunk2.charCodeAt(0)}}return e>=this.token.lookAhead&&(this.token.lookAhead=e+1),i}acceptToken(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e?this.resolveOffset(e,-1):this.pos;if(null==i||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=_g,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let i="";for(let o of this.ranges){if(o.from>=e)break;o.to>t&&(i+=this.input.read(Math.max(o.from,t),Math.min(o.to,e)))}return i}}class gg{constructor(t,e){this.data=t,this.id=e}token(t,e){let{parser:i}=e.p;mg(this.data,t,e,this.id,i.data,i.tokenPrecTable)}}gg.prototype.contextual=gg.prototype.fallback=gg.prototype.extend=!1;gg.prototype.fallback=gg.prototype.extend=!1;function mg(t,e,i,o,a,s){let n=0,r=1<<o,{dialect:l}=i.p.parser;t:for(;0!=(r&t[n]);){let i=t[n+1];for(let h=n+3;h<i;h+=2)if((t[h+1]&r)>0){let i=t[h];if(l.allows(i)&&(-1==e.token.value||e.token.value==i||bg(i,e.token.value,a,s))){e.acceptToken(i);break}}let o=e.next,c=0,d=t[n+2];if(!(e.next<0&&d>c&&65535==t[i+3*d-3]&&65535==t[i+3*d-3])){for(;c<d;){let a=c+d>>1,s=i+a+(a<<1),r=t[s],l=t[s+1]||65536;if(o<r)d=a;else{if(!(o>=l)){n=t[s+2],e.advance();continue t}c=a+1}}break}n=t[i+3*d-1]}}function vg(t,e,i){for(let o,a=e;65535!=(o=t[a]);a++)if(o==i)return a-e;return-1}function bg(t,e,i,o){let a=vg(i,o,e);return a<0||vg(i,o,t)<a}const yg="undefined"!=typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&/\bparse\b/.test({NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.LOG);let Ag=null;var Dg,kg;function Og(t,e,i){let o=t.cursor(pc.IncludeAnonymous);for(o.moveTo(e);;)if(!(i<0?o.childBefore(e):o.childAfter(e)))for(;;){if((i<0?o.to<e:o.from>e)&&!o.type.isError)return i<0?Math.max(0,Math.min(o.to-1,e-25)):Math.min(t.length,Math.max(o.from+1,e+25));if(i<0?o.prevSibling():o.nextSibling())break;if(!o.parent())return i<0?0:t.length}}!function(t){t[t.Margin=25]="Margin"}(Dg||(Dg={}));class wg{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?Og(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?Og(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let i=this.trees[e],o=this.index[e];if(o==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=i.children[o],s=this.start[e]+i.positions[o];if(s>t)return this.nextStart=s,null;if(a instanceof _c){if(s==t){if(s<this.safeFrom)return null;let t=s+a.length;if(t<=this.safeTo){let e=a.prop(rc.lookAhead);if(!e||t+e<this.fragment.to)return a}}this.index[e]++,s+a.length>=Math.max(this.safeFrom,t)&&(this.trees.push(a),this.start.push(s),this.index.push(0))}else this.index[e]++,this.nextStart=s+a.length}}}class Cg{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map((t=>new pg))}getActions(t){let e=0,i=null,{parser:o}=t.p,{tokenizers:a}=o,s=o.stateSlot(t.state,3),n=t.curContext?t.curContext.hash:0,r=0;for(let l=0;l<a.length;l++){if(0==(1<<l&s))continue;let o=a[l],c=this.tokens[l];if((!i||o.fallback)&&((o.contextual||c.start!=t.pos||c.mask!=s||c.context!=n)&&(this.updateCachedToken(c,o,t),c.mask=s,c.context=n),c.lookAhead>c.end+25&&(r=Math.max(c.lookAhead,r)),0!=c.value)){let a=e;if(c.extended>-1&&(e=this.addActions(t,c.extended,c.end,e)),e=this.addActions(t,c.value,c.end,e),!o.extend&&(i=c,e>a))break}}for(;this.actions.length>e;)this.actions.pop();return r&&t.setLookAhead(r),i||t.pos!=this.stream.end||(i=new pg,i.value=t.p.parser.eofTerm,i.start=i.end=t.pos,e=this.addActions(t,i.value,i.end,e)),this.mainToken=i,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new pg,{pos:i,p:o}=t;return e.start=i,e.end=Math.min(i+1,o.stream.end),e.value=i==o.stream.end?o.parser.eofTerm:0,e}updateCachedToken(t,e,i){let o=this.stream.clipPos(i.pos);if(e.token(this.stream.reset(o,t),i),t.value>-1){let{parser:e}=i.p;for(let o=0;o<e.specialized.length;o++)if(e.specialized[o]==t.value){let a=e.specializers[o](this.stream.read(t.start,t.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){0==(1&a)?t.value=a>>1:t.extended=a>>1;break}}}else t.value=0,t.end=this.stream.clipPos(o+1)}putAction(t,e,i,o){for(let a=0;a<o;a+=3)if(this.actions[a]==t)return o;return this.actions[o++]=t,this.actions[o++]=e,this.actions[o++]=i,o}addActions(t,e,i,o){let{state:a}=t,{parser:s}=t.p,{data:n}=s;for(let r=0;r<2;r++)for(let t=s.stateSlot(a,r?2:1);;t+=3){if(65535==n[t]){if(1!=n[t+1]){0==o&&2==n[t+1]&&(o=this.putAction(Tg(n,t+2),e,i,o));break}t=Tg(n,t+2)}n[t]==e&&(o=this.putAction(Tg(n,t+1),e,i,o))}return o}}!function(t){t[t.Distance=5]="Distance",t[t.MaxRemainingPerStep=3]="MaxRemainingPerStep",t[t.MinBufferLengthPrune=500]="MinBufferLengthPrune",t[t.ForceReduceLimit=10]="ForceReduceLimit",t[t.CutDepth=15e3]="CutDepth",t[t.CutTo=9e3]="CutTo",t[t.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",t[t.MaxStackCount=12]="MaxStackCount"}(kg||(kg={}));class xg{constructor(t,e,i,o){this.parser=t,this.input=e,this.ranges=o,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new fg(e,o),this.tokens=new Cg(t,this.stream),this.topTerm=t.top[1];let{from:a}=o[0];this.stacks=[rg.start(this,t.top[0],a)],this.fragments=i.length&&this.stream.end-a>4*t.bufferLength?new wg(i,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t,e,i=this.stacks,o=this.minStackPos,a=this.stacks=[];if(this.bigReductionCount>300&&1==i.length){let[t]=i;for(;t.forceReduce()&&t.stack.length&&t.stack[t.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<i.length;s++){let n=i[s];for(;;){if(this.tokens.mainToken=null,n.pos>o)a.push(n);else{if(this.advanceStack(n,a,i))continue;{t||(t=[],e=[]),t.push(n);let i=this.tokens.getMainToken(n);e.push(i.value,i.end)}}break}}if(!a.length){let e=t&&function(t){let e=null;for(let i of t){let t=i.p.stoppedAt;(i.pos==i.p.stream.end||null!=t&&i.pos>t)&&i.p.parser.stateFlag(i.state,2)&&(!e||e.score<i.score)&&(e=i)}return e}(t);if(e)return this.stackToTree(e);if(this.parser.strict)throw yg&&t&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+o);this.recovering||(this.recovering=5)}if(this.recovering&&t){let i=null!=this.stoppedAt&&t[0].pos>this.stoppedAt?t[0]:this.runRecovery(t,e,a);if(i)return this.stackToTree(i.forceAll())}if(this.recovering){let t=1==this.recovering?1:3*this.recovering;if(a.length>t)for(a.sort(((t,e)=>e.score-t.score));a.length>t;)a.pop();a.some((t=>t.reducePos>o))&&this.recovering--}else if(a.length>1){t:for(let t=0;t<a.length-1;t++){let e=a[t];for(let i=t+1;i<a.length;i++){let o=a[i];if(e.sameState(o)||e.buffer.length>500&&o.buffer.length>500){if(!((e.score-o.score||e.buffer.length-o.buffer.length)>0)){a.splice(t--,1);continue t}a.splice(i--,1)}}}a.length>12&&a.splice(12,a.length-12)}this.minStackPos=a[0].pos;for(let s=1;s<a.length;s++)a[s].pos<this.minStackPos&&(this.minStackPos=a[s].pos);return null}stopAt(t){if(null!=this.stoppedAt&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,i){let o=t.pos,{parser:a}=this,s=yg?this.stackID(t)+" -> ":"";if(null!=this.stoppedAt&&o>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let e=t.curContext&&t.curContext.tracker.strict,i=e?t.curContext.hash:0;for(let n=this.fragments.nodeAt(o);n;){let o=this.parser.nodeSet.types[n.type.id]==n.type?a.getGoto(t.state,n.type.id):-1;if(o>-1&&n.length&&(!e||(n.prop(rc.contextHash)||0)==i))return t.useNode(n,o),yg&&console.log(s+this.stackID(t)+` (via reuse of ${a.getName(n.type.id)})`),!0;if(!(n instanceof _c)||0==n.children.length||n.positions[0]>0)break;let r=n.children[0];if(!(r instanceof _c&&0==n.positions[0]))break;n=r}}let n=a.stateSlot(t.state,4);if(n>0)return t.reduce(n),yg&&console.log(s+this.stackID(t)+` (via always-reduce ${a.getName(65535&n)})`),!0;if(t.stack.length>=15e3)for(;t.stack.length>9e3&&t.forceReduce(););let r=this.tokens.getActions(t);for(let l=0;l<r.length;){let n=r[l++],c=r[l++],d=r[l++],h=l==r.length||!i,u=h?t:t.split();if(u.apply(n,c,d),yg&&console.log(s+this.stackID(u)+` (via ${0==(65536&n)?"shift":`reduce of ${a.getName(65535&n)}`} for ${a.getName(c)} @ ${o}${u==t?"":", split"})`),h)return!0;u.pos>o?e.push(u):i.push(u)}return!1}advanceFully(t,e){let i=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>i)return Sg(t,e),!0}}runRecovery(t,e,i){let o=null,a=!1;for(let s=0;s<t.length;s++){let n=t[s],r=e[s<<1],l=e[1+(s<<1)],c=yg?this.stackID(n)+" -> ":"";if(n.deadEnd){if(a)continue;if(a=!0,n.restart(),yg&&console.log(c+this.stackID(n)+" (restarted)"),this.advanceFully(n,i))continue}let d=n.split(),h=c;for(let t=0;d.forceReduce()&&t<10;t++){if(yg&&console.log(h+this.stackID(d)+" (via force-reduce)"),this.advanceFully(d,i))break;yg&&(h=this.stackID(d)+" -> ")}for(let t of n.recoverByInsert(r))yg&&console.log(c+this.stackID(t)+" (via recover-insert)"),this.advanceFully(t,i);this.stream.end>n.pos?(l==n.pos&&(l++,r=0),n.recoverByDelete(r,l),yg&&console.log(c+this.stackID(n)+` (via recover-delete ${this.parser.getName(r)})`),Sg(n,i)):(!o||o.score<n.score)&&(o=n)}return o}stackToTree(t){return t.close(),_c.build({buffer:hg.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(Ag||(Ag=new WeakMap)).get(t);return e||Ag.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function Sg(t,e){for(let i=0;i<e.length;i++){let o=e[i];if(o.pos==t.pos&&o.sameState(t))return void(e[i].score<t.score&&(e[i]=t))}e.push(t)}class Mg{constructor(t,e,i){this.source=t,this.flags=e,this.disabled=i}allows(t){return!this.disabled||0==this.disabled[t]}}class Pg extends Tc{constructor(t){if(super(),this.wrappers=[],14!=t.version)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let n=0;n<t.repeatNodeCount;n++)e.push("");let i=Object.keys(t.topRules).map((e=>t.topRules[e][1])),o=[];for(let n=0;n<e.length;n++)o.push([]);function a(t,e,i){o[t].push([e,e.deserialize(String(i))])}if(t.nodeProps)for(let n of t.nodeProps){let t=n[0];"string"==typeof t&&(t=rc[t]);for(let e=1;e<n.length;){let i=n[e++];if(i>=0)a(i,t,n[e++]);else{let o=n[e+-i];for(let s=-i;s>0;s--)a(n[e++],t,o);e++}}}this.nodeSet=new dc(e.map(((e,a)=>cc.define({name:a>=this.minRepeatTerm?void 0:e,id:a,props:o[a],top:i.indexOf(a)>-1,error:0==a,skipped:t.skippedNodes&&t.skippedNodes.indexOf(a)>-1})))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=ac;let s=ug(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let n=0;n<this.specializerSpecs.length;n++)this.specialized[n]=this.specializerSpecs[n].term;this.specializers=this.specializerSpecs.map(Ig),this.states=ug(t.states,Uint32Array),this.data=ug(t.stateData),this.goto=ug(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map((t=>"number"==typeof t?new gg(s,t):t)),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,i){let o=new xg(this,t,e,i);for(let a of this.wrappers)o=a(o,t,e,i);return o}getGoto(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.goto;if(e>=o[0])return-1;for(let a=o[e+1];;){let e=o[a++],s=1&e,n=o[a++];if(s&&i)return n;for(let i=a+(e>>1);a<i;a++)if(o[a]==t)return n;if(s)return-1}}hasAction(t,e){let i=this.data;for(let o=0;o<2;o++)for(let a,s=this.stateSlot(t,o?2:1);;s+=3){if(65535==(a=i[s])){if(1!=i[s+1]){if(2==i[s+1])return Tg(i,s+2);break}a=i[s=Tg(i,s+2)]}if(a==e||0==a)return Tg(i,s+1)}return 0}stateSlot(t,e){return this.states[6*t+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){return!!this.allActions(t,(t=>t==e||null))}allActions(t,e){let i=this.stateSlot(t,4),o=i?e(i):void 0;for(let a=this.stateSlot(t,1);null==o;a+=3){if(65535==this.data[a]){if(1!=this.data[a+1])break;a=Tg(this.data,a+2)}o=e(Tg(this.data,a+1))}return o}nextStates(t){let e=[];for(let i=this.stateSlot(t,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=Tg(this.data,i+2)}if(0==(1&this.data[i+2])){let t=this.data[i+1];e.some(((e,i)=>1&i&&e==t))||e.push(this.data[i],t)}}return e}configure(t){let e=Object.assign(Object.create(Pg.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let i=this.topRules[t.top];if(!i)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=i}return t.tokenizers&&(e.tokenizers=this.tokenizers.map((e=>{let i=t.tokenizers.find((t=>t.from==e));return i?i.to:e}))),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map(((i,o)=>{let a=t.specializers.find((t=>t.from==i.external));if(!a)return i;let s=Object.assign(Object.assign({},i),{external:a.to});return e.specializers[o]=Ig(s),s}))),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),null!=t.strict&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),null!=t.bufferLength&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return null==e?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),i=e.map((()=>!1));if(t)for(let a of t.split(" ")){let t=e.indexOf(a);t>=0&&(i[t]=!0)}let o=null;for(let a=0;a<e.length;a++)if(!i[a])for(let t,i=this.dialects[e[a]];65535!=(t=this.data[i++]);)(o||(o=new Uint8Array(this.maxTerm+1)))[t]=1;return new Mg(t,i,o)}static deserialize(t){return new Pg(t)}}function Tg(t,e){return t[e]|t[e+1]<<16}function Ig(t){if(t.external){let e=t.extend?1:0;return(i,o)=>t.external(i,o)<<1|e}return t.get}const Fg=jc({null:ad.null,instanceof:ad.operatorKeyword,this:ad.self,"new super assert open to with void":ad.keyword,"class interface extends implements enum var":ad.definitionKeyword,"module package import":ad.moduleKeyword,"switch while for if else case default do break continue return try catch finally throw":ad.controlKeyword,"requires exports opens uses provides public private protected static transitive abstract final strictfp synchronized native transient volatile throws":ad.modifier,IntegerLiteral:ad.integer,FloatingPointLiteral:ad.float,"StringLiteral TextBlock":ad.string,CharacterLiteral:ad.character,LineComment:ad.lineComment,BlockComment:ad.blockComment,BooleanLiteral:ad.bool,PrimitiveType:ad.standard(ad.typeName),TypeName:ad.typeName,Identifier:ad.variableName,"MethodName/Identifier":ad.function(ad.variableName),Definition:ad.definition(ad.variableName),ArithOp:ad.arithmeticOperator,LogicOp:ad.logicOperator,BitOp:ad.bitwiseOperator,CompareOp:ad.compareOperator,AssignOp:ad.definitionOperator,UpdateOp:ad.updateOperator,Asterisk:ad.punctuation,Label:ad.labelName,"( )":ad.paren,"[ ]":ad.squareBracket,"{ }":ad.brace,".":ad.derefOperator,", ;":ad.separator}),Ng={__proto__:null,true:34,false:34,null:42,void:46,byte:48,short:48,int:48,long:48,char:48,float:48,double:48,boolean:48,extends:62,super:64,class:76,this:78,new:84,public:100,protected:102,private:104,abstract:106,static:108,final:110,strictfp:112,default:114,synchronized:116,native:118,transient:120,volatile:122,throws:150,implements:160,interface:166,enum:176,instanceof:236,open:265,module:267,requires:272,transitive:274,exports:276,to:278,opens:280,uses:282,provides:284,with:286,package:290,import:294,if:306,else:308,while:312,for:316,var:323,assert:330,switch:334,case:340,do:344,break:348,continue:352,return:356,throw:362,try:366,catch:370,finally:378},Lg=Pg.deserialize({version:14,states:"#!hQ]QPOOO&tQQO'#H[O(xQQO'#CbOOQO'#Cb'#CbO)PQPO'#CaO)XOSO'#CpOOQO'#Ha'#HaOOQO'#Cu'#CuO*tQPO'#D_O+_QQO'#HkOOQO'#Hk'#HkO-sQQO'#HfO-zQQO'#HfOOQO'#Hf'#HfOOQO'#He'#HeO0OQPO'#DUO0]QPO'#GlO3TQPO'#D_O3[QPO'#DzO)PQPO'#E[O3}QPO'#E[OOQO'#DV'#DVO5]QQO'#H_O7dQQO'#EeO7kQPO'#EdO7pQPO'#EfOOQO'#H`'#H`O5sQQO'#H`O8sQQO'#FgO8zQPO'#EwO9PQPO'#E|O9PQPO'#FOOOQO'#H_'#H_OOQO'#HW'#HWOOQO'#Gf'#GfOOQO'#HV'#HVO:aQPO'#FhOOQO'#HU'#HUOOQO'#Ge'#GeQ]QPOOOOQO'#Hq'#HqO:fQPO'#HqO:kQPO'#D{O:kQPO'#EVO:kQPO'#EQO:sQPO'#HnO;UQQO'#EfO)PQPO'#C`O;^QPO'#C`O)PQPO'#FbO;cQPO'#FdO;nQPO'#FjO;nQPO'#FmO:kQPO'#FrO;sQPO'#FoO9PQPO'#FvO;nQPO'#FxO]QPO'#F}O;xQPO'#GPO<TQPO'#GRO<`QPO'#GTO;nQPO'#GVO9PQPO'#GWO<gQPO'#GYOOQO'#H['#H[O=WQQO,58{OOQO'#HY'#HYOOOO'#Gg'#GgO>yOSO,59[OOQO,59[,59[OOQO'#Hg'#HgO?jQPO,59eO@lQPO,59yOOQO-E:d-E:dO)PQPO,58zOA`QPO,58zO)PQPO,5;|OAeQPO'#DQOAjQPO'#DQOOQO'#Gi'#GiOBjQQO,59jOOQO'#Dm'#DmODRQPO'#HsOD]QPO'#DlODkQPO'#HrODsQPO,5<^ODxQPO,59^OEcQPO'#CxOOQO,59c,59cOEjQPO,59bOGrQQO'#H[OJVQQO'#CbOJmQPO'#D_OKrQQO'#HkOLSQQO,59pOLZQPO'#DvOLiQPO'#HzOLqQPO,5:`OLvQPO,5:`OM^QPO,5;mOMiQPO'#IROMtQPO,5;dOMyQPO,5=WOOQO-E:j-E:jOOQO,5:f,5:fO! aQPO,5:fO! hQPO,5:vO! mQPO,5<^O)PQPO,5:vO:kQPO,5:gO:kQPO,5:qO:kQPO,5:lO:kQPO,5<^O!!^QPO,59qO9PQPO,5:}O!!eQPO,5;QO9PQPO,59TO!!sQPO'#DXOOQO,5;O,5;OOOQO'#El'#ElOOQO'#En'#EnO9PQPO,5;UO9PQPO,5;UO9PQPO,5;UO9PQPO,5;UO9PQPO,5;UO9PQPO,5;UO9PQPO,5;eOOQO,5;h,5;hOOQO,5<R,5<RO!!zQPO,5;aO!#]QPO,5;cO!!zQPO'#CyO!#dQQO'#HkO!#rQQO,5;jO]QPO,5<SOOQO-E:c-E:cOOQO,5>],5>]O!%SQPO,5:gO!%bQPO,5:qO!%jQPO,5:lO!%uQPO,5>YOLZQPO,5>YO! {QPO,59UO!&QQQO,58zO!&YQQO,5;|O!&bQQO,5<OO)PQPO,5<OO9PQPO'#DUO]QPO,5<UO]QPO,5<XO!&jQPO'#FqO]QPO,5<ZO]QPO,5<`O!&zQQO,5<bO!'UQPO,5<dO!'ZQPO,5<iOOQO'#Fi'#FiOOQO,5<k,5<kO!'`QPO,5<kOOQO,5<m,5<mO!'eQPO,5<mO!'jQQO,5<oOOQO,5<o,5<oO<jQPO,5<qO!'qQQO,5<rO!'xQPO'#GcO!)OQPO,5<tO<jQPO,5<|O)PQPO,58}O!,|QPO'#ChOOQO1G.k1G.kOOOO-E:e-E:eOOQO1G.v1G.vO!-WQPO,59jO!&QQQO1G.fO)PQPO1G.fO!-eQQO1G1hOOQO,59l,59lO!-mQPO,59lOOQO-E:g-E:gO!-rQPO,5>_O!.ZQPO,5:WO:kQPO'#GnO!.bQPO,5>^OOQO1G1x1G1xOOQO1G.x1G.xO!.{QPO'#CyO!/kQPO'#HkO!/uQPO'#CzO!0TQPO'#HjO!0]QPO,59dOOQO1G.|1G.|OEjQPO1G.|O!0sQPO,59eO!1QQQO'#H[O!1cQQO'#CbOOQO,5:b,5:bO:kQPO,5:cOOQO,5:a,5:aO!1tQQO,5:aOOQO1G/[1G/[O!1yQPO,5:bO!2[QPO'#GqO!2oQPO,5>fOOQO1G/z1G/zO!2wQPO'#DvO!3YQPO'#D_O!3aQPO1G/zO!!zQPO'#GoO!3fQPO1G1XO9PQPO1G1XO:kQPO'#GwO!3nQPO,5>mOOQO1G1O1G1OOOQO1G0Q1G0QO!3vQPO'#E]OOQO1G0b1G0bO!4gQPO1G1xO! hQPO1G0bO!%SQPO1G0RO!%bQPO1G0]O!%jQPO1G0WOOQO1G/]1G/]O!4lQQO1G.pO7kQPO1G0jO)PQPO1G0jO:sQPO'#HnO!6`QQO1G.pOOQO1G.p1G.pO!6eQQO1G0iOOQO1G0l1G0lO!6lQPO1G0lO!6wQQO1G.oO!7_QQO'#HoO!7lQPO,59sO!8{QQO1G0pO!:dQQO1G0pO!;rQQO1G0pO!<PQQO1G0pO!=UQQO1G0pO!=lQQO1G0pO!=vQQO1G1PO!=}QQO'#HkOOQO1G0{1G0{O!?QQQO1G0}OOQO1G0}1G0}OOQO1G1n1G1nO! pQPO'#DqO!ARQPO'#D[O!!zQPO'#D|O!!zQPO'#D}OOQO1G0R1G0RO!AYQPO1G0RO!A_QPO1G0RO!AgQPO1G0RO!ArQPO'#EXOOQO1G0]1G0]O!BVQPO1G0]O!B[QPO'#ETO!!zQPO'#ESOOQO1G0W1G0WO!CUQPO1G0WO!CZQPO1G0WO!CcQPO'#EhO!CjQPO'#EhOOQO'#Gv'#GvO!CrQQO1G0mO!EcQQO1G3tO7kQPO1G3tO!GbQPO'#FWOOQO1G.f1G.fOOQO1G1h1G1hO!GiQPO1G1jOOQO1G1j1G1jO!GtQQO1G1jO!G|QPO1G1pOOQO1G1s1G1sO)aQPO'#D_O+_QQO,5<aO!KtQPO,5<aO!LVQPO,5<]O!L^QPO,5<]OOQO1G1u1G1uOOQO1G1z1G1zOOQO1G1|1G1|O9PQPO1G1|O#!QQPO'#FzOOQO1G2O1G2OO;nQPO1G2TOOQO1G2V1G2VOOQO1G2X1G2XOOQO1G2Z1G2ZOOQO1G2]1G2]OOQO1G2^1G2^O#!XQQO'#H[O##SQQO'#CbO+_QQO'#HkO##}QQOOO#$kQQO'#EeO#$YQQO'#H`OLZQPO'#GdO#$rQPO,5<}OOQO'#HO'#HOO#$zQPO1G2`O#(xQPO'#G[O<jQPO'#G`OOQO1G2`1G2`O#(}QPO1G2hOOQO1G.i1G.iO#.SQQO'#EeO#.dQQO'#H^O#.tQPO'#FSOOQO'#H^'#H^O#/OQPO'#H^O#/mQPO'#IUO#/uQPO,59SOOQO7+$Q7+$QO!&QQQO7+$QOOQO7+'S7+'SOOQO1G/W1G/WO#/zQPO'#DoO#0UQQO'#HtOOQO'#Ht'#HtOOQO1G/r1G/rOOQO,5=Y,5=YOOQO-E:l-E:lO#0fQWO,58{O#0mQPO,59fOOQO,59f,59fO!!zQPO'#HmOD}QPO'#GhO#0{QPO,5>UOOQO1G/O1G/OOOQO7+$h7+$hOOQO1G/{1G/{O#1TQQO1G/{OOQO1G/}1G/}O#1YQPO1G/{OOQO1G/|1G/|O:kQPO1G/}OOQO,5=],5=]OOQO-E:o-E:oOOQO7+%f7+%fOOQO,5=Z,5=ZOOQO-E:m-E:mO9PQPO7+&sOOQO7+&s7+&sOOQO,5=c,5=cOOQO-E:u-E:uO#1_QPO'#EUO#1mQPO'#EUOOQO'#Gu'#GuO#2UQPO,5:wOOQO,5:w,5:wOOQO7+'d7+'dOOQO7+%|7+%|OOQO7+%m7+%mO!AYQPO7+%mO!A_QPO7+%mO!AgQPO7+%mOOQO7+%w7+%wO!BVQPO7+%wOOQO7+%r7+%rO!CUQPO7+%rO!CZQPO7+%rOOQO7+&U7+&UOOQO'#Ee'#EeO7kQPO7+&UO7kQPO,5>YO#2uQPO7+$[OOQO7+&T7+&TOOQO7+&W7+&WO9PQPO'#GjO#3TQPO,5>ZOOQO1G/_1G/_O9PQPO7+&kO#3`QQO,59eO#4cQPO'#DrO! pQPO'#DrO#4nQPO'#HwO#4vQPO,5:]O#5aQQO'#HgO#5|QQO'#CuO! mQPO'#HvO#6lQPO'#DpO#6vQPO'#HvO#7XQPO'#DpO#7aQPO'#IPO#7fQPO'#E`OOQO'#Hp'#HpOOQO'#Gk'#GkO#7nQPO,59vOOQO,59v,59vO#7uQPO'#HqOOQO,5:h,5:hO#9]QPO'#H|OOQO'#EP'#EPOOQO,5:i,5:iO#9hQPO'#EYO:kQPO'#EYO#9yQPO'#H}O#:UQPO,5:sO! mQPO'#HvO!!zQPO'#HvO#:^QPO'#DpOOQO'#Gs'#GsO#:eQPO,5:oOOQO,5:o,5:oOOQO,5:n,5:nOOQO,5;S,5;SO#;_QQO,5;SO#;fQPO,5;SOOQO-E:t-E:tOOQO7+&X7+&XOOQO7+)`7+)`O#;mQQO7+)`OOQO'#Gz'#GzO#=ZQPO,5;rOOQO,5;r,5;rO#=bQPO'#FXO)PQPO'#FXO)PQPO'#FXO)PQPO'#FXO#=pQPO7+'UO#=uQPO7+'UOOQO7+'U7+'UO]QPO7+'[O#>QQPO1G1{O! mQPO1G1{O#>`QQO1G1wO!!sQPO1G1wO#>gQPO1G1wO#>nQQO7+'hOOQO'#G}'#G}O#>uQPO,5<fOOQO,5<f,5<fO#>|QPO'#HqO9PQPO'#F{O#?UQPO7+'oO#?ZQPO,5=OO! mQPO,5=OO#?`QPO1G2iO#@iQPO1G2iOOQO1G2i1G2iOOQO-E:|-E:|OOQO7+'z7+'zO!2[QPO'#G^O<jQPO,5<vOOQO,5<z,5<zO#@qQPO7+(SOOQO7+(S7+(SO#DoQPO,59TO#DvQPO'#ITO#EOQPO,5;nO)PQPO'#GyO#ETQPO,5>pOOQO1G.n1G.nOOQO<<Gl<<GlO#E]QPO'#HuO#EeQPO,5:ZOOQO1G/Q1G/QOOQO,5>X,5>XOOQO,5=S,5=SOOQO-E:f-E:fO#EjQPO7+%gOOQO7+%g7+%gOOQO7+%i7+%iOOQO<<J_<<J_O#FQQPO'#H[O#FXQPO'#CbO#F`QPO,5:pO#FeQPO,5:xO#1_QPO,5:pOOQO-E:s-E:sOOQO1G0c1G0cOOQO<<IX<<IXO!AYQPO<<IXO!A_QPO<<IXOOQO<<Ic<<IcOOQO<<I^<<I^O!CUQPO<<I^OOQO<<Ip<<IpO#FjQQO<<GvO7kQPO<<IpO)PQPO<<IpOOQO<<Gv<<GvO#H^QQO,5=UOOQO-E:h-E:hO#HkQQO<<JVOOQO,5:^,5:^O!!zQPO'#DsO#IRQPO,5:^O! pQPO'#GpO#I^QPO,5>cOOQO1G/w1G/wO#IfQPO'#HsO#ImQPO,59xO#IrQPO,5>bO! mQPO,59xO#I}QPO,5:[O#7fQPO,5:zO! mQPO,5>bO!!zQPO,5>bO#7aQPO,5>kOOQO,5:[,5:[OLvQPO'#DtOOQO,5>k,5>kO#JVQPO'#EaOOQO,5:z,5:zO#MWQPO,5:zO!!zQPO'#DxOOQO-E:i-E:iOOQO1G/b1G/bOOQO,5:y,5:yO!!zQPO'#GrO#M]QPO,5>hOOQO,5:t,5:tO#MhQPO,5:tO#MvQPO,5:tO#NXQPO'#GtO#NoQPO,5>iO#NzQPO'#EZOOQO1G0_1G0_O$ RQPO1G0_O! mQPO,5:pOOQO-E:q-E:qOOQO1G0Z1G0ZOOQO1G0n1G0nO$ WQQO1G0nOOQO<<Lz<<LzOOQO-E:x-E:xOOQO1G1^1G1^O$ _QQO,5;sOOQO'#G{'#G{O#=bQPO,5;sOOQO'#IV'#IVO$ gQQO,5;sO$ xQQO,5;sOOQO<<Jp<<JpO$!QQPO<<JpOOQO<<Jv<<JvO9PQPO7+'gO$!VQPO7+'gO!!sQPO7+'cO$!eQPO7+'cO$!jQQO7+'cOOQO<<KS<<KSOOQO-E:{-E:{OOQO1G2Q1G2QOOQO,5<g,5<gO$!qQQO,5<gOOQO<<KZ<<KZO9PQPO1G2jO$!xQPO1G2jOOQO,5=l,5=lOOQO7+(T7+(TO$!}QPO7+(TOOQO-E;O-E;OO$$lQWO'#HfO$$WQWO'#HfO$$sQPO'#G_O:kQPO,5<xOLZQPO,5<xOOQO1G2b1G2bOOQO<<Kn<<KnO$%UQQO1G.oOOQO1G1Z1G1ZO$%`QPO'#GxO$%mQPO,5>oOOQO1G1Y1G1YO$%uQPO'#FTOOQO,5=e,5=eOOQO-E:w-E:wO$%zQPO'#GmO$&XQPO,5>aOOQO1G/u1G/uOOQO<<IR<<IROOQO1G0[1G0[O$&aQPO1G0dO$&fQPO1G0[O$&kQPO1G0dOOQOAN>sAN>sO!AYQPOAN>sOOQOAN>xAN>xOOQOAN?[AN?[O7kQPOAN?[O$&pQPO,5:_OOQO1G/x1G/xOOQO,5=[,5=[OOQO-E:n-E:nO$&{QPO,5>eOOQO1G/d1G/dOOQO1G3|1G3|O$'^QPO1G/dOOQO1G/v1G/vOOQO1G0f1G0fO#MWQPO1G0fO#7aQPO'#HyO$'cQPO1G3|O! mQPO1G3|OOQO1G4V1G4VOK^QPO'#DvOJmQPO'#D_OOQO,5:{,5:{O$'nQPO,5:{O$'nQPO,5:{O$'uQQO'#H_O$'|QQO'#H`O$(WQQO'#EbO$(cQPO'#EbOOQO,5:d,5:dOOQO,5=^,5=^OOQO-E:p-E:pOOQO1G0`1G0`O$(kQPO1G0`OOQO,5=`,5=`OOQO-E:r-E:rO$(yQPO,5:uOOQO7+%y7+%yOOQO7+&Y7+&YOOQO1G1_1G1_O$)QQQO1G1_OOQO-E:y-E:yO$)YQQO'#IWO$)TQPO1G1_O$ mQPO1G1_O)PQPO1G1_OOQOAN@[AN@[O$)eQQO<<KRO9PQPO<<KRO$)lQPO<<J}OOQO<<J}<<J}O!!sQPO<<J}OOQO1G2R1G2RO$)qQQO7+(UO9PQPO7+(UOOQO<<Ko<<KoP!'xQPO'#HQOLZQPO'#HPO$){QPO,5<yO$*WQPO1G2dO:kQPO1G2dOOQO,5=d,5=dOOQO-E:v-E:vO#DoQPO,5;oOOQO,5=X,5=XOOQO-E:k-E:kO$*]QPO7+&OOOQO7+%v7+%vO$*kQPO7+&OOOQOG24_G24_OOQOG24vG24vO$*pQPO1G/yO$*{QPO1G4POOQO7+%O7+%OOOQO7+&Q7+&QOOQO7+)h7+)hO$+^QPO7+)hO!0bQPO,5:aOOQO1G0g1G0gO$+iQPO1G0gO$+pQPO,59qO$,UQPO,5:|O7kQPO,5:|OOQO7+%z7+%zOOQO7+&y7+&yO)PQPO'#G|O$,ZQPO,5>rO$,cQPO7+&yO$,hQQO'#IXOOQOAN@mAN@mO$,sQQOAN@mOOQOAN@iAN@iO$,zQPOAN@iO$-PQQO<<KpO$-ZQPO,5=kOOQO-E:}-E:}OOQO7+(O7+(OO$-lQPO7+(OO$-qQPO<<IjOOQO<<Ij<<IjO#DoQPO<<IjO$-qQPO<<IjOOQO<<MS<<MSOOQO7+&R7+&RO$.PQPO1G0jO$.[QQO1G0hOOQO1G0h1G0hO$.dQPO1G0hO$.iQQO,5=hOOQO-E:z-E:zOOQO<<Je<<JeO$.tQPO,5>sOOQOG26XG26XOOQOG26TG26TOOQO<<Kj<<KjOOQOAN?UAN?UO#DoQPOAN?UO$.|QPOAN?UO$/RQPOAN?UO7kQPO7+&SO$/aQPO7+&SOOQO7+&S7+&SO$/fQPOG24pOOQOG24pG24pO#DoQPOG24pO$/kQPO<<InOOQO<<In<<InOOQOLD*[LD*[O$/pQPOLD*[OOQOAN?YAN?YOOQO!$'Mv!$'MvO)PQPO'#CaO$/uQQO'#H[O$0YQQO'#CbO!!zQPO'#Cy",stateData:"$0u~OPOSQOS%wOS~OZ_O_UO`UOaUObUOcUOeUOg]Oh]Op!OOvzOwjOz}O}bO!PuO!SxO!TxO!UxO!VxO!WxO!XxO!YxO!ZyO![!_O!]xO!^xO!_xO!u|O!z{O#eoO#qnO#soO#toO#x!QO#y!PO$V!RO$X!SO$_!TO$b!UO$d!WO$g!VO$k!XO$m!YO$r!ZO$t![O$v!]O$x!^O${!`O$}!aO%{SO%}QO&PPO&VTO&rcO~OWiXW&OXZ&OXuiXu&OX!P&OX!b&OX#]&OX#_&OX#a&OX#c&OX#d&OX#e&OX#f&OX#g&OX#h&OX#j&OX#n&OX#q&OX%{iX%}iX&PiX&[&OX&]iX&]&OX&l&OX&tiX&t&OX&v!aX~O#o$]X~P$wOWUXW&ZXZUXuUXu&ZX!PUX!bUX#]UX#_UX#aUX#cUX#dUX#eUX#fUX#gUX#hUX#jUX#nUX#qUX%{&ZX%}&ZX&P&ZX&[UX&]UX&]&ZX&lUX&tUX&t&ZX&v!aX~O#o$]X~P&{O%}RO&P!bO~O&U!gO&W!eO~Og]Oh]O!SxO!TxO!UxO!VxO!WxO!XxO!YxO!ZyO!]xO!^xO!_xO%{SO%}!hO&PVOg!RXh!RX$g!RX%}!RX&P!RX~O#x!mO#y!lO$V!nOv!RX!u!RX!z!RX&r!RX~P)aOW!xOu!oO%{SO%}!sO&P!sO&t&_X~OW!{Ou&YX%{&YX%}&YX&P&YX&t&YXY&YXw&YX&l&YX&o&YXZ&YXq&YX&[&YX!P&YX#_&YX#a&YX#c&YX#d&YX#e&YX#f&YX#g&YX#h&YX#j&YX#n&YX#q&YX}&YX!r&YX#o&YXs&YX|&YX~O&]!yO~P+sO&]&YX~P+sOZ_O_UO`UOaUObUOcUOeUOg]Oh]Op!OOwjOz}O!SxO!TxO!UxO!VxO!WxO!XxO!YxO!ZyO!]xO!^xO!_xO#eoO#qnO#soO#toO%{SO&VTO~O%}!}O&P!|OY&nP~P.RO%{SOg%`Xh%`Xv%`X!S%`X!T%`X!U%`X!V%`X!W%`X!X%`X!Y%`X!Z%`X!]%`X!^%`X!_%`X!u%`X!z%`X$g%`X%}%`X&P%`X&r%`X&]%`X~O!SxO!TxO!UxO!VxO!WxO!XxO!YxO!ZyO!]xO!^xO!_xOg!RXh!RXv!RX!u!RX!z!RX%}!RX&P!RX&r!RX&]!RX~O$g!RX~P1sO|#[O~P]Og]Oh]Ov#aO!u#cO!z#bO%}!hO&PVO&r#`O~O$g#dO~P3cOu#fO&t#gO!P&RX#_&RX#a&RX#c&RX#d&RX#e&RX#f&RX#g&RX#h&RX#j&RX#n&RX#q&RX&[&RX&]&RX&l&RX~OW#eOY&RX#o&RXs&RXq&RX|&RX~P4UO!b#hO#]#hOW&SXu&SX!P&SX#_&SX#a&SX#c&SX#d&SX#e&SX#f&SX#g&SX#h&SX#j&SX#n&SX#q&SX&[&SX&]&SX&l&SX&t&SXY&SX#o&SXs&SXq&SX|&SX~OZ#XX~P5sOZ#iO~O&t#gO~O#_#mO#a#nO#c#oO#d#oO#e#pO#f#qO#g#rO#h#rO#j#vO#n#sO#q#tO&[#kO&]#kO&l#lO~O!P#uO~P7uO&v#wO~OZ_O_UO`UOaUObUOcUOeUOg]Oh]Op!OOwjOz}O#eoO#qnO#soO#toO%{SO%}0iO&P0hO&VTO~O#o#{O~O![#}O~O%}!sO&P!sO~Og]Oh]O%}!hO&PVO&]!yO~OW$TO&t#gO~O#y!lO~O!W$XO%}RO&P!bO~OZ$YO~OZ$]O~O!P$dO%}$cO&P$cO~O!P$fO%}$cO&P$cO~O!P$iO~P9POZ$lO}bO~OW$oOZ$pOgTahTa%{Ta%}Ta&PTa~OvTa!STa!TTa!UTa!VTa!WTa!XTa!YTa!ZTa!]Ta!^Ta!_Ta!uTa!zTa#xTa#yTa$VTa$gTa&rTauTaYTa&]TaqTa|Ta!PTa~P<oO&U$sO&W!eO~Ou!oO%{SOqma&[maYma&lma!Pma~O&tma}ma!rma~P?RO!SxO!TxO!UxO!VxO!WxO!XxO!YxO!ZyO!]xO!^xO!_xO~Og!Rah!Rav!Ra!u!Ra!z!Ra$g!Ra%}!Ra&P!Ra&r!Ra&]!Ra~P?wO#y$vO~Os$xO~Ou$yO%{SO~Ou!oO%{ra%}ra&Pra&traYrawra&lra&ora!Pra&[raqra~OWra#_ra#ara#cra#dra#era#fra#gra#hra#jra#nra#qra&]ra#orasra|ra~PArOu!oO%{SOq&gX!P&gX!b&gX~OY&gX#o&gX~PCpO!b$|Oq!`X!P!`XY!`X~Oq$}O!P&fX~O!P%PO~Ov%QO~Og]Oh]O%{0gO%}!hO&PVO&`%TO~O&[&^P~PD}O%{SO%}!hO&PVO~OWiXW&OXY&OXZ&OXuiXu&OX!b&OX#]&OX#_&OX#a&OX#c&OX#d&OX#e&OX#f&OX#g&OX#h&OX#j&OX#n&OX#q&OX%{iX%}iX&PiX&[&OX&]iX&]&OX&l&OX&tiX&t&OX&v!aX~OYiXY!aXq!aXwiX&liX&oiX~PEuOWUXW&ZXYUXZUXuUXu&ZX!bUX#]UX#_UX#aUX#cUX#dUX#eUX#fUX#gUX#hUX#jUX#nUX#qUX%{&ZX%}&ZX&P&ZX&[UX&]UX&]&ZX&lUX&tUX&t&ZX&v!aX~OY!aXY&ZXq!aXw&ZX&l&ZX&o&ZX~PHYOg]Oh]O%{SO%}!hO&PVOg!RXh!RX%}!RX&P!RX~P?wOu!oOw%_O%{SO%}%[O&P%ZO&o%^O~OW!xOY&_X&l&_X&t&_X~PK^OY%aO~P7uOg]Oh]O%}!hO&PVO~Oq%cOY&nX~OY%eO~Og]Oh]O%{SO%}!hO&PVOY&nP~P?wOY%kO&l%iO&t#gO~Oq%lO&v#wOY&uX~OY%nO~O%{SOg%`ah%`av%`a!S%`a!T%`a!U%`a!V%`a!W%`a!X%`a!Y%`a!Z%`a!]%`a!^%`a!_%`a!u%`a!z%`a$g%`a%}%`a&P%`a&r%`a&]%`a~O|%oO~P]O}%pO~Ou!oO%{SO%}!sO&P!sO~Op%|Ow%}O%}RO&P!bO&]!yO~Oz%{O~P! {Oz&PO%}RO&P!bO&]!yO~OY&cP~P9POg]Oh]O%{SO%}!hO&PVO~O}bO~P9POW!xOu!oO%{SO&t&_X~O#q#tO!P#ra#_#ra#a#ra#c#ra#d#ra#e#ra#f#ra#g#ra#h#ra#j#ra#n#ra&[#ra&]#ra&l#raY#ra#o#ras#raq#ra|#ra~Oo&dO}&cO!r&eO&]&bO~O}&jO!r&eO~Oo&nO}&mO&]&bO~OZ#iOu&rO%{SO~OW$oO}&xO~OW$oO!P&zO~OW&{O!P&|O~O$g!VO%}0iO&P0hO!P&cP~P.RO!P'XO#o'YO~P7uO}'ZO~O$b']O~O!P'^O~O!P'_O~O!P'`O~P7uO!P'bO~P7uOZ$YO_UO`UOaUObUOcUOeUOg]Oh]Op!OOwjOz}O%{SO%}'dO&P'cO&VTO~P?wO%P'mO%T'nOZ$|a_$|a`$|aa$|ab$|ac$|ae$|ag$|ah$|ap$|av$|aw$|az$|a}$|a!P$|a!S$|a!T$|a!U$|a!V$|a!W$|a!X$|a!Y$|a!Z$|a![$|a!]$|a!^$|a!_$|a!u$|a!z$|a#e$|a#q$|a#s$|a#t$|a#x$|a#y$|a$V$|a$X$|a$_$|a$b$|a$d$|a$g$|a$k$|a$m$|a$r$|a$t$|a$v$|a$x$|a${$|a$}$|a%u$|a%{$|a%}$|a&P$|a&V$|a&r$|a|$|a$`$|a$p$|a~O}'tOY&xP~P9PO}ra!rra&|ra~PArOW$oO!P'{O~Os'|O~Ou!oO%{SOq&ga!P&ga!b&gaY&ga#o&ga~O}'}O~P9POq$}O!P&fa~Og]Oh]O%{0gO%}!hO&PVO~O&`(UO~P!.jOu!oO%{SOq&_X&[&_XY&_X&l&_X!P&_X~O}&_X!r&_X~P!/SOo(WOp(WOqnX&[nX~Oq(XO&[&^X~O&[(ZO~Ou!oOw(]O%{SO%}RO&P!bO~OYma&lma&tma~P!0bOW&OXY!aXq!aXu!aX%{!aX~OWUXY!aXq!aXu!aX%{!aX~OW(`O~Ou!oO%{SO%}!sO&P!sO&o(bO~Og]Oh]O%{SO%}!hO&PVO~P?wOq%cOY&na~Ou!oO%{SO%}!sO&P!sO&o%^O~O%{SO~P1sOY(eO~OY(hO&l%iO~Oq%lOY&ua~Og]Oh]OvzO|(pO!u|O%{SO%}!hO&PVO&rcO~P?wO!P(qO~OW^iZ#XXu^i!P^i!b^i#]^i#_^i#a^i#c^i#d^i#e^i#f^i#g^i#h^i#j^i#n^i#q^i&[^i&]^i&l^i&t^iY^i#o^is^iq^i|^i~OW)QO~Os)RO~P7uOz)SO%}RO&P!bO~O!P]iY]i#o]is]iq]i|]i~P7uOq)TOY&cX!P&cX~P7uOY)VO~O#q#tO!P#^i#_#^i#a#^i#c#^i#d#^i#e#^i#f#^i#j#^i#n#^i&[#^i&]#^i&l#^iY#^i#o#^is#^iq#^i|#^i~O#g#rO#h#rO~P!7qO#_#mO#f#qO#g#rO#h#rO#j#vO#q#tO&[#kO&]#kO!P#^i#a#^i#c#^i#d#^i#n#^i&l#^iY#^i#o#^is#^iq#^i|#^i~O#e#pO~P!9VO#_#mO#f#qO#g#rO#h#rO#j#vO#q#tO&[#kO&]#kO!P#^i#c#^i#d#^i#n#^iY#^i#o#^is#^iq#^i|#^i~O#a#nO#e#pO&l#lO~P!:kO#e#^i~P!9VO#q#tO!P#^i#a#^i#c#^i#d#^i#e#^i#f#^i#n#^i&l#^iY#^i#o#^is#^iq#^i|#^i~O#_#mO#g#rO#h#rO#j#vO&[#kO&]#kO~P!<WO#g#^i#h#^i~P!7qO#o)WO~P7uO#_&_X#a&_X#c&_X#d&_X#e&_X#f&_X#g&_X#h&_X#j&_X#n&_X#q&_X&]&_X#o&_Xs&_X|&_X~P!/SO!P#kiY#ki#o#kis#kiq#ki|#ki~P7uOg]Oh]OvzO}bO!P)fO!SxO!TxO!UxO!VxO!W)jO!XxO!YxO!ZyO!]xO!^xO!_xO!u|O!z{O%{SO%})^O&P)_O&]&bO&rcO~O|)iO~P!?hO}&cO~O}&cO!r&eO~Oo&dO}&cO!r&eO~O%{SO%}!sO&P!sO|&qP!P&qP~P?wO}&jO~Og]Oh]OvzO|)xO!P)vO!u|O!z{O%{SO%}!hO&PVO&]&bO&rcO~P?wO}&mO~Oo&nO}&mO~Os)zO~P9POu)|O%{SO~Ou&rO}'}O%{SOW#Zi!P#Zi#_#Zi#a#Zi#c#Zi#d#Zi#e#Zi#f#Zi#g#Zi#h#Zi#j#Zi#n#Zi#q#Zi&[#Zi&]#Zi&l#Zi&t#ZiY#Zi#o#Zis#Ziq#Zi|#Zi~O}&cOW&biu&bi!P&bi#_&bi#a&bi#c&bi#d&bi#e&bi#f&bi#g&bi#h&bi#j&bi#n&bi#q&bi&[&bi&]&bi&l&bi&t&biY&bi#o&bis&biq&bi|&bi~O#|*UO$O*VO$Q*VO$R*WO$S*XO~O|*TO~P!GPO$Y*YO%}RO&P!bO~OW*ZO!P*[O~O$`*]OZ$^i_$^i`$^ia$^ib$^ic$^ie$^ig$^ih$^ip$^iv$^iw$^iz$^i}$^i!P$^i!S$^i!T$^i!U$^i!V$^i!W$^i!X$^i!Y$^i!Z$^i![$^i!]$^i!^$^i!_$^i!u$^i!z$^i#e$^i#q$^i#s$^i#t$^i#x$^i#y$^i$V$^i$X$^i$_$^i$b$^i$d$^i$g$^i$k$^i$m$^i$r$^i$t$^i$v$^i$x$^i${$^i$}$^i%u$^i%{$^i%}$^i&P$^i&V$^i&r$^i|$^i$p$^i~Og]Oh]O$g#dO%}!hO&PVO~O!P*aO~P9PO!P*bO~OZ_O_UO`UOaUObUOcUOeUOg]Oh]Op!OOvzOwjOz}O}bO!PuO!SxO!TxO!UxO!VxO!WxO!XxO!YxO!Z*gO![!_O!]xO!^xO!_xO!u|O!z{O#eoO#qnO#soO#toO#x!QO#y!PO$V!RO$X!SO$_!TO$b!UO$d!WO$g!VO$k!XO$m!YO$p*hO$r!ZO$t![O$v!]O$x!^O${!`O$}!aO%{SO%}QO&PPO&VTO&rcO~O|*fO~P!LcOWiXW&OXY&OXZ&OXuiXu&OX!P&OX%{iX%}iX&PiX&]iX&tiX&t&OX~OWUXW&ZXYUXZUXuUXu&ZX!PUX%{&ZX%}&ZX&P&ZX&]&ZX&tUX&t&ZX~OW#eOu#fO&t#gO~OW&SXY%WXu&SX!P%WX&t&SX~OZ#XX~P#$YOY*nO!P*lO~O%P'mO%T'nOZ$|i_$|i`$|ia$|ib$|ic$|ie$|ig$|ih$|ip$|iv$|iw$|iz$|i}$|i!P$|i!S$|i!T$|i!U$|i!V$|i!W$|i!X$|i!Y$|i!Z$|i![$|i!]$|i!^$|i!_$|i!u$|i!z$|i#e$|i#q$|i#s$|i#t$|i#x$|i#y$|i$V$|i$X$|i$_$|i$b$|i$d$|i$g$|i$k$|i$m$|i$r$|i$t$|i$v$|i$x$|i${$|i$}$|i%u$|i%{$|i%}$|i&P$|i&V$|i&r$|i|$|i$`$|i$p$|i~OZ*qO~O%P'mO%T'nOZ%Ui_%Ui`%Uia%Uib%Uic%Uie%Uig%Uih%Uip%Uiv%Uiw%Uiz%Ui}%Ui!P%Ui!S%Ui!T%Ui!U%Ui!V%Ui!W%Ui!X%Ui!Y%Ui!Z%Ui![%Ui!]%Ui!^%Ui!_%Ui!u%Ui!z%Ui#e%Ui#q%Ui#s%Ui#t%Ui#x%Ui#y%Ui$V%Ui$X%Ui$_%Ui$b%Ui$d%Ui$g%Ui$k%Ui$m%Ui$r%Ui$t%Ui$v%Ui$x%Ui${%Ui$}%Ui%u%Ui%{%Ui%}%Ui&P%Ui&V%Ui&r%Ui|%Ui$`%Ui$p%Ui~OW&SXu&SX#_&SX#a&SX#c&SX#d&SX#e&SX#f&SX#g&SX#h&SX#j&SX#n&SX#q&SX&[&SX&]&SX&l&SX&t&SX~O!b*vO#]#hOY&SXZ#XX~P#,{OY&QXq&QX|&QX!P&QX~P7uO}'tO|&wP~P9POY&QXg%YXh%YX%{%YX%}%YX&P%YXq&QX|&QX!P&QX~Oq*yOY&xX~OY*{O~O}'}O|&iP~P9POq&hX!P&hX|&hXY&hX~P7uO&`Ta~P<oOo(WOp(WOqna&[na~Oq(XO&[&^a~OW+TO~Ow+UO~Ou!oO%{SO%}+YO&P+XO~Og]Oh]Ov#aO!u#cO%}!hO&PVO&r#`O~Og]Oh]OvzO|+_O!u|O%{SO%}!hO&PVO&rcO~P?wOw+jO%}RO&P!bO&]!yO~Oq)TOY&ca!P&ca~O#_ma#ama#cma#dma#ema#fma#gma#hma#jma#nma#qma&]ma#omasma|ma~P?ROo+oOq!fX&[!fX~Oq+qO&[&kX~O&[+sO~OW&ZXu&ZX%{&ZX%}&ZX&P&ZX&]&ZX~OZ!aX~P#4{OWiXuiX%{iX%}iX&PiX&]iX~OZ!aX~P#5hOg]Oh]Ov#aO!u#cO!z#bO&]&bO&r#`O~O%})^O&P)_O~P#6TOg]Oh]O%{SO%})^O&P)_O~O}bO!P+}O~OZ,OO~O},QO!m,TO~O|,VO~P!?hO}bOg&eXh&eXv&eX!S&eX!T&eX!U&eX!V&eX!W&eX!X&eX!Y&eX!Z&eX!]&eX!^&eX!_&eX!u&eX!z&eX%{&eX%}&eX&P&eX&]&eX&r&eX~Oq,XO}&pX!P&pX~OZ#iO}&cOq!|X|!|X!P!|X~Oq,^O|&qX!P&qX~O|,aO!P,`O~O&]&bO~P3cOg]Oh]OvzO|,eO!P)vO!u|O!z{O%{SO%}!hO&PVO&]&bO&rcO~P?wOs,fO~P7uOs,fO~P9PO}&cOW&bqu&bq!P&bq#_&bq#a&bq#c&bq#d&bq#e&bq#f&bq#g&bq#h&bq#j&bq#n&bq#q&bq&[&bq&]&bq&l&bq&t&bqY&bq#o&bqs&bqq&bq|&bq~O|,jO~P!GPO!W,nO#},nO%}RO&P!bO~O!P,qO~O$Y,rO%}RO&P!bO~O!b$|O#o,tOq!`X!P!`X~O!P,vO~P7uO!P,vO~P9PO!P,yO~P7uO|,{O~P!LcO![#}O#o,|O~O!P-OO~O!b-PO~OY-SOZ$YO_UO`UOaUObUOcUOeUOg]Oh]Op!OOwjOz}O%{SO%}'dO&P'cO&VTO~P?wOY-SO!P-TO~O%P'mO%T'nOZ%Uq_%Uq`%Uqa%Uqb%Uqc%Uqe%Uqg%Uqh%Uqp%Uqv%Uqw%Uqz%Uq}%Uq!P%Uq!S%Uq!T%Uq!U%Uq!V%Uq!W%Uq!X%Uq!Y%Uq!Z%Uq![%Uq!]%Uq!^%Uq!_%Uq!u%Uq!z%Uq#e%Uq#q%Uq#s%Uq#t%Uq#x%Uq#y%Uq$V%Uq$X%Uq$_%Uq$b%Uq$d%Uq$g%Uq$k%Uq$m%Uq$r%Uq$t%Uq$v%Uq$x%Uq${%Uq$}%Uq%u%Uq%{%Uq%}%Uq&P%Uq&V%Uq&r%Uq|%Uq$`%Uq$p%Uq~O}'tO~P9POq-`O|&wX~O|-bO~Oq*yOY&xa~Oq-fO|&iX~O|-hO~Ow-iO~Oq!aXu!aX!P!aX!b!aX%{!aX~OZ&OX~P#EoOZUX~P#EoO!P-jO~OZ-kO~OW^yZ#XXu^y!P^y!b^y#]^y#_^y#a^y#c^y#d^y#e^y#f^y#g^y#h^y#j^y#n^y#q^y&[^y&]^y&l^y&t^yY^y#o^ys^yq^y|^y~OY%^aq%^a!P%^a~P7uO!P#myY#my#o#mys#myq#my|#my~P7uOo+oOq!fa&[!fa~Oq+qO&[&ka~OZ,OO~PCpO!P-xO~O!m,TO}&ja!P&ja~O}bO!P-{O~OZ_O_UO`UOaUObUOcUOeUOg]Oh]Op.ZOvzOw.YOz}O|.UO}bO!PuO![!_O!u|O!z{O#eoO#qnO#soO#toO#x!QO#y!PO$V!RO$X!SO$_!TO$b!UO$d!WO$g!VO$k!XO$m!YO$r!ZO$t![O$v!]O$x!^O${!`O$}!aO%{SO%}QO&PPO&VTO&]!yO&rcO~P?wO},QO~Oq,XO}&pa!P&pa~O}&cOq!|a|!|a!P!|a~OZ#iO}&cOq!|a|!|a!P!|a~O%{SO%}!sO&P!sOq%hX|%hX!P%hX~P?wOq,^O|&qa!P&qa~O|!}X~P!?hO|.eO~Os.fO~P7uOW$oO!P.gO~OW$oO$P.lO%}RO&P!bO!P&zP~OW$oO$T.mO~O!P.nO~O!b$|O#o.pOq!`X!P!`X~OY.rO~O!P.sO~P7uO#o.tO~P7uO!b.vO~OY.wOZ$YO_UO`UOaUObUOcUOeUOg]Oh]Op!OOwjOz}O%{SO%}'dO&P'cO&VTO~P?wOW!{Ou&YX%{&YX%}&YX&P&YX&|&YX~O&]!yO~P$$WOu!oO%{SO&|.yO%}%RX&P%RX~OY&QXq&QX~P7uO}'tOq%lX|%lX~P9POq-`O|&wa~O!b/PO~O}'}Oq%aX|%aX~P9POq-fO|&ia~OY/SO~O!P/TO~OZ/UO~O&l%iOq!ga&[!ga~Ou!oO%{SO}&ma!P&ma!m&ma~O!P/ZO~O!m,TO}&ji!P&ji~O|/`O~P]OW/bO~P4UOZ#iO!P&SX~P#,{OW$TOZ#iO&t#gO~Op/dOw/dO~O}&cOq!|i|!|i!P!|i~O|!}a~P!?hOW$oO!P/fO~OW$oOq/gO!P&zX~OY/kO~P7uOY/mO~OY%Wq!P%Wq~P7uO&|.yO%}%Ra&P%Ra~OY/rO~Ou!oO!P/uO!Z/vO%{SO~OY/wO~O&l%iOq!gi&[!gi~Ou!oO%{SO}&mi!P&mi!m&mi~O!m,TO}&jq!P&jq~O|/yO~P]Op/{Ow%}Oz%{O%}RO&P!bO&]!yO~O!P/|O~Oq/gO!P&za~O!P0QO~OW$oOq/gO!P&{X~OY0SO~P7uOY0TO~OY%Wy!P%Wy~P7uOu!oO%{SO%}%sa&P%sa&|%sa~OY0UO~Ou!oO!P0VO!Z0WO%{SO~Op0ZO%}RO&P!bO~OW)QOZ#iO~O!P0]O~OW$oOq%pa!P%pa~Oq/gO!P&{a~O!P0_O~Ou!oO!P0_O!Z0`O%{SO~O!P0bO~O!P0cO~O!P0eO~O!P0fO~O#o&OXY&OXs&OXq&OX|&OX~P$wO#oUXYUXsUXqUX|UX~P&{O`Q_P#f&Vc~",goto:"#(V&|PPPP&}'b*q-tP'bPP.Y.^/rPPPPP1^P2vPP4`7P9j<T<m>bPPP>hP@|PPPAv2vPCoPPDjPEaEgPPPPPPPPPPPPFpGXPJ_JgJqKZKaKgMVMZMZMcPMrNx! k! uP!![NxP!!b!!l!!{!#TP!#r!#|!$SNx!$V!$]EaEa!$a!$k!$n2v!&Y2v2v!(RP.^P!(VP!(vPPPPPP.^P.^!)d.^PP.^P.^PP.^!*x!+SPP!+Y!+cPPPPPPPP&}P&}PP!+g!+g!+z!+gPP!+gP!+gP!,e!,hP!+g!-O!+gP!+gP!-R!-UP!+gP!+gP!+gP!+gP!+g!+gP!+gP!-YP!-`!-c!-iP!+g!-u!-x!.Q!.d!2a!2g!2m!3s!3y!4T!5X!5_!5e!5o!5u!5{!6R!6X!6_!6e!6k!6q!6w!6}!7T!7Z!7e!7k!7u!7{PPP!8R!+g!8vP!<XP!=]P!?n!@U!CQ2vPPP!Dn!HY!JwPP!Mb!MeP# n# t##b##q##w#$w#%a#&[#&e#&h#&tP#&w#'TP#'[#'cP#'fP#'oP#'r#'u#'x#'|#(SssObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/a'kqOWX_`bnow!X!Z!^!`!i!p!t!y!{#O#P#U#Y#]#_#f#h#i#m#n#o#p#q#r#s#v#w#x#y#{$R$Y$Z$[$]$^$_$l$p${$|%R%S%X%Y%b%c%f%g%i%k%p&]&b&c&d&e&j&m&n&r&s&u'Q'R'T'Y'Z'e't'}(W(X(h(l(o)T)W)X)Z)`)b)h)s)t)w)|*]*_*a*b*e*h*k*l*q*v+]+o+q+t+w+z+{,O,Q,T,X,^,`,c,t,v-P-T-X-`-f-w.Q.S.T.V.W.d.p.s.v.x/P/S/Y/_/a/p/t/v/w0W0Y0`0j#rgO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`t!dS!P!R!S!l!n$X$v*U*V*W*X,m,o.l.m/g0gQ#^cS%`#P.SQ%s#`U%x#e$T/bQ&P#gW'g$l*l-T.xU'q$o&{*ZQ'r$pS(^%Y/_U(}%z+i/zQ)S&QQ+[(lQ+g)QQ-c*yR-m+]u!dS!P!R!S!l!n$X$v*U*V*W*X,m,o.l.m/g0gT$q!c(T#upO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`#tkO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`X'h$l*l-T.x#}UO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$l$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*l*v,Q,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`#}jO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$l$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*l*v,Q,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`%tZOW_bdnow}!X!Z!^!`!y#O#R#U#]#f#h#i#m#n#o#p#q#r#s#v#w#x#{$S$Y$Z$[$]$^$_$l$p$|%R%c%i%k%p%{&c&d&e&m&n&r'Q'S'T'Y'Z'i't'}(W(X(h(m(o)T)W)a)b)h)t)u)w)|*]*a*b*e*h*l*v+o+{,O,Q,T,X,`,t,v-P-T-`-f.T.V.W.d.p.s.v.x/P/a/v0W0`0jQ%W!{Q([%XV-V*q-Z.y%tZOW_bdnow}!X!Z!^!`!y#O#R#U#]#f#h#i#m#n#o#p#q#r#s#v#w#x#{$S$Y$Z$[$]$^$_$l$p$|%R%c%i%k%p%{&c&d&e&m&n&r'Q'S'T'Y'Z'i't'}(W(X(h(m(o)T)W)a)b)h)t)u)w)|*]*a*b*e*h*l*v+o+{,O,Q,T,X,`,t,v-P-T-`-f.T.V.W.d.p.s.v.x/P/a/v0W0`0jV-V*q-Z.y%t[OW_bdnow}!X!Z!^!`!y#O#R#U#]#f#h#i#m#n#o#p#q#r#s#v#w#x#{$S$Y$Z$[$]$^$_$l$p$|%R%c%i%k%p%{&c&d&e&m&n&r'Q'S'T'Y'Z'i't'}(W(X(h(m(o)T)W)a)b)h)t)u)w)|*]*a*b*e*h*l*v+o+{,O,Q,T,X,`,t,v-P-T-`-f.T.V.W.d.p.s.v.x/P/a/v0W0`0jV-W*q-Z.yS!zZ-VS$S}%{S%z#e$TQ&Q#gQ+i)QQ.[,QR/z/b$eYO_bnow!X!Z!^!`!y#]#f#h#i#m#n#o#p#q#r#s#v#w#{$Y$Z$[$]$^$_$l$p$|%i%k&d&e&n&r'T'Y'Z't'}(W(X(h)T)W)|*]*a*b*e*h*l*v+o,Q,T,X,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`Q%U!yR+R(X%u^OW_bdnow!X!Z!^!`!y#O#R#U#]#f#h#i#m#n#o#p#q#r#s#v#w#x#{$Y$Z$[$]$^$_$l$p$|%R%c%i%k%p&c&d&e&m&n&r'Q'S'T'Y'Z'i't'}(W(X(h(m(o)T)W)a)b)h)t)u)w)|*]*a*b*e*h*l*q*v+o+{,O,Q,T,X,`,t,v-P-T-Z-`-f.T.V.W.d.p.s.v.x.y/P/a/v0W0`0j!o!qX!i!r!t#P#_#y$t${%S%Y%b%f&]'R'e(l)X)`)s*_*k+]+t+w+z,c-X-w.Q.S/S/Y/_/p/t/w0Y#|jO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$l$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*l*v,Q,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`Q$Z!TQ$[!UQ$a!YQ$j!_R*i']Q#jhS&v$R)PQ(|%yQ*Q&wQ+f)OQ,[)oQ-q+hQ.a,]Q/W-rS/c.Y.ZQ/}/dQ0[/{R0a0ZQ&f$OW(s%t&g&h&iQ*P&vU+`(t(u(vQ,Z)oQ,h*QS-n+a+bS.`,[,]Q/V-oR/e.aX)f&c)h,`.drdObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aW#R_#U%c,OQ'S$]W'i$l*l-T.xS(m%p(oW)a&c)h,`.dS)p&j,^S)u&m)wR-Z*qh!vX!V#_#d'R(l)`)s*_+]+w,cQ(R$}Q(_%^R+V(b#rmObnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`v!tX!V#P#_#d$}%^%b%f'R'e(b(l*_*k+]-Y.S.|Q#W_Q$OzQ$P{Q$Q|Q%t#aQ%u#bQ%v#cQ(j%lS)Y&b+qY)d&c)a)h,`.dS)o&j,^Q+p)ZW+t)`)s+w,cQ+|)bQ,])pT.O+z.QU(P$|'}-fR*O&uW)f&c)h,`.dT)v&m)wQ&i$OQ&q$QQ(v%tQ({%vY)b&c)a)h,`.dV)t&m)u)wQ)[&bR-u+qQ+n)YR-t+p#tmO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`Q,P)dS-w+t.OR.R+|T#U_,OU#S_#U,OR(c%cQ,S)eQ-y+vQ-}+yQ/].PR/x/^ruObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aQ$m!aQ&`#wQ'a$jQ'p$nW)f&c)h,`.dQ*s'nQ+})cQ,W)jQ-[*rR-{+xrsObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aS(n%p(oW)f&c)h,`.dT)v&m)wQ&h$OS(u%t&iR+b(vQ&g$OQ&l$PU(t%t&h&iQ(x%uS+a(u(vR-o+bQ)n&eR)y&nQ&p$QS(z%v&qR+e({Q&o$QU(y%v&p&qS+d(z({R-p+eS(n%p(oT)v&m)wrsObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aW)f&c)h,`.dT)v&m)wQ&k$PS(w%u&lR+c(xQ)q&jR.b,^R,b)rQ%q#^R(r%sT(n%p(oQ,R)eS-|+y,SR/[-}R.W,QWj$l*l-T.x#ukO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`#|hO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$l$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*l*v,Q,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`U%y#e$T/bS)O%z/zQ+h)QR-r+iT&t$R&u!]#ml#Q$`$h$k&O&R&S&V&W&X&Y&[&_'s(O){*`*c+k+m,g,x,}-^.o.u/l/o!V#nl#Q$`$h$k&O&R&S&W&[&_'s(O){*`*c+k+m,g,x,}-^.o.u/l/o#umO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`a'u$p't*v-`/P/v0W0`Q'w$pR-d*yQ&y$UQ'y$uR*|'zT*R&x*SsuObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/artObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aQ$e![R$g!]R$^!WruObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aR'T$]R$_!WR'[$aT*d'Z*eX'k$m'l'p*tR*r'mQ-Y*qR.|-ZQ'o$mQ*p'lQ*u'pR-]*tR$n!aQ'j$lV-R*l-T.xQwOQ#]bW#|w#].V/aQ.V,QR/a.WrWObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/al!kW!p#O#Y#x%R%X%g&s'Q)Z+{.T0j!j!pX!i!t#P#_#y${%S%Y%b%f&]'R'e(l)X)`)s*_*k+]+t+w+z,c-X-w.Q.S/S/Y/_/p/t/w0YQ#O_Q#Y`#^#xno!X!^!`#f#h#i#m#n#o#p#q#r#s#w$Y$p$|%i%k&d&e&n&r'T'Y't'}(W(h)T)W)|*a*b*h*v+o,T,X,t,v-P-`-f.p.s.v/P/v0W0`S%R!y(XQ%X!{j%g#U%c%p&c&j&m(o)h)w*q,^,`.dS&s$R&uY'Q$]$l*l-T.xS)Z&b+qS+{)b)tQ.T,OR0j#vQ!fTR$r!fQ(Y%UR+S(Y^!rX#P#y&]'R'e)Xx$t!i#_%S%Y%b%f(l)`)s*_*k+]+w+z,c-X.Q.S/_/p[$z!r$t${/Y/t0YS${!t+tQ/Y-wQ/t/SR0Y/wQ)U&SR+l)UQ)h&cS,U)h.dR.d,`!laO_bw!Z#U#]#{$Z$[$]$^$_$l%c%p&c&j&m'Z(o)h)w*]*e*l*q,O,Q,^,`-T.V.W.d.x/aY!jW#O%g'Q.TT#Za!jQ-g*}R/R-gQ%O!vR(S%OQ%j#VS(g%j/XR/X-sQ+r)[R-v+rQ%d#SR(d%dQ,Y)lR._,YQ)w&mR,d)wQ,_)qR.c,_Q(o%pR+^(oQ&u$RR)}&uQ%m#WR(k%mQ-a*wR/O-aQ*z'wR-e*zQ*S&xR,i*SQ,m*UR.i,mQ/h.jS0P/h0RR0R/jQ*e'ZR,z*eQ'l$mS*o'l*tR*t'pQ.z-XR/q.zQ*m'jR-U*m`vObw#],Q.V.W/aQ$b!ZQ&a#{Q'O$ZQ'P$[Q'V$^Q'W$_S*d'Z*eR,s*]'YrOWX_`bnow!X!Z!^!`!i!p!t!y!{#O#P#U#Y#]#_#f#h#i#m#n#o#p#q#r#s#v#w#x#y#{$R$Y$Z$[$]$^$_$l${$|%R%S%X%Y%b%c%f%g%i%k%p&]&b&c&d&e&j&m&n&r&s&u'Q'R'T'Y'Z'e'}(W(X(h(l(o)T)W)X)Z)`)b)h)s)t)w)|*]*_*a*b*e*h*k*l*q+]+o+q+t+w+z+{,O,Q,T,X,^,`,c,t,v-P-T-X-f-w.Q.S.T.V.W.d.p.s.v.x/S/Y/_/a/p/t/w0Y0ja'v$p't*v-`/P/v0W0`Q!cSQ$U!PQ$V!RQ$W!SQ$u!lQ$w!nQ&}$XQ'z$vQ(T0gS,k*U*WQ,o*VQ,p*XQ.h,mS.j,o.lQ/j.mR0O/g%oROS_bcnow!P!R!S!X!Z!^!`!l!n#P#]#`#e#f#g#h#i#m#n#o#p#q#r#s#w#{$T$X$Y$Z$[$]$^$_$l$o$p$v$|%Y%k%z&Q&r&{'T'Y'Z't'}(h(l)Q)T)W)|*U*V*W*X*Z*]*a*b*e*h*l*v*y+]+i,Q,m,o,t,v-P-T-`-f.S.V.W.l.m.p.s.v.x/P/_/a/b/g/v/z0W0`0gQ'x$pQ*w'tS-_*v/PQ.}-`Q0X/vQ0^0WR0d0`rlObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aS#Q_$YQ#tnQ#zoQ$`!XQ$h!^Q$k!`Q&O#fQ&R#hY&S#i$]*a,v.sQ&U#mQ&V#nQ&W#oQ&X#pQ&Y#qQ&Z#rQ&[#sQ&_#w^'s$p't-`/P/v0W0`U(O$|'}-fQ(i%kQ){&rQ*`'TQ*c'YQ+W(hQ+k)TQ+m)WQ,g)|Q,x*bQ,}*hQ-^*vQ.o,tQ.u-PQ/l.pR/o.v#rfO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`W'f$l*l-T.xR.X,QrXObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aW!iW#x%R'QQ#P_Q#_d!|#yno!X!^!`#f#h#i#m#n#o#p#q#r#s#w$Y$p$|%k&r'T'Y't'}(h)T)W)|*a*b*h*v,t,v-P-`-f.p.s.v/P/v0W0`d%S!y%i&d&e&n(W(X+o,T,XQ%Y#OQ%b#RS%f#U%cQ&]#vQ'R$]W'e$l*l-T.xS(l%p(oQ)X0jW)`&c)h,`.dS)s&m)wQ*_'SQ*k'iQ+](mQ+w)aS+z)b)tQ,c)uS-X*q-ZQ.Q+{Q.S,OQ/_.TR/p.y%t^OW_bdnow!X!Z!^!`!y#O#R#U#]#f#h#i#m#n#o#p#q#r#s#v#w#x#{$Y$Z$[$]$^$_$l$p$|%R%c%i%k%p&c&d&e&m&n&r'Q'S'T'Y'Z'i't'}(W(X(h(m(o)T)W)a)b)h)t)u)w)|*]*a*b*e*h*l*q*v+o+{,O,Q,T,X,`,t,v-P-T-Z-`-f.T.V.W.d.p.s.v.x.y/P/a/v0W0`0jQ$R}Q&w$SR)P%{&PVOW_bdnow}!X!Z!^!`!y!{#O#R#U#]#f#h#i#m#n#o#p#q#r#s#v#w#x#{$S$Y$Z$[$]$^$_$l$p$|%R%X%c%i%k%p%{&c&d&e&m&n&r'Q'S'T'Y'Z'i't'}(W(X(h(m(o)T)W)a)b)h)t)u)w)|*]*a*b*e*h*l*q*v+o+{,O,Q,T,X,`,t,v-P-T-Z-`-f.T.V.W.d.p.s.v.x.y/P/a/v0W0`0jR%V!y#ziObnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$l$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*l*v,Q,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`Q#V_Q%U!yQ&^#vQ(f%iQ)k&dU)l&e&n,TQ+Q(WQ+R(XQ-s+oR.^,XQ(V%TR+P(U#|eO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$l$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*l*v,Q,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`T%w#e/bQ&T#iQ'U$]Q,w*aQ.q,vR/n.sX)g&c)h,`.d!{`OW_abw!Z!j#O#U#]#{$Z$[$]$^$_$l%c%g%p&c&j&m'Q'Z(o)h)w*]*e*l*q,O,Q,^,`-T.T.V.W.d.x/aU!wX!V'RU%r#_#d*_S+Z(l)sQ+u)`S-l+],cR-z+wj!uX!V#_#d$}%^(b(l)`)s+]+w,cU%]#P%f.SQ(a%bQ*^'RQ*j'eQ,u*_Q-Q*kQ.{-YR/s.|Q(Q$|Q*}'}R/Q-fR+O'}[)c&c&m)h)w,`.dT+x)a)uR)]&bW+v)`)s+w,cQ.P+zR/^.QS#T_,OR%h#US)m&e&nR.],TR)r&jW)e&c)h,`.dR+y)aR#X_R*x'tR'x$pT,l*U,mQ.k,oR/i.lR/i.m",nodeNames:"\u26a0 LineComment BlockComment Program ModuleDeclaration MarkerAnnotation Identifier ScopedIdentifier . Annotation ) ( AnnotationArgumentList AssignmentExpression FieldAccess IntegerLiteral FloatingPointLiteral BooleanLiteral CharacterLiteral StringLiteral TextBlock null ClassLiteral void PrimitiveType TypeName ScopedTypeName GenericType TypeArguments AnnotatedType Wildcard extends super , ArrayType ] Dimension [ class this ParenthesizedExpression ObjectCreationExpression new ArgumentList } { ClassBody ; FieldDeclaration Modifiers public protected private abstract static final strictfp default synchronized native transient volatile VariableDeclarator Definition AssignOp ArrayInitializer MethodDeclaration TypeParameters TypeParameter TypeBound FormalParameters ReceiverParameter FormalParameter SpreadParameter Throws throws Block ClassDeclaration Superclass SuperInterfaces implements InterfaceTypeList InterfaceDeclaration interface ExtendsInterfaces InterfaceBody ConstantDeclaration EnumDeclaration enum EnumBody EnumConstant EnumBodyDeclarations AnnotationTypeDeclaration AnnotationTypeBody AnnotationTypeElementDeclaration StaticInitializer ConstructorDeclaration ConstructorBody ExplicitConstructorInvocation ArrayAccess MethodInvocation MethodName MethodReference ArrayCreationExpression Dimension AssignOp BinaryExpression CompareOp CompareOp LogicOp BitOp BitOp LogicOp ArithOp ArithOp ArithOp BitOp InstanceofExpression instanceof LambdaExpression InferredParameters TernaryExpression LogicOp : UpdateExpression UpdateOp UnaryExpression LogicOp BitOp CastExpression ElementValueArrayInitializer ElementValuePair open module ModuleBody ModuleDirective requires transitive exports to opens uses provides with PackageDeclaration package ImportDeclaration import Asterisk ExpressionStatement LabeledStatement Label IfStatement if else WhileStatement while ForStatement for ForSpec LocalVariableDeclaration var EnhancedForStatement ForSpec AssertStatement assert SwitchStatement switch SwitchBlock SwitchLabel case DoStatement do BreakStatement break ContinueStatement continue ReturnStatement return SynchronizedStatement ThrowStatement throw TryStatement try CatchClause catch CatchFormalParameter CatchType FinallyClause finally TryWithResourcesStatement ResourceSpecification Resource",maxTerm:274,nodeProps:[["group",-26,4,47,76,77,82,87,92,144,146,149,150,152,155,157,160,162,164,166,171,173,175,177,179,180,182,190,"Statement",-25,6,13,14,15,16,17,18,19,20,21,22,39,40,41,99,100,102,103,106,117,119,121,124,126,129,"Expression",-7,23,24,25,26,27,29,34,"Type"],["openedBy",10,"(",44,"{"],["closedBy",11,")",45,"}"]],propSources:[Fg],skippedNodes:[0,1,2],repeatNodeCount:28,tokenData:"#$`_R!_OX%QXY'fYZ)bZ^'f^p%Qpq'fqr*|rs,^st%Qtu4euv5qvw7Rwx8ixy@zyzAhz{BU{|Bz|}Db}!OEO!O!PFi!P!Q! c!Q!R!,X!R![!0P![!]!>a!]!^!?q!^!_!@_!_!`!Ax!`!a!Bl!a!b!DY!b!c!Dx!c!}!Kt!}#O!MQ#O#P%Q#P#Q!Mn#Q#R!N[#R#S4e#S#T%Q#T#o4e#o#p# O#p#q# l#q#r##U#r#s##r#s#y%Q#y#z'f#z$f%Q$f$g'f$g#BY%Q#BY#BZ'f#BZ$IS%Q$IS$I_'f$I_$I|%Q$I|$JO'f$JO$JT%Q$JT$JU'f$JU$KV%Q$KV$KW'f$KW&FU%Q&FU&FV'f&FV;'S%Q;'S;=`&s<%lO%QS%VV&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QS%qO&WSS%tVOY&ZYZ%lZr&Zrs&ys;'S&Z;'S;=`'`<%lO&ZS&^VOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QS&vP;=`<%l%QS&|UOY&ZYZ%lZr&Zs;'S&Z;'S;=`'`<%lO&ZS'cP;=`<%l&Z_'mk&WS%wZOX%QXY'fYZ)bZ^'f^p%Qpq'fqr%Qrs%qs#y%Q#y#z'f#z$f%Q$f$g'f$g#BY%Q#BY#BZ'f#BZ$IS%Q$IS$I_'f$I_$I|%Q$I|$JO'f$JO$JT%Q$JT$JU'f$JU$KV%Q$KV$KW'f$KW&FU%Q&FU&FV'f&FV;'S%Q;'S;=`&s<%lO%Q_)iY&WS%wZX^*Xpq*X#y#z*X$f$g*X#BY#BZ*X$IS$I_*X$I|$JO*X$JT$JU*X$KV$KW*X&FU&FV*XZ*^Y%wZX^*Xpq*X#y#z*X$f$g*X#BY#BZ*X$IS$I_*X$I|$JO*X$JT$JU*X$KV$KW*X&FU&FV*XV+TX#sP&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`+p!`;'S%Q;'S;=`&s<%lO%QU+wV#_Q&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT,aXOY,|YZ%lZr,|rs3Ys#O,|#O#P2d#P;'S,|;'S;=`3S<%lO,|T-PXOY-lYZ%lZr-lrs.^s#O-l#O#P.x#P;'S-l;'S;=`2|<%lO-lT-qX&WSOY-lYZ%lZr-lrs.^s#O-l#O#P.x#P;'S-l;'S;=`2|<%lO-lT.cVcPOY&ZYZ%lZr&Zrs&ys;'S&Z;'S;=`'`<%lO&ZT.}V&WSOY-lYZ/dZr-lrs1]s;'S-l;'S;=`2|<%lO-lT/iW&WSOY0RZr0Rrs0ns#O0R#O#P0s#P;'S0R;'S;=`1V<%lO0RP0UWOY0RZr0Rrs0ns#O0R#O#P0s#P;'S0R;'S;=`1V<%lO0RP0sOcPP0vTOY0RYZ0RZ;'S0R;'S;=`1V<%lO0RP1YP;=`<%l0RT1`XOY,|YZ%lZr,|rs1{s#O,|#O#P2d#P;'S,|;'S;=`3S<%lO,|T2QUcPOY&ZYZ%lZr&Zs;'S&Z;'S;=`'`<%lO&ZT2gVOY-lYZ/dZr-lrs1]s;'S-l;'S;=`2|<%lO-lT3PP;=`<%l-lT3VP;=`<%l,|T3_VcPOY&ZYZ%lZr&Zrs3ts;'S&Z;'S;=`'`<%lO&ZT3yR&USXY4SYZ4`pq4SP4VRXY4SYZ4`pq4SP4eO&VP_4la%}Z&WSOY%QYZ%lZr%Qrs%qst%Qtu4eu!Q%Q!Q![4e![!c%Q!c!}4e!}#R%Q#R#S4e#S#T%Q#T#o4e#o;'S%Q;'S;=`&s<%lO%QU5xX#gQ&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QU6lV#]Q&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QV7YZ&lR&WSOY%QYZ%lZr%Qrs%qsv%Qvw7{w!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QU8SV#aQ&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT8nZ&WSOY9aYZ%lZr9ars:Xsw9awx%Qx#O9a#O#P<a#P;'S9a;'S;=`>t<%lO9aT9fZ&WSOY9aYZ%lZr9ars:Xsw9awx;sx#O9a#O#P<a#P;'S9a;'S;=`>t<%lO9aT:[ZOY:}YZ%lZr:}rs>zsw:}wx?px#O:}#O#P@[#P;'S:};'S;=`@t<%lO:}T;QZOY9aYZ%lZr9ars:Xsw9awx;sx#O9a#O#P<a#P;'S9a;'S;=`>t<%lO9aT;zVbP&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT<fV&WSOY9aYZ<{Zr9ars:Xs;'S9a;'S;=`>t<%lO9aT=QW&WSOY=jZw=jwx>Vx#O=j#O#P>[#P;'S=j;'S;=`>n<%lO=jP=mWOY=jZw=jwx>Vx#O=j#O#P>[#P;'S=j;'S;=`>n<%lO=jP>[ObPP>_TOY=jYZ=jZ;'S=j;'S;=`>n<%lO=jP>qP;=`<%l=jT>wP;=`<%l9aT>}ZOY:}YZ%lZr:}rs=jsw:}wx?px#O:}#O#P@[#P;'S:};'S;=`@t<%lO:}T?uVbPOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT@_VOY9aYZ<{Zr9ars:Xs;'S9a;'S;=`>t<%lO9aT@wP;=`<%l:}_ARVZZ&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QVAoVYR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QVB_X$YP&WS#fQOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QVCRZ#eR&WSOY%QYZ%lZr%Qrs%qs{%Q{|Ct|!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QVC{V#qR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QVDiVqR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QVEV[#eR&WSOY%QYZ%lZr%Qrs%qs}%Q}!OCt!O!_%Q!_!`6e!`!aE{!a;'S%Q;'S;=`&s<%lO%QVFSV&vR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_FpZWY&WSOY%QYZ%lZr%Qrs%qs!O%Q!O!PGc!P!Q%Q!Q![Hq![;'S%Q;'S;=`&s<%lO%QVGhX&WSOY%QYZ%lZr%Qrs%qs!O%Q!O!PHT!P;'S%Q;'S;=`&s<%lO%QVH[V&oR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QTHxc&WS`POY%QYZ%lZr%Qrs%qs!Q%Q!Q![Hq![!f%Q!f!gJT!g!hJq!h!iJT!i#R%Q#R#SNk#S#W%Q#W#XJT#X#YJq#Y#ZJT#Z;'S%Q;'S;=`&s<%lO%QTJ[V&WS`POY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QTJv]&WSOY%QYZ%lZr%Qrs%qs{%Q{|Ko|}%Q}!OKo!O!Q%Q!Q![La![;'S%Q;'S;=`&s<%lO%QTKtX&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![La![;'S%Q;'S;=`&s<%lO%QTLhc&WS`POY%QYZ%lZr%Qrs%qs!Q%Q!Q![La![!f%Q!f!gJT!g!h%Q!h!iJT!i#R%Q#R#SMs#S#W%Q#W#XJT#X#Y%Q#Y#ZJT#Z;'S%Q;'S;=`&s<%lO%QTMxZ&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![La![#R%Q#R#SMs#S;'S%Q;'S;=`&s<%lO%QTNpZ&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![Hq![#R%Q#R#SNk#S;'S%Q;'S;=`&s<%lO%Q_! j]&WS#fQOY%QYZ%lZr%Qrs%qsz%Qz{!!c{!P%Q!P!Q!)U!Q!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%Q_!!hX&WSOY!!cYZ!#TZr!!crs!$psz!!cz{!&O{;'S!!c;'S;=`!'d<%lO!!c_!#YT&WSOz!#iz{!#{{;'S!#i;'S;=`!$j<%lO!#iZ!#lTOz!#iz{!#{{;'S!#i;'S;=`!$j<%lO!#iZ!$OVOz!#iz{!#{{!P!#i!P!Q!$e!Q;'S!#i;'S;=`!$j<%lO!#iZ!$jOQZZ!$mP;=`<%l!#i_!$sXOY!%`YZ!#TZr!%`rs!'jsz!%`z{!(Y{;'S!%`;'S;=`!)O<%lO!%`_!%cXOY!!cYZ!#TZr!!crs!$psz!!cz{!&O{;'S!!c;'S;=`!'d<%lO!!c_!&TZ&WSOY!!cYZ!#TZr!!crs!$psz!!cz{!&O{!P!!c!P!Q!&v!Q;'S!!c;'S;=`!'d<%lO!!c_!&}V&WSQZOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_!'gP;=`<%l!!c_!'mXOY!%`YZ!#TZr!%`rs!#isz!%`z{!(Y{;'S!%`;'S;=`!)O<%lO!%`_!(]ZOY!!cYZ!#TZr!!crs!$psz!!cz{!&O{!P!!c!P!Q!&v!Q;'S!!c;'S;=`!'d<%lO!!c_!)RP;=`<%l!%`_!)]V&WSPZOY!)UYZ%lZr!)Urs!)rs;'S!)U;'S;=`!*x<%lO!)U_!)wVPZOY!*^YZ%lZr!*^rs!+Os;'S!*^;'S;=`!,R<%lO!*^_!*cVPZOY!)UYZ%lZr!)Urs!)rs;'S!)U;'S;=`!*x<%lO!)U_!*{P;=`<%l!)U_!+TVPZOY!*^YZ%lZr!*^rs!+js;'S!*^;'S;=`!,R<%lO!*^Z!+oSPZOY!+jZ;'S!+j;'S;=`!+{<%lO!+jZ!,OP;=`<%l!+j_!,UP;=`<%l!*^T!,`u&WS_POY%QYZ%lZr%Qrs%qs!O%Q!O!P!.s!P!Q%Q!Q![!0P![!d%Q!d!e!3Z!e!f%Q!f!gJT!g!hJq!h!iJT!i!n%Q!n!o!1u!o!q%Q!q!r!5X!r!z%Q!z!{!7P!{#R%Q#R#S!2c#S#U%Q#U#V!3Z#V#W%Q#W#XJT#X#YJq#Y#ZJT#Z#`%Q#`#a!1u#a#c%Q#c#d!5X#d#l%Q#l#m!7P#m;'S%Q;'S;=`&s<%lO%QT!.za&WS`POY%QYZ%lZr%Qrs%qs!Q%Q!Q![Hq![!f%Q!f!gJT!g!hJq!h!iJT!i#W%Q#W#XJT#X#YJq#Y#ZJT#Z;'S%Q;'S;=`&s<%lO%QT!0Wi&WS_POY%QYZ%lZr%Qrs%qs!O%Q!O!P!.s!P!Q%Q!Q![!0P![!f%Q!f!gJT!g!hJq!h!iJT!i!n%Q!n!o!1u!o#R%Q#R#S!2c#S#W%Q#W#XJT#X#YJq#Y#ZJT#Z#`%Q#`#a!1u#a;'S%Q;'S;=`&s<%lO%QT!1|V&WS_POY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT!2hZ&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!0P![#R%Q#R#S!2c#S;'S%Q;'S;=`&s<%lO%QT!3`Y&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q!R!4O!R!S!4O!S;'S%Q;'S;=`&s<%lO%QT!4V`&WS_POY%QYZ%lZr%Qrs%qs!Q%Q!Q!R!4O!R!S!4O!S!n%Q!n!o!1u!o#R%Q#R#S!3Z#S#`%Q#`#a!1u#a;'S%Q;'S;=`&s<%lO%QT!5^X&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q!Y!5y!Y;'S%Q;'S;=`&s<%lO%QT!6Q_&WS_POY%QYZ%lZr%Qrs%qs!Q%Q!Q!Y!5y!Y!n%Q!n!o!1u!o#R%Q#R#S!5X#S#`%Q#`#a!1u#a;'S%Q;'S;=`&s<%lO%QT!7U_&WSOY%QYZ%lZr%Qrs%qs!O%Q!O!P!8T!P!Q%Q!Q![!:c![!c%Q!c!i!:c!i#T%Q#T#Z!:c#Z;'S%Q;'S;=`&s<%lO%QT!8Y]&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!9R![!c%Q!c!i!9R!i#T%Q#T#Z!9R#Z;'S%Q;'S;=`&s<%lO%QT!9Wc&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!9R![!c%Q!c!i!9R!i!r%Q!r!sJq!s#R%Q#R#S!8T#S#T%Q#T#Z!9R#Z#d%Q#d#eJq#e;'S%Q;'S;=`&s<%lO%QT!:ji&WS_POY%QYZ%lZr%Qrs%qs!O%Q!O!P!<X!P!Q%Q!Q![!:c![!c%Q!c!i!:c!i!n%Q!n!o!1u!o!r%Q!r!sJq!s#R%Q#R#S!=c#S#T%Q#T#Z!:c#Z#`%Q#`#a!1u#a#d%Q#d#eJq#e;'S%Q;'S;=`&s<%lO%QT!<^a&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!9R![!c%Q!c!i!9R!i!r%Q!r!sJq!s#T%Q#T#Z!9R#Z#d%Q#d#eJq#e;'S%Q;'S;=`&s<%lO%QT!=h]&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!:c![!c%Q!c!i!:c!i#T%Q#T#Z!:c#Z;'S%Q;'S;=`&s<%lO%QV!>hX#oR&WSOY%QYZ%lZr%Qrs%qs![%Q![!]!?T!];'S%Q;'S;=`&s<%lO%QV!?[V&tR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QV!?xV!PR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_!@fY&]Z&WSOY%QYZ%lZr%Qrs%qs!^%Q!^!_!AU!_!`+p!`;'S%Q;'S;=`&s<%lO%QU!A]X#hQ&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QV!BPX!bR&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`+p!`;'S%Q;'S;=`&s<%lO%QV!BsY&[R&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`+p!`!a!Cc!a;'S%Q;'S;=`&s<%lO%QU!CjY#hQ&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`!a!AU!a;'S%Q;'S;=`&s<%lO%Q_!DcV&`X#nQ&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_!EPX%{Z&WSOY%QYZ%lZr%Qrs%qs#]%Q#]#^!El#^;'S%Q;'S;=`&s<%lO%QV!EqX&WSOY%QYZ%lZr%Qrs%qs#b%Q#b#c!F^#c;'S%Q;'S;=`&s<%lO%QV!FcX&WSOY%QYZ%lZr%Qrs%qs#h%Q#h#i!GO#i;'S%Q;'S;=`&s<%lO%QV!GTX&WSOY%QYZ%lZr%Qrs%qs#X%Q#X#Y!Gp#Y;'S%Q;'S;=`&s<%lO%QV!GuX&WSOY%QYZ%lZr%Qrs%qs#f%Q#f#g!Hb#g;'S%Q;'S;=`&s<%lO%QV!HgX&WSOY%QYZ%lZr%Qrs%qs#Y%Q#Y#Z!IS#Z;'S%Q;'S;=`&s<%lO%QV!IXX&WSOY%QYZ%lZr%Qrs%qs#T%Q#T#U!It#U;'S%Q;'S;=`&s<%lO%QV!IyX&WSOY%QYZ%lZr%Qrs%qs#V%Q#V#W!Jf#W;'S%Q;'S;=`&s<%lO%QV!JkX&WSOY%QYZ%lZr%Qrs%qs#X%Q#X#Y!KW#Y;'S%Q;'S;=`&s<%lO%QV!K_V&rR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_!K{a&PZ&WSOY%QYZ%lZr%Qrs%qst%Qtu!Ktu!Q%Q!Q![!Kt![!c%Q!c!}!Kt!}#R%Q#R#S!Kt#S#T%Q#T#o!Kt#o;'S%Q;'S;=`&s<%lO%Q_!MXVuZ&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QV!MuVsR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QU!NcX#cQ&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QV# VV}R&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_# uZ&|X#cQ&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`#p%Q#p#q#!h#q;'S%Q;'S;=`&s<%lO%QU#!oV#dQ&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QV##]V|R&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT##yV#tP&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q",tokenizers:[0,1,2,3],topRules:{Program:[0,3]},dynamicPrecedences:{27:1,230:-1,241:-1},specialized:[{term:229,get:t=>Ng[t]||-1}],tokenPrec:7067}),Eg=hd.define({name:"java",parser:Lg.configure({props:[Md.add({IfStatement:jd({except:/^\s*({|else\b)/}),TryStatement:jd({except:/^\s*({|catch|finally)\b/}),LabeledStatement:t=>t.baseIndent,SwitchBlock:t=>{let e=t.textAfter,i=/^\s*\}/.test(e),o=/^\s*(case|default)\b/.test(e);return t.baseIndent+(i?0:o?1:2)*t.unit},Block:Ld({closing:"}"}),BlockComment:()=>null,Statement:jd({except:/^{/})}),Rd.add({"Block SwitchBlock ClassBody ElementValueArrayInitializer ModuleBody EnumBody ConstructorBody InterfaceBody ArrayInitializer":function(t){let e=t.firstChild,i=t.lastChild;return e&&e.to<i.from?{from:e.to,to:i.type.isError?t.to:i.from}:null},BlockComment:t=>({from:t.from+2,to:t.to-2})})]}),languageData:{commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\})$/}});function jg(){return new Dd(Eg)}var Zg;const Rg=Sl(((t,e,i)=>{let{from:o,to:a,text:s}=t.state.doc.lineAt(e),n=e,r=e;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===e&&i<0||r===e&&i>0)return null;let l=Qg(t.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(t){let e=document.createElement("div");e.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",e.appendChild(i),e.appendChild(o)),e.appendChild(a),{dom:e}}}:void 0})),Qg=t=>{for(let e=0;e<Zg.length;e++){let i=Zg[e];if(i.value===t||i.value===t+"()")return i}};class zg extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.getListMethodChild=(t,e)=>{let i=[];for(let o=0;o<t.length;o++){let a={title:t[o].caption,value:t[o].code_id,selected:"AF"!==e||0===o,data:[]};"AF"===e&&0===o&&this.setState({module_code:t[o].code_id});for(let e=0;e<this.evaluation.length;e++)this.evaluation[e].type===t[o].code_id&&a.data.push(this.evaluation[e]);i.push(a)}return i},this.handleChooseMethod=t=>{let e=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=t.method;this.setState({value_code:i+a+o,last_pos:e+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:e+(-1!==a.indexOf("()")?a.length-1:a.length),head:e+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),1)}))},this.abs_OpenMethodSystem=t=>{let{all_method_data:e}=this.state;for(let i=0;i<e.support_method.length;i++)e.support_method[i].selected=e.support_method[i].value===t.value;this.setState({all_method_data:e})},this.abs_OpenMethod=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)if(i[t][o].value===e.value){i[t][o].selected=!i[t][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)i[t][o].selected=i[t][o].value===e;this.setState({all_method_data:i,module_code:e})},this.abs_Change=t=>{this.setState({data_code:t})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onChange=t=>{this.setState({value_code:t})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluation",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(Zg=t.items.map(((t,e)=>({title:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],value:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],caption:t.caption,example:t.example,method:t.item,type:t.type}))),this.evaluation=JSON.parse(JSON.stringify(Zg)),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else{this.all_method_data.support_method=t.items.map(((t,e)=>({title:t.caption,value:t.code_id,selected:"AF"===t.code_id,mode:"AF"===t.code_id})));for(let e=0;e<t.items.length;e++)await this.callAPI("get_list_method_child",{code_name:t.items[e].code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map(((t,e)=>({title:t.caption,value:t.code_id})));this.list_parent_tree=this.list_parent_tree.concat(o),this.all_method_data[t.items[e].code_id]=this.getListMethodChild(i.items,t.items[e].code_id)}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}));this.setState({all_method_data:this.all_method_data,list_parent_tree:this.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1)}))}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{let t;switch(this.state.module_code){case"DE":t="DPT";break;case"CE":t="CRD"}await this.callAPI("test_method",{module_code:t,expression:this.state.value_code,number_of_step:1}).then((t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),e.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}}}})}render(){const t=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(t,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:"dark",extensions:[jg(),Rg],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const Ug=zg;var Bg;const Yg=Sl(((t,e,i)=>{let{from:o,to:a,text:s}=t.state.doc.lineAt(e),n=e,r=e;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===e&&i<0||r===e&&i>0)return null;let l=Hg(t.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(t){let e=document.createElement("div");e.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",e.appendChild(i),e.appendChild(o)),e.appendChild(a),{dom:e}}}:void 0})),Hg=t=>{for(let e=0;e<Bg.length;e++){let i=Bg[e];if(i.value===t||i.value===t+"()")return i}};class Vg extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callGetListMetodChild=async t=>{let e={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(t.map((async t=>{await this.callAPI("get_list_method_child",{code_index_from:"AF"===t.code_id?1:null,code_index_to:"AF"===t.code_id?1:null,code_name:t.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((t=>({title:t.caption,value:t.code_id})));e.list_parent_tree=e.list_parent_tree.concat(o),e.all_method_data[t.code_id]=this.getListMethodChild(i.items,t.code_id)}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}))),new Promise((t=>{t(e)}))},this.getListMethodChild=(t,e)=>{let i=[];for(let o=0;o<t.length;o++){let a={title:t[o].caption,value:t[o].code_id,selected:"AF"!==e||0===o,data:[]};"AF"===e&&0===o&&this.setState({module_code:t[o].code_id});for(let e=0;e<this.evaluation.length;e++)this.evaluation[e].type===t[o].code_id&&a.data.push(this.evaluation[e]);i.push(a)}return i},this.handleChooseMethod=t=>{let e=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=t.method;this.setState({value_code:i+a+o,last_pos:e+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:e+(-1!==a.indexOf("()")?a.length-1:a.length),head:e+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=t=>{let{all_method_data:e}=this.state;for(let i=0;i<e.support_method.length;i++)e.support_method[i].selected=e.support_method[i].value===t.value;this.setState({all_method_data:e})},this.abs_OpenMethod=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)if(i[t][o].value===e.value){i[t][o].selected=!i[t][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)i[t][o].selected=i[t][o].value===e;this.setState({all_method_data:i,module_code:e})},this.abs_Change=t=>{this.setState({data_code:t})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onChange=t=>{this.setState({value_code:t})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluation",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"DPT_IFC_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(Bg=t.items.map(((t,e)=>({title:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],value:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],caption:t.caption,example:t.example,method:t.item,type:t.type}))),this.evaluation=JSON.parse(JSON.stringify(Bg)))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(this.all_method_data.support_method=t.items.map(((t,e)=>({title:t.caption,value:t.code_id,selected:"AF"===t.code_id,mode:"AF"===t.code_id}))),this.callGetListMetodChild(t.items).then((t=>{this.setState({all_method_data:t.all_method_data,list_parent_tree:t.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{let t;switch(this.state.module_code){case"DE":t="DPT";break;case"CE":t="CRD"}await this.callAPI("test_method",{workflow_id:"DPT_IFC_EXPRESSION_TEST",module_code:t,expression:this.state.value_code,number_of_step:1}).then((t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),e.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}}}})}render(){const t=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(t,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:"dark",extensions:[jg(),Yg],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const Wg=Vg;var Gg;const Jg=Sl(((t,e,i)=>{let{from:o,to:a,text:s}=t.state.doc.lineAt(e),n=e,r=e;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===e&&i<0||r===e&&i>0)return null;let l=qg(t.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(t){let e=document.createElement("div");e.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",e.appendChild(i),e.appendChild(o)),e.appendChild(a),{dom:e}}}:void 0})),qg=t=>{for(let e=0;e<Gg.length;e++){let i=Gg[e];if(i.value===t||i.value===t+"()")return i}};class Kg extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callGetListMetodChild=async t=>{let e={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(t.map((async t=>{await this.callAPI("get_list_method_child",{code_index_from:"AF"===t.code_id?6:null,code_index_to:"AF"===t.code_id?6:null,code_name:t.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((t=>({title:t.caption,value:t.code_id})));e.list_parent_tree=e.list_parent_tree.concat(o),e.all_method_data[t.code_id]=this.getListMethodChild(i.items,t.code_id)}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}))),new Promise((t=>{t(e)}))},this.getListMethodChild=(t,e)=>{let i=[];for(let o=0;o<t.length;o++){let a={title:t[o].caption,value:t[o].code_id,selected:"AF"!==e||0===o,data:[]};"AF"===e&&0===o&&this.setState({module_code:t[o].code_id});for(let e=0;e<this.evaluation.length;e++)this.evaluation[e].type===t[o].code_id&&a.data.push(this.evaluation[e]);i.push(a)}return i},this.handleChooseMethod=t=>{let e=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=t.method;this.setState({value_code:i+a+o,last_pos:e+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:e+(-1!==a.indexOf("()")?a.length-1:a.length),head:e+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=t=>{let{all_method_data:e}=this.state;for(let i=0;i<e.support_method.length;i++)e.support_method[i].selected=e.support_method[i].value===t.value;this.setState({all_method_data:e})},this.abs_OpenMethod=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)if(i[t][o].value===e.value){i[t][o].selected=!i[t][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)i[t][o].selected=i[t][o].value===e;this.setState({all_method_data:i,module_code:e})},this.abs_Change=t=>{this.setState({data_code:t})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onChange=t=>{this.setState({value_code:t})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluation",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"TRD_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(Gg=t.items.map(((t,e)=>({title:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],value:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],caption:t.caption,example:t.example,method:t.item,type:t.type}))),this.evaluation=JSON.parse(JSON.stringify(Gg)))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(this.all_method_data.support_method=t.items.map(((t,e)=>({title:t.caption,value:t.code_id,selected:"AF"===t.code_id,mode:"AF"===t.code_id}))),this.callGetListMetodChild(t.items).then((t=>{this.setState({all_method_data:t.all_method_data,list_parent_tree:t.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{let t;switch(this.state.module_code){case"DE":t="DPT";break;case"CE":t="CRD"}await this.callAPI("test_method",{workflow_id:"TRD_EXPRESSION_TEST",module_code:t,expression:this.state.value_code,number_of_step:1}).then((t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),e.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}}}})}render(){const t=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(t,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:"dark",extensions:[jg(),Jg],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const Xg=Kg;var $g;const tm=Sl(((t,e,i)=>{let{from:o,to:a,text:s}=t.state.doc.lineAt(e),n=e,r=e;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===e&&i<0||r===e&&i>0)return null;let l=em(t.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(t){let e=document.createElement("div");e.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",e.appendChild(i),e.appendChild(o)),e.appendChild(a),{dom:e}}}:void 0})),em=t=>{for(let e=0;e<$g.length;e++){let i=$g[e];if(i.value===t||i.value===t+"()")return i}};class im extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callGetListMetodChild=async t=>{let e={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(t.map((async t=>{await this.callAPI("get_list_method_child",{code_index_from:"AF"===t.code_id?7:null,code_index_to:"AF"===t.code_id?7:null,code_name:t.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((t=>({title:t.caption,value:t.code_id})));e.list_parent_tree=e.list_parent_tree.concat(o),e.all_method_data[t.code_id]=this.getListMethodChild(i.items,t.code_id)}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}))),new Promise((t=>{t(e)}))},this.getListMethodChild=(t,e)=>{let i=[];for(let o=0;o<t.length;o++){let a={title:t[o].caption,value:t[o].code_id,selected:"AF"!==e||0===o,data:[]};"AF"===e&&0===o&&this.setState({module_code:t[o].code_id});for(let e=0;e<this.evaluation.length;e++)this.evaluation[e].type===t[o].code_id&&a.data.push(this.evaluation[e]);i.push(a)}return i},this.handleChooseMethod=t=>{let e=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=t.method;this.setState({value_code:i+a+o,last_pos:e+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:e+(-1!==a.indexOf("()")?a.length-1:a.length),head:e+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=t=>{let{all_method_data:e}=this.state;for(let i=0;i<e.support_method.length;i++)e.support_method[i].selected=e.support_method[i].value===t.value;this.setState({all_method_data:e})},this.abs_OpenMethod=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)if(i[t][o].value===e.value){i[t][o].selected=!i[t][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)i[t][o].selected=i[t][o].value===e;this.setState({all_method_data:i,module_code:e})},this.abs_Change=t=>{this.setState({data_code:t})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onChange=t=>{this.setState({value_code:t})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluation",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"TRS_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):($g=t.items.map(((t,e)=>({title:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],value:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],caption:t.caption,example:t.example,method:t.item,type:t.type}))),this.evaluation=JSON.parse(JSON.stringify($g)))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(this.all_method_data.support_method=t.items.map(((t,e)=>({title:t.caption,value:t.code_id,selected:"AF"===t.code_id,mode:"AF"===t.code_id}))),this.callGetListMetodChild(t.items).then((t=>{this.setState({all_method_data:t.all_method_data,list_parent_tree:t.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{let t;switch(this.state.module_code){case"DE":t="DPT";break;case"CE":t="CRD"}await this.callAPI("test_method",{workflow_id:"TRS_EXPRESSION_TEST",module_code:t,expression:this.state.value_code,number_of_step:1}).then((t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),e.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}}}})}render(){const t=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(t,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:"dark",extensions:[jg(),tm],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const om=im;var am;const sm=Sl(((t,e,i)=>{let{from:o,to:a,text:s}=t.state.doc.lineAt(e),n=e,r=e;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===e&&i<0||r===e&&i>0)return null;let l=nm(t.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(t){let e=document.createElement("div");e.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",e.appendChild(i),e.appendChild(o)),e.appendChild(a),{dom:e}}}:void 0})),nm=t=>{for(let e=0;e<am.length;e++){let i=am[e];if(i.value===t||i.value===t+"()")return i}};class rm extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callGetListMetodChild=async t=>{let e={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(t.map((async t=>{await this.callAPI("get_list_method_child",{code_index_from:"AF"===t.code_id?2:null,code_index_to:"AF"===t.code_id?2:null,code_name:t.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((t=>({title:t.caption,value:t.code_id})));e.list_parent_tree=e.list_parent_tree.concat(o),e.all_method_data[t.code_id]=this.getListMethodChild(i.items,t.code_id)}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}))),new Promise((t=>{t(e)}))},this.getListMethodChild=(t,e)=>{let i=[];for(let o=0;o<t.length;o++){let a={title:t[o].caption,value:t[o].code_id,selected:"AF"!==e||0===o,data:[]};"AF"===e&&0===o&&this.setState({module_code:t[o].code_id});for(let e=0;e<this.evaluation.length;e++)this.evaluation[e].type===t[o].code_id&&a.data.push(this.evaluation[e]);i.push(a)}return i},this.handleChooseMethod=t=>{let e=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=t.method;this.setState({value_code:i+a+o,last_pos:e+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:e+(-1!==a.indexOf("()")?a.length-1:a.length),head:e+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=t=>{let{all_method_data:e}=this.state;for(let i=0;i<e.support_method.length;i++)e.support_method[i].selected=e.support_method[i].value===t.value;this.setState({all_method_data:e})},this.abs_OpenMethod=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)if(i[t][o].value===e.value){i[t][o].selected=!i[t][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)i[t][o].selected=i[t][o].value===e;this.setState({all_method_data:i,module_code:e})},this.abs_Change=t=>{this.setState({data_code:t})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onChange=t=>{this.setState({value_code:t})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluation",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"CRD_IFC_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(am=t.items.map(((t,e)=>({title:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],value:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],caption:t.caption,example:t.example,method:t.item,type:t.type}))),this.evaluation=JSON.parse(JSON.stringify(am)))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(this.all_method_data.support_method=t.items.map(((t,e)=>({title:t.caption,value:t.code_id,selected:"AF"===t.code_id,mode:"AF"===t.code_id}))),this.callGetListMetodChild(t.items).then((t=>{this.setState({all_method_data:t.all_method_data,list_parent_tree:t.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{let t;switch(this.state.module_code){case"DE":t="DPT";break;case"CE":t="CRD"}await this.callAPI("test_method",{workflow_id:"CRD_IFC_EXPRESSION_TEST",module_code:t,expression:this.state.value_code,number_of_step:1}).then((t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),e.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}}}})}render(){const t=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(t,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:"dark",extensions:[jg(),sm],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const lm=rm;var cm;const dm=Sl(((t,e,i)=>{let{from:o,to:a,text:s}=t.state.doc.lineAt(e),n=e,r=e;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===e&&i<0||r===e&&i>0)return null;let l=hm(t.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(t){let e=document.createElement("div");e.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",e.appendChild(i),e.appendChild(o)),e.appendChild(a),{dom:e}}}:void 0})),hm=t=>{for(let e=0;e<cm.length;e++){let i=cm[e];if(i.value===t||i.value===t+"()")return i}};class um extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callGetListMetodChild=async t=>{let e={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(t.map((async t=>{await this.callAPI("get_list_method_child",{code_index_from:"AF"===t.code_id?5:null,code_index_to:"AF"===t.code_id?5:null,code_name:t.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((t=>({title:t.caption,value:t.code_id})));e.list_parent_tree=e.list_parent_tree.concat(o),e.all_method_data[t.code_id]=this.getListMethodChild(i.items,t.code_id)}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}))),new Promise((t=>{t(e)}))},this.getListMethodChild=(t,e)=>{let i=[];for(let o=0;o<t.length;o++){let a={title:t[o].caption,value:t[o].code_id,selected:"AF"!==e||0===o,data:[]};"AF"===e&&0===o&&this.setState({module_code:t[o].code_id});for(let e=0;e<this.evaluation.length;e++)this.evaluation[e].type===t[o].code_id&&a.data.push(this.evaluation[e]);i.push(a)}return i},this.handleChooseMethod=t=>{let e=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=t.method;this.setState({value_code:i+a+o,last_pos:e+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:e+(-1!==a.indexOf("()")?a.length-1:a.length),head:e+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=t=>{let{all_method_data:e}=this.state;for(let i=0;i<e.support_method.length;i++)e.support_method[i].selected=e.support_method[i].value===t.value;this.setState({all_method_data:e})},this.abs_OpenMethod=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)if(i[t][o].value===e.value){i[t][o].selected=!i[t][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)i[t][o].selected=i[t][o].value===e;this.setState({all_method_data:i,module_code:e})},this.abs_Change=t=>{this.setState({data_code:t})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onChange=t=>{this.setState({value_code:t})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluation",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"PMT_IFC_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(cm=t.items.map(((t,e)=>({title:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],value:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],caption:t.caption,example:t.example,method:t.item,type:t.type}))),this.evaluation=JSON.parse(JSON.stringify(cm)))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(this.all_method_data.support_method=t.items.map(((t,e)=>({title:t.caption,value:t.code_id,selected:"AF"===t.code_id,mode:"AF"===t.code_id}))),this.callGetListMetodChild(t.items).then((t=>{this.setState({all_method_data:t.all_method_data,list_parent_tree:t.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{let t;switch(this.state.module_code){case"DE":t="DPT";break;case"CE":t="CRD"}await this.callAPI("test_method",{workflow_id:"PMT_IFC_EXPRESSION_TEST",module_code:t,expression:this.state.value_code,number_of_step:1}).then((t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),e.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}}}})}render(){const t=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(t,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:"dark",extensions:[jg(),dm],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const pm=um;var _m=t=>{var{theme:e,settings:i={},styles:o=[]}=t,a={".cm-gutters":{}},s={};i.background&&(s.backgroundColor=i.background),i.foreground&&(s.color=i.foreground),(i.background||i.foreground)&&(a["&"]=s),i.fontFamily&&(a["&.cm-editor .cm-scroller"]={fontFamily:i.fontFamily}),i.gutterBackground&&(a[".cm-gutters"].backgroundColor=i.gutterBackground),i.gutterForeground&&(a[".cm-gutters"].color=i.gutterForeground),i.gutterBorder&&(a[".cm-gutters"].borderRightColor=i.gutterBorder),i.caret&&(a[".cm-content"]={caretColor:i.caret},a[".cm-cursor, .cm-dropCursor"]={borderLeftColor:i.caret});var n={};return i.gutterActiveForeground&&(n.color=i.gutterActiveForeground),i.lineHighlight&&(a[".cm-activeLine"]={backgroundColor:i.lineHighlight},n.backgroundColor=i.lineHighlight),a[".cm-activeLineGutter"]=n,i.selection&&(a["&.cm-focused .cm-selectionBackground, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={backgroundColor:i.selection}),i.selectionMatch&&(a["& .cm-selectionMatch"]={backgroundColor:i.selectionMatch}),[br.theme(a,{dark:"dark"===e}),ch(sh.define(o))]};var fm={background:"#0f0f0f",foreground:"#defdef",caret:"#00FF00",selection:"#515151",selectionMatch:"#515151",gutterBackground:"#555",gutterForeground:"#FFFFFF",lineHighlight:"#314151"},gm=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},fm,i),styles:[{tag:ad.keyword,color:"darkgoldenrod",fontWeight:"bold"},{tag:ad.atom,color:"#77F"},{tag:ad.comment,color:"#7a7b7c",fontStyle:"italic"},{tag:ad.number,color:"violet"},{tag:ad.definition(ad.variableName),color:"#fffabc"},{tag:ad.variableName,color:"#abcdef"},{tag:ad.function(ad.variableName),color:"#fffabc"},{tag:ad.typeName,color:"#FFDD44"},{tag:ad.tagName,color:"#def"},{tag:ad.string,color:"#2b4"},{tag:ad.meta,color:"#C9F"},{tag:ad.bracket,color:"#8a8a8a"},{tag:ad.attributeName,color:"#DDFF00"},{tag:ad.heading,color:"aquamarine",fontWeight:"bold"},{tag:ad.link,color:"blueviolet",fontWeight:"bold"},...o]})})(),{background:"#282b2e",foreground:"#a9b7c6",caret:"#00FF00",selection:"#343739",selectionMatch:"#343739",lineHighlight:"#343739"}),mm=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},gm,i),styles:[{tag:[ad.keyword,ad.deleted,ad.className],color:"#cc7832"},{tag:[ad.number,ad.literal,ad.derefOperator],color:"#6897bb"},{tag:[ad.link,ad.variableName],color:"#629755"},{tag:[ad.comment,ad.quote],color:"grey"},{tag:[ad.meta,ad.documentMeta],color:"#bbb529"},{tag:[ad.string,ad.propertyName,ad.attributeValue],color:"#6a8759"},{tag:[ad.heading,ad.typeName],color:"#ffc66d"},{tag:[ad.attributeName],color:"#a9b7c6"},{tag:[ad.emphasis],fontStyle:"italic"},...o]})})(),{background:"#272C35",foreground:"#9d9b97",caret:"#797977",selection:"#ffffff30",selectionMatch:"#2B323D",gutterBackground:"#272C35",gutterForeground:"#465063",gutterBorder:"transparent",lineHighlight:"#2B323D"}),vm=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},mm,i),styles:[{tag:[ad.function(ad.variableName),ad.function(ad.propertyName),ad.url,ad.processingInstruction],color:"hsl(207, 82%, 66%)"},{tag:[ad.tagName,ad.heading],color:"#e06c75"},{tag:ad.comment,color:"#54636D"},{tag:[ad.propertyName],color:"hsl(220, 14%, 71%)"},{tag:[ad.attributeName,ad.number],color:"hsl( 29, 54%, 61%)"},{tag:ad.className,color:"hsl( 39, 67%, 69%)"},{tag:ad.keyword,color:"hsl(286, 60%, 67%)"},{tag:[ad.string,ad.regexp,ad.special(ad.propertyName)],color:"#98c379"},...o]})})(),{background:"#21202e",foreground:"#edecee",caret:"#a277ff",selection:"#3d375e7f",selectionMatch:"#3d375e7f",gutterBackground:"#21202e",gutterForeground:"#edecee",gutterBorder:"transparent",lineHighlight:"#a394f033"}),bm=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},vm,i),styles:[{tag:ad.keyword,color:"#a277ff"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName],color:"#edecee"},{tag:[ad.propertyName],color:"#ffca85"},{tag:[ad.processingInstruction,ad.string,ad.inserted,ad.special(ad.string)],color:"#61ffca"},{tag:[ad.function(ad.variableName),ad.labelName],color:"#ffca85"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#61ffca"},{tag:[ad.definition(ad.name),ad.separator],color:"#edecee"},{tag:[ad.className],color:"#82e2ff"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#61ffca"},{tag:[ad.typeName],color:"#82e2ff"},{tag:[ad.operator,ad.operatorKeyword],color:"#a277ff"},{tag:[ad.url,ad.escape,ad.regexp,ad.link],color:"#61ffca"},{tag:[ad.meta,ad.comment],color:"#6d6d6d"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.link,textDecoration:"underline"},{tag:ad.heading,fontWeight:"bold",color:"#a277ff"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#edecee"},{tag:ad.invalid,color:"#ff6767"},{tag:ad.strikethrough,textDecoration:"line-through"},...o]})})(),{background:"#FFFFFF",foreground:"#000000",caret:"#FBAC52",selection:"#FFD420",selectionMatch:"#FFD420",gutterBackground:"#f5f5f5",gutterForeground:"#4D4D4C",gutterBorder:"transparent",lineHighlight:"#00000012"}),ym=((t=>{var{theme:e="light",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},bm,i),styles:[{tag:[ad.meta,ad.comment],color:"#804000"},{tag:[ad.keyword,ad.strong],color:"#0000FF"},{tag:[ad.number],color:"#FF0080"},{tag:[ad.string],color:"#FF0080"},{tag:[ad.variableName],color:"#006600"},{tag:[ad.escape],color:"#33CC33"},{tag:[ad.tagName],color:"#1C02FF"},{tag:[ad.heading],color:"#0C07FF"},{tag:[ad.quote],color:"#000000"},{tag:[ad.list],color:"#B90690"},{tag:[ad.documentMeta],color:"#888888"},{tag:[ad.function(ad.variableName)],color:"#0000A2"},{tag:[ad.definition(ad.typeName),ad.typeName],color:"#6D79DE"},...o]})})(),{background:"#28211c",foreground:"#9d9b97",caret:"#797977",selection:"#36312e",selectionMatch:"#4f382b",gutterBackground:"#28211c",gutterForeground:"#666666",lineHighlight:"rgba(255, 255, 255, 0.1)"}),Am=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},ym,i),styles:[{tag:[ad.atom,ad.number,ad.link,ad.bool],color:"#9b859d"},{tag:ad.comment,color:"#937121"},{tag:[ad.keyword,ad.tagName],color:"#cf6a4c"},{tag:ad.string,color:"#f9ee98"},{tag:ad.bracket,color:"#9d9b97"},{tag:[ad.variableName],color:"#5ea6ea"},{tag:ad.definition(ad.variableName),color:"#cf7d34"},{tag:[ad.function(ad.variableName),ad.className],color:"#cf7d34"},{tag:[ad.propertyName,ad.attributeName],color:"#54be0d"},...o]})})(),{background:"#2B2B2B",foreground:"#f8f8f2",caret:"#FFFFFF",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"rgba(255, 255, 255, 0.1)",gutterForeground:"#999",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"}),Dm=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Am,i),styles:[{tag:[ad.atom,ad.number],color:"#bd93f9"},{tag:[ad.comment],color:"#61A151"},{tag:[ad.string],color:"#6A8759"},{tag:[ad.variableName,ad.operator],color:"#A9B7C6"},{tag:[ad.meta,ad.className],color:"#A9B7C6"},{tag:[ad.propertyName],color:"#FFC66D"},{tag:[ad.keyword],color:"#CC7832"},{tag:[ad.tagName],color:"#ff79c6"},{tag:[ad.typeName],color:"#ffb86c"},...o]})})(),{background:"#282a36",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"#282a36",gutterForeground:"#6D8A88",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"}),km=(t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};return _m({theme:e,settings:Ee({},Dm,i),styles:[{tag:ad.comment,color:"#6272a4"},{tag:ad.string,color:"#f1fa8c"},{tag:ad.atom,color:"#bd93f9"},{tag:ad.meta,color:"#f8f8f2"},{tag:[ad.keyword,ad.operator,ad.tagName],color:"#ff79c6"},{tag:[ad.function(ad.propertyName),ad.propertyName],color:"#66d9ef"},{tag:[ad.definition(ad.variableName),ad.function(ad.variableName),ad.className,ad.attributeName],color:"#50fa7b"},{tag:ad.atom,color:"#bd93f9"},...o]})})(),Om={background:"#faf8f5",foreground:"#b29762",caret:"#93abdc",selection:"#e3dcce",selectionMatch:"#e3dcce",gutterBackground:"#faf8f5",gutterForeground:"#cdc4b1",gutterBorder:"transparent",lineHighlight:"#EFEFEF"},wm=((t=>{var{theme:e="light",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Om,i),styles:[{tag:[ad.comment,ad.bracket],color:"#b6ad9a"},{tag:[ad.atom,ad.number,ad.keyword,ad.link,ad.attributeName,ad.quote],color:"#063289"},{tag:[ad.emphasis,ad.heading,ad.tagName,ad.propertyName,ad.variableName],color:"#2d2006"},{tag:[ad.typeName,ad.url,ad.string],color:"#896724"},{tag:[ad.operator,ad.string],color:"#1659df"},{tag:[ad.propertyName],color:"#b29762"},{tag:[ad.unit,ad.punctuation],color:"#063289"},...o]})})(),{background:"#2a2734",foreground:"#6c6783",caret:"#ffad5c",selection:"rgba(255, 255, 255, 0.1)",gutterBackground:"#2a2734",gutterForeground:"#545167",lineHighlight:"#36334280"}),Cm=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},wm,i),styles:[{tag:[ad.comment,ad.bracket],color:"#6c6783"},{tag:[ad.atom,ad.number,ad.keyword,ad.link,ad.attributeName,ad.quote],color:"#ffcc99"},{tag:[ad.emphasis,ad.heading,ad.tagName,ad.propertyName,ad.className,ad.variableName],color:"#eeebff"},{tag:[ad.typeName,ad.url],color:"#7a63ee"},{tag:ad.operator,color:"#ffad5c"},{tag:ad.string,color:"#ffb870"},{tag:[ad.propertyName],color:"#9a86fd"},{tag:[ad.unit,ad.punctuation],color:"#e09142"},...o]})})(),{background:"#fff",foreground:"#000",caret:"#FFFFFF",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#f7f7f7",gutterForeground:"#999",lineHighlight:"#e8f2ff",gutterBorder:"transparent"}),xm=((t=>{var{theme:e="light",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Cm,i),styles:[{tag:[ad.comment],color:"#3F7F5F"},{tag:[ad.documentMeta],color:"#FF1717"},{tag:ad.keyword,color:"#7F0055",fontWeight:"bold"},{tag:ad.atom,color:"#00f"},{tag:ad.number,color:"#164"},{tag:ad.propertyName,color:"#164"},{tag:[ad.variableName,ad.definition(ad.variableName)],color:"#0000C0"},{tag:ad.function(ad.variableName),color:"#0000C0"},{tag:ad.string,color:"#2A00FF"},{tag:ad.operator,color:"black"},{tag:ad.tagName,color:"#170"},{tag:ad.attributeName,color:"#00c"},{tag:ad.link,color:"#219"},...o]})})(),{background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"}),Sm=((t=>{var{theme:e="light",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},xm,i),styles:[{tag:[ad.standard(ad.tagName),ad.tagName],color:"#116329"},{tag:[ad.comment,ad.bracket],color:"#6a737d"},{tag:[ad.className,ad.propertyName],color:"#6f42c1"},{tag:[ad.variableName,ad.attributeName,ad.number,ad.operator],color:"#005cc5"},{tag:[ad.keyword,ad.typeName,ad.typeOperator,ad.typeName],color:"#d73a49"},{tag:[ad.string,ad.meta,ad.regexp],color:"#032f62"},{tag:[ad.name,ad.quote],color:"#22863a"},{tag:[ad.heading],color:"#24292e",fontWeight:"bold"},{tag:[ad.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[ad.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#e36209"},{tag:[ad.url,ad.escape,ad.regexp,ad.link],color:"#032f62"},{tag:ad.link,textDecoration:"underline"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.invalid,color:"#cb2431"},...o]})})(),{background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"}),Mm=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Sm,i),styles:[{tag:[ad.standard(ad.tagName),ad.tagName],color:"#7ee787"},{tag:[ad.comment,ad.bracket],color:"#8b949e"},{tag:[ad.className,ad.propertyName],color:"#d2a8ff"},{tag:[ad.variableName,ad.attributeName,ad.number,ad.operator],color:"#79c0ff"},{tag:[ad.keyword,ad.typeName,ad.typeOperator,ad.typeName],color:"#ff7b72"},{tag:[ad.string,ad.meta,ad.regexp],color:"#a5d6ff"},{tag:[ad.name,ad.quote],color:"#7ee787"},{tag:[ad.heading],color:"#d2a8ff",fontWeight:"bold"},{tag:[ad.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[ad.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#ffab70"},{tag:ad.link,textDecoration:"underline"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.invalid,color:"#f97583"},...o]})})(),{background:"#282828",foreground:"#ebdbb2",caret:"#ebdbb2",selection:"#bdae93",selectionMatch:"#bdae93",lineHighlight:"#3c3836",gutterBackground:"#282828",gutterForeground:"#7c6f64"}),Pm=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Mm,i),styles:[{tag:ad.keyword,color:"#fb4934"},{tag:[ad.name,ad.deleted,ad.character,ad.propertyName,ad.macroName],color:"#8ec07c"},{tag:[ad.variableName],color:"#83a598"},{tag:[ad.function(ad.variableName)],color:"#b8bb26",fontStyle:"bold"},{tag:[ad.labelName],color:"#ebdbb2"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#d3869b"},{tag:[ad.definition(ad.name),ad.separator],color:"#ebdbb2"},{tag:[ad.brace],color:"#ebdbb2"},{tag:[ad.annotation],color:"#fb4934d"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#d3869b"},{tag:[ad.typeName,ad.className],color:"#fabd2f"},{tag:[ad.operator,ad.operatorKeyword],color:"#fb4934"},{tag:[ad.tagName],color:"#8ec07c",fontStyle:"bold"},{tag:[ad.squareBracket],color:"#fe8019"},{tag:[ad.angleBracket],color:"#83a598"},{tag:[ad.attributeName],color:"#8ec07c"},{tag:[ad.regexp],color:"#8ec07c"},{tag:[ad.quote],color:"#928374"},{tag:[ad.string],color:"#ebdbb2"},{tag:ad.link,color:"#a89984",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ad.url,ad.escape,ad.special(ad.string)],color:"#d3869b"},{tag:[ad.meta],color:"#fabd2f"},{tag:[ad.comment],color:"#928374",fontStyle:"italic"},{tag:ad.strong,fontWeight:"bold",color:"#fe8019"},{tag:ad.emphasis,fontStyle:"italic",color:"#b8bb26"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.heading,fontWeight:"bold",color:"#b8bb26"},{tag:[ad.heading1,ad.heading2],fontWeight:"bold",color:"#b8bb26"},{tag:[ad.heading3,ad.heading4],fontWeight:"bold",color:"#fabd2f"},{tag:[ad.heading5,ad.heading6],color:"#fabd2f"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#d3869b"},{tag:[ad.processingInstruction,ad.inserted],color:"#83a598"},{tag:[ad.contentSeparator],color:"#fb4934"},{tag:ad.invalid,color:"#fe8019",borderBottom:"1px dotted #fb4934d"},...o]})})(),{background:"#fbf1c7",foreground:"#3c3836",caret:"#af3a03",selection:"#ebdbb2",selectionMatch:"#bdae93",lineHighlight:"#ebdbb2",gutterBackground:"#ebdbb2",gutterForeground:"#665c54",gutterBorder:"transparent"}),Tm=((t=>{var{theme:e="light",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Pm,i),styles:[{tag:ad.keyword,color:"#9d0006"},{tag:[ad.name,ad.deleted,ad.character,ad.propertyName,ad.macroName],color:"#427b58"},{tag:[ad.variableName],color:"#076678"},{tag:[ad.function(ad.variableName)],color:"#79740e",fontStyle:"bold"},{tag:[ad.labelName],color:"#3c3836"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#8f3f71"},{tag:[ad.definition(ad.name),ad.separator],color:"#3c3836"},{tag:[ad.brace],color:"#3c3836"},{tag:[ad.annotation],color:"#9d0006"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#8f3f71"},{tag:[ad.typeName,ad.className],color:"#b57614"},{tag:[ad.operator,ad.operatorKeyword],color:"#9d0006"},{tag:[ad.tagName],color:"#427b58",fontStyle:"bold"},{tag:[ad.squareBracket],color:"#af3a03"},{tag:[ad.angleBracket],color:"#076678"},{tag:[ad.attributeName],color:"#427b58"},{tag:[ad.regexp],color:"#427b58"},{tag:[ad.quote],color:"#928374"},{tag:[ad.string],color:"#3c3836"},{tag:ad.link,color:"#7c6f64",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ad.url,ad.escape,ad.special(ad.string)],color:"#8f3f71"},{tag:[ad.meta],color:"#b57614"},{tag:[ad.comment],color:"#928374",fontStyle:"italic"},{tag:ad.strong,fontWeight:"bold",color:"#af3a03"},{tag:ad.emphasis,fontStyle:"italic",color:"#79740e"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.heading,fontWeight:"bold",color:"#79740e"},{tag:[ad.heading1,ad.heading2],fontWeight:"bold",color:"#79740e"},{tag:[ad.heading3,ad.heading4],fontWeight:"bold",color:"#b57614"},{tag:[ad.heading5,ad.heading6],color:"#b57614"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#8f3f71"},{tag:[ad.processingInstruction,ad.inserted],color:"#076678"},{tag:[ad.contentSeparator],color:"#9d0006"},{tag:ad.invalid,color:"#af3a03",borderBottom:"1px dotted #9d0006"},...o]})})(),{background:"#2e3235",foreground:"#bdbdbd",caret:"#a0a4ae",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#2e3235",gutterForeground:"#999",gutterActiveForeground:"#4f5b66",lineHighlight:"#545b61"}),Im=t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};return _m({theme:e,settings:Ee({},Tm,i),styles:[{tag:ad.keyword,color:"#cf6edf"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName],color:"#56c8d8"},{tag:[ad.propertyName],color:"#facf4e"},{tag:[ad.variableName],color:"#bdbdbd"},{tag:[ad.function(ad.variableName)],color:"#56c8d8"},{tag:[ad.labelName],color:"#cf6edf"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#facf4e"},{tag:[ad.definition(ad.name),ad.separator],color:"#fa5788"},{tag:[ad.brace],color:"#cf6edf"},{tag:[ad.annotation],color:"#ff5f52"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#ffad42"},{tag:[ad.typeName,ad.className],color:"#ffad42"},{tag:[ad.operator,ad.operatorKeyword],color:"#7186f0"},{tag:[ad.tagName],color:"#99d066"},{tag:[ad.squareBracket],color:"#ff5f52"},{tag:[ad.angleBracket],color:"#606f7a"},{tag:[ad.attributeName],color:"#bdbdbd"},{tag:[ad.regexp],color:"#ff5f52"},{tag:[ad.quote],color:"#6abf69"},{tag:[ad.string],color:"#99d066"},{tag:ad.link,color:"#56c8d8",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ad.url,ad.escape,ad.special(ad.string)],color:"#facf4e"},{tag:[ad.meta],color:"#707d8b"},{tag:[ad.comment],color:"#707d8b",fontStyle:"italic"},{tag:ad.monospace,color:"#bdbdbd"},{tag:ad.strong,fontWeight:"bold",color:"#ff5f52"},{tag:ad.emphasis,fontStyle:"italic",color:"#99d066"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.heading,fontWeight:"bold",color:"#facf4e"},{tag:ad.heading1,fontWeight:"bold",color:"#facf4e"},{tag:[ad.heading2,ad.heading3,ad.heading4],fontWeight:"bold",color:"#facf4e"},{tag:[ad.heading5,ad.heading6],color:"#facf4e"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#56c8d8"},{tag:[ad.processingInstruction,ad.inserted],color:"#ff5f52"},{tag:[ad.contentSeparator],color:"#56c8d8"},{tag:ad.invalid,color:"#606f7a",borderBottom:"1px dotted #ff5f52"},...o]})},Fm=(Im(),Im(),{background:"#FAFAFA",foreground:"#90A4AE",caret:"#272727",selection:"#80CBC440",selectionMatch:"#FAFAFA",gutterBackground:"#FAFAFA",gutterForeground:"#90A4AE",gutterBorder:"transparent",lineHighlight:"#CCD7DA50"}),Nm=((t=>{var{theme:e="light",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Fm,i),styles:[{tag:ad.keyword,color:"#39ADB5"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName],color:"#90A4AE"},{tag:[ad.propertyName],color:"#6182B8"},{tag:[ad.processingInstruction,ad.string,ad.inserted,ad.special(ad.string)],color:"#91B859"},{tag:[ad.function(ad.variableName),ad.labelName],color:"#6182B8"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#39ADB5"},{tag:[ad.definition(ad.name),ad.separator],color:"#90A4AE"},{tag:[ad.className],color:"#E2931D"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#F76D47"},{tag:[ad.typeName],color:"#E2931D",fontStyle:"#E2931D"},{tag:[ad.operator,ad.operatorKeyword],color:"#39ADB5"},{tag:[ad.url,ad.escape,ad.regexp,ad.link],color:"#91B859"},{tag:[ad.meta,ad.comment],color:"#90A4AE"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.link,textDecoration:"underline"},{tag:ad.heading,fontWeight:"bold",color:"#39ADB5"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#90A4AE"},{tag:ad.invalid,color:"#E5393570"},{tag:ad.strikethrough,textDecoration:"line-through"},...o]})})(),{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",selectionMatch:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"}),Lm=((t=>{var{theme:e="light",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Nm,i),styles:[{tag:ad.comment,color:"#9995b7"},{tag:ad.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[ad.definitionKeyword,ad.modifier],color:"#ff5792"},{tag:[ad.className,ad.tagName,ad.definition(ad.typeName)],color:"#0094f0"},{tag:[ad.number,ad.bool,ad.null,ad.special(ad.brace)],color:"#5842ff"},{tag:[ad.definition(ad.propertyName),ad.function(ad.variableName)],color:"#0095a8"},{tag:ad.typeName,color:"#b3694d"},{tag:[ad.propertyName,ad.variableName],color:"#fa8900"},{tag:ad.operator,color:"#ff5792"},{tag:ad.self,color:"#e64100"},{tag:[ad.string,ad.regexp],color:"#00b368"},{tag:[ad.paren,ad.bracket],color:"#0431fa"},{tag:ad.labelName,color:"#00bdd6"},{tag:ad.attributeName,color:"#e64100"},{tag:ad.angleBracket,color:"#9995b7"},...o]})})(),{background:"#2e3440",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#3b4252",selectionMatch:"#e5e9f0",gutterBackground:"#2e3440",gutterForeground:"#4c566a",gutterActiveForeground:"#d8dee9",lineHighlight:"#4c566a"}),Em=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Lm,i),styles:[{tag:ad.keyword,color:"#5e81ac"},{tag:[ad.name,ad.deleted,ad.character,ad.propertyName,ad.macroName],color:"#88c0d0"},{tag:[ad.variableName],color:"#8fbcbb"},{tag:[ad.function(ad.variableName)],color:"#8fbcbb"},{tag:[ad.labelName],color:"#81a1c1"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#5e81ac"},{tag:[ad.definition(ad.name),ad.separator],color:"#a3be8c"},{tag:[ad.brace],color:"#8fbcbb"},{tag:[ad.annotation],color:"#d30102"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#b48ead"},{tag:[ad.typeName,ad.className],color:"#ebcb8b"},{tag:[ad.operator,ad.operatorKeyword],color:"#a3be8c"},{tag:[ad.tagName],color:"#b48ead"},{tag:[ad.squareBracket],color:"#bf616a"},{tag:[ad.angleBracket],color:"#d08770"},{tag:[ad.attributeName],color:"#ebcb8b"},{tag:[ad.regexp],color:"#5e81ac"},{tag:[ad.quote],color:"#b48ead"},{tag:[ad.string],color:"#a3be8c"},{tag:ad.link,color:"#a3be8c",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ad.url,ad.escape,ad.special(ad.string)],color:"#8fbcbb"},{tag:[ad.meta],color:"#88c0d0"},{tag:[ad.monospace],color:"#d8dee9",fontStyle:"italic"},{tag:[ad.comment],color:"#4c566a",fontStyle:"italic"},{tag:ad.strong,fontWeight:"bold",color:"#5e81ac"},{tag:ad.emphasis,fontStyle:"italic",color:"#5e81ac"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.heading,fontWeight:"bold",color:"#5e81ac"},{tag:ad.special(ad.heading1),fontWeight:"bold",color:"#5e81ac"},{tag:ad.heading1,fontWeight:"bold",color:"#5e81ac"},{tag:[ad.heading2,ad.heading3,ad.heading4],fontWeight:"bold",color:"#5e81ac"},{tag:[ad.heading5,ad.heading6],color:"#5e81ac"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#d08770"},{tag:[ad.processingInstruction,ad.inserted],color:"#8fbcbb"},{tag:[ad.contentSeparator],color:"#ebcb8b"},{tag:ad.invalid,color:"#434c5e",borderBottom:"1px dotted #d30102"},...o]})})(),{background:"#272822",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#49483E",selectionMatch:"#49483E",gutterBackground:"#272822",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"}),jm=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Em,i),styles:[{tag:[ad.comment,ad.documentMeta],color:"#8292a2"},{tag:[ad.number,ad.bool,ad.null,ad.atom],color:"#ae81ff"},{tag:[ad.attributeValue,ad.className,ad.name],color:"#e6db74"},{tag:[ad.propertyName,ad.attributeName],color:"#a6e22e"},{tag:[ad.variableName],color:"#9effff"},{tag:[ad.squareBracket],color:"#bababa"},{tag:[ad.string,ad.special(ad.brace)],color:"#e6db74"},{tag:[ad.regexp,ad.className,ad.typeName,ad.definition(ad.typeName)],color:"#66d9ef"},{tag:[ad.definition(ad.variableName),ad.definition(ad.propertyName),ad.function(ad.variableName)],color:"#fd971f"},{tag:[ad.keyword,ad.definitionKeyword,ad.modifier,ad.tagName,ad.angleBracket],color:"#f92672"},...o]})})(),{background:"#fdf6e3",foreground:"#657b83",caret:"#586e75",selection:"#dfd9c8",selectionMatch:"#dfd9c8",gutterBackground:"#00000010",gutterForeground:"#657b83",lineHighlight:"#dfd9c8"}),Zm=((t=>{var{theme:e="light",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},jm,i),styles:[{tag:ad.keyword,color:"#859900"},{tag:[ad.name,ad.deleted,ad.character,ad.propertyName,ad.macroName],color:"#2aa198"},{tag:[ad.variableName],color:"#268bd2"},{tag:[ad.function(ad.variableName)],color:"#268bd2"},{tag:[ad.labelName],color:"#d33682"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#b58900"},{tag:[ad.definition(ad.name),ad.separator],color:"#2aa198"},{tag:[ad.brace],color:"#d33682"},{tag:[ad.annotation],color:"#d30102"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#d33682"},{tag:[ad.typeName,ad.className],color:"#cb4b16"},{tag:[ad.operator,ad.operatorKeyword],color:"#6c71c4"},{tag:[ad.tagName],color:"#268bd2"},{tag:[ad.squareBracket],color:"#dc322f"},{tag:[ad.angleBracket],color:"#073642"},{tag:[ad.attributeName],color:"#93a1a1"},{tag:[ad.regexp],color:"#d30102"},{tag:[ad.quote],color:"#859900"},{tag:[ad.string],color:"#b58900"},{tag:ad.link,color:"#2aa198",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ad.url,ad.escape,ad.special(ad.string)],color:"#b58900"},{tag:[ad.meta],color:"#dc322f"},{tag:[ad.comment],color:"#586e75",fontStyle:"italic"},{tag:ad.strong,fontWeight:"bold",color:"#586e75"},{tag:ad.emphasis,fontStyle:"italic",color:"#859900"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.heading,fontWeight:"bold",color:"#b58900"},{tag:ad.heading1,fontWeight:"bold",color:"#002b36"},{tag:[ad.heading2,ad.heading3,ad.heading4],fontWeight:"bold",color:"#002b36"},{tag:[ad.heading5,ad.heading6],color:"#002b36"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#d33682"},{tag:[ad.processingInstruction,ad.inserted,ad.contentSeparator],color:"#dc322f"},{tag:[ad.contentSeparator],color:"#b58900"},{tag:ad.invalid,color:"#073642",borderBottom:"1px dotted #dc322f"},...o]})})(),{background:"#002b36",foreground:"#93a1a1",caret:"#839496",selection:"#173541",selectionMatch:"#aafe661a",gutterBackground:"#00252f",gutterForeground:"#839496",lineHighlight:"#173541"}),Rm=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Zm,i),styles:[{tag:ad.keyword,color:"#859900"},{tag:[ad.name,ad.deleted,ad.character,ad.propertyName,ad.macroName],color:"#2aa198"},{tag:[ad.variableName],color:"#93a1a1"},{tag:[ad.function(ad.variableName)],color:"#268bd2"},{tag:[ad.labelName],color:"#d33682"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#b58900"},{tag:[ad.definition(ad.name),ad.separator],color:"#2aa198"},{tag:[ad.brace],color:"#d33682"},{tag:[ad.annotation],color:"#d30102"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#d33682"},{tag:[ad.typeName,ad.className],color:"#cb4b16"},{tag:[ad.operator,ad.operatorKeyword],color:"#6c71c4"},{tag:[ad.tagName],color:"#268bd2"},{tag:[ad.squareBracket],color:"#dc322f"},{tag:[ad.angleBracket],color:"#586e75"},{tag:[ad.attributeName],color:"#93a1a1"},{tag:[ad.regexp],color:"#d30102"},{tag:[ad.quote],color:"#859900"},{tag:[ad.string],color:"#b58900"},{tag:ad.link,color:"#2aa198",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ad.url,ad.escape,ad.special(ad.string)],color:"#b58900"},{tag:[ad.meta],color:"#dc322f"},{tag:[ad.comment],color:"#586e75",fontStyle:"italic"},{tag:ad.strong,fontWeight:"bold",color:"#eee8d5"},{tag:ad.emphasis,fontStyle:"italic",color:"#859900"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.heading,fontWeight:"bold",color:"#b58900"},{tag:ad.heading1,fontWeight:"bold",color:"#fdf6e3"},{tag:[ad.heading2,ad.heading3,ad.heading4],fontWeight:"bold",color:"#eee8d5"},{tag:[ad.heading5,ad.heading6],color:"#eee8d5"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#d33682"},{tag:[ad.processingInstruction,ad.inserted,ad.contentSeparator],color:"#dc322f"},{tag:[ad.contentSeparator],color:"#b58900"},{tag:ad.invalid,color:"#586e75",borderBottom:"1px dotted #dc322f"},...o]})})(),{background:"#303841",foreground:"#FFFFFF",caret:"#FBAC52",selection:"#4C5964",selectionMatch:"#3A546E",gutterBackground:"#303841",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"});!function(t){var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Rm,i),styles:[{tag:[ad.meta,ad.comment],color:"#A2A9B5"},{tag:[ad.attributeName,ad.keyword],color:"#B78FBA"},{tag:ad.function(ad.variableName),color:"#5AB0B0"},{tag:[ad.string,ad.regexp,ad.attributeValue],color:"#99C592"},{tag:ad.operator,color:"#f47954"},{tag:[ad.tagName,ad.modifier],color:"#E35F63"},{tag:[ad.number,ad.definition(ad.tagName),ad.className,ad.definition(ad.variableName)],color:"#fbac52"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#E35F63"},{tag:ad.variableName,color:"#539ac4"},{tag:[ad.propertyName,ad.typeName],color:"#629ccd"},{tag:ad.propertyName,color:"#36b7b5"},...o]})}();var Qm={background:"#1a1b26",foreground:"#787c99",caret:"#c0caf5",selection:"#515c7e40",selectionMatch:"#16161e",gutterBackground:"#1a1b26",gutterForeground:"#787c99",gutterBorder:"transparent",lineHighlight:"#1e202e"},zm=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Qm,i),styles:[{tag:ad.keyword,color:"#bb9af7"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName],color:"#c0caf5"},{tag:[ad.propertyName],color:"#7aa2f7"},{tag:[ad.processingInstruction,ad.string,ad.inserted,ad.special(ad.string)],color:"#9ece6a"},{tag:[ad.function(ad.variableName),ad.labelName],color:"#7aa2f7"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#bb9af7"},{tag:[ad.definition(ad.name),ad.separator],color:"#c0caf5"},{tag:[ad.className],color:"#c0caf5"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#ff9e64"},{tag:[ad.typeName],color:"#0db9d7"},{tag:[ad.operator,ad.operatorKeyword],color:"#bb9af7"},{tag:[ad.url,ad.escape,ad.regexp,ad.link],color:"#b4f9f8"},{tag:[ad.meta,ad.comment],color:"#444b6a"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.link,textDecoration:"underline"},{tag:ad.heading,fontWeight:"bold",color:"#89ddff"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#c0caf5"},{tag:ad.invalid,color:"#ff5370"},{tag:ad.strikethrough,textDecoration:"line-through"},...o]})})(),{background:"#24283b",foreground:"#7982a9",caret:"#c0caf5",selection:"#6f7bb630",selectionMatch:"#1f2335",gutterBackground:"#24283b",gutterForeground:"#7982a9",gutterBorder:"transparent",lineHighlight:"#292e42"}),Um=((t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},zm,i),styles:[{tag:ad.keyword,color:"#bb9af7"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName],color:"#c0caf5"},{tag:[ad.propertyName],color:"#7aa2f7"},{tag:[ad.processingInstruction,ad.string,ad.inserted,ad.special(ad.string)],color:"#9ece6a"},{tag:[ad.function(ad.variableName),ad.labelName],color:"#7aa2f7"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#bb9af7"},{tag:[ad.definition(ad.name),ad.separator],color:"#c0caf5"},{tag:[ad.className],color:"#c0caf5"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#ff9e64"},{tag:[ad.typeName],color:"#2ac3de",fontStyle:"#2ac3de"},{tag:[ad.operator,ad.operatorKeyword],color:"#bb9af7"},{tag:[ad.url,ad.escape,ad.regexp,ad.link],color:"#b4f9f8"},{tag:[ad.meta,ad.comment],color:"#565f89"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.link,textDecoration:"underline"},{tag:ad.heading,fontWeight:"bold",color:"#89ddff"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#c0caf5"},{tag:ad.invalid,color:"#ff5370"},{tag:ad.strikethrough,textDecoration:"line-through"},...o]})})(),{background:"#e1e2e7",foreground:"#3760bf",caret:"#3760bf",selection:"#99a7df",selectionMatch:"#99a7df",gutterBackground:"#e1e2e7",gutterForeground:"#3760bf",gutterBorder:"transparent",lineHighlight:"#5f5faf11"}),Bm=((t=>{var{theme:e="light",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Um,i),styles:[{tag:ad.keyword,color:"#007197"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName],color:"#3760bf"},{tag:[ad.propertyName],color:"#3760bf"},{tag:[ad.processingInstruction,ad.string,ad.inserted,ad.special(ad.string)],color:"#587539"},{tag:[ad.function(ad.variableName),ad.labelName],color:"#3760bf"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#3760bf"},{tag:[ad.definition(ad.name),ad.separator],color:"#3760bf"},{tag:[ad.className],color:"#3760bf"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#b15c00"},{tag:[ad.typeName],color:"#007197",fontStyle:"#007197"},{tag:[ad.operator,ad.operatorKeyword],color:"#007197"},{tag:[ad.url,ad.escape,ad.regexp,ad.link],color:"#587539"},{tag:[ad.meta,ad.comment],color:"#848cb5"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.link,textDecoration:"underline"},{tag:ad.heading,fontWeight:"bold",color:"#b15c00"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#3760bf"},{tag:ad.invalid,color:"#f52a65"},{tag:ad.strikethrough,textDecoration:"line-through"},...o]})})(),{background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'});!function(t){var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Bm,i),styles:[{tag:[ad.keyword,ad.operatorKeyword,ad.modifier,ad.color,ad.constant(ad.name),ad.standard(ad.name),ad.standard(ad.tagName),ad.special(ad.brace),ad.atom,ad.bool,ad.special(ad.variableName)],color:"#569cd6"},{tag:[ad.controlKeyword,ad.moduleKeyword],color:"#c586c0"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName,ad.propertyName,ad.variableName,ad.labelName,ad.definition(ad.name)],color:"#9cdcfe"},{tag:ad.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[ad.typeName,ad.className,ad.tagName,ad.number,ad.changed,ad.annotation,ad.self,ad.namespace],color:"#4ec9b0"},{tag:[ad.function(ad.variableName),ad.function(ad.propertyName)],color:"#dcdcaa"},{tag:[ad.number],color:"#b5cea8"},{tag:[ad.operator,ad.punctuation,ad.separator,ad.url,ad.escape,ad.regexp],color:"#d4d4d4"},{tag:[ad.regexp],color:"#d16969"},{tag:[ad.special(ad.string),ad.processingInstruction,ad.string,ad.inserted],color:"#ce9178"},{tag:[ad.angleBracket],color:"#808080"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:[ad.meta,ad.comment],color:"#6a9955"},{tag:ad.link,color:"#6a9955",textDecoration:"underline"},{tag:ad.invalid,color:"#ff0000"},...o]})}();var Ym={background:"#fff",foreground:"#3D3D3D",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#AFAFAF",lineHighlight:"#EDF4FF"};!function(t){var{theme:e="light",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Ym,i),styles:[{tag:[ad.comment,ad.quote],color:"#707F8D"},{tag:[ad.typeName,ad.typeOperator],color:"#aa0d91"},{tag:[ad.keyword],color:"#aa0d91",fontWeight:"bold"},{tag:[ad.string,ad.meta],color:"#D23423"},{tag:[ad.name],color:"#032f62"},{tag:[ad.typeName],color:"#522BB2"},{tag:[ad.variableName],color:"#23575C"},{tag:[ad.definition(ad.variableName)],color:"#327A9E"},{tag:[ad.regexp,ad.link],color:"#0e0eff"},...o]})}();var Hm,Vm={background:"#292A30",foreground:"#CECFD0",caret:"#fff",selection:"#727377",selectionMatch:"#727377",lineHighlight:"#2F3239"};(t=>{var{theme:e="dark",settings:i={},styles:o=[]}=t||{};_m({theme:e,settings:Ee({},Vm,i),styles:[{tag:[ad.comment,ad.quote],color:"#7F8C98"},{tag:[ad.keyword],color:"#FF7AB2",fontWeight:"bold"},{tag:[ad.string,ad.meta],color:"#FF8170"},{tag:[ad.typeName],color:"#DABAFF"},{tag:[ad.definition(ad.variableName)],color:"#6BDFFF"},{tag:[ad.name],color:"#6BAA9F"},{tag:[ad.variableName],color:"#ACF2E4"},{tag:[ad.regexp,ad.link],color:"#FF8170"},...o]})})();const Wm=Sl(((t,e,i)=>{let{from:o,to:a,text:s}=t.state.doc.lineAt(e),n=e,r=e;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===e&&i<0||r===e&&i>0)return null;let l=Gm(t.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(t){let e=document.createElement("div");e.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",e.appendChild(i),e.appendChild(o)),e.appendChild(a),{dom:e}}}:void 0})),Gm=t=>{for(let e=0;e<Hm.length;e++){let i=Hm[e];if(i.value===t||i.value===t+"()")return i}};class Jm extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.getListMethodChild=(t,e)=>{let i=[];for(let o=0;o<t.length;o++){let a={title:t[o].caption,value:t[o].code_id,selected:"AF"!==e||0===o,data:[]};"AF"===e&&0===o&&this.setState({module_code:t[o].code_id});for(let e=0;e<this.evaluation.length;e++)this.evaluation[e].type===t[o].code_id&&a.data.push(this.evaluation[e]);i.push(a)}return i},this.handleChooseMethod=t=>{let e=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=t.method;this.setState({value_code:i+a+o,last_pos:e+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:e+(-1!==a.indexOf("()")?a.length-1:a.length),head:e+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),1)}))},this.abs_OpenMethodSystem=t=>{let{all_method_data:e}=this.state;for(let i=0;i<e.support_method.length;i++)e.support_method[i].selected=e.support_method[i].value===t.value;this.setState({all_method_data:e})},this.abs_OpenMethod=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)if(i[t][o].value===e.value){i[t][o].selected=!i[t][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)i[t][o].selected=i[t][o].value===e;this.setState({all_method_data:i,module_code:e})},this.abs_Change=t=>{this.setState({data_code:t})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onChange=t=>{this.setState({value_code:t})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluationAutoFee",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(Hm=t.items.map(((t,e)=>({title:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],value:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],caption:t.caption,example:t.example,method:t.item,type:t.type}))),this.evaluation=JSON.parse(JSON.stringify(Hm)),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else{this.all_method_data.support_method=t.items.map(((t,e)=>({title:t.caption,value:t.code_id,selected:"AF"===t.code_id,mode:"AF"===t.code_id})));for(let e=0;e<t.items.length;e++)await this.callAPI("get_list_method_child_AutoFee",{code_name:t.items[e].code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map(((t,e)=>({title:t.caption,value:t.code_id})));this.list_parent_tree=this.list_parent_tree.concat(o),this.all_method_data[t.items[e].code_id]=this.getListMethodChild(i.items,t.items[e].code_id)}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}));this.setState({all_method_data:this.all_method_data,list_parent_tree:this.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1)}))}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{await this.callAPI("test_method_autoFee",{expression:this.state.value_code,number_of_step:1}).then((t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),e.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}}}})}render(){const t=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(t,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:km,extensions:[jg(),Wm],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const qm=Jm;var Km;const Xm=Sl(((t,e,i)=>{let{from:o,to:a,text:s}=t.state.doc.lineAt(e),n=e,r=e;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===e&&i<0||r===e&&i>0)return null;let l=$m(t.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(t){let e=document.createElement("div");e.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",e.appendChild(i),e.appendChild(o)),e.appendChild(a),{dom:e}}}:void 0})),$m=t=>{for(let e=0;e<Km.length;e++){let i=Km[e];if(i.value===t||i.value===t+"()")return i}};class tv extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callGetListMetodChild=async t=>{let e={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(t.map((async t=>{await this.callAPI("get_list_method_child_AutoFee",{code_index_from:"AF"===t.code_id?3:null,code_index_to:"AF"===t.code_id?3:null,code_name:t.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((t=>({title:t.caption,value:t.code_id})));e.list_parent_tree=e.list_parent_tree.concat(o),e.all_method_data[t.code_id]=this.getListMethodChild(i.items,t.code_id)}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}))),new Promise((t=>{t(e)}))},this.getListMethodChild=(t,e)=>{let i=[];for(let o=0;o<t.length;o++){let a={title:t[o].caption,value:t[o].code_id,selected:"AF"!==e||0===o,data:[]};"AF"===e&&0===o&&this.setState({module_code:t[o].code_id});for(let e=0;e<this.evaluation.length;e++)this.evaluation[e].type===t[o].code_id&&a.data.push(this.evaluation[e]);i.push(a)}return i},this.handleChooseMethod=t=>{let e=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=t.method;this.setState({value_code:i+a+o,last_pos:e+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:e+(-1!==a.indexOf("()")?a.length-1:a.length),head:e+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=t=>{let{all_method_data:e}=this.state;for(let i=0;i<e.support_method.length;i++)e.support_method[i].selected=e.support_method[i].value===t.value;this.setState({all_method_data:e})},this.abs_OpenMethod=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)if(i[t][o].value===e.value){i[t][o].selected=!i[t][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)i[t][o].selected=i[t][o].value===e;this.setState({all_method_data:i,module_code:e})},this.abs_Change=t=>{this.setState({data_code:t})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onChange=t=>{this.setState({value_code:t})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluationAutoFee",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"DPT_IFC_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(Km=t.items.map(((t,e)=>({title:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],value:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],caption:t.caption,example:t.example,method:t.item,type:t.type}))),this.evaluation=JSON.parse(JSON.stringify(Km)))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),await this.callAPI("get_list_method_parent_autoFee",{number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(this.all_method_data.support_method=t.items.map(((t,e)=>({title:t.caption,value:t.code_id,selected:"AF"===t.code_id,mode:"AF"===t.code_id}))),this.callGetListMetodChild(t.items).then((t=>{this.setState({all_method_data:t.all_method_data,list_parent_tree:t.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{await this.callAPI("test_method_autoFee",{workflow_id:"DPT_IFC_EXPRESSION_TEST_AUTOFEE",expression:this.state.value_code,number_of_step:1}).then((t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),e.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}}}})}render(){const t=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(t,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:km,extensions:[jg(),Xm],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const ev=tv;var iv;const ov=Sl(((t,e,i)=>{let{from:o,to:a,text:s}=t.state.doc.lineAt(e),n=e,r=e;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===e&&i<0||r===e&&i>0)return null;let l=av(t.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(t){let e=document.createElement("div");e.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",e.appendChild(i),e.appendChild(o)),e.appendChild(a),{dom:e}}}:void 0})),av=t=>{for(let e=0;e<iv.length;e++){let i=iv[e];if(i.value===t||i.value===t+"()")return i}};class sv extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callGetListMetodChild=async t=>{let e={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(t.map((async t=>{await this.callAPI("get_list_method_child_AutoFee",{code_index_from:"AF"===t.code_id?3:null,code_index_to:"AF"===t.code_id?3:null,code_name:t.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((t=>({title:t.caption,value:t.code_id})));e.list_parent_tree=e.list_parent_tree.concat(o),e.all_method_data[t.code_id]=this.getListMethodChild(i.items,t.code_id)}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}))),new Promise((t=>{t(e)}))},this.getListMethodChild=(t,e)=>{let i=[];for(let o=0;o<t.length;o++){let a={title:t[o].caption,value:t[o].code_id,selected:"AF"!==e||0===o,data:[]};"AF"===e&&0===o&&this.setState({module_code:t[o].code_id});for(let e=0;e<this.evaluation.length;e++)this.evaluation[e].type===t[o].code_id&&a.data.push(this.evaluation[e]);i.push(a)}return i},this.handleChooseMethod=t=>{let e=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=t.method;this.setState({value_code:i+a+o,last_pos:e+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:e+(-1!==a.indexOf("()")?a.length-1:a.length),head:e+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=t=>{let{all_method_data:e}=this.state;for(let i=0;i<e.support_method.length;i++)e.support_method[i].selected=e.support_method[i].value===t.value;this.setState({all_method_data:e})},this.abs_OpenMethod=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)if(i[t][o].value===e.value){i[t][o].selected=!i[t][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)i[t][o].selected=i[t][o].value===e;this.setState({all_method_data:i,module_code:e})},this.abs_Change=t=>{this.setState({data_code:t})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onChange=t=>{this.setState({value_code:t})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluationAutoFee",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"TRD_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(iv=t.items.map(((t,e)=>({title:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],value:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],caption:t.caption,example:t.example,method:t.item,type:t.type}))),this.evaluation=JSON.parse(JSON.stringify(iv)))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),await this.callAPI("get_list_method_parent_autoFee",{number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(this.all_method_data.support_method=t.items.map(((t,e)=>({title:t.caption,value:t.code_id,selected:"AF"===t.code_id,mode:"AF"===t.code_id}))),this.callGetListMetodChild(t.items).then((t=>{this.setState({all_method_data:t.all_method_data,list_parent_tree:t.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{await this.callAPI("test_method_autoFee",{workflow_id:"TRD_EXPRESSION_TEST_AUTOFEE",expression:this.state.value_code,number_of_step:1}).then((t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),e.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}}}})}render(){const t=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(t,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:km,extensions:[jg(),ov],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const nv=sv;var rv;const lv=Sl(((t,e,i)=>{let{from:o,to:a,text:s}=t.state.doc.lineAt(e),n=e,r=e;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===e&&i<0||r===e&&i>0)return null;let l=cv(t.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(t){let e=document.createElement("div");e.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",e.appendChild(i),e.appendChild(o)),e.appendChild(a),{dom:e}}}:void 0})),cv=t=>{for(let e=0;e<rv.length;e++){let i=rv[e];if(i.value===t||i.value===t+"()")return i}};class dv extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callGetListMetodChild=async t=>{let e={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(t.map((async t=>{await this.callAPI("get_list_method_child_AutoFee",{code_index_from:"AF"===t.code_id?3:null,code_index_to:"AF"===t.code_id?3:null,code_name:t.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((t=>({title:t.caption,value:t.code_id})));e.list_parent_tree=e.list_parent_tree.concat(o),e.all_method_data[t.code_id]=this.getListMethodChild(i.items,t.code_id)}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}))),new Promise((t=>{t(e)}))},this.getListMethodChild=(t,e)=>{let i=[];for(let o=0;o<t.length;o++){let a={title:t[o].caption,value:t[o].code_id,selected:"AF"!==e||0===o,data:[]};"AF"===e&&0===o&&this.setState({module_code:t[o].code_id});for(let e=0;e<this.evaluation.length;e++)this.evaluation[e].type===t[o].code_id&&a.data.push(this.evaluation[e]);i.push(a)}return i},this.handleChooseMethod=t=>{let e=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=t.method;this.setState({value_code:i+a+o,last_pos:e+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:e+(-1!==a.indexOf("()")?a.length-1:a.length),head:e+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=t=>{let{all_method_data:e}=this.state;for(let i=0;i<e.support_method.length;i++)e.support_method[i].selected=e.support_method[i].value===t.value;this.setState({all_method_data:e})},this.abs_OpenMethod=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)if(i[t][o].value===e.value){i[t][o].selected=!i[t][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)i[t][o].selected=i[t][o].value===e;this.setState({all_method_data:i,module_code:e})},this.abs_Change=t=>{this.setState({data_code:t})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onChange=t=>{this.setState({value_code:t})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluationAutoFee",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"TRS_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(rv=t.items.map(((t,e)=>({title:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],value:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],caption:t.caption,example:t.example,method:t.item,type:t.type}))),this.evaluation=JSON.parse(JSON.stringify(rv)))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),await this.callAPI("get_list_method_parent_autoFee",{number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(this.all_method_data.support_method=t.items.map(((t,e)=>({title:t.caption,value:t.code_id,selected:"AF"===t.code_id,mode:"AF"===t.code_id}))),this.callGetListMetodChild(t.items).then((t=>{this.setState({all_method_data:t.all_method_data,list_parent_tree:t.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{await this.callAPI("test_method_autoFee",{workflow_id:"TRS_EXPRESSION_TEST_AUTOFEE",expression:this.state.value_code,number_of_step:1}).then((t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),e.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}}}})}render(){const t=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(t,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:km,extensions:[jg(),lv],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const hv=dv;var uv;const pv=Sl(((t,e,i)=>{let{from:o,to:a,text:s}=t.state.doc.lineAt(e),n=e,r=e;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===e&&i<0||r===e&&i>0)return null;let l=_v(t.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(t){let e=document.createElement("div");e.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",e.appendChild(i),e.appendChild(o)),e.appendChild(a),{dom:e}}}:void 0})),_v=t=>{for(let e=0;e<uv.length;e++){let i=uv[e];if(i.value===t||i.value===t+"()")return i}};class fv extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callGetListMetodChild=async t=>{let e={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(t.map((async t=>{await this.callAPI("get_list_method_child_AutoFee",{code_index_from:"AF"===t.code_id?3:null,code_index_to:"AF"===t.code_id?3:null,code_name:t.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((t=>({title:t.caption,value:t.code_id})));e.list_parent_tree=e.list_parent_tree.concat(o),e.all_method_data[t.code_id]=this.getListMethodChild(i.items,t.code_id)}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}))),new Promise((t=>{t(e)}))},this.getListMethodChild=(t,e)=>{let i=[];for(let o=0;o<t.length;o++){let a={title:t[o].caption,value:t[o].code_id,selected:"AF"!==e||0===o,data:[]};"AF"===e&&0===o&&this.setState({module_code:t[o].code_id});for(let e=0;e<this.evaluation.length;e++)this.evaluation[e].type===t[o].code_id&&a.data.push(this.evaluation[e]);i.push(a)}return i},this.handleChooseMethod=t=>{let e=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=t.method;this.setState({value_code:i+a+o,last_pos:e+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:e+(-1!==a.indexOf("()")?a.length-1:a.length),head:e+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=t=>{let{all_method_data:e}=this.state;for(let i=0;i<e.support_method.length;i++)e.support_method[i].selected=e.support_method[i].value===t.value;this.setState({all_method_data:e})},this.abs_OpenMethod=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)if(i[t][o].value===e.value){i[t][o].selected=!i[t][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)i[t][o].selected=i[t][o].value===e;this.setState({all_method_data:i,module_code:e})},this.abs_Change=t=>{this.setState({data_code:t})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onChange=t=>{this.setState({value_code:t})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluationAutoFee",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"CRD_IFC_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(uv=t.items.map(((t,e)=>({title:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],value:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],caption:t.caption,example:t.example,method:t.item,type:t.type}))),this.evaluation=JSON.parse(JSON.stringify(uv)))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),await this.callAPI("get_list_method_parent_autoFee",{number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(this.all_method_data.support_method=t.items.map(((t,e)=>({title:t.caption,value:t.code_id,selected:"AF"===t.code_id,mode:"AF"===t.code_id}))),this.callGetListMetodChild(t.items).then((t=>{this.setState({all_method_data:t.all_method_data,list_parent_tree:t.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{await this.callAPI("test_method_autoFee",{workflow_id:"CRD_IFC_EXPRESSION_TEST_AUTOFEE",expression:this.state.value_code,number_of_step:1}).then((t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),e.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}}}})}render(){const t=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(t,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:km,extensions:[jg(),pv],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const gv=fv;var mv;const vv=Sl(((t,e,i)=>{let{from:o,to:a,text:s}=t.state.doc.lineAt(e),n=e,r=e;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===e&&i<0||r===e&&i>0)return null;let l=bv(t.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(t){let e=document.createElement("div");e.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",e.appendChild(i),e.appendChild(o)),e.appendChild(a),{dom:e}}}:void 0})),bv=t=>{for(let e=0;e<mv.length;e++){let i=mv[e];if(i.value===t||i.value===t+"()")return i}};class yv extends o.Component{constructor(t){var e;super(t),e=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.callGetListMetodChild=async t=>{let e={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(t.map((async t=>{await this.callAPI("get_list_method_child_AutoFee",{code_index_from:"AF"===t.code_id?3:null,code_index_to:"AF"===t.code_id?3:null,code_name:t.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((t=>({title:t.caption,value:t.code_id})));e.list_parent_tree=e.list_parent_tree.concat(o),e.all_method_data[t.code_id]=this.getListMethodChild(i.items,t.code_id)}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}))),new Promise((t=>{t(e)}))},this.getListMethodChild=(t,e)=>{let i=[];for(let o=0;o<t.length;o++){let a={title:t[o].caption,value:t[o].code_id,selected:"AF"!==e||0===o,data:[]};"AF"===e&&0===o&&this.setState({module_code:t[o].code_id});for(let e=0;e<this.evaluation.length;e++)this.evaluation[e].type===t[o].code_id&&a.data.push(this.evaluation[e]);i.push(a)}return i},this.handleChooseMethod=t=>{let e=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=t.method;this.setState({value_code:i+a+o,last_pos:e+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:e+(-1!==a.indexOf("()")?a.length-1:a.length),head:e+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=t=>{let{all_method_data:e}=this.state;for(let i=0;i<e.support_method.length;i++)e.support_method[i].selected=e.support_method[i].value===t.value;this.setState({all_method_data:e})},this.abs_OpenMethod=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)if(i[t][o].value===e.value){i[t][o].selected=!i[t][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(t,e)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[t].length;o++)i[t][o].selected=i[t][o].value===e;this.setState({all_method_data:i,module_code:e})},this.abs_Change=t=>{this.setState({data_code:t})},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t}}];return a[0].input=Object.assign(a[0].input,i),(0,F.Yr)(a,{}).then((t=>s.ZP.foGetData(o,t)?s.ZP.foGetData(o,t):{error_data:s.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.onChange=t=>{this.setState({value_code:t})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluationAutoFee",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"PMT_IFC_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(mv=t.items.map(((t,e)=>({title:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],value:-1===t.item.indexOf(".")?t.item:t.item.split(".")[1],caption:t.caption,example:t.example,method:t.item,type:t.type}))),this.evaluation=JSON.parse(JSON.stringify(mv)))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),await this.callAPI("get_list_method_parent_autoFee",{number_of_step:1}).then((async t=>{t.hasError?s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1):(this.all_method_data.support_method=t.items.map(((t,e)=>({title:t.caption,value:t.code_id,selected:"AF"===t.code_id,mode:"AF"===t.code_id}))),this.callGetListMetodChild(t.items).then((t=>{this.setState({all_method_data:t.all_method_data,list_parent_tree:t.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==t&&t.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),t.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{await this.callAPI("test_method_autoFee",{workflow_id:"PMT_IFC_EXPRESSION_TEST_AUTOFEE",expression:this.state.value_code,number_of_step:1}).then((t=>{if(t.hasError)s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),e.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((t=>{s.ZP.isDebug()&&console.log("err",t)}))}}}})}render(){const t=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(t,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:km,extensions:[jg(),vv],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const Av=yv,Dv=(t,e,a,n,r)=>{if(null!=t.form_code&&!s.ZP.openForm(t.form_code)){if(Ce(t))return;switch(t.form_code){case"designForm":l.ZP.quickPost([{txcode:"#sys:bo-load-designForm",input:{}}],{});break;case"paraServer":l.ZP.quickPost([{txcode:"#sys:bo-load-allParaServer",input:{}}],{});break;case"flow_bo":l.ZP.quickPost([{txcode:"#sys:bo-load-allTxBo",input:{}}],{});break;case"flow_fo":l.ZP.quickPost([{txcode:"#sys:bo-load-allTxFo",input:{}}],{});break;case"designDataBase":!function(){var t=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(h,{data:(0,s.Wc)(),mapping_key:t},t))}();break;case"roleMatrix":l.ZP.quickPost([{txcode:"#sys:bo-load-allRoleSystem",input:{para_data:"role_system"}}],{});break;case"roleUser":l.ZP.quickPost([{txcode:"#sys:bo-load-roleUser",input:{}}],{});break;case"roleBo":l.ZP.quickPost([{txcode:"#sys:bo-load-roleBo",input:{}}],{});break;case"myDevice":l.ZP.quickPost([{txcode:"#sys:bo-load-device",input:{user_id:(0,s.CO)()}}],{});break;case"systemLicense":!function(){var t=s.ZP.autoID();let e=s.ZP.context_get("user_acc");e.user_portal&&e.user_portal.license;let a=o.lazy((()=>i.e(2754).then(i.bind(i,2754))));s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(a,{mapping_key:t,data:e.user_portal.licence},t)},t))}();break;case"langApplication":!function(){for(var t=s.ZP.getConfigUserDefault("list_lang_config"),e="",i=0;i<t.length;i++)e+=""===e?t[i].key:";"+t[i].key;l.ZP.quickPost([{txcode:"#sys:bo-load-langAll",input:{lang_data:e}}],{})}();break;case"eLearning":(0,F.Yr)([{txcode:"#sys:bo-load-eLearning",input:{}}],{}).then((t=>{var e=s.ZP.foGetData("temple_elearning",t),i=s.ZP.foGetData("data",t),o=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(xe.default,{temple_elearning:e,data:i,mapping_key:o},o))}),(t=>{}));break;case"langManagerGlobal":!function(){for(var t=s.ZP.getConfigUserDefault("list_lang_config"),e="",i=0;i<t.length;i++)e+=""===e?t[i].key:";"+t[i].key;(0,F.Yr)([{txcode:"#designform:bo-designForm-getAll"},{txcode:"#sys:bo-load-langAll",input:{lang_data:e}}],{}).then((e=>{let i=s.ZP.foGetData("list_form",e),a=s.ZP.foGetData("list_app",e),n={};t.forEach((t=>{n[t.key]=s.ZP.foGetData(`lang_data_${t.key}`,e)}));var r=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Pe,{list_lang_data:n,list_forms:i,list_app:a,mapping_key:r},r)},r))}),(t=>{}))}();break;case"activity":(0,F.Yr)([{txcode:"#designform:bo-designForm-getAll"}],{}).then((t=>{let e=s.ZP.foGetData("list_form",t),i=s.ZP.foGetData("list_app",t);var a=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Fe,{list_forms:e,list_app:i,mapping_key:a},a)},a))}),(t=>{}));break;case"test_123987654":!function(){var t=s.ZP.autoID();(0,F.Yr)([{txcode:"#designform:bo-designForm-getAll"}],{}).then((e=>{let i=s.ZP.foGetData("list_form",e),a=s.ZP.foGetData("list_app",e);s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Le,{list_form_ne:i,list_app_ne:a,mapping_key:t})},t))}))}();break;default:const d=(0,s.R3)(t.form_code);if(void 0===d)(0,F.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:t.form_code}}],e,!0).then((i=>{var o=s.ZP.foGetData("form_design_detail",i),l=s.ZP.foGetData("loadRoleTask",i);if(void 0!==l?(0,s._d)(t.form_code,l):(0,s._d)(t.form_code,{}),null!=o){(0,s.bn)(t.form_code,o);const i=(0,s.R3)(t.form_code),l=xv(t);let c={data_form:"",learnapi_form:"",learnsql_form:"",bo_data_form:"",lazy_load:(0,s.VU)(t.form_code)};void 0!==l.data&&(c.data_form=l.data),void 0!==l.learnapi&&(c.learnapi_form=l.learnapi),void 0!==l.learnsql&&(c.learnsql_form=l.learnsql),void 0!==l.bodata&&(c.bo_data_form=l.bodata),wv(c,t.form_code,i,l,void 0,e,a,n,r)}}),(t=>{}));else{const i=xv(t);let o={data_form:"",learnapi_form:"",learnsql_form:"",bo_data_form:"",lazy_load:(0,s.VU)(t.form_code)};void 0!==i.data&&(o.data_form=i.data),void 0!==i.learnapi&&(o.learnapi_form=i.learnapi),void 0!==i.learnsql&&(o.learnsql_form=i.learnsql),void 0!==i.bodata&&(o.bo_data_form=i.bodata),wv(o,t.form_code,d,i,void 0,e,a,n,r)}}}},kv=(t,e,i,o,n,r)=>{switch(void 0===i&&(i={}),t){case"form_evaluation":case"form_evaluation_DPT":case"form_evaluation_CRD":case"form_evaluation_PMT":case"form_evaluation_TRD":case"form_evaluation_TRS":case"form_evaluationAutoFee":case"form_evaluationAutoFee_DPT":case"form_evaluationAutoFee_CRD":case"form_evaluationAutoFee_PMT":case"form_evaluationAutoFee_TRD":case"form_evaluationAutoFee_TRS":Ov(t,e,i,o,n,r);break;default:var l=(0,s.R3)(t);if(void 0===l)(0,F.Yr)([{txcode:"#sys:bo-load-formRole",input:{form_id:t}},{txcode:"#sys:bo-load-formId",input:{form_id:t}}],{}).then((l=>{var d=s.ZP.foGetData("form_design_detail",l),h=s.ZP.foGetData("loadRoleTask",l);if(void 0!==h&&(0,s._d)(t,h),void 0!==d){(0,s.bn)(t,d);const l=(0,s.R3)(t),h=(0,s.x1)(t);let u={data_form:"",learnapi_form:"",learnsql_form:"",bo_data_form:"",lazy_load:(0,s.VU)(t)};void 0!==h.data&&(u.data_form=h.data),void 0!==h.learnapi&&(u.learnapi_form=h.learnapi),void 0!==h.learnsql&&(u.learnsql_form=h.learnsql),void 0!==h.bodata&&(u.bo_data_form=h.bodata),""===u.data_form&&""===u.learnapi_form&&""===u.learnsql_form&&""===u.bo_data_form&&"{}"===JSON.stringify(u.lazy_load)?void 0===e?a.render((0,c.jsx)(B,{form_code:t,data_select:r,conf:l,infoA:h},(0,s.cb)()),e):a.render((0,c.jsx)(B,{form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:n,componentConfigDefault:o,conf:l,data_select:r,infoA:h},(0,s.cb)()),e):wv(u,t,l,h,e,i,o,n,r)}}),(t=>{}));else{const d=(0,s.x1)(t);let h={data_form:"",learnapi_form:"",learnsql_form:"",bo_data_form:"",lazy_load:(0,s.VU)(t)};void 0!==d.data&&(h.data_form=d.data),void 0!==d.learnapi&&(h.learnapi_form=d.learnapi),void 0!==d.learnsql&&(h.learnsql_form=d.learnsql),void 0!==d.bodata&&(h.bo_data_form=d.bodata),""===h.data_form&&""===h.learnapi_form&&""===h.learnsql_form&&""===h.bo_data_form&&"{}"===JSON.stringify(h.lazy_load)?void 0===e?a.render((0,c.jsx)(B,{form_code:t,conf:l,infoA:d},(0,s.cb)()),e):a.render((0,c.jsx)(B,{form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:n,componentConfigDefault:o,conf:l,infoA:d},(0,s.cb)()),e):wv(h,t,l,d,e,i,o,n,r)}}},Ov=(t,e,i,n,r,l)=>{var d=s.ZP.autoID();switch(t){case"form_evaluation":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(Ug,{mapping_key:d,data_select:l,form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),e);break;case"form_evaluation_DPT":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(Wg,{mapping_key:d,data_select:l,form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),e);break;case"form_evaluation_CRD":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(lm,{mapping_key:d,data_select:l,form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),e);break;case"form_evaluation_PMT":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(pm,{mapping_key:d,data_select:l,form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),e);break;case"form_evaluation_TRD":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(Xg,{mapping_key:d,data_select:l,form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),e);break;case"form_evaluation_TRS":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(om,{mapping_key:d,data_select:l,form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),e);break;case"form_evaluationAutoFee":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(qm,{mapping_key:d,data_select:l,form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),e);break;case"form_evaluationAutoFee_DPT":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(ev,{mapping_key:d,data_select:l,form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),e);break;case"form_evaluationAutoFee_CRD":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(gv,{mapping_key:d,data_select:l,form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),e);break;case"form_evaluationAutoFee_PMT":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(Av,{mapping_key:d,data_select:l,form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),e);break;case"form_evaluationAutoFee_TRD":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(nv,{mapping_key:d,data_select:l,form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),e);break;case"form_evaluationAutoFee_TRS":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(hv,{mapping_key:d,data_select:l,form_code:t,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),e)}};function wv(t,e,i,o,n,r,l,d,h){var u=[];void 0!==t.data_form&&(u=t.data_form.split(";"));for(var p={},_=0;_<u.length;_++)void 0===p[u[_]]&&""!==u[_]&&(p[u[_]]=u[_]);var f="";for(var g in p)s.ZP.checkHasData(g)||(""===f?f=g:f+=";"+g);var m="";if(""!==t.learnapi_form){var v=[];void 0!==t.learnapi_form&&(v=t.learnapi_form.split(";"));for(var b={},y=0;y<v.length;y++)""!==v[y].trim()&&(b[v[y].trim()]="one");for(var A in b)m+=""===m?A:";"+A}var D="";if(""!==t.learnsql_form){var k=[];void 0!==t.learnsql_form&&(k=t.learnsql_form.split(";"));for(var O={},w=0;w<k.length;w++)""!==k[w].trim()&&(O[k[w].trim()]="one");for(var C in O)D+=""===D?C:";"+C}if(void 0===t.bo_data_form&&(t.bo_data_form=""),void 0===t.lazy_load&&(t.lazy_load={}),t.data_form=f,t.learnapi_form=m,t.learnsql_form=D,""===t.data_form&&""===t.learnsql_form&&""===t.learnapi_form&&""===t.bo_data_form&&"{}"===JSON.stringify(t.lazy_load)){var x=s.ZP.autoID();void 0===n?s.ZP.newForm((0,c.jsx)(B,{mapping_key:x,data_select:h,form_code:e,conf:i,infoA:o,set_call_form_back:d,infoA_parent:r,componentConfigDefault:l,ofModal:!1},x)):a.render((0,c.jsx)(B,{mapping_key:x,data_select:h,form_code:e,set_call_form_back:d,infoA_parent:r,componentConfigDefault:l,ofModal:!0,conf:i,infoA:o},x),n)}else""===t.bo_data_form?Cv(e,i,o,n,r,l,d,h,t):(0,F.Yr)([{txcode:t.bo_data_form,input:{}}],r,!0).then((a=>{Cv(e,i,o,n,r,l,d,h,t)}),(t=>{}))}function Cv(t,e,i,o,n,r,l,d,h){void 0!==h&&(""===h.data_form&&delete h.data_form,""===h.learnapi_form&&delete h.learnapi_form,""===h.learnsql_form&&delete h.learnsql_form,""===h.bo_data_form&&delete h.bo_data_form,void 0!==h.lazy_load&&(0===h.lazy_load.c_cdlist.length&&delete h.lazy_load.c_cdlist,0===Object.keys(h.lazy_load).length&&delete h.lazy_load)),(0,F.Yr)([{txcode:"#sys:bo-load-data",input:{table_code:h.data_form,request_data:h,data_select:d}},{txcode:"#sys:bo-load-dataLazy",input:{request_data:h}}],n,!0).then((h=>{let u=s.ZP.foGetData("data_select_result",h);if(void 0===d&&(d={}),void 0!==u)for(var p in u)d[p]=u[p];var _=s.ZP.autoID();void 0===o?s.ZP.newForm((0,c.jsx)(B,{mapping_key:_,form_error:h.form_error,data_select:d,form_code:t,conf:e,infoA:i,set_call_form_back:l,infoA_parent:n,componentConfigDefault:r,ofModal:!1},_)):a.render((0,c.jsx)(B,{mapping_key:_,form_error:h.form_error,data_select:d,set_call_form_back:l,form_code:t,infoA_parent:n,componentConfigDefault:r,ofModal:!0,conf:e,infoA:i},_),o);var f=s.ZP.getParameterSystem("SHOW_GETINFO_ERROR");if(void 0!==f&&f&&void 0!==h){let t=s.ZP.foGetData("infoError",h);void 0!==t&&s.ZP.showToast((s.ZP.isDebug()&&t[0].code?t[0].code+": ":"")+t[0].info,!1)}}),(t=>{}))}const xv=t=>null!=t.form_code?(0,s.x1)(t.form_code):[]},9773:(t,e,i)=>{"use strict";i.d(e,{gM:()=>x,QZ:()=>C,h9:()=>O,z6:()=>w,PD:()=>k});var o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,s=Math.floor,n="[BigNumber Error] ",r=n+"Number primitive has more than 15 significant digits: ",l=1e14,c=14,d=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],u=1e7,p=1e9;function _(t){var e=0|t;return t>0||t===e?e:e-1}function f(t){for(var e,i,o=1,a=t.length,s=t[0]+"";o<a;){for(e=t[o++]+"",i=c-e.length;i--;e="0"+e);s+=e}for(a=s.length;48===s.charCodeAt(--a););return s.slice(0,a+1||1)}function g(t,e){var i,o,a=t.c,s=e.c,n=t.s,r=e.s,l=t.e,c=e.e;if(!n||!r)return null;if(i=a&&!a[0],o=s&&!s[0],i||o)return i?o?0:-r:n;if(n!=r)return n;if(i=n<0,o=l==c,!a||!s)return o?0:!a^i?1:-1;if(!o)return l>c^i?1:-1;for(r=(l=a.length)<(c=s.length)?l:c,n=0;n<r;n++)if(a[n]!=s[n])return a[n]>s[n]^i?1:-1;return l==c?0:l>c^i?1:-1}function m(t,e,i,o){if(t<e||t>i||t!==s(t))throw Error(n+(o||"Argument")+("number"==typeof t?t<e||t>i?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function v(t){var e=t.c.length-1;return _(t.e/c)==e&&t.c[e]%2!=0}function b(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function y(t,e,i){var o,a;if(e<0){for(a=i+".";++e;a+=i);t=a+t}else if(++e>(o=t.length)){for(a=i,e-=o;--e;a+=i);t+=a}else e<o&&(t=t.slice(0,e)+"."+t.slice(e));return t}var A=function t(e){var i,A,D,k=j.prototype={constructor:j,toString:null,valueOf:null},O=new j(1),w=20,C=4,x=-7,S=21,M=-1e7,P=1e7,T=!1,I=1,F=0,N={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},L="0123456789abcdefghijklmnopqrstuvwxyz",E=!0;function j(t,e){var i,a,n,l,h,u,p,_,f=this;if(!(f instanceof j))return new j(t,e);if(null==e){if(t&&!0===t._isBigNumber)return f.s=t.s,void(!t.c||t.e>P?f.c=f.e=null:t.e<M?f.c=[f.e=0]:(f.e=t.e,f.c=t.c.slice()));if((u="number"==typeof t)&&0*t==0){if(f.s=1/t<0?(t=-t,-1):1,t===~~t){for(l=0,h=t;h>=10;h/=10,l++);return void(l>P?f.c=f.e=null:(f.e=l,f.c=[t]))}_=String(t)}else{if(!o.test(_=String(t)))return D(f,_,u);f.s=45==_.charCodeAt(0)?(_=_.slice(1),-1):1}(l=_.indexOf("."))>-1&&(_=_.replace(".","")),(h=_.search(/e/i))>0?(l<0&&(l=h),l+=+_.slice(h+1),_=_.substring(0,h)):l<0&&(l=_.length)}else{if(m(e,2,L.length,"Base"),10==e&&E)return z(f=new j(t),w+f.e+1,C);if(_=String(t),u="number"==typeof t){if(0*t!=0)return D(f,_,u,e);if(f.s=1/t<0?(_=_.slice(1),-1):1,j.DEBUG&&_.replace(/^0\.0*|\./,"").length>15)throw Error(r+t)}else f.s=45===_.charCodeAt(0)?(_=_.slice(1),-1):1;for(i=L.slice(0,e),l=h=0,p=_.length;h<p;h++)if(i.indexOf(a=_.charAt(h))<0){if("."==a){if(h>l){l=p;continue}}else if(!n&&(_==_.toUpperCase()&&(_=_.toLowerCase())||_==_.toLowerCase()&&(_=_.toUpperCase()))){n=!0,h=-1,l=0;continue}return D(f,String(t),u,e)}u=!1,(l=(_=A(_,e,10,f.s)).indexOf("."))>-1?_=_.replace(".",""):l=_.length}for(h=0;48===_.charCodeAt(h);h++);for(p=_.length;48===_.charCodeAt(--p););if(_=_.slice(h,++p)){if(p-=h,u&&j.DEBUG&&p>15&&(t>d||t!==s(t)))throw Error(r+f.s*t);if((l=l-h-1)>P)f.c=f.e=null;else if(l<M)f.c=[f.e=0];else{if(f.e=l,f.c=[],h=(l+1)%c,l<0&&(h+=c),h<p){for(h&&f.c.push(+_.slice(0,h)),p-=c;h<p;)f.c.push(+_.slice(h,h+=c));h=c-(_=_.slice(h)).length}else h-=p;for(;h--;_+="0");f.c.push(+_)}}else f.c=[f.e=0]}function Z(t,e,i,o){var a,s,n,r,l;if(null==i?i=C:m(i,0,8),!t.c)return t.toString();if(a=t.c[0],n=t.e,null==e)l=f(t.c),l=1==o||2==o&&(n<=x||n>=S)?b(l,n):y(l,n,"0");else if(s=(t=z(new j(t),e,i)).e,r=(l=f(t.c)).length,1==o||2==o&&(e<=s||s<=x)){for(;r<e;l+="0",r++);l=b(l,s)}else if(e-=n,l=y(l,s,"0"),s+1>r){if(--e>0)for(l+=".";e--;l+="0");}else if((e+=s-r)>0)for(s+1==r&&(l+=".");e--;l+="0");return t.s<0&&a?"-"+l:l}function R(t,e){for(var i,o,a=1,s=new j(t[0]);a<t.length;a++)(!(o=new j(t[a])).s||(i=g(s,o))===e||0===i&&s.s===e)&&(s=o);return s}function Q(t,e,i){for(var o=1,a=e.length;!e[--a];e.pop());for(a=e[0];a>=10;a/=10,o++);return(i=o+i*c-1)>P?t.c=t.e=null:i<M?t.c=[t.e=0]:(t.e=i,t.c=e),t}function z(t,e,i,o){var n,r,d,u,p,_,f,g=t.c,m=h;if(g){t:{for(n=1,u=g[0];u>=10;u/=10,n++);if((r=e-n)<0)r+=c,d=e,p=g[_=0],f=s(p/m[n-d-1]%10);else if((_=a((r+1)/c))>=g.length){if(!o)break t;for(;g.length<=_;g.push(0));p=f=0,n=1,d=(r%=c)-c+1}else{for(p=u=g[_],n=1;u>=10;u/=10,n++);f=(d=(r%=c)-c+n)<0?0:s(p/m[n-d-1]%10)}if(o=o||e<0||null!=g[_+1]||(d<0?p:p%m[n-d-1]),o=i<4?(f||o)&&(0==i||i==(t.s<0?3:2)):f>5||5==f&&(4==i||o||6==i&&(r>0?d>0?p/m[n-d]:0:g[_-1])%10&1||i==(t.s<0?8:7)),e<1||!g[0])return g.length=0,o?(e-=t.e+1,g[0]=m[(c-e%c)%c],t.e=-e||0):g[0]=t.e=0,t;if(0==r?(g.length=_,u=1,_--):(g.length=_+1,u=m[c-r],g[_]=d>0?s(p/m[n-d]%m[d])*u:0),o)for(;;){if(0==_){for(r=1,d=g[0];d>=10;d/=10,r++);for(d=g[0]+=u,u=1;d>=10;d/=10,u++);r!=u&&(t.e++,g[0]==l&&(g[0]=1));break}if(g[_]+=u,g[_]!=l)break;g[_--]=0,u=1}for(r=g.length;0===g[--r];g.pop());}t.e>P?t.c=t.e=null:t.e<M&&(t.c=[t.e=0])}return t}function U(t){var e,i=t.e;return null===i?t.toString():(e=f(t.c),e=i<=x||i>=S?b(e,i):y(e,i,"0"),t.s<0?"-"+e:e)}return j.clone=t,j.ROUND_UP=0,j.ROUND_DOWN=1,j.ROUND_CEIL=2,j.ROUND_FLOOR=3,j.ROUND_HALF_UP=4,j.ROUND_HALF_DOWN=5,j.ROUND_HALF_EVEN=6,j.ROUND_HALF_CEIL=7,j.ROUND_HALF_FLOOR=8,j.EUCLID=9,j.config=j.set=function(t){var e,i;if(null!=t){if("object"!=typeof t)throw Error(n+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(m(i=t[e],0,p,e),w=i),t.hasOwnProperty(e="ROUNDING_MODE")&&(m(i=t[e],0,8,e),C=i),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((i=t[e])&&i.pop?(m(i[0],-p,0,e),m(i[1],0,p,e),x=i[0],S=i[1]):(m(i,-p,p,e),x=-(S=i<0?-i:i))),t.hasOwnProperty(e="RANGE"))if((i=t[e])&&i.pop)m(i[0],-p,-1,e),m(i[1],1,p,e),M=i[0],P=i[1];else{if(m(i,-p,p,e),!i)throw Error(n+e+" cannot be zero: "+i);M=-(P=i<0?-i:i)}if(t.hasOwnProperty(e="CRYPTO")){if((i=t[e])!==!!i)throw Error(n+e+" not true or false: "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw T=!i,Error(n+"crypto unavailable");T=i}else T=i}if(t.hasOwnProperty(e="MODULO_MODE")&&(m(i=t[e],0,9,e),I=i),t.hasOwnProperty(e="POW_PRECISION")&&(m(i=t[e],0,p,e),F=i),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(i=t[e]))throw Error(n+e+" not an object: "+i);N=i}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(i=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(i))throw Error(n+e+" invalid: "+i);E="0123456789"==i.slice(0,10),L=i}}return{DECIMAL_PLACES:w,ROUNDING_MODE:C,EXPONENTIAL_AT:[x,S],RANGE:[M,P],CRYPTO:T,MODULO_MODE:I,POW_PRECISION:F,FORMAT:N,ALPHABET:L}},j.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!j.DEBUG)return!0;var e,i,o=t.c,a=t.e,r=t.s;t:if("[object Array]"=={}.toString.call(o)){if((1===r||-1===r)&&a>=-p&&a<=p&&a===s(a)){if(0===o[0]){if(0===a&&1===o.length)return!0;break t}if((e=(a+1)%c)<1&&(e+=c),String(o[0]).length==e){for(e=0;e<o.length;e++)if((i=o[e])<0||i>=l||i!==s(i))break t;if(0!==i)return!0}}}else if(null===o&&null===a&&(null===r||1===r||-1===r))return!0;throw Error(n+"Invalid BigNumber: "+t)},j.maximum=j.max=function(){return R(arguments,-1)},j.minimum=j.min=function(){return R(arguments,1)},j.random=function(){var t=9007199254740992,e=Math.random()*t&2097151?function(){return s(Math.random()*t)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(t){var i,o,r,l,d,u=0,_=[],f=new j(O);if(null==t?t=w:m(t,0,p),l=a(t/c),T)if(crypto.getRandomValues){for(i=crypto.getRandomValues(new Uint32Array(l*=2));u<l;)(d=131072*i[u]+(i[u+1]>>>11))>=9e15?(o=crypto.getRandomValues(new Uint32Array(2)),i[u]=o[0],i[u+1]=o[1]):(_.push(d%1e14),u+=2);u=l/2}else{if(!crypto.randomBytes)throw T=!1,Error(n+"crypto unavailable");for(i=crypto.randomBytes(l*=7);u<l;)(d=281474976710656*(31&i[u])+1099511627776*i[u+1]+4294967296*i[u+2]+16777216*i[u+3]+(i[u+4]<<16)+(i[u+5]<<8)+i[u+6])>=9e15?crypto.randomBytes(7).copy(i,u):(_.push(d%1e14),u+=7);u=l/7}if(!T)for(;u<l;)(d=e())<9e15&&(_[u++]=d%1e14);for(l=_[--u],t%=c,l&&t&&(d=h[c-t],_[u]=s(l/d)*d);0===_[u];_.pop(),u--);if(u<0)_=[r=0];else{for(r=-1;0===_[0];_.splice(0,1),r-=c);for(u=1,d=_[0];d>=10;d/=10,u++);u<c&&(r-=c-u)}return f.e=r,f.c=_,f}}(),j.sum=function(){for(var t=1,e=arguments,i=new j(e[0]);t<e.length;)i=i.plus(e[t++]);return i},A=function(){var t="0123456789";function e(t,e,i,o){for(var a,s,n=[0],r=0,l=t.length;r<l;){for(s=n.length;s--;n[s]*=e);for(n[0]+=o.indexOf(t.charAt(r++)),a=0;a<n.length;a++)n[a]>i-1&&(null==n[a+1]&&(n[a+1]=0),n[a+1]+=n[a]/i|0,n[a]%=i)}return n.reverse()}return function(o,a,s,n,r){var l,c,d,h,u,p,_,g,m=o.indexOf("."),v=w,b=C;for(m>=0&&(h=F,F=0,o=o.replace(".",""),p=(g=new j(a)).pow(o.length-m),F=h,g.c=e(y(f(p.c),p.e,"0"),10,s,t),g.e=g.c.length),d=h=(_=e(o,a,s,r?(l=L,t):(l=t,L))).length;0==_[--h];_.pop());if(!_[0])return l.charAt(0);if(m<0?--d:(p.c=_,p.e=d,p.s=n,_=(p=i(p,g,v,b,s)).c,u=p.r,d=p.e),m=_[c=d+v+1],h=s/2,u=u||c<0||null!=_[c+1],u=b<4?(null!=m||u)&&(0==b||b==(p.s<0?3:2)):m>h||m==h&&(4==b||u||6==b&&1&_[c-1]||b==(p.s<0?8:7)),c<1||!_[0])o=u?y(l.charAt(1),-v,l.charAt(0)):l.charAt(0);else{if(_.length=c,u)for(--s;++_[--c]>s;)_[c]=0,c||(++d,_=[1].concat(_));for(h=_.length;!_[--h];);for(m=0,o="";m<=h;o+=l.charAt(_[m++]));o=y(o,d,l.charAt(0))}return o}}(),i=function(){function t(t,e,i){var o,a,s,n,r=0,l=t.length,c=e%u,d=e/u|0;for(t=t.slice();l--;)r=((a=c*(s=t[l]%u)+(o=d*s+(n=t[l]/u|0)*c)%u*u+r)/i|0)+(o/u|0)+d*n,t[l]=a%i;return r&&(t=[r].concat(t)),t}function e(t,e,i,o){var a,s;if(i!=o)s=i>o?1:-1;else for(a=s=0;a<i;a++)if(t[a]!=e[a]){s=t[a]>e[a]?1:-1;break}return s}function i(t,e,i,o){for(var a=0;i--;)t[i]-=a,a=t[i]<e[i]?1:0,t[i]=a*o+t[i]-e[i];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(o,a,n,r,d){var h,u,p,f,g,m,v,b,y,A,D,k,O,w,C,x,S,M=o.s==a.s?1:-1,P=o.c,T=a.c;if(!P||!P[0]||!T||!T[0])return new j(o.s&&a.s&&(P?!T||P[0]!=T[0]:T)?P&&0==P[0]||!T?0*M:M/0:NaN);for(y=(b=new j(M)).c=[],M=n+(u=o.e-a.e)+1,d||(d=l,u=_(o.e/c)-_(a.e/c),M=M/c|0),p=0;T[p]==(P[p]||0);p++);if(T[p]>(P[p]||0)&&u--,M<0)y.push(1),f=!0;else{for(w=P.length,x=T.length,p=0,M+=2,(g=s(d/(T[0]+1)))>1&&(T=t(T,g,d),P=t(P,g,d),x=T.length,w=P.length),O=x,D=(A=P.slice(0,x)).length;D<x;A[D++]=0);S=T.slice(),S=[0].concat(S),C=T[0],T[1]>=d/2&&C++;do{if(g=0,(h=e(T,A,x,D))<0){if(k=A[0],x!=D&&(k=k*d+(A[1]||0)),(g=s(k/C))>1)for(g>=d&&(g=d-1),v=(m=t(T,g,d)).length,D=A.length;1==e(m,A,v,D);)g--,i(m,x<v?S:T,v,d),v=m.length,h=1;else 0==g&&(h=g=1),v=(m=T.slice()).length;if(v<D&&(m=[0].concat(m)),i(A,m,D,d),D=A.length,-1==h)for(;e(T,A,x,D)<1;)g++,i(A,x<D?S:T,D,d),D=A.length}else 0===h&&(g++,A=[0]);y[p++]=g,A[0]?A[D++]=P[O]||0:(A=[P[O]],D=1)}while((O++<w||null!=A[0])&&M--);f=null!=A[0],y[0]||y.splice(0,1)}if(d==l){for(p=1,M=y[0];M>=10;M/=10,p++);z(b,n+(b.e=p+u*c-1)+1,r,f)}else b.e=u,b.r=+f;return b}}(),D=function(){var t=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,i=/^\.([^.]+)$/,o=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(s,r,l,c){var d,h=l?r:r.replace(a,"");if(o.test(h))s.s=isNaN(h)?null:h<0?-1:1;else{if(!l&&(h=h.replace(t,(function(t,e,i){return d="x"==(i=i.toLowerCase())?16:"b"==i?2:8,c&&c!=d?t:e})),c&&(d=c,h=h.replace(e,"$1").replace(i,"0.$1")),r!=h))return new j(h,d);if(j.DEBUG)throw Error(n+"Not a"+(c?" base "+c:"")+" number: "+r);s.s=null}s.c=s.e=null}}(),k.absoluteValue=k.abs=function(){var t=new j(this);return t.s<0&&(t.s=1),t},k.comparedTo=function(t,e){return g(this,new j(t,e))},k.decimalPlaces=k.dp=function(t,e){var i,o,a,s=this;if(null!=t)return m(t,0,p),null==e?e=C:m(e,0,8),z(new j(s),t+s.e+1,e);if(!(i=s.c))return null;if(o=((a=i.length-1)-_(this.e/c))*c,a=i[a])for(;a%10==0;a/=10,o--);return o<0&&(o=0),o},k.dividedBy=k.div=function(t,e){return i(this,new j(t,e),w,C)},k.dividedToIntegerBy=k.idiv=function(t,e){return i(this,new j(t,e),0,1)},k.exponentiatedBy=k.pow=function(t,e){var i,o,r,l,d,h,u,p,_=this;if((t=new j(t)).c&&!t.isInteger())throw Error(n+"Exponent not an integer: "+U(t));if(null!=e&&(e=new j(e)),d=t.e>14,!_.c||!_.c[0]||1==_.c[0]&&!_.e&&1==_.c.length||!t.c||!t.c[0])return p=new j(Math.pow(+U(_),d?t.s*(2-v(t)):+U(t))),e?p.mod(e):p;if(h=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new j(NaN);(o=!h&&_.isInteger()&&e.isInteger())&&(_=_.mod(e))}else{if(t.e>9&&(_.e>0||_.e<-1||(0==_.e?_.c[0]>1||d&&_.c[1]>=24e7:_.c[0]<8e13||d&&_.c[0]<=9999975e7)))return l=_.s<0&&v(t)?-0:0,_.e>-1&&(l=1/l),new j(h?1/l:l);F&&(l=a(F/c+2))}for(d?(i=new j(.5),h&&(t.s=1),u=v(t)):u=(r=Math.abs(+U(t)))%2,p=new j(O);;){if(u){if(!(p=p.times(_)).c)break;l?p.c.length>l&&(p.c.length=l):o&&(p=p.mod(e))}if(r){if(0===(r=s(r/2)))break;u=r%2}else if(z(t=t.times(i),t.e+1,1),t.e>14)u=v(t);else{if(0===(r=+U(t)))break;u=r%2}_=_.times(_),l?_.c&&_.c.length>l&&(_.c.length=l):o&&(_=_.mod(e))}return o?p:(h&&(p=O.div(p)),e?p.mod(e):l?z(p,F,C,undefined):p)},k.integerValue=function(t){var e=new j(this);return null==t?t=C:m(t,0,8),z(e,e.e+1,t)},k.isEqualTo=k.eq=function(t,e){return 0===g(this,new j(t,e))},k.isFinite=function(){return!!this.c},k.isGreaterThan=k.gt=function(t,e){return g(this,new j(t,e))>0},k.isGreaterThanOrEqualTo=k.gte=function(t,e){return 1===(e=g(this,new j(t,e)))||0===e},k.isInteger=function(){return!!this.c&&_(this.e/c)>this.c.length-2},k.isLessThan=k.lt=function(t,e){return g(this,new j(t,e))<0},k.isLessThanOrEqualTo=k.lte=function(t,e){return-1===(e=g(this,new j(t,e)))||0===e},k.isNaN=function(){return!this.s},k.isNegative=function(){return this.s<0},k.isPositive=function(){return this.s>0},k.isZero=function(){return!!this.c&&0==this.c[0]},k.minus=function(t,e){var i,o,a,s,n=this,r=n.s;if(e=(t=new j(t,e)).s,!r||!e)return new j(NaN);if(r!=e)return t.s=-e,n.plus(t);var d=n.e/c,h=t.e/c,u=n.c,p=t.c;if(!d||!h){if(!u||!p)return u?(t.s=-e,t):new j(p?n:NaN);if(!u[0]||!p[0])return p[0]?(t.s=-e,t):new j(u[0]?n:3==C?-0:0)}if(d=_(d),h=_(h),u=u.slice(),r=d-h){for((s=r<0)?(r=-r,a=u):(h=d,a=p),a.reverse(),e=r;e--;a.push(0));a.reverse()}else for(o=(s=(r=u.length)<(e=p.length))?r:e,r=e=0;e<o;e++)if(u[e]!=p[e]){s=u[e]<p[e];break}if(s&&(a=u,u=p,p=a,t.s=-t.s),(e=(o=p.length)-(i=u.length))>0)for(;e--;u[i++]=0);for(e=l-1;o>r;){if(u[--o]<p[o]){for(i=o;i&&!u[--i];u[i]=e);--u[i],u[o]+=l}u[o]-=p[o]}for(;0==u[0];u.splice(0,1),--h);return u[0]?Q(t,u,h):(t.s=3==C?-1:1,t.c=[t.e=0],t)},k.modulo=k.mod=function(t,e){var o,a,s=this;return t=new j(t,e),!s.c||!t.s||t.c&&!t.c[0]?new j(NaN):!t.c||s.c&&!s.c[0]?new j(s):(9==I?(a=t.s,t.s=1,o=i(s,t,0,3),t.s=a,o.s*=a):o=i(s,t,0,I),(t=s.minus(o.times(t))).c[0]||1!=I||(t.s=s.s),t)},k.multipliedBy=k.times=function(t,e){var i,o,a,s,n,r,d,h,p,f,g,m,v,b,y,A=this,D=A.c,k=(t=new j(t,e)).c;if(!D||!k||!D[0]||!k[0])return!A.s||!t.s||D&&!D[0]&&!k||k&&!k[0]&&!D?t.c=t.e=t.s=null:(t.s*=A.s,D&&k?(t.c=[0],t.e=0):t.c=t.e=null),t;for(o=_(A.e/c)+_(t.e/c),t.s*=A.s,(d=D.length)<(f=k.length)&&(v=D,D=k,k=v,a=d,d=f,f=a),a=d+f,v=[];a--;v.push(0));for(b=l,y=u,a=f;--a>=0;){for(i=0,g=k[a]%y,m=k[a]/y|0,s=a+(n=d);s>a;)i=((h=g*(h=D[--n]%y)+(r=m*h+(p=D[n]/y|0)*g)%y*y+v[s]+i)/b|0)+(r/y|0)+m*p,v[s--]=h%b;v[s]=i}return i?++o:v.splice(0,1),Q(t,v,o)},k.negated=function(){var t=new j(this);return t.s=-t.s||null,t},k.plus=function(t,e){var i,o=this,a=o.s;if(e=(t=new j(t,e)).s,!a||!e)return new j(NaN);if(a!=e)return t.s=-e,o.minus(t);var s=o.e/c,n=t.e/c,r=o.c,d=t.c;if(!s||!n){if(!r||!d)return new j(a/0);if(!r[0]||!d[0])return d[0]?t:new j(r[0]?o:0*a)}if(s=_(s),n=_(n),r=r.slice(),a=s-n){for(a>0?(n=s,i=d):(a=-a,i=r),i.reverse();a--;i.push(0));i.reverse()}for((a=r.length)-(e=d.length)<0&&(i=d,d=r,r=i,e=a),a=0;e;)a=(r[--e]=r[e]+d[e]+a)/l|0,r[e]=l===r[e]?0:r[e]%l;return a&&(r=[a].concat(r),++n),Q(t,r,n)},k.precision=k.sd=function(t,e){var i,o,a,s=this;if(null!=t&&t!==!!t)return m(t,1,p),null==e?e=C:m(e,0,8),z(new j(s),t,e);if(!(i=s.c))return null;if(o=(a=i.length-1)*c+1,a=i[a]){for(;a%10==0;a/=10,o--);for(a=i[0];a>=10;a/=10,o++);}return t&&s.e+1>o&&(o=s.e+1),o},k.shiftedBy=function(t){return m(t,-9007199254740991,d),this.times("1e"+t)},k.squareRoot=k.sqrt=function(){var t,e,o,a,s,n=this,r=n.c,l=n.s,c=n.e,d=w+4,h=new j("0.5");if(1!==l||!r||!r[0])return new j(!l||l<0&&(!r||r[0])?NaN:r?n:1/0);if(0==(l=Math.sqrt(+U(n)))||l==1/0?(((e=f(r)).length+c)%2==0&&(e+="0"),l=Math.sqrt(+e),c=_((c+1)/2)-(c<0||c%2),o=new j(e=l==1/0?"5e"+c:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+c)):o=new j(l+""),o.c[0])for((l=(c=o.e)+d)<3&&(l=0);;)if(s=o,o=h.times(s.plus(i(n,s,d,1))),f(s.c).slice(0,l)===(e=f(o.c)).slice(0,l)){if(o.e<c&&--l,"9999"!=(e=e.slice(l-3,l+1))&&(a||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(z(o,o.e+w+2,1),t=!o.times(o).eq(n));break}if(!a&&(z(s,s.e+w+2,0),s.times(s).eq(n))){o=s;break}d+=4,l+=4,a=1}return z(o,o.e+w+1,C,t)},k.toExponential=function(t,e){return null!=t&&(m(t,0,p),t++),Z(this,t,e,1)},k.toFixed=function(t,e){return null!=t&&(m(t,0,p),t=t+this.e+1),Z(this,t,e)},k.toFormat=function(t,e,i){var o,a=this;if(null==i)null!=t&&e&&"object"==typeof e?(i=e,e=null):t&&"object"==typeof t?(i=t,t=e=null):i=N;else if("object"!=typeof i)throw Error(n+"Argument not an object: "+i);if(o=a.toFixed(t,e),a.c){var s,r=o.split("."),l=+i.groupSize,c=+i.secondaryGroupSize,d=i.groupSeparator||"",h=r[0],u=r[1],p=a.s<0,_=p?h.slice(1):h,f=_.length;if(c&&(s=l,l=c,c=s,f-=s),l>0&&f>0){for(s=f%l||l,h=_.substr(0,s);s<f;s+=l)h+=d+_.substr(s,l);c>0&&(h+=d+_.slice(s)),p&&(h="-"+h)}o=u?h+(i.decimalSeparator||"")+((c=+i.fractionGroupSize)?u.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):u):h}return(i.prefix||"")+o+(i.suffix||"")},k.toFraction=function(t){var e,o,a,s,r,l,d,u,p,_,g,m,v=this,b=v.c;if(null!=t&&(!(d=new j(t)).isInteger()&&(d.c||1!==d.s)||d.lt(O)))throw Error(n+"Argument "+(d.isInteger()?"out of range: ":"not an integer: ")+U(d));if(!b)return new j(v);for(e=new j(O),p=o=new j(O),a=u=new j(O),m=f(b),r=e.e=m.length-v.e-1,e.c[0]=h[(l=r%c)<0?c+l:l],t=!t||d.comparedTo(e)>0?r>0?e:p:d,l=P,P=1/0,d=new j(m),u.c[0]=0;_=i(d,e,0,1),1!=(s=o.plus(_.times(a))).comparedTo(t);)o=a,a=s,p=u.plus(_.times(s=p)),u=s,e=d.minus(_.times(s=e)),d=s;return s=i(t.minus(o),a,0,1),u=u.plus(s.times(p)),o=o.plus(s.times(a)),u.s=p.s=v.s,g=i(p,a,r*=2,C).minus(v).abs().comparedTo(i(u,o,r,C).minus(v).abs())<1?[p,a]:[u,o],P=l,g},k.toNumber=function(){return+U(this)},k.toPrecision=function(t,e){return null!=t&&m(t,1,p),Z(this,t,e,2)},k.toString=function(t){var e,i=this,o=i.s,a=i.e;return null===a?o?(e="Infinity",o<0&&(e="-"+e)):e="NaN":(null==t?e=a<=x||a>=S?b(f(i.c),a):y(f(i.c),a,"0"):10===t&&E?e=y(f((i=z(new j(i),w+a+1,C)).c),i.e,"0"):(m(t,2,L.length,"Base"),e=A(y(f(i.c),a,"0"),10,t,o,!0)),o<0&&i.c[0]&&(e="-"+e)),e},k.valueOf=k.toJSON=function(){return U(this)},k._isBigNumber=!0,k[Symbol.toStringTag]="BigNumber",k[Symbol.for("nodejs.util.inspect.custom")]=k.valueOf,null!=e&&j.set(e),j}();const D=A;function k(t,e){let i=new D(t),o=new D(e),a=i.plus(o);return"number"===typeof a.toNumber()&&isNaN(a.toNumber())?"":a.toFixed()}function O(t,e){let i=new D(t),o=new D(e),a=i.minus(o);return"number"===typeof a.toNumber()&&isNaN(a.toNumber())?"":a.toFixed()}function w(t,e){var i,o;let a=new D(t),s=new D(e),[n,r]=t.split("."),[l,c]=e.split(".");r||(r=""),c||(c="");let d=Math.max((null===(i=r)||void 0===i?void 0:i.length)||0,(null===(o=c)||void 0===o?void 0:o.length)||0),h=a.multipliedBy(s);return"number"===typeof h.toNumber()&&isNaN(h.toNumber())?"":h.toFixed(d)}function C(t,e){var i,o;let a=new D(t),s=new D(e),[n,r]=t.split("."),[l,c]=e.split(".");r||(r=""),c||(c="");let d=Math.max((null===(i=r)||void 0===i?void 0:i.length)||0,(null===(o=c)||void 0===o?void 0:o.length)||0),h=a.dividedBy(s);return"number"!==typeof h.toNumber()||!isNaN(h.toNumber())&&isFinite(h.toNumber())?h.toFixed(d):""}function x(t,e){t+="",e+="";const[i,o]=t.split("."),[a,s]=e.split(".");if(i<a)return"less";if(i>a)return"greater";{const t=Math.max((null===o||void 0===o?void 0:o.length)||0,(null===s||void 0===s?void 0:s.length)||0),e=(o||"").padEnd(t,"0"),i=(s||"").padEnd(t,"0");return e<i?"less":e>i?"greater":"equal"}}},3745:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>s});var o=i(5842),a=i(1896);class s{static quickPost(t,e){(0,a.Yr)(t,e).then((t=>{}),(t=>{}))}static fo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};t=o.ZP.convertFoOfApp_fo_arr(t);for(let a=0;a<t.length;a++){let e=t[a];if(void 0!==e.txcode){if(!o.ZP.BlackList_check("tx_fo",e.txcode))return;let s=t[a];void 0!==s.txcode&&void 0===o.ZP.getTxFo(e.txcode)&&(i[s.txcode]=s.txcode)}}let s="";for(let o in i)""===s?s=o:s+=";"+o;i=o.ZP.convertFoOfApp_fo_check(i),""===s?this.runTx(t,e):(0,a.Yr)([{txcode:"#sys:bo-load-txFo",input:{list_tx:s}}],e).then((a=>{if(void 0!==a.fo&&a.fo.length>0&&void 0!==a.fo[0].input){let t=a.fo[0].input;if(void 0!==t.txClient)for(let e=0;e<t.txClient.length;e++)void 0!==t.txClient[e].txcode&&void 0!==t.txClient[e].actions&&(delete i[t.txClient[e].txcode],-1===a.fo[0].txcode.indexOf(t.txClient[e].txcode)?o.ZP.addTxFo(t.txClient[e].txcode,t.txClient[e]):o.ZP.addTxFo(a.fo[0].txcode,t.txClient[e]))}let s="";for(let t in i)o.ZP.BlackList_add("tx_fo",t),s+=""===s?t:";"+t;""!==s?o.ZP.AppException("#libClient001",s,"system"):this.runTx(t,e)}),(t=>{}))}static createContext(t,e,i,o){return{infoA:e,infoA_parent:i,componentConfigDefault:o,data:t}}static runActionWithContext(t,e,i,a,s){if(void 0!==i&&void 0!==s){let n=this.createContext(e,i,a,s),r=i.key_form+s.codeHidden;o.ZP.addTxFo(r,{input:{},actions:t,status:"A",txtype:"bo",txcode:r,txname:""}),this.runTx([{txcode:r,input:{}}],n)}}static runFoWithContext(t,e,i,o,a){if(void 0!==i&&void 0!==a){let s={infoA:i,infoA_parent:o,componentConfigDefault:a,data:e};this.fo(t,s)}}static checkFo(t){if(void 0!==t){let e=o.ZP.convertFoOfApp_fo_arr_no_app(t);for(let t=0;t<e.length;t++){let i=e[t];if(void 0!==i.txcode&&!o.ZP.checkSystemModeLock_bo_fo(i.txcode,void 0))return!1}}return!0}static runTx(t,e,i){if(!this.checkFo(t))return;let a=0,s=!0;void 0!==i&&s&&(a=i.fo_arr_step,t=i.fo_arr,e=i.context);for(let l=a;l<t.length;l++){let a=t[l];if(void 0!==a.txcode){let c={};void 0!==a.input&&(c=a.input);let d=o.ZP.getTxFo(a.txcode);if(void 0!==d&&d.actions){let h=d.actions,u={},p=[],_=0;void 0!==i&&s&&(u=i.input_fo,_=i.fo_step,p=i.list_bo_new);for(let d=_;d<h.length;d++)if(void 0!==h[d].function){let _=h[d].function.split(".");if(_.length>=2){let f,g={};if(void 0!==i&&s&&(f=i.val_select,g=i.input_action),void 0===f){let i=null;try{i=new(o.ZP.txBasic_get()[_[0].trim()])(e,a.input,g,d,l,u,p,t)}catch(r){o.ZP.AppException("#libClient003",_[0].trim(),"system")}if(null===i||void 0===i)return;if(i.hasOwnProperty(_[1].trim()))if(void 0!==h[d].para){let t=h[d].para,e=o.ZP.supportReplaceFo(o.ZP.cloneJson(c),{});for(let i=0;i<t.length;i++){let o=t[i];o.length>0&&"@"===o.substring(0,1)&&(t[i]=n(o.substring(1,o.length),e))}f=i[_[1].trim()].apply(i,Array.prototype.slice.call(t,0))}else f=i[_[1].trim()]();else o.ZP.BlackList_check("function",h[d].function)&&(o.ZP.BlackList_add("function",h[d].function),o.ZP.AppException("#libClient002",h[d].function,"system"));g=i.getInputAction()}if(void 0!==f){if("systemStop"===f)return;f=f.toString()}else f="_default_";if(void 0!==g)for(let t in g)u[t]=g[t];if(void 0!==h[d].request){if(void 0!==f&&void 0!==h[d].request[f]&&void 0!==h[d].request[f].cmd){if("stop"===h[d].request[f].cmd)return}this.buildBoFormAction(p,h[d].request,f,g,void 0,c)}}s=!1}void 0!==d.request&&this.buildBoFormAction(p,void 0,void 0,u,d.request,c),void 0!==p&&p.length>0&&this.quickPost(p,e)}}}}static buildBoFormAction(t,e,i,o,a,s){let n;if(void 0===a?(void 0!==i&&void 0!==e[i]&&(n=e[i]),void 0===n&&void 0!==e._default_&&(n=e._default_)):n=a,void 0!==n&&void 0!==n.bo&&n.bo.length>0)for(let r=0;r<n.bo.length;r++){let e=n.bo[r];if(void 0!==e.txcode&&""!==e.txcode.trim()){let i={};for(let t in o)i[t]=o[t];if(void 0!==e.input){let t=e.input;t=this.loopRepaceData(t,s);for(let o in e.input)i[o]=e.input[o]}t[t.length]={txcode:e.txcode,input:i}}}}static loopRepaceData(t,e){if(void 0!==t&&void 0!==e)for(let i in t)switch(Object.prototype.toString.call(t[i])){case"[object String]":let o=t[i];o.length>0&&"@"===o.substring(0,1)&&(t[i]=r(o.substring(1,o.length),e));break;case"[object Number]":case"[object Boolean]":default:break;case"[object Array]":if(t[i].length>0)for(let a=0;a<t[i].length;a++)t[i][a]=this.loopRepaceData(t[i][a],e);break;case"[object Object]":t[i]=this.loopRepaceData(t[i],e)}return t}}const n=(t,e)=>{if(!t.includes("."))return e[t];{let i=t.split(".");if(i.length>1){let t=e;for(let e=0;e<i.length;e++){if(void 0===t[i[e]])return;t=t[i[e]]}return t}}},r=(t,e)=>e[t]},1372:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{QH:()=>checkConditions});const checkConditions=(data,condition)=>{if(""!==condition.trim())try{return eval("let wf="+JSON.stringify(data)+";"+condition)}catch(_unused){return!1}return!0},checkConditionsNoContext=condition=>{if(""!==condition.trim())try{return eval(condition)}catch(_unused2){return!1}return!0};class libConditions{}},84:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var o=i(5842);class a{static analyticsTable(t){if(void 0!==t)for(var e in t){var i=(0,o.Ot)(e);if(void 0!==i){if(null!=i.detail)for(var a=i.detail,s=0;s<a.length;s++){var n=a[s];void 0!==n.code&&void 0!==n.datapk&&void 0!==n.autoseq&&void 0!==n.type&&(void 0!==t[e][n.code]?n.autoseq:"true"===n.datapk&&("object"!==typeof t[e]&&(t[e]={}),t[e][n.code]=o.ZP.autoID()),void 0!==n.fileid&&"true"===n.fileid&&(t[e].AFGHkeyIndexWJ=t[e][n.code]))}void 0===t[e].AFGHkeyUserCreateWJ&&(t[e].AFGHkeyUserCreateWJ=o.ZP.context_get("user_jwebui.user_id")),void 0!==t[e].AFGHkeyIndexWJ&&""!==t[e].AFGHkeyIndexWJ||(t[e].AFGHkeyIndexWJ=o.ZP.autoID()),t[e].AFGHkeyTime=o.ZP.getLongTime(),void 0===t[e].AFGHkeyWorkFlow&&(t[e].AFGHkeyWorkFlow="")}}return t}}},4200:(t,e,i)=>{"use strict";i.d(e,{Qv:()=>s,X7:()=>r,ZP:()=>l,ji:()=>a,p6:()=>n});var o=i(5842);function a(t,e){if(void 0!==e&&void 0!==t){if("dd/mm/yyyy"===e.trim())return function(t){let e=t.split("/");if(e.length>=3){let t=new Date(`${e[2]}/${e[1]}/${e[0]}`);if(void 0!==t&&null!=t)return t.getTime()}return null}(t)}return null}function s(t,e){if(void 0!==t&&void 0!==e){let i=new Date(t),o=e.trim();if(null!=i&&"ISOString"===o)return i.toISOString()}return null}function n(t,e){return window.moment(t).format(e)}function r(t,e,i,a){if(""===t)return"";if(Number(t))t=Number(t);else{var s,n;let e=o.ZP.getParameterSystem("TIMEZONE")||"+0700";t=Number(a?null===(s=window.moment.utc(t))||void 0===s?void 0:s.valueOf():null===(n=window.moment(t,i))||void 0===n?void 0:n.utcOffset(e).toDate().getTime())}var r=window.moment(t);for(const o in e)if(e.hasOwnProperty(o)){const t=e[o];r=window.moment(r.add(t,o))}return r.valueOf()}class l{}l.getFullYear=t=>new Date(Number(t)).getFullYear()},6633:(t,e,i)=>{"use strict";i.d(e,{AH:()=>d,Al:()=>l,FT:()=>m,FW:()=>g,Nx:()=>v,Ui:()=>b,X2:()=>f,cI:()=>r,ec:()=>s,jl:()=>_,ng:()=>c,sx:()=>u,w5:()=>n,xY:()=>p});var o=i(5842);function a(t){return/\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d/.test(t)}function s(t,e,i){var s,n,r,l;let c=o.ZP.getParameterSystem("TIMEZONE")||"+0700";if(void 0===t||null===t||""===t||0===t)return 0;Number(t)||t.endsWith("Z")||(t+=(a(t)?"":" ")+c);let d="MM/DD/YYYY HH:mm:ss";-1!==o.ZP.getMyDevice().browser.indexOf("Chrome")&&(d="MM/DD/YYYY HH:mm:ss.SSS");let h=null===(s=window.moment(t,e))||void 0===s?void 0:s.format(d);var u,p,_,f;0===e.indexOf("DD")&&void 0!==t&&null!==t&&(h=(null===(u=t)||void 0===u?void 0:u.substring(3,6))+(null===(p=t)||void 0===p?void 0:p.substring(0,3))+(null===(_=t)||void 0===_?void 0:_.substring(6,null===(f=t)||void 0===f?void 0:f.length)));switch(i){case"utc":return null===(n=window.moment.utc(t,e))||void 0===n?void 0:n.toDate().getTime();case"time_zone_user":return null===(r=window.moment(h+(a(h)?"":" ")+c))||void 0===r?void 0:r.utcOffset(c).valueOf();default:return null===(l=window.moment(h+(a(h)?"":" ")+c))||void 0===l?void 0:l.valueOf()}}function n(t,e,i){var s,n,r,l;let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"date",d=o.ZP.getParameterSystem("TIMEZONE")||"+0700",u=h(null===(s=o.ZP.context_get("user_acc"))||void 0===s?void 0:s.time_zone);if(void 0==t||null===t||""===t)return"";"time"===c&&(t=function(t){let[e,i,o]=t.split(":").map(Number);return o||o>59&&(i+=Math.floor(o/60),o%=60),i>59&&(e+=Math.floor(i/60),i%=60),e>=24&&(e%=24),`${e<10?"0"+e:e}:${i<10?"0"+i:i}`+(void 0!==o?`:${o<10?"0"+o:o}`:"")}(t));let p,_="MM/DD/YYYY HH:mm:ss";switch(-1!==o.ZP.getMyDevice().browser.indexOf("Chrome")&&(_="MM/DD/YYYY HH:mm:ss.SSS"),i){case"utc":t+="Z",p=null===(n=window.moment.utc(t,e))||void 0===n?void 0:n.valueOf();break;case"time_zone_user":t+=(a(t)?"":" ")+u;let i=null===(r=window.moment(t,e))||void 0===r?void 0:r.format(_);p=new Date(i+(a(i)?"":" ")+u).getTime();break;default:t+=(a(t)?"":" ")+d;let o=null===(l=window.moment(t,e))||void 0===l?void 0:l.format(_);p=new Date(o+(a(o)?"":" ")+d).getTime()}return p}function r(t,e){var i;return null===(i=window.moment.utc(t,e))||void 0===i?void 0:i.toDate().getTime()}function l(t,e,i,a){var s,n;let r=o.ZP.getParameterSystem("TIMEZONE")||"+0700",l=null===(s=window.moment(t,e))||void 0===s?void 0:s.utcOffset(r).toDate().getTime();var c,d;return t.endsWith("Z")?(l=null===(c=window.moment.utc(t,e))||void 0===c?void 0:c.utcOffset(r).toDate().getTime(),null===(d=window.moment.utc(l))||void 0===d?void 0:d.format(i)):null===(n=window.moment(l))||void 0===n?void 0:n.format(i)}function c(t,e,i){var a,s;h(null===(a=o.ZP.context_get("user_acc"))||void 0===a?void 0:a.time_zone);if(void 0==t||null===t||""===t)return"";t.includes(":")||(t+=" 00:00:00");let n="MM/DD/YYYY HH:mm:ss";return-1!==o.ZP.getMyDevice().browser.indexOf("Chrome")&&"MM/DD/YYYY HH:mm:ss.SSS",t+="Z",null===(s=window.moment.utc(t,e))||void 0===s?void 0:s.valueOf()}function d(t,e,i){let a=o.ZP.getParameterSystem("TIMEZONE")||"+0700";var s;return null!==t&&void 0!==t?null===(s=window.moment(t))||void 0===s?void 0:s.utcOffset(a).format(e):""}function h(t){let e="",i=!1,o=(t%1).toFixed(2),a=t-o;(o<0||a<0)&&(i=!0,o=-o,a=-a);let s=60*o;return e+=s,s<10&&(e="0"+e),e=a+e,a<10&&(e="0"+e),(i?"-":"+")+e}function u(t,e,i){var a,s,n;let r=o.ZP.getParameterSystem("TIMEZONE")||"+0700",l=h(o.ZP.context_get("user_acc").time_zone);if(null===t||void 0===t||""===t)return"";switch(i){case"utc":return null===(a=window.moment.utc(t))||void 0===a?void 0:a.format(e);case"time_zone_user":return null===(s=window.moment(t))||void 0===s?void 0:s.utcOffset(l).format(e);default:return null===(n=window.moment(t))||void 0===n?void 0:n.utcOffset(r).format(e)}}function p(t){if(void 0===t||null===t||""===t)return"";if(0===t)return 0;return Number(t)||t.endsWith("Z")||(t.includes(":")||(t+=" 00:00:00"),t+=(a(t)?"":" ")+o.ZP.getParameterSystem("TIMEZONE")||"+0700"),new Date(t).getTime()}function _(t,e){var i;return null!==t&&void 0!==t?null===(i=window.moment.utc(t))||void 0===i?void 0:i.format(e):""}function f(t,e){var i,o;return null!==t&&void 0!==t?arguments.length>2&&void 0!==arguments[2]&&arguments[2]?null===(i=window.moment.utc(t))||void 0===i?void 0:i.format(e):null===(o=window.moment(t))||void 0===o?void 0:o.format(e):""}function g(t,e,i){let s=o.ZP.getParameterSystem("TIMEZONE")||"+0700";var n;return null!==t&&void 0!==t?(Number(t)||t.endsWith("Z")||(t+=(a(t)?"":" ")+s),null===(n=window.moment(Number(new Date(t).getTime())))||void 0===n?void 0:n.utcOffset(s).format(e)):""}function m(t,e){var i;return null!==t&&void 0!==t&&""!==t?null===(i=window.moment.utc(Number(t)))||void 0===i?void 0:i.format(e):""}function v(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".";if(Number.isNaN(t)||void 0===t||null===t||""===t)return;let a=t=t.toString(),s="",n=t.lastIndexOf(o);-1!==n&&(a=t.substring(0,n),a=a.replace(/^-0+/,""),a=a.replace(/^0+/,""),s=t.substring(n,t.length),""===a&&(a="0")),a=a.replace(/\D/g,""),s=s.replace(/\D/g,"");let r=`${a}.${Number(`0.${s}`).toFixed(e).split(".")[1]||""}`;a=r.split(".")[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`),t.includes("-")&&(a="-"+a),s=r.split(".")[1];let l=`${a}${o}${s}`;return""===s&&(l=a),""!==l?l:void 0}function b(t,e){if(!t||!e)return"";let i="",o=0;for(let a=0;a<e.length;a++)"-"===e[a]?i+="-":o<t.length?i+=t[o++]:i+=e[a];return i}},7904:(t,e,i)=>{"use strict";i.d(e,{Ft:()=>v,JF:()=>y,R2:()=>m,ZP:()=>p,fe:()=>b,h1:()=>A,yw:()=>g});var o=i(3745),a=i(5842),s={ctrlKey:{Period:{fo:[{txcode:"#sys:fo-keyboard-openDebug",input:{}}],context:{}},117:{fo:[{txcode:"fo-open-latestTransaction",input:{}}],context:{}}},altKey_ctrlKey:{},altKey:{},shiftKey:{Slash:{fo:[{txcode:"#sys:fo-open-modal-keyboard",input:{}}],context:{}}},shiftKey_altKey:{},shiftKey_ctrlKey:{},shiftKey_altKey_ctrlKey:{},metaKey_shiftKey_altKey_ctrlKey:{},metaKey_shiftKey_altKey:{},metaKey_shiftKey_ctrlKey:{},metaKey_altKey_ctrlKey:{},metaKey_altKey:{},metaKey_ctrlKey:{},metaKey_shiftKey:{},metaKey:{}},n=!1,r=[],l=[],c=0,d={metaKey:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,code:"",keyCode:-1},h={},u=["cm-content","jsoneditor-field","jsoneditor-value","public-DraftEditor-content"];class p{static startKeyboard(t){document.addEventListener("keyup",_),document.addEventListener("keydown",f)}}function _(t){n||"textarea"===document.activeElement.localName||"input"===document.activeElement.localName||Array.from(document.activeElement.classList).some((t=>u.indexOf(t)>=0))||(16===t.keyCode?c++:c=0,-1!==a.ZP.getMyDevice().osVersion.toLocaleLowerCase().replace(" ","").indexOf("macos")&&!0===d.metaKey&&"Meta"===t.key?(d.metaKey&&d.shiftKey&&d.altKey&&d.ctrlKey&&16!==d.keyCode&&91!==d.keyCode&&93!==d.keyCode&&18!==d.keyCode&&17!==d.keyCode?D("metaKey_shiftKey_altKey_ctrlKey",d.code):d.shiftKey&&d.altKey&&d.ctrlKey&&16!==t.keyCode&&18!==t.keyCode&&17!==t.keyCode?D("shiftKey_altKey_ctrlKey",t.code):d.metaKey&&d.shiftKey&&d.altKey&&16!==d.keyCode&&18!==d.keyCode&&91!==d.keyCode&&93!==d.keyCode?D("metaKey_shiftKey_altKey",d.code):d.metaKey&&d.ctrlKey&&d.shiftKey&&17!==d.keyCode&&16!==d.keyCode&&91!==d.keyCode&&93!==d.keyCode?D("metaKey_shiftKey_ctrlKey",d.code):d.metaKey&&d.ctrlKey&&d.altKey&&17!==d.keyCode&&18!==d.keyCode&&91!==d.keyCode&&93!==d.keyCode?D("metaKey_altKey_ctrlKey",d.code):d.shiftKey&&d.metaKey&&16!==d.keyCode&&91!==d.keyCode&&93!==d.keyCode?D("metaKey_shiftKey",d.code):d.ctrlKey&&17!==d.keyCode&&d.metaKey&&91!==d.keyCode&&93!==d.keyCode?D("metaKey_ctrlKey",d.code):d.altKey&&18!==d.keyCode&&d.metaKey&&91!==d.keyCode&&93!==d.keyCode?D("metaKey_altKey",d.code):d.metaKey&&91!==d.keyCode&&93!==d.keyCode&&D("metaKey",d.code),d={metaKey:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,code:"",keyCode:-1}):t.metaKey&&t.shiftKey&&t.altKey&&t.ctrlKey&&16!==t.keyCode&&91!==t.keyCode&&93!==t.keyCode&&18!==t.keyCode&&17!==t.keyCode?D("metaKey_shiftKey_altKey_ctrlKey",t.code):t.shiftKey&&t.altKey&&t.ctrlKey&&16!==t.keyCode&&18!==t.keyCode&&17!==t.keyCode?D("shiftKey_altKey_ctrlKey",t.code):t.metaKey&&t.shiftKey&&t.altKey&&16!==t.keyCode&&18!==t.keyCode&&91!==t.keyCode&&93!==t.keyCode?D("metaKey_shiftKey_altKey",t.code):t.metaKey&&t.ctrlKey&&t.shiftKey&&17!==t.keyCode&&16!==t.keyCode&&91!==t.keyCode&&93!==t.keyCode?D("metaKey_shiftKey_ctrlKey",t.code):t.metaKey&&t.ctrlKey&&t.altKey&&17!==t.keyCode&&18!==t.keyCode&&91!==t.keyCode&&93!==t.keyCode?D("metaKey_altKey_ctrlKey",t.code):t.ctrlKey&&t.altKey&&17!==t.keyCode&&18!==t.keyCode?D("altKey_ctrlKey",t.code):t.ctrlKey&&t.shiftKey&&17!==t.keyCode&&16!==t.keyCode?D("shiftKey_ctrlKey",t.code):t.shiftKey&&t.altKey&&16!==t.keyCode&&18!==t.keyCode?D("shiftKey_altKey",t.code):t.shiftKey&&t.metaKey&&16!==t.keyCode&&91!==t.keyCode&&93!==t.keyCode?D("metaKey_shiftKey",t.code):t.ctrlKey&&17!==t.keyCode&&t.metaKey&&91!==t.keyCode&&93!==t.keyCode?D("metaKey_ctrlKey",t.code):t.altKey&&18!==t.keyCode&&t.metaKey&&91!==t.keyCode&&93!==t.keyCode?D("metaKey_altKey",t.code):t.ctrlKey&&17!==t.keyCode?191===t.keyCode?a.ZP.callFocusSearchGlobal():D("ctrlKey",t.code):t.altKey&&18!==t.keyCode?D("altKey",t.code):t.shiftKey&&16!==t.keyCode?49===t.keyCode||50===t.keyCode||51===t.keyCode||52===t.keyCode||53===t.keyCode||54===t.keyCode||55===t.keyCode||56===t.keyCode||57===t.keyCode?(t.preventDefault(),a.ZP.callOpenFormIndex(t.keyCode-49)):D("shiftKey",t.code):t.metaKey&&91!==t.keyCode&&93!==t.keyCode?D("metaKey",t.code):2===c?D("double",t.keyCode):113===t.keyCode||115===t.keyCode||117===t.keyCode||118===t.keyCode||119===t.keyCode||120===t.keyCode?D("",t.code):122===t.keyCode&&(t.preventDefault(),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()))}function f(t){n||"textarea"===document.activeElement.localName||"input"===document.activeElement.localName||Array.from(document.activeElement.classList).some((t=>u.indexOf(t)>=0))||-1!==a.ZP.getMyDevice().osVersion.toLocaleLowerCase().replace(" ","").indexOf("macos")&&!0===t.metaKey&&91!==t.keyCode&&93!==t.keyCode&&16!==t.keyCode&&17!==t.keyCode&&18!==t.keyCode&&d.code!==t.code&&(d.metaKey=t.metaKey,d.altKey=t.altKey,d.shiftKey=t.shiftKey,d.ctrlKey=t.ctrlKey,d.code=t.code,d.keyCode=t.keyCode)}function g(t){r=t,s={ctrlKey:{Period:{fo:[{txcode:"#sys:fo-keyboard-openDebug",input:{}}],context:{}},117:{fo:[{txcode:"fo-open-latestTransaction",input:{}}],context:{}}},altKey_ctrlKey:{},altKey:{},shiftKey:{Slash:{fo:[{txcode:"#sys:fo-open-modal-keyboard",input:{}}],context:{}}},shiftKey_altKey:{},shiftKey_ctrlKey:{},shiftKey_altKey_ctrlKey:{},metaKey_shiftKey_altKey_ctrlKey:{},metaKey_shiftKey_altKey:{},metaKey_shiftKey_ctrlKey:{},metaKey_altKey_ctrlKey:{},metaKey_altKey:{},metaKey_ctrlKey:{},metaKey_shiftKey:{},metaKey:{}},t.forEach((t=>{if(t.form_code&&(h[t.form_code]=t.keystrokes),"sys"!==t.app){let e=t.keystrokes.split("+"),i="",o="";for(let t=0;t<e.length;t++){const a=e[t];switch(a){case"metaKey":o+="metaKey_";break;case"shiftKey":o+="shiftKey_";break;case"altKey":o+="altKey_";break;case"ctrlKey":o+="ctrlKey_";break;default:i+=a}}o=o.substring(0,o.length-1),""!==o?(s[o][i]={fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:t.form_code}}],context:{}},-1!==i.indexOf("Numpad")?s[o][i.replace("Numpad","Digit")]={fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:t.form_code}}],context:{}}:-1!==i.indexOf("Digit")&&(s[o][i.replace("Digit","Numpad")]={fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:t.form_code}}],context:{}})):(s[i]={fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:t.form_code}}],context:{}},-1!==i.indexOf("Numpad")?s[i.replace("Numpad","Digit")]={fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:t.form_code}}],context:{}}:-1!==i.indexOf("Digit")&&(s[i.replace("Digit","Numpad")]={fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:t.form_code}}],context:{}}))}})),a.ZP.callReBuildMenu()}function m(){return r}function v(t){l=t}function b(){return h}function y(){return l}function A(t){return n=t}function D(t,e){void 0!==s&&(""!==t?void 0!==s[t]&&void 0!==s[t][e]&&void 0!==s[t][e].fo&&o.ZP.fo(s[t][e].fo,{context:s[t][e].context}):void 0!==s[e]&&void 0!==s[e].fo&&o.ZP.fo(s[e].fo,{context:s[e].context}))}},9676:(t,e,i)=>{"use strict";i.d(e,{Iq:()=>n,RP:()=>s,hr:()=>r,sX:()=>c,wz:()=>l});var o=i(7313),a=i(6417);function s(t){return window.obManagerTemplate_libManagerTemplate.managerTemplate_getComponent(t)}function n(t){return window.obManagerTemplate_libManagerTemplate.managerTemplate_getForm(t)}function r(t){return window.obManagerTemplate_libManagerTemplate.managerTemplate_getCard(t)}function l(){let t=window.obManagerTemplate_libManagerTemplate.managerTemplate_getComponent("uFormBeginLoading");return(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(t,{})})}function c(t){return window.obManagerTemplate_libManagerTemplate.managerTemplate_changeSkin(t)}},5760:(t,e,i)=>{"use strict";i.d(e,{O:()=>s,t:()=>n});var o=i(5842),a=!0;const s=()=>{window.addEventListener("online",(()=>{a=!0,(0,o.zF)(!1,{}),document.body.classList.remove("isOffline")})),window.addEventListener("offline",(()=>{a=!1,(0,o.zF)(!0,{title:"#MsgSystem_client_offline",btn:"",list_fo:"",list_fo_start:"",color:"warning"}),document.body.classList.add("isOffline")}))},n=()=>a},9425:(t,e,i)=>{"use strict";i.d(e,{Nx:()=>a,Qy:()=>l,XG:()=>r,xD:()=>s});var o=i(9773);function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",a=arguments.length>4?arguments[4]:void 0;if(o||"."===i||(o="."),void 0===t||null===t||""===t)return"";let s=t=t.toString(),r="",l=t.lastIndexOf(o);if(-1!==l&&(s=t.substring(0,l),s=s.replace(/^-0+/,""),s=s.replace(/^0+/,""),r=t.substring(l,t.length),""===s&&(s="0")),s=s.replace(/\D/g,""),r=r.replace(/\D/g,""),!1===a&&(r=String(r).substring(0,e)),""===r)for(let n=0;n<e;n++)r+="0";let c=n(`0.${r}`,e).toFixed(e),d=`${Number(s)+Number(c.split(".")[0])}.${c.split(".")[1]||""}`;s=d.split(".")[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`),t.includes("-")&&(s="-"+s),r=d.split(".")[1];let h=`${s}${o}${r}`;return""===r&&(h=s),""===h?"":h}function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",s=arguments.length>4?arguments[4]:void 0;if(a||"."===i||(a="."),void 0===t||null===t||""===t)return"";let r=t,l="",c=t.lastIndexOf(a);if(-1!==c&&(r=t.substring(0,c),r=r.replace(/^-0+/,""),r=r.replace(/^0+/,""),l=t.substring(c,t.length),""===r&&(r="0")),r=r.replace(/\D/g,""),l=l.replace(/\D/g,""),!1===s&&(l=String(l).substring(0,e)),""===l)for(let o=0;o<e;o++)l+="0";let d=n(`0.${l}`,e).toFixed(e);d=d.split(".");let h=`${(0,o.PD)(r,d[0])}.${d[1]||""}`;r=h.split(".")[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`),t.includes("-")&&(r="-"+r),l=h.split(".")[1];let u=`${r}${a}${l}`;return""===l&&(u=r),""===u?"":u}const n=(t,e)=>{if((""+t).includes("e")){var i=(""+t).split("e"),o="";return+i[1]+e>0&&(o="+"),+(Math.round(+i[0]+"e"+o+(+i[1]+e))+"e-"+e)}return+(Math.round(t+"e+"+e)+"e-"+e)};function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",o=t+"";if(e){let t=new RegExp("\\"+e,"g");o=o.replace(t,"")}if(i){let t=new RegExp("\\"+i,"g");o=o.replace(t,".")}let a=Number(o);if(!Number.isNaN(a)&&""!==t)return a}function l(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",o=t+"";if(e){let t=new RegExp("\\"+e,"g");o=o.replace(t,"")}if(i){let t=new RegExp("\\"+i,"g");o=o.replace(t,".")}if(""!==t)return o}},1896:(t,e,i)=>{"use strict";i.d(e,{BH:()=>d,OU:()=>u,SQ:()=>h,Yr:()=>l,bq:()=>c});var o=i(2633),a=i(5842),s=i(3745),n=i(516),r=i(3702);function l(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(((n,r)=>{let l=new o.Z,c="",d="",h="",u="";void 0!==e&&(void 0!==e.infoA&&(void 0!==e.infoA.title&&(d=e.infoA.title),void 0!==e.infoA.form_code&&(c=e.infoA.form_code)),void 0!==e.componentConfigDefault?(void 0!==e.componentConfigDefault.name&&(u=e.componentConfigDefault.name),void 0===e.componentConfigDefault.code&&void 0===e.componentConfigDefault.codeHidden||(h=e.componentConfigDefault.codeHidden)):void 0!==e.debug_info&&(void 0!==e.debug_info.from_action_code&&(h=e.debug_info.from_action_code),void 0!==e.debug_info.from_action_name&&(u=e.debug_info.from_action_name))),void 0!==e.infoA_parent&&void 0!==e.infoA_parent.form_code&&(c="",h="");let p="";p=void 0!==e.key_feedback?e.key_feedback:a.ZP.autoUui_key_feedback(),l.setBo(t,p);let _=a.ZP.getOncePacked();0!==_?(_++,a.ZP.setOncePacked(_)):_=0,l.setMoreInfo({from_action_code:h,from_action_name:u,form_code:c,form_name:d,oncepacked:_,oncepacked_id:a.ZP.autoID()});let f={Accept:"*/*","Content-Type":"application/json-patch+json"};for(const t in l.getInfo())f[t]=l.getInfo()[t];let g=l.getForTxCode(c,h),m=new Date,v={key_feedback:p,data:g,time:m,status:"G\u1eedi",form_code:c,form_name:d,from_action_code:h,from_action_name:u};a.ZP.isDebug()&&(0,a.U6)(v),a.ZP.isAssistant()&&a.ZP.assistant_add(v),h&&a.ZP.getLoadingCacheComponent(h)||(i&&void 0!==e&&void 0!==e.infoA_parent&&e.infoA_parent.key_form&&a.ZP.setLoadingForm("START",e.infoA_parent.key_form),a.ZP.setLoadingCache("START",h,""),fetch(l.info.u+"/Post",{method:"POST",body:JSON.stringify(g),headers:f}).then((t=>{if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.text()})).then((t=>{if(void 0===(t=JSON.parse(t)))return;let o=new Date;(0,a.ln)(JSON.stringify(t).length,m.getTime(),o.getTime());let r={key_feedback:p,data:t,time:o,status:"Nh\u1eadn",form_code:c,form_name:d,from_action_code:h,from_action_name:u};a.ZP.setLoadingCache("END",h,""),i&&void 0!==e&&void 0!==e.infoA_parent&&e.infoA_parent.key_form&&a.ZP.setLoadingForm("END",e.infoA_parent.key_form),a.ZP.isDebug()&&(0,a.U6)(r),a.ZP.isAssistant()&&a.ZP.assistant_add(r),s.ZP.fo(t.fo,e),n(t)})).catch((()=>{i&&a.ZP.setLoadingForm("END",e.infoA_parent.key_form),a.ZP.setLoadingCache("END",h,""),window.isShowErrorNetwork||window.showLoadingError("Something wrong while connect with service CMS! Please try again later"),r(t)})))}))}function c(t,e,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise(((n,r)=>{let l=new o.Z,c=new FormData,d="",h="";void 0!==i&&(void 0!==i.infoA&&void 0!==i.infoA.form_code&&(d=i.infoA.form_code),void 0!==i.componentConfigDefault?void 0!==i.componentConfigDefault.codeHidden&&(h=i.componentConfigDefault.codeHidden):void 0!==i.debug_info&&void 0!==i.debug_info.from_action_code&&(h=i.debug_info.from_action_code));let u={from_action_code:h,form_code:d};l.setMoreInfo(u);let p={};for(const t in l.getInfo())p[t]=l.getInfo()[t];c.append("username",a.ZP.context_get("user_jwebui.user_id")),void 0===e&&(e=""),c.append("new_name_file",e),void 0!==i&&void 0!==i.infoA&&void 0!==i.infoA.key_form&&a.ZP.setLoadingForm("START",i.infoA.key_form),c.append("attachment",t),void 0!==s?c.append("auto_delete",s):c.append("auto_delete",!0),fetch(l.info.u+"/UploadFile",{method:"POST",body:c,headers:p}).then((t=>{let e;switch(void 0!==i&&void 0!==i.infoA&&void 0!==i.infoA.key_form&&a.ZP.setLoadingForm("END",i.infoA.key_form),t.status){case 200:return t.json();case 401:throw e={statusCode:401,statusText:"ERR_UNAUTHORIZED"},e;case 403:throw e={statusCode:403,statusText:"ERR_FORBIDDEN"},e;case 400:throw e={statusCode:400,statusText:"ERR_BAD_REQUEST"},e;default:throw new Error("Something went wrong")}})).then((t=>{n(t)})).catch((t=>{r(t)}))}))}function d(t,e){return new Promise(((i,s)=>{let n=new o.Z,r=new FormData,l={from_action_code:"",form_code:""};n.setMoreInfo(l);let c={};for(const t in n.getInfo())c[t]=n.getInfo()[t];r.append("file",t),console.log("formData===",r);var d=new XMLHttpRequest;d.open("POST",n.info.u+"/UploadFileZipNeptune",!0);let h=a.ZP.getFormAppAuto(e.key_form);d.onload=function(){if(200===d.status){let t=JSON.parse(JSON.parse(d.response));a.ZP.showToast(t.description||"Upload","error"!==t.status.toLowerCase(),!1)}else a.ZP.showToast(function(t){switch(t){case 401:return"401: ERR_UNAUTHORIZED";case 403:return"403: ERR_FORBIDDEN";case 400:return"400: ERR_BAD_REQUEST";default:return"Something went wrong"}}(d.status),!1,!1),console.error("Upload error:",d.status);void 0!==h&&h.hasOwnProperty("setLoadingAction")&&h.setLoadingAction(!1)},d.onerror=function(){a.ZP.showToast("Upload",!1),void 0!==h&&h.hasOwnProperty("setLoadingAction")&&h.setLoadingAction(!1),console.error("Request failed")},d.send(r)}))}function h(t){return new Promise(((e,i)=>{let a=new o.Z,s={from_action_code:"",form_code:""};a.setMoreInfo(s);let n={};for(const t in a.getInfo())n[t]=a.getInfo()[t];try{var l=new XMLHttpRequest;l.open("GET",a.info.u.replace("/api/Webchannel","/api/cache/get-by-key/")+t),l.setRequestHeader("Authorization","Bearer ");try{l.send()}catch(c){}l.onload=function(){if(200===l.status)try{let t=JSON.parse(l.response);if(null!==t.data){let i=JSON.parse(t.data);Array.isArray(i)?e(JSON.parse(t.data)):e([i])}else i(t.description)}catch(c){i(l.response)}else switch(l.status){case 401:throw r.Z={statusCode:401,statusText:"ERR_UNAUTHORIZED"},r.Z;case 403:throw r.Z={statusCode:403,statusText:"ERR_FORBIDDEN"},r.Z;case 400:throw r.Z={statusCode:400,statusText:"ERR_BAD_REQUEST"},r.Z}i(l.response)},l.onerror=function(t){i(t)}}catch(c){}}))}function u(t,e,i){return new Promise(((s,r)=>{let l=new o.Z,c=new FormData,d="",h="";void 0!==i&&(void 0!==i.infoA&&void 0!==i.infoA.form_code&&(d=i.infoA.form_code),void 0!==i.componentConfigDefault?void 0!==i.componentConfigDefault.codeHidden&&(h=i.componentConfigDefault.codeHidden):void 0!==i.debug_info&&void 0!==i.debug_info.from_action_code&&(h=i.debug_info.from_action_code));let u={from_action_code:h,form_code:d};l.setMoreInfo(u),c.append("username",a.ZP.context_get("user_jwebui.user_id")),void 0===e&&(e=""),c.append("new_name_file",(0,n.v9)(JSON.stringify(e))),c.append("attachment",t),c.append("info",(0,n.v9)(JSON.stringify(l.getInfo()))),fetch(l.info.u+"/upload-to-server",{method:"POST",body:c}).then((t=>{let e;switch(t.status){case 200:return t.json();case 401:throw e={statusCode:401,statusText:"ERR_UNAUTHORIZED"},e;case 403:throw e={statusCode:403,statusText:"ERR_FORBIDDEN"},e;case 400:throw e={statusCode:400,statusText:"ERR_BAD_REQUEST"},e;default:throw new Error("Something went wrong")}})).then((t=>{s(t)})).catch((t=>{r(t)}))}))}},1203:(t,e,i)=>{"use strict";i.d(e,{MK:()=>r,Qf:()=>n,xd:()=>l});var o=i(1896),a=(i(3745),i(5842)),s="";function n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,n={};i||(i={}),s||(s={}),n=Object.assign(n,s),n=Object.assign(n,i);let r=[];t.split(",").forEach((t=>{void 0===a.ZP.template_getFromStore(t)&&r.push(t)})),(0,o.Yr)([{txcode:"#sys:bo-load-templePrint",input:Object.assign(n,{templates:r.join(",")})}],{}).then((t=>{let i=a.ZP.foGetData("list_templates",t),o=a.ZP.foGetData("ob_data",t);void 0!==i&&i.forEach((t=>{a.ZP.template_addToStore(t.code,t)})),e(o)}),(t=>{}))}function r(){let t=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s={};e||(e={}),i||(i={}),s=Object.assign(s,i),s=Object.assign(s,e),(0,o.Yr)([{txcode:"#sys:bo-create-data-passbook",input:s}],{}).then((e=>{let i=a.ZP.foGetData("ref_id",e);t(i)}),(t=>{}))}function l(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"false";""===s&&a.ZP.getParameterSystem("VOUCHER_URL")&&(s=a.ZP.getParameterSystem("VOUCHER_URL"));var o=["height="+window.screen.height,"width="+window.screen.width,"fullscreen=yes","resizable=yes","scrollbars=yes","toolbar=yes","menubar=yes","location=yes","top=0","left=0"].join(",");for(let r=0;r<t.length;r++){const l=t[r];var n="?"+a.ZP.encodeQueryData({report_code:l.split("&")[0],token:(0,a.VN)(),ref_id:e,order:l.split("&")[1],is_reversed:i});let c=window.open("","_blank",o);c&&c.document&&(c.document.write("<html><head>"),c.document.write('</head><body onload="goToReportURL()">'),c.document.write("<script>function goToReportURL(){ window.location.replace('"+s+n+"')}<\/script>"),c.document.write("</body></html>"),c.document.close(),c.focus())}}},5764:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var o=i(5842);function a(t,e){var i={};i.key=e.key.trim();var o=t.split(e.key);return o.length>=2?(i.old=o[0].trim(),i.new=o[1].trim()):i.old=o[0].trim(),i}function s(t,e,i){var o={};for(var a in t)if(void 0!==t[a]){var s=t[a];if(void 0!==s)if(",*,"===e)for(var n in s)void 0!==s[n]&&(void 0===o[a]&&(o[a]={}),o[a][n]=s[n]);else if(e.includes(" as ")){if(i.length>0)for(var r=0;r<i.length;r++){var l=i[r];if(l.split(" as ").length>0)if("all"===l.split(" as ")[1]){if(a===l.split(" as ")[0])for(var c in s)o[c]=s[c]}else for(var d in s)l.includes(a+"."+d+" ")&&(o[l.split(" as ")[1]]=s[d])}}else for(var h in s)void 0!==s[h]&&e.includes(","+a+"."+h+",")&&(void 0===o[a]&&(o[a]={}),o[a][h]=s[h])}return o}class n{static AnalyticsQuery(t,e,i){var n={total:0,data:[]};if(void 0!==t&&""!==t.trim()){var r=o.ZP.jsonParser(t);if(void 0!==r){if(void 0!==r.data&&void 0!==r.select){let t=r.data,a=[];for(let e=0;e<t.length;e++){var l={data:[],table:t[e].table,alert:t[e].alert,join_column:t[e].join_column};let i=o.ZP.getData(t[e].table);if(void 0!==l.alert){for(let t=0;t<i.length;t++){let e={};e[l.alert]=i[t][l.table],l.data.push(e)}l.table=l.alert}else l.data=i;if(void 0!==t[e].data_add)if(void 0!==t[e].data_add.length)for(let a=0;a<t[e].data_add.length;a++)void 0!==t[e].data_add[a][l.table]&&void 0!==t[e].data_add[a][l.table][l.join_column]?l.data.push(t[e].data_add[a]):o.ZP.log(t[e].data_add[a],"Error AnalyticsQuery data_add "+l.table);else void 0!==t[e].data_add[l.table]&&void 0!==t[e].data_add[l.table][l.join_column]?l.data.push(t[e].data_add):o.ZP.log(t[e].data_add,"Error AnalyticsQuery data_add "+l.table);a.push(l)}var c=[];c=a.length>1?function(t,e){const i=e.data.reduce(((t,i)=>t.set(i[e.table][e.join_column],i)),new Map);return t.data.map((o=>{let a=i.get(o[t.table][t.join_column]);if(void 0!==a){let t={};return t=o,t[e.table]=a[e.table],t}}))}(a[0],a[1]):a[0];let s=[],d="";void 0!==r.where&&(d=r.where);for(let e=0;e<c.length;e++)if(void 0!==c[e]){let t=c[e];if(o.ZP.checkDynamicCondition(t,d)){let e={};for(let i=0;i<r.select.length;i++){let o=r.select[i];void 0!==o.alert_table&&void 0!==o.alert_column?(void 0===e[o.alert_table]&&(e[o.alert_table]={}),void 0!==t[o.table]&&(e[o.alert_table][o.alert_column]=t[o.table][o.column])):(void 0===e[o.table]&&(e[o.table]={}),void 0!==t[o.table]&&(e[o.table][o.column]=t[o.table][o.column]))}s.push(e)}}void 0!==r.sort&&r.sort.length>0&&s.sort(((t,e)=>{let i=0;for(let o=0;o<r.sort.length;o++){let a=r.sort[o];if(void 0!==t[a.table]&&void 0!==e[a.table]&&void 0!==t[a.table][a.column]&&void 0!==e[a.table][a.column])switch(a.type){case"string":i="ascending"===a.sort?i||t[a.table][a.column].localeCompare(e[a.table][a.column]):i||e[a.table][a.column].localeCompare(t[a.table][a.column]);break;case"number":i="ascending"===a.sort?i||t[a.table][a.column]-e[a.table][a.column]:i||e[a.table][a.column]-t[a.table][a.column]}}return i})),n.total=s.length,e+i>s.length?n.data=s.slice(e,s.length):n.data=s.slice(e,e+i)}}else{var d=function(t){var e={},i=t.split(" from ");if(i.length>=2){var o=i[0].trim().replace("\\s+"," ");if(e.col=o,""!==o){var s=i[1].trim();if(s.includes(" where ")||s.includes(" orderby ")||s.includes(" limitby ")||s.includes(" groupby ")){var n=function(t){var e=[];if(-1!==t.indexOf(" where ")){var i={};i.index=t.indexOf(" where "),i.key=" where ",e[e.length]=i}if(-1!==t.indexOf(" orderby ")){var o={};o.index=t.indexOf(" orderby "),o.key=" orderby ",e[e.length]=o}if(-1!==t.indexOf(" groupby ")){var a={};a.index=t.indexOf(" groupby "),a.key=" groupby ",e[e.length]=a}if(-1!==t.indexOf(" limitby ")){var s={};s.index=t.indexOf(" limitby "),s.key=" limitby ",e[e.length]=s}return e.sort((function(t,e){return t.index-e.index})),e}(s),r=a(s,n[0]);e.table=r.old,s=r.new;var l=r.key;if(n.length>=2){var c=a(s,n[1]);e[l]=c.old,s=c.new;var d=c.key;if(n.length>=3){var h=a(s,n[2]);e[d]=h.old,s=h.new;var u=h.key;if(n.length>=4){var p=a(s,n[3]);e[u]=p.old,e[p.key]=p.new}else e[u]=s}else e[d]=s}else e[l]=s}else e.table=s}}return void 0!==e.col&&void 0!==e.table?e:null}(t=t.substring(6).trim())||"",h=[];null!==d&&void 0!==d.table&&(h=function(t){for(var e=[],i=t.split(","),o=0;o<i.length;o++){var a=i[o],s={},n=a.trim();if(n.includes(" ")){var r=n.split(" ",2);s.table=r[0].trim(),s.alert=r[1].trim()}else s.table=a.trim(),s.alert=a.trim();e[e.length]=s}return e}(d.table)),null!==h&&void 0!==h||(h=[]);var u=[],p="";void 0!==d.col&&(p=d.col);var _=","+p+",",f=p.split(",");if(h.length>1);else if(1===h.length&&void 0!==h[0].alert){var g=o.ZP.getData(h[0].table);if(void 0!==g)for(var m=0;m<g.length;m++){var v={};v[h[0].alert]=g[m][h[0].table],u.push(v)}}if(void 0!==d.where&&(u=u.filter((t=>o.ZP.checkDynamicCondition(t,d.where)))),void 0!==d.orderby&&d.orderby.includes(".")){var b=d.orderby.split(".");if(b.length>0){var y=b[0],A=b[1];u.sort(((t,e)=>void 0!==t[y]&&void 0!==e[y]&&void 0!==t[y][A]&&void 0!==e[y][A]?t[y][A]-e[y][A]:0))}}void 0!==u&&u.length>0&&(n.total=u.length,e+i>u.length?n.data=u.slice(e,u.length):n.data=u.slice(e,e+i));for(var D=0;D<n.data.length;D++)n.data[D]=s(n.data[D],_,f)}}return n}}},516:(t,e,i)=>{"use strict";i.d(e,{OP:()=>s,v9:()=>a});var o=i(5842);function a(t){return function(t){var e=new window.JSEncrypt({default_key_size:2048});e.setPublicKey(o.ZP.rsa_getPublicKey());var i=245,a="",s=t;for(;s.length>0;){for(var n="",r=0,l=0;s.length>l;){var c=s.charCodeAt(l);if(c<128?r++:r+=c>127&&c<2048?2:3,r>=i)break;n+=s[l],l++}s=s.substring(l,s.length);let t="";t=e.encrypt(n),a+=""===a?t:"@@@"+t}return a}(t)}function s(t,e){if(function(t){if(""===t||void 0===t||null===t||""===t.trim())return!1;try{return btoa(atob(t))===t}catch(e){return!1}}(t)){const i=window.atob(t),o=new ArrayBuffer(i.length),a=new Uint8Array(o);for(let t=0;t<i.length;t++)a[t]=i.charCodeAt(t);const s=new Blob([a],{type:n(e)});return console.log("blob",s),s}return""}function n(t){switch(t){case"pdf":default:return"application/pdf";case"txt":case"json":case"text":case"docx":case"doc":return"text/plain";case"mp4":return"video/mp4";case"mp3":return"audio/mp3";case"xlsx":return""}}},1350:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var o=i(5842),a="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDB7MQCeFvDYGwAV6a6E0Q7N8Ptqq58CxXEcJufjDIcDtML7cs7KBqDA4SYtzkI/4HFUeqcQbWFyjd10nxxilOWX2/f+TK/Zdf9MNZoBHIEeqZ9WtG6+d2p4y3cSFg9B4vJZDlPLozPzXnmhblQCSQ8K7+p14EovD0wEOmFxTEVqQIDAQAB",s="MIICXAIBAAKBgQDB7MQCeFvDYGwAV6a6E0Q7N8Ptqq58CxXEcJufjDIcDtML7cs7KBqDA4SYtzkI/4HFUeqcQbWFyjd10nxxilOWX2/f+TK/Zdf9MNZoBHIEeqZ9WtG6+d2p4y3cSFg9B4vJZDlPLozPzXnmhblQCSQ8K7+p14EovD0wEOmFxTEVqQIDAQABAoGAF6F0WSC1fd9YCcqkhHQokla/R0zPKkpngqJ+NDjvOkAMM53sb+75HBHnrHxXNON9ur+6qQPQzNbRX0gg5e0HNktohLe1EixiEPG7CNaKgWx11nEWN6kRY0ffS+rc2aU6IN5r6pXF1//tw9pI7bJOvZwtwM5jeN2xe3UgnfQK+aECQQDhkjLfyATEU2XHvkrdMCuzLqs0pccLStLDVsyQJ424mli1dMeMGr+4vQEpvS4UR1lDLhYV1njfcT3maoeFnLIVAkEA3BW0yRdSqJAGZS8cp3BD4TNiXzXdxaLr2zi2BXwg6acx9py/fHo2XP/23D+USwP/WEXD1gumBBYWPdsGDIQ+RQJAZ3IroJLTFNIGQDcVkCByOgcx/r/z60rSI0EgKQ/qn3kxK241wRvXRrpu2RxoEGa0Gen9uOAVqKr/Lzc1lWHKDQJAJvEASASEb6bsOsMXQtkuaY55/Xa+gtXM/cEPE/FesXkP8h7SEuhc7h+sQlRNnOhcKfZOLHVrLpXp4Y/7hgNwMQJBAJL0REs/tE+/Wi9QvaH5B0EVbE6W59tq8PrX0JU7NSbXRhjIfgxDtcAOvJ37HguePsmSWQKh3lUGe79J02U0Ufk=";class n{static buildStoreHtml5_for_login(t,e,i,a,s,n){return encodeURIComponent(r(JSON.stringify({session_id_portal:a,session_id_app:i,device:o.ZP.getMyDevice(),app_code:t,configTemplate:e,token:n})))}static buildStoreHtml5_for_app(t){let e={};if(null!=t.searchParams.get("s")){e=JSON.parse(function(t){var e=new window.JSEncrypt({default_key_size:1024});e.setPrivateKey(s);var i=172,o="",a=t;for(;a.length>0;){var n=a.substring(0,i);a=a.substring(i),o+=e.decrypt(n)}return o}(t.searchParams.get("s")))}let i=window.location.hostname;return"www."===i.substr(0,4)&&(i=i.replace("www.","")),e.domain=i,e}}const r=t=>{var e=new window.JSEncrypt({default_key_size:1024});e.setPublicKey(a);for(var i="",o=t;o.length>0;){for(var s="",n=0,r=0;o.length>r;){var l=o.charCodeAt(r);if(l<128?n++:n+=l>127&&l<2048?2:3,n>=117)break;s+=o[r],r++}o=o.substring(r,o.length),i+=e.encrypt(s)}return i}},5842:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$5:()=>setAPPIcon,$z:()=>setMsgSystem,C9:()=>getReactTxt,CO:()=>getUserIDFind,Ez:()=>setUserIDFind,If:()=>getLangKey,LP:()=>getToken,Ot:()=>getDataBaseTable,PI:()=>getAllForm,Py:()=>getKey_APP,Qi:()=>setRoleOfUser,R3:()=>getForm,ST:()=>buildRoleOfForm,TS:()=>getStatusToken,T_:()=>setUserConfig,Tf:()=>setRoleCache,U6:()=>formChatBox_addDebug,VN:()=>getUserID,VQ:()=>getLang,VU:()=>form_getCDList,Wc:()=>getDataBase,Yh:()=>setLibDefault,ZP:()=>Application,ZU:()=>formChatBox_set,ZX:()=>getKey_D,_M:()=>getRoleOfUser,_N:()=>protocol_set,_d:()=>addRole,a4:()=>setUserConfigDefault,bn:()=>addForm,bp:()=>formChatBox_open,cb:()=>autoId,ch:()=>getWebSV,gD:()=>setRole,hP:()=>isMobile_set,iO:()=>setForm,iQ:()=>setStatusToken,ks:()=>setRoleApprove,ln:()=>calculatorBandwidth,n2:()=>formChatBox_setCopyToClipboard,o4:()=>setToken,t_:()=>port_set,tx:()=>getAPPIcon,uB:()=>lazyLoad,uC:()=>setUserID,v0:()=>hostname_set,x1:()=>getFormInfo,yN:()=>context_set,zF:()=>sendMsgSystem,zM:()=>setDataBase});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7313),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1168),_libQuery__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5764),_libCalculator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9773),_libClient__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3745),_libPost__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1896),_tx_coreTx__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(8209),_tx_basicTxCode__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2256),_libStoreHtml5__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1350),_libDatabaseSmart__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(84),_libNetwork__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5760),_libKeyboard__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(7904),array_move__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(4419),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(6417),cache={user:{roles:[],role_cache:{},role_approve:{},config_of_user:{},config_of_user_default:{},session_id:"",token:"",portal_token:"",status_token:"I",user_id:0,my_device:{my_ip:"",screen:"",browser:"",browserVersion:"",browserMajorVersion:"",mobile:"",os:"",osVersion:"",cookies:""},user_profile:{}},config:{form_config:{},role_function:{},role_right:{},fo:{"#sys:fo-sys-showError":{id:49,input:{},actions:[{name:"Hi\u1ec3n th\u1ecb l\u1ed7i",function:"system.showError",type:"javascript",status:"A",para:[]}],request:{},status:null,txtype:null,txcode:"#sys:fo-sys-showError",version:1,updateTime:0x8dac88b139b9380,txname:"Th\xf4ng b\xe1o l\u1ed7i t\u1eeb server (Kh\xf4ng x\xf3a)",name:"",hasRole:"",isOld:!1,order:1,app:"sys"},"#sys:fo-form-clear":{id:45,input:{},actions:[{name:"X\xf3a tr\u1eafng d\u1eef li\u1ec7u form",function:"formAPI.clearForm",type:"javascript",status:"A",para:[]}],request:{},status:null,txtype:null,txcode:"#sys:fo-form-clear",version:1,updateTime:0x8dac88b139b9380,txname:"X\xf3a tr\u1eafng",name:"",hasRole:"",isOld:!1,order:1,app:"sys"}},fo_black_list:{tx_fo:{},function:{}},parameter_system:{},location:{hostname:"",protocol:"",port:""},isMobile:!1},app_config:{},data_schema:{},data:{},constData:{},form:{auto_form:{},list_auto_form:[],opening_forms:[],selected_form:{},last_open_form:{},shared_form_data:{},time_add_component:300,button_watting_action:5e3,mapping_dom_react:{}},lib_defaults:[],screens:[],websocket:{connectStatus:"Close",webSocket:null},notification:{},trace:[],protect:{key:"",bitwise:0,time_refresh:3e5,oncePacked:0},chat:{data_chat:[]},master_data:{},system_mode:{pin:!1,isLock:!1,reloginCount:0,reloginUserCount:0,safe:{fo:";fo-load-txFo;fo-protect-start;fo-load-bigData;fo-load-screen;fo-container;fo-scheduleJob-extendToken;",bo:";bo-load-txFo;"},mode:{lock:{fo:";fo-goto-pageLogin;fo-protect-key;",bo:";bo-relogin-login;bo-relogin-loginPin;bo-relogin-lockToken;"}}},rsa:{position_default:121,algorithm:{1:{drop:[1],id:"1",cross:{group:3,run:["02","10"],max:4},tag:{val:"AGhuk",start:100},crack:"aOiO"}},algorithm_response:{1:{translation:[4,5]}},privateKey:"",publicKey:"",count_change:0,max_use:30,template:{}},context:{time:0,user_jwebui:{},user_acc:{}},contextweb:{},store_html5:{},statusDebug:!1,assistant:{isRun:!0,dataAssistantSupport:[],max_data:20},scheduleJob:{job_run:{},job_config:{}},template_config:{},template_html:{},template_report:{},loading_cache:{component:{},form:{}},response_file:{file_name:"",file_name_exist:!1,buffer_data:"",buffer_status:!1}};let reconnectAttempts=0;const maxReconnectAttempts=5,reconnectDelay=1e3;var obj_component_render_config=void 0,obj_component_render_role=void 0,obj_component_render_property=void 0,obj_component_render_validate=void 0,obj_component_render_lang=void 0,modal_confirm=void 0,modal_compare=void 0,modal_keyboard=void 0,modal_keyboard_config=void 0,modal_dynamic_fromFromCode=void 0,form_relogin=void 0,form_relogin_timeout=void 0,form_chat=void 0,form_WChatBox=void 0,elearning_render_markdown=void 0,code_basicTxCode=_tx_basicTxCode__WEBPACK_IMPORTED_MODULE_6__.Z,list_jcontext=[],copyToClipboard=null,var_MsgSystem=null;const setMsgSystem=t=>{var_MsgSystem=t},sendMsgSystem=(t,e)=>{var_MsgSystem&&(document.body.classList.contains("hasMessageSystem")||document.body.classList.add("hasMessageSystem"),var_MsgSystem.activeMsg(t,e),Application.callAllScreenListen())},setDataBase=t=>{cache.data_schema=t},getDataBase=()=>({all_id_button:[]}),context_set=t=>{cache.context=t},getDataBaseTable=t=>{if(void 0!==cache.data_schema.all_id_button)for(var e=0;e<cache.data_schema.all_id_button.length;e++)if(cache.data_schema.all_id_button[e].type===t)return cache.data_schema.all_id_button[e]},setLibDefault=t=>{cache.lib_defaults=t},getLibDefault=t=>{for(var e=0;e<cache.lib_defaults.length;e++){var i=cache.lib_defaults[e];if(null!=i.code&&i.code===t)return i}},readFlowFunctionClientStep=(t,e,i)=>{for(var o=0;o<e.length;o++)if(null!=e[o].sourceId&&e[o].sourceId===t&&null!=e[o].targetId)for(var a=0;a<i.length;a++)if(null!=i[a].action_code&&i[a].action_code===e[o].targetId)return i[a]},getAllLibDefault=()=>cache.lib_defaults,setUserConfig=t=>{cache.user.config_of_user=t},getUserConfig=()=>cache.user.config_of_user,setUserConfigDefault=t=>{cache.user.config_of_user_default=t},getUserConfigDefault=()=>cache.user.config_of_user_default,getAllAppAuto=()=>cache.form.auto_form,getForm=t=>{if(null!=cache.config.form_config[t]&&null!=cache.config.form_config[t].list_layout)return cache.config.form_config[t].list_layout},form_getCDList=(t,e,i)=>{if("BO_015001001_Search"===t)return{c_cdlist:[]};if(null!=cache.config.form_config[t]&&null!=cache.config.form_config[t].list_layout){let e=cache.config.form_config[t].list_layout,i=[];for(let t=0;t<e.length;t++){let c=e[t].list_view;if(void 0!==c)for(let t=0;t<c.length;t++){let e=c[t].list_input;if(void 0!==e)for(let t=0;t<e.length;t++){let c=e[t];switch(c.inputtype){case"cTextInput":default:break;case"jSelect":if(void 0!==c.config&&void 0!==c.config.cdlist&&"cdlist"===c.config.data_mode&&void 0!==c.config.cdlist.cdgrp&&void 0!==c.config.cdlist.cdname){0===Application.data_cdList(c.config.cdlist.cdgrp,c.config.cdlist.cdname).length&&i.push({dbcoffee_create:!1,dbcoffee_col1:c.config.cdlist.cdgrp,dbcoffee_col2:c.config.cdlist.cdname})}break;case"cTableDefault":let t=Application.jsonParser(c.config.columns)||[];for(const s of t)if("ColumnCdlist"===s.inputtype||"ColumnSelectEdit"===s.inputtype){var o,a;const t=(null===(o=s.config)||void 0===o?void 0:o.cdgrp)||"",e=(null===(a=s.config)||void 0===a?void 0:a.cdname)||"";0===Application.data_cdList(t,e).length&&i.push({dbcoffee_create:!1,dbcoffee_col1:t,dbcoffee_col2:e})}break;case"jTableForm":let e=Application.jsonParser(c.config.columns)||[];for(const o of e)if("ColumnCdlist"===o.inputtype||"ColumnSelectEdit"===o.inputtype){var s,n;const t=(null===(s=o.config)||void 0===s?void 0:s.cdgrp)||"",e=(null===(n=o.config)||void 0===n?void 0:n.cdname)||"";0===Application.data_cdList(t,e).length&&i.push({dbcoffee_create:!1,dbcoffee_col1:t,dbcoffee_col2:e})}break;case"jTableSearch":let d=Application.jsonParser(c.config.columns)||[];for(const o of d)if("ColumnCdlist"===o.inputtype||"ColumnSelectEdit"===o.inputtype){var r,l;const t=(null===(r=o.config)||void 0===r?void 0:r.cdgrp)||"",e=(null===(l=o.config)||void 0===l?void 0:l.cdname)||"";0===Application.data_cdList(t,e).length&&i.push({dbcoffee_create:!1,dbcoffee_col1:t,dbcoffee_col2:e})}}}}}let c=[];return c=i,{c_cdlist:c}}return{}},getReactTxt=t=>{if(null!=cache.config.form_config[t]&&null!=cache.config.form_config[t].react_txt)return cache.config.form_config[t].react_txt},getFormInfo=t=>null!=cache.config.form_config[t]&&null!=cache.config.form_config[t].info?cache.config.form_config[t].info:{},getAllForm=()=>cache.config.form_config,addForm=(t,e)=>{cache.config.form_config[t]=e},setForm=t=>{cache.config.form_config=t},setRoleOfUser=t=>{null!==t&&(cache.user.roles=t)},getRoleOfUser=()=>cache.user.roles,setRoleCache=t=>{null!==t&&(cache.user.role_cache=t)},setRoleApprove=t=>{null!==t&&(cache.user.role_approve=t)},setUserID=t=>{null!==t&&(cache.user.session_id=t)},setToken=t=>{null!==t&&(cache.user.token=t)},setUserIDFind=t=>{null!==t&&(cache.user.user_id=t)},setPortalToken=t=>{null!==t&&(cache.user.portal_token=t)},getPortalToken=()=>cache.user.portal_token,setStatusToken=t=>{null!==t&&(cache.user.status_token=t)},getStatusToken=()=>cache.user.status_token,getUserID=()=>cache.user.session_id,getToken=()=>cache.user.token,getUserIDFind=()=>cache.user.user_id,buildRoleOfForm=t=>{for(var e=getRole(t),i={},o=0;o<cache.user.roles.length;o++)if(void 0!==e[cache.user.roles[o]]){var a=e[cache.user.roles[o]];for(var s in a)if(void 0===i[s])i[s]=a[s];else{var n=i[s];if(void 0!==a[s].role)for(var r in a[s].role)!0===a[s].role[r]&&void 0!==n.role&&(n.role[r]=!0);for(var l in a[s])void 0!==a[s][l]&&!0===a[s][l].install&&(n[l]=a[s][l]);i[s]=n}}cache.config.role_right[t]=i},addRole=(t,e)=>{cache.config.role_function[t]=null!=e?e:{}},setRole=t=>{cache.config.role_function=null!=t?t:{}},getRole=t=>void 0!==cache.config.role_function[t]?cache.config.role_function[t]:{},getKey_D=()=>cache.app_config.domain,getKey_APP=()=>cache.app_config.para.app_id,getAPPIcon=()=>cache.app_config.app_icon,setAPPIcon=t=>{cache.app_config.app_icon=t},getWebSV=()=>cache.app_config.server.web,getLangKey=()=>cache.app_config.para.language,getLang=t=>Application.isDebug()&&t?`(${t})`:null!=cache.app_config&&void 0!==cache.app_config.lang_data[cache.app_config.para.language]&&null!=cache.app_config.lang_data[cache.app_config.para.language]&&void 0!==cache.app_config.lang_data[cache.app_config.para.language][t]?cache.app_config.lang_data[cache.app_config.para.language][t]:""!==t?"#"+t:"",autoId=()=>{for(var t=""+(new Date).getTime()+(Math.floor(6e6*Math.random())+1),e="",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",o=0;o<t.length;o++){var a=Number(t[o]);if(0<=a&&a<=2&&t.length>o+1){var s=10*a+Number(t[o+1]);if(s>0&&s<52){e+=i[s],o++;continue}}e+=t[o]}return e},buildBitwiseFromProtect=()=>{var t=cache.protect.key;if(void 0!==t){for(var e=t.codePointAt(0),i=1;i<t.length;i++)e^=t.codePointAt(i);cache.protect.bitwise=e}},formChatBox_set=t=>{form_WChatBox=t},formChatBox_open=t=>{void 0!==form_WChatBox&&form_WChatBox.open(t)},formChatBox_addDebug=t=>{void 0!==form_WChatBox&&form_WChatBox.addDebug(t)},formChatBox_setCopyToClipboard=t=>{copyToClipboard=t},createStringID=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1),lazyLoad=t=>{let e=!1;for(let i in t){void 0===cache.data[i]&&(cache.data[i]=[]),"c_cdlist"===i&&(e=!0);let o=t[i];for(let t=0;t<o.length;t++){let a=o[t][i],s=!1;for(let t=0;t<cache.data[i].length;t++)if(e){let e=cache.data[i][t][i];if(void 0!==a.id&&void 0!==e.id&&a.id===e.id){e=a,s=!0;break}}else{let e=cache.data[i][t][i];if(void 0!==a.AFGHkeyIndexWJ&&void 0!==e.AFGHkeyIndexWJ&&a.AFGHkeyIndexWJ===e.AFGHkeyIndexWJ){e=a,s=!0;break}}s||cache.data[i].unshift(o[t])}}e&&Application.data_buildCdListQuick(cache.data.c_cdlist)},calculatorBandwidth=(t,e,i)=>{},hostname_set=t=>{cache.config.location.hostname=t},hostname_get=()=>cache.config.location.hostname,protocol_set=t=>{cache.config.location.protocol=t},protocol_get=()=>cache.config.location.protocol,port_set=t=>{cache.config.location.port=t},port_get=()=>cache.config.location.port,isMobile_set=t=>{cache.config.isMobile=t},isMobile_get=()=>cache.config.isMobile;class Application{constructor(){this.convertConfigWithContext=t=>{let e=t,i=Application.getlistCodeContext(t);for(const o of i){let t=Application.context_get(o.code)||"";e=e.replace(o.key,t),"number"===typeof t&&(e=Number(e))}return e}}static readHTML5RSA(){var t=new URL(window.location.href);cache.store_html5=_libStoreHtml5__WEBPACK_IMPORTED_MODULE_7__.Z.buildStoreHtml5_for_app(t)}static isImage(t){let e=!1;try{e=btoa(atob(t))===t&&"/iR".includes(t[0])}catch(i){}return e}static start(t){cache.app_config=t;var e="",i="";void 0!==cache.store_html5.token&&(e=cache.store_html5.token),void 0!==cache.store_html5.session_id_app&&(i=cache.store_html5.session_id_app),cache.app_config.para.app_id=cache.store_html5.app_code,void 0!==cache.store_html5.session_id_portal&&cache.store_html5.session_id_portal,void 0!==e&&null!=e&&""!==(e=e.trim())&&setToken(e),void 0!==i&&null!=i&&""!==(i=i.trim())&&setUserID(i),cache.app_config.domain=hostname_get(),cache.app_config.server.web=cache.app_config.server.web.replace("#",hostname_get()),cache.app_config.server.socket=cache.app_config.server.socket.replace("#",hostname_get()),(0,_libPost__WEBPACK_IMPORTED_MODULE_5__.Yr)([{txcode:"#sys:bo-protected-checkParameter",input:{}}],{}).then((t=>{void 0!==Application.foGetData("read_info_client",t)?(Application.setMyDevice(Application.foGetData("read_info_client",t)),Application.start_step2()):_libClient__WEBPACK_IMPORTED_MODULE_4__.ZP.fo([{txcode:"#sys:fo-goto-pageLogin",input:{}}],{})}),(t=>{}))}static start_step2(){(0,_libNetwork__WEBPACK_IMPORTED_MODULE_9__.O)(),window.addEventListener("fullscreenchange",(()=>{document.fullscreenElement?document.body.classList.contains("fullScreen")||document.body.classList.add("fullScreen"):document.body.classList.contains("fullScreen")&&document.body.classList.remove("fullScreen")})),Application.compareMyDevice()?Application.loadFoDefault():_libClient__WEBPACK_IMPORTED_MODULE_4__.ZP.fo([{txcode:"#sys:fo-goto-pageLogin",input:{line:"start_step2"}}],{})}static template_getConfigTemplate(){let t=window.obManagerTemplate_libManagerTemplate.managerTemplate_getDevie();return cache.store_html5.configTemplate[t]}static compareMyDevice(){let t=Application.getMyDevice(),e=cache.store_html5;if(void 0!==e.device){for(let i in e.device){if(void 0===t[i]||void 0===e.device[i])return!1;if(e.device[i]!==t[i])return!1}return!0}return!1}static encodeQueryData(t){const e=[];for(let i in t)e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")}static loadFoDefault(){""!==cache.app_config.fo_load?(0,_libPost__WEBPACK_IMPORTED_MODULE_5__.Yr)([{txcode:"#sys:bo-load-txFo",input:{list_tx:cache.app_config.fo_load}},{txcode:"#sys:bo-load-dyjs",input:{key_map:"start",key_position:""}},{txcode:"#sys:bo-load-allAppRoleOfUser",input:{key_map:"start",key_position:""}}],{}).then((t=>{var e=Application.foGetData("txClient",t);if(void 0!==e)for(var i=0;i<e.length;i++)Application.addTxFo(e[i].txcode,e[i]);_libKeyboard__WEBPACK_IMPORTED_MODULE_10__.ZP.startKeyboard(),Application.webSocketConnect()}),(t=>{})):(0,_libPost__WEBPACK_IMPORTED_MODULE_5__.Yr)([{txcode:"#sys:bo-load-dyjs",input:{key_map:"start",key_position:""}},{txcode:"#sys:bo-load-allAppRoleOfUser",input:{key_map:"start",key_position:""}}],{}).then((t=>{Application.webSocketConnect()}),(t=>{}))}static getMyDevice(){return cache.user.my_device}static showToast(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={},a=t;switch(e){case!0:i&&(a+=" successfully"),o={class_:"success",icon:"fa fa-check",title:a,time:(new Date).getTime()+"",description:a,data:{},action:{}};break;case!1:i&&(a+=" error"),o={class_:"error",icon:"fa fa-check",title:a,time:(new Date).getTime()+"",description:a,data:{},action:{}};break;case"fail":o={class_:"error",icon:"fa fa-check",title:a,time:(new Date).getTime()+"",description:a,data:{},action:{}};break;case void 0:i&&(a+=""),o={class_:"warning",icon:"fa fa-exclamation",title:a,time:(new Date).getTime()+"",description:a,data:{},action:{}}}Application.pushNotify("notifyToast",o,{}),Application.pushNotify("notifyDefault",o,{}),Application.callAllScreenListen()}static setMyDevice(t){void 0===cache.user.my_device&&(cache.user.my_device={});for(let e in t)cache.user.my_device[e]=t[e]}static checkIsPublic(){return!0}static getUrlLogin(){let t="";return t=Application.checkIsPublic()?isMobile_get()?window.location.origin+window.location.pathname+"?isMobile=true&app=login&cordovaProtocol="+protocol_get()+"&cordovaDomain="+hostname_get()+"&cordovaPort="+port_get()+"&b="+cache.app_config.para.app_id:"//"+cache.app_config.domain+cache.app_config.public.port+"/login?b="+cache.app_config.para.app_id:"//"+cache.app_config.domain+cache.app_config.dev.login_port+"/login?b="+cache.app_config.para.app_id,t}static getUrlLogin_ver2(){let t="";return t=Application.checkIsPublic()?isMobile_get()?window.location.origin+window.location.pathname+"?isMobile=true&app=login&cordovaProtocol="+protocol_get()+"&cordovaDomain="+hostname_get()+"&cordovaPort="+port_get():"//"+cache.app_config.domain+cache.app_config.public.port+"/login":"//"+cache.app_config.domain+cache.app_config.dev.login_port+"/login",t}static checkIsMobi(){return void 0!==cache.app_config.isMobi&&cache.app_config.isMobi}static gotoApp(t,e,i,o,a){let s="";return Application.checkIsPublic()?isMobile_get()?(console.log("is mobile ne"),s=window.location.origin+window.location.pathname+"?isMobile=true&app=app&cordovaProtocol="+protocol_get()+"&cordovaDomain="+hostname_get()+"&cordovaPort="+port_get()+"&s="+_libStoreHtml5__WEBPACK_IMPORTED_MODULE_7__.Z.buildStoreHtml5_for_login(t,e,i,o,a)):(console.log("k phai mobile"),s="//"+cache.app_config.domain+cache.app_config.public.port+"/app?s="+_libStoreHtml5__WEBPACK_IMPORTED_MODULE_7__.Z.buildStoreHtml5_for_login(t,e,i,o,a)):s="//"+cache.app_config.domain+cache.app_config.dev.app+"/?s="+_libStoreHtml5__WEBPACK_IMPORTED_MODULE_7__.Z.buildStoreHtml5_for_login(t,e,i,o,a),s}static setSessionTemp(t){void 0!==t&&(cache.user.session_id=t)}static getUserCode(){return cache.user.user_id}static loadParameterSystem(t){void 0===cache.config.parameter_system&&(cache.config.parameter_system={});for(var e=0;e<t.length;e++)void 0!==t[e].code&&(cache.config.parameter_system[t[e].code]=t[e]);let i=Application.getParameterSystem("button_watting_action");void 0!==i&&(cache.form.button_watting_action=i)}static getSessionFromStore(){return cache.user.session_id}static clearSessionStorage(){return localStorage.removeItem("session_id_"+cache.app_config.para.app_id)}static parameterSystem_start(){var t=Application.getParameterSystem("reloginCount");void 0!==t&&(cache.system_mode.reloginCount=t);var e=Application.getParameterSystem("reloginTimer");void 0!==e&&(window.addEventListener("mousemove",(()=>{Application.relogin_ResetTimer(e)})),window.addEventListener("keyup",(()=>{Application.relogin_ResetTimer(e)}))),"L"===getStatusToken()&&Application.relogin_lockScreen()}static relogin_up_loginFalse(){void 0===cache.system_mode.reloginUserCount&&(cache.system_mode.reloginUserCount=0),cache.system_mode.reloginUserCount++}static relogin_checkOverLoadLoginFalse(){return void 0!==cache.system_mode.reloginCount&&void 0!==cache.system_mode.reloginUserCount&&0!==cache.system_mode.reloginCount&&cache.system_mode.reloginUserCount>=cache.system_mode.reloginCount}static relogin_maxLoginFalse(){return cache.system_mode.reloginCount}static relogin_checkHasPinCode(){return void 0!==cache.system_mode.pin&&cache.system_mode.pin}static relogin_setHasPinCode(){cache.system_mode.pin=!0}static relogin_loginFalseCurrent(){return cache.system_mode.reloginUserCount}static relogin_resetCount(){cache.system_mode.reloginUserCount=0}static relogin_ResetTimer(t){void 0!==form_relogin_timeout&&clearTimeout(form_relogin_timeout),form_relogin_timeout=setTimeout((()=>{Application.relogin_getStatus()||Application.relogin_lockScreen()}),1e3*t*60)}static getParameterSystem(t){if(void 0===cache.config.parameter_system&&(cache.config.parameter_system={}),void 0!==cache.config.parameter_system[t]){var e=cache.config.parameter_system[t];if(void 0!==e.value&&void 0!==e.data_type)switch(e.data_type){case"s":return e.value;case"b":return"true"===e.value;case"n":return Number(e.value);default:return}}}static checkSystemModeLock_bo_fo(t,e){if(void 0!==t)return!!cache.system_mode.safe.fo.includes(";"+t+";")||(!cache.system_mode.isLock||!!cache.system_mode.mode.lock.fo.includes(";"+t+";"))}static jcontextAdd(t){list_jcontext.push(t)}static jcontextGetAll(){return list_jcontext}static setFormChat(t){form_chat=t}static getDataChatTemp(){return cache.chat.data_chat}static addDataChatTemp(t){cache.chat.data_chat[cache.chat.data_chat.length]=t}static addDataChatNew(t){for(var e=0;e<cache.chat.data_chat.length;e++)if(cache.chat.data_chat[e].id===t.id)return;if(cache.chat.data_chat[cache.chat.data_chat.length]=t,void 0!==form_chat)form_chat.hasOwnProperty("showChat")&&form_chat.showChat(t);else{const t=new Date;var i={icon:"fa-info-circle",color:"success",title:Application.getLang("systemTitle"),time:t.getTime()+"",description:Application.getLang("hasChat"),data:{},action:{}};Application.pushNotify("notifyToast",i,{}),Application.callAllScreenListen()}}static setStatusChat(t){if(void 0!==t.statusSend)for(var e=0;e<cache.chat.data_chat.length;e++)if(cache.chat.data_chat[e].id===t.data_chat.id)return cache.chat.data_chat[e].status=t.statusSend,void(void 0!==form_chat&&form_chat.hasOwnProperty("changeStatusChat")&&form_chat.changeStatusChat(t))}static setProtect(t){cache.protect.key=t,buildBitwiseFromProtect()}static getProtect(){return cache.protect.key}static getTimeProtect(){return cache.protect.time_refresh}static getKeyX(t){var e=0;e=void 0!==cache.protect.bitwise&&0!==cache.protect.bitwise?cache.protect.bitwise:15;for(var i=0;i<t.length;i++)e+=t.codePointAt(i)^e;return e}static getConfigUser(t){return void 0!==cache.user.config_of_user&&void 0!==cache.user.config_of_user[t]?cache.user.config_of_user[t]:void 0!==cache.user.config_of_user_default&&void 0!==cache.user.config_of_user_default[t]?cache.user.config_of_user_default[t]:void 0}static getConfigUserDefault(t){return""===t?cache.user.config_of_user_default:void 0!==cache.user.config_of_user_default&&void 0!==cache.user.config_of_user_default[t]?cache.user.config_of_user_default[t]:void 0}static getFormAppAuto(t){if(void 0!==cache.form.auto_form[t])return cache.form.auto_form[t]}static getOncePacked(){return cache.protect.oncePacked}static setOncePacked(t){cache.protect.oncePacked=t}static changeKeyLanguage(){for(var t in cache.form.auto_form)cache.form.auto_form[t].hasOwnProperty("changeKeyLanguage")&&cache.form.auto_form[t].changeKeyLanguage()}static changeForDebug(t){for(var e in cache.form.auto_form)cache.form.auto_form[e].hasOwnProperty("forDebug")&&cache.form.auto_form[e].forDebug(t)}static foGetData(t,e){if(void 0!==e.fo)for(var i=0;i<e.fo.length;i++)if(void 0!==e.fo[i].input&&void 0!==e.fo[i].input[t])return e.fo[i].input[t]}static putDataGB(t,e,i){null==cache.form.shared_form_data[t]&&(cache.form.shared_form_data[t]={}),cache.form.shared_form_data[t][e]=i}static putDataJoinGB(t,e){if(null==cache.form.shared_form_data[t]&&(cache.form.shared_form_data[t]={}),void 0!==e)for(var i in e)cache.form.shared_form_data[t][i]=e[i]}static FromAddComponent(t,e){void 0!==cache.form.auto_form[t]&&cache.form.auto_form[t].addComponent(e)}static putData(t,e,i,o){if(void 0!==o&&void 0!==o.key_form&&void 0!==cache.form.auto_form[o.key_form]){var a=cache.form.auto_form[o.key_form];void 0!==a&&a.hasOwnProperty("putData")&&a.putData(t,e,i)}}static putDataOneKey(t,e,i){if(void 0!==i&&void 0!==i.key_form&&void 0!==cache.form.auto_form[i.key_form]){var o=cache.form.auto_form[i.key_form];void 0!==o&&o.hasOwnProperty("putDataOneKey")&&o.putDataOneKey(t,e)}}static putDataJoin(t,e){var i=this.getFormCurrent();void 0!==i&&i.hasOwnProperty("putDataJoin")&&i.putDataJoin(t,e)}static putDataAll(t){cache.form.shared_form_data=t}static copyToClipboard(t){if(copyToClipboard){copyToClipboard.value=t,copyToClipboard.focus(),copyToClipboard.select(),copyToClipboard.setSelectionRange(0,t.length),document.execCommand("copy");const i=new Date;var e={class_:"success",icon:"fa fa-clipboard",title:Application.getLang("systemTitle"),time:i.getTime()+"",description:Application.getLang("copyToClipboard"),data:{},action:{}};Application.pushNotify("notifyToast",e,{}),Application.callAllScreenListen(),window.getSelection&&(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges())}}static clearClipboardFo(){Application.isDebug()||copyToClipboard&&(window.isSecureContext?navigator.clipboard.writeText(""):(copyToClipboard.value=" ",copyToClipboard.focus(),copyToClipboard.select(),copyToClipboard.setSelectionRange(0,99999),document.execCommand("copy")))}static getDataGB(t){return""!==t.trim&&null!=cache.form.shared_form_data[t]?cache.form.shared_form_data[t]:cache.form.shared_form_data}static getAllFormIsOpen(){return cache.form.auto_form}static getListFormIsOpen(){return cache.form.list_auto_form}static arrayMoveImmutableListFormIsOpen(t){let{oldIndex:e,newIndex:i}=t;cache.form.list_auto_form=(0,array_move__WEBPACK_IMPORTED_MODULE_12__.q)(cache.form.list_auto_form,e,i)}static getAllFormParentIsOpen(){let t=cache.form.auto_form;var e=[];for(var i in t)if(t[i].hasOwnProperty("getKeyFormAuto")){var o={};if(o.form_key=i,t[i].hasOwnProperty("getInfoA")){var a=t[i].getInfoA();void 0!==a&&void 0!==a.ofModal&&!1===a.ofModal&&(o.title=a.title,e[e.length]=o)}}return e}static getLongTime(){return 1*new Date}static autoID(){return createStringID()+createStringID()+createStringID()+createStringID()}static autoUui(){return createStringID()+createStringID()+createStringID()+createStringID()+"-"+createStringID()+createStringID()}static autoUui_key_feedback(){let t=new Date,e=new Date(t.getFullYear(),0,0),i=t-e+60*(e.getTimezoneOffset()-t.getTimezoneOffset())*1e3,o=Math.floor(i/864e5);return createStringID()+createStringID()+createStringID()+createStringID()+createStringID()+createStringID()+"-"+o}static addAppAuto(t,e,i){cache.form.auto_form[t]=e,void 0!==i&&(i||(this.hiddenAllForm(),cache.form.list_auto_form.includes(t)||(cache.form.list_auto_form[cache.form.list_auto_form.length]=t),this.setFormCurrent(e)))}static profileUser_set(t){cache.user.user_profile=t}static profileUser_get(t){return void 0!==cache.user.user_profile&&void 0!==cache.user.user_profile[t]?cache.user.user_profile[t]:""}static relogin_setForm(t){form_relogin=t}static relogin_getForm(){return form_relogin}static relogin_lockScreen(){void 0!==form_relogin&&form_relogin.hasOwnProperty("startRelogin")&&(form_relogin.startRelogin(),Application.relogin_setStatus(!0))}static relogin_setStatus(t){cache.system_mode.isLock=t}static relogin_getStatus(){return cache.system_mode.isLock}static addScreen(t){cache.screens[cache.screens.length]=t}static getAllScreen(){return cache.screens}static pushNotify(t,e,i){null==cache.notification[t]&&(cache.notification[t]=[]);var o=cache.notification[t].length;void 0===cache.notification[t][o]&&(cache.notification[t][o]={}),cache.notification[t][o]=e}static pushAllNotify(t,e){void 0===cache.notification[t]&&(cache.notification[t]=[]),cache.notification[t]=cache.notification[t].concat(e)}static getListNotifications(t){if(void 0!==cache.notification[t])return cache.notification[t]}static clearNotifyType(t){void 0!==cache.notification[t]&&(cache.notification[t]=[])}static deleteNotifyItem(t,e){if(void 0!==cache.notification[t])for(let o=0;o<cache.notification[t].length;o++){var i;if((null===(i=cache.notification[t][o])||void 0===i?void 0:i.time)===e){cache.notification[t].splice(o,1);break}}}static callAllScreenListen(){for(var t=0;t<cache.screens.length;t++)cache.screens[t].hasOwnProperty("callScreen")&&cache.screens[t].callScreen()}static callOpenFormIndex(t){for(var e=0;e<cache.screens.length;e++)cache.screens[e].hasOwnProperty("callOpenFormIndex")&&cache.screens[e].callOpenFormIndex(t)}static callFocusSearchGlobal(){for(var t=0;t<cache.screens.length;t++)cache.screens[t].hasOwnProperty("callFocusSearchGlobal")&&cache.screens[t].callFocusSearchGlobal()}static callReBuildMenu(){for(var t=0;t<cache.screens.length;t++)cache.screens[t].hasOwnProperty("callReBuildMenu")&&cache.screens[t].callReBuildMenu()}static openForm(t){return!(""===t||void 0===cache.form.auto_form[t]||!cache.form.auto_form[t].hasOwnProperty("callSetHidden")||!cache.form.auto_form[t].hasOwnProperty("getKeyFormAuto")||cache.form.auto_form[t].getKeyFormAuto()!==t)&&(this.setFormCurrent(cache.form.auto_form[t]),!0)}static hiddenAllForm(){for(var t in cache.form.auto_form)if(void 0!==cache.form.auto_form[t]&&cache.form.auto_form[t].hasOwnProperty("getInfoA")){var e=cache.form.auto_form[t].getInfoA();void 0!==e&&void 0!==e.ofModal&&!1===e.ofModal&&cache.form.auto_form[t].hasOwnProperty("callSetHidden")&&cache.form.auto_form[t].callSetHidden("none")}}static getAllFormIdOpen_DOM(){return cache.form.opening_forms}static newForm(t){cache.form.opening_forms.push(t),react_dom__WEBPACK_IMPORTED_MODULE_1__.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{children:cache.form.opening_forms}),document.getElementById("content")),this.callAllScreenListen()}static checkRoleSuperAdmin(){return!!this.getParameterSystem("roleSupperAdmin")}static checkRole_AppAdmin(){return!0}static systemName(){return"/"}static checkTrace(){return!!this.getParameterSystem("monitoringPost")}static isDebug(){return cache.statusDebug}static callDirFromSupport(t,e){for(var i=0;i<cache.screens.length;i++)void 0!==cache.screens[i].type_screen&&cache.screens[i].type_screen===t&&cache.screens[i].hasOwnProperty(e)&&cache.screens[i][e]()}static isAssistant(){return cache.assistant.isRun}static assistant_add(t){if(void 0===cache.assistant.dataAssistantSupport&&(cache.assistant.dataAssistantSupport=[]),!cache.assistant.dataAssistantSupport.includes(t.key_feedback)){if(cache.assistant.dataAssistantSupport.length>=cache.assistant.max_data){for(let t=1;t<cache.assistant.dataAssistantSupport.length;t++)cache.assistant.dataAssistantSupport[t-1]=cache.assistant.dataAssistantSupport[t];cache.assistant.dataAssistantSupport.pop()}void 0!==t.key_feedback&&cache.assistant.dataAssistantSupport.push(t.key_feedback)}}static assistant_sendFeekError(){return void 0===cache.assistant.dataAssistantSupport&&(cache.assistant.dataAssistantSupport=[]),cache.assistant.dataAssistantSupport.join(";")}static setDebug(t){cache.statusDebug=(!0===t||!1===t)&&t}static markdown_render(t){return void 0!==elearning_render_markdown&&void 0!==t&&null!==elearning_render_markdown?elearning_render_markdown.options.previewRender(t):""}static saveTrace(t){this.getParameterSystem("monitoringPost")&&(this.showTrace()&&void 0!==t.time_send&&(this.showCache()?console.log(t.time_send+"=>",t,cache):console.log(t.time_send+"=>",t)),cache.trace[cache.trace.length]=t)}static showTrace(){return!!this.getParameterSystem("monitoringPostShow")}static showCache(){return!!this.getParameterSystem("monitoringCache")}static removeForm(t){if(""!==t){var e=this.getFormCurrent(),i="";e.hasOwnProperty("getKeyFormAuto")&&(i=e.getKeyFormAuto());var o="";for(var a in cache.form.auto_form)if(cache.form.auto_form[a].hasOwnProperty("callSetHidden")&&cache.form.auto_form[a].hasOwnProperty("getKeyFormAuto")){if(cache.form.auto_form[a].getKeyFormAuto()===t){if(void 0!==cache.form.mapping_dom_react[t]){delete cache.form.auto_form[a];for(let t=0;t<cache.form.list_auto_form.length;t++)if(cache.form.list_auto_form[t]===a){cache.form.list_auto_form.splice(t,1);break}for(var s=cache.form.mapping_dom_react[t],n=0;n<cache.form.opening_forms.length;n++)if(cache.form.opening_forms[n].key===s){cache.form.opening_forms.splice(n,1);break}if(delete cache.form.mapping_dom_react[t],react_dom__WEBPACK_IMPORTED_MODULE_1__.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{children:cache.form.opening_forms}),document.getElementById("content")),i===t)if(cache.form.opening_forms.length>0){let t=this.getFormLastOpen(),e="";if(t.hasOwnProperty("getKeyFormAuto")&&(e=t.getKeyFormAuto()),""===e){if(!cache.form.auto_form[o]||!1!==cache.form.auto_form[o].getInfoA().ofModal)for(const t in cache.form.auto_form)!1===cache.form.auto_form[t].getInfoA().ofModal&&(o=t,a=t);this.setFormCurrent(cache.form.auto_form[o],!1)}else if(""!==e&&e!==i)this.setFormCurrent(cache.form.auto_form[e],!1);else{if(!cache.form.auto_form[o]||!1!==cache.form.auto_form[o].getInfoA().ofModal)for(const t in cache.form.auto_form)!1===cache.form.auto_form[t].getInfoA().ofModal&&(o=t,a=t);this.setFormCurrent(cache.form.auto_form[o],!1)}}else this.setFormCurrent(cache.form.auto_form[0]);else this.setFormCurrent(cache.form.auto_form[i])}else Application.AppException("#libSupport.removeForm","mapping_dom_react,form_key is undefined","system");return}o=a}}else cache.form.auto_form={},cache.form.list_auto_form=[],cache.form.opening_forms=[],react_dom__WEBPACK_IMPORTED_MODULE_1__.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{children:cache.form.opening_forms}),document.getElementById("content"))}static removeAllForm(){cache.form.auto_form={},cache.form.list_auto_form=[],cache.form.opening_forms=[],cache.form.selected_form={},cache.form.last_open_form={},cache.form.shared_form_data={},cache.form.mapping_dom_react={},react_dom__WEBPACK_IMPORTED_MODULE_1__.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{children:cache.form.opening_forms}),document.getElementById("content"))}static getFormCurrent(){return cache.form.selected_form}static getFormLastOpen(){return cache.form.last_open_form}static getDataFormForm_obDataForm(){var t=this.getFormCurrent();return void 0!==t&&t.hasOwnProperty("getData")?t.getData(""):{}}static setFormCurrent(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hiddenAllForm(),cache.form.last_open_form=e?cache.form.selected_form:{},void 0!==t)cache.form.selected_form=t;else for(let i in cache.form.auto_form)if(!1===cache.form.auto_form[i].getInfoA().ofModal){cache.form.selected_form=cache.form.auto_form[i];break}cache.form.selected_form.hasOwnProperty("callSetHidden")&&cache.form.selected_form.callSetHidden(""),this.callAllScreenListen()}static getLang(t){return getLang(t)}static addLang(t,e){cache.app_config.lang_data[t]=e}static getAllLang(){return cache.app_config.lang_data}static setAllLang(t){void 0===cache.app_config.lang_data?(cache.app_config.lang_data={},cache.app_config.lang_data[cache.app_config.para.language]=t):cache.app_config.lang_data[cache.app_config.para.language]=t}static getLangWithData(t,e){var i=getLang(t);if(void 0!==e&&void 0!==e.table&&void 0!==e.data){var o=e.data,a=getDataBaseTable(e.table);if(void 0!==a&&null!=a.detail)for(var s=a.detail,n=0;n<s.length;n++){var r=s[n];null!=r.code&&null!=r.mapping&&(i=void 0!==o[r.code]?(i=i.replace("["+r.code+"]",o[r.code])).replace("["+r.mapping+"]",o[r.code]):(i=i.replace("["+r.code+"]","")).replace("["+r.mapping+"]",""))}}return i}static supportFormatDate(t){var e=new Date(parseFloat(t));return e.toLocaleDateString()+" "+e.toLocaleTimeString()}static convertFoOfApp_fo_check(t){var e={};for(var i in t)if(t[i].includes("#")&&t[i].includes(":")){var o=i;e[o]=o}else e["#"+getKey_APP()+":"+i]="#"+getKey_APP()+":"+i;return e}static convertFoOfApp_fo_arr(t){for(var e=[],i=0;i<t.length;i++)if(void 0!==t[i].txcode)if(e[i]=JSON.parse(JSON.stringify(t[i])),t[i].txcode.includes("#")&&t[i].txcode.includes(":"));else{var o=t[i].txcode;e[i].txcode="#"+getKey_APP()+":"+o}return e}static convertFoOfApp_fo_arr_no_app(t){for(var e=[],i=0;i<t.length;i++)if(void 0!==t[i].txcode&&(e[i]=JSON.parse(JSON.stringify(t[i])),t[i].txcode.includes("#")&&t[i].txcode.includes(":"))){var o=t[i].txcode;e[i].txcode=o.substring(o.indexOf(":")+1,o.length)}return e}static setData(t,e){cache.data[t]=e}static addData(t,e){void 0===cache.data[t]&&(cache.data[t]=[]),cache.data[t].unshift(e)}static updateData(t,e,i){if(void 0===i&&(i="AFGHkeyIndexWJ"),void 0!==cache.data[t]){if(void 0!==e[t])for(var o=0;o<cache.data[t].length;o++)if(void 0!==cache.data[t][o][t][i]&&void 0!==e[t][i]&&cache.data[t][o][t][i]===e[t][i])return void(cache.data[t][o]=e)}else cache.data[t]=[]}static deleteData(t,e,i){if(void 0===i&&(i="AFGHkeyIndexWJ"),void 0!==cache.data[t]){if(void 0!==e[t])for(var o=0;o<cache.data[t].length;o++)if(void 0!==cache.data[t][o][t][i]&&void 0!==e[t][i]&&cache.data[t][o][t][i]===e[t][i])return void cache.data[t].splice(o,1)}else cache.data[t]=[]}static addTxFo(t,e){cache.config.fo[t]=e}static BlackList_add(t,e){void 0===cache.config.fo_black_list[t]&&(cache.config.fo_black_list[t]={}),cache.config.fo_black_list[t][e]=e}static BlackList_check(t,e){return void 0===cache.config.fo_black_list[t]||void 0===cache.config.fo_black_list[t][e]}static getTxFo(t){if(void 0!==cache.config.fo[t])return JSON.parse(JSON.stringify(cache.config.fo[t]))}static findData(t,e,i){if(void 0!==cache.data[t]){for(var o=0;o<cache.data[t].length;o++)if(void 0!==cache.data[t][o][t][e]&&cache.data[t][o][t][e]===i)return cache.data[t][o]}else cache.data[t]=[]}static findData_Update(t,e){if(void 0===e&&(e="AFGHkeyIndexWJ"),void 0!==t)for(var i in t)if(void 0!==t[i][e]){void 0===cache.data[i]&&(cache.data[i]=[]);for(var o=0;o<cache.data[i].length;o++)if(void 0!==cache.data[i][o][i][e]&&cache.data[i][o][i][e]===t[i][e])return void(cache.data[i][o]=t)}}static getDataOOPFormServer(t,e){if(void 0!==t){if(void 0===e||""===e){let e={};for(var i in t)"object"===typeof t[i]&&(e=Object.assign(e,t[i]));return e}return t[e]}}static getData(t){return""===t?cache.data:void 0!==cache.data[t]?cache.data[t]:[]}static getRoleCache(){return cache.user.role_cache}static getRoleApprove(){return cache.user.role_approve}static getTimeAddComponent(){return cache.form.time_add_component}static getTimeActionWatting(){return cache.form.button_watting_action}static getDataLimited(t,e,i){return e=parseInt(e),i=parseInt(i),_libQuery__WEBPACK_IMPORTED_MODULE_2__.Z.AnalyticsQuery(t,e,i)}static data_cdList(t,e,i){if(void 0!==cache.constData[t]&&void 0!==cache.constData[t][e]){if(i)return Application.cloneJson(cache.constData[t][e]);return cache.constData[t][e].filter((t=>t.c_cdlist.visible))}return[]}static data_buildCdListQuick(t){for(var e={},i=0;i<t.length;i++)if(void 0!==t[i].c_cdlist){var o=t[i].c_cdlist;if(void 0!==o.cdgrp&&void 0!==o.cdname){var a=o.cdgrp,s=o.cdname;void 0===e[a]&&(e[a]={}),void 0===e[a][s]&&(e[a][s]=[]),e[a][s].push(t[i])}}for(var n in e)for(var r in e[n])e[n][r].sort(((t,e)=>parseInt(t.c_cdlist.cdidx)-parseInt(e.c_cdlist.cdidx)));cache.constData=e}static checkDynamicCondition(data,condition){if(""!==condition.trim())try{let wf=data,user_acc=Application.context_get("user_acc");return eval(condition)}catch(_unused){return!1}return!0}static checkCondition(data,condition){if(""!==condition.trim())try{return eval("let wf="+JSON.stringify(data)+";"+condition)}catch(_unused2){return}}static form_getName(t){if(void 0!==t&&""!==t)for(var e=cache.data.group_menu_role,i=0;i<e.length;i++)if(void 0!==e[i].group_menu&&void 0!==e[i].group_menu.group_menu_function_code&&e[i].group_menu.group_menu_function_code===t)return e[i].group_menu;return{}}static form_addMapping(t,e){cache.form.mapping_dom_react[t]=e}static get_appConfig(){return cache.app_config}static role_menuOfRole(){if(void 0!==cache.data.group_menu){var t=cache.data.group_menu;cache.data.group_menu_role=t}}static role_getAllRoleRight(t){return void 0!==cache.config.role_right&&void 0!==cache.config.role_right[t]?cache.config.role_right[t]:null}static role_getComponent(t,e){return void 0!==cache.config.role_right&&void 0!==cache.config.role_right[t]&&void 0!==cache.config.role_right[t][e]?cache.config.role_right[t][e]:null}static runJs(data,componentCode,js){if(""!==js.trim())try{return eval("var form="+JSON.stringify(data)+";var componentCode='"+componentCode+"';"+js+";form;")}catch(_unused3){return}}static paramStringCaculator(param_str){if(param_str&&""!==param_str.trim())try{return eval(param_str)}catch(_unused4){return}}static Sum(t,e){return(0,_libCalculator__WEBPACK_IMPORTED_MODULE_3__.PD)(t,e)}static Sub(t,e){return(0,_libCalculator__WEBPACK_IMPORTED_MODULE_3__.h9)(t,e)}static Mul(t,e){return(0,_libCalculator__WEBPACK_IMPORTED_MODULE_3__.z6)(t,e)}static Div(t,e){return(0,_libCalculator__WEBPACK_IMPORTED_MODULE_3__.QZ)(t,e)}static CompareTwoNumber(t,e){return(0,_libCalculator__WEBPACK_IMPORTED_MODULE_3__.gM)(t,e)}static checkDynamicConditionNoData(condition){if(""!==condition.trim())try{return eval(condition)}catch(_unused5){return!1}return!0}static condition_checkDynamicNoData(condition){if(""!==condition.trim())try{return eval(condition)}catch(_unused6){return}}static checkHasData(t){return void 0!==cache.data[t]}static getOOP(t,e){if(e.includes(".")){var i=e.split(".");if(void 0!==t)if(2===i.length){if(void 0!==t[i[0]]&&void 0!==t[i[0]][i[1]])return t[i[0]][i[1]]}else if(3===i.length&&void 0!==t[i[0]]&&void 0!==t[i[0]][i[1]]&&void 0!==t[i[0]][i[1]][i[2]])return t[i[0]][i[1]][i[2]]}return""}static getOOP_key(t){if(t.includes(".")){var e=t.split(".");if(e.length>1)return e[1]}return""}static searchTable(t,e){var i=[];if(void 0!==t&&void 0!==e){for(var o=!1,a=0;a<t.length;a++)if(void 0!==t[a].search&&""!==t[a].search.trim()){o=!0;break}if(o){for(var s=0;s<e.length;s++)if(void 0!==e[s])for(var n=0;n<t.length;n++)if(void 0!==t[n].search&&void 0!==t[n].code){var r=t[n].code;if(void 0!==e[s][r]&&""!==t[n].search.trim()&&e[s][r].includes(t[n].search.trim())){i[i.length]=e[s];break}}}else i=e}return i}static ms_start(t,e,i,o,a){cache.master_data[o]={form_code:a,data_key_value:i,table:t,pk:e}}static ms_saveOld(t,e){void 0!==cache.master_data[e]&&(cache.master_data[e].dataOld=t)}static ms_saveNew(t,e){void 0!==cache.master_data[e]&&(cache.master_data[e].dataNew=t)}static ms_getMasterData(t){return cache.master_data[t]}static ms_clearMasterData(t){delete cache.master_data[t]}static getConfigMasterOfComponent(t,e){if(void 0!==cache.config.form_config[t]){var i=cache.config.form_config[t];if(void 0!==i.list_layout)for(var o=i.list_layout,a=0;a<o.length;a++)if(void 0!==o[a].list_view)for(var s=o[a].list_view,n=0;n<s.length;n++)if(void 0!==s[n].list_input)for(var r=s[n].list_input,l=0;l<r.length;l++){var c=r[l];if(void 0!==c.default&&void 0!==c.default.codeHidden&&c.default.codeHidden===e)return c}}}static loadScript(t){var e=document.head,i=document.createElement("script");i.type="text/javascript",i.src=t,e.appendChild(i)}static setConfigComponent(t,e){switch(t){case"config":obj_component_render_config=e;break;case"property":obj_component_render_property=e;break;case"role":obj_component_render_role=e;break;case"validate":obj_component_render_validate=e;break;case"lang":obj_component_render_lang=e}}static getConfigComponent(t){switch(t){case"config":return obj_component_render_config;case"property":return obj_component_render_property;case"role":return obj_component_render_role;case"validate":return obj_component_render_validate;case"lang":return obj_component_render_lang}return null}static parseJson(t){try{return JSON.parse(t)}catch(e){return}}static cloneJson(t){try{return JSON.parse(JSON.stringify(t))}catch(e){return}}static copyJsonObject(t,e){if(void 0!==e&&void 0!==t){var i=this.parseJson(JSON.stringify(e));if(void 0!==i){for(var o in t)i[o]=t[o];return i}}return t}static jsonParser(t){try{return JSON.parse(t)}catch(e){}}static supportReplaceFo(t,e){return t}static analyticsTable(t){return _libDatabaseSmart__WEBPACK_IMPORTED_MODULE_8__.Z.analyticsTable(t)}static timeSince(t){var e=Math.floor((new Date-t)/1e3),i=Math.floor(e/31536e3);return i>1?i+" "+getLang("timeSince_y"):(i=Math.floor(e/2592e3))>1?i+" "+getLang("timeSince_m"):(i=Math.floor(e/86400))>1?i+" "+getLang("timeSince_d"):(i=Math.floor(e/3600))>1?i+" "+getLang("timeSince_h"):(i=Math.floor(e/60))>0?i+" "+getLang("timeSince_p"):getLang("timeSince_s_ago")}static confirmStartOnlyOnce(t){modal_confirm=t}static confirmStartCompareOnlyOnce(t){modal_compare=t}static confirmStartOnlyOnceKeyboard(t){modal_keyboard=t}static confirmStartOnlyOnceKeyboardConfig(t){modal_keyboard_config=t}static confirmInfo(t,e,i,o){void 0!==modal_confirm&&modal_confirm.setInfoModal(t,e,i,o)}static compareInfo(t,e,i,o){void 0!==modal_compare&&modal_compare.setInfoModal(t,e,i,o)}static setModalOpenKeyboard(){void 0!==modal_keyboard&&void 0!==modal_keyboard_config&&(modal_keyboard_config.checkModalOpen()||modal_keyboard.setModalOpen())}static setModalOpenKeyboardConfig(){void 0!==modal_keyboard_config&&modal_keyboard_config.setModalOpen()}static modalDynamicFromFromCode(t,e,i){void 0!==modal_dynamic_fromFromCode&&modal_dynamic_fromFromCode.setInfoModal(t,e,i)}static modalDynamicFromClose_Rollback(t){void 0!==modal_dynamic_fromFromCode&&modal_dynamic_fromFromCode.reloadFo(t)}static modalDynamicFromFromCode_close(){void 0!==modal_dynamic_fromFromCode&&modal_dynamic_fromFromCode.modalClose()}static modalDynamicFromFromCode_getRoleBack(){if(void 0!==modal_dynamic_fromFromCode)return modal_dynamic_fromFromCode.getRolBackData()}static modalDynamicFromFromCode_StartOnlyOnce(t){modal_dynamic_fromFromCode=t}static webSocketConnect(){var t=(isMobile_get()?"https"===protocol_get()?"wss":"ws":"https:"===window.location.protocol?"wss":"ws")+"://"+cache.app_config.server.socket+"/"+Application.getSessionFromStore();cache.websocket=new WebSocket(t),cache.websocket.onopen=function(){Application.webSocketDisplayStatus("Open"),Application.webSocketSendMessage("#protectPostStart"),reconnectAttempts=0},cache.websocket.onmessage=function(t){if("string"===typeof t.data)try{var e=JSON.parse(t.data);void 0!==e&&_libClient__WEBPACK_IMPORTED_MODULE_4__.ZP.fo(e.fo,e.input)}catch(i){console.log(i)}else"object"===typeof t.data&&(cache.response_file.buffer_status=!0,cache.response_file.buffer_data=t.data,_libClient__WEBPACK_IMPORTED_MODULE_4__.ZP.fo([{txcode:"#sys:fo-download-fileData",input:{}}],void 0))},cache.websocket.onerror=function(t){console.log("Websocket onerror"),cache.websocket.close(),Application.AppException("#libSupport.webSocketConnect","","Error! "+t.data)},cache.websocket.onclose=function(){Application.webSocketDisplayStatus("Closed"),console.log("WebSocket connection closed"),reconnectAttempts<maxReconnectAttempts?(console.log("Attempting to reconnect..."),setTimeout(Application.webSocketReConnect(),reconnectDelay),reconnectAttempts++):console.log("Max reconnect attempts reached. Giving up.")}}static webSocketReConnect(){if("Open"!==cache.websocket.connectStatus){var t=(isMobile_get()?"https"===protocol_get()?"wss":"ws":"https:"===window.location.protocol?"wss":"ws")+"://"+cache.app_config.server.socket+"/"+Application.getSessionFromStore();cache.websocket=new WebSocket(t),cache.websocket.onopen=function(){Application.webSocketDisplayStatus("Open"),reconnectAttempts=0},cache.websocket.onmessage=function(t){if("string"===typeof t.data)try{var e=JSON.parse(t.data);void 0!==e&&_libClient__WEBPACK_IMPORTED_MODULE_4__.ZP.fo(e.fo,e.input)}catch(i){console.log(i)}else"object"===typeof t.data&&(cache.response_file.buffer_status=!0,cache.response_file.buffer_data=t.data,_libClient__WEBPACK_IMPORTED_MODULE_4__.ZP.fo([{txcode:"#sys:fo-download-fileData",input:{}}],void 0))},cache.websocket.onerror=function(t){console.log("Websocket onerror"),cache.websocket.close(),Application.AppException("#libSupport.webSocketConnect","","Error! "+t.data)},cache.websocket.onclose=function(){Application.webSocketDisplayStatus("Closed"),console.log("WebSocket connection closed"),reconnectAttempts<maxReconnectAttempts?(console.log("Attempting to reconnect..."),setTimeout(Application.webSocketReConnect(),reconnectDelay),reconnectAttempts++):console.log("Max reconnect attempts reached. Giving up.")}}}static webSocketDisconnect(){null!==cache.websocket&&(cache.websocket.close(),cache.websocket=null)}static webSocketSendMessage(t){null!==cache.websocket?cache.websocket.send(t):Application.AppException("#libSupport.webSocketSendMessage","webSocket is null","val_send:"+t)}static webSocketDisplayStatus(t){cache.websocket.connectStatus=t}static rsa_getPostion(){return cache.rsa.position_default}static rsa_getAlgorithm(){var t=Math.floor(10*Math.random())+"";return void 0!==cache.rsa.algorithm[t]?cache.rsa.algorithm[t]:cache.rsa.algorithm[1]}static rsa_response_getAlgorithm(){var t=Math.floor(10*Math.random());return void 0!==cache.rsa.algorithm_response[t]?cache.rsa.algorithm_response[t]:cache.rsa.algorithm_response[1]}static rsa_setAlgorithm(t){cache.rsa.algorithm=Object.assign(cache.rsa.algorithm,t)}static rsa_getPrivateKey(){return cache.rsa.privateKey}static rsa_setPublicKey(t){cache.rsa.publicKey=t}static rsa_getPublicKey(){return cache.rsa.publicKey}static txBasic_get(){return code_basicTxCode}static txBasic_add(t){if(void 0!==t)for(var e=0;e<t.length;e++){var i=t[e];for(var o in i)for(var a=0;a<i[o].length;a++){var s=i[o][a];if(void 0!==s.content&&void 0!==s.type)if("js"===s.type){if(void 0!==s.contain)switch(s.contain){case"codeLib":Application.txBasic_addCodeLib(s.content,s.fo);break;case"basicTx":Application.txBasic_addDynamicJs(s)}}else Application.loadCssContent(s.content)}}}static txBasic_addDynamicJs(tx_ob){void 0!==tx_ob.content&&void 0!==tx_ob.class&&(code_basicTxCode[tx_ob.class]=eval(tx_ob.content))}static txBasic_addCodeLib(tx_ob,fo_){eval(tx_ob),void 0!==fo_&&""!==fo_&&_libClient__WEBPACK_IMPORTED_MODULE_4__.ZP.fo([{txcode:fo_,input:{}}],{})}static getCoreTx(){return _tx_coreTx__WEBPACK_IMPORTED_MODULE_13__.Z}static checkResponseFile(){return cache.response_file.buffer_status&&cache.response_file.file_name_exist}static getResponseFile(){return cache.response_file}static removeResponseFile(){cache.response_file.file_name_exist=!1,cache.response_file.file_name="",cache.response_file.buffer_status=!1,cache.response_file.buffer_data=""}static setResponseFile_fileName(t){cache.response_file.file_name=t,cache.response_file.file_name_exist=!0}static setResponseFile_fileData(t){cache.response_file.buffer_data=t,cache.response_file.buffer_status=!0}static component_getListCode(t){if("string"!==typeof t)return[];let e=[];var i=new RegExp("@{([^@{}]*)}","g");let o=i.exec(t);for(;o;)e.push({key:o[0],code:o[1]}),o=i.exec(t);return e}static component_propertyIndex(t,e){let i={main:[],position:[]};if(void 0!==t){for(let e=0;e<t.main.length;e++){for(let o in t.main[e]){i.main.push({[o]:{style:[],attr:[],class:""}});for(let a of t.main[e][o].style)i.main[e][o].style.push(a);for(let a of t.main[e][o].attr)i.main[e][o].attr.push(a);i.main[e][o].class=t.main[e][o].class}for(let o in t.position[e]){i.position.push({[o]:{style:[],attr:[],class:""}});for(let a of t.position[e][o].style)i.position[e][o].style.push(a);for(let a of t.position[e][o].attr)i.position[e][o].attr.push(a);i.position[e][o].class=t.position[e][o].class}}for(let t in i)for(let o=0;o<i[t].length;o++){let a=i[t][o],s=a[Object.keys(a)[0]],n=e[t][o],r=n[Object.keys(n)[0]],l={},c={};for(let t of s.style){r.style.some((e=>Object.keys(e)[0]===Object.keys(t)[0]))||(l=Object.assign(l,t))}for(let t of r.style){s.style.some((e=>Object.keys(e)[0]===Object.keys(t)[0]))||(l=Object.assign(l,t))}for(let t of r.style)for(let e of s.style)Object.keys(e)[0]===Object.keys(t)[0]&&(l="#"!==Object.values(e)[0]?Object.assign(l,e):Object.assign(l,t));a[Object.keys(a)[0]].style=l;for(let t of s.attr){r.attr.some((e=>Object.keys(e)[0]===Object.keys(t)[0]))||(c=Object.assign(c,t))}for(let t of r.attr){s.attr.some((e=>Object.keys(e)[0]===Object.keys(t)[0]))||(c=Object.assign(c,t))}for(let t of r.attr)for(let e of s.attr)Object.keys(e)[0]===Object.keys(t)[0]&&(c="#"!==Object.values(e)[0]?Object.assign(c,e):Object.assign(c,t));if(a[Object.keys(a)[0]].attr=c,"#"===a[Object.keys(a)[0]].class){let i=e[t][o];a[Object.keys(a)[0]].class=i[Object.keys(i)[0]].class}}}else for(let o in e){let t=e[o];for(let e=0;e<t.length;e++){let a={},s={},n=t[e];for(let t in n){for(let e of n[t].style)a=Object.assign(a,e);for(let e of n[t].attr)s=Object.assign(s,e);i[o].push({[t]:{style:a,attr:s,class:n[t].class}})}}}for(let o in i){let t={};for(let e of i[o])t=Object.assign(t,e);i[o]=t}return i}static loadJs(t){return new Promise((e=>{const i=document.createElement("script");i.type="text/javascript",i.src=t,i.onload=()=>e(),i.onerror=function(t){console.error("Error loading script:",t),window.showLoadingError()},document.head.appendChild(i)}))}static loadCss(t){var e=document.createElement("link");e.setAttribute("href",t),e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),document.head.appendChild(e)}static loadCssContent(t){var e=document.createElement("style");e.innerHTML=t,document.head.appendChild(e)}static getArrayWithRegex(t,e){if("string"!==typeof t)return[];let i=[];var o=new RegExp(e,"g");let a=o.exec(t);for(;a;)i.push({key:a[0],code:a[1],index:a.index}),a=o.exec(t);return i}static getlistCodeContext(t){return this.getArrayWithRegex(t,"\\${([^}]*)}")}static context_get(t){if(void 0!==t){if(!t.includes("."))return cache.context[t];for(var e=t.split("."),i=cache.context,o=0;o<e.length;o++)if(void 0!==i[e[o]]&&(i=i[e[o]]),o===e.length-1)return i}}static context_setKey(t,e){cache.context[t]=e}static contextweb_set(t){cache.contextweb=t}static contextweb_get(){return cache.contextweb}static AppException(t,e,i){Application.isDebug()&&console.log(t+"=="+i+"=>"+e)}static log(t,e){0}static addSript(t,e){var i=document.createElement("script");i.setAttribute("type","text/javascript"),t.includes("://")?i.src=t:Application.checkIsMobi()?i.src="http://"+cache.app_config.config_mobi.app_link+t:i.src=t,i.onload=e,i.onerror=function(t){console.error("Error loading script:",t),window.showLoadingError()},document.head.appendChild(i)}static logObj(t,e){console.log(t,e)}static searchPerfect(t,e){let i=Application.convertStringToEn(t)+" ",o=Application.convertStringToEn(e),a=[];for(let r=0;r<o.length;r++){let t={const_value:e[r],value:o[r],status:!1};a.push(t)}let s=[],n="";for(let r=0;r<i.length;r++){let t=i[r].charCodeAt(0);t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||44<=t&&t<=46||95===t?n+=i[r]:""!==n&&(s.push(n),n="")}for(let r=0;r<s.length;r++){let t=-1;do{if(t=o.indexOf(s[r],t+1),-1!==t)for(let e=0;e<s[r].length;e++)a[t+e].status=!0}while(-1!==t)}if(0!==a.filter((t=>!0===t.status)).length)return a}static convertStringToEn(t){return void 0===t?"":(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t+="").replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/\xc0|\xc1|\u1ea0|\u1ea2|\xc3|\xc2|\u1ea6|\u1ea4|\u1eac|\u1ea8|\u1eaa|\u0102|\u1eb0|\u1eae|\u1eb6|\u1eb2|\u1eb4/g,"A")).replace(/\xc8|\xc9|\u1eb8|\u1eba|\u1ebc|\xca|\u1ec0|\u1ebe|\u1ec6|\u1ec2|\u1ec4/g,"E")).replace(/\xcc|\xcd|\u1eca|\u1ec8|\u0128/g,"I")).replace(/\xd2|\xd3|\u1ecc|\u1ece|\xd5|\xd4|\u1ed2|\u1ed0|\u1ed8|\u1ed4|\u1ed6|\u01a0|\u1edc|\u1eda|\u1ee2|\u1ede|\u1ee0/g,"O")).replace(/\xd9|\xda|\u1ee4|\u1ee6|\u0168|\u01af|\u1eea|\u1ee8|\u1ef0|\u1eec|\u1eee/g,"U")).replace(/\u1ef2|\xdd|\u1ef4|\u1ef6|\u1ef8/g,"Y")).replace(/\u0110/g,"D")).toLowerCase()}static getElementWithRegex(t,e){let i;if(null!==(i=t.exec(e)))return i[1]}static replaceAll(t,e){if(e){let i=new RegExp(t,"g");return e.repalce(i)}return e}static getNodeJson(t,e){if("object"!==typeof t||!e)return;let i=e.split("."),o=t;for(const a of i){if(void 0===o||null===o)return;o=o[a]}return o}static deleteNodeJson(t,e){let i=e.split("."),o=t;const a=i.length-1;for(let s=0;s<i.length;s++)void 0===o&&(o={}),s<a?(o[i[s]]||(o[i[s]]={}),o=o[i[s]]):delete o[i[s]];return t}static setNodeJson(t,e,i){let o=e.split("."),a=t;const s=o.length-1;for(let n=0;n<o.length;n++)void 0===a&&(a={}),n<s?(a[o[n]]||(a[o[n]]={}),a=a[o[n]]):a[o[n]]=i;return t}static checkConditionComponent(t,e){if(!t)return!0;let i=Application.component_getListCode(t),o=t;for(let a of i)if(void 0!==e&&void 0!==a.key&&void 0!==a.code){let t=e[a.code],i="";i="object"===typeof t?JSON.stringify(t):t+"",void 0!==i?o=o.replace(a.key,i):Application.AppException("#ruleVisibility.component_event","component_event is undefined or wrong")}return!0===this.condition_checkDynamicNoData(o)}static getConditionWithData(t,e){if(!t)return!0;let i=Application.component_getListCode(t),o=t;for(let a of i)if(void 0!==e&&void 0!==a.key&&void 0!==a.code){let t=e[a.code],i="";i="object"===typeof t?JSON.stringify(t):t+"",void 0!==i?o=o.replace(a.key,i):Application.AppException("#ruleVisibility.component_event","component_event is undefined or wrong")}return o}static checkHasRoleForm(t){if(";ACT_MAN;CSH_CSH;DPT_CSH;ACT_CSH;CSH_ACT;DPT_ACT;ACT_ACT;CSH_DPT;ACT_DPT;DPT_DPT;CSH_CFX;".includes(";"+t.replace("FO_","")+";"))return!0;return!0===Application.getRoleCache()[t]}static checkHasRoleApproveForm(t){if(";ACT_MAN;CSH_CSH;DPT_CSH;ACT_CSH;CSH_ACT;DPT_ACT;ACT_ACT;CSH_DPT;ACT_DPT;DPT_DPT;CSH_CFX;".includes(";"+t.replace("FO_","")+";"))return!0;return!0===Application.getRoleApprove()[t]}static scheduleJob_getJob_toRun(t){if(void 0!==cache.scheduleJob.job_config[t])return cache.scheduleJob.job_config[t]}static scheduleJob_addTo_Store(t){return void 0!==t&&void 0!==t.scheduleJob&&void 0!==t.scheduleJob.id&&(void 0===cache.scheduleJob&&(cache.scheduleJob={},cache.scheduleJob.job_config={}),cache.scheduleJob.job_config[t.scheduleJob.id]=t,!0)}static convertCondition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i=Application.component_getListCode(t),o=t;for(let a of i){let t=this.getNodeJson(e,a.code);null!==t&&void 0!==t||(t=""),o=o.replace(a.key,t)}return o}static persist_mergeObjects(t,e,i){return Object.assign(t,e)}static persist_convertCondition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t,s={},n=Application.getlistCodeContext(a);for(const d of n){let t=Application.context_get(d.code)||"";a=a.replace(d.key,t)}const r=Application.component_getListCode(t),l=r.map((t=>t.code)).toString().replace(/,/g,";"),c=[e,i];for(const d of c)if(d){let t=this.getFormAppAuto(d);if(t){let e=t.callDirFromSupport("getAdvanced",{list_component:l,list_view:"",inform:"true",checkError:"false"},{});s=this.persist_mergeObjects(s,e)}}s=this.persist_mergeObjects(s,o);for(let d of r){let t=this.getNodeJson(s,d.code);null!==t&&void 0!==t||(t=""),"object"===typeof t&&(t=JSON.stringify(t)),a=a.replace(d.key,t)}return a}static persist_checkCondition(condition,form_key,form_parent_key){if(null===condition||void 0===condition||!condition.trim())return!0;const new_condition=this.persist_convertCondition(condition,form_key,form_parent_key);if(""!==new_condition.trim())try{return eval(new_condition)}catch(_unused9){return!1}return!1}static persist_setFormError(t,e,i,o){let a=this.getFormAppAuto(t);if(!a)return!1;const s=i?[{info:i,infoComponent:{},key:o||"FORM",type:"form"}]:[];a.showErrorFromServer(s,e)}static persist_JSONParser(t){let e={};try{e=JSON.parse(t)}catch(i){e=void 0}return e}static setLoadingCache(t,e,i){if(!e||!i)return;e&&!cache.loading_cache.component[e]&&(cache.loading_cache.component[e]=0),i&&!cache.loading_cache.form[i]&&(cache.loading_cache.form[i]=0);let o=0;if("START"===t&&(o=1),"END"===t&&(o=-1),e){cache.loading_cache.component[e]+=o;const t=cache.loading_cache.component[e];if(1===t||!t){Application.getFormAppAuto(i).callDirFromSupport("setLoadingAction",{list_component:e,list_view:""},{isLoading:!!t})}}if(i){cache.loading_cache.form[i]+=o;const t=cache.loading_cache.form[i];if(1===t||!t){Application.getFormAppAuto(i).setLoadingAction(!!t)}}}static setLoadingForm(t,e){if(!e)return;e&&!cache.loading_cache.form[e]&&(cache.loading_cache.form[e]=0);let i=0;if("START"===t&&(i=1),"END"===t&&(i=-1),e){cache.loading_cache.form[e]+=i;const t=cache.loading_cache.form[e];if(1===t||!t){Application.getFormAppAuto(e).setLoadingAction(!!t)}}}static getLoadingCacheComponent(t){return!!cache.loading_cache.component[t]}static getListSystemKeyboard(){return Application.getData("system_keyboard")}static getDataSystemKeyboardByOs(){const t=/(\+(\+)|[+]*([^+]+))/gm,e=Application.getLangKey();let i;const o=Application.getData("system_keyboard"),a=Application.getMyDevice().osVersion;let s=[];for(let n=0;n<o.length;n++){const r=o[n].system_keyboard;if("Windows"===a){s[n]={},s[n].name=void 0!==JSON.parse(r.name)[e]?JSON.parse(r.name)[e]:"",s[n].key=JSON.parse(r.key).default,s[n].group_id=r.group_id;let o=[];for(;null!==(i=t.exec(JSON.parse(r.key).default));){i.index===t.lastIndex&&t.lastIndex++;let e={title:void 0!==i[3]?i[3].toLocaleUpperCase():i[2].toLocaleUpperCase(),icon:""};o.push(e)}s[n].arr_key=o}}return s}}Application.getLangKey=()=>cache.app_config.para.language,Application.setLangKey=t=>cache.app_config.para.language=t,Application.setLangKey=t=>cache.app_config.para.language=t,Application.markdown_set=t=>{elearning_render_markdown=t},Application.setLangKey=t=>cache.app_config.para.language=t,Application.setLangKey=t=>cache.app_config.para.language=t,Application.templateAdd=(t,e)=>cache.template_config[t]={value:e},Application.getTemplate=t=>cache.template_config[t],Application.getWebsocket=()=>cache.websocket,Application.template_addToStore=(t,e)=>{cache.template_html[t]=e},Application.template_getFromStore=t=>cache.template_html[t],Application.report_addToStore=(t,e)=>{cache.template_report[t]=e},Application.report_getFromStore=t=>cache.template_report[t]},2633:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var o=i(5842);const a=class{constructor(){this.bo=[];const t=new Date;this.info={d:(0,o.ZX)(),u:(0,o.ch)(),lang:(0,o.If)(),app:(0,o.Py)(),uid:(0,o.VN)(),my_device:JSON.stringify(o.ZP.getMyDevice()),request_time:t.getTime(),protect_request:o.ZP.getProtect(),token:(0,o.LP)(),user_id:(0,o.CO)()},o.ZP.isDebug()&&(this.info.dgu=o.ZP.isDebug())}setMoreInfo(t){for(let e in t)void 0===this.info[e]&&(this.info[e]=t[e])}setBo(t,e){void 0!==e&&(this.info.key_feedback=e),this.bo=t}encryptTxCodeBo(t,e,i){let o=[];for(let a=0;a<t.length;a++)o[a]=t[a],void 0!==t[a].txcode&&(t[a].form_code=e,t[a].from_action_code=i);return o}getForTxCode(t,e){return{bo:this.encryptTxCodeBo(this.bo,t,e)}}getInfo(){return this.info}checkSum(t){let e=t.length,i=0;for(let o=0;o<e;o++)i=i+((i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24)>>>0)^255&t[o];return i>>>0}stringToArray(t){let e=[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e.push(o):o<2048?e.push(192|o>>6,128|63&o):o<55296||o>=57344?e.push(224|o>>12,128|o>>6&63,128|63&o):(i++,o=65536+((1023&o)<<10|1023&t.charCodeAt(i)),e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o))}return this.hasTyped?new Uint8Array(e):e}hasTyped(){if(!("Uint8Array"in window))return!1;try{let t=new window.Uint8Array(10);return t[0]=100,100===t[0]}catch(t){return!1}}}},5197:(t,e,i)=>{"use strict";i.d(e,{Z:()=>O});var o=i(3063),a=i(1896),s=i(5842);const n={ttl:5e3},r={limit:{calls:100,time:1e3},cache:n};class l{constructor(t){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=t}add(t,e){this.resolveQueue.push(t),this.rejectQueue.push(e)}resolves(t){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(t)}}rejects(t){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(t)}}}class c{static set(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;this.mapCache.set(t,e),setTimeout((()=>{this.mapCache.delete(t)}),i.ttl)}static get(t){return this.mapCache.get(t)}}c.mapCache=new Map;class d{static getSingleFlight(t){const e=JSON.stringify(t);if(this.mapInstance.has(e)){const t=this.mapInstance.get(e);if(t)return t}let i=new h(t);return this.mapInstance.set(e,i),i}static async load(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof t&&(t=JSON.stringify(t));let o=d.getSingleFlight(i);d.mapInstance.set(t,o);const a=new l(t);return o.load(a,e)}}d.mapInstance=new Map;class h{constructor(t){this.config={},this.intervalRequest=null,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(r,t)}async load(t,e){const i=c.get(t.key);if(i)return Promise.resolve(i);let o=!1,a=this.mapRequestCalling.get(t.key);return a||(a=t,o=!0,this.mapRequestCalling.set(a.key,a)),new Promise(((t,i)=>{if(!a)return i("Not found request!");a.add(t,i),o&&this.fetch(a,e)}))}fetch(t,e){if(!this.validateLimit())return this.addRequestQueue(t,e);this.createTimeLogs(),e().then((e=>{c.set(t.key,e,this.config.cache),t.resolves(e)})).catch((e=>{t.rejects(e)})).finally((()=>{this.mapRequestCalling.delete(t.key),this.fetchRequestQueue(e)}))}fetchRequestQueue(t){if(!this.validateLimit())return;const e=this.requestQueue.shift();e&&this.load(e,t),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(t,e){var i;this.requestQueue.push(t),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(e)}),null===(i=this.config.limit)||void 0===i?void 0:i.time)}validateLimit(){if(!this.config.limit)return!1;const t=this.timeLogs[0]||0,e=(new Date).getTime();if(this.timeLogs.length<this.config.limit.calls)return!0;return e-t>this.config.limit.time}createTimeLogs(){var t;if(!this.config.limit)return;const e=(new Date).getTime();this.timeLogs.push(e),this.timeLogs.length>(null===(t=this.config.limit)||void 0===t?void 0:t.calls)&&this.timeLogs.shift()}}const u=class{constructor(){this.start=async t=>{if(!this.isRun(t))return;const e=this.config.config;var i="",n={};const r=t.infoA.key_form,l=s.ZP.getFormAppAuto(r);let c=l.getDataAll(!0,"true"===e.useDataParent);for(const o in c)!0===Array.isArray(c[o])&&delete c[o];switch(e.data_type){case"api":i="#sys:bo-rule-getInfoAPI",n=(0,o.Z)((0,o.Z)({},c),{},{learn_api:e.api_id,GB_obDataForm:{}});break;case"sql":i="#sys:bo-rule-getInfoSQL",n={learn_sql:e.sql_id,GB_obDataForm:{},FORM_obDataForm:c};break;case"data":i="#sys:bo-rule-getInfoData",n={table_code:e.data_table,GB_obDataForm:{},FORM_obDataForm:c};break;default:return void s.ZP.AppException("#getInfo.start#6","data_type is null:"+JSON.stringify(t),"system")}const h=[{txcode:i,input:n}];let u;if("api"===e.data_type&&e.api_id){const i=e.api_id+JSON.stringify(c);u=await d.load(i,(()=>(0,a.Yr)(h,"true"===e.loadingParent?t:{},"true"===e.loadingParent)))}else u=await(0,a.Yr)(h,"true"===e.loadingParent?t:{},"true"===e.loadingParent);let p=s.ZP.parseJson(e.component_result||"{}");var _=s.ZP.foGetData("data",u)||{},f=s.ZP.getParameterSystem("SHOW_GETINFO_ERROR");let g=s.ZP.foGetData("infoError",u);if(void 0!==f&&f&&void 0!==u&&void 0!==g){for(let t=0;t<g.length;t++)s.ZP.showToast((s.ZP.isDebug()&&g[t].code?g[t].code+": ":"")+g[t].info,!1,!1);for(let t in p)_[t]=void 0}if("true"===e.is_data_to_form&&l.putDataAll_andSet(_),_&&"true"===String(e.isSetCode)){for(const t in _){const e=_[t];if(Array.isArray(e))for(const i in e)_[t][i]={[t]:_[t][i]}}s.ZP.isDebug()&&console.log("Get_info_data",_);let i={},o={},a={},n="",c="";for(let t in p){let r=s.ZP.getNodeJson(_,p[t]);void 0===r&&"true"===String(e.isAutoDefault)?(a[t]=r,n+=""===c?t:";"+t):(o[t]=r,c+=""===c?t:";"+t),i[t]=r}"true"===String(e.isAutoDefault)&&l.callDirFromSupport("setDataDefault",{list_component:n,DEBUG_RULE:s.ZP.isDebug()?{name:"GET_INFO",isRun:!0,rule_config:this.config.config,config_target:t,reponse_data:s.ZP.cloneJson(_)}:{}},a),""!==c&&l.callDirFromSupport("setGetInfo",{component_action:this.config.config.component_action,list_component:c,DEBUG_RULE:s.ZP.isDebug()?{name:"GET_INFO",isRun:!0,rule_config:this.config.config,config_target:t,reponse_data:s.ZP.cloneJson(_)}:{}},o);const d=s.ZP.persist_JSONParser(e.error_configs);if(d)for(const t of d){let e=t.condition,o=t.error_lang;const a=s.ZP.persist_convertCondition(e,"","",i);s.ZP.paramStringCaculator(a)&&s.ZP.persist_setFormError(r,!1,o,"GETINFO")}}return!g},this.setConfig=t=>{this.config=t},this.checkUse=t=>"isOpenFromOther"===t.event||(void 0!==this.config.isStart&&void 0!==t.event&&!0===this.config.isStart&&"isStart"===t.event||!(void 0===t.configComponent||void 0===t.event||void 0===this.config.config||""===t.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==t.event||!(";"+this.config.config.component_action+";").includes(";"+t.configComponent.code+";"))),this.config={}}isRun(t){let e=this.config.config.condition;return s.ZP.persist_checkCondition(e,t.infoA.key_form)}};const p=class{constructor(){this.start=t=>{var e=s.ZP.getFormAppAuto(t.infoA.key_form);if(void 0!==this.config.config.component_result&&void 0!==e&&void 0!==this.config.config.component_action&&""!==this.config.config.component_result.trim()){e.callDirFromSupport("get",{list_component:this.config.config.component_action,list_view:"",inform:"true",checkError:"false"},{});var i=s.ZP.runJs(e.getData(""),t.configComponent.code,this.config.config.component_result.replace(/\n/g," "));void 0!==i&&e.putDataJoin(i),e.callDirFromSupport("set",{inform:"true"},e.getData(""))}return!0},this.setConfig=t=>{this.config=t},this.checkUse=t=>"isOpenFromOther"===t.event||!(void 0===t.configComponent||void 0===t.event||void 0===this.config.config||""===t.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==t.event||!(";"+this.config.config.component_action+";").includes(";"+t.configComponent.code+";")),this.config={}}};const _=class{constructor(){this.start=t=>{let e=s.ZP.getFormAppAuto(t.infoA.key_form);const i=this.config.config;if(!e||!i)return;if(!this.checkCondition(t))return;let o={};void 0!==i.ena_dis&&"not_use"!==i.ena_dis&&(o.disabled=i.ena_dis),void 0!==i.visible&&"not_use"!==i.visible&&(o.visible=i.visible);let a={list_component:i.component_result,list_view:i.view_result};return s.ZP.isDebug()&&(a.DEBUG={},a.DEBUG.CONFIG_RULE=this.config),e.callDirFromSupport("setCMD",a,o),!0},this.setConfig=t=>{this.config=t},this.checkUse=t=>(t.event,!0),this.config={}}checkCondition(t){let e=this.config.config.condition;return s.ZP.persist_checkCondition(e,t.infoA.key_form,t.infoA_parent.key_form)}};const f=class{constructor(){this.start=t=>{let{function_cal:e,component_result:i,component_action:o}=this.config.config,a={name:"CACULATOR",ruleConfig:s.ZP.cloneJson(this.config.config),componentConfig:t},n=s.ZP.getFormAppAuto(t.infoA.key_form);if(null!==i&&void 0!==i&&i.trim()&&n&&o){if(this.isRun(t)){let o=s.ZP.persist_convertCondition(e,t.infoA.key_form);o=s.ZP.paramStringCaculator(o),"number"!==typeof o||!isNaN(o)&&isFinite(o)||(o=""),void 0!==o&&null!==o&&n.callDirFromSupport("setAdvanced",{DEBUG:s.ZP.isDebug()?a:{},list_component:i,type:"calculator",list_view:"",inform:"true",checkError:"false"},o)}return!0}},this.setConfig=t=>{this.config=t},this.checkUse=t=>(t.event,!0),this.config={}}isRun(t){let e=this.config.config.condition;return s.ZP.persist_checkCondition(e,t.infoA.key_form)}};const g=class{constructor(){this.start=t=>{if(!this.isRun(t))return;const{component_result:e,getOOPFormat:i,isGetOOP:o,component_action:a}=this.config.config;var n=s.ZP.getFormAppAuto(t.infoA.key_form);if(void 0!==e&&void 0!==n&&void 0!==a&&(""!==e.trim()||""!==i.trim())){let e={};if("true"===o){e=n.callDirFromSupport("getDataOOP",{list_component:this.config.config.component_action,isGetOOP:o},{}),e=e[this.config.config.component_action];let a=s.ZP.parseJson(i);for(let i in a)n.callDirFromSupport("setAdvanced",{list_component:i,DEBUG:s.ZP.isDebug()?{name:"SET_VALUE",isRun:!0,rule_config:this.config.config,config_target:t}:{}},"string"===typeof a[i]?s.ZP.getOOP(e,a[i]):a[i])}else{if("default"!==o)return e=n.callDirFromSupport("getAdvanced",{list_component:this.config.config.component_action,isGetOOP:o},{}),e=e[this.config.config.component_action],n.callDirFromSupport("setAdvanced",{list_component:this.config.config.component_result,DEBUG:s.ZP.isDebug()?{name:"SET_VALUE",isRun:!0,rule_config:this.config.config,config_target:t}:{}},e),!0;{let e=s.ZP.parseJson(i);for(let i in e)n.callDirFromSupport("setAdvanced",{list_component:i,DEBUG:s.ZP.isDebug()?{name:"SET_VALUE",isRun:!0,rule_config:this.config.config,config_target:t}:{}},e[i])}}}return!0},this.setConfig=t=>{this.config=t},this.checkUse=t=>{if("isOpenFromOther"===t.event)return!0;if(!0===this.config.isStart&&"isStart"===t.event)return!0;{var e;const i=this.config.config,o=t.configComponent,a=t.event,s=i.component_event;if(("all"===s||a===s)&&`;${i.component_action.trim()};`.includes(`;${null===(e=o.code)||void 0===e?void 0:e.trim()};`))return!0}return!1},this.config={}}isRun(t){let e=this.config.config.condition;return s.ZP.persist_checkCondition(e,t.infoA.key_form)}};var m=i(8469),v=i(9883),b=i(3745);const y=class{constructor(){this.start=t=>{if(this.checkCondition(t)){if(void 0!==this.config.config.useAction)if("true"===this.config.config.useAction){var e=s.ZP.parseJson(this.config.config.txFoActions);void 0!==e?b.ZP.runActionWithContext(e,{ruleFunction:this.config.config,data_cpn:t.data},t.infoA,t.infoA_parent,t.configComponent):s.ZP.AppException("#CBUTTON.onClick","config_fo is undefined")}else if(void 0!==this.config.config.txFo){var i=s.ZP.parseJson(this.config.config.txFo);void 0!==i?b.ZP.runFoWithContext(i,{ruleFunction:this.config.config,data_cpn:t.data},t.infoA,t.infoA_parent,t.configComponent):s.ZP.AppException("#CBUTTON.onClick","Error Json is undefined")}else s.ZP.AppException("#CBUTTON.onClick","txFo is undefined");else s.ZP.AppException("#CBUTTON.onClick","useAction is undefined");return!0}},this.setConfig=t=>{this.config=t},this.checkUse=t=>"isOpenFromOther"===t.event||(void 0!==this.config.isStart&&void 0!==t.event&&!0===this.config.isStart&&"isStart"===t.event||!(void 0===t.configComponent||void 0===t.event||void 0===this.config.config||""===t.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==t.event||!(";"+this.config.config.component_action.trim()+";").includes(";"+t.configComponent.code.trim()+";"))),this.config={}}checkCondition(t){let e=s.ZP.getFormAppAuto(t.infoA.key_form);const i=this.config.config,o=e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{});let a=i.condition,n=s.ZP.component_getListCode(a);for(let s of n){let t=e.callDirFromSupport("getAdvanced",{list_component:s.code},{});t=t[s.code],"object"===typeof t?t=JSON.stringify(t):t+="",a=a.replace(s.key,t)}let r=!0;void 0!==o&&n.length>0&&(r=s.ZP.checkConditionComponent(a,o));const l=this.checkConditionParent(t,a);return r&&l}checkConditionParent(t,e){if(t.infoA_parent.key_form){let i=this.getListParentCode(e),o=s.ZP.getFormAppAuto(t.infoA_parent.key_form),a={};i.length>0&&(a=o.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}));for(let t=0;t<i.length;t++){const o=i[t].code;let s=a[o];void 0===s&&(s=o),e=e.replace(i[t].key,s)}return s.ZP.checkConditionComponent(e,a)}return!0}getListParentCode(t){if("string"!==typeof t)return[];let e=[];var i=new RegExp("@PARENT{([^@{}]*)}","g");let o=i.exec(t);for(;o;)e.push({key:o[0],code:o[1]}),o=i.exec(t);return e}};const A=class{constructor(){this.start=t=>{const{component_result:e}=this.config.config;return s.ZP.getFormAppAuto(t.infoA.key_form).callDirFromSupport("setFocus",{list_component:e,DEBUG:s.ZP.isDebug()?{CONFIG_RULE:this.config}:{}},{}),!0},this.setConfig=t=>{this.config=t},this.checkUse=t=>"isOpenFromOther"===t.event||(!0===this.config.isStart&&"isStart"===t.event||!(void 0===t.configComponent||void 0===t.event||void 0===this.config.config||""===t.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==t.event||!(";"+this.config.config.component_action.trim()+";").includes(";"+t.configComponent.code.trim()+";"))),this.config={}}};const D=class{constructor(){this.callAPI=(t,e)=>{var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:t}}];return i[0].input=Object.assign(i[0].input,e),(0,a.Yr)(i,{}).then((t=>s.ZP.foGetData("data",t)))},this.start=t=>{if(!this.isRun(t))return;const{component_result:e,mask_format:i,mask_data_format:o,mask_mode:a}=this.config.config;var n=s.ZP.getFormAppAuto(t.infoA.key_form);let r=n.callDirFromSupport("getAdvanced",{list_component:"*"},{}),l=i;String(i).startsWith("$")&&String(i).endsWith("$")&&(l=s.ZP.getParameterSystem(i.replace(/\$/g,""))),l=s.ZP.getConditionWithData(l,r);let c=o?s.ZP.getConditionWithData(o,r):"",d=s.ZP.getConditionWithData(a,r);return n.callDirFromSupport("setMaskConfig",{list_component:e,DEBUG:s.ZP.isDebug()?{CONFIG_RULE:this.config}:{}},{mask_format:l,mask_data_format:c,mask_mode:d}),!0},this.setConfig=t=>{this.config=t},this.checkUse=t=>"isOpenFromOther"===t.event||(void 0!==this.config.isStart&&void 0!==t.event&&!0===this.config.isStart&&"isStart"===t.event||!(void 0===t.configComponent||void 0===t.event||void 0===this.config.config||""===t.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==t.event||!(";"+this.config.config.component_action+";").includes(";"+t.configComponent.code+";"))),this.config={}}isRun(t){let e=this.config.config.condition;return s.ZP.persist_checkCondition(e,t.infoA.key_form)}};const k=class{constructor(){this.start=t=>{let e=s.ZP.getFormAppAuto(t.infoA.key_form);const i=this.config.config;if(!e||!i)return;if(!this.checkCondition(t))return;let o={};void 0!==i.request&&"request"!==i.request&&(o.request=i.request);let a={list_component:i.component_result,list_view:i.view_result};return s.ZP.isDebug()&&(a.DEBUG={},a.DEBUG.CONFIG_RULE=this.config),e.callDirFromSupport("setValidate",a,o),!0},this.setConfig=t=>{this.config=t},this.checkUse=t=>(t.event,!0),this.config={}}checkCondition(t){let e=this.config.config.condition;return s.ZP.persist_checkCondition(e,t.infoA.key_form,t.infoA_parent.key_form)}};const O={setFormCode:class{constructor(){this.start=t=>{let{form_code:e,component_result:i,component_action:o}=this.config.config,a={name:"CACULATOR",ruleConfig:s.ZP.cloneJson(this.config.config),componentConfig:t},n=s.ZP.getFormAppAuto(t.infoA.key_form);if(null!==i&&void 0!==i&&i.trim()&&n&&o){if(this.isRun(t)){let o=s.ZP.persist_convertCondition(e,t.infoA.key_form);void 0!==o&&null!==o&&n.callDirFromSupport("setFormCode",{DEBUG:s.ZP.isDebug()?a:{},list_component:i,type:"setFormCode",list_view:"",inform:"true",checkError:"false"},o)}return!0}},this.setConfig=t=>{this.config=t},this.checkUse=t=>(t.event,!0),this.config={}}isRun(t){let e=this.config.config.condition;return s.ZP.persist_checkCondition(e,t.infoA.key_form)}},setValidate:k,getInfo:u,numberCal:p,visibility:_,calculator:f,setValue:g,setDataGB:m.Z,managerComponent:v.Z,runFo:y,setFocus:A,setMaskConfig:D}},9883:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _lib_libSupport__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5842);class process{constructor(){this.start=config_target=>{var form_=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.getFormAppAuto(config_target.infoA.key_form);const{component_manager:component_manager,is_use_block:is_use_block}=this.config.config;let json_manager=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.parseJson(component_manager),data_of_cpn=form_.callDirFromSupport("getAdvanced",{list_component:"*"},{});for(let code_result in json_manager){let condition=json_manager[code_result],list_key=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.component_getListCode(condition);for(let t of list_key){let e=data_of_cpn[t.code];"object"===typeof e?e=JSON.stringify(e):e+="",condition=condition.replace(t.key,e)}let is_visible=!1;try{is_visible=eval(condition)}catch(error){}if("true"===is_use_block){let t=!is_visible;"true"!==is_use_block&&(t="false"),form_.callDirFromSupport("setCMD",{list_component:code_result,DEBUG:_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.isDebug()?{name:"Manager_Component",isRun:!0,rule_config:this.config.config,config_target:config_target}:{}},{visible:String(!!is_visible),block:t})}else form_.callDirFromSupport("setCMD",{list_component:code_result,DEBUG:_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.isDebug()?{name:"Manager_Component",isRun:!0,rule_config:this.config.config,config_target:config_target}:{}},{visible:String(!!is_visible)})}return!0},this.setConfig=t=>{this.config=t},this.checkUse=t=>"isOpenFromOther"===t.event||(void 0!==this.config.isStart&&void 0!==t.event&&!0===this.config.isStart&&"isStart"===t.event||!(void 0===t.configComponent||void 0===t.event||void 0===this.config.config||""===t.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==t.event||!(";"+this.config.config.component_action.trim()+";").includes(";"+t.configComponent.code.trim()+";"))),this.config={}}}const __WEBPACK_DEFAULT_EXPORT__=process},8469:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _lib_libPost__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1896),_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5842);class process{constructor(){this.callAPI=(t,e)=>{var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:t}}];return i[0].input=Object.assign(i[0].input,e),(0,_lib_libPost__WEBPACK_IMPORTED_MODULE_0__.Yr)(i,{}).then((t=>_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.foGetData("data",t)))},this.start=config_target=>{const{component_result:component_result,component_action:component_action,query:query,filter_condition:filter_condition,mode_filter:mode_filter,api:api,data_type:data_type,query_db:query_db}=this.config.config;let js_condition=this.config.config.js_condition;var form_=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.getFormAppAuto(config_target.infoA.key_form);let data_component=form_.callDirFromSupport("getAdvanced",{list_component:"*"},{});if(void 0!==component_result&&void 0!==form_&&void 0!==component_action&&""!==component_result.trim()){let data_gb=[],c_cdlist_config=query.split(";");if("api"===data_type){let t="";this.callAPI(api,data_component).then((e=>{for(const a in e){t=a;const i=e[a];if(Array.isArray(i))for(const t in i)e[a][t]={[a]:e[a][t]}}let i=e||{};Array.isArray(i[t])&&(i=i[t]||[]);let o={list_component:component_result};_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.isDebug()&&(o.DEBUG={},o.DEBUG.CONFIG_RULE=this.config),form_.callDirFromSupport("setDataGB",o,i)}))}else{if("query_db"===data_type)data_gb=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.getDataLimited(query_db,0,9999999).data||[];else{if(2!==c_cdlist_config.length)return;data_gb=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.data_cdList(c_cdlist_config[1].trim(),c_cdlist_config[0].trim())||[]}switch(mode_filter){case"regex":let filter_condition_json=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.parseJson(filter_condition);void 0===filter_condition_json&&(data_gb=[]);for(let t in filter_condition_json){let e=filter_condition_json[t],i=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.component_getListCode(e);for(let o=0;o<i.length;o++){const a=i[o].code;let s=data_component;if(s=s[a]||{},s=Object.values(s)[0]||{},s=Object.values(s)[0]||"",void 0!==s&&""!==s.trim()){let a=e.replace(i[o].key,s),n=new RegExp(a,"g");data_gb=data_gb.filter((e=>{let i=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.getOOP(e,t);return!0===n.test(i)}))}else data_gb=[]}}break;case"js_condition":let list_code=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.component_getListCode(js_condition);for(let t=0;t<list_code.length;t++){const e=list_code[t].code;let i=data_component,o=i[e];void 0===o&&(o=e),js_condition=js_condition.replace(list_code[t].key,o)}js_condition=this.replaceParentValueInCondition(config_target,js_condition);try{eval(js_condition)}catch(error){data_gb.length=0,_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.isDebug&&console.error("Set data GB=>",error)}}let para_call={list_component:component_result};_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.isDebug()&&(para_call.DEBUG={},para_call.DEBUG.CONFIG_RULE=this.config),form_.callDirFromSupport("setDataGB",para_call,data_gb)}}return!0},this.setConfig=t=>{this.config=t},this.checkUse=t=>"isOpenFromOther"===t.event||(void 0!==this.config.isStart&&void 0!==t.event&&!0===this.config.isStart&&"isStart"===t.event||!(void 0===t.configComponent||void 0===t.event||void 0===this.config.config||""===t.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==t.event||!(";"+this.config.config.component_action+";").includes(";"+t.configComponent.code+";"))),this.config={}}replaceParentValueInCondition(t,e){if(t.infoA_parent.key_form){let i=this.getListParentCode(e),o=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.getFormAppAuto(t.infoA_parent.key_form),a={};i.length>0&&(a=o.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true",checkError:"false"},{}));for(let t=0;t<i.length;t++){const o=i[t].code;let s=a,n=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.getNodeJson(s,o);void 0===n&&(n=""),"object"===typeof n&&(n=JSON.stringify(n)),e=e.replace(i[t].key,n)}}return e}getListParentCode(t){if("string"!==typeof t)return[];let e=[];var i=new RegExp("@PARENT{([^@{}]*)}","g");let o=i.exec(t);for(;o;)e.push({key:o[0],code:o[1]}),o=i.exec(t);return e}}const __WEBPACK_DEFAULT_EXPORT__=process},3628:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var o=i(7313),a=i(6417);class s extends o.Component{render(){return(0,a.jsxs)("div",{hidden:void 0!==this.props.hidden&&!this.props.hidden,className:"form-group "+this.props.class,children:[(0,a.jsx)("label",{children:this.props.name}),(0,a.jsx)("input",{disabled:this.props.disabled,type:void 0===this.props.typeInput?"text":this.props.typeInput,className:"form-control",value:this.props.value,maxLength:void 0===this.props.sizeInput?1e3:this.props.sizeInput,onChange:t=>{this.props.onChange(t)},placeholder:this.props.placeholder?this.props.placeholder:this.props.name,required:""})]})}}const n=s},5745:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var o=i(7313),a=i(6417);class s extends o.Component{constructor(t){super(t);var e="code";null!=t.d_key&&(e=t.d_key);var i="title";null!=t.d_name&&(i=t.d_name);var o="T\u1ea1o m\u1edbi";null!=t.has_new_name&&(o=t.has_new_name);var a="new";null!=t.has_new_value&&(a=t.has_new_value),this.state={data:t.data,d_key:e,d_name:i,has_new_name:o,has_new_value:a}}renderOptions(){return this.state.data.map(((t,e)=>(0,a.jsx)("option",{index:e,value:t[this.state.d_key],children:t[this.state.d_name]},e)))}componentDidUpdate(t){this.props.data!==t.data&&this.setState({data:this.props.data})}render(){return(0,a.jsxs)("div",{className:"form-group "+this.props.class,hidden:void 0!==this.props.hidden&&!this.props.hidden,children:[(0,a.jsx)("label",{children:this.props.name}),(0,a.jsx)("div",{className:"select-box",children:(0,a.jsx)("div",{className:"selectbox",children:(0,a.jsxs)("select",{style:{height:"32px"},disabled:this.props.disabled,className:"form-control",value:this.props.value,onChange:t=>this.props.onChange(t),children:[!0===this.props.hasNew&&(0,a.jsx)("option",{value:this.state.has_new_value,children:this.state.has_new_name}),this.renderOptions()]})})})]})}}const n=s},7751:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var o=i(3063),a=i(7313),s=i(1716),n=i(6417);class r extends a.Component{constructor(){super(...arguments),this.getInfoCheckRun=()=>{let t=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:t.block}}}render(){return(0,n.jsxs)("div",{style:{color:"red"},children:["Nothing! ",this.props.inputType," is undefined. Contact admin, pls!"]})}}const l=r;var c=i(5842);class d extends a.Component{render(){const t=s.Z[this.props.inputType];return void 0!==t?(c.ZP.isDebug()&&-1===this.props.default.name.indexOf(`(${this.props.default.code})`)&&(this.props.default.name+=` (${this.props.default.code})`),(0,a.createElement)(t,(0,o.Z)((0,o.Z)({},this.props),{},{key:this.props.index,index:this.props.index,config:this.props.config}))):(0,n.jsx)(l,{inputType:this.props.inputType})}}const h=d},4324:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>p});var o=i(7313),a=i(5842),s=i(3628),n=i(6417);class r extends o.Component{constructor(t){super(t);var e=!0;void 0!==this.props.hasSTT&&(e=this.props.hasSTT);var i=!0;void 0!==this.props.hasBtn&&(i=this.props.hasBtn);for(var o=this.props.columns,a=0;a<o.length;a++)o[a].search="";this.state={columns:o,openSearch:!1,hasSTT:e,hasBtn:i}}async onChangeSeacrh(t){void 0!==this.props.onChangeSeacrh&&this.props.onChangeSeacrh(t)}render(){return(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{onDoubleClick:()=>{var t=!this.state.openSearch;if(!1===t){for(var e=this.state.columns,i=0;i<e.length;i++)e[i].search="";this.setState({openSearch:t,columns:e}),this.onChangeSeacrh(e)}else this.setState({openSearch:t})},className:"bg-info base-reverse",children:[this.state.hasSTT&&(0,n.jsx)("th",{style:{width:"30px"},children:a.ZP.getLang("stt")}),this.state.columns.map(((t,e)=>(0,n.jsxs)("th",{children:[a.ZP.getLang(t.title),this.state.openSearch&&(0,n.jsx)("input",{className:"form-control",value:t.search,onChange:t=>{var i=this.state.columns;i[e].search=t.target.value,this.setState({columns:i}),this.onChangeSeacrh(i)}})]},e))),this.state.hasBtn&&(0,n.jsx)("th",{})]})})}}const l=r;var c=i(5745),d=i(3745),h=i(1896);class u extends o.Component{constructor(t){super(t),this.changeKeyLanguage=t=>{let e={note:a.ZP.getLang("note"),title_:a.ZP.getLang("elearning_title"),des_:a.ZP.getLang("elearning_des"),role_system:a.ZP.getLang("elearning_roleSystem"),none_:a.ZP.getLang("elearning_none"),status:a.ZP.getLang("elearning_status"),active_:a.ZP.getLang("elearning_active"),inactive_:a.ZP.getLang("elearning_inactive"),info_des:a.ZP.getLang("elearning_infoDes"),form_code:a.ZP.getLang("elearning_formCode"),info_title:a.ZP.getLang("elearning_infoTitle"),code_:a.ZP.getLang("elearning_code"),content_title:a.ZP.getLang("elearning_contentTitle"),btn_save:a.ZP.getLang("elearning_btnSave"),btn_cancel:a.ZP.getLang("elearning_btnCancel"),column_title:a.ZP.getLang("elearning_columnTitle"),btn_view:a.ZP.getLang("elearning_btnView")};if(void 0!==t)return e;let i=this.state.infoA;i.title=a.ZP.getLang("elearning_title"),i.des=a.ZP.getLang("elearning_des"),i.lang_form.vi=a.ZP.getLang("elearning_title"),i.lang_form.en=a.ZP.getLang("elearning_title"),this.setState({languages:e,infoA:i})},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.key_form="eLearning";let e=this.changeKeyLanguage("start");var i=a.ZP.getData("role_system"),o=[];if(void 0!==i)for(var s=0;s<i.length;s++){var n=i[s].role_system;o[o.length]={code:n.role_system_id,title:n.role_system_name}}var r=[];void 0!==this.props.data&&(r=this.props.data),this.state={disabled:!1,visibility:"",data:r,list_role:o,lang_system:a.ZP.getConfigUserDefault("list_lang_config"),infoA:{lang_form:{vi:a.ZP.getLang("elearning_title"),en:a.ZP.getLang("elearning_title")},title:"Training management",des:"T\u1ea5t c\u1ea3 th\xf4ng tin \u0111\xe0o t\u1ea1o!",openOne:"true",ofModal:!1},isPostButton:!1,auto_id:a.ZP.autoID(),eleaning_id_auto:a.ZP.autoID(),elearning_title:"",elearning_status:!0,elearning_old:!1,elearning_version:1,elearning_time:0,elearning_role:"none",form_id_select:a.ZP.autoID(),info:{title:"",des:"",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true"},check_screen_width:void 0,languages:e}}UNSAFE_componentWillMount(){}save_eLearning(){let t={},e=this.props.temple_elearning;for(let a of e.list_layout[0].list_view[0].list_input)"jeLearning"===a.inputtype&&(a.config.data_elearning=this.state.eleaning_id_auto);t.info=this.state.info,t.info.form_code=this.state.form_id_select,t.list_layout=e.list_layout,(0,h.Yr)([{txcode:"#sys:bo-save-formConfigId",input:{form_id:this.state.form_id_select,pack_send:t}}],{}),this.setState({isPostButton:!0}),setTimeout((()=>{this.setState({isPostButton:!1})}),3e3);for(var i={eleaning_id_auto:this.state.eleaning_id_auto,elearning_title:this.state.elearning_title,elearning_status:this.state.elearning_status,elearning_user_create:(0,a.CO)(),elearning_user_update:(0,a.CO)(),elearning_old:this.state.elearning_old,elearning_version:this.state.elearning_version,elearning_time:this.state.elearning_time,elearning_role:this.state.elearning_role,info:this.state.info},o={},s=!1,n=0;n<this.state.lang_system.length;n++){var r=this.ob_mde[this.state.lang_system[n].key].value().trim();""===r||s||(s=!0),o[this.state.lang_system[n].key]=r}if(s){d.ZP.quickPost([{txcode:"#sys:bo-save-eLearning",input:{info_elearning:i,content_elearning:o}}],{});var l=this.state.data;if(this.state.elearning_old)for(var c=0;c<l.length;c++)l[c].eleaning_id_auto===this.state.eleaning_id_auto&&(l[c]=i);else l[l.length]=i;for(var u in this.setState({elearning_title:"",elearning_status:!0,elearning_old:!1,elearning_version:1,elearning_time:0,elearning_role:"none",eleaning_id_auto:a.ZP.autoID(),data:l,form_id_select:a.ZP.autoID(),info:{title:"",des:"",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true"}}),this.ob_mde)this.ob_mde[u].value("")}}downLoadOneELearning(t){for(var e="",i=0;i<this.state.lang_system.length;i++)e+=""===e?this.state.lang_system[i].key:";"+this.state.lang_system[i].key;(0,h.Yr)([{txcode:"#sys:bo-load-oneELearing",input:{eleaning_id:t,all_lang:e}}],{}).then((t=>{var e=a.ZP.foGetData("data",t);for(var i in e)this.ob_mde[i].value(e[i])}),(t=>{}))}onChangeValue(t,e){var i=this.state.info;i[t]=e.target.value,this.setState({info:i})}render(){return(0,n.jsx)("div",{className:"form-style",style:{display:this.state.visibility},children:(0,n.jsx)("div",{className:"row",children:(0,n.jsx)("div",{className:"col-md-12 col-lg-12",children:(0,n.jsxs)("div",{className:"col-md-12 col-lg-12",children:[(0,n.jsxs)("div",{className:"prtm-block",children:[(0,n.jsxs)("div",{className:"prtm-block-title mrgn-b",children:[(0,n.jsx)("h3",{children:this.state.languages.title_}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"note-box bg-danger",children:this.state.languages.note}),this.state.languages.des_]})]}),(0,n.jsxs)("div",{className:"row full-lg-md",children:[(0,n.jsxs)("div",{className:"line-slide-tab",children:[(0,n.jsx)("ul",{className:"nav nav-tabs",children:this.state.lang_system.map(((t,e)=>(0,n.jsx)("li",{className:0===e?"active":"",children:(0,n.jsxs)("a",{"data-toggle":"tab",href:"#tab-"+this.state.auto_id+e,"aria-expanded":"false",children:[t.view," "]})},e)))}),(0,n.jsx)("div",{className:"tab-content pad-all-lg",children:this.state.lang_system.map(((t,e)=>(0,n.jsx)("div",{id:"tab-"+this.state.auto_id+e,className:0===e?"tab-pane fade active in":"tab-pane fade",children:(0,n.jsx)("textarea",{ref:"context"+e,readOnly:!0,placeholde:t.view})},e)))})]}),(0,n.jsxs)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:[(0,n.jsx)(c.Z,{class:"col-sm-12 col-md-4",name:this.state.languages.role_system,data:this.state.list_role,value:this.state.role_system_select,hasNew:!0,has_new_value:"none",has_new_name:this.state.languages.none_,onChange:t=>{this.setState({elearning_role:t.target.value})}}),(0,n.jsx)(c.Z,{class:"col-sm-12 col-md-4",name:this.state.languages.status,data:[{title:this.state.languages.active_,code:"true"},{title:this.state.languages.inactive_,code:"false"}],value:this.state.elearning_status,hasNew:!1,onChange:t=>{this.setState({elearning_status:t.target.value})}}),(0,n.jsx)(s.Z,{name:this.state.languages.info_des,class:"col-sm-12 col-md-4",value:this.state.info.des,onChange:t=>this.onChangeValue("des",t)}),(0,n.jsx)(s.Z,{name:this.state.languages.form_code,class:"col-sm-12 col-md-3",disabled:this.state.disabled,onChange:t=>{this.setState({form_id_select:t.target.value})},value:this.state.form_id_select}),(0,n.jsx)(s.Z,{name:this.state.languages.info_title,class:"col-sm-12 col-md-3",value:this.state.info.title,onChange:t=>this.onChangeValue("title",t)}),(0,n.jsx)(s.Z,{name:this.state.languages.code_,class:"col-sm-12 col-md-3",disabled:this.state.disabled,onChange:t=>{this.setState({eleaning_id_auto:t.target.value})},value:this.state.eleaning_id_auto}),(0,n.jsx)(s.Z,{name:this.state.languages.content_title,class:"col-sm-12 col-md-3",onChange:t=>{this.setState({elearning_title:t.target.value})},value:this.state.elearning_title})]}),(0,n.jsxs)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",style:{padding:"10px 5px 5px 30px"},children:[(0,n.jsx)("button",{className:"btn btn-success",type:"button",disabled:this.state.isPostButton,onClick:()=>{this.save_eLearning()},children:this.state.languages.btn_save})," ",(0,n.jsx)("button",{className:"btn btn-danger",type:"button",onClick:()=>{this.setState({disabled:!1,eleaning_id_auto:this.state.disabled?a.ZP.autoID():this.state.eleaning_id_auto,elearning_title:"",elearning_status:!0,elearning_old:!1,elearning_version:0,elearning_time:0,elearning_role:"none",form_id_select:this.state.disabled?a.ZP.autoID():this.state.form_id_select,info:{title:"",des:"",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true"}})},children:this.state.languages.btn_cancel})]})]})]}),(0,n.jsx)("div",{className:"prtm-block",children:(0,n.jsx)("div",{className:"row full-lg-md",children:(0,n.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:(0,n.jsx)("div",{className:"table-responsive",children:(0,n.jsx)("div",{className:void 0===this.state.check_screen_width||this.state.check_screen_width?"":"no-more-tables",children:(0,n.jsxs)("table",{className:"table table-bordered table-middle",children:[(0,n.jsx)(l,{hasSTT:!1,columns:[{code:"eleaning_id_auto",title:"ID"},{code:"elearning_title",title:this.state.languages.column_title}],onChangeSeacrh:t=>{}}),(0,n.jsx)("tbody",{children:this.state.data.map(((t,e)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:t.eleaning_id_auto}),(0,n.jsx)("td",{children:t.elearning_title}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{className:"btn btn-warning",type:"button",onClick:()=>{this.setState({disabled:!0,eleaning_id_auto:t.eleaning_id_auto,elearning_title:t.elearning_title,elearning_status:t.elearning_status,elearning_old:!0,elearning_version:t.elearning_version+1,elearning_time:t.elearning_time,elearning_role:t.elearning_role,form_id_select:void 0!==t.info?t.info.form_code:"",info:void 0!==t.info?t.info:{title:"",des:"",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true"}}),this.downLoadOneELearning(t.eleaning_id_auto)},children:this.state.languages.btn_view})})]},e)))})]})})})})})}),(0,n.jsx)("div",{className:"prtm-block",children:(0,n.jsxs)("div",{className:"row full-lg-md",children:[(0,n.jsxs)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-8",children:[(0,n.jsx)("h4",{children:"Emphasis"}),(0,n.jsxs)("pre",{children:["**",(0,n.jsx)("strong",{children:"bold"}),"**",(0,n.jsx)("br",{}),"*",(0,n.jsx)("em",{children:"italics"}),"*",(0,n.jsx)("br",{}),"~~",(0,n.jsx)("strike",{children:"strikethrough"}),"~~"]}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Headers"}),(0,n.jsxs)("pre",{children:["# Big header",(0,n.jsx)("br",{}),"## Medium header",(0,n.jsx)("br",{}),"### Small header",(0,n.jsx)("br",{}),"#### Tiny header"]}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Lists"}),(0,n.jsxs)("pre",{children:["* Generic list item",(0,n.jsx)("br",{}),"* Generic list item",(0,n.jsx)("br",{}),"* Generic list item",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"1. Numbered list item",(0,n.jsx)("br",{}),"2. Numbered list item",(0,n.jsx)("br",{}),"3. Numbered list item"]}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Links"}),(0,n.jsx)("pre",{children:"[Text to display](http://www.example.com)"}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Quotes"}),(0,n.jsxs)("pre",{children:["> This is a quote.",(0,n.jsx)("br",{}),"> It can span multiple lines!"]}),(0,n.jsx)("br",{}),(0,n.jsxs)("h4",{children:["Images \xa0 ",(0,n.jsxs)("small",{children:["Need to upload an image? ",(0,n.jsx)("a",{href:"http://imgur.com/",target:"blank",children:"Imgur"})," has a great interface."]})]}),(0,n.jsx)("pre",{children:"![](http://www.example.com/image.jpg)"}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Tables"}),(0,n.jsxs)("pre",{children:["| Column 1 | Column 2 | Column 3 |",(0,n.jsx)("br",{}),"| -------- | -------- | -------- |",(0,n.jsx)("br",{}),"| John     | Doe      | Male     |",(0,n.jsx)("br",{}),"| Mary     | Smith    | Female   |",(0,n.jsx)("br",{}),(0,n.jsx)("em",{children:"Or without aligning the columns..."}),(0,n.jsx)("br",{}),"| Column 1 | Column 2 | Column 3 |",(0,n.jsx)("br",{}),"| -------- | -------- | -------- |",(0,n.jsx)("br",{}),"| John | Doe | Male |",(0,n.jsx)("br",{}),"| Mary | Smith | Female |",(0,n.jsx)("br",{})]}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Displaying code"}),(0,n.jsxs)("pre",{children:['`var example = "hello!";`',(0,n.jsx)("br",{}),(0,n.jsx)("em",{children:"Or spanning multiple lines..."}),(0,n.jsx)("br",{}),"```",(0,n.jsx)("br",{}),'var example = "hello!";',(0,n.jsx)("br",{}),"alert(example);",(0,n.jsx)("br",{}),"```"]})]}),(0,n.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-4",children:(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{align:"left",children:"Shortcut"}),(0,n.jsx)("th",{align:"left",children:"Action"})]})}),(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-'"})}),(0,n.jsx)("td",{align:"left",children:'"toggleBlockquote"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-B"})}),(0,n.jsx)("td",{align:"left",children:'"toggleBold"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-E"})}),(0,n.jsx)("td",{align:"left",children:'"cleanBlock"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-H"})}),(0,n.jsx)("td",{align:"left",children:'"toggleHeadingSmaller"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-I"})}),(0,n.jsx)("td",{align:"left",children:'"toggleItalic"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-K"})}),(0,n.jsx)("td",{align:"left",children:'"drawLink"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-L"})}),(0,n.jsx)("td",{align:"left",children:'"toggleUnorderedList"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-P"})}),(0,n.jsx)("td",{align:"left",children:'"togglePreview"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-Alt-C"})}),(0,n.jsx)("td",{align:"left",children:'"toggleCodeBlock"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-Alt-I"})}),(0,n.jsx)("td",{align:"left",children:'"drawImage"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-Alt-L"})}),(0,n.jsx)("td",{align:"left",children:'"toggleOrderedList"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Shift-Cmd-H"})}),(0,n.jsx)("td",{align:"left",children:'"toggleHeadingBigger"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"F9"})}),(0,n.jsx)("td",{align:"left",children:'"toggleSideBySide"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"F11"})}),(0,n.jsx)("td",{align:"left",children:'"toggleFullScreen"'})]})]})]})})]})})]})})})})}componentDidMount(){a.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),a.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.ob_mde={};for(var t=0;t<this.state.lang_system.length;t++)this.ob_mde[this.state.lang_system[t].key]=new window.SimpleMDE({element:this.refs["context"+t],promptURLs:!0,spellChecker:!1,placeholder:"# This text \nwell come: "+this.state.lang_system[t].view})}}const p=u},8382:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>n});var o=i(7313),a=i(6417);class s extends o.Component{render(){let t=o.lazy((()=>i(4397)("./"+this.props.template_select+"/"+this.props.screen_working)));return(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(t,{})})}}const n=s},2256:(t,e,i)=>{"use strict";i.d(e,{Z:()=>Ri});var o=i(3702),a=i(5842),s=i(7313),n=i(1168),r=i(8209),l=i(7903),c=i(1896),d=i(3745),h=i(1372),u={};class p{static startJob(){(0,c.Yr)([{txcode:"#sys:bo-schedule-loadStatusStart",input:{}}],{}).then((t=>{let e=a.ZP.foGetData("scheduleJob",t);if(void 0!==e)for(let i=0;i<e.length;i++)void 0!==e[i].scheduleJob&&void 0!==e[i].scheduleJob.id&&""!==e[i].scheduleJob.id&&(a.ZP.scheduleJob_addTo_Store(e[i]),_(e[i],{}))}),(t=>{}))}static runSchedule(t,e){let i=a.ZP.scheduleJob_getJob_toRun(t);void 0===i?(0,c.Yr)([{txcode:"#sys:bo-schedule-loadScheduleID",input:{schedule_id:t}}],{}).then((t=>{let i=a.ZP.foGetData("loadScheduleID",t);a.ZP.scheduleJob_addTo_Store(i),_(i,e)}),(t=>{})):_(i,e)}}const _=(t,e)=>{let i=a.ZP.cloneJson(t);if(i.context={},i.context.scheduleContext_job_id=a.ZP.autoID(),i.context.scheduleContext_run_count=1,void 0!==i.scheduleJob.time&&void 0!==i.scheduleJob.id&&void 0!==i.scheduleJob.content_run&&i.scheduleJob.time>0&&""!==i.scheduleJob.id&&""!==i.scheduleJob.content_run)if("L"===i.scheduleJob.type){if(void 0!==i.scheduleJob.conditions&&!(0,h.QH)(i,i.scheduleJob.conditions))return;u[i.context.scheduleContext_job_id]=setInterval((()=>{if(void 0!==i.scheduleJob.conditions&&!(0,h.QH)(i,i.scheduleJob.conditions))return clearInterval(u[i.context.scheduleContext_job_id]),void delete u[i.context.scheduleContext_job_id];i.context.scheduleContext_run_count++,"{}"!==JSON.stringify(e)?d.ZP.runFoWithContext(JSON.parse(i.scheduleJob.content_run),e.data,e.infoA,e.infoA_parent,e.componentConfigDefault):d.ZP.fo(JSON.parse(i.scheduleJob.content_run),e)}),i.scheduleJob.time)}else"S"===i.scheduleJob.type&&setTimeout((()=>{(void 0===i.scheduleJob.conditions||(0,h.QH)(i,i.scheduleJob.conditions))&&("{}"!==JSON.stringify(e)?d.ZP.runFoWithContext(JSON.parse(i.scheduleJob.content_run),e.data,e.infoA,e.infoA_parent,e.componentConfigDefault):d.ZP.fo(JSON.parse(i.scheduleJob.content_run),e))}),i.scheduleJob.time)};var f=i(8382),g=i(9676),m=i(7904),v=i(6417);class b extends r.Z{constructor(){super(...arguments),this.startLang=()=>{var t={};let e=a.ZP.getLangKey();if(void 0!==this.input.key_lang&&void 0!==this.input.key_lang.lang_of_user&&(e=this.input.key_lang.lang_of_user),void 0!==this.input.sys_lang_data&&(t=this.input.sys_lang_data),void 0!==this.input.lang_data)for(var i in this.input.lang_data)t[i]=this.input.lang_data[i];else a.ZP.AppException("#system.startLang","lang_data is undefined","data");a.ZP.setLangKey(e),a.ZP.setAllLang(t)},this.load_flow_client=()=>{void 0!==this.input.flow_client?(0,a.Yh)(this.input.flow_client):a.ZP.AppException("#system.load_flow_client","flow_client is undefined","data")},this.loadFormDesign=()=>{null!=this.input.form_design&&(0,a.iO)(this.input.form_design);var t=a.ZP.autoID();let e=s.lazy((()=>Promise.all([i.e(8666),i.e(4159)]).then(i.bind(i,4159))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(e,{mapping_key:t},t)},t))},this.loadFormAndRoleTask=()=>{null!=this.input.list_form&&(0,a.iO)(this.input.list_form),null!=this.input.list_role&&(0,a.gD)(this.input.form_design)},this.loadeLearning=()=>{var t=[];null!=this.input.data&&(t=this.input.data);var e=a.ZP.autoID();let o=s.lazy((()=>Promise.resolve().then(i.bind(i,4324))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(o,{data:t,mapping_key:e},e)},e))},this.loadFormLang=()=>{for(var t=a.ZP.autoID(),e=a.ZP.getConfigUserDefault("list_lang_config"),o={},n=0;n<e.length;n++)null!=this.input["lang_data_"+e[n].key]&&(o[e[n].key]=this.input["lang_data_"+e[n].key]);let r=s.lazy((()=>i.e(8091).then(i.bind(i,8091))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(r,{mapping_key:t,data:o},t)},t))},this.loadFormDevice=()=>{var t=a.ZP.autoID();this.input.device;let e=s.lazy((()=>i.e(3926).then(i.bind(i,3926))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(e,{mapping_key:t,data:this.input.device},t)},t))},this.loadFormLicense=()=>{var t=a.ZP.autoID();let e=s.lazy((()=>i.e(2754).then(i.bind(i,2754))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(e,{mapping_key:t,data:this.input.device},t)},t))},this.logout=()=>{a.ZP.clearSessionStorage()},this.loadFormRoleSystem=()=>{var t=a.ZP.autoID();let e=s.lazy((()=>i.e(8685).then(i.bind(i,8685))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(e,{mapping_key:t},t)},t))},this.loadRoleUser=()=>{var t={};null!=this.input.loadRoleUserAll&&(t=this.input.loadRoleUserAll),void 0===t&&(t={});var e=a.ZP.autoID();let o=s.lazy((()=>i.e(8931).then(i.bind(i,8931))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(o,{data:t,mapping_key:e},e)},e))},this.loadDatabase=()=>{void 0!==this.input.database?(0,a.zM)(this.input.database):a.ZP.AppException("#system.loadDatabase","database is undefined","data")},this.loadParameterSystem=()=>{void 0!==this.input.paraServer?(a.ZP.loadParameterSystem(this.input.paraServer),a.ZP.parameterSystem_start()):a.ZP.AppException("#system.loadParameterSystem","paraServer is undefined","data")},this.loadTxCodeFo=()=>{},this.reloadPage=()=>{window.location.reload()},this.gotoLogin=()=>{window.location.replace(a.ZP.getUrlLogin_ver2())},this.callFormLogin=t=>{if(!(window.process_loading.loading.main_script+window.process_loading.loading.template_script+window.process_loading.loading.template_component+window.process_loading.loading.template_css+window.process_loading.loading.app_data>3)){var e="#sys:bo-login-signIn";void 0!==t&&(e=t);var i=a.ZP.getSessionFromStore();""!==i&&(a.ZP.clearSessionStorage(),a.ZP.setSessionTemp(i),(0,c.Yr)([{txcode:e,input:{e:"",p:"",session_id:i}}],{}).then((t=>{void 0!==t.fo&&t.fo.length>0&&void 0!==t.fo[0].input["login-status"]&&void 0!==t.fo[0].input["login-status"].status_login&&"login#127"===t.fo[0].input["login-status"].status_login||window.location.replace(a.ZP.getUrlLogin())}),(t=>{}))),window.process_loading.loading.app_data>0?(window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"App Config","User Config")):window.location.replace(a.ZP.getUrlLogin()),document.title=a.ZP.getLang("title")}},this.downAllApplication=()=>{if(void 0!==this.input.list_application&&a.ZP.setData("list_application",this.input.list_application),window.process_loading.loading.app_data>0){this.app_info=this.input.list_application.filter((t=>"A"===t.list_application.status&&t.list_application.list_appliaction_id===(0,a.Py)()))[0].list_application,(0,a.$5)(this.app_info.list_appliaction_img);var t=document.querySelector("link[rel~='icon']");t||((t=document.createElement("link")).rel="icon",document.head.appendChild(t));let e=this.app_info.list_appliaction_img;if(a.ZP.isImage(e)){let i="data:image/png;base64,";t.href=e.indexOf(i)>-1?e:i+e}else t.href=e;window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"Application Info","App Config")}},this.callForm_flowFo=()=>{var t=a.ZP.autoID();if(void 0!==this.input.txClient){let e=s.lazy((()=>i.e(3849).then(i.bind(i,3849))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(e,{all_txcode:this.input.txClient,mapping_key:t},t)},t))}else a.ZP.AppException("#system.callForm_flowFo","txClient is undefined","data")},this.callForm_flowBo=()=>{var t=a.ZP.autoID();if(void 0!==this.input.tx){let e=s.lazy((()=>i.e(4960).then(i.bind(i,4960))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(e,{all_txcode:this.input.tx,mapping_key:t},t)},t))}else a.ZP.AppException("#system.callForm_flowBo","tx is undefined","data")},this.callForm_roleBo=()=>{var t=a.ZP.autoID();if(void 0!==this.input.tx&&void 0!==this.input.roletxbo){let e=s.lazy((()=>i.e(7117).then(i.bind(i,7117))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(e,{all_txcode:this.input.tx,data:this.input.roletxbo,mapping_key:t},t)},t))}else a.ZP.AppException("#system.callForm_roleBo","all_txcode,roletxbo is undefined","data")},this.callForm_paraServer=()=>{var t=a.ZP.autoID();if(void 0!==this.input.paraServer){let e=s.lazy((()=>i.e(1427).then(i.bind(i,1427))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(e,{mapping_key:t,data:this.input.paraServer},t)},t))}else a.ZP.AppException("#system.callForm_paraServer","paraServer is undefined","data")},this.callFoStart=()=>{void 0!==this.input.key_protect&&a.ZP.setProtect(this.input.key_protect),d.ZP.quickPost([{txcode:"#sys:bo-login-start",input:{lang_data:a.ZP.getLangKey(),isStart:!0}}],{}),setInterval((()=>{a.ZP.webSocketSendMessage("#protectPost")}),a.ZP.getTimeProtect()),a.ZP.isDebug()&&(console.log("React.version===>"+s.version),console.log("=====my device=====",a.ZP.getMyDevice()))},this.setKeyPost=()=>{void 0!==this.input.key_protect&&a.ZP.setProtect(this.input.key_protect)},this.statusLogin=()=>{if(void 0!==this.input["login-status"])if(void 0!==this.input["login-status"].status_login){if("login#127"===this.input["login-status"].status_login){void 0!==this.input["login-status"].once_packed&&0!==this.input["login-status"].once_packed&&a.ZP.setOncePacked(this.input["login-status"].once_packed),a.ZP.relogin_setStatus(!1),void 0!==this.input["login-status"].relogin&&"true"===this.input["login-status"].relogin&&a.ZP.relogin_setStatus(!0);var t=!0;return void 0!==this.input.loadUserConfigDefault?(0,a.a4)(this.input.loadUserConfigDefault):(t=!1,a.ZP.AppException("#system.statusLogin","loadUserConfigDefault is undefined","data")),void 0!==this.input.loadUserConfig?((0,a.T_)(this.input.loadUserConfig),void 0!==this.input.loadUserConfig.lang&&a.ZP.setLangKey(this.input.loadUserConfig.lang)):(t&&(t=!1),a.ZP.AppException("#system.statusLogin","loadUserConfig is undefined","data")),void 0!==this.input.pin&&void 0!==this.input.pin.hasPin&&"true"===this.input.pin.hasPin&&a.ZP.relogin_setHasPinCode(),void 0!==this.input.loadUserChatProfile&&a.ZP.profileUser_set(this.input.loadUserChatProfile),void 0!==this.input.loadRoleCache?(0,a.Tf)(this.input.loadRoleCache):(t&&(t=!1),a.ZP.AppException("#system.statusLogin","loadRoleCache is undefined","data")),void 0!==this.input.loadRoleApprove?(0,a.ks)(this.input.loadRoleApprove):a.ZP.AppException("#system.statusLogin","loadRoleApprove is undefined","data"),void 0!==this.input.loadUserRole?(0,a.Qi)(this.input.loadUserRole):(t&&(t=!1),a.ZP.AppException("#system.statusLogin","loadUserRole is undefined","data")),void 0!==this.input.dyJs&&a.ZP.txBasic_add(this.input.dyJs),void 0!==this.input.loadUserID?(void 0!==this.input.loadUserID.id?(0,a.uC)(this.input.loadUserID.id):(t&&(t=!1),a.ZP.AppException("#system.statusLogin","loadUserID[id] is undefined","data")),void 0!==this.input.loadUserID.token&&(0,a.o4)(this.input.loadUserID.token),void 0!==this.input.loadUserID.user_id_find&&(0,a.Ez)(this.input.loadUserID.user_id_find),void 0!==this.input.loadUserID.status&&(0,a.iQ)(this.input.loadUserID.status)):(t&&(t=!1),a.ZP.AppException("#system.statusLogin","loadUserID is undefined","data")),p.startJob(),n.unmountComponentAtNode(document.getElementById("root")),window.process_loading.loading.app_data>0&&(window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"User Config","App Data")),!0}window.process_loading.loading.app_data>0&&(window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"User Config","App Data"))}else window.process_loading.loading.app_data>0&&(window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"User Config","App Data"));else window.process_loading.loading.app_data>0&&(window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"User Config","App Data"));this.gotoLogin()},this.loadScreenWorker=()=>{let t=a.ZP.template_getConfigTemplate(),e=null;void 0!==t.theme&&(e=t.theme),a.ZP.role_menuOfRole(),n.render((0,v.jsx)(f.default,{template_select:t.template,screen_working:t.screen_working,theme:e}),document.getElementById("root")),window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"Screen Worker")},this.container=()=>{},this.data=()=>{a.ZP.isDebug()&&console.log("system.data this.input ===> ",this.input);for(let t in this.input)a.ZP.setData(t,this.input[t]);void 0!==this.input.c_cdlist&&a.ZP.data_buildCdListQuick(this.input.c_cdlist)},this.addData=()=>{(0,a.uB)(this.input)},this.showError=()=>{if(window.process_loading.loading.main_script+window.process_loading.loading.template_script+window.process_loading.loading.template_component+window.process_loading.loading.template_css+window.process_loading.loading.app_data>0){let t=this.input.infoError;void 0!==t&&window.showLoadingError(t[0].info)}else{if(void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){if(t.hasOwnProperty("getLoadingAction")){let e=!1;e=t.getLoadingAction(),e&&t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1)}t.hasOwnProperty("showErrorFromServer")&&t.showErrorFromServer(this.input.infoError)}else{let t=a.ZP.foGetData("infoError",this.input);void 0!==t&&this.showToast(t[0].info,!1)}}if(void 0!==this.context&&void 0!==this.context.infoA_parent&&void 0!==this.context.infoA_parent.key_form&&void 0!==this.context.infoA_parent.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);if(void 0!==e){if(e.hasOwnProperty("getLoadingAction")){let t=!1;t=e.getLoadingAction(),t&&e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1)}e.hasOwnProperty("showErrorFromServer")&&e.showErrorFromServer(this.input.infoError)}else{let t=a.ZP.foGetData("infoError",this.input);void 0!==t&&this.showToast(t[0].info,!1)}}}},this.showToast=function(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={},s=t;switch(e){case!0:i&&(s+=" successfully"),o={class_:"success",icon:"fa fa-check",title:s,time:(new Date).getTime()+"",description:s,data:{},action:{}};break;case!1:i&&(s+=" error"),o={class_:"error",icon:"fa fa-check",title:s,time:(new Date).getTime()+"",description:s,data:{},action:{}}}a.ZP.pushNotify("notifyToast",o,{}),a.ZP.pushNotify("notifyDefault",o,{}),a.ZP.callAllScreenListen()},this.buildContext=()=>{void 0!==this.input.context&&(0,a.yN)(this.input.context);let t=a.ZP.jcontextGetAll();for(let e=0;e<t.length;e++)t[e].hasOwnProperty("fo_call")&&t[e].fo_call()},this.sliderbarCallForm=()=>{var t={};void 0!==this.input.data&&(t=this.input.data);var e={};this.input.infoA_parent&&(e={infoA_parent:this.input.infoA_parent}),void 0!==this.input.form_code?(0,l.QS)(this.input,e,{},{},t):a.ZP.AppException("#system.sliderbarCallForm","form_code is undefined","system")},this.buildObjectMarkdown=()=>{},this.dyjsReadJavascript=()=>{void 0!==this.input.dyJs&&a.ZP.txBasic_add(this.input.dyJs)},this.addListKeyboard=()=>{(0,m.yw)(this.input.listShortcut),(0,m.Ft)(this.input.listFormShortcut)}}}const y=b;var A,D,k,O=i(2633),w=void 0,C="",x="",S="",M="",P="",T="";class I extends r.Z{constructor(){var t;super(...arguments),t=this,this.postWebTxCode=(t,e)=>new Promise(((i,o)=>{D=new O.Z,x="",S="",M="",P="",T="",void 0!==e&&(void 0!==e.infoA&&(void 0!==e.infoA.title&&(S=e.infoA.title),void 0!==e.infoA.form_code&&(x=e.infoA.form_code)),void 0!==e.componentConfigDefault?(void 0!==e.componentConfigDefault.name&&(T=e.componentConfigDefault.name),void 0===e.componentConfigDefault.code&&void 0===e.componentConfigDefault.codeHidden||(P=e.componentConfigDefault.codeHidden)):void 0!==e.debug_info&&(void 0!==e.debug_info.from_action_code&&(P=e.debug_info.from_action_code),void 0!==e.debug_info.from_action_name&&(T=e.debug_info.from_action_name))),void 0!==e.infoA_parent&&void 0!==e.infoA_parent.form_code&&(x="",P="");let s="";s=void 0!==e.key_feedback?e.key_feedback:a.ZP.autoUui_key_feedback(),D.setBo(t,s);let n=a.ZP.getOncePacked();0!==n?(n++,a.ZP.setOncePacked(n)):n=0,D.setMoreInfo({from_action_code:P,from_action_name:T,form_code:x,form_name:S,oncePacked:n,oncePacked_ID:a.ZP.autoID()});let r={Accept:"*/*","Content-Type":"application/json-patch+json"};for(const t in D.getInfo())r[t]=D.getInfo()[t];let l=D.getForTxCode(x,P);k=new Date;let c={key_feedback:s,data:l,time:k,status:"G\u1eedi",form_code:x,form_name:S,from_action_code:P,from_action_name:T};a.ZP.isDebug()&&(0,a.U6)(c),a.ZP.isAssistant()&&a.ZP.assistant_add(c),P&&a.ZP.getLoadingCacheComponent(P)||(a.ZP.setLoadingCache("START",P,M),fetch(D.info.u+"/Post",{method:"POST",body:JSON.stringify(l),headers:r}).then((t=>t.text())).then((t=>{if(void 0===(t=JSON.parse(t)))return;let o=new Date;(0,a.ln)(JSON.stringify(t).length,k.getTime(),o.getTime());let n={key_feedback:s,data:t,time:o,status:"Nh\u1eadn",form_code:x,form_name:S,from_action_code:P,from_action_name:T};a.ZP.setLoadingCache("END",P,M),a.ZP.isDebug()&&(0,a.U6)(n),a.ZP.isAssistant()&&a.ZP.assistant_add(n),d.ZP.fo(t.fo,e),i(t)})).catch((()=>{a.ZP.setLoadingCache("END",P,M),o(t)})))})),this.refreshDataChart=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=a.ZP.getFormAppAuto(t.context.infoA.key_form);if(void 0!==s){let l=s.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{}),c={},d=t.context.infoA.key_form;do{var n;let t=a.ZP.getFormAppAuto(d),e=null===(n=t.props.infoA_parent)||void 0===n?void 0:n.key_form;t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{});let i=a.ZP.cloneJson(t.getData(""));c=Object.assign(i,c),d=e}while(d);if(s.hasOwnProperty("callDirFromSupport")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&!s.getFormValidate())){if(s.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true",checkError:"true"},{}),s.hasOwnProperty("getData")){let e=s.getData(""),i={};for(const t in e)e.hasOwnProperty(t)&&(Number.isInteger(Number(t))||Array.isArray(e[t])||(i[t]=e[t]));if(t.input_action=a.ZP.analyticsTable(i),c)for(const o in c)c.hasOwnProperty(o)&&(Number.isInteger(Number(o))||Array.isArray(c[o]&&!t.input_action[o])||(t.input_action[o]=c[o]))}for(const e in t.input_action)(Number.isInteger(Number(e))||Array.isArray(t.input_action[e]))&&delete t.input_action[e];a.ZP.isDebug()&&console.log(t.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",a.ZP.cloneJson(t.input_action))}var r=[{txcode:"bo-reload-dashboard",input:{learn_api:i,key_table_paging:o}}];switch(r[0].input=Object.assign(r[0].input,t.input_action),l[e]){case"1s":let i=s.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{});return C===i[e]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),1e3)):(C=i[e],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),1e3)),!0;case"3s":let o=s.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{});return C===o[e]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),3e3)):(C=o[e],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),3e3)),!0;case"5s":let n=s.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{});return C===n[e]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),5e3)):(C=n[e],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),5e3)),!0;case"30s":let l=s.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{});return C===l[e]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),3e4)):(C=l[e],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),3e4)),!0;case"1mins":let c=s.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{});return C===c[e]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),6e4)):(C=c[e],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),6e4)),!0;case"5mins":let d=s.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{});return C===d[e]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),3e5)):(C=d[e],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),3e5)),!0;case"10mins":let h=s.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{});return C===h[e]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),6e5)):(C=h[e],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(t.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===t.context.infoA.key_form?t.postWebTxCode(r,t.context).then((t=>{})):(clearInterval(w),w=void 0)}),6e5)),!0;case"never":return C="never",void 0!==w&&(clearInterval(w),w=void 0),!0}}return!0}}}const F=I;class N extends r.Z{constructor(){super(...arguments),this.copyThis=(t,e)=>{let i=this.input.node_data_convert;let o=a.ZP.getFormAppAuto(this.context.infoA.key_form).getData("");if(this.context.infoA.form_code!==e&&(o[e]=o[this.context.infoA.form_code],i&&(o[i]=o[this.context.infoA.form_code])),void 0!==t){let e=t.split(";");for(let t=0;t<e.length;t++){let i=e[t].split("."),a=o;for(let t=0;t<i.length;t++)if(void 0!==a){const e=i[t];t+1===i.length?delete a[e]:a=a[e]}}}for(const a in o){let t=o[a];if("object"===typeof t&&!Array.isArray(t))for(const e in t)"object"===typeof t[e]&&Array.isArray(t[e])&&(o[e]=t[e])}return void 0!==e?(0,l.QS)({form_code:e},{},{},{},o):(0,l.QS)({form_code:this.context.infoA.form_code},{},{},{},o),!0},this.addnew=(t,e,i)=>{var o="true";if(void 0!==i&&(o=i),void 0!==t&&void 0!==e){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!0),s.hasOwnProperty("getFormValidate"))){if(!s.getFormValidate()){s.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:o},{}),s.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(s.getData("")));for(const t in this.input_action)(Number.isInteger(Number(t))||Array.isArray(this.input_action[t]))&&delete this.input_action[t];return a.ZP.isDebug()&&(console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),console.log("this.input_action=>",a.ZP.cloneJson(this.input_action))),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),setTimeout((()=>{if(void 0!==s&&null!==s&&s.hasOwnProperty("getLoadingAction")){let t=!1;t=s.getLoadingAction(),t&&setTimeout((()=>{s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1)}),500)}}),6e4),!0}s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1),s.hasOwnProperty("clearTimeOut")&&s.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.clearErrorForm=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t?(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.clearError()):a.ZP.AppException("#form.clearError","form is undefined","system")}else a.ZP.AppException("#form.clearError","key_form is undefined","system");else a.ZP.AppException("#form.clearError","infoA is undefined","system")},this.clearErrorFormParent=()=>{if(void 0!==this.context.infoA_parent)if(void 0!==this.context.infoA_parent.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);void 0!==t?(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.clearError()):a.ZP.AppException("#form.clearError","form is undefined","system")}else a.ZP.AppException("#form.clearError","key_form is undefined","system");else a.ZP.AppException("#form.clearError","infoA is undefined","system")},this.clearError=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t?(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport")&&t.callDirFromSupport("clearError",{},{})):a.ZP.AppException("#form.clearError","form is undefined","system")}else a.ZP.AppException("#form.clearError","key_form is undefined","system");else a.ZP.AppException("#form.clearError","infoA is undefined","system")},this.clearForm=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t?(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport")&&(t.callDirFromSupport("clearError",{},{}),t.clearForm(),t.hasOwnProperty("setStatusToForm_AndRunRule")&&t.setStatusToForm_AndRunRule(6))):a.ZP.AppException("#form.clearForm","form is undefined","system")}else a.ZP.AppException("#form.clearForm","key_form is undefined","system");else a.ZP.AppException("#form.clearForm","infoA is undefined","system")},this.view=(t,e)=>{if(this.input_action={},void 0===e&&(e="AFGHkeyIndexWJ"),""===e.trim()&&(e="AFGHkeyIndexWJ"),void 0!==this.context.data)if(void 0!==this.context.data[t]){if(this.input_action.table_code=t,void 0!==this.context.data[t][e])return this.input_action.table_col_key=e,this.input_action[e]=this.context.data[t][e],!0;a.ZP.AppException("#form.view#1",e+" is undefined","system")}else a.ZP.AppException("#form.view#2",t+" is undefined","system");else a.ZP.AppException("#form.view#3","data is undefined","system");return!1},this.lookup_selected=()=>{if(void 0!==this.context.infoA_parent){var t=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);t.callDirFromSupport("setAdvanced",{codeHidden:this.context.infoA_parent.componentParent.codeHidden},this.context.data),t.callDirFromSupport("modalToggle",{codeHidden:this.context.infoA_parent.componentParent.codeHidden},{isClose:!0})}},this.onLoad=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t?t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!0):a.ZP.AppException("#form.onLoad","form is undefined","system")}},this.offLoad=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){let t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t?t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1):a.ZP.AppException("#form.offLoad","form is undefined","system")}},this.reloadData=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t?t.hasOwnProperty("callDirFromSupport")&&t.callDirFromSupport("reload",{},{}):a.ZP.AppException("#form.reloadData","form is undefined","system")}},this.open=t=>{d.ZP.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:t,infoA_parent:this.context.infoA}}],{})},this.confirm=(t,e)=>{let i={title:a.ZP.getLang(t),content:a.ZP.getLang(e||"sysConfirmDelContent")};var o=this.buildPackRollBack();return a.ZP.confirmInfo(i,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],o),"systemStop"},this.select=t=>{if(t){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let i=e.getDataAll("");for(const e in i[t]){const o=i[t][e];Array.isArray(o)&&(i[e]=a.ZP.cloneJson(o))}i[t]=Object.values(this.context.data)[0],a.ZP.log(this.context.data,"this.context.data==> "),a.ZP.log(i,"data_form ==>"),e.putDataAll_andSet(i)}else a.ZP.AppException("#form.formChil.select","form is undefined","system")}else a.ZP.AppException("#form.formChil.select","parameter is undefined","system");return!1},this.getDataRowTableSelect=()=>{if(this.input_action={},a.ZP.getFormAppAuto(this.context.infoA.key_form).getDataAll(),void 0!==this.context.data){this.input_action=this.context.data;for(let t in this.input)this.input_action[t]=this.input[t];return!0}return a.ZP.AppException("#form.getDataRowTableSelect"),!1},this.delete=(t,e)=>{if(this.input_action={},""===e.trim()&&(e="AFGHkeyIndexWJ"),void 0!==this.context.data)if(void 0!==this.context.data[t]){if(this.input_action.table_code=t,void 0!==this.context.data[t][e])return this.input_action.table_col_key=e,this.input_action[e]=this.context.data[t][e],!0;a.ZP.AppException("#form.delete",e+" is undefined","system")}else a.ZP.AppException("#form.delete",t+" is undefined","system");else a.ZP.AppException("#form.delete","data is undefined","system");return!1},this.copyValue=(t,e)=>{if(""===e.trim()&&(e="AFGHkeyIndexWJ"),void 0!==this.context.data)if(void 0!==this.context.data[t]){if(void 0!==this.context.data[t][e])return a.ZP.copyToClipboard(this.context.data[t][e]),!0;a.ZP.AppException("#form.copyValue",e+" is undefined","system")}else a.ZP.AppException("#form.copyValue",t+" is undefined","system");else a.ZP.AppException("#form.copyValue","data is undefined","system");return!1},this.checkCompareResult=t=>{if(void 0===t)return!1;for(const[,e]of Object.entries(t))if(void 0!==e.is_change_value&&!0===e.is_change_value)return!0;return!1},this.check_iscompare=(t,e)=>{if(void 0!==t&&void 0!==e){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){var o=i.callDirFromSupport("getInfoCompare",{list_component:t,list_view:e,inform:"true"},{});if(!this.checkCompareResult(o))return!0;if(this.checkCompareResult(o)){let t=[],e=[];for(const[,a]of Object.entries(o))void 0!==a.compareInfo&&e.push(a.compareInfo);t.push({view_code:"",view_name:"",list_component:e});let i={title:a.ZP.getLang("BO_003001_noti_save_changes"),content:t,message_save:a.ZP.getLang("BO_003001_noti_save_changes_mess")};var s=this.buildPackRollBack();a.ZP.compareInfo(i,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],s)}return"systemStop"}}},this.dataToStore=()=>{a.ZP.findData_Update(this.input)},this.dataToForm=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){if(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1),t.hasOwnProperty("callDirFromSupport")){t.callDirFromSupport("clearError",{},{});var e=a.ZP.getDataOOPFormServer(this.input);if(void 0!==e)if(!1===Array.isArray(e))t.putDataAll_andSet(e,!0);else if(e.length>0)return void t.putDataAll_andSet(e[0],!0)}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.findAndRemove=()=>{if(void 0!==this.input.data){var t=this.input.data;if(void 0!==t.table){var e=t.pk_col,i=t.table;if(void 0!==t[i]&&t[i].length>0){var o={};o[i]=t[i][0],a.ZP.deleteData(i,o,e)}}else a.ZP.AppException("#form.findAndRemove","table is undefined","system")}else a.ZP.AppException("#form.findAndRemove","data is undefined","system")},this.errorToForm=()=>{if(void 0!==this.input.errorJWebUI&&void 0!==this.input.errorJWebUI.count&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t&&t.hasOwnProperty("setStatusToForm_AndRunRule")&&t.setStatusToForm_AndRunRule(this.input.errorJWebUI.count)}},this.showToast=(t,e)=>{var i={};switch(e){case!0:i={class_:"success",icon:"fa fa-check",title:t+" successfully",time:(new Date).getTime()+"",description:t+" Successfully",data:{},action:{}};break;case!1:i={class_:"error",icon:"fa fa-check",title:t||"Action error!",time:(new Date).getTime()+"",description:t||"Action error!",data:{},action:{}};break;default:i={class_:"error",icon:"fa fa-check",title:t,time:(new Date).getTime()+"",description:t,data:{},action:{}}}a.ZP.pushNotify("notifyToast",i,{}),a.ZP.callAllScreenListen()},this.loadingRender=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t&&(t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!0),setTimeout((()=>{t.setLoadingAction(!1)}),200))},this.copyValueComponent=t=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let i=e.callDirFromSupport("getAdvanced",{list_component:t,list_view:"",inform:"true",checkError:"false"},{});console.log("data_form",i),a.ZP.copyToClipboard(i[t])}},this.checkListForm=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t&&!t.getFormValidate()){t.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true",checkError:!1},{});const e=a.ZP.analyticsTable(t.getData(""));if(void 0!==e.group_menu&&void 0!==e.group_menu.group_menu_list_authorize_form&&void 0!==e.group_menu.group_menu_function_code){const t=e.group_menu.group_menu_list_authorize_form,i=e.group_menu.group_menu_function_code;if(t.split(";").includes(i))return this.showToast("Form code is not allowed in List of authorization forms",!1),!1;let o=!1;if(o=t.split(";").some(((e,i)=>t.split(";").indexOf(e)!==i)),o)return this.showToast("Duplicate form in List authourization forms",!1),!1}}return!0},this.update=(t,e,i)=>{var o="true";if(void 0!==i&&(o=i),void 0!==t&&void 0!==e){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&s.hasOwnProperty("getFormValidate")&&(s.callDirFromSupport("checkValidate",{},{}),!s.getFormValidate()))return s.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:o},{}),s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1),s.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(s.getData(""))),a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),!0}else a.ZP.AppException("#form.update","form is undefined","system")}else a.ZP.AppException("#form.update","parameter is undefined","system")},this.returnTrue=()=>(this.input_action=this.input,!0),this.reopen=()=>{let t=this.context.infoA.key_form;a.ZP.removeForm(t),d.ZP.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:t}}],{})},this.clearTimeOut=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&t.hasOwnProperty("clearTimeOut")&&t.clearTimeOut()},this.updateDataImportFile=()=>{let t=a.ZP.getFormAppAuto(this.context.infoA.key_form).getDataForm("");return this.input_action=t,!0},this.updateDataImportFileToForm=()=>(a.ZP.getFormAppAuto(this.context.infoA.key_form).putDataAll_andSet(this.input),!0),this.setDataFormBatchConfig=()=>(a.ZP.getFormAppAuto(this.context.infoA.key_form).putDataAll_andSet(this.input),!0),this.sumColumnTableAndSetComponent=(t,e,i,o)=>{if(void 0!==t&&void 0!==i){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);let n;if(void 0!==s&&s.hasOwnProperty("callDirFromSupport")){s.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true",checkError:"true"},{});let a=i.split(";");if(3===a.length){n=s.getDataAdvanced("");let i=0;for(let o=0;o<n[t].length;o++){let s=n[t][o][e];s.sheet?(s[a[2]]=s[a[0]]*s[a[1]],i+=s[a[2]]):(s[a[1]]=0,s[a[2]]=0)}return s.putDataAll_andSetComponent(n,t),s.callDirFromSupport("setAdvanced",{list_component:o},i),!0}return!1}}}}}const L=N;class E extends r.Z{constructor(){super(...arguments),this.getDataForm=(t,e,i)=>{var o="true";if(i&&(o=i),void 0!==t&&void 0!==e){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")){if("false"===i)return s.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:o},{}),this.input_action=s.getData(""),!0;if(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&s.hasOwnProperty("getData")&&!s.getFormValidate())return s.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:o},{}),this.input_action=s.getData(""),a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),!0}}else a.ZP.AppException("#formmin.getData","form is undefined","system")}else a.ZP.AppException("#formmin.getData","parameter is undefined","system");return!1},this.addnew=(t,e,i)=>{var o="true";if(void 0!==i&&(o=i),void 0!==t&&void 0!==e){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&s.hasOwnProperty("getData")&&!s.getFormValidate()))return s.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:o},{}),this.input_action=s.getData(""),a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),!0}else a.ZP.AppException("#formmin.getData","form is undefined","system")}else a.ZP.AppException("#formmin.getData","parameter is undefined","system");return!1},this.view=()=>{if(this.input_action={},void 0!==this.context.data){var t={};for(var e in this.context.data){var i=this.context.data[e];if(void 0!==i)for(var o in i)t[o]=i[o];break}return this.input_action=t,!0}return a.ZP.AppException("#formsql.view","data is undefined","system"),!1},this.update=(t,e,i)=>{var o="true";if(void 0!==i&&(o=i),void 0!==t&&void 0!==e){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&s.hasOwnProperty("getFormValidate")&&(s.callDirFromSupport("checkValidate",{},{}),!s.getFormValidate()))return s.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:o},{}),s.hasOwnProperty("getData")&&(this.input_action=s.getData("")),a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),!0}else a.ZP.AppException("#formsql.update","form is undefined","system")}else a.ZP.AppException("#formsql.update","parameter is undefined","system")},this.dataToStoreSQL=t=>{if(void 0!==t&&void 0!==this.input&&void 0!==this.input.data&&void 0!==this.input.data[t])for(var e=this.input.data[t],i=0;i<e.length;i++){var o={};o[t]=e[i],a.ZP.addData(t,o)}},this.findToStoreSQL=(t,e)=>{if(void 0!==t&&void 0!==this.input&&void 0!==this.input.data&&void 0!==this.input.data[t])for(var i=this.input.data[t],o=0;o<i.length;o++){var s={};s[t]=i[o],a.ZP.updateData(t,s,e)}},this.delete=(t,e)=>(this.input_action={},void 0!==this.context.data?(this.input_action=this.context.data,this.input_action.table_code=t,this.input_action.pk_col=e,!0):(a.ZP.AppException("#formsql.view","data is undefined","system"),!1))}}const j=E;class Z extends r.Z{constructor(){super(...arguments),this.show=()=>{a.ZP.addDataChatNew(this.input)},this.sended=()=>{void 0!==this.input.data_chat&&a.ZP.setStatusChat(this.input)},this.assistant_sendError=()=>{let t=prompt(a.ZP.getLang("sysSendErrorCurrent"),(new Date).toString());return a.ZP.isDebug()&&a.ZP.copyToClipboard(t),null!=t?(this.input_action={feed_id:a.ZP.assistant_sendFeekError(),info_end_user:t},!0):"systemStop"}}}const R=Z;class Q extends r.Z{constructor(){super(...arguments),this.masterDataStart=()=>{var t=this.supportMasterData();if(void 0!==t){var e="";void 0!==this.context.data&&void 0!==this.context.data[t.table]&&void 0!==this.context.data[t.table][t.pk]&&(e=this.context.data[t.table][t.pk]),""!==e&&a.ZP.ms_start(t.table,t.pk,e,this.context.infoA.key_form,this.context.infoA.form_code)}},this.saveOld=()=>{var t=this.supportMasterData();if(void 0!==t){var e=a.ZP.ms_getMasterData(this.context.infoA.key_form);if(void 0!==e&&void 0!==e.data_key_value){var i=a.ZP.findData(t.table,t.pk,e.data_key_value);if(void 0!==i){a.ZP.ms_saveOld(i,this.context.infoA.key_form);var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==o&&o.hasOwnProperty("checkMasterData")&&o.checkMasterData()}}}},this.readInfoFollow=()=>{var t={};void 0!==this.input&&void 0!==this.input.info_follow&&(t=this.input.info_follow);var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("readMasterDataInfo")&&e.readMasterDataInfo(t)},this.compareData=()=>{var t=this.supportMasterData();if(void 0!==t){var e=a.ZP.ms_getMasterData(this.context.infoA.key_form);if(void 0!==e){if(void 0!==e.data_key_value){var i=a.ZP.findData(t.table,t.pk,e.data_key_value);void 0!==i&&a.ZP.ms_saveNew(i,this.context.infoA.key_form)}var o=a.ZP.ms_getMasterData(this.context.infoA.key_form);if(void 0!==o&&void 0!==o.dataOld&&void 0!==o.dataNew){var s=o.dataOld[t.table],n=o.dataNew[t.table],r={old:{},new:{}};if(void 0!==s&&void 0!==n){var l=!1;for(var c in n)"AFGHTimeWJ"!==c&&"AFGHkeyTime"!==c&&(void 0!==s[c]?n[c]!==s[c]&&(r.old[c]=s[c],r.new[c]=n[c],l||(l=!0)):(r.old[c]=null,r.new[c]=n[c],l||(l=!0)));var d={};return d[t.table]=n,l&&(this.input_action={table:t.table,pk:t.pk,data_key_value:e.data_key_value,dataCompare:r,form_code:this.context.infoA.form_code,dataNew:{table:t.table,data:n},fo_reopen:[{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:this.context.infoA.form_code,data:d,table:t.table}}]}),a.ZP.ms_clearMasterData(this.context.infoA.key_form),l}}}}}}supportMasterData(){if(void 0!==this.context.infoA){var t=a.ZP.getConfigMasterOfComponent(this.context.infoA.form_code,this.context.componentConfigDefault.codeHidden);if(void 0!==t&&void 0!==t.config&&void 0!==t.config.isMasterData&&void 0!==t.config.privateKeyTableMasterData&&void 0!==t.config.tableMasterData&&"true"===t.config.isMasterData&&""!==t.config.privateKeyTableMasterData&&""!==t.config.tableMasterData)return{pk:t.config.privateKeyTableMasterData,table:t.config.tableMasterData}}}}const z=Q,U="full_name",B="status",Y="language_default",H="avatar",V="lock_screen_image",W="current_password",G="new_password",J="confirm_new_password",q="current_PIN",K="new_PIN",X="repeat_PIN",$="full_name",tt="login_name",et="status",it="lang",ot="avatar",at="lock_screen_image";class st{constructor(t){this.setPassword=t=>(this.rebuildPassword(t),this.pwd_display),this.getPasswordDecode=()=>this.decodePassword(this.pwd_encode),this.getPasswordDisplay=()=>this.pwd_display,this.props=t,this.pwd_encode="",this.pwd_display=""}rebuildPassword(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=String(t);let e=0,i=this.decodePassword(this.pwd_encode),o="";for(const a of t)"\u2022"===a?(o+=i[e]||"",e++):o+=a;this.pwd_encode=this.encodePassword(o),this.pwd_display=t.replace(/./g,"\u2022")}encodePassword(t){let e="";for(let i of t){let t=i.charCodeAt(0);e+=String.fromCharCode(2*t)}return e}decodePassword(t){let e="";for(let i of t){let t=i.charCodeAt(0);e+=String.fromCharCode(t/2)}return e}}class nt extends s.Component{constructor(t){var e,i,o;super(t),e=this,this.onChangeInputUserMap=(t,e)=>{let i=t.target.value,{stateData:o,userMap:a}=this.state,s=e.split(".");3===s.length&&(o.user_map.data[s[0]][s[2]].value=i,a[s[1]][s[2]]=i,this.setState({stateData:o,userMap:a}))},this.onSaveUserMap=t=>{let{userMap:e}=this.state;(0,c.Yr)([{txcode:"#sys:bo-save-userMap",input:e}],{}).then((t=>{let e=a.ZP.foGetData("info",t);e&&("saveUserMapOk"===e.saveUserMap?this.pushNotification(e.saveUserMap,!0):this.pushNotification(e.saveUserMap,!1))}))},this.changeKeyLanguage=t=>{let e={note:a.ZP.getLang("note"),full_name:a.ZP.getLang("myProfile_fullName"),avatar:a.ZP.getLang("myProfile_avatar"),bgre_login:a.ZP.getLang("myProfile_bgreLogin"),profile_app:a.ZP.getLang("myProfile_profileApp"),status:a.ZP.getLang("myProfile_status"),check_password:a.ZP.getLang("myProfile_checkPassword"),old_password:a.ZP.getLang("myProfile_oldPassword"),new_password:a.ZP.getLang("myProfile_newPassword"),new_password_again:a.ZP.getLang("myProfile_newPasswordAgain"),pin_present:a.ZP.getLang("myProfile_pinPresent"),new_pin:a.ZP.getLang("myProfile_newPin"),new_pin_again:a.ZP.getLang("myProfile_newPinAgain"),title_:a.ZP.getLang("myProfile_title"),des_:a.ZP.getLang("myProfile_des"),btn_save:a.ZP.getLang("btn_save"),btn_clear:a.ZP.getLang("btn_clear"),btn_update:a.ZP.getLang("myProfile_btnUpdate"),btn_submit:a.ZP.getLang("myProfile_btnSubmit"),msg_old_pass:a.ZP.getLang("myProfile_msgOldPass"),msg_new_pass:a.ZP.getLang("myProfile_msgNewPass"),msg_new_pass_emtry:a.ZP.getLang("myProfile_msgNewPassEmtry"),msg_old_pin:a.ZP.getLang("myProfile_msgOldPIN"),msg_new_pin:a.ZP.getLang("myProfile_msgNewPIN"),msg_new_pin_emtry:a.ZP.getLang("myProfile_msgNewPINEmtry"),hub:a.ZP.getLang("myProfile_tabHub"),o9:a.ZP.getLang("myProfile_tabO9"),username:a.ZP.getLang("myProfile_username"),password:a.ZP.getLang("myProfile_password"),tabUserInfo:a.ZP.getLang("myProfile_tabUserInfo"),tabPassword:a.ZP.getLang("myProfile_tabPassword"),tabPIN:a.ZP.getLang("myProfile_tabPIN"),tabUserMap:a.ZP.getLang("myProfile_tabUserMap"),myProfile_twoPINNotEqual:a.ZP.getLang("myProfile_twoPINNotEqual"),myProfile_newPINRequire:a.ZP.getLang("myProfile_newPINRequire"),myProfile_curPINRequire:a.ZP.getLang("myProfile_curPINRequire"),myProfile_confirmPINRequire:a.ZP.getLang("myProfile_confirmPINRequire"),myProfile_currentPassRequire:a.ZP.getLang("myProfile_currentPassRequire"),myProfile_repeatPassRequire:a.ZP.getLang("myProfile_repeatPassRequire"),myProfile_newPassRequire:a.ZP.getLang("myProfile_newPassRequire"),myProfile_twoPassNotEqual:a.ZP.getLang("myProfile_twoPassNotEqual"),changePassInvalidOldPass:a.ZP.getLang("changePassInvalidOldPass"),background_app:a.ZP.getLang("myProfile_backgroundApp"),form_btn_close:a.ZP.getLang("form_close_title"),form_btn_add:a.ZP.getLang("form_add_title")};if(void 0!==t)return e;let i=this.state.infoA;i.title=a.ZP.getLang("myProfile_title"),i.des=a.ZP.getLang("myProfile_des"),i.lang_form.vi=a.ZP.getLang("myProfile_title"),i.lang_form.en=a.ZP.getLang("myProfile_title"),this.setState({languages:e,infoA:i}),this.changeLanguageTemplate(e)},this.btnUpdateClickHandler=(t,e)=>{this.callAPI("my_profile_update",{api_data:{user_name:this.getValueInput($),avatar:this.getValueInput(H).split(",")[1]}}).then((t=>{if(t&&!t.hasError){let{user_acc:t}=this.state;t.user_name=this.getValueInput($),t.avatar=this.getValueInput(H).split(",")[1],a.ZP.context_setKey("user_acc",t),this.pushNotification("Update Profile",!0)}else this.pushNotification("Update Profile",!1)}))},this.callAPI=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";e.setState({isLoading:!0});var s=[{txcode:"#ncbsCbs:bo-rule-getInfoAPI",input:{learn_api:t,app:"ncbsCbs"}}];return s[0].input=Object.assign(s[0].input,i),(0,c.Yr)(s,{}).then((t=>a.ZP.foGetData(o,t)?a.ZP.foGetData(o,t):{error_data:a.ZP.foGetData("infoError",t),hasError:!0})).finally((t=>{e.setState({isLoading:!1})}))},this.pushNotification=function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i={},o=a.ZP.getLang(t);i={class_:!0===e?"success":"error",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}},a.ZP.pushNotify("notifyToast",i,{}),a.ZP.pushNotify("notifyDefault",i,{}),a.ZP.callAllScreenListen()},this.btnSavePassClickHandler=(t,e)=>{let i=this.OBJ_LOGIC_PASSWORD[W].getPasswordDecode(this.getValueInput(W)),o=this.OBJ_LOGIC_PASSWORD[G].getPasswordDecode(this.getValueInput(G)),s=this.OBJ_LOGIC_PASSWORD[J].getPasswordDecode(this.getValueInput(J));if(this.isValidPassword(i,o,s)){let t=[{txcode:"#sys:bo-change-password",input:{token_webui:(0,a.VN)(),current_pass:i,new_pass:o,confirm_new_pass:s}}];(0,c.Yr)(t,{}).then((t=>{const e=a.ZP.foGetData("data",t)||{};var i={error_data:a.ZP.foGetData("infoError",t),hasError:!0};if(i.hasError)this.pushNotification(i.error_data[0].info,"error");else{var o,s;let t=e.info;var n;if(null!==(o=e.api_info)&&void 0!==o&&o.data.e)t=null===(n=e.api_info)||void 0===n?void 0:n.data.e;let i=(null===(s=e.api_info)||void 0===s?void 0:s.data.t)||e.type;i?(this.btnClearClickHandler(),this.pushNotification(t,i)):(this.setErrorInput(W,t),this.pushNotification(t,"error"))}}))}},this.btnClearClickHandler=()=>{let{stateData:t}=this.state,{current_password:e,new_password:i,confirm_new_password:o}=this.state.stateData;e.dataFull.value="",e.dataFull.config.cmd.error.message="",i.dataFull.value="",i.dataFull.config.cmd.error.message="",o.dataFull.value="",o.dataFull.config.cmd.error.message="",this.setState({stateData:t})},this.btnSavePINClickHandler=t=>{let{stateData:e}=this.state,i=this.OBJ_LOGIC_PASSWORD[q].getPasswordDecode(this.getValueInput(q)),o=this.OBJ_LOGIC_PASSWORD[K].getPasswordDecode(this.getValueInput(K)),s=this.OBJ_LOGIC_PASSWORD[X].getPasswordDecode(this.getValueInput(X));this.isValidPIN(i,o,s)&&(0,c.Yr)([{txcode:"#sys:bo-change-PIN",input:{pin_old:i,pin_new_1:o,pin_new_2:s}}],{}).then((t=>{let i=a.ZP.foGetData("info",t);if(void 0!==i&&void 0!==i.savePin)switch(i.savePin){case"savePinOk":e.current_PIN.dataFull.config.cmd.visible=!0,e.current_PIN.dataFull.value="",e.new_PIN.dataFull.value="",e.repeat_PIN.dataFull.value="",this.pushNotification(i.savePin,!0),this.setState({stateData:e});break;case"savePinFalse":this.pushNotification(i.savePin,!1);break;case"incorrectPIN":this.pushNotification(i.savePin,!1),this.setErrorInput(q,i.savePin)}}),(t=>{console.log("error",t)})).catch((t=>{console.log("error catch",t)}))},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.onChangeValue=(t,e)=>{let{stateData:i}=this.state;i[e].dataFull.value=t.target.value,this.setState({stateData:i})},this.onChangeValuePassword=(t,e)=>{let{stateData:i}=this.state;this.OBJ_LOGIC_PASSWORD[e].setPassword(t.target.value),i[e].dataFull.value=this.OBJ_LOGIC_PASSWORD[e].getPasswordDisplay(t.target.value),this.setState({stateData:i})},this.closeForm=()=>{a.ZP.removeForm(this.key_form)},this.onChangeValueSelect=(t,e,i)=>{let{stateData:o}=this.state;if(void 0!==o[i]){let t=[],a=[];t=o[i].dataFull.data.filter((t=>t.selected)),a=o[i].dataFull.data.filter(((t,i)=>i===e)),t.length>0&&(t[0].selected=!1),a.length>0&&(a[0].selected=!0),this.setState({stateData:o})}},this.key_form="myProfile",this.notificationTimeOut=5e3,this.formRender=(0,g.Iq)("jwebui_myProfile"),this.LOGIC_PASSWORD_oldpwd=new st,this.LOGIC_PASSWORD_newpwd=new st,this.LOGIC_PASSWORD_confirm_newpwd=new st,this.LOGIC_PASSWORD_oldPIN=new st,this.LOGIC_PASSWORD_newPIN=new st,this.LOGIC_PASSWORD_confirmNewPIN=new st,this.OBJ_LOGIC_PASSWORD={},this.LANGS=a.ZP.getConfigUser("list_lang_config"),this.list_lang_datafull=[];for(const a of this.LANGS)this.list_lang_datafull.push({title:a.view,value:a.key});let s={};void 0!==this.props.profile.chat&&(s=this.props.profile.chat),this.prefixImage="data:image/png;base64,";let n={};void 0!==this.props.profile.profile_app&&(n=this.props.profile.profile_app);let r=a.ZP.context_get("user_acc"),l=t.profile.user_map||{},d=this.changeKeyLanguage("start");this.uploadfile_avatar={},this.state={userMap:l,user_acc:r,chat:s,visibility:"",data_lang:a.ZP.getConfigUser("list_lang_config"),profile_app:n,check_password:"",infoA:{lang_form:{vi:a.ZP.getLang("myProfile_title"),en:a.ZP.getLang("myProfile_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!1},languages:d,show_toast:"snackbar",check_msg:!1,stateData:{form:{dataFull:{config:{default:{title:d.title_,title_sub:d.des_,icon:"person"}},title_button:{close_button:d.form_btn_close,add_form:d.form_btn_add},mode:{form_min:!1},list_button_on_header:[],cmd:{visibility:"",isLoading:!1,isFavorite:!1},abs_Close:this.closeForm,abs_AddMenuBar:this.addMenu}},tab:{data:(null!==(i=Object.keys(t.profile.user_map))&&void 0!==i&&i.length,[{title:d.tabUserInfo},{title:d.tabPassword}])},save_PIN:{dataFull:{config:{default:{title:d.btn_save,type:"primary",class:""}}},abs_Click:this.btnSavePINClickHandler},full_name:{dataFull:{config:{default:{title:d.full_name,type:"text",class:"col-md-12",code_form_component:U},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:r.user_name},abs_Change:this.onChangeValue},status:{dataFull:{config:{default:{title:d.status,type:"text",class:"col-md-12",code_form_component:B},cmd:{disable:!1,visible:!1,error:{message:"",type:""}}},value:n[et]||""},abs_Change:this.onChangeValue},language_default:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:d.profile_app,type:"text",class:"col-md-12",code_form_component:Y},cmd:{disable:!1,visible:!1,error:{message:"",type:""}}},data:this.getConfigSelectItem(this.list_lang_datafull,n.lang)},abs_Change:this.onChangeValueSelect},avatar:{dataFull:{config:{default:{title:d.avatar,type:"",class:"col-md-12",icon:"",accept:"image/png, image/jpeg",hasUpload:!0,att_content:r[ot]?"":"No file choose"},cmd:{disable:!1,isLoading:!1}},abs_Change:t=>{if(t.preventDefault(),void 0!==t.target.files)if(t.target.files.length>0){let e=new FileReader,i=t.target.files[0];if("img"===this.getFileType(i.type,i.name)){e.onloadend=()=>{let{stateData:t}=this.state;t.avatar.dataFull.value=e.result,this.setState({stateData:t})};let o=10;void 0!==i&&null!==i&&i.size/1024/1024<o&&e.readAsDataURL(i),(0,c.bq)(t.target.files[0],t.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((t=>{this.uploadfile_avatar=t;let{stateData:i}=this.state;i.avatar.dataFull.config.default.att_content=e.name,this.setState({stateData:i})}),(t=>{t.statusCode&&t.statusText?a.ZP.showToast(t.statusCode+":"+t.statusText+"#",!1):a.ZP.showToast(a.ZP.getLang("FileTypeError"),!1)}))}else a.ZP.showToast(a.ZP.getLang("FileTypeError"),!1)}else a.ZP.showToast(a.ZP.getLang("FileTypeError"),!1)},value:this.isImage(r[ot])?this.prefixImage+r[ot]:""}},lock_screen_image:{dataFull:{config:{default:{title:d.bgre_login,type:"text",class:"col-md-12",code_form_component:V},cmd:{disable:!1,visible:!1,error:{message:"",type:""}}},value:n[at]},abs_Change:this.onChangeValue},background_app:{dataFull:{config:{default:{title:d.background_app,type:"",class:"col-md-12",icon:"",accept:"image/png,image/jpeg",hasUpload:!0,att_content:"No file choose"},cmd:{disable:!1,isLoading:!1}},abs_Change:t=>{if(t.preventDefault(),void 0!==t.target.files)if(t.target.files.length>0)if(this.checkFileTypeAccept(t.target.files[0].type)){let e=new FileReader,i=t.target.files[0];e.onloadend=()=>{};let o=10;void 0!==i&&null!==i&&i.size/1024/1024<o&&e.readAsDataURL(i),(0,c.OU)(t.target.files[0],t.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((t=>{this.uploadfile_result=t;let{stateData:e}=this.state;e.background_app.dataFull.value="../rs/global/img/"+t.name,this.setState({stateData:e})}),(t=>{t.statusCode&&t.statusText?a.ZP.showToast(t.statusCode+":"+t.statusText+"#",!1):a.ZP.showToast(a.ZP.getLang("FileUploadError"),!1)}))}else a.ZP.showToast(a.ZP.getLang("FileTypeError"),!1);else a.ZP.showToast(a.ZP.getLang("FileTypeError"),!1)},value:n.background_app}},update:{dataFull:{config:{default:{title:d.btn_update,type:"primary",class:""},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}}},abs_Click:this.btnUpdateClickHandler},current_password:{dataFull:{config:{default:{title:d.old_password,type:"text",class:"col-md-12",code_form_component:W,required:!0},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},new_password:{dataFull:{config:{default:{title:d.new_password,type:"text",class:"col-md-12",code_form_component:G,required:!0},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},confirm_new_password:{dataFull:{config:{default:{title:d.new_password_again,type:"text",class:"col-md-12",code_form_component:J,required:!0},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},save:{dataFull:{config:{default:{title:d.btn_save,type:"primary",class:""}}},abs_Click:this.btnSavePassClickHandler},clear:{dataFull:{config:{default:{title:d.btn_clear,type:"",class:""}}},abs_Click:this.btnClearClickHandler},current_PIN:{dataFull:{config:{default:{title:d.pin_present,type:"text",class:"col-md-12",code_form_component:q,required:!0},cmd:{disable:!1,visible:!0===(null===(o=this.props.profile)||void 0===o?void 0:o.isHasPin),error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},new_PIN:{dataFull:{config:{default:{title:d.new_pin,required:!0,type:"text",class:"col-md-12",code_form_component:K},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},repeat_PIN:{dataFull:{config:{default:{title:d.new_pin_again,type:"text",class:"col-md-12",code_form_component:X,required:!0},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},user_map:this.getConfigUserMap(t.profile.user_map,d),button_user_map:{dataFull:{config:{default:{title:d.btn_save,type:"primary",class:""}}},abs_Click:this.onSaveUserMap}}},this.OBJ_LOGIC_PASSWORD[W]=this.LOGIC_PASSWORD_oldpwd,this.OBJ_LOGIC_PASSWORD[G]=this.LOGIC_PASSWORD_newpwd,this.OBJ_LOGIC_PASSWORD[J]=this.LOGIC_PASSWORD_confirm_newpwd,this.OBJ_LOGIC_PASSWORD[q]=this.LOGIC_PASSWORD_oldPIN,this.OBJ_LOGIC_PASSWORD[K]=this.LOGIC_PASSWORD_newPIN,this.OBJ_LOGIC_PASSWORD[X]=this.LOGIC_PASSWORD_confirmNewPIN}checkFileTypeAccept(t){return"image/png,image/jpeg".split(",").map((function(t){return new RegExp(t.replace("*","[^\\/,]+"))})).some((e=>e.test(t)))}getFileType(t,e){if("application/pdf"===t)return"pdf";if("text/plain"===t)return"text";if(/image.*/.test(t))return"img";let i=e.split(".");return"xlsx"===i[i.length-1]||"xls"===i[i.length-1]?"excel":i[i.length-1]}isImage(t){let e=!1;try{e=btoa(atob(t))===t&&"/iR".includes(t[0])}catch(i){}return e}getConfigSelectItem(){let t=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>({title:e.title,value:e.value,selected:e.value===t})))}getConfigUserMap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return{data:Object.keys(t).map(((i,o)=>{var a;return{title:(null===(a=t[i])||void 0===a?void 0:a.app_name)||e[i]||i,id:o,username:{title:e.username,value:t[i].username,code_form_component:`${o}.${i}.username`,cmd:{error:{message:"",type:""}},abs_Change:this.onChangeInputUserMap},password:{title:e.password,value:t[i].password,code_form_component:`${o}.${i}.password`,cmd:{error:{message:"",type:""}},abs_Change:this.onChangeInputUserMap}}}))}}changeLanguageTemplate(t){let{stateData:e}=this.state;e.form.dataFull.config.default.title=t.title_,e.form.dataFull.config.default.title_sub=t.des_,e.form.dataFull.title_button.close_button=t.form_btn_close,e.form.dataFull.title_button.add_form=t.form_btn_add,e.full_name.dataFull.config.default.title=t.full_name,e.status.dataFull.config.default.title=t.status,e.language_default.dataFull.config.default.title=t.profile_app,e.avatar.dataFull.config.default.title=t.avatar,e.lock_screen_image.dataFull.config.default.title=t.bgre_login,e.update.dataFull.config.default.title=t.btn_update,e.current_password.dataFull.config.default.title=t.old_password,e.new_password.dataFull.config.default.title=t.new_password,e.confirm_new_password.dataFull.config.default.title=t.new_password_again,e.save.dataFull.config.default.title=t.btn_save,e.clear.dataFull.config.default.title=t.btn_clear,e.current_PIN.dataFull.config.default.title=t.pin_present,e.new_PIN.dataFull.config.default.title=t.new_pin,e.repeat_PIN.dataFull.config.default.title=t.new_pin_again,e.save_PIN.dataFull.config.default.title=t.btn_save,e.tab.data[0].title=t.tabUserInfo,e.tab.data[1].title=t.tabPassword,e.tab.data[2].title=t.tabPIN,e.tab.data.length>3&&(e.tab.data[3].title=t.tabUserMap),Object.keys(this.props.profile.user_map).forEach(((i,o)=>{e.user_map.data[o].title=t[i]||i,e.user_map.data[o].username.title=t.username,e.user_map.data[o].password.title=t.password})),e.button_user_map.dataFull.config.default.title=t.btn_save,e.current_password.dataFull.config.cmd.error.message=t[e.current_password.dataFull.config.cmd.error.titleLang],e.new_password.dataFull.config.cmd.error.message=t[e.new_password.dataFull.config.cmd.error.titleLang],e.confirm_new_password.dataFull.config.cmd.error.message=t[e.confirm_new_password.dataFull.config.cmd.error.titleLang],e.current_PIN.dataFull.config.cmd.error.message=t[e.current_PIN.dataFull.config.cmd.error.titleLang],e.new_PIN.dataFull.config.cmd.error.message=t[e.new_PIN.dataFull.config.cmd.error.titleLang],e.repeat_PIN.dataFull.config.cmd.error.message=t[e.repeat_PIN.dataFull.config.cmd.error.titleLang],this.setState({stateData:e})}getConfigTemplate(){}isValidPassword(t,e,i){let o=!1;return""===t?this.setErrorInput(W,"myProfile_currentPassRequire"):this.clearErrorInput(W),""===e?this.setErrorInput(G,"myProfile_newPassRequire"):this.clearErrorInput(G),""===i?this.setErrorInput(J,"myProfile_repeatPassRequire"):this.clearErrorInput(J),""!==t&&""!==e&&""!==i&&(e!==i?(this.setErrorInput(G," "),this.setErrorInput(J,"myProfile_twoPassNotEqual")):o=!0),o}isValidPIN(t,e,i){let o=!1;return""===t&&!0===this.props.profile.isHasPin?this.setErrorInput(q,"myProfile_curPINRequire"):this.clearErrorInput(q),""===e?this.setErrorInput(K,"myProfile_newPINRequire"):this.clearErrorInput(K),""===i?this.setErrorInput(X,"myProfile_confirmPINRequire"):this.clearErrorInput(X),""===t&&this.props.profile.isHasPin||""===i||""===e||(i!==e?(this.setErrorInput(K," "),this.setErrorInput(X,"myProfile_twoPINNotEqual")):""===t&&!0===this.props.profile.isHasPin?this.setErrorInput(q,"myProfile_curPINRequire"):(this.clearErrorInput(q),o=!0)),o}getProfileAppData(){var t;let{profile_app:e}=this.state;return e[tt]=this.getValueInput(U),e[et]=this.getValueInput(B),e[it]=null===(t=this.getValueDropdown(Y)[0])||void 0===t?void 0:t.value,e[ot]=this.getValueInput(H),e[at]=this.getValueInput(V),e.background_app=this.getValueInput("background_app"),e}render(){const t=this.formRender;return(0,v.jsx)("div",{style:{display:this.state.visibility},children:(0,v.jsx)(t,{stateData:this.state.stateData})})}componentDidMount(){a.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),a.ZP.form_addMapping(this.key_form,this.props.mapping_key)}getValueInput(t){return this.state.stateData[t].dataFull.value}getValueDropdown(t){return this.state.stateData[t].dataFull.data.filter((t=>void 0!==t.selected&&!0===t.selected))}setErrorInput(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{stateData:i}=this.state;i[t].dataFull.config.cmd.error.message=this.state.languages[e],i[t].dataFull.config.cmd.error.titleLang=e,this.setState({stateData:i})}clearErrorInput(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{stateData:e}=this.state;e[t].dataFull.config.cmd.error.message="",e[t].dataFull.config.cmd.error.titleLang="",this.setState({stateData:e})}}const rt=nt;class lt extends s.Component{constructor(t){super(t),this.getTXName=t=>{let e=t.type,i=t.trace,o="";var a;if("request"===e)o=(null===i||void 0===i||null===(a=i[0])||void 0===a?void 0:a.txcode)||"--";else if("response"===e){var s,n,r;o=(null===i||void 0===i||null===(s=i.ob_all_fo)||void 0===s||null===(n=s.fo)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.txcode)||"--"}let l=["bo-load-txFo","fo-container","fo-msg-toast","-load-"];for(const c of l)o.includes(c)&&(o="---");return o},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.key_form="mangerFeedback";let e=this.props.feedback;for(let i=0;i<e.length;i++)if(void 0!==e[i].feedback.feed_id){e[i].feedback.feed_id_data=[];let t=e[i].feedback.feed_id.split(";");for(let o=0;o<t.length;o++)e[i].feedback.feed_id_data.push({feed_id:t[o]})}this.key_feedback_color={aa:"#ffffff"},this.state={visibility:"",data:e,infoA:{title:"Qu\u1ea3n tr\u1ecb ph\u1ea3n h\u1ed3i ng\u01b0\u1eddi d\xf9ng",des:"\u0110\u01a1n gi\u1ea3n h\xf3a d\u1eef li\u1ec7u y\xeau c\u1ea7u h\u1ed7 tr\u1ee3 l\u1ed7i c\u1ee7a ng\u01b0\u1eddi d\xf9ng, n\u1ebfu IT c\xf3 trong tay d\u1eef li\u1ec7u ng\u01b0\u1eddi d\xf9ng \u0111\xe3 thao t\xe1c!",openOne:"true",ofModal:!1},icon_copy:"fa-clone",icon_default:"fa-clipboard",index_select_copy:"aa"}}fortmatDateOfFeedback(t){let e=new Date(t);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"->"+e.getMilliseconds()}createRamdomColor_keyFeedback(t){if(void 0===this.key_feedback_color[t]){var e=this.createRandomColor();let i=JSON.stringify(this.key_feedback_color);for(;i.includes(e);)e=this.createRandomColor();this.key_feedback_color[t]=e}return this.key_feedback_color[t]}createRandomColor(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}renderTableDetailFeedId(t,e){return void 0!==t.feed_detail&&t.feed_detail.map(((t,i)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:t.form_name}),(0,v.jsx)("td",{children:t.from_action_name}),(0,v.jsxs)("td",{style:{backgroundColor:this.createRamdomColor_keyFeedback(t.key_feedback),color:"#ffffff"},children:[(0,v.jsx)("i",{className:"fa "+("request"===t.type?"fa-paper-plane":"fa-download"),"aria-hidden":"true"}),"\xa0",t.type,"\xa0",this.getTXName(t)]}),(0,v.jsxs)("td",{children:[(0,v.jsx)("button",{style:{color:"#83c76d",cursor:"pointer"},onClick:o=>{a.ZP.copyToClipboard(JSON.stringify(t.trace));let s=e+"-"+i;this.setState({index_select_copy:s})},children:(this.state.index_select_copy,"copy")}),"\xa0",(0,v.jsx)("button",{style:{color:"#83c76d",cursor:"pointer"},onClick:o=>{a.ZP.copyToClipboard(t.key_feedback);let s=e+"-"+i;this.setState({index_select_copy:s})},children:this.state.index_select_copy===e+"-"+i?"copy":"key"})]}),(0,v.jsx)("td",{children:this.fortmatDateOfFeedback(t.time)})]},i)))}render(){const t=(0,g.RP)("uForm");return(0,v.jsxs)(t,{dataFull:{config:{default:{title:"Feedback Managerment"}},cmd:{visibility:"block"===this.state.visibility}},children:[(0,v.jsx)("div",{className:"form-style",style:{display:this.state.visibility},children:(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:(0,v.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:(0,v.jsxs)("div",{className:"prtm-block",children:[(0,v.jsxs)("div",{className:"prtm-block-title mrgn-b",children:[(0,v.jsx)("h3",{children:this.state.infoA.title}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{className:"note-box bg-danger",children:"Note !"}),this.state.infoA.des]})]}),(0,v.jsx)("div",{className:"row full-lg-md",children:(0,v.jsx)("div",{style:{marginBottom:20},children:(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsxs)("table",{className:"table table-bordered table-middle jwebui-table-email-myDevice",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{className:"bg-info base-reverse",children:[(0,v.jsx)("th",{children:"\u1ee8ng d\u1ee5ng"}),(0,v.jsx)("th",{children:"Ng\xe0y l\u01b0u"}),(0,v.jsx)("th",{children:"Ng\u01b0\u1eddi d\xf9ng \xfd ki\u1ebfn"}),(0,v.jsx)("th",{children:"Danh s\xe1ch m\xe3 g\xf3i tin"}),(0,v.jsx)("th",{})]})}),(0,v.jsx)("tbody",{children:this.state.data.map(((t,e)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:t.feedback.app}),(0,v.jsx)("td",{children:t.feedback.dayOfYear}),(0,v.jsx)("td",{children:t.feedback.info_end_user}),(0,v.jsx)("td",{children:(0,v.jsxs)("table",{className:"table table-bordered table-middle jwebui-table-email-myDevice",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{className:"bg-info base-reverse",children:[(0,v.jsx)("th",{children:"Form name"}),(0,v.jsx)("th",{children:"Action"}),(0,v.jsx)("th",{children:"Status"}),(0,v.jsx)("th",{}),(0,v.jsx)("th",{children:"Time"})]})}),(0,v.jsx)("tbody",{children:t.feedback.feed_id_data.map(((t,e)=>this.renderTableDetailFeedId(t,e)))})]},e)}),(0,v.jsxs)("td",{children:[(0,v.jsx)("button",{className:"btn btn-danger",type:"button",onClick:t=>{},children:"X\xf3a"}),(0,v.jsx)("button",{className:"btn btn-danger",type:"button",onClick:i=>{(0,c.Yr)([{txcode:"#sys:bo-feedback-loadFeedbackDetail",input:{feedback:t.feedback}}],{}).then((i=>{if(void 0!==i.fo&&i.fo.length>0&&void 0!==i.fo[0].input&&void 0!==i.fo[0].input.feedback){let o=i.fo[0].input.feedback;if(void 0!==t.feedback.feed_id_data){let i=t.feedback.feed_id_data;for(let t=0;t<i.length;t++)if(void 0!==o[i[t].feed_id]){let e=o[i[t].feed_id];i[t].feed_detail=[];for(let o=0;o<e.length;o++)for(let a in e[o]){let s=e[o][a];i[t].feed_detail.push(s)}}let a=this.state.data,s=t;s.feedback.feed_id_data=i,a[e]=s,this.setState({data:a})}}}),(t=>{}))},children:"T\u1ea3i chi ti\u1ebft"})]})]},e)))})]})})})})]})})})})})," "]})}componentDidMount(){a.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),a.ZP.form_addMapping(this.key_form,this.props.mapping_key)}}const ct=lt;class dt extends r.Z{constructor(){super(...arguments),this.loadFormMyProfile=()=>{var t=a.ZP.autoID(),e={};console.log(this.input),void 0!==this.input.profile&&(e=this.input.profile),a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(rt,{mapping_key:t,profile:e},t)},t))},this.loadMangerFeedback=()=>{var t=a.ZP.autoID(),e={};void 0!==this.input.feedback&&(e=this.input.feedback),a.ZP.newForm((0,v.jsx)(ct,{mapping_key:t,feedback:e},t))}}}const ht=dt;class ut extends r.Z{constructor(){super(...arguments),this.developer=()=>{},this.setOOPThis=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t&&t.callDirFromSupport("setDataOOP",{codeHidden:this.context.componentConfigDefault.codeHidden},this.input.account)}}}const pt=ut;class _t extends r.Z{constructor(){var t;super(...arguments),t=this,this.confirm=(t,e)=>{var i;const{infoA:o,componentConfigDefault:s}=this.context;let n;a.ZP.getFormAppAuto(o.key_form).props.conf.forEach((t=>{if(n)return;t.list_view.forEach((t=>{if(n)return;t.list_input.forEach((t=>{if(!n&&("cTableDefault"===t.inputtype||"jTableSearch"===t.inputtype||"jTableForm"===t.inputtype))if(e){if(t.default.code!==e)return;{let e=a.ZP.parseJson(t.config.columns);n=e[0]}}else{let e=a.ZP.parseJson(t.config.columns);n=e[0]}}))}))}));let r=s.name||s.code,l=(null===o||void 0===o||null===(i=o.lang_form)||void 0===i?void 0:i[a.ZP.getLangKey()])||o.title||o.des,c=l.indexOf("-"),d=l.lastIndexOf("-");d===c&&(d=l.length),l=l.substring(c+1,d);let h=a.ZP.getLang("sysConfirmContent");h=h.replace("@button_action",a.ZP.getLang(r.toLowerCase())),h=h.replace("@table",l),h=h.replace("@col",n.title),h=h.replace("@val",a.ZP.getOOP(this.context.data,n.code));let u={title:t?a.ZP.getLang(t):a.ZP.getLang(r),content:h};var p=this.buildPackRollBack();return a.ZP.confirmInfo(u,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"warning",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0,keyboard:{enter:!0}}],p),"systemStop"},this.confirmDelete=(t,e)=>{const{infoA:i,componentConfigDefault:o}=this.context;let s;a.ZP.getFormAppAuto(i.key_form).props.conf.forEach((t=>{if(s)return;t.list_view.forEach((t=>{if(s)return;t.list_input.forEach((t=>{if(!s&&("cTableDefault"===t.inputtype||"jTableSearch"===t.inputtype||"jTableForm"===t.inputtype))if(e){if(t.default.code!==e)return;{let e=a.ZP.parseJson(t.config.columns);s=e[0]}}else{let e=a.ZP.parseJson(t.config.columns);s=e[0]}}))}))}));let n=o.name||o.code,r=a.ZP.getLang("sysConfirmContent");r=r.replace("@button_action",a.ZP.getLang(n.toLowerCase())),r=r.replace("@table","item"),r=r.replace("@col",s.title),r=r.replace("@val",""),r=r.replace("?","");let l={title:t?a.ZP.getLang(t):a.ZP.getLang(n),content:r,main_content:a.ZP.getOOP(this.context.data,s.code)};var c=this.buildPackRollBack();return a.ZP.confirmInfo(l,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"warning",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0,keyboard:{enter:!0}}],c),"systemStop"},this.addnew=(t,e,i)=>{let o,s=this.context.infoA_parent;if(s&&s.key_form){let t=a.ZP.getFormAppAuto(s.key_form);t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")&&(o=a.ZP.analyticsTable(t.getData("")))}var n="true";if(void 0!==i&&(n=i),void 0!==t&&void 0!==e){var r=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==r){if(r.hasOwnProperty("callDirFromSupport")&&(r.callDirFromSupport("checkValidate",{},{}),r.hasOwnProperty("getFormValidate"))){if(!r.getFormValidate()){var l;r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!0),r.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:n},{}),r.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(r.getData("")),o&&(this.input_action=Object.assign(o,this.input_action)));for(const t in this.input_action)(Number.isInteger(Number(t))||Array.isArray(this.input_action[t]))&&delete this.input_action[t];if(null!==this&&void 0!==this&&null!==(l=this.context)&&void 0!==l&&l.data&&"object"===typeof this.context.data){let t=a.ZP.cloneJson(this.context.data);this.input_action=Object.assign(t,this.input_action)}return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!r.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),setTimeout((()=>{if(void 0!==r&&null!==r&&r.hasOwnProperty("getLoadingAction")){let t=!1;t=r.getLoadingAction(),t&&setTimeout((()=>{r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1)}),500)}}),6e4),!0}r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1),r.hasOwnProperty("clearTimeOut")&&r.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewNoValidate=(t,e,i)=>{let o={},s=this.context.infoA_parent;for(;s&&s.key_form;){let t=a.ZP.getFormAppAuto(s.key_form);t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1,isCallFromFormChild:!0},{}),t.hasOwnProperty("getData")&&(o=Object.assign(a.ZP.analyticsTable(t.getData("")),o)),s=t.state.infoA_parent&&t.state.infoA_parent.key_form?t.state.infoA_parent:void 0}var n="true";if(void 0!==i&&(n=i),void 0!==t&&void 0!==e){var r=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==r){if(r.hasOwnProperty("callDirFromSupport")){var l;r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!0),r.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:n},{}),r.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(r.getData("")),o&&(this.input_action=Object.assign(o,this.input_action)));for(const t in this.input_action)(Number.isInteger(Number(t))||Array.isArray(this.input_action[t]))&&delete this.input_action[t];if(null!==this&&void 0!==this&&null!==(l=this.context)&&void 0!==l&&l.data&&"object"===typeof this.context.data){let t=a.ZP.cloneJson(this.context.data);this.input_action=Object.assign(t,this.input_action)}return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!r.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),setTimeout((()=>{if(void 0!==r&&null!==r&&r.hasOwnProperty("getLoadingAction")){let t=!1;t=r.getLoadingAction(),t&&setTimeout((()=>{r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1)}),500)}}),6e4),!0}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewChild=(t,e,i)=>{let o=this.context.infoA_parent;var s="true";if(void 0!==i&&(s=i),void 0!==t&&void 0!==e){var n=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==n){if(n.setFormValidateFromFunctionClient(!1),n.hasOwnProperty("callDirFromSupport")&&(n.callDirFromSupport("checkValidate",{},{}),n.hasOwnProperty("getFormValidate"))){if(!n.getFormValidate()){var r;n.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:s},{}),n.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(n.getData("")),o&&(this.input_action=Object.assign(o,this.input_action)));for(const t in this.input_action)(Number.isInteger(Number(t))||Array.isArray(this.input_action[t]))&&delete this.input_action[t];if(null!==this&&void 0!==this&&null!==(r=this.context)&&void 0!==r&&r.data&&"object"===typeof this.context.data){let t=a.ZP.cloneJson(this.context.data);this.input_action=Object.assign(t,this.input_action)}return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!n.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),setTimeout((()=>{if(void 0!==n&&null!==n&&n.hasOwnProperty("getLoadingAction")){let t=!1;t=n.getLoadingAction(),t&&setTimeout((()=>{n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1)}),500)}}),6e4),!0}n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1),n.hasOwnProperty("clearTimeOut")&&n.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewChildNoValidate=(t,e,i)=>{let o=this.context.infoA_parent;var s="true";if(void 0!==i&&(s=i),void 0!==t&&void 0!==e){var n=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==n){if(n.setFormValidateFromFunctionClient(!1),n.hasOwnProperty("callDirFromSupport")){var r;n.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:s},{}),n.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(n.getData("")),o&&(this.input_action=Object.assign(o,this.input_action)));for(const t in this.input_action)(Number.isInteger(Number(t))||Array.isArray(this.input_action[t]))&&delete this.input_action[t];if(null!==this&&void 0!==this&&null!==(r=this.context)&&void 0!==r&&r.data&&"object"===typeof this.context.data){let t=a.ZP.cloneJson(this.context.data);this.input_action=Object.assign(t,this.input_action)}return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!n.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),setTimeout((()=>{if(void 0!==n&&null!==n&&n.hasOwnProperty("getLoadingAction")){let t=!1;t=n.getLoadingAction(),t&&setTimeout((()=>{n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1)}),500)}}),6e4),!0}n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1),n.hasOwnProperty("clearTimeOut")&&n.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system");return!1},this.addnewParent=(t,e,i)=>{let o,s=this.context.infoA_parent;if(s&&s.key_form){let t=a.ZP.getFormAppAuto(s.key_form);t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")&&(o=a.ZP.analyticsTable(t.getData("")))}var n="true";if(void 0!==i&&(n=i),void 0!==t&&void 0!==e){var r=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==r){if(r.hasOwnProperty("callDirFromSupport")&&(r.callDirFromSupport("checkValidate",{},{}),r.hasOwnProperty("getFormValidate"))){if(!r.getFormValidate()){var l;r.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:n},{}),r.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(r.getData("")),o&&(this.input_action=Object.assign(o,this.input_action)));for(const t in this.input_action)(Number.isInteger(Number(t))||Array.isArray(this.input_action[t]))&&delete this.input_action[t];if(null!==this&&void 0!==this&&null!==(l=this.context)&&void 0!==l&&l.data&&"object"===typeof this.context.data){let t=a.ZP.cloneJson(this.context.data);this.input_action=Object.assign(t,this.input_action)}return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!r.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),setTimeout((()=>{if(void 0!==r&&null!==r&&r.hasOwnProperty("getLoadingAction")){let t=!1;t=r.getLoadingAction(),t&&setTimeout((()=>{r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1)}),500)}}),6e4),!0}r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1),r.hasOwnProperty("clearTimeOut")&&r.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewSearch=(t,e,i)=>{let o={},s=this.context.infoA.key_form;do{var n;let t=a.ZP.getFormAppAuto(s),e=null===(n=t.props.infoA_parent)||void 0===n?void 0:n.key_form;t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{});let i=a.ZP.cloneJson(t.getData(""));o=Object.assign(i,o),s=e}while(s);var r="true";if(void 0!==i&&(r=i),void 0!==t&&void 0!==e){var l=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==l){if(l.hasOwnProperty("callDirFromSupport")&&(l.callDirFromSupport("checkValidate",{},{}),l.hasOwnProperty("getFormValidate"))){if(!l.getFormValidate()){if(l.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:r},{}),l.hasOwnProperty("getData")){let t=l.getData(""),e={};for(const i in t)t.hasOwnProperty(i)&&(Number.isInteger(Number(i))||Array.isArray(t[i])||(e[i]=t[i]));if(this.input_action=a.ZP.analyticsTable(e),o)for(const i in o)o.hasOwnProperty(i)&&(Number.isInteger(Number(i))||Array.isArray(o[i]&&!this.input_action[i])||(this.input_action[i]=o[i]))}for(const t in this.input_action)(Number.isInteger(Number(t))||Array.isArray(this.input_action[t]))&&delete this.input_action[t];return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!l.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),setTimeout((()=>{if(void 0!==l&&null!==l&&l.hasOwnProperty("getLoadingAction")){let t=!1;t=l.getLoadingAction(),t&&setTimeout((()=>{l.hasOwnProperty("setLoadingAction")&&l.setLoadingAction(!1)}),500)}}),6e4),!0}l.hasOwnProperty("setLoadingAction")&&l.setLoadingAction(!1),l.hasOwnProperty("clearTimeOut")&&l.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewSearchAdvanced=(t,e,i)=>{let o={},s=this.context.infoA.key_form;do{var n;let t=a.ZP.getFormAppAuto(s),e=null===(n=t.props.infoA_parent)||void 0===n?void 0:n.key_form;t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{});let i=a.ZP.cloneJson(t.getData(""));o=Object.assign(i,o),s=e}while(s);var r="true";if(void 0!==i&&(r=i),void 0!==t&&void 0!==e){var l=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==l){if(l.hasOwnProperty("callDirFromSupport")&&(l.callDirFromSupport("checkValidate",{},{}),l.hasOwnProperty("getFormValidate"))){if(!l.getFormValidate()){if(l.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:r},{}),l.hasOwnProperty("getData")){let t=l.getData(""),e={};for(const i in t)t.hasOwnProperty(i)&&(Number.isInteger(Number(i))||Array.isArray(t[i])||(e[i]=t[i]));if(this.input_action=a.ZP.analyticsTable(e),o)for(const i in o)o.hasOwnProperty(i)&&(Number.isInteger(Number(i))||Array.isArray(o[i]&&!this.input_action[i])||(this.input_action[i]=o[i]))}for(const t in this.input_action)(Number.isInteger(Number(t))||Array.isArray(this.input_action[t]))&&delete this.input_action[t];return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!l.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),setTimeout((()=>{if(void 0!==l&&null!==l&&l.hasOwnProperty("getLoadingAction")){let t=!1;t=l.getLoadingAction(),t&&setTimeout((()=>{l.hasOwnProperty("setLoadingAction")&&l.setLoadingAction(!1)}),500)}}),6e4),!0}l.hasOwnProperty("setLoadingAction")&&l.setLoadingAction(!1),l.hasOwnProperty("clearTimeOut")&&l.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewLookup=(t,e,i)=>{let o={};var s="true";if(void 0!==i&&(s=i),void 0!==t&&void 0!==e){var n=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==n){if(n.hasOwnProperty("callDirFromSupport")&&(n.callDirFromSupport("checkValidate",{},{}),n.hasOwnProperty("getFormValidate"))){if(!n.getFormValidate()){if(n.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:s},{}),n.hasOwnProperty("getData")){let t=n.getData(""),e={};for(const i in t)t.hasOwnProperty(i)&&(Number.isInteger(Number(i))||Array.isArray(t[i])||(e[i]=t[i]));if(this.input_action=a.ZP.analyticsTable(e),o)for(const i in o)o.hasOwnProperty(i)&&(Number.isInteger(Number(i))||Array.isArray(o[i]&&!this.input_action[i])||(this.input_action[i]=o[i]))}for(const t in this.input_action)(Number.isInteger(Number(t))||Array.isArray(this.input_action[t]))&&delete this.input_action[t];return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!n.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),!0}n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1),n.hasOwnProperty("clearTimeOut")&&n.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.clearError=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t?(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport")&&t.callDirFromSupport("clearError",{},{})):a.ZP.AppException("#form.clearError","form is undefined","system")}else a.ZP.AppException("#form.clearError","key_form is undefined","system");else a.ZP.AppException("#form.clearError","infoA is undefined","system")},this.clearForm=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t?(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport")&&(t.callDirFromSupport("clearError",{},{}),await t.clearForm(),t.hasOwnProperty("setStatusToForm_AndRunRule")&&(t.setStatusToForm_AndRunRule(6),t.setStatusToForm_AndRunRule(0)))):a.ZP.AppException("#form.clearForm","form is undefined","system")}else a.ZP.AppException("#form.clearForm","key_form is undefined","system");else a.ZP.AppException("#form.clearForm","infoA is undefined","system")},this.view=t=>{if(void 0!==this.input[t])setTimeout((()=>((0,l.QS)({form_code:this.input.form_key},{infoA_parent:this.context.infoA},{},{},this.input[t]),!0)),2);else{const e=this.context.infoA.key_form;a.ZP.persist_setFormError(e,!1,`Not found '${t}' in data response!`,"JWEBUI DEV")}},this.reloadData=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){let t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t?t.hasOwnProperty("reload")&&t.reload():a.ZP.AppException("#form.reloadData","form is undefined","system")}},this.reloadDataTable=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"search_result;table_name;table";if(void 0!==t.context.infoA&&void 0!==t.context.infoA.key_form){let i=a.ZP.getFormAppAuto(t.context.infoA.key_form);void 0!==i?i.hasOwnProperty("reloadComponent")&&i.reloadComponent(e):a.ZP.AppException("#form.reloadComponent","form is undefined","system")}},this.reloadDataParent=()=>{var t,e,i,o;null!==(t=this.context)&&void 0!==t&&null!==(e=t.infoA_parent)&&void 0!==e&&e.key_form&&a.ZP.getFormAppAuto(null===(i=this.context)||void 0===i||null===(o=i.infoA_parent)||void 0===o?void 0:o.key_form).reload()},this.setDataInform=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t?(t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1),t.hasOwnProperty("clearTimeOut")&&t.clearTimeOut(),t.putDataAll_andSet(this.input),document.getElementById("content").scrollTo(0,0)):a.ZP.AppException("#form.reloadData","form is undefined","system")}},this.setDataInFormParentModal=()=>{let t=a.ZP.modalDynamicFromFromCode_getRoleBack();if(void 0!==t.context.infoA&&void 0!==t.context.infoA.key_form){var e=a.ZP.getFormAppAuto(t.context.infoA.key_form);void 0!==e?(e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut(),e.putDataAll_andSet(this.input)):a.ZP.AppException("#form.setDataInFormParentModal","form is undefined","system")}},this.addDataSelected=(t,e)=>void 0!==t&&""!==t.trim()&&(void 0!==this.context.data&&void 0!==this.context.data[t]&&(this.input_action={},this.input_action.table_code=t,this.input_action.table_col_key=e,this.input_action[t]=this.context.data[t],a.ZP.log("this.input_action",this.input_action),!0)),this.addSelected=()=>(this.input_action=this.context.data,!0),this.getDataView=function(){var e=a.ZP.getFormAppAuto(t.context.infoA.key_form);let i={};if(void 0!==e){let t=e.getData();for(const e in t)t.hasOwnProperty(e)&&(Number.isInteger(Number(e))||Array.isArray(t[e])||(i[e]=a.ZP.cloneJson(t[e])))}return t.input_action=Object.assign(i,t.context.data),!0},this.getDataViewAndSet=(t,e,i)=>{var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);let s={};if(void 0!==o){let i=o.getData();for(const t in i)i.hasOwnProperty(t)&&(Number.isInteger(Number(t))||Array.isArray(i[t])||(s[t]=a.ZP.cloneJson(i[t])));o.callDirFromSupport("setAdvanced",{list_component:t},a.ZP.getNodeJson(Object.assign(s,this.context.data),e)),o.getDataAll()}return!0},this.delete=function(){return t.input_action=t.context.data,!0},this.getDataRowTable=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);return void 0!==t&&t.setLoadingAction(!0),this.input_action=this.context.data.data_cpn,this.input_action.rown_data&&(this.input_action=this.input_action.rown_data),setTimeout((()=>{if(void 0!==t&&null!==t&&t.hasOwnProperty("getLoadingAction")){let e=!1;e=t.getLoadingAction(),e&&setTimeout((()=>{t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1)}),500)}}),6e4),!0},this.dataToStore=()=>{a.ZP.findData_Update(this.input)},this.dataToFormAML=async()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t&&(t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1),t.hasOwnProperty("clearTimeOut")&&t.clearTimeOut(),t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport")&&t.putDataAll_andSet(this.input))}},this.dataToForm=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){let t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){if(t.setLoadingAction(!0),t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport")){let e="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(e=this.input.config_table.learn_api_data);let i=a.ZP.getDataOOPFormServer(this.input,e),o=i[this.context.infoA.key_form];for(const t in o){const e=o[t];if(Array.isArray(e)){let o=[];for(let i=0;i<e.length;i++){const a=e[i];"object"===typeof a[t]?o.push(a):o.push({[t]:a})}i[t]=o}}let s=a.ZP.cloneJson(i),n=t.getData(),r={};for(const t in n)if("object"===typeof n[t]&&!Array.isArray(!n[t])){null===n[t]?null===i[t]?r[t]=null:r[t]=i[t]:r[t]=Object.assign(a.ZP.cloneJson(n[t]),a.ZP.cloneJson(i[t]||{}));for(const e in n[t]){const i=n[t][e];Array.isArray(i)&&(n[e]=a.ZP.cloneJson(i))}}for(const t in s)if("object"===typeof s[t]&&!Array.isArray(!s[t])&&!Number(t)&&"0"!==t)for(const e in s[t])Array.isArray(!s[t][e])||(n[t]||(n[t]={}),n[t][e]=s[t][e]);for(const t in this.input)-1===t.indexOf("_paging")&&"errorJWebUI"!==t||(n[t]=this.input[t]);t.putDataAll_andSet(n),t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1),t.hasOwnProperty("clearTimeOut")&&t.clearTimeOut()}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.dataTableToForm=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"search_result;table_name;table";if(void 0!==t.context.infoA)if(void 0!==t.context.infoA.key_form){let i=a.ZP.getFormAppAuto(t.context.infoA.key_form);if(void 0!==i){if(i.setLoadingAction(!0),i.hasOwnProperty("setFormValidateFromFunctionClient")&&i.setFormValidateFromFunctionClient(!1),i.hasOwnProperty("callDirFromSupport")){let o="";void 0!==t.input.config_table&&void 0!==t.input.config_table.learn_api_data&&(o=t.input.config_table.learn_api_data);let s=a.ZP.getDataOOPFormServer(t.input,o),n=s[t.context.infoA.key_form];for(const t in n){const e=n[t];if(Array.isArray(e)){let i=[];for(let o=0;o<e.length;o++){const a=e[o];"object"===typeof a[t]?i.push(a):i.push({[t]:a})}s[t]=i}}let r=a.ZP.cloneJson(s),l=i.getData(),c={};for(const t in l)if("object"===typeof l[t]&&!Array.isArray(!l[t])){null===l[t]?null===s[t]?c[t]=null:c[t]=s[t]:c[t]=Object.assign(a.ZP.cloneJson(l[t]),a.ZP.cloneJson(s[t]||{}));for(const e in l[t]){const i=l[t][e];Array.isArray(i)&&(l[e]=a.ZP.cloneJson(i))}}for(const t in r)if("object"===typeof r[t]&&!Array.isArray(!r[t])&&!Number(t)&&"0"!==t)for(const e in r[t])Array.isArray(!r[t][e])||(l[t]||(l[t]={}),l[t][e]=r[t][e]);for(const e in t.input)-1===e.indexOf("_paging")&&"errorJWebUI"!==e||(l[e]=t.input[e]);i.putDataAll_andSetComponent(l,e),i.hasOwnProperty("setLoadingAction")&&i.setLoadingAction(!1),i.hasOwnProperty("clearTimeOut")&&i.clearTimeOut()}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.dataToComponent=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){let t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){if(t.setLoadingAction(!0),t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport")){let e="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(e=this.input.config_table.learn_api_data);let i=a.ZP.getDataOOPFormServer(this.input,e),o=i[this.context.infoA.key_form];for(const t in o){const e=o[t];if(Array.isArray(e)){let o=[];for(let i=0;i<e.length;i++){const a=e[i];"object"===typeof a[t]?o.push(a):o.push({[t]:a})}i[t]=o}}let s=a.ZP.cloneJson(i),n=t.getData(),r={};for(const t in n)if("object"===typeof n[t]&&!Array.isArray(!n[t])){null===n[t]?null===i[t]?r[t]=null:r[t]=i[t]:r[t]=Object.assign(a.ZP.cloneJson(n[t]),a.ZP.cloneJson(i[t]||{}));for(const e in n[t]){const i=n[t][e];Array.isArray(i)&&(n[e]=a.ZP.cloneJson(i))}}for(const t in s)if("object"===typeof s[t]&&!Array.isArray(!s[t])&&!Number(t)&&"0"!==t)for(const e in s[t])Array.isArray(!s[t][e])||(n[t]||(n[t]={}),n[t][e]=s[t][e]);for(const t in this.input)-1!==t.indexOf("_paging")&&(n[t]=this.input[t]);t.putDataAll_andSetComponent(n,this.input.component_result),t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1),t.hasOwnProperty("clearTimeOut")&&t.clearTimeOut()}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.dataToFormNew=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){if(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1),t.hasOwnProperty("clearTimeOut")&&t.clearTimeOut(),t.hasOwnProperty("callDirFromSupport")){let i="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(i=this.input.config_table.learn_api_data);var e=a.ZP.getDataOOPFormServer(this.input,i);let o=e[this.context.infoA.key_form];for(const t in o){const i=o[t];if(Array.isArray(i)){let o=[];for(let e=0;e<i.length;e++){const a=i[e];"object"===typeof a[t]?o.push(a):o.push({[t]:a})}e[t]=o}}let s=a.ZP.cloneJson(e),n=t.getData(),r={};for(const t in n)if("object"===typeof n[t]&&!Array.isArray(!n[t])){null===n[t]?null===e[t]?r[t]=null:r[t]=e[t]:r[t]=Object.assign(a.ZP.cloneJson(n[t]),a.ZP.cloneJson(e[t]||{}));for(const e in n[t]){const i=n[t][e];Array.isArray(i)&&(n[e]=a.ZP.cloneJson(i))}}for(const t in s)if("object"!==typeof s[t]||Array.isArray(!s[t])){if("total_items"===t||"search_advanced"===t){let e=!0;for(const i in this.input)if(void 0!==this.input[i]&&"object"===typeof this.input[i]&&void 0!==this.input[i][t]&&this.input[i][t]===s[t]){void 0===n[i]&&(n[i]={}),n[i][t]=s[t],e=!1;break}e&&(n.table_paging[t]=s[t])}}else{void 0!==n[t]&&Array.isArray(n[t])&&(n[t]=[]);for(const e in s[t])Array.isArray(!s[t][e])||(n[t]||(n[t]={}),n[t][e]=s[t][e])}t.putDataAll_andSet(n)}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.dataToFormParent=async()=>{if(void 0!==this.context.infoA_parent)if(void 0!==this.context.infoA_parent.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);if(void 0!==t){if(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1),t.hasOwnProperty("clearTimeOut")&&t.clearTimeOut(),t.hasOwnProperty("callDirFromSupport")){let i="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(i=this.input.config_table.learn_api_data);let o="";void 0!==this.input.table_reload&&(o=this.input.table_reload);var e=a.ZP.getDataOOPFormServer(this.input,i);o&&a.ZP.setData(o,e[o]);let s=e[this.context.infoA.key_form];for(const t in s){const i=s[t];if(Array.isArray(i)){let o=[];for(let e=0;e<i.length;e++){const a=i[e];"object"===typeof a[t]?o.push(a):o.push({[t]:a})}e[t]=o}}let n=a.ZP.cloneJson(e),r=t.getData(),l={};for(const t in r)if("object"===typeof r[t]&&!Array.isArray(!r[t])){null===r[t]?null===e[t]?l[t]=null:l[t]=e[t]:l[t]=Object.assign(a.ZP.cloneJson(r[t]),a.ZP.cloneJson(e[t]||{}));for(const e in r[t]){const i=r[t][e];Array.isArray(i)&&(r[e]=a.ZP.cloneJson(i))}}for(const t in n)if("object"!==typeof n[t]||Array.isArray(!n[t])){if("total_items"===t||"search_advanced"===t){let e=!0;for(const i in this.input)if(void 0!==this.input[i]&&"object"===typeof this.input[i]&&void 0!==this.input[i][t]&&this.input[i][t]===n[t]){void 0===r[i]&&(r[i]={}),r[i][t]=n[t],e=!1;break}e&&(r.table_paging[t]=n[t])}}else for(const e in n[t])Array.isArray(!n[t][e])||(r[t]||(r[t]={}),r[t][e]=n[t][e]);t.putDataAll_andSet(r)}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.dataToFormParentTable=async()=>{if(void 0!==this.context.infoA_parent)if(void 0!==this.context.infoA_parent.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);if(void 0!==t){if(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1),t.hasOwnProperty("clearTimeOut")&&t.clearTimeOut(),t.hasOwnProperty("callDirFromSupport")){let i="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(i=this.input.config_table.learn_api_data);let o="";void 0!==this.input.table_reload&&(o=this.input.table_reload);var e=a.ZP.getDataOOPFormServer(this.input,i);o&&a.ZP.setData(o,e[o]);let s=e[this.context.infoA_parent.key_form];for(const t in s){const i=s[t];if(Array.isArray(i)){let o=[];for(let e=0;e<i.length;e++){const a=i[e];"object"===typeof a[t]?o.push(a):o.push({[t]:a})}e[t]=o}}let n=a.ZP.cloneJson(this.input),r=t.getData();for(const t in r)if("object"===typeof r[t]&&!Array.isArray(!r[t]))for(const e in r[t]){const i=r[t][e];Array.isArray(i)&&(r[e]=a.ZP.cloneJson(i))}for(const t in n)if("object"!==typeof n[t]||Array.isArray(n[t])){if("object"===typeof n[t]&&Array.isArray(n[t]))r[t]=n[t];else if("total_items"===t||"search_advanced"===t){let e=!0;for(const i in this.input)if(void 0!==this.input[i]&&"object"===typeof this.input[i]&&void 0!==this.input[i][t]&&this.input[i][t]===n[t]){void 0===r[i]&&(r[i]={}),r[i][t]=n[t],e=!1;break}e&&(r.table_paging[t]=n[t])}}else for(const e in n[t])Array.isArray(!n[t][e])||(r[t]||(r[t]={}),r[t][e]=n[t][e]);t.putDataAll_andSet(r)}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.dataToFormTable=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){if(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1),t.hasOwnProperty("clearTimeOut")&&t.clearTimeOut(),t.hasOwnProperty("callDirFromSupport")){let i="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(i=this.input.config_table.learn_api_data);let o="";void 0!==this.input.table_reload&&(o=this.input.table_reload);var e=a.ZP.getDataOOPFormServer(this.input,i);o&&a.ZP.setData(o,e[o]);let s=e[this.context.infoA.key_form];for(const t in s){const i=s[t];if(Array.isArray(i)){let o=[];for(let e=0;e<i.length;e++){const a=i[e];"object"===typeof a[t]?o.push(a):o.push({[t]:a})}e[t]=o}}let n=a.ZP.cloneJson(this.input),r=t.getData();for(const t in r)if("object"===typeof r[t]&&!Array.isArray(!r[t]))for(const e in r[t]){const i=r[t][e];Array.isArray(i)&&(r[e]=a.ZP.cloneJson(i))}for(const t in n)if("object"!==typeof n[t]||Array.isArray(n[t])){if("object"===typeof n[t]&&Array.isArray(n[t]))r[t]=n[t];else if("total_items"===t||"search_advanced"===t){let e=!0;for(const i in this.input)if(void 0!==this.input[i]&&"object"===typeof this.input[i]&&void 0!==this.input[i][t]&&this.input[i][t]===n[t]){void 0===r[i]&&(r[i]={}),r[i][t]=n[t],e=!1;break}e&&(r.table_paging[t]=n[t])}}else for(const e in n[t])Array.isArray(!n[t][e])||(r[t]||(r[t]={}),r[t][e]=n[t][e]);t.putDataAll_andSet(r)}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.findAndRemove=()=>{if(void 0!==this.input.data){var t=this.input.data;if(void 0!==t.table){var e=t.pk_col,i=t.table;if(void 0!==t[i]&&t[i].length>0){var o={};o[i]=t[i][0],a.ZP.deleteData(i,o,e)}}else a.ZP.AppException("#form.findAndRemove","table is undefined","system")}else a.ZP.AppException("#form.findAndRemove","data is undefined","system")},this.update=(t,e,i)=>{var o="true";if(void 0!==i&&(o=i),void 0!==t&&void 0!==e){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&s.hasOwnProperty("getFormValidate")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1),s.hasOwnProperty("clearTimeOut")&&s.clearTimeOut(),!s.getFormValidate()))return s.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:o},{}),s.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(s.getData(""))),a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),!0}else a.ZP.AppException("#form.update","form is undefined","system")}else a.ZP.AppException("#form.update","parameter is undefined","system")},this.addErrorAPI=()=>{},this.callAPI=(t,e)=>{var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:t}}];return i[0].input=Object.assign(i[0].input,e),(0,c.Yr)(i,{}).then((t=>a.ZP.foGetData("data",t)))},this.collectData=(t,e,i)=>{let o,s=this.context.infoA_parent;if(s&&s.key_form){let t=a.ZP.getFormAppAuto(s.key_form);t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")&&(o=a.ZP.analyticsTable(t.getData("")))}if(void 0!==t&&void 0!==e){var n=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==n&&(this.input_action=a.ZP.analyticsTable(n.getData("")))}return o&&(this.input_action=Object.assign(o,this.input_action)),!0}}}const ft=_t;class gt extends r.Z{constructor(){var t;super(...arguments),t=this,this.addNew=(t,e,i)=>{if(t&&e){var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){let i=o.getDataAll(""),s=i[t]||{},n=a.ZP.getNodeJson(i,e)||[];if(void 0===s.AFGHkeyIndexWJ)s.AFGHkeyIndexWJ=a.ZP.autoID(),n.push({[t]:s}),i=a.ZP.setNodeJson(i,e,n),o.putDataAll_andSet(i),o.reload();else{for(let e=0;e<n.length;e++){n[e][t].AFGHkeyIndexWJ===s.AFGHkeyIndexWJ&&(n[e]={[t]:s})}o.putDataAll_andSet(i),o.reload()}return!0}a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.add=(t,e,i)=>{if(t&&e){let r=e.split(".");const l=r[r.length-1];var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){var s;let r=o.getDataAll(""),c=a.ZP.cloneJson(r[t])||{};a.ZP.deleteNodeJson(c,(null===(s=e.split("."))||void 0===s?void 0:s[1])||e);let d=a.ZP.getNodeJson(r,e)||[];if(i){if(""===c[i]||null===c[i]||void 0===c[i])return;for(const t of d){let o=t;var n;if(1===Object.keys(o).length&&"object"===typeof Object.values(o)[0])o=a.ZP.getNodeJson(t,(null===(n=e.split("."))||void 0===n?void 0:n[1])||e);if(o[e]&&(o=o[e]),o[i]===c[i]){let t=o;void 0===t.AFGHkeyIndexWJ&&(t.AFGHkeyIndexWJ=a.ZP.autoID()),c.AFGHkeyIndexWJ=t.AFGHkeyIndexWJ;break}}}if(void 0===c.AFGHkeyIndexWJ)c.AFGHkeyIndexWJ=a.ZP.autoID(),d.push({[l]:a.ZP.cloneJson(c)}),r=a.ZP.setNodeJson(r,e,d),o.putDataAll_andSet(r),o.reload();else{for(let t=0;t<d.length;t++){const e=d[t];let i=e;1===Object.keys(i).length&&"object"===typeof Object.values(i)[0]&&(i=Object.values(e)[0]),i.AFGHkeyIndexWJ===c.AFGHkeyIndexWJ&&(d[t]={[l]:a.ZP.cloneJson(c)})}o.putDataAll_andSet(r),o.reload()}return!0}a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.clear=(t,e)=>{if(t){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){let o=i.getData("");if(e)for(const i in o[t])-1===e.indexOf(i)&&(o[t][i]=void 0);else o[t]={};i.putDataAll_andSet(o,!0),i.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{}),i.reload()}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.reloadAndClear=(t,e)=>{if(t){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){let o=i.getData("");if(e)for(const i in o[t])-1===e.indexOf(i)&&(o[t][i]=void 0);else o[t]={};i.reload(),i.putDataAll_andSet(o,!0),i.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{})}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.getDataTableAndReload=(t,e)=>{if(t){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){let o=i.getDataAll("");o[e]=o[t][e],i.putDataAll_andSet(o,!0),i.putData(t,"AFGHkeyIndexWJ",void 0),i.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{}),i.reload()}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.getDataFormComponentFormParentAndSet=(t,e)=>{if(t&&e){var i=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);if(void 0!==i){let s=i.callDirFromSupport("getAdvanced",{list_component:t,list_view:"",inform:"true",checkError:"false"},{}),n=t.split(";"),r=e.split(";"),l={};for(let t=0;t<n.length;t++)l[r[t]]=s[n[t]];var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==o&&o.callDirFromSupport("setGetInfo",{list_component:e},l)}}return!1},this.clearOnly=(t,e)=>{if(t){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==i?(i.putData(t,"AFGHkeyIndexWJ",void 0),i.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{}),i.reload()):a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.clearParent=(t,e)=>{if(t){var i=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);if(void 0!==i){let o=i.getData("");if(e)for(const i in o[t])-1===e.indexOf(i)&&(o[t][i]=void 0);else o[t]={};i.putDataAll_andSet(o,!0),i.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{}),i.reload()}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.runTxFoComponentParent=(t,e)=>{a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);d.ZP.runFoWithContext(JSON.parse(e),{},this.context.infoA_parent,{},{})},this.select=t=>{if(t){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let i=e.getDataAll("");for(const e in i[t]){const o=i[t][e];Array.isArray(o)&&(i[e]=a.ZP.cloneJson(o))}i[t]=Object.values(this.context.data)[0],a.ZP.log(this.context.data,"this.context.data==> "),a.ZP.log(i,"data_form ==>"),e.putDataAll_andSet(i)}else a.ZP.AppException("#form.formChil.select","form is undefined","system")}else a.ZP.AppException("#form.formChil.select","parameter is undefined","system");return!1},this.selectAndScroll=(t,e)=>{if(t){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){let o=i.getDataAll("");for(const e in o[t]){const i=o[t][e];Array.isArray(i)&&(o[e]=a.ZP.cloneJson(i))}if(o[t]=Object.values(this.context.data)[0],e){let i=e.split(";");for(let e=0;e<i.length;e++){const a=i[e];o[t][a]=""}}a.ZP.log(this.context.data,"this.context.data==> "),a.ZP.log(o,"data_form ==>"),i.putDataAll_andSet(o),document.getElementById("content").scrollTo(0,0)}else a.ZP.AppException("#form.formChil.select","form is undefined","system")}else a.ZP.AppException("#form.formChil.select","parameter is undefined","system");return!1},this.scrollTop=()=>(document.getElementById("content").scrollTo(0,0),!0),this.delete=async t=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let i=e.getDataAll("");for(const t in i)if("object"===typeof i[t]&&!Array.isArray(!i[t]))for(const e in i[t])Array.isArray(i[t][e])&&(i[e]=i[t][e]);if(t.includes(".")){let e=t.split(".");i[e[0]][e[1]]=i[e[0]][e[1]].filter((t=>{let e=t;1===Object.keys(t).length&&"object"===typeof Object.values(t)[0]&&(e=Object.values(t)[0]);let i=Object.values(this.context.data)[0];return!this.compareJson(e,i)}))}else i[t]=i[t].filter((t=>{let e=Object.values(t)[0],i=Object.values(this.context.data)[0];return!this.compareJson(e,i)}));await e.putDataAll_andSet(i),e.reload(),e.hasOwnProperty("setStatusToForm_AndRunRule")&&e.setStatusToForm_AndRunRule(0)}},this.deleteNotAwait=t=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let i=e.getDataAll(!0,!0);for(const t in i)if("object"===typeof i[t]&&!Array.isArray(!i[t]))for(const e in i[t])Array.isArray(i[t][e])&&(i[e]=i[t][e]);if(t.includes(".")){let e=t.split(".");i[e[0]][e[1]]=i[e[0]][e[1]].filter((t=>{let e=t;1===Object.keys(t).length&&"object"===typeof Object.values(t)[0]&&(e=Object.values(t)[0]);let i=Object.values(this.context.data)[0];return!this.compareJson(e,i)}))}else i[t]=i[t].filter((t=>{let e=Object.values(t)[0],i=Object.values(this.context.data)[0];return!this.compareJson(e,i)}));e.putDataAll_andSet(i),e.reload(),e.hasOwnProperty("setStatusToForm_AndRunRule")&&e.setStatusToForm_AndRunRule(0)}},this.moveDataArray=(t,e,i,o)=>{var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){let n=s.getDataAll(""),r=n[t]||[],l=n[e]||[];if(Array.isArray(r)&&Array.isArray(l)){if(r=r.filter((t=>!this.compareJson(Object.values(t)[0],Object.values(this.context.data)[0]))),0===l.length)l.push({[e]:Object.values(this.context.data)[0]});else{let t=Object.values(this.context.data)[0];const i=Object.values(l[0])[0];for(const e in t)void 0===(null===i||void 0===i?void 0:i[e])&&delete t[e];l.push({[e]:t})}if(n[t]=r,i){let t=[],s={};for(const n of l){const r=a.ZP.getOOP(n,e+"."+i);s[r]||(s[r]=!0,o&&delete n[e][o],t.push(n))}l=t}n[e]=l,s.putDataAll_andSet(n)}}},this.moveAllDataArray=(t,e,i,o)=>{var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){let n=s.getData(""),r=n[t]||[],l=n[e]||[];if(Array.isArray(r)&&Array.isArray(l)){for(const t of r)if(0===l.length)l.push({[e]:Object.values(t)[0]});else{let i=Object.values(t)[0];const o=Object.values(l[0])[0];for(const t in i)void 0===(null===o||void 0===o?void 0:o[t])&&delete i[t];l.push({[e]:i})}if(i){let t=[],s={};for(const n of l){const r=a.ZP.getOOP(n,e+"."+i);s[r]||(s[r]=!0,o&&delete n[e][o],t.push(n))}l=t}n[e]=l,n[t].length=0,s.putDataAll_andSet(n)}}},this.onClickButtonAdd=t=>{if(t){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let i=e.getDataAll("");i[t]={},e.putDataAll_andSet(i,!0),e.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{})}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.onClickButtonApplyValidate=async(t,e,i,o)=>{let s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(!s)return!1;if(s.hasOwnProperty("callDirFromSupport")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&s.getFormValidate()))return!1;let n=s.getDataAll(!0,!0);for(const a in n)if("object"===typeof n[a]&&!Array.isArray(!n[a]))for(const t in n[a])Array.isArray(n[a][t])&&(n[t]=n[a][t]);let r=n[t]||{};delete r[e];let l=n[e]||[];if(i)for(const a of l)if(a[e][i]===r[i]){r.AFGHkeyIndexWJ=a[e].AFGHkeyIndexWJ;break}if(void 0===r.AFGHkeyIndexWJ)r.AFGHkeyIndexWJ=a.ZP.autoID(),l.push({[e]:a.ZP.cloneJson(r)}),n[e]=a.ZP.cloneJson(l);else{for(let t=0;t<l.length;t++){const i=l[t];if(Object.values(i)[0].AFGHkeyIndexWJ===r.AFGHkeyIndexWJ){l[t][e]=a.ZP.cloneJson(r);break}}n[e]=l}await s.putDataAll_andSet(n),void 0!==o&&s.hasOwnProperty("setStatusToForm_AndRunRule")&&s.setStatusToForm_AndRunRule(Number(o))},this.onClickButtonApply=async(t,e,i,o)=>{let s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(!s)return!1;let n=s.getDataAll(!0,!0);for(const a in n)if("object"===typeof n[a]&&!Array.isArray(!n[a]))for(const t in n[a])Array.isArray(n[a][t])&&(n[t]=n[a][t]);let r=n[t]||{};delete r[e];let l=n[e]||[];if(i)for(const a of l)if(a[e][i]===r[i]){r.AFGHkeyIndexWJ=a[e].AFGHkeyIndexWJ;break}if(void 0===r.AFGHkeyIndexWJ)r.AFGHkeyIndexWJ=a.ZP.autoID(),l.push({[e]:a.ZP.cloneJson(r)}),n[e]=a.ZP.cloneJson(l);else{for(let t=0;t<l.length;t++){const i=l[t];if(Object.values(i)[0].AFGHkeyIndexWJ===r.AFGHkeyIndexWJ){l[t][e]=a.ZP.cloneJson(r);break}}n[e]=l}await s.putDataAll_andSet(n),void 0!==o&&s.hasOwnProperty("setStatusToForm_AndRunRule")&&s.setStatusToForm_AndRunRule(Number(o))},this.onClickButtonApplyNotUpdateItem=async(t,e,i,o)=>{let s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(!s)return!1;let n=s.getDataAll(!0,!0);for(const a in n)if("object"===typeof n[a]&&!Array.isArray(!n[a]))for(const t in n[a])Array.isArray(n[a][t])&&(n[t]=n[a][t]);let r=n[t]||{};delete r[e];let l=n[e]||[],c=!1;if(i&&(void 0===r.AFGHkeyIndexWJ||""===r.AFGHkeyIndexWJ||null===r.AFGHkeyIndexWJ))for(const a of l)if(a[e][i]===r[i]){r.AFGHkeyIndexWJ=a[e].AFGHkeyIndexWJ,c=!0;break}if(void 0===r.AFGHkeyIndexWJ)r.AFGHkeyIndexWJ=a.ZP.autoID(),l.push({[e]:a.ZP.cloneJson(r)}),n[e]=a.ZP.cloneJson(l);else{if(!c)for(let t=0;t<l.length;t++){const i=l[t];if(Object.values(i)[0].AFGHkeyIndexWJ===r.AFGHkeyIndexWJ){l[t][e]=a.ZP.cloneJson(r);break}}n[e]=l,n[t].AFGHkeyIndexWJ=void 0}await s.putDataAll_andSet(n),void 0!==o&&s.hasOwnProperty("setStatusToForm_AndRunRule")&&s.setStatusToForm_AndRunRule(Number(o))},this.callRuleInOtherFormChild=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on_change";if(t.context.infoA_parent){let s=a.ZP.getFormAppAuto(t.context.infoA_parent.key_form);if(s){let n=s.callDirFromSupport("getKeyForm",{list_component:e,list_view:"",inform:"true",checkError:"false"},{}),r=a.ZP.getFormAppAuto(n[e]);if(!r)return!1;r.runRuleFunction({code:i},{},t.context.infoA_parent,o)}}},this.onClickButtonRemove=t=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let i=e.getDataAll("");for(const t in i)if("object"===typeof i[t]&&!Array.isArray(!i[t]))for(const e in i[t])Array.isArray(i[t][e])&&(i[e]=i[t][e]);i[t]=i[t].filter((t=>Object.values(t)[0].AFGHkeyIndexWJ!==Object.values(this.context.data)[0].AFGHkeyIndexWJ)),e.putDataAll_andSet(i)}},this.onClickButtonModify=t=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let i=e.getDataAll("");for(const t in i)if("object"===typeof i[t]&&!Array.isArray(!i[t]))for(const e in i[t])Array.isArray(i[t][e])&&(i[e]=i[t][e]);let o=Object.values(this.context.data)[0];i[t]=o,e.putDataAll_andSet(i)}}}compareJson(t,e){for(const i in t)if(void 0!==t[i]&&String(t[i])!==String(e[i]))return!1;return!0}}const mt=gt;class vt extends r.Z{constructor(){super(...arguments),this.call=()=>{}}}const bt=vt;class yt extends r.Z{constructor(){super(...arguments),this.addMsgSystem=()=>{void 0!==this.input.listMsgSystem&&this.input.listMsgSystem.length>0&&void 0!==this.input.listMsgSystem[0].MsgSystem&&(0,a.zF)(!0,this.input.listMsgSystem[0].MsgSystem)}}}const At=yt;var Dt=i(7210),kt=i(1203);class Ot extends r.Z{constructor(){super(...arguments),this.windowPrint=(t,e)=>{var i=window.open("",a.ZP.autoID(),"height=650,width=1000");let o='\x3c!-- Button Event --\x3e<div class="event-button div-no-print"><div class="malibu-list-button-div"><div class="malibu-list-button">\n        <div style="display:none" class="voucher-button" id="print_mode" onclick="getColor(\'print_mode\');hiddenText()">Print mode</div>\n        <div style="display:none" class="voucher-button" id="view_mode" onclick="getColor(\'view_mode\');viewText()">View mode</div>\n        <div style="display:none" class="voucher-button" id="print" onclick="getColor(\'print\');print()">Print</div></div>\n       </div> <div class="voucher-guide-div"><div class="voucher-guide"><div style="padding-right:5px">Use</div> <span class="voucher-guide-button">Ctrl</span> <span class="voucher-guide-button">P</span> <div style="padding-left:5px;padding-right:5px">(or</div><span class="voucher-guide-button"><img src=\'@{iconCtrl_macOS}\' style="width:14px;height:14px"/></span> <span class="voucher-guide-button">P</span> <div style="padding-left:5px">for macOS)</div> <div style="padding-left:5px">to print voucher</div></div></div></div>';o=o.replace("@{iconCtrl_macOS}","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADrSURBVHgBnVKLDYJADD2MA7ABbAAj3Ca6gW4CbsAmsAE4ATgBblBf4ZU0GBNik5e7/l+bBhHJgVZWGYEy7ERtQM8Yjc2DSzLHDKQuKWVBcbFt2D5rUE09usRIW019aXDGfwAiHQXjLy4541vAVuHVUSbjb1SOyLztgXNo14bOO/XIv9AXbX6lGpIkeePpHL0Bto5FbdzJbCqn8KecjSqHtkWUrpMtLCOjYWHI5cxyXEbNSfSDKjnwYHWt2gAv6wRcdQfAE7hpVzuAnpQr6tF4yvcBtKr4k2sdlf3J2SjbvarDH3kvv498dA3yDwrUrlg4T/oiAAAAAElFTkSuQmCC");return i&&i.document&&(i.document.write("<html><head><style>"),i.document.write(t+"body{margin:unset !important}.voucher-button:hover{background:#F0F0F0;border:1.5px solid#E3E4E5;}.voucher-button.button-active:hover{background:#06429B;border:1px solid transparent;}.voucher-button.button-active{background:#0052CC;color:#FFFFFF;border:1px solid transparent;}.voucher-button{padding:10px;background:#FFFFFF;margin-left:8px;color:#0052CC;border:1.5px solid#E3E4E5;border-radius:3px;width:fit-content;cursor:pointer;opacity:0.96;font-family:Arial,Helvetica,sans-serif;}.malibu-list-button{display:flex;margin-left:auto;margin-right:0px;width:fit-content;}.voucher-guide-div{width:21cm;margin:5px auto;background:#F3F9FF;border-radius:3px;display:flex;align-items:center;height:42px;}.voucher-guide{padding:0px 16px;font-weight:500;font-size:14px;line-height:16px;color:#494F59;display:flex;align-items:center;}.voucher-guide{padding:0px 16px;font-weight:500;font-size:14px;line-height:16px;color:#494F59;display:flex;align-items:center;}.voucher-guide-button{height:26px;left:0px;top:0px;background:#1283DA;border-radius:3px;font-weight:500;font-size:14px;line-height:16px;color:#FFFFFF;display:flex;align-items:center;padding:0px 8px;margin:0px 2px;}.malibu-list-button-div{width:21cm;margin:0px auto;}.event-button{width:calc(100%);background:unset!important;z-index:100}.voucher{padding-top:50px!important}.page-A1,.page-A11,.page-A15,.page-A2,.page-A201,.page-A202,.page-A203,.page-A203,.page-A204,.page-A205,.page-A3,.page-A7,.page-A8{border-radius:3px;box-shadow:0px 0px 10px rgba(0,0,0,0.25);}@media print{.event-button{display:none}.div-no-print{display:none}.voucher{padding-top:unset!important}}"),i.document.write("</style></head><body>"),i.document.write(o),i.document.write('<div id="voucher" class="voucher">'),i.document.write(e),i.document.write("</div>"),i.document.write("<script>"),i.document.write('getColor(\'print_mode\');function getColor(id){var x=document.getElementsByClassName("voucher-button");for(i=0;i<x.length;i++){x[i].classList.remove("button-active")};document.getElementById(id).classList.add("button-active")};function print(){var style_=document.styleSheets[0].cssRules;var str="";for(var i=0;i<style_.length;i++){if(str.indexOf(style_[i].cssText)==-1){str+=style_[i].cssText;}};str=str.replace("body { width: 600px; }","");str=str.replace(".embrace { margin-bottom: 15px; float: left; font-size: 13px; box-shadow: grey 3px 3px 5px; max-height: 842px; max-width: 595px; }","");var contents=document.getElementById("voucher").innerHTML;var frame1=document.createElement(\'iframe\');frame1.name="frame1";frame1.style.position="absolute";frame1.style.top="-1000000px";document.body.appendChild(frame1);var frameDoc=frame1.contentWindow?frame1.contentWindow:frame1.contentDocument.document?frame1.contentDocument.document:frame1.contentDocument;frameDoc.document.open();frameDoc.document.write(\'<html><head><style type="text/css">\');frameDoc.document.write(str);frameDoc.document.write(".div-no-print{opacity: 0}");frameDoc.document.write(\'</style></head><body>\');frameDoc.document.write(contents);frameDoc.document.write(\'</body></html>\');frameDoc.document.close();setTimeout(function(){window.frames["frame1"].focus();window.frames["frame1"].print();document.body.removeChild(frame1);},200);return false;};function viewText(){var height=document.getElementsByClassName("div-no-print");for(var i=0;i<height.length;i++){height[i].style.opacity=null;}};function hiddenText(){var height=document.getElementsByClassName("div-no-print");for(var i=0;i<height.length;i++){height[i].style.opacity=0;}};var beforePrint=function(){console.log(\'Functionality to run before printing.\');};var afterPrint=function(){console.log(\'Functionality to run after printing\');};window.onload=function(){if(window.matchMedia){var mediaQueryList=window.matchMedia(\'print\');mediaQueryList.addListener(function(mql){if(mql.matches){beforePrint();}else{afterPrint();}});};};window.onbeforeprint=beforePrint;window.onafterprint=afterPrint;'),i.document.write("<\/script>"),i.document.write("</body></html>"),i.document.close(),i.focus()),!0},this.printTemplate=()=>{let t=this.context.ob_data||{},e=a.ZP.getFormAppAuto(this.context.infoA.key_form),{template_code:i,template_condition:o}=this.input,s={};if(!0===this.input.is_get_new&&e.hasOwnProperty("getDataAll")&&(s=e.getDataAll(),t=Object.assign(t,s)),!1!==this.input.is_get&&(s=e.getData(),t=Object.assign(t,s)),!0===this.input.is_get_table&&e.hasOwnProperty("getDataAll"))for(const n in s)if("object"===typeof s[n]&&!Array.isArray(!s[n]))for(const e in s[n]){const i=s[n][e];Array.isArray(i)&&(t[e]=a.ZP.cloneJson(i),s[e]=a.ZP.cloneJson(i))}if(this.input.queries&&this.input.queries.split(";").forEach((e=>{if(e){var i;let o=(null===(i=a.ZP.getDataLimited(e,0,9999999))||void 0===i?void 0:i.data)||[];if(o.length>0){let e=Object.keys(o[0])[0];t[e]=o}}})),i=a.ZP.convertCondition(i,t),o=a.ZP.convertCondition(o,t),"A5"===i||"A5F"===i){let e=t[this.context.infoA.form_code].frline,i=t.dataset;if(e&&parseInt(e)>0){e=parseInt(e);for(let t=1;t<e;t++)i.unshift({dataset:{balance:" ",credit:" ",debit:" "}})}let o=t[this.context.infoA.form_code].pbline;o=!o||parseInt(o)<=0?22:parseInt(o);let a=t[this.context.infoA.form_code].pgprint;a=!a||parseInt(a)<=0?1:parseInt(a),t.dataset=i.slice(o*(a-1),o*a);let s=t[this.context.infoA.form_code].pgbtfrom;if(s&&parseInt(s)>0){s=parseInt(s);let e=[],i=[];t.dataset_top=[],t.dataset_bottom=[],e=t.dataset.slice(0,s-1),i=t.dataset.slice(s-1,t.dataset.length);for(const o of e)t.dataset_top.push({dataset_top:o.dataset});for(const o of i)t.dataset_bottom.push({dataset_bottom:o.dataset})}}this.context.ob_data=t,a.ZP.isDebug()&&(console.log("===================DEBUG TEMPLATE====================="),console.log("data template: ",a.ZP.cloneJson(t)),console.log("template_code: ",i),console.log("condition: ",o),console.log("-------------------DEBUG TEMPLATE--------------------"));return kt.Qf(i,(t=>{this.context.ob_data=Object.assign(this.context.ob_data,t);let e=[],o="",s="",n="",r=i.split(";");for(let i of r){let t=a.ZP.template_getFromStore(i);void 0!==t&&e.push(t)}for(let i of e)void 0!==i.code&&(n=this.getTemplate(i),o+=n.voucher,s+=n.style);return this.windowPrint(s,o)}),this.input,s),!0},this.printTemplateNCBS=()=>{let t=this.context.ob_data||{},e=a.ZP.getFormAppAuto(this.context.infoA.key_form),{template_code:i,template_condition:o}=this.input,s={};if(!0===this.input.is_get_new&&e.hasOwnProperty("getDataAll")&&(s=e.getDataAll(),t=Object.assign(t,s)),!1!==this.input.is_get&&(s=e.getData(),t=Object.assign(t,s)),!0===this.input.is_get_table&&e.hasOwnProperty("getDataAll"))for(const r in s)if("object"===typeof s[r]&&!Array.isArray(!s[r]))for(const e in s[r]){const i=s[r][e];Array.isArray(i)&&(t[e]=a.ZP.cloneJson(i),s[e]=a.ZP.cloneJson(i))}this.input.queries&&this.input.queries.split(";").forEach((e=>{if(e){var i;let o=(null===(i=a.ZP.getDataLimited(e,0,9999999))||void 0===i?void 0:i.data)||[];if(o.length>0){let e=Object.keys(o[0])[0];t[e]=o}}})),i=a.ZP.convertCondition(i,t),o=a.ZP.convertCondition(o,t);let n=t[this.context.infoA.form_code].deposit_sub_type;if("A4"===i)switch(n){case"S1":case"S4":case"S5":case"S6":i="A4SA";break;case"S3":i="A4SB";break;case"S2":i="A4SC";break;case"T1":case"T2":case"T3":case"T4":case"T5":case"T6":i="A4T"}else if("A5"===i)switch(n){case"S3":case"S4":case"S5":case"S6":i="A5SA";break;case"S2":i="A5SB";break;case"S1":i="A5SC";break;case"T1":case"T2":case"T3":case"T4":case"T5":case"T6":i="A5T"}this.context.ob_data=t,a.ZP.isDebug()&&(console.log("===================DEBUG TEMPLATE====================="),console.log("data template: ",a.ZP.cloneJson(t)),console.log("template_code: ",i),console.log("condition: ",o),console.log("-------------------DEBUG TEMPLATE--------------------"));return kt.MK(i,(t=>{kt.xd((i+"&999").split(","),t)}),this.input,s),!0},this.printMultiTemplate=()=>{let t=this.context.ob_data||{},e=a.ZP.getFormAppAuto(this.context.infoA.key_form),{template_code:i,template_condition:o}=this.input,s={};if(!0===this.input.is_get_new&&e.hasOwnProperty("getDataAll")&&(s=e.getDataAll(),t=Object.assign(t,s)),!1!==this.input.is_get&&(s=e.getData(),t=Object.assign(t,s)),!0===this.input.is_get_table&&e.hasOwnProperty("getDataAll"))for(const r in s)if("object"===typeof s[r]&&!Array.isArray(!s[r]))for(const e in s[r]){const i=s[r][e];Array.isArray(i)&&(t[e]=a.ZP.cloneJson(i),s[e]=a.ZP.cloneJson(i))}if(this.input.queries&&this.input.queries.split(";").forEach((e=>{if(e){var i;let o=(null===(i=a.ZP.getDataLimited(e,0,9999999))||void 0===i?void 0:i.data)||[];if(o.length>0){let e=Object.keys(o[0])[0];t[e]=o}}})),i=a.ZP.convertCondition(i,t),o=a.ZP.convertCondition(o,t),"A5"===i||"A5F"===i){let e=t[this.context.infoA.form_code].frline,i=t.dataset;if(e&&parseInt(e)>0){e=parseInt(e);for(let t=1;t<e;t++)i.unshift({dataset:{balance:" ",credit:" ",debit:" "}})}let o=t[this.context.infoA.form_code].pbline;o=!o||parseInt(o)<=0?22:parseInt(o);let a=t[this.context.infoA.form_code].pgprint;a=!a||parseInt(a)<=0?1:parseInt(a),t.dataset=i.slice(o*(a-1),o*a);let s=t[this.context.infoA.form_code].pgbtfrom;if(s&&parseInt(s)>0){s=parseInt(s);let e=[],i=[];t.dataset_top=[],t.dataset_bottom=[],e=t.dataset.slice(0,s-1),i=t.dataset.slice(s-1,t.dataset.length);for(const o of e)t.dataset_top.push({dataset_top:o.dataset});for(const o of i)t.dataset_bottom.push({dataset_bottom:o.dataset})}}this.context.ob_data=t,a.ZP.isDebug()&&(console.log("===================DEBUG TEMPLATE====================="),console.log("data template: ",a.ZP.cloneJson(t)),console.log("template_code: ",i),console.log("condition: ",o),console.log("-------------------DEBUG TEMPLATE--------------------"));let n=i.split(";");for(let r of n){const t=t=>{this.context.ob_data=Object.assign(this.context.ob_data,t);let e=[],i="",o="",s="",n=a.ZP.template_getFromStore(r);void 0!==n&&e.push(n);for(let a of e)void 0!==a.code&&(s=this.getTemplate(a),i+=s.voucher,o+=s.style);return this.windowPrint(o,i)};kt.Qf(r,t,this.input,s)}return!0},this.printVoucher=()=>{let t="",e="",i="",o=this.context,a=o.node_print.split(",").filter((t=>-1!==t.indexOf("A7"))),s=!1;for(let n=0;n<o.templates.length;n++){const r=o.templates[n];if(s=!0,void 0!==r.code)if(0!==a.length)for(let s of a)if(-1!==s.indexOf(r.code)){let a=o.ob_data.vouchers[n].tags.transaction_body.from_serial,s=o.ob_data.vouchers[n].tags.transaction_body.to_serial,l=1,c=0,d=0;void 0!==a&&void 0!==s&&(c=parseInt(a.replace(/[^0-9]+/,"")),d=parseInt(s.replace(/[^0-9]+/,"")),l=d-c+1);let h=c,u=a.replace(/[^0-9]+/,""),p="";for(let _=0;_<l;_++)p=u.substring(0,u.length-h.toString().length)+h,i=this.getTemplate(r,p,o.ob_data.vouchers[n].tags),t+=i.voucher,e+=i.style,h++;this.windowPrint(e,t)}else i=this.getTemplate(r,o.ob_data.vouchers[n].tags.transaction_body.to_serial,o.ob_data.vouchers[n].tags),this.windowPrint(i.style,i.voucher);else{o.ob_data.vouchers[n].code===r.code&&(i=this.getTemplate(r,void 0,o.ob_data.vouchers[n].tags),this.windowPrint(i.style,i.voucher))}}return s||this.windowPrint(e,t),!0},this.printReport=t=>{let e="",i="",o="",s=a.ZP.getFormAppAuto(this.context.infoA.key_form),n=[];this.context.data.list_template_code.forEach((t=>{let e=a.ZP.template_getFromStore(t);void 0!==e&&n.push(e)})),void 0!==s&&s.hasOwnProperty("getDataAll")&&(this.context.ob_data=s.getDataAll(),this.context.templates=n),t.split(";").forEach((t=>{var e;let i=(null===(e=a.ZP.getDataLimited(t,0,9999999))||void 0===e?void 0:e.data)||[];if(i.length>0){let t=Object.keys(i[0])[0];this.context.ob_data[t]=i}}));let r=this.context;for(let a of r.templates)void 0!==a.code&&(o=this.getTemplate(a),e+=o.voucher,i+=o.style);return this.windowPrint(i,e),!0},this.getTemplate=(t,e,i)=>{a.ZP.isDebug()&&console.log("Data voucher",i);let o="",s="",n=void 0!==e?t.html_code.replace(/sys-auto-sernum/g,e):t.html_code,r=t.status;if(void 0!==r&&("A"===r||""===r||null===r)&&void 0!==n){let e=(new DOMParser).parseFromString(n,"text/html");for(let t of e.all[2].sheet.cssRules)-1===s.indexOf(t.cssText)&&(s+=t.cssText);if(-1===n.indexOf("jwebui_list_data")){o=this.setDataByParam(e.body.innerHTML,i,t.code)}else{let a=e.body.getElementsByClassName("jwebui_list_data"),s=e.body.innerHTML,n=[];for(let t=0;t<a.length;t++){let e=a[t].getAttribute("jwebui-list-data"),i=a[t].getAttribute("jwebui-data");n.push({param:"jwebui_list_data_"+t,template:a[t].outerHTML,list_data:e,data:i})}for(let t=0;t<a.length;t++)s=s.replace(a[t].outerHTML,"jwebui_list_data_"+t);if(n.length>0)for(let e=0;e<n.length;e++)if("true"===n[e].list_data){let o=this.renderDataList(n[e].template,n[e].data,i,t.code);s=s.replace(n[e].param,o)}else s=s.replace(n[e].param,"");s=this.setDataByParam(s,i,t.code),o=s}}return{voucher:o,style:s}},this.setDataByParam=(t,e,i)=>{var o=new Dt.Z;let s=t,n=a.ZP.component_getListCode(t);o.environmentVariables(this.context.ob_data),o.environmentVariableVoucher(e,i);for(let a of n){let t=this.getValueByParam(a.code,e);if(void 0!==t&&null!==t&&"null"!==t&&"undefined"!==t||(t=""),void 0!==t)if("string"===typeof t)s=s.replace(a.key,t.replace(/[\u00A0-\u9999<>\\&]/g,(function(t){return"&#"+t.charCodeAt(0)+";"})));else{let t="<div></div>";s=s.replace(a.key,t)}}let r=(new DOMParser).parseFromString(s,"text/html"),l=r.body.getElementsByClassName("jwebui-data-format");for(let c of l)if(c.hasAttribute("jwebui-function")&&o.hasOwnProperty(c.getAttribute("jwebui-function"))){let t=c.attributes,e={};for(let i=0;i<t.length;){let o=t[i];-1!==o.name.indexOf("jwebui")&&"jwebui-function"!==o.name?(e=a.ZP.copyJsonObject(e,JSON.parse(JSON.stringify({[o.name.substr(7)]:o.value}))),c.removeAttribute(o.name)):i++}c.innerHTML=o[c.getAttribute("jwebui-function")](e,c.innerText.trim()),"checkRender"===c.getAttribute("jwebui-function")&&""!==c.innerHTML&&c.classList.add(e.class),c.removeAttribute("jwebui-function")}return r.body.outerHTML},this.getValueByParam=(t,e)=>{if("sys-branch"===t)return a.ZP.context_get("user_acc.branch_name");if(void 0!==e&&0!==e.length){if(-1===t.indexOf("."))return void 0!==e[t]?0!==e[t].length?e[t]:"":{code:t};{let i=t.split(".");if(void 0!==e[i[0]]&&void 0!==e[i[0]][i[1]]){let t=""+e[i[0]][i[1]];return 0!==t.length?t:""}return{code:t}}}},this.renderDataList=(t,e,i,o)=>{var s=new Dt.Z;s.environmentVariables(this.context.ob_data),s.environmentDataList(i),s.environmentVariableVoucher(i,o);let n=a.ZP.getNodeJson(i,e);if(0===e.length||void 0===n){return"<div></div>"}let r=n,l=t,c=(new DOMParser).parseFromString(l,"text/html").body.getElementsByClassName("jwebui_list_data");for(let b of c)if(b.hasAttribute("jwebui-function")&&s.hasOwnProperty(b.getAttribute("jwebui-function"))){let t=b.attributes,e={};for(let o=0;o<t.length;){let i=t[o];-1!==i.name.indexOf("jwebui")&&"jwebui-function"!==i.name?(e=a.ZP.copyJsonObject(e,JSON.parse(JSON.stringify({[i.name.substr(7)]:i.value}))),b.removeAttribute(i.name)):o++}let i=b.innerText.trim();r=s[b.getAttribute("jwebui-function")](e,i)}let d="",h=e.split("."),u=h[h.length-1],p=a.ZP.component_getListCode(t);for(let b=0;b<r.length;b++){let e=t;for(let t of p){var _,f,g;let i=null===(_=r)||void 0===_||null===(f=_[b])||void 0===f||null===(g=f[u])||void 0===g?void 0:g[t.code];var m,v;if(void 0===i||null===i)i=null===(m=r)||void 0===m||null===(v=m[b])||void 0===v?void 0:v[t.code];if(void 0!==i&&null!==i||(i=""),void 0===i){let i="<div></div>";e=e.replace(t.key,i)}else e=e.replace(t.key,""!==i&&null!==i&&void 0!==i?i.toString().replace(/[\u00A0-\u9999<>\\&]/g,(function(t){return"&#"+t.charCodeAt(0)+";"})):"")}let i=(new DOMParser).parseFromString(e,"text/html"),o=i.body.getElementsByClassName("jwebui_list_data");for(let t of o)if(t.hasAttribute("jwebui-function")&&s.hasOwnProperty(t.getAttribute("jwebui-function"))){let e=t.attributes,i={};for(let s=0;s<e.length;){let o=e[s];-1!==o.name.indexOf("jwebui")&&"jwebui-function"!==o.name?(i=a.ZP.copyJsonObject(i,JSON.parse(JSON.stringify({[o.name.substr(7)]:o.value}))),t.removeAttribute(o.name)):s++}let o=t.innerText.trim();s[t.getAttribute("jwebui-function")](i,o),t.removeAttribute("jwebui-function")}d+=i.body.getElementsByClassName("jwebui_list_data")[0].outerHTML}return d}}}const wt=Ot;class Ct extends r.Z{constructor(){super(...arguments),this.gotoSearch=()=>{a.ZP.callDirFromSupport("globalSearch","openSearch");const t=new Date;var e={class_:"success",icon:"fa fa-search",title:a.ZP.getLang("systemTitle"),time:t.getTime()+"",description:a.ZP.getLang("systemStartSearch"),data:{},action:{}};a.ZP.pushNotify("notifyToast",e,{}),a.ZP.callAllScreenListen()},this.gotoOpenForm=t=>{let e=new Date,i={class_:"error",icon:"fa fa-check",title:a.ZP.getLang("systemNotHaveRole"),time:e.getTime()+"",description:a.ZP.getLang("systemNotHaveRole"),data:{},action:{}};a.ZP.checkHasRoleForm(t)&&(d.ZP.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:t}}],this.input),i={class_:"warning",icon:"fa fa-folder-open",title:a.ZP.getLang("systemTitle"),time:e.getTime()+"",description:a.ZP.getLang("systemStartOpenForm"),data:{},action:{}}),a.ZP.pushNotify("notifyToast",i,{}),a.ZP.callAllScreenListen()},this.gotoDebug=()=>{let t=!a.ZP.isDebug(),e="",i="";t?(e="langKeyboardDebugOpen",i="success",(0,a.bp)({open_chat:!0,mode_chat:"debug"})):(e="langKeyboardDebugClose",i="warning",(0,a.bp)({open_chat:!1,mode_chat:"debug"}));const o=new Date;var s={class_:i,icon:"fa fa-check",title:a.ZP.getLang("systemTitle"),time:o.getTime()+"",description:a.ZP.getLang(e),data:{},action:{}};a.ZP.pushNotify("notifyToast",s,{}),a.ZP.callAllScreenListen(),a.ZP.setDebug(t),a.ZP.changeForDebug(t)},this.gotoAssistantCMD=()=>{console.log("=========gotoAssistant============")},this.gotoAssistantVoice=()=>{console.log("=========gotoAssistant============")},this.openFormKeyboardConfig=()=>(a.ZP.setModalOpenKeyboardConfig(),!0),this.openFormKeyboard=()=>(a.ZP.setModalOpenKeyboard(),!0)}}const xt=Ct;class St extends r.Z{constructor(){var t;super(...arguments),t=this,this.openLatestTransaction=()=>{let t,e="fof_transaction_journal";if(void 0!==this.input[e]){let i=a.ZP.cloneJson(this.input[e][e]),o=void 0!==i.transaction_code?i.transaction_code:i.workflowid,s="FO_"+o;";CSH_CSH;DPT_CSH;ACT_CSH;CSH_ACT;DPT_ACT;ACT_ACT;CSH_DPT;ACT_DPT;DPT_DPT;".includes(";"+o+";")?(s="BO_013003",t="BO_013003"):";ACT_MAN;".includes(";"+o+";")?(s="act_internal_transaction",t="BO_012003"):";CSH_CFX;".includes(";"+o+";")&&(s="BO_013004",t="BO_013004");let n=i;if(void 0!==n.transaction_body){for(const t in n.transaction_body)void 0===n[t]&&(n[t]=n.transaction_body[t]);delete n.transaction_body}let r={[s]:n};if(Array.isArray(r[s].fee_data)){let t=[];for(const e in r[s].fee_data){const i=r[s].fee_data[e];i.ifc_base_amount=i.ifc_amount+i.round_amount,i.currency_code=i.currency_fee_code,t.push({fee_data:i})}r.fee_data=t}if(Array.isArray(r[s].list_account_linkage)){let t=[];for(const e in r[s].list_account_linkage){const i=r[s].list_account_linkage[e];t.push({list_account_linkage:i})}r.list_account_linkage=t}if(Array.isArray(r[s].gl_info)){let t=[];for(const e in r[s].gl_info){const i=r[s].gl_info[e];t.push({gl_info:i})}r.gl_info=t}if(Array.isArray(r[s].posting_data)&&"act_internal_transaction"===s){let t=[];for(const e in r[s].posting_data){const i=r[s].posting_data[e];t.push({table_child:i})}r.form={},r.form.table_child=t}if(Array.isArray(r[s].items)&&"BO_013004"===s){let t=[];for(const e in r[s].items){const i=r[s].items[e];t.push({items:i})}r.items=t}if(Array.isArray(r[s].cash_denom_list)){let t=[];for(const e in r[s].cash_denom_list){const i=r[s].cash_denom_list[e];t.push({cash_denom_list:i})}r.cash_denom_list=t}return t&&"BO_013003"===t&&(r.O9_F2_ACT_ACT=r[s]),(0,l.QS)({form_code:t||s},{},{},{},r),!0}},this.calculatorTableExchangeList=(t,e,i,o)=>{if(void 0!==t&&void 0!==i){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);let n;if(void 0!==s&&s.hasOwnProperty("callDirFromSupport")){if(s.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true",checkError:"true"},{}),3===i.split(";").length){n=s.getDataAdvanced("");let i=0,a=0;for(let o=0;o<n[t].length;o++){let s=n[t][o][e];s.sheet?(s.amount=s.face_value*s.sheet,i+=s.amount,a+=s.exchange_amount):(s.sheet=0,s.amount=0,s.exchange_amount=0)}return s.putDataAll_andSetComponent(n,t),s.callDirFromSupport("setAdvanced",{list_component:o},i),!0}return!1}}},this.viewFormF8=t=>{let e;if(void 0!==this.input[t]){let i=a.ZP.cloneJson(this.input[t][t]),o=void 0!==i.transaction_code?i.transaction_code:i.workflowid,s="FO_"+o;";CSH_CSH;DPT_CSH;ACT_CSH;CSH_ACT;DPT_ACT;ACT_ACT;CSH_DPT;ACT_DPT;DPT_DPT;".includes(";"+o+";")?(s="BO_013003",e="BO_013003"):";ACT_MAN;".includes(";"+o+";")?(s="act_internal_transaction",e="BO_012003"):";CSH_CFX;".includes(";"+o+";")&&(s="BO_013004",e="BO_013004");let n=i;if(void 0!==n.transaction_body){for(const t in n.transaction_body)void 0===n[t]&&(n[t]=n.transaction_body[t]);delete n.transaction_body}let r={[s]:n};if(Array.isArray(r[s].fee_data)){let t=[];for(const e in r[s].fee_data){const i=r[s].fee_data[e];i.ifc_base_amount=i.ifc_amount+i.round_amount,i.currency_code=i.currency_fee_code,t.push({fee_data:i})}r.fee_data=t}if(Array.isArray(r[s].list_account_linkage)){let t=[];for(const e in r[s].list_account_linkage){const i=r[s].list_account_linkage[e];i.ifc_base_amount=i.ifc_amount+i.round_amount,i.value_typect="Percentage",t.push({list_account_linkage:i})}r.list_account_linkage=t}if(Array.isArray(r[s].gl_info)){let t=[];for(const e in r[s].gl_info){const i=r[s].gl_info[e];t.push({gl_info:i})}r.gl_info=t}if(Array.isArray(r[s].items)&&"BO_013004"===s){let t=[];for(const e in r[s].items){const i=r[s].items[e];t.push({items:i})}r.items=t}if(Array.isArray(r[s].posting_data)&&"act_internal_transaction"===s){let t=[];for(const e in r[s].posting_data){const i=r[s].posting_data[e];t.push({table_child:i})}r.form={},r.form.table_child=t}if(Array.isArray(r[s].cash_denom_list)){let t=[];for(const e in r[s].cash_denom_list){const i=r[s].cash_denom_list[e];t.push({cash_denom_list:i})}r.cash_denom_list=t}return e&&"BO_013003"===e&&(r.O9_F2_ACT_ACT=r[s]),r.form_status="open_from_form_other",r[s].form_status="open_from_form_other",(0,l.QS)({form_code:e||s},{},{},{},r),!0}},this.setAmountCSH_CFX=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let e=t.getDataAll("").items||[],i=0,o=0;for(let t=0;t<e.length;t++){const a=e[t].items;i+=a.amount,o+=a.exchange_amount}a.ZP.getFormAppAuto(this.context.infoA_parent.key_form).callDirFromSupport("setGetInfo",{list_component:"total_amount;total_exchange_amount",list_view:"",inform:"true",checkError:!1},{total_amount:i,total_exchange_amount:o})}},this.reloadTableCSH_CFX=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let e=t.getDataAll("");e.BO_013004&&(e.BO_013004.items=[],e.BO_013004.total_amount=0,e.BO_013004.total_exchange_amount=0);const i=t.callDirFromSupport("getKeyForm",{list_component:"items",list_view:"",inform:"true",checkError:"false"},{});let o=a.ZP.getFormAppAuto(i.items);if(!o)return;let s=o.getDataAll("");delete(s.form||{}).items,s.items=[],o.putDataAll_andSet(s),t.putDataAll_andSet(e)}},this.act_internal_transaction_add=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t&&t.reload()},this.act_internal_transaction_apply=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){t.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true"},{});let e=t.getData("");const i=e.form;if(i.amount&&""!==i.account_number&&i.account_name&&("ADD"===i.actiontype||"MODIFY"===i.actiontype)){let o=("D"===i.type?i.amount:0).toFixed(2),s=("C"===i.type?i.amount:0).toFixed(2),n={table_child:{posting_side:i.type,gl_account_number:i.account_number,currency:i.currency,debit_amount:o,credit_amount:s,account_name:i.account_name,cost_center:i.cost_center,product_code:i.product_code,inter_company:i.inter_company}};if(void 0===i.AFGHkeyIndexWJ)e.form.table_child.push(a.ZP.cloneJson(n)),e.form.AFGHkeyIndexWJ=void 0;else for(const t in e.form.table_child){if(e.form.table_child[t].table_child.AFGHkeyIndexWJ===i.AFGHkeyIndexWJ){e.form.table_child[t]=n,e.form.AFGHkeyIndexWJ=void 0;break}}t.putDataAll_andSet(e)}}},this.act_internal_transaction_modify=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){t.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true"},{});let e=t.getData(""),i=a.ZP.cloneJson(this.context.data.table_child);e.form.type=i.posting_side,e.form.account_number=i.gl_account_number,e.form.currency=i.currency,e.form.amount="D"===i.posting_side?i.debit_amount:i.credit_amount,e.form.account_name=i.account_name,e.form.AFGHkeyIndexWJ=i.AFGHkeyIndexWJ,e.form.actiontype="MODIFY",e.form.cost_center=i.cost_center,e.form.product_code=i.product_code,e.form.inter_company=i.inter_company,t.putDataAll_andSet(e),t.callDirFromSupport("setCMD",{list_component:"combobox;Account number;Amount;cost_center;product_code;inter_company;btn_apply",list_view:""},{disabled:"false"})}},this.printVoucher=()=>{let t="false",e=this.input.fof_transaction_journal.fof_transaction_journal;null!==this.input.is_reversed&&(t=this.input.is_reversed);let i=this.getValueByParam("vouchers.@index.code");0!==e.length&&void 0!==i&&""!==i&&(0,kt.xd)(i.split(","),e.ref_id,t)},this.getValueByParam=t=>{let e=this.input.fof_transaction_journal.fof_transaction_journal;if(void 0!==e&&0!==e.length){if(-1===t.indexOf("."))return void 0!==e[t]&&0!==e[t].length?e[t]:"";{let i=t.split("."),o="";if(void 0!==e[i[0]]){for(let t=0;t<e[i[0]].length;t++){const a=e[i[0]][t];if(a[i[2]]){let t=a[i[2]]+"&"+a.order;o+=""===o?t:","+t}}return 0!==o.length?o:""}return""}}},this.acceptF2O9=(t,e,i)=>{var o="true";if(void 0!==i&&(o=i),void 0!==t&&void 0!==e){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&(s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!0),s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate"))){if(!s.getFormValidate()){s.callDirFromSupport("get",{list_component:t,list_view:e,inform:"true",checkError:o},{}),s.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(s.getData(""))),a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),this.input.learn_api="";let i=this.input_action[this.context.infoA.form_code].debit_accounting_type,n=this.input_action[this.context.infoA.form_code].credit_accounting_type;return this.input.learn_api=`O9_F2_${i}_${n}`,setTimeout((()=>{if(void 0!==s&&null!==s&&s.hasOwnProperty("getLoadingAction")){let t=!1;t=s.getLoadingAction(),t&&setTimeout((()=>{s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1)}),500)}}),6e4),!0}s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1),s.hasOwnProperty("clearTimeOut")&&s.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.clearCtrlF2=()=>{a.ZP.removeForm("BO_013003"),d.ZP.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:"BO_013003"}}],{})},this.resetPassUserProfile=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t&&t.callDirFromSupport("setAdvanced",{list_component:"isResetPassword"},!0)},this.uncheckLeaderCTM=()=>{var t,e,i,o;if(null!==(t=this.context.data)&&void 0!==t&&null!==(e=t.data_cpn)&&void 0!==e&&null!==(i=e.ctm_customer_group_account_of_group)&&void 0!==i&&i.isleader||"all_left"===(null===(o=this.context.componentConfigDefault)||void 0===o?void 0:o.code)){var s,n;const t=null===(s=this.context)||void 0===s||null===(n=s.infoA_parent)||void 0===n?void 0:n.key_form;var r=a.ZP.getFormAppAuto(t);if(!r)return;r.callDirFromSupport("setAdvanced",{list_component:"group_leader_1"},"")}},this.CTM_GRP_003002_rebuildTable=function(){var e,i;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"customer_group_member_infomation",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ctm_customer_group_account_of_group";const n=null===(e=t.context)||void 0===e||null===(i=e.infoA)||void 0===i?void 0:i.key_form;const r=a.ZP.getFormAppAuto(n).getDataAdvanced().group_leader_1;var l=a.ZP.getFormAppAuto(o);if(l){let t=l.getDataAll(),e=(null===t||void 0===t?void 0:t[s])||[];for(let i of e)i[s].isleader=i[s].customercd===r;l.putDataAll_andSet(t)}},this.checkLeaderCTM=function(){var e,i,o,s,n,r;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"group_leader_1",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ctm_customer_group_account_of_group",d=null===(e=t.context)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.data_cpn,h=null===d||void 0===d||null===(o=d.rown_data)||void 0===o||null===(s=o[c])||void 0===s?void 0:s.customercd;const u=null===(n=t.context)||void 0===n||null===(r=n.infoA_parent)||void 0===r?void 0:r.key_form;var p=a.ZP.getFormAppAuto(u);p&&p.callDirFromSupport("setAdvanced",{list_component:l},h)},this.openAprove=t=>{let e,i=this.context.infoA_parent;if(i&&i.key_form){let t=a.ZP.getFormAppAuto(i.key_form);t.hasOwnProperty("getFormValidate")&&(t.getFormValidate()||(t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")&&(e=a.ZP.analyticsTable(t.getData("")))))}var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){if(o.hasOwnProperty("callDirFromSupport")&&(o.callDirFromSupport("checkValidate",{},{}),o.hasOwnProperty("getFormValidate")&&!o.getFormValidate())){o.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,o.hasOwnProperty("getData")&&(this.context.data=a.ZP.analyticsTable(o.getData("")),e&&(this.context.data=Object.assign(e,this.context.data)));var s=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(t,s)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.modalAppoveLater=()=>{let t=a.ZP.cloneJson(a.ZP.modalDynamicFromFromCode_getRoleBack()),e=a.ZP.getFormAppAuto(t.context.infoA.key_form),i={};return void 0!==e&&(e.hasOwnProperty("callDirFromSupport")&&(e.setFormValidateFromFunctionClient(!1),e.clearError(),i=e.getDataAll()),void 0!==e&&e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!0),setTimeout((()=>{if(void 0!==e&&null!==e&&e.hasOwnProperty("getLoadingAction")){let t=!1;t=e.getLoadingAction(),t&&setTimeout((()=>{e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1)}),500)}}),6e4)),void 0!==t&&void 0!==t.context&&(this.input=t.context.input,this.context.infoA=t.context.infoA,this.input_action=Object.assign(i,t.context.input),this.input_action.user_approve={},this.input_action.user_approve.username=-1),a.ZP.modalDynamicFromFromCode_close(),!0},this.modalAppoveApprove=()=>{},this.CRD_ACC_006002_Payment_schedule_apply=(t,e,i)=>{if(void 0,t&&e){let i=e.split(".");const n=i[i.length-1];var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){var s;o.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true"},{});let i=o.getData(""),r=a.ZP.cloneJson(i[t])||{};a.ZP.deleteNodeJson(r,(null===(s=e.split("."))||void 0===s?void 0:s[1])||e);let l=a.ZP.getNodeJson(i,e)||[];if(void 0===r.AFGHkeyIndexWJ)r.AFGHkeyIndexWJ=a.ZP.autoID(),l.push({[n]:a.ZP.cloneJson(r)}),i=a.ZP.setNodeJson(i,e,l),o.putDataAll_andSet(i),o.reload();else{for(let t=0;t<l.length;t++){const e=l[t];let i=e;1===Object.keys(i).length&&"object"===typeof Object.values(i)[0]&&(i=Object.values(e)[0]),i.AFGHkeyIndexWJ===r.AFGHkeyIndexWJ&&(r.moddt=a.ZP.context_get("user_acc.workingdate"),l[t]={[n]:a.ZP.cloneJson(r)})}o.putDataAll_andSet(i),o.reload()}return!0}a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.modalReject_007021=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError(),t.callDirFromSupport("checkValidate",{},{}),!t.getFormValidate())){var e;const i=t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{});let o=a.ZP.context_get("user_acc.loginname");if((null===o||void 0===o?void 0:o.trim())===(null===(e=i.username)||void 0===e?void 0:e.trim()))return a.ZP.persist_setFormError(this.context.infoA.key_form,!0,a.ZP.getLang("007021_reject_invalid_account")),!1;let s=t.getDataAll();return this.input_action=s,!0}return!1},this.BO_015004001_GetLastCalendarDate=()=>{var t,e;let i=a.ZP.getDataLimited("select * from O9_GET_LIST_CALENDAR_YEAR",0,99999).data;if(null===i||void 0===i||!i.length)return;let o=Number(null===(t=i[i.length-1])||void 0===t||null===(e=t.O9_GET_LIST_CALENDAR_YEAR)||void 0===e?void 0:e.cdid),s=new Date(`12/31/${o}`).getTime();a.ZP.getFormAppAuto(this.context.infoA.key_form).callDirFromSupport("setAdvanced",{list_component:"last_date",list_view:"",inform:"true",checkError:"false"},s)},this.BO_015004001_GetLastCalendarDate_ncbs=()=>{var t,e;let i=a.ZP.getDataLimited("select * from O9_GET_LIST_CALENDAR_YEAR",0,99999).data;if(null===i||void 0===i||!i.length)return;let o=Number(null===(t=i[i.length-1])||void 0===t||null===(e=t.O9_GET_LIST_CALENDAR_YEAR)||void 0===e?void 0:e.caption),s=new Date(`12/31/${o}`).getTime();a.ZP.getFormAppAuto(this.context.infoA.key_form).callDirFromSupport("setAdvanced",{list_component:"last_date",list_view:"",inform:"true",checkError:"false"},s)},this.BO_015004001_selectYear=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);let e=t.callDirFromSupport("getAdvanced",{list_component:"select_year",list_view:"",inform:"true",checkError:"false"},{}),i=new Date(`1/1/${e.select_year}`).getTime();t.callDirFromSupport("goToDate",{list_component:"9ec128b2b6b14969",list_view:"",inform:"true",checkError:"false"},i)},this.checkCaution=(t,e)=>{var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);let o=i.callDirFromSupport("getAdvanced",{list_component:t,list_view:"",inform:"true",checkError:"false"},{});i.callDirFromSupport("setCMD",{list_component:e,list_view:"",inform:"true",checkError:"false"},{disabled:o[t]?"false":"true"})}}compareJson(t,e){for(const i in t)if(void 0!==t[i]&&String(t[i])!==String(e[i]))return!1;return!0}}const Mt=St;class Pt extends r.Z{constructor(){super(...arguments),this.loadData=()=>{let t=a.ZP.getFormAppAuto(this.context.infoA.key_form),e={};t&&(e=t.getDataAll(!0),a.ZP.isDebug()&&console.log("data_form calendar",a.ZP.cloneJson(e))),this.input_action=Object.assign(this.input,e),a.ZP.isDebug()&&console.log("input action calendar",a.ZP.cloneJson(this.input_action))},this.setData=()=>{if(void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&t.callDirFromSupport("set",{list_component:"*",inform:"true",checkError:!1},this.input)}},this.addEventToCalender=()=>{if(void 0!==this.input.calender&&void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&t.callDirFromSupport("set",{list_component:"*",inform:"true",checkError:!1},this.input.calender)}},this.removeEvent=()=>(this.input_action=this.input,!0)}}const Tt=Pt;class It extends r.Z{constructor(){super(...arguments),this.loadData=()=>{this.input_action=this.input},this.setData=()=>{if(void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&t.callDirFromSupport("set",{list_component:"*",inform:"true",checkError:!1},this.input)}}}}const Ft=It;class Nt extends r.Z{constructor(){super(...arguments),this.openForm=t=>"systemStop",this.testFee=(t,e)=>{if(void 0!==this.context.data&&void 0!==this.context.data.ruleFunction&&void 0!==this.context.data.ruleFunction.component_result&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==i&&i.hasOwnProperty("callDirFromSupport")&&i.callDirFromSupport("set",{},{table1:{recvalue:t}})}},this.goiFuntion1111=(t,e)=>{if(void 0!==this.context.data&&void 0!==this.context.data.ruleFunction&&void 0!==this.context.data.ruleFunction.component_result&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==i&&i.hasOwnProperty("callDirFromSupport")&&i.callDirFromSupport("set",{},{table1:{recvalue:t}})}}}}const Lt=Nt;var Et={pcsamt:2010,other_currency:"KHR",currency_code:"KHR",currency_fee_code:"KHR",listFeeInfo:[],listIFC:[],tempIFC:null,rules:{CCL_FEE:Qt(),GET_FEE:zt()}};let jt={totalfee:0,totalcsh:0,totaldpt:0,totalact:0,totalint:0,totalprn:0,totalper:0,totalflat:0,totalsamt:0,totalramt:0,ttsfper:0};class Zt extends r.Z{constructor(){var t;super(...arguments),t=this,this.autoFeeGetDataForm=()=>{let t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(!t)return!1;let e=t.getDataAll("")[this.context.infoA.form_code];if(e){const i=t.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let o=a.ZP.getFormAppAuto(i.form_fee);if(!o)return!1;let s=o.getDataAll(""),n=JSON.parse(s.data_fee.data_fee),r=JSON.parse(n.list_AUTO_FEE)||[];if(1===r.length){let t=r[0];if(t.value){let i="MMK",o=0,a="",s=t.txcode;if(t.value.includes("|")){let s=t.value.split("|");void 0!==s[0]&&null!==s[0]&&(o=e[s[0]]),void 0!==s[1]&&null!==s[1]&&(i=e[s[1]]),void 0!==s[2]&&null!==s[2]&&(a=e[s[2]]||"")}else o=e[t.value];return this.input_action={AUTO_FEE:{transaction_code:s,balance:o,currency_code:i,region:a}},!0}}else a.ZP.isDebug()&&console.log("getDataAutoFee ===> list auto_fee rulefunc is not equal to 1",r.length)}return!1},this.isRunCCLFee=()=>{let t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(t){if(t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true"},{}).ref_id)return!1}let e=this.context.infoA.form_code;if(e){let t=a.ZP.getFormAppAuto(e);if(t){if(t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true"},{}).ref_id)return!1}}return!0},this.autoFeeCalFee=()=>{let t=this.input.O9_AUTOFEE_POST_GET_IFC_INFO||[],e=a.ZP.getFormAppAuto(this.context.infoA.key_form),i=this.context.infoA.form_code,o=e.getDataAll("");if(e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true"},{}).ref_id)return;o.key_form=i;const s=e.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let n=a.ZP.getFormAppAuto(s.form_fee);if(!n)return!1;let r=n.getDataAll(""),l=JSON.parse(r.data_fee.data_fee),c=JSON.parse(l.list_CCL_FEE)||[],d=[];for(let p of t){var h,u;p.pay_source=(null===(h=r.form_child)||void 0===h?void 0:h.pay_source)||"CSH",p.value_typect=null===(u=r.form_child)||void 0===u?void 0:u.value_typect,p.currency_code=p.currency_fee_code,p.rule_ccl=l.list_CCL_FEE,p.ifc_code=p.ifc_code.toString(),p.AFGHkeyIndexWJ=a.ZP.autoID(),c.forEach((t=>{p.pay_source.toLowerCase()===t.relf.split(";")[0]&&(p.rule_ccl_0=o[i][t.relf.split(";")[2]],p.rule_ccl_1=p.currency_fee_code||p.currency_code)})),d.push({fee_data:p})}return o[i].fee_data=d,this.input_action=a.ZP.analyticsTable(o),!0},this.convertData=t=>{var e;let i=a.ZP.getFormAppAuto(this.context.infoA.key_form),o=this.context.infoA.form_code,s=i.getDataAll("");s.key_form=o;let n=(null===(e=s[o])||void 0===e?void 0:e.fee_data)||[];for(let a=0;a<n.length;a++){const t=n[a].fee_data;if(t.currency_code&&(t.currency_fee_code=t.currency_code),t.rule_ccl){const e=JSON.parse(t.rule_ccl);for(let i=0;i<e.length;i++){const r=e[i];t.pay_source.toLowerCase()===r.relf.split(";")[0]&&(n[a].fee_data.currency_account_code=s[o][r.relf.split(";")[2]],n[a].fee_data.rule_ccl_0=s[o][r.relf.split(";")[2]],n[a].fee_data.rule_ccl_1=t.currency_fee_code)}}}return this.input_action=a.ZP.analyticsTable(s),!0},this.refreshAllFee=async()=>{var t;let e=a.ZP.getFormAppAuto(this.context.infoA.key_form),i=this.input.data||{};i.fee_data=(null===(t=i[this.context.infoA.form_code])||void 0===t?void 0:t.fee_data)||[],await e.putDataAll_andSet(i);const o=e.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let s=a.ZP.getFormAppAuto(o.form_fee);s&&s.callDirFromSupport("runFO",{list_component:"btn_add",list_view:"",inform:"true",checkError:"false"},{action:[{function:"own_O9_fee.FeeCCL",status:"A",para:[]}]})},this.setData=(t,e,i)=>new Promise((o=>{t.putDataAll_andSetComponent(e,i),o(!0)})),this.feeCaculatorDataConvert=async()=>{var t;if(!this.isRunCCLFee())return;let e=a.ZP.getFormAppAuto(this.context.infoA.key_form),i=this.input.data||{};i.fee_data=(null===(t=i[this.context.infoA.form_code])||void 0===t?void 0:t.fee_data)||[],await this.setData(e,i,"form_fee;form_fee(table_fee)").then((()=>{var t;let i=e.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{}),o=a.ZP.getFormAppAuto(i.form_fee);if(!o)return;let s=null===(t=this.context.componentConfigDefault)||void 0===t?void 0:t.code;o.callDirFromSupport("runFO",{list_component:"btn_add",list_view:"",inform:"true",checkError:"false"},{action:[{function:"own_O9_fee.FeeCCL",status:"A",para:[s]}]})}))},this.FeeAdd=(t,e)=>{if(t){let i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){let o=i.getData("");if(e)for(const i in o[t])-1===e.indexOf(i)&&(o[t][i]=void 0);else o[t]={};i.putDataAll_andSet(o,!0),i.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{})}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.FeeApply=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form_child",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fee_data",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ifc_code";const s=t.context.infoA.key_form;let n=a.ZP.getFormAppAuto(s);if(!n)return!1;n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!0);let r=n.getDataAll(""),l=n.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true"},{}),c=r[e]||{};delete c[i];let d=r[i]||[];if(null===l||void 0===l||!l.ifc_code||null===l||void 0===l||!l.ifc_name)return null!==l&&void 0!==l&&l.ifc_code||a.ZP.persist_setFormError(s,!1,"[Interest/fee/charge code] not exist","Fee"),void(n&&n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1));if(o)for(const t of d)if(t[i][o]===c[o]){c.AFGHkeyIndexWJ=t[i].AFGHkeyIndexWJ;break}if(c.rule_ccl=JSON.parse(r.data_fee.data_fee).list_CCL_FEE,void 0===c.AFGHkeyIndexWJ)c.AFGHkeyIndexWJ=a.ZP.autoID(),d.push({[i]:a.ZP.cloneJson(c)}),r[i]=a.ZP.cloneJson(d);else{for(let t=0;t<d.length;t++){const e=d[t];if(Object.values(e)[0].AFGHkeyIndexWJ===c.AFGHkeyIndexWJ){d[t][i]=a.ZP.cloneJson(c);break}}r[i]=d}const h=t.context.infoA_parent.form_code;let u=a.ZP.getFormAppAuto(t.context.infoA_parent.key_form).getDataAll("")||{};u[h]||(u[h]={}),u[h].fee_data=r.fee_data,u.key_form=h;let p=u[h].fee_data;for(let t=0;t<p.length;t++){const e=p[t].fee_data;e.currency_code&&(e.currency_fee_code=e.currency_code);const i=JSON.parse(e.rule_ccl);for(let o=0;o<i.length;o++){const a=i[o];e.pay_source.toLowerCase()===a.relf.split(";")[0]&&(p[t].fee_data.rule_ccl_0=u[h][a.relf.split(";")[2]],p[t].fee_data.rule_ccl_1=e.currency_fee_code)}}return t.input_action=a.ZP.analyticsTable(u),setTimeout((()=>{if(void 0!==n&&null!==n&&n.hasOwnProperty("getLoadingAction")){let t=!1;t=n.getLoadingAction(),t&&setTimeout((()=>{n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1)}),500)}}),6e4),!0},this.convertPaySource=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"method",i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fee_data";const s=t.context.infoA.key_form;let n=a.ZP.getFormAppAuto(s);if(!n)return!1;let r=n.getDataAll(""),l=r[i]||{},c=l[e],d=l[o]||[];for(let t=0;t<d.length;t++)d[t][o].pay_source=c;return r[o]=d,n.putDataAll_andSet(r),!0},this.clearFee=function(){let e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fee_data";const o=t.context.infoA.key_form;let s=a.ZP.getFormAppAuto(o);if(!s)return!1;let n=s.getDataAll("");n[i]=[];let r=s.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{}),l=a.ZP.getFormAppAuto(r.form_fee);if(!l)return;let c=l.getDataAll(""),d=JSON.parse(c.data_fee.data_fee),h=JSON.parse(d.list_GET_FEE)||[];return h&&s&&h.forEach((t=>{n[e][t.relf]=0})),s.putDataAll_andSet(n),!0},this.FeeCCL_FO=async()=>{var t;let e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0===this.input.data&&(this.input.data={}),await e.putDataAll_andSet({fee_data:null===(t=this.input.data[this.context.infoA_parent.form_code])||void 0===t?void 0:t.fee_data}),void 0!==e&&null!==e&&e.hasOwnProperty("getLoadingAction")){let t=!1;t=e.getLoadingAction(),t&&setTimeout((()=>{e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1)}),500)}this.FeeCCL()},this.FeeRemove=t=>{let e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let i=e.getData("");i[t]=i[t].filter((t=>Object.values(t)[0].AFGHkeyIndexWJ!==Object.values(this.context.data)[0].AFGHkeyIndexWJ)),e.putDataAll_andSet(i),this.FeeCCL()}},this.FeeModify=t=>{let e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let i=e.getData(""),o=Object.values(this.context.data)[0];i[t]=o,e.putDataAll_andSet(i)}},this.FeeCCL=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=a.ZP.getFormAppAuto(t.context.infoA.key_form);if(!i)return!1;let o=i.getDataForm(""),s=[];if(Array.isArray(o.fee_data))for(const t of o.fee_data)s.push(t.fee_data);let n=a.ZP.getFormAppAuto(t.context.infoA_parent.key_form).callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}),r=JSON.parse(o.data_fee.data_fee);Et={listFeeInfo:[],listIFC:s,tempIFC:null,rules:{CCL_FEE:JSON.parse(r.list_CCL_FEE)||[],GET_FEE:JSON.parse(r.list_GET_FEE)||[]},totalFee:{}};for(const t in n)"object"!==typeof n[t]&&(Et[t]=n[t]);let l=zt(e),c=a.ZP.cloneJson(o[t.context.infoA_parent.key_form]);c||(c=a.ZP.cloneJson(o));for(const t in n)"object"!==typeof n[t]&&n[t]&&(c[t]=n[t]);let d=Qt(e);d.length>0&&(d.forEach((e=>{t.CCL_FEE(e)})),function(){let t=Et.listIFC;jt={totalfee:0,totalcsh:0,totaldpt:0,totalact:0,totalint:0,totalprn:0,totalper:0,totalflat:0,totalsamt:0,totalramt:0,ttsfper:0},t&&(t.forEach((t=>{switch(t.pay_source){case"CSH":jt.totalcsh+=t.ifc_base_amount;break;case"DPT":jt.totaldpt+=t.ifc_base_amount;break;case"ACT":jt.totalact+=t.ifc_base_amount;break;case"INT":jt.totalint+=t.ifc_base_amount;break;case"PRN":jt.totalprn+=t.ifc_base_amount;break;default:console.log("Error=======")}switch(t.value_type){case"P":jt.totalper+=t.ifc_base_amount;break;case"F":jt.totalflat+=t.ifc_base_amount;break;default:console.log("Error=======")}1===t.share_fee&&(jt.totalsamt+=t.share_amount,jt.totalramt+=t.round_amount,"P"===t.value_type&&(jt.ttsfper+=t.share_amount))})),jt.totalfee=jt.totalact+jt.totalcsh+jt.totaldpt+jt.totalint+jt.totalprn)}()),l.length>0&&t.GET_FEE(c);let h=[];for(const t of Et.listIFC)h.push({fee_data:a.ZP.cloneJson(t)});o.fee_data=h,o.FEE=jt,i.putDataAll_andSet(o)},this.FeeCCLFromParent=()=>{var t;let e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(!e)return;const i=e.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let o=a.ZP.getFormAppAuto(i.form_fee);if(!o)return;const s=null===(t=this.context.componentConfigDefault)||void 0===t?void 0:t.code;o.callDirFromSupport("runFO",{list_component:"btn_add",list_view:"",inform:"true",checkError:"false"},{action:[{function:"own_O9_fee.FeeCCL",status:"A",para:[s]}]})},this.CCL_FEE=t=>{!t||t.actcdt&&!a.ZP.persist_checkCondition(t.actcdt,this.context.infoA.key_form,this.context.infoA_parent.key_form)||(function(t){let e,i,o=!1;if(t.relf){let a=t.relf.toLowerCase().split(";");if(3===a.length){let s=a[0],n=a[1],r=a[2],l=Et.listFeeInfo;for(let t=0;t<l.length;t++)if(l[t].pay_source===s){e=l[t],o=!0;break}o||(e={damt:0,dccrcd:"",pay_source:""},l.push(e)),e.pay_source=s,t.value&&(i=Bt(t.value)),i?e.damt=i:Et[n]&&(e.damt=Et[n]),Et[a[2]]&&(e.dccrcd=Et[r])}}}(t),function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=Et.listIFC;if(e&&e.length>0){let{pval:i,famt:o}=t?function(){let t=0,e=0,i=Et.listIFC;return i.forEach((e=>{switch(e.value_type){case"P":t+=e.ifc_value;break;case"F":t+=e.ifc_base_amount;break;default:console.log("Error=======")}})),{pval:t,famt:e}}():{pval:0,famt:0};e.forEach((e=>{let a=!1;Et.listFeeInfo.forEach((s=>{if(!a){switch(e.value_type){case"P":e.iscal=!(!e.pay_source||!s.pay_source||e.pay_source.toUpperCase()!==s.pay_source.toUpperCase()),e.damt=function(t,e,i,o,a){let s;s=t.iscal?i?e.damt-o>0?(e.damt-o)/(1+a/100):0:e.damt:0;return s}(e,s,t,o,i);break;case"F":e.iscal=!!s.pay_source,e.damt=e.ifc_value;break;default:console.log("Error=======")}a=e.iscal,e.dccrcd=e.iscal?s.dccrcd:"",e.dbrate=e.iscal?Yt(e):0,e.ccrrate=e.iscal?Ht(e):0,e.ibrate=e.iscal?Yt(e):0,e.currency_account_code=s.dccrcd,e.currency_code&&(e.currency_fee_code=e.currency_code),e.equivalent_amount=function(t){let e,i=0;if(0!==t.damt&&t.value_type)switch(t.value_type.toUpperCase()){case"P":i=Math.abs(t.damt)*Math.abs(t.ifc_value)/100,i*=t.ccrrate,e=i>0?t.ceiling_value>0&&i>Math.abs(t.ceiling_value)?Math.abs(t.ceiling_value):t.floor_value>0&&i<Math.abs(t.floor_value)?Math.abs(t.floor_value):i:0;break;case"F":e=t.damt;break;default:console.log("Error=======")}else e=0;return e}(e),e.ifc_base_amount=function(t){let e=0;if(0!==t.dbrate)if(0!==t.ccrrate&&(e=t.equivalent_amount/t.ccrrate),t.rounding_rule)switch(t.rounding_rule){case"U":e=function(t,e){let i=Math.pow(10,e);return Math.ceil(t*i)/i}(e,t.rounding_num);break;case"D":e=Ut(e,t.rounding_num);break;case"T":i=e,o=t.rounding_num,e=Ut(Ut(i,o+1),o);break;default:e=e.toFixed(t.rounding_num)}else e=e.toFixed(t.rounding_num);else e=0;var i,o;return Number.parseFloat(e)}(e),e.ifc_amount=function(t){let e=0,i=0;1===t.share_fee?(t.share_rate>=0&&(e=t.ifc_base_amount*t.share_rate/100),i=t.ifc_base_amount-e):(e=0,i=0);return t.ifc_base_amount-i}(e),e.fee_amount=e.ifc_amount}}))})),function(){let t,e=Et.listIFC;e.forEach((e=>{e.ifccond&&!a.ZP.persist_checkCondition(e.ifccond,this.context.infoA.key_form,this.context.infoA_parent.key_form)||e.valbas&&(e.iscal=!1,e.damt=0,t=Bt(e.valbas),t&&(e.iscal=!0,e.damt=t,e.dccrcd=e.currency_account_code,e.dbrate=Yt(e),e.ccrrate=Ht(e),e.ibrate=Yt(e)))}))}()}}(false))},this.autoClearFee=t=>{if(t){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let i=e.callDirFromSupport("getAdvanced",{list_component:t,isGetOOP:!1},{});for(const t in i)if(Object.hasOwnProperty.call(i,t)){"object"!==typeof i[t]?i[t]=0:i[t].fee_data=[]}e.callDirFromSupport("setAdvanced",{list_component:t},i),e.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{})}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1}}showTotalFee(){let t=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);t&&jt&&t.callDirFromSupport("setAdvanced",{list_component:"totalcsh;totaldpt;totalact;totalint;totalprn"},jt)}GET_FEE(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,i=Et.rules.GET_FEE,o=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);i&&o&&i.forEach((i=>{var s;if(i.relf&&(!i.actcdt||a.ZP.persist_checkCondition(i.actcdt,this.context.infoA.key_form,null===(s=this.context.infoA_parent)||void 0===s?void 0:s.key_form))){switch(i.value){case"TOTALFEE":e=jt.totalfee;break;case"TOTALCSH":e=jt.totalcsh;break;case"TOTALDPT":e=jt.totaldpt;break;case"TOTALACT":e=jt.totalact;break;case"TOTALINT":e=jt.totalint;break;case"TOTALPRN":e=jt.totalprn;break;case"TOTALFLAT":e=jt.totalflat;break;case"TOTALSAMT":e=jt.totalsamt;break;case"TOTALRAMT":e=jt.totalramt;break;case"TTSFPER":e=jt.ttsfper;break;default:Et[i.relf]=e,t[i.relf]=e,i.value&&(e=Bt(i.value,t))}o.callDirFromSupport("setAdvanced",{list_component:i.relf},e),t[i.relf]=e}}))}}const Rt=Zt;function Qt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var e,i;return""===t?(null===(e=Et)||void 0===e||null===(i=e.rules)||void 0===i?void 0:i.CCL_FEE)||[]:Et&&Et.rules&&Et.rules.CCL_FEE?Et.rules.CCL_FEE.filter((e=>{var i;return e.actf&&(null===(i=e.actf)||void 0===i?void 0:i.includes(t))})):[]}function zt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var e,i;return""===t?(null===(e=Et)||void 0===e||null===(i=e.rules)||void 0===i?void 0:i.GET_FEE)||[]:Et&&Et.rules&&Et.rules.GET_FEE?Et.rules.GET_FEE.filter((e=>{var i;return null===(i=e.actf)||void 0===i?void 0:i.includes(t)})):[]}function Ut(t,e){let i=Math.pow(10,e);return Math.floor(t*i)/i}function Bt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){let i=a.ZP.component_getListCode(t);for(let o=0;o<i.length;o++){const a=i[o].code;let s=a;void 0!==e[a]&&(s=e[a]),t=isNaN(s)||""===s?t.repeat(i[o].key,s+""):t.replace(i[o].key,s+"")}return a.ZP.paramStringCaculator(t)}return null}function Yt(t){return t.baserate}function Ht(t){return t.crossrate}class Vt extends r.Z{constructor(){super(...arguments),this.runScheduleJob=t=>{void 0!==t&&p.runSchedule(t,this.context)},this.runExtendToken=()=>!0}}const Wt=Vt;class Gt extends r.Z{constructor(){var t;super(...arguments),t=this,this.getErrorMess=()=>{let t=a.ZP.modalDynamicFromFromCode_getRoleBack();var e=a.ZP.getFormAppAuto(this.context.infoA.key_form),i=a.ZP.getFormAppAuto(t.context.infoA.key_form);if(void 0!==e&&void 0!==i&&i.hasOwnProperty("getContext_FormOpenModal")){let t=i.getContext_FormOpenModal();if(e.hasOwnProperty("showErrorFromServer")){if(t.list_error[0]){let e=t.list_error[0].info;e.includes("]")&&(e=e.substring(e.indexOf("]")+1,e.length)),t.list_error[0].info=e}e.showErrorFromServer(t.list_error)}}},this.openAproveCondition=t=>{var e,i,o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){let t=o.getData("");t.user_approve&&delete t.user_approve}if(!0!==(null===(e=this.input)||void 0===e||null===(i=e.JWEBUI_O9_approve)||void 0===i?void 0:i.isOpen))return;let s,n=this.context.infoA_parent;if(n&&n.key_form){let t=a.ZP.getFormAppAuto(n.key_form);t.hasOwnProperty("getFormValidate")&&(t.getFormValidate()||(t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")&&(s=a.ZP.analyticsTable(t.getData("")))))}var r=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(t,r);if(void 0!==o){if(o.hasOwnProperty("callDirFromSupport")&&(o.callDirFromSupport("checkValidate",{},{}),o.hasOwnProperty("getFormValidate")&&!o.getFormValidate())){o.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,o.hasOwnProperty("getData")&&(this.context.data=a.ZP.analyticsTable(o.getData("")),s&&(this.context.data=Object.assign(s,this.context.data)));r=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(t,r)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.checkOpenModalWithConditionByTableItem=function(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){let s,n=t.context.infoA_parent;if(n&&n.key_form){let t=a.ZP.getFormAppAuto(n.key_form);t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")&&(s=a.ZP.analyticsTable(t.getData("")))}var i=a.ZP.getFormAppAuto(t.context.infoA.key_form);if(void 0!==i){let n=i.getData("");if(n.user_approve&&delete n.user_approve,i.hasOwnProperty("callDirFromSupport")){i.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.context.input=t.input,s&&(t.context.data=Object.assign(s,t.context.data)),t.input_action=Object.assign(t.context.input,t.context.data);var o=t.buildPackRollBack();a.ZP.modalDynamicFromFromCode(e,o)}}return"systemStop"}return!0},this.openAproveDelete=t=>{this.context.input=a.ZP.cloneJson(this.input);var e=this.buildPackRollBack();return a.ZP.modalDynamicFromFromCode(t,e),"systemStop"},this.openCopyModal=t=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);let i={};if(void 0!==e){let t=e.getData();for(const e in t)t.hasOwnProperty(e)&&(Number.isInteger(Number(e))||Array.isArray(t[e])||(i[e]=a.ZP.cloneJson(t[e])))}for(const a in i)i.hasOwnProperty(a)&&this.context.data.hasOwnProperty(a)&&(this.context.data[a]=Object.assign(i[a],this.context.data[a]));this.input_action=Object.assign(i,this.context.data),this.context.input=a.ZP.cloneJson(this.input);var o=this.buildPackRollBack();return a.ZP.modalDynamicFromFromCode(t,o),"systemStop"},this.closeModalDynamicRollback=t=>{a.ZP.modalDynamicFromClose_Rollback(t)},this.openAprove=t=>{let e,i=this.context.infoA_parent;if(i&&i.key_form){let t=a.ZP.getFormAppAuto(i.key_form);t.hasOwnProperty("getFormValidate")&&(t.getFormValidate()||(t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")&&(e=a.ZP.analyticsTable(t.getData("")))))}var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){if(o.hasOwnProperty("callDirFromSupport")&&(o.setFormValidateFromFunctionClient(!1),o.clearError(),o.callDirFromSupport("checkValidate",{},{}),o.hasOwnProperty("getFormValidate")&&!o.getFormValidate())){o.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,o.hasOwnProperty("getData")&&(this.context.data=a.ZP.analyticsTable(o.getData("")),e&&(this.context.data=Object.assign(e,this.context.data)));var s=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(t,s)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.openFormModal=(t,e)=>{let i,o=this.context.infoA_parent;if(o&&o.key_form){let t=a.ZP.getFormAppAuto(o.key_form);t.hasOwnProperty("getFormValidate")&&(t.getFormValidate()||(t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")&&(i=a.ZP.analyticsTable(t.getData("")))))}var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&(s.setFormValidateFromFunctionClient(!1),s.clearError(),s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&!s.getFormValidate())){s.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,s.hasOwnProperty("getData")&&(this.context.data=Object.assign(this.context.data,a.ZP.analyticsTable(s.getData(""))),this.input_action=this.context.data,i&&(this.context.data=Object.assign(i,this.context.data),this.input_action=Object.assign(i,this.context.data)));var n=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(t,n,e)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.openFormModalNotCheckValidate=(t,e)=>{let i,o=this.context.infoA_parent;if(o&&o.key_form){let t=a.ZP.getFormAppAuto(o.key_form);t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")&&(i=a.ZP.analyticsTable(t.getData("")))}var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")){s.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,s.hasOwnProperty("getData")&&(this.context.data=Object.assign(this.context.data,a.ZP.analyticsTable(s.getData(""))),this.input_action=this.context.data,i&&(this.context.data=Object.assign(i,this.context.data),this.input_action=Object.assign(i,this.context.data)));var n=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(t,n,e)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.openFormModalDynamicByComponentData=function(e){let i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,l=t.context.infoA_parent;if(l&&l.key_form){let t=a.ZP.getFormAppAuto(l.key_form);t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")&&(i=a.ZP.analyticsTable(t.getData("")))}var c=a.ZP.getFormAppAuto(t.context.infoA.key_form);if(void 0!==c){if(c.hasOwnProperty("callDirFromSupport")){c.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),t.context.input=t.input,c.hasOwnProperty("getData")&&(t.context.data=Object.assign(t.context.data,a.ZP.analyticsTable(c.getData(""))),t.input_action=t.context.data,i&&(t.context.data=Object.assign(i,t.context.data),t.input_action=Object.assign(i,t.context.data))),n||(n={}),t.input_action=Object.assign(t.input_action,n);let l="";if(o)l=a.ZP.getNodeJson(t.context.data,e);else{l=c.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{})[e]}let h=a.ZP.getNodeJson(t.input_action,r);if(h){let e={};e[l]=JSON.parse(h),t.input_action=Object.assign(t.input_action,e)}var d=t.buildPackRollBack();a.ZP.modalDynamicFromFromCode(l,d,s)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.openFormModalAndGetDataComponent=(t,e,i,o)=>{let s,n=this.context.infoA_parent;if(n&&n.key_form){let t=a.ZP.getFormAppAuto(n.key_form);t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")&&(s=a.ZP.analyticsTable(t.getData("")))}var r=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==r){if(r.hasOwnProperty("callDirFromSupport")){r.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,r.hasOwnProperty("getData")&&(this.context.data=Object.assign(this.context.data,a.ZP.analyticsTable(r.getData(""))),this.input_action=this.context.data,s&&(this.context.data=Object.assign(s,this.context.data),this.input_action=Object.assign(s,this.context.data))),i||(i={}),this.input_action=Object.assign(this.input_action,i);let o=r.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{}),n={};n[t]=JSON.parse(o[e]),this.input_action=Object.assign(this.input_action,n)}var l=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(t,l,o)}else a.ZP.AppException("#form.getData","form is undefined","system")},this.getDataAndSetComponentParent=(t,e)=>{if(e&&t){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){if(i.hasOwnProperty("callDirFromSupport")&&(i.callDirFromSupport("checkValidate",{},{}),i.hasOwnProperty("getFormValidate")&&!i.getFormValidate())){if(i.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true",checkError:!0},{}),!i.hasOwnProperty("getData"))return!1;{let s=i.getData("");var o=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);let n=a.ZP.getNodeJson(s,t);if("object"===typeof n&&(n=JSON.stringify(n)),void 0!==o)return o.callDirFromSupport("setAdvanced",{list_component:e},n),!0}}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.modelApproveOpen=t=>{let e,i=this.context.infoA_parent;if(i&&i.key_form){let t=a.ZP.getFormAppAuto(i.key_form);t.hasOwnProperty("getFormValidate")&&(t.getFormValidate()||(t.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")&&(e=a.ZP.analyticsTable(t.getData("")))))}var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){if(o.hasOwnProperty("callDirFromSupport")&&(o.callDirFromSupport("checkValidate",{},{}),o.hasOwnProperty("getFormValidate")&&!o.getFormValidate())){o.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,o.hasOwnProperty("getData")&&(this.context.data=a.ZP.analyticsTable(o.getData("")),e&&(this.context.data=Object.assign(e,this.context.data)));var s=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(t,s)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.modalApproveTable=()=>{let t=a.ZP.modalDynamicFromFromCode_getRoleBack();var e=a.ZP.getFormAppAuto(t.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&(e.setFormValidateFromFunctionClient(!1),e.clearError()),void 0!==t&&void 0!==t.context&&(this.input_action=Object.assign(t.context.data,t.context.input),this.input_action=Object.assign(this.input_action,a.ZP.cloneJson(this.input)),this.context.infoA=t.context.infoA,this.context.componentConfigDefault=t.context.componentConfigDefault,this.context.infoA_parent=t.context.infoA_parent);var i=a.ZP.getFormAppAuto(t.context.infoA.key_form);return void 0!==i&&i.hasOwnProperty("setLoadingAction")&&i.setLoadingAction(!0),setTimeout((()=>{if(void 0!==i&&null!==i&&i.hasOwnProperty("getLoadingAction")){let t=!1;t=i.getLoadingAction(),t&&setTimeout((()=>{i.hasOwnProperty("setLoadingAction")&&i.setLoadingAction(!1)}),500)}}),6e4),a.ZP.modalDynamicFromFromCode_close(),!0},this.closeModalAndGetData=()=>{let t=a.ZP.modalDynamicFromFromCode_getRoleBack();var e=a.ZP.getFormAppAuto(t.context.infoA.key_form);return void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&(e.setFormValidateFromFunctionClient(!1),e.clearError()),void 0!==t&&void 0!==t.context&&(this.input_action=Object.assign(t.context.data,t.context.input),this.input_action=Object.assign(this.input_action,a.ZP.cloneJson(this.input)),this.context.infoA=t.context.infoA,this.context.componentConfigDefault=t.context.componentConfigDefault,this.context.infoA_parent=t.context.infoA_parent,this.context.data=this.input_action),a.ZP.modalDynamicFromFromCode_close(),!0},this.modalCopyTable=()=>{let t=a.ZP.modalDynamicFromFromCode_getRoleBack();var e=a.ZP.getFormAppAuto(t.context.infoA.key_form);return void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&(e.setFormValidateFromFunctionClient(!1),e.clearError()),void 0!==t&&void 0!==t.context&&(this.input_action=Object.assign(t.input_action,t.context.data),this.input_action=Object.assign(this.input_action,t.context.input),this.input_action=Object.assign(this.input_action,a.ZP.cloneJson(this.input)),this.context.infoA=t.context.infoA,this.context.componentConfigDefault=t.context.componentConfigDefault,this.context.infoA_parent=t.context.infoA_parent),a.ZP.modalDynamicFromFromCode_close(),!0},this.modalAppoveApproveOke=()=>{let t=a.ZP.modalDynamicFromFromCode_getRoleBack();var e=a.ZP.getFormAppAuto(t.context.infoA.key_form);let i={};return void 0!==e&&(e.hasOwnProperty("callDirFromSupport")&&(e.setFormValidateFromFunctionClient(!1),e.clearError(),i=e.getDataAll()),e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!0)),void 0!==t&&void 0!==t.context&&(this.input_action=Object.assign(i,t.context.input),this.input_action=Object.assign(this.input_action,a.ZP.cloneJson(this.input)),this.context.infoA=t.context.infoA,this.context.componentConfigDefault=t.context.componentConfigDefault,this.context.infoA_parent=t.context.infoA_parent),a.ZP.modalDynamicFromFromCode_close(),setTimeout((()=>{if(void 0!==e&&null!==e&&e.hasOwnProperty("getLoadingAction")){let t=!1;t=e.getLoadingAction(),t&&setTimeout((()=>{e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1)}),500)}}),6e4),!0},this.modalAppoveApprove=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){if(t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!0),t.hasOwnProperty("callDirFromSupport")){if(t.setFormValidateFromFunctionClient(!1),t.clearError(),t.callDirFromSupport("checkValidate",{},{}),!t.getFormValidate()){let e=t.getDataAll();return this.input_action=e,!0}t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1)}else t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1);setTimeout((()=>{if(void 0!==t&&null!==t&&t.hasOwnProperty("getLoadingAction")){let e=!1;e=t.getLoadingAction(),e&&setTimeout((()=>{t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1)}),500)}}),6e4)}return!1},this.modalCopyOk=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError(),t.callDirFromSupport("checkValidate",{},{}),!t.getFormValidate())){let e=t.getDataAll();return this.input_action=e,!0}return!1},this.modalAppoveLater=()=>{let t=a.ZP.modalDynamicFromFromCode_getRoleBack();void 0!==t&&void 0!==t.context&&(this.input=t.context.input,this.context.infoA=t.context.infoA,this.input_action=Object.assign(t.context.data,t.context.input));var e=a.ZP.getFormAppAuto(t.context.infoA.key_form);return void 0!==e&&e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!0),setTimeout((()=>{if(void 0!==e&&null!==e&&e.hasOwnProperty("getLoadingAction")){let t=!1;t=e.getLoadingAction(),t&&setTimeout((()=>{e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1)}),500)}}),6e4),a.ZP.modalDynamicFromFromCode_close(),!0},this.openForm=t=>{this.context.data={test:"C\xf3 g\u1eedi data l\xean form n\xe8, gi\u1edd nh\u1ea5n g\u1eedi th\xf4i nha aaaaaaa"};var e=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(t,e)},this.actionForm=()=>{let t=a.ZP.modalDynamicFromFromCode_getRoleBack();void 0!==t&&void 0!==t.context&&t.context.data,a.ZP.modalDynamicFromFromCode_close()},this.closeForm=()=>{a.ZP.modalDynamicFromFromCode_close()},this.modalAppoveApprove_007021=()=>{const t=a.ZP.modalDynamicFromFromCode_getRoleBack().context.infoA.key_form;var e=a.ZP.getFormAppAuto(this.context.infoA.key_form),i=a.ZP.getFormAppAuto(t);if(void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&(e.setFormValidateFromFunctionClient(!1),e.clearError(),e.callDirFromSupport("checkValidate",{},{}),!e.getFormValidate())){const t=e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}),o=i.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}),s=o.iamt,n=o.raccno,r=t.input_amount;if(t.input_account!==n)return a.ZP.persist_setFormError(this.context.infoA.key_form,!0,a.ZP.getLang("007021_approve_invalid_account")),!1;if(r!==s)return a.ZP.persist_setFormError(this.context.infoA.key_form,!0,a.ZP.getLang("007021_approve_invalid_amount")),!1;let l=e.getDataAll();return this.input_action=l,!0}return!1}}}const Jt=Gt;var qt;class Kt extends r.Z{constructor(){super(...arguments),this.loadChartJs=()=>{qt=a.ZP.getFormAppAuto(this.context.infoA.key_form),void 0===window.google?a.ZP.loadJs("/app/gstatic/loader.js").then((t=>{window.google.charts.load("current",{packages:["corechart"]}),window.google.charts.setOnLoadCallback((()=>{this.drawChart(qt)}))}),(t=>{})):this.drawChart(qt)},this.drawChart=t=>{t.callDirFromSupport("drawChart",{list_component:"*",list_view:"code"},{})}}}const Xt=Kt;class $t extends r.Z{constructor(){super(...arguments),this.clear=()=>{a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo()}}}const te=$t;var ee=i(516);class ie extends r.Z{constructor(){var t;super(...arguments),t=this,this.setFileName=()=>{void 0!==this.input.file_name&&a.ZP.setResponseFile_fileName(this.input.file_name)},this.setFileNameAndData=async()=>{if(console.log("this.input==",this.input),void 0!==this.input.file_name&&a.ZP.setResponseFile_fileName(this.input.file_name),void 0!==this.input.media_data){const t=this.input.file_name.split(".").pop();console.log("this.fileExtension==",t),a.ZP.setResponseFile_fileData((0,ee.OP)(this.input.media_data,t))}},this.setFileData=()=>{if(console.log("setFileData==",this.input),a.ZP.getResponseFile()){let t=a.ZP.getResponseFile();console.log("rs_file==",t);const e=URL.createObjectURL(t.buffer_data),i=document.createElement("a");i.href=e,i.download=t.file_name,i.setAttribute("hidden",!0),document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(i),a.ZP.removeResponseFile()}},this.downloadFileInOtherTab=async t=>{let e=new O.Z,i="",o="",s="",n="";void 0!==this.context&&(void 0!==this.context.infoA&&(void 0!==this.context.infoA.title&&(o=this.context.infoA.title),void 0!==this.context.infoA.form_code&&(i=this.context.infoA.form_code)),void 0!==this.context.componentConfigDefault?(void 0!==this.context.componentConfigDefault.name&&(n=this.context.componentConfigDefault.name),void 0===this.context.componentConfigDefault.code&&void 0===this.context.componentConfigDefault.codeHidden||(s=this.context.componentConfigDefault.codeHidden)):void 0!==this.context.debug_info&&(void 0!==this.context.debug_info.from_action_code&&(s=this.context.debug_info.from_action_code),void 0!==this.context.debug_info.from_action_name&&(n=this.context.debug_info.from_action_name))),void 0!==this.context.infoA_parent&&void 0!==this.context.infoA_parent.form_code&&(i="",s="");let r="";r=void 0!==this.context.key_feedback?this.context.key_feedback:a.ZP.autoUui_key_feedback();let l=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:t,app:"ncbsCbs"},form_code:"",from_action_code:""}],c=this.context.data;if(this.context.infoA.key_form&&0===Object.keys(this.context.data).length&&this.context.data.constructor===Object){var d=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==d&&d.hasOwnProperty("callDirFromSupport")&&(d.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true",checkError:"false"},{}),d.hasOwnProperty("getData")&&(c=Object.assign(c,d.getData(""))))}l[0].input=Object.assign(l[0].input,c),e.setBo(l,r);let h=a.ZP.getOncePacked();0!==h?(h++,a.ZP.setOncePacked(h)):h=0,e.setMoreInfo({from_action_code:s,from_action_name:n,form_code:i,form_name:o,oncepacked:h,oncepacked_id:a.ZP.autoID()});let u={Accept:"*/*","Content-Type":"application/json-patch+json"};for(const a in e.getInfo())u[a]=e.getInfo()[a];let p=e.getForTxCode(i,s),_={method:"POST",body:JSON.stringify(p),headers:u},f=window.open("","_blank");f&&f.document&&(f.document.write('<html><head>     <link rel="icon" href="data:image/x-icon;base64,R0lGODlhEAAQAPEAAAAAAAkKCgAAAAAAACH5BAlkAAIAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAC55QkIiIiIoQQQgghhBBCCCEIgiAIgiAIgiAIgiAIgiAIgiAIQhAEgiAQCAQCgUAgEAgCgYBAIBAIBAKBQCAQCAKBgEAgEAgEAoFAIBAIAoGAQCAQCAQCgUAgEAgCgYBAICAgICAgICAgIBAQEBAQICAgICAgICAgICAgEBAQICAgICAgICAgICAgICAQICAgICAgICAgICAgICAgICAgICAgICAgICAQICAgICAgICAgECAgICAgEBAQEBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQIAAAQIKAAAh+QQJZAACACwAAAAAEAAQAAAC55QkIiIiIoQQQgghhBBCCCEIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAQCAQCgUAgEAgCgYBAIBAIBAKBQCAQCAKBgEAgEAgEAoFAIBAIAoGAQCAQCAQCgUAgEAgCgYBAICAgICAgICAgICAQEBAgICAgICAgICAgICAQEBAQECAgICAgICAgICAgIBAQECAgICAgICAgICAgICAgECAgICAgICAgICAQICAgICAgICAgECAgICAgEBAQEBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQIAAAQIKAAAh+QQJZAACACwAAAAAEAAQAAAC55QkIiIiIoQQQgghhBBCCCEIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAKBgEAgEAgEAoFAIBAIAoGAQCAQCAQCgUAgEAgCgYBAICAgICAgICAgICAQEBAgICAgICAgICAgICAgEBAQICAgICAgICAgICAgEBAQEBAgICAgICAgICAgICAQEBAgICAgICAgICAQICAgIBAgICAgECAgICAgEBAQEBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQIAAAQIKAAA7" type="image/x-icon"/> \n            <title>Downloading...</title>'),f.document.write("<style>.lds-spinner {\n                color: official;\n                display: inline-block;\n                position: relative;\n                width: 80px;\n                height: 80px;\n              }\n              .lds-spinner div {\n                transform-origin: 40px 40px;\n                animation: lds-spinner 1.2s linear infinite;\n              }\n              .lds-spinner div:after {\n                content: \" \";\n                display: block;\n                position: absolute;\n                top: 3px;\n                left: 37px;\n                width: 6px;\n                height: 18px;\n                border-radius: 20%;\n                background: blue;\n              }\n              .lds-spinner div:nth-child(1) {\n                transform: rotate(0deg);\n                animation-delay: -1.1s;\n              }\n              .lds-spinner div:nth-child(2) {\n                transform: rotate(30deg);\n                animation-delay: -1s;\n              }\n              .lds-spinner div:nth-child(3) {\n                transform: rotate(60deg);\n                animation-delay: -0.9s;\n              }\n              .lds-spinner div:nth-child(4) {\n                transform: rotate(90deg);\n                animation-delay: -0.8s;\n              }\n              .lds-spinner div:nth-child(5) {\n                transform: rotate(120deg);\n                animation-delay: -0.7s;\n              }\n              .lds-spinner div:nth-child(6) {\n                transform: rotate(150deg);\n                animation-delay: -0.6s;\n              }\n              .lds-spinner div:nth-child(7) {\n                transform: rotate(180deg);\n                animation-delay: -0.5s;\n              }\n              .lds-spinner div:nth-child(8) {\n                transform: rotate(210deg);\n                animation-delay: -0.4s;\n              }\n              .lds-spinner div:nth-child(9) {\n                transform: rotate(240deg);\n                animation-delay: -0.3s;\n              }\n              .lds-spinner div:nth-child(10) {\n                transform: rotate(270deg);\n                animation-delay: -0.2s;\n              }\n              .lds-spinner div:nth-child(11) {\n                transform: rotate(300deg);\n                animation-delay: -0.1s;\n              }\n              .lds-spinner div:nth-child(12) {\n                transform: rotate(330deg);\n                animation-delay: 0s;\n              }\n              @keyframes lds-spinner {\n                0% {\n                  opacity: 1;\n                }\n                100% {\n                  opacity: 0;\n                }\n              }\n              body{\n                display:flex;\n                align-items:center;\n                height: 100vh;\n                    width: 100vw;\n                    justify-content: center;\n                    margin: unset !important;\n                }\n                .browser {\n                    width: 400px;\n                    min-width: 200px;\n                    min-height: 264px;\n                    background: #fff;\n                    box-shadow: 0 40px 80px 0 rgba(0, 0, 0, 0.25);\n                    border-radius: 3px;\n                    animation: bobble 1.8s ease-in-out infinite;\n                    position: relative;\n                    left: 50%;\n                    margin-left: -200px;\n               }\n                .browser .controls {\n                    width: 100%;\n                    height: 32px;\n                    background: #e8ecef;\n                    border-radius: 3px 3px 0 0;\n                    box-sizing: border-box;\n                    padding: 10px 12px;\n               }\n                .browser .controls i {\n                    height: 12px;\n                    width: 12px;\n                    border-radius: 100%;\n                    display: block;\n                    float: left;\n                    background: #d6dce0;\n                    margin-right: 8px;\n               }\n                .eye {\n                    position: absolute;\n                    left: 34%;\n                    top: 80px;\n                    width: 32px;\n                    height: 32px;\n                    opacity: 1;\n               }\n                .eye + .eye {\n                    right: 34%;\n                    left: auto;\n               }\n                .eye:before, .eye:after {\n                    position: absolute;\n                    left: 15px;\n                    content: ' ';\n                    height: 40px;\n                    width: 3px;\n                    border-radius: 2px;\n                    background-color: #ff5e5b;\n               }\n                .eye:before {\n                    transform: rotate(45deg);\n               }\n                .eye:after {\n                    transform: rotate(-45deg);\n               }\n                .mouth {\n                    position: absolute;\n                    width: 250px;\n                    top: 178px;\n                    left: 50%;\n                    margin-left: -125px;\n                    height: 40px;\n               }\n                .mouth .lips {\n                    position: absolute;\n                    left: 15px;\n                    content: ' ';\n                    height: 40px;\n                    width: 3px;\n                    border-radius: 2px;\n                    background-color: #ff5e5b;\n                    transform: rotate(-54deg);\n               }\n                .mouth .lips:nth-child(odd) {\n                    transform: rotate(54deg);\n               }\n                .mouth .lips:nth-child(n+2) {\n                    margin-left: 31px;\n               }\n                .mouth .lips:nth-child(n+3) {\n                    margin-left: 62px;\n               }\n                .mouth .lips:nth-child(n+4) {\n                    margin-left: 93px;\n               }\n                .mouth .lips:nth-child(n+5) {\n                    margin-left: 124px;\n               }\n                .mouth .lips:nth-child(n+6) {\n                    margin-left: 155px;\n               }\n                .mouth .lips:nth-child(n+7) {\n                    margin-left: 186px;\n               }\n                .mouth .lips:nth-child(n+8) {\n                    margin-left: 217px;\n               }\n                .mouth .lips:nth-child(n+9) {\n                    margin-left: 248px;\n               }\n                @keyframes bobble {\n                    0%, 100% {\n                        margin-top: 40px;\n                        margin-bottom: 48px;\n                        box-shadow: 0 40px 80px rgba(0, 0, 0, 0.24);\n                   }\n                    50% {\n                        margin-top: 54px;\n                        margin-bottom: 34px;\n                        box-shadow: 0 24px 64px rgba(0, 0, 0, 0.40);\n                   }\n               }\n                @media only screen and (min-device-width: 320px) and (max-device-width: 480px) {\n                    .browser {\n                        width: 280px;\n                        margin-left: -140px;\n                   }\n                    .browser .eye {\n                        left: 30%;\n                   }\n                    .browser .eye + .eye {\n                        left: auto;\n                        right: 30%;\n                   }\n               }\n                 #error{\n                   display:none;\n                 }\n                 \n                h1 {\n                    font-size: 24px;\n                    line-height: 40px;\n                    margin: 0 auto 16px;\n                    padding: 0 20px;\n                    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n                    letter-spacing: 0.5px;\n                    font-weight: 600;\n                    max-width: 600px;\n                  text-align:center;\n               }\n              </style>"),f.document.write('</head><body onload="goToReportURL()"><div id="loading" class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div><div id="error">\n        <div class="browser">\n        <div class="controls">\n          <i></i>\n          <i></i>\n          <i></i>\n        </div>\n        \n        <div class="eye"></div>\n        <div class="eye"></div>\n        <div class="mouth">\n          <div class="lips"></div>\n          <div class="lips"></div>\n          <div class="lips"></div>\n          <div class="lips"></div>\n          <div class="lips"></div>\n          <div class="lips"></div>\n          <div class="lips"></div>\n          <div class="lips"></div>\n        </div>\n      </div>\n          <h1 id="error-title">Error</h1>\n          </div>'),f.document.write(`<script>\n            function goToReportURL(){ \n                alert("Your download will take place here!"+"\\n"+\t"Click 'OK' to start your download progress!"); \n                fetch('${e.info.u}/Post' , ${JSON.stringify(_)}).then( (response) => response.text()).then((result) => {\n        try {\n          \n          result = JSON.parse(result);\n          console.log("result",result)\n         let data;\n         if (result["fo"] !== undefined)\n  for (var i = 0; i < result.fo.length; i++)\n      if (result.fo[i]["input"] !== undefined)\n          if (result.fo[i]["input"]["data_api"] !== undefined)\n          data= result.fo[i]["input"]["data_api"];\n          console.log(data);\n          if(data){\n              if(data.error_message !=="" || data.file_content===""){\n                  const loading = document.getElementById("loading");\n                  loading.remove();\n                  document.title="Error";\n                  var link = document.querySelector("link[rel~='icon']");\n                  if (!link) {\n                      link = document.createElement('link');\n                      link.rel = 'icon';\n                      document.head.appendChild(link);\n                  }\n                  link.href = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAOw4AADsOAFxK8o4AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAIABJREFUeJzt3XvUXlV94PFv7iQBAkgCgSAExQSVm6CAgtIIDPVW7ahVx9Hx2mq7ZjmOHbXTcVztuByn1Y7SqR1vY9FptY6tiBdUwPsN5ZKIEFDulwAGSAgJISR554/9PM2bl/fyXM55fvuc/f2stVcClT6/s/c+5/c7+9xAkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkqSZzYoOQGqRucATgdXAk4BjOn/uByzp/LkYWBQVoFSxHcBW4IHOn1uB24EbgPXA9Z2/b44KUFOzAJAGNwc4ETgDeBZwLinRS9rbTcAl49oDseEILACkfs0G1gCvBl4C7B8bjtQ4u4AfAp8FvgBsig2nXBYAUm+OAd4MvBI4PDgWqS22A18G/g64GNgdG44k7XECcAGwExiz2Wy1tWuA15DupZGkMKeTzkiiD4o2W2ntV8AbsBCQNGIHAR8mXaeMPhDabCW3q0k316om3gMgJbNJN/Z9CHhccCySkjHSzYLvAO4NjqV1LAAkOAr4HHBqcBySJncf6bLAhdGBtMmc6ACkYC8GvkZ6gY+kPC0Cfo90ie4y0iU6DckVAJVqAWm5/63RgUjqy+WkYuCW4DgazwJAJdoX+CfgnOhAJA3kfuAFwI+jA2kyCwCV5hDg68BJ0YFIGspW4KWkx3U1AO8BUElWkq4fPiU6EElDmw+8HLiR9BIh9ckCQKVYDXwfODI6EEmVmUP6JscNWAT0zUsAKsEq0pn/YdGBSKrFo8ALgW9EB9IkFgBqO5O/VIZtwNl4Y2DPLADUZquBbwOHRgciaSR+AzwDHxHsyezoAKSarAIuxeQvlWQp8I+kGwQ1A28CVBu57C+V63BgMfDN6EByZwGgtjH5SzoNWAusjw4kZ94DoDbxmr+krvtIx4SN0YHkyhUAtUX3zH95dCCSsrCI9PGgi6IDyZUrAGoDl/0lTWY3cAY+GjgpCwA1nclf0nR+ATwN2BkdSG68BKAmWw18B5f9JU3tEOBW4KroQHLjCoCayjN/Sb26kXTC4CrAOK4AqIlM/pL6cRDpkUA/GDSOKwBqGpO/pEFcCxxHujFQuAKgZvGav6RBLQV+Cvw6OpBcWACoKXzOX9Kw5gBfjA4iF14CUBO47C+pCttJJxGbogORNLPVwAZgrKVNarJ5pKX1pwNvAv4BeJD4/Wq69oZaekJSpdqe/C0A1EaLSEn2BuL3r8nat+vbdElVKCH5WwCozeYBfww8TPx+Nr49Cuxf43ZLGsIq4E7iDxQWANLwTgPuIn5fG9+eX+sWSxpIKWf+FgAqyQpgLfH7W7d9sN7NldSvks78LQBUmsOAO4jf58aAK2veVkl9KO3M3wJAJTqN9Che9H63C9iv5m2V1INSk78FgEr0HuL3uzHglLo3VNL0Slz2twBQyRaTx02Br6p7Q3M3OzoAFa37bn/f8CeVYyvw59FBkE4+JAUo/czfFQCVbDHxbwz8XO1bmTlXABTBM3+pbFuBrwXHsCL498NZAGjUVpNexXlodCCSQl0W/PvFvw3QAkCjtAq4FJO/JFgX/Pv7Bv9+uLnRAagYnvlLGu+m4N93BSA6ABXBM39JE20O/v3iVwBmRQeg1ltFutbnDX+Tcx9UyaKfhCl6/3MFQHUy+UtSpiwAVBeTvyRlzAJAdTD5S1LmLABUNZO/JDWABYCqZPKXpIawAFBVmvh63w3RAUhSFAsAVaGJz/nfA5wdHYQkSU3VxK/63Q08uRN/dCxSydz/pIZqevIng3ikkrn/SQ3UhuRPBjFJJXP/kxqmLcmfDOKSSub+JzVIm5I/GcQmlcz9T2qItiV/MohPKpn7n9QAbUz+ZBCjVDL3PylzbU3+ZBCnVDL3PyljbU7+ZBCrVDL3PylTbU/+ZBCvVDL3PylDJSR/MohZKpn7n5SZUpI/GcQtlcz9T8pIScmfDGKXSub+J2WitORPBvFLJXP/kzJQYvIng22QSub+JwUrNfmTwXZIJXP/kwKVnPzJYFukkrn/SUFKT/5ksD1Sydz/pAAm/yR6m6SSuf9JI2by3yN6u6SSuf9JI2Ty31v0tkklc/+TRsTk/1jR2yeVzP1PGgGT/+Sit1EqmfufVDOT/9Sit1MqmfufVCOT//Sit1UqmfufVBOT/8yit1cqmfufVAOTf2+it1kqmfufVDGTf++it1sqmfufVCGTf3+it10qmfufVBGTf/+it18qmfufVAGT/2Ci+0AqmfufNCST/+Ci+0EqmfufNAST/3Ci+0IqmfufNCCT//Ci+0MqmfufNACTfzWi+0Qqmfuf1CeTf3Wi+0Uqmfuf1AeTf7Wi+0Yqmfuf1COTf/Wi+0cqmfuf1AOTfz2i+0gqmfufNAOTf32i+0kqmfufNA2Tf72i+0oqmfufNAWTf/2i+0sqmfufNAmT/2hE95lUMvc/aQKT/+hE95tUMvc/aRyT/2hF951UMvc/qcPkP3rR/SeVzP1PwuQfJboPpZK5/6l4Jv840f0olcz9T0Uz+ceK7kupZO5/KpbJP150f0olc/9TkUz+eYjuU6lk7n8qjsk/H9H9KpXM/U9FMfnnJbpvpZK5/6kYJv/8RPevVDL3PxXB5J+n6D6WSub+p9Yz+ecrup+lkrn/qdVM/vlaQGw/b69/E6WsRR/rpNqsBjYQP8n7aXd14i7BMmL7emP9myhlLfp4V7TZ0QG02CrgUuDQ6ED6cA9wNrA+OpAROTr49x8M/n1JBZsbHUBLrQa+TbOS/wZgDeUkf4ATgn//oeDfl1QwVwCqZ/JvjucG/74rAJLUEt7w1xyLgS3E9v3nat9KKW/Rx7+ieQmgOp75N8urgH2DY7g++PclSUPybv9mmQ/cSPwYvKruDZUyF70PSkMx+TfPu4gfgzHg5Lo3VMpc9D4oDczk3zzPJL2AJ3ocdgH71bytUu6i90NpIN7w1zyHAXcQPw5jwJU1b6vUBNH7odS3J+KZf9McAawjfhy67S/r3VypEaL3Q6kvS0l3b0dP3H5a6Wf+p5Nfwfa8WrdYaobo/VDq2RLgKuInbT+t5DP/+cC7yeOa//j2KF7/lyB+X5R6soD0nH/0hDX5z2wx8GbyeNRvsnZZfZsuNUr0vlg0XwTUuw8BZ0UH0YdSXvIzHzgAWAmcBPwWaXk9+iU/0/lsdACSNCs6gIb418D/iw5CrbAdWA5sig5EykD0WXjROdCPAc3sCOBj0UGoNb6EyV9SBiwApjcH+EfgoOhA1BoXRAcgSWABMJO3AqdFB6HWuBb4RnQQkgSFX/+YwTLS8/4HRAei1nglfgJYGs97AAK5AjC1/4HJX9X5NfCF6CAkqcsCYHKnA6+JDkKt8j7SB4AkKQtFL39M4xvAudFBqDWuBJ6BBYA0kZcAAhW98VM4kXTAtm9Uhd3AGcCPowORMmQBEMhLAI/1nyl8UqhSn8TkLylDJrq9PYn0qNac6EDUChtJ32K4LzoQKVOuAARyBWBvb8Lkr2qMAW/E5C8pUxYAe8wGXhEdhFrjg8CF0UFI0lSKXv6Y4Bzgm9FBqBUuB84EdkQHImXOSwCBXAHY499EB6BWuBd4GSZ/SZkruvoZZy7pWu3+0YGo0bYAvwVcER2I1BCuAARyBSA5BZO/hrMDeCkmf0kNYQGQnBUdgBptN+nV0d5DIqkxLACSs6IDUGPtIN0/8vnoQCSpH0Vf/+iYB9wP7BsdiBpnC/C7wCXRgUgN5T0AgeZGB5CBJ2LyV//uAZ6P1/wlNZSXAGBVdABqnJ+RPhlt8pfUWBYA6f3/Ui/GgI+Qvu53c3AskjQULwFYAKg3G4HXAxdFByJJVXAFAJ4QHYCythv4OOmrfiZ/Sa3hCgAcGB2AsnU18IfAj6IDkaSquQLgEwB6rBuA15HeEGnyl9RKrgDAftEBKBvXAH8B/D2wMzgWSaqVBYArAKV7GLgQuAC4mPgXk0jSSBT9FqQOD/jl2Qn8APgM8EVgc2w4UrGij79F50BXAFSKm0iv7L0E+BawKTYcSYplAaCm2wE8REroD3Xa7aQb+dYD13f+viUqQEnKkQVAvKKXoCRJMXwMUJKkAlkASJJUIAsASZIKZAEgSVKBLAAkSSqQBYAkSQWyAJAkqUAWAJIkFcgCQJKkAlkASJJUIAsASZIKZAEgSVKBLAAkSSqQBYAkSQWyAJAkqUAWAJIkFcgCQJKkAlkASJJUIAsASZIKZAEgSVKBLAAkSSqQBYAkSQWyAJAkqUBzowOQpIbYDzgROAZY2vl3u4C7gF8C13T+WWoECwBpNGYDJwOrgGXAcmAbcC9wJ/BTYENYdJrKIuBVnXYm0x8zHwS+AnwauAQYqzs4aRizogPIQPRO6hj0by5wFimhrgQeD8wDHiAdhK8Cvkc6K9sdEyKQxvYc4BXA80mJfypjwBWkBPJJ4I7ao4tzIHAecCxp/A4FdgBbScXQT0jjF1kQzQPeCvwpcPAA//3VwDuAS6sMqoU8/irUWHBT744jJceN9Na3dwPvYc9y7Sg9B7iyxzgntkeAvwEeN/Ko6zMLeBlwMSnZ99IPPwNeyehXKo8lFWNV7N+fAvYdbfiN4vFXoZyA+VtBOpDuZLA+3ga8H5g/glj3Af56wDgntntIZ8pN9xzSJY5B++FW4MUjivU8YPMQsU7W1gKHjSj+pvH4q1BOwLy9nOoOyFcBT6kx1oOAH1YUa7ftAt5WY8x1WgCcT3V98QnqPZs+j7T6Usd+fiPpUof25vFXoZyA+XoX6Rp+lf29FVhTQ6xLSWd6dc2Td9QQc532Y8+NcFW2tdRzSWcNaW7Uua9fQVoh0h4efxXKCZind1Bfn1ddBCwF1tUY7xipEHpJhTHXaR/gMurri3VUWwSMIvl324crjLsNPP4qlBMwPy+k+jP/ia2qIqDuM//x7X7g8ApirtunqL8vqloJGGXyHyNd0jm5grjbIuq4220qnBMwLwfS+13+w7Zhi4BRJv9u+79DxDsKL2Z0fTFsETDq5N9t3xwi5rYZdd9PbCqcEzAvf8lo+38bcPYAcY5i2X+ytht46gDxjsI8YD2j7Y9Bi4Co5N8dw+MGiLmNIvp/fFPhnID5OBJ4mNGPQb8rARFn/uPb3/YR6yi9hZj+6LcIiEz+3fb+PuJts8gxGBvB9ilzTsB8/Blx47AVeG4PMUYn/zHSu+dzfIPZL4jrk16LgByS/1inrxQ/DiqcEzAf1xI7FjMVATkk/27L7UayVcT3yVqmf21vLsl/jHQz4JIe+rXtosdBhXMC5uFJxI/FGFNfDjiYfJL/GPD23rt2JN5JfJ+MMXURkFPy77ZTeu7d9ooeg6LNjg5A6jg+OoCORcBF7L0SsJT0UZdcYoT8HgfMpW+OJ43V+CJgDWlMF4VENDVfD6xQFgDKxcroAMZZBHyZVAQsJb3RLpcE15Xba2VzGr/jSV8TPJT0Cd8LyS/5w2i+TSFNadRf2ZKmckR0ABN0i4DbSde3c5Pb9ePcxu9Y4DukuHJM/pC+OyCFsQBQLnZGBzCJReSZ/CF9KTAnOY5frmPXtSE6AJXNSwDKxZboABomt+Th+PVnN+mlSVIYCwDl4v7oABrmlugAJrgvOoCGuQZ4KDoIlc0CQLm4PDqAhsntffKOX3++Eh2AZAGgXPyc9Jy2ZnY1cFt0EBN8PzqABhkDPhMdhGQBoFw8SvqGvGb2xegAJvE9LOB6dTFe/1cGLACUkw9HB9AADwEfjQ5iEg8Cn44OogF2Ae+ODkJS4qso83Il8WOSc/uTwbu2ditJjwNG91HO7QMD9247RY+HCucEzMs5pEekosclx3YlsGDwrh2Jvya+n3JtPyL/8Ru16DFR4ZyA+fkr4sclt3YfcMwwnToii4j/qmOO7Tpg2RD92lbR46LCOQHzsw9wFfFjk0vbCpwxVI+O1tPI78t7kW0dcMhQPdpe0WOjwjkB87QU+AXx4xPdtrL3lwmb4kzS2wGj+y+6XUd+H27KSfT4qHBOwHwtI70xLXqMolpTk39X6UXAemD50L3YbtFjpMI5AfO2DPgl8eM06tb05N9VahFwPXBYBf3XdtHjpMI5AfN3CGXdWNaW5N9VWhFwAyb/XkWPlQrnBGyGFcCviB+vulvbkn9XKUXALcCR1XRZEaLHS4VzAjbHCuDXxI9ZXa2tyb+r7UXArcBRVXVWIaLHTIVzAjbLEcCNxI9b1a3tyb+rrUXAraQ3Iao/0eOmwjkBm+fxwE3Ej11VrZTk39W2IuA24OhKe6gc0WOnwjkBm+lI4Gbix2/YVlry72pLEXA78ISK+6Yk0eOnwjkBm+uJwB3Ej+GgrdTk39X0IuBuYHXlvVKW6DFU4ZyAzXYMcCfx49hvKz35dzW1CLgbeHIN/VGa6HEs2uzoACRJkiJYgTaXlwCaraln/93mJYDhRY+hCucEbKYj8SbAJmt68u82bwIcTvT4qXBOwObxMcBma0vy7zYfAxxc9NipcE7AZvFFQM3WtuTfbb4IaDDR46bCOQGbw1cBN1tbk3+3+Srg/kWPmQrnBGwGPwbUbG1P/t12C34MqB/R46XCOQHz5+eAm62U5N9tfg64d9FjpcI5AfO2DPgl8eM06taWIqC05N9t12MR0IvocVLhnID5WgZcQ/wYRbWmFwGlJv9uWw8sH7oX2y16jFQ4J2CelgK/IH58oltTi4DSk3+3XQccOmRftln0+KhwTsD8HACsJX5scmlbgTOG6tHROpMUc3S/5dLWkua0Hit6bFQ4J2Be5gHfI35ccmv3A6uG6NdRORZ4gPj+yq19hzS3tbfocVHhnIB5+QDxY5JruxpYMHjX1m4fYB3x/ZRre//gXdta0WOiwjkB83ESsJP4Mcm5/enAvVu/9xLfPzm3ncAJg3ZuS0WPiQrnBMzHN4kfj9zbQ8DBg3ZwjZbhdf9e2tcH7eCWih6Pos2ODkDqOB44JzqIBlgMvCU6iEm8FVgUHUQD/CvgqdFBSGABoHy8LDqABnlpdACTcPx6M4s8x08FsgBQLp4fHUCDHE9e75s/EnhydBAN4lxXFiwAlINDgBOjg2iYnC6XnBcdQMOcTHrRlRTKAkA5WElaGlXvjo4OYJycYmmCWfjZYGXAAkA58FWp/cupz3KKpSn8RoDCWQAoB4+LDmAK20hfdcvRsugAxsnxsURIY7ctOogpeAlA4SwAlIMHowOYxDbgRcDpwBXBsUxmU3QA42yODmAS60jfTziP9O6E3OQ0fiqUBYBycHd0ABN0k/+lpPfan0N+RcCG6ADGyW381pG+oLgR+D7wPPIrAnLrMxXIAkA5uDM6gHG2AS8kJf+uB0hnkutCIprcXdEBjJNTLOOTf9f3gd8hr8sBOfWZVCxfRZmHW4gfi62k5DGVA4GfZxDnGOm7Cbl4OvH9MUb67O509yOcCWzJIM5be+nUQkSPhQrnBMzD3xA7DjMl/64cioA7yeuxyVmkmCL7ZKbk35VDEXB+D3GWInIcxkawfcqcEzAP5xE3BluBNX3EupSUcKLi/WgfsY7Kx4jrj7X0d1f9GmI/XHRuH7G2XdQYdJsK5wTMwyzgWkbf/72e+U8UtRKwG3jKAPHW7ThSbKPuj17P/CeKWgm4Du+9Gm/U/T+xqXBOwHy8nNH2fb9n/hNFrAR8doh46/YPjLYv+j3znyhiJcAPAe1tlH0/WVPhnIB5uZjR9Puwyb9rlEXAfcBhFcRclxXA/YymL4ZN/l2jLAK+VkG8bTPq4+3EpsI5AfNyKOkRqTr7vKrk37WU9PhZnTHvIj3KlruXUP+lgHVU+ya9URQBd5LX2xtz4fFXoZyA+TmJ9Ha5Ovq76uTfVfdKwH+sIea6vIP6+qGqM/+J6iwCNuPXLqfi8VehnIB5OoX0trQq+/o+0uth63Ig8L2KY94N/HGNMdfl35NWLarsix9T73cHTgXurTjmu0mf/9XkPP4qlBMwX0eQ3uJWVfI4agQxLwA+QjXL4HfT7EfGzgPuYfh+2A38T1Lf1m0l8NMKYh4Dvku6L0JT8/irUE7AvM0G3kx69/0g/XsP8FZgzojjPhP42YAxP0J6WcxBI465DgcB/4u0TYP0xeXAs0Yc81zgjxh8NeAu4I34uF8vPP4qlBOwGRYArwO+zMzXarcBXyEdhBdGBDvO2cAnmLmA2UVKdv+FvO/0H9ThwHtI2zjT6shdpD4b5P0MVVpImkNfJc2p6WLeClwI/DtGs1LRFh5/A+X0OtEo0ZPAMejfQuCZpEsEhwMHkG60uqPTfkReH36BNM4nAceS7gZfDjxMWqG4E/hJ5+8lOJR0vf1w4BDSeG4gnXFfB1xF/H450SLSSsQKUtxLSB+Jugu4jTTntodF11zR41z08bfoje9wAkpSDI+/gbxGJUlSgSwAJEkqkAWAJEkFsgCQJKlAFgCSJBXIAkCSpAJZAEiSVCALAEmSCmQBIElSgSwAJEkqkAWAJEkFsgCQJKlAFgCSJBXIAkCSpAJZAEiSVCALAEmSCmQBIElSgSwAJEkqkAWAJEkFsgCQJKlAFgCSJBXIAkCSpAJZAEiSVCALAEmSCjQ3OgBJfZsNHDyuLQWWTfh3S4AFnf/tks5/t2iSf9e1GdgNPAJsm+TfbQY2jmv3Ar+Z8O92V7qVkmo1KzqADIwF/75joInmAUcCRwNP6LTu35eTEnxu82aMVARsAG7stJvG/f024NGw6JQrj7+Bit74DiegouwPnAicBBzLnkT/eNq3OreTVAR0C4PrgKuAq4EHA+NSLI+/gYre+A4noEbhQOApwMnj2mq8DwfSqsEV49rPO/9O7efxN1DRG9/hBFTV5gPPAM4CTiOd4R8WGVAD3UVaIfgJ8B3gcmBHZECqhcffQEVvfIcTUMOaC5wAnA2cATybtLyv6jwMXAn8ALik8+f20IhUBY+/gYre+A4noPo1D3gm6Qz/OaSz/IWRARXoYfasDnwH+DHeZNhEHn8DFb3xHU5A9WIxsAZ4GfBC4IDYcDTBVuDbwBeALwObYsNRjzz+Bip64zucgJrK44HzSAn/XNK1feVvF2l14CLgn4BfxYajaXj8DVT0xnc4ATXeicCLgReRbt5T811JWhX4ErA2OBbtzeNvoKI3vsMJqOXAy4HXYtJvu2tJlwn+D3BrcCzy+Buq6I3vcAKWaR/S0v5rSMv8bXvxjqa3G7gM+AzwRdI9BBo9j7+Bit74DidgWU4mJf1XAwcFx6I8PAhcCFwAXEr8MaEk0X1d9PG36I3vcAK231LgzcAbgaNiQ1HmbgY+AXyM9G0D1cvjr0KNBTfV5wTgf5OWd6PH2dastp20InACqlP0OKtwTsB2mU26tv8t0nXe6PG1Nb/9gPT+B+8TqV702BbN5Y/4SeAYVGN/4HXA23CZX/W4C/g48BHg/uBY2sLjr0JZgTbbCuB8YAvxY2kro20hFQHL0LCix1KFcwI203zgvaR3wkePoa3Mtgn4T6RvQ2gw0WNYNJc/4ieBY9C/x5Oe3T4lOhCJ9DGil+FTA4Pw+Buo6I3vcAI2y2rSC1yWRwcijXMzcA5wY3QgDePxN1DRG9/hBGyOFcBPgcOiA5EmcQPpM9H3RQfSIB5/A82ODkDq0TzgnzH5K19PIs3ROdGBSL2wAFBTvBuv+St/ZwJ/EB2E1Iuilz86XILK30HALcB+wXFIvdhEulflnuhAGsDjbyBXANQEb8Pkr+Y4APj96CCkmRRd/XRYgeZtHulM6sDoQKQ+3A6sBHZFB5I5j7+BXAFQ7k7H5K/mOYJ0P4CULQsA5e7c6ACkAT0rOgBpOhYAyt3p0QFIAzo1OgBpOhYAyp0fXFFTHREdgDQdv2+t3B0UHUBLbQV2dP4+H1gcGEtb7RsdgDQdCwDlzsQ0uU3AbcC9nbax035Demqi+8+PANs6f+4GNs/w/3cJaWVwAbCo8+fBnXYIsHTcPy/rtCM7/532tjA6AGk6FgDK3WbKTS53kT4uM1mr633zMxUIUzkYOBp4wiSt1Nc33x0dgDQdCwDl7mbS53/bbBdwK3AtcEWn/YR0Nt8U3RWHyyf5v+0PHA+c3GlPBo4jXXpos1uiA5CmYwGg3F0NPCc6iIrdDHwX+BlwFbCWtEzfVg8CP+i0rkXACcBJwNNJY7xy9KHV6rroAKTpFP0WpA7fRJW3FwEXRgcxpA2k5HcJ8C1SAaDHWg6cAZzdaUfHhjO0U5l8RUR7ePwNVPTGdzgB87aQdC38gOhA+rAR+DpwKelM/5bQaJrrKOAsYA3wPOBxkcH0aQOwgnTjpabm8VehxoKbZvZh4sdppnYj8CHSUrbfg6/eHFIx8FfATcSP90ztvXV0QgtFj1PRrH7iJ4FjMLPDgF+T32NV1wIXAV8Bfkj8XCrJU4AXAC8Enkle+9Em0uWLB6IDaYDofSaneaMAVqDN8F+JH6sxYD3wJ7T/yYQmOZI0JtcTPz/GgLfXu7mtEj1WKpwTsBnmk26oihij+4GP4ncJmuB04G9JZ98Rc+Xr+Ir1fnj8VSgnYHOsAO5gNOOyE/gq8HJgn1FsnCq1D/B7wNdIYzmKOXMT6U2J6p3HX4VyAjbLKuB26huPe4H/Rrlvr2ujw4H3kV6sVNe8uR4//jMIj78K5QRsnqXAxVQ7Dr8A3ohn+222EHgTcA3Vzp3vAoeOcDvaxOOvQjkBm2k28E7SHdeD9v0u0h385+DdwCWZRRrzr5LmwKDzZxvwH/Ca/zA8/iqUE7DZDiQ9c30fvff5/cD5pMsJKtsq0lzo56bB+0mXFA4JiLdtPP4G8qwnfhI4BtWYS3r16rmk18muZM/bAzeRXr+7jvQq3suA7QExKl8LSXPnHNI3Co4hfYVyF+lNlHcDPyXNn+8DD8eE2ToefwMVvfEdTkBJiuHxN5DXriRJKpAFgCSyQJ2MAAAGVElEQVRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkAQA7gn9/fvDvS1KEBcG//0jw74ezAIAtwb+/f/DvS1KEJcG//1Dw74ezAIifBCuDf1+SIhwd/PsPBv9+OAuA+BWAE4N/X5IinBD8+9Enf+EsAOILgDXBvy9JEZ4b/PuuAEQHkIE7g3//BcDi4BgkaZQWA78dHMMdwb8fzgIA1gf//r7AK4JjkKRRehXp2Bfp+uDfD2cBkMckeCcwLzoISRqB+cC7ooMgj2N/KAuAPCbBMcDbooOQpBF4O/FPAEAex34F2x/YDYwFt4eB02reVkmK9ExgO/HH213AfjVvqxpiLfETcgzYABxR87ZKUoTDSDfeRR9nx4Ara97WRvASQHJZdAAdhwJfAVZEByJJFToCuBg4PDqQjlyO+crAi4ivSMe3e4Fn17rFkjQap5NWN6OPq+Pb82rdYjXKEuBR4ifl+LYdeA++I0BSM80H3k0e1/zHt0fx+r8m+C7xE3OytgF4CxYCkpphMfBm4Ebij5+TNZf/9RhvIn5iTte2AJ8Dfh84FViGnxKWFGs+6Vh0KvAHwOdJx6ro4+V07fW19EQDzYoOICNLSGfbC6MDkSTVYjuwHNgUHUgOfApgj83ARdFBSJJq8yVM/v/CAmBvfxcdgCSpNhdEB5ATLwHsbRawDnhqdCCSpEpdCxxHevOrcAVgojHgv0cHIUmq3J9j8t+LKwCPNQe4jvSBHklS8/0aWE36BoA6XAF4rF3AB6KDkCRV5n2Y/B/DFYDJzQF+DpwYHYgkaShXAs/AAuAxXAGY3C7SC3e8XiRJzbUb+CNM/pOyAJja5cCno4OQJA3sk8CPo4PIlZcApncwsB54XHQgkqS+bCTd+HdfdCC5cgVgehuB15IeD5QkNcMY8EZM/tOaEx1AA/yK9J2A06MDkST15IPA+dFB5M5LAL2ZR/pcsEWAJOXtcuBMYEd0ILmzAOjdUaSJtTQ4DknS5O4Fng7cFh1IE3gPQO9uAZ5H+ta1JCkvW4DfxuTfMwuA/vwceDHwSHQgkqR/sQN4KemlP+qRNwH272bSe6V/Fy+hSFK03cCrgS9HB9I0FgCDuabTfgeYGxyLJJVqB/Bvgc9HB9JEnsEOZw3wz8D+0YFIUmEeIi37fyM6kKayABjeycDXgGXRgUhSIe4Bng9cER1Ik3kT4PCuAE4BfhQdiCQV4Gekd7KY/IfkPQDVeBC4gPT6yWfjyookVW2M9Ha/V+Irfithoqrei4BP4QeEJKkqG4HXAxdFB9ImrgBU73rg48BC0hupLLIkaTBjwGdJT1xdFRxL65ic6nUy8FFSISBJ6t3VwB/i/VW18SbAel1BulnlDaSvCkqSpncD8Dq8ubp2rgCMzmzSYyvvBZ4WG4okZeca4C+Avwd2BsdSBAuA0ZsFnAe8lnTD4MLYcCQpzMPAhaSnqC4mXfPXiFgAxFpCepPVq4Ez8LXCktpvJ/AD4DPAF4HNseGUywIgH4tJ9wuc3Wkn4T0aktrhJuCSTvsWsCk2HIEFQM72A1YBTwJWd/6+Ati30w7o/Dk/KkBJxdtBeif/ps6fDwG3k27kW096LPoGYEtUgJIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkaTj/H8iPB+y9JBOFAAAAAElFTkSuQmCC";\n                  const error_title=document.getElementById("error-title");\n                  error_title.innerHTML=data.error_message;\n                  const error_component=document.getElementById("error");\n                  error_component.style.display="block";\n                  setTimeout(() => {\n                      alert(data.error_message)\n                  }, 1000); \n              }\n              else{ \n                  let file_content = data.file_content;\n                  let bstr = atob(file_content), \n                      n = bstr.length, \n                      u8arr = new Uint8Array(n);\n                  while(n--){\n                      u8arr[n] = bstr.charCodeAt(n);\n                  }\n                  const file = new File([u8arr], data.file_name+"."+data.file_format, { type: getFileType(data.file_format) });\n\n                  const url = URL.createObjectURL(file);\n  \n                  const a = document.createElement("a");\n                  a.href = url;\n                  a.download = file.name;\n                  a.click();\n                  URL.revokeObjectURL(url);\n                  const element = document.getElementById("loading");\n                  element.remove();\n              }\n              \n             \n          }\n        } catch (error) {\n          const loading = document.getElementById("loading");\n          loading.remove();\n          document.title="Error";\n          var link = document.querySelector("link[rel~='icon']");\n          if (!link) {\n              link = document.createElement('link');\n              link.rel = 'icon';\n              document.head.appendChild(link);\n          }\n          link.href = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAOw4AADsOAFxK8o4AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAIABJREFUeJzt3XvUXlV94PFv7iQBAkgCgSAExQSVm6CAgtIIDPVW7ahVx9Hx2mq7ZjmOHbXTcVztuByn1Y7SqR1vY9FptY6tiBdUwPsN5ZKIEFDulwAGSAgJISR554/9PM2bl/fyXM55fvuc/f2stVcClT6/s/c+5/c7+9xAkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkqSZzYoOQGqRucATgdXAk4BjOn/uByzp/LkYWBQVoFSxHcBW4IHOn1uB24EbgPXA9Z2/b44KUFOzAJAGNwc4ETgDeBZwLinRS9rbTcAl49oDseEILACkfs0G1gCvBl4C7B8bjtQ4u4AfAp8FvgBsig2nXBYAUm+OAd4MvBI4PDgWqS22A18G/g64GNgdG44k7XECcAGwExiz2Wy1tWuA15DupZGkMKeTzkiiD4o2W2ntV8AbsBCQNGIHAR8mXaeMPhDabCW3q0k316om3gMgJbNJN/Z9CHhccCySkjHSzYLvAO4NjqV1LAAkOAr4HHBqcBySJncf6bLAhdGBtMmc6ACkYC8GvkZ6gY+kPC0Cfo90ie4y0iU6DckVAJVqAWm5/63RgUjqy+WkYuCW4DgazwJAJdoX+CfgnOhAJA3kfuAFwI+jA2kyCwCV5hDg68BJ0YFIGspW4KWkx3U1AO8BUElWkq4fPiU6EElDmw+8HLiR9BIh9ckCQKVYDXwfODI6EEmVmUP6JscNWAT0zUsAKsEq0pn/YdGBSKrFo8ALgW9EB9IkFgBqO5O/VIZtwNl4Y2DPLADUZquBbwOHRgciaSR+AzwDHxHsyezoAKSarAIuxeQvlWQp8I+kGwQ1A28CVBu57C+V63BgMfDN6EByZwGgtjH5SzoNWAusjw4kZ94DoDbxmr+krvtIx4SN0YHkyhUAtUX3zH95dCCSsrCI9PGgi6IDyZUrAGoDl/0lTWY3cAY+GjgpCwA1nclf0nR+ATwN2BkdSG68BKAmWw18B5f9JU3tEOBW4KroQHLjCoCayjN/Sb26kXTC4CrAOK4AqIlM/pL6cRDpkUA/GDSOKwBqGpO/pEFcCxxHujFQuAKgZvGav6RBLQV+Cvw6OpBcWACoKXzOX9Kw5gBfjA4iF14CUBO47C+pCttJJxGbogORNLPVwAZgrKVNarJ5pKX1pwNvAv4BeJD4/Wq69oZaekJSpdqe/C0A1EaLSEn2BuL3r8nat+vbdElVKCH5WwCozeYBfww8TPx+Nr49Cuxf43ZLGsIq4E7iDxQWANLwTgPuIn5fG9+eX+sWSxpIKWf+FgAqyQpgLfH7W7d9sN7NldSvks78LQBUmsOAO4jf58aAK2veVkl9KO3M3wJAJTqN9Che9H63C9iv5m2V1INSk78FgEr0HuL3uzHglLo3VNL0Slz2twBQyRaTx02Br6p7Q3M3OzoAFa37bn/f8CeVYyvw59FBkE4+JAUo/czfFQCVbDHxbwz8XO1bmTlXABTBM3+pbFuBrwXHsCL498NZAGjUVpNexXlodCCSQl0W/PvFvw3QAkCjtAq4FJO/JFgX/Pv7Bv9+uLnRAagYnvlLGu+m4N93BSA6ABXBM39JE20O/v3iVwBmRQeg1ltFutbnDX+Tcx9UyaKfhCl6/3MFQHUy+UtSpiwAVBeTvyRlzAJAdTD5S1LmLABUNZO/JDWABYCqZPKXpIawAFBVmvh63w3RAUhSFAsAVaGJz/nfA5wdHYQkSU3VxK/63Q08uRN/dCxSydz/pIZqevIng3ikkrn/SQ3UhuRPBjFJJXP/kxqmLcmfDOKSSub+JzVIm5I/GcQmlcz9T2qItiV/MohPKpn7n9QAbUz+ZBCjVDL3PylzbU3+ZBCnVDL3PyljbU7+ZBCrVDL3PylTbU/+ZBCvVDL3PylDJSR/MohZKpn7n5SZUpI/GcQtlcz9T8pIScmfDGKXSub+J2WitORPBvFLJXP/kzJQYvIng22QSub+JwUrNfmTwXZIJXP/kwKVnPzJYFukkrn/SUFKT/5ksD1Sydz/pAAm/yR6m6SSuf9JI2by3yN6u6SSuf9JI2Ty31v0tkklc/+TRsTk/1jR2yeVzP1PGgGT/+Sit1EqmfufVDOT/9Sit1MqmfufVCOT//Sit1UqmfufVBOT/8yit1cqmfufVAOTf2+it1kqmfufVDGTf++it1sqmfufVCGTf3+it10qmfufVBGTf/+it18qmfufVAGT/2Ci+0AqmfufNCST/+Ci+0EqmfufNAST/3Ci+0IqmfufNCCT//Ci+0MqmfufNACTfzWi+0Qqmfuf1CeTf3Wi+0Uqmfuf1AeTf7Wi+0Yqmfuf1COTf/Wi+0cqmfuf1AOTfz2i+0gqmfufNAOTf32i+0kqmfufNA2Tf72i+0oqmfufNAWTf/2i+0sqmfufNAmT/2hE95lUMvc/aQKT/+hE95tUMvc/aRyT/2hF951UMvc/qcPkP3rR/SeVzP1PwuQfJboPpZK5/6l4Jv840f0olcz9T0Uz+ceK7kupZO5/KpbJP150f0olc/9TkUz+eYjuU6lk7n8qjsk/H9H9KpXM/U9FMfnnJbpvpZK5/6kYJv/8RPevVDL3PxXB5J+n6D6WSub+p9Yz+ecrup+lkrn/qdVM/vlaQGw/b69/E6WsRR/rpNqsBjYQP8n7aXd14i7BMmL7emP9myhlLfp4V7TZ0QG02CrgUuDQ6ED6cA9wNrA+OpAROTr49x8M/n1JBZsbHUBLrQa+TbOS/wZgDeUkf4ATgn//oeDfl1QwVwCqZ/JvjucG/74rAJLUEt7w1xyLgS3E9v3nat9KKW/Rx7+ieQmgOp75N8urgH2DY7g++PclSUPybv9mmQ/cSPwYvKruDZUyF70PSkMx+TfPu4gfgzHg5Lo3VMpc9D4oDczk3zzPJL2AJ3ocdgH71bytUu6i90NpIN7w1zyHAXcQPw5jwJU1b6vUBNH7odS3J+KZf9McAawjfhy67S/r3VypEaL3Q6kvS0l3b0dP3H5a6Wf+p5Nfwfa8WrdYaobo/VDq2RLgKuInbT+t5DP/+cC7yeOa//j2KF7/lyB+X5R6soD0nH/0hDX5z2wx8GbyeNRvsnZZfZsuNUr0vlg0XwTUuw8BZ0UH0YdSXvIzHzgAWAmcBPwWaXk9+iU/0/lsdACSNCs6gIb418D/iw5CrbAdWA5sig5EykD0WXjROdCPAc3sCOBj0UGoNb6EyV9SBiwApjcH+EfgoOhA1BoXRAcgSWABMJO3AqdFB6HWuBb4RnQQkgSFX/+YwTLS8/4HRAei1nglfgJYGs97AAK5AjC1/4HJX9X5NfCF6CAkqcsCYHKnA6+JDkKt8j7SB4AkKQtFL39M4xvAudFBqDWuBJ6BBYA0kZcAAhW98VM4kXTAtm9Uhd3AGcCPowORMmQBEMhLAI/1nyl8UqhSn8TkLylDJrq9PYn0qNac6EDUChtJ32K4LzoQKVOuAARyBWBvb8Lkr2qMAW/E5C8pUxYAe8wGXhEdhFrjg8CF0UFI0lSKXv6Y4Bzgm9FBqBUuB84EdkQHImXOSwCBXAHY499EB6BWuBd4GSZ/SZkruvoZZy7pWu3+0YGo0bYAvwVcER2I1BCuAARyBSA5BZO/hrMDeCkmf0kNYQGQnBUdgBptN+nV0d5DIqkxLACSs6IDUGPtIN0/8vnoQCSpH0Vf/+iYB9wP7BsdiBpnC/C7wCXRgUgN5T0AgeZGB5CBJ2LyV//uAZ6P1/wlNZSXAGBVdABqnJ+RPhlt8pfUWBYA6f3/Ui/GgI+Qvu53c3AskjQULwFYAKg3G4HXAxdFByJJVXAFAJ4QHYCythv4OOmrfiZ/Sa3hCgAcGB2AsnU18IfAj6IDkaSquQLgEwB6rBuA15HeEGnyl9RKrgDAftEBKBvXAH8B/D2wMzgWSaqVBYArAKV7GLgQuAC4mPgXk0jSSBT9FqQOD/jl2Qn8APgM8EVgc2w4UrGij79F50BXAFSKm0iv7L0E+BawKTYcSYplAaCm2wE8REroD3Xa7aQb+dYD13f+viUqQEnKkQVAvKKXoCRJMXwMUJKkAlkASJJUIAsASZIKZAEgSVKBLAAkSSqQBYAkSQWyAJAkqUAWAJIkFcgCQJKkAlkASJJUIAsASZIKZAEgSVKBLAAkSSqQBYAkSQWyAJAkqUAWAJIkFcgCQJKkAlkASJJUIAsASZIKZAEgSVKBLAAkSSqQBYAkSQWyAJAkqUBzowOQpIbYDzgROAZY2vl3u4C7gF8C13T+WWoECwBpNGYDJwOrgGXAcmAbcC9wJ/BTYENYdJrKIuBVnXYm0x8zHwS+AnwauAQYqzs4aRizogPIQPRO6hj0by5wFimhrgQeD8wDHiAdhK8Cvkc6K9sdEyKQxvYc4BXA80mJfypjwBWkBPJJ4I7ao4tzIHAecCxp/A4FdgBbScXQT0jjF1kQzQPeCvwpcPAA//3VwDuAS6sMqoU8/irUWHBT744jJceN9Na3dwPvYc9y7Sg9B7iyxzgntkeAvwEeN/Ko6zMLeBlwMSnZ99IPPwNeyehXKo8lFWNV7N+fAvYdbfiN4vFXoZyA+VtBOpDuZLA+3ga8H5g/glj3Af56wDgntntIZ8pN9xzSJY5B++FW4MUjivU8YPMQsU7W1gKHjSj+pvH4q1BOwLy9nOoOyFcBT6kx1oOAH1YUa7ftAt5WY8x1WgCcT3V98QnqPZs+j7T6Usd+fiPpUof25vFXoZyA+XoX6Rp+lf29FVhTQ6xLSWd6dc2Td9QQc532Y8+NcFW2tdRzSWcNaW7Uua9fQVoh0h4efxXKCZind1Bfn1ddBCwF1tUY7xipEHpJhTHXaR/gMurri3VUWwSMIvl324crjLsNPP4qlBMwPy+k+jP/ia2qIqDuM//x7X7g8ApirtunqL8vqloJGGXyHyNd0jm5grjbIuq4220qnBMwLwfS+13+w7Zhi4BRJv9u+79DxDsKL2Z0fTFsETDq5N9t3xwi5rYZdd9PbCqcEzAvf8lo+38bcPYAcY5i2X+ytht46gDxjsI8YD2j7Y9Bi4Co5N8dw+MGiLmNIvp/fFPhnID5OBJ4mNGPQb8rARFn/uPb3/YR6yi9hZj+6LcIiEz+3fb+PuJts8gxGBvB9ilzTsB8/Blx47AVeG4PMUYn/zHSu+dzfIPZL4jrk16LgByS/1inrxQ/DiqcEzAf1xI7FjMVATkk/27L7UayVcT3yVqmf21vLsl/jHQz4JIe+rXtosdBhXMC5uFJxI/FGFNfDjiYfJL/GPD23rt2JN5JfJ+MMXURkFPy77ZTeu7d9ooeg6LNjg5A6jg+OoCORcBF7L0SsJT0UZdcYoT8HgfMpW+OJ43V+CJgDWlMF4VENDVfD6xQFgDKxcroAMZZBHyZVAQsJb3RLpcE15Xba2VzGr/jSV8TPJT0Cd8LyS/5w2i+TSFNadRf2ZKmckR0ABN0i4DbSde3c5Pb9ePcxu9Y4DukuHJM/pC+OyCFsQBQLnZGBzCJReSZ/CF9KTAnOY5frmPXtSE6AJXNSwDKxZboABomt+Th+PVnN+mlSVIYCwDl4v7oABrmlugAJrgvOoCGuQZ4KDoIlc0CQLm4PDqAhsntffKOX3++Eh2AZAGgXPyc9Jy2ZnY1cFt0EBN8PzqABhkDPhMdhGQBoFw8SvqGvGb2xegAJvE9LOB6dTFe/1cGLACUkw9HB9AADwEfjQ5iEg8Cn44OogF2Ae+ODkJS4qso83Il8WOSc/uTwbu2ditJjwNG91HO7QMD9247RY+HCucEzMs5pEekosclx3YlsGDwrh2Jvya+n3JtPyL/8Ru16DFR4ZyA+fkr4sclt3YfcMwwnToii4j/qmOO7Tpg2RD92lbR46LCOQHzsw9wFfFjk0vbCpwxVI+O1tPI78t7kW0dcMhQPdpe0WOjwjkB87QU+AXx4xPdtrL3lwmb4kzS2wGj+y+6XUd+H27KSfT4qHBOwHwtI70xLXqMolpTk39X6UXAemD50L3YbtFjpMI5AfO2DPgl8eM06tb05N9VahFwPXBYBf3XdtHjpMI5AfN3CGXdWNaW5N9VWhFwAyb/XkWPlQrnBGyGFcCviB+vulvbkn9XKUXALcCR1XRZEaLHS4VzAjbHCuDXxI9ZXa2tyb+r7UXArcBRVXVWIaLHTIVzAjbLEcCNxI9b1a3tyb+rrUXAraQ3Iao/0eOmwjkBm+fxwE3Ej11VrZTk39W2IuA24OhKe6gc0WOnwjkBm+lI4Gbix2/YVlry72pLEXA78ISK+6Yk0eOnwjkBm+uJwB3Ej+GgrdTk39X0IuBuYHXlvVKW6DFU4ZyAzXYMcCfx49hvKz35dzW1CLgbeHIN/VGa6HEs2uzoACRJkiJYgTaXlwCaraln/93mJYDhRY+hCucEbKYj8SbAJmt68u82bwIcTvT4qXBOwObxMcBma0vy7zYfAxxc9NipcE7AZvFFQM3WtuTfbb4IaDDR46bCOQGbw1cBN1tbk3+3+Srg/kWPmQrnBGwGPwbUbG1P/t12C34MqB/R46XCOQHz5+eAm62U5N9tfg64d9FjpcI5AfO2DPgl8eM06taWIqC05N9t12MR0IvocVLhnID5WgZcQ/wYRbWmFwGlJv9uWw8sH7oX2y16jFQ4J2CelgK/IH58oltTi4DSk3+3XQccOmRftln0+KhwTsD8HACsJX5scmlbgTOG6tHROpMUc3S/5dLWkua0Hit6bFQ4J2Be5gHfI35ccmv3A6uG6NdRORZ4gPj+yq19hzS3tbfocVHhnIB5+QDxY5JruxpYMHjX1m4fYB3x/ZRre//gXdta0WOiwjkB83ESsJP4Mcm5/enAvVu/9xLfPzm3ncAJg3ZuS0WPiQrnBMzHN4kfj9zbQ8DBg3ZwjZbhdf9e2tcH7eCWih6Pos2ODkDqOB44JzqIBlgMvCU6iEm8FVgUHUQD/CvgqdFBSGABoHy8LDqABnlpdACTcPx6M4s8x08FsgBQLp4fHUCDHE9e75s/EnhydBAN4lxXFiwAlINDgBOjg2iYnC6XnBcdQMOcTHrRlRTKAkA5WElaGlXvjo4OYJycYmmCWfjZYGXAAkA58FWp/cupz3KKpSn8RoDCWQAoB4+LDmAK20hfdcvRsugAxsnxsURIY7ctOogpeAlA4SwAlIMHowOYxDbgRcDpwBXBsUxmU3QA42yODmAS60jfTziP9O6E3OQ0fiqUBYBycHd0ABN0k/+lpPfan0N+RcCG6ADGyW381pG+oLgR+D7wPPIrAnLrMxXIAkA5uDM6gHG2AS8kJf+uB0hnkutCIprcXdEBjJNTLOOTf9f3gd8hr8sBOfWZVCxfRZmHW4gfi62k5DGVA4GfZxDnGOm7Cbl4OvH9MUb67O509yOcCWzJIM5be+nUQkSPhQrnBMzD3xA7DjMl/64cioA7yeuxyVmkmCL7ZKbk35VDEXB+D3GWInIcxkawfcqcEzAP5xE3BluBNX3EupSUcKLi/WgfsY7Kx4jrj7X0d1f9GmI/XHRuH7G2XdQYdJsK5wTMwyzgWkbf/72e+U8UtRKwG3jKAPHW7ThSbKPuj17P/CeKWgm4Du+9Gm/U/T+xqXBOwHy8nNH2fb9n/hNFrAR8doh46/YPjLYv+j3znyhiJcAPAe1tlH0/WVPhnIB5uZjR9Puwyb9rlEXAfcBhFcRclxXA/YymL4ZN/l2jLAK+VkG8bTPq4+3EpsI5AfNyKOkRqTr7vKrk37WU9PhZnTHvIj3KlruXUP+lgHVU+ya9URQBd5LX2xtz4fFXoZyA+TmJ9Ha5Ovq76uTfVfdKwH+sIea6vIP6+qGqM/+J6iwCNuPXLqfi8VehnIB5OoX0trQq+/o+0uth63Ig8L2KY94N/HGNMdfl35NWLarsix9T73cHTgXurTjmu0mf/9XkPP4qlBMwX0eQ3uJWVfI4agQxLwA+QjXL4HfT7EfGzgPuYfh+2A38T1Lf1m0l8NMKYh4Dvku6L0JT8/irUE7AvM0G3kx69/0g/XsP8FZgzojjPhP42YAxP0J6WcxBI465DgcB/4u0TYP0xeXAs0Yc81zgjxh8NeAu4I34uF8vPP4qlBOwGRYArwO+zMzXarcBXyEdhBdGBDvO2cAnmLmA2UVKdv+FvO/0H9ThwHtI2zjT6shdpD4b5P0MVVpImkNfJc2p6WLeClwI/DtGs1LRFh5/A+X0OtEo0ZPAMejfQuCZpEsEhwMHkG60uqPTfkReH36BNM4nAceS7gZfDjxMWqG4E/hJ5+8lOJR0vf1w4BDSeG4gnXFfB1xF/H450SLSSsQKUtxLSB+Jugu4jTTntodF11zR41z08bfoje9wAkpSDI+/gbxGJUlSgSwAJEkqkAWAJEkFsgCQJKlAFgCSJBXIAkCSpAJZAEiSVCALAEmSCmQBIElSgSwAJEkqkAWAJEkFsgCQJKlAFgCSJBXIAkCSpAJZAEiSVCALAEmSCmQBIElSgSwAJEkqkAWAJEkFsgCQJKlAFgCSJBXIAkCSpAJZAEiSVCALAEmSCjQ3OgBJfZsNHDyuLQWWTfh3S4AFnf/tks5/t2iSf9e1GdgNPAJsm+TfbQY2jmv3Ar+Z8O92V7qVkmo1KzqADIwF/75joInmAUcCRwNP6LTu35eTEnxu82aMVARsAG7stJvG/f024NGw6JQrj7+Bit74DiegouwPnAicBBzLnkT/eNq3OreTVAR0C4PrgKuAq4EHA+NSLI+/gYre+A4noEbhQOApwMnj2mq8DwfSqsEV49rPO/9O7efxN1DRG9/hBFTV5gPPAM4CTiOd4R8WGVAD3UVaIfgJ8B3gcmBHZECqhcffQEVvfIcTUMOaC5wAnA2cATybtLyv6jwMXAn8ALik8+f20IhUBY+/gYre+A4noPo1D3gm6Qz/OaSz/IWRARXoYfasDnwH+DHeZNhEHn8DFb3xHU5A9WIxsAZ4GfBC4IDYcDTBVuDbwBeALwObYsNRjzz+Bip64zucgJrK44HzSAn/XNK1feVvF2l14CLgn4BfxYajaXj8DVT0xnc4ATXeicCLgReRbt5T811JWhX4ErA2OBbtzeNvoKI3vsMJqOXAy4HXYtJvu2tJlwn+D3BrcCzy+Buq6I3vcAKWaR/S0v5rSMv8bXvxjqa3G7gM+AzwRdI9BBo9j7+Bit74DidgWU4mJf1XAwcFx6I8PAhcCFwAXEr8MaEk0X1d9PG36I3vcAK231LgzcAbgaNiQ1HmbgY+AXyM9G0D1cvjr0KNBTfV5wTgf5OWd6PH2dastp20InACqlP0OKtwTsB2mU26tv8t0nXe6PG1Nb/9gPT+B+8TqV702BbN5Y/4SeAYVGN/4HXA23CZX/W4C/g48BHg/uBY2sLjr0JZgTbbCuB8YAvxY2kro20hFQHL0LCix1KFcwI203zgvaR3wkePoa3Mtgn4T6RvQ2gw0WNYNJc/4ieBY9C/x5Oe3T4lOhCJ9DGil+FTA4Pw+Buo6I3vcAI2y2rSC1yWRwcijXMzcA5wY3QgDePxN1DRG9/hBGyOFcBPgcOiA5EmcQPpM9H3RQfSIB5/A82ODkDq0TzgnzH5K19PIs3ROdGBSL2wAFBTvBuv+St/ZwJ/EB2E1Iuilz86XILK30HALcB+wXFIvdhEulflnuhAGsDjbyBXANQEb8Pkr+Y4APj96CCkmRRd/XRYgeZtHulM6sDoQKQ+3A6sBHZFB5I5j7+BXAFQ7k7H5K/mOYJ0P4CULQsA5e7c6ACkAT0rOgBpOhYAyt3p0QFIAzo1OgBpOhYAyp0fXFFTHREdgDQdv2+t3B0UHUBLbQV2dP4+H1gcGEtb7RsdgDQdCwDlzsQ0uU3AbcC9nbax035Demqi+8+PANs6f+4GNs/w/3cJaWVwAbCo8+fBnXYIsHTcPy/rtCM7/532tjA6AGk6FgDK3WbKTS53kT4uM1mr633zMxUIUzkYOBp4wiSt1Nc33x0dgDQdCwDl7mbS53/bbBdwK3AtcEWn/YR0Nt8U3RWHyyf5v+0PHA+c3GlPBo4jXXpos1uiA5CmYwGg3F0NPCc6iIrdDHwX+BlwFbCWtEzfVg8CP+i0rkXACcBJwNNJY7xy9KHV6rroAKTpFP0WpA7fRJW3FwEXRgcxpA2k5HcJ8C1SAaDHWg6cAZzdaUfHhjO0U5l8RUR7ePwNVPTGdzgB87aQdC38gOhA+rAR+DpwKelM/5bQaJrrKOAsYA3wPOBxkcH0aQOwgnTjpabm8VehxoKbZvZh4sdppnYj8CHSUrbfg6/eHFIx8FfATcSP90ztvXV0QgtFj1PRrH7iJ4FjMLPDgF+T32NV1wIXAV8Bfkj8XCrJU4AXAC8Enkle+9Em0uWLB6IDaYDofSaneaMAVqDN8F+JH6sxYD3wJ7T/yYQmOZI0JtcTPz/GgLfXu7mtEj1WKpwTsBnmk26oihij+4GP4ncJmuB04G9JZ98Rc+Xr+Ir1fnj8VSgnYHOsAO5gNOOyE/gq8HJgn1FsnCq1D/B7wNdIYzmKOXMT6U2J6p3HX4VyAjbLKuB26huPe4H/Rrlvr2ujw4H3kV6sVNe8uR4//jMIj78K5QRsnqXAxVQ7Dr8A3ohn+222EHgTcA3Vzp3vAoeOcDvaxOOvQjkBm2k28E7SHdeD9v0u0h385+DdwCWZRRrzr5LmwKDzZxvwH/Ca/zA8/iqUE7DZDiQ9c30fvff5/cD5pMsJKtsq0lzo56bB+0mXFA4JiLdtPP4G8qwnfhI4BtWYS3r16rmk18muZM/bAzeRXr+7jvQq3suA7QExKl8LSXPnHNI3Co4hfYVyF+lNlHcDPyXNn+8DD8eE2ToefwMVvfEdTkBJiuHxN5DXriRJKpAFgCSyQJ2MAAAGVElEQVRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkAQA7gn9/fvDvS1KEBcG//0jw74ezAIAtwb+/f/DvS1KEJcG//1Dw74ezAIifBCuDf1+SIhwd/PsPBv9+OAuA+BWAE4N/X5IinBD8+9Enf+EsAOILgDXBvy9JEZ4b/PuuAEQHkIE7g3//BcDi4BgkaZQWA78dHMMdwb8fzgIA1gf//r7AK4JjkKRRehXp2Bfp+uDfD2cBkMckeCcwLzoISRqB+cC7ooMgj2N/KAuAPCbBMcDbooOQpBF4O/FPAEAex34F2x/YDYwFt4eB02reVkmK9ExgO/HH213AfjVvqxpiLfETcgzYABxR87ZKUoTDSDfeRR9nx4Ara97WRvASQHJZdAAdhwJfAVZEByJJFToCuBg4PDqQjlyO+crAi4ivSMe3e4Fn17rFkjQap5NWN6OPq+Pb82rdYjXKEuBR4ifl+LYdeA++I0BSM80H3k0e1/zHt0fx+r8m+C7xE3OytgF4CxYCkpphMfBm4Ebij5+TNZf/9RhvIn5iTte2AJ8Dfh84FViGnxKWFGs+6Vh0KvAHwOdJx6ro4+V07fW19EQDzYoOICNLSGfbC6MDkSTVYjuwHNgUHUgOfApgj83ARdFBSJJq8yVM/v/CAmBvfxcdgCSpNhdEB5ATLwHsbRawDnhqdCCSpEpdCxxHevOrcAVgojHgv0cHIUmq3J9j8t+LKwCPNQe4jvSBHklS8/0aWE36BoA6XAF4rF3AB6KDkCRV5n2Y/B/DFYDJzQF+DpwYHYgkaShXAs/AAuAxXAGY3C7SC3e8XiRJzbUb+CNM/pOyAJja5cCno4OQJA3sk8CPo4PIlZcApncwsB54XHQgkqS+bCTd+HdfdCC5cgVgehuB15IeD5QkNcMY8EZM/tOaEx1AA/yK9J2A06MDkST15IPA+dFB5M5LAL2ZR/pcsEWAJOXtcuBMYEd0ILmzAOjdUaSJtTQ4DknS5O4Fng7cFh1IE3gPQO9uAZ5H+ta1JCkvW4DfxuTfMwuA/vwceDHwSHQgkqR/sQN4KemlP+qRNwH272bSe6V/Fy+hSFK03cCrgS9HB9I0FgCDuabTfgeYGxyLJJVqB/Bvgc9HB9JEnsEOZw3wz8D+0YFIUmEeIi37fyM6kKayABjeycDXgGXRgUhSIe4Bng9cER1Ik3kT4PCuAE4BfhQdiCQV4Gekd7KY/IfkPQDVeBC4gPT6yWfjyookVW2M9Ha/V+Irfithoqrei4BP4QeEJKkqG4HXAxdFB9ImrgBU73rg48BC0hupLLIkaTBjwGdJT1xdFRxL65ic6nUy8FFSISBJ6t3VwB/i/VW18SbAel1BulnlDaSvCkqSpncD8Dq8ubp2rgCMzmzSYyvvBZ4WG4okZeca4C+Avwd2BsdSBAuA0ZsFnAe8lnTD4MLYcCQpzMPAhaSnqC4mXfPXiFgAxFpCepPVq4Ez8LXCktpvJ/AD4DPAF4HNseGUywIgH4tJ9wuc3Wkn4T0aktrhJuCSTvsWsCk2HIEFQM72A1YBTwJWd/6+Ati30w7o/Dk/KkBJxdtBeif/ps6fDwG3k27kW096LPoGYEtUgJIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkaTj/H8iPB+y9JBOFAAAAAElFTkSuQmCC";\n          const error_title=document.getElementById("error-title");\n          error_title.innerHTML="Something wrong! Can't download this file";\n          const error_component=document.getElementById("error");\n          error_component.style.display="block";\n          setTimeout(() => {\n              alert("Something wrong! Can't download this file")\n          }, 1000); \n        }\n                })\n                .catch((err) => {\n                    console.log("err",err)\n                });\n            }\n            function getFileType(file_type){\n                switch (file_type) {\n                    case "csv":\n                        return "text/csv";\n                    case "xlsx":\n                        return "";    \n                    case "pdf":\n                        return "application/pdf";\n                    case "zip":\n                        return "application/x-zip-compressed";\n                    default:\n                        return "";\n                }\n            }\n            <\/script></body></html>`),f.document.close(),f.focus())},this.downloadFileZipOtherTab=async()=>{let t=new O.Z,e="",i="",o="",s="";void 0!==this.context&&(void 0!==this.context.infoA&&(void 0!==this.context.infoA.title&&(i=this.context.infoA.title),void 0!==this.context.infoA.form_code&&(e=this.context.infoA.form_code)),void 0!==this.context.componentConfigDefault?(void 0!==this.context.componentConfigDefault.name&&(s=this.context.componentConfigDefault.name),void 0===this.context.componentConfigDefault.code&&void 0===this.context.componentConfigDefault.codeHidden||(o=this.context.componentConfigDefault.codeHidden)):void 0!==this.context.debug_info&&(void 0!==this.context.debug_info.from_action_code&&(o=this.context.debug_info.from_action_code),void 0!==this.context.debug_info.from_action_name&&(s=this.context.debug_info.from_action_name))),void 0!==this.context.infoA_parent&&void 0!==this.context.infoA_parent.form_code&&(e="",o="");let n="";n=void 0!==this.context.key_feedback?this.context.key_feedback:a.ZP.autoUui_key_feedback();let r=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:"neptune_download_workflow_all",app:"ncbsCbs"},form_code:"",from_action_code:""}];r[0].input=Object.assign(r[0].input,this.context.data),t.setBo(r,n);let l=a.ZP.getOncePacked();0!==l?(l++,a.ZP.setOncePacked(l)):l=0,t.setMoreInfo({from_action_code:o,from_action_name:s,form_code:e,form_name:i,oncepacked:l,oncepacked_id:a.ZP.autoID()});let c={Accept:"*/*","Content-Type":"application/json-patch+json"};for(const a in t.getInfo())c[a]=t.getInfo()[a];let d=t.getForTxCode(e,o),h={method:"POST",body:JSON.stringify(d),headers:c},u=window.open("","_blank");u&&u.document&&(u.document.write('<html><head>     <link rel="icon" href="data:image/x-icon;base64,R0lGODlhEAAQAPEAAAAAAAkKCgAAAAAAACH5BAlkAAIAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAC55QkIiIiIoQQQgghhBBCCCEIgiAIgiAIgiAIgiAIgiAIgiAIQhAEgiAQCAQCgUAgEAgCgYBAIBAIBAKBQCAQCAKBgEAgEAgEAoFAIBAIAoGAQCAQCAQCgUAgEAgCgYBAICAgICAgICAgIBAQEBAQICAgICAgICAgICAgEBAQICAgICAgICAgICAgICAQICAgICAgICAgICAgICAgICAgICAgICAgICAQICAgICAgICAgECAgICAgEBAQEBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQIAAAQIKAAAh+QQJZAACACwAAAAAEAAQAAAC55QkIiIiIoQQQgghhBBCCCEIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAQCAQCgUAgEAgCgYBAIBAIBAKBQCAQCAKBgEAgEAgEAoFAIBAIAoGAQCAQCAQCgUAgEAgCgYBAICAgICAgICAgICAQEBAgICAgICAgICAgICAQEBAQECAgICAgICAgICAgIBAQECAgICAgICAgICAgICAgECAgICAgICAgICAQICAgICAgICAgECAgICAgEBAQEBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQIAAAQIKAAAh+QQJZAACACwAAAAAEAAQAAAC55QkIiIiIoQQQgghhBBCCCEIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAKBgEAgEAgEAoFAIBAIAoGAQCAQCAQCgUAgEAgCgYBAICAgICAgICAgICAQEBAgICAgICAgICAgICAgEBAQICAgICAgICAgICAgEBAQEBAgICAgICAgICAgICAQEBAgICAgICAgICAQICAgIBAgICAgECAgICAgEBAQEBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQIAAAQIKAAA7" type="image/x-icon"/> \n            <title>Downloading...</title>'),u.document.write('<style>\n            .lds-spinner {\n                color: official;\n                display: inline-block;\n                position: relative;\n                width: 80px;\n                height: 80px;\n              }\n              .lds-spinner div {\n                transform-origin: 40px 40px;\n                animation: lds-spinner 1.2s linear infinite;\n              }\n              .lds-spinner div:after {\n                content: " ";\n                display: block;\n                position: absolute;\n                top: 3px;\n                left: 37px;\n                width: 6px;\n                height: 18px;\n                border-radius: 20%;\n                background: blue;\n              }\n              .lds-spinner div:nth-child(1) {\n                transform: rotate(0deg);\n                animation-delay: -1.1s;\n              }\n              .lds-spinner div:nth-child(2) {\n                transform: rotate(30deg);\n                animation-delay: -1s;\n              }\n              .lds-spinner div:nth-child(3) {\n                transform: rotate(60deg);\n                animation-delay: -0.9s;\n              }\n              .lds-spinner div:nth-child(4) {\n                transform: rotate(90deg);\n                animation-delay: -0.8s;\n              }\n              .lds-spinner div:nth-child(5) {\n                transform: rotate(120deg);\n                animation-delay: -0.7s;\n              }\n              .lds-spinner div:nth-child(6) {\n                transform: rotate(150deg);\n                animation-delay: -0.6s;\n              }\n              .lds-spinner div:nth-child(7) {\n                transform: rotate(180deg);\n                animation-delay: -0.5s;\n              }\n              .lds-spinner div:nth-child(8) {\n                transform: rotate(210deg);\n                animation-delay: -0.4s;\n              }\n              .lds-spinner div:nth-child(9) {\n                transform: rotate(240deg);\n                animation-delay: -0.3s;\n              }\n              .lds-spinner div:nth-child(10) {\n                transform: rotate(270deg);\n                animation-delay: -0.2s;\n              }\n              .lds-spinner div:nth-child(11) {\n                transform: rotate(300deg);\n                animation-delay: -0.1s;\n              }\n              .lds-spinner div:nth-child(12) {\n                transform: rotate(330deg);\n                animation-delay: 0s;\n              }\n              @keyframes lds-spinner {\n                0% {\n                  opacity: 1;\n                }\n                100% {\n                  opacity: 0;\n                }\n              }\n              body{\n                display:flex;\n                align-items:center;\n                height: 100vh;\n                    width: 100vw;\n                    justify-content: center;\n                    margin: unset !important;\n                }\n              </style>'),u.document.write('</head><body onload="goToReportURL()"><div id="loading" class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>'),u.document.write(`<script>\n            function goToReportURL(){ \n                    alert("Your download will take place here!" + "\\n" + "Click 'OK' to start your download progress!");\n                    fetch('${t.info.u}/Post', ${JSON.stringify(h)}).then((response) => response.text()).then((result) => {\n                        result = JSON.parse(result);\n                        let data;\n                        if (result["fo"] !== undefined)\n                            for (var i = 0; i < result.fo.length; i++)\n                                if (result.fo[i]["input"] !== undefined)\n                                    if (result.fo[i]["input"]["data"] !== undefined)\n                                        data = result.fo[i]["input"]["data"];\n                        if (data) {\n                            let file_content = data.neptune_download_workflow_all.data;\n                            let bstr = atob(file_content),\n                                n = bstr.length,\n                                u8arr = new Uint8Array(n);\n                            while (n--) {\n                                u8arr[n] = bstr.charCodeAt(n);\n                            }\n                            const file = new File([u8arr], 'Neptune-Workflow-${(new Date).toJSON().slice(0,10)}-${(new Date).toJSON().slice(11,19)}.zip', { type: "application/x-zip-compressed" });\n            \n                            const url = URL.createObjectURL(file);\n            \n                            const a = document.createElement("a");\n                            a.href = url;\n                            a.download = file.name;\n                            a.click();\n                            URL.revokeObjectURL(url);\n                            const element = document.getElementById("loading");\n                            element.remove();\n                        }\n                    }).catch((err) => {\n                        console.log("err", err)\n                    });\n            }\n            <\/script>`),u.document.write("</body></html>"),u.document.close(),u.focus())},this.downloadFileFromDataComponent=(t,e,i)=>{var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){if(o.hasOwnProperty("callDirFromSupport")){let a=o.callDirFromSupport("getAdvanced",{list_component:t+";"+e,list_view:"*",inform:"true",checkError:!1},{});console.log("data_form",a);let d=a[t],h=(a[e]?a[e]:e)+"."+i;if(d.split(",").length>1){for(var s=d.split(","),n=s[0].match(/:(.*?);/)[1],r=atob(s[s.length-1]),l=r.length,c=new Uint8Array(l);l--;)c[l]=r.charCodeAt(l);const t=File([c],h,{type:n}),e=URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=t.name,i.click(),URL.revokeObjectURL(e)}else{let t=atob(d),e=t.length,o=new Uint8Array(e);for(;e--;)o[e]=t.charCodeAt(e);const a=new File([o],h,{type:this.getFileType(i)}),s=URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.download=a.name,n.click(),URL.revokeObjectURL(s)}}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.getDataDownload=(t,e,i,o,s)=>{if(void 0!==t&&void 0!==e){var n=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==n){if(n.hasOwnProperty("callDirFromSupport")&&(n.callDirFromSupport("checkValidate",{},{}),n.hasOwnProperty("getFormValidate")&&!n.getFormValidate())){var r;n.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(n.getData("")));let l=n.callDirFromSupport("getAdvanced",{list_component:t,list_view:e,inform:"true",checkError:!1},{});if(void 0!==l[i]&&Array.isArray(l[i]))for(let t=0;t<l[i].length;t++)void 0!==l[i][t]&&void 0!==l[i][t][i]&&void 0!==l[i][t][i][o]&&(void 0===this.input_action[s]?this.input_action[s]=""+l[i][t][i][o]:this.input_action[s]+=","+l[i][t][i][o]);for(const t in this.input_action)(Number.isInteger(Number(t))||Array.isArray(this.input_action[t]))&&delete this.input_action[t];if(null!==this&&void 0!==this&&null!==(r=this.context)&&void 0!==r&&r.data&&"object"===typeof this.context.data){let t=a.ZP.cloneJson(this.context.data);this.input_action=Object.assign(t,this.input_action)}return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!n.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),!0}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.getDataDownloadOne=function(){var e=a.ZP.getFormAppAuto(t.context.infoA.key_form);let i={};if(void 0!==e){let t=e.getData();for(const e in t)t.hasOwnProperty(e)&&(Number.isInteger(Number(e))||Array.isArray(t[e])||(i[e]=a.ZP.cloneJson(t[e])))}return t.input_action=Object.assign(i,t.context.data),!0}}getFileType(t){switch(t){case"csv":return"text/csv";case"xlsx":default:return"";case"pdf":return"application/pdf";case"zip":return"application/x-zip-compressed"}}}const oe=ie;class ae extends r.Z{constructor(){super(...arguments),this.updateProcess=()=>{},this.onStopProcess=()=>{var t=a.ZP.getFormAppAuto(this.input.form_code);t.callDirFromSupport("setCMD",{list_component:"start"},{disabled:"false"}),t.callDirFromSupport("setCMD",{list_component:"stop"},{disabled:"true"}),t.getDataAll()},this.stopProcessClick=()=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);for(let e in this.input)this.input_action[e]=this.input[e];t.callDirFromSupport("setCMD",{list_component:"start"},{disabled:"false"}),t.callDirFromSupport("setCMD",{list_component:"stop"},{disabled:"true"}),setTimeout((()=>{0}),2e3)},this.refreshTableProcess=()=>{this.input_action={};var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);return void 0!==t&&t.getDataAll(),!0},this.setDataInformJobProcessInterval=()=>{var t=a.ZP.getFormAppAuto(this.input.form_code);void 0!==t?t.putDataAll_andSet(this.input):a.ZP.AppException("#form.reloadData","form is undefined","system")},this.onClickStartProcess=t=>{let e=a.ZP.modalDynamicFromFromCode_getRoleBack();a.ZP.modalDynamicFromFromCode_close();var i=a.ZP.getFormAppAuto(e.context.infoA.key_form),o=a.ZP.getFormAppAuto(this.context.infoA.key_form);i.getDataAll(),this.input_action=o.getDataAll();let s=i.callDirFromSupport("getAdvanced",{list_component:"date_range;date"},""),n=parseInt(s.date_range);isNaN(n)&&(n=1),i.callDirFromSupport("setCMD",{list_component:"start"},{disabled:"true"}),i.callDirFromSupport("setCMD",{list_component:"stop"},{disabled:"false"}),this.input_action.days=n>0?n:1,this.input_action.form_code=e.context.infoA.key_form,this.input_action.working_date=a.ZP.context_get("user_acc").working_date,this.input_action.to_date=s.date;for(let a in this.input)this.input_action[a]=this.input[a];return!0},this.getJobRowCheckBox=()=>{if(this.input_action={},a.ZP.getFormAppAuto(this.context.infoA.key_form).getDataAll(),void 0!==this.context.data){let t=this.context.data,e=[];if(t.length>0)for(let i=0;i<t.length;i++)e.push(t[i].O9_job_process_refesh_table_summary.step_name);this.input_action={step_names:e};for(let i in this.input)this.input_action[i]=this.input[i];return!0}return a.ZP.AppException("#form.getJobRowCheckBox"),!1}}}const se=ae,ne="form_status",re="start_after_hour",le="start_after_minute",ce="start_after_seconds",de="steps_summary",he="o9_admin_sync",ue="START",pe={role_system:0,user_info:1,user_role:2,user_password:3,role_cache_fo:4,role_cache_bo:5,role_cache_jwebui:6,data_cdlist:7,data_country:8,data_currency:9,fo_form:10,fo_menu:11},_e={start_count_down:void 0,get_info:void 0};function fe(t){var e;const i=null===t||void 0===t||null===(e=t.infoA)||void 0===e?void 0:e.key_form;if(i)return a.ZP.getFormAppAuto(i)}function ge(t,e,i){t.callDirFromSupport("setAdvanced",{list_component:e},i)}class me{static handleStart(t,e){const i=fe(t),o=function(t){return t.callDirFromSupport("getAdvanced",{list_component:"*"},{})}(i);ge(i,ne,ue);const a=o[re],s=o[le];let n=1e3*o[ce]+60*s*1e3+60*a*60*1e3;_e.start_count_down=setInterval((()=>{if(n<=0)clearInterval(_e.start_count_down),i.setLoadingAction(!0),e();else{n-=1e3;let t=new Date(n);ge(i,re,t.getUTCHours()),ge(i,le,t.getUTCMinutes()),ge(i,ce,t.getUTCSeconds())}}),1e3)}static handleSelectFeature(t,e,i){const o=fe(t),a=o.getDataForm();let s=a[he][de]||[];!0===a[he][e]?(s=s.map((t=>t[de])),s.push({code:e,name:i,status:"N",process:0,info:""}),s=s.sort(((t,e)=>pe[t.code]>pe[e.code]?1:-1))):s=s.filter((t=>t[de].code!==e)),a[he][de]=s,o.putDataAll_andSet(a)}static updateInfo(t,e,i){const o=fe(t);let a=o.getDataForm(),s=a[he][de]||[],n=!0;for(const d in s){var r,l,c;let t=s[d][de];const o=t.code;t.info=(null===(r=e.info)||void 0===r?void 0:r[o])||"";let a=(null===(l=e.error)||void 0===l?void 0:l[o])||"";t.info+=a,100!==t.process&&(n=!1);const h=(null===(c=e.process)||void 0===c?void 0:c[o])||0;t.process=h,h>=100?t.status="S":(h>0||0===d)&&(t.status="R"),a&&(t.status="F",i())}n?i():o.putDataAll_andSet(a)}static getData(t){return fe(t).getDataForm()}}me.handleStop=t=>{const e=fe(t);ge(e,ne,"STOP"),e.setLoadingAction(!1),_e.start_count_down&&clearInterval(_e.start_count_down)};class ve{static async callBO(t){let e=[{txcode:t,input:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}];return(0,c.Yr)(e,{}).then((t=>a.ZP.foGetData("data",t)))}static async callFunction(t,e){return e.function_name=t,this.callBO("bo-sync-optimal9",e)}static async getInfo(){return this.callFunction("getInfo",{})}static handleStop(){console.log("Stop sync")}static startSync(t){console.log("Start sync"),this.callFunction("syncAll",t)}static notifyAllUser(){console.log("notifyBeginSync")}static logoutAllUser(){console.log("notifyBeginSync")}}class be{}be.getListHTML=(t,e)=>{},be.saveListForm=(t,e)=>{let i=a.ZP.cloneJson(t),o={},s=Object.keys(i.list_form);for(let a=0;a<10;a++)if(s[t.startIndexBuild+a]){let e=s[t.startIndexBuild+a];o[e]=i.list_form[e]}i.list_form=o,delete i.list_form_data_j,0!==t.startIndexBuild&&delete i.list_menu};const ye=be;var Ae=i(3063);const De={view_name:0,cpn_name:1,cpn_child_name:2,key_name:4,function:7,is_group:8,cpn_type:9,mask:10,no_modify:11,hidden:12,disable:13,data_default:14,min_value:15,max_value:16,max_length:17,required:18,condition:20,cdlist:21,is_get_api:22,value_type:24,api_main_node:25,api_main_node_chil:26,api_main_addr:27,api_cpn_node:28,api_cpn_addr:29,node_data:30,flow_data:31,list_CCL_FEE:32,list_GET_FEE:33,fee_active_fields:34,ftags:35,list_AUTO_FEE:36,auto_fee_active_fields:37,rulefunc:38,component_code:-1,codeHidden:-1,table_node:-1,api_cpn_id:-1,action_fo:-1,request_url:-1,api_method:-1,action_fo_name:-1,sum_name:-1,mutiform_code:-1},ke={config:{structable:"",structable_read:"",data_default:""},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:""},Oe=()=>(0,Ae.Z)({},ke),we={Search:{color:"primary",icon:"fa-search"},Save:{color:"success",icon:"fa-save"},View:{color:"info",icon:"fa-eye"},Delete:{color:"danger",icon:"fa-trash-o"},Import:{color:"primary",icon:"fa-upload"},Add:{color:"primary",icon:"fa-plus"},Accept:{color:"primary",icon:"fa-plus"},Modify:{color:"warning",icon:"fa-pencil-square-o"},Clear:{color:"default",icon:"fa-trash-o"},Copy:{color:"primary",icon:"fa-files-o"}},Ce={default:{name:"errorJWebUI",code:"errorJWebUI_code",codeHidden:"c2a97a17e41cb223",class:"col-sm-12 col-md-12",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"",structable:"errorJWebUI.count",structable_read:"errorJWebUI.count",data_default:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_disabled:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"},xe={info:{title:"O9_FEE",des:"O9_FEE",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"false",url_input:"",form_code:"O9_FEE",ruleStrong:[{code:"visibility",config:{component_event:"on_click",component_action:"btn_add;btn_modify",component_result:"table_fee;ifccd;ifcval;btn_apply",condition:"",visible:"not_use",ena_dis:"false",view_result:"code",list_config:[]},inUse:!0,order:1,isStart:!1},{code:"visibility",config:{component_event:"on_click",component_action:"btn_add;btn_modify",component_result:"btn_add",condition:"",visible:"not_use",ena_dis:"true",view_result:"",list_config:[]},inUse:!0,order:1,isStart:!1},{code:"visibility",config:{component_event:"on_click",component_action:"btn_apply",component_result:"btn_add",condition:"",visible:"not_use",ena_dis:"false",view_result:"",list_config:[]},inUse:!0,order:1,isStart:!0},{code:"visibility",config:{component_event:"on_click",component_action:"btn_apply",component_result:"*;btn_apply",condition:"",visible:"not_use",ena_dis:"true",view_result:"",list_config:[]},inUse:!0,order:1,isStart:!0},{code:"visibility",config:{component_event:"all",component_action:"btn_modify",component_result:"ifccd;ifcval;btn_apply",condition:"",visible:"not_use",ena_dis:"false",view_result:"",list_config:[]},inUse:!0,order:1},{code:"setValue",config:{component_event:"all",component_action:"valtype",component_result:"",isGetOOP:"true",getOOPFormat:'{\n    "valtypect": "c_cdlist.caption"\n}'},inUse:!0,order:2,isStart:!0},{code:"visibility",config:{component_event:"on_change",component_action:"",component_result:"valtype;valtypect;data_fee;paysrc",condition:"",visible:"false",ena_dis:"not_use",view_result:"",list_config:[]},inUse:!0,order:3,isStart:!0}],lang_form:{},mode_form:{mode:"1",col_text:"",col_input:""}},list_layout:[{name:"Fee",des:"",class:"",lang:{en:"Fee",vi:"Fee"},lang_des:{vi:"",en:""},codeHidden:"2016bef2e4e3edbe",inputtype:"cLayout",list_view:[{name:"M?u view",code:"code",codeHidden:"1aee1cb6ec37f32b",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Interest/fee/charge code",code:"ifccd",codeHidden:"a52314186a1a99a5",class:"",condition:"",ofgroup:"ifccd",class_ofgroup:"",role:""},config:{txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',useAction:"true",is_upperCase:"false",action:"",structable:"form_child.ifccd",structable_read:"form_child.ifccd",data_default:"",isLookup:"true",callform:"FO_DPT_CDPifccd",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_password:"false",is_upper:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"},{default:{name:"ifcname",code:"ifcname",codeHidden:"6230b0f3664a3530",class:"",condition:"",ofgroup:"ifccd",class_ofgroup:"",role:""},config:{action:"",structable:"form_child.ifcname",structable_read:"form_child.ifcname",data_default:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:""},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jLabel"},{default:{name:"Payment source",code:"paysrc",codeHidden:"033d396504dd7b26",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.paysrc",structable_read:"form_child.paysrc",cdlist:{query:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='PAYSRC' orderby c_cdlist.cdidx",cdgrp:"IFC",cdname:"PAYSRC"},data_default:"",data_mode:"cdlist",query_data:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='PAYSRC' orderby c_cdlist.cdidx",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:"[]",key_selected:"c_cdlist.cdid",useAction:"true"},role:{disabled:"",visible:"",other:"",other2:""},property:{},validate:{request:!1},lang:{ui:{vi:{"Payment source":"Payment source"},en:{"Payment source":"Payment source"}}},configAVD:{},inputtype:"jSelect"},{default:{name:"Value",code:"ifcval",codeHidden:"399d64cdf7409c9a",class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.ifcval",structable_read:"form_child.ifcval",data_default:"",format:"#,###.00",decimal_length:"5"},role:{visible:"",disabled:""},property:{},validate:{request:!1,min:0,max_length:16},lang:{},configAVD:{},inputtype:"jCurrency"},{default:{name:"Value Type",code:"valtype",codeHidden:"ef35ff134e49edbd",class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.valtype",structable_read:"form_child.valtype",cdlist:{query:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='VALTYPE' orderby c_cdlist.cdidx",cdgrp:"IFC",cdname:"VALTYPE"},data_default:"",data_mode:"cdlist",query_data:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='VALTYPE' orderby c_cdlist.cdidx",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:"[]",key_selected:"c_cdlist.cdid",useAction:"false"},role:{disabled:"",visible:"",other:"",other2:""},property:{},validate:{request:!1},lang:{ui:{vi:{"Value Type":"Value Type"},en:{"Value Type":"Value Type"}}},configAVD:{},inputtype:"jSelect"},{default:{name:"valtypect",code:"valtypect",codeHidden:"19aaddd5d0ee664c",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',useAction:"true",is_upperCase:"false",action:"",structable:"form_child.valtypect",structable_read:"form_child.valtypect",data_default:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_disabled:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"}]},{name:"M?u view",code:"code",codeHidden:"ed54c39ee7144f0b",inputtype:"cView",isTab:"false",class:"col-sm-12",list_input:[{default:{name:"Add",code:"btn_add",codeHidden:"p5685f65655469i59",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"default_save",txFoActions:'[\n    {\n        "function": "own_O9_fee.FeeAdd",\n        "status": "A",\n        "para": [\n            "form_child"\n        ]\n    }\n]',txFo:'[\n    {\n        "txcode": "#sys:fo-clearDataFormChild",\n        "input": {\n            "node_clear": "linkage_detail"\n        }\n    }\n]',useAction:"true",icon:"fa-plus",color:"primary",onTable:"",isMasterData:"false",tableMasterData:"word_typing",privateKeyTableMasterData:"id"},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{default:{name:"Apply",code:"btn_apply",codeHidden:"3261a21a29bfc6f5",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"",txFoActions:"",txFo:'[\n    {\n        "txcode": "fo-convert-dataFee-formchild",\n        "input": {}\n    }\n]',useAction:"false",icon:"fa-floppy-o",color:"success",onTable:"",isMasterData:"false",tableMasterData:"",privateKeyTableMasterData:""},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{default:{name:"",code:"table_fee",codeHidden:"p6d5o69he73n34",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.ifcfees",query_data:"ifcfees",paging_record:"5",columns:'[{ "code": "ifcfees.ifccd", "title": "IFC code",  "inputtype": "ColumnString",  "config": {}   }, { "code": "ifcfees.valtype",     "title": "Value type", "inputtype": "ColumnCdlist", "config": {"cdgrp": "IFC","cdname": "VALTYPE"}    },    {        "code": "ifcfees.ifcval",        "title": "Value",        "inputtype": "columnCurrency",        "config": {            "decimal_length": "5"        }    },    {        "code": "ifcfees.ifcbamt",        "title": "Fee",  "isSum": true,  "sumTitle": "Total Amount",        "inputtype": "columnCurrency",        "config": {            "decimal_length": "2"        }    },    {        "code": "ifcfees.flrval",        "title": "Floor",        "inputtype": "columnCurrency",        "config": {            "decimal_length": "2"        }    },    {        "code": "ifcfees.ceival",        "title": "Ceiling",        "inputtype": "columnCurrency",        "config": {            "decimal_length": "2"        }    },    {        "code": "ifcfees.ccrcd",        "title": "Currency",        "inputtype": "ColumnString",        "config": {}    }]'},role:{},property:{},validate:{},lang:{vi:{"IFC code":"IFC code","Value type":"Value type",Value:"Value",Fee:"Fee",Floor:"Floor",Ceiling:"Ceiling",Currency:"Currency"},en:{"IFC code":"IFC code","Value type":"Value type",Value:"Value",Fee:"Fee",Floor:"Floor",Ceiling:"Ceiling",Currency:"Currency"}},configAVD:{},inputtype:"jTableForm"}]},{name:"M?u view",code:"formchild",codeHidden:"1cacae7586c074d8",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Modify",code:"btn_modify",codeHidden:"p6d988np4t55480",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"default_view",txFoActions:'[\n    {\n        "function": "own_O9_fee.FeeModify",\n        "status": "A",\n        "para": [\n            "form_child"\n        ]\n    }\n]',txFo:'[\n    {\n        "txcode": "#sys:fo-selectDataFormChild",\n        "input": {\n            "node_set": "linkage_detail"\n        }\n    }\n]',useAction:"true",icon:"fa-edit",color:"warning",onTable:"table_fee",isMasterData:"true",tableMasterData:"word_typing",privateKeyTableMasterData:"id"},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{default:{name:"Remove",code:"btn_remove",codeHidden:"sp5555D4c33A84j",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"default_delete",txFoActions:'[\n    {\n        "function": "own_O9_fee.FeeRemove",\n        "status": "A",\n        "para": [\n            "ifcfees"\n        ]\n    }\n]',txFo:"[]",useAction:"true",icon:"fa-trash",color:"danger",onTable:"table_fee",isMasterData:"true",tableMasterData:"word_typing",privateKeyTableMasterData:"id"},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"}]}]}],react_txt:""};var Se={error:[]};class Me{static readComponentCode(t){return t.split(" ").join("")}static exceptionAuto(t,e,i){Se.error.push({key:t,content:e,priority:i})}static getParaAPI(t){if("string"!==typeof t)return[];let e=[],i=new RegExp("{([^@{}]*)}","g"),o=i.exec(t);for(;o;)e.push({key:o[0],code:o[1]}),o=i.exec(t);return e}static getParaFunction(t){if("string"!==typeof t)return[];let e=[],i=new RegExp("\\((.*)\\)","g"),o=i.exec(t);for(;o;)e.push({key:o[0],code:o[1]}),o=i.exec(t);return e}}Me.convertComponentType=t=>{switch(t.cpn_type){case"LBL":t.cpn_type="Label",t.cpn_name=t.api_main_node,t.value_type="Text";break;case"TXT":t.cpn_type="Text box",t.value_type="Text";break;case"CBO":t.cpn_type="Combo box";break;case"MKD":t.cpn_type="Date",t.value_type="Long Date",t.mask="DD/MM/YYYY";break;case"CCY":t.cpn_type="Currency",t.value_type="Number",t.mask=t.fdec+"";break;case"MKN":t.cpn_type="Number",t.value_type="Number",t.mask=t.mask.replace(/#/g,"_");break;case"MKT":t.cpn_type="MaskNumber",t.value_type="Text",t.mask=t.mask.replace(/#/g,"_");break;case"TET":t.cpn_type="Text box",t.value_type="Text",t.mask.length>0&&(t.cpn_type="MaskNumber",t.mask=t.mask.replace(/#/g,"_"));break;case"CHK":t.cpn_type="Check box"}return t},Me.convertMask=t=>(""===t.mask&&0===t.cpn_type.indexOf("Mask")&&(t.cpn_type="Text box"),t),Me.convertValuetype=(t,e)=>{let i=t.value_type;switch(i){case"J":t.value_type="Text",e&&null!==e&&void 0!==e&&e.cpn_child_name?t.cpn_type="Mutivalue":t.cpn_type="Text box";break;case"D":t.value_type="Long Date";break;case"C":t.value_type="Text";break;case"N":t.value_type="Number";break;case"L":t.value_type="";break;default:console.error(t,"convertValuetype==>",i)}return t},Me.convertDefaultFO=t=>{let e=t.data_default||"";switch(e){case"#ADD_MONTHS(O9SYS.O9CORE.GETBUSDATE,12)":t.data_default='libDate_cal(${user_acc.workingdate},{"M":12})';break;case"#ADD_MONTHS(O9SYS.O9CORE.GETBUSDATE,1)":t.data_default='libDate_cal(${user_acc.workingdate},{"M":1})';break;case"#LAST_DAY(O9SYS.O9CORE.GETBUSDATE)":case"#O9CORE.GETBUSDATE":case"@O9BUSDATE":case"#O9SYS.O9CORE.GETBUSDATE":t.data_default="${user_acc.workingdate}";break;case"@CRRUSRCD":t.data_default="${user_acc.usrcode}";break;case"@CRRUSRID":t.data_default="${user_acc.usrid}";break;case"@CRRLGNAME":t.data_default="${user_acc.loginname}";break;case"@CRRBRID":t.data_default="${user_acc.branchid}";break;case"@CRRBRCD":t.data_default="${user_acc.branchcode}";break;default:(e.includes("%")||e.includes("@")||e.includes("#"))&&(console.log("error mask =>",e),"@CRRBCY"!==e&&console.log("row_json error===",t))}return t},Me.convertRuleFunc=t=>{let e="",i=t.rulefunc;if(t.rulefunc)for(let o=0;o<i.length;o++){""!==e&&(e+="<br>");const t=i[o];e+=`${t.rule}(${JSON.stringify(t)})`}return t.function=e,t},Me.convertMaxLength=t=>{let e=Number.parseInt(t.max_length);return t.min_value="",e<0?(t.max_length=-e,t.min_value=""):t.min_value=0,t.max_length=t.max_length.toString(),t.min_value=t.min_value.toString(),"descs"===t.key_name&&(t.max_length="250"),"caccount_name2"===t.key_name&&(t.max_length="250"),"account_name"===t.key_name&&(t.max_length="250"),t},Me.convertOfGroup=t=>(t.mtdata&&"Yes"===t.mtdata&&(t.is_group=t.api_main_node),t.api_main_node&&0===t.api_main_node.indexOf("txb_")&&(t.is_group=t.api_main_node.replace("txb_","")),t),Me.addComponentHidden=t=>t,Me.convertFdec=t=>(t.fdec&&!isNaN(t.fdec)&&(t.cpn_type="Currency",t.mask=`#number.${t.fdec}`),t),Me.convertDataFormFO=t=>{for(let a=0;a<t.length;a++){let s=t[a],n=t[a+1];var e,i,o;if("Button"!==s.cpn_type)null===(e=s)||void 0===e||!e.api_main_node||null===(i=s)||void 0===i||!i.key_name||null!==(o=s)&&void 0!==o&&o.cpn_name||(s.cpn_name=s.api_main_node),s=Me.convertValuetype(s,n),s=Me.convertComponentType(s),s=Me.convertMask(s),s=Me.convertDefaultFO(s),s=Me.convertRuleFunc(s),s=Me.convertMaxLength(s),s=Me.convertOfGroup(s),s=Me.convertFdec(s)}return t=Me.addComponentHidden(t)},Me.convertHtmlTableToArray=(t,e)=>{let i=t;i=Me.convertDataFormFO(i);let o=[[e],[],[],[e],[e]],a=De;for(const s of i){let t=[];for(const e in a)if(a.hasOwnProperty(e)){const i=a[e];i>=0&&(s.hasOwnProperty(e)?("object"===typeof s[e]&&(s[e]=JSON.stringify(s[e])),t[i]=s[e].toString()):t[i]="")}o.push(t)}for(const s of o)for(let t=0;t<32;t++)s[t]||(s[t]="");return o},Me.getCodeSmooth=t=>t=(t=(t=t.replace(/[\W]+/g," ")).toLowerCase().trim()).replace(/[\W]+/g,"_"),Me.removeSpace=t=>t=t.replace(/ /g,""),Me.convertArrayToJsonCPN=(t,e,i)=>{let o={};for(const a in De)if(De.hasOwnProperty(a)){const e=De[a];let s=t[i][e];o[a]=void 0!==s?s.trim():""}if(o.data_default=Me.convertDataDefault(o.data_default),o.cpn_type=Me.removeSpace(o.cpn_type),"Number"===o.cpn_type&&""!==o.mask&&(o.cpn_type="Currency"),o.api_main_node.includes("=")){let t=o.api_main_node.split("=");o.api_main_node=t[0].trim(),o.api_main_node_src=t[1].trim()}if(o.codeHidden=a.ZP.autoID(),""===o.key_name?o.component_code=Me.getCodeSmooth(o.cpn_name+o.cpn_child_name):o.component_code=Me.getCodeSmooth(o.key_name),""===o.api_main_node&&""===o.api_main_node_chil?o.table_node=Me.getCodeSmooth(o.cpn_name+o.cpn_child_name):o.table_node=o.api_main_node+o.api_main_node_chil,""!==o.api_main_addr||""!==o.api_cpn_addr){let i=o.api_main_addr+o.api_cpn_addr,a=i.indexOf(" ");o.api_method=i.substring(0,a).trim(),o.request_url=i.replace(o.api_method,"").trim(),o.api_cpn_id=Me.getCodeSmooth(t[0][0]+"_"+e+"_"+o.component_code+"_"+o.api_main_addr+o.api_cpn_addr)}return o.action_fo_name=Me.removeSpace("Action"+o.cpn_type+o.cpn_name+o.cpn_child_name+"FormFO"),o.sum_name=o.cpn_name+o.cpn_child_name,"Mutivalue"===o.cpn_type&&(o.mutiform_code=Me.getCodeSmooth(t[0][0]+"_"+o.component_code)),"Label"===o.cpn_type&&(o.no_modify="Yes"),o},Me.convertTableToArrayJson=(t,e)=>{let i=[];for(let o=4;o<t.length;o++){let a=Me.convertArrayToJsonCPN(t,e,o);i.push(a)}return i},Me.getComponentWithName=(t,e)=>{for(let i=0;i<t.length;i++){const o=t[i];if(o.cpn_name===e)return o}console.error("Cant not find component --\x3e",e)},Me.getComponentWithCode=(t,e)=>{for(let i=0;i<t.length;i++){const o=t[i];if(o.component_code===e)return o}console.error("Cant not find component --\x3e",e)},Me.replaceRequestUrl=(t,e,i)=>{let o=t,a=Me.getParaAPI(t);for(let s=0;s<a.length;s++){const t=a[s];let n=Me.getComponentWithName(e,t.code);o=void 0!==n?o.replace(t.key,`@{${i}.${n.table_node}}`):o.replace(t.key,`@{${i}.${t.code}}`)}return o},Me.buildMappingMainAPI=(t,e)=>{if(""===t.api_main_addr)return{};let i={},o="";for(let a=0;a<t.length;a++){const s=t[a];""!==s.api_main_node?(o=s.api_main_node,"Yes"!==s.no_modify&&!1===s.function.includes("auto create after save successfully")&&(i[o]=Me.getMapFunction(t,a,o,e))):""!==s.api_main_node_chil&&("string"!==typeof i[o]&&void 0!==i[o]||(i[o]={}),"Yes"!==s.no_modify&&!1===s.function.includes("auto create after save successfully")&&(i[o][s.api_main_node_chil]=Me.getMapFunction(t,a,o,e)||""))}return i},Me.getMapFunction=(t,e,i,o)=>{let a=t[e];if(""!==a.cpn_child_name)switch(a.value_type){case"Text":case"Text Date":return`MapS.dataS(${o.table+"."+i+"."+a.api_main_node_chil})`;case"Number":return`MapS.dataN(${o.table+"."+i+"."+a.api_main_node_chil})`;case"Long Date":return`MapS.dateDDMMYYYY(${o.table+"."+i+"."+a.api_main_node_chil})`;default:console.error("Error MAP ====>",a)}else if(""!==a.api_main_node)switch(a.value_type){case"Text":return a.api_main_node_src?`MapS.Text${a.api_main_node_src}`:`MapS.dataS(${o.table+"."+a.api_main_node})`;case"Number":return a.api_main_node_src?`MapS.Number${a.api_main_node_src}`:`MapS.dataN(${o.table+"."+a.api_main_node})`;case"Long Date":return`MapS.dateDDMMYYYY(${o.table+"."+a.api_main_node})`;case"Text Date":return`MapS.dataS(${o.table+"."+a.api_main_node})`;default:return console.error("Error MAP ====>",a),`MapS.Error(data_login.${a.api_main_node})`}},Me.countComponent=t=>{let e=0;for(let i=0;i<t.length;i++){let o=t[i];for(let t=0;t<o.list_view.length;t++){let i=o.list_view[t];for(let t=0;t<i.list_input.length;t++)e++}}return e},Me.convertDataDefault=t=>{if(!1===t.includes("#"))return t;switch(t){case"#userbranch":return"${user_acc.branchid}";case"#usercode":return"${user_acc.usrcode}";case"#default_value":return"";default:return console.error("Error Default ====>",t),""}},Me.convertCode=(t,e)=>{const i=/(\w+)/gm;let o,a=t;for(;null!==(o=i.exec(t));)o.index===i.lastIndex&&i.lastIndex++,e.includes(o[1].trim())&&(a=a.replace(o[1],`@{${o[1].toLocaleLowerCase()}}`));return a},Me.convertSUBSTRING=t=>{const e=/SUBSTRING\((\w+),(\d+),(\d+)\)=(\w+)/gm;let i;for(;null!==(i=e.exec(t));)i.index===e.lastIndex&&e.lastIndex++,t=`'@{${i[1]}}'.substring(${i[2]},${i[3]})='@{${i[4]}}'`;return t},Me.convertConditionVBtoJS=(t,e,i)=>{let o=e.split(";");if("string"!==typeof t||""===t)return"";t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/'NULL'/g," null ")).replace(/ AND /g," && ")).replace(/ OR /g," || ")).replace(/ and /g," && ")).replace(/ or /g," || ")).replace(/=/g," === ")).replace(/<>/g," !== ")).replace(/< ===/g," <= ")).replace(/=== >/g," >= ");let s=a.ZP.getArrayWithRegex(t,"(\\w+)");if(void 0!==s&&s.length>0)for(const _ of s){let e=_.key,i=_.code;if(o.includes(i.toLowerCase())){let o=!1,s=a.ZP.getArrayWithRegex(t,"'([^']*)'");for(const t of s){const e=a.ZP.getArrayWithRegex(t.code,"(\\w+)");for(const t of e)t.code.toLocaleLowerCase()===i.toLocaleLowerCase()&&(o=!0)}!1===o&&(t=t.replace(e,`@{${i.toLowerCase()}}`))}else t=!1===isNaN(i)&&""!==i?t.replace(e,i+""):t.replace(e,`${i}`)}let n=a.ZP.getArrayWithRegex(t,"CONTAINS\\(([^)]*)\\)");if(void 0!==n&&n.length>0)for(const a of n){let e=a.key,i=a.code;t=t.replace(e,`${i.split(",")[0].trim()}.split("|").includes('${i.split(",")[1].trim()}')===true`)}let r,l=/(@{[^'}]+})([ ]*===[ ]*null)/gm,c=t;for(;null!==(r=l.exec(t));)r.index===l.lastIndex&&l.lastIndex++,c=c.replace(r[1]+r[2],`!'${r[1]}'`);for(l=/(@{[^'}]+})([ ]*!==[ ]*null)/gm;null!==(r=l.exec(t));)r.index===l.lastIndex&&l.lastIndex++,c=c.replace(r[1]+r[2],`!!'${r[1]}'`);const d=/(@{[^'}]+})([ ]*===[ ]*')/gm;for(;null!==(r=d.exec(t));)r.index===d.lastIndex&&d.lastIndex++,c=c.replace(r[1]+r[2],`'${r[1]}'${r[2]}`);const h=/(@{[^'}]+})([ ]*!==[ ]*')/gm;let u=c;for(;null!==(r=h.exec(c));)r.index===h.lastIndex&&h.lastIndex++,u=u.replace(r[1]+r[2],`'${r[1]}'${r[2]}`);u=Me.convertSubstring_1(u),u=Me.convertSubstring_2(u),u=Me.convertFloor(u);let p=a.ZP.getArrayWithRegex(u,"(@{[^}]+})");for(const a of p)u=u.replace(a.key,a.key.toLowerCase());if((null===i||void 0===i?void 0:i.length)>0){let t=a.ZP.getArrayWithRegex(u,"@{([^}]+)}");u=" "+u+" ";for(const e of t){let o=Me.getComponentWithCode(i,e.code);void 0===o&&(console.log("string_cd==",t),console.log("data_arr_json==",i),console.log("cd====",e)),void 0!==o&&"Text"===o.value_type&&(u=u.replace(` ${e.key} `,` '${e.key}' `))}}return u=u.replace(/===/g,"=="),u},Me.convertSubstring_1=t=>{const e=/SUBSTRING\(([^,]+),(\d+),(\d+)\) === (@{\w+})/gm;let i,o=t;for(;null!==(i=e.exec(t));)i.index===e.lastIndex&&e.lastIndex++,o=o.replace(i[0],`'${i[1]}'.substring(${i[2]},${i[3]}) === '${i[4]}'`);return o},Me.convertSubstring_2=t=>{const e=/SUBSTRING\(([^,]+),(\d+),(\d+)\) === '/gm;let i,o=t;for(;null!==(i=e.exec(t));)i.index===e.lastIndex&&e.lastIndex++,o=o.replace(i[0],`'${i[1]}'.substring(${i[2]},${i[3]}) === '`);return o},Me.convertFloor=t=>t.replace(/FLOOR/g,"Math.floor");class Pe{}Pe.validateFormName=(t,e)=>{""===t[0][0].trim()&&e.push({row:1,col:"A",content:"Can not blank"})},Pe.validateFormView=(t,e)=>{""===t[4][1].trim()&&""===t[4][2].trim()||e.push({row:4,col:"A",content:'View Name Only"'})},Pe.validCPNName=(t,e,i)=>{""===e[0].trim()&&""===e[1].trim()&&""===e[2].trim()&&e["System"!==De.value_type]&&i.push({row:t,col:"A|B|C",content:"Cant not blank all"})},Pe.validCPNType=(t,e,i)=>{""===e[De.cpn_type].trim()&&""===e[0]&&e["System"!==De.value_type]&&i.push({row:t,col:"",value:"",content:"Cant not determined Component type"})},Pe.validCPNCdlist=(t,e,i)=>{let o=e[De.cdlist];if(""===o.trim())return;o=o.replace(/\W+/g," ").trim();let s=o.split(" ");if(2!==s.length)return void i.push({row:t,col:"",value:o,content:"Cant not determined Cdlist"});let n=s[0].trim(),r=s[1].trim();0===a.ZP.data_cdList(r,n).length&&i.push({row:t,col:"",value:o,content:"Don't have data CDLIST"})},Pe.validateDataTable=(t,e)=>{if(void 0===t||0===t.length)return[{form_name:e,row:"",col:"",value:"",content:"Not find data"}];let i=[];Pe.validateFormName(t,i),Pe.validateFormView(t,i);for(let o=4;o<t.length;o++){const e=t[o];Pe.validCPNName(o,e,i),Pe.validCPNType(o,e,i)}return i.forEach((t=>{void 0===t.form_name&&(t.form_name=e)})),i};const Te=Pe;const Ie=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe();return n.inputtype="cTextInput",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:this.buildClass(a),condition:"",role:"",ofgroup:a.is_group},n.config={action:"",structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:""},n.validate={request:"Yes"===a.required,min:""===a.min_value?void 0:parseInt(a.min_value),max:""===a.max_length?void 0:parseInt(a.max_length)},"descs"===n.default.component_code&&Number(n.validate.max)<100&&(n.validate.max="100"),n},this.buildClass=t=>{let e=t.max_length;return""===e||(e=parseInt(e)),"col-sm-12 col-md-6"}}};const Fe=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i];let n=Me.getComponentWithName(t,"Search")||{},r=[{txcode:"#sys:fo-delete-dataAPI",input:{table_code:s.table,table_col_key:"",learn_api:a.api_cpn_id,learn_api_search:n.api_cpn_id}}];return JSON.stringify(r)}}};const Ne=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i];let n=[{txcode:"#sys:fo-search-API",input:{list_component:a.component_code,list_view:"code",table_code:s.table,learn_api:a.api_cpn_id}}];return JSON.stringify(n)}}};const Le=class{constructor(){this.build=(t,e,i,o)=>{let a="",s=o.Add;void 0!==s&&(a=s.form_code);let n=[{txcode:"#sys:fo-open-form",input:{form_key:a}}];return JSON.stringify(n)}}};const Ee=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i];let n="",r=o.View;void 0!==r&&(n=r.form_code);let l=[{txcode:"#sys:fo-view-openForm",input:{table_code:s.table,table_col_key:"",form_key:n,learn_api:a.api_cpn_id}}];return JSON.stringify(l)}}};const je=class{constructor(){this.build=(t,e,i,o)=>{o.Add;return JSON.stringify([{txcode:"#sys:fo-form-clear",input:{}}])}}};const Ze=class{constructor(){this.build=(t,e,i,o)=>{const a=o[i];let s=[{txcode:"#sys:fo-copy-thisForm",input:{listDelete:this.buildListDelete(t,a)}}];return JSON.stringify(s)},this.buildListDelete=(t,e)=>{let i="";for(const o of t)o.function.includes("auto create after save successfully")&&(i+=e.table+"."+o.api_main_node+";");return i}}};const Re=class{constructor(){this.build=(t,e,i,o)=>{let a="",s=o.Search;void 0!==s&&(a=s.form_code);let n=[{txcode:"#sys:fo-open-form",input:{form_key:a}}];return JSON.stringify(n)}}};const Qe=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e];let s=[{txcode:"#sys:fo-create-dataAPI",input:{list_component:"*",list_view:"",table_code:o[i].table,learn_api:a.api_cpn_id}}];return JSON.stringify(s)}}};const ze=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e];let s=[{txcode:"#sys:fo-create-dataAPI",input:{list_component:"*",list_view:"",table_code:o[i].table,learn_api:a.api_cpn_id}}];return JSON.stringify(s)}}};const Ue=class{constructor(){this.build=(t,e,i,o)=>{const a=o[i];let s="",n=o.Add;void 0!==n&&(s=n.form_code);let r=[{txcode:"#sys:fo-copy-thisForm",input:{listDelete:this.buildListDelete(t,a),form_code:s}}];return JSON.stringify(r)},this.buildListDelete=(t,e)=>{let i="";for(const o of t)o.function.includes("auto create after save successfully")&&(i+=e.table+"."+o.api_main_node+";");return i}}};const Be=class{constructor(){this.build=(t,e,i,o)=>{let a="",s=o.Search;void 0!==s&&(a=s.form_code);let n=[{txcode:"#sys:fo-open-form",input:{form_key:a}}];return JSON.stringify(n)}}};const Ye=class{constructor(){this.build=(t,e,i,o)=>{let a="",s=o.Add;void 0!==s&&(a=s.form_code);let n=[{txcode:"#sys:fo-open-form",input:{form_key:a}}];return JSON.stringify(n)}}};const He=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e];let s=[{txcode:"#sys:fo-create-dataAPI",input:{list_component:"*",list_view:"",table_code:o[i].table,learn_api:a.api_cpn_id}}];return JSON.stringify(s)}}};const Ve=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e];let s=[{txcode:"fo-create-dataAPI-sanction",input:{list_component:"*",list_view:"",table_code:o[i].table,learn_api:a.api_cpn_id,check_sanction_api:"O9_check_sanction",check_sanction_rules:this.buildCheckSanctionRule(a)}}];return JSON.stringify(s)},this.buildCheckSanctionRule=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(JSON.parse(t.rulefunc)||[]).map((t=>({value:t.value,error:t.error})))}}};const We={ActionButtonSearchFormSearch:Ne,ActionButtonDeleteFormSearch:Fe,ActionButtonAddFormSearch:Le,ActionButtonSearchFormAdd:Re,ActionButtonCopyFormAdd:Ze,ActionButtonClearFormAdd:je,ActionButtonSaveFormAdd:Qe,ActionButtonViewFormSearch:Ee,ActionButtonAcceptFormAdd:ze,ActionButtonCopyFormView:Ue,ActionButtonSearchFormView:Be,ActionButtonAddFormView:Ye,ActionButtonSaveFormView:He,ActionButtonAcceptFormFO:Ve,ActionButtonClearFormFO:class{constructor(){this.build=(t,e,i,o)=>{o.Add;return JSON.stringify([{txcode:"#sys:fo-form-clear",input:{}}])}}}};const Ge=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe(),r=a.cpn_name+a.cpn_child_name;n.default={name:r,code:a.component_code,codeHidden:a.codeHidden,class:"",condition:"",role:""};let l=we[r]||{};return n.config={useAction:"false",action:"",structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:"",color:l.color||"",icon:l.icon||"",txFo:this.buidTxFO(t,e,i,o),onTable:this.buildOnTable(t,e,i,o)},n.inputtype="cButton",n.config.onTable&&(n.default.class="",n.default.name=""),n},this.buildOnTable=(t,e,i,o)=>{const a=t[e];let s=Me.getParaFunction(a.function);if(s.length>0){let e=Me.getComponentWithName(t,s[0].code);if(void 0!==e)return e.component_code}return""},this.buidTxFO=(t,e,i,o)=>{const a=t[e];if(We[a.action_fo_name]){return(new We[a.action_fo_name]).build(t,e,i,o)}}}};const Je=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i].table;return this.component_config=Oe(),this.component_config.inputtype="jTableForm",this.component_config.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-12",condition:"",role:""},this.component_config.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,query_data:`${s}.${a.component_code}`,columns:this.getListCol(t,e+1,s,a)},this.component_config},this.getListCol=(t,e,i,o)=>{let a=[],s=t[e];for(;void 0!==s&&""===s.cpn_name&&""!==s.cpn_child_name;)a.push(this.buildColConfig(t,e,i,o)),s=t[++e];return JSON.stringify(a)},this.buildColConfig=(t,e,i,o)=>{let a=t[e],s={code:o.component_code+"."+a.table_node,title:a.cpn_child_name,inputtype:"ColumnString",config:{}};switch(a.cpn_type){case"TableColMedia":s.inputtype="columnImg";break;case"TableColMask":s.config.mask=a.mask,s.inputtype="columnMask";break;case"Currency":s.inputtype="columnCurrency"}return s}}};const qe=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe();return n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:a.is_group},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,data_type:"edit",mask_format:a.mask,mask_data_format:"",value_type:"all",mask_mode:"default"},n.validate={request:"Yes"===a.required},n.inputtype="jMaskInput",n}}};const Ke=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe();return n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:a.is_group},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,data_type:"edit",mask_format:a.mask,mask_data_format:"",value_type:"number",mask_mode:"default"},n.validate={request:"Yes"===a.required},n.inputtype="jMaskInput",("from_serial"===a.component_code||"to_serial"===a.component_code||a.mask.includes("AA"))&&(n.config.value_type="all",n.config.mask_format=n.config.mask_format.replace(">AA","__"),n.config.mask_format=n.config.mask_format.replace("AA","__")),n}}};const Xe=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe();return n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:a.is_group},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,data_type:"edit",mask_format:a.mask,mask_data_format:"YYYY-MM-DD",value_type:"number",mask_mode:"date"},n.validate={request:"Yes"===a.required},n.inputtype="jMaskInput",n}}};const $e=class{constructor(){this.build=(t,e,i,o)=>""!==t[e].api_cpn_addr?this.buildAPI(t,e,i,o):this.buildCdlist(t,e,i,o),this.buildAccountListO9=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe();return n.inputtype="jSelect",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:a.is_group},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,data_mode:"query",cdlist:{query:"",cdgrp:"",cdname:""},is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",col_format:"@c_cdlist.caption",table_format:"",key_selected:"c_cdlist.cdid",json_data:"[]"},n.validate={request:"Yes"===a.required,min:a.min_value,max:a.max_length},n},this.buildCdlist=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe(),r=a.cdlist;r=r.replace(/\W+/g," "),r=r.trim();let l=r.split(" "),c="",d="";return 2===l.length&&(c=l[1].trim(),d=l[0].trim()),n.inputtype="jSelect",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:""},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,data_mode:""!==a.cdlist?"cdlist":"query",cdlist:{query:`select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='${c}'&&wf.c_cdlist.cdname==='${d}'`,cdgrp:c,cdname:d},is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",col_format:"@c_cdlist.caption",table_format:'[\n                {\n                    "title": "Name",\n                    "code": "c_cdlist.caption"\n                },\n                {\n                    "title": "ID",\n                    "code": "c_cdlist.cdid"\n                }\n            ]',key_selected:"c_cdlist.cdid",json_data:"[]"},n.validate={request:"Yes"===a.required,min:a.min_value,max:a.max_length},n},this.buildAPI=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe();return n.inputtype="jSelect",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:""},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,data_mode:"query",query_data:`select * from ${a.component_code}`,is_multi_select:"false",is_multi_col:"false",get_data_format:`${a.component_code}.cdid`,selected_view_format:`@${a.component_code}.caption`,col_format:`@${a.component_code}.caption`,table_format:"[]",key_selected:`${a.component_code}.cdid`,json_data:"[]"},n.validate={request:"Yes"===a.required,min:a.min_value,max:a.max_length},n}}};const ti=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe();return n.inputtype="jMutiValue",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-12",condition:"",role:""},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:"",callform:a.mutiform_code,is_open:"false",has_default:"false"},n.validate={},n}}};const ei=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe();return n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:a.is_group},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,decimal_length:this.getRounding(a.mask),format:"#,###.00"},n.validate={request:"Yes"===a.required,max:a.max_value,min:a.min_value,max_length:a.max_length},n.inputtype="jCurrency",n},this.getRounding=t=>t.includes("#number")?t.split(".")[1]:t}};const ii=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe();return n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:a.is_group},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,decimal_length:"0",format:"#,###.00"},n.validate={request:"Yes"===a.required,min:a.min_value,max:a.max_value,max_length:a.max_length},n.inputtype="jCurrency",n},this.getRounding=t=>t.includes("#number")?t.split(".")[1]:t}};const oi=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe();return n.inputtype="jCheckbox",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:this.buildClass(a),condition:"",role:""},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default},n.validate={request:"Yes"===a.required,min:a.min_value,max:a.max_length},n},this.buildClass=t=>{let e=t.max_length;return""===e?"col-sm-12 col-md-3":(e=parseInt(e),e>=100?"col-sm-12 col-md-6":"col-sm-12 col-md-3")}}};const ai=class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe();return n.inputtype="jLabel",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:this.buildClass(a),condition:"",role:"",ofgroup:a.is_group},n.config={action:"",structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default},n.validate={min:a.min_value,max:a.max_length},n},this.buildClass=t=>"col-sm-12 col-md-3"}};const si={Textbox:Ie,Button:Ge,Table:Je,MaskText:qe,Date:Xe,Combobox:$e,Mutivalue:ti,Currency:ei,Number:ii,MaskNumber:Ke,Checkbox:oi,Label:ai,Lookup:class{constructor(){this.build=(t,e,i,o)=>{const a=t[e],s=o[i].table;let n=Oe();return n.inputtype="cTextInput",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:this.buildClass(a),condition:"",role:"",ofgroup:a.is_group},n.config={action:"",structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:""},n.validate={request:"Yes"===a.required,min:""===a.min_value?void 0:parseInt(a.min_value),max:""===a.max_length?void 0:parseInt(a.max_length)},n},this.buildClass=t=>{let e=t.max_length;return""===e?"col-sm-12 col-md-3":(e=parseInt(e),e>=100?"col-sm-12 col-md-6":"col-sm-12 col-md-3")}}}};const ni=class{constructor(){this.build=(t,e,i)=>{let o=i.table,a=i.name_input;const s=t[e];let n={},r=Date.now(),l=s.api_cpn_id;if(void 0!==l&&""!==l)return n={learn_api_name:o+" "+s.cpn_child_name+s.cpn_name+" "+a,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+Me.replaceRequestUrl(s.request_url,t,o),learn_api_data:o,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:s.api_method,learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:this.buildMapping(t,e,i),learn_api_id:l,AFGHkeyIndexWJ:l,AFGHkeyTime:r,AFGHkeyWorkFlow:"",AFGHTimeWJ:r,app_code:"o9_fo",save_to:this.build_save_to(s)},n},this.build_save_to=t=>{switch(t.cpn_type){case"Table":return"form";case"Combobox":return"client"}},this.buildMapping=(t,e,i)=>{if(""===t[e].api_main_addr)return"{}";let o=Me.buildMappingMainAPI(t,i);return"btn_accept"===t[e].component_code&&(o.approverid="MapS.dataN(user_approve.usrid)"),JSON.stringify(o)}}};const ri=class{constructor(){this.build=(t,e,i)=>{let o=i.table,a=i.name_input;const s=t[e];let n={},r=Date.now(),l=s.api_cpn_id;if(void 0!==l&&""!==l)return n={learn_api_name:o+" "+s.cpn_child_name+s.cpn_name+" "+a,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+Me.replaceRequestUrl(s.request_url,t,o),learn_api_data:o,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:s.api_method,learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:this.buildMapping(t,e,i),learn_api_id:l,AFGHkeyIndexWJ:l,AFGHkeyTime:r,AFGHkeyWorkFlow:"",AFGHTimeWJ:r,app_code:"o9",save_to:this.build_save_to(s)},n},this.build_save_to=t=>{switch(t.cpn_type){case"Table":return"form";case"Combobox":return"client"}},this.buildMapping=(t,e,i)=>{if(""===t[e].api_main_addr)return"{}";return JSON.stringify(Me.buildMappingMainAPI(t,i))},this.buildLearnAPIdata=()=>{}}};const li=class{constructor(){this.build=(t,e,i)=>{let o=i.table,a=i.name_input;const s=t[e];let n={},r=Date.now(),l=s.api_cpn_id;if(void 0!==l&&""!==l)return n={learn_api_name:o+" "+a+"-"+s.cpn_child_name+s.cpn_name,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+Me.replaceRequestUrl(s.request_url,t,o),learn_api_data:this.buildLearnAPIdata(s,o),learn_api_node_data:""!==s.node_data?s.node_data:"data",learn_api_app:"BO",learn_api_method:s.api_method,learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:"",learn_api_id:l,AFGHkeyIndexWJ:l,AFGHkeyTime:r,AFGHkeyWorkFlow:"",AFGHTimeWJ:r,app_code:"o9",save_to:this.build_save_to(s)},n},this.build_save_to=t=>{switch(t.cpn_type){case"Table":return"form";case"Combobox":return"client"}},this.buildLearnAPIdata=(t,e)=>""!==t.api_main_addr||"Button"===t.cpn_type?e:t.component_code}};const ci={POST:ni,PUT:ri,GET:li,DELETE:class{constructor(){this.build=(t,e,i)=>{let o=i.table,a=i.name_input;const s=t[e];let n={},r=Date.now(),l=s.api_cpn_id;if(void 0!==l&&""!==l)return n={learn_api_name:o+" "+s.cpn_child_name+s.cpn_name+" "+a,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+Me.replaceRequestUrl(s.request_url,t,o),learn_api_data:o,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:s.api_method,learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:"",learn_api_id:l,AFGHkeyIndexWJ:l,AFGHkeyTime:r,AFGHkeyWorkFlow:"",AFGHTimeWJ:r,app_code:"o9",save_to:this.build_save_to(s)},n},this.build_save_to=t=>{switch(t.cpn_type){case"Table":return"form";case"Combobox":return"client"}}}}};const di={AUTO_CLEAR_FEE:class{constructor(){this.build=(t,e,i,o)=>{let a=t[e],s=this.buildCondition(t,e,i,o);return{rule_config:{code:"runFo",config:{component_action:a.component_code,component_event:"enter_tab",txFoActions:'[{"function": "own_O9_fee.autoClearFee","status": "A","para": ["'+s.component_result+'"]}]',useAction:"true",condition:"'@{ref_id}' === \"\"",component_result:""},isStart:!1,inUse:!0,order:1}}},this.buildCondition=(t,e,i,o)=>{let s=Me.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";return{content:n,component_result:(a.ZP.parseJson(n)||{}).relf+";form_fee;form_fee(table_fee)"}}}},startDisable:class{constructor(){this.build=(t,e)=>({code:"visibility",config:{component_event:"on_change",component_action:"",component_result:this.buildComponentResult(t),condition:"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!0,inUse:!0,order:1}),this.buildComponentResult=t=>{let e="";for(let i=0;i<t.length;i++){const o=t[i];"Yes"!==o.disable&&"Yes"!==o.no_modify||(e+=o.component_code+";")}return e}}},startHidden:class{constructor(){this.build=(t,e)=>({code:"visibility",config:{component_event:"on_change",component_action:"",component_result:this.buildComponentResult(t)+";errorJWebUI_code;ref_id;btn_printVoucher",condition:"",visible:"false",ena_dis:"not_use",view_result:""},isStart:!0,inUse:!0,order:1}),this.buildComponentResult=t=>{let e="";for(let i=0;i<t.length;i++){const o=t[i];"Yes"===o.hidden&&(e+=o.component_code+";")}return e}}},startModify:class{constructor(){this.build=(t,e)=>({code:"visibility",config:{component_event:"on_click",component_action:this.buildComponenAction(t),component_result:this.buildComponentResult(t),condition:"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:1}),this.buildComponentResult=t=>{let e="";for(let i=0;i<t.length;i++){const o=t[i];"Yes"===o.disable&&"Yes"!==o.no_modify&&(e+=o.component_code+";")}return e},this.buildComponenAction=t=>{for(let e=0;e<t.length;e++){const i=t[e];if("Modify"===i.cpn_name)return i.component_code}return""}}},only:class{constructor(){this.build=(t,e,i,o)=>{let a=t[e],s=this.buildCondition(t,e,i,o);return{code:"managerComponent",config:{component_event:"on_change",component_action:s.component_action,is_use_block:"false",component_manager:JSON.stringify({[a.component_code]:s.content})},isStart:!0,inUse:!0,order:1}},this.buildCondition=(t,e,i,o)=>{let s=Me.getParaFunction(o)||[];if(0===s.length)return{content:o};let n=s[0].code||"",r=n.split("AND"),l="";for(let c of r){let o="",s="";c.includes("#")?(o=c.split("#")[0].trim(),s=c.split("#")[1].trim()):c.includes("=")&&(o=c.split("=")[0].trim(),s=c.split("=")[1].trim());let r=Me.getComponentWithName(t,o)||{},d=r.component_code||o,h=[],u=s;if(void 0!==r.cdlist&&""!==r.cdlist){let t=r.cdlist.split(",");h=a.ZP.data_cdList(t[1].trim(),t[0].trim());let o=!1;for(let e=0;e<h.length;e++){const t=h[e];t.c_cdlist.caption.toLowerCase()===s.trim().toLowerCase()&&(u=t.c_cdlist.cdid,o=!0)}!1===o&&console.error(i.name_input,"--\x3e",e,"Not Find==>",s)}n=n.replace(o,`'@{${d}}'`),n=n.replace(s,`'${u}'`);let p=r.cdlist||"";p=p.replace(",",";"),l+=d+";"}return n=n.replace(/=/g,"==="),n=n.replace(/#/g,"!=="),n=n.replace(/ AND /g,"&&"),{content:n,component_action:l}}}},auto_create_after_save_successfully:class{constructor(){this.build=(t,e,i,o)=>[this.buildUndisableRule(t,e,i,o),this.buildDisableRule(t,e,i,o)],this.buildUndisableRule=(t,e,i,o)=>{let a=t[e];return{code:"visibility",config:{component_event:"on_change",component_action:a.component_code,component_result:"copy",condition:`'@{${a.component_code}}'!==""`,visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:1}},this.buildDisableRule=(t,e,i,o)=>{let a=t[e];return{code:"visibility",config:{component_event:"on_change",component_action:a.component_code,component_result:"*;clear;save",condition:`'@{${a.component_code}}'!==""`,visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:1}}}},this_is_parent_of:class{constructor(){this.build=(t,e,i,o)=>{let a=this.buildContext(t,e,i,o);return{code:"setDataGB",config:{component_event:"on_change",component_action:a.component_action,component_result:a.component_result,data_type:a.data_type,query:a.query,filter_condition:a.filter_condition},isStart:!0,inUse:!0,order:1}},this.buildContext=(t,e,i,o)=>{let a,s=t[e],n=Me.getParaFunction(o)[0]||{};n=n.code||"",n=n.trim();for(let l=e;l<t.length;l++){const e=t[l];if(e.sum_name===n){a=e;break}}if(void 0===a)return{};let r=a.cdlist;return r=r.replace(/\W/g," "),r=r.trim(),r=r.replace(" ",";"),{component_action:s.component_code,component_result:a.component_code,data_type:"query",query:r,filter_condition:this.filter_condition(r,s)}},this.filter_condition=(t,e)=>{let i=["DISTRICT","COMMUNE","VILLAGE"];for(const o of i)return t.includes(o)?`{ "c_cdlist.cdid": "^@{${e.component_code}}\\\\w{2,2}$" }`:`{ "c_cdlist.cdid": "^@{${e.component_code}}" }`}}},errorJWebUI:class{constructor(){this.build=(t,e,i,o)=>[this.buildUndisableRule(t,e,i,o),this.buildDisableRule(t,e,i,o)],this.buildUndisableRule=(t,e,i,o)=>({code:"visibility",config:{component_event:"on_change",component_action:"errorJWebUI_code",component_result:"copy",condition:"'@{errorJWebUI_code}'==\"0\"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:1}),this.buildDisableRule=(t,e,i,o)=>({code:"visibility",config:{component_event:"on_change",component_action:"errorJWebUI_code",component_result:"*;clear;save",condition:"'@{errorJWebUI_code}'==\"0\"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:1})}},startClear:class{constructor(){this.build=(t,e)=>({code:"visibility",config:{component_event:"on_click",component_action:this.buildComponenAction(t),component_result:this.buildComponentResult(t)+";btn_accept",condition:"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:1}),this.buildComponentResult=t=>{let e="";for(let i=0;i<t.length;i++){const o=t[i];"Yes"!==o.disable&&(e+=o.component_code+";")}return e},this.buildComponenAction=t=>{for(let e=0;e<t.length;e++){const i=t[e];if("Clear"===i.cpn_name)return i.component_code}return""}}},GET_SIG:class{constructor(){this.build=(t,e,i,o)=>{let a=t[e],s=this.buildCondition(t,e,i,o);const n=a.component_code;let r={default:{name:n+"sign",code:n+"sign",codeHidden:"f9df3c6d3aecec48",class:"",condition:"",ofgroup:a.component_code,class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"",structable:"table.col",structable_read:"",data_default:"",api_id:s.api_config.learn_api_id,api_map_data:s.api_config.learn_api_data},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jSignature"};return{rule_config:{code:"getInfo",config:{component_event:"enter_tab",component_action:a.component_code,component_result:`{"${n}sign":"${s.api_config.learn_api_data}.MEDIA"}`,isSetCode:"true",data_type:"api",api_id:s.api_config.learn_api_id,sql_id:"",data_table:"",exception:"",api_bo:"",sql_bo:"",data_bo:""},inUse:!1,order:1,isStart:!1},api_config:s.api_config,new_component:r}},this.buildCondition=(t,e,i,o)=>{let s=Me.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};return{api_config:this.buildAPI(r,t,e,i)}},this.buildAPI=(t,e,i,o)=>{const a=t.api,s=Me.getCodeSmooth(a.split(" ")[1]);let n=this.buildMapping(e,i,o),r=t.data.split(";"),l={};return r.forEach((t=>{n[t]?l[t]=n[t]:l.MDL=t.toUpperCase()})),{learn_api_name:s,learn_api_link:`$API_SERVER$:$API_PORT_DATA$/${a.split(" ")[1]}`,learn_api_data:s,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:a.split(" ")[0],learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(l),learn_api_id:s,AFGHkeyIndexWJ:s,AFGHkeyTime:1577163079652,AFGHkeyWorkFlow:"",AFGHTimeWJ:1577163079974,app_code:"o9"}},this.buildMapping=(t,e,i)=>Me.buildMappingMainAPI(t,i),this.converMaplogin=t=>{switch(t){case"crrbrid":return"branchid";case"crrbrcd":return"branchcode";case"o9busdate":return"workingdate";case"crrusrid":return"usrid";case"crruser_code":return"usrcode";case"crrlgname":return"loginname";default:console.log("Key error=>",t)}}}},GET_INFO:class{constructor(){this.checkIsStart=(t,e)=>{let i=!1;for(const o of t){o.component_code===e&&"Combobox"===o.cpn_type&&(i=!0)}return i},this.build=(t,e,i,o)=>{let a=t[e],s=this.buildCondition(t,e,i,o),n="'@{ref_id}' === \"\"";return s.condition&&(n+=" && ("+s.condition+")"),{rule_config:{code:"getInfo",config:{component_event:"enter_tab",component_action:a.component_code,component_result:s.component_result,isSetCode:"true",data_type:"api",api_id:s.api_config.learn_api_id,condition:n,isAutoDefault:s.isAutoDefault},isStart:this.checkIsStart(t,a.component_code),isDidStart:this.checkIsStart(t,a.component_code),inUse:!0,order:s.index},api_config:s.api_config}},this.buildCondition=(t,e,i,o)=>{let s=Me.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};let l=this.buildAPI(r,t,e,i),c=r.relf.split(";"),d={};return c.forEach((t=>{d[t]=l.learn_api_data+"."+t})),{condition:Me.convertConditionVBtoJS(r.actcdt,r.ftags,t),component_result:JSON.stringify(d),api_config:l,index:r.index,isAutoDefault:"Yes"===r.is_set_default}},this.buildAPI=(t,e,i,o)=>{const a=t.api,s=Me.getCodeSmooth(a.split(" ")[1]);let n=this.buildMapping(e,i,o),r=t.data.split(";"),l={};r.forEach((t=>{n[t]?l[t]=n[t]:void 0!==this.converMaplogin(t)&&(l[t]=`MapS.context(${this.converMaplogin(t)})`)})),"ifccd"===e[i].key_name&&l.ifccd&&(l.ifccd=l.ifccd.replace(`${o.table}.ifccd`,"form_child.ifccd"));let c=o.form_code+"_"+s;return{learn_api_name:c,learn_api_link:`$API_SERVER$:$API_PORT_DATA$/${a.split(" ")[1]}`,learn_api_data:o.form_code+s,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:a.split(" ")[0],learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(l),learn_api_id:c,AFGHkeyIndexWJ:c,AFGHkeyTime:1577163079652,AFGHkeyWorkFlow:"",AFGHTimeWJ:1577163079974,app_code:"o9"}},this.buildMapping=(t,e,i)=>Me.buildMappingMainAPI(t,i),this.converMaplogin=t=>{switch(t){case"crrbrid":return"branchid";case"crrbrcd":return"branchcode";case"o9busdate":return"workingdate";case"crrusrid":return"usrid";case"crruser_code":return"usrcode";case"crrlgname":return"loginname";default:console.log("Key error=>",t)}}}},LKP_DATA:class{constructor(){this.build=(t,e,i,o)=>{let s=t[e],n=this.buildContent(t,e,i,o);for(this.lookup_form='{"info":{"title":"@{key_form}_lookup","des":"@{key_form}_lookup","data":"","learnapi":"@{learnapi}","learnsql":"","openOne":"true","node_position":[],"flow_layout":[],"form_code":"@{key_form}","ruleStrong":[{"code":"runFo","config":{"component_action":"search_input","component_result":"","component_event":"enter","txFoActions":"","txFo":"[{\\"txcode\\":\\"#sys:fo-search-API\\",\\"input\\":{\\"list_component\\":\\"*\\",\\"list_view\\":\\"code\\",\\"table_code\\":\\"@{key_form}\\",\\"learn_api\\":\\"@{learnapi}\\"}}]","useAction":"false","condition":""},"inUse":true,"order":1,"isStart":true}],"key_form":"@{key_form}","ofModal":false,"bodata":""},"list_layout":[{"name":"","des":"","class":"","codeHidden":"@{codeHidden}","inputtype":"cLayout","list_view":[{"name":"","code":"code","codeHidden":"@{codeHidden}","inputtype":"cView","isTab":"false","list_input":[{"default":{"name":"Search","code":"search_input","class":"col-xl-9 col-lg-9 col-md-8 col-sm-8","role":"","condition":"","ofgroup":"","class_ofgroup":"col-sm-12 col-md-12","codeHidden":"01df544303b8bc4a"},"config":{"useAction":"true","txFoActions":"[\\n    {\\n        \\"function\\": \\"\\",\\n        \\"status\\": \\"A\\",\\n        \\"para\\": []\\n    }\\n]","txFo":"[\\n    {\\n        \\"txcode\\": \\"\\",\\n        \\"input\\": {}\\n    }\\n]","structable":"lookup.search_input","structable_read":"lookup.search_input","data_default":"","isLookup":"false","is_upperCase":"false","callform":"","callform_detail":"","callform_detail_mode":"modal","data_view":"","data_value":"","is_password":"false","is_upper":"false","action":"","autoWrap":"false","isSearch":"true"},"role":{"visible":"","disabled":""},"property":{},"validate":{"request":false,"min":"","max":"","regex_format":"","validate_html":"true"},"lang":{"vi":"","en":""},"configAVD":{},"inputtype":"cTextInput"},{"config":{"onTable":"","icon":"fa-search","color":"primary","action":"","useAction":"false","txFoActions":"[]","txFo":"[{\\"txcode\\":\\"#sys:fo-search-API\\",\\"input\\":{\\"list_component\\":\\"*\\",\\"list_view\\":\\"code\\",\\"table_code\\":\\"@{key_form}\\",\\"learn_api\\":\\"@{learnapi}\\"}}]","isMasterData":"false","tableMasterData":"","privateKeyTableMasterData":"","isLookup":"","cmd":"","callform":"","uploadfile":{"active":"false","filetype":""}},"role":{"visible":"","disabled":""},"property":{},"validate":{"request":false},"lang":{"vi":"","en":""},"configAVD":{},"inputtype":"cButton","default":{"name":"Search","code":"search_button","class":"","role":"","condition":"","ofgroup":"","class_ofgroup":"col-sm-12 col-md-12","codeHidden":"ed4481f418acd092"}},{"default":{"name":"","code":"view","codeHidden":"@{codeHidden}","class":"","condition":"","ofgroup":"false","class_ofgroup":"col-sm-12col-md-12","role":""},"config":{"action":"","txFoActions":"[{\\"function\\":\\"\\",\\"status\\":\\"A\\",\\"para\\":[]}]","txFo":"[{\\"txcode\\":\\"#sys:fo-lookup-selectData\\",\\"input\\":{}}]","useAction":"false","icon":"fa-hand-o-right","color":"info","onTable":"table_name","isMasterData":"false","tableMasterData":"","privateKeyTableMasterData":""},"role":{"visible":"","disabled":""},"property":{"danger":"","warning":""},"validate":{},"lang":{},"configAVD":{},"inputtype":"cButton"}]},{"name":"Search","code":"code","codeHidden":"@{codeHidden}","inputtype":"cView","isTab":"false","list_input":[{"config":{"structable":"","structable_read":"","query_data":"select * from @{learnapi}","columns":"[{\\"code\\":\\"@{learnapi}.0\\",\\"title\\":\\"Code\\",\\"inputtype\\":\\"ColumnString\\",\\"config\\":{}},{\\"code\\":\\"@{learnapi}.1\\",\\"title\\":\\"Name\\",\\"inputtype\\":\\"ColumnString\\",\\"config\\":{}}]"},"role":{"visible":"","disabled":""},"property":{},"validate":{"request":false},"lang":{},"configAVD":{},"inputtype":"cTableDefault","default":{"name":"","code":"table_name","codeHidden":"@{codeHidden}","class":"col-sm-12col-md-12","condition":"","role":""}}]}]}],"react_txt":""}';!0===this.lookup_form.includes("@{codeHidden}");)this.lookup_form=this.lookup_form.replace("@{codeHidden}",a.ZP.autoID());this.lookup_form=this.lookup_form.replace(/@{key_form}/g,i.form_code+s.component_code),this.lookup_form=this.lookup_form.replace(/@{learnapi}/g,n.API.learn_api_data);let r={isLookup:"true",callform:i.form_code+s.component_code,callform_detail:"",callform_detail_mode:"modal",data_view:n.API.learn_api_data+".1",data_value:n.API.learn_api_data+".0"},l={api_config:n.API,form:JSON.parse(this.lookup_form),cpn_config:r},c=Me.getParaFunction(o)||[];if(0===c.length)return{};let d=c[0].code||"";let h=(a.ZP.parseJson(d)||{}).relf.split(";");if(h.length>1){let t={};for(let e=1;e<h.length;e++)t[h[e]]=`${n.API.learn_api_data}.${e}`;l.rule_config={code:"setValue",config:{component_event:"enter_tab",component_action:h[0],component_result:"",isGetOOP:"true",getOOPFormat:JSON.stringify(t)},inUse:!0,order:-1}}return l},this.buildContent=(t,e,i,o)=>{let s=Me.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};return{API:this.buildAPI(r,t,e,i)}},this.convertContent=t=>{t=(t=t.replace(/ AND /g," && ")).replace(/ OR /g," || ");let e=a.ZP.getArrayWithRegex(t,"[\\w]+");for(const i of e)t=t.replace(i.key,`@{${i.key}}`);return t},this.buildAPI=(t,e,i,o)=>{const a=t.api,s=Me.getCodeSmooth(a.split(" ")[1]);let n=this.buildMapping(e,i,o),r=t.data.split(";"),l={term:"MapS.dataS(lookup.search_input)",page:0};r.forEach((t=>{n[t]?l[t]=n[t]:void 0!==this.converMaplogin(t)&&(l[t]=`MapS.context(${this.converMaplogin(t)})`)}));let c=o.form_code+"_"+s;return{learn_api_name:c,learn_api_link:`$API_SERVER$:$API_PORT_DATA$/${a.split(" ")[1]}`,learn_api_data:c,learn_api_node_data:"data",learn_api_app:"BO",learn_api_method:a.split(" ")[0],learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(l),learn_api_id:c,AFGHkeyIndexWJ:c,AFGHkeyTime:1577163079652,AFGHkeyWorkFlow:"",AFGHTimeWJ:1577163079974,app_code:"o9"}},this.buildMapping=(t,e,i)=>Me.buildMappingMainAPI(t,i),this.converMaplogin=t=>{switch(t){case"crrbrid":return"branchid";case"crrbrcd":return"branchcode";case"o9busdate":return"workingdate";case"crrusrid":return"usrid";case"crruser_code":return"usrcode";case"crrlgname":return"loginname";default:console.log("Key error=>",t)}}}},VSB_ITEM:class{constructor(){this.build=(t,e,i,o)=>{let a=t[e],s=this.buildContent(t,e,i,o),n="",r="",l="",c="";return void 0!==s&&(n=s.component_result,r=s.filter_context,l=s.cdlist,c=s.index),{rule_config:{code:"setDataGB",config:{component_event:"enter_tab",component_action:a.component_code,component_result:n,data_type:"query",query:l,query_db:"",mode_filter:"js_condition",filter_condition:"",js_condition:r},inUse:!0,order:c,isStart:!0}}},this.buildContent=(t,e,i,o)=>{let s=Me.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};let l=` data_gb = data_gb.filter(data=>{\n      return (${Me.convertConditionVBtoJS(r.actcdt,r.ftags,t)}) === true;\n      })`,c=Me.getComponentWithCode(t,r.relf);if(void 0!==c){let t=c.cdlist.split(",");t=t[0]+";"+t[1];let e=`'@{${r.relf}}'`;for(;l.includes(e);)l=l.replace(e,"data.c_cdlist.cdid");let i=`@{${r.relf}}`;for(;l.includes(i);)l=l.replace(i,"data.c_cdlist.cdid");for(;l.includes("'@{data.c_cdlist.cdid}'");)l=l.replace("'@{data.c_cdlist.cdid}'","data.c_cdlist.cdid");for(;l.includes("'data.c_cdlist.cdid'");)l=l.replace("'data.c_cdlist.cdid'","data.c_cdlist.cdid");return{cdlist:t,component_result:r.relf,index:r.index,condition:"",filter_context:l}}}}},DAB_CTL:class{constructor(){this.build=(t,e,i,o)=>{let a=t[e],s=this.buildContent(t,e,i,o);return{rule_config:[{code:"visibility",config:{component_event:"all",component_action:a.component_code,component_result:s.component_result,condition:s.condition,visible:"not_use",ena_dis:"true",view_result:""},isStart:!0,inUse:!0,order:s.index},{code:"visibility",config:{component_event:"enter_tab",component_action:a.component_code,component_result:s.component_result,condition:`(${s.condition})===false`,visible:"not_use",ena_dis:"false",view_result:""},isStart:!0,inUse:!0,order:s.index}]}},this.buildContent=(t,e,i,o)=>{let s=Me.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};let l=Me.convertConditionVBtoJS(r.actcdt,r.ftags,t);return{component_result:r.relf,index:r.index,condition:l}}}},ENB_CTL:class{constructor(){this.build=(t,e,i,o)=>{let a=t[e],s=this.buildContent(t,e,i,o);return{rule_config:{code:"visibility",config:{component_event:"enter_tab",component_action:a.component_code,component_result:s.component_result,condition:s.condition,visible:"not_use",ena_dis:"false",view_result:""},isStart:!0,inUse:!0,order:s.index}}},this.buildContent=(t,e,i,o)=>{let s=Me.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};let l=Me.convertConditionVBtoJS(r.actcdt,r.ftags,t);return{component_result:r.relf,index:r.index,condition:l}}}},CCL_NUMB:class{constructor(){this.build=(t,e,i,o)=>{let a=t[e],s=this.buildContent(t,e,i,o);return{rule_config:{code:"calculator",config:{component_event:"enter_tab",component_action:a.component_code,component_result:s.component_result,function_cal:s.function_cal,condition:s.condition},isStart:!1,inUse:!0,order:s.index}}},this.buildContent=(t,e,i,o)=>{let s=Me.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};return{function_cal:this.convertContent(r.value,r.ftags),condition:Me.convertConditionVBtoJS(r.actcdt,r.ftags,t),component_result:r.relf,index:r.index}},this.convertContent=(t,e)=>{t=(t=t.replace(/ AND /g," && ")).replace(/ OR /g," || ");let i=a.ZP.getArrayWithRegex(t,"[\\w]+"),o=t;for(const a of i){let t=a.key.toLocaleLowerCase();e.split(";").includes(t)&&(o=o.replace(a.key,`@{${t.toLocaleUpperCase()}}`))}return o=o.toLocaleLowerCase(),o=this.convertROUND(o),o=this.convertIF(o),o},this.convertROUND=t=>{const e=/round\(([^,]+),(\d+)\)/gm;let i;for(;null!==(i=e.exec(t));)i.index===e.lastIndex&&e.lastIndex++,t=`Number(${i[1]}).toFixed(${i[2]})`;return t},this.convertIF=t=>{const e=/if\(([^,]+),([^,]+),([^\)]+)/gm;let i;for(;null!==(i=e.exec(t));)i.index===e.lastIndex&&e.lastIndex++,t=`(${i[1]}?${i[2]}:${i[3]})`;return t}}}};class hi{constructor(t){var e=this;this.buildDefault=()=>{this.name_input="",this.url="",this.form_code="",this.table="",this.data_arr_json=[],this.list_API=[],this.config={info:{title:"",des:"",data:"",learnapi:"",learnsql:"",openOne:"false",node_position:[],flow_layout:[],form_code:"",ruleStrong:[],key_form:"",ofModal:!1,bodata:""},list_layout:[{name:"",des:"",class:"",codeHidden:a.ZP.autoID(),inputtype:"cLayout",list_view:[{name:"",code:"code",codeHidden:a.ZP.autoID(),inputtype:"cView",isTab:"false",list_input:[]}]}],react_txt:""}},this.buildInfoForm=(t,e)=>{this.buildDefault(),this.name_input="muti",this.data_arr_json=e,this.form_code=t.mutiform_code,this.table="muti",this.config.info.title=t.mutiform_code,this.config.info.des=t.mutiform_code,this.config.info.form_code=t.mutiform_code,this.config.info.key_form=t.mutiform_code},this.AutoBuildForm=t=>{const e=this.data_arr_json;0===this.config.list_layout.length&&this.addLayout();for(let i=0;i<e.length;i++)this.addComponent(e,i,t),this.addMutiForm(e,i,this),this.addRule(e,i),this.addAPI(e,i)},this.addMutiForm=(t,e,i)=>{},this.addLayout=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.config.list_layout.push({name:"",des:"",class:t.class||"",codeHidden:a.ZP.autoID(),inputtype:"cLayout",list_view:t.list_view||[]})},this.addView=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.config.list_layout;for(let e=0;e<i.length;e++){let o=i[e];for(let e=0;e<o.list_view.length;e++){let i=o.list_view[e];if(t.view_name===i.name)return}}void 0!==i&&0!==i.length||e.addLayout(),i[i.length-1].list_view.push({name:t.view_name||"",code:t.code||"code",codeHidden:a.ZP.autoID(),inputtype:"cView",isTab:t.isTab||"true",list_input:t.list_input||[]})},this.addRule=(t,e,i)=>{let o=t[e].function;if(""!==o){let a=o.split("<br>");for(let o=0;o<a.length;o++){let s=a[o].split("(")[0];if(s=Me.getCodeSmooth(s),di[s]){let n=new di[s](t,e,i).build(t,e,i,a[o]);Array.isArray(n)?this.config.info.ruleStrong.concat(n):this.config.info.ruleStrong.push(n)}}}},this.addAPI=(t,e)=>{const i=t[e];if(ci[i.api_method]){let o=(new ci[i.api_method]).build(t,e,this.table,this.name_input);void 0!==o&&this.list_API.push(o)}},this.addComponent=(t,e,i)=>{const o=t[e];"Table"===o.cpn_type&&this.addView({view_name:"Table"});let a=this.config.list_layout.length,s=this.config.list_layout[a-1].list_view.length;if(""!==o.view_name)return void this.addView({view_name:o.view_name});let n=this.buildComponent(t,e,i);void 0!==n&&!1===this.replaceComponent(n)&&this.config.list_layout[a-1].list_view[s-1].list_input.push(n)},this.buildComponent=(t,e,i)=>{const o=t[e];if(""!==o.cpn_child_name&&si[o.cpn_type]){return(new si[o.cpn_type]).build(t,e,"muti",i)}},this.replaceComponent=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.config.list_layout;for(let o=0;o<i.length;o++){let a=i[o];for(let i=0;i<a.list_view.length;i++){let s=a.list_view[i];for(let a=0;a<s.list_input.length;a++){let n=s.list_input[a];if(t.default&&t.default.name===n.default.name&&t.inputtype===n.inputtype&&!0!==n.isReplaced)return void 0!==n.default.class&&(t.default.class=n.default.class),n.validate&&void 0!==n.validate.request&&(t.validate.request=n.validate.request),t.isReplaced=!0,e.config.list_layout[o].list_view[i].list_input[a]=t,!0}}}return!1},this.buildDefault()}}class ui{constructor(t){var e=this;this.buildDefault=()=>{this.name_input="",this.url="",this.form_code="",this.table="",this.data_arr_json=[],this.list_API=[],this.list_form_chil=[],this.config={info:{title:"",des:"",data:"",learnapi:"",learnsql:"",openOne:"false",node_position:[],flow_layout:[],form_code:"",ruleStrong:[],key_form:"",ofModal:!1,bodata:""},list_layout:[],react_txt:""}},this.buildInfoForm=(t,e,i)=>{this.buildDefault();const o=e[i][0][0],a=Me.getCodeSmooth(o+"_"+i);this.name_input=i,this.data_arr_json=t,this.form_code=a,this.table=Me.getCodeSmooth(o),this.config.info.title=o+" "+i,this.config.info.des=o+" "+i,this.config.info.form_code=a,this.config.info.key_form=a},this.AutoBuildForm=t=>{const e=this.data_arr_json;0===this.config.list_layout.length&&this.addLayout(),this.addRuleStart(e,this);for(let i=0;i<e.length;i++)""===e[i].cpn_child_name&&(this.addComponent(e,i,t),this.addMutiForm(e,i,this),this.addRule(e,i,this),this.addAPI(e,i));this.config.list_layout[0].list_view[0].list_input.push((0,Ae.Z)({},Ce))},this.addMutiForm=(t,e,i)=>{let o=t[e];if("Mutivalue"!==o.cpn_type)return;let a=new hi({}),s=[];for(;""!==t[e+1].cpn_child_name&&""===t[e+1].cpn_name;)s.push((0,Ae.Z)({},t[e+1])),e++;a.buildInfoForm(o,s),a.AutoBuildForm({muti:a}),this.list_form_chil.push(a.config)},this.addLayout=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.config.list_layout.push({name:t.name||e.config.title,des:t.des||e.config.des,class:t.class||"",codeHidden:a.ZP.autoID(),inputtype:"cLayout",list_view:t.list_view||[]})},this.addView=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.config.list_layout;for(let e=0;e<i.length;e++){let o=i[e];for(let e=0;e<o.list_view.length;e++){let i=o.list_view[e];if(t.view_name===i.name)return}}void 0!==i&&0!==i.length||e.addLayout(),i[i.length-1].list_view.push({name:t.view_name||"",code:t.code||"code",codeHidden:a.ZP.autoID(),inputtype:"cView",isTab:t.isTab||"true",list_input:t.list_input||[]})},this.addRuleStart=(t,e)=>{let i=["startDisable","startHidden"];for(let o=0;o<i.length;o++){let a=(new di[i[o]]).build(t,e);Array.isArray(a)?this.config.info.ruleStrong=this.config.info.ruleStrong.concat(a):a&&this.config.info.ruleStrong.push(a)}},this.addRule=(t,e,i)=>{let o=t[e].function;if(""!==o){let a=o.split("<br>");for(let o=0;o<a.length;o++){let s=a[o].split("(")[0];if(s=Me.getCodeSmooth(s),di[s]){let n=new di[s](t,e,i).build(t,e,i,a[o]);Array.isArray(n)?this.config.info.ruleStrong=this.config.info.ruleStrong.concat(n):this.config.info.ruleStrong.push(n)}}}},this.addAPI=(t,e)=>{const i=t[e];if(ci[i.api_method]){let o=(new ci[i.api_method]).build(t,e,this);void 0!==o&&o.learn_api_id&&this.list_API.push(o),""!==i.api_cpn_addr&&(""===this.config.info.learnapi?this.config.info.learnapi=o.learn_api_id:this.config.info.learnapi+=";"+o.learn_api_id)}},this.addComponent=(t,e,i)=>{const o=t[e];let a=this.config.list_layout.length,s=this.config.list_layout[a-1].list_view.length;if(""!==o.view_name)return void this.addView({view_name:o.view_name});let n=this.buildComponent(t,e,i);void 0!==n&&!1===this.replaceComponent(n)&&this.config.list_layout[a-1].list_view[s-1].list_input.push(n)},this.buildComponent=(t,e,i)=>{const o=t[e];if(o.cpn_name+o.cpn_child_name!==""&&si[o.cpn_type]){return(new si[o.cpn_type]).build(t,e,this.name_input,i)}},this.replaceComponent=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.config.list_layout;for(let o=0;o<i.length;o++){let a=i[o];for(let i=0;i<a.list_view.length;i++){let s=a.list_view[i];for(let a=0;a<s.list_input.length;a++){let n=s.list_input[a];if(t.default&&t.default.name===n.default.name&&t.inputtype===n.inputtype&&!0===n.isReplace)return void 0!==n.default.class&&(t.default.class=n.default.class),n.validate&&void 0!==n.validate.request&&(t.validate.request=n.validate.request),e.config.list_layout[o].list_view[i].list_input[a]=t,!0}}}return!1},this.buildDefault()}}let pi=[];const _i=["TOTALFEE","TOTALCSH","TOTALDPT","TOTALACT","TOTALINT","TOTALPRN","TOTALFLAT","TOTALSAMT","TOTALRAMT","TTSFPER"];class fi extends ui{constructor(t){var e;return pi=t.menu,super(t),e=this,this.buildDefault=()=>{this.name_input="",this.url="",this.form_code="",this.table="",this.data_arr_json=[],this.list_API=[],this.config={info:{mode_form:{mode:"1",col_text:"",col_input:""},title:"",des:"",data:"",learnapi:"",learnsql:"",openOne:"false",node_position:[],flow_layout:[],form_code:"",ruleStrong:[{code:"visibility",config:{component_event:"all",component_action:"ref_id",component_result:"ref_id",condition:"'@{ref_id}'!==\"\"",visible:"true",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:1},{code:"visibility",config:{component_event:"all",component_action:"ref_id",component_result:"*;btn_accept",condition:"'@{ref_id}'!==\"\"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:1},{code:"setValue",config:{component_event:"all",component_action:"btn_accept",component_result:"btn_printVoucher",isGetOOP:"false",getOOPFormat:'{\n    "component_code_1": "col.col_1",\n    "component_code_2": "col.col_2"\n}'},inUse:!0,order:10}],key_form:"",ofModal:!1,bodata:"",responseType:"1"},list_layout:[{name:"",des:"",class:"",codeHidden:a.ZP.autoID(),inputtype:"cLayout",list_view:[{name:"Button",code:"",codeHidden:a.ZP.autoID(),inputtype:"cView",isTab:"false",list_input:[{isReplace:!0,default:{name:"Accept",code:"btn_accept",codeHidden:a.ZP.autoID(),class:"",condition:"",role:""},config:{},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{isReplace:!0,default:{name:"Clear",code:"btn_clear",codeHidden:a.ZP.autoID(),class:"",condition:"",role:""},config:{},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"cButton"}]}]},{name:"",des:"",class:"",codeHidden:a.ZP.autoID(),inputtype:"cLayout",list_view:[]}],react_txt:""},this.fee_context={isUse:!1}},this.addRuleStart=(t,e)=>{let i=["startDisable","startHidden","startClear"];for(let o=0;o<i.length;o++){let a=(new di[i[o]]).build(t,e);Array.isArray(a)?this.config.info.ruleStrong=this.config.info.ruleStrong.concat(a):a&&this.config.info.ruleStrong.push(a)}},this.buildInfoForm=(t,e,i)=>{this.buildDefault();const o=i,a=o;this.name_input=i,this.data_arr_json=t,this.form_code=a,this.table=o;let s=o;for(let n=0;n<pi.length;n++){const t=pi[n];s===`FO_${t.menuid}`&&(s=t.caption)}this.config.info.title=s,this.config.info.des=s,this.config.info.form_code=a,this.config.info.key_form=a},this.addRule=(t,e,i)=>{const o=t[e];let a=o.function;if(""!==a){let s=a.split("<br>");for(let a=0;a<s.length;a++){let n=s[a].split("(")[0];if(di[n]){let r=new di[n](t,e,i).build(t,e,i,s[a]),l=r.rule_config,c=r.api_config,d=r.form,h=r.cpn_config,u=r.new_component;if(l&&("getInfo"===l.code?Array.isArray(l)?this.list_rule_func_getInfor=this.list_rule_func_getInfor.concat(l):this.list_rule_func_getInfor.push(l):Array.isArray(l)?this.config.info.ruleStrong=this.config.info.ruleStrong.concat(l):this.config.info.ruleStrong.push(l)),c&&(Array.isArray(c)?this.list_API=this.list_API.concat(c):this.list_API.push(c)),d&&(Array.isArray(d)?this.list_form_chil=this.list_form_chil.concat(d):this.list_form_chil.push(d)),h){let t=this.config.list_layout.length,e=this.config.list_layout[t-1].list_view.length,i=this.config.list_layout[t-1].list_view[e-1].list_input.length;for(const o in h)if(h.hasOwnProperty(o)){const a=h[o];this.config.list_layout[t-1].list_view[e-1].list_input[i-1].config[o]=a}o.mask?this.config.list_layout[t-1].list_view[e-1].list_input[i-1].inputtype="jMaskInput":this.config.list_layout[t-1].list_view[e-1].list_input[i-1].inputtype="cTextInput"}if(u){let t=this.config.list_layout.length,e=this.config.list_layout[t-1].list_view.length;this.config.list_layout[t-1].list_view[e-1].list_input.push(u)}}}}},this.addView=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.config.list_layout;for(let e=0;e<i.length;e++){let o=i[e];for(let e=0;e<o.list_view.length;e++){let i=o.list_view[e];if(t.view_name===i.name)return}}void 0!==i&&0!==i.length||e.addLayout(),i[i.length-1].list_view.push({name:t.view_name||"",code:t.code||"code",codeHidden:a.ZP.autoID(),inputtype:"cView",class:"col-sm-12 col-md-12",isTab:"fasle",list_input:t.list_input||[]})},this.addComponent=(t,e,i)=>{const o=t[e];let a=this.config.list_layout.length,s=this.config.list_layout[a-1].list_view.length;if(""!==o.view_name)return void this.addView({view_name:o.view_name});let n=this.buildComponent(t,e,i);"ifccd"===o.key_name&&(this.fee_context.isUse=!0,this.fee_context.data_fee=o),void 0!==n&&!1===this.replaceComponent(n)&&(n.inputtype,n.default.class="",this.config.list_layout[a-1].list_view[s-1].list_input.push(n))},this.addFee=()=>{if(!0===this.fee_context.isUse){let t=this.config.list_layout,e=this.config.info.ruleStrong.filter((t=>"ifccd"===t.config.component_action&&"getInfo"===t.code));if(1===e.length){this.config.info.ruleStrong.splice(this.config.info.ruleStrong.indexOf(e[0]),1),e[0].config.is_data_to_form="false",e[0].config.component_event="all";let t=a.ZP.cloneJson(e[0]);t.config.component_event="enter_tab",t.config.component_result="",t.config.api_id="POST_getinfo_fee_ifccd",t.config.condition=" !!'@{ifcname}' ",t.order=Number(t.order)+1,t.config.is_data_to_form="true",e.push(t)}t.forEach((t=>{t.list_view.forEach((t=>{t.list_input.forEach((t=>{if("ifccd"===t.default.code){this.fee_context.cpn=a.ZP.cloneJson(t),t.default={name:"ifcfees",code:"form_fee",codeHidden:a.ZP.autoID(),class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},t.config={action:"",structable:`${this.form_code}.ifcfees`,structable_read:`${this.form_code}.ifcfees`,data_default:"{}",callform:this.form_code+"_O9_FEE",callData:"form_child.ifcfees"},t.inputtype="jSameMain",this.fee_context.cpn.config.structable="form_child.ifccd",this.fee_context.cpn.config.structable_read="form_child.ifccd",this.fee_context.cpn.default.ofgroup="ifccd",this.fee_context.cpn.inputtype="cTextInput";let s=a.ZP.cloneJson(xe);s.info.title=this.form_code+"_O9_FEE",s.info.des=this.form_code+"_O9_FEE",s.info.form_code=this.form_code+"_O9_FEE",s.list_layout[0].list_view[0].list_input[0]=this.fee_context.cpn,s.info.ruleStrong=s.info.ruleStrong.concat(e);let n=[],r=this.fee_context.data_fee.ftags;try{n=JSON.parse(this.fee_context.data_fee.list_CCL_FEE)}catch(i){console.log("error when parsing list cclFees",i)}for(let t of n)t.actcdt=Me.convertConditionVBtoJS(t.actcdt,r);let l=[];try{l=JSON.parse(this.fee_context.data_fee.list_GET_FEE)}catch(i){console.log("error when parsing list get fee",i)}for(let t of l)t.actcdt=Me.convertConditionVBtoJS(t.actcdt,r),_i.includes(t.value)||(t.value=Me.convertConditionVBtoJS(t.value,r));let c=[];try{c=JSON.parse(this.fee_context.data_fee.list_AUTO_FEE);for(let t of c)t.actcdt=Me.convertConditionVBtoJS(t.actcdt,r),t.value&&(t.value=t.value.toLowerCase())}catch(o){console.log("error when parsing list AUTO_FEE")}s.list_layout[0].list_view[0].list_input.push({default:{name:"data_fee",code:"data_fee",codeHidden:"data_fee",class:"",condition:"",ofgroup:"",class_ofgroup:"",role:""},config:{is_upperCase:"false",action:"",structable:"data_fee.data_fee",structable_read:"data_fee.data_fee",data_default:JSON.stringify({list_CCL_FEE:JSON.stringify(n),list_GET_FEE:JSON.stringify(l),list_AUTO_FEE:JSON.stringify(c)}),isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_password:"false",is_upper:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"}),this.list_form_chil.push(s)}}))}))}));let i=this.fee_context.data_fee.fee_active_fields,o=this.fee_context.data_fee.auto_fee_active_fields;o.split(";").forEach((t=>{if(t)for(;i.includes(t);)i=i.replace(t,"")})),this.config.info.ruleStrong=this.config.info.ruleStrong.concat([{code:"runFo",config:{component_action:i,component_result:"",component_event:"enter_tab",txFoActions:"",txFo:'[\n    {\n        "txcode": "fo-convert-dataFee",\n        "input": {}\n    }\n]',useAction:"false",condition:"'@{ref_id}' === \"\""},inUse:!0,order:98,isStart:!1},{code:"runFo",config:{component_action:o,component_result:"",component_event:"enter_tab",txFoActions:"",txFo:'[\n    {\n        "txcode": "fo-ruleFunc-AutoFee",\n        "input": {"learn_api": "O9_AUTOFEE_POST_GET_IFC_INFO"}\n    }\n]',useAction:"false",condition:""},inUse:!0,order:99,isStart:!1},{code:"managerComponent",config:{component_event:"all",component_action:"ref_id",component_manager:"{\n    \"form_fee;form_fee(ifccd;ifcval;btn_add;btn_apply)\": \" '@{ref_id}' === '' \"\n}",is_use_block:"false"},inUse:!0,order:5,isStart:!0},{code:"visibility",config:{component_event:"all",component_action:"ref_id",component_result:"form_fee;form_fee(table_fee)",condition:"'@{ref_id}'!==\"\"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:5},{code:"visibility",config:{component_event:"all",component_action:"ref_id",component_result:"form_fee;form_fee(table_fee)",condition:"'@{ref_id}'===\"\"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:5}]);for(let a=0;a<this.list_API.length;a++){const t=this.list_API[a];if(t.learn_api_id.includes("_btn_accept_post_api_fo_")){let e=JSON.parse(t.learn_api_mapping);e.ifcfees=`MapS.arrayJson(${t.learn_api_data}.ifcfees|{"sfappl":"MapS.dataN(ifcfees.sfappl)","ifccd":"MapS.dataN(ifcfees.ifccd)","payrate":"MapS.dataN(ifcfees.payrate)","ifcval":"MapS.dataN(ifcfees.ifcval)","ifcamt":"MapS.dataN(ifcfees.ifcamt)","ccrid":"MapS.dataS(ifcfees.ccrid)","flrval":"MapS.dataN(ifcfees.flrval)","ceival":"MapS.dataN(ifcfees.ceival)","srate":"MapS.dataN(ifcfees.srate)","samt":"MapS.dataN(ifcfees.samt)","rrate":"MapS.dataN(ifcfees.rrate)","ramt":"MapS.dataN(ifcfees.ramt)","ccrcd":"MapS.dataS(ifcfees.ccrcd)","paysrc":"MapS.dataS(ifcfees.paysrc)"})`,this.list_API[a].learn_api_mapping=JSON.stringify(e)}}}},this.AutoBuildForm=t=>{const e=this.data_arr_json;0===this.config.list_layout.length&&this.addLayout(),this.list_rule_func_getInfor=[],this.addRuleStart(e,this);for(let a=0;a<e.length;a++)""===e[a].cpn_child_name&&(this.addComponent(e,a,t),this.addMutiForm(e,a,this),this.addRule(e,a,this),this.addAPI(e,a));let i,o;i=new RegExp("{([^}]*)}","gm"),o=new RegExp("{([^}]*)}","gm");for(let a=0;a<this.list_rule_func_getInfor.length;a++){let t=this.list_rule_func_getInfor[a];for(let e=a+1;e<this.list_rule_func_getInfor.length;){let a=this.list_rule_func_getInfor[e];if(t.config.api_id===a.config.api_id&&t.config.condition===a.config.condition){let s,n,r,l;for(;null!==(s=i.exec(t.config.component_result));)s.index===i.lastIndex&&i.lastIndex++,r=s[1];for(;null!==(n=o.exec(a.config.component_result));)n.index===o.lastIndex&&n.lastIndex++,l=n[1];t.config.component_result="{"+r+","+l+"}",t.config.component_action=t.config.component_action+";"+a.config.component_action,this.list_rule_func_getInfor.splice(e,1)}else e++}}this.config.info.ruleStrong=this.config.info.ruleStrong.concat(this.list_rule_func_getInfor),this.addFee(),this.config.list_layout[0].list_view[0].list_input.push((0,Ae.Z)({},Ce));const s=a.ZP.cloneJson(this.config.list_layout[0].list_view[0]);this.config.list_layout.shift(),this.config.list_layout[0].list_view.push(s),this.config.info.ruleStrong.push({code:"managerComponent",config:{component_event:"on_change",component_action:"postings_debit;postings_credit",component_manager:'{\n    "postings;postings()": "@{postings_debit}.length > 0 || @{postings_credit}.length > 0", \n    "postings_debit": "false",\n    "postings_credit": "false",\n    "dataset": "@{dataset}.length > 0",\n    "ref_id": "\'@{ref_id}\'!== \'\'"\n}',is_use_block:"false"},isStart:!0,inUse:!0,order:1}),this.config.list_layout[this.config.list_layout.length-1].list_view.push({name:"",lang:{},code:"code",class:"col-sm-6 col-md-6",codeHidden:"cbc85eefe8610f4a",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Debit",code:"postings_debit",codeHidden:"6cfe880d0ff85ea2",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:`${this.form_code}.postings_debit`,query_data:`${this.form_code}.postings_debit`,paging_record:"5",columns:'[\n    {\n        "code": "postings_debit.acgrp",\n        "title": "Group",\n        "inputtype": "ColumnNumber",\n        "config": {}\n    },\n    {\n        "code": "postings_debit.bacno",\n        "title": "Account number",\n        "inputtype": "columnMask",\n        "config": {\n            "mask": "$FO_ACNO_POSTING$"\n        }\n    },\n    {\n        "code": "postings_debit.amt",\n        "title": "Amount",\n        "inputtype": "columnCurrency",\n        "config": {\n            "decimal": 2\n        }\n    }\n]'},role:{},property:{},validate:{},lang:{vi:{Group:"Group","Account number":"Account number",Amount:"Amount"},en:{Group:"Group","Account number":"Account number",Amount:"Amount"},lo:{Group:"Group","Account number":"Account number",Amount:"Amount"},km:{Group:"Group","Account number":"Account number",Amount:"Amount"},th:{Group:"Group","Account number":"Account number",Amount:"Amount"},mg:{Group:"Group","Account number":"Account number",Amount:"Amount"},ja:{Group:"Group","Account number":"Account number",Amount:"Amount"},ko:{Group:"Group","Account number":"Account number",Amount:"Amount"}},configAVD:{},inputtype:"jTableForm"},{default:{name:"Print",code:"btn_printVoucher",codeHidden:a.ZP.autoID(),class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{node_data_print:"voucher.@index.code",json_path:this.form_code,auto_print:"true",txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "#sys:fo-print-voucher",\n        "input": {}\n    }\n]',useAction:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jPrintVoucher"}]}),this.config.list_layout[this.config.list_layout.length-1].list_view.push({name:"",lang:{},code:"code",class:"col-sm-6 col-md-6",codeHidden:"7b43df2be7e7b1d1",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Credit",code:"postings_credit",codeHidden:"a1f900b0238b3b6f",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:`${this.form_code}.postings_credit`,query_data:`${this.form_code}.postings_credit`,paging_record:"5",columns:'[\n    {\n        "code": "postings_credit.acgrp",\n        "title": "Group",\n        "inputtype": "ColumnNumber",\n        "config": {}\n    },\n    {\n        "code": "postings_credit.bacno",\n        "title": "Account number",\n        "inputtype": "columnMask",\n        "config": {\n            "mask": "$FO_ACNO_POSTING$"\n        }\n    },\n    {\n        "code": "postings_credit.amt",\n        "title": "Amount",\n        "inputtype": "columnCurrency",\n        "config": {\n            "decimal": 2\n        }\n    }\n]'},role:{},property:{},validate:{},lang:{vi:{Group:"Group","Account number":"Account number",Amount:"Amount"},en:{Group:"Group","Account number":"Account number",Amount:"Amount"},lo:{Group:"Group","Account number":"Account number",Amount:"Amount"},km:{Group:"Group","Account number":"Account number",Amount:"Amount"},th:{Group:"Group","Account number":"Account number",Amount:"Amount"},mg:{Group:"Group","Account number":"Account number",Amount:"Amount"},ja:{Group:"Group","Account number":"Account number",Amount:"Amount"},ko:{Group:"Group","Account number":"Account number",Amount:"Amount"}},configAVD:{},inputtype:"jTableForm"}]});let n=this.form_code+"_posting";this.config.list_layout[this.config.list_layout.length-1].list_view.push({name:"",lang:{},code:"code",class:"col-sm-12 col-md-12",codeHidden:"7b43df2be7e7b1d1",inputtype:"cView",isTab:"false",list_input:[{config:{action:"",structable:this.form_code+".postings",structable_read:this.form_code+".postings",data_default:"{}",callform:n,callData:this.form_code+".postings"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jSameMain",default:{name:"Postings",code:"postings",codeHidden:"cec06953d595ea8a",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""}}]}),this.list_form_chil.push({info:{title:n,des:n,data:"",learnapi:"",learnsql:"",openOne:"false",node_position:[],flow_layout:[],form_code:n,ruleStrong:[],key_form:n,ofModal:!1,bodata:"",responseType:"1"},list_layout:[{name:"Posting",des:"Posting",class:"",codeHidden:"9c9f62eedf51a184",inputtype:"cLayout",list_view:[{name:"",lang:{},code:"code",class:"col-md-6 col-sm-12 ",codeHidden:"cbc85eefe8610f4a",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Debit",code:"postings_debit",codeHidden:"6cfe880d0ff85ea2",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:this.form_code+".postings_debit",query_data:this.form_code+".postings_debit",paging_record:"5",columns:'[\n    {\n        "code": "postings_debit.acgrp",\n        "title": "Group",\n        "inputtype": "ColumnNumber",\n        "config": {}\n    },\n    {\n        "code": "postings_debit.bacno",\n        "title": "Account number",\n        "inputtype": "columnMask",\n        "config": {\n            "mask": "$FO_ACNO_POSTING$"\n        }\n    },\n    {\n        "code": "postings_debit.amt",\n        "title": "Amount",\n        "inputtype": "columnCurrency",\n        "config": {\n            "decimal": 2\n        }\n    }\n]'},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"jTableForm"}]},{name:"",lang:{},code:"code",class:"col-md-6 col-sm-12 ",codeHidden:"7b43df2be7e7b1d1",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Credit",code:"postings_credit",codeHidden:"a1f900b0238b3b6f",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:this.form_code+".postings_credit",query_data:this.form_code+".postings_credit",paging_record:"5",columns:'[\n    {\n        "code": "postings_credit.acgrp",\n        "title": "Group",\n        "inputtype": "ColumnNumber",\n        "config": {}\n    },\n    {\n        "code": "postings_credit.bacno",\n        "title": "Account number",\n        "inputtype": "columnMask",\n        "config": {\n            "mask": "$FO_ACNO_POSTING$"\n        }\n    },\n    {\n        "code": "postings_credit.amt",\n        "title": "Amount",\n        "inputtype": "columnCurrency",\n        "config": {\n            "decimal": 2\n        }\n    }\n]'},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"jTableForm"}]}]}],react_txt:""})},this}}const gi=function(t){return(0,v.jsx)("div",{className:"form-group",children:(0,v.jsx)("div",{className:"row mrgn-all-none",children:t.children})})};class mi extends s.Component{constructor(t){super(t),this.initContextAuto=()=>{this.context_auto={url_version:`${(new Date).getFullYear()}/${(new Date).getMonth()+1}/${(new Date).getDate()}/${(new Date).toString().replace(/:/g,".")}`,menu:{group_menu_lang:{vi:"",en:"",thai:"",lao:"",cam:"",mya:"",han:""},group_menu_name:"",group_menu_order:"1",group_menu_parent:"7cb65792dc18d127",group_menu_function_code:"",group_menu_id:"",AFGHkeyIndexWJ:"e741731311fbdde6",AFGHkeyTime:1575879644845,AFGHkeyWorkFlow:"",AFGHTimeWJ:1575879644942},id:a.ZP.autoID(),name:"",table:"",list_form:{}}},this.setStateLogic=(t,e)=>{this.prevStateLogic=a.ZP.cloneJson(this.state),this.state=Object.assign(this.state,t),e&&e(),this.props.abs_update&&this.props.abs_update()},this.onClickAutoBuild=t=>{this.initContextAuto(),this.context_auto.list_form_data_j=a.ZP.parseJson(this.state.list_form_data),this.setStateLogic({isBlock:!0},(()=>{this.callBackGetHTML()}))},this.onClickClear=()=>{this.initContextAuto(),this.setStateLogic({isAutoSuccess:!1,isSaveSuccess:!1,list_error:[]})},this.callBackSaveListForm=t=>{this.context_auto.startIndexBuild+10>=this.context_auto.lastIndexBuild?t?this.setStateLogic({isBlock:!1,isAutoSuccess:!1,isErrorSave:!1,isSaveSuccess:!0,list_error:[]}):this.setStateLogic({isBlock:!1,isErrorSave:!0,list_error:[]}):(t&&(this.context_auto.startIndexBuild+=10),this.showToast("",t),this.setStateLogic({update:!this.state.update},(()=>{setTimeout((()=>{ye.saveListForm(this.context_auto,this.callBackSaveListForm)}),2e3)})))},this.buildListAuthen=t=>{let e={};for(const i of t)void 0!==i.type&&void 0!==i.isauthen&&"FO"===i.type&&"1"===i.isauthen?e["FO_"+i.menuid]=!0:e["FO_"+i.menuid]=!1;return e},this.buildListMenu=t=>{let e=[];for(const i of t){let t={};if("0"===i.parentid)t={group_menu_lang:{vi:i.lang.vi,en:i.lang.en},group_menu_name:i.lang.en,group_menu_order:i.order.toString(),group_menu_parent:"0",group_menu_status:"A",group_menu_function_code:"",group_menu_visible:"FO"===i.type?"F":"T",group_menu_id:i.menuid,AFGHkeyIndexWJ:i.menuid,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime()};else switch(i.type){case"BO":t=1===i.is_has_child?{group_menu_lang:{vi:i.lang.vi,en:i.lang.en},group_menu_name:i.lang.en,group_menu_order:i.order.toString(),group_menu_parent:i.parentid,group_menu_status:"A",group_menu_function_code:"",group_menu_visible:"T",group_menu_id:i.menuid,AFGHkeyIndexWJ:i.menuid,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime()}:{group_menu_lang:{vi:i.lang.vi,en:i.lang.en},group_menu_name:i.lang.en,group_menu_order:i.order.toString(),group_menu_parent:i.parentid,group_menu_status:"A",group_menu_function_code:"BO_"+i.menuid,group_menu_visible:"T",group_menu_id:"BO_"+i.menuid,AFGHkeyIndexWJ:"BO_"+i.menuid,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime()};break;case"FO":t={group_menu_lang:{vi:i.lang.vi,en:i.lang.en},group_menu_name:i.lang.en,group_menu_order:"1",group_menu_parent:i.parentid,group_menu_status:"A",group_menu_function_code:"FO_"+i.menuid,group_menu_visible:"F",group_menu_id:"FO_"+i.menuid,AFGHkeyIndexWJ:"FO_"+i.menuid,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime()};break;default:console.log("****** Menu type: ",i.type)}e.push(t)}return e},this.callBackGetHTML=t=>{let e=[],i={},o=a.ZP.parseJson(this.state.list_form_data)||{},s=o.menu;this.list_menu_data=a.ZP.cloneJson(s),this.context_auto.list_menu=this.buildListMenu(s),this.list_form_authen=this.buildListAuthen(s);let n=o.forms,r=[],l={};for(const a in n)n.hasOwnProperty(a)&&!1===e.includes(a)&&(l["FO_"+a]=n[a]);for(const a in l){let t=Me.convertHtmlTableToArray(l[a],a);r=r.concat(Te.validateDataTable(t,a)),i[a]=t,this.context_auto.list_form[a]=new fi({menu:this.list_menu_data})}r.length>0?this.setStateLogic({list_error:r,isBlock:!1}):(this.context_auto.name="Form FO",this.buildConfigDefaultFormAuto(i),this.AutoBuildListForm(),this.setStateLogic({isAutoSuccess:!0,isBlock:!1}))},this.buildConfigDefaultFormAuto=t=>{let e=this.context_auto.list_form;for(const i in e){let o=e[i],a=t[i],s=Me.convertTableToArrayJson(a,i);o.buildInfoForm(s,t,i)}},this.AutoBuildListForm=()=>{let t=this.context_auto.list_form;for(const e in t){t[e].AutoBuildForm(t)}},this.getFormSelected=t=>{let e=this.props.data[this.state.formAutoSelected]||{};this.context_auto=e.autoform||{};let i=this.context_auto.list_form;this.setStateLogic({isAutoSuccess:!0,isSaveSuccess:!0,urlAdd:i.Add.url,urlView:i.View.url,urlSearch:i.Search.url})},this.showToast=(t,e)=>{console.log("Show l\u1ed7i",t,e)},this.renderFormCreate=()=>!0===this.state.isAutoSuccess?null:(0,v.jsx)(s.Fragment,{children:(0,v.jsx)("div",{className:"prtm-block",style:{padding:"30px"},children:(0,v.jsxs)("div",{className:"horizontal-form-style",children:[(0,v.jsxs)("div",{className:"prtm-block-title mrgn-b-lg",children:[(0,v.jsx)("h3",{children:"Quick Build Form"}),(0,v.jsx)("p",{children:"Auto build form from google sheet link."})]}),!0===this.state.isSaveSuccess&&(0,v.jsx)("div",{className:"alert alert-success",children:(0,v.jsx)("strong",{children:"Save successfully"})}),(0,v.jsxs)("form",{className:"form-horizontal",children:[this.renderInput(),this.renderListButton()]})]})})}),this.renderListError=()=>0===this.state.list_error.length?null:(0,v.jsx)(s.Fragment,{children:(0,v.jsx)("div",{className:"table-style",children:(0,v.jsxs)("div",{className:"prtm-block pos-relative",children:[(0,v.jsx)("div",{className:"prtm-block-title mrgn-b-lg",children:(0,v.jsx)("div",{className:"caption",children:(0,v.jsx)("h3",{className:"text-capitalize",children:"Error"})})}),(0,v.jsx)("div",{className:"prtm-block-content",children:(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsx)("div",{className:"unseen",children:(0,v.jsxs)("table",{className:"table table-hover table-bordered table-striped",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{className:"bg-danger",children:[(0,v.jsx)("th",{children:"Form Name"}),(0,v.jsx)("th",{children:"Row"}),(0,v.jsx)("th",{children:"Col"}),(0,v.jsx)("th",{children:"Value"}),(0,v.jsx)("th",{children:"Content"})]})}),(0,v.jsx)("tbody",{children:this.renderInfoError()})]})})})})]})})}),this.renderInfoError=()=>this.state.list_error.map(((t,e)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:t.form_name}),(0,v.jsx)("td",{children:t.row}),(0,v.jsx)("td",{children:t.col}),(0,v.jsx)("td",{children:t.value}),(0,v.jsx)("td",{children:t.content})]},e))),this.rederListForm=()=>!1===this.state.isAutoSuccess?null:(0,v.jsx)(s.Fragment,{children:(0,v.jsx)("div",{className:"table-style",children:(0,v.jsxs)("div",{className:"prtm-block pos-relative",children:[(0,v.jsx)("div",{className:"prtm-block-title mrgn-b-lg",children:(0,v.jsx)("div",{className:"caption",children:(0,v.jsx)("h3",{className:"text-capitalize",children:"List Form Auto"})})}),!0===this.state.isErrorSave&&(0,v.jsx)("div",{class:"note note-danger",children:(0,v.jsx)("p",{class:"mrgn-all-none",children:"Save Error,Try Again. "})}),(0,v.jsx)("div",{className:"prtm-block-content",children:(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsx)("div",{className:"unseen",children:(0,v.jsxs)("table",{className:"table table-hover table-bordered table-striped",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{className:"bg-primary",children:[(0,v.jsx)("th",{children:"Form"}),(0,v.jsx)("th",{children:"Form Name"}),(0,v.jsx)("th",{children:"Form Code"}),(0,v.jsx)("th",{children:"Component Amount"}),(0,v.jsx)("th",{children:"API Amount"}),(0,v.jsx)("th",{children:"Form Muti Amount"})]})}),(0,v.jsx)("tbody",{children:this.renderInfoListForm()})]})})})}),(0,v.jsx)("div",{className:"form-group",children:(0,v.jsx)("div",{className:"row mrgn-all-none",children:(0,v.jsxs)("div",{className:"col-sm-10",children:[(0,v.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:t=>this.onClickClear(t),style:{marginLeft:"10px"},children:[" ",(0,v.jsx)("i",{className:"fa fa-trash fa-lg"})," Clear"," "]}),(0,v.jsxs)("button",{type:"button",className:"btn btn-success",onClick:t=>this.onClickSave(t),style:{marginLeft:"10px"},children:[" ",(0,v.jsx)("i",{className:"fa fa-floppy-o fa-lg",style:{marginRight:"10px"}})," ","Save"," "]})]})})})]})})}),this.renderInfoListForm=()=>{let t=[];for(let e in this.context_auto.list_form){let i=this.context_auto.list_form[e],o=i.config;t.push((0,v.jsxs)("tr",{onClick:()=>{this.setStateLogic({form_select:e})},style:e===this.state.form_select?{background:"LightBlue"}:{},children:[(0,v.jsx)("td",{children:e}),(0,v.jsx)("td",{children:o.info.title}),(0,v.jsx)("td",{children:o.info.form_code}),(0,v.jsx)("td",{children:Me.countComponent(o.list_layout)}),(0,v.jsx)("td",{children:i.list_API.length}),(0,v.jsx)("td",{children:i.list_form_chil.length})]},e))}return t},this.setData=t=>{this.setStateLogic({list_form_data:t},(()=>{this.initContextAuto(),this.context_auto.list_form_data_j=a.ZP.parseJson(this.state.list_form_data),this.setStateLogic({isBlock:!0},(()=>{this.callBackGetHTML()}))}))},this.getData=()=>this,this.renderListButton=()=>(0,v.jsx)(s.Fragment,{children:(0,v.jsx)(gi,{children:(0,v.jsxs)("div",{className:"col-sm-offset-2 col-sm-10",children:[(0,v.jsxs)("label",{htmlFor:"file-upload",className:"custom-file-upload",children:[(0,v.jsx)("i",{className:"fa fa-cloud-upload"})," Custom Upload"]}),(0,v.jsx)("input",{id:"file-upload",type:"file",accept:".json",onChange:t=>{t.preventDefault(),this.setStateLogic({isBlock:!0});const e=new FileReader;e.onload=async t=>{const e=t.target.result;this.setStateLogic({list_form_data:e,isBlock:!1})},e.readAsText(t.target.files[0])}}),(0,v.jsxs)("button",{type:"button",className:"btn btn-primary",style:{marginLeft:"15px"},onClick:t=>this.onClickAutoBuild(t),children:[(0,v.jsx)("i",{className:"fa fa-rocket fa-lg",style:{marginRight:"10px"}})," ","Auto Build"," "]})]})})}),this.key_form="autoBuildForm",this.list_menu_data=[],this.list_form_authen={},this.context_auto={list_menu:[],startIndexBuild:0,lastIndexBuild:0,menu:{group_menu_lang:{vi:"",en:"",thai:"",lao:"",cam:"",mya:"",han:""},group_menu_name:"",group_menu_order:"1",group_menu_parent:"e40394be28bb7ca4",group_menu_function_code:"",group_menu_id:"",AFGHkeyIndexWJ:a.ZP.autoID(),AFGHkeyTime:1575879644845,AFGHkeyWorkFlow:"",AFGHTimeWJ:1575879644942},id:a.ZP.autoID(),name:"",table:"",list_form:{},list_form_data_j:{}},this.state={visibility:"",data:this.props.data,infoA:{title:"Qu\u1ea3n l\xfd autoBuildForm FO",des:"Ki\u1ec3m so\xe1t c\xe1c thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp!",openOne:"true",ofModal:!1},list_error:[],isAutoSuccess:!1,form_select:"",isBlock:!1,isErrorSave:!1,isSaveSuccess:!1,formAutoSelected:0,list_form_data:"",update:!0}}handleUrlChange(t){const e=t.target.value;this.setStateLogic({list_form_data:e})}onClickSave(){this.context_auto.startIndexBuild=0,this.context_auto.lastIndexBuild=Object.keys(this.context_auto.list_form).length,this.setStateLogic({isBlock:!0},(()=>{ye.saveListForm(this.context_auto,this.callBackSaveListForm)}))}render(){return null}renderInput(){return(0,v.jsx)("div",{className:"form-group ",style:{marginBottom:"10px"},children:(0,v.jsxs)("div",{className:"row mrgn-all-none",children:[(0,v.jsx)("label",{className:"col-sm-2 control-label",children:"Data List Form Json"}),(0,v.jsx)("div",{className:"col-sm-10 col-lg-9",children:(0,v.jsx)("textarea",{className:"form-control",onChange:t=>{this.handleUrlChange(t)},value:this.state.list_form_data,placeholder:"Data List Form Json",type:"text"})})]})})}}const vi=mi;class bi{static quickFix(t){return t=this.configMalibule(t)}static configMalibule(t){const e=function(t){let e="MUTI_FORM",i=t.list_layout,o=!1;return i.forEach((i=>{i.list_view.forEach((i=>{i.list_input.forEach((i=>{if("cButton"===i.inputtype){o=!0;const a=JSON.stringify(i.config),s=i.default;"MUTI_FORM"===e&&(s.name.toLowerCase().includes("accept")&&JSON.stringify(t).includes("Passw")&&JSON.stringify(t).includes("User Name")&&(e="APR_FORM"),a.includes("#sys:fo-open-form")&&(e="BO_FORM"),(a.includes("#sys:fo-create-dataAPI")||a.includes("fo-create-dataAPI-sanction"))&&s.name.toLowerCase().includes("accept")&&(e="FO_FORM"),a.includes("#sys:fo-lookup-selectData")&&(e="LKP_FORM"),s.name.toLowerCase().includes("apply")&&(e="SAME_FORM"))}}))}))})),!0===o&&"MUTI_FORM"===e?"BO_FORM":e}(t);return t.list_layout.forEach((i=>{i.list_view.forEach((i=>{let o=i.list_input;o.forEach(((i,a)=>{i=function(t,e,i,o,a,s){switch(t.inputtype){case"cButton":switch(e){case"MUTI_FORM":case"BO_FORM":case"FO_FORM":case"SAME_FORM":case"LKP_FORM":case"APR_FORM":break;default:console.log("Error cButton")}t.default.class="";break;case"cTextInput":switch(e){case"MUTI_FORM":t.default.class=yi(t.default.class,o%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),a.info.form_code.toLowerCase().startsWith("fo_")&&(t.default.class=yi(t.default.class,"col-12"));break;case"BO_FORM":case"SAME_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"LKP_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6");break;case"APR_FORM":t.default.class=yi(t.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error cTextInput")}JSON.stringify(t).toLowerCase().includes("search_text")&&(t.default.class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 malibu-component-max_width");break;case"cTableDefault":case"jTableForm":case"jSameMain":t.default.class="col-12";break;case"jSelect":switch(e){case"MUTI_FORM":t.default.class=yi(t.default.class,o%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),a.info.form_code.toLowerCase().startsWith("fo_")&&(t.default.class=yi(t.default.class,"col-12"));break;case"BO_FORM":case"SAME_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":case"LKP_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":t.default.class=yi(t.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error jSelect")}break;case"jMaskInput":switch(e){case"MUTI_FORM":t.default.class=yi(t.default.class,o%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),a.info.form_code.toLowerCase().startsWith("fo_")&&(t.default.class=yi(t.default.class,"col-12"));break;case"BO_FORM":case"SAME_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":case"LKP_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":t.default.class=yi(t.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error jMaskInput")}break;case"jCheckbox":switch(e){case"MUTI_FORM":t.default.class=yi(t.default.class,o%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),a.info.form_code.toLowerCase().startsWith("fo_")&&(t.default.class=yi(t.default.class,"col-12"));break;case"BO_FORM":case"SAME_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":case"LKP_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":t.default.class=yi(t.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error jCheckbox")}break;case"jMutiValue":switch(e){case"MUTI_FORM":t.default.class="col-12";break;case"BO_FORM":case"SAME_FORM":t.default.class=yi(t.default.class,"col-xl-10 col-lg-10 col-md-11 col-sm-12 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":case"LKP_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;default:console.log("Error jMutiValue")}break;case"jCurrency":if(a.info.form_code.includes("_O9_FEE")&&a.info.title.includes("_O9_FEE")&&JSON.stringify(a).includes("Interest/fee/charge code")){if(["Total Cash","Total deposit","Total accounting","Total Interest","Total principal"].includes(t.default.name)){t.default.class="col-xl-3 col-lg-3 col-md-5 col-sm-6 offset-xl-1-right offset-lg-1-right offset-md-1-right";break}}switch(e){case"MUTI_FORM":t.default.class=yi(t.default.class,o%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),a.info.form_code.toLowerCase().startsWith("fo_")&&(t.default.class=yi(t.default.class,"col-12"));break;case"BO_FORM":case"SAME_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":case"LKP_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":t.default.class=yi(t.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error jCurrency")}break;case"jLabel":switch(e){case"MUTI_FORM":case"BO_FORM":case"FO_FORM":case"SAME_FORM":case"LKP_FORM":t.default.class="col-sm-4 col-12";break;default:console.log("Error jLabel")}break;default:switch(e){case"MUTI_FORM":t.default.class=yi(t.default.class,o%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1");break;case"BO_FORM":case"SAME_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":case"LKP_FORM":t.default.class=yi(t.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":t.default.class=yi(t.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error")}}if(t.default.ofgroup)if("false"===t.default.ofgroup)t.default.ofgroup="";else if(a.info.form_code.includes("_O9_FEE")&&a.info.title.includes("_O9_FEE")&&JSON.stringify(a).includes("Interest/fee/charge code"))t.default.class_ofgroup="col-xl-12 col-lg-12 col-md-12 col-sm-12","jLabel"===t.inputtype?t.default.class="col-xl-9 col-lg-9 col-md-8 col-sm-7 ":t.default.class="col-xl-3 col-lg-3 col-md-4 col-sm-5 ";else if("FO_FORM"===e)t.default.class_ofgroup="col-xl-12 col-lg-12 col-md-12 col-sm-12",t.default.class="col-xl-3 col-lg-3 col-md-4 col-sm-5 col-12";else{if("MUTI_FORM"===e){let e=0;for(let i=0;i<s.length;i++){const o=s[i];if(o.default.code===t.default.code)break;"jLabel"!==(null===o||void 0===o?void 0:o.inputtype)&&e++}t.default.class_ofgroup=e%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"}else t.default.class_ofgroup="col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right";let i=s[o+1];"jLabel"!==(null===i||void 0===i?void 0:i.inputtype)&&"jLabel"!==(null===t||void 0===t?void 0:t.inputtype)?t.default.class="col-sm-6 col-12":"jLabel"!==(null===t||void 0===t?void 0:t.inputtype)&&(t.default.class="col-sm-8 col-12")}return t}(i,e,o[a-1],a,t,o),i=function(t,e,i,o,a,s){"LKP_FORM"===e&&"cTableDefault"===t.inputtype&&(t.config.paging_mode="MIN");a.info.form_code.endsWith("Search")&&Ai(a)&&(t.config.isLoadDataStart="false");return t}(i,e,o[a-1],0,t),i=function(t,e,i,o,a,s){if("jMutiValue"!==(null===t||void 0===t?void 0:t.inputtype))return t;t.default.name.includes("search")&&(t.config.is_open="true");return t}(i=function(t,e,i,o,a,s){if("cTextInput"!==t.inputtype)return t;Ai(a)&&t.default.code.includes("search")?(t.config.isSearch=!0,t.config.readOnly=!1,t.config.autoWrap=!1):(!t.validate.max||Number(t.validate.max)>50)&&(t.config.autoWrap=!0,t.config.isSearch=!1);return t}(i,0,o[a-1],0,t),0,o[a-1])}))}))})),t}}function yi(t,e){let i=t.replace(/(col[^ ]*|offset[^ ]+)/gm,"");return i=i+" "+e,i}function Ai(t){let e=!1;try{t.list_layout.forEach((t=>{t.list_view.forEach((t=>{t.list_input.forEach((t=>{"cButton"===t.inputtype&&t.default.code.includes("search")&&(e=!0)}))}))}))}catch(i){return!1}return e}const Di={get_info:void 0};class ki extends r.Z{constructor(){super(...arguments),this.loopGetInfo=()=>{Di.get_info=setInterval((async()=>{const t=await ve.getInfo();me.updateInfo(this.context,t,this.handleStop)}),2e3)},this.handleStart=()=>{ve.notifyAllUser(),me.handleStart(this.context,(()=>{ve.logoutAllUser();const t=me.getData(this.context);ve.startSync(t),this.loopGetInfo()}))},this.handleStop=()=>{clearInterval(Di.get_info),me.handleStop(this.context),ve.handleStop()},this.handleCheckFeature=()=>{const t=this.context.componentConfigDefault,{code:e,name:i}=t;me.handleSelectFeature(this.context,e,i)},this.addCautionToFO=t=>{let e=a.ZP.cloneJson(t),i={default:{name:a.ZP.getParameterSystem("CAUTION_FO"),code:"check_box_caution",class:"col-sm-12 col-md-12",role:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-1 col-md-1",codeHidden:"1b3677dfcb939dcd"},config:{structable:"",structable_read:"",data_default:"false",action:"",checked_mode:"true_false"},role:{visible:"",disabled:""},property:{danger:"",warning:"true"},validate:{},lang:{vi:"",en:""},configAVD:{},inputtype:"jCheckbox"};return e.info.ruleStrong.push({code:"runFo",inUse:!0,isStart:!0,isStatus:-1,order:1,config:{component_action:"check_box_caution;btn_clear",component_event:"all",txFoActions:'[\n    {\n        "function": "own_O9.checkCaution",\n        "status": "A",\n        "para": ["check_box_caution","btn_accept"]\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',useAction:"true",condition:"",component_result:"btn_accept"},isDidStart:!1,isOpenFromOther:!1}),e.info.ruleStrong.push({code:"calculator",inUse:!0,isStart:!0,isStatus:-1,order:6,config:{component_action:"ref_id",component_result:"check_box_caution",component_event:"all",function_cal:"'@{ref_id}'!==\"\" ? true : false",condition:""},isDidStart:!1,isOpenFromOther:!1}),e.info.ruleStrong.push({code:"visibility",inUse:!0,isStart:!1,isStatus:-1,order:1,config:{component_action:"btn_clear",component_result:"check_box_caution",view_result:"",condition:"",visible:"true",ena_dis:"false",component_event:"on_click",list_config:[]},isDidStart:!1,isOpenFromOther:!1}),e.list_layout[0].list_view[0].list_input.push(i),e},this.handleCheckFunctionFO=async()=>{var t,e;const i=null===(t=this.context)||void 0===t||null===(e=t.infoA)||void 0===e?void 0:e.key_form;if(!i)return;let o=a.ZP.getFormAppAuto(i);o.setLoadingRule(!0);let s=await this.callAPI("O9_ADMIN_SYNC_GET_FO_CONFIG"),n=new vi({});n.setData(JSON.stringify(s.data.data));let r=n.getData().context_auto;this.handleCheckFeature();let l=[],c=[],d=[],h=[];const u=r.list_form||[],p=r.list_menu||[],_=n.getData().list_form_authen;let f=o.callDirFromSupport("getAdvanced",{list_component:"*"},{}).fo_code_filter,g={};for(const a in u){if("*"!==f&&!f.split(";").includes(a.replace("FO_","")))continue;g[a]=!0;const t=u[a],e=t.list_API,i=t.list_form_chil;_[a]&&(t.config=this.addCautionToFO(t.config)),l.push({funtion_code:a.replace("FO_",""),funtion_name:t.config.info.title,api_amount:e.length,form_child_amount:i.length,form_code:a,form_config:bi.quickFix(t.config)});for(const o of i)c.push(bi.quickFix(o));d=d.concat(e)}h=p.filter((t=>g[t.group_menu_function_code]));let m=o.getData();m.form_fo_config=l,m.form_child_configs=c,m.api_fo_config=d,m.menu_fo_config=h,o.putDataAll_andSet(m),o.setLoadingRule(!1)},this.callAPI=(t,e)=>{var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:t}}];return i[0].input=Object.assign(i[0].input,e),(0,c.Yr)(i,{}).then((e=>a.ZP.foGetData("data",e)||{[t]:[]})).finally((t=>{}))}}}const Oi=ki;class wi extends r.Z{constructor(){super(...arguments),this.changeData=(t,e,i)=>{if(void 0!==t){var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);let i;if(void 0!==o&&o.hasOwnProperty("callDirFromSupport")&&(o.callDirFromSupport("checkValidate",{},{}),o.hasOwnProperty("getFormValidate")&&!o.getFormValidate())){o.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true",checkError:"true"},{}),i=o.getDataAdvanced("");let a=0;for(let o=0;o<i[t].length;o++){let s=i[t][o][e];s.sheet?(s.amount=s.face_value*s.sheet,a+=s.amount):(s.sheet=0,s.amount=0)}return o.putDataAll_andSet(i),o.callDirFromSupport("setAdvanced",{list_component:"denom_cash_balance"},a),!0}}}}}const Ci=wi;class xi extends r.Z{constructor(){super(...arguments),this.applyPrincipal=t=>{var e;let i=a.ZP.getFormAppAuto(this.context.infoA.key_form),o=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form),s=i.callDirFromSupport("getAdvanced",{list_component:"*"},""),n=o.getData(""),r=null===(e=window.moment.utc(s.duedt,"DD/MM/YYYY"))||void 0===e?void 0:e.toDate().getTime(),l=s.amt,c=s.table,d=n.BO_006002.to_date,h=s.dueno,u=a.ZP.context_get("user_acc").working_date,p=!1,_=!0;for(let a=0;a<c.length;a++){const e=c[a][t];if(new Date(e.due_date).getTime()===r&&h!==e.due_number){_=!1;break}}new Date(r).getTime()>new Date(u).getTime()&&new Date(r).getTime()<=new Date(d).getTime()&&0!==l&&_&&(p=!0),i.callDirFromSupport("setCMD",{list_component:"apply",list_view:"",inform:"true",checkError:"false"},{disabled:p?"false":"true"})},this.check_paymentlist_crd_account=(t,e)=>{let i=a.ZP.getFormAppAuto(this.context.infoA.key_form).getDataForm("");if(void 0!==i.BO_006002){if("B"===i.BO_006002.credit_type||"5"===i.BO_006002.credit_status)return!0;let o=i.BO_006002[e],a=i.BO_006002.credit_limit,s=0;if(void 0!==o&&o.forEach((t=>{const i=t[e];s+=parseFloat(i.amount)})),parseFloat(a.toFixed(2))===parseFloat(s.toFixed(2)))return!0;this.showToast(t,!1)}return!1},this.showToast=(t,e)=>{var i={};switch(e){case!0:i={class_:"success",icon:"fa fa-check",title:t+" successfully",time:(new Date).getTime()+"",description:t+" Successfully",data:{},action:{}};break;case!1:i={class_:"error",icon:"fa fa-check",title:t+" error",time:(new Date).getTime()+"",description:t+" error",data:{},action:{}};break;case"error":i={class_:"error",icon:"fa fa-check",title:t,time:(new Date).getTime()+"",description:t,data:{},action:{}}}a.ZP.pushNotify("notifyToast",i,{}),a.ZP.callAllScreenListen()}}}const Si=xi;var Mi,Pi,Ti,Ii,Fi,Ni,Li,Ei="",ji={};class Zi extends r.Z{constructor(){super(...arguments),this.offLoad=()=>{void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form&&(void 0!==(Ti=a.ZP.getFormAppAuto(this.context.infoA.key_form))?Ti.hasOwnProperty("setLoadingAction")&&Ti.setLoadingAction(!1):a.ZP.AppException("#dashboard.offLoad","dashboard is undefined","system"))},this.reloadData=()=>{void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form&&(void 0!==(Mi=a.ZP.getFormAppAuto(this.context.infoA.key_form))?Mi.hasOwnProperty("reload")&&Mi.reload():a.ZP.AppException("#dashboard.reloadData","dashboard is undefined","system"))},this.dataToForm=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form)if(void 0!==(Pi=a.ZP.getFormAppAuto(this.context.infoA.key_form))){if(Pi.setLoadingAction(!0),Pi.hasOwnProperty("setFormValidateFromFunctionClient")&&Pi.setFormValidateFromFunctionClient(!1),Pi.hasOwnProperty("callDirFromSupport")){Ei="",void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(Ei=this.input.config_table.learn_api_data),Ii=a.ZP.getDataOOPFormServer(this.input,Ei),Fi=Ii[this.context.infoA.key_form];for(let t in Fi)if(Array.isArray(Fi[t])){let e=[];for(let i=0;i<Fi[t].length;i++)"object"===typeof Fi[t][i][t]?e.push(Fi[t][i]):e.push({[t]:Fi[t][i]});Ii[t]=e}Ni=a.ZP.cloneJson(Ii),Li=Pi.getData(),ji={};for(const t in Li)if("object"===typeof Li[t]&&!Array.isArray(!Li[t])){null===Li[t]?null===Ii[t]?ji[t]=null:ji[t]=Ii[t]:ji[t]=Object.assign(a.ZP.cloneJson(Li[t]),a.ZP.cloneJson(Ii[t]||{}));for(const e in Li[t])Array.isArray(Li[t][e])&&(Li[e]=a.ZP.cloneJson(Li[t][e]))}for(const t in Ni)if("object"===typeof Ni[t]&&!Array.isArray(!Ni[t])&&!Number(t)&&"0"!==t)for(const e in Ni[t])Array.isArray(!Ni[t][e])||(Li[t]||(Li[t]={}),Li[t][e]=Ni[t][e]);for(const t in this.input)-1!==t.indexOf("_paging")&&(Li[t]=this.input[t]);Pi.putDataAll_andSet(Li),Pi.hasOwnProperty("setLoadingAction")&&Pi.setLoadingAction(!1),Pi.hasOwnProperty("clearTimeOut")&&Pi.clearTimeOut()}}else a.ZP.AppException("#dashboard.dataToForm","dashboard is undefined","system");else a.ZP.AppException("#dashboard.dataToForm","dashboard is undefined","system");else a.ZP.AppException("#dashboard.dataToForm","infoA is undefined","system")}}}const Ri={crd_payment_ncbs:Si,dashboard:Zi,cashDenom:Ci,own_O9_sync:Oi,own_O9_fee:Rt,own_O9:Mt,own_print:wt,own_o9_calender:Ft,system:y,message:o.Z,event:F,form:L,formsql:j,chat:R,masterdata:z,own:ht,runFunc:pt,formAPI:ft,formChild:mt,support:bt,msgSystem:At,supportKeyboard:xt,calender:Tt,formJoin:Lt,schedule:Wt,formModal:Jt,chart:Xt,clipboard:te,downloadFile:oe,jobProcess:se}},8209:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});const o=class{constructor(t,e,i,o,a,s,n,r){this.getInputAction=()=>this.input_action,this.getInput=()=>this.input,this.context=void 0===t?{}:t,this.input=void 0===e?{}:e,this.input_action=void 0===i?{}:i,this.fo_step=o,this.fo_arr_step=a,this.input_fo=s,this.list_bo_new=n,this.fo_arr=r}addPackFo(t,e){void 0!==e&&(this.input_action[t]=e)}buildPackRollBack(){return{fo_step:this.fo_step,fo_arr_step:this.fo_arr_step,context:this.context,input_fo:this.input_fo,input_action:this.input_action,list_bo_new:this.list_bo_new,fo_arr:this.fo_arr}}}},3702:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var o=i(1896),a=i(5842),s=i(8209);class n extends s.Z{constructor(){super(...arguments),this.showAlert=()=>{void 0!==this.input.lang?alert(a.ZP.getLang(this.input.lang)):a.ZP.AppException("#message.showAlert","lang is undefined","data")},this.countdownLogout=()=>{let t=10;void 0!==a.ZP.getParameterSystem("system_countdown_logout")&&(t=a.ZP.getParameterSystem("system_countdown_logout"));let e=setInterval((()=>{0===t&&(clearInterval(e),(0,o.Yr)([{txcode:"#sys:bo-projectLogin-listApplication",input:{}}],{}).then((t=>{var e,i;const s=(null===(e=a.ZP.foGetData("list_application",t).find((t=>t.list_application.list_appliaction_id===a.Py)))||void 0===e||null===(i=e.list_application)||void 0===i?void 0:i.list_application_bo_logout)||"#sys:bo-delete-session";(0,o.Yr)([{txcode:s,input:{token_webui:a.ZP.getSessionFromStore()}}],{})}))),(0,a.zF)(!0,{title:a.ZP.getLang("system_countdown_logout")+t,btn:"",list_fo:"",list_fo_start:"",color:"warning"}),t-=1}),1e3)},this.showConsole=()=>{void 0!==this.input.lang?console.log(a.ZP.getLang(this.input.lang)):a.ZP.AppException("#message.showConsole","lang is undefined","data")},this.setExtendToken=()=>{console.log("setExtendToken===",this.input),void 0!==this.input.extend_token&&(0,a.uC)(this.input.extend_token)},this.showToastConfirm=()=>{var t,e;let i="";i=this.input.lang_confirm?a.ZP.getLang(this.input.lang_confirm):this.input.lang?a.ZP.getLang(this.input.lang):null!==(t=this.context.componentConfigDefault)&&void 0!==t&&t.name?a.ZP.getLang(null===(e=this.context.componentConfigDefault)||void 0===e?void 0:e.name):a.ZP.getLang("Action"),i+=" ",this.input.lang_param_replace&&this.input.data_param&&(i=i.replace(this.input.lang_param_replace,this.input.data_param));const o=new Date;let s="",n="";if(this.input.toast_type)if("success"===this.input.toast_type)s="success",n="fa fa-check",i+=a.ZP.getLang("success");else s="error",n="fa fa-bullhorn",i+=a.ZP.getLang("error");else{let t=this.input.lang;switch(t){case"sysActionOk":case"sysActionSaveOk":case"sysGetInfoOk":s="success",n="fa fa-check",i+=a.ZP.getLang("success");break;case"sysActionSaveError":s="error",n="fa fa-exclamation",i+=a.ZP.getLang("error");break;default:String(t).toLowerCase().includes("error")||String(t).toLowerCase().includes("fail")?(s="error",n="fa fa-bullhorn",i+=a.ZP.getLang("error")):(s="success",n="fa fa-bullhorn",i+=a.ZP.getLang("success"))}}var r={class_:s,icon:n,title:a.ZP.getLang("systemTitle"),time:o.getTime()+"",description:i,data:{},action:{}};if(a.ZP.pushNotify("notifyToast",r,{}),a.ZP.pushNotify("notifyDefault",r,{}),void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var l=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==l&&l.hasOwnProperty("getLoadingAction")){let t=!1;t=l.getLoadingAction(),t&&setTimeout((()=>{l.hasOwnProperty("setLoadingAction")&&l.setLoadingAction(!1)}),500)}}a.ZP.callAllScreenListen()},this.showToast=()=>{if(void 0!==this.input.JWEBUI_O9_approve&&this.input.JWEBUI_O9_approve.isOpen){if(void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form&&void 0!==(t=a.ZP.getFormAppAuto(this.context.infoA.key_form))&&t.hasOwnProperty("getLoadingAction")){let e=!1;e=t.getLoadingAction(),e&&t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1)}}else if(void 0!==this.input.lang){const i=new Date;let o=this.input.lang,s="",n="";switch(o){case"sysActionOk":case"sysActionSaveOk":case"sysGetInfoOk":s="success",n="fa fa-check";break;case"sysActionSaveError":s="error",n="fa fa-exclamation";break;case"sysActionSearchEmpty":s="warning",n="fa fa-exclamation";break;default:String(o).toLowerCase().includes("error")||String(o).toLowerCase().includes("fail")?(s="error",n="fa fa-bullhorn"):(s="success",n="fa fa-bullhorn")}var t,e={class_:s,icon:n,title:a.ZP.getLang("systemTitle"),time:i.getTime()+"",description:a.ZP.getLang(this.input.lang),data:{},action:{}};if(a.ZP.pushNotify("notifyToast",e,{}),a.ZP.pushNotify("notifyDefault",e,{}),void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form)if(void 0!==(t=a.ZP.getFormAppAuto(this.context.infoA.key_form))&&t.hasOwnProperty("getLoadingAction")){let e=!1;e=t.getLoadingAction(),e&&t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1)}a.ZP.callAllScreenListen()}else a.ZP.AppException("#message.showToast","lang is undefined","data")},this.showNotify=()=>{if(void 0!==this.input&&void 0!==this.input.notifyServer){for(var t=0;t<this.input.notifyServer.length;t++){var e=this.input.notifyServer[t];void 0!==e.type_notify&&void 0!==e.mess&&a.ZP.pushAllNotify(e.type_notify,[e.mess])}a.ZP.callAllScreenListen()}},this.chat=t=>{},this.showMessageModal=(t,e)=>{let i={title:a.ZP.getLang(t),content:a.ZP.getLang(e)};var o=this.buildPackRollBack();return a.ZP.confirmInfo(i,[{name:"message_modal_ok",color:"primary",icon:"fa-floppy-o",val:!0}],o),!0}}}const r=n},1843:t=>{"use strict";var e=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(t){o[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(a){return!1}}()?Object.assign:function(t,a){for(var s,n,r=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))i.call(s,c)&&(r[c]=s[c]);if(e){n=e(s);for(var d=0;d<n.length;d++)o.call(s,n[d])&&(r[n[d]]=s[n[d]])}}return r}},534:(t,e,i)=>{"use strict";var o=i(7313),a=i(1843),s=i(2224);function n(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!o)throw Error(n(227));function r(t,e,i,o,a,s,n,r,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(i,c)}catch(d){this.onError(d)}}var l=!1,c=null,d=!1,h=null,u={onError:function(t){l=!0,c=t}};function p(t,e,i,o,a,s,n,d,h){l=!1,c=null,r.apply(u,arguments)}var _=null,f=null,g=null;function m(t,e,i){var o=t.type||"unknown-event";t.currentTarget=g(i),function(t,e,i,o,a,s,r,u,_){if(p.apply(this,arguments),l){if(!l)throw Error(n(198));var f=c;l=!1,c=null,d||(d=!0,h=f)}}(o,e,void 0,t),t.currentTarget=null}var v=null,b={};function y(){if(v)for(var t in b){var e=b[t],i=v.indexOf(t);if(!(-1<i))throw Error(n(96,t));if(!D[i]){if(!e.extractEvents)throw Error(n(97,t));for(var o in D[i]=e,i=e.eventTypes){var a=void 0,s=i[o],r=e,l=o;if(k.hasOwnProperty(l))throw Error(n(99,l));k[l]=s;var c=s.phasedRegistrationNames;if(c){for(a in c)c.hasOwnProperty(a)&&A(c[a],r,l);a=!0}else s.registrationName?(A(s.registrationName,r,l),a=!0):a=!1;if(!a)throw Error(n(98,o,t))}}}}function A(t,e,i){if(O[t])throw Error(n(100,t));O[t]=e,w[t]=e.eventTypes[i].dependencies}var D=[],k={},O={},w={};function C(t){var e,i=!1;for(e in t)if(t.hasOwnProperty(e)){var o=t[e];if(!b.hasOwnProperty(e)||b[e]!==o){if(b[e])throw Error(n(102,e));b[e]=o,i=!0}}i&&y()}var x=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),S=null,M=null,P=null;function T(t){if(t=f(t)){if("function"!==typeof S)throw Error(n(280));var e=t.stateNode;e&&(e=_(e),S(t.stateNode,t.type,e))}}function I(t){M?P?P.push(t):P=[t]:M=t}function F(){if(M){var t=M,e=P;if(P=M=null,T(t),e)for(t=0;t<e.length;t++)T(e[t])}}function N(t,e){return t(e)}function L(t,e,i,o,a){return t(e,i,o,a)}function E(){}var j=N,Z=!1,R=!1;function Q(){null===M&&null===P||(E(),F())}function z(t,e,i){if(R)return t(e,i);R=!0;try{return j(t,e,i)}finally{R=!1,Q()}}var U=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B=Object.prototype.hasOwnProperty,Y={},H={};function V(t,e,i,o,a,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=s}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){W[t]=new V(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];W[e]=new V(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){W[t]=new V(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){W[t]=new V(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){W[t]=new V(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){W[t]=new V(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){W[t]=new V(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){W[t]=new V(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){W[t]=new V(t,5,!1,t.toLowerCase(),null,!1)}));var G=/[\-:]([a-z])/g;function J(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(G,J);W[e]=new V(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(G,J);W[e]=new V(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(G,J);W[e]=new V(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){W[t]=new V(t,1,!1,t.toLowerCase(),null,!1)})),W.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){W[t]=new V(t,1,!1,t.toLowerCase(),null,!0)}));var q=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function K(t,e,i,o){var a=W.hasOwnProperty(e)?W[e]:null;(null!==a?0===a.type:!o&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,i,o){if(null===e||"undefined"===typeof e||function(t,e,i,o){if(null!==i&&0===i.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!o&&(null!==i?!i.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,i,o))return!0;if(o)return!1;if(null!==i)switch(i.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,i,a,o)&&(i=null),o||null===a?function(t){return!!B.call(H,t)||!B.call(Y,t)&&(U.test(t)?H[t]=!0:(Y[t]=!0,!1))}(e)&&(null===i?t.removeAttribute(e):t.setAttribute(e,""+i)):a.mustUseProperty?t[a.propertyName]=null===i?3!==a.type&&"":i:(e=a.attributeName,o=a.attributeNamespace,null===i?t.removeAttribute(e):(i=3===(a=a.type)||4===a&&!0===i?"":""+i,o?t.setAttributeNS(o,e,i):t.setAttribute(e,i))))}q.hasOwnProperty("ReactCurrentDispatcher")||(q.ReactCurrentDispatcher={current:null}),q.hasOwnProperty("ReactCurrentBatchConfig")||(q.ReactCurrentBatchConfig={suspense:null});var X=/^(.*)[\\\/]/,$="function"===typeof Symbol&&Symbol.for,tt=$?Symbol.for("react.element"):60103,et=$?Symbol.for("react.portal"):60106,it=$?Symbol.for("react.fragment"):60107,ot=$?Symbol.for("react.strict_mode"):60108,at=$?Symbol.for("react.profiler"):60114,st=$?Symbol.for("react.provider"):60109,nt=$?Symbol.for("react.context"):60110,rt=$?Symbol.for("react.concurrent_mode"):60111,lt=$?Symbol.for("react.forward_ref"):60112,ct=$?Symbol.for("react.suspense"):60113,dt=$?Symbol.for("react.suspense_list"):60120,ht=$?Symbol.for("react.memo"):60115,ut=$?Symbol.for("react.lazy"):60116,pt=$?Symbol.for("react.block"):60121,_t="function"===typeof Symbol&&Symbol.iterator;function ft(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=_t&&t[_t]||t["@@iterator"])?t:null}function gt(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case it:return"Fragment";case et:return"Portal";case at:return"Profiler";case ot:return"StrictMode";case ct:return"Suspense";case dt:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case nt:return"Context.Consumer";case st:return"Context.Provider";case lt:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ht:return gt(t.type);case pt:return gt(t.render);case ut:if(t=1===t._status?t._result:null)return gt(t)}return null}function mt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var i="";break t;default:var o=t._debugOwner,a=t._debugSource,s=gt(t.type);i=null,o&&(i=gt(o.type)),o=s,s="",a?s=" (at "+a.fileName.replace(X,"")+":"+a.lineNumber+")":i&&(s=" (created by "+i+")"),i="\n    in "+(o||"Unknown")+s}e+=i,t=t.return}while(t);return e}function vt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function bt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function yt(t){t._valueTracker||(t._valueTracker=function(t){var e=bt(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var a=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(t){o=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(t){o=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function At(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),o="";return t&&(o=bt(t)?t.checked?"true":"false":t.value),(t=o)!==i&&(e.setValue(t),!0)}function Dt(t,e){var i=e.checked;return a({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:t._wrapperState.initialChecked})}function kt(t,e){var i=null==e.defaultValue?"":e.defaultValue,o=null!=e.checked?e.checked:e.defaultChecked;i=vt(null!=e.value?e.value:i),t._wrapperState={initialChecked:o,initialValue:i,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Ot(t,e){null!=(e=e.checked)&&K(t,"checked",e,!1)}function wt(t,e){Ot(t,e);var i=vt(e.value),o=e.type;if(null!=i)"number"===o?(0===i&&""===t.value||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if("submit"===o||"reset"===o)return void t.removeAttribute("value");e.hasOwnProperty("value")?xt(t,e.type,i):e.hasOwnProperty("defaultValue")&&xt(t,e.type,vt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Ct(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!("submit"!==o&&"reset"!==o||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}""!==(i=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==i&&(t.name=i)}function xt(t,e,i){"number"===e&&t.ownerDocument.activeElement===t||(null==i?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}function St(t,e){return t=a({children:void 0},e),(e=function(t){var e="";return o.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function Mt(t,e,i,o){if(t=t.options,e){e={};for(var a=0;a<i.length;a++)e["$"+i[a]]=!0;for(i=0;i<t.length;i++)a=e.hasOwnProperty("$"+t[i].value),t[i].selected!==a&&(t[i].selected=a),a&&o&&(t[i].defaultSelected=!0)}else{for(i=""+vt(i),e=null,a=0;a<t.length;a++){if(t[a].value===i)return t[a].selected=!0,void(o&&(t[a].defaultSelected=!0));null!==e||t[a].disabled||(e=t[a])}null!==e&&(e.selected=!0)}}function Pt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(n(91));return a({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tt(t,e){var i=e.value;if(null==i){if(i=e.children,e=e.defaultValue,null!=i){if(null!=e)throw Error(n(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(n(93));i=i[0]}e=i}null==e&&(e=""),i=e}t._wrapperState={initialValue:vt(i)}}function It(t,e){var i=vt(e.value),o=vt(e.defaultValue);null!=i&&((i=""+i)!==t.value&&(t.value=i),null==e.defaultValue&&t.defaultValue!==i&&(t.defaultValue=i)),null!=o&&(t.defaultValue=""+o)}function Ft(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var Nt="http://www.w3.org/1999/xhtml",Lt="http://www.w3.org/2000/svg";function Et(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Et(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Zt,Rt,Qt=(Rt=function(t,e){if(t.namespaceURI!==Lt||"innerHTML"in t)t.innerHTML=e;else{for((Zt=Zt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,i,o){MSApp.execUnsafeLocalFunction((function(){return Rt(t,e)}))}:Rt);function zt(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&3===i.nodeType)return void(i.nodeValue=e)}t.textContent=e}function Ut(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Bt={animationend:Ut("Animation","AnimationEnd"),animationiteration:Ut("Animation","AnimationIteration"),animationstart:Ut("Animation","AnimationStart"),transitionend:Ut("Transition","TransitionEnd")},Yt={},Ht={};function Vt(t){if(Yt[t])return Yt[t];if(!Bt[t])return t;var e,i=Bt[t];for(e in i)if(i.hasOwnProperty(e)&&e in Ht)return Yt[t]=i[e];return t}x&&(Ht=document.createElement("div").style,"AnimationEvent"in window||(delete Bt.animationend.animation,delete Bt.animationiteration.animation,delete Bt.animationstart.animation),"TransitionEvent"in window||delete Bt.transitionend.transition);var Wt=Vt("animationend"),Gt=Vt("animationiteration"),Jt=Vt("animationstart"),qt=Vt("transitionend"),Kt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xt=new("function"===typeof WeakMap?WeakMap:Map);function $t(t){var e=Xt.get(t);return void 0===e&&(e=new Map,Xt.set(t,e)),e}function te(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).effectTag)&&(i=e.return),t=e.return}while(t)}return 3===e.tag?i:null}function ee(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function ie(t){if(te(t)!==t)throw Error(n(188))}function oe(t){if(t=function(t){var e=t.alternate;if(!e){if(null===(e=te(t)))throw Error(n(188));return e!==t?null:t}for(var i=t,o=e;;){var a=i.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(o=a.return)){i=o;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===i)return ie(a),t;if(s===o)return ie(a),e;s=s.sibling}throw Error(n(188))}if(i.return!==o.return)i=a,o=s;else{for(var r=!1,l=a.child;l;){if(l===i){r=!0,i=a,o=s;break}if(l===o){r=!0,o=a,i=s;break}l=l.sibling}if(!r){for(l=s.child;l;){if(l===i){r=!0,i=s,o=a;break}if(l===o){r=!0,o=s,i=a;break}l=l.sibling}if(!r)throw Error(n(189))}}if(i.alternate!==o)throw Error(n(190))}if(3!==i.tag)throw Error(n(188));return i.stateNode.current===i?t:e}(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function ae(t,e){if(null==e)throw Error(n(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function se(t,e,i){Array.isArray(t)?t.forEach(e,i):t&&e.call(i,t)}var ne=null;function re(t){if(t){var e=t._dispatchListeners,i=t._dispatchInstances;if(Array.isArray(e))for(var o=0;o<e.length&&!t.isPropagationStopped();o++)m(t,e[o],i[o]);else e&&m(t,e,i);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function le(t){if(null!==t&&(ne=ae(ne,t)),t=ne,ne=null,t){if(se(t,re),ne)throw Error(n(95));if(d)throw t=h,d=!1,h=null,t}}function ce(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function de(t){if(!x)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}var he=[];function ue(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>he.length&&he.push(t)}function pe(t,e,i,o){if(he.length){var a=he.pop();return a.topLevelType=t,a.eventSystemFlags=o,a.nativeEvent=e,a.targetInst=i,a}return{topLevelType:t,eventSystemFlags:o,nativeEvent:e,targetInst:i,ancestors:[]}}function _e(t){var e=t.targetInst,i=e;do{if(!i){t.ancestors.push(i);break}var o=i;if(3===o.tag)o=o.stateNode.containerInfo;else{for(;o.return;)o=o.return;o=3!==o.tag?null:o.stateNode.containerInfo}if(!o)break;5!==(e=i.tag)&&6!==e||t.ancestors.push(i),i=Ii(o)}while(i);for(i=0;i<t.ancestors.length;i++){e=t.ancestors[i];var a=ce(t.nativeEvent);o=t.topLevelType;var s=t.nativeEvent,n=t.eventSystemFlags;0===i&&(n|=64);for(var r=null,l=0;l<D.length;l++){var c=D[l];c&&(c=c.extractEvents(o,e,s,a,n))&&(r=ae(r,c))}le(r)}}function fe(t,e,i){if(!i.has(t)){switch(t){case"scroll":Je(e,"scroll",!0);break;case"focus":case"blur":Je(e,"focus",!0),Je(e,"blur",!0),i.set("blur",null),i.set("focus",null);break;case"cancel":case"close":de(t)&&Je(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Kt.indexOf(t)&&Ge(t,e)}i.set(t,null)}}var ge,me,ve,be=!1,ye=[],Ae=null,De=null,ke=null,Oe=new Map,we=new Map,Ce=[],xe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Se="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Me(t,e,i,o,a){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|i,nativeEvent:a,container:o}}function Pe(t,e){switch(t){case"focus":case"blur":Ae=null;break;case"dragenter":case"dragleave":De=null;break;case"mouseover":case"mouseout":ke=null;break;case"pointerover":case"pointerout":Oe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":we.delete(e.pointerId)}}function Te(t,e,i,o,a,s){return null===t||t.nativeEvent!==s?(t=Me(e,i,o,a,s),null!==e&&(null!==(e=Fi(e))&&me(e)),t):(t.eventSystemFlags|=o,t)}function Ie(t){var e=Ii(t.target);if(null!==e){var i=te(e);if(null!==i)if(13===(e=i.tag)){if(null!==(e=ee(i)))return t.blockedOn=e,void s.unstable_runWithPriority(t.priority,(function(){ve(i)}))}else if(3===e&&i.stateNode.hydrate)return void(t.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}t.blockedOn=null}function Fe(t){if(null!==t.blockedOn)return!1;var e=$e(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var i=Fi(e);return null!==i&&me(i),t.blockedOn=e,!1}return!0}function Ne(t,e,i){Fe(t)&&i.delete(e)}function Le(){for(be=!1;0<ye.length;){var t=ye[0];if(null!==t.blockedOn){null!==(t=Fi(t.blockedOn))&&ge(t);break}var e=$e(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:ye.shift()}null!==Ae&&Fe(Ae)&&(Ae=null),null!==De&&Fe(De)&&(De=null),null!==ke&&Fe(ke)&&(ke=null),Oe.forEach(Ne),we.forEach(Ne)}function Ee(t,e){t.blockedOn===e&&(t.blockedOn=null,be||(be=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Le)))}function je(t){function e(e){return Ee(e,t)}if(0<ye.length){Ee(ye[0],t);for(var i=1;i<ye.length;i++){var o=ye[i];o.blockedOn===t&&(o.blockedOn=null)}}for(null!==Ae&&Ee(Ae,t),null!==De&&Ee(De,t),null!==ke&&Ee(ke,t),Oe.forEach(e),we.forEach(e),i=0;i<Ce.length;i++)(o=Ce[i]).blockedOn===t&&(o.blockedOn=null);for(;0<Ce.length&&null===(i=Ce[0]).blockedOn;)Ie(i),null===i.blockedOn&&Ce.shift()}var Ze={},Re=new Map,Qe=new Map,ze=["abort","abort",Wt,"animationEnd",Gt,"animationIteration",Jt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",qt,"transitionEnd","waiting","waiting"];function Ue(t,e){for(var i=0;i<t.length;i+=2){var o=t[i],a=t[i+1],s="on"+(a[0].toUpperCase()+a.slice(1));s={phasedRegistrationNames:{bubbled:s,captured:s+"Capture"},dependencies:[o],eventPriority:e},Qe.set(o,e),Re.set(o,s),Ze[a]=s}}Ue("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ue("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ue(ze,2);for(var Be="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ye=0;Ye<Be.length;Ye++)Qe.set(Be[Ye],0);var He=s.unstable_UserBlockingPriority,Ve=s.unstable_runWithPriority,We=!0;function Ge(t,e){Je(e,t,!1)}function Je(t,e,i){var o=Qe.get(e);switch(void 0===o?2:o){case 0:o=qe.bind(null,e,1,t);break;case 1:o=Ke.bind(null,e,1,t);break;default:o=Xe.bind(null,e,1,t)}i?t.addEventListener(e,o,!0):t.addEventListener(e,o,!1)}function qe(t,e,i,o){Z||E();var a=Xe,s=Z;Z=!0;try{L(a,t,e,i,o)}finally{(Z=s)||Q()}}function Ke(t,e,i,o){Ve(He,Xe.bind(null,t,e,i,o))}function Xe(t,e,i,o){if(We)if(0<ye.length&&-1<xe.indexOf(t))t=Me(null,t,e,i,o),ye.push(t);else{var a=$e(t,e,i,o);if(null===a)Pe(t,o);else if(-1<xe.indexOf(t))t=Me(a,t,e,i,o),ye.push(t);else if(!function(t,e,i,o,a){switch(e){case"focus":return Ae=Te(Ae,t,e,i,o,a),!0;case"dragenter":return De=Te(De,t,e,i,o,a),!0;case"mouseover":return ke=Te(ke,t,e,i,o,a),!0;case"pointerover":var s=a.pointerId;return Oe.set(s,Te(Oe.get(s)||null,t,e,i,o,a)),!0;case"gotpointercapture":return s=a.pointerId,we.set(s,Te(we.get(s)||null,t,e,i,o,a)),!0}return!1}(a,t,e,i,o)){Pe(t,o),t=pe(t,o,null,e);try{z(_e,t)}finally{ue(t)}}}}function $e(t,e,i,o){if(null!==(i=Ii(i=ce(o)))){var a=te(i);if(null===a)i=null;else{var s=a.tag;if(13===s){if(null!==(i=ee(a)))return i;i=null}else if(3===s){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}t=pe(t,o,i,e);try{z(_e,t)}finally{ue(t)}return null}var ti={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ei=["Webkit","ms","Moz","O"];function ii(t,e,i){return null==e||"boolean"===typeof e||""===e?"":i||"number"!==typeof e||0===e||ti.hasOwnProperty(t)&&ti[t]?(""+e).trim():e+"px"}function oi(t,e){for(var i in t=t.style,e)if(e.hasOwnProperty(i)){var o=0===i.indexOf("--"),a=ii(i,e[i],o);"float"===i&&(i="cssFloat"),o?t.setProperty(i,a):t[i]=a}}Object.keys(ti).forEach((function(t){ei.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ti[e]=ti[t]}))}));var ai=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function si(t,e){if(e){if(ai[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(n(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(n(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(n(62,""))}}function ni(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ri=Nt;function li(t,e){var i=$t(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=w[e];for(var o=0;o<e.length;o++)fe(e[o],t,i)}function ci(){}function di(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function hi(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ui(t,e){var i,o=hi(t);for(t=0;o;){if(3===o.nodeType){if(i=t+o.textContent.length,t<=e&&i>=e)return{node:o,offset:e-t};t=i}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=hi(o)}}function pi(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?pi(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function _i(){for(var t=window,e=di();e instanceof t.HTMLIFrameElement;){try{var i="string"===typeof e.contentWindow.location.href}catch(o){i=!1}if(!i)break;e=di((t=e.contentWindow).document)}return e}function fi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var gi="$",mi="/$",vi="$?",bi="$!",yi=null,Ai=null;function Di(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function ki(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Oi="function"===typeof setTimeout?setTimeout:void 0,wi="function"===typeof clearTimeout?clearTimeout:void 0;function Ci(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function xi(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var i=t.data;if(i===gi||i===bi||i===vi){if(0===e)return t;e--}else i===mi&&e++}t=t.previousSibling}return null}var Si=Math.random().toString(36).slice(2),Mi="__reactInternalInstance$"+Si,Pi="__reactEventHandlers$"+Si,Ti="__reactContainere$"+Si;function Ii(t){var e=t[Mi];if(e)return e;for(var i=t.parentNode;i;){if(e=i[Ti]||i[Mi]){if(i=e.alternate,null!==e.child||null!==i&&null!==i.child)for(t=xi(t);null!==t;){if(i=t[Mi])return i;t=xi(t)}return e}i=(t=i).parentNode}return null}function Fi(t){return!(t=t[Mi]||t[Ti])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Ni(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(n(33))}function Li(t){return t[Pi]||null}function Ei(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function ji(t,e){var i=t.stateNode;if(!i)return null;var o=_(i);if(!o)return null;i=o[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!o;break t;default:t=!1}if(t)return null;if(i&&"function"!==typeof i)throw Error(n(231,e,typeof i));return i}function Zi(t,e,i){(e=ji(t,i.dispatchConfig.phasedRegistrationNames[e]))&&(i._dispatchListeners=ae(i._dispatchListeners,e),i._dispatchInstances=ae(i._dispatchInstances,t))}function Ri(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,i=[];e;)i.push(e),e=Ei(e);for(e=i.length;0<e--;)Zi(i[e],"captured",t);for(e=0;e<i.length;e++)Zi(i[e],"bubbled",t)}}function Qi(t,e,i){t&&i&&i.dispatchConfig.registrationName&&(e=ji(t,i.dispatchConfig.registrationName))&&(i._dispatchListeners=ae(i._dispatchListeners,e),i._dispatchInstances=ae(i._dispatchInstances,t))}function zi(t){t&&t.dispatchConfig.registrationName&&Qi(t._targetInst,null,t)}function Ui(t){se(t,Ri)}var Bi=null,Yi=null,Hi=null;function Vi(){if(Hi)return Hi;var t,e,i=Yi,o=i.length,a="value"in Bi?Bi.value:Bi.textContent,s=a.length;for(t=0;t<o&&i[t]===a[t];t++);var n=o-t;for(e=1;e<=n&&i[o-e]===a[s-e];e++);return Hi=a.slice(t,1<e?1-e:void 0)}function Wi(){return!0}function Gi(){return!1}function Ji(t,e,i,o){for(var a in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=i,t=this.constructor.Interface)t.hasOwnProperty(a)&&((e=t[a])?this[a]=e(i):"target"===a?this.target=o:this[a]=i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Wi:Gi,this.isPropagationStopped=Gi,this}function qi(t,e,i,o){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,t,e,i,o),a}return new this(t,e,i,o)}function Ki(t){if(!(t instanceof this))throw Error(n(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Xi(t){t.eventPool=[],t.getPooled=qi,t.release=Ki}a(Ji.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){this.isPersistent=Wi},isPersistent:Gi,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Gi,this._dispatchInstances=this._dispatchListeners=null}}),Ji.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Ji.extend=function(t){function e(){}function i(){return o.apply(this,arguments)}var o=this;e.prototype=o.prototype;var s=new e;return a(s,i.prototype),i.prototype=s,i.prototype.constructor=i,i.Interface=a({},o.Interface,t),i.extend=o.extend,Xi(i),i},Xi(Ji);var $i=Ji.extend({data:null}),to=Ji.extend({data:null}),eo=[9,13,27,32],io=x&&"CompositionEvent"in window,oo=null;x&&"documentMode"in document&&(oo=document.documentMode);var ao=x&&"TextEvent"in window&&!oo,so=x&&(!io||oo&&8<oo&&11>=oo),no=String.fromCharCode(32),ro={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},lo=!1;function co(t,e){switch(t){case"keyup":return-1!==eo.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ho(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var uo=!1;var po={eventTypes:ro,extractEvents:function(t,e,i,o){var a;if(io)t:{switch(t){case"compositionstart":var s=ro.compositionStart;break t;case"compositionend":s=ro.compositionEnd;break t;case"compositionupdate":s=ro.compositionUpdate;break t}s=void 0}else uo?co(t,i)&&(s=ro.compositionEnd):"keydown"===t&&229===i.keyCode&&(s=ro.compositionStart);return s?(so&&"ko"!==i.locale&&(uo||s!==ro.compositionStart?s===ro.compositionEnd&&uo&&(a=Vi()):(Yi="value"in(Bi=o)?Bi.value:Bi.textContent,uo=!0)),s=$i.getPooled(s,e,i,o),a?s.data=a:null!==(a=ho(i))&&(s.data=a),Ui(s),a=s):a=null,(t=ao?function(t,e){switch(t){case"compositionend":return ho(e);case"keypress":return 32!==e.which?null:(lo=!0,no);case"textInput":return(t=e.data)===no&&lo?null:t;default:return null}}(t,i):function(t,e){if(uo)return"compositionend"===t||!io&&co(t,e)?(t=Vi(),Hi=Yi=Bi=null,uo=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return so&&"ko"!==e.locale?null:e.data}}(t,i))?((e=to.getPooled(ro.beforeInput,e,i,o)).data=t,Ui(e)):e=null,null===a?e:null===e?a:[a,e]}},_o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fo(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!_o[t.type]:"textarea"===e}var go={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function mo(t,e,i){return(t=Ji.getPooled(go.change,t,e,i)).type="change",I(i),Ui(t),t}var vo=null,bo=null;function yo(t){le(t)}function Ao(t){if(At(Ni(t)))return t}function Do(t,e){if("change"===t)return e}var ko=!1;function Oo(){vo&&(vo.detachEvent("onpropertychange",wo),bo=vo=null)}function wo(t){if("value"===t.propertyName&&Ao(bo))if(t=mo(bo,t,ce(t)),Z)le(t);else{Z=!0;try{N(yo,t)}finally{Z=!1,Q()}}}function Co(t,e,i){"focus"===t?(Oo(),bo=i,(vo=e).attachEvent("onpropertychange",wo)):"blur"===t&&Oo()}function xo(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Ao(bo)}function So(t,e){if("click"===t)return Ao(e)}function Mo(t,e){if("input"===t||"change"===t)return Ao(e)}x&&(ko=de("input")&&(!document.documentMode||9<document.documentMode));var Po={eventTypes:go,_isInputEventSupported:ko,extractEvents:function(t,e,i,o){var a=e?Ni(e):window,s=a.nodeName&&a.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===a.type)var n=Do;else if(fo(a))if(ko)n=Mo;else{n=xo;var r=Co}else(s=a.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(n=So);if(n&&(n=n(t,e)))return mo(n,i,o);r&&r(t,a,e),"blur"===t&&(t=a._wrapperState)&&t.controlled&&"number"===a.type&&xt(a,"number",a.value)}},To=Ji.extend({view:null,detail:null}),Io={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fo(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Io[t])&&!!e[t]}function No(){return Fo}var Lo=0,Eo=0,jo=!1,Zo=!1,Ro=To.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:No,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Lo;return Lo=t.screenX,jo?"mousemove"===t.type?t.screenX-e:0:(jo=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Eo;return Eo=t.screenY,Zo?"mousemove"===t.type?t.screenY-e:0:(Zo=!0,0)}}),Qo=Ro.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),zo={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Uo={eventTypes:zo,extractEvents:function(t,e,i,o,a){var s="mouseover"===t||"pointerover"===t,n="mouseout"===t||"pointerout"===t;if(s&&0===(32&a)&&(i.relatedTarget||i.fromElement)||!n&&!s)return null;(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,n)?(n=e,null!==(e=(e=i.relatedTarget||i.toElement)?Ii(e):null)&&(e!==te(e)||5!==e.tag&&6!==e.tag)&&(e=null)):n=null;if(n===e)return null;if("mouseout"===t||"mouseover"===t)var r=Ro,l=zo.mouseLeave,c=zo.mouseEnter,d="mouse";else"pointerout"!==t&&"pointerover"!==t||(r=Qo,l=zo.pointerLeave,c=zo.pointerEnter,d="pointer");if(t=null==n?s:Ni(n),s=null==e?s:Ni(e),(l=r.getPooled(l,n,i,o)).type=d+"leave",l.target=t,l.relatedTarget=s,(i=r.getPooled(c,e,i,o)).type=d+"enter",i.target=s,i.relatedTarget=t,d=e,(o=n)&&d)t:{for(c=d,n=0,t=r=o;t;t=Ei(t))n++;for(t=0,e=c;e;e=Ei(e))t++;for(;0<n-t;)r=Ei(r),n--;for(;0<t-n;)c=Ei(c),t--;for(;n--;){if(r===c||r===c.alternate)break t;r=Ei(r),c=Ei(c)}r=null}else r=null;for(c=r,r=[];o&&o!==c&&(null===(n=o.alternate)||n!==c);)r.push(o),o=Ei(o);for(o=[];d&&d!==c&&(null===(n=d.alternate)||n!==c);)o.push(d),d=Ei(d);for(d=0;d<r.length;d++)Qi(r[d],"bubbled",l);for(d=o.length;0<d--;)Qi(o[d],"captured",i);return 0===(64&a)?[l]:[l,i]}};var Bo="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},Yo=Object.prototype.hasOwnProperty;function Ho(t,e){if(Bo(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++)if(!Yo.call(e,i[o])||!Bo(t[i[o]],e[i[o]]))return!1;return!0}var Vo=x&&"documentMode"in document&&11>=document.documentMode,Wo={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Go=null,Jo=null,qo=null,Ko=!1;function Xo(t,e){var i=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Ko||null==Go||Go!==di(i)?null:("selectionStart"in(i=Go)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},qo&&Ho(qo,i)?null:(qo=i,(t=Ji.getPooled(Wo.select,Jo,t,e)).type="select",t.target=Go,Ui(t),t))}var $o={eventTypes:Wo,extractEvents:function(t,e,i,o,a,s){if(!(s=!(a=s||(o.window===o?o.document:9===o.nodeType?o:o.ownerDocument)))){t:{a=$t(a),s=w.onSelect;for(var n=0;n<s.length;n++)if(!a.has(s[n])){a=!1;break t}a=!0}s=!a}if(s)return null;switch(a=e?Ni(e):window,t){case"focus":(fo(a)||"true"===a.contentEditable)&&(Go=a,Jo=e,qo=null);break;case"blur":qo=Jo=Go=null;break;case"mousedown":Ko=!0;break;case"contextmenu":case"mouseup":case"dragend":return Ko=!1,Xo(i,o);case"selectionchange":if(Vo)break;case"keydown":case"keyup":return Xo(i,o)}return null}},ta=Ji.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ea=Ji.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ia=To.extend({relatedTarget:null});function oa(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var aa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},na=To.extend({key:function(t){if(t.key){var e=aa[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=oa(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?sa[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:No,charCode:function(t){return"keypress"===t.type?oa(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?oa(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),ra=Ro.extend({dataTransfer:null}),la=To.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:No}),ca=Ji.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),da=Ro.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),ha={eventTypes:Ze,extractEvents:function(t,e,i,o){var a=Re.get(t);if(!a)return null;switch(t){case"keypress":if(0===oa(i))return null;case"keydown":case"keyup":t=na;break;case"blur":case"focus":t=ia;break;case"click":if(2===i.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ro;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ra;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=la;break;case Wt:case Gt:case Jt:t=ta;break;case qt:t=ca;break;case"scroll":t=To;break;case"wheel":t=da;break;case"copy":case"cut":case"paste":t=ea;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Qo;break;default:t=Ji}return Ui(e=t.getPooled(a,e,i,o)),e}};if(v)throw Error(n(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),y(),_=Li,f=Fi,g=Ni,C({SimpleEventPlugin:ha,EnterLeaveEventPlugin:Uo,ChangeEventPlugin:Po,SelectEventPlugin:$o,BeforeInputEventPlugin:po});var ua=[],pa=-1;function _a(t){0>pa||(t.current=ua[pa],ua[pa]=null,pa--)}function fa(t,e){pa++,ua[pa]=t.current,t.current=e}var ga={},ma={current:ga},va={current:!1},ba=ga;function ya(t,e){var i=t.type.contextTypes;if(!i)return ga;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in i)s[a]=e[a];return o&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Aa(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Da(){_a(va),_a(ma)}function ka(t,e,i){if(ma.current!==ga)throw Error(n(168));fa(ma,e),fa(va,i)}function Oa(t,e,i){var o=t.stateNode;if(t=e.childContextTypes,"function"!==typeof o.getChildContext)return i;for(var s in o=o.getChildContext())if(!(s in t))throw Error(n(108,gt(e)||"Unknown",s));return a({},i,{},o)}function wa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ga,ba=ma.current,fa(ma,t),fa(va,va.current),!0}function Ca(t,e,i){var o=t.stateNode;if(!o)throw Error(n(169));i?(t=Oa(t,e,ba),o.__reactInternalMemoizedMergedChildContext=t,_a(va),_a(ma),fa(ma,t)):_a(va),fa(va,i)}var xa=s.unstable_runWithPriority,Sa=s.unstable_scheduleCallback,Ma=s.unstable_cancelCallback,Pa=s.unstable_requestPaint,Ta=s.unstable_now,Ia=s.unstable_getCurrentPriorityLevel,Fa=s.unstable_ImmediatePriority,Na=s.unstable_UserBlockingPriority,La=s.unstable_NormalPriority,Ea=s.unstable_LowPriority,ja=s.unstable_IdlePriority,Za={},Ra=s.unstable_shouldYield,Qa=void 0!==Pa?Pa:function(){},za=null,Ua=null,Ba=!1,Ya=Ta(),Ha=1e4>Ya?Ta:function(){return Ta()-Ya};function Va(){switch(Ia()){case Fa:return 99;case Na:return 98;case La:return 97;case Ea:return 96;case ja:return 95;default:throw Error(n(332))}}function Wa(t){switch(t){case 99:return Fa;case 98:return Na;case 97:return La;case 96:return Ea;case 95:return ja;default:throw Error(n(332))}}function Ga(t,e){return t=Wa(t),xa(t,e)}function Ja(t,e,i){return t=Wa(t),Sa(t,e,i)}function qa(t){return null===za?(za=[t],Ua=Sa(Fa,Xa)):za.push(t),Za}function Ka(){if(null!==Ua){var t=Ua;Ua=null,Ma(t)}Xa()}function Xa(){if(!Ba&&null!==za){Ba=!0;var t=0;try{var e=za;Ga(99,(function(){for(;t<e.length;t++){var i=e[t];do{i=i(!0)}while(null!==i)}})),za=null}catch(i){throw null!==za&&(za=za.slice(t+1)),Sa(Fa,Ka),i}finally{Ba=!1}}}function $a(t,e,i){return 1073741821-(1+((1073741821-t+e/10)/(i/=10)|0))*i}function ts(t,e){if(t&&t.defaultProps)for(var i in e=a({},e),t=t.defaultProps)void 0===e[i]&&(e[i]=t[i]);return e}var es={current:null},is=null,os=null,as=null;function ss(){as=os=is=null}function ns(t){var e=es.current;_a(es),t.type._context._currentValue=e}function rs(t,e){for(;null!==t;){var i=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==i&&i.childExpirationTime<e&&(i.childExpirationTime=e);else{if(!(null!==i&&i.childExpirationTime<e))break;i.childExpirationTime=e}t=t.return}}function ls(t,e){is=t,as=os=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(En=!0),t.firstContext=null)}function cs(t,e){if(as!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(as=t,e=1073741823),e={context:t,observedBits:e,next:null},null===os){if(null===is)throw Error(n(308));os=e,is.dependencies={expirationTime:0,firstContext:e,responders:null}}else os=os.next=e;return t._currentValue}var ds=!1;function hs(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function us(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function ps(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function _s(t,e){if(null!==(t=t.updateQueue)){var i=(t=t.shared).pending;null===i?e.next=e:(e.next=i.next,i.next=e),t.pending=e}}function fs(t,e){var i=t.alternate;null!==i&&us(i,t),null===(i=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=i.next,i.next=e)}function gs(t,e,i,o){var s=t.updateQueue;ds=!1;var n=s.baseQueue,r=s.shared.pending;if(null!==r){if(null!==n){var l=n.next;n.next=r.next,r.next=l}n=r,s.shared.pending=null,null!==(l=t.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=r))}if(null!==n){l=n.next;var c=s.baseState,d=0,h=null,u=null,p=null;if(null!==l)for(var _=l;;){if((r=_.expirationTime)<o){var f={expirationTime:_.expirationTime,suspenseConfig:_.suspenseConfig,tag:_.tag,payload:_.payload,callback:_.callback,next:null};null===p?(u=p=f,h=c):p=p.next=f,r>d&&(d=r)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:_.suspenseConfig,tag:_.tag,payload:_.payload,callback:_.callback,next:null}),Dl(r,_.suspenseConfig);t:{var g=t,m=_;switch(r=e,f=i,m.tag){case 1:if("function"===typeof(g=m.payload)){c=g.call(f,c,r);break t}c=g;break t;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(r="function"===typeof(g=m.payload)?g.call(f,c,r):g)||void 0===r)break t;c=a({},c,r);break t;case 2:ds=!0}}null!==_.callback&&(t.effectTag|=32,null===(r=s.effects)?s.effects=[_]:r.push(_))}if(null===(_=_.next)||_===l){if(null===(r=s.shared.pending))break;_=n.next=r.next,r.next=l,s.baseQueue=n=r,s.shared.pending=null}}null===p?h=c:p.next=u,s.baseState=h,s.baseQueue=p,kl(d),t.expirationTime=d,t.memoizedState=c}}function ms(t,e,i){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var o=t[e],a=o.callback;if(null!==a){if(o.callback=null,o=a,a=i,"function"!==typeof o)throw Error(n(191,o));o.call(a)}}}var vs=q.ReactCurrentBatchConfig,bs=(new o.Component).refs;function ys(t,e,i,o){i=null===(i=i(o,e=t.memoizedState))||void 0===i?e:a({},e,i),t.memoizedState=i,0===t.expirationTime&&(t.updateQueue.baseState=i)}var As={isMounted:function(t){return!!(t=t._reactInternalFiber)&&te(t)===t},enqueueSetState:function(t,e,i){t=t._reactInternalFiber;var o=cl(),a=vs.suspense;(a=ps(o=dl(o,t,a),a)).payload=e,void 0!==i&&null!==i&&(a.callback=i),_s(t,a),hl(t,o)},enqueueReplaceState:function(t,e,i){t=t._reactInternalFiber;var o=cl(),a=vs.suspense;(a=ps(o=dl(o,t,a),a)).tag=1,a.payload=e,void 0!==i&&null!==i&&(a.callback=i),_s(t,a),hl(t,o)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var i=cl(),o=vs.suspense;(o=ps(i=dl(i,t,o),o)).tag=2,void 0!==e&&null!==e&&(o.callback=e),_s(t,o),hl(t,i)}};function Ds(t,e,i,o,a,s,n){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(o,s,n):!e.prototype||!e.prototype.isPureReactComponent||(!Ho(i,o)||!Ho(a,s))}function ks(t,e,i){var o=!1,a=ga,s=e.contextType;return"object"===typeof s&&null!==s?s=cs(s):(a=Aa(e)?ba:ma.current,s=(o=null!==(o=e.contextTypes)&&void 0!==o)?ya(t,a):ga),e=new e(i,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=As,t.stateNode=e,e._reactInternalFiber=t,o&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function Os(t,e,i,o){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(i,o),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(i,o),e.state!==t&&As.enqueueReplaceState(e,e.state,null)}function ws(t,e,i,o){var a=t.stateNode;a.props=i,a.state=t.memoizedState,a.refs=bs,hs(t);var s=e.contextType;"object"===typeof s&&null!==s?a.context=cs(s):(s=Aa(e)?ba:ma.current,a.context=ya(t,s)),gs(t,i,a,o),a.state=t.memoizedState,"function"===typeof(s=e.getDerivedStateFromProps)&&(ys(t,e,s,i),a.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(e=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),e!==a.state&&As.enqueueReplaceState(a,a.state,null),gs(t,i,a,o),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.effectTag|=4)}var Cs=Array.isArray;function xs(t,e,i){if(null!==(t=i.ref)&&"function"!==typeof t&&"object"!==typeof t){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(n(309));var o=i.stateNode}if(!o)throw Error(n(147,t));var a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=o.refs;e===bs&&(e=o.refs={}),null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(n(284));if(!i._owner)throw Error(n(290,t))}return t}function Ss(t,e){if("textarea"!==t.type)throw Error(n(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function Ms(t){function e(e,i){if(t){var o=e.lastEffect;null!==o?(o.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i,i.nextEffect=null,i.effectTag=8}}function i(i,o){if(!t)return null;for(;null!==o;)e(i,o),o=o.sibling;return null}function o(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(t,e){return(t=Bl(t,e)).index=0,t.sibling=null,t}function s(e,i,o){return e.index=o,t?null!==(o=e.alternate)?(o=o.index)<i?(e.effectTag=2,i):o:(e.effectTag=2,i):i}function r(e){return t&&null===e.alternate&&(e.effectTag=2),e}function l(t,e,i,o){return null===e||6!==e.tag?((e=Vl(i,t.mode,o)).return=t,e):((e=a(e,i)).return=t,e)}function c(t,e,i,o){return null!==e&&e.elementType===i.type?((o=a(e,i.props)).ref=xs(t,e,i),o.return=t,o):((o=Yl(i.type,i.key,i.props,null,t.mode,o)).ref=xs(t,e,i),o.return=t,o)}function d(t,e,i,o){return null===e||4!==e.tag||e.stateNode.containerInfo!==i.containerInfo||e.stateNode.implementation!==i.implementation?((e=Wl(i,t.mode,o)).return=t,e):((e=a(e,i.children||[])).return=t,e)}function h(t,e,i,o,s){return null===e||7!==e.tag?((e=Hl(i,t.mode,o,s)).return=t,e):((e=a(e,i)).return=t,e)}function u(t,e,i){if("string"===typeof e||"number"===typeof e)return(e=Vl(""+e,t.mode,i)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case tt:return(i=Yl(e.type,e.key,e.props,null,t.mode,i)).ref=xs(t,null,e),i.return=t,i;case et:return(e=Wl(e,t.mode,i)).return=t,e}if(Cs(e)||ft(e))return(e=Hl(e,t.mode,i,null)).return=t,e;Ss(t,e)}return null}function p(t,e,i,o){var a=null!==e?e.key:null;if("string"===typeof i||"number"===typeof i)return null!==a?null:l(t,e,""+i,o);if("object"===typeof i&&null!==i){switch(i.$$typeof){case tt:return i.key===a?i.type===it?h(t,e,i.props.children,o,a):c(t,e,i,o):null;case et:return i.key===a?d(t,e,i,o):null}if(Cs(i)||ft(i))return null!==a?null:h(t,e,i,o,null);Ss(t,i)}return null}function _(t,e,i,o,a){if("string"===typeof o||"number"===typeof o)return l(e,t=t.get(i)||null,""+o,a);if("object"===typeof o&&null!==o){switch(o.$$typeof){case tt:return t=t.get(null===o.key?i:o.key)||null,o.type===it?h(e,t,o.props.children,a,o.key):c(e,t,o,a);case et:return d(e,t=t.get(null===o.key?i:o.key)||null,o,a)}if(Cs(o)||ft(o))return h(e,t=t.get(i)||null,o,a,null);Ss(e,o)}return null}function f(a,n,r,l){for(var c=null,d=null,h=n,f=n=0,g=null;null!==h&&f<r.length;f++){h.index>f?(g=h,h=null):g=h.sibling;var m=p(a,h,r[f],l);if(null===m){null===h&&(h=g);break}t&&h&&null===m.alternate&&e(a,h),n=s(m,n,f),null===d?c=m:d.sibling=m,d=m,h=g}if(f===r.length)return i(a,h),c;if(null===h){for(;f<r.length;f++)null!==(h=u(a,r[f],l))&&(n=s(h,n,f),null===d?c=h:d.sibling=h,d=h);return c}for(h=o(a,h);f<r.length;f++)null!==(g=_(h,a,f,r[f],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?f:g.key),n=s(g,n,f),null===d?c=g:d.sibling=g,d=g);return t&&h.forEach((function(t){return e(a,t)})),c}function g(a,r,l,c){var d=ft(l);if("function"!==typeof d)throw Error(n(150));if(null==(l=d.call(l)))throw Error(n(151));for(var h=d=null,f=r,g=r=0,m=null,v=l.next();null!==f&&!v.done;g++,v=l.next()){f.index>g?(m=f,f=null):m=f.sibling;var b=p(a,f,v.value,c);if(null===b){null===f&&(f=m);break}t&&f&&null===b.alternate&&e(a,f),r=s(b,r,g),null===h?d=b:h.sibling=b,h=b,f=m}if(v.done)return i(a,f),d;if(null===f){for(;!v.done;g++,v=l.next())null!==(v=u(a,v.value,c))&&(r=s(v,r,g),null===h?d=v:h.sibling=v,h=v);return d}for(f=o(a,f);!v.done;g++,v=l.next())null!==(v=_(f,a,g,v.value,c))&&(t&&null!==v.alternate&&f.delete(null===v.key?g:v.key),r=s(v,r,g),null===h?d=v:h.sibling=v,h=v);return t&&f.forEach((function(t){return e(a,t)})),d}return function(t,o,s,l){var c="object"===typeof s&&null!==s&&s.type===it&&null===s.key;c&&(s=s.props.children);var d="object"===typeof s&&null!==s;if(d)switch(s.$$typeof){case tt:t:{for(d=s.key,c=o;null!==c;){if(c.key===d){if(7===c.tag){if(s.type===it){i(t,c.sibling),(o=a(c,s.props.children)).return=t,t=o;break t}}else if(c.elementType===s.type){i(t,c.sibling),(o=a(c,s.props)).ref=xs(t,c,s),o.return=t,t=o;break t}i(t,c);break}e(t,c),c=c.sibling}s.type===it?((o=Hl(s.props.children,t.mode,l,s.key)).return=t,t=o):((l=Yl(s.type,s.key,s.props,null,t.mode,l)).ref=xs(t,o,s),l.return=t,t=l)}return r(t);case et:t:{for(c=s.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){i(t,o.sibling),(o=a(o,s.children||[])).return=t,t=o;break t}i(t,o);break}e(t,o),o=o.sibling}(o=Wl(s,t.mode,l)).return=t,t=o}return r(t)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==o&&6===o.tag?(i(t,o.sibling),(o=a(o,s)).return=t,t=o):(i(t,o),(o=Vl(s,t.mode,l)).return=t,t=o),r(t);if(Cs(s))return f(t,o,s,l);if(ft(s))return g(t,o,s,l);if(d&&Ss(t,s),"undefined"===typeof s&&!c)switch(t.tag){case 1:case 0:throw t=t.type,Error(n(152,t.displayName||t.name||"Component"))}return i(t,o)}}var Ps=Ms(!0),Ts=Ms(!1),Is={},Fs={current:Is},Ns={current:Is},Ls={current:Is};function Es(t){if(t===Is)throw Error(n(174));return t}function js(t,e){switch(fa(Ls,e),fa(Ns,t),fa(Fs,Is),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jt(null,"");break;default:e=jt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}_a(Fs),fa(Fs,e)}function Zs(){_a(Fs),_a(Ns),_a(Ls)}function Rs(t){Es(Ls.current);var e=Es(Fs.current),i=jt(e,t.type);e!==i&&(fa(Ns,t),fa(Fs,i))}function Qs(t){Ns.current===t&&(_a(Fs),_a(Ns))}var zs={current:0};function Us(t){for(var e=t;null!==e;){if(13===e.tag){var i=e.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||i.data===vi||i.data===bi))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Bs(t,e){return{responder:t,props:e}}var Ys=q.ReactCurrentDispatcher,Hs=q.ReactCurrentBatchConfig,Vs=0,Ws=null,Gs=null,Js=null,qs=!1;function Ks(){throw Error(n(321))}function Xs(t,e){if(null===e)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!Bo(t[i],e[i]))return!1;return!0}function $s(t,e,i,o,a,s){if(Vs=s,Ws=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,Ys.current=null===t||null===t.memoizedState?kn:On,t=i(o,a),e.expirationTime===Vs){s=0;do{if(e.expirationTime=0,!(25>s))throw Error(n(301));s+=1,Js=Gs=null,e.updateQueue=null,Ys.current=wn,t=i(o,a)}while(e.expirationTime===Vs)}if(Ys.current=Dn,e=null!==Gs&&null!==Gs.next,Vs=0,Js=Gs=Ws=null,qs=!1,e)throw Error(n(300));return t}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Js?Ws.memoizedState=Js=t:Js=Js.next=t,Js}function en(){if(null===Gs){var t=Ws.alternate;t=null!==t?t.memoizedState:null}else t=Gs.next;var e=null===Js?Ws.memoizedState:Js.next;if(null!==e)Js=e,Gs=t;else{if(null===t)throw Error(n(310));t={memoizedState:(Gs=t).memoizedState,baseState:Gs.baseState,baseQueue:Gs.baseQueue,queue:Gs.queue,next:null},null===Js?Ws.memoizedState=Js=t:Js=Js.next=t}return Js}function on(t,e){return"function"===typeof e?e(t):e}function an(t){var e=en(),i=e.queue;if(null===i)throw Error(n(311));i.lastRenderedReducer=t;var o=Gs,a=o.baseQueue,s=i.pending;if(null!==s){if(null!==a){var r=a.next;a.next=s.next,s.next=r}o.baseQueue=a=s,i.pending=null}if(null!==a){a=a.next,o=o.baseState;var l=r=s=null,c=a;do{var d=c.expirationTime;if(d<Vs){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(r=l=h,s=o):l=l.next=h,d>Ws.expirationTime&&(Ws.expirationTime=d,kl(d))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),Dl(d,c.suspenseConfig),o=c.eagerReducer===t?c.eagerState:t(o,c.action);c=c.next}while(null!==c&&c!==a);null===l?s=o:l.next=r,Bo(o,e.memoizedState)||(En=!0),e.memoizedState=o,e.baseState=s,e.baseQueue=l,i.lastRenderedState=o}return[e.memoizedState,i.dispatch]}function sn(t){var e=en(),i=e.queue;if(null===i)throw Error(n(311));i.lastRenderedReducer=t;var o=i.dispatch,a=i.pending,s=e.memoizedState;if(null!==a){i.pending=null;var r=a=a.next;do{s=t(s,r.action),r=r.next}while(r!==a);Bo(s,e.memoizedState)||(En=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),i.lastRenderedState=s}return[s,o]}function nn(t){var e=tn();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:on,lastRenderedState:t}).dispatch=An.bind(null,Ws,t),[e.memoizedState,t]}function rn(t,e,i,o){return t={tag:t,create:e,destroy:i,deps:o,next:null},null===(e=Ws.updateQueue)?(e={lastEffect:null},Ws.updateQueue=e,e.lastEffect=t.next=t):null===(i=e.lastEffect)?e.lastEffect=t.next=t:(o=i.next,i.next=t,t.next=o,e.lastEffect=t),t}function ln(){return en().memoizedState}function cn(t,e,i,o){var a=tn();Ws.effectTag|=t,a.memoizedState=rn(1|e,i,void 0,void 0===o?null:o)}function dn(t,e,i,o){var a=en();o=void 0===o?null:o;var s=void 0;if(null!==Gs){var n=Gs.memoizedState;if(s=n.destroy,null!==o&&Xs(o,n.deps))return void rn(e,i,s,o)}Ws.effectTag|=t,a.memoizedState=rn(1|e,i,s,o)}function hn(t,e){return cn(516,4,t,e)}function un(t,e){return dn(516,4,t,e)}function pn(t,e){return dn(4,2,t,e)}function _n(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function fn(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,dn(4,2,_n.bind(null,e,t),i)}function gn(){}function mn(t,e){return tn().memoizedState=[t,void 0===e?null:e],t}function vn(t,e){var i=en();e=void 0===e?null:e;var o=i.memoizedState;return null!==o&&null!==e&&Xs(e,o[1])?o[0]:(i.memoizedState=[t,e],t)}function bn(t,e){var i=en();e=void 0===e?null:e;var o=i.memoizedState;return null!==o&&null!==e&&Xs(e,o[1])?o[0]:(t=t(),i.memoizedState=[t,e],t)}function yn(t,e,i){var o=Va();Ga(98>o?98:o,(function(){t(!0)})),Ga(97<o?97:o,(function(){var o=Hs.suspense;Hs.suspense=void 0===e?null:e;try{t(!1),i()}finally{Hs.suspense=o}}))}function An(t,e,i){var o=cl(),a=vs.suspense;a={expirationTime:o=dl(o,t,a),suspenseConfig:a,action:i,eagerReducer:null,eagerState:null,next:null};var s=e.pending;if(null===s?a.next=a:(a.next=s.next,s.next=a),e.pending=a,s=t.alternate,t===Ws||null!==s&&s===Ws)qs=!0,a.expirationTime=Vs,Ws.expirationTime=Vs;else{if(0===t.expirationTime&&(null===s||0===s.expirationTime)&&null!==(s=e.lastRenderedReducer))try{var n=e.lastRenderedState,r=s(n,i);if(a.eagerReducer=s,a.eagerState=r,Bo(r,n))return}catch(l){}hl(t,o)}}var Dn={readContext:cs,useCallback:Ks,useContext:Ks,useEffect:Ks,useImperativeHandle:Ks,useLayoutEffect:Ks,useMemo:Ks,useReducer:Ks,useRef:Ks,useState:Ks,useDebugValue:Ks,useResponder:Ks,useDeferredValue:Ks,useTransition:Ks},kn={readContext:cs,useCallback:mn,useContext:cs,useEffect:hn,useImperativeHandle:function(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,cn(4,2,_n.bind(null,e,t),i)},useLayoutEffect:function(t,e){return cn(4,2,t,e)},useMemo:function(t,e){var i=tn();return e=void 0===e?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var o=tn();return e=void 0!==i?i(e):e,o.memoizedState=o.baseState=e,t=(t=o.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=An.bind(null,Ws,t),[o.memoizedState,t]},useRef:function(t){return t={current:t},tn().memoizedState=t},useState:nn,useDebugValue:gn,useResponder:Bs,useDeferredValue:function(t,e){var i=nn(t),o=i[0],a=i[1];return hn((function(){var i=Hs.suspense;Hs.suspense=void 0===e?null:e;try{a(t)}finally{Hs.suspense=i}}),[t,e]),o},useTransition:function(t){var e=nn(!1),i=e[0];return e=e[1],[mn(yn.bind(null,e,t),[e,t]),i]}},On={readContext:cs,useCallback:vn,useContext:cs,useEffect:un,useImperativeHandle:fn,useLayoutEffect:pn,useMemo:bn,useReducer:an,useRef:ln,useState:function(){return an(on)},useDebugValue:gn,useResponder:Bs,useDeferredValue:function(t,e){var i=an(on),o=i[0],a=i[1];return un((function(){var i=Hs.suspense;Hs.suspense=void 0===e?null:e;try{a(t)}finally{Hs.suspense=i}}),[t,e]),o},useTransition:function(t){var e=an(on),i=e[0];return e=e[1],[vn(yn.bind(null,e,t),[e,t]),i]}},wn={readContext:cs,useCallback:vn,useContext:cs,useEffect:un,useImperativeHandle:fn,useLayoutEffect:pn,useMemo:bn,useReducer:sn,useRef:ln,useState:function(){return sn(on)},useDebugValue:gn,useResponder:Bs,useDeferredValue:function(t,e){var i=sn(on),o=i[0],a=i[1];return un((function(){var i=Hs.suspense;Hs.suspense=void 0===e?null:e;try{a(t)}finally{Hs.suspense=i}}),[t,e]),o},useTransition:function(t){var e=sn(on),i=e[0];return e=e[1],[vn(yn.bind(null,e,t),[e,t]),i]}},Cn=null,xn=null,Sn=!1;function Mn(t,e){var i=zl(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=e,i.return=t,i.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i}function Pn(t,e){switch(t.tag){case 5:var i=t.type;return null!==(e=1!==e.nodeType||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function Tn(t){if(Sn){var e=xn;if(e){var i=e;if(!Pn(t,e)){if(!(e=Ci(i.nextSibling))||!Pn(t,e))return t.effectTag=-1025&t.effectTag|2,Sn=!1,void(Cn=t);Mn(Cn,i)}Cn=t,xn=Ci(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Sn=!1,Cn=t}}function In(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Cn=t}function Fn(t){if(t!==Cn)return!1;if(!Sn)return In(t),Sn=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!ki(e,t.memoizedProps))for(e=xn;e;)Mn(t,e),e=Ci(e.nextSibling);if(In(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(n(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var i=t.data;if(i===mi){if(0===e){xn=Ci(t.nextSibling);break t}e--}else i!==gi&&i!==bi&&i!==vi||e++}t=t.nextSibling}xn=null}}else xn=Cn?Ci(t.stateNode.nextSibling):null;return!0}function Nn(){xn=Cn=null,Sn=!1}var Ln=q.ReactCurrentOwner,En=!1;function jn(t,e,i,o){e.child=null===t?Ts(e,null,i,o):Ps(e,t.child,i,o)}function Zn(t,e,i,o,a){i=i.render;var s=e.ref;return ls(e,a),o=$s(t,e,i,o,s,a),null===t||En?(e.effectTag|=1,jn(t,e,o,a),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=a&&(t.expirationTime=0),er(t,e,a))}function Rn(t,e,i,o,a,s){if(null===t){var n=i.type;return"function"!==typeof n||Ul(n)||void 0!==n.defaultProps||null!==i.compare||void 0!==i.defaultProps?((t=Yl(i.type,null,o,null,e.mode,s)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=n,Qn(t,e,n,o,a,s))}return n=t.child,a<s&&(a=n.memoizedProps,(i=null!==(i=i.compare)?i:Ho)(a,o)&&t.ref===e.ref)?er(t,e,s):(e.effectTag|=1,(t=Bl(n,o)).ref=e.ref,t.return=e,e.child=t)}function Qn(t,e,i,o,a,s){return null!==t&&Ho(t.memoizedProps,o)&&t.ref===e.ref&&(En=!1,a<s)?(e.expirationTime=t.expirationTime,er(t,e,s)):Un(t,e,i,o,s)}function zn(t,e){var i=e.ref;(null===t&&null!==i||null!==t&&t.ref!==i)&&(e.effectTag|=128)}function Un(t,e,i,o,a){var s=Aa(i)?ba:ma.current;return s=ya(e,s),ls(e,a),i=$s(t,e,i,o,s,a),null===t||En?(e.effectTag|=1,jn(t,e,i,a),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=a&&(t.expirationTime=0),er(t,e,a))}function Bn(t,e,i,o,a){if(Aa(i)){var s=!0;wa(e)}else s=!1;if(ls(e,a),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),ks(e,i,o),ws(e,i,o,a),o=!0;else if(null===t){var n=e.stateNode,r=e.memoizedProps;n.props=r;var l=n.context,c=i.contextType;"object"===typeof c&&null!==c?c=cs(c):c=ya(e,c=Aa(i)?ba:ma.current);var d=i.getDerivedStateFromProps,h="function"===typeof d||"function"===typeof n.getSnapshotBeforeUpdate;h||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(r!==o||l!==c)&&Os(e,n,o,c),ds=!1;var u=e.memoizedState;n.state=u,gs(e,o,n,a),l=e.memoizedState,r!==o||u!==l||va.current||ds?("function"===typeof d&&(ys(e,i,d,o),l=e.memoizedState),(r=ds||Ds(e,i,r,o,u,l,c))?(h||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||("function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"===typeof n.componentDidMount&&(e.effectTag|=4)):("function"===typeof n.componentDidMount&&(e.effectTag|=4),e.memoizedProps=o,e.memoizedState=l),n.props=o,n.state=l,n.context=c,o=r):("function"===typeof n.componentDidMount&&(e.effectTag|=4),o=!1)}else n=e.stateNode,us(t,e),r=e.memoizedProps,n.props=e.type===e.elementType?r:ts(e.type,r),l=n.context,"object"===typeof(c=i.contextType)&&null!==c?c=cs(c):c=ya(e,c=Aa(i)?ba:ma.current),(h="function"===typeof(d=i.getDerivedStateFromProps)||"function"===typeof n.getSnapshotBeforeUpdate)||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(r!==o||l!==c)&&Os(e,n,o,c),ds=!1,l=e.memoizedState,n.state=l,gs(e,o,n,a),u=e.memoizedState,r!==o||l!==u||va.current||ds?("function"===typeof d&&(ys(e,i,d,o),u=e.memoizedState),(d=ds||Ds(e,i,r,o,l,u,c))?(h||"function"!==typeof n.UNSAFE_componentWillUpdate&&"function"!==typeof n.componentWillUpdate||("function"===typeof n.componentWillUpdate&&n.componentWillUpdate(o,u,c),"function"===typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(o,u,c)),"function"===typeof n.componentDidUpdate&&(e.effectTag|=4),"function"===typeof n.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof n.componentDidUpdate||r===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!==typeof n.getSnapshotBeforeUpdate||r===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),e.memoizedProps=o,e.memoizedState=u),n.props=o,n.state=u,n.context=c,o=d):("function"!==typeof n.componentDidUpdate||r===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!==typeof n.getSnapshotBeforeUpdate||r===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),o=!1);return Yn(t,e,i,o,s,a)}function Yn(t,e,i,o,a,s){zn(t,e);var n=0!==(64&e.effectTag);if(!o&&!n)return a&&Ca(e,i,!1),er(t,e,s);o=e.stateNode,Ln.current=e;var r=n&&"function"!==typeof i.getDerivedStateFromError?null:o.render();return e.effectTag|=1,null!==t&&n?(e.child=Ps(e,t.child,null,s),e.child=Ps(e,null,r,s)):jn(t,e,r,s),e.memoizedState=o.state,a&&Ca(e,i,!0),e.child}function Hn(t){var e=t.stateNode;e.pendingContext?ka(0,e.pendingContext,e.pendingContext!==e.context):e.context&&ka(0,e.context,!1),js(t,e.containerInfo)}var Vn,Wn,Gn,Jn,qn={dehydrated:null,retryTime:0};function Kn(t,e,i){var o,a=e.mode,s=e.pendingProps,n=zs.current,r=!1;if((o=0!==(64&e.effectTag))||(o=0!==(2&n)&&(null===t||null!==t.memoizedState)),o?(r=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===s.fallback||!0===s.unstable_avoidThisFallback||(n|=1),fa(zs,1&n),null===t){if(void 0!==s.fallback&&Tn(e),r){if(r=s.fallback,(s=Hl(null,a,0,null)).return=e,0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,s.child=t;null!==t;)t.return=s,t=t.sibling;return(i=Hl(r,a,i,null)).return=e,s.sibling=i,e.memoizedState=qn,e.child=s,i}return a=s.children,e.memoizedState=null,e.child=Ts(e,null,a,i)}if(null!==t.memoizedState){if(a=(t=t.child).sibling,r){if(s=s.fallback,(i=Bl(t,t.pendingProps)).return=e,0===(2&e.mode)&&(r=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(i.child=r;null!==r;)r.return=i,r=r.sibling;return(a=Bl(a,s)).return=e,i.sibling=a,i.childExpirationTime=0,e.memoizedState=qn,e.child=i,a}return i=Ps(e,t.child,s.children,i),e.memoizedState=null,e.child=i}if(t=t.child,r){if(r=s.fallback,(s=Hl(null,a,0,null)).return=e,s.child=t,null!==t&&(t.return=s),0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,s.child=t;null!==t;)t.return=s,t=t.sibling;return(i=Hl(r,a,i,null)).return=e,s.sibling=i,i.effectTag|=2,s.childExpirationTime=0,e.memoizedState=qn,e.child=s,i}return e.memoizedState=null,e.child=Ps(e,t,s.children,i)}function Xn(t,e){t.expirationTime<e&&(t.expirationTime=e);var i=t.alternate;null!==i&&i.expirationTime<e&&(i.expirationTime=e),rs(t.return,e)}function $n(t,e,i,o,a,s){var n=t.memoizedState;null===n?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:i,tailExpiration:0,tailMode:a,lastEffect:s}:(n.isBackwards=e,n.rendering=null,n.renderingStartTime=0,n.last=o,n.tail=i,n.tailExpiration=0,n.tailMode=a,n.lastEffect=s)}function tr(t,e,i){var o=e.pendingProps,a=o.revealOrder,s=o.tail;if(jn(t,e,o.children,i),0!==(2&(o=zs.current)))o=1&o|2,e.effectTag|=64;else{if(null!==t&&0!==(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Xn(t,i);else if(19===t.tag)Xn(t,i);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(fa(zs,o),0===(2&e.mode))e.memoizedState=null;else switch(a){case"forwards":for(i=e.child,a=null;null!==i;)null!==(t=i.alternate)&&null===Us(t)&&(a=i),i=i.sibling;null===(i=a)?(a=e.child,e.child=null):(a=i.sibling,i.sibling=null),$n(e,!1,a,i,s,e.lastEffect);break;case"backwards":for(i=null,a=e.child,e.child=null;null!==a;){if(null!==(t=a.alternate)&&null===Us(t)){e.child=a;break}t=a.sibling,a.sibling=i,i=a,a=t}$n(e,!0,i,null,s,e.lastEffect);break;case"together":$n(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function er(t,e,i){null!==t&&(e.dependencies=t.dependencies);var o=e.expirationTime;if(0!==o&&kl(o),e.childExpirationTime<i)return null;if(null!==t&&e.child!==t.child)throw Error(n(153));if(null!==e.child){for(i=Bl(t=e.child,t.pendingProps),e.child=i,i.return=e;null!==t.sibling;)t=t.sibling,(i=i.sibling=Bl(t,t.pendingProps)).return=e;i.sibling=null}return e.child}function ir(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;null!==e;)null!==e.alternate&&(i=e),e=e.sibling;null===i?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var o=null;null!==i;)null!==i.alternate&&(o=i),i=i.sibling;null===o?e||null===t.tail?t.tail=null:t.tail.sibling=null:o.sibling=null}}function or(t,e,i){var o=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Aa(e.type)&&Da(),null;case 3:return Zs(),_a(va),_a(ma),(i=e.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||!Fn(e)||(e.effectTag|=4),Wn(e),null;case 5:Qs(e),i=Es(Ls.current);var s=e.type;if(null!==t&&null!=e.stateNode)Gn(t,e,s,o,i),t.ref!==e.ref&&(e.effectTag|=128);else{if(!o){if(null===e.stateNode)throw Error(n(166));return null}if(t=Es(Fs.current),Fn(e)){o=e.stateNode,s=e.type;var r=e.memoizedProps;switch(o[Mi]=e,o[Pi]=r,s){case"iframe":case"object":case"embed":Ge("load",o);break;case"video":case"audio":for(t=0;t<Kt.length;t++)Ge(Kt[t],o);break;case"source":Ge("error",o);break;case"img":case"image":case"link":Ge("error",o),Ge("load",o);break;case"form":Ge("reset",o),Ge("submit",o);break;case"details":Ge("toggle",o);break;case"input":kt(o,r),Ge("invalid",o),li(i,"onChange");break;case"select":o._wrapperState={wasMultiple:!!r.multiple},Ge("invalid",o),li(i,"onChange");break;case"textarea":Tt(o,r),Ge("invalid",o),li(i,"onChange")}for(var l in si(s,r),t=null,r)if(r.hasOwnProperty(l)){var c=r[l];"children"===l?"string"===typeof c?o.textContent!==c&&(t=["children",c]):"number"===typeof c&&o.textContent!==""+c&&(t=["children",""+c]):O.hasOwnProperty(l)&&null!=c&&li(i,l)}switch(s){case"input":yt(o),Ct(o,r,!0);break;case"textarea":yt(o),Ft(o);break;case"select":case"option":break;default:"function"===typeof r.onClick&&(o.onclick=ci)}i=t,e.updateQueue=i,null!==i&&(e.effectTag|=4)}else{switch(l=9===i.nodeType?i:i.ownerDocument,t===ri&&(t=Et(s)),t===ri?"script"===s?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof o.is?t=l.createElement(s,{is:o.is}):(t=l.createElement(s),"select"===s&&(l=t,o.multiple?l.multiple=!0:o.size&&(l.size=o.size))):t=l.createElementNS(t,s),t[Mi]=e,t[Pi]=o,Vn(t,e,!1,!1),e.stateNode=t,l=ni(s,o),s){case"iframe":case"object":case"embed":Ge("load",t),c=o;break;case"video":case"audio":for(c=0;c<Kt.length;c++)Ge(Kt[c],t);c=o;break;case"source":Ge("error",t),c=o;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),c=o;break;case"form":Ge("reset",t),Ge("submit",t),c=o;break;case"details":Ge("toggle",t),c=o;break;case"input":kt(t,o),c=Dt(t,o),Ge("invalid",t),li(i,"onChange");break;case"option":c=St(t,o);break;case"select":t._wrapperState={wasMultiple:!!o.multiple},c=a({},o,{value:void 0}),Ge("invalid",t),li(i,"onChange");break;case"textarea":Tt(t,o),c=Pt(t,o),Ge("invalid",t),li(i,"onChange");break;default:c=o}si(s,c);var d=c;for(r in d)if(d.hasOwnProperty(r)){var h=d[r];"style"===r?oi(t,h):"dangerouslySetInnerHTML"===r?null!=(h=h?h.__html:void 0)&&Qt(t,h):"children"===r?"string"===typeof h?("textarea"!==s||""!==h)&&zt(t,h):"number"===typeof h&&zt(t,""+h):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(O.hasOwnProperty(r)?null!=h&&li(i,r):null!=h&&K(t,r,h,l))}switch(s){case"input":yt(t),Ct(t,o,!1);break;case"textarea":yt(t),Ft(t);break;case"option":null!=o.value&&t.setAttribute("value",""+vt(o.value));break;case"select":t.multiple=!!o.multiple,null!=(i=o.value)?Mt(t,!!o.multiple,i,!1):null!=o.defaultValue&&Mt(t,!!o.multiple,o.defaultValue,!0);break;default:"function"===typeof c.onClick&&(t.onclick=ci)}Di(s,o)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Jn(t,e,t.memoizedProps,o);else{if("string"!==typeof o&&null===e.stateNode)throw Error(n(166));i=Es(Ls.current),Es(Fs.current),Fn(e)?(i=e.stateNode,o=e.memoizedProps,i[Mi]=e,i.nodeValue!==o&&(e.effectTag|=4)):((i=(9===i.nodeType?i:i.ownerDocument).createTextNode(o))[Mi]=e,e.stateNode=i)}return null;case 13:return _a(zs),o=e.memoizedState,0!==(64&e.effectTag)?(e.expirationTime=i,e):(i=null!==o,o=!1,null===t?void 0!==e.memoizedProps.fallback&&Fn(e):(o=null!==(s=t.memoizedState),i||null===s||null!==(s=t.child.sibling)&&(null!==(r=e.firstEffect)?(e.firstEffect=s,s.nextEffect=r):(e.firstEffect=e.lastEffect=s,s.nextEffect=null),s.effectTag=8)),i&&!o&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&zs.current)?Br===Fr&&(Br=Er):(Br!==Fr&&Br!==Er||(Br=jr),0!==Gr&&null!==Qr&&(ql(Qr,Ur),Kl(Qr,Gr)))),(i||o)&&(e.effectTag|=4),null);case 4:return Zs(),Wn(e),null;case 10:return ns(e),null;case 19:if(_a(zs),null===(o=e.memoizedState))return null;if(s=0!==(64&e.effectTag),null===(r=o.rendering)){if(s)ir(o,!1);else if(Br!==Fr||null!==t&&0!==(64&t.effectTag))for(r=e.child;null!==r;){if(null!==(t=Us(r))){for(e.effectTag|=64,ir(o,!1),null!==(s=t.updateQueue)&&(e.updateQueue=s,e.effectTag|=4),null===o.lastEffect&&(e.firstEffect=null),e.lastEffect=o.lastEffect,o=e.child;null!==o;)r=i,(s=o).effectTag&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(t=s.alternate)?(s.childExpirationTime=0,s.expirationTime=r,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null):(s.childExpirationTime=t.childExpirationTime,s.expirationTime=t.expirationTime,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=null===r?null:{expirationTime:r.expirationTime,firstContext:r.firstContext,responders:r.responders}),o=o.sibling;return fa(zs,1&zs.current|2),e.child}r=r.sibling}}else{if(!s)if(null!==(t=Us(r))){if(e.effectTag|=64,s=!0,null!==(i=t.updateQueue)&&(e.updateQueue=i,e.effectTag|=4),ir(o,!0),null===o.tail&&"hidden"===o.tailMode&&!r.alternate)return null!==(e=e.lastEffect=o.lastEffect)&&(e.nextEffect=null),null}else 2*Ha()-o.renderingStartTime>o.tailExpiration&&1<i&&(e.effectTag|=64,s=!0,ir(o,!1),e.expirationTime=e.childExpirationTime=i-1);o.isBackwards?(r.sibling=e.child,e.child=r):(null!==(i=o.last)?i.sibling=r:e.child=r,o.last=r)}return null!==o.tail?(0===o.tailExpiration&&(o.tailExpiration=Ha()+500),i=o.tail,o.rendering=i,o.tail=i.sibling,o.lastEffect=e.lastEffect,o.renderingStartTime=Ha(),i.sibling=null,e=zs.current,fa(zs,s?1&e|2:1&e),i):null}throw Error(n(156,e.tag))}function ar(t){switch(t.tag){case 1:Aa(t.type)&&Da();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Zs(),_a(va),_a(ma),0!==(64&(e=t.effectTag)))throw Error(n(285));return t.effectTag=-4097&e|64,t;case 5:return Qs(t),null;case 13:return _a(zs),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return _a(zs),null;case 4:return Zs(),null;case 10:return ns(t),null;default:return null}}function sr(t,e){return{value:t,source:e,stack:mt(e)}}Vn=function(t,e){for(var i=e.child;null!==i;){if(5===i.tag||6===i.tag)t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Wn=function(){},Gn=function(t,e,i,o,s){var n=t.memoizedProps;if(n!==o){var r,l,c=e.stateNode;switch(Es(Fs.current),t=null,i){case"input":n=Dt(c,n),o=Dt(c,o),t=[];break;case"option":n=St(c,n),o=St(c,o),t=[];break;case"select":n=a({},n,{value:void 0}),o=a({},o,{value:void 0}),t=[];break;case"textarea":n=Pt(c,n),o=Pt(c,o),t=[];break;default:"function"!==typeof n.onClick&&"function"===typeof o.onClick&&(c.onclick=ci)}for(r in si(i,o),i=null,n)if(!o.hasOwnProperty(r)&&n.hasOwnProperty(r)&&null!=n[r])if("style"===r)for(l in c=n[r])c.hasOwnProperty(l)&&(i||(i={}),i[l]="");else"dangerouslySetInnerHTML"!==r&&"children"!==r&&"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(O.hasOwnProperty(r)?t||(t=[]):(t=t||[]).push(r,null));for(r in o){var d=o[r];if(c=null!=n?n[r]:void 0,o.hasOwnProperty(r)&&d!==c&&(null!=d||null!=c))if("style"===r)if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(i||(i={}),i[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(i||(i={}),i[l]=d[l])}else i||(t||(t=[]),t.push(r,i)),i=d;else"dangerouslySetInnerHTML"===r?(d=d?d.__html:void 0,c=c?c.__html:void 0,null!=d&&c!==d&&(t=t||[]).push(r,d)):"children"===r?c===d||"string"!==typeof d&&"number"!==typeof d||(t=t||[]).push(r,""+d):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&(O.hasOwnProperty(r)?(null!=d&&li(s,r),t||c===d||(t=[])):(t=t||[]).push(r,d))}i&&(t=t||[]).push("style",i),s=t,(e.updateQueue=s)&&(e.effectTag|=4)}},Jn=function(t,e,i,o){i!==o&&(e.effectTag|=4)};var nr="function"===typeof WeakSet?WeakSet:Set;function rr(t,e){var i=e.source,o=e.stack;null===o&&null!==i&&(o=mt(i)),null!==i&&gt(i.type),e=e.value,null!==t&&1===t.tag&&gt(t.type);try{console.error(e)}catch(a){setTimeout((function(){throw a}))}}function lr(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(i){Ll(t,i)}else e.current=null}function cr(t,e){switch(e.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&e.effectTag&&null!==t){var i=t.memoizedProps,o=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?i:ts(e.type,i),o),t.__reactInternalSnapshotBeforeUpdate=e}return}throw Error(n(163))}function dr(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var i=e=e.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&o()}i=i.next}while(i!==e)}}function hr(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var i=e=e.next;do{if((i.tag&t)===t){var o=i.create;i.destroy=o()}i=i.next}while(i!==e)}}function ur(t,e,i){switch(i.tag){case 0:case 11:case 15:case 22:return void hr(3,i);case 1:if(t=i.stateNode,4&i.effectTag)if(null===e)t.componentDidMount();else{var o=i.elementType===i.type?e.memoizedProps:ts(i.type,e.memoizedProps);t.componentDidUpdate(o,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=i.updateQueue)&&ms(i,e,t));case 3:if(null!==(e=i.updateQueue)){if(t=null,null!==i.child)switch(i.child.tag){case 5:case 1:t=i.child.stateNode}ms(i,e,t)}return;case 5:return t=i.stateNode,void(null===e&&4&i.effectTag&&Di(i.type,i.memoizedProps)&&t.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===i.memoizedState&&(i=i.alternate,null!==i&&(i=i.memoizedState,null!==i&&(i=i.dehydrated,null!==i&&je(i)))))}throw Error(n(163))}function pr(t,e,i){switch("function"===typeof Rl&&Rl(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var o=t.next;Ga(97<i?97:i,(function(){var t=o;do{var i=t.destroy;if(void 0!==i){var a=e;try{i()}catch(s){Ll(a,s)}}t=t.next}while(t!==o)}))}break;case 1:lr(e),"function"===typeof(i=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Ll(t,i)}}(e,i);break;case 5:lr(e);break;case 4:br(t,e,i)}}function _r(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&_r(e)}function fr(t){return 5===t.tag||3===t.tag||4===t.tag}function gr(t){t:{for(var e=t.return;null!==e;){if(fr(e)){var i=e;break t}e=e.return}throw Error(n(160))}switch(e=i.stateNode,i.tag){case 5:var o=!1;break;case 3:case 4:e=e.containerInfo,o=!0;break;default:throw Error(n(161))}16&i.effectTag&&(zt(e,""),i.effectTag&=-17);t:e:for(i=t;;){for(;null===i.sibling;){if(null===i.return||fr(i.return)){i=null;break t}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.effectTag)continue e;if(null===i.child||4===i.tag)continue e;i.child.return=i,i=i.child}if(!(2&i.effectTag)){i=i.stateNode;break t}}o?mr(t,i,e):vr(t,i,e)}function mr(t,e,i){var o=t.tag,a=5===o||6===o;if(a)t=a?t.stateNode:t.stateNode.instance,e?8===i.nodeType?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(8===i.nodeType?(e=i.parentNode).insertBefore(t,i):(e=i).appendChild(t),null!==(i=i._reactRootContainer)&&void 0!==i||null!==e.onclick||(e.onclick=ci));else if(4!==o&&null!==(t=t.child))for(mr(t,e,i),t=t.sibling;null!==t;)mr(t,e,i),t=t.sibling}function vr(t,e,i){var o=t.tag,a=5===o||6===o;if(a)t=a?t.stateNode:t.stateNode.instance,e?i.insertBefore(t,e):i.appendChild(t);else if(4!==o&&null!==(t=t.child))for(vr(t,e,i),t=t.sibling;null!==t;)vr(t,e,i),t=t.sibling}function br(t,e,i){for(var o,a,s=e,r=!1;;){if(!r){r=s.return;t:for(;;){if(null===r)throw Error(n(160));switch(o=r.stateNode,r.tag){case 5:a=!1;break t;case 3:case 4:o=o.containerInfo,a=!0;break t}r=r.return}r=!0}if(5===s.tag||6===s.tag){t:for(var l=t,c=s,d=i,h=c;;)if(pr(l,h,d),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break t;for(;null===h.sibling;){if(null===h.return||h.return===c)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}a?(l=o,c=s.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):o.removeChild(s.stateNode)}else if(4===s.tag){if(null!==s.child){o=s.stateNode.containerInfo,a=!0,s.child.return=s,s=s.child;continue}}else if(pr(t,s,i),null!==s.child){s.child.return=s,s=s.child;continue}if(s===e)break;for(;null===s.sibling;){if(null===s.return||s.return===e)return;4===(s=s.return).tag&&(r=!1)}s.sibling.return=s.return,s=s.sibling}}function yr(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void dr(3,e);case 1:case 12:case 17:return;case 5:var i=e.stateNode;if(null!=i){var o=e.memoizedProps,a=null!==t?t.memoizedProps:o;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,null!==s){for(i[Pi]=o,"input"===t&&"radio"===o.type&&null!=o.name&&Ot(i,o),ni(t,a),e=ni(t,o),a=0;a<s.length;a+=2){var r=s[a],l=s[a+1];"style"===r?oi(i,l):"dangerouslySetInnerHTML"===r?Qt(i,l):"children"===r?zt(i,l):K(i,r,l,e)}switch(t){case"input":wt(i,o);break;case"textarea":It(i,o);break;case"select":e=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!o.multiple,null!=(t=o.value)?Mt(i,!!o.multiple,t,!1):e!==!!o.multiple&&(null!=o.defaultValue?Mt(i,!!o.multiple,o.defaultValue,!0):Mt(i,!!o.multiple,o.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(n(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,je(e.containerInfo)));case 13:if(i=e,null===e.memoizedState?o=!1:(o=!0,i=e.child,qr=Ha()),null!==i)t:for(t=i;;){if(5===t.tag)s=t.stateNode,o?"function"===typeof(s=s.style).setProperty?s.setProperty("display","none","important"):s.display="none":(s=t.stateNode,a=void 0!==(a=t.memoizedProps.style)&&null!==a&&a.hasOwnProperty("display")?a.display:null,s.style.display=ii("display",a));else if(6===t.tag)t.stateNode.nodeValue=o?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(s=t.child.sibling).return=t,t=s;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===i)break;for(;null===t.sibling;){if(null===t.return||t.return===i)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void Ar(e);case 19:return void Ar(e)}throw Error(n(163))}function Ar(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var i=t.stateNode;null===i&&(i=t.stateNode=new nr),e.forEach((function(e){var o=jl.bind(null,t,e);i.has(e)||(i.add(e),e.then(o,o))}))}}var Dr="function"===typeof WeakMap?WeakMap:Map;function kr(t,e,i){(i=ps(i,null)).tag=3,i.payload={element:null};var o=e.value;return i.callback=function(){$r||($r=!0,tl=o),rr(t,e)},i}function Or(t,e,i){(i=ps(i,null)).tag=3;var o=t.type.getDerivedStateFromError;if("function"===typeof o){var a=e.value;i.payload=function(){return rr(t,e),o(a)}}var s=t.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(i.callback=function(){"function"!==typeof o&&(null===el?el=new Set([this]):el.add(this),rr(t,e));var i=e.stack;this.componentDidCatch(e.value,{componentStack:null!==i?i:""})}),i}var wr,Cr=Math.ceil,xr=q.ReactCurrentDispatcher,Sr=q.ReactCurrentOwner,Mr=0,Pr=8,Tr=16,Ir=32,Fr=0,Nr=1,Lr=2,Er=3,jr=4,Zr=5,Rr=Mr,Qr=null,zr=null,Ur=0,Br=Fr,Yr=null,Hr=1073741823,Vr=1073741823,Wr=null,Gr=0,Jr=!1,qr=0,Kr=500,Xr=null,$r=!1,tl=null,el=null,il=!1,ol=null,al=90,sl=null,nl=0,rl=null,ll=0;function cl(){return(Rr&(Tr|Ir))!==Mr?1073741821-(Ha()/10|0):0!==ll?ll:ll=1073741821-(Ha()/10|0)}function dl(t,e,i){if(0===(2&(e=e.mode)))return 1073741823;var o=Va();if(0===(4&e))return 99===o?1073741823:1073741822;if((Rr&Tr)!==Mr)return Ur;if(null!==i)t=$a(t,0|i.timeoutMs||5e3,250);else switch(o){case 99:t=1073741823;break;case 98:t=$a(t,150,100);break;case 97:case 96:t=$a(t,5e3,250);break;case 95:t=2;break;default:throw Error(n(326))}return null!==Qr&&t===Ur&&--t,t}function hl(t,e){if(50<nl)throw nl=0,rl=null,Error(n(185));if(null!==(t=ul(t,e))){var i=Va();1073741823===e?(Rr&Pr)!==Mr&&(Rr&(Tr|Ir))===Mr?gl(t):(_l(t),Rr===Mr&&Ka()):_l(t),(4&Rr)===Mr||98!==i&&99!==i||(null===sl?sl=new Map([[t,e]]):(void 0===(i=sl.get(t))||i>e)&&sl.set(t,e))}}function ul(t,e){t.expirationTime<e&&(t.expirationTime=e);var i=t.alternate;null!==i&&i.expirationTime<e&&(i.expirationTime=e);var o=t.return,a=null;if(null===o&&3===t.tag)a=t.stateNode;else for(;null!==o;){if(i=o.alternate,o.childExpirationTime<e&&(o.childExpirationTime=e),null!==i&&i.childExpirationTime<e&&(i.childExpirationTime=e),null===o.return&&3===o.tag){a=o.stateNode;break}o=o.return}return null!==a&&(Qr===a&&(kl(e),Br===jr&&ql(a,Ur)),Kl(a,e)),a}function pl(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Jl(t,e=t.firstPendingTime))return e;var i=t.lastPingedTime;return 2>=(t=i>(t=t.nextKnownPendingLevel)?i:t)&&e!==t?0:t}function _l(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=qa(gl.bind(null,t));else{var e=pl(t),i=t.callbackNode;if(0===e)null!==i&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var o=cl();if(1073741823===e?o=99:1===e||2===e?o=95:o=0>=(o=10*(1073741821-e)-10*(1073741821-o))?99:250>=o?98:5250>=o?97:95,null!==i){var a=t.callbackPriority;if(t.callbackExpirationTime===e&&a>=o)return;i!==Za&&Ma(i)}t.callbackExpirationTime=e,t.callbackPriority=o,e=1073741823===e?qa(gl.bind(null,t)):Ja(o,fl.bind(null,t),{timeout:10*(1073741821-e)-Ha()}),t.callbackNode=e}}}function fl(t,e){if(ll=0,e)return Xl(t,e=cl()),_l(t),null;var i=pl(t);if(0!==i){if(e=t.callbackNode,(Rr&(Tr|Ir))!==Mr)throw Error(n(327));if(Il(),t===Qr&&i===Ur||bl(t,i),null!==zr){var o=Rr;Rr|=Tr;for(var a=Al();;)try{wl();break}catch(l){yl(t,l)}if(ss(),Rr=o,xr.current=a,Br===Nr)throw e=Yr,bl(t,i),ql(t,i),_l(t),e;if(null===zr)switch(a=t.finishedWork=t.current.alternate,t.finishedExpirationTime=i,o=Br,Qr=null,o){case Fr:case Nr:throw Error(n(345));case Lr:Xl(t,2<i?2:i);break;case Er:if(ql(t,i),i===(o=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=Sl(a)),1073741823===Hr&&10<(a=qr+Kr-Ha())){if(Jr){var s=t.lastPingedTime;if(0===s||s>=i){t.lastPingedTime=i,bl(t,i);break}}if(0!==(s=pl(t))&&s!==i)break;if(0!==o&&o!==i){t.lastPingedTime=o;break}t.timeoutHandle=Oi(Ml.bind(null,t),a);break}Ml(t);break;case jr:if(ql(t,i),i===(o=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=Sl(a)),Jr&&(0===(a=t.lastPingedTime)||a>=i)){t.lastPingedTime=i,bl(t,i);break}if(0!==(a=pl(t))&&a!==i)break;if(0!==o&&o!==i){t.lastPingedTime=o;break}if(1073741823!==Vr?o=10*(1073741821-Vr)-Ha():1073741823===Hr?o=0:(o=10*(1073741821-Hr)-5e3,0>(o=(a=Ha())-o)&&(o=0),(i=10*(1073741821-i)-a)<(o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Cr(o/1960))-o)&&(o=i)),10<o){t.timeoutHandle=Oi(Ml.bind(null,t),o);break}Ml(t);break;case Zr:if(1073741823!==Hr&&null!==Wr){s=Hr;var r=Wr;if(0>=(o=0|r.busyMinDurationMs)?o=0:(a=0|r.busyDelayMs,o=(s=Ha()-(10*(1073741821-s)-(0|r.timeoutMs||5e3)))<=a?0:a+o-s),10<o){ql(t,i),t.timeoutHandle=Oi(Ml.bind(null,t),o);break}}Ml(t);break;default:throw Error(n(329))}if(_l(t),t.callbackNode===e)return fl.bind(null,t)}}return null}function gl(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,(Rr&(Tr|Ir))!==Mr)throw Error(n(327));if(Il(),t===Qr&&e===Ur||bl(t,e),null!==zr){var i=Rr;Rr|=Tr;for(var o=Al();;)try{Ol();break}catch(a){yl(t,a)}if(ss(),Rr=i,xr.current=o,Br===Nr)throw i=Yr,bl(t,e),ql(t,e),_l(t),i;if(null!==zr)throw Error(n(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Qr=null,Ml(t),_l(t)}return null}function ml(t,e){var i=Rr;Rr|=1;try{return t(e)}finally{(Rr=i)===Mr&&Ka()}}function vl(t,e){var i=Rr;Rr&=-2,Rr|=Pr;try{return t(e)}finally{(Rr=i)===Mr&&Ka()}}function bl(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var i=t.timeoutHandle;if(-1!==i&&(t.timeoutHandle=-1,wi(i)),null!==zr)for(i=zr.return;null!==i;){var o=i;switch(o.tag){case 1:null!==(o=o.type.childContextTypes)&&void 0!==o&&Da();break;case 3:Zs(),_a(va),_a(ma);break;case 5:Qs(o);break;case 4:Zs();break;case 13:case 19:_a(zs);break;case 10:ns(o)}i=i.return}Qr=t,zr=Bl(t.current,null),Ur=e,Br=Fr,Yr=null,Vr=Hr=1073741823,Wr=null,Gr=0,Jr=!1}function yl(t,e){for(;;){try{if(ss(),Ys.current=Dn,qs)for(var i=Ws.memoizedState;null!==i;){var o=i.queue;null!==o&&(o.pending=null),i=i.next}if(Vs=0,Js=Gs=Ws=null,qs=!1,null===zr||null===zr.return)return Br=Nr,Yr=e,zr=null;t:{var a=t,s=zr.return,n=zr,r=e;if(e=Ur,n.effectTag|=2048,n.firstEffect=n.lastEffect=null,null!==r&&"object"===typeof r&&"function"===typeof r.then){var l=r;if(0===(2&n.mode)){var c=n.alternate;c?(n.updateQueue=c.updateQueue,n.memoizedState=c.memoizedState,n.expirationTime=c.expirationTime):(n.updateQueue=null,n.memoizedState=null)}var d=0!==(1&zs.current),h=s;do{var u;if(u=13===h.tag){var p=h.memoizedState;if(null!==p)u=null!==p.dehydrated;else{var _=h.memoizedProps;u=void 0!==_.fallback&&(!0!==_.unstable_avoidThisFallback||!d)}}if(u){var f=h.updateQueue;if(null===f){var g=new Set;g.add(l),h.updateQueue=g}else f.add(l);if(0===(2&h.mode)){if(h.effectTag|=64,n.effectTag&=-2981,1===n.tag)if(null===n.alternate)n.tag=17;else{var m=ps(1073741823,null);m.tag=2,_s(n,m)}n.expirationTime=1073741823;break t}r=void 0,n=e;var v=a.pingCache;if(null===v?(v=a.pingCache=new Dr,r=new Set,v.set(l,r)):void 0===(r=v.get(l))&&(r=new Set,v.set(l,r)),!r.has(n)){r.add(n);var b=El.bind(null,a,l,n);l.then(b,b)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);r=Error((gt(n.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+mt(n))}Br!==Zr&&(Br=Lr),r=sr(r,n),h=s;do{switch(h.tag){case 3:l=r,h.effectTag|=4096,h.expirationTime=e,fs(h,kr(h,l,e));break t;case 1:l=r;var y=h.type,A=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof y.getDerivedStateFromError||null!==A&&"function"===typeof A.componentDidCatch&&(null===el||!el.has(A)))){h.effectTag|=4096,h.expirationTime=e,fs(h,Or(h,l,e));break t}}h=h.return}while(null!==h)}zr=xl(zr)}catch(D){e=D;continue}break}}function Al(){var t=xr.current;return xr.current=Dn,null===t?Dn:t}function Dl(t,e){t<Hr&&2<t&&(Hr=t),null!==e&&t<Vr&&2<t&&(Vr=t,Wr=e)}function kl(t){t>Gr&&(Gr=t)}function Ol(){for(;null!==zr;)zr=Cl(zr)}function wl(){for(;null!==zr&&!Ra();)zr=Cl(zr)}function Cl(t){var e=wr(t.alternate,t,Ur);return t.memoizedProps=t.pendingProps,null===e&&(e=xl(t)),Sr.current=null,e}function xl(t){zr=t;do{var e=zr.alternate;if(t=zr.return,0===(2048&zr.effectTag)){if(e=or(e,zr,Ur),1===Ur||1!==zr.childExpirationTime){for(var i=0,o=zr.child;null!==o;){var a=o.expirationTime,s=o.childExpirationTime;a>i&&(i=a),s>i&&(i=s),o=o.sibling}zr.childExpirationTime=i}if(null!==e)return e;null!==t&&0===(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=zr.firstEffect),null!==zr.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=zr.firstEffect),t.lastEffect=zr.lastEffect),1<zr.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=zr:t.firstEffect=zr,t.lastEffect=zr))}else{if(null!==(e=ar(zr)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=zr.sibling))return e;zr=t}while(null!==zr);return Br===Fr&&(Br=Zr),null}function Sl(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function Ml(t){var e=Va();return Ga(99,Pl.bind(null,t,e)),null}function Pl(t,e){do{Il()}while(null!==ol);if((Rr&(Tr|Ir))!==Mr)throw Error(n(327));var i=t.finishedWork,o=t.finishedExpirationTime;if(null===i)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,i===t.current)throw Error(n(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var a=Sl(i);if(t.firstPendingTime=a,o<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:o<=t.firstSuspendedTime&&(t.firstSuspendedTime=o-1),o<=t.lastPingedTime&&(t.lastPingedTime=0),o<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===Qr&&(zr=Qr=null,Ur=0),1<i.effectTag?null!==i.lastEffect?(i.lastEffect.nextEffect=i,a=i.firstEffect):a=i:a=i.firstEffect,null!==a){var s=Rr;Rr|=Ir,Sr.current=null,yi=We;var r=_i();if(fi(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else t:{var c=(l=(l=r.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(c&&0!==c.rangeCount){l=c.anchorNode;var d=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{l.nodeType,h.nodeType}catch(C){l=null;break t}var u=0,p=-1,_=-1,f=0,g=0,m=r,v=null;e:for(;;){for(var b;m!==l||0!==d&&3!==m.nodeType||(p=u+d),m!==h||0!==c&&3!==m.nodeType||(_=u+c),3===m.nodeType&&(u+=m.nodeValue.length),null!==(b=m.firstChild);)v=m,m=b;for(;;){if(m===r)break e;if(v===l&&++f===d&&(p=u),v===h&&++g===c&&(_=u),null!==(b=m.nextSibling))break;v=(m=v).parentNode}m=b}l=-1===p||-1===_?null:{start:p,end:_}}else l=null}l=l||{start:0,end:0}}else l=null;Ai={activeElementDetached:null,focusedElem:r,selectionRange:l},We=!1,Xr=a;do{try{Tl()}catch(C){if(null===Xr)throw Error(n(330));Ll(Xr,C),Xr=Xr.nextEffect}}while(null!==Xr);Xr=a;do{try{for(r=t,l=e;null!==Xr;){var y=Xr.effectTag;if(16&y&&zt(Xr.stateNode,""),128&y){var A=Xr.alternate;if(null!==A){var D=A.ref;null!==D&&("function"===typeof D?D(null):D.current=null)}}switch(1038&y){case 2:gr(Xr),Xr.effectTag&=-3;break;case 6:gr(Xr),Xr.effectTag&=-3,yr(Xr.alternate,Xr);break;case 1024:Xr.effectTag&=-1025;break;case 1028:Xr.effectTag&=-1025,yr(Xr.alternate,Xr);break;case 4:yr(Xr.alternate,Xr);break;case 8:br(r,d=Xr,l),_r(d)}Xr=Xr.nextEffect}}catch(C){if(null===Xr)throw Error(n(330));Ll(Xr,C),Xr=Xr.nextEffect}}while(null!==Xr);if(D=Ai,A=_i(),y=D.focusedElem,l=D.selectionRange,A!==y&&y&&y.ownerDocument&&pi(y.ownerDocument.documentElement,y)){null!==l&&fi(y)&&(A=l.start,void 0===(D=l.end)&&(D=A),"selectionStart"in y?(y.selectionStart=A,y.selectionEnd=Math.min(D,y.value.length)):(D=(A=y.ownerDocument||document)&&A.defaultView||window).getSelection&&(D=D.getSelection(),d=y.textContent.length,r=Math.min(l.start,d),l=void 0===l.end?r:Math.min(l.end,d),!D.extend&&r>l&&(d=l,l=r,r=d),d=ui(y,r),h=ui(y,l),d&&h&&(1!==D.rangeCount||D.anchorNode!==d.node||D.anchorOffset!==d.offset||D.focusNode!==h.node||D.focusOffset!==h.offset)&&((A=A.createRange()).setStart(d.node,d.offset),D.removeAllRanges(),r>l?(D.addRange(A),D.extend(h.node,h.offset)):(A.setEnd(h.node,h.offset),D.addRange(A))))),A=[];for(D=y;D=D.parentNode;)1===D.nodeType&&A.push({element:D,left:D.scrollLeft,top:D.scrollTop});for("function"===typeof y.focus&&y.focus(),y=0;y<A.length;y++)(D=A[y]).element.scrollLeft=D.left,D.element.scrollTop=D.top}We=!!yi,Ai=yi=null,t.current=i,Xr=a;do{try{for(y=t;null!==Xr;){var k=Xr.effectTag;if(36&k&&ur(y,Xr.alternate,Xr),128&k){A=void 0;var O=Xr.ref;if(null!==O){var w=Xr.stateNode;Xr.tag,A=w,"function"===typeof O?O(A):O.current=A}}Xr=Xr.nextEffect}}catch(C){if(null===Xr)throw Error(n(330));Ll(Xr,C),Xr=Xr.nextEffect}}while(null!==Xr);Xr=null,Qa(),Rr=s}else t.current=i;if(il)il=!1,ol=t,al=e;else for(Xr=a;null!==Xr;)e=Xr.nextEffect,Xr.nextEffect=null,Xr=e;if(0===(e=t.firstPendingTime)&&(el=null),1073741823===e?t===rl?nl++:(nl=0,rl=t):nl=0,"function"===typeof Zl&&Zl(i.stateNode,o),_l(t),$r)throw $r=!1,t=tl,tl=null,t;return(Rr&Pr)!==Mr||Ka(),null}function Tl(){for(;null!==Xr;){var t=Xr.effectTag;0!==(256&t)&&cr(Xr.alternate,Xr),0===(512&t)||il||(il=!0,Ja(97,(function(){return Il(),null}))),Xr=Xr.nextEffect}}function Il(){if(90!==al){var t=97<al?97:al;return al=90,Ga(t,Fl)}}function Fl(){if(null===ol)return!1;var t=ol;if(ol=null,(Rr&(Tr|Ir))!==Mr)throw Error(n(331));var e=Rr;for(Rr|=Ir,t=t.current.firstEffect;null!==t;){try{var i=t;if(0!==(512&i.effectTag))switch(i.tag){case 0:case 11:case 15:case 22:dr(5,i),hr(5,i)}}catch(o){if(null===t)throw Error(n(330));Ll(t,o)}i=t.nextEffect,t.nextEffect=null,t=i}return Rr=e,Ka(),!0}function Nl(t,e,i){_s(t,e=kr(t,e=sr(i,e),1073741823)),null!==(t=ul(t,1073741823))&&_l(t)}function Ll(t,e){if(3===t.tag)Nl(t,t,e);else for(var i=t.return;null!==i;){if(3===i.tag){Nl(i,t,e);break}if(1===i.tag){var o=i.stateNode;if("function"===typeof i.type.getDerivedStateFromError||"function"===typeof o.componentDidCatch&&(null===el||!el.has(o))){_s(i,t=Or(i,t=sr(e,t),1073741823)),null!==(i=ul(i,1073741823))&&_l(i);break}}i=i.return}}function El(t,e,i){var o=t.pingCache;null!==o&&o.delete(e),Qr===t&&Ur===i?Br===jr||Br===Er&&1073741823===Hr&&Ha()-qr<Kr?bl(t,Ur):Jr=!0:Jl(t,i)&&(0!==(e=t.lastPingedTime)&&e<i||(t.lastPingedTime=i,_l(t)))}function jl(t,e){var i=t.stateNode;null!==i&&i.delete(e),0===(e=0)&&(e=dl(e=cl(),t,null)),null!==(t=ul(t,e))&&_l(t)}wr=function(t,e,i){var o=e.expirationTime;if(null!==t){var a=e.pendingProps;if(t.memoizedProps!==a||va.current)En=!0;else{if(o<i){switch(En=!1,e.tag){case 3:Hn(e),Nn();break;case 5:if(Rs(e),4&e.mode&&1!==i&&a.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:Aa(e.type)&&wa(e);break;case 4:js(e,e.stateNode.containerInfo);break;case 10:o=e.memoizedProps.value,a=e.type._context,fa(es,a._currentValue),a._currentValue=o;break;case 13:if(null!==e.memoizedState)return 0!==(o=e.child.childExpirationTime)&&o>=i?Kn(t,e,i):(fa(zs,1&zs.current),null!==(e=er(t,e,i))?e.sibling:null);fa(zs,1&zs.current);break;case 19:if(o=e.childExpirationTime>=i,0!==(64&t.effectTag)){if(o)return tr(t,e,i);e.effectTag|=64}if(null!==(a=e.memoizedState)&&(a.rendering=null,a.tail=null),fa(zs,zs.current),!o)return null}return er(t,e,i)}En=!1}}else En=!1;switch(e.expirationTime=0,e.tag){case 2:if(o=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,a=ya(e,ma.current),ls(e,i),a=$s(null,e,o,t,a,i),e.effectTag|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Aa(o)){var s=!0;wa(e)}else s=!1;e.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,hs(e);var r=o.getDerivedStateFromProps;"function"===typeof r&&ys(e,o,r,t),a.updater=As,e.stateNode=a,a._reactInternalFiber=e,ws(e,o,t,i),e=Yn(null,e,o,!0,s,i)}else e.tag=0,jn(null,e,a,i),e=e.child;return e;case 16:t:{if(a=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(a),1!==a._status)throw a._result;switch(a=a._result,e.type=a,s=e.tag=function(t){if("function"===typeof t)return Ul(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===lt)return 11;if(t===ht)return 14}return 2}(a),t=ts(a,t),s){case 0:e=Un(null,e,a,t,i);break t;case 1:e=Bn(null,e,a,t,i);break t;case 11:e=Zn(null,e,a,t,i);break t;case 14:e=Rn(null,e,a,ts(a.type,t),o,i);break t}throw Error(n(306,a,""))}return e;case 0:return o=e.type,a=e.pendingProps,Un(t,e,o,a=e.elementType===o?a:ts(o,a),i);case 1:return o=e.type,a=e.pendingProps,Bn(t,e,o,a=e.elementType===o?a:ts(o,a),i);case 3:if(Hn(e),o=e.updateQueue,null===t||null===o)throw Error(n(282));if(o=e.pendingProps,a=null!==(a=e.memoizedState)?a.element:null,us(t,e),gs(e,o,null,i),(o=e.memoizedState.element)===a)Nn(),e=er(t,e,i);else{if((a=e.stateNode.hydrate)&&(xn=Ci(e.stateNode.containerInfo.firstChild),Cn=e,a=Sn=!0),a)for(i=Ts(e,null,o,i),e.child=i;i;)i.effectTag=-3&i.effectTag|1024,i=i.sibling;else jn(t,e,o,i),Nn();e=e.child}return e;case 5:return Rs(e),null===t&&Tn(e),o=e.type,a=e.pendingProps,s=null!==t?t.memoizedProps:null,r=a.children,ki(o,a)?r=null:null!==s&&ki(o,s)&&(e.effectTag|=16),zn(t,e),4&e.mode&&1!==i&&a.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(jn(t,e,r,i),e=e.child),e;case 6:return null===t&&Tn(e),null;case 13:return Kn(t,e,i);case 4:return js(e,e.stateNode.containerInfo),o=e.pendingProps,null===t?e.child=Ps(e,null,o,i):jn(t,e,o,i),e.child;case 11:return o=e.type,a=e.pendingProps,Zn(t,e,o,a=e.elementType===o?a:ts(o,a),i);case 7:return jn(t,e,e.pendingProps,i),e.child;case 8:case 12:return jn(t,e,e.pendingProps.children,i),e.child;case 10:t:{o=e.type._context,a=e.pendingProps,r=e.memoizedProps,s=a.value;var l=e.type._context;if(fa(es,l._currentValue),l._currentValue=s,null!==r)if(l=r.value,0===(s=Bo(l,s)?0:0|("function"===typeof o._calculateChangedBits?o._calculateChangedBits(l,s):1073741823))){if(r.children===a.children&&!va.current){e=er(t,e,i);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var c=l.dependencies;if(null!==c){r=l.child;for(var d=c.firstContext;null!==d;){if(d.context===o&&0!==(d.observedBits&s)){1===l.tag&&((d=ps(i,null)).tag=2,_s(l,d)),l.expirationTime<i&&(l.expirationTime=i),null!==(d=l.alternate)&&d.expirationTime<i&&(d.expirationTime=i),rs(l.return,i),c.expirationTime<i&&(c.expirationTime=i);break}d=d.next}}else r=10===l.tag&&l.type===e.type?null:l.child;if(null!==r)r.return=l;else for(r=l;null!==r;){if(r===e){r=null;break}if(null!==(l=r.sibling)){l.return=r.return,r=l;break}r=r.return}l=r}jn(t,e,a.children,i),e=e.child}return e;case 9:return a=e.type,o=(s=e.pendingProps).children,ls(e,i),o=o(a=cs(a,s.unstable_observedBits)),e.effectTag|=1,jn(t,e,o,i),e.child;case 14:return s=ts(a=e.type,e.pendingProps),Rn(t,e,a,s=ts(a.type,s),o,i);case 15:return Qn(t,e,e.type,e.pendingProps,o,i);case 17:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:ts(o,a),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Aa(o)?(t=!0,wa(e)):t=!1,ls(e,i),ks(e,o,a),ws(e,o,a,i),Yn(null,e,o,!0,t,i);case 19:return tr(t,e,i)}throw Error(n(156,e.tag))};var Zl=null,Rl=null;function Ql(t,e,i,o){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function zl(t,e,i,o){return new Ql(t,e,i,o)}function Ul(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Bl(t,e){var i=t.alternate;return null===i?((i=zl(t.tag,e,t.key,t.mode)).elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childExpirationTime=t.childExpirationTime,i.expirationTime=t.expirationTime,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Yl(t,e,i,o,a,s){var r=2;if(o=t,"function"===typeof t)Ul(t)&&(r=1);else if("string"===typeof t)r=5;else t:switch(t){case it:return Hl(i.children,a,s,e);case rt:r=8,a|=7;break;case ot:r=8,a|=1;break;case at:return(t=zl(12,i,e,8|a)).elementType=at,t.type=at,t.expirationTime=s,t;case ct:return(t=zl(13,i,e,a)).type=ct,t.elementType=ct,t.expirationTime=s,t;case dt:return(t=zl(19,i,e,a)).elementType=dt,t.expirationTime=s,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case st:r=10;break t;case nt:r=9;break t;case lt:r=11;break t;case ht:r=14;break t;case ut:r=16,o=null;break t;case pt:r=22;break t}throw Error(n(130,null==t?t:typeof t,""))}return(e=zl(r,i,e,a)).elementType=t,e.type=o,e.expirationTime=s,e}function Hl(t,e,i,o){return(t=zl(7,t,o,e)).expirationTime=i,t}function Vl(t,e,i){return(t=zl(6,t,null,e)).expirationTime=i,t}function Wl(t,e,i){return(e=zl(4,null!==t.children?t.children:[],t.key,e)).expirationTime=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Gl(t,e,i){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Jl(t,e){var i=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==i&&i>=e&&t<=e}function ql(t,e){var i=t.firstSuspendedTime,o=t.lastSuspendedTime;i<e&&(t.firstSuspendedTime=e),(o>e||0===i)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Kl(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var i=t.firstSuspendedTime;0!==i&&(e>=i?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Xl(t,e){var i=t.lastExpiredTime;(0===i||i>e)&&(t.lastExpiredTime=e)}function $l(t,e,i,o){var a=e.current,s=cl(),r=vs.suspense;s=dl(s,a,r);t:if(i){e:{if(te(i=i._reactInternalFiber)!==i||1!==i.tag)throw Error(n(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Aa(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(n(171))}if(1===i.tag){var c=i.type;if(Aa(c)){i=Oa(i,c,l);break t}}i=l}else i=ga;return null===e.context?e.context=i:e.pendingContext=i,(e=ps(s,r)).payload={element:t},null!==(o=void 0===o?null:o)&&(e.callback=o),_s(a,e),hl(a,s),s}function tc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function ec(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function ic(t,e){ec(t,e),(t=t.alternate)&&ec(t,e)}function oc(t,e,i){var o=new Gl(t,e,i=null!=i&&!0===i.hydrate),a=zl(3,null,null,2===e?7:1===e?3:0);o.current=a,a.stateNode=o,hs(a),t[Ti]=o.current,i&&0!==e&&function(t,e){var i=$t(e);xe.forEach((function(t){fe(t,e,i)})),Se.forEach((function(t){fe(t,e,i)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=o}function ac(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function sc(t,e,i,o,a){var s=i._reactRootContainer;if(s){var n=s._internalRoot;if("function"===typeof a){var r=a;a=function(){var t=tc(n);r.call(t)}}$l(e,n,t,a)}else{if(s=i._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var i;i=t.lastChild;)t.removeChild(i);return new oc(t,0,e?{hydrate:!0}:void 0)}(i,o),n=s._internalRoot,"function"===typeof a){var l=a;a=function(){var t=tc(n);l.call(t)}}vl((function(){$l(e,n,t,a)}))}return tc(n)}function nc(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(e))throw Error(n(200));return function(t,e,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==o?null:""+o,children:t,containerInfo:e,implementation:i}}(t,e,null,i)}oc.prototype.render=function(t){$l(t,this._internalRoot,null,null)},oc.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;$l(null,t,null,(function(){e[Ti]=null}))},ge=function(t){if(13===t.tag){var e=$a(cl(),150,100);hl(t,e),ic(t,e)}},me=function(t){13===t.tag&&(hl(t,3),ic(t,3))},ve=function(t){if(13===t.tag){var e=cl();hl(t,e=dl(e,t,null)),ic(t,e)}},S=function(t,e,i){switch(e){case"input":if(wt(t,i),e=i.name,"radio"===i.type&&null!=e){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var o=i[e];if(o!==t&&o.form===t.form){var a=Li(o);if(!a)throw Error(n(90));At(o),wt(o,a)}}}break;case"textarea":It(t,i);break;case"select":null!=(e=i.value)&&Mt(t,!!i.multiple,e,!1)}},N=ml,L=function(t,e,i,o,a){var s=Rr;Rr|=4;try{return Ga(98,t.bind(null,e,i,o,a))}finally{(Rr=s)===Mr&&Ka()}},E=function(){(Rr&(1|Tr|Ir))===Mr&&(function(){if(null!==sl){var t=sl;sl=null,t.forEach((function(t,e){Xl(e,t),_l(e)})),Ka()}}(),Il())},j=function(t,e){var i=Rr;Rr|=2;try{return t(e)}finally{(Rr=i)===Mr&&Ka()}};var rc={Events:[Fi,Ni,Li,C,k,Ui,function(t){se(t,zi)},I,F,Xe,le,Il,{current:!1}]};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var i=e.inject(t);Zl=function(t){try{e.onCommitFiberRoot(i,t,void 0,64===(64&t.current.effectTag))}catch(o){}},Rl=function(t){try{e.onCommitFiberUnmount(i,t)}catch(o){}}}catch(o){}})(a({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=oe(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Ii,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rc,e.createPortal=nc,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw Error(n(188));throw Error(n(268,Object.keys(t)))}return t=null===(t=oe(e))?null:t.stateNode},e.flushSync=function(t,e){if((Rr&(Tr|Ir))!==Mr)throw Error(n(187));var i=Rr;Rr|=1;try{return Ga(99,t.bind(null,e))}finally{Rr=i,Ka()}},e.hydrate=function(t,e,i){if(!ac(e))throw Error(n(200));return sc(null,t,e,!0,i)},e.render=function(t,e,i){if(!ac(e))throw Error(n(200));return sc(null,t,e,!1,i)},e.unmountComponentAtNode=function(t){if(!ac(t))throw Error(n(40));return!!t._reactRootContainer&&(vl((function(){sc(null,null,t,!1,(function(){t._reactRootContainer=null,t[Ti]=null}))})),!0)},e.unstable_batchedUpdates=ml,e.unstable_createPortal=function(t,e){return nc(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,i,o){if(!ac(i))throw Error(n(200));if(null==t||void 0===t._reactInternalFiber)throw Error(n(38));return sc(t,e,i,!1,o)},e.version="16.14.0"},1168:(t,e,i)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=i(534)},5918:(t,e,i)=>{"use strict";var o=i(7313),a=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var s=Symbol.for;a=s("react.element"),s("react.fragment")}var n=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,i){var o,s={},c=null,d=null;for(o in void 0!==i&&(c=""+i),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(d=e.ref),e)r.call(e,o)&&!l.hasOwnProperty(o)&&(s[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps)void 0===s[o]&&(s[o]=e[o]);return{$$typeof:a,type:t,key:c,ref:d,props:s,_owner:n.current}}e.jsx=c,e.jsxs=c},306:(t,e,i)=>{"use strict";var o=i(1843),a="function"===typeof Symbol&&Symbol.for,s=a?Symbol.for("react.element"):60103,n=a?Symbol.for("react.portal"):60106,r=a?Symbol.for("react.fragment"):60107,l=a?Symbol.for("react.strict_mode"):60108,c=a?Symbol.for("react.profiler"):60114,d=a?Symbol.for("react.provider"):60109,h=a?Symbol.for("react.context"):60110,u=a?Symbol.for("react.forward_ref"):60112,p=a?Symbol.for("react.suspense"):60113,_=a?Symbol.for("react.memo"):60115,f=a?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function m(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function y(t,e,i){this.props=t,this.context=e,this.refs=b,this.updater=i||v}function A(){}function D(t,e,i){this.props=t,this.context=e,this.refs=b,this.updater=i||v}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(m(85));this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},A.prototype=y.prototype;var k=D.prototype=new A;k.constructor=D,o(k,y.prototype),k.isPureReactComponent=!0;var O={current:null},w=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function x(t,e,i){var o,a={},n=null,r=null;if(null!=e)for(o in void 0!==e.ref&&(r=e.ref),void 0!==e.key&&(n=""+e.key),e)w.call(e,o)&&!C.hasOwnProperty(o)&&(a[o]=e[o]);var l=arguments.length-2;if(1===l)a.children=i;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(o in l=t.defaultProps)void 0===a[o]&&(a[o]=l[o]);return{$$typeof:s,type:t,key:n,ref:r,props:a,_owner:O.current}}function S(t){return"object"===typeof t&&null!==t&&t.$$typeof===s}var M=/\/+/g,P=[];function T(t,e,i,o){if(P.length){var a=P.pop();return a.result=t,a.keyPrefix=e,a.func=i,a.context=o,a.count=0,a}return{result:t,keyPrefix:e,func:i,context:o,count:0}}function I(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>P.length&&P.push(t)}function F(t,e,i,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var r=!1;if(null===t)r=!0;else switch(a){case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case s:case n:r=!0}}if(r)return i(o,t,""===e?"."+L(t,0):e),1;if(r=0,e=""===e?".":e+":",Array.isArray(t))for(var l=0;l<t.length;l++){var c=e+L(a=t[l],l);r+=F(a,c,i,o)}else if(null===t||"object"!==typeof t?c=null:c="function"===typeof(c=g&&t[g]||t["@@iterator"])?c:null,"function"===typeof c)for(t=c.call(t),l=0;!(a=t.next()).done;)r+=F(a=a.value,c=e+L(a,l++),i,o);else if("object"===a)throw i=""+t,Error(m(31,"[object Object]"===i?"object with keys {"+Object.keys(t).join(", ")+"}":i,""));return r}function N(t,e,i){return null==t?0:F(t,"",e,i)}function L(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function E(t,e){t.func.call(t.context,e,t.count++)}function j(t,e,i){var o=t.result,a=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?Z(t,o,i,(function(t){return t})):null!=t&&(S(t)&&(t=function(t,e){return{$$typeof:s,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,a+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(M,"$&/")+"/")+i)),o.push(t))}function Z(t,e,i,o,a){var s="";null!=i&&(s=(""+i).replace(M,"$&/")+"/"),N(t,j,e=T(e,s,o,a)),I(e)}var R={current:null};function Q(){var t=R.current;if(null===t)throw Error(m(321));return t}var z={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:O,IsSomeRendererActing:{current:!1},assign:o};e.Children={map:function(t,e,i){if(null==t)return t;var o=[];return Z(t,o,null,e,i),o},forEach:function(t,e,i){if(null==t)return t;N(t,E,e=T(null,null,e,i)),I(e)},count:function(t){return N(t,(function(){return null}),null)},toArray:function(t){var e=[];return Z(t,e,null,(function(t){return t})),e},only:function(t){if(!S(t))throw Error(m(143));return t}},e.Component=y,e.Fragment=r,e.Profiler=c,e.PureComponent=D,e.StrictMode=l,e.Suspense=p,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error(m(267,t));var a=o({},t.props),n=t.key,r=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(r=e.ref,l=O.current),void 0!==e.key&&(n=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in e)w.call(e,d)&&!C.hasOwnProperty(d)&&(a[d]=void 0===e[d]&&void 0!==c?c[d]:e[d])}var d=arguments.length-2;if(1===d)a.children=i;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];a.children=c}return{$$typeof:s,type:t.type,key:n,ref:r,props:a,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:d,_context:t},t.Consumer=t},e.createElement=x,e.createFactory=function(t){var e=x.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=S,e.lazy=function(t){return{$$typeof:f,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:_,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return Q().useCallback(t,e)},e.useContext=function(t,e){return Q().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return Q().useEffect(t,e)},e.useImperativeHandle=function(t,e,i){return Q().useImperativeHandle(t,e,i)},e.useLayoutEffect=function(t,e){return Q().useLayoutEffect(t,e)},e.useMemo=function(t,e){return Q().useMemo(t,e)},e.useReducer=function(t,e,i){return Q().useReducer(t,e,i)},e.useRef=function(t){return Q().useRef(t)},e.useState=function(t){return Q().useState(t)},e.version="16.14.0"},7313:(t,e,i)=>{"use strict";t.exports=i(306)},6417:(t,e,i)=>{"use strict";t.exports=i(5918)},3095:(t,e)=>{"use strict";var i,o,a,s,n;if("undefined"===typeof window||"function"!==typeof MessageChannel){var r=null,l=null,c=function t(){if(null!==r)try{var i=e.unstable_now();r(!0,i),r=null}catch(o){throw setTimeout(t,0),o}},d=Date.now();e.unstable_now=function(){return Date.now()-d},i=function(t){null!==r?setTimeout(i,0,t):(r=t,setTimeout(c,0))},o=function(t,e){l=setTimeout(t,e)},a=function(){clearTimeout(l)},s=function(){return!1},n=e.unstable_forceFrameRate=function(){}}else{var h=window.performance,u=window.Date,p=window.setTimeout,_=window.clearTimeout;if("undefined"!==typeof console){var f=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)e.unstable_now=function(){return h.now()};else{var g=u.now();e.unstable_now=function(){return u.now()-g}}var m=!1,v=null,b=-1,y=5,A=0;s=function(){return e.unstable_now()>=A},n=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):y=0<t?Math.floor(1e3/t):5};var D=new MessageChannel,k=D.port2;D.port1.onmessage=function(){if(null!==v){var t=e.unstable_now();A=t+y;try{v(!0,t)?k.postMessage(null):(m=!1,v=null)}catch(i){throw k.postMessage(null),i}}else m=!1},i=function(t){v=t,m||(m=!0,k.postMessage(null))},o=function(t,i){b=p((function(){t(e.unstable_now())}),i)},a=function(){_(b),b=-1}}function O(t,e){var i=t.length;t.push(e);t:for(;;){var o=i-1>>>1,a=t[o];if(!(void 0!==a&&0<x(a,e)))break t;t[o]=e,t[i]=a,i=o}}function w(t){return void 0===(t=t[0])?null:t}function C(t){var e=t[0];if(void 0!==e){var i=t.pop();if(i!==e){t[0]=i;t:for(var o=0,a=t.length;o<a;){var s=2*(o+1)-1,n=t[s],r=s+1,l=t[r];if(void 0!==n&&0>x(n,i))void 0!==l&&0>x(l,n)?(t[o]=l,t[r]=i,o=r):(t[o]=n,t[s]=i,o=s);else{if(!(void 0!==l&&0>x(l,i)))break t;t[o]=l,t[r]=i,o=r}}}return e}return null}function x(t,e){var i=t.sortIndex-e.sortIndex;return 0!==i?i:t.id-e.id}var S=[],M=[],P=1,T=null,I=3,F=!1,N=!1,L=!1;function E(t){for(var e=w(M);null!==e;){if(null===e.callback)C(M);else{if(!(e.startTime<=t))break;C(M),e.sortIndex=e.expirationTime,O(S,e)}e=w(M)}}function j(t){if(L=!1,E(t),!N)if(null!==w(S))N=!0,i(Z);else{var e=w(M);null!==e&&o(j,e.startTime-t)}}function Z(t,i){N=!1,L&&(L=!1,a()),F=!0;var n=I;try{for(E(i),T=w(S);null!==T&&(!(T.expirationTime>i)||t&&!s());){var r=T.callback;if(null!==r){T.callback=null,I=T.priorityLevel;var l=r(T.expirationTime<=i);i=e.unstable_now(),"function"===typeof l?T.callback=l:T===w(S)&&C(S),E(i)}else C(S);T=w(S)}if(null!==T)var c=!0;else{var d=w(M);null!==d&&o(j,d.startTime-i),c=!1}return c}finally{T=null,I=n,F=!1}}function R(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Q=n;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){N||F||(N=!0,i(Z))},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return w(S)},e.unstable_next=function(t){switch(I){case 1:case 2:case 3:var e=3;break;default:e=I}var i=I;I=e;try{return t()}finally{I=i}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=Q,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=I;I=t;try{return e()}finally{I=i}},e.unstable_scheduleCallback=function(t,s,n){var r=e.unstable_now();if("object"===typeof n&&null!==n){var l=n.delay;l="number"===typeof l&&0<l?r+l:r,n="number"===typeof n.timeout?n.timeout:R(t)}else n=R(t),l=r;return t={id:P++,callback:s,priorityLevel:t,startTime:l,expirationTime:n=l+n,sortIndex:-1},l>r?(t.sortIndex=l,O(M,t),null===w(S)&&t===w(M)&&(L?a():L=!0,o(j,l-r))):(t.sortIndex=n,O(S,t),N||F||(N=!0,i(Z))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();E(t);var i=w(S);return i!==T&&null!==T&&null!==i&&null!==i.callback&&i.startTime<=t&&i.expirationTime<T.expirationTime||s()},e.unstable_wrapCallback=function(t){var e=I;return function(){var i=I;I=e;try{return t.apply(this,arguments)}finally{I=i}}}},2224:(t,e,i)=>{"use strict";t.exports=i(3095)},4397:(t,e,i)=>{var o={"./designForm/LogicDesignForm/RuleFunction":[1950,9189,1950,8308],"./designForm/LogicDesignForm/RuleFunction/":[1950,9189,1950,8308],"./designForm/LogicDesignForm/RuleFunction/calculator":[3939,3939],"./designForm/LogicDesignForm/RuleFunction/calculator/":[3939,3939],"./designForm/LogicDesignForm/RuleFunction/calculator/index":[3939,3939],"./designForm/LogicDesignForm/RuleFunction/calculator/index.js":[3939,3939],"./designForm/LogicDesignForm/RuleFunction/constants":[3684,3684],"./designForm/LogicDesignForm/RuleFunction/constants.js":[3684,3684],"./designForm/LogicDesignForm/RuleFunction/get_info":[9189,9189],"./designForm/LogicDesignForm/RuleFunction/get_info/":[9189,9189],"./designForm/LogicDesignForm/RuleFunction/get_info/index":[9189,9189],"./designForm/LogicDesignForm/RuleFunction/get_info/index.js":[9189,9189],"./designForm/LogicDesignForm/RuleFunction/index":[1950,9189,1950,8308],"./designForm/LogicDesignForm/RuleFunction/index.js":[1950,9189,1950,8308],"./designForm/LogicDesignForm/RuleFunction/managerComponent":[4810,4810],"./designForm/LogicDesignForm/RuleFunction/managerComponent/":[4810,4810],"./designForm/LogicDesignForm/RuleFunction/managerComponent/index":[4810,4810],"./designForm/LogicDesignForm/RuleFunction/managerComponent/index.js":[4810,4810],"./designForm/LogicDesignForm/RuleFunction/numberCal":[3059,3059],"./designForm/LogicDesignForm/RuleFunction/numberCal/":[3059,3059],"./designForm/LogicDesignForm/RuleFunction/numberCal/index":[3059,3059],"./designForm/LogicDesignForm/RuleFunction/numberCal/index.js":[3059,3059],"./designForm/LogicDesignForm/RuleFunction/run_fo":[8919,8919],"./designForm/LogicDesignForm/RuleFunction/run_fo/":[8919,8919],"./designForm/LogicDesignForm/RuleFunction/run_fo/index":[8919,8919],"./designForm/LogicDesignForm/RuleFunction/run_fo/index.js":[8919,8919],"./designForm/LogicDesignForm/RuleFunction/setDataGB":[9473,9473],"./designForm/LogicDesignForm/RuleFunction/setDataGB/":[9473,9473],"./designForm/LogicDesignForm/RuleFunction/setDataGB/index":[9473,9473],"./designForm/LogicDesignForm/RuleFunction/setDataGB/index.js":[9473,9473],"./designForm/LogicDesignForm/RuleFunction/setFocus":[1600,1600],"./designForm/LogicDesignForm/RuleFunction/setFocus/":[1600,1600],"./designForm/LogicDesignForm/RuleFunction/setFocus/index":[1600,1600],"./designForm/LogicDesignForm/RuleFunction/setFocus/index.js":[1600,1600],"./designForm/LogicDesignForm/RuleFunction/setFormCode":[3918,3918],"./designForm/LogicDesignForm/RuleFunction/setFormCode/":[3918,3918],"./designForm/LogicDesignForm/RuleFunction/setFormCode/index":[3918,3918],"./designForm/LogicDesignForm/RuleFunction/setFormCode/index.js":[3918,3918],"./designForm/LogicDesignForm/RuleFunction/setMask":[4950,4950],"./designForm/LogicDesignForm/RuleFunction/setMask/":[4950,4950],"./designForm/LogicDesignForm/RuleFunction/setMask/index":[4950,4950],"./designForm/LogicDesignForm/RuleFunction/setMask/index.js":[4950,4950],"./designForm/LogicDesignForm/RuleFunction/setValidate":[4439,4439],"./designForm/LogicDesignForm/RuleFunction/setValidate/":[4439,4439],"./designForm/LogicDesignForm/RuleFunction/setValidate/index":[4439,4439],"./designForm/LogicDesignForm/RuleFunction/setValidate/index.js":[4439,4439],"./designForm/LogicDesignForm/RuleFunction/setValue":[8586,8586],"./designForm/LogicDesignForm/RuleFunction/setValue/":[8586,8586],"./designForm/LogicDesignForm/RuleFunction/setValue/index":[8586,8586],"./designForm/LogicDesignForm/RuleFunction/setValue/index.js":[8586,8586],"./designForm/LogicDesignForm/RuleFunction/visibility":[2233,2233],"./designForm/LogicDesignForm/RuleFunction/visibility/":[2233,2233],"./designForm/LogicDesignForm/RuleFunction/visibility/index":[2233,2233],"./designForm/LogicDesignForm/RuleFunction/visibility/index.js":[2233,2233],"./designForm/LogicDesignForm/component/baseComponent":[9687,9352,3665,7388,2596,7837,2,8051,9687],"./designForm/LogicDesignForm/component/baseComponent.js":[9687,9352,3665,7388,2596,7837,2,8051,9687],"./designForm/LogicDesignForm/component/cButton/config":[6942,6942],"./designForm/LogicDesignForm/component/cButton/config.js":[6942,6942],"./designForm/LogicDesignForm/component/cButton/essence":[8820,8820],"./designForm/LogicDesignForm/component/cButton/essence.js":[8820,8820],"./designForm/LogicDesignForm/component/cButton/lang":[3488,3488],"./designForm/LogicDesignForm/component/cButton/lang.js":[3488,3488],"./designForm/LogicDesignForm/component/cButton/role":[6589,6589],"./designForm/LogicDesignForm/component/cButton/role.js":[6589,6589],"./designForm/LogicDesignForm/component/cButton/validate":[2191,2191],"./designForm/LogicDesignForm/component/cButton/validate.js":[2191,2191],"./designForm/LogicDesignForm/component/cTableDefault/config":[5164,5164],"./designForm/LogicDesignForm/component/cTableDefault/config.js":[5164,5164],"./designForm/LogicDesignForm/component/cTableDefault/essence":[9745,9745],"./designForm/LogicDesignForm/component/cTableDefault/essence.js":[9745,9745],"./designForm/LogicDesignForm/component/cTableDefault/lang":[3430,3430],"./designForm/LogicDesignForm/component/cTableDefault/lang.js":[3430,3430],"./designForm/LogicDesignForm/component/cTableDefault/role":[5744,5744],"./designForm/LogicDesignForm/component/cTableDefault/role.js":[5744,5744],"./designForm/LogicDesignForm/component/cTableDefault/validate":[6806,6806],"./designForm/LogicDesignForm/component/cTableDefault/validate.js":[6806,6806],"./designForm/LogicDesignForm/component/cTextArea/config":[4624,4624],"./designForm/LogicDesignForm/component/cTextArea/config.js":[4624,4624],"./designForm/LogicDesignForm/component/cTextArea/essence":[8885,8885],"./designForm/LogicDesignForm/component/cTextArea/essence.js":[8885,8885],"./designForm/LogicDesignForm/component/cTextArea/lang":[1590,1590],"./designForm/LogicDesignForm/component/cTextArea/lang.js":[1590,1590],"./designForm/LogicDesignForm/component/cTextArea/role":[3438,3438],"./designForm/LogicDesignForm/component/cTextArea/role.js":[3438,3438],"./designForm/LogicDesignForm/component/cTextArea/validate":[8116,8116],"./designForm/LogicDesignForm/component/cTextArea/validate.js":[8116,8116],"./designForm/LogicDesignForm/component/cTextInput/config":[7388,7388],"./designForm/LogicDesignForm/component/cTextInput/config.js":[7388,7388],"./designForm/LogicDesignForm/component/cTextInput/essence":[1531,1531],"./designForm/LogicDesignForm/component/cTextInput/essence.js":[1531,1531],"./designForm/LogicDesignForm/component/cTextInput/lang":[1824,1824],"./designForm/LogicDesignForm/component/cTextInput/lang.js":[1824,1824],"./designForm/LogicDesignForm/component/cTextInput/role":[8383,8383],"./designForm/LogicDesignForm/component/cTextInput/role.js":[8383,8383],"./designForm/LogicDesignForm/component/cTextInput/validate":[7208,7208],"./designForm/LogicDesignForm/component/cTextInput/validate.js":[7208,7208],"./designForm/LogicDesignForm/component/componentDefault":[4932,4932],"./designForm/LogicDesignForm/component/componentDefault.js":[4932,4932],"./designForm/LogicDesignForm/component/component_config":[9122,9352,3665,7388,2596,7837,2,8051,9687,9122],"./designForm/LogicDesignForm/component/component_config.js":[9122,9352,3665,7388,2596,7837,2,8051,9687,9122],"./designForm/LogicDesignForm/component/jAuthentic/config":[3483,3483],"./designForm/LogicDesignForm/component/jAuthentic/config.js":[3483,3483],"./designForm/LogicDesignForm/component/jAuthentic/essence":[9204,9204],"./designForm/LogicDesignForm/component/jAuthentic/essence.js":[9204,9204],"./designForm/LogicDesignForm/component/jAuthentic/lang":[867,867],"./designForm/LogicDesignForm/component/jAuthentic/lang.js":[867,867],"./designForm/LogicDesignForm/component/jAuthentic/role":[7701,7701],"./designForm/LogicDesignForm/component/jAuthentic/role.js":[7701,7701],"./designForm/LogicDesignForm/component/jAuthentic/validate":[215,215],"./designForm/LogicDesignForm/component/jAuthentic/validate.js":[215,215],"./designForm/LogicDesignForm/component/jButtonSignature/config":[5251,5251],"./designForm/LogicDesignForm/component/jButtonSignature/config.js":[5251,5251],"./designForm/LogicDesignForm/component/jButtonSignature/essence":[2801,2801],"./designForm/LogicDesignForm/component/jButtonSignature/essence.js":[2801,2801],"./designForm/LogicDesignForm/component/jButtonSignature/lang":[7733,7733],"./designForm/LogicDesignForm/component/jButtonSignature/lang.js":[7733,7733],"./designForm/LogicDesignForm/component/jButtonSignature/role":[6531,6531],"./designForm/LogicDesignForm/component/jButtonSignature/role.js":[6531,6531],"./designForm/LogicDesignForm/component/jButtonSignature/validate":[5175,5175],"./designForm/LogicDesignForm/component/jButtonSignature/validate.js":[5175,5175],"./designForm/LogicDesignForm/component/jChart/config":[5488,5488],"./designForm/LogicDesignForm/component/jChart/config.js":[5488,5488],"./designForm/LogicDesignForm/component/jChart/essence":[7882,7882],"./designForm/LogicDesignForm/component/jChart/essence.js":[7882,7882],"./designForm/LogicDesignForm/component/jChart/lang":[738,1343],"./designForm/LogicDesignForm/component/jChart/lang.js":[738,1343],"./designForm/LogicDesignForm/component/jChart/role":[1053,1053],"./designForm/LogicDesignForm/component/jChart/role.js":[1053,1053],"./designForm/LogicDesignForm/component/jChart/validate":[5751,5751],"./designForm/LogicDesignForm/component/jChart/validate.js":[5751,5751],"./designForm/LogicDesignForm/component/jCheckbox/config":[8054,8054],"./designForm/LogicDesignForm/component/jCheckbox/config.js":[8054,8054],"./designForm/LogicDesignForm/component/jCheckbox/essence":[7247,7247],"./designForm/LogicDesignForm/component/jCheckbox/essence.js":[7247,7247],"./designForm/LogicDesignForm/component/jCheckbox/lang":[7039,7039],"./designForm/LogicDesignForm/component/jCheckbox/lang.js":[7039,7039],"./designForm/LogicDesignForm/component/jCheckbox/role":[4735,4735],"./designForm/LogicDesignForm/component/jCheckbox/role.js":[4735,4735],"./designForm/LogicDesignForm/component/jCheckbox/validate":[8165,8165],"./designForm/LogicDesignForm/component/jCheckbox/validate.js":[8165,8165],"./designForm/LogicDesignForm/component/jCurrency/config":[3295,3295],"./designForm/LogicDesignForm/component/jCurrency/config.js":[3295,3295],"./designForm/LogicDesignForm/component/jCurrency/essence":[9510,9510],"./designForm/LogicDesignForm/component/jCurrency/essence.js":[9510,9510],"./designForm/LogicDesignForm/component/jCurrency/lang":[6815,6815],"./designForm/LogicDesignForm/component/jCurrency/lang.js":[6815,6815],"./designForm/LogicDesignForm/component/jCurrency/role":[649,649],"./designForm/LogicDesignForm/component/jCurrency/role.js":[649,649],"./designForm/LogicDesignForm/component/jCurrency/validate":[4970,4970],"./designForm/LogicDesignForm/component/jCurrency/validate.js":[4970,4970],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/config":[8003,8003],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/config.js":[8003,8003],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/essence":[2687,2687],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/essence.js":[2687,2687],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/lang":[4912,4912],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/lang.js":[4912,4912],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/role":[8528,8528],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/role.js":[8528,8528],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/validate":[3446,3446],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/validate.js":[3446,3446],"./designForm/LogicDesignForm/component/jDynamicFormChild/config":[197,197],"./designForm/LogicDesignForm/component/jDynamicFormChild/config.js":[197,197],"./designForm/LogicDesignForm/component/jDynamicFormChild/essence":[2174,2174],"./designForm/LogicDesignForm/component/jDynamicFormChild/essence.js":[2174,2174],"./designForm/LogicDesignForm/component/jDynamicFormChild/lang":[8106,8106],"./designForm/LogicDesignForm/component/jDynamicFormChild/lang.js":[8106,8106],"./designForm/LogicDesignForm/component/jDynamicFormChild/role":[3036,3036],"./designForm/LogicDesignForm/component/jDynamicFormChild/role.js":[3036,3036],"./designForm/LogicDesignForm/component/jDynamicFormChild/validate":[6857,6857],"./designForm/LogicDesignForm/component/jDynamicFormChild/validate.js":[6857,6857],"./designForm/LogicDesignForm/component/jFullCalendar/config":[2483,2483],"./designForm/LogicDesignForm/component/jFullCalendar/config.js":[2483,2483],"./designForm/LogicDesignForm/component/jFullCalendar/essence":[341,341],"./designForm/LogicDesignForm/component/jFullCalendar/essence.js":[341,341],"./designForm/LogicDesignForm/component/jFullCalendar/lang":[8482,8482],"./designForm/LogicDesignForm/component/jFullCalendar/lang.js":[8482,8482],"./designForm/LogicDesignForm/component/jFullCalendar/role":[6322,534],"./designForm/LogicDesignForm/component/jFullCalendar/role.js":[6322,534],"./designForm/LogicDesignForm/component/jFullCalendar/validate":[6713,6713],"./designForm/LogicDesignForm/component/jFullCalendar/validate.js":[6713,6713],"./designForm/LogicDesignForm/component/jIframeReport/config":[3909,3909],"./designForm/LogicDesignForm/component/jIframeReport/config.js":[3909,3909],"./designForm/LogicDesignForm/component/jIframeReport/essence":[6013,6013],"./designForm/LogicDesignForm/component/jIframeReport/essence.js":[6013,6013],"./designForm/LogicDesignForm/component/jIframeReport/lang":[1233,1233],"./designForm/LogicDesignForm/component/jIframeReport/lang.js":[1233,1233],"./designForm/LogicDesignForm/component/jIframeReport/role":[1351,1351],"./designForm/LogicDesignForm/component/jIframeReport/role.js":[1351,1351],"./designForm/LogicDesignForm/component/jIframeReport/validate":[820,820],"./designForm/LogicDesignForm/component/jIframeReport/validate.js":[820,820],"./designForm/LogicDesignForm/component/jImage/config":[5672,5672],"./designForm/LogicDesignForm/component/jImage/config.js":[5672,5672],"./designForm/LogicDesignForm/component/jImage/essence":[7930,7930],"./designForm/LogicDesignForm/component/jImage/essence.js":[7930,7930],"./designForm/LogicDesignForm/component/jImage/lang":[9896,9896],"./designForm/LogicDesignForm/component/jImage/lang.js":[9896,9896],"./designForm/LogicDesignForm/component/jImage/role":[9412,9412],"./designForm/LogicDesignForm/component/jImage/role.js":[9412,9412],"./designForm/LogicDesignForm/component/jImage/validate":[4577,4577],"./designForm/LogicDesignForm/component/jImage/validate.js":[4577,4577],"./designForm/LogicDesignForm/component/jLabel/config":[9048,9048],"./designForm/LogicDesignForm/component/jLabel/config.js":[9048,9048],"./designForm/LogicDesignForm/component/jLabel/essence":[5662,5662],"./designForm/LogicDesignForm/component/jLabel/essence.js":[5662,5662],"./designForm/LogicDesignForm/component/jLabel/lang":[5215,5215],"./designForm/LogicDesignForm/component/jLabel/lang.js":[5215,5215],"./designForm/LogicDesignForm/component/jLabel/role":[1245,1245],"./designForm/LogicDesignForm/component/jLabel/role.js":[1245,1245],"./designForm/LogicDesignForm/component/jLabel/validate":[9858,9858],"./designForm/LogicDesignForm/component/jLabel/validate.js":[9858,9858],"./designForm/LogicDesignForm/component/jListActivity/config":[3536,3536],"./designForm/LogicDesignForm/component/jListActivity/config.js":[3536,3536],"./designForm/LogicDesignForm/component/jListActivity/essence":[2564,2564],"./designForm/LogicDesignForm/component/jListActivity/essence.js":[2564,2564],"./designForm/LogicDesignForm/component/jListActivity/lang":[8568,8568],"./designForm/LogicDesignForm/component/jListActivity/lang.js":[8568,8568],"./designForm/LogicDesignForm/component/jListActivity/role":[447,447],"./designForm/LogicDesignForm/component/jListActivity/role.js":[447,447],"./designForm/LogicDesignForm/component/jListActivity/validate":[22,22],"./designForm/LogicDesignForm/component/jListActivity/validate.js":[22,22],"./designForm/LogicDesignForm/component/jListCheckBox/config":[2251,2251],"./designForm/LogicDesignForm/component/jListCheckBox/config.js":[2251,2251],"./designForm/LogicDesignForm/component/jListCheckBox/essence":[8219,8219],"./designForm/LogicDesignForm/component/jListCheckBox/essence.js":[8219,8219],"./designForm/LogicDesignForm/component/jListCheckBox/lang":[1049,1049],"./designForm/LogicDesignForm/component/jListCheckBox/lang.js":[1049,1049],"./designForm/LogicDesignForm/component/jListCheckBox/role":[1034,1034],"./designForm/LogicDesignForm/component/jListCheckBox/role.js":[1034,1034],"./designForm/LogicDesignForm/component/jListCheckBox/validate":[244,244],"./designForm/LogicDesignForm/component/jListCheckBox/validate.js":[244,244],"./designForm/LogicDesignForm/component/jMaskInput/config":[9352,9352],"./designForm/LogicDesignForm/component/jMaskInput/config.js":[9352,9352],"./designForm/LogicDesignForm/component/jMaskInput/essence":[1343,4175],"./designForm/LogicDesignForm/component/jMaskInput/essence.js":[1343,4175],"./designForm/LogicDesignForm/component/jMaskInput/lang":[8572,8572],"./designForm/LogicDesignForm/component/jMaskInput/lang.js":[8572,8572],"./designForm/LogicDesignForm/component/jMaskInput/role":[9579,9579],"./designForm/LogicDesignForm/component/jMaskInput/role.js":[9579,9579],"./designForm/LogicDesignForm/component/jMaskInput/validate":[5866,5866],"./designForm/LogicDesignForm/component/jMaskInput/validate.js":[5866,5866],"./designForm/LogicDesignForm/component/jMaskInputVer2/config":[3665,3665],"./designForm/LogicDesignForm/component/jMaskInputVer2/config.js":[3665,3665],"./designForm/LogicDesignForm/component/jMaskInputVer2/essence":[2837,2837],"./designForm/LogicDesignForm/component/jMaskInputVer2/essence.js":[2837,2837],"./designForm/LogicDesignForm/component/jMaskInputVer2/lang":[2159,2159],"./designForm/LogicDesignForm/component/jMaskInputVer2/lang.js":[2159,2159],"./designForm/LogicDesignForm/component/jMaskInputVer2/role":[7295,7295],"./designForm/LogicDesignForm/component/jMaskInputVer2/role.js":[7295,7295],"./designForm/LogicDesignForm/component/jMaskInputVer2/validate":[6681,6681],"./designForm/LogicDesignForm/component/jMaskInputVer2/validate.js":[6681,6681],"./designForm/LogicDesignForm/component/jMutiValue/config":[3457,3457],"./designForm/LogicDesignForm/component/jMutiValue/config.js":[3457,3457],"./designForm/LogicDesignForm/component/jMutiValue/essence":[2222,2222],"./designForm/LogicDesignForm/component/jMutiValue/essence.js":[2222,2222],"./designForm/LogicDesignForm/component/jMutiValue/lang":[5588,5588],"./designForm/LogicDesignForm/component/jMutiValue/lang.js":[5588,5588],"./designForm/LogicDesignForm/component/jMutiValue/role":[8645,8645],"./designForm/LogicDesignForm/component/jMutiValue/role.js":[8645,8645],"./designForm/LogicDesignForm/component/jMutiValue/validate":[243,243],"./designForm/LogicDesignForm/component/jMutiValue/validate.js":[243,243],"./designForm/LogicDesignForm/component/jPrintVoucher/config":[7915,7915],"./designForm/LogicDesignForm/component/jPrintVoucher/config.js":[7915,7915],"./designForm/LogicDesignForm/component/jPrintVoucher/essence":[7779,7779],"./designForm/LogicDesignForm/component/jPrintVoucher/essence.js":[7779,7779],"./designForm/LogicDesignForm/component/jPrintVoucher/lang":[7059,7059],"./designForm/LogicDesignForm/component/jPrintVoucher/lang.js":[7059,7059],"./designForm/LogicDesignForm/component/jPrintVoucher/role":[1931,1931],"./designForm/LogicDesignForm/component/jPrintVoucher/role.js":[1931,1931],"./designForm/LogicDesignForm/component/jPrintVoucher/validate":[7196,7196],"./designForm/LogicDesignForm/component/jPrintVoucher/validate.js":[7196,7196],"./designForm/LogicDesignForm/component/jProgressBar/config":[6339,6339],"./designForm/LogicDesignForm/component/jProgressBar/config.js":[6339,6339],"./designForm/LogicDesignForm/component/jProgressBar/essence":[2026,6825],"./designForm/LogicDesignForm/component/jProgressBar/essence.js":[2026,6825],"./designForm/LogicDesignForm/component/jProgressBar/lang":[7551,7794],"./designForm/LogicDesignForm/component/jProgressBar/lang.js":[7551,7794],"./designForm/LogicDesignForm/component/jProgressBar/role":[9515,9515],"./designForm/LogicDesignForm/component/jProgressBar/role.js":[9515,9515],"./designForm/LogicDesignForm/component/jProgressBar/validate":[1018,1018],"./designForm/LogicDesignForm/component/jProgressBar/validate.js":[1018,1018],"./designForm/LogicDesignForm/component/jRadioBox/config":[5699,5699],"./designForm/LogicDesignForm/component/jRadioBox/config.js":[5699,5699],"./designForm/LogicDesignForm/component/jRadioBox/essence":[3212,3212],"./designForm/LogicDesignForm/component/jRadioBox/essence.js":[3212,3212],"./designForm/LogicDesignForm/component/jRadioBox/lang":[7526,7526],"./designForm/LogicDesignForm/component/jRadioBox/lang.js":[7526,7526],"./designForm/LogicDesignForm/component/jRadioBox/role":[154,154],"./designForm/LogicDesignForm/component/jRadioBox/role.js":[154,154],"./designForm/LogicDesignForm/component/jRadioBox/validate":[2690,2690],"./designForm/LogicDesignForm/component/jRadioBox/validate.js":[2690,2690],"./designForm/LogicDesignForm/component/jReport/config":[3744,3744],"./designForm/LogicDesignForm/component/jReport/config.js":[3744,3744],"./designForm/LogicDesignForm/component/jReport/essence":[1313,1313],"./designForm/LogicDesignForm/component/jReport/essence.js":[1313,1313],"./designForm/LogicDesignForm/component/jReport/lang":[7750,7750],"./designForm/LogicDesignForm/component/jReport/lang.js":[7750,7750],"./designForm/LogicDesignForm/component/jReport/role":[9304,9304],"./designForm/LogicDesignForm/component/jReport/role.js":[9304,9304],"./designForm/LogicDesignForm/component/jReport/validate":[8801,8801],"./designForm/LogicDesignForm/component/jReport/validate.js":[8801,8801],"./designForm/LogicDesignForm/component/jRichTextEditor/config":[6702,6702],"./designForm/LogicDesignForm/component/jRichTextEditor/config.js":[6702,6702],"./designForm/LogicDesignForm/component/jRichTextEditor/essence":[5172,5172],"./designForm/LogicDesignForm/component/jRichTextEditor/essence.js":[5172,5172],"./designForm/LogicDesignForm/component/jRichTextEditor/lang":[3860,3860],"./designForm/LogicDesignForm/component/jRichTextEditor/lang.js":[3860,3860],"./designForm/LogicDesignForm/component/jRichTextEditor/role":[9971,9971],"./designForm/LogicDesignForm/component/jRichTextEditor/role.js":[9971,9971],"./designForm/LogicDesignForm/component/jRichTextEditor/validate":[70,70],"./designForm/LogicDesignForm/component/jRichTextEditor/validate.js":[70,70],"./designForm/LogicDesignForm/component/jSameMain/config":[4607,4607],"./designForm/LogicDesignForm/component/jSameMain/config.js":[4607,4607],"./designForm/LogicDesignForm/component/jSameMain/essence":[4377,4377],"./designForm/LogicDesignForm/component/jSameMain/essence.js":[4377,4377],"./designForm/LogicDesignForm/component/jSameMain/lang":[3988,3988],"./designForm/LogicDesignForm/component/jSameMain/lang.js":[3988,3988],"./designForm/LogicDesignForm/component/jSameMain/role":[9800,9800],"./designForm/LogicDesignForm/component/jSameMain/role.js":[9800,9800],"./designForm/LogicDesignForm/component/jSameMain/validate":[644,644],"./designForm/LogicDesignForm/component/jSameMain/validate.js":[644,644],"./designForm/LogicDesignForm/component/jSelect/config":[7837,7837],"./designForm/LogicDesignForm/component/jSelect/config.js":[7837,7837],"./designForm/LogicDesignForm/component/jSelect/essence":[5571,5571],"./designForm/LogicDesignForm/component/jSelect/essence.js":[5571,5571],"./designForm/LogicDesignForm/component/jSelect/lang":[6095,6095],"./designForm/LogicDesignForm/component/jSelect/lang.js":[6095,6095],"./designForm/LogicDesignForm/component/jSelect/role":[2594,2594],"./designForm/LogicDesignForm/component/jSelect/role.js":[2594,2594],"./designForm/LogicDesignForm/component/jSelect/validate":[7012,7012],"./designForm/LogicDesignForm/component/jSelect/validate.js":[7012,7012],"./designForm/LogicDesignForm/component/jSelectMulti/config":[2,2],"./designForm/LogicDesignForm/component/jSelectMulti/config.js":[2,2],"./designForm/LogicDesignForm/component/jSelectMulti/essence":[4643,4643],"./designForm/LogicDesignForm/component/jSelectMulti/essence.js":[4643,4643],"./designForm/LogicDesignForm/component/jSelectMulti/lang":[4862,4862],"./designForm/LogicDesignForm/component/jSelectMulti/lang.js":[4862,4862],"./designForm/LogicDesignForm/component/jSelectMulti/role":[376,376],"./designForm/LogicDesignForm/component/jSelectMulti/role.js":[376,376],"./designForm/LogicDesignForm/component/jSelectMulti/validate":[1309,1309],"./designForm/LogicDesignForm/component/jSelectMulti/validate.js":[1309,1309],"./designForm/LogicDesignForm/component/jTabList/config":[2923,2923],"./designForm/LogicDesignForm/component/jTabList/config.js":[2923,2923],"./designForm/LogicDesignForm/component/jTabList/essence":[7484,7484],"./designForm/LogicDesignForm/component/jTabList/essence.js":[7484,7484],"./designForm/LogicDesignForm/component/jTabList/lang":[9230,9230],"./designForm/LogicDesignForm/component/jTabList/lang.js":[9230,9230],"./designForm/LogicDesignForm/component/jTabList/role":[1604,1604],"./designForm/LogicDesignForm/component/jTabList/role.js":[1604,1604],"./designForm/LogicDesignForm/component/jTabList/validate":[1798,1798],"./designForm/LogicDesignForm/component/jTabList/validate.js":[1798,1798],"./designForm/LogicDesignForm/component/jTableDynamic/config":[3422,3422],"./designForm/LogicDesignForm/component/jTableDynamic/config.js":[3422,3422],"./designForm/LogicDesignForm/component/jTableDynamic/essence":[6729,6729],"./designForm/LogicDesignForm/component/jTableDynamic/essence.js":[6729,6729],"./designForm/LogicDesignForm/component/jTableDynamic/lang":[3238,3238],"./designForm/LogicDesignForm/component/jTableDynamic/lang.js":[3238,3238],"./designForm/LogicDesignForm/component/jTableDynamic/role":[2100,2100],"./designForm/LogicDesignForm/component/jTableDynamic/role.js":[2100,2100],"./designForm/LogicDesignForm/component/jTableDynamic/validate":[2385,2385],"./designForm/LogicDesignForm/component/jTableDynamic/validate.js":[2385,2385],"./designForm/LogicDesignForm/component/jTableDynamicSearch/config":[8445,8445],"./designForm/LogicDesignForm/component/jTableDynamicSearch/config.js":[8445,8445],"./designForm/LogicDesignForm/component/jTableDynamicSearch/essence":[7812,7812],"./designForm/LogicDesignForm/component/jTableDynamicSearch/essence.js":[7812,7812],"./designForm/LogicDesignForm/component/jTableDynamicSearch/lang":[9063,9063],"./designForm/LogicDesignForm/component/jTableDynamicSearch/lang.js":[9063,9063],"./designForm/LogicDesignForm/component/jTableDynamicSearch/role":[4546,4546],"./designForm/LogicDesignForm/component/jTableDynamicSearch/role.js":[4546,4546],"./designForm/LogicDesignForm/component/jTableDynamicSearch/validate":[6825,4608],"./designForm/LogicDesignForm/component/jTableDynamicSearch/validate.js":[6825,4608],"./designForm/LogicDesignForm/component/jTableForm/config":[5105,5105],"./designForm/LogicDesignForm/component/jTableForm/config.js":[5105,5105],"./designForm/LogicDesignForm/component/jTableForm/essence":[3960,3960],"./designForm/LogicDesignForm/component/jTableForm/essence.js":[3960,3960],"./designForm/LogicDesignForm/component/jTableForm/lang":[7230,7230],"./designForm/LogicDesignForm/component/jTableForm/lang.js":[7230,7230],"./designForm/LogicDesignForm/component/jTableForm/role":[618,618],"./designForm/LogicDesignForm/component/jTableForm/role.js":[618,618],"./designForm/LogicDesignForm/component/jTableForm/validate":[8602,8602],"./designForm/LogicDesignForm/component/jTableForm/validate.js":[8602,8602],"./designForm/LogicDesignForm/component/jTableSearch/config":[2596,2596],"./designForm/LogicDesignForm/component/jTableSearch/config.js":[2596,2596],"./designForm/LogicDesignForm/component/jTableSearch/essence":[1884,1884],"./designForm/LogicDesignForm/component/jTableSearch/essence.js":[1884,1884],"./designForm/LogicDesignForm/component/jTableSearch/lang":[9987,9987],"./designForm/LogicDesignForm/component/jTableSearch/lang.js":[9987,9987],"./designForm/LogicDesignForm/component/jTableSearch/role":[4820,4820],"./designForm/LogicDesignForm/component/jTableSearch/role.js":[4820,4820],"./designForm/LogicDesignForm/component/jTableSearch/validate":[881,881],"./designForm/LogicDesignForm/component/jTableSearch/validate.js":[881,881],"./designForm/LogicDesignForm/component/jUploadFile/config":[8051,8051,7474],"./designForm/LogicDesignForm/component/jUploadFile/config.js":[8051,8051,7474],"./designForm/LogicDesignForm/component/jUploadFile/essence":[7797,7797],"./designForm/LogicDesignForm/component/jUploadFile/essence.js":[7797,7797],"./designForm/LogicDesignForm/component/jUploadFile/lang":[6115,6115],"./designForm/LogicDesignForm/component/jUploadFile/lang.js":[6115,6115],"./designForm/LogicDesignForm/component/jUploadFile/role":[8486,8486],"./designForm/LogicDesignForm/component/jUploadFile/role.js":[8486,8486],"./designForm/LogicDesignForm/component/jUploadFile/validate":[4001,4001],"./designForm/LogicDesignForm/component/jUploadFile/validate.js":[4001,4001],"./designForm/LogicDesignForm/configLayout":[4804,4804],"./designForm/LogicDesignForm/configLayout.js":[4804,4804],"./designForm/LogicDesignForm/configView":[2582,2582],"./designForm/LogicDesignForm/configView.js":[2582,2582],"./designForm/LogicDesignForm/designTxFo":[8308,2308],"./designForm/LogicDesignForm/designTxFo.js":[8308,2308],"./designForm/LogicDesignForm/form_begin":[194,9352,3665,7388,2596,7837,2,8051,9687,9189,1950,7679,194],"./designForm/LogicDesignForm/form_begin.js":[194,9352,3665,7388,2596,7837,2,8051,9687,9189,1950,7679,194],"./designForm/LogicDesignForm/form_design":[7679,9352,3665,7388,2596,7837,2,8051,9687,9189,1950,7679],"./designForm/LogicDesignForm/form_design.js":[7679,9352,3665,7388,2596,7837,2,8051,9687,9189,1950,7679],"./designForm/LogicDesignForm/form_preview":[5684,5684],"./designForm/LogicDesignForm/form_preview.js":[5684,5684],"./designForm/desktop_designForm":[9233,9352,3665,7388,2596,7837,2,8051,9687,9189,1950,7679,9233],"./designForm/desktop_designForm.js":[9233,9352,3665,7388,2596,7837,2,8051,9687,9189,1950,7679,9233],"./jWebUITemplateControl":[8382],"./jWebUITemplateControl.js":[8382],"./malibu/desktop_cms":[3085,9038,3085],"./malibu/desktop_cms.js":[3085,9038,3085],"./malibu/desktop_hub":[9283,9038,9283],"./malibu/desktop_hub.js":[9283,9038,9283],"./malibu/desktop_ncbs":[9490,9038,9490],"./malibu/desktop_ncbs.js":[9490,9038,9490],"./malibu/desktop_ncbsCbs":[1479,9038,2026],"./malibu/desktop_ncbsCbs.js":[1479,9038,2026],"./malibu/desktop_ncbsLicense":[7048,9038,7048],"./malibu/desktop_ncbsLicense.js":[7048,9038,7048],"./malibu/desktop_o9":[6112,9038,6112],"./malibu/desktop_o9.js":[6112,9038,6112],"./malibu/desktop_shwebank":[8623,9038,8623],"./malibu/desktop_shwebank.js":[8623,9038,8623],"./malibu/desktop_sys":[2431,9038,2431],"./malibu/desktop_sys.js":[2431,9038,2431],"./malibu/desktop_timekeeping":[1991,9038,1991],"./malibu/desktop_timekeeping.js":[1991,9038,1991],"./malibu1/desktop_o9":[9036,9038,9036],"./malibu1/desktop_o9.js":[9036,9038,9036],"./malibu2/desktop_o9":[3079,9038,3079],"./malibu2/desktop_o9.js":[3079,9038,3079],"./perseus/desktop_ncbsCbs":[1791,9038,7551],"./perseus/desktop_ncbsCbs.js":[1791,9038,7551],"./perseus/desktop_o9":[2038,9038,2038],"./perseus/desktop_o9.js":[2038,9038,2038]};function a(t){if(!i.o(o,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=o[t],a=e[0];return Promise.all(e.slice(1).map(i.e)).then((()=>i(a)))}a.keys=()=>Object.keys(o),a.id=4397,t.exports=a},3063:(t,e,i)=>{"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,e||"default");if("object"!==o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}function s(t,e,i){return(e=a(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}i.d(e,{Z:()=>r})},4419:(t,e,i)=>{"use strict";function o(t,e,i){return function(t,e,i){const o=e<0?t.length+e:e;if(o>=0&&o<t.length){const o=i<0?t.length+i:i,[a]=t.splice(e,1);t.splice(o,0,a)}}(t=[...t],e,i),t}i.d(e,{q:()=>o})}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](i,i.exports,__webpack_require__),i.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.f={},__webpack_require__.e=t=>Promise.all(Object.keys(__webpack_require__.f).reduce(((e,i)=>(__webpack_require__.f[i](t,e),e)),[])),__webpack_require__.u=t=>"static/js/"+t+"."+{2:"f326255e",22:"fb6a4489",70:"84f6c622",154:"cb283918",194:"c726a743",197:"42c8f90a",215:"ca4b6f61",243:"19b48686",244:"802a83bc",341:"b54c2c26",376:"c4b1fd40",447:"58a9362a",534:"c922c12d",618:"828d4ff9",644:"f705c979",649:"9c16c101",820:"d78e5dce",867:"464d81e5",881:"4677b7cc",1018:"83ccdf8a",1034:"1a9eef87",1049:"05eaae9c",1053:"e1f287ff",1233:"e6d838de",1245:"426b4bc4",1309:"d27a5fa1",1313:"32b4d98f",1343:"3eeb9c86",1351:"d3054ded",1427:"310c26ea",1531:"ce7c4b35",1590:"7c320832",1600:"ef0fefb9",1604:"47e3cc0e",1798:"7f775104",1824:"daa59dd7",1884:"01d4244e",1931:"a4786a5d",1950:"04db0ed6",1991:"45dc6e30",2026:"98b77f70",2038:"41116d65",2100:"75159347",2159:"3721d400",2174:"efed59dd",2191:"1ad92768",2222:"ece35036",2233:"a114c59d",2251:"20ee783a",2308:"50adde06",2385:"e5959dd0",2431:"3c9b0e2c",2483:"f8347ede",2564:"593f03c0",2582:"999d3e23",2594:"c8f38325",2596:"96554223",2687:"44e08ef7",2690:"5dcb790b",2754:"b8a60962",2801:"00fb0bd6",2837:"db543af8",2923:"ff862b67",3036:"d108eaee",3059:"07b9de86",3079:"3b8efa8b",3085:"dacd55af",3212:"3fa9650f",3238:"a08e419d",3295:"98457404",3422:"e26fea39",3430:"733447f6",3438:"b13f1573",3446:"cfb6a1a9",3457:"93db8271",3483:"15fa92fb",3488:"dfdba0ed",3536:"d0b20423",3665:"3b885147",3684:"8cf6d86e",3744:"ef285ff7",3849:"974d711a",3860:"6bdd414b",3909:"830f7d51",3918:"f2e2d87e",3926:"8ffdca72",3939:"fac5ef47",3960:"507735fa",3988:"1cc33b86",4001:"f3285506",4159:"4218a871",4175:"2f7ab5d1",4377:"fbefef8f",4439:"5c481a51",4546:"57fbee2d",4577:"0aaf9832",4607:"d6d8454e",4608:"b17bf3f2",4624:"1ac840ca",4643:"e55e908f",4735:"bca95b41",4804:"18a71dea",4810:"62781715",4820:"05200a7f",4862:"109583f5",4912:"29cb9728",4932:"5baec2fa",4950:"a58f0fac",4960:"4b51ee72",4970:"7f670d42",5105:"fe171c4b",5164:"54fb4b21",5172:"73617093",5175:"f93d3f88",5215:"d9092e3a",5251:"b0ded3dc",5488:"2749affc",5571:"ba7101f7",5588:"68b39b72",5662:"aa681a29",5672:"a4ab5c2c",5684:"917225fc",5699:"16c561ef",5744:"b967dedf",5751:"dc7da8b9",5866:"fa341aac",6013:"97e0e90e",6095:"e752f5bd",6112:"dc604396",6115:"7fe6e1b2",6339:"216d61ed",6531:"07226c2b",6589:"52d5a109",6681:"235e56b5",6702:"9207f9d5",6713:"51905614",6729:"3452bdba",6806:"095e0a6a",6815:"7c9438f2",6825:"f8d38df7",6857:"6354d440",6942:"cab23796",7012:"8d484ae7",7039:"310cbd3d",7048:"c1a759bb",7059:"dfbe61b7",7117:"252bb929",7196:"b96c82ba",7208:"0c5af340",7230:"16b48242",7247:"3d1d4ab1",7295:"7b8a72cc",7388:"99c72797",7474:"c7195a1c",7484:"8013e891",7526:"dff6e3a8",7551:"fc43f806",7679:"6601ff43",7701:"7167047d",7733:"44059f1e",7750:"53f02fb3",7779:"989b66ab",7794:"0ff320df",7797:"a4e89846",7812:"a0b54826",7837:"a483ccaf",7882:"fbe844ad",7915:"57ad8910",7930:"a9536f1c",8003:"46aa2c18",8051:"e35f9a6f",8054:"7117b66f",8091:"3739668d",8106:"201200b2",8116:"c14c3b70",8165:"36135e07",8219:"0bec8b5b",8308:"bb668a37",8383:"e87aceb9",8445:"d7509897",8482:"866691a7",8486:"fd30d761",8528:"1ca2aac2",8568:"1836c19e",8572:"e0d8799b",8586:"d3903f55",8602:"0b6a7dac",8623:"cb7d6d1e",8645:"1b04aba3",8666:"aead6bc9",8685:"ccf59d4d",8801:"9aa7b4ba",8820:"6d6e2b41",8885:"23666033",8919:"58553616",8931:"5f91b814",9036:"dce10f7e",9038:"e45f65e4",9048:"fe9d59e9",9063:"1e7f64a2",9122:"ffe5f7b0",9189:"5aebbf2a",9204:"9e2cb574",9230:"8775100f",9233:"e1525f9d",9283:"aa2d74eb",9304:"3b55c089",9352:"ff04c978",9412:"59806b77",9473:"21d00e95",9490:"0da74b70",9510:"371da971",9515:"490cba85",9579:"18c97e4a",9687:"2fba2a70",9745:"0482e5f7",9800:"0193d85a",9858:"9e2ddeb5",9896:"50e99e7e",9971:"67aa2e42",9987:"a6fc9bcc"}[t]+".chunk.js",__webpack_require__.miniCssF=t=>{},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="stable-app:";__webpack_require__.l=(i,o,a,s)=>{if(t[i])t[i].push(o);else{var n,r;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==e+a){n=d;break}}n||(r=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.setAttribute("data-webpack",e+a),n.src=i),t[i]=[o];var h=(e,o)=>{n.onerror=n.onload=null,clearTimeout(u);var a=t[i];if(delete t[i],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((t=>t(o))),e)return e(o)},u=setTimeout(h.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=h.bind(null,n.onerror),n.onload=h.bind(null,n.onload),r&&document.head.appendChild(n)}}})(),__webpack_require__.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.p="/app/",(()=>{var t={179:0};__webpack_require__.f.j=(e,i)=>{var o=__webpack_require__.o(t,e)?t[e]:void 0;if(0!==o)if(o)i.push(o[2]);else{var a=new Promise(((i,a)=>o=t[e]=[i,a]));i.push(o[2]=a);var s=__webpack_require__.p+__webpack_require__.u(e),n=new Error;__webpack_require__.l(s,(i=>{if(__webpack_require__.o(t,e)&&(0!==(o=t[e])&&(t[e]=void 0),o)){var a=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;n.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",n.name="ChunkLoadError",n.type=a,n.request=s,o[1](n)}}),"chunk-"+e,e)}};var e=(e,i)=>{var o,a,s=i[0],n=i[1],r=i[2],l=0;if(s.some((e=>0!==t[e]))){for(o in n)__webpack_require__.o(n,o)&&(__webpack_require__.m[o]=n[o]);if(r)r(__webpack_require__)}for(e&&e(i);l<s.length;l++)a=s[l],__webpack_require__.o(t,a)&&t[a]&&t[a][0](),t[a]=0},i=self.webpackChunkstable_app=self.webpackChunkstable_app||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var __webpack_exports__={};(()=>{"use strict";var t=__webpack_require__(5842),e=__webpack_require__(7313),i=__webpack_require__(1168),o=__webpack_require__(3063),a={start:{DOM_Html:null,current:0,max_pack:15},header:null};var s=__webpack_require__(6417);class n extends e.Component{constructor(t){let e;super(t),this.abstract_changeDevice=t=>{this.setState({device:t})},this.callBack=()=>{this.setState({class:"fade-in"},(()=>{setTimeout((()=>{this.setState({visible:!1},this.stopAllAnination())}),100)}))},this.flagUnMount=!1,e=void 0===this.props.time_out?1e4:this.props.time_out,this.tree_item="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDggMTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMy4xMTI3OSA3LjY0NDg1QzMuMTEyNzkgNy42NDQ4NSAzLjMwMjA4IDMuNjg1NzQgNy4xODI2MiA0LjE0NTkyWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPHBhdGggZD0iTTIuMDE2NCAzLjg3NzI0QzMuMDg5MDMgMy44NzcyNCAzLjk1ODU4IDMuMDA5MjkgMy45NTg1OCAxLjkzODYyQzMuOTU4NTggMC44Njc5NTQgMy4wODkwMyAwIDIuMDE2NCAwQzAuOTQzNzU5IDAgMC4wNzQyMTg4IDAuODY3OTU0IDAuMDc0MjE4OCAxLjkzODYyQzAuMDc0MjE4OCAzLjAwOTI5IDAuOTQzNzU5IDMuODc3MjQgMi4wMTY0IDMuODc3MjRaIiBmaWxsPSIjNTU1N0U0Ii8+DQo8cGF0aCBkPSJNMi4yNDg0MiA1LjIwMzEySDEuNzAwMlY5LjAzMzcxSDIuMjQ4NDJWNS4yMDMxMloiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",this.state={device:this.props.device,skin_config:"",time_out:e,percent_before:0,percent_after:this.props.dataFull.percent,visible:!0,class:""}}stopAllAnination(){this.flagUnMount=!0,void 0!==this.ob_animationEye&&this.ob_animationEye.pause(),void 0!==this.ob_animationPercent_1&&this.ob_animationPercent_1.pause(),void 0!==this.ob_animationPercent_2&&this.ob_animationPercent_2.pause(),void 0!==this.ob_animationPercent_3&&this.ob_animationPercent_3.pause(),void 0!==this.animationBackground_1&&this.animationBackground_1.pause(),void 0!==this.animationBackground_2&&this.animationBackground_2.pause(),void 0!==this.animationBackground_3&&this.animationBackground_3.pause(),void 0!==this.animationBackground_4&&this.animationBackground_4.pause(),void 0!==this.animationBackground_5&&this.animationBackground_5.pause()}componentDidMount(){window.onresize=()=>{let t={height:window.innerHeight,width:window.outerWidth>window.innerWidth?window.innerWidth:window.outerWidth,device_horizontal:window.outerWidth>window.innerHeight};document.documentElement.style.setProperty("--vh",`${t.height}px`);let e=550;t.height-120<e&&(e=t.height-120),document.documentElement.style.setProperty("--max_height_search",`${e}px`);let i="";i=t.width>996?"desktop":t.width<=996&&t.width>768?"desktop_small":t.width<=768&&t.width>575?"tablet":t.width<=575&&t.width>350?"mobile":"mobile_small",i!==this.state.device&&this.setState({device:i})},this.animationBackground(),this.animationPercent(),setTimeout((()=>{this.flagUnMount||this.animationEye()}),500)}UNSAFE_componentWillUpdate(t){void 0!==t.dataFull&&void 0!==t.dataFull.percent&&this.props.dataFull.percent!==t.dataFull.percent&&this.state.percent_before!==t.dataFull.percent&&(t.dataFull.percent<100?this.setState({percent_before:this.props.dataFull.percent,percent_after:t.dataFull.percent},(()=>{this.animationPercent()})):this.setState({percent_before:100,percent_after:100},(()=>{this.animationPercent(this.callBack)})))}animationBackground(){this.animationBackground_1=window.anime({targets:".malibu-"+this.state.device+"-uLoading-tree",scale:3,loop:!0,duration:3e3,baseFrequency:0,direction:"alternate",easing:"linear"}),this.animationBackground_2=window.anime({targets:".malibu-"+this.state.device+"-uLoading-ground",scale:4,loop:!0,duration:3e3,baseFrequency:0,direction:"alternate",easing:"linear"}),this.animationBackground_3=window.anime({targets:".malibu-"+this.state.device+"-uLoading-sun",translateY:-170,loop:!0,duration:3e3,baseFrequency:0,opacity:[0,1],direction:"alternate",easing:"linear",background:["rgb(255,255,255)","#FF6584"]}),this.animationBackground_4=window.anime({targets:".malibu-"+this.state.device+"-uLoading-music",opacity:[0,1],translateY:-10,delay:window.anime.stagger(300,{grid:[14,5],from:"center"}),loop:!0,direction:"alternate"}),void 0!==this.props.dataFull.speed.title&&(this.animationBackground_5=window.anime({targets:".malibu-"+this.state.device+"-uLoading-rocket",translateY:-10,loop:!0,duration:1e3,baseFrequency:0,direction:"alternate",easing:"linear"}))}animationEye(){if(!this.flagUnMount){let t=window.anime.path(".malibu-"+this.state.device+"-uLoading-path path");this.ob_animationEye=window.anime({targets:".malibu-"+this.state.device+"-uLoading-chiken-eye",translateX:t("x"),translateY:t("y"),rotate:t("angle"),duration:6e3,easing:"linear",loop:!0})}}getColor(){let t="",e=document.getElementsByTagName("body")[0].classList.toString();return e.includes("kbank")?(t="#99ddb9",this.props.dataFull.percent<=100&&(t=this.props.dataFull.percent<=25?"#99ddb9":this.props.dataFull.percent<=50?"#33ba73":this.props.dataFull.percent<=75?"#1ab262":"#00A950")):e.includes("sbilh")?(t="#435FC0",this.props.dataFull.percent<=100&&(t=this.props.dataFull.percent<=25?"#D9DFF2":this.props.dataFull.percent<=50?"#B7C2E7":this.props.dataFull.percent<=75?"#8D9DD9":"#667DCC")):(t="#5557E4",this.props.dataFull.percent<=100&&(t=this.props.dataFull.percent<=25?"#CACBF7":this.props.dataFull.percent<=50?"#A7A8F1":this.props.dataFull.percent<=75?"#8385EC":"#5557E4")),t}animationPercent(t){this.ob_animationPercent_1=window.anime({targets:".malibu-"+this.state.device+"-uLoading-progress",width:[this.state.percent_before+"%",this.state.percent_after+"%"],easing:"easeInOutQuart",background:[this.getColor(),this.getColor()],duration:100,complete:()=>{void 0!==this.props.f_callBack_animationPercent&&this.props.f_callBack_animationPercent()}}),void 0!==t?this.ob_animationPercent_2=window.anime({targets:".number-percent-input",value:[this.state.percent_before,this.state.percent_after],round:1,easing:"easeInOutQuart",duration:20,complete:()=>{setTimeout((()=>{t()}),500)}}):this.ob_animationPercent_3=window.anime({targets:".number-percent-input",value:[this.state.percent_before,this.state.percent_after],round:1,easing:"easeInOutQuart",duration:100})}renderForDevice(){return"desktop"===this.state.device?(0,s.jsxs)("div",{className:"malibu-desktop-uLoading "+this.state.class,children:[(0,s.jsxs)("div",{style:{display:"none"},children:[(0,s.jsx)("i",{className:"material-icons",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-round",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-outlined",style:{visibility:"hidden"},children:"menu"})]}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-header",children:[(0,s.jsxs)("div",{style:{position:"absolute",marginLeft:"320px",zIndex:"3"},children:[(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMzIiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDEzMyAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02Ni4wODI4IDExNy4yNDVDOTUuNjg4NyAxMTcuMjQ1IDExOS42ODkgOTMuMjg5MSAxMTkuNjg5IDYzLjczNzRDMTE5LjY4OSAzNC4xODU4IDk1LjY4ODcgMTAuMjI5NSA2Ni4wODI4IDEwLjIyOTVDMzYuNDc2OSAxMC4yMjk1IDEyLjQ3NjYgMzQuMTg1OCAxMi40NzY2IDYzLjczNzRDMTIuNDc2NiA5My4yODkxIDM2LjQ3NjkgMTE3LjI0NSA2Ni4wODI4IDExNy4yNDVaIiBmaWxsPSIjM0YzRDU2Ii8+CjxwYXRoIGQ9Ik0zMi4zMzQ0IDY4LjAzMjZDMzMuNjY1OCA2Ni40NDE3IDM1LjMzMDkgNjUuMTYyIDM3LjIxMiA2NC4yODM4QzM5LjA5MzIgNjMuNDA1NiA0MS4xNDQ3IDYyLjk1MDUgNDMuMjIxNCA2Mi45NTA1QzQ1LjI5ODEgNjIuOTUwNSA0Ny4zNDk2IDYzLjQwNTYgNDkuMjMwNyA2NC4yODM4QzUxLjExMTkgNjUuMTYyIDUyLjc3NyA2Ni40NDE3IDU0LjEwODQgNjguMDMyNkM1Ni4zODY1IDY1Ljg2MTkgNTcuOTYxIDYzLjA1OTggNTguNjI5MSA1OS45ODc2QzU5LjI5NzIgNTYuOTE1NSA1OS4wMjgyIDUzLjcxNCA1Ny44NTY4IDUwLjc5NThDNTYuNjg1NCA0Ny44Nzc2IDU0LjY2NTIgNDUuMzc2NSA1Mi4wNTY3IDQzLjYxNDhDNDkuNDQ4MiA0MS44NTMxIDQ2LjM3MDkgNDAuOTExNiA0My4yMjE0IDQwLjkxMTZDNDAuMDcxOSA0MC45MTE2IDM2Ljk5NDYgNDEuODUzMSAzNC4zODYxIDQzLjYxNDhDMzEuNzc3NiA0NS4zNzY1IDI5Ljc1NzQgNDcuODc3NiAyOC41ODYgNTAuNzk1OEMyNy40MTQ2IDUzLjcxNCAyNy4xNDU2IDU2LjkxNTUgMjcuODEzNyA1OS45ODc2QzI4LjQ4MTggNjMuMDU5OCAzMC4wNTYzIDY1Ljg2MTkgMzIuMzM0NCA2OC4wMzI2VjY4LjAzMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzQuOTA0IDY4LjAzMjZDNzYuMjM1MyA2Ni40NDE3IDc3LjkwMDQgNjUuMTYxOSA3OS43ODE2IDY0LjI4MzhDODEuNjYyOCA2My40MDU2IDgzLjcxNDIgNjIuOTUwNSA4NS43OTEgNjIuOTUwNUM4Ny44Njc3IDYyLjk1MDUgODkuOTE5MSA2My40MDU2IDkxLjgwMDMgNjQuMjgzOEM5My42ODE1IDY1LjE2MTkgOTUuMzQ2NSA2Ni40NDE3IDk2LjY3NzkgNjguMDMyNkM5OC45NTYgNjUuODYxOSAxMDAuNTMxIDYzLjA1OTggMTAxLjE5OSA1OS45ODc2QzEwMS44NjcgNTYuOTE1NSAxMDEuNTk4IDUzLjcxNCAxMDAuNDI2IDUwLjc5NThDOTkuMjU0OSA0Ny44Nzc2IDk3LjIzNDggNDUuMzc2NSA5NC42MjYzIDQzLjYxNDhDOTIuMDE3OCA0MS44NTMxIDg4Ljk0MDQgNDAuOTExNiA4NS43OTEgNDAuOTExNkM4Mi42NDE1IDQwLjkxMTYgNzkuNTY0MSA0MS44NTMxIDc2Ljk1NTYgNDMuNjE0OEM3NC4zNDcxIDQ1LjM3NjUgNzIuMzI3IDQ3Ljg3NzYgNzEuMTU1NiA1MC43OTU4QzY5Ljk4NDEgNTMuNzE0IDY5LjcxNTEgNTYuOTE1NSA3MC4zODMyIDU5Ljk4NzZDNzEuMDUxMyA2My4wNTk4IDcyLjYyNTkgNjUuODYxOSA3NC45MDQgNjguMDMyNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNy40NTQ4IDgzLjQwOTRDMzAuOTM3OSA4My40MDk0IDMzLjc2MTQgODAuNTkxIDMzLjc2MTQgNzcuMTE0M0MzMy43NjE0IDczLjYzNzcgMzAuOTM3OSA3MC44MTkzIDI3LjQ1NDggNzAuODE5M0MyMy45NzE4IDcwLjgxOTMgMjEuMTQ4MiA3My42Mzc3IDIxLjE0ODIgNzcuMTE0M0MyMS4xNDgyIDgwLjU5MSAyMy45NzE4IDgzLjQwOTQgMjcuNDU0OCA4My40MDk0WiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNOTkuOTgwNyA4My40MDk0QzEwMy40NjQgODMuNDA5NCAxMDYuMjg3IDgwLjU5MSAxMDYuMjg3IDc3LjExNDNDMTA2LjI4NyA3My42Mzc3IDEwMy40NjQgNzAuODE5MyA5OS45ODA3IDcwLjgxOTNDOTYuNDk3NiA3MC44MTkzIDkzLjY3NDEgNzMuNjM3NyA5My42NzQxIDc3LjExNDNDOTMuNjc0MSA4MC41OTEgOTYuNDk3NiA4My40MDk0IDk5Ljk4MDcgODMuNDA5NFoiIGZpbGw9IiNGRjY1ODQiLz4KPHBhdGggZD0iTTYzLjcxNzcgNjQuNTI0MUw1OC45ODc4IDg0Ljk4MzFMNjYuODcxIDc3LjExNDRMNjMuNzE3NyA2NC41MjQxWiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNODguMDIxNiAxNDMuMjEyTDgyLjY1MTYgMTM4LjcxNEw4Mi43NzY3IDE0My4yMTJIODEuMTA4OEw4MC45NzU2IDEzOC40NTZMNzMuNzI1MiAxNDMuMjEySDcwLjY4OTlMODAuOTIxNCAxMzYuNUw4MC41MjUxIDEyMi40MDRMODAuMjI5MSAxMTEuNzU5TDgxLjg5MjggMTExLjcxM0w4Mi4xOTMgMTIyLjQwNEw4Mi41ODkgMTM2LjQ4N0w5MC42MTQ3IDE0My4yMTJIODguMDIxNloiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTYyLjc5MzEgMTQzLjIxMkw1Ny40MjMgMTM4LjcxNEw1Ny41NDgyIDE0My4yMTJINTUuODg0OEw1NS43NTEzIDEzOC40NTZMNDguNTAwOCAxNDMuMjEySDQ1LjQ2NTZMNTUuNjkyOSAxMzYuNUw1NS4yOTY5IDEyMi40MDRMNTUuMDAwOCAxMTEuNzU5TDU2LjY2ODQgMTExLjcxM0w1Ni45Njg3IDEyMi40MDRMNTcuMzYwNSAxMzYuNDg3TDY1LjM4NjUgMTQzLjIxMkg2Mi43OTMxWiIgZmlsbD0iIzNGM0Q1NiIvPgo8cGF0aCBkPSJNNjYuODcxMyA2LjI5NTAxQzY1LjQwMDQgNi4yOTUwMSA2NC4xMDI4IDcuNDM1NDggNjMuMjM1MyA5LjE4NzIzQzYyLjQ3MDYgNi41NTMxMiA2MC44NjQxIDQuNzIxMjcgNTguOTg4IDQuNzIxMjdDNTguODYwNSA0LjczMzkyIDU4LjczNCA0Ljc1NTEzIDU4LjYwOTMgNC43ODQ3NkM1Ny44ODgyIDEuOTcyMzYgNTYuMjEyMSAtMi40Nzk1NWUtMDUgNTQuMjU4IC0yLjQ3OTU1ZS0wNUM1MS42NDU3IC0yLjQ3OTU1ZS0wNSA0OS41MjgxIDMuNTIyOTkgNDkuNTI4MSA3Ljg2ODhDNDkuNTI4MSAxMi4yMTQ2IDUxLjY0NTcgMTUuNzM3NiA1NC4yNTggMTUuNzM3NkM1NC4zODU1IDE1LjcyNSA1NC41MTIxIDE1LjcwMzcgNTQuNjM2NyAxNS42NzQxQzU1LjM1NzkgMTguNDg2NSA1Ny4wMzM5IDIwLjQ1ODkgNTguOTg4IDIwLjQ1ODlDNjAuNDU4OSAyMC40NTg5IDYxLjc1NjUgMTkuMzE4NCA2Mi42MjQgMTcuNTY2N0M2My4zODg3IDIwLjIwMDggNjQuOTk1MSAyMi4wMzI2IDY2Ljg3MTMgMjIuMDMyNkM2OS40ODM2IDIyLjAzMjYgNzEuNjAxMiAxOC41MDk2IDcxLjYwMTIgMTQuMTYzOEM3MS42MDEyIDkuODE4MDEgNjkuNDgzNiA2LjI5NTAxIDY2Ljg3MTMgNi4yOTUwMVoiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTE1Ljc2NjYgODQuMDE0NUMxMy42OTYxIDg0LjAxNDUgMTEuNjQ1OSA4My42MDc0IDkuNzMzMDEgODIuODE2NkM3LjgyMDEyIDgyLjAyNTcgNi4wODIwMyA4MC44NjY1IDQuNjE3OTcgNzkuNDA1MUMzLjE1MzkxIDc3Ljk0MzcgMS45OTI1NiA3Ni4yMDg4IDEuMjAwMjEgNzQuMjk5NEMwLjQwNzg3MiA3Mi4zOTAxIDYuNDI5NWUtMDUgNzAuMzQzNiA2LjQyOTVlLTA1IDY4LjI3NjlMNi40Mjk1ZS0wNSA2MC40MDhDNi40Mjk1ZS0wNSA1Ni4yMzQyIDEuNjYxMTcgNTIuMjMxMyA0LjYxNzk3IDQ5LjI3OTlDNy41NzQ3NyA0Ni4zMjg1IDExLjU4NTEgNDQuNjcwNCAxNS43NjY2IDQ0LjY3MDRWNDQuNjcwNEwxNS43NjY2IDg0LjAxNDVaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMTYuMzk5IDQ0LjY3MDVDMTE4LjQ3IDQ0LjY3MDUgMTIwLjUyIDQ1LjA3NzYgMTIyLjQzMyA0NS44Njg1QzEyNC4zNDYgNDYuNjU5NCAxMjYuMDg0IDQ3LjgxODYgMTI3LjU0OCA0OS4yOEMxMjkuMDEyIDUwLjc0MTMgMTMwLjE3MyA1Mi40NzYyIDEzMC45NjYgNTQuMzg1NkMxMzEuNzU4IDU2LjI5NSAxMzIuMTY2IDU4LjM0MTQgMTMyLjE2NiA2MC40MDgxVjY4LjI3N0MxMzIuMTY2IDcwLjM0MzcgMTMxLjc1OCA3Mi4zOTAxIDEzMC45NjYgNzQuMjk5NUMxMzAuMTczIDc2LjIwODkgMTI5LjAxMiA3Ny45NDM4IDEyNy41NDggNzkuNDA1MUMxMjYuMDg0IDgwLjg2NjUgMTI0LjM0NiA4Mi4wMjU3IDEyMi40MzMgODIuODE2NkMxMjAuNTIgODMuNjA3NSAxMTguNDcgODQuMDE0NiAxMTYuMzk5IDg0LjAxNDZWODQuMDE0NlY0NC42NzA1SDExNi4zOTlaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMjQuNjYxIDYxLjY0NDZIMTIyLjE2QzEyMi4xNiAyOS45Nzc1IDk2LjM0OTIgNC4yMTQyMyA2NC42MjM3IDQuMjE0MjNDMzIuODk4MyA0LjIxNDIzIDcuMDg3NzUgMjkuOTc3NSA3LjA4Nzc1IDYxLjY0NDZINC41ODYxOEM0LjU4NjE4IDI4LjYwMDUgMzEuNTE4OSAxLjcxNzI2IDY0LjYyMzcgMS43MTcyNkM5Ny43Mjg2IDEuNzE3MjYgMTI0LjY2MSAyOC42MDA2IDEyNC42NjEgNjEuNjQ0NloiIGZpbGw9IiM1NTU3RTQiLz4KPC9zdmc+Cg==",alt:"chicken"}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-chiken-eye left"}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-chiken-eye right"}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-path",children:(0,s.jsx)("svg",{width:"12",height:"3",xmlns:"http://www.w3.org/2000/svg",style:{visibility:"hidden"},children:(0,s.jsx)("path",{d:"M 0 2 Q 6 -5 12 2 M 12 2 Q 6 -5 0 2",stroke:"black",fill:"transparent"})})})]}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-ground",style:{position:"absolute",marginLeft:"350px"},children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSI4NyIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDI4NyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yODYuMzUxIDExLjY4Nkw4MS40MDg4IDE0Ljc3MDFMMC4wNTc2MTcyIDAuMzc4MTc0SDEyNy4wNThMMjg2LjM1MSAxMS42ODZaIiBmaWxsPSIjRTZFNkU2Ii8+DQo8L3N2Zz4NCg==",alt:"ground"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-tree one",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-tree two",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-tree three",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-tree four",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-tree five",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-sun"}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-music-list",style:{position:"absolute"},children:[(0,s.jsx)("div",{className:"malibu-desktop-uLoading-music six",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMiAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS42NDU5IDEyLjA5MDVMMTkuNjQ3IDEyLjA4ODJMMTYuODM3MiAxMC45MjAyTDUuMDkzNDUgNi4zNjMzNUw4LjA1NzQ1IDMuNzMxMTJDOC4wNTc0NSAzLjczMTEyIDEwLjAyOSAxLjAwMDU1IDEzLjE3NDEgMi44OTQ0OUwxMi4yNTQzIDEuNTI5OTVDMTIuMjU0MyAxLjUyOTk1IDEwLjUyNTEgLTAuNzU1MTU3IDguMTA0NjUgMS42NjI1NEM4LjEwNDY1IDEuNjYyNTQgNS4xMDk3NiA2LjA2OTU0IDAuNDA1NTE4IDQuOTQ2MTlMMTYuNDcxNCAxMS43MzM2TDE2LjU1NTcgMTEuODA5OUwxNS40NzMxIDE0LjM1NzlDMTUuMzI0OSAxNC41OTEgMTUuMTk4NSAxNC44MzcxIDE1LjA5NTQgMTUuMDkzM0MxNC4zMzcgMTcuMDA0NyAxNS43Njk0IDE4LjkwNTkgMTcuMTIzNCAxOS40NDEyQzE4LjQ3NzUgMTkuOTc2NiAyMC4xOTAxIDE4Ljg2MSAyMC45NDg1IDE2Ljk0OTZDMjEuNjk2NSAxNS4wNjQzIDIwLjk2NTQgMTIuNjY5MiAxOS42NDU5IDEyLjA5MDVaIiBmaWxsPSIjM0YzRDU2Ii8+DQo8L3N2Zz4NCg==",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-music five",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAzMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yOS4yNjg5IDIwLjM2ODFDMjMuNDM2OCAxNy4wMzk3IDI0LjYwMzkgOS43MzU4NCAyNC42MDM5IDkuNzM1ODRDMjQuNDU3MSA0Ljk5MDg5IDIwLjUyOTcgNS42NjI1NiAyMC41Mjk3IDUuNjYyNTZMMTkuMTAwMyA1Ljk4ODE0QzE4LjQzNjMgNS42ODA1MSAxNy43MDUxIDUuNTQ1NTMgMTYuOTc0OCA1LjU5NTc1TDE0LjgwMDUgNS45NjFDMTkuNzUxNiA3LjEyMjE5IDE5LjM0NDggMTEuMjU2NCAxOS4zNDQ4IDExLjI1NjRMMjAuMDM4NCAxNi4wOTAzTDcuMDY1MTUgMTAuODY2NEw4LjU1NDY5IDcuMzYwNjdDOC43NjA1NSA3LjAzNjk2IDguOTM2MTggNi42OTUwNiA5LjA3OTM4IDYuMzM5MjhDMTAuMTMyNyAzLjY4NDUzIDguMTQzMyAxLjA0MzkxIDYuMjYyNTkgMC4zMDA0MkM0LjM4MTg5IC0wLjQ0MzA2NyAyLjAwMzM2IDEuMTA2MyAwLjk1MDAxOCAzLjc2MUMtMC4wODg5Nzk3IDYuMzc5NTIgMC45MjY0MDcgOS43MDYxNSAyLjc1OTExIDEwLjUwOTlMMi43NTc1NiAxMC41MTNMNi42NjAyMiAxMi4xMzUzTDYuNjg5MjcgMTIuMDQzNUwyOS4yNjg5IDIwLjM2ODFaTTIyLjY4MDkgMTEuODc0NkwyMy4wOTgzIDE2LjUxNzVDMjAuNjQ4OCAxMy4yNzE5IDIxLjE0OTUgOS40MTU3OCAyMS4xNDk1IDkuNDE1NzhDMjEuMTE1IDguNTIwMjkgMjAuODEyMyA3LjY1NTY5IDIwLjI4MDYgNi45MzM1OUMyMy4wOTQ0IDguNjE0MzIgMjIuNjgwOSAxMS44NzQ2IDIyLjY4MDkgMTEuODc0NkgyMi42ODA5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-music four",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxNyAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMC4yMjE3IDEzLjMzOUw5LjU5Mjc0IDE0LjgxOTJDOS41MDY2NSAxNC45NTQ2IDkuNDMzMjEgMTUuMDk3NiA5LjM3MzM0IDE1LjI0NjRDOC45MzI3NSAxNi4zNTY3IDkuNzY0ODQgMTcuNDYxMSAxMC41NTE0IDE3Ljc3MjFDMTEuMzM4IDE4LjA4MzEgMTIuMzMyOSAxNy40MzUxIDEyLjc3MzQgMTYuMzI0N0MxMy4yMDggMTUuMjI5NSAxMi43ODMzIDEzLjgzODIgMTIuMDE2OCAxMy41MDJMMTIuMDE3NCAxMy41MDA3TDEwLjM4NTEgMTIuODIyMkw0LjgwMTI2IDEwLjY1NTVMNy45OTE3NCAyLjYxNDYzTDcuNTE4ODggMi40Mjc2OEw0LjMyNzE5IDEwLjQ3MTZMMy42MzY3NSAxMC4yMDM3TDYuODQwODMgMi4xMjgzOUw2LjkyNTI1IDIuMTY0MDVMMTMuNDg4OCA0LjkzNjk4TDEzLjUzNzggNC45ODEyOEwxMi45MDg5IDYuNDYxNDNDMTIuODIyOSA2LjU5NjgyIDEyLjc0OTQgNi43Mzk4MiAxMi42ODk1IDYuODg4NjNDMTIuMjQ4OSA3Ljk5ODk5IDEzLjA4MSA5LjEwMzQyIDEzLjg2NzYgOS40MTQzOUMxNC42NTQyIDkuNzI1MzYgMTUuNjQ5MSA5LjA3NzM0IDE2LjA4OTYgNy45NjY5OEMxNi41MjQyIDYuODcxNzkgMTYuMDk5NSA1LjQ4MDQ0IDE1LjMzMyA1LjE0NDI4TDE1LjMzMzYgNS4xNDI5NEwxMy43MDEzIDQuNDY0NDVMNy4wMzA3OCAxLjY0OTc1TDcuMDMwNSAxLjY0OTYyTDYuODE0MTUgMS41NTgzNEw0LjM0NTQ4IDAuNTE2NjYzTDAuODM5ODQ0IDkuMzUxODVMMTAuMTcyNyAxMy4yOTQ3TDEwLjIyMTcgMTMuMzM5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-music three",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMyAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4yNDYzIDcuMDAyN0wxMS4yNDY5IDcuMDAxNDJMOS42MTQ2MSA2LjMyMjg4TDIuNzkyNTkgMy42NzU4MUw0LjUxNDQxIDIuMTQ2NzNDNC44NTEyNSAxLjY5ODUgNS4zNDg2OCAxLjM5NzYyIDUuOTAyNjQgMS4zMDcwNEM2LjQ1NjYgMS4yMTY0NiA3LjAyNDE5IDEuMzQzMTggNy40ODY3MSAxLjY2MDY5TDYuOTUyMzkgMC44NjgwNEM2Ljk1MjM5IDAuODY4MDQgNS45NDc5MSAtMC40NTkzNyA0LjU0MTgyIDAuOTQ1MDg2QzQuNTQxODIgMC45NDUwODYgMi44MDIwNyAzLjUwNTEzIDAuMDY5MzM1OSAyLjg1MjU2TDkuNDAyMTcgNi43OTU0NUw5LjQ1MTE1IDYuODM5NzVMOC44MjIyNiA4LjMxOTkxQzguNzM2MTQgOC40NTUyOSA4LjY2MjY4IDguNTk4MyA4LjYwMjgxIDguNzQ3MTFDOC4xNjIyNyA5Ljg1NzQzIDguOTk0MzQgMTAuOTYxOSA5Ljc4MDkzIDExLjI3MjhDMTAuNTY3NSAxMS41ODM4IDExLjU2MjMgMTAuOTM1OCAxMi4wMDI5IDkuODI1NDZDMTIuNDM3NSA4LjczMDI2IDEyLjAxMjggNy4zMzg5MiAxMS4yNDYzIDcuMDAyN1oiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-music two",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMyAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4zNzkzIDMuODQ5NzdMMTEuMzc5NyAzLjg0ODg0TDEwLjIwNDUgMy4zNjAyOUw1LjI0NTggMS4yNjc4OEwzLjQ2ODM3IDAuNTE3OTE0TDMuMzMxOTYgMC44NjE2NTZMMC45NDQzMzYgNi44NzkxNUw3LjY2Mzg5IDkuNzE4MDJMNy42OTkxNiA5Ljc0OTkxTDcuMjQ2MzUgMTAuODE1NkM3LjE4NDM3IDEwLjkxMzEgNy4xMzE0OSAxMS4wMTYxIDcuMDg4MzYgMTEuMTIzMkM2Ljc3MTE3IDExLjkyMjYgNy4zNzAyNyAxMi43MTc4IDcuOTM2NjEgMTIuOTQxN0M4LjUwMjk1IDEzLjE2NTYgOS4yMTkyMyAxMi42OTkxIDkuNTM2NDIgMTEuODk5NkM5Ljg0OTMgMTEuMTExMSA5LjU0MzU0IDEwLjEwOTMgOC45OTE2MyA5Ljg2NzI4TDguOTkyMTEgOS44NjYzNEw3LjgxNjg3IDkuMzc3NzlMMy43OTY1MiA3LjgxNzhMNi4wOTM2NiAyLjAyODQyTDUuNzUzMTkgMS44OTM4NEwzLjQ1NTIzIDcuNjg1MzdMMi45NTgxIDcuNDkyNDZMNS4yNjUwNCAxLjY3ODMzTDUuMzI1ODEgMS43MDQwMUwxMC4wNTE1IDMuNzAwNUwxMC4wODY4IDMuNzMyMzlMOS42MzQwMiA0Ljc5ODEzQzkuNTcyMDMgNC44OTU2IDkuNTE5MTQgNC45OTg1NSA5LjQ3NjAzIDUuMTA1NjlDOS4xNTg4IDUuOTA1MTIgOS43NTc5IDYuNzAwMzMgMTAuMzI0MiA2LjkyNDE5QzEwLjg5MDYgNy4xNDgwNiAxMS42MDY5IDYuNjgxNTUgMTEuOTI0MSA1Ljg4MjExQzEyLjIzNjkgNS4wOTM1NiAxMS45MzEyIDQuMDkxODEgMTEuMzc5MyAzLjg0OTc3WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-music one",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDEzIDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMTIuNjM2OSA4LjYyMjg0QzEwLjE5NzYgNy4yMzA3NiAxMC42ODU3IDQuMTc1ODcgMTAuNjg1NyA0LjE3NTg3QzEwLjYyNDMgMi4xOTEzMSA4Ljk4MTY5IDIuNDcyMjEgOC45ODE2OSAyLjQ3MjIxTDguMzgzODYgMi42MDg0MUM4LjEwNjE0IDIuNDc5NzUgNy44MDAzMiAyLjQyMzMgNy40OTQ4NyAyLjQ0NDMxTDYuNTg1NDYgMi41OTcwNUM4LjY1NjI2IDMuMDgyNzEgOC40ODYxMyA0LjgxMTg1IDguNDg2MTMgNC44MTE4NUw4Ljc3NjI1IDYuODMzNjZMMy4zNTAxNiA0LjY0ODcyTDMuOTczMTYgMy4xODI1QzQuMDU5MjYgMy4wNDcxMSA0LjEzMjcyIDIuOTA0MTEgNC4xOTI1OSAyLjc1NTNDNC42MzMxNCAxLjY0NDk0IDMuODAxMDcgMC41NDA1MDYgMy4wMTQ0OCAwLjIyOTU3NkMyLjIyNzg4IC0wLjA4MTQzMTQgMS4yMzMwNiAwLjU2NjYzMSAwLjc5MjQ3NiAxLjY3Njk1QzAuMzU3OTQ2IDIuNzcyMTQgMC43ODI2NDIgNC4xNjM0OCAxLjU0OTE2IDQuNDk5NjNMMS41NDg1MSA0LjUwMDk3TDMuMTgwOCA1LjE3OTQ2TDMuMTkyOTUgNS4xNDEwNEwxMi42MzY5IDguNjIyODRaTTkuODgxNDQgNS4wNzA0MUwxMC4wNTU0IDcuMDA1NjRDOS40NDEwNSA2LjE0NTE1IDkuMTUyNDMgNS4wOTUwMSA5LjI0MDkxIDQuMDQyMDVDOS4yMjY0OSAzLjY2NzUgOS4wOTk5MSAzLjMwNTg3IDguODc3NTEgMy4wMDM4NkM5LjIxOTQgMy4yMjI1IDkuNDk0MTEgMy41MzEyMSA5LjY3MTI3IDMuODk1ODlDOS44NDg0MyA0LjI2MDU4IDkuOTIxMTcgNC42NjcwNSA5Ljg4MTQ0IDUuMDcwNFY1LjA3MDQxWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})})]}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-progress-bar ",children:[(0,s.jsx)("div",{className:"malibu-desktop-uLoading-progress",style:{width:this.state.width}}),(0,s.jsx)("label",{className:"loading",children:this.props.dataFull.title}),(0,s.jsxs)("label",{className:"number-percent",children:[(0,s.jsx)("input",{className:"number-percent-input",readOnly:!0}),"%"]})]}),this.props.dataFull.speed.title?(0,s.jsxs)("div",{className:"row",style:{margin:"auto",marginTop:"150px",width:"fit-content"},children:[(0,s.jsx)("div",{className:"malibu-desktop-uLoading-rocket",children:(0,s.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfOSURBVHgBzZldbBzVFcf/dz722+t1SJOqH2RT6AMVNCsV+hKgS/pQlxRwGqlK3KjY6gMoqZT1S9SqlWyr5akPXktJVLVVsSVwTNUSC5IIPzSZUHho0hajBAWhAAYChJBk1/Z+785czp31rL27M7vrXQf4P/hez71z5zfnnnPuvbMMXwIlYn0hBZ7IoStq5FwG28AR4mARJiEk6nb3MHxBErAS/AME8BhhRAAeuloEhq7IEGUzfe7gS7E9UQ55mKpRu/ZW4T838MVY/wBN/0F6YKRZ31bgbzl4Mws7qRn8LQMvB5x/mAMxtKlG8LcEPBHrj8hgx6kaRodygE/KWGelhvYJP56haqhRP6lnI5mNepYaR2GACO8PcLyalpAyli9yvLmuFl+K7SPX4CNO7fIdd8Hd+1NIX98C5vWVGbIZlC78F4XZ4zBufuo4dpXlOdfWDbwRNPP64e7bB/X7DzQco/DS88jPPu/YbsF/XMD4urhKM0v7njgE5Z7vmfW8wfGf6zreWNRxccGATtO/ySOZbfKddwE0A/p7l23HsdzmgwJ/rmOLN4NW73sAnv4nzPrFBR3/uloy4VerW2XYs8VllkLp3w81dBsd+kMSOlB5UXGGFnL37jbLhSLHqY+KddBW2/R7hUqb+uCPGg2Jnvi0pmCNivbFQulCMrw9qIv9xZgIcSeJYGQbNpr10580zh4C/kJSx70bFIqFB5Gfecapqyb+tAQuYOHN04ZIesww8lFeAvbfZjS9T9rwlUr9/TRv2v9artxHZByJXti4ed2mF59sCi6AJV/hIEcxBi6ZeTmfL+AXPTq+qmJNsnORWuWa24L829BE6Qge3fNklLHi05yzsHWtVNJxGy9ioAVrC/FsulL/pl/CB+nG9212r+QKe2tDI/+eFxXJHnr/MGPyGdQs2dlsDo+3CC2kv33JXGCE7ulunnnvDpX76JcvOfQwxq2aZA/NRmqvl4olbJYN9AabT7klAV0893IZisBF4Dnp4a+plXRYPP9y/VjAfDB+bMYW3AlaKF8orMnalgq0EvLlad+xWTEBrQXHLTHc7pPMHH738oyIFy2e+3fdOAx8tPr/CvSTYXKPd+0ebhgGArk0jm3V0Y5EhvAd+F0lNTpJuEj2b2MV97IkrN0df3Zr1ZhWZdmnbSUyyTZv6y5SKxFomSN/qLhNrQRojvJ25shTddDm/eC7aq+ZFicXGSAXeRoOWlpK48/fKOJODzqWyNFiTyI2XiYULe3OwWhqIhh/drD2ohktBD1sc4PGDf46bYLmvusxwgQ9jBaVNhiuGRK2KvWuVd7G/q+lcYSL0DZs1K5NEfkaVtpjSHKDjSOnxLWZeNLqdCL285aOXwL4rykvTmdd+MvGRXQq4SJW3q6VAib1lZnZuJFRRlYDW6KI/kGzU94LGTemUx6kOcMOTwGb5LVnoNWizdtoT3xqzqldAWfbqNPgmekjE3Yd0i/8uI+/n4vyGyp4oj4PCysfS3vwIoELCeC9gRw6he6OT4006qOAXEP7+5GZ2obE8WjI5fKNMc4GWDgPdkcRsuylvawLhTkOI1WG/m0igHdLK6viXn+uI2sT9HgzaCHH+c+c2PkaFREKXCjdXigBd6VNQCf+z3DovL8K+lFfHr/syqJD6JbiSXGAHjOhZQnuTV0Q5WpJAeA3b1dDiwzSIfRoK5a2VAeeOvnwAI1ivrUdtNDkq25cvlYN/VRPCu2IPsslGYwhgp5Yy311VBIv53Q15LOFnr3gwuQrKytR5PYS/rg9Db+09pX1co5h7BMMBtcILVRl8aUXe6NUhAXwap+2dHVBMq1tafe9BRz4YRa8QIH6DsyyFaUoqP+ZoJm7KYvVL4k2VAVORzMzp0u+leMN51ysrGZ99qJqwgfcHId2ZnH/t8vnSOaiGfoO7QTnmj/wpQVGwBJu0KP9AQ/OPndUQxuqApeZyOmkkoHCjRSMog7F54IS9CKVZ3jlLRWPb89j9315E77q3i30EnOqsF7ICXh2keFCUYHb7YZXMWNEQ5uqAqfIDgu769llS5LLyF0r/jzWn64DtlTKZcF6WGj1IjWXYXidEs0/EhKykmwC+/0rQU2zOYn1ACeX0MoDYkCUKuVvy02cgE3oVB5cfJLq1pNIqBoZ4Oyvr0g4n5XGVFWB4lXhV+qObvNYPvi2o6q04d15clCnh5ovIaxNbmJJ+HpxsT5PC+DSQvk6+1ZmKBh/Zhdt+uOXEEBXMACP1wOlHloYZFKb/tM82lRdHq+kQ7K2JWFRAccUes/gynVOMZC/njJfyuB8PPDoqYlKo8rCcNY8beji6EBV4InjvWGIdEhnQWFtI18kK+eoLJnt4roJTKClpRz0pbxZJ2mBR05VL9W0eXPaUNAnj0G7XWjb4LKsRKxParkPkxZUlYS7rAIuW7oGunx+tf/Nh1xk9Myxwxo6VJWPS5LIKoROX52WwebIOqMSY+buUVi+RDNgWVnn7KE6S5dHisIB+vTU4RGsg6rTIWdzBuNDYDwpF1yad9fMvLieOfkT+j2Hz5v7Cs7P6pBmuh45odkNWLZ2/VGQXnXozNThjvx6tdb9x6sdew+M1fzSpnEyhjZ1tIV1tXWt+TNzI0X79x/kvAKtiQVGmz46gVugdbN49Ge/6mMyPyi+DFD6mdGmOw/ARvoMZ7pw6Vztu/cAAAAASUVORK5CYII=",alt:"rocket"})}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-speed",children:[(0,s.jsx)("label",{children:this.props.dataFull.speed.title}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-speed-number "+(this.props.dataFull.cmd.error.message?"error":""),children:[(0,s.jsx)("div",{style:{margin:"auto"},children:this.props.dataFull.speed.number_speed}),(0,s.jsx)("img",{src:this.props.dataFull.cmd.error.message?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGiSURBVHgB7ZXRTcMwEIbvXPJStciEB6jUVMkG7QZlg44AE5QNygYdATahG8AGrQRSWx7AEhIvSDli5AQ3cWO7ooiHfpIlxz75fOf/LgAH/gPL0+hSDvgL1jwarcOI5Fjy7hA8YeALg2k+bSBOwBMvhyqNcf5NCMNV2LsGD9DVcMnPY8aCe92hQnyk70kihHA5xznCBgsmBmcS3mJt59Q6Raiim9fZpOln0hGrBVhwipBhMLXZNDC4BQesDr+FgjDS15BoBkSP+poUkEuZWFOa1ZtMZawtibPXpxM5eQmjN8reUNtbZHtJ3Xms3lnXJJRCjaTNFfE67N3ALg6lUBDQq8bUNcZzzrm3Q1kGpXTlFGu4Zb+uTIxvaCsDhEwwhEIKZZtNmtJFRzzPyutHJmPVUbZCgH2b3FSfnVXOLi+U+6UBKZQ7ObAqmp9LyTIx/MI27ikfu8naDxaHhfQNJVOxzfrsQO+zGxE2WWtsOcCXuMmON5ReROjSL3dEZH12kPfZIkL1N9gHXO+zekpHsCdIe6aiLCiFq5RRH/YBVcvjwK/xBRbpfbJqi9GHAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgB3ZZLUuMwEIa7pZqZ5eQInhMM3MBZThlqnBMQdiwIBScIuQFVAYodzgWIgQKW+AaEExBuEJYkZTUtB8dvEtuw4d9EVrr6a0ndagF8d+GqhjtD2/jx0zcF4l9F2NBzAmmiiB5nU+mdtdzxKn6WAnevN0yUsgsE5hJPHpAa9K1r52OzAu0P7Yb/i84ZZEM5ObMp9opWnAvcv7MNX9E9Dw2opjFDm3lQ/ALYAiqnuH7UcifxSZG2Ylj3E2BaRnAkKSWAnZvNNv+0oaKIaOADrvO+ufMJsHXSFQIBxRbUgB1vXLVPLXfE2Xq5cKkzPI4IB+9n9wQVFMJifhI5oEAaJ9bFsx4vVugr34QKWgYLbPxZMxwvgKRwLcffGGrCAghGvqMzRGjEjfj6Ouhbl384kB7UgAWuBf7OAtNGpIIAjjfdQ/7argpLKwISTFJRdffuWkHW9i3XCaFVYKToJQNEQaOsoXLiUN7eZpWVoRCjDFAK6UFudBGUt9crC9OaTcHLAI/+8UWL0R9F0LIwIkj0ykTSkJ+fkSG0c/t/yLAHKHHXIuIg8Z020E4r9MAiOVxaiQzPlIV8DbJxDPWle2JmxzJA3b+kwGZNaGEDzi18nUAaqmsOyopbk268pZ4YcXVu7DaDtxA/fkTpbATCXlg6xfGsqHk5gImg1gjmdyMCvRDQqMwz8fvrDeQ/QIleItNVAAAAAElFTkSuQmCC",alt:"icon"})]})]})]}):null,this.props.dataFull.cmd.error.message?(0,s.jsx)("div",{className:"malibu-desktop-uLoading-message-error",children:this.props.dataFull.cmd.error.message}):null]})]}):"desktop_small"===this.state.device?(0,s.jsxs)("div",{className:"malibu-desktop_small-uLoading "+this.state.class,children:[(0,s.jsxs)("div",{style:{display:"none"},children:[(0,s.jsx)("i",{className:"material-icons",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-round",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-outlined",style:{visibility:"hidden"},children:"menu"})]}),(0,s.jsxs)("div",{className:"malibu-desktop_small-uLoading-header",children:[(0,s.jsxs)("div",{style:{position:"absolute",marginLeft:"198px",zIndex:"3"},children:[(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMzIiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDEzMyAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02Ni4wODI4IDExNy4yNDVDOTUuNjg4NyAxMTcuMjQ1IDExOS42ODkgOTMuMjg5MSAxMTkuNjg5IDYzLjczNzRDMTE5LjY4OSAzNC4xODU4IDk1LjY4ODcgMTAuMjI5NSA2Ni4wODI4IDEwLjIyOTVDMzYuNDc2OSAxMC4yMjk1IDEyLjQ3NjYgMzQuMTg1OCAxMi40NzY2IDYzLjczNzRDMTIuNDc2NiA5My4yODkxIDM2LjQ3NjkgMTE3LjI0NSA2Ni4wODI4IDExNy4yNDVaIiBmaWxsPSIjM0YzRDU2Ii8+CjxwYXRoIGQ9Ik0zMi4zMzQ0IDY4LjAzMjZDMzMuNjY1OCA2Ni40NDE3IDM1LjMzMDkgNjUuMTYyIDM3LjIxMiA2NC4yODM4QzM5LjA5MzIgNjMuNDA1NiA0MS4xNDQ3IDYyLjk1MDUgNDMuMjIxNCA2Mi45NTA1QzQ1LjI5ODEgNjIuOTUwNSA0Ny4zNDk2IDYzLjQwNTYgNDkuMjMwNyA2NC4yODM4QzUxLjExMTkgNjUuMTYyIDUyLjc3NyA2Ni40NDE3IDU0LjEwODQgNjguMDMyNkM1Ni4zODY1IDY1Ljg2MTkgNTcuOTYxIDYzLjA1OTggNTguNjI5MSA1OS45ODc2QzU5LjI5NzIgNTYuOTE1NSA1OS4wMjgyIDUzLjcxNCA1Ny44NTY4IDUwLjc5NThDNTYuNjg1NCA0Ny44Nzc2IDU0LjY2NTIgNDUuMzc2NSA1Mi4wNTY3IDQzLjYxNDhDNDkuNDQ4MiA0MS44NTMxIDQ2LjM3MDkgNDAuOTExNiA0My4yMjE0IDQwLjkxMTZDNDAuMDcxOSA0MC45MTE2IDM2Ljk5NDYgNDEuODUzMSAzNC4zODYxIDQzLjYxNDhDMzEuNzc3NiA0NS4zNzY1IDI5Ljc1NzQgNDcuODc3NiAyOC41ODYgNTAuNzk1OEMyNy40MTQ2IDUzLjcxNCAyNy4xNDU2IDU2LjkxNTUgMjcuODEzNyA1OS45ODc2QzI4LjQ4MTggNjMuMDU5OCAzMC4wNTYzIDY1Ljg2MTkgMzIuMzM0NCA2OC4wMzI2VjY4LjAzMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzQuOTA0IDY4LjAzMjZDNzYuMjM1MyA2Ni40NDE3IDc3LjkwMDQgNjUuMTYxOSA3OS43ODE2IDY0LjI4MzhDODEuNjYyOCA2My40MDU2IDgzLjcxNDIgNjIuOTUwNSA4NS43OTEgNjIuOTUwNUM4Ny44Njc3IDYyLjk1MDUgODkuOTE5MSA2My40MDU2IDkxLjgwMDMgNjQuMjgzOEM5My42ODE1IDY1LjE2MTkgOTUuMzQ2NSA2Ni40NDE3IDk2LjY3NzkgNjguMDMyNkM5OC45NTYgNjUuODYxOSAxMDAuNTMxIDYzLjA1OTggMTAxLjE5OSA1OS45ODc2QzEwMS44NjcgNTYuOTE1NSAxMDEuNTk4IDUzLjcxNCAxMDAuNDI2IDUwLjc5NThDOTkuMjU0OSA0Ny44Nzc2IDk3LjIzNDggNDUuMzc2NSA5NC42MjYzIDQzLjYxNDhDOTIuMDE3OCA0MS44NTMxIDg4Ljk0MDQgNDAuOTExNiA4NS43OTEgNDAuOTExNkM4Mi42NDE1IDQwLjkxMTYgNzkuNTY0MSA0MS44NTMxIDc2Ljk1NTYgNDMuNjE0OEM3NC4zNDcxIDQ1LjM3NjUgNzIuMzI3IDQ3Ljg3NzYgNzEuMTU1NiA1MC43OTU4QzY5Ljk4NDEgNTMuNzE0IDY5LjcxNTEgNTYuOTE1NSA3MC4zODMyIDU5Ljk4NzZDNzEuMDUxMyA2My4wNTk4IDcyLjYyNTkgNjUuODYxOSA3NC45MDQgNjguMDMyNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNy40NTQ4IDgzLjQwOTRDMzAuOTM3OSA4My40MDk0IDMzLjc2MTQgODAuNTkxIDMzLjc2MTQgNzcuMTE0M0MzMy43NjE0IDczLjYzNzcgMzAuOTM3OSA3MC44MTkzIDI3LjQ1NDggNzAuODE5M0MyMy45NzE4IDcwLjgxOTMgMjEuMTQ4MiA3My42Mzc3IDIxLjE0ODIgNzcuMTE0M0MyMS4xNDgyIDgwLjU5MSAyMy45NzE4IDgzLjQwOTQgMjcuNDU0OCA4My40MDk0WiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNOTkuOTgwNyA4My40MDk0QzEwMy40NjQgODMuNDA5NCAxMDYuMjg3IDgwLjU5MSAxMDYuMjg3IDc3LjExNDNDMTA2LjI4NyA3My42Mzc3IDEwMy40NjQgNzAuODE5MyA5OS45ODA3IDcwLjgxOTNDOTYuNDk3NiA3MC44MTkzIDkzLjY3NDEgNzMuNjM3NyA5My42NzQxIDc3LjExNDNDOTMuNjc0MSA4MC41OTEgOTYuNDk3NiA4My40MDk0IDk5Ljk4MDcgODMuNDA5NFoiIGZpbGw9IiNGRjY1ODQiLz4KPHBhdGggZD0iTTYzLjcxNzcgNjQuNTI0MUw1OC45ODc4IDg0Ljk4MzFMNjYuODcxIDc3LjExNDRMNjMuNzE3NyA2NC41MjQxWiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNODguMDIxNiAxNDMuMjEyTDgyLjY1MTYgMTM4LjcxNEw4Mi43NzY3IDE0My4yMTJIODEuMTA4OEw4MC45NzU2IDEzOC40NTZMNzMuNzI1MiAxNDMuMjEySDcwLjY4OTlMODAuOTIxNCAxMzYuNUw4MC41MjUxIDEyMi40MDRMODAuMjI5MSAxMTEuNzU5TDgxLjg5MjggMTExLjcxM0w4Mi4xOTMgMTIyLjQwNEw4Mi41ODkgMTM2LjQ4N0w5MC42MTQ3IDE0My4yMTJIODguMDIxNloiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTYyLjc5MzEgMTQzLjIxMkw1Ny40MjMgMTM4LjcxNEw1Ny41NDgyIDE0My4yMTJINTUuODg0OEw1NS43NTEzIDEzOC40NTZMNDguNTAwOCAxNDMuMjEySDQ1LjQ2NTZMNTUuNjkyOSAxMzYuNUw1NS4yOTY5IDEyMi40MDRMNTUuMDAwOCAxMTEuNzU5TDU2LjY2ODQgMTExLjcxM0w1Ni45Njg3IDEyMi40MDRMNTcuMzYwNSAxMzYuNDg3TDY1LjM4NjUgMTQzLjIxMkg2Mi43OTMxWiIgZmlsbD0iIzNGM0Q1NiIvPgo8cGF0aCBkPSJNNjYuODcxMyA2LjI5NTAxQzY1LjQwMDQgNi4yOTUwMSA2NC4xMDI4IDcuNDM1NDggNjMuMjM1MyA5LjE4NzIzQzYyLjQ3MDYgNi41NTMxMiA2MC44NjQxIDQuNzIxMjcgNTguOTg4IDQuNzIxMjdDNTguODYwNSA0LjczMzkyIDU4LjczNCA0Ljc1NTEzIDU4LjYwOTMgNC43ODQ3NkM1Ny44ODgyIDEuOTcyMzYgNTYuMjEyMSAtMi40Nzk1NWUtMDUgNTQuMjU4IC0yLjQ3OTU1ZS0wNUM1MS42NDU3IC0yLjQ3OTU1ZS0wNSA0OS41MjgxIDMuNTIyOTkgNDkuNTI4MSA3Ljg2ODhDNDkuNTI4MSAxMi4yMTQ2IDUxLjY0NTcgMTUuNzM3NiA1NC4yNTggMTUuNzM3NkM1NC4zODU1IDE1LjcyNSA1NC41MTIxIDE1LjcwMzcgNTQuNjM2NyAxNS42NzQxQzU1LjM1NzkgMTguNDg2NSA1Ny4wMzM5IDIwLjQ1ODkgNTguOTg4IDIwLjQ1ODlDNjAuNDU4OSAyMC40NTg5IDYxLjc1NjUgMTkuMzE4NCA2Mi42MjQgMTcuNTY2N0M2My4zODg3IDIwLjIwMDggNjQuOTk1MSAyMi4wMzI2IDY2Ljg3MTMgMjIuMDMyNkM2OS40ODM2IDIyLjAzMjYgNzEuNjAxMiAxOC41MDk2IDcxLjYwMTIgMTQuMTYzOEM3MS42MDEyIDkuODE4MDEgNjkuNDgzNiA2LjI5NTAxIDY2Ljg3MTMgNi4yOTUwMVoiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTE1Ljc2NjYgODQuMDE0NUMxMy42OTYxIDg0LjAxNDUgMTEuNjQ1OSA4My42MDc0IDkuNzMzMDEgODIuODE2NkM3LjgyMDEyIDgyLjAyNTcgNi4wODIwMyA4MC44NjY1IDQuNjE3OTcgNzkuNDA1MUMzLjE1MzkxIDc3Ljk0MzcgMS45OTI1NiA3Ni4yMDg4IDEuMjAwMjEgNzQuMjk5NEMwLjQwNzg3MiA3Mi4zOTAxIDYuNDI5NWUtMDUgNzAuMzQzNiA2LjQyOTVlLTA1IDY4LjI3NjlMNi40Mjk1ZS0wNSA2MC40MDhDNi40Mjk1ZS0wNSA1Ni4yMzQyIDEuNjYxMTcgNTIuMjMxMyA0LjYxNzk3IDQ5LjI3OTlDNy41NzQ3NyA0Ni4zMjg1IDExLjU4NTEgNDQuNjcwNCAxNS43NjY2IDQ0LjY3MDRWNDQuNjcwNEwxNS43NjY2IDg0LjAxNDVaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMTYuMzk5IDQ0LjY3MDVDMTE4LjQ3IDQ0LjY3MDUgMTIwLjUyIDQ1LjA3NzYgMTIyLjQzMyA0NS44Njg1QzEyNC4zNDYgNDYuNjU5NCAxMjYuMDg0IDQ3LjgxODYgMTI3LjU0OCA0OS4yOEMxMjkuMDEyIDUwLjc0MTMgMTMwLjE3MyA1Mi40NzYyIDEzMC45NjYgNTQuMzg1NkMxMzEuNzU4IDU2LjI5NSAxMzIuMTY2IDU4LjM0MTQgMTMyLjE2NiA2MC40MDgxVjY4LjI3N0MxMzIuMTY2IDcwLjM0MzcgMTMxLjc1OCA3Mi4zOTAxIDEzMC45NjYgNzQuMjk5NUMxMzAuMTczIDc2LjIwODkgMTI5LjAxMiA3Ny45NDM4IDEyNy41NDggNzkuNDA1MUMxMjYuMDg0IDgwLjg2NjUgMTI0LjM0NiA4Mi4wMjU3IDEyMi40MzMgODIuODE2NkMxMjAuNTIgODMuNjA3NSAxMTguNDcgODQuMDE0NiAxMTYuMzk5IDg0LjAxNDZWODQuMDE0NlY0NC42NzA1SDExNi4zOTlaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMjQuNjYxIDYxLjY0NDZIMTIyLjE2QzEyMi4xNiAyOS45Nzc1IDk2LjM0OTIgNC4yMTQyMyA2NC42MjM3IDQuMjE0MjNDMzIuODk4MyA0LjIxNDIzIDcuMDg3NzUgMjkuOTc3NSA3LjA4Nzc1IDYxLjY0NDZINC41ODYxOEM0LjU4NjE4IDI4LjYwMDUgMzEuNTE4OSAxLjcxNzI2IDY0LjYyMzcgMS43MTcyNkM5Ny43Mjg2IDEuNzE3MjYgMTI0LjY2MSAyOC42MDA2IDEyNC42NjEgNjEuNjQ0NloiIGZpbGw9IiM1NTU3RTQiLz4KPC9zdmc+Cg==",alt:"chicken"}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-chiken-eye left"}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-chiken-eye right"}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-path",children:(0,s.jsx)("svg",{width:"12",height:"3",xmlns:"http://www.w3.org/2000/svg",style:{visibility:"hidden"},children:(0,s.jsx)("path",{d:"M 0 2 Q 6 -5 12 2 M 12 2 Q 6 -5 0 2",stroke:"black",fill:"transparent"})})})]}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-ground",style:{position:"absolute",marginLeft:"228px"},children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSI4NyIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDI4NyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yODYuMzUxIDExLjY4Nkw4MS40MDg4IDE0Ljc3MDFMMC4wNTc2MTcyIDAuMzc4MTc0SDEyNy4wNThMMjg2LjM1MSAxMS42ODZaIiBmaWxsPSIjRTZFNkU2Ii8+DQo8L3N2Zz4NCg==",alt:"ground"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-tree one",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-tree two",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-tree three",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-tree four",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-tree five",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-sun"}),(0,s.jsxs)("div",{className:"malibu-desktop_small-uLoading-music-list",style:{position:"absolute"},children:[(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-music six",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMiAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS42NDU5IDEyLjA5MDVMMTkuNjQ3IDEyLjA4ODJMMTYuODM3MiAxMC45MjAyTDUuMDkzNDUgNi4zNjMzNUw4LjA1NzQ1IDMuNzMxMTJDOC4wNTc0NSAzLjczMTEyIDEwLjAyOSAxLjAwMDU1IDEzLjE3NDEgMi44OTQ0OUwxMi4yNTQzIDEuNTI5OTVDMTIuMjU0MyAxLjUyOTk1IDEwLjUyNTEgLTAuNzU1MTU3IDguMTA0NjUgMS42NjI1NEM4LjEwNDY1IDEuNjYyNTQgNS4xMDk3NiA2LjA2OTU0IDAuNDA1NTE4IDQuOTQ2MTlMMTYuNDcxNCAxMS43MzM2TDE2LjU1NTcgMTEuODA5OUwxNS40NzMxIDE0LjM1NzlDMTUuMzI0OSAxNC41OTEgMTUuMTk4NSAxNC44MzcxIDE1LjA5NTQgMTUuMDkzM0MxNC4zMzcgMTcuMDA0NyAxNS43Njk0IDE4LjkwNTkgMTcuMTIzNCAxOS40NDEyQzE4LjQ3NzUgMTkuOTc2NiAyMC4xOTAxIDE4Ljg2MSAyMC45NDg1IDE2Ljk0OTZDMjEuNjk2NSAxNS4wNjQzIDIwLjk2NTQgMTIuNjY5MiAxOS42NDU5IDEyLjA5MDVaIiBmaWxsPSIjM0YzRDU2Ii8+DQo8L3N2Zz4NCg==",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-music five",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAzMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yOS4yNjg5IDIwLjM2ODFDMjMuNDM2OCAxNy4wMzk3IDI0LjYwMzkgOS43MzU4NCAyNC42MDM5IDkuNzM1ODRDMjQuNDU3MSA0Ljk5MDg5IDIwLjUyOTcgNS42NjI1NiAyMC41Mjk3IDUuNjYyNTZMMTkuMTAwMyA1Ljk4ODE0QzE4LjQzNjMgNS42ODA1MSAxNy43MDUxIDUuNTQ1NTMgMTYuOTc0OCA1LjU5NTc1TDE0LjgwMDUgNS45NjFDMTkuNzUxNiA3LjEyMjE5IDE5LjM0NDggMTEuMjU2NCAxOS4zNDQ4IDExLjI1NjRMMjAuMDM4NCAxNi4wOTAzTDcuMDY1MTUgMTAuODY2NEw4LjU1NDY5IDcuMzYwNjdDOC43NjA1NSA3LjAzNjk2IDguOTM2MTggNi42OTUwNiA5LjA3OTM4IDYuMzM5MjhDMTAuMTMyNyAzLjY4NDUzIDguMTQzMyAxLjA0MzkxIDYuMjYyNTkgMC4zMDA0MkM0LjM4MTg5IC0wLjQ0MzA2NyAyLjAwMzM2IDEuMTA2MyAwLjk1MDAxOCAzLjc2MUMtMC4wODg5Nzk3IDYuMzc5NTIgMC45MjY0MDcgOS43MDYxNSAyLjc1OTExIDEwLjUwOTlMMi43NTc1NiAxMC41MTNMNi42NjAyMiAxMi4xMzUzTDYuNjg5MjcgMTIuMDQzNUwyOS4yNjg5IDIwLjM2ODFaTTIyLjY4MDkgMTEuODc0NkwyMy4wOTgzIDE2LjUxNzVDMjAuNjQ4OCAxMy4yNzE5IDIxLjE0OTUgOS40MTU3OCAyMS4xNDk1IDkuNDE1NzhDMjEuMTE1IDguNTIwMjkgMjAuODEyMyA3LjY1NTY5IDIwLjI4MDYgNi45MzM1OUMyMy4wOTQ0IDguNjE0MzIgMjIuNjgwOSAxMS44NzQ2IDIyLjY4MDkgMTEuODc0NkgyMi42ODA5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-music four",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxNyAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMC4yMjE3IDEzLjMzOUw5LjU5Mjc0IDE0LjgxOTJDOS41MDY2NSAxNC45NTQ2IDkuNDMzMjEgMTUuMDk3NiA5LjM3MzM0IDE1LjI0NjRDOC45MzI3NSAxNi4zNTY3IDkuNzY0ODQgMTcuNDYxMSAxMC41NTE0IDE3Ljc3MjFDMTEuMzM4IDE4LjA4MzEgMTIuMzMyOSAxNy40MzUxIDEyLjc3MzQgMTYuMzI0N0MxMy4yMDggMTUuMjI5NSAxMi43ODMzIDEzLjgzODIgMTIuMDE2OCAxMy41MDJMMTIuMDE3NCAxMy41MDA3TDEwLjM4NTEgMTIuODIyMkw0LjgwMTI2IDEwLjY1NTVMNy45OTE3NCAyLjYxNDYzTDcuNTE4ODggMi40Mjc2OEw0LjMyNzE5IDEwLjQ3MTZMMy42MzY3NSAxMC4yMDM3TDYuODQwODMgMi4xMjgzOUw2LjkyNTI1IDIuMTY0MDVMMTMuNDg4OCA0LjkzNjk4TDEzLjUzNzggNC45ODEyOEwxMi45MDg5IDYuNDYxNDNDMTIuODIyOSA2LjU5NjgyIDEyLjc0OTQgNi43Mzk4MiAxMi42ODk1IDYuODg4NjNDMTIuMjQ4OSA3Ljk5ODk5IDEzLjA4MSA5LjEwMzQyIDEzLjg2NzYgOS40MTQzOUMxNC42NTQyIDkuNzI1MzYgMTUuNjQ5MSA5LjA3NzM0IDE2LjA4OTYgNy45NjY5OEMxNi41MjQyIDYuODcxNzkgMTYuMDk5NSA1LjQ4MDQ0IDE1LjMzMyA1LjE0NDI4TDE1LjMzMzYgNS4xNDI5NEwxMy43MDEzIDQuNDY0NDVMNy4wMzA3OCAxLjY0OTc1TDcuMDMwNSAxLjY0OTYyTDYuODE0MTUgMS41NTgzNEw0LjM0NTQ4IDAuNTE2NjYzTDAuODM5ODQ0IDkuMzUxODVMMTAuMTcyNyAxMy4yOTQ3TDEwLjIyMTcgMTMuMzM5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-music three",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMyAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4yNDYzIDcuMDAyN0wxMS4yNDY5IDcuMDAxNDJMOS42MTQ2MSA2LjMyMjg4TDIuNzkyNTkgMy42NzU4MUw0LjUxNDQxIDIuMTQ2NzNDNC44NTEyNSAxLjY5ODUgNS4zNDg2OCAxLjM5NzYyIDUuOTAyNjQgMS4zMDcwNEM2LjQ1NjYgMS4yMTY0NiA3LjAyNDE5IDEuMzQzMTggNy40ODY3MSAxLjY2MDY5TDYuOTUyMzkgMC44NjgwNEM2Ljk1MjM5IDAuODY4MDQgNS45NDc5MSAtMC40NTkzNyA0LjU0MTgyIDAuOTQ1MDg2QzQuNTQxODIgMC45NDUwODYgMi44MDIwNyAzLjUwNTEzIDAuMDY5MzM1OSAyLjg1MjU2TDkuNDAyMTcgNi43OTU0NUw5LjQ1MTE1IDYuODM5NzVMOC44MjIyNiA4LjMxOTkxQzguNzM2MTQgOC40NTUyOSA4LjY2MjY4IDguNTk4MyA4LjYwMjgxIDguNzQ3MTFDOC4xNjIyNyA5Ljg1NzQzIDguOTk0MzQgMTAuOTYxOSA5Ljc4MDkzIDExLjI3MjhDMTAuNTY3NSAxMS41ODM4IDExLjU2MjMgMTAuOTM1OCAxMi4wMDI5IDkuODI1NDZDMTIuNDM3NSA4LjczMDI2IDEyLjAxMjggNy4zMzg5MiAxMS4yNDYzIDcuMDAyN1oiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-music two",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMyAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4zNzkzIDMuODQ5NzdMMTEuMzc5NyAzLjg0ODg0TDEwLjIwNDUgMy4zNjAyOUw1LjI0NTggMS4yNjc4OEwzLjQ2ODM3IDAuNTE3OTE0TDMuMzMxOTYgMC44NjE2NTZMMC45NDQzMzYgNi44NzkxNUw3LjY2Mzg5IDkuNzE4MDJMNy42OTkxNiA5Ljc0OTkxTDcuMjQ2MzUgMTAuODE1NkM3LjE4NDM3IDEwLjkxMzEgNy4xMzE0OSAxMS4wMTYxIDcuMDg4MzYgMTEuMTIzMkM2Ljc3MTE3IDExLjkyMjYgNy4zNzAyNyAxMi43MTc4IDcuOTM2NjEgMTIuOTQxN0M4LjUwMjk1IDEzLjE2NTYgOS4yMTkyMyAxMi42OTkxIDkuNTM2NDIgMTEuODk5NkM5Ljg0OTMgMTEuMTExMSA5LjU0MzU0IDEwLjEwOTMgOC45OTE2MyA5Ljg2NzI4TDguOTkyMTEgOS44NjYzNEw3LjgxNjg3IDkuMzc3NzlMMy43OTY1MiA3LjgxNzhMNi4wOTM2NiAyLjAyODQyTDUuNzUzMTkgMS44OTM4NEwzLjQ1NTIzIDcuNjg1MzdMMi45NTgxIDcuNDkyNDZMNS4yNjUwNCAxLjY3ODMzTDUuMzI1ODEgMS43MDQwMUwxMC4wNTE1IDMuNzAwNUwxMC4wODY4IDMuNzMyMzlMOS42MzQwMiA0Ljc5ODEzQzkuNTcyMDMgNC44OTU2IDkuNTE5MTQgNC45OTg1NSA5LjQ3NjAzIDUuMTA1NjlDOS4xNTg4IDUuOTA1MTIgOS43NTc5IDYuNzAwMzMgMTAuMzI0MiA2LjkyNDE5QzEwLjg5MDYgNy4xNDgwNiAxMS42MDY5IDYuNjgxNTUgMTEuOTI0MSA1Ljg4MjExQzEyLjIzNjkgNS4wOTM1NiAxMS45MzEyIDQuMDkxODEgMTEuMzc5MyAzLjg0OTc3WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-music one",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDEzIDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMTIuNjM2OSA4LjYyMjg0QzEwLjE5NzYgNy4yMzA3NiAxMC42ODU3IDQuMTc1ODcgMTAuNjg1NyA0LjE3NTg3QzEwLjYyNDMgMi4xOTEzMSA4Ljk4MTY5IDIuNDcyMjEgOC45ODE2OSAyLjQ3MjIxTDguMzgzODYgMi42MDg0MUM4LjEwNjE0IDIuNDc5NzUgNy44MDAzMiAyLjQyMzMgNy40OTQ4NyAyLjQ0NDMxTDYuNTg1NDYgMi41OTcwNUM4LjY1NjI2IDMuMDgyNzEgOC40ODYxMyA0LjgxMTg1IDguNDg2MTMgNC44MTE4NUw4Ljc3NjI1IDYuODMzNjZMMy4zNTAxNiA0LjY0ODcyTDMuOTczMTYgMy4xODI1QzQuMDU5MjYgMy4wNDcxMSA0LjEzMjcyIDIuOTA0MTEgNC4xOTI1OSAyLjc1NTNDNC42MzMxNCAxLjY0NDk0IDMuODAxMDcgMC41NDA1MDYgMy4wMTQ0OCAwLjIyOTU3NkMyLjIyNzg4IC0wLjA4MTQzMTQgMS4yMzMwNiAwLjU2NjYzMSAwLjc5MjQ3NiAxLjY3Njk1QzAuMzU3OTQ2IDIuNzcyMTQgMC43ODI2NDIgNC4xNjM0OCAxLjU0OTE2IDQuNDk5NjNMMS41NDg1MSA0LjUwMDk3TDMuMTgwOCA1LjE3OTQ2TDMuMTkyOTUgNS4xNDEwNEwxMi42MzY5IDguNjIyODRaTTkuODgxNDQgNS4wNzA0MUwxMC4wNTU0IDcuMDA1NjRDOS40NDEwNSA2LjE0NTE1IDkuMTUyNDMgNS4wOTUwMSA5LjI0MDkxIDQuMDQyMDVDOS4yMjY0OSAzLjY2NzUgOS4wOTk5MSAzLjMwNTg3IDguODc3NTEgMy4wMDM4NkM5LjIxOTQgMy4yMjI1IDkuNDk0MTEgMy41MzEyMSA5LjY3MTI3IDMuODk1ODlDOS44NDg0MyA0LjI2MDU4IDkuOTIxMTcgNC42NjcwNSA5Ljg4MTQ0IDUuMDcwNFY1LjA3MDQxWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})})]}),(0,s.jsxs)("div",{className:"malibu-desktop_small-uLoading-progress-bar ",children:[(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-progress",style:{width:this.state.width}}),(0,s.jsx)("label",{className:"loading",children:this.props.dataFull.title}),(0,s.jsxs)("label",{className:"number-percent",children:[(0,s.jsx)("input",{className:"number-percent-input",readOnly:!0}),"%"]})]}),this.props.dataFull.speed.title?(0,s.jsxs)("div",{className:"row",style:{margin:"auto",marginTop:"150px",width:"max-content"},children:[(0,s.jsx)("div",{className:"malibu-desktop-uLoading-rocket",children:(0,s.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfOSURBVHgBzZldbBzVFcf/dz722+t1SJOqH2RT6AMVNCsV+hKgS/pQlxRwGqlK3KjY6gMoqZT1S9SqlWyr5akPXktJVLVVsSVwTNUSC5IIPzSZUHho0hajBAWhAAYChJBk1/Z+785czp31rL27M7vrXQf4P/hez71z5zfnnnPuvbMMXwIlYn0hBZ7IoStq5FwG28AR4mARJiEk6nb3MHxBErAS/AME8BhhRAAeuloEhq7IEGUzfe7gS7E9UQ55mKpRu/ZW4T838MVY/wBN/0F6YKRZ31bgbzl4Mws7qRn8LQMvB5x/mAMxtKlG8LcEPBHrj8hgx6kaRodygE/KWGelhvYJP56haqhRP6lnI5mNepYaR2GACO8PcLyalpAyli9yvLmuFl+K7SPX4CNO7fIdd8Hd+1NIX98C5vWVGbIZlC78F4XZ4zBufuo4dpXlOdfWDbwRNPP64e7bB/X7DzQco/DS88jPPu/YbsF/XMD4urhKM0v7njgE5Z7vmfW8wfGf6zreWNRxccGATtO/ySOZbfKddwE0A/p7l23HsdzmgwJ/rmOLN4NW73sAnv4nzPrFBR3/uloy4VerW2XYs8VllkLp3w81dBsd+kMSOlB5UXGGFnL37jbLhSLHqY+KddBW2/R7hUqb+uCPGg2Jnvi0pmCNivbFQulCMrw9qIv9xZgIcSeJYGQbNpr10580zh4C/kJSx70bFIqFB5Gfecapqyb+tAQuYOHN04ZIesww8lFeAvbfZjS9T9rwlUr9/TRv2v9artxHZByJXti4ed2mF59sCi6AJV/hIEcxBi6ZeTmfL+AXPTq+qmJNsnORWuWa24L829BE6Qge3fNklLHi05yzsHWtVNJxGy9ioAVrC/FsulL/pl/CB+nG9212r+QKe2tDI/+eFxXJHnr/MGPyGdQs2dlsDo+3CC2kv33JXGCE7ulunnnvDpX76JcvOfQwxq2aZA/NRmqvl4olbJYN9AabT7klAV0893IZisBF4Dnp4a+plXRYPP9y/VjAfDB+bMYW3AlaKF8orMnalgq0EvLlad+xWTEBrQXHLTHc7pPMHH738oyIFy2e+3fdOAx8tPr/CvSTYXKPd+0ebhgGArk0jm3V0Y5EhvAd+F0lNTpJuEj2b2MV97IkrN0df3Zr1ZhWZdmnbSUyyTZv6y5SKxFomSN/qLhNrQRojvJ25shTddDm/eC7aq+ZFicXGSAXeRoOWlpK48/fKOJODzqWyNFiTyI2XiYULe3OwWhqIhh/drD2ohktBD1sc4PGDf46bYLmvusxwgQ9jBaVNhiuGRK2KvWuVd7G/q+lcYSL0DZs1K5NEfkaVtpjSHKDjSOnxLWZeNLqdCL285aOXwL4rykvTmdd+MvGRXQq4SJW3q6VAib1lZnZuJFRRlYDW6KI/kGzU94LGTemUx6kOcMOTwGb5LVnoNWizdtoT3xqzqldAWfbqNPgmekjE3Yd0i/8uI+/n4vyGyp4oj4PCysfS3vwIoELCeC9gRw6he6OT4006qOAXEP7+5GZ2obE8WjI5fKNMc4GWDgPdkcRsuylvawLhTkOI1WG/m0igHdLK6viXn+uI2sT9HgzaCHH+c+c2PkaFREKXCjdXigBd6VNQCf+z3DovL8K+lFfHr/syqJD6JbiSXGAHjOhZQnuTV0Q5WpJAeA3b1dDiwzSIfRoK5a2VAeeOvnwAI1ivrUdtNDkq25cvlYN/VRPCu2IPsslGYwhgp5Yy311VBIv53Q15LOFnr3gwuQrKytR5PYS/rg9Db+09pX1co5h7BMMBtcILVRl8aUXe6NUhAXwap+2dHVBMq1tafe9BRz4YRa8QIH6DsyyFaUoqP+ZoJm7KYvVL4k2VAVORzMzp0u+leMN51ysrGZ99qJqwgfcHId2ZnH/t8vnSOaiGfoO7QTnmj/wpQVGwBJu0KP9AQ/OPndUQxuqApeZyOmkkoHCjRSMog7F54IS9CKVZ3jlLRWPb89j9315E77q3i30EnOqsF7ICXh2keFCUYHb7YZXMWNEQ5uqAqfIDgu769llS5LLyF0r/jzWn64DtlTKZcF6WGj1IjWXYXidEs0/EhKykmwC+/0rQU2zOYn1ACeX0MoDYkCUKuVvy02cgE3oVB5cfJLq1pNIqBoZ4Oyvr0g4n5XGVFWB4lXhV+qObvNYPvi2o6q04d15clCnh5ovIaxNbmJJ+HpxsT5PC+DSQvk6+1ZmKBh/Zhdt+uOXEEBXMACP1wOlHloYZFKb/tM82lRdHq+kQ7K2JWFRAccUes/gynVOMZC/njJfyuB8PPDoqYlKo8rCcNY8beji6EBV4InjvWGIdEhnQWFtI18kK+eoLJnt4roJTKClpRz0pbxZJ2mBR05VL9W0eXPaUNAnj0G7XWjb4LKsRKxParkPkxZUlYS7rAIuW7oGunx+tf/Nh1xk9Myxwxo6VJWPS5LIKoROX52WwebIOqMSY+buUVi+RDNgWVnn7KE6S5dHisIB+vTU4RGsg6rTIWdzBuNDYDwpF1yad9fMvLieOfkT+j2Hz5v7Cs7P6pBmuh45odkNWLZ2/VGQXnXozNThjvx6tdb9x6sdew+M1fzSpnEyhjZ1tIV1tXWt+TNzI0X79x/kvAKtiQVGmz46gVugdbN49Ge/6mMyPyi+DFD6mdGmOw/ARvoMZ7pw6Vztu/cAAAAASUVORK5CYII=",alt:"rocket"})}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-speed",children:[(0,s.jsx)("label",{children:this.props.dataFull.speed.title}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-speed-number "+(this.props.dataFull.cmd.error.message?"error":""),children:[(0,s.jsx)("div",{style:{margin:"auto"},children:this.props.dataFull.speed.number_speed}),(0,s.jsx)("img",{src:this.props.dataFull.cmd.error.message?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGiSURBVHgB7ZXRTcMwEIbvXPJStciEB6jUVMkG7QZlg44AE5QNygYdATahG8AGrQRSWx7AEhIvSDli5AQ3cWO7ooiHfpIlxz75fOf/LgAH/gPL0+hSDvgL1jwarcOI5Fjy7hA8YeALg2k+bSBOwBMvhyqNcf5NCMNV2LsGD9DVcMnPY8aCe92hQnyk70kihHA5xznCBgsmBmcS3mJt59Q6Raiim9fZpOln0hGrBVhwipBhMLXZNDC4BQesDr+FgjDS15BoBkSP+poUkEuZWFOa1ZtMZawtibPXpxM5eQmjN8reUNtbZHtJ3Xms3lnXJJRCjaTNFfE67N3ALg6lUBDQq8bUNcZzzrm3Q1kGpXTlFGu4Zb+uTIxvaCsDhEwwhEIKZZtNmtJFRzzPyutHJmPVUbZCgH2b3FSfnVXOLi+U+6UBKZQ7ObAqmp9LyTIx/MI27ikfu8naDxaHhfQNJVOxzfrsQO+zGxE2WWtsOcCXuMmON5ReROjSL3dEZH12kPfZIkL1N9gHXO+zekpHsCdIe6aiLCiFq5RRH/YBVcvjwK/xBRbpfbJqi9GHAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgB3ZZLUuMwEIa7pZqZ5eQInhMM3MBZThlqnBMQdiwIBScIuQFVAYodzgWIgQKW+AaEExBuEJYkZTUtB8dvEtuw4d9EVrr6a0ndagF8d+GqhjtD2/jx0zcF4l9F2NBzAmmiiB5nU+mdtdzxKn6WAnevN0yUsgsE5hJPHpAa9K1r52OzAu0P7Yb/i84ZZEM5ObMp9opWnAvcv7MNX9E9Dw2opjFDm3lQ/ALYAiqnuH7UcifxSZG2Ylj3E2BaRnAkKSWAnZvNNv+0oaKIaOADrvO+ufMJsHXSFQIBxRbUgB1vXLVPLXfE2Xq5cKkzPI4IB+9n9wQVFMJifhI5oEAaJ9bFsx4vVugr34QKWgYLbPxZMxwvgKRwLcffGGrCAghGvqMzRGjEjfj6Ouhbl384kB7UgAWuBf7OAtNGpIIAjjfdQ/7argpLKwISTFJRdffuWkHW9i3XCaFVYKToJQNEQaOsoXLiUN7eZpWVoRCjDFAK6UFudBGUt9crC9OaTcHLAI/+8UWL0R9F0LIwIkj0ykTSkJ+fkSG0c/t/yLAHKHHXIuIg8Z020E4r9MAiOVxaiQzPlIV8DbJxDPWle2JmxzJA3b+kwGZNaGEDzi18nUAaqmsOyopbk268pZ4YcXVu7DaDtxA/fkTpbATCXlg6xfGsqHk5gImg1gjmdyMCvRDQqMwz8fvrDeQ/QIleItNVAAAAAElFTkSuQmCC",alt:"icon"})]})]})]}):null,this.props.dataFull.cmd.error.message?(0,s.jsx)("div",{className:"malibu-desktop-uLoading-message-error",children:this.props.dataFull.cmd.error.message}):null]})]}):"tablet"===this.state.device?(0,s.jsxs)("div",{className:"malibu-tablet-uLoading "+this.state.class,children:[(0,s.jsxs)("div",{style:{display:"none"},children:[(0,s.jsx)("i",{className:"material-icons",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-round",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-outlined",style:{visibility:"hidden"},children:"menu"})]}),(0,s.jsxs)("div",{className:"malibu-tablet-uLoading-header",children:[(0,s.jsxs)("div",{style:{position:"absolute",marginLeft:"198px",zIndex:"3"},children:[(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMzIiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDEzMyAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02Ni4wODI4IDExNy4yNDVDOTUuNjg4NyAxMTcuMjQ1IDExOS42ODkgOTMuMjg5MSAxMTkuNjg5IDYzLjczNzRDMTE5LjY4OSAzNC4xODU4IDk1LjY4ODcgMTAuMjI5NSA2Ni4wODI4IDEwLjIyOTVDMzYuNDc2OSAxMC4yMjk1IDEyLjQ3NjYgMzQuMTg1OCAxMi40NzY2IDYzLjczNzRDMTIuNDc2NiA5My4yODkxIDM2LjQ3NjkgMTE3LjI0NSA2Ni4wODI4IDExNy4yNDVaIiBmaWxsPSIjM0YzRDU2Ii8+CjxwYXRoIGQ9Ik0zMi4zMzQ0IDY4LjAzMjZDMzMuNjY1OCA2Ni40NDE3IDM1LjMzMDkgNjUuMTYyIDM3LjIxMiA2NC4yODM4QzM5LjA5MzIgNjMuNDA1NiA0MS4xNDQ3IDYyLjk1MDUgNDMuMjIxNCA2Mi45NTA1QzQ1LjI5ODEgNjIuOTUwNSA0Ny4zNDk2IDYzLjQwNTYgNDkuMjMwNyA2NC4yODM4QzUxLjExMTkgNjUuMTYyIDUyLjc3NyA2Ni40NDE3IDU0LjEwODQgNjguMDMyNkM1Ni4zODY1IDY1Ljg2MTkgNTcuOTYxIDYzLjA1OTggNTguNjI5MSA1OS45ODc2QzU5LjI5NzIgNTYuOTE1NSA1OS4wMjgyIDUzLjcxNCA1Ny44NTY4IDUwLjc5NThDNTYuNjg1NCA0Ny44Nzc2IDU0LjY2NTIgNDUuMzc2NSA1Mi4wNTY3IDQzLjYxNDhDNDkuNDQ4MiA0MS44NTMxIDQ2LjM3MDkgNDAuOTExNiA0My4yMjE0IDQwLjkxMTZDNDAuMDcxOSA0MC45MTE2IDM2Ljk5NDYgNDEuODUzMSAzNC4zODYxIDQzLjYxNDhDMzEuNzc3NiA0NS4zNzY1IDI5Ljc1NzQgNDcuODc3NiAyOC41ODYgNTAuNzk1OEMyNy40MTQ2IDUzLjcxNCAyNy4xNDU2IDU2LjkxNTUgMjcuODEzNyA1OS45ODc2QzI4LjQ4MTggNjMuMDU5OCAzMC4wNTYzIDY1Ljg2MTkgMzIuMzM0NCA2OC4wMzI2VjY4LjAzMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzQuOTA0IDY4LjAzMjZDNzYuMjM1MyA2Ni40NDE3IDc3LjkwMDQgNjUuMTYxOSA3OS43ODE2IDY0LjI4MzhDODEuNjYyOCA2My40MDU2IDgzLjcxNDIgNjIuOTUwNSA4NS43OTEgNjIuOTUwNUM4Ny44Njc3IDYyLjk1MDUgODkuOTE5MSA2My40MDU2IDkxLjgwMDMgNjQuMjgzOEM5My42ODE1IDY1LjE2MTkgOTUuMzQ2NSA2Ni40NDE3IDk2LjY3NzkgNjguMDMyNkM5OC45NTYgNjUuODYxOSAxMDAuNTMxIDYzLjA1OTggMTAxLjE5OSA1OS45ODc2QzEwMS44NjcgNTYuOTE1NSAxMDEuNTk4IDUzLjcxNCAxMDAuNDI2IDUwLjc5NThDOTkuMjU0OSA0Ny44Nzc2IDk3LjIzNDggNDUuMzc2NSA5NC42MjYzIDQzLjYxNDhDOTIuMDE3OCA0MS44NTMxIDg4Ljk0MDQgNDAuOTExNiA4NS43OTEgNDAuOTExNkM4Mi42NDE1IDQwLjkxMTYgNzkuNTY0MSA0MS44NTMxIDc2Ljk1NTYgNDMuNjE0OEM3NC4zNDcxIDQ1LjM3NjUgNzIuMzI3IDQ3Ljg3NzYgNzEuMTU1NiA1MC43OTU4QzY5Ljk4NDEgNTMuNzE0IDY5LjcxNTEgNTYuOTE1NSA3MC4zODMyIDU5Ljk4NzZDNzEuMDUxMyA2My4wNTk4IDcyLjYyNTkgNjUuODYxOSA3NC45MDQgNjguMDMyNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNy40NTQ4IDgzLjQwOTRDMzAuOTM3OSA4My40MDk0IDMzLjc2MTQgODAuNTkxIDMzLjc2MTQgNzcuMTE0M0MzMy43NjE0IDczLjYzNzcgMzAuOTM3OSA3MC44MTkzIDI3LjQ1NDggNzAuODE5M0MyMy45NzE4IDcwLjgxOTMgMjEuMTQ4MiA3My42Mzc3IDIxLjE0ODIgNzcuMTE0M0MyMS4xNDgyIDgwLjU5MSAyMy45NzE4IDgzLjQwOTQgMjcuNDU0OCA4My40MDk0WiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNOTkuOTgwNyA4My40MDk0QzEwMy40NjQgODMuNDA5NCAxMDYuMjg3IDgwLjU5MSAxMDYuMjg3IDc3LjExNDNDMTA2LjI4NyA3My42Mzc3IDEwMy40NjQgNzAuODE5MyA5OS45ODA3IDcwLjgxOTNDOTYuNDk3NiA3MC44MTkzIDkzLjY3NDEgNzMuNjM3NyA5My42NzQxIDc3LjExNDNDOTMuNjc0MSA4MC41OTEgOTYuNDk3NiA4My40MDk0IDk5Ljk4MDcgODMuNDA5NFoiIGZpbGw9IiNGRjY1ODQiLz4KPHBhdGggZD0iTTYzLjcxNzcgNjQuNTI0MUw1OC45ODc4IDg0Ljk4MzFMNjYuODcxIDc3LjExNDRMNjMuNzE3NyA2NC41MjQxWiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNODguMDIxNiAxNDMuMjEyTDgyLjY1MTYgMTM4LjcxNEw4Mi43NzY3IDE0My4yMTJIODEuMTA4OEw4MC45NzU2IDEzOC40NTZMNzMuNzI1MiAxNDMuMjEySDcwLjY4OTlMODAuOTIxNCAxMzYuNUw4MC41MjUxIDEyMi40MDRMODAuMjI5MSAxMTEuNzU5TDgxLjg5MjggMTExLjcxM0w4Mi4xOTMgMTIyLjQwNEw4Mi41ODkgMTM2LjQ4N0w5MC42MTQ3IDE0My4yMTJIODguMDIxNloiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTYyLjc5MzEgMTQzLjIxMkw1Ny40MjMgMTM4LjcxNEw1Ny41NDgyIDE0My4yMTJINTUuODg0OEw1NS43NTEzIDEzOC40NTZMNDguNTAwOCAxNDMuMjEySDQ1LjQ2NTZMNTUuNjkyOSAxMzYuNUw1NS4yOTY5IDEyMi40MDRMNTUuMDAwOCAxMTEuNzU5TDU2LjY2ODQgMTExLjcxM0w1Ni45Njg3IDEyMi40MDRMNTcuMzYwNSAxMzYuNDg3TDY1LjM4NjUgMTQzLjIxMkg2Mi43OTMxWiIgZmlsbD0iIzNGM0Q1NiIvPgo8cGF0aCBkPSJNNjYuODcxMyA2LjI5NTAxQzY1LjQwMDQgNi4yOTUwMSA2NC4xMDI4IDcuNDM1NDggNjMuMjM1MyA5LjE4NzIzQzYyLjQ3MDYgNi41NTMxMiA2MC44NjQxIDQuNzIxMjcgNTguOTg4IDQuNzIxMjdDNTguODYwNSA0LjczMzkyIDU4LjczNCA0Ljc1NTEzIDU4LjYwOTMgNC43ODQ3NkM1Ny44ODgyIDEuOTcyMzYgNTYuMjEyMSAtMi40Nzk1NWUtMDUgNTQuMjU4IC0yLjQ3OTU1ZS0wNUM1MS42NDU3IC0yLjQ3OTU1ZS0wNSA0OS41MjgxIDMuNTIyOTkgNDkuNTI4MSA3Ljg2ODhDNDkuNTI4MSAxMi4yMTQ2IDUxLjY0NTcgMTUuNzM3NiA1NC4yNTggMTUuNzM3NkM1NC4zODU1IDE1LjcyNSA1NC41MTIxIDE1LjcwMzcgNTQuNjM2NyAxNS42NzQxQzU1LjM1NzkgMTguNDg2NSA1Ny4wMzM5IDIwLjQ1ODkgNTguOTg4IDIwLjQ1ODlDNjAuNDU4OSAyMC40NTg5IDYxLjc1NjUgMTkuMzE4NCA2Mi42MjQgMTcuNTY2N0M2My4zODg3IDIwLjIwMDggNjQuOTk1MSAyMi4wMzI2IDY2Ljg3MTMgMjIuMDMyNkM2OS40ODM2IDIyLjAzMjYgNzEuNjAxMiAxOC41MDk2IDcxLjYwMTIgMTQuMTYzOEM3MS42MDEyIDkuODE4MDEgNjkuNDgzNiA2LjI5NTAxIDY2Ljg3MTMgNi4yOTUwMVoiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTE1Ljc2NjYgODQuMDE0NUMxMy42OTYxIDg0LjAxNDUgMTEuNjQ1OSA4My42MDc0IDkuNzMzMDEgODIuODE2NkM3LjgyMDEyIDgyLjAyNTcgNi4wODIwMyA4MC44NjY1IDQuNjE3OTcgNzkuNDA1MUMzLjE1MzkxIDc3Ljk0MzcgMS45OTI1NiA3Ni4yMDg4IDEuMjAwMjEgNzQuMjk5NEMwLjQwNzg3MiA3Mi4zOTAxIDYuNDI5NWUtMDUgNzAuMzQzNiA2LjQyOTVlLTA1IDY4LjI3NjlMNi40Mjk1ZS0wNSA2MC40MDhDNi40Mjk1ZS0wNSA1Ni4yMzQyIDEuNjYxMTcgNTIuMjMxMyA0LjYxNzk3IDQ5LjI3OTlDNy41NzQ3NyA0Ni4zMjg1IDExLjU4NTEgNDQuNjcwNCAxNS43NjY2IDQ0LjY3MDRWNDQuNjcwNEwxNS43NjY2IDg0LjAxNDVaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMTYuMzk5IDQ0LjY3MDVDMTE4LjQ3IDQ0LjY3MDUgMTIwLjUyIDQ1LjA3NzYgMTIyLjQzMyA0NS44Njg1QzEyNC4zNDYgNDYuNjU5NCAxMjYuMDg0IDQ3LjgxODYgMTI3LjU0OCA0OS4yOEMxMjkuMDEyIDUwLjc0MTMgMTMwLjE3MyA1Mi40NzYyIDEzMC45NjYgNTQuMzg1NkMxMzEuNzU4IDU2LjI5NSAxMzIuMTY2IDU4LjM0MTQgMTMyLjE2NiA2MC40MDgxVjY4LjI3N0MxMzIuMTY2IDcwLjM0MzcgMTMxLjc1OCA3Mi4zOTAxIDEzMC45NjYgNzQuMjk5NUMxMzAuMTczIDc2LjIwODkgMTI5LjAxMiA3Ny45NDM4IDEyNy41NDggNzkuNDA1MUMxMjYuMDg0IDgwLjg2NjUgMTI0LjM0NiA4Mi4wMjU3IDEyMi40MzMgODIuODE2NkMxMjAuNTIgODMuNjA3NSAxMTguNDcgODQuMDE0NiAxMTYuMzk5IDg0LjAxNDZWODQuMDE0NlY0NC42NzA1SDExNi4zOTlaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMjQuNjYxIDYxLjY0NDZIMTIyLjE2QzEyMi4xNiAyOS45Nzc1IDk2LjM0OTIgNC4yMTQyMyA2NC42MjM3IDQuMjE0MjNDMzIuODk4MyA0LjIxNDIzIDcuMDg3NzUgMjkuOTc3NSA3LjA4Nzc1IDYxLjY0NDZINC41ODYxOEM0LjU4NjE4IDI4LjYwMDUgMzEuNTE4OSAxLjcxNzI2IDY0LjYyMzcgMS43MTcyNkM5Ny43Mjg2IDEuNzE3MjYgMTI0LjY2MSAyOC42MDA2IDEyNC42NjEgNjEuNjQ0NloiIGZpbGw9IiM1NTU3RTQiLz4KPC9zdmc+Cg==",alt:"chicken"}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-chiken-eye left"}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-chiken-eye right"}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-path",children:(0,s.jsx)("svg",{width:"12",height:"3",xmlns:"http://www.w3.org/2000/svg",style:{visibility:"hidden"},children:(0,s.jsx)("path",{d:"M 0 2 Q 6 -5 12 2 M 12 2 Q 6 -5 0 2",stroke:"black",fill:"transparent"})})})]}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-ground",style:{position:"absolute",marginLeft:"228px"},children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSI4NyIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDI4NyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yODYuMzUxIDExLjY4Nkw4MS40MDg4IDE0Ljc3MDFMMC4wNTc2MTcyIDAuMzc4MTc0SDEyNy4wNThMMjg2LjM1MSAxMS42ODZaIiBmaWxsPSIjRTZFNkU2Ii8+DQo8L3N2Zz4NCg==",alt:"ground"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-tree one",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-tree two",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-tree three",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-tree four",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-tree five",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-sun"}),(0,s.jsxs)("div",{className:"malibu-tablet-uLoading-music-list",style:{position:"absolute"},children:[(0,s.jsx)("div",{className:"malibu-tablet-uLoading-music six",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMiAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS42NDU5IDEyLjA5MDVMMTkuNjQ3IDEyLjA4ODJMMTYuODM3MiAxMC45MjAyTDUuMDkzNDUgNi4zNjMzNUw4LjA1NzQ1IDMuNzMxMTJDOC4wNTc0NSAzLjczMTEyIDEwLjAyOSAxLjAwMDU1IDEzLjE3NDEgMi44OTQ0OUwxMi4yNTQzIDEuNTI5OTVDMTIuMjU0MyAxLjUyOTk1IDEwLjUyNTEgLTAuNzU1MTU3IDguMTA0NjUgMS42NjI1NEM4LjEwNDY1IDEuNjYyNTQgNS4xMDk3NiA2LjA2OTU0IDAuNDA1NTE4IDQuOTQ2MTlMMTYuNDcxNCAxMS43MzM2TDE2LjU1NTcgMTEuODA5OUwxNS40NzMxIDE0LjM1NzlDMTUuMzI0OSAxNC41OTEgMTUuMTk4NSAxNC44MzcxIDE1LjA5NTQgMTUuMDkzM0MxNC4zMzcgMTcuMDA0NyAxNS43Njk0IDE4LjkwNTkgMTcuMTIzNCAxOS40NDEyQzE4LjQ3NzUgMTkuOTc2NiAyMC4xOTAxIDE4Ljg2MSAyMC45NDg1IDE2Ljk0OTZDMjEuNjk2NSAxNS4wNjQzIDIwLjk2NTQgMTIuNjY5MiAxOS42NDU5IDEyLjA5MDVaIiBmaWxsPSIjM0YzRDU2Ii8+DQo8L3N2Zz4NCg==",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-music five",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAzMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yOS4yNjg5IDIwLjM2ODFDMjMuNDM2OCAxNy4wMzk3IDI0LjYwMzkgOS43MzU4NCAyNC42MDM5IDkuNzM1ODRDMjQuNDU3MSA0Ljk5MDg5IDIwLjUyOTcgNS42NjI1NiAyMC41Mjk3IDUuNjYyNTZMMTkuMTAwMyA1Ljk4ODE0QzE4LjQzNjMgNS42ODA1MSAxNy43MDUxIDUuNTQ1NTMgMTYuOTc0OCA1LjU5NTc1TDE0LjgwMDUgNS45NjFDMTkuNzUxNiA3LjEyMjE5IDE5LjM0NDggMTEuMjU2NCAxOS4zNDQ4IDExLjI1NjRMMjAuMDM4NCAxNi4wOTAzTDcuMDY1MTUgMTAuODY2NEw4LjU1NDY5IDcuMzYwNjdDOC43NjA1NSA3LjAzNjk2IDguOTM2MTggNi42OTUwNiA5LjA3OTM4IDYuMzM5MjhDMTAuMTMyNyAzLjY4NDUzIDguMTQzMyAxLjA0MzkxIDYuMjYyNTkgMC4zMDA0MkM0LjM4MTg5IC0wLjQ0MzA2NyAyLjAwMzM2IDEuMTA2MyAwLjk1MDAxOCAzLjc2MUMtMC4wODg5Nzk3IDYuMzc5NTIgMC45MjY0MDcgOS43MDYxNSAyLjc1OTExIDEwLjUwOTlMMi43NTc1NiAxMC41MTNMNi42NjAyMiAxMi4xMzUzTDYuNjg5MjcgMTIuMDQzNUwyOS4yNjg5IDIwLjM2ODFaTTIyLjY4MDkgMTEuODc0NkwyMy4wOTgzIDE2LjUxNzVDMjAuNjQ4OCAxMy4yNzE5IDIxLjE0OTUgOS40MTU3OCAyMS4xNDk1IDkuNDE1NzhDMjEuMTE1IDguNTIwMjkgMjAuODEyMyA3LjY1NTY5IDIwLjI4MDYgNi45MzM1OUMyMy4wOTQ0IDguNjE0MzIgMjIuNjgwOSAxMS44NzQ2IDIyLjY4MDkgMTEuODc0NkgyMi42ODA5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-music four",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxNyAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMC4yMjE3IDEzLjMzOUw5LjU5Mjc0IDE0LjgxOTJDOS41MDY2NSAxNC45NTQ2IDkuNDMzMjEgMTUuMDk3NiA5LjM3MzM0IDE1LjI0NjRDOC45MzI3NSAxNi4zNTY3IDkuNzY0ODQgMTcuNDYxMSAxMC41NTE0IDE3Ljc3MjFDMTEuMzM4IDE4LjA4MzEgMTIuMzMyOSAxNy40MzUxIDEyLjc3MzQgMTYuMzI0N0MxMy4yMDggMTUuMjI5NSAxMi43ODMzIDEzLjgzODIgMTIuMDE2OCAxMy41MDJMMTIuMDE3NCAxMy41MDA3TDEwLjM4NTEgMTIuODIyMkw0LjgwMTI2IDEwLjY1NTVMNy45OTE3NCAyLjYxNDYzTDcuNTE4ODggMi40Mjc2OEw0LjMyNzE5IDEwLjQ3MTZMMy42MzY3NSAxMC4yMDM3TDYuODQwODMgMi4xMjgzOUw2LjkyNTI1IDIuMTY0MDVMMTMuNDg4OCA0LjkzNjk4TDEzLjUzNzggNC45ODEyOEwxMi45MDg5IDYuNDYxNDNDMTIuODIyOSA2LjU5NjgyIDEyLjc0OTQgNi43Mzk4MiAxMi42ODk1IDYuODg4NjNDMTIuMjQ4OSA3Ljk5ODk5IDEzLjA4MSA5LjEwMzQyIDEzLjg2NzYgOS40MTQzOUMxNC42NTQyIDkuNzI1MzYgMTUuNjQ5MSA5LjA3NzM0IDE2LjA4OTYgNy45NjY5OEMxNi41MjQyIDYuODcxNzkgMTYuMDk5NSA1LjQ4MDQ0IDE1LjMzMyA1LjE0NDI4TDE1LjMzMzYgNS4xNDI5NEwxMy43MDEzIDQuNDY0NDVMNy4wMzA3OCAxLjY0OTc1TDcuMDMwNSAxLjY0OTYyTDYuODE0MTUgMS41NTgzNEw0LjM0NTQ4IDAuNTE2NjYzTDAuODM5ODQ0IDkuMzUxODVMMTAuMTcyNyAxMy4yOTQ3TDEwLjIyMTcgMTMuMzM5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-music three",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMyAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4yNDYzIDcuMDAyN0wxMS4yNDY5IDcuMDAxNDJMOS42MTQ2MSA2LjMyMjg4TDIuNzkyNTkgMy42NzU4MUw0LjUxNDQxIDIuMTQ2NzNDNC44NTEyNSAxLjY5ODUgNS4zNDg2OCAxLjM5NzYyIDUuOTAyNjQgMS4zMDcwNEM2LjQ1NjYgMS4yMTY0NiA3LjAyNDE5IDEuMzQzMTggNy40ODY3MSAxLjY2MDY5TDYuOTUyMzkgMC44NjgwNEM2Ljk1MjM5IDAuODY4MDQgNS45NDc5MSAtMC40NTkzNyA0LjU0MTgyIDAuOTQ1MDg2QzQuNTQxODIgMC45NDUwODYgMi44MDIwNyAzLjUwNTEzIDAuMDY5MzM1OSAyLjg1MjU2TDkuNDAyMTcgNi43OTU0NUw5LjQ1MTE1IDYuODM5NzVMOC44MjIyNiA4LjMxOTkxQzguNzM2MTQgOC40NTUyOSA4LjY2MjY4IDguNTk4MyA4LjYwMjgxIDguNzQ3MTFDOC4xNjIyNyA5Ljg1NzQzIDguOTk0MzQgMTAuOTYxOSA5Ljc4MDkzIDExLjI3MjhDMTAuNTY3NSAxMS41ODM4IDExLjU2MjMgMTAuOTM1OCAxMi4wMDI5IDkuODI1NDZDMTIuNDM3NSA4LjczMDI2IDEyLjAxMjggNy4zMzg5MiAxMS4yNDYzIDcuMDAyN1oiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-music two",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMyAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4zNzkzIDMuODQ5NzdMMTEuMzc5NyAzLjg0ODg0TDEwLjIwNDUgMy4zNjAyOUw1LjI0NTggMS4yNjc4OEwzLjQ2ODM3IDAuNTE3OTE0TDMuMzMxOTYgMC44NjE2NTZMMC45NDQzMzYgNi44NzkxNUw3LjY2Mzg5IDkuNzE4MDJMNy42OTkxNiA5Ljc0OTkxTDcuMjQ2MzUgMTAuODE1NkM3LjE4NDM3IDEwLjkxMzEgNy4xMzE0OSAxMS4wMTYxIDcuMDg4MzYgMTEuMTIzMkM2Ljc3MTE3IDExLjkyMjYgNy4zNzAyNyAxMi43MTc4IDcuOTM2NjEgMTIuOTQxN0M4LjUwMjk1IDEzLjE2NTYgOS4yMTkyMyAxMi42OTkxIDkuNTM2NDIgMTEuODk5NkM5Ljg0OTMgMTEuMTExMSA5LjU0MzU0IDEwLjEwOTMgOC45OTE2MyA5Ljg2NzI4TDguOTkyMTEgOS44NjYzNEw3LjgxNjg3IDkuMzc3NzlMMy43OTY1MiA3LjgxNzhMNi4wOTM2NiAyLjAyODQyTDUuNzUzMTkgMS44OTM4NEwzLjQ1NTIzIDcuNjg1MzdMMi45NTgxIDcuNDkyNDZMNS4yNjUwNCAxLjY3ODMzTDUuMzI1ODEgMS43MDQwMUwxMC4wNTE1IDMuNzAwNUwxMC4wODY4IDMuNzMyMzlMOS42MzQwMiA0Ljc5ODEzQzkuNTcyMDMgNC44OTU2IDkuNTE5MTQgNC45OTg1NSA5LjQ3NjAzIDUuMTA1NjlDOS4xNTg4IDUuOTA1MTIgOS43NTc5IDYuNzAwMzMgMTAuMzI0MiA2LjkyNDE5QzEwLjg5MDYgNy4xNDgwNiAxMS42MDY5IDYuNjgxNTUgMTEuOTI0MSA1Ljg4MjExQzEyLjIzNjkgNS4wOTM1NiAxMS45MzEyIDQuMDkxODEgMTEuMzc5MyAzLjg0OTc3WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-music one",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDEzIDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMTIuNjM2OSA4LjYyMjg0QzEwLjE5NzYgNy4yMzA3NiAxMC42ODU3IDQuMTc1ODcgMTAuNjg1NyA0LjE3NTg3QzEwLjYyNDMgMi4xOTEzMSA4Ljk4MTY5IDIuNDcyMjEgOC45ODE2OSAyLjQ3MjIxTDguMzgzODYgMi42MDg0MUM4LjEwNjE0IDIuNDc5NzUgNy44MDAzMiAyLjQyMzMgNy40OTQ4NyAyLjQ0NDMxTDYuNTg1NDYgMi41OTcwNUM4LjY1NjI2IDMuMDgyNzEgOC40ODYxMyA0LjgxMTg1IDguNDg2MTMgNC44MTE4NUw4Ljc3NjI1IDYuODMzNjZMMy4zNTAxNiA0LjY0ODcyTDMuOTczMTYgMy4xODI1QzQuMDU5MjYgMy4wNDcxMSA0LjEzMjcyIDIuOTA0MTEgNC4xOTI1OSAyLjc1NTNDNC42MzMxNCAxLjY0NDk0IDMuODAxMDcgMC41NDA1MDYgMy4wMTQ0OCAwLjIyOTU3NkMyLjIyNzg4IC0wLjA4MTQzMTQgMS4yMzMwNiAwLjU2NjYzMSAwLjc5MjQ3NiAxLjY3Njk1QzAuMzU3OTQ2IDIuNzcyMTQgMC43ODI2NDIgNC4xNjM0OCAxLjU0OTE2IDQuNDk5NjNMMS41NDg1MSA0LjUwMDk3TDMuMTgwOCA1LjE3OTQ2TDMuMTkyOTUgNS4xNDEwNEwxMi42MzY5IDguNjIyODRaTTkuODgxNDQgNS4wNzA0MUwxMC4wNTU0IDcuMDA1NjRDOS40NDEwNSA2LjE0NTE1IDkuMTUyNDMgNS4wOTUwMSA5LjI0MDkxIDQuMDQyMDVDOS4yMjY0OSAzLjY2NzUgOS4wOTk5MSAzLjMwNTg3IDguODc3NTEgMy4wMDM4NkM5LjIxOTQgMy4yMjI1IDkuNDk0MTEgMy41MzEyMSA5LjY3MTI3IDMuODk1ODlDOS44NDg0MyA0LjI2MDU4IDkuOTIxMTcgNC42NjcwNSA5Ljg4MTQ0IDUuMDcwNFY1LjA3MDQxWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})})]}),(0,s.jsxs)("div",{className:"malibu-tablet-uLoading-progress-bar ",children:[(0,s.jsx)("div",{className:"malibu-tablet-uLoading-progress",style:{width:this.state.width}}),(0,s.jsx)("label",{className:"loading",children:this.props.dataFull.title}),(0,s.jsxs)("label",{className:"number-percent",children:[(0,s.jsx)("input",{className:"number-percent-input",readOnly:!0}),"%"]})]}),this.props.dataFull.speed.title?(0,s.jsxs)("div",{className:"row",style:{margin:"auto",marginTop:"150px",width:"fit-content"},children:[(0,s.jsx)("div",{className:"malibu-desktop-uLoading-rocket",children:(0,s.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfOSURBVHgBzZldbBzVFcf/dz722+t1SJOqH2RT6AMVNCsV+hKgS/pQlxRwGqlK3KjY6gMoqZT1S9SqlWyr5akPXktJVLVVsSVwTNUSC5IIPzSZUHho0hajBAWhAAYChJBk1/Z+785czp31rL27M7vrXQf4P/hez71z5zfnnnPuvbMMXwIlYn0hBZ7IoStq5FwG28AR4mARJiEk6nb3MHxBErAS/AME8BhhRAAeuloEhq7IEGUzfe7gS7E9UQ55mKpRu/ZW4T838MVY/wBN/0F6YKRZ31bgbzl4Mws7qRn8LQMvB5x/mAMxtKlG8LcEPBHrj8hgx6kaRodygE/KWGelhvYJP56haqhRP6lnI5mNepYaR2GACO8PcLyalpAyli9yvLmuFl+K7SPX4CNO7fIdd8Hd+1NIX98C5vWVGbIZlC78F4XZ4zBufuo4dpXlOdfWDbwRNPP64e7bB/X7DzQco/DS88jPPu/YbsF/XMD4urhKM0v7njgE5Z7vmfW8wfGf6zreWNRxccGATtO/ySOZbfKddwE0A/p7l23HsdzmgwJ/rmOLN4NW73sAnv4nzPrFBR3/uloy4VerW2XYs8VllkLp3w81dBsd+kMSOlB5UXGGFnL37jbLhSLHqY+KddBW2/R7hUqb+uCPGg2Jnvi0pmCNivbFQulCMrw9qIv9xZgIcSeJYGQbNpr10580zh4C/kJSx70bFIqFB5Gfecapqyb+tAQuYOHN04ZIesww8lFeAvbfZjS9T9rwlUr9/TRv2v9artxHZByJXti4ed2mF59sCi6AJV/hIEcxBi6ZeTmfL+AXPTq+qmJNsnORWuWa24L829BE6Qge3fNklLHi05yzsHWtVNJxGy9ioAVrC/FsulL/pl/CB+nG9212r+QKe2tDI/+eFxXJHnr/MGPyGdQs2dlsDo+3CC2kv33JXGCE7ulunnnvDpX76JcvOfQwxq2aZA/NRmqvl4olbJYN9AabT7klAV0893IZisBF4Dnp4a+plXRYPP9y/VjAfDB+bMYW3AlaKF8orMnalgq0EvLlad+xWTEBrQXHLTHc7pPMHH738oyIFy2e+3fdOAx8tPr/CvSTYXKPd+0ebhgGArk0jm3V0Y5EhvAd+F0lNTpJuEj2b2MV97IkrN0df3Zr1ZhWZdmnbSUyyTZv6y5SKxFomSN/qLhNrQRojvJ25shTddDm/eC7aq+ZFicXGSAXeRoOWlpK48/fKOJODzqWyNFiTyI2XiYULe3OwWhqIhh/drD2ohktBD1sc4PGDf46bYLmvusxwgQ9jBaVNhiuGRK2KvWuVd7G/q+lcYSL0DZs1K5NEfkaVtpjSHKDjSOnxLWZeNLqdCL285aOXwL4rykvTmdd+MvGRXQq4SJW3q6VAib1lZnZuJFRRlYDW6KI/kGzU94LGTemUx6kOcMOTwGb5LVnoNWizdtoT3xqzqldAWfbqNPgmekjE3Yd0i/8uI+/n4vyGyp4oj4PCysfS3vwIoELCeC9gRw6he6OT4006qOAXEP7+5GZ2obE8WjI5fKNMc4GWDgPdkcRsuylvawLhTkOI1WG/m0igHdLK6viXn+uI2sT9HgzaCHH+c+c2PkaFREKXCjdXigBd6VNQCf+z3DovL8K+lFfHr/syqJD6JbiSXGAHjOhZQnuTV0Q5WpJAeA3b1dDiwzSIfRoK5a2VAeeOvnwAI1ivrUdtNDkq25cvlYN/VRPCu2IPsslGYwhgp5Yy311VBIv53Q15LOFnr3gwuQrKytR5PYS/rg9Db+09pX1co5h7BMMBtcILVRl8aUXe6NUhAXwap+2dHVBMq1tafe9BRz4YRa8QIH6DsyyFaUoqP+ZoJm7KYvVL4k2VAVORzMzp0u+leMN51ysrGZ99qJqwgfcHId2ZnH/t8vnSOaiGfoO7QTnmj/wpQVGwBJu0KP9AQ/OPndUQxuqApeZyOmkkoHCjRSMog7F54IS9CKVZ3jlLRWPb89j9315E77q3i30EnOqsF7ICXh2keFCUYHb7YZXMWNEQ5uqAqfIDgu769llS5LLyF0r/jzWn64DtlTKZcF6WGj1IjWXYXidEs0/EhKykmwC+/0rQU2zOYn1ACeX0MoDYkCUKuVvy02cgE3oVB5cfJLq1pNIqBoZ4Oyvr0g4n5XGVFWB4lXhV+qObvNYPvi2o6q04d15clCnh5ovIaxNbmJJ+HpxsT5PC+DSQvk6+1ZmKBh/Zhdt+uOXEEBXMACP1wOlHloYZFKb/tM82lRdHq+kQ7K2JWFRAccUes/gynVOMZC/njJfyuB8PPDoqYlKo8rCcNY8beji6EBV4InjvWGIdEhnQWFtI18kK+eoLJnt4roJTKClpRz0pbxZJ2mBR05VL9W0eXPaUNAnj0G7XWjb4LKsRKxParkPkxZUlYS7rAIuW7oGunx+tf/Nh1xk9Myxwxo6VJWPS5LIKoROX52WwebIOqMSY+buUVi+RDNgWVnn7KE6S5dHisIB+vTU4RGsg6rTIWdzBuNDYDwpF1yad9fMvLieOfkT+j2Hz5v7Cs7P6pBmuh45odkNWLZ2/VGQXnXozNThjvx6tdb9x6sdew+M1fzSpnEyhjZ1tIV1tXWt+TNzI0X79x/kvAKtiQVGmz46gVugdbN49Ge/6mMyPyi+DFD6mdGmOw/ARvoMZ7pw6Vztu/cAAAAASUVORK5CYII=",alt:"rocket"})}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-speed",children:[(0,s.jsx)("label",{children:this.props.dataFull.speed.title}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-speed-number "+(this.props.dataFull.cmd.error.message?"error":""),children:[(0,s.jsx)("div",{style:{margin:"auto"},children:this.props.dataFull.speed.number_speed}),(0,s.jsx)("img",{src:this.props.dataFull.cmd.error.message?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGiSURBVHgB7ZXRTcMwEIbvXPJStciEB6jUVMkG7QZlg44AE5QNygYdATahG8AGrQRSWx7AEhIvSDli5AQ3cWO7ooiHfpIlxz75fOf/LgAH/gPL0+hSDvgL1jwarcOI5Fjy7hA8YeALg2k+bSBOwBMvhyqNcf5NCMNV2LsGD9DVcMnPY8aCe92hQnyk70kihHA5xznCBgsmBmcS3mJt59Q6Raiim9fZpOln0hGrBVhwipBhMLXZNDC4BQesDr+FgjDS15BoBkSP+poUkEuZWFOa1ZtMZawtibPXpxM5eQmjN8reUNtbZHtJ3Xms3lnXJJRCjaTNFfE67N3ALg6lUBDQq8bUNcZzzrm3Q1kGpXTlFGu4Zb+uTIxvaCsDhEwwhEIKZZtNmtJFRzzPyutHJmPVUbZCgH2b3FSfnVXOLi+U+6UBKZQ7ObAqmp9LyTIx/MI27ikfu8naDxaHhfQNJVOxzfrsQO+zGxE2WWtsOcCXuMmON5ReROjSL3dEZH12kPfZIkL1N9gHXO+zekpHsCdIe6aiLCiFq5RRH/YBVcvjwK/xBRbpfbJqi9GHAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgB3ZZLUuMwEIa7pZqZ5eQInhMM3MBZThlqnBMQdiwIBScIuQFVAYodzgWIgQKW+AaEExBuEJYkZTUtB8dvEtuw4d9EVrr6a0ndagF8d+GqhjtD2/jx0zcF4l9F2NBzAmmiiB5nU+mdtdzxKn6WAnevN0yUsgsE5hJPHpAa9K1r52OzAu0P7Yb/i84ZZEM5ObMp9opWnAvcv7MNX9E9Dw2opjFDm3lQ/ALYAiqnuH7UcifxSZG2Ylj3E2BaRnAkKSWAnZvNNv+0oaKIaOADrvO+ufMJsHXSFQIBxRbUgB1vXLVPLXfE2Xq5cKkzPI4IB+9n9wQVFMJifhI5oEAaJ9bFsx4vVugr34QKWgYLbPxZMxwvgKRwLcffGGrCAghGvqMzRGjEjfj6Ouhbl384kB7UgAWuBf7OAtNGpIIAjjfdQ/7argpLKwISTFJRdffuWkHW9i3XCaFVYKToJQNEQaOsoXLiUN7eZpWVoRCjDFAK6UFudBGUt9crC9OaTcHLAI/+8UWL0R9F0LIwIkj0ykTSkJ+fkSG0c/t/yLAHKHHXIuIg8Z020E4r9MAiOVxaiQzPlIV8DbJxDPWle2JmxzJA3b+kwGZNaGEDzi18nUAaqmsOyopbk268pZ4YcXVu7DaDtxA/fkTpbATCXlg6xfGsqHk5gImg1gjmdyMCvRDQqMwz8fvrDeQ/QIleItNVAAAAAElFTkSuQmCC",alt:"icon"})]})]})]}):null,this.props.dataFull.cmd.error.message?(0,s.jsx)("div",{className:"malibu-desktop-uLoading-message-error",children:this.props.dataFull.cmd.error.message}):null]})]}):"mobile"===this.state.device?(0,s.jsxs)("div",{className:"malibu-mobile-uLoading "+this.state.class,children:[(0,s.jsxs)("div",{style:{display:"none"},children:[(0,s.jsx)("i",{className:"material-icons",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-round",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-outlined",style:{visibility:"hidden"},children:"menu"})]}),(0,s.jsxs)("div",{className:"malibu-mobile-uLoading-header",children:[(0,s.jsxs)("div",{className:"malibu-mobile-uLoading-chicken",style:{position:"absolute",zIndex:"3"},children:[(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMzIiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDEzMyAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02Ni4wODI4IDExNy4yNDVDOTUuNjg4NyAxMTcuMjQ1IDExOS42ODkgOTMuMjg5MSAxMTkuNjg5IDYzLjczNzRDMTE5LjY4OSAzNC4xODU4IDk1LjY4ODcgMTAuMjI5NSA2Ni4wODI4IDEwLjIyOTVDMzYuNDc2OSAxMC4yMjk1IDEyLjQ3NjYgMzQuMTg1OCAxMi40NzY2IDYzLjczNzRDMTIuNDc2NiA5My4yODkxIDM2LjQ3NjkgMTE3LjI0NSA2Ni4wODI4IDExNy4yNDVaIiBmaWxsPSIjM0YzRDU2Ii8+CjxwYXRoIGQ9Ik0zMi4zMzQ0IDY4LjAzMjZDMzMuNjY1OCA2Ni40NDE3IDM1LjMzMDkgNjUuMTYyIDM3LjIxMiA2NC4yODM4QzM5LjA5MzIgNjMuNDA1NiA0MS4xNDQ3IDYyLjk1MDUgNDMuMjIxNCA2Mi45NTA1QzQ1LjI5ODEgNjIuOTUwNSA0Ny4zNDk2IDYzLjQwNTYgNDkuMjMwNyA2NC4yODM4QzUxLjExMTkgNjUuMTYyIDUyLjc3NyA2Ni40NDE3IDU0LjEwODQgNjguMDMyNkM1Ni4zODY1IDY1Ljg2MTkgNTcuOTYxIDYzLjA1OTggNTguNjI5MSA1OS45ODc2QzU5LjI5NzIgNTYuOTE1NSA1OS4wMjgyIDUzLjcxNCA1Ny44NTY4IDUwLjc5NThDNTYuNjg1NCA0Ny44Nzc2IDU0LjY2NTIgNDUuMzc2NSA1Mi4wNTY3IDQzLjYxNDhDNDkuNDQ4MiA0MS44NTMxIDQ2LjM3MDkgNDAuOTExNiA0My4yMjE0IDQwLjkxMTZDNDAuMDcxOSA0MC45MTE2IDM2Ljk5NDYgNDEuODUzMSAzNC4zODYxIDQzLjYxNDhDMzEuNzc3NiA0NS4zNzY1IDI5Ljc1NzQgNDcuODc3NiAyOC41ODYgNTAuNzk1OEMyNy40MTQ2IDUzLjcxNCAyNy4xNDU2IDU2LjkxNTUgMjcuODEzNyA1OS45ODc2QzI4LjQ4MTggNjMuMDU5OCAzMC4wNTYzIDY1Ljg2MTkgMzIuMzM0NCA2OC4wMzI2VjY4LjAzMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzQuOTA0IDY4LjAzMjZDNzYuMjM1MyA2Ni40NDE3IDc3LjkwMDQgNjUuMTYxOSA3OS43ODE2IDY0LjI4MzhDODEuNjYyOCA2My40MDU2IDgzLjcxNDIgNjIuOTUwNSA4NS43OTEgNjIuOTUwNUM4Ny44Njc3IDYyLjk1MDUgODkuOTE5MSA2My40MDU2IDkxLjgwMDMgNjQuMjgzOEM5My42ODE1IDY1LjE2MTkgOTUuMzQ2NSA2Ni40NDE3IDk2LjY3NzkgNjguMDMyNkM5OC45NTYgNjUuODYxOSAxMDAuNTMxIDYzLjA1OTggMTAxLjE5OSA1OS45ODc2QzEwMS44NjcgNTYuOTE1NSAxMDEuNTk4IDUzLjcxNCAxMDAuNDI2IDUwLjc5NThDOTkuMjU0OSA0Ny44Nzc2IDk3LjIzNDggNDUuMzc2NSA5NC42MjYzIDQzLjYxNDhDOTIuMDE3OCA0MS44NTMxIDg4Ljk0MDQgNDAuOTExNiA4NS43OTEgNDAuOTExNkM4Mi42NDE1IDQwLjkxMTYgNzkuNTY0MSA0MS44NTMxIDc2Ljk1NTYgNDMuNjE0OEM3NC4zNDcxIDQ1LjM3NjUgNzIuMzI3IDQ3Ljg3NzYgNzEuMTU1NiA1MC43OTU4QzY5Ljk4NDEgNTMuNzE0IDY5LjcxNTEgNTYuOTE1NSA3MC4zODMyIDU5Ljk4NzZDNzEuMDUxMyA2My4wNTk4IDcyLjYyNTkgNjUuODYxOSA3NC45MDQgNjguMDMyNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNy40NTQ4IDgzLjQwOTRDMzAuOTM3OSA4My40MDk0IDMzLjc2MTQgODAuNTkxIDMzLjc2MTQgNzcuMTE0M0MzMy43NjE0IDczLjYzNzcgMzAuOTM3OSA3MC44MTkzIDI3LjQ1NDggNzAuODE5M0MyMy45NzE4IDcwLjgxOTMgMjEuMTQ4MiA3My42Mzc3IDIxLjE0ODIgNzcuMTE0M0MyMS4xNDgyIDgwLjU5MSAyMy45NzE4IDgzLjQwOTQgMjcuNDU0OCA4My40MDk0WiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNOTkuOTgwNyA4My40MDk0QzEwMy40NjQgODMuNDA5NCAxMDYuMjg3IDgwLjU5MSAxMDYuMjg3IDc3LjExNDNDMTA2LjI4NyA3My42Mzc3IDEwMy40NjQgNzAuODE5MyA5OS45ODA3IDcwLjgxOTNDOTYuNDk3NiA3MC44MTkzIDkzLjY3NDEgNzMuNjM3NyA5My42NzQxIDc3LjExNDNDOTMuNjc0MSA4MC41OTEgOTYuNDk3NiA4My40MDk0IDk5Ljk4MDcgODMuNDA5NFoiIGZpbGw9IiNGRjY1ODQiLz4KPHBhdGggZD0iTTYzLjcxNzcgNjQuNTI0MUw1OC45ODc4IDg0Ljk4MzFMNjYuODcxIDc3LjExNDRMNjMuNzE3NyA2NC41MjQxWiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNODguMDIxNiAxNDMuMjEyTDgyLjY1MTYgMTM4LjcxNEw4Mi43NzY3IDE0My4yMTJIODEuMTA4OEw4MC45NzU2IDEzOC40NTZMNzMuNzI1MiAxNDMuMjEySDcwLjY4OTlMODAuOTIxNCAxMzYuNUw4MC41MjUxIDEyMi40MDRMODAuMjI5MSAxMTEuNzU5TDgxLjg5MjggMTExLjcxM0w4Mi4xOTMgMTIyLjQwNEw4Mi41ODkgMTM2LjQ4N0w5MC42MTQ3IDE0My4yMTJIODguMDIxNloiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTYyLjc5MzEgMTQzLjIxMkw1Ny40MjMgMTM4LjcxNEw1Ny41NDgyIDE0My4yMTJINTUuODg0OEw1NS43NTEzIDEzOC40NTZMNDguNTAwOCAxNDMuMjEySDQ1LjQ2NTZMNTUuNjkyOSAxMzYuNUw1NS4yOTY5IDEyMi40MDRMNTUuMDAwOCAxMTEuNzU5TDU2LjY2ODQgMTExLjcxM0w1Ni45Njg3IDEyMi40MDRMNTcuMzYwNSAxMzYuNDg3TDY1LjM4NjUgMTQzLjIxMkg2Mi43OTMxWiIgZmlsbD0iIzNGM0Q1NiIvPgo8cGF0aCBkPSJNNjYuODcxMyA2LjI5NTAxQzY1LjQwMDQgNi4yOTUwMSA2NC4xMDI4IDcuNDM1NDggNjMuMjM1MyA5LjE4NzIzQzYyLjQ3MDYgNi41NTMxMiA2MC44NjQxIDQuNzIxMjcgNTguOTg4IDQuNzIxMjdDNTguODYwNSA0LjczMzkyIDU4LjczNCA0Ljc1NTEzIDU4LjYwOTMgNC43ODQ3NkM1Ny44ODgyIDEuOTcyMzYgNTYuMjEyMSAtMi40Nzk1NWUtMDUgNTQuMjU4IC0yLjQ3OTU1ZS0wNUM1MS42NDU3IC0yLjQ3OTU1ZS0wNSA0OS41MjgxIDMuNTIyOTkgNDkuNTI4MSA3Ljg2ODhDNDkuNTI4MSAxMi4yMTQ2IDUxLjY0NTcgMTUuNzM3NiA1NC4yNTggMTUuNzM3NkM1NC4zODU1IDE1LjcyNSA1NC41MTIxIDE1LjcwMzcgNTQuNjM2NyAxNS42NzQxQzU1LjM1NzkgMTguNDg2NSA1Ny4wMzM5IDIwLjQ1ODkgNTguOTg4IDIwLjQ1ODlDNjAuNDU4OSAyMC40NTg5IDYxLjc1NjUgMTkuMzE4NCA2Mi42MjQgMTcuNTY2N0M2My4zODg3IDIwLjIwMDggNjQuOTk1MSAyMi4wMzI2IDY2Ljg3MTMgMjIuMDMyNkM2OS40ODM2IDIyLjAzMjYgNzEuNjAxMiAxOC41MDk2IDcxLjYwMTIgMTQuMTYzOEM3MS42MDEyIDkuODE4MDEgNjkuNDgzNiA2LjI5NTAxIDY2Ljg3MTMgNi4yOTUwMVoiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTE1Ljc2NjYgODQuMDE0NUMxMy42OTYxIDg0LjAxNDUgMTEuNjQ1OSA4My42MDc0IDkuNzMzMDEgODIuODE2NkM3LjgyMDEyIDgyLjAyNTcgNi4wODIwMyA4MC44NjY1IDQuNjE3OTcgNzkuNDA1MUMzLjE1MzkxIDc3Ljk0MzcgMS45OTI1NiA3Ni4yMDg4IDEuMjAwMjEgNzQuMjk5NEMwLjQwNzg3MiA3Mi4zOTAxIDYuNDI5NWUtMDUgNzAuMzQzNiA2LjQyOTVlLTA1IDY4LjI3NjlMNi40Mjk1ZS0wNSA2MC40MDhDNi40Mjk1ZS0wNSA1Ni4yMzQyIDEuNjYxMTcgNTIuMjMxMyA0LjYxNzk3IDQ5LjI3OTlDNy41NzQ3NyA0Ni4zMjg1IDExLjU4NTEgNDQuNjcwNCAxNS43NjY2IDQ0LjY3MDRWNDQuNjcwNEwxNS43NjY2IDg0LjAxNDVaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMTYuMzk5IDQ0LjY3MDVDMTE4LjQ3IDQ0LjY3MDUgMTIwLjUyIDQ1LjA3NzYgMTIyLjQzMyA0NS44Njg1QzEyNC4zNDYgNDYuNjU5NCAxMjYuMDg0IDQ3LjgxODYgMTI3LjU0OCA0OS4yOEMxMjkuMDEyIDUwLjc0MTMgMTMwLjE3MyA1Mi40NzYyIDEzMC45NjYgNTQuMzg1NkMxMzEuNzU4IDU2LjI5NSAxMzIuMTY2IDU4LjM0MTQgMTMyLjE2NiA2MC40MDgxVjY4LjI3N0MxMzIuMTY2IDcwLjM0MzcgMTMxLjc1OCA3Mi4zOTAxIDEzMC45NjYgNzQuMjk5NUMxMzAuMTczIDc2LjIwODkgMTI5LjAxMiA3Ny45NDM4IDEyNy41NDggNzkuNDA1MUMxMjYuMDg0IDgwLjg2NjUgMTI0LjM0NiA4Mi4wMjU3IDEyMi40MzMgODIuODE2NkMxMjAuNTIgODMuNjA3NSAxMTguNDcgODQuMDE0NiAxMTYuMzk5IDg0LjAxNDZWODQuMDE0NlY0NC42NzA1SDExNi4zOTlaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMjQuNjYxIDYxLjY0NDZIMTIyLjE2QzEyMi4xNiAyOS45Nzc1IDk2LjM0OTIgNC4yMTQyMyA2NC42MjM3IDQuMjE0MjNDMzIuODk4MyA0LjIxNDIzIDcuMDg3NzUgMjkuOTc3NSA3LjA4Nzc1IDYxLjY0NDZINC41ODYxOEM0LjU4NjE4IDI4LjYwMDUgMzEuNTE4OSAxLjcxNzI2IDY0LjYyMzcgMS43MTcyNkM5Ny43Mjg2IDEuNzE3MjYgMTI0LjY2MSAyOC42MDA2IDEyNC42NjEgNjEuNjQ0NloiIGZpbGw9IiM1NTU3RTQiLz4KPC9zdmc+Cg==",alt:"chicken"}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-chiken-eye left"}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-chiken-eye right"}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-path",children:(0,s.jsx)("svg",{width:"12",height:"3",xmlns:"http://www.w3.org/2000/svg",style:{visibility:"hidden"},children:(0,s.jsx)("path",{d:"M 0 2 Q 6 -5 12 2 M 12 2 Q 6 -5 0 2",stroke:"black",fill:"transparent"})})})]}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-ground",style:{position:"absolute"},children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSI4NyIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDI4NyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yODYuMzUxIDExLjY4Nkw4MS40MDg4IDE0Ljc3MDFMMC4wNTc2MTcyIDAuMzc4MTc0SDEyNy4wNThMMjg2LjM1MSAxMS42ODZaIiBmaWxsPSIjRTZFNkU2Ii8+DQo8L3N2Zz4NCg==",alt:"ground"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-tree one",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-tree two",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-tree three",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-tree four",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-tree five",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-sun"}),(0,s.jsxs)("div",{className:"malibu-mobile-uLoading-music-list",style:{position:"absolute"},children:[(0,s.jsx)("div",{className:"malibu-mobile-uLoading-music six",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMiAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS42NDU5IDEyLjA5MDVMMTkuNjQ3IDEyLjA4ODJMMTYuODM3MiAxMC45MjAyTDUuMDkzNDUgNi4zNjMzNUw4LjA1NzQ1IDMuNzMxMTJDOC4wNTc0NSAzLjczMTEyIDEwLjAyOSAxLjAwMDU1IDEzLjE3NDEgMi44OTQ0OUwxMi4yNTQzIDEuNTI5OTVDMTIuMjU0MyAxLjUyOTk1IDEwLjUyNTEgLTAuNzU1MTU3IDguMTA0NjUgMS42NjI1NEM4LjEwNDY1IDEuNjYyNTQgNS4xMDk3NiA2LjA2OTU0IDAuNDA1NTE4IDQuOTQ2MTlMMTYuNDcxNCAxMS43MzM2TDE2LjU1NTcgMTEuODA5OUwxNS40NzMxIDE0LjM1NzlDMTUuMzI0OSAxNC41OTEgMTUuMTk4NSAxNC44MzcxIDE1LjA5NTQgMTUuMDkzM0MxNC4zMzcgMTcuMDA0NyAxNS43Njk0IDE4LjkwNTkgMTcuMTIzNCAxOS40NDEyQzE4LjQ3NzUgMTkuOTc2NiAyMC4xOTAxIDE4Ljg2MSAyMC45NDg1IDE2Ljk0OTZDMjEuNjk2NSAxNS4wNjQzIDIwLjk2NTQgMTIuNjY5MiAxOS42NDU5IDEyLjA5MDVaIiBmaWxsPSIjM0YzRDU2Ii8+DQo8L3N2Zz4NCg==",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-music five",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAzMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yOS4yNjg5IDIwLjM2ODFDMjMuNDM2OCAxNy4wMzk3IDI0LjYwMzkgOS43MzU4NCAyNC42MDM5IDkuNzM1ODRDMjQuNDU3MSA0Ljk5MDg5IDIwLjUyOTcgNS42NjI1NiAyMC41Mjk3IDUuNjYyNTZMMTkuMTAwMyA1Ljk4ODE0QzE4LjQzNjMgNS42ODA1MSAxNy43MDUxIDUuNTQ1NTMgMTYuOTc0OCA1LjU5NTc1TDE0LjgwMDUgNS45NjFDMTkuNzUxNiA3LjEyMjE5IDE5LjM0NDggMTEuMjU2NCAxOS4zNDQ4IDExLjI1NjRMMjAuMDM4NCAxNi4wOTAzTDcuMDY1MTUgMTAuODY2NEw4LjU1NDY5IDcuMzYwNjdDOC43NjA1NSA3LjAzNjk2IDguOTM2MTggNi42OTUwNiA5LjA3OTM4IDYuMzM5MjhDMTAuMTMyNyAzLjY4NDUzIDguMTQzMyAxLjA0MzkxIDYuMjYyNTkgMC4zMDA0MkM0LjM4MTg5IC0wLjQ0MzA2NyAyLjAwMzM2IDEuMTA2MyAwLjk1MDAxOCAzLjc2MUMtMC4wODg5Nzk3IDYuMzc5NTIgMC45MjY0MDcgOS43MDYxNSAyLjc1OTExIDEwLjUwOTlMMi43NTc1NiAxMC41MTNMNi42NjAyMiAxMi4xMzUzTDYuNjg5MjcgMTIuMDQzNUwyOS4yNjg5IDIwLjM2ODFaTTIyLjY4MDkgMTEuODc0NkwyMy4wOTgzIDE2LjUxNzVDMjAuNjQ4OCAxMy4yNzE5IDIxLjE0OTUgOS40MTU3OCAyMS4xNDk1IDkuNDE1NzhDMjEuMTE1IDguNTIwMjkgMjAuODEyMyA3LjY1NTY5IDIwLjI4MDYgNi45MzM1OUMyMy4wOTQ0IDguNjE0MzIgMjIuNjgwOSAxMS44NzQ2IDIyLjY4MDkgMTEuODc0NkgyMi42ODA5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-music four",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxNyAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMC4yMjE3IDEzLjMzOUw5LjU5Mjc0IDE0LjgxOTJDOS41MDY2NSAxNC45NTQ2IDkuNDMzMjEgMTUuMDk3NiA5LjM3MzM0IDE1LjI0NjRDOC45MzI3NSAxNi4zNTY3IDkuNzY0ODQgMTcuNDYxMSAxMC41NTE0IDE3Ljc3MjFDMTEuMzM4IDE4LjA4MzEgMTIuMzMyOSAxNy40MzUxIDEyLjc3MzQgMTYuMzI0N0MxMy4yMDggMTUuMjI5NSAxMi43ODMzIDEzLjgzODIgMTIuMDE2OCAxMy41MDJMMTIuMDE3NCAxMy41MDA3TDEwLjM4NTEgMTIuODIyMkw0LjgwMTI2IDEwLjY1NTVMNy45OTE3NCAyLjYxNDYzTDcuNTE4ODggMi40Mjc2OEw0LjMyNzE5IDEwLjQ3MTZMMy42MzY3NSAxMC4yMDM3TDYuODQwODMgMi4xMjgzOUw2LjkyNTI1IDIuMTY0MDVMMTMuNDg4OCA0LjkzNjk4TDEzLjUzNzggNC45ODEyOEwxMi45MDg5IDYuNDYxNDNDMTIuODIyOSA2LjU5NjgyIDEyLjc0OTQgNi43Mzk4MiAxMi42ODk1IDYuODg4NjNDMTIuMjQ4OSA3Ljk5ODk5IDEzLjA4MSA5LjEwMzQyIDEzLjg2NzYgOS40MTQzOUMxNC42NTQyIDkuNzI1MzYgMTUuNjQ5MSA5LjA3NzM0IDE2LjA4OTYgNy45NjY5OEMxNi41MjQyIDYuODcxNzkgMTYuMDk5NSA1LjQ4MDQ0IDE1LjMzMyA1LjE0NDI4TDE1LjMzMzYgNS4xNDI5NEwxMy43MDEzIDQuNDY0NDVMNy4wMzA3OCAxLjY0OTc1TDcuMDMwNSAxLjY0OTYyTDYuODE0MTUgMS41NTgzNEw0LjM0NTQ4IDAuNTE2NjYzTDAuODM5ODQ0IDkuMzUxODVMMTAuMTcyNyAxMy4yOTQ3TDEwLjIyMTcgMTMuMzM5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-music three",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMyAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4yNDYzIDcuMDAyN0wxMS4yNDY5IDcuMDAxNDJMOS42MTQ2MSA2LjMyMjg4TDIuNzkyNTkgMy42NzU4MUw0LjUxNDQxIDIuMTQ2NzNDNC44NTEyNSAxLjY5ODUgNS4zNDg2OCAxLjM5NzYyIDUuOTAyNjQgMS4zMDcwNEM2LjQ1NjYgMS4yMTY0NiA3LjAyNDE5IDEuMzQzMTggNy40ODY3MSAxLjY2MDY5TDYuOTUyMzkgMC44NjgwNEM2Ljk1MjM5IDAuODY4MDQgNS45NDc5MSAtMC40NTkzNyA0LjU0MTgyIDAuOTQ1MDg2QzQuNTQxODIgMC45NDUwODYgMi44MDIwNyAzLjUwNTEzIDAuMDY5MzM1OSAyLjg1MjU2TDkuNDAyMTcgNi43OTU0NUw5LjQ1MTE1IDYuODM5NzVMOC44MjIyNiA4LjMxOTkxQzguNzM2MTQgOC40NTUyOSA4LjY2MjY4IDguNTk4MyA4LjYwMjgxIDguNzQ3MTFDOC4xNjIyNyA5Ljg1NzQzIDguOTk0MzQgMTAuOTYxOSA5Ljc4MDkzIDExLjI3MjhDMTAuNTY3NSAxMS41ODM4IDExLjU2MjMgMTAuOTM1OCAxMi4wMDI5IDkuODI1NDZDMTIuNDM3NSA4LjczMDI2IDEyLjAxMjggNy4zMzg5MiAxMS4yNDYzIDcuMDAyN1oiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-music two",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMyAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4zNzkzIDMuODQ5NzdMMTEuMzc5NyAzLjg0ODg0TDEwLjIwNDUgMy4zNjAyOUw1LjI0NTggMS4yNjc4OEwzLjQ2ODM3IDAuNTE3OTE0TDMuMzMxOTYgMC44NjE2NTZMMC45NDQzMzYgNi44NzkxNUw3LjY2Mzg5IDkuNzE4MDJMNy42OTkxNiA5Ljc0OTkxTDcuMjQ2MzUgMTAuODE1NkM3LjE4NDM3IDEwLjkxMzEgNy4xMzE0OSAxMS4wMTYxIDcuMDg4MzYgMTEuMTIzMkM2Ljc3MTE3IDExLjkyMjYgNy4zNzAyNyAxMi43MTc4IDcuOTM2NjEgMTIuOTQxN0M4LjUwMjk1IDEzLjE2NTYgOS4yMTkyMyAxMi42OTkxIDkuNTM2NDIgMTEuODk5NkM5Ljg0OTMgMTEuMTExMSA5LjU0MzU0IDEwLjEwOTMgOC45OTE2MyA5Ljg2NzI4TDguOTkyMTEgOS44NjYzNEw3LjgxNjg3IDkuMzc3NzlMMy43OTY1MiA3LjgxNzhMNi4wOTM2NiAyLjAyODQyTDUuNzUzMTkgMS44OTM4NEwzLjQ1NTIzIDcuNjg1MzdMMi45NTgxIDcuNDkyNDZMNS4yNjUwNCAxLjY3ODMzTDUuMzI1ODEgMS43MDQwMUwxMC4wNTE1IDMuNzAwNUwxMC4wODY4IDMuNzMyMzlMOS42MzQwMiA0Ljc5ODEzQzkuNTcyMDMgNC44OTU2IDkuNTE5MTQgNC45OTg1NSA5LjQ3NjAzIDUuMTA1NjlDOS4xNTg4IDUuOTA1MTIgOS43NTc5IDYuNzAwMzMgMTAuMzI0MiA2LjkyNDE5QzEwLjg5MDYgNy4xNDgwNiAxMS42MDY5IDYuNjgxNTUgMTEuOTI0MSA1Ljg4MjExQzEyLjIzNjkgNS4wOTM1NiAxMS45MzEyIDQuMDkxODEgMTEuMzc5MyAzLjg0OTc3WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-music one",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDEzIDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMTIuNjM2OSA4LjYyMjg0QzEwLjE5NzYgNy4yMzA3NiAxMC42ODU3IDQuMTc1ODcgMTAuNjg1NyA0LjE3NTg3QzEwLjYyNDMgMi4xOTEzMSA4Ljk4MTY5IDIuNDcyMjEgOC45ODE2OSAyLjQ3MjIxTDguMzgzODYgMi42MDg0MUM4LjEwNjE0IDIuNDc5NzUgNy44MDAzMiAyLjQyMzMgNy40OTQ4NyAyLjQ0NDMxTDYuNTg1NDYgMi41OTcwNUM4LjY1NjI2IDMuMDgyNzEgOC40ODYxMyA0LjgxMTg1IDguNDg2MTMgNC44MTE4NUw4Ljc3NjI1IDYuODMzNjZMMy4zNTAxNiA0LjY0ODcyTDMuOTczMTYgMy4xODI1QzQuMDU5MjYgMy4wNDcxMSA0LjEzMjcyIDIuOTA0MTEgNC4xOTI1OSAyLjc1NTNDNC42MzMxNCAxLjY0NDk0IDMuODAxMDcgMC41NDA1MDYgMy4wMTQ0OCAwLjIyOTU3NkMyLjIyNzg4IC0wLjA4MTQzMTQgMS4yMzMwNiAwLjU2NjYzMSAwLjc5MjQ3NiAxLjY3Njk1QzAuMzU3OTQ2IDIuNzcyMTQgMC43ODI2NDIgNC4xNjM0OCAxLjU0OTE2IDQuNDk5NjNMMS41NDg1MSA0LjUwMDk3TDMuMTgwOCA1LjE3OTQ2TDMuMTkyOTUgNS4xNDEwNEwxMi42MzY5IDguNjIyODRaTTkuODgxNDQgNS4wNzA0MUwxMC4wNTU0IDcuMDA1NjRDOS40NDEwNSA2LjE0NTE1IDkuMTUyNDMgNS4wOTUwMSA5LjI0MDkxIDQuMDQyMDVDOS4yMjY0OSAzLjY2NzUgOS4wOTk5MSAzLjMwNTg3IDguODc3NTEgMy4wMDM4NkM5LjIxOTQgMy4yMjI1IDkuNDk0MTEgMy41MzEyMSA5LjY3MTI3IDMuODk1ODlDOS44NDg0MyA0LjI2MDU4IDkuOTIxMTcgNC42NjcwNSA5Ljg4MTQ0IDUuMDcwNFY1LjA3MDQxWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})})]}),(0,s.jsxs)("div",{className:"malibu-mobile-uLoading-progress-bar ",children:[(0,s.jsx)("div",{className:"malibu-mobile-uLoading-progress",style:{width:this.state.width}}),(0,s.jsx)("label",{className:"loading",children:this.props.dataFull.title}),(0,s.jsxs)("label",{className:"number-percent",children:[(0,s.jsx)("input",{className:"number-percent-input",readOnly:!0}),"%"]})]}),this.props.dataFull.speed.title?(0,s.jsxs)("div",{className:"row",style:{margin:"auto",marginTop:"150px",width:"fit-content"},children:[(0,s.jsx)("div",{className:"malibu-mobile-uLoading-rocket",children:(0,s.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfOSURBVHgBzZldbBzVFcf/dz722+t1SJOqH2RT6AMVNCsV+hKgS/pQlxRwGqlK3KjY6gMoqZT1S9SqlWyr5akPXktJVLVVsSVwTNUSC5IIPzSZUHho0hajBAWhAAYChJBk1/Z+785czp31rL27M7vrXQf4P/hez71z5zfnnnPuvbMMXwIlYn0hBZ7IoStq5FwG28AR4mARJiEk6nb3MHxBErAS/AME8BhhRAAeuloEhq7IEGUzfe7gS7E9UQ55mKpRu/ZW4T838MVY/wBN/0F6YKRZ31bgbzl4Mws7qRn8LQMvB5x/mAMxtKlG8LcEPBHrj8hgx6kaRodygE/KWGelhvYJP56haqhRP6lnI5mNepYaR2GACO8PcLyalpAyli9yvLmuFl+K7SPX4CNO7fIdd8Hd+1NIX98C5vWVGbIZlC78F4XZ4zBufuo4dpXlOdfWDbwRNPP64e7bB/X7DzQco/DS88jPPu/YbsF/XMD4urhKM0v7njgE5Z7vmfW8wfGf6zreWNRxccGATtO/ySOZbfKddwE0A/p7l23HsdzmgwJ/rmOLN4NW73sAnv4nzPrFBR3/uloy4VerW2XYs8VllkLp3w81dBsd+kMSOlB5UXGGFnL37jbLhSLHqY+KddBW2/R7hUqb+uCPGg2Jnvi0pmCNivbFQulCMrw9qIv9xZgIcSeJYGQbNpr10580zh4C/kJSx70bFIqFB5Gfecapqyb+tAQuYOHN04ZIesww8lFeAvbfZjS9T9rwlUr9/TRv2v9artxHZByJXti4ed2mF59sCi6AJV/hIEcxBi6ZeTmfL+AXPTq+qmJNsnORWuWa24L829BE6Qge3fNklLHi05yzsHWtVNJxGy9ioAVrC/FsulL/pl/CB+nG9212r+QKe2tDI/+eFxXJHnr/MGPyGdQs2dlsDo+3CC2kv33JXGCE7ulunnnvDpX76JcvOfQwxq2aZA/NRmqvl4olbJYN9AabT7klAV0893IZisBF4Dnp4a+plXRYPP9y/VjAfDB+bMYW3AlaKF8orMnalgq0EvLlad+xWTEBrQXHLTHc7pPMHH738oyIFy2e+3fdOAx8tPr/CvSTYXKPd+0ebhgGArk0jm3V0Y5EhvAd+F0lNTpJuEj2b2MV97IkrN0df3Zr1ZhWZdmnbSUyyTZv6y5SKxFomSN/qLhNrQRojvJ25shTddDm/eC7aq+ZFicXGSAXeRoOWlpK48/fKOJODzqWyNFiTyI2XiYULe3OwWhqIhh/drD2ohktBD1sc4PGDf46bYLmvusxwgQ9jBaVNhiuGRK2KvWuVd7G/q+lcYSL0DZs1K5NEfkaVtpjSHKDjSOnxLWZeNLqdCL285aOXwL4rykvTmdd+MvGRXQq4SJW3q6VAib1lZnZuJFRRlYDW6KI/kGzU94LGTemUx6kOcMOTwGb5LVnoNWizdtoT3xqzqldAWfbqNPgmekjE3Yd0i/8uI+/n4vyGyp4oj4PCysfS3vwIoELCeC9gRw6he6OT4006qOAXEP7+5GZ2obE8WjI5fKNMc4GWDgPdkcRsuylvawLhTkOI1WG/m0igHdLK6viXn+uI2sT9HgzaCHH+c+c2PkaFREKXCjdXigBd6VNQCf+z3DovL8K+lFfHr/syqJD6JbiSXGAHjOhZQnuTV0Q5WpJAeA3b1dDiwzSIfRoK5a2VAeeOvnwAI1ivrUdtNDkq25cvlYN/VRPCu2IPsslGYwhgp5Yy311VBIv53Q15LOFnr3gwuQrKytR5PYS/rg9Db+09pX1co5h7BMMBtcILVRl8aUXe6NUhAXwap+2dHVBMq1tafe9BRz4YRa8QIH6DsyyFaUoqP+ZoJm7KYvVL4k2VAVORzMzp0u+leMN51ysrGZ99qJqwgfcHId2ZnH/t8vnSOaiGfoO7QTnmj/wpQVGwBJu0KP9AQ/OPndUQxuqApeZyOmkkoHCjRSMog7F54IS9CKVZ3jlLRWPb89j9315E77q3i30EnOqsF7ICXh2keFCUYHb7YZXMWNEQ5uqAqfIDgu769llS5LLyF0r/jzWn64DtlTKZcF6WGj1IjWXYXidEs0/EhKykmwC+/0rQU2zOYn1ACeX0MoDYkCUKuVvy02cgE3oVB5cfJLq1pNIqBoZ4Oyvr0g4n5XGVFWB4lXhV+qObvNYPvi2o6q04d15clCnh5ovIaxNbmJJ+HpxsT5PC+DSQvk6+1ZmKBh/Zhdt+uOXEEBXMACP1wOlHloYZFKb/tM82lRdHq+kQ7K2JWFRAccUes/gynVOMZC/njJfyuB8PPDoqYlKo8rCcNY8beji6EBV4InjvWGIdEhnQWFtI18kK+eoLJnt4roJTKClpRz0pbxZJ2mBR05VL9W0eXPaUNAnj0G7XWjb4LKsRKxParkPkxZUlYS7rAIuW7oGunx+tf/Nh1xk9Myxwxo6VJWPS5LIKoROX52WwebIOqMSY+buUVi+RDNgWVnn7KE6S5dHisIB+vTU4RGsg6rTIWdzBuNDYDwpF1yad9fMvLieOfkT+j2Hz5v7Cs7P6pBmuh45odkNWLZ2/VGQXnXozNThjvx6tdb9x6sdew+M1fzSpnEyhjZ1tIV1tXWt+TNzI0X79x/kvAKtiQVGmz46gVugdbN49Ge/6mMyPyi+DFD6mdGmOw/ARvoMZ7pw6Vztu/cAAAAASUVORK5CYII=",alt:"rocket"})}),(0,s.jsxs)("div",{className:"malibu-mobile-uLoading-speed",children:[(0,s.jsx)("label",{children:this.props.dataFull.speed.title}),(0,s.jsxs)("div",{className:"malibu-mobile-uLoading-speed-number "+(this.props.dataFull.cmd.error.message?"error":""),children:[(0,s.jsx)("div",{style:{margin:"auto"},children:this.props.dataFull.speed.number_speed}),(0,s.jsx)("img",{src:this.props.dataFull.cmd.error.message?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGiSURBVHgB7ZXRTcMwEIbvXPJStciEB6jUVMkG7QZlg44AE5QNygYdATahG8AGrQRSWx7AEhIvSDli5AQ3cWO7ooiHfpIlxz75fOf/LgAH/gPL0+hSDvgL1jwarcOI5Fjy7hA8YeALg2k+bSBOwBMvhyqNcf5NCMNV2LsGD9DVcMnPY8aCe92hQnyk70kihHA5xznCBgsmBmcS3mJt59Q6Raiim9fZpOln0hGrBVhwipBhMLXZNDC4BQesDr+FgjDS15BoBkSP+poUkEuZWFOa1ZtMZawtibPXpxM5eQmjN8reUNtbZHtJ3Xms3lnXJJRCjaTNFfE67N3ALg6lUBDQq8bUNcZzzrm3Q1kGpXTlFGu4Zb+uTIxvaCsDhEwwhEIKZZtNmtJFRzzPyutHJmPVUbZCgH2b3FSfnVXOLi+U+6UBKZQ7ObAqmp9LyTIx/MI27ikfu8naDxaHhfQNJVOxzfrsQO+zGxE2WWtsOcCXuMmON5ReROjSL3dEZH12kPfZIkL1N9gHXO+zekpHsCdIe6aiLCiFq5RRH/YBVcvjwK/xBRbpfbJqi9GHAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgB3ZZLUuMwEIa7pZqZ5eQInhMM3MBZThlqnBMQdiwIBScIuQFVAYodzgWIgQKW+AaEExBuEJYkZTUtB8dvEtuw4d9EVrr6a0ndagF8d+GqhjtD2/jx0zcF4l9F2NBzAmmiiB5nU+mdtdzxKn6WAnevN0yUsgsE5hJPHpAa9K1r52OzAu0P7Yb/i84ZZEM5ObMp9opWnAvcv7MNX9E9Dw2opjFDm3lQ/ALYAiqnuH7UcifxSZG2Ylj3E2BaRnAkKSWAnZvNNv+0oaKIaOADrvO+ufMJsHXSFQIBxRbUgB1vXLVPLXfE2Xq5cKkzPI4IB+9n9wQVFMJifhI5oEAaJ9bFsx4vVugr34QKWgYLbPxZMxwvgKRwLcffGGrCAghGvqMzRGjEjfj6Ouhbl384kB7UgAWuBf7OAtNGpIIAjjfdQ/7argpLKwISTFJRdffuWkHW9i3XCaFVYKToJQNEQaOsoXLiUN7eZpWVoRCjDFAK6UFudBGUt9crC9OaTcHLAI/+8UWL0R9F0LIwIkj0ykTSkJ+fkSG0c/t/yLAHKHHXIuIg8Z020E4r9MAiOVxaiQzPlIV8DbJxDPWle2JmxzJA3b+kwGZNaGEDzi18nUAaqmsOyopbk268pZ4YcXVu7DaDtxA/fkTpbATCXlg6xfGsqHk5gImg1gjmdyMCvRDQqMwz8fvrDeQ/QIleItNVAAAAAElFTkSuQmCC",alt:"icon"})]})]})]}):null,this.props.dataFull.cmd.error.message?(0,s.jsx)("div",{className:"malibu-mobile-uLoading-message-error",children:this.props.dataFull.cmd.error.message}):null]})]}):(0,s.jsx)("div",{children:"Kh\xf4ng h\u1ed7 tr\u1ee3"})}render(){return this.state.visible?this.renderForDevice():(0,s.jsx)("div",{})}}const r=n;class l extends e.Component{constructor(t){var e;super(t),e=this,this.setPercent=function(t,i,a,s,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=100*n/s,c="Loading...";c="Template Component"===t||"App data"===t?r+" Loading...":"System Loading...",window.process_loading.max.main_script+window.process_loading.max.template_script+window.process_loading.max.template_component+window.process_loading.max.template_css+window.process_loading.max.app_data===n&&(l=100,c="System Ready"),e.createOneLoading((0,o.Z)({title:c,percent:l},e.getInfoNetWork()))},this.callBack_animationPercent=()=>{let t=this.state.index_loading;void 0!==this.state.list_loading[t+1]?(t++,this.flagLoaing=!0,this.setState({index_loading:t})):this.flagLoaing=!1},this.closeLoading=()=>{null!==this.ref_loading&&this.ref_loading.callBack()},this.flagLoaing=!0,this.state={index_loading:0,list_loading:[(0,o.Z)({title:"Loading...",percent:0},this.getInfoNetWork())]}}createOneLoading(t){let e=this.state.list_loading;e[e.length]=t,this.setState({list_loading:e},(()=>{this.flagLoaing||this.callBack_animationPercent()}))}getInfoNetWork(){if(void 0!==navigator.connection){let t="";void 0!==navigator.connection.effectiveType&&(t=": "+navigator.connection.effectiveType);let e=navigator.connection.downlink,i="";return e<=1&&(i="Internet speed slow"),{cmd:{error:{message:i}},speed:{title:"Speed test"+t,number_speed:e+" Mb/s"}}}return{cmd:{error:{message:""}},speed:{title:"",number_speed:""}}}reportWindowSize(){let t=window.innerHeight,e=window.outerWidth>window.innerWidth?window.innerWidth:window.outerWidth;window.outerWidth,window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`);let i="";return i=e>996?"desktop":e<=996&&e>768?"desktop_small":e<=768&&e>575?"tablet":e<=575&&e>350?"mobile":"mobile_small",i}componentDidMount(){var t;t=this,a.start.DOM_Html=t,setTimeout((()=>{document.getElementById("root").style.display=""}),500)}render(){return(0,s.jsx)(r,{ref:t=>this.ref_loading=t,device:this.reportWindowSize(),f_callBack_animationPercent:this.callBack_animationPercent,dataFull:this.state.list_loading[this.state.index_loading]})}}const c=l;var d=__webpack_require__(1896);class h extends e.Component{constructor(t){super(t),this.type_component="uLoadingError",this.code_component="malibu.uLoadingError",this.error_img="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAR8AAACzCAYAAACw/hhsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAACDqSURBVHgB7Z1rbBzXdcfPnd2lRFmWKNtppIi2hrFSxA9EVGEDasDHMF+iGEVMoXylaCMqcNoisC0ybREncWsyNRy3SBspce1+CCyqQGKJZKw10CbOJ60eNYKkgGg0CQJErkYWbcuJYi1t2ZJ2d+b2ntmd1XC5Mzuzc3f2wfMDVtzHcJcid/77P497LgBBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBtD4MCEIwOHhOjcVi3SyuqMBhm8KYyjlXxTukQzxsX9zQxfekxbFpzmEBgC9xgy8oiqLPzXUuAEGUgcRnlTI0dEGDGOtWgPVz4Bp4i0sY0uKygKLEDfOEYRipZLIrDcSqh8RnlSCcTUd8TWJc/MEfFDe7wVts0vkLQ9eSNk1ziTFwFQzGlG1CwFTreuXnRlIc4CVmQoqc0eqFxKeFKREczeUwXbwNhBjwV4HxhRzk9OSRLh1CYL3u2ng3A6aaBu9mCtvBXF+f6YzDTEbJHA77ukRzQeLTglghlcIeFG5lHFa6EHQ0SSE0J7LXssmoQiBbkLgBg4yxfvGzdZc5LAWmeXhu7o4ZIFoeEp8WAkWHxdgTsNJliNCJH2YxSM4fuT0FDcDY2DnVgITGTdi/UoiYDqYxTSLU2pD4tABuosPRSTA+3SiC4wYKUc5MTAkR6hc31RuP5EOy2dmt00C0HCQ+TYKmDXYYRmJQlL/106fnU3ifi+ikOeMHc9dyB2SGVLt2DaqKkuhQFN7BGBehnFIM5/Bnwq+mydJtbVk9lUpW/brDY4vjQjXx/6TeuJecUCtC4tME9PWNPCEcwJR9W1HW6bfc9ncpJb5x3HHYCtFBwTLNtv2MW6V0MAEOnzo1N+P2Onh8JpNQY0zRmMK3MeAiHGIqLBMCn4jkNfb+cFEx42CIEruiv/LKnO/KlrsI8T1UIWsNSHwaHE0bU7lhnrNvr1vfB+tu/rTIJ7fbd7k6nf7e0UPCl4yXPKXOspmB1E+TOt7o6RnSFEXpzwsU81MmDwP+fCnhkE7EjOtJ+2fwwkWEZrIsM03VseaGxKfB6esZwVzIE7HYLbCh43OQWHNn8bHM9bNwZWluIZf7nZq/hydZNjuNJzWKinAwx12eVhf5oKT4449DbcWmEtbPoWQzBysJ0dDYhSnG2X4o/rwUijU7JD4NTn/PyLE17fcO3rzpc0W3YxjvwLvpFyB7/bVy3yKcEEyIGKsLRQuaBRGmmRwOxmLZpFvOyJGY3lv8NoADs0c7J4FoOkh8GpzPPvjymTVr7y2Woq++fxKuvPsTkeS9WulbdagmV1N/dOHgUraDK3fAylCM6SIMG6AwrLkg8WlQsCkvsSZxDAqVLFOIzXuXX4Dr134Bqwc+4yZCVp+QKX4/xR4hpnNm7mv0tgLiBiQ+DYh1YvEE5mtUvJ3LvgFL7xyywq3ViAgjDyiZ8nmhQi6oGF6K61PUF9QcKEA0FMN/ttgthOcM2MKTu5i6fOnZVSs8COMwwRNtx3t7h8dLHxNOZ0okrTHnY+WJROVvamTkjebJda1iSHwaCBQeMAAdj1XRESfS9LEf3jfAzavU1yLEWAF2qL93+Li2a1B1PjB/tPNAjGV3Qj7PRQLUJJD4NAgrhEd8muOnOl4XocRhIAowTbigM729oxPOe4+IZLMQoAFwCNDw6OIhIBoWyvk0AKXCAyJxOndkef9Kf+8INhqqQDgQCelYdtJZmi/Nl1EpvnEh51Nn/AiPdbfB9wAATQBcBhvnRtsZZxi2wgEBTFAI1piQ+NQR/JQWwoPldE/hQVKvzC0w4PQJvhIVk9Faz5Bm31EuBCMBajxIfOoE9vE4wwNMLrsJj43J2DYgyqFyphx35oHK5oCGXx/HQfn4uwei7lDOp06MjL5xjAMfxOs8P3Nnyut4l0WiRAmcwdTJk7PTN6Y5MvE7zs+XLiE/2B7gpRzLJqk7OnpIfOoAhgD4SYzXGbDk7NGte7yOJ+EJxrr1n1pYv+FPugN+WyrLsvtIhKKDxCdiCgPACqvNmZ69ntnpNfSLhCc4TGmHWz/8uHPsSJDvnhF/k0na3qf2UM4nQjDBLITH7j1JW4shPd7kOESMhCc43LwKV6+chOrg44k1bWcGsRhA1BQSnwgxeFtxJbbINXgOwyqdXkgE44P3qxUfhKsJ3nacBKi2kPhEhDUGouhi2AwuCXA7VusdGSThCQe6n2sf/ByqhwSo1pD4RIBV2uX2YC9r9ozrqmtrbCrAt4EIzdUPfgbhQAFK0BKNGkHiEwFtbW04/lO1bpiGZ7jFDbPY+0OEI5t5zRo1GxJtdHRxAgjpkPjUGEwy22V1dD1eM4fzCebWF57162+CzVs+BFHw/ns/gbCYAE9QY6J84kDUlHySmVvXsbrldlxhl4opaEG6d94NPT33W183b/4DIT7rio9dufIBnD2rw9nf6HD69M9h4cyvQCbofrLZNyCR2Aoh6Ii3xdH9TAEhDerzqSGFFdaFbW/YzNzRrfvcjm21VevoboaGH7AuTrGpxMWLv4OZQ3Pw8o9PgCxwu6H1GwYhHMK1Ht3aBYQ0KOyqIYXSuoVXkrnVwi10ON97/p9gfN9QIOFBNm/+EDz21S/BkdlnrOsyuCqqXmblgfsV4OrQ2AUNCGnEgKgJVq4HlJn8LTbz4tE7yg4Ew3BLnBlJaBEefmQvfPlvvmg5nzDYzgnN+cJCyFCM54CxBLSt2Q5hYMDUX/3yX2mwmyTI+dQIv66HG7xlRj2gY8kLhjzQPY3vG4awYNNhePcDGrkfeZD41ABrTo+jodCttG65nhZZPoGOZ/dn+n0ff/Hib638jh9QgMKKWvimwzzOnTKIcJD41AADEpp9nTPT1aa3iuuxE8t+wYTy2Mgj4vIwzM/9yNf3oLh1d98NYbh+9X9BAhp1PcuBxKcWOLqZ3TaxaxXXg0nhIGFRvpo1X7ztV3yQx772pVC5JElNhxA34+NAhIbERzLWECtHN7Pbca3ielB43Cpa2MOzsPDLZeHVyz9OLTsmSLMhCt3Q8GcgDDKaDhlj+6npMDzUZCgZFlP2FpsKY0aq3DGFhsJxaHJQDNzyPCg4D33hK0KA3rdu797dDz1996/o39m9W4MgYHjndE5Bsd1PyMpXR3xtHIeVpYCoGnI+0uFa4etLrmu4DEODFqCn937Xx9Dh2MJj3X75BDz+tW+tSDJjT1AQMOwKm/uRkXjmBoTtWlz1kPhIZHnI5d67w6E1KiZe4oPLKCqBQrJw5pdWeCbrdf1w7Wr4pkNFocW/YSHxkQiP3fg0dAu5evJbvKjQ5FRyIBiOYd+PV5cyOqOnv/mcVfV6+qlnfZfew4oPUv2kQxvaSSQsJD4SYZxZCRCR8Um5hVwxFtsLLcD2j1U+91CAcJnEge884SlUKEIYlj3zXX/NwzKWXYRvOmSUcA4JiY8krPnMDPI7JnDusSrSzgk1N0FK3pbw+FjC7MwRVSKsAIWb82w9Aw2YDwmJjySyZuzGVi1K+SqI9slhPEaFFiDoSvXSURnohrBy5RSRoJWvsIRJPHPaujo0VGqXBWOafdWtsdBgiqYUyvCridJGQqxwoRvCC3Yu48LR7dvVwCvgw2IY71RdducmfxWIUJD4SEIBtgO/co/eD0UxH6zlCCUMhXp677PcxOYtN6pNF9/6LZw9e95yIDi0SwZ+k8NIaThV6nCqKZ0HrZC5gU2H1YiP+BBZACIUJD7ysMIu709EFnQXzYqg4GBiFytAfk5iFA1s9MM+nCACsuJ53vL/vdgFjWEXvh66niALUMuBYhYkP+RFtU2HbtVMwj8kPhIotNpb1Q+mML3cMZjv4YVjZIE5E6/lDeXIr8Uasi7YKYyLPKsBhQQvfhK/eAxWvfweXwnZo1aDuh+vaibhHxIfCcTj8RuOhpW340bMVBVJs9usaX9f+1LoTl8UIHQhE49OV+WCTp/6eaDV7F7CgyM2Tp/6H2uesy1s6OpQWLffqUL3H2GO6B7rNr6uTND9YP4nFrvF1/HMNGmgmARIfGQQuxFOmZnYuXKHMK5oMtI9eAJjpUjWiFF8Hhx5+vRTz1kD3IMQVHzKgeEf9viUdzN5QcTH5ufzSWtcIxZ6smEZsPJ1082f9nGk9w4khH9IfGTAeYeodllXX3zxI+fLHSIe3gEhkS08Nugwnnzqby0HFOTExmNRGIKuz0LQ4WBTYdAQCoWqlJ71G6Hn5g2wOdGWf+5rV2H+8iW4mM2AX7DpsH19Hyis3fM4rx1IiGBQn48UuJr/Wj7fkz8kXEdsUOHBURZPf/PZFSMsvEABCips1eSM8GeaePQboXM329e2w5E7Pw5Pdm6D3Rs3Qfe6m6zL0C23WfeP3/Zh38/lp+mQMz5NuR55kPhIgDHFWmvAgevuB0GoShcmlv0KA+ZL8OTGqhaunfI7sAsdEK7HCgK6nyA5GBQr/JnCVqvQ5Ry446NFt1MOFJ8gAoTuxw0Unvkjt08BIQ0SnwjQtMFQrmf7x9RA5elSt4Mhjl+qKYWjmPhJWKNIhZnF4wSFZ71SOYGP4oNuyA9uc55JeGoDiY8EOC+U2YEvlT9ibSjxwS7gcmCjHTqJx7/+rWWCUzqwC6tEQQi6WwS6mEoVM3zM78LRSnSvW+/peEoJ4n6ufvAz5820KKtPkvDUBko4S0Akkwviolwu93gul1NjrDqdx1DLraT+zHdmiglYdBXPfPc/rNXmYQd22a8ZJPmcD/WmXfNSM8/PhWpqdOLXydhgbsgvouyuiy865u9wyyPK8dQOEp8GxysEKl1igA6kNImL319NdQy/L2hJ2xagfP+Qtuz+clWqagniehA/4ZmTuaOdVNGKAAq7Gpzunfd4PFbZ0WAIhmFZ0B6eagd2odBgDsg5HAxdj0yClNCRK6YBRONBzqfB8epixgY/FAnM+9hrp8qBIRlegpTrsfKFx1UbKqHTwQsKZJB1YH5Y+OCK+Nd/HufstWtANB7kfBoYv+umsDyOa6dwLIUXKCRB9skKsq2NG16iWPVzfvB+QYD88fLSO0A0HiQ+ctDxH15sNpRDkGmB1riMkpJ6OfGqJFCVvh/BhG/QvItsnvntm77Cqfl3LgnxuQxE40HiIwPOrKl2rMyqdVzxvmnTX0kfpVFKaV4Fwx10Q7huC5PH2CuEJfQgPTxX3is/M+eKYcJjWzqhnmAoNfH6a575HxQeFKlAMJpQGBWU85EAB2OJWTq+fAnF6Oib+00wpxJwV8d7S+3AAw4sD9IFjMPCnNgDu9DpBO1aLr7+++Vf/+z1q1b5+uEPfwSeeTvgyS0RFKCx135tLa3YvfGWYlULQ7LTV5as8CwwJs1mjgoSHwlwxtL5ZaX5sAvdTmJN4pgQHs0+Zt36vsBb9QbJlThn+njtJBoEN+eDXMxkYGjTbdYiznqHNfj6sn4GzmAJiEigsEsCCmPFGT5DYxc0ITxnxFXNecy6m/qAMf/NbjZ+BQjn+9gTDXGBaFjQdXktyzh7PV9BQvdT7/yPVHg+f0fUHnI+EjBNM60UOpgZZ8egTO6HKe1VuR+/M3PsqpcfUFScwmKX1Z3J6EorzjH0AthkhTq4zuqhc79piX4azhUdiEgg8ZFAQjEWDF40ka7ruND91Ep8KoEjNnBR59nfnHfNJVkD6Hvug90P9Fdcqb7gyAeh88EE9ONvnIdmJ8YMGgwfEbXbSmGVMTy6iEmHigtIl955Hq5f+wUE4XvP/7NwJdXtzmvN9XnqOem9Nuh4/vMPl3dfz1x627o0MyyW2ZRKJSnpHAGU84mYduF+gjI/+18QFFz3havIca6PbOGxnl+EWJhsdhJkfEWDkibhiQ4SHwkMjy2Og8+dKXCXhETbnRAE9xnH5UHhwQWeQbqZq8FOOjt5slNt2gQ0By5v9StRERIfCXAT9gc53t+g8uXgSFS/G+Wh8AQZIFYt+aTzcjAca1b3w00lBURkkPiEZGzsnMoCjkhF9+N3mxYba7X4U89WPA4XmUYhPMhCmSZE7Dhu1uUMlGyOFhKfkGTNWFVLJ7DsHhQci+ElQCg6ssaU+qHc0oaquoobg3Tq9HwKiMgg8QkLYxpUwdr2+6tqOsT8z0Nf+ErZJLKsMaV+waRzqQA16wpyyvdED4lPSBju2VXN9xWaDqsBHQ7mdZxzm7GkLnsbYT84nQ4KUbM6H3EiJIGIFBKfkNjb5lRDtUsuEHti4NjIw/ldP39Unw9uZ9K5qXt8YlkSn4ihDuew4DgNxqEa0P20r7vfc7+oStgiVC+cvT7Nm+/hM9TfEz3kfEKC4zQgBG1r74Vmxh5Revq9dwPPVm4UROgcbbKMsCDxCQtTQpVnq2k6bCTspPPL7zbtqFKdqlz1gcQnLIyH7g2ppunQSb07irGvB51PM8KATwNRFyjnE5LctdxCYk0C8wVV70pqu59s5jXf34O7duJaqu1r1zom+L1vlbqjbvJr4hnJOmSzKSDqQrDd1IgV/PrXB6/dde/kFgZsF4SCQcbnancc4PXlzVstx9Pm2AkVb/fcvNH6ikKU4dUlwoPSvHN8ePLEKy9SvqdOUNglAcbC94isFYlnP2V3dDs4vtQLnGn88Ie3AOENy2Yp5KojJD4SmD9ye0p8SUEI/DQdoqNB8fEDDlRv8vEWNYVxmE79NKkDUTdIfCTBWfjEZaWmQ3Q0QUABIsqiQy4zAxLRdg2qQASCxEcSBfejQwgquR9MMgeBnE95sMIly/Vo2pja3zd8BuJxFYhAkPhIRKR3D0JI1q67H4iaoqdOzc2ABHp6hjRumMeF7e2GeI7GcQSExEciuevZGfElVJs+zvlxazoM2kF8MZsFYjksmxkACfT1je6PMeW4uNohnNQ+Wp4RHCq1SwTL7nffM9nOqhyzYYMCdO3qyt0jsKQdJI+DCz3LjTpdxaR5LLb2jm0fb+/svHfthQu/uggB0bTBjm2373hOCM5j4qYuxOyPU6+8mAIiMLR7hWQKu5WegxBNh8jlS/9Wtunwe+rHrK2KK4EuCbcSJoro4qKuuBc71DnTTZOd4MxYiIvwyc3FYH6Hm8YxK8wCSLJYhhxPCEh8asDQyIUp4X6egBBkrp+F9O9XTi3Ecjtu0ue1pAId0sTr/7did4lVDDqUAUwya58c7oaYqZo81i3e/DsABWnlGFwhKHyBAxMX/irnXMc7RZhlbQhplelPz04BEQoSnxpQcD+4ZbIKIfjdW18HzlcKCArPw3/wEei5ecOKx7Cz+em3LjTtCvNawLg54LV4FEMpyMW7QQiSyUzVEiVmuZty7lXnHA6jSzIMRX/llTlKNFeJVPERJ52aSCQ03D7YSBgLySNdOqxScM92xtlxCAHubuq1w2l+OcUGa22XvY9WE89QrglhXMoyl8SgrJMVzuilk6fmBoEIjBTxwR0cDJ44JK5qJU9+IHM9O51MdjVtXGztycVhr7hqWXMGLJVhmUk/wjo0ujghfgffhirh5lW49PaTZd0PURmZ4VF/77D4IGGaCN+6rJ4exoQoQbfCFT3130cPABGY0OJTEB78hFddDknNHe2UUt6MmpHRxW9zgIlyjykAk0ePdlZ80wkHNCUcUNX5n0ruhyiPeGMfTp2aHQdJaNjTI0rrIuSaPkn5HimE7vMxeBueWKrHIdrw8Ovj0GSg43ETHsQUjmZQCC9UYP7I7VMmN/dAld3P6/LbK1NFJQCyhQcp5IzSTIEHgZCChCZDrlU8RGFSY2IUhuHRxePiwsXlsnV9eLGq/bPc8LMLacyIT4APfjh7RzLGsgOYqISA4JKLDZs+PwMkQL6ohfDYiL/fQRGCd6MLAiI0Mjqc1UoHiJLlRpDE8Ogbh8QTOvNLHdZ1Bc6MihwLSMLPLqRMYTvAJ0dEjmh+tnNciFBXQYR0P98n3Feqbe0nTjCDD0DItWOtTi2FB1FMbo1O4YztBSI0oXM+6DygQkMdnkDzEvI+heTvIa9jsuLkllFlQ1dV6Ziw/y+siGHDGje5qihKUaA5N88LYdOz17JJZ7LeanLDtUQhS/itSFS9N4XEczeLZbpkNhg6Chsa5F3ugojtJ+fmOlu2lB96jKoJ/LACzDNEYaYpZVochkKsglwWQiEZDigFJdW7lT8PfxVCEHQOUCp1RBcCNMBN8xjafyAsmMkmK1Wc+vpG9iqmeT7ssHh0V+JDRzOya8bFTSlVrryb5+OOu5xu3ldhoxkJHXYlWA5/Mbr7EUyfm7tjBiQgOxTyQiSJK61QTxuxXORvChSgEydnd+InPRC6CEd3+hEe8fuaAZOFdyr5zQXTimJKSTxbjgeWCc8y/BY2mpHQ4oO5DEymQhkBwrAkez2zE5oQTBJ7DAhLi8f21LOJEkMMXE0NqzUPxHlKhD47UxU6jIvCg7+ntqwOIcFQi1v7fDEVJCCzsOGXKAo2fpAyUgMFaO5oZ5c4IQeE4ExaF3Ed8yGSGwxTlQ4IGwo5wTK5+OjZabXTc1jAi2nygyKvtLMQMtUVnEvDYgr+zlfTEPQ0hlknTs8NVMq5OIXHWtslKUejAE/imi+QQJRuHomqYOOHyNd24Toa02zbzziW6Jkq7lI5g/GTJ2crnkCVlyyIJC3LDNTLkezaNWgtLxE/Iy5W3CjepK/KGlxVCa13eFxUFSv1XDU36HZy2X1+phCuEB7J85qx3C5js8EoChvF14qwYOOHSIeJ4QAmbrRdFm+KKWxVF3ep+CnmR3gQdBteoRDE6hMK4RogrIKsSbSdE8n3Q7gOiDEhrvn8QCS0uAvScXGo5XYaQHgQibucpiodIMvN1yPE80K6+OCnv7VKuIT+3tFDwu04E4Npa7VxwHUxGArZvTJ2KISClL2e7Zr7QfRlSXyj8xg7XhBTC6yInDg5tzPqWS+YjD55anZciFBXC4lQ0uDmvhzk31u7Kgxqxw+CWguPTCpvPMB0WYWNqEO8iq8FkhEicw4Tcs71L+IEfSLvdopE9sawQqHYmkGm8G0iQdsh/sMnqgmF0NmIysPhU47vxTe6EJ4zzuMaadYL9gWZhikS09CqTXFpKHZ+52fuYA8O5PMYSfHBZDkGcYLrMc4bdk92j/V/ws3DgKwP1ShDPD/UfLvkQmPcVPEOxhdYJrun1sKTFwZcUY6OpPA758LixrOTUBVM5HLghPMeITzHlh2Bs3xPR5Pj8QM6IfFlXPwNpgoi1A+NnBPCnA4zDwq1yAsK40JEFMtFm5hHyx/UIT7BN4pjOvB6/j5xnVmPd8CNhtdBcdyg9Sj+ZZjlhlLQgKCbHxs7N5MzE1OQH3Am/tv8pdy13IEaFGw0rwNkFmwqUXPxMXPGBLvRGZhkipUwrGk4YoVCeetdRIR8B4UwSItn8wne4omcxuUPqQYdLGWLEF63fm7OHoTCidkAiPAbDgp1Scr4/fX3jZwRHzKqtRzFzKaLW9rE4zo0MEfyucpxP8dW6+YxxBMOS3M/AkO8bGS9azUXHyE8VjOW7JMf6e8dOWea7OApR97IcjwrhAdDobkpkAi/Eco0RW7BpvAmnbHyckZisCBEGoScOR0IdDjAhIs0U7JDIWaakzj6woyzvSdPJtHl6tAihHXzWLARId60e4gnCjY/iK5gU1PxKYRcar79fbYWiqoyxpedNCWhUFp8MkzKDoXwxOWGeANgCKlkB1Knmm+IeCEZPlO45Kf2MUUTn4750IxJW76RFmKzIE6VVxVmpkQ5JVXLRDyKmcjPpcQJNqHtGjzYKlsiy3LzEYZ4Famt88kYHSzG9oiKViQl55JQCFvv99QiFMrl4t1xJqpJSnaiVXYvKPye8LLMReIYUTDjqskw18K3Lc+12IgcDeNpcXIs4XVFJHgBh67ncno9Tn5xUk5zxjSesKZrNtUguyjcfBQhnh9qKj6ON3QkRBUKFbZXGYcWJ+q/nyzy7mdEfOCxQVnNgBFSFzdfivyCzUri586d62hra9NEbkb8p8PX+B/6wlc77rv/Ew8enTu4DWrM2Mh+GPjULuu10ul34a//8u+1u+7eDo/u37uwadMGEdc+B7Jwvlb+HnnPXU9M0zwv/u5pHPpvbxGDt7PZbLqrq3k3AGAxZVKE/CKMtPIbKWhSonLzTqIo2CBx8QbDsKEYFi0uLnazfNkSv9qlWdXvE7a3r4Vbb+0QNpHLyhl4Yr/WG4tvw2ce6IfP78WJpSASqRVbGqp+LWgh7EqkoizvN12zZg28+eabeDWNYgSFxC1eF7+DdKOLFlb4+npGDuL+aVrvnw6mTv0wktBfNrV08/Us2CArwq7Ozk7bahf/WOiO4vF4dywW6xZvNhx8hQ7JbuZaBgrANnUrRI3atRXuvmc71IrbPnQL3HRT5Z1CW5AOIS74d1bxhi3qPkQLj9FRqFCUnKJVeB4dhct+rBaipcQzB7jRtp9DDHcQaTrxKRY2sDoYz+6pQWGjriGer5xPwR2loMS+okvCN6Z4A2qFkE0V4lMXZ7BuXW2F4bvP/AMQwRDvDbXwdYVo4VencNVCtLAYkHc/zdnhbRU2QH6440bUIV6ohHPBJSEp5/126CbeKFrBJalAoz8Jn8gUrUuXfr/0788d7fj+C4vjtXZasikUNlIQEVH3rtWk2hU2dPPLKg6FiDKUE61bb70F/vwvPouCdajWTks2UbZxRBDiraDmHc42XqGbI8FtuyRfoRuFQoQftm3zzkHKcFqFh63b4rLkFC18IJfL6eJLunAeNBxRh3hIZOLjRjmXhJQJ3UK5JIKQjVO0nKBglYqWcPzWVxQuL9F69JF/hLs+/tEd33/hXzR8ICrRijrEQyKfZBiGWoRuBNFELGt7AIdolbY9+BEtUWrn9dz+uanEx40woRtBrALKitbnRicmPrHjruRXHvviS0FESxYtIT5uUOhGEO488vA34IEH+q3ePBekOq1SWlp8yuEM3bBbWfwScbkEiRJB+McxQXIlKE6Qz+Pqhdu6LVb4VZx76S1btuirTnzcoNCN8IFe4XHPkxIfQ+cA3pz3etA+ib2Osd2I2/djuwB4Q2FXI3DhwgUM2TpWcehW6YRCdK8HvU6GwuNLjspPVc9R6aT0c9I180LaZoTEpwqcoRvk5yKXE6O6f8ohhVjci4btPSEIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgmh2/h8XK/UXKq/r/gAAAABJRU5ErkJggg==",this.state={}}renderForDevice(){return(0,s.jsx)("div",{className:"malibu-desktop-uLoadingError",children:(0,s.jsxs)("div",{style:{display:"grid"},children:[(0,s.jsx)("img",{alt:"error",src:this.error_img,style:{margin:"0px auto"}}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoadingError-title",children:[(0,s.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("g",{"clip-path":"url(#clip0_9044_25578)",children:(0,s.jsx)("path",{d:"M3.18491 24.5H24.8032C25.7016 24.5 26.2616 23.5317 25.8182 22.75L15.0032 4.08332C14.5482 3.30165 13.4282 3.30165 12.9849 4.08332L2.16991 22.75C1.72658 23.5317 2.28658 24.5 3.18491 24.5ZM15.1666 21H12.8332V18.6667H15.1666V21ZM13.9999 16.3333C13.3582 16.3333 12.8332 15.8083 12.8332 15.1667V12.8333C12.8332 12.1917 13.3582 11.6667 13.9999 11.6667C14.6416 11.6667 15.1666 12.1917 15.1666 12.8333V15.1667C15.1666 15.8083 14.6416 16.3333 13.9999 16.3333Z",fill:"#E9121D"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_9044_25578",children:(0,s.jsx)("rect",{width:"28",height:"28",fill:"white"})})})]}),(0,s.jsx)("span",{style:{paddingLeft:"10px"},children:this.props.dataFull.title_error})]}),(0,s.jsx)("div",{className:"malibu-desktop-uLoadingError-description",children:this.props.dataFull.description})]})})}render(){return this.renderForDevice()}}const u=h;class p extends e.Component{constructor(t){super(t),this.state={}}render(){return(0,s.jsx)(u,{dataFull:{title_error:"Error",description:this.props.error_info}})}}const _=p;let f=window.location.hostname,g=window.location.port,m=window.location.protocol;console.log("Version of App 1.0.8"),window.isShowErrorNetwork=!1;let v=!1;"www."===f.substr(0,4)&&(f=f.replace("www.",""));var b="//jwebui.com:8066";if(t.ZP.checkIsPublic()){let t=new URL(window.location.href);if(v="true"===t.searchParams.get("isMobile"),v){let e=t.searchParams.get("cordovaProtocol"),i=t.searchParams.get("cordovaDomain"),o=t.searchParams.get("cordovaPort");i&&e&&o?(f=i,m=e,g=o,b=e+"://"+i+":"+o):b=""}else b=""}(0,t.hP)(v),(0,t.v0)(f),(0,t._N)(m),(0,t.t_)(g),i.render((0,s.jsx)(c,{}),document.getElementById("loading"));let y,A=null;function D(){window.process_loading.loading.main_script--,window.processLoadingGUI("Main Script",window.process_loading.max.main_script-window.process_loading.loading.main_script+"/"+window.process_loading.max.main_script),0===window.process_loading.loading.template_script&&0===window.process_loading.loading.main_script&&window.callStart()}function k(t){window.process_loading.loading.template_css--,window.processLoadingGUI("Template CSS",window.process_loading.max.template_css-window.process_loading.loading.template_css+"/"+window.process_loading.max.template_css,t),0===window.process_loading.loading.template_css&&window.obManagerTemplate_libManagerTemplate.managerTemplate_begin_2(y.template,y.screen_working,A,!0,O)}function O(){window.process_loading.loading.template_component--,window.processLoadingGUI("Template Component",window.process_loading.max.template_component-window.process_loading.loading.template_component+"/"+window.process_loading.max.template_component,"Template Component","Application Info"),window.addEventListener("offline",(()=>{window.showLoadingError()})),t.ZP.start(window.mainstart.configGlobal)}window.processLoadingGUI=function(t,e,i,o){((t,e,i,o)=>{null!==a.start.DOM_Html&&(a.start.current++,a.start.DOM_Html.setPercent(t,e,i,a.start.max_pack,a.start.current,o))})(t,e,i,o)},window.callStart=function(){!function(){var e=navigator.onLine;console.log("Initial network status:",e?"Online":"Offline"),setInterval((function(){var i=navigator.onLine;i!==e&&(e=i,console.log("Network status changed:",e?"Online":"Offline"),e?((0,t.zF)(!1,{}),document.body.classList.remove("isOffline")):((0,t.zF)(!0,{title:"#MsgSystem_client_offline",btn:"",list_fo:"",list_fo_start:"",color:"warning"}),document.body.classList.add("isOffline")))}),2e3)}(),!0!==window.mainstart.isDev&&(window.addEventListener("beforeunload",(e=>(0,d.Yr)([{txcode:"bo-delete-session",input:{token_webui:t.ZP.getSessionFromStore()}}],{})),!1),window.addEventListener("onbeforeunload",(e=>(0,d.Yr)([{txcode:"bo-delete-session",input:{token_webui:t.ZP.getSessionFromStore()}}],{})),!1),window.addEventListener("unload",(e=>(0,d.Yr)([{txcode:"bo-delete-session",input:{token_webui:t.ZP.getSessionFromStore()}}],{})),!1),window.addEventListener("pagehide",(e=>{(0,d.Yr)([{txcode:"bo-delete-session",input:{token_webui:t.ZP.getSessionFromStore()}}],{})}),!1)),void 0!==window.mainstart.rsa&&window.mainstart.configGlobal&&(t.ZP.rsa_setPublicKey(window.mainstart.rsa),t.ZP.readHTML5RSA(),y=t.ZP.template_getConfigTemplate(),void 0!==y.theme&&(A=y.theme),window.obManagerTemplate_libManagerTemplate.managerTemplate_begin(y.template,y.screen_working,A,!0,k,window.mainstart.template_host_dev))},window.closeLoading=function(){null!==a.start.DOM_Html&&a.start.DOM_Html.closeLoading()},window.showLoadingError=function(t){window.process_loading.loading.main_script+window.process_loading.loading.template_script+window.process_loading.loading.template_component+window.process_loading.loading.template_css+window.process_loading.loading.app_data>0&&(t?window.isShowErrorNetwork=!1:(t="Please check your internet connection and try again",window.isShowErrorNetwork=!0),i.render((0,s.jsx)(_,{error_info:t},"12"),document.getElementById("root")),window.closeLoading())},t.ZP.addSript(b+"/api/Webchannel/TemplateDynamic",D),t.ZP.addSript(b+"/api/Webchannel/ConfigClient",D)})()})();