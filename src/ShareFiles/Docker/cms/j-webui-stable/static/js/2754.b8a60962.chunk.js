"use strict";(self.webpackChunkstable_app=self.webpackChunkstable_app||[]).push([[2754],{2754:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var s=i(7313),a=i(5842),l=i(1896),o=i(9676),d=i(6633),n=i(6417);class r extends s.Component{constructor(e){super(e),this.getInfoA=()=>this.stateHidden.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.stateHidden.visibility=e,this.setState({reload:!0})},this.getListSelectConvert=(e,t,i)=>{if(void 0===e||void 0===t||void 0===i)return[];if(null===t||null===i)return[];if(""===e||""===i)return[];let s=[];return e=e.toString(),t.forEach(((t,a)=>{let l=t[i]+"",o=JSON.parse(JSON.stringify(t));null!==l&&void 0!==l&&e.includes(l+"")?o.value=!0:o.value=!1,o.title=l,s.push(o)})),s},this.changeKeyLanguage=e=>{let t={title:a.ZP.getLang("systemLicense_title"),des:a.ZP.getLang("systemLicense_des"),form_btn_close:a.ZP.getLang("form_close_title"),form_btn_add:a.ZP.getLang("form_add_title"),license_for:a.ZP.getLang("license_for"),website:a.ZP.getLang("website"),lic_id:a.ZP.getLang("lic_id"),issue_date:a.ZP.getLang("issue_date"),type:a.ZP.getLang("type"),number_of_day:a.ZP.getLang("number_of_day"),expiration_date:a.ZP.getLang("expiration_date")};if(void 0!==e)return t;let i=this.stateHidden.infoA;i.title=a.ZP.getLang("systemLicense_title"),i.des=a.ZP.getLang("systemLicense_des"),i.lang_form.vi=a.ZP.getLang("systemLicense_title"),i.lang_form.en=a.ZP.getLang("systemLicense_title"),this.stateHidden.infoA=i,this.stateHidden.languages=t,this.setState({languages:t})},this.closeForm=()=>{a.ZP.removeForm(this.key_form)},this.key_form="systemLicense";let t=this.changeKeyLanguage("start");this.dateFormat=a.ZP.getParameterSystem("DATE_FORMAT"),this.stateHidden={languages:t,infoA:{lang_form:{vi:a.ZP.getLang("systemLicense_title"),en:a.ZP.getLang("systemLicense_title")},title:a.ZP.getLang("systemLicense_title"),des:"",openOne:"true",ofModal:!1},visibility:!1,user_info:{}},this.list_app_data={},this.state={list_service:[]}}componentDidMount(){this.getListService(),a.ZP.addAppAuto(this.key_form,this,this.stateHidden.infoA.ofModal),a.ZP.form_addMapping(this.key_form,this.props.mapping_key)}async getListService(){var e=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:"GET_LIST_SERVICE"}}];e[0].input=Object.assign(e[0].input,{}),this.setState({isLoading:!0}),await(0,l.Yr)(e,{}).then((e=>{var t=a.ZP.foGetData("data",e);this.setState({list_service:this.getListSelectConvert(this.props.data.licensed_services,t.GET_LIST_SERVICE,"service_code")})})).finally((e=>{this.setState({isLoading:!1})}))}render(){var e;if("none"===this.stateHidden.visibility)return null;let{languages:t}=this.state;const i=(0,o.RP)("uForm"),s=(0,o.RP)("uCheckBox"),a=(0,o.RP)("uInput"),l=(0,o.RP)("uSelectItem"),r=(0,o.RP)("uDate"),c=(0,o.RP)("uMultiValue");return(0,n.jsxs)(i,{dataFull:{config:{default:{title:null===t||void 0===t?void 0:t.title}},cmd:{visibility:"",isLoading:this.state.isLoading},title_button:{close_button:null===t||void 0===t?void 0:t.form_btn_close,add_form:null===t||void 0===t?void 0:t.form_btn_add},abs_Close:this.closeForm,abs_AddMenuBar:this.addMenu},children:[(0,n.jsx)(a,{dataFull:{config:{default:{title:(null===t||void 0===t?void 0:t.license_for)||"Licensed for",type:"text",class:"col-sm-5",code_form_component:"license_for"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:this.props.data.licence_for}}),(0,n.jsx)(a,{dataFull:{config:{default:{title:(null===t||void 0===t?void 0:t.website)||"Website",type:"text",class:"col-sm-5",code_form_component:"website"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:this.props.data.website}}),(0,n.jsx)(a,{dataFull:{config:{default:{title:(null===t||void 0===t?void 0:t.lic_id)||"Licensed ID",type:"text",class:"col-sm-5",code_form_component:"lic_id"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:this.props.data.lic_id}}),(0,n.jsx)(r,{dataFull:{config:{default:{title:(null===t||void 0===t?void 0:t.issue_date)||"Issuing date",type:"text",class:"col-sm-5",code_form_component:"issue_date"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:this.props.data.issue_date?(0,d.FW)(new Date(this.props.data.issue_date).getTime(),this.dateFormat):null}}),(0,n.jsx)(l,{dataFull:{config:{default:{title:(null===t||void 0===t?void 0:t.type)||"Expiration type",type:"text",class:"col-sm-5",code_form_component:"type"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[{title:"Unlimited",value:"Unlimited",selected:"Unlimited"===this.props.data.type},{title:"Limited",value:"Limited",selected:"Limited"===this.props.data.type}]}}),(0,n.jsx)(a,{dataFull:{config:{default:{title:(null===t||void 0===t?void 0:t.number_of_day)||"Number of days",type:"text",class:"col-sm-5",code_form_component:"number_of_day"},cmd:{disable:!0,visible:"Limited"===this.props.data.type,error:{message:"",type:""}},mode:{textAlign:"right"}},value:Math.round((this.props.data.expiration_date-window.moment.utc().toDate().getTime())/1e3/60/60/24)}}),(0,n.jsx)(r,{dataFull:{config:{default:{title:(null===t||void 0===t?void 0:t.expiration_date)||"Expiration date",type:"text",class:"col-sm-5",code_form_component:"expiration_date"},cmd:{disable:!0,visible:"Limited"===this.props.data.type,error:{message:"",type:""}}},value:this.props.data.expiration_date?(0,d.FW)(new Date(this.props.data.expiration_date).getTime(),this.dateFormat):null}}),(0,n.jsx)(c,{title:"License for these services",class:"col-sm-10",isOpenDefault:!0,children:null===(e=this.state.list_service)||void 0===e?void 0:e.map(((e,t)=>(0,n.jsx)(s,{dataFull:{class:"col-sm-4 col-12",title:e.title,value:e.value,config:{cmd:{disable:!0}},dataItem:e.dataItem,abs_Click:(e,t)=>{let{datas_view:i}=this.state;i[e.key_select].value=!t,this.setState({datas_view:i})}}},t)))})]})}}const c=r}}]);