"use strict";(self.webpackChunkstable_app=self.webpackChunkstable_app||[]).push([[7679,9122,4804,2582,5684],{9122:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var i=a(3063),o=a(7313),l=a(9676),n=a(9687),s=a(6417);class _ extends o.Component{constructor(e){super(e),this.componentDidMount=()=>{let e=this.state.modal_confirm;e.modal.visibility=this.props.configComponent.visibility,this.setState({modal_confirm:e})},this.func_cancel_modal_config_component=()=>{this.props.func_cancel_modal_config_component()},this.getData=()=>{let e={};if(this.refs.CCPDefaultConfig.validateCallForm&&!this.refs.CCPDefaultConfig.validateCallForm())return;let t=this.refs.CCPDefaultDefault.getData(),a=this.refs.CCPDefaultConfig.getData(),i=this.refs.CCPDefaultLang.getData(),o=this.refs.CCPDefaultValidate.getData();void 0!==t&&(e.default=t,void 0!==a&&(e.config=a,void 0!==i&&(e.lang=i,void 0!==o&&(e.validate=o,this.props.func_save_cp_config(e)))))},this.UFormTab=(0,l.RP)("uFormTab"),this.UTextArea=(0,l.RP)("uTextArea"),this.DESIGNFORM_CODE_TOOL_ITEMS="designToolItem",this.ModalConfirm=(0,l.Iq)("designFormModal_ConfigComponent"),this.CCPDefaultConfig=n.default[this.props.configComponent.configInputType+"Config"],this.CCPDefaultDefault=n.default.CCPDefaultDefault,this.CCPDefaultEssence=n.default[this.props.configComponent.configInputType+"Essence"],this.CCPDefaultLang=n.default[this.props.configComponent.configInputType+"Lang"],this.CCPDefaultRole=n.default[this.props.configComponent.configInputType+"Role"],this.CCPDefaultValidate=n.default[this.props.configComponent.configInputType+"Validate"],this.state={modal_confirm:{modal:{title:"Config Component "+this.props.configComponent.configInputType,abs_Close:this.func_cancel_modal_config_component,visibility:!1},form:{list_buttons:[{dataFull:{config:{default:{title:"Cancel",type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_cancel_modal_config_component}},{dataFull:{config:{default:{title:"Save",type:"primary",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.getData}}]}},form:{tab_form:{data:[{title:"Config Default",id:"configComponent_Default"},{title:"JSON",id:"configComponent_JSON"}],abs_select:this.abs_selectTabForm},configComponent_Default:{tab_form:{data:[{title:"Default",id:"CCP_Default_Default"},{title:"Config",id:"CCP_Default_Config"},{title:"Validate",id:"CCP_Default_Validate"},{title:"Languages",id:"CCP_Default_Lang"}],abs_select:this.abs_selectTabForm}},configComponent_JSON:{CCP_JSON_config:{list_text_area:[{dataFull:{config:{default:{helper:"Default",title:"Default",class:"col-md-12",rows:10,code_form_component:""},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[],value:JSON.stringify(this.props.configComponent.configItem.default,null,4),abs_Change:this.testTextArea}},{dataFull:{config:{default:{helper:"Config",title:"Config",class:"col-md-12",rows:10,code_form_component:""},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[],value:JSON.stringify(this.props.configComponent.configItem.config,null,4),abs_Change:this.testTextArea}},{dataFull:{config:{default:{helper:"Role",title:"Role",class:"col-md-12",rows:10,code_form_component:""},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[],value:JSON.stringify(this.props.configComponent.configItem.role,null,4),abs_Change:this.testTextArea}},{dataFull:{config:{default:{helper:"Property",title:"Property",class:"col-md-12",rows:10,code_form_component:""},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[],value:JSON.stringify(this.props.configComponent.configItem.property,null,4),abs_Change:this.testTextArea}}]}},CCP_Default_Config:{CCP_Default_Config_config:(0,i.Z)((0,i.Z)({},this.CCPDefaultConfig),{},{allListReport:this.props.data.allListReport})},CCP_Default_Default:this.CCPDefaultDefault,CCP_Default_Role:this.CCPDefaultRole,CCP_Default_Essence:this.CCPDefaultEssence,CCP_Default_Validate:this.CCPDefaultValidate,CCP_Default_Lang:this.CCPDefaultLang},data:this.props.configComponent.configItem}}renderTableDevice(e){const t=this.CCPDefaultDefault,a=this.CCPDefaultConfig,l=this.CCPDefaultEssence,n=this.CCPDefaultLang,_=this.CCPDefaultRole,d=this.CCPDefaultValidate,c=this.UTextArea,r=this.UFormTab;return(0,s.jsxs)(o.Fragment,{children:["configComponent_Default"===e&&(0,s.jsx)("div",{className:"designForm-desktop-uModal-config_component-tab",children:(0,s.jsx)(r,{dataFull:this.getDataTabFormChild(e)})}),"configComponent_JSON"===e&&(0,s.jsx)("div",{className:"designForm-desktop-uModal-config_component-tab_JSON row",children:this.state.form[e].CCP_JSON_config.list_text_area.map(((e,t)=>(0,s.jsx)(c,(0,i.Z)({},e),t)))}),"CCP_Default_Default"===e&&(0,s.jsx)(t,(0,i.Z)({ref:"CCPDefaultDefault",stateData:(0,i.Z)({},this.state.form[e])},this.props)),"CCP_Default_Config"===e&&(0,s.jsx)(a,(0,i.Z)((0,i.Z)({ref:"CCPDefaultConfig"},this.props),{},{stateData:(0,i.Z)({},this.state.form[e][e+"_config"])})),"CCP_Default_Role"===e&&(0,s.jsx)(_,(0,i.Z)((0,i.Z)({ref:"CCPDefaultRole"},this.props),{},{stateData:(0,i.Z)({},this.state.form[e])})),"CCP_Default_Essence"===e&&(0,s.jsx)(l,(0,i.Z)((0,i.Z)({ref:"CCPDefaultEssence"},this.props),{},{stateData:(0,i.Z)({},this.state.form[e])})),"CCP_Default_Validate"===e&&(0,s.jsx)(d,(0,i.Z)((0,i.Z)({ref:"CCPDefaultValidate"},this.props),{},{stateData:(0,i.Z)({},this.state.form[e])})),"CCP_Default_Lang"===e&&(0,s.jsx)(n,(0,i.Z)((0,i.Z)({ref:"CCPDefaultLang"},this.props),{},{stateData:(0,i.Z)({},this.state.form[e])}))]})}getDataTabFormChild(e){let t=[];for(const a of this.state.form[e].tab_form.data)t.push({tabInfo:{title:a.title,id:a.id},sysStyle:{show:a.isShow?"show":""},DOM_elm:this.renderTableDevice(a.id)});return t={data:t},t}render(){const e=this.ModalConfirm,t=this.UFormTab;let a=[];for(const i of this.state.form.tab_form.data)a.push({tabInfo:{title:i.title,id:i.id},sysStyle:{show:i.isShow?"show":""},DOM_elm:this.renderTableDevice(i.id)});return a={data:a},(0,s.jsx)(e,{stateData:this.state.modal_confirm,children:(0,s.jsx)(t,{dataFull:(0,i.Z)((0,i.Z)({},a),{},{abs_select:this.abs_select})})})}}const d=_},4804:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var i=a(7313),o=a(5842),l=a(9676),n=a(6417);class s extends i.Component{constructor(e){super(e),this.getData=()=>{let e=this.state.modal_config_layout.form,t={},a={};e.lang_layout.list_lang_inputs.forEach((e=>{const a=e.dataFull.config.default.code_form_component,i=e.dataFull.value;t[a]=i})),e.guide_layout.list_guide_inputs.forEach((e=>{const t=e.dataFull.config.default.code_form_component,i=e.dataFull.value;a[t]=i})),this.props.func_save_modal_config_layout({name:e.config_layout.name_layout.dataFull.value,class:e.config_layout.class_layout.dataFull.value,des:e.config_layout.guide_layout.dataFull.value,lang:t,lang_des:a,inputtype:this.state.data.inputtype,list_view:this.state.data.list_view,codeHidden:this.state.data.codeHidden})},this.readConfigLayout=e=>{var t={};return void 0===e&&(e={}),null!=e.name?t.name=e.name:t.name="",null!=e.des?t.des=e.des:t.des="",null!=e.class?t.class=e.class:t.class="col-md-12 col-lg-12",null!=e.lang?t.lang=e.lang:t.lang={},null!=e.lang_des?t.lang_des=e.lang_des:t.lang_des={},null!=e.codeHidden?t.codeHidden=e.codeHidden:t.codeHidden=o.ZP.autoID(),null!=e.inputtype?t.inputtype=e.inputtype:t.inputtype="",null!=e.list_view?t.list_view=e.list_view:t.list_view=[],t},this.nameLayout_configLayout=e=>this.lang_system.map((t=>({dataFull:{config:{default:{title:t.view,class:"col-md-6 ",required:!1,placeholder:t.view,helper:t.view,code_form_component:t.key},cmd:{isHelper:!1,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},value:e.lang[t.key]?e.lang[t.key]:"",abs_Change:this.func_configLayout_langLayout_change}}))),this.guideLayout_configLayout=e=>this.lang_system.map((t=>({dataFull:{config:{default:{title:t.view,class:"col-md-6 ",required:!1,placeholder:t.view,helper:t.view,code_form_component:t.key},cmd:{isHelper:!1,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:e.lang_des[t.key]?e.lang_des[t.key]:"",abs_Change:this.func_configLayout_guideLayout_lang_change}}))),this.func_configLayout_langLayout_en_change=e=>{let{modal_config_layout:t}=this.state;t.form.lang_layout.list_lang_inputs[1].dataFull.value=e.target.value,this.setState({modal_config_layout:t})},this.func_configLayout_langLayout_change=(e,t)=>{let{modal_config_layout:a}=this.state;a.form.lang_layout.list_lang_inputs.find((e=>e.dataFull.config.default.code_form_component===t)).dataFull.value=e.target.value,this.setState({modal_config_layout:a})},this.func_configLayout_guideLayout_lang_change=(e,t)=>{let{modal_config_layout:a}=this.state;a.form.guide_layout.list_guide_inputs.find((e=>e.dataFull.config.default.code_form_component===t)).dataFull.value=e.target.value,this.setState({modal_config_layout:a})},this.func_configLayout_change=(e,t)=>{let{modal_config_layout:a}=this.state;a.form.config_layout[t].dataFull.value=e.target.value,this.setState({modal_config_layout:a})},this.func_modalConfig_layout_close=()=>{this.props.func_close_modal_config_layout()},this.loadDataToState=()=>{let e={};return e.list_buttons=[{dataFull:{config:{default:{title:o.ZP.getLang("designForm_btn_cancel"),type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_modalConfig_layout_close}},{dataFull:{config:{default:{title:o.ZP.getLang("designForm_btn_save"),type:"primary",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.getData}}],e.config_layout={title:o.ZP.getLang("designForm_configLayout_title"),name_layout:{dataFull:{config:{default:{title:o.ZP.getLang("designForm_configLayout_name"),class:"col-md-6 ",required:!1,placeholder:o.ZP.getLang("designForm_configLayout_name"),helper:o.ZP.getLang("designForm_configLayout_name_helper"),code_form_component:"name_layout"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.name,abs_Change:this.func_configLayout_change}},guide_layout:{dataFull:{config:{default:{title:o.ZP.getLang("designForm_configLayout_des"),class:"col-md-6 ",required:!1,placeholder:o.ZP.getLang("designForm_configLayout_des"),helper:o.ZP.getLang("designForm_configLayout_des_helper"),code_form_component:"guide_layout"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.des,abs_Change:this.func_configLayout_change}},class_layout:{dataFull:{config:{default:{title:o.ZP.getLang("designForm_configLayout_class"),class:"col-md-6 ",required:!1,placeholder:o.ZP.getLang("designForm_configLayout_class"),helper:o.ZP.getLang("designForm_configLayout_class_helper"),code_form_component:"class_layout"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.class,abs_Change:this.func_configLayout_change}}},e.guide_layout={title:o.ZP.getLang("designForm_configLayout_langdes"),helper:o.ZP.getLang("designForm_configLayout_langdes_helper"),list_guide_inputs:this.guideLayout_configLayout(this.state.data)},e.lang_layout={title:o.ZP.getLang("designForm_configLayout_langname"),helper:o.ZP.getLang("designForm_configLayout_langname_helper"),list_lang_inputs:this.nameLayout_configLayout(this.state.data)},e},this.componentDidMount=()=>{let{modal_config_layout:e}=this.state;e.form=this.loadDataToState(),e.modal={title:o.ZP.getLang("designForm_configLayout_title")+this.state.data.name,helper:" ",abs_Close:this.func_modalConfig_layout_close,visibility:!0},this.setState({modal_config_layout:e})},this.Modal_Config_Layout=(0,l.Iq)("designFormModal_ConfigLayout"),this.lang_system=o.ZP.getConfigUserDefault("list_lang_config"),this.state={modal_config_layout:{},data:this.readConfigLayout(this.props.data)}}render(){const e=this.Modal_Config_Layout;return(0,n.jsx)(e,{stateData:this.state.modal_config_layout})}}const _=s},2582:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var i=a(7313),o=a(5842),l=a(9676),n=a(6417);class s extends i.Component{constructor(e){super(e),this.getData=()=>{let e=this.state.modal_config_view.form,t={};e.lang_view.list_lang_inputs.forEach((e=>{const a=e.dataFull.config.default.code_form_component,i=e.dataFull.value;t[a]=i}));const a=e.config_view.is_tab.dataFull.data.find((e=>e.selected)),i=e.config_view.is_border.dataFull.data.find((e=>e.selected));this.props.func_save_modal_config_view({name:e.config_view.name_view.dataFull.value,class:e.config_view.class_view.dataFull.value,code:e.config_view.guide_view.dataFull.value,isTab:a.value,lang:t,inputtype:this.state.data.inputtype,viewUI:this.state.data.viewUI,list_input:this.state.data.list_input,codeHidden:this.state.data.codeHidden,isBorder:i.value,condition:e.config_view.condition.dataFull.value,more_information:e.config_view.more_information.dataFull.value})},this.nameView_configView=e=>this.lang_system.map((t=>({dataFull:{config:{default:{title:t.view,class:"col-md-6 ",required:!1,placeholder:t.view,helper:t.view,code_form_component:t.key},cmd:{isHelper:!1,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:e.lang[t.key]?e.lang[t.key]:"",abs_Change:this.func_configView_langView_change}}))),this.guideView_configView=e=>this.lang_system.map((t=>({dataFull:{config:{default:{title:t.view,class:"col-md-6 ",required:!1,placeholder:t.view,helper:t.view,code_form_component:t.key},cmd:{isHelper:!1,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:e.lang_des[t.key]?e.lang_des[t.key]:"",abs_Change:this.func_configView_guideView_lang_change}}))),this.func_configView_langView_change=(e,t)=>{let{modal_config_view:a}=this.state;a.form.lang_view.list_lang_inputs.find((e=>e.dataFull.config.default.code_form_component===t)).dataFull.value=e.target.value,this.setState({modal_config_view:a})},this.func_configView_nameView_change=e=>{let{modal_config_view:t}=this.state;t.form.config_view.name_view.dataFull.value=e.target.value,this.setState({modal_config_view:t})},this.func_configView_condition_change=e=>{let{modal_config_view:t}=this.state;t.form.config_view.condition.dataFull.value=e.target.value,this.setState({modal_config_view:t})},this.func_configView_more_information_change=e=>{let{modal_config_view:t}=this.state;t.form.config_view.more_information.dataFull.value=e.target.value,this.setState({modal_config_view:t})},this.func_configView_guideView_change=e=>{let{modal_config_view:t}=this.state;t.form.config_view.guide_view.dataFull.value=e.target.value,this.setState({modal_config_view:t})},this.func_configView_classView_change=e=>{let{modal_config_view:t}=this.state;t.form.config_view.class_view.dataFull.value=e.target.value,this.setState({modal_config_view:t})},this.func_modalConfig_view_close=()=>{this.props.func_close_modal_config_view()},this.loadDataToState=()=>{let e={};return e.list_buttons=[{dataFull:{config:{default:{title:o.ZP.getLang("btn_cancel"),type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_modalConfig_view_close}},{dataFull:{config:{default:{title:o.ZP.getLang("btn_save"),type:"primary",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.getData}}],e.config_view={title:o.ZP.getLang("designForm_configView_titleModal"),name_view:{dataFull:{config:{default:{title:o.ZP.getLang("designForm_configView_name"),class:"col-md-6 ",required:!1,placeholder:o.ZP.getLang("designForm_configView_name"),helper:o.ZP.getLang("designForm_configView_name_helper"),code_form_component:"name_view"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.name,abs_Change:this.func_configView_nameView_change}},condition:{dataFull:{config:{default:{title:o.ZP.getLang("designForm_configView_condition"),class:"col-md-6 ",required:!1,placeholder:o.ZP.getLang("designForm_configView_condition"),helper:o.ZP.getLang("designForm_configView_condition_helper"),code_form_component:"condition"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.condition,abs_Change:this.func_configView_condition_change}},more_information:{dataFull:{config:{default:{title:o.ZP.getLang("designForm_configView_more_information"),class:"col-md-6 ",required:!1,placeholder:o.ZP.getLang("designForm_configView_more_information"),helper:o.ZP.getLang("designForm_configView_more_information_helper"),code_form_component:"more_information"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.more_information,abs_Change:this.func_configView_more_information_change}},guide_view:{dataFull:{config:{default:{title:o.ZP.getLang("designForm_configView_code"),class:"col-md-6 ",required:!1,placeholder:o.ZP.getLang("designForm_configView_code"),helper:o.ZP.getLang("designForm_configView_code_helper"),code_form_component:"guide_view"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.code,abs_Change:this.func_configView_guideView_change}},class_view:{dataFull:{config:{default:{title:o.ZP.getLang("designForm_configView_class"),class:"col-md-6 ",required:!1,placeholder:o.ZP.getLang("designForm_configView_class"),helper:o.ZP.getLang("designForm_configView_class_helper"),code_form_component:"class_view"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.data.class,abs_Change:this.func_configView_classView_change}},is_tab:{dataFull:{config:{default:{search:{placeholder:o.ZP.getLang("designForm_configView_isTab")},helper:o.ZP.getLang("designForm_configView_isTab_helper"),data_status:"No Result",title:o.ZP.getLang("designForm_configView_isTab"),class:"col-md-6",required:!1,code_form_component:"is_tab"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:"Yes",value:"true",selected:"true"===this.state.data.isTab},{title:"No",value:"false",selected:"true"!==this.state.data.isTab}],search_value:"",abs_Change:this.onChangeValueSelect,abs_search:this.search}},is_border:{dataFull:{config:{default:{search:{placeholder:o.ZP.getLang("designForm_configView_isBorder")},helper:o.ZP.getLang("designForm_configView_isBorder_helper"),data_status:"No Result",title:o.ZP.getLang("designForm_configView_isBorder"),class:"col-md-6",required:!1,code_form_component:"is_border"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:"Yes",value:"true",selected:"true"===this.state.data.isBorder},{title:"No",value:"false",selected:"true"!==this.state.data.isBorder}],search_value:"",abs_Change:this.onChangeValueSelect,abs_search:this.search}}},e.lang_view={title:o.ZP.getLang("designForm_configView_langName"),helper:o.ZP.getLang("designForm_configView_langName_helper"),list_lang_inputs:this.nameView_configView(this.state.data)},e},this.onChangeValueSelect=(e,t,a)=>{let{modal_config_view:i}=this.state;if(a){if("is_tab"===a)for(const t of i.form.config_view[a].dataFull.data)t.selected=t.value===e;else if("is_border"===a)for(const t of i.form.config_view[a].dataFull.data)t.selected=t.value===e;else for(const t of i.form[a].dataFull.data)t.selected=t.value===e;this.setState({modal_config_view:i})}},this.componentDidMount=()=>{let{modal_config_view:e}=this.state;e.form=this.loadDataToState(),e.modal={title:o.ZP.getLang("designForm_configView_titleModal")+this.state.data.name,helper:" ",abs_Close:this.func_modalConfig_view_close,visibility:!0},this.setState({modal_config_view:e})},this.Modal_Config_View=(0,l.Iq)("designFormModal_ConfigView"),this.lang_system=o.ZP.getConfigUserDefault("list_lang_config"),this.state={modal_config_view:{},data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.name?t.name=e.name:t.name="",void 0!==e.lang?t.lang=e.lang:t.lang={},null!=e.code?t.code=e.code:t.code="",null!=e.class?t.class=e.class:t.class="",null!=e.codeHidden?t.codeHidden=e.codeHidden:t.codeHidden=o.ZP.autoID(),null!=e.inputtype?t.inputtype=e.inputtype:t.inputtype="",null!=e.isTab?t.isTab=e.isTab:t.isTab="false",null!=e.isBorder?t.isBorder=e.isBorder:t.isBorder="false",null!=e.viewUI?t.viewUI=e.viewUI:t.viewUI="",null!=e.condition?t.condition=e.condition:t.condition="",null!=e.more_information?t.more_information=e.more_information:t.more_information="",null!=e.list_input?t.list_input=e.list_input:t.list_input=[],t}render(){const e=this.Modal_Config_View;return(0,n.jsx)(e,{stateData:this.state.modal_config_view})}}const _=s},7679:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var i=a(3063),o=a(7313),l=a(5842),n=a(9676),s=a(9122),_=a(1950),d=a(6633),c=a(3684),r=a(4804),f=a(2582),u=a(5684),g=a(6417);class m extends o.Component{constructor(e){super(e),this.changeValueSelectAddFeeConfig=(e,t,a)=>{let{modal_add_fee:i}=this.state;i[a]=e,this.setState({modal_add_fee:i})},this.changeValueAddFeeConfig=(e,t)=>{let{modal_add_fee:a}=this.state;a[t]=e.target.value,this.setState({modal_add_fee:a})},this.func_df_cancelCloseForm=()=>{let{modal_close_form_state:e,modal_add_fee:t}=this.state;e.modal.visibility=!1,t.CCL_FEE_actf="",t.CCL_FEE_amount="",t.CCL_FEE_currency="",t.CCL_FEE_data=[],t.CCL_FEE_paysource="",t.isModify_CCL_FEE=!1,t.isModify_GET_FEE=!1,t.tab_choose="CCL_FEE",t.GET_FEE_actf="",t.GET_FEE_target="",t.GET_FEE_value="TOTALFEE",t.METHOD_FEE_code="fee_Collection",t.ACT_FEE_code="account_number_for_fee",t.ACT_FEE_isAutoFill="false",t.ACT_FEE_component_fill="",t.ACT_FEE_currency="",t.CCL_FEE_actdt="",t.GET_FEE_actdt="",t.GET_FEE_value_calculator="",t.IFC_FEE_currency="",t.IFC_FEE_isCurrency="false",t.IFC_FEE_isTransaction="false",t.IFC_FEE_transaction="",t.search={CCL_FEE_actf:"",CCL_FEE_amount:"",CCL_FEE_paysource:"",CCL_FEE_currency:"",GET_FEE_target:"",GET_FEE_value:"",ACT_FEE_component_fill:"",ACT_FEE_currency:"",IFC_FEE_isTransaction:"",IFC_FEE_isCurrency:"",IFC_FEE_currency:""},this.setState({modal_close_form_state:e})},this.func_df_cancelCloseAddFee=()=>{let{modal_add_fee:e}=this.state;e.visibility=!1,this.setState({modal_add_fee:e})},this.func_df_confirmCloseForm=()=>{this.props.func_ListForm_Close(this.form_detail),this.func_df_cancelCloseForm()},this.func_setLoading=e=>{this.setState({isLoading:e})},this.func_save_rule_and_close=e=>{let{form_design_state:t,modal_edit_rule_func:a}=this.state,i=t.config_mode.data_config.configForm_role.configForm_role_config.table_data[this.state.modal_edit_rule_func.ruleStrong_index].data,o=this.form_detail.info.ruleStrong[a.ruleStrong_index],l=t.config_mode.data_config.configForm_role.configForm_role_config.table_data,n=a.ruleStrong_default;const s=n.isStart.dataFull.data.find((e=>e.selected)),_=n.isStatus.dataFull.data.find((e=>e.selected)),d=n.order.dataFull.data.find((e=>e.selected)),c=n.inUse.dataFull.data.find((e=>e.selected)),r=n.isDidStart.dataFull.data.find((e=>e.selected)),f=n.isOpenFromOther.dataFull.data.find((e=>e.selected));if(o.config=e,o.code=n.code,o.isStart=s.value,o.isStatus=_.value,o.order=parseInt(d.value),o.inUse=c.value,o.isDidStart=r.value,o.isOpenFromOther=f.value,this.form_detail){for(const e of l[a.ruleStrong_index].data[1].data)e.selected=e.title===n.code;i[2].data=o.order,i[3].data=o.isStatus?o.isStatus:"",i[4].data=o.isStart.toString(),i[5].data=o.inUse.toString(),i[6].data.dataFull.value=JSON.stringify(o.config,null,4)}a.visibility=!1,this.setState({form_design_state:t,modal_edit_rule_func:a})},this.set_rule_config_default=e=>{let t={};var a=[];let i=void 0!==e.isDidStart&&e.isDidStart,o=void 0!==e.isOpenFromOther&&e.isOpenFromOther;for(var n=1;n<=50;n++){var s={};s.title=n+"",s.value=n+"",a[n]=s}a[0]={title:l.ZP.getLang("designForm_rule_order_runFirst"),value:"-1",selected:!1},a.push({title:l.ZP.getLang("designForm_rule_order_runLast"),value:"9999",selected:!1}),a.forEach((t=>{void 0!==e.order?t.selected=t.value===e.order.toString():a[1].selected=!0}));let _=[];for(let l=0;l<c.listRuleFormStatus.length;l++)_.push({title:c.listRuleFormStatus[l].name,value:c.listRuleFormStatus[l].val,selected:c.listRuleFormStatus[l].val===e.isStatus});return _.find((e=>e.selected))||(_[0].selected=!0),t.isStatus={dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("designForm_rule_statusForm")},helper:l.ZP.getLang("designForm_rule_statusForm_helper"),data_status:"No Result",title:l.ZP.getLang("designForm_rule_statusForm"),class:"col-md-6",required:!1,code_form_component:"isStatus"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:_,search_value:"",abs_Change:this.onChangeValueSelect_ruleDefault,abs_search:this.searchstatusform}},t.isStart={dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("designForm_rule_begin")},helper:l.ZP.getLang("designForm_rule_begin_helper"),data_status:"No Result",title:l.ZP.getLang("designForm_rule_begin"),class:"col-md-6",required:!1,code_form_component:"isStart"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:l.ZP.getLang("designForm_yes"),value:!0,selected:e.isStart},{title:l.ZP.getLang("designForm_no"),value:!1,selected:!e.isStart}],search_value:"",abs_Change:this.onChangeValueSelect_ruleDefault,abs_search:this.search}},t.inUse={dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("designForm_rule_status")},helper:l.ZP.getLang("designForm_rule_status_helper"),data_status:"No Result",title:l.ZP.getLang("designForm_rule_status"),class:"col-md-6",required:!1,code_form_component:"inUse"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:l.ZP.getLang("designForm_yes"),value:!0,selected:e.inUse},{title:l.ZP.getLang("designForm_no"),value:!1,selected:!e.inUse}],search_value:"",abs_Change:this.onChangeValueSelect_ruleDefault,abs_search:this.abs_search}},t.order={dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("designForm_rule_order")},helper:l.ZP.getLang("designForm_rule_order_helper"),data_status:"No Result",title:l.ZP.getLang("designForm_rule_order"),class:"col-md-6",required:!1,code_form_component:"order"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:a,search_value:"",abs_Change:this.onChangeValueSelect_ruleDefault,abs_search:this.search}},t.isDidStart={dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("designForm_rule_isDidStart")},helper:l.ZP.getLang("designForm_rule_isDidStart_helper"),data_status:"No Result",title:l.ZP.getLang("designForm_rule_isDidStart"),class:"col-md-6",required:!1,code_form_component:"isDidStart"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:l.ZP.getLang("designForm_yes"),value:!0,selected:i},{title:l.ZP.getLang("designForm_no"),value:!1,selected:!i}],search_value:"",abs_Change:this.onChangeValueSelect_ruleDefault,abs_search:this.search}},t.isOpenFromOther={dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("designForm_rule_isOpenFromOther")},helper:l.ZP.getLang("designForm_rule_isOpenFromOther_helper"),data_status:"No Result",title:l.ZP.getLang("designForm_rule_isOpenFromOther"),class:"col-md-6",required:!1,code_form_component:"isOpenFromOther"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:l.ZP.getLang("designForm_yes_isOpenFromOther"),value:!0,selected:o},{title:l.ZP.getLang("designForm_no_isOpenFromOther"),value:!1,selected:!o}],search_value:"",abs_Change:this.onChangeValueSelect_ruleDefault,abs_search:this.search}},t},this.onChangeValueSelect_ruleDefault=(e,t,a)=>{let{modal_edit_rule_func:i}=this.state;if(a){let e=[],o=[];e=i.ruleStrong_default[a].dataFull.data.filter((e=>e.selected)),o=i.ruleStrong_default[a].dataFull.data.filter(((e,a)=>a===t)),e.length>0&&(e[0].selected=!1),o.length>0&&(o[0].selected=!0),this.setState({modal_edit_rule_func:i})}},this.renderBodyListConponentInfo=()=>{const e=this.form_detail.list_layout,t=[];return e.forEach((e=>{e.list_view.forEach((a=>{a.list_input.forEach((i=>{let o={data:[{data:e.name},{data:a.name},{data:i.default.name},{data:i.default.code}],config:{value:!1}};t.push(o)}))}))})),t},this.func_edit_rule_func=e=>{let{modal_edit_rule_func:t}=this.state,a={};a=e.item_choose?this.state.form_design_state.config_mode.data_config.configForm_role.configForm_role_config.table_data[e.item_index].data[1].data.find((t=>t===e.item_choose)):this.state.form_design_state.config_mode.data_config.configForm_role.configForm_role_config.table_data[e.item_index].data[1].data.find((t=>t.title===e.rule.code));let i=this.form_detail.info.ruleStrong[e.item_index];a&&(this.ModalEditRuleFunc=_.default[a.title],t.ruleStrong_detail=i.config,t.ruleStrong_index=e.item_index,t.ruleStrong_default=this.set_rule_config_default(i),t.ruleStrong_default.code=a.title,t.list_components=this.renderBodyListConponentInfo(),t.visibility=!0,this.setState({modal_edit_rule_func:t},(()=>{})))},this.func_table_rule_name_change=(e,t,a,i,o)=>{let{form_design_state:l}=this.state;this.setState({form_design_state:l},(()=>{this.func_edit_rule_func({item_index:t.item_index,item_choose:o})}))},this.convert_configMode_template_default=e=>{let t=e.openOne,a=e.form_code,i=e.title,o=[];const n=this.props.data.allListApp.map((e=>e[this.LIST_APP]));for(let l=0;l<n.length;l++)o.push({title:n[l],value:n[l],selected:this.form_detail.info.app===n[l]});return o.find((e=>e.selected))||(o[0].selected=!0),{configForm_default_config:{how_to_open:{dataFull:{abs_Change:this.func_design_how_to_open_change,abs_search:this.search,config:{default:{search:{placeholder:l.ZP.getLang("designForm_opentype")},data_status:"No Result",title:l.ZP.getLang("designForm_opentype"),class:"col-md-6",required:!1},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:l.ZP.getLang("designForm_openone"),value:"true",selected:"true"===t},{title:l.ZP.getLang("designForm_openmany"),value:"false",selected:"false"===t}],search_value:""}},form_id:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_formID"),class:"col-md-6 ",required:!1,placeholder:l.ZP.getLang("designForm_formID")},cmd:{disable:!0,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:a,abs_Change:this.func_form_id_change}},form_map:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_form_code_alias"),class:"col-md-6 ",required:!1,placeholder:l.ZP.getLang("designForm_form_code_alias")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:e.form_code_alias,abs_Change:this.func_form_map_change}},form_title:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_formTitle"),class:"col-md-6 ",required:!1,placeholder:l.ZP.getLang("designForm_formTitle")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:i,abs_Change:this.func_form_title_change}},form_more_info:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_moreInfo"),class:"col-md-6 ",required:!1,placeholder:l.ZP.getLang("designForm_moreInfo")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:e.des,abs_Change:this.func_form_moreinfo_change}},form_message_error:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("designForm_messageError")},data_status:"No Result",title:l.ZP.getLang("designForm_messageError"),class:"col-md-6",required:!1},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:l.ZP.getLang("designForm_yes"),value:"true",selected:"true"===e.list_show_error},{title:l.ZP.getLang("designForm_no"),value:"false",selected:"false"===e.list_show_error}],search_value:"",abs_Change:this.func_form_message_error_change,abs_search:this.search}},form_is_ofModal:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("designForm_ofModal")},data_status:"No Result",title:l.ZP.getLang("designForm_ofModal"),class:"col-md-6",required:!1},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:l.ZP.getLang("designForm_yes"),value:!0,selected:!0===e.ofModal},{title:l.ZP.getLang("designForm_no"),value:!1,selected:!1===e.ofModal}],search_value:"",abs_Change:this.func_form_is_ofModal_change,abs_search:this.search}},form_app:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("designForm_app")},data_status:"No Result",title:l.ZP.getLang("designForm_app"),class:"col-md-6",required:!0,code_form_component:"form_app"},cmd:{disable:!0,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:o,search_value:"",abs_Change:this.onChangeValueSelect_ConfigFormDefault,abs_search:this.search}}}}},this.convert_configMode_template_data=e=>{let t=e.data,a=e.learnapi,i=e.learnsql,o=e.bodata;return{configForm_data_config:{data_manipulation:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_data"),class:"col-md-12 ",required:!1,placeholder:l.ZP.getLang("designForm_data")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:t,abs_Change:this.func_form_data_change}},learn_API:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_learnapi"),class:"col-md-12 ",required:!1,placeholder:l.ZP.getLang("designForm_learnapi")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:a,abs_Change:this.func_form_learnAPI_change}},learn_SQL:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_learnsql"),class:"col-md-12 ",required:!1,placeholder:l.ZP.getLang("designForm_learnsql")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:i,abs_Change:this.func_form_learnSQL_change}},bo_data:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_bodata"),class:"col-md-12 ",required:!1,placeholder:l.ZP.getLang("designForm_bodata")},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:o,abs_Change:this.func_form_bo_data_change}}}}},this.convert_configMode_template_ruleFunc=e=>{let t=[];for(let a=0;a<e.ruleStrong.length;a++){let i=-1;void 0!==e.ruleStrong[a].isStatus&&(i=c.listRuleFormStatus.find((t=>t.val===e.ruleStrong[a].isStatus)));const o={data:[{data:[{icon_item:"edit",title:l.ZP.getLang("designForm_btn_edit"),dataItem:{item_index:a,table_index:0,rule:e.ruleStrong[a]},abs_Click:this.func_edit_rule_func},{icon_item:"copy",title:l.ZP.getLang("designForm_btn_duplicate"),dataItem:{item_index:a,table_index:0,rule:e.ruleStrong[a]},abs_Click:this.func_duplicate_rule_func},{icon_item:"delete",title:l.ZP.getLang("designForm_btn_delete"),dataItem:{rule:e.ruleStrong[a],item_index:a},abs_Click:this.func_delete_rule_func}]},{data:[{title:"getInfo",value:"get_info",selected:"getInfo"===e.ruleStrong[a].code},{title:"numberCal",value:"number_cal",selected:"numberCal"===e.ruleStrong[a].code},{title:"visibility",value:"visibility",selected:"visibility"===e.ruleStrong[a].code},{title:"calculator",value:"calculator",selected:"calculator"===e.ruleStrong[a].code},{title:"setValue",value:"set_value",selected:"setValue"===e.ruleStrong[a].code},{title:"setDataGB",value:"setDataGB",selected:"setDataGB"===e.ruleStrong[a].code},{title:"managerComponent",value:"manager_component",selected:"managerComponent"===e.ruleStrong[a].code},{title:"runFo",value:"run_fo",selected:"runFo"===e.ruleStrong[a].code},{title:"setFocus",value:"set_focus",selected:"setFocus"===e.ruleStrong[a].code},{title:"setMaskConfig",value:"setMaskConfig",selected:"setMaskConfig"===e.ruleStrong[a].code},{title:"setValidate",value:"setValidate",selected:"setValidate"===e.ruleStrong[a].code}],isUpdate:!1,dataItem:{item_index:a,table_index:1},abs_Change:this.func_table_rule_name_change},{data:e.ruleStrong[a].order},{data:-1!==i&&void 0!==i?`${i.name}`:"Kh\xf4ng d\xf9ng"},{data:`${e.ruleStrong[a].isStart}`},{data:`${e.ruleStrong[a].inUse}`},{data:{dataFull:{config:{default:{title:"",class:"col-md-12",rows:10,code_form_component:""},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:JSON.stringify(e.ruleStrong[a].config,null,4)},abs_Change:this.func_change_textArea_rule}}],config:{value:!1}};t.push(o)}return t},this.convert_configMode_template_mode=e=>{let t=e.mode_form.col_input,a=e.mode_form.col_text;return{configForm_mode_config:{mode:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("designForm_mode")},data_status:"No Result",title:l.ZP.getLang("designForm_mode"),class:"col-md-6",required:!1},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:l.ZP.getLang("designForm_Horizontal"),value:"1",selected:"1"===e.mode_form.mode},{title:l.ZP.getLang("designForm_no"),value:"",selected:""===e.mode_form.mode}],search_value:"",abs_Change:this.func_configForm_mode_change,abs_search:this.search}},width_title:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_widthTitle"),class:"col-md-6 ",required:!1,placeholder:l.ZP.getLang("designForm_widthTitle")},cmd:{disable:!1,visible:"1"===e.mode_form.mode,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:a,abs_Change:this.func_width_title_change}},width_component:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_widthComponent"),class:"col-md-6 ",required:!1,placeholder:l.ZP.getLang("designForm_widthComponent")},cmd:{disable:!1,visible:"1"===e.mode_form.mode,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:t,abs_Change:this.func_width_component_change}}}}},this.func_change_lang_title=(e,t)=>{let{form_design_state:a}=this.state;a.config_mode.data_config.configForm_lang.configForm_lang_config.listLang.find((e=>e.dataFull.config.default.code_form_component===t)).dataFull.value=e.target.value,this.setState({form_design_state:a})},this.func_design_how_to_open_change=e=>{let{form_design_state:t}=this.state;const a=t.config_mode.data_config.configForm_default.configForm_default_config.how_to_open.dataFull.data.find((t=>t.value===e)),i=t.config_mode.data_config.configForm_default.configForm_default_config.how_to_open.dataFull.data.find((t=>t.value!==e));a.selected=!0,i.selected=!1,this.setState({form_design_state:t})},this.func_form_id_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_default.configForm_default_config.form_id.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_form_title_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_default.configForm_default_config.form_title.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_form_map_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_default.configForm_default_config.form_map.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.onChangeValueSelect_ConfigFormDefault_appCode=(e,t,a)=>{this.setState({isLoading:!0},(()=>{let{form_design_state:t}=this.state;if(a){for(const i of t.config_mode.data_config.configForm_default.configForm_default_config[a].dataFull.data)i.selected=i.value===e;this.setState({form_design_state:t})}}))},this.onChangeValueSelect_ConfigFormDefault=(e,t,a)=>{let{form_design_state:i}=this.state;if(a){for(const t of i.config_mode.data_config.configForm_default.configForm_default_config[a].dataFull.data)t.selected=t.value===e;this.setState({form_design_state:i})}},this.func_form_moreinfo_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_default.configForm_default_config.form_more_info.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_form_message_error_change=e=>{let{form_design_state:t}=this.state;const a=t.config_mode.data_config.configForm_default.configForm_default_config.form_message_error.dataFull.data.find((t=>t.value===e)),i=t.config_mode.data_config.configForm_default.configForm_default_config.form_message_error.dataFull.data.find((t=>t.value!==e));a.selected=!0,i.selected=!1,this.setState({form_design_state:t})},this.func_form_is_ofModal_change=e=>{let{form_design_state:t}=this.state;const a=t.config_mode.data_config.configForm_default.configForm_default_config.form_is_ofModal.dataFull.data.find((t=>t.value===e)),i=t.config_mode.data_config.configForm_default.configForm_default_config.form_is_ofModal.dataFull.data.find((t=>t.value!==e));a.selected=!0,i.selected=!1,this.setState({form_design_state:t})},this.func_form_data_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_data.configForm_data_config.data_manipulation.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_form_learnAPI_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_data.configForm_data_config.learn_API.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_form_learnSQL_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_data.configForm_data_config.learn_SQL.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_form_bo_data_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_data.configForm_data_config.bo_data.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_configForm_mode_change=e=>{let{form_design_state:t}=this.state;const a=t.config_mode.data_config.configForm_mode.configForm_mode_config.mode.dataFull.data.find((t=>t.value===e)),i=t.config_mode.data_config.configForm_mode.configForm_mode_config.mode.dataFull.data.find((t=>t.value!==e));a.selected=!0,i.selected=!1,a.value?(t.config_mode.data_config.configForm_mode.configForm_mode_config.width_component.dataFull.config.cmd.visible=!0,t.config_mode.data_config.configForm_mode.configForm_mode_config.width_title.dataFull.config.cmd.visible=!0):(t.config_mode.data_config.configForm_mode.configForm_mode_config.width_component.dataFull.config.cmd.visible=!1,t.config_mode.data_config.configForm_mode.configForm_mode_config.width_title.dataFull.config.cmd.visible=!1),this.setState({form_design_state:t})},this.func_width_title_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_mode.configForm_mode_config.width_title.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_width_component_change=e=>{let{form_design_state:t}=this.state;t.config_mode.data_config.configForm_mode.configForm_mode_config.width_component.dataFull.value=e.target.value,this.setState({form_design_state:t})},this.func_delete_rule_func=e=>{let{form_design_state:t}=this.state;this.form_detail.info.ruleStrong.splice(e.item_index,1),t.config_mode.data_config.configForm_role.configForm_role_config.table_data=this.convert_configMode_template_ruleFunc(this.form_detail.info),this.setState({form_design_state:t},(()=>{}))},this.func_duplicate_rule_func=e=>{let{form_design_state:t}=this.state;const a=l.ZP.cloneJson(e.rule);this.form_detail.info.ruleStrong.splice(0,0,a),t.config_mode.data_config.configForm_role.configForm_role_config.table_data=this.convert_configMode_template_ruleFunc(this.form_detail.info),this.setState({form_design_state:t})},this.func_configForm_role_add=()=>{let{form_design_state:e}=this.state;this.form_detail.info.ruleStrong.splice(0,0,{code:"getInfo",inUse:!0,isStart:!0,isStatus:"",order:"1",config:{component_action:"",component_event:"",api_id:"",component_result:""}}),e.config_mode.data_config.configForm_role.configForm_role_config.table_data=this.convert_configMode_template_ruleFunc(this.form_detail.info),this.setState({form_design_state:e})},this.func_design_back_to_home=()=>{let{modal_close_form_state:e}=this.state;e.modal.visibility=!0,this.setState({modal_close_form_state:e})},this.func_cancel_modal_config_component=()=>{let e=this.state.component_config_state;e.visibility=!1,this.setState({component_config_state:e})},this.func_cancel_modal_edit_rule_func=()=>{let{modal_edit_rule_func:e,form_design_state:t}=this.state;e.visibility=!1,this.setState({modal_edit_rule_func:e,form_design_state:t},(()=>{}))},this.func_ClickOpenTool=e=>{let{form_design_state:t}=this.state,a=t.design_mode.data_config.design_tool.find((t=>t.title===e.title));void 0!==a&&(a.selected=!a.selected),this.setState({form_design_state:t})},this.convert_designToolItems_stateTemplate=e=>{let t=[];if(0===t.length)for(let a=0;a<this.allDesignToolGroups.length;a++){if(this.allDesignToolGroups[a].isActive){const i=l.ZP.cloneJson(this.allDesignToolGroups[a].group_id);t[a]={group_id:this.allDesignToolGroups[a].group_id,title:this.allDesignToolGroups[a].title[this.keylang]||this.allDesignToolGroups[a].title.en,order:this.allDesignToolGroups[a].order,dataItem:{title:this.allDesignToolGroups[a].title[this.keylang]||this.allDesignToolGroups[a].title.en,group_id:i},selected:!0,data:[]};let o=l.ZP.cloneJson(e.filter((e=>e.group_id===i&&e.isActive)));for(let e=0;e<o.length;e++){let i=o[e];i.title=i.title[this.keylang],t[a].data.push(i)}t[a].data.sort(((e,t)=>e.order-t.order))}t.sort(((e,t)=>e.order-t.order))}return t=t.filter((e=>null!==e)),t},this.func_design_inputFieldSearch_Change=e=>{let t=this.state.form_design_state;t.design_mode.data_config.search.value=e.target.value.toLowerCase().trim(),this.setState({form_design_state:t})},this.func_design_inputFieldSearch_Submit=()=>{let e=this.state.form_design_state,t=e.design_mode.data_config.design_tool,a=e.design_mode.data_config.search.value;if(""!==a){for(let a=0;a<t.length;a++)t[a].data=[];let e=l.ZP.cloneJson(this.allDesignToolItems).filter((e=>e.title[this.keylang].toLowerCase().trim().includes(a)));for(let a=0;a<t.length;a++){const i=t[a];let o=e.filter((e=>e.group_id===i.group_id));for(let e=0;e<o.length;e++){let i=o[e];i.title=i.title[this.keylang],t[a].data.push(i)}}}else t=this.convert_designToolItems_stateTemplate(this.allDesignToolItems);e.design_mode.data_config.design_tool=t,this.setState({form_design_state:e})},this.convert_renderHTML_allListForm=()=>{var e=a(1168),t=[];if(void 0!==this&&null!==this){const a=document.getElementsByClassName("designForm-main-content");if(void 0!==a&&a.length>0&&null!==a[0]){let l=e.findDOMNode(a[0]).getElementsByClassName("Logic_DesignIsLayout");if(void 0!==l)for(var i=0;i<l.length;i++){const a={att_data:l[i].getAttribute("att-data"),att_id:l[i].getAttribute("att-id")};if(void 0!==a){t.push(a);let s=e.findDOMNode(l[i]).getElementsByClassName("Logic_DesignIsView ");if(void 0!==s)for(var o=0;o<s.length;o++){const a={att_data:s[o].getAttribute("att-data"),att_id:s[o].getAttribute("att-id")};if(void 0!==a){t.push(a);let i=e.findDOMNode(s[o]).getElementsByClassName("Logic_DesignIsComponent ");if(void 0!==i)for(var n=0;n<i.length;n++){const e={att_data:i[n].getAttribute("att-data"),att_id:i[n].getAttribute("att-id")};void 0!==e&&t.push(e)}}}}}}}let s=[],_=-1,d=-1,c=l.ZP.cloneJson(this.form_detail.list_layout);for(let a=0;a<t.length;a++){let e=t[a].att_data.split(".");if("new_view"===e[0]||"new_layout"===e[0]||"new_component"===e[0]){let e=this.allDesignToolItems.find((e=>e.att_id===t[a].att_id));if(void 0!==e){let i=l.ZP.cloneJson(e.template);switch(t[a].att_data){case"new_component":if(Array.isArray(i))for(let e=0;e<i.length;e++){const t=i[e];t.default.codeHidden=l.ZP.autoID(),s[_].list_view[d].list_input.push(t)}else i.default.codeHidden=l.ZP.autoID(),s[_].list_view[d].list_input.push(i);break;case"new_view":i.codeHidden=l.ZP.autoID(),i.list_input=[],s[_].list_view.push(i),d++;break;case"new_layout":i.codeHidden=l.ZP.autoID(),i.list_view=[],s.push(i),_++,d=-1}}else console.log("Khong tim thay ",t[a].att_id)}else{let t=e[0],a=e[1],i=e[2];if(void 0!==i){let e=l.ZP.cloneJson(c[t].list_view[a].list_input[i]);s[_].list_view[d].list_input.push(e)}else if(void 0!==a){let e=l.ZP.cloneJson(c[t].list_view[a]);e.list_input=[],s[_].list_view.push(e),d++}else if(void 0!==t){let e=l.ZP.cloneJson(c[t]);e.list_view=[],s.push(e),_++,d=-1}else console.log("\u0110\u1eddi th\u1eadt b\u1ea5t ng\u1edd!")}}return s},this.addFeeBtn=async()=>{let e,{form_design_state:t,modal_add_fee:a}=this.state,i=t.config_mode.data_config,o=i.configForm_default.configForm_default_config.form_id.dataFull.value,n=i.configForm_default.configForm_default_config.form_app.dataFull.data.find((e=>e.selected)),s=[{default:{name:"Fee collect method",code:`${a.METHOD_FEE_code}`,class:" col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right",role:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",codeHidden:"1eac964626a3ecb9"},config:{structable:`${o}.${a.METHOD_FEE_code}`,structable_read:`${o}.${a.METHOD_FEE_code}`,cdlist:{cdgrp:"DPT",cdname:"PAYBY"},data_default:"",data_mode:"cdlist",query_data:"",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',index_view_value:"0",col_format:"@c_cdlist.caption",json_data:"[]",key_selected:"c_cdlist.cdid",useAction:"false",isAutoDefault:"true",isLabel:"false",isHasDataNull:"false"},role:{disabled:"",visible:"",other:"",other2:""},property:{},validate:{is_compare:!1,request:!1,min:"",max:"",regex_format:"",validate_html:"true"},lang:{title:{vi:"",en:"",my:""},lang_compare:{}},configAVD:{},inputtype:"jSelect"},{config:{useAction:"true",txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',structable:`${o}.${a.ACT_FEE_code}`,structable_read:`${o}.${a.ACT_FEE_code}`,data_default:"",form_evaluation:"",isLookup:"true",isEvaluation:"false",is_upperCase:"false",callform:`${o}account_fee_lookup`,callform_detail:"",callform_detail_mode:"modal",data_view:`${o}_api_rulefunc_lkp_data_account_fee.account_name`,data_value:`${o}_api_rulefunc_lkp_data_account_fee.account_number`,is_password:"false",is_upper:"false",action:"",autoWrap:"true",isSearch:"false"},role:{visible:"",disabled:""},property:{},validate:{is_compare:!1,request:!1,min:0,max:"",regex_format:"",validate_html:"true"},lang:{title:{vi:"",en:"",my:""},lang_compare:{}},configAVD:{},inputtype:"cTextInput",default:{name:"Account number for fee",code:`${a.ACT_FEE_code}`,class:"col-xl-3 col-lg-3 col-md-4 col-sm-5 col-12",role:"",condition:"",ofgroup:"pgacc",class_ofgroup:"col-xl-12 col-lg-12 col-md-12 col-sm-12",codeHidden:"3d27456b19b1116a"}},{default:{name:"txb_pgacc",code:"txb_pgacc",class:"col-xl-3 col-lg-3 col-md-4 col-sm-5 col-12",role:"",condition:"",ofgroup:"pgacc",class_ofgroup:"col-sm-2",codeHidden:"4481088225fd845c"},config:{structable:`${o}.txb_pgacc`,structable_read:`${o}.txb_pgacc`,data_default:"",action:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"",data_view:"",data_value:"",color:"",isUseTitle:"false",fontSize:"",isBold:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{vi:"",en:"",my:""},configAVD:{},inputtype:"jLabel"},{config:{action:"",structable:`${o}.fee_data`,structable_read:`${o}.fee_data`,data_default:"{}",callform:`${o}_O9_FEE`,callData:"form_child.fee_data"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jSameMain",default:{name:"fee_data",code:"form_fee",codeHidden:"b76b3549b2d4aad9",class:"col-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""}}],_=this.form_detail.list_layout[0].list_view[0].list_input.length,d=this.form_detail.list_layout[0].list_view[0].list_input[_-1];if("jCheckbox"===d.inputtype&&"check_box_caution"===d.default.code){let e=this.form_detail.list_layout[0].list_view[0].list_input.splice(_-1,1);s.push(e[0]),this.form_detail.list_layout[0].list_view[0].list_input.push.apply(this.form_detail.list_layout[0].list_view[0].list_input,s)}else this.form_detail.list_layout[0].list_view[0].list_input.push.apply(this.form_detail.list_layout[0].list_view[0].list_input,s);let c="";for(let l=0;l<a.CCL_FEE_data.length;l++)c+=""===c?a.CCL_FEE_data[l].pay_source.toUpperCase():"|"+a.CCL_FEE_data[l].pay_source.toUpperCase();for(let l=0;l<this.form_detail.info.ruleStrong.length;l++){let e=this.form_detail.info.ruleStrong[l];if("visibility"===e.code&&"btn_clear"===e.config.component_action&&"false"===e.config.ena_dis){e.component_result+=`;${a.METHOD_FEE_code}`,this.form_detail.info.ruleStrong[l]=e;break}}let r={txb_pgacc:""};r[a.ACT_FEE_code]="",this.form_detail.info.ruleStrong.push.apply(this.form_detail.info.ruleStrong,[{code:"runFo",inUse:!0,isStart:!1,isStatus:-1,order:1,config:{component_action:`${a.METHOD_FEE_code}`,component_event:"enter_tab",txFoActions:JSON.stringify([{function:"own_O9_fee.convertPaySource",status:"A",para:[`${a.METHOD_FEE_code}`,`${o}`,"fee_data"]}]),txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',useAction:"true",condition:"JSON.parse(JSON.stringify(@{form_fee})).form_child.fee_data.length>0",component_result:""},isDidStart:!1,isOpenFromOther:!1},{code:"setDataGB",config:{component_action:"",component_result:`${a.METHOD_FEE_code}`,component_event:"enter_tab",query:"PAYBY;DPT",query_db:"",api:"PAYBY;DPT",data_type:"query",mode_filter:"js_condition",js_condition:` data_gb = data_gb.filter(data=>{\n      return  ('${c}'.split("|").includes(data.c_cdlist.cdid)==true);\n      })`,filter_condition:""},inUse:!0,order:9,isStart:!0,isStatus:-1,isDidStart:!1,isOpenFromOther:!1},{code:"setValue",inUse:!0,isStart:!0,isStatus:-1,order:1,config:{component_action:`${a.METHOD_FEE_code}`,component_result:"",component_event:"enter_tab",isGetOOP:"true",getOOPFormat:JSON.stringify(r),condition:"'@{transaction_number}' === \"\""},isDidStart:!1,isOpenFromOther:!1},{code:"setValue",inUse:!0,isStart:!0,isStatus:-1,order:1,config:{component_action:`${a.METHOD_FEE_code}`,component_result:"form_fee;form_fee(pay_source)",component_event:"all",isGetOOP:"false",getOOPFormat:JSON.stringify({"form_fee;form_fee(pay_source)":`@${a.METHOD_FEE_code}`}),condition:""},isDidStart:!1,isOpenFromOther:!1},{code:"getInfo",inUse:!0,isStart:!0,isStatus:-1,order:1,config:{component_action:`${a.ACT_FEE_code}`,component_event:"enter_tab",isSetCode:"true",data_type:"api",is_data_to_form:"false",api_id:`${o}_api_rulefunc_get_info_account_fee`,component_result:JSON.stringify({txb_pgacc:`${o}_api_rulefunc_get_info_account_fee.account_name`}),exception:"",api_bo:"",sql_bo:"",data_bo:"",data_table:"",sql_id:"",isAutoDefault:"false",error_configs:"[]",condition:`'@{transaction_number}' === "" && ( '@{${a.METHOD_FEE_code}}' !== 'CSH' )`},isDidStart:!1,isOpenFromOther:!1},{code:"visibility",inUse:!0,isStart:!0,isStatus:-1,order:1,config:{component_action:`${a.METHOD_FEE_code}`,component_result:`${a.ACT_FEE_code}`,view_result:"",condition:`'@{transaction_number}'===""&&('@{${a.METHOD_FEE_code}}' === 'DPT' || '@{${a.METHOD_FEE_code}}' === 'ACT') `,visible:"not_use",ena_dis:"false",component_event:"all",list_config:[]},isDidStart:!1,isOpenFromOther:!1},{code:"visibility",inUse:!0,isStart:!0,isStatus:-1,order:1,config:{component_action:`${a.METHOD_FEE_code}`,component_result:`${a.ACT_FEE_code}`,view_result:"",condition:` '@{${a.METHOD_FEE_code}}' !== 'DPT'&& '@{${a.METHOD_FEE_code}}' !== 'ACT' `,visible:"not_use",ena_dis:"true",component_event:"all",list_config:[]},isDidStart:!1,isOpenFromOther:!1},{code:"visibility",inUse:!0,isStart:!0,isStatus:-1,order:1,config:{component_action:"",component_result:"form_fee;form_fee()",view_result:"",condition:"",visible:"true",ena_dis:"not_use",component_event:"all",list_config:[]},isDidStart:!1,isOpenFromOther:!1},{code:"managerComponent",config:{component_event:"all",component_action:"transaction_number",component_manager:"{\"form_fee;form_fee(ifc_code;ifc_value;btn_add;btn_apply)\":\" '@{transaction_number}' === '' \"}",is_use_block:"false"},inUse:!0,order:5,isStart:!0},{code:"visibility",config:{component_event:"all",component_action:"transaction_number",component_result:"form_fee;form_fee(table_fee)",condition:"'@{transaction_number}'!==\"\"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:5},{code:"visibility",config:{component_event:"all",component_action:"transaction_number",component_result:"form_fee;form_fee(table_fee)",condition:"'@{transaction_number}'===\"\"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:5},{code:"runFo",inUse:!0,isStart:!1,isStatus:-1,order:1,config:{component_action:`${a.IFC_FEE_currency}`,component_event:"enter_tab",txFoActions:JSON.stringify([{function:"own_O9_fee.clearFee",status:"A",para:["",`${o}`,"fee_data"]}]),txFo:JSON.stringify([{txcode:"",input:{}}]),useAction:"true",condition:"'@{transaction_number}'===\"\"",component_result:""},isDidStart:!1,isOpenFromOther:!1}]),"true"===a.ACT_FEE_isAutoFill&&this.form_detail.info.ruleStrong.push({code:"calculator",config:{component_action:`${a.ACT_FEE_component_fill}`,component_result:`${a.ACT_FEE_code}`,component_event:"enter_tab",function_cal:`'@{${a.ACT_FEE_component_fill}}'`,condition:"'@{transaction_number}' === \"\" && ( '@{receive_by}' !== 'CSH' )"},isStart:!0,isDidStart:!0,inUse:!0,order:46,isStatus:-1,isOpenFromOther:!1});let f=this.form_detail.info;const u=this.loadDataToState(f);this.setState({form_design_state:u},(async()=>{let t="true"!==a.IFC_FEE_isCurrency&&"true"!==a.IFC_FEE_isTransaction?"IFC_LOOKUP_IFCTYPE_CO":`${o}_api_rulefunc_tran_fee_lkp_data_ifccd`,i=[{form_id:o+"account_fee_lookup",list_layout:[{name:"",des:"",class:"",codeHidden:"45d76b6f14d73543",inputtype:"cLayout",list_view:[{name:"",code:"code",codeHidden:"015fc2150dbbf981",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Search",code:"search_input",class:"    col-xl-4 col-lg-4 col-md-5 col-sm-6",role:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",codeHidden:"01df544303b8bc4a"},config:{useAction:"true",txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',structable:"lookup.search_input",structable_read:"lookup.search_input",data_default:"",isLookup:"false",is_upperCase:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_password:"false",is_upper:"false",action:"",autoWrap:!1,isSearch:!0,readOnly:!1},role:{visible:"",disabled:""},property:{},validate:{request:!1,min:"",max:"",regex_format:"",validate_html:"true"},lang:{vi:"",en:""},configAVD:{},inputtype:"cTextInput"},{config:{onTable:"",icon:"fa-search",color:"primary",action:"",useAction:"false",txFoActions:"[]",txFo:JSON.stringify([{txcode:"#sys:fo-search-API",input:{list_component:"*",list_view:"code",table_code:`${o}pgacc`,learn_api:`${o}_api_rulefunc_lkp_data_account_fee`}}]),isMasterData:"false",tableMasterData:"",privateKeyTableMasterData:"",isLookup:"",cmd:"",callform:"",uploadfile:{active:"false",filetype:""}},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{vi:"",en:"",my:""},configAVD:{},inputtype:"cButton",default:{name:"Search",code:"search_button",class:"",role:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",codeHidden:"ed4481f418acd092"}},{default:{name:"",code:"view",codeHidden:"508d818e0196b02b",class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12col-md-12",role:""},config:{action:"",txFoActions:'[{"function":"","status":"A","para":[]}]',txFo:'[{"txcode":"#sys:fo-lookup-selectData","input":{}}]',useAction:"false",icon:"fa-hand-o-right",color:"info",onTable:"table_name",isMasterData:"false",tableMasterData:"",privateKeyTableMasterData:""},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"}]},{name:"Search",code:"code",codeHidden:"5a261bf88c33c8bf",inputtype:"cView",isTab:"false",list_input:[{config:{structable:"",query_data:`select * from ${o}_api_rulefunc_lkp_data_account_fee`,paging_record:"5",columns:JSON.stringify([{code:`${o}_api_rulefunc_lkp_data_account_fee.account_number`,title:"Code",inputtype:"ColumnString",config:{}},{code:`${o}_api_rulefunc_lkp_data_account_fee.account_name`,title:"Name",inputtype:"ColumnString",config:{}}]),onTable:"",isLoadDataStart:"true",hasSystemColumnCheck:"false",isMoveColumn:"false",isResize:"false",columnSystemCheckBox:{methodGet:"checked",hasSystemColumnCheckTotal:"false",check_type:"DEFAULT",headerCheckTitle:"",actionFo_SystemCheck:{useAction:"txFo",txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]'},checked_to_selected:"checked"},actionFo_RowSelect:{useAction:"txFo",txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]'}},role:{visible:"",disabled:""},property:{},validate:{request:!1,min:"",max:"",regex_format:"",validate_html:"true"},lang:{vi:{},en:{},my:{}},configAVD:{},inputtype:"cTableDefault",default:{name:"",code:"table_name",class:"col-12",role:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",codeHidden:"22bf10b024534005"}}]}]}],info:{form_code_alias:"",last_update:"03/02/2023 03:26:03 PM",list_show_error:"false",app:"ncbsCbs",title:`${o}account_fee_lookup`,bodata:"",data:"",des:`${o}account_fee_lookup`,flow_layout:[],form_code:`${o}account_fee_lookup`,key_form:"",lang_form:{en:`${o}account_fee_lookup`},learnapi:"",learnsql:"",mode_form:{mode:"",col_text:"",col_input:""},node_position:[],ofModal:!1,openOne:"true",ruleStrong:[{code:"visibility",inUse:!0,isStart:!0,isStatus:-1,order:1,config:{component_action:"",component_result:"search_input;search_button",view_result:"",condition:"",visible:"false",ena_dis:"false",component_event:"all",list_config:[]},isDidStart:!1,isOpenFromOther:!1},{code:"runFo",config:{component_action:"search_input",txFo:JSON.stringify([{txcode:"#sys:fo-search-API",input:{list_component:"*",list_view:"code",table_code:`${o}pgacc`,learn_api:`${o}_api_rulefunc_lkp_data_account_fee`}}]),txFoActions:"",useAction:"false",condition:"",component_result:""},inUse:!0,order:1,isStart:!0,isStatus:-1,isDidStart:!1,isOpenFromOther:!1}],responseType:"1"}},{form_id:o+"_O9_FEE",list_layout:[{name:"Fee",des:"",class:"",lang:{en:"Fee",vi:"Fee"},lang_des:{vi:"",en:""},codeHidden:"2016bef2e4e3edbe",inputtype:"cLayout",list_view:[{name:"M?u view",code:"code",codeHidden:"1aee1cb6ec37f32b",inputtype:"cView",isTab:"false",list_input:[{config:{useAction:"true",txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',structable:"form_child.ifc_code",structable_read:"form_child.ifc_code",data_default:"",form_evaluation:"",isLookup:"true",isEvaluation:"false",is_upperCase:"false",callform:`${o}ifccd_lookup`,callform_detail:"",callform_detail_mode:"modal",data_view:"true"!==a.IFC_FEE_isCurrency&&"true"!==a.IFC_FEE_isTransaction?"IFC_LOOKUP_IFCTYPE_CO.ifc_name":`${o}_api_rulefunc_tran_fee_lkp_data_ifccd.ifc_name`,data_value:"true"!==a.IFC_FEE_isCurrency&&"true"!==a.IFC_FEE_isTransaction?"IFC_LOOKUP_IFCTYPE_CO.ifc_code":`${o}_api_rulefunc_tran_fee_lkp_data_ifccd.ifc_code`,is_password:"false",is_upper:"false",action:"",autoWrap:"true",isSearch:"false"},role:{visible:"",disabled:""},property:{},validate:{is_compare:!1,request:!1,min:"",max:"",regex_format:"",validate_html:"true"},lang:{title:{vi:"",en:"",my:""},lang_compare:{}},configAVD:{},inputtype:"cTextInput",default:{name:"Interest/fee/charge code",code:"ifc_code",class:"col-xl-3 col-lg-3 col-md-4 col-sm-5 ",role:"",condition:"",ofgroup:"ifc_code",class_ofgroup:"col-xl-12 col-lg-12 col-md-12 col-sm-12",codeHidden:"92af76cf64b9ad7e"}},{default:{name:"ifc_name",code:"ifc_name",codeHidden:"6230b0f3664a3530",class:"col-xl-9 col-lg-9 col-md-8 col-sm-7 ",condition:"",ofgroup:"ifc_code",class_ofgroup:"col-xl-12 col-lg-12 col-md-12 col-sm-12",role:""},config:{action:"",structable:"form_child.ifc_name",structable_read:"form_child.ifc_name",data_default:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:""},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jLabel"},{default:{name:"Payment source",code:"pay_source",codeHidden:"033d396504dd7b26",class:" col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.pay_source",structable_read:"form_child.pay_source",cdlist:{query:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='PAYSRC' orderby c_cdlist.cdidx",cdgrp:"IFC",cdname:"PAYSRC"},data_default:"",data_mode:"cdlist",query_data:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='PAYSRC' orderby c_cdlist.cdidx",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:"[]",key_selected:"c_cdlist.cdid",useAction:"true"},role:{disabled:"",visible:"",other:"",other2:""},property:{},validate:{request:!1},lang:{ui:{vi:{"Payment source":"Payment source"},en:{"Payment source":"Payment source"}}},configAVD:{},inputtype:"jSelect"},{default:{name:"Value",code:"ifc_value",codeHidden:"399d64cdf7409c9a",class:" col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.ifc_value",structable_read:"form_child.ifc_value",data_default:"",format:"#,###.00",decimal_length:"5"},role:{visible:"",disabled:""},property:{},validate:{request:!1,min:0,max_length:16},lang:{},configAVD:{},inputtype:"jCurrency"},{default:{name:"Value Type",code:"value_type",codeHidden:"ef35ff134e49edbd",class:" col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.value_type",structable_read:"form_child.value_type",cdlist:{query:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='VALTYPE' orderby c_cdlist.cdidx",cdgrp:"IFC",cdname:"VALTYPE"},data_default:"",data_mode:"cdlist",query_data:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='VALTYPE' orderby c_cdlist.cdidx",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:"[]",key_selected:"c_cdlist.cdid",useAction:"false"},role:{disabled:"",visible:"",other:"",other2:""},property:{},validate:{request:!1},lang:{ui:{vi:{"Value Type":"Value Type"},en:{"Value Type":"Value Type"}}},configAVD:{},inputtype:"jSelect"},{default:{name:"value_typect",code:"value_typect",codeHidden:"19aaddd5d0ee664c",class:" col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',useAction:"true",is_upperCase:"false",action:"",structable:"form_child.value_typect",structable_read:"form_child.value_typect",data_default:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_disabled:"false",autoWrap:!0,isSearch:!1},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"},{default:{name:"data_fee",code:"data_fee",class:" col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",role:"",condition:"",ofgroup:"",class_ofgroup:"",codeHidden:"data_fee"},config:{useAction:"true",txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',structable:"data_fee.data_fee",structable_read:"data_fee.data_fee",data_default:JSON.stringify({list_CCL_FEE:JSON.stringify(this.state.modal_add_fee.CCL_FEE_data.map(((e,t)=>({relf:e.pay_source+";"+e.amount+";"+e.currency,actf:e.actf,rule:"CCL_FEE",txcode:o.replace("FO_",""),value:"",actcdt:e.actdt,ridx:t})))),list_GET_FEE:JSON.stringify(this.state.modal_add_fee.GET_FEE_data.map(((e,t)=>({relf:e.target,actf:e.actf,rule:"GET_FEE",txcode:o.replace("FO_",""),value:"CALCULATOR"===e.value?e.value_calculator:e.value,actcdt:e.actdt,ridx:t})))),list_AUTO_FEE:"[]"}),form_evaluation:"",isLookup:"false",isEvaluation:"false",is_upperCase:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_password:"false",is_upper:"false",action:"",autoWrap:"true",isSearch:"false"},role:{visible:"",disabled:""},property:{},validate:{is_compare:!1,request:!1,min:"",max:"",regex_format:"",validate_html:"true"},lang:{title:{vi:"",en:"",my:""},lang_compare:{}},configAVD:{},inputtype:"cTextInput"}]},{name:"M?u view",code:"code",codeHidden:"ed54c39ee7144f0b",inputtype:"cView",isTab:"false",class:"col-sm-12",list_input:[{default:{name:"Add",code:"btn_add",codeHidden:"p5685f65655469i59",class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"default_save",txFoActions:'[\n    {\n        "function": "own_O9_fee.FeeAdd",\n        "status": "A",\n        "para": [\n            "form_child", "pay_source"\n        ]\n    }\n]',txFo:'[\n    {\n        "txcode": "#sys:fo-clearDataFormChild",\n        "input": {\n            "node_clear": "linkage_detail"\n        }\n    }\n]',useAction:"true",icon:"fa-plus",color:"primary",onTable:"",isMasterData:"false",tableMasterData:"word_typing",privateKeyTableMasterData:"id"},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{default:{name:"Apply",code:"btn_apply",codeHidden:"3261a21a29bfc6f5",class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"",txFoActions:"",txFo:'[\n    {\n        "txcode": "fo-convert-dataFee-formchild",\n        "input": {}\n    }\n]',useAction:"false",icon:"fa-floppy-o",color:"success",onTable:"",isMasterData:"false",tableMasterData:"",privateKeyTableMasterData:""},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{default:{name:"",code:"table_fee",codeHidden:"p6d5o69he73n34",class:"col-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.fee_data",query_data:"fee_data",paging_record:"5",columns:'[{"code":"fee_data.ifc_code","title":"IFC code","inputtype":"ColumnString","config":{}},{"code":"fee_data.ifc_name","title":"IFC name","inputtype":"ColumnString","config":{}},{"code":"fee_data.value_type","title":"Value type","inputtype":"ColumnCdlist","config":{"cdgrp":"IFC","cdname":"VALTYPE"}},{"code":"fee_data.ifc_value","title":"Value","inputtype":"columnCurrency","config":{"decimal_length":"5"}},{"code":"fee_data.ifc_base_amount","title":"Fee","isSum":true,"sumTitle":"Total Amount","inputtype":"columnCurrency","config":{"decimal_length":"2"}},{"code":"fee_data.floor_value","title":"Floor","inputtype":"columnCurrency","config":{"decimal_length":"2"}},{"code":"fee_data.ceiling_value","title":"Ceiling","inputtype":"columnCurrency","config":{"decimal_length":"2"}},{"code":"fee_data.currency_code","title":"Currency","inputtype":"ColumnString","config":{}}]'},role:{},property:{},validate:{},lang:{vi:{"IFC code":"IFC code","Value type":"Value type",Value:"Value",Fee:"Fee",Floor:"Floor",Ceiling:"Ceiling",Currency:"Currency"},en:{"IFC code":"IFC code","Value type":"Value type",Value:"Value",Fee:"Fee",Floor:"Floor",Ceiling:"Ceiling",Currency:"Currency"}},configAVD:{},inputtype:"jTableForm"}]},{name:"M?u view",code:"formchild",codeHidden:"1cacae7586c074d8",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Modify",code:"btn_modify",codeHidden:"p6d988np4t55480",class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"default_view",txFoActions:'[\n    {\n        "function": "own_O9_fee.FeeModify",\n        "status": "A",\n        "para": [\n            "form_child"\n        ]\n    }\n]',txFo:'[\n    {\n        "txcode": "#sys:fo-selectDataFormChild",\n        "input": {\n            "node_set": "linkage_detail"\n        }\n    }\n]',useAction:"true",icon:"fa-edit",color:"warning",onTable:"table_fee",isMasterData:"true",tableMasterData:"word_typing",privateKeyTableMasterData:"id"},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{default:{name:"Remove",code:"btn_remove",codeHidden:"sp5555D4c33A84j",class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"default_delete",txFoActions:'[\n    {\n        "function": "own_O9_fee.FeeRemove",\n        "status": "A",\n        "para": [\n            "fee_data"\n        ]\n    }\n]',txFo:"[]",useAction:"true",icon:"fa-trash",color:"danger",onTable:"table_fee",isMasterData:"true",tableMasterData:"word_typing",privateKeyTableMasterData:"id"},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"}]}]}],info:{form_code_alias:"",last_update:this.formatDate(),list_show_error:"false",app:n.value,title:o+"_O9_FEE",bodata:"",data:"",des:o+"_O9_FEE",flow_layout:[],form_code:o+"_O9_FEE",key_form:"",lang_form:{en:o+"_O9_FEE"},learnapi:"",learnsql:"",mode_form:{mode:"1",col_text:"",col_input:""},node_position:[],ofModal:!1,openOne:"false",ruleStrong:[{code:"visibility",config:{component_event:"on_click",component_action:"btn_add;btn_modify",component_result:"table_fee;ifc_code;ifc_value;btn_apply",condition:"",visible:"not_use",ena_dis:"false",view_result:"code",list_config:[]},inUse:!0,order:1,isStart:!1},{code:"visibility",config:{component_event:"on_click",component_action:"btn_add;btn_modify",component_result:"btn_add",condition:"",visible:"not_use",ena_dis:"true",view_result:"",list_config:[]},inUse:!0,order:1,isStart:!1},{code:"visibility",config:{component_event:"on_click",component_action:"btn_apply",component_result:"btn_add",condition:"",visible:"not_use",ena_dis:"false",view_result:"",list_config:[]},inUse:!0,order:1,isStart:!0},{code:"visibility",config:{component_event:"on_click",component_action:"btn_apply",component_result:"*;btn_apply",condition:"",visible:"not_use",ena_dis:"true",view_result:"",list_config:[]},inUse:!0,order:1,isStart:!0},{code:"visibility",config:{component_event:"all",component_action:"btn_modify",component_result:"ifc_code;ifc_value;btn_apply",condition:"",visible:"not_use",ena_dis:"false",view_result:"",list_config:[]},inUse:!0,order:1},{code:"setValue",config:{component_event:"all",component_action:"value_type",component_result:"",isGetOOP:"true",getOOPFormat:'{\n    "value_typect": "c_cdlist.caption"\n}'},inUse:!0,order:2,isStart:!0},{code:"visibility",config:{component_event:"on_change",component_action:"",component_result:"value_type;value_typect;data_fee;pay_source",condition:"",visible:"false",ena_dis:"not_use",view_result:"",list_config:[]},inUse:!0,order:3,isStart:!0},{code:"getInfo",config:{component_event:"all",component_action:"ifc_code",component_result:JSON.stringify({ifc_name:`${o}_api_rulefunc_tran_fee_get_info_ifccd.ifc_name`,payrate:`${o}_api_rulefunc_tran_fee_get_info_ifccd.payrate`,ifc_value:`${o}_api_rulefunc_tran_fee_get_info_ifccd.ifc_value`,ifc_amount:`${o}_api_rulefunc_tran_fee_get_info_ifccd.ifc_amount`,ifc_base_amount:`${o}_api_rulefunc_tran_fee_get_info_ifccd.ifc_base_amount`,vat_amount:`${o}_api_rulefunc_tran_fee_get_info_ifccd.vat_amount`,value_type:`${o}_api_rulefunc_tran_fee_get_info_ifccd.value_type`,send_amount:`${o}_api_rulefunc_tran_fee_get_info_ifccd.send_amount`,received_amount:`${o}_api_rulefunc_tran_fee_get_info_ifccd.received_amount`,equivalent_amount:`${o}_api_rulefunc_tran_fee_get_info_ifccd.equivalent_amount`,floor_value:`${o}_api_rulefunc_tran_fee_get_info_ifccd.floor_value`,ceiling_value:`${o}_api_rulefunc_tran_fee_get_info_ifccd.ceiling_value`,currency_code:`${o}_api_rulefunc_tran_fee_get_info_ifccd.currency_code`,ifc_linkage:`${o}_api_rulefunc_tran_fee_get_info_ifccd.ifc_linkage`,rounding_rule:`${o}_api_rulefunc_tran_fee_get_info_ifccd.rounding_rule`,rounding_num:`${o}_api_rulefunc_tran_fee_get_info_ifccd.rounding_num`,share_fee:`${o}_api_rulefunc_tran_fee_get_info_ifccd.share_fee`,share_rate:`${o}_api_rulefunc_tran_fee_get_info_ifccd.share_rate`,share_amount:`${o}_api_rulefunc_tran_fee_get_info_ifccd.share_amount`,round_rate:`${o}_api_rulefunc_tran_fee_get_info_ifccd.round_rate`,round_amount:`${o}_api_rulefunc_tran_fee_get_info_ifccd.round_amount`}),isSetCode:"true",data_type:"api",api_id:`${o}_api_rulefunc_tran_fee_get_info_ifccd`,condition:"'@{transaction_number}' === \"\"",isAutoDefault:!0,is_data_to_form:"false"},isStart:!1,isDidStart:!1,inUse:!0,order:3},{code:"getInfo",config:{component_event:"enter_tab",component_action:"ifc_code",component_result:"",isSetCode:"true",data_type:"api",api_id:`${o.split("_")[1]}_POST_getinfo_fee_ifccd`,condition:" !!'@{ifc_name}' ",isAutoDefault:!0,is_data_to_form:"true"},isStart:!1,isDidStart:!1,inUse:!0,order:4}],responseType:"1"}},{form_id:`${o}ifccd_lookup`,list_layout:[{name:"",des:"",class:"",codeHidden:"9eaf03e844d64b09",inputtype:"cLayout",list_view:[{name:"",code:"code",codeHidden:"78c1cfee930e98d0",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Search",code:"search_input",class:"    col-xl-4 col-lg-4 col-md-5 col-sm-6",role:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",codeHidden:"01df544303b8bc4a"},config:{useAction:"true",txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',structable:"lookup.search_input",structable_read:"lookup.search_input",data_default:"",isLookup:"false",is_upperCase:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_password:"false",is_upper:"false",action:"",autoWrap:!1,isSearch:!0,readOnly:!1},role:{visible:"",disabled:""},property:{},validate:{request:!1,min:"",max:"",regex_format:"",validate_html:"true"},lang:{vi:"",en:""},configAVD:{},inputtype:"cTextInput"},{config:{onTable:"",icon:"fa-search",color:"primary",action:"",useAction:"false",txFoActions:"[]",txFo:JSON.stringify([{txcode:"#sys:fo-search-API",input:{list_component:"*",list_view:"code",table_code:"FO_DPT_CDPifccd",learn_api:`${o}_api_rulefunc_tran_fee_lkp_data_ifccd`}}]),isMasterData:"false",tableMasterData:"",privateKeyTableMasterData:"",isLookup:"",cmd:"",callform:"",uploadfile:{active:"false",filetype:""}},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{vi:"",en:""},configAVD:{},inputtype:"cButton",default:{name:"Search",code:"search_button",class:"",role:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",codeHidden:"ed4481f418acd092"}},{default:{name:"",code:"view",codeHidden:"f807c9509fcc2292",class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12col-md-12",role:""},config:{action:"",txFoActions:'[{"function":"","status":"A","para":[]}]',txFo:'[{"txcode":"#sys:fo-lookup-selectData","input":{}}]',useAction:"false",icon:"fa-hand-o-right",color:"info",onTable:"table_name",isMasterData:"false",tableMasterData:"",privateKeyTableMasterData:""},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"}]},{name:"Search",code:"code",codeHidden:"124e3a38fb88c5d0",inputtype:"cView",isTab:"false",list_input:[{config:{structable:"",query_data:`select * from ${t}`,paging_record:"5",columns:JSON.stringify([{code:`${t}.ifc_code`,title:"Code",inputtype:"ColumnString",config:{}},{code:`${t}.ifc_name`,title:"Name",inputtype:"ColumnString",config:{}}]),onTable:"",isLoadDataStart:"true",hasSystemColumnCheck:"false",isMoveColumn:"false",isResize:"false",columnSystemCheckBox:{methodGet:"checked",hasSystemColumnCheckTotal:"false",check_type:"DEFAULT",headerCheckTitle:"",actionFo_SystemCheck:{useAction:"txFo",txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]'},checked_to_selected:"checked"},actionFo_RowSelect:{useAction:"txFo",txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]'}},role:{visible:"",disabled:""},property:{},validate:{request:!1,min:"",max:"",regex_format:"",validate_html:"true"},lang:{en:{},vi:{}},configAVD:{},inputtype:"cTableDefault",default:{name:"",code:"table_name",class:"col-12",role:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",codeHidden:"c35af4950920f781"}}]}]}],info:{title:`${o}ifccd_lookup`,des:`${o}ifccd_lookup`,data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true",url_input:"",lang_form:{en:`${o}ifccd_lookup`},mode_form:{mode:"",col_text:"",col_input:""},form_code:`${o}ifccd_lookup`,ruleStrong:[{code:"runFo",config:{component_action:"search_input",component_event:"enter",txFo:JSON.stringify([{txcode:"#sys:fo-search-API",input:{list_component:"*",list_view:"code",table_code:"FO_DPT_CDPifccd",learn_api:`${o}_api_rulefunc_tran_fee_lkp_data_ifccd`}}]),txFoActions:"",useAction:"false",condition:"IFC_LOOKUP_IFCTYPE_CO"===t?"JSON.parse('@{table_name}').total_paging===0":"",component_result:""},inUse:!0,order:1,isStart:!0,isStatus:-1,isDidStart:!1,isOpenFromOther:!1},{code:"visibility",inUse:!0,isStart:!0,isStatus:-1,order:1,config:{component_action:"",component_result:"search_input;",view_result:"",condition:"",visible:"false",ena_dis:"false",component_event:"all",list_config:[]},isDidStart:!1,isOpenFromOther:!1}],app:n.value}}],s={ifc_code:"MapS.dataN(form_child.ifc_code)"},_={page_index:0,page_size:0};"true"===a.IFC_FEE_isCurrency&&(s.currency_code=`MapS.dataS(${o}.${a.IFC_FEE_currency})`,_.currency_code=`MapS.dataS(${o}.${a.IFC_FEE_currency})`),"true"===a.IFC_FEE_isTransaction&&(s.tran_code=a.IFC_FEE_transaction,_.tran_code=a.IFC_FEE_transaction);let d=[{LearnApiId:`${o}_api_rulefunc_lkp_data_account_fee`,LearnApiName:`${o}_api_rulefunc_lkp_data_account_fee`,LearnApiLink:"$API_SERVER$.$API_PORT_DATA$/api/workflow/execute",LearnApiData:`${o}_api_rulefunc_lkp_data_account_fee`,LearnApiNodeData:"execution_steps[0].p2_content.response.data",LearnApiApp:"BO",LearnApiMethod:"POST",FlowApi:"ncbsCbs_execute_new",SaveTo:"form",LearnApiHeader:'{"Authorization":"MapS.getToken(Bearer )"}',LearnApiMapping:JSON.stringify({workflowid:"DPT_LKP_DATA_SACNO",lang:"MapS.infoRequest(lang)",token:"MapS.context(token)",fields:{branch_code:"MapS.context(branch_code)",method:`MapS.dataSNull(${o}.${a.METHOD_FEE_code})`,currency_code:`MapS.dataSNull(${o}.${a.ACT_FEE_currency})`,page_index:0,page_size:0}}),NumberOfSteps:1,LearnApiGetInfo:"",KeyReadData:"execution_steps[0].p2_content.response.data",JwebuiUsercreate:null,App:n.value},{LearnApiId:`${o}_api_rulefunc_get_info_account_fee`,LearnApiName:`${o}_api_rulefunc_get_info_account_fee`,LearnApiLink:"$API_SERVER$.$API_PORT_DATA$/api/workflow/execute",LearnApiData:`${o}_api_rulefunc_get_info_account_fee`,LearnApiNodeData:"execution_steps[0].p2_content.response.data",LearnApiApp:"BO",LearnApiMethod:"POST",FlowApi:"ncbsCbs_execute_new",SaveTo:"form",LearnApiHeader:'{"Authorization":"MapS.getToken(Bearer )"}',LearnApiMapping:JSON.stringify({workflowid:"DPT_GET_INFO_SACNO",lang:"MapS.infoRequest(lang)",token:"MapS.context(token)",fields:{branch_code:"MapS.context(branch_code)",method:`MapS.dataSNull(${o}.${a.METHOD_FEE_code})`,currency_code:`MapS.dataSNull(${o}.${a.ACT_FEE_currency})`,account_number:`MapS.dataSNull(${o}.${a.ACT_FEE_code})`}}),NumberOfSteps:1,LearnApiGetInfo:"",KeyReadData:"execution_steps[0].p2_content.response.data",JwebuiUsercreate:null,App:n.value},{LearnApiId:`${o}_api_rulefunc_tran_fee_get_info_ifccd`,LearnApiName:`${o}_api_rulefunc_tran_fee_get_info_ifccd`,LearnApiLink:"$API_SERVER$.$API_PORT_DATA$/api/workflow/execute",LearnApiData:`${o}_api_rulefunc_tran_fee_get_info_ifccd`,LearnApiNodeData:"execution_steps[0].p2_content.response.data",LearnApiApp:"BO",LearnApiMethod:"POST",FlowApi:"ncbsCbs_execute_new",SaveTo:"form",LearnApiHeader:'{"Authorization":"MapS.getToken(Bearer )"}',LearnApiMapping:JSON.stringify({workflowid:"true"===a.IFC_FEE_isCurrency&&"true"!==a.IFC_FEE_isTransaction?"TRAN_FEE_ACT_FEE_GET_INFO_IFCCD":"true"===a.IFC_FEE_isCurrency&&"true"===a.IFC_FEE_isTransaction?"TRD"===o.split("_")[1]?"TRD_INFO_IFC_BY_CURRENCY_AND_TRANSCODE":o.split("_")[1]+"_IFC_GET_INFO_IFCCD_BY_CURRENCY_AND_TRANSCODE":"TRAN_FEE_GET_INFO_IFCCD",lang:"MapS.infoRequest(lang)",token:"MapS.context(token)",fields:s}),NumberOfSteps:1,LearnApiGetInfo:"",KeyReadData:"execution_steps[0].p2_content.response.data",JwebuiUsercreate:null,App:n.value},{LearnApiId:`${o}_api_rulefunc_tran_fee_lkp_data_ifccd`,LearnApiName:`${o}_api_rulefunc_tran_fee_lkp_data_ifccd`,LearnApiLink:"$API_SERVER$.$API_PORT_DATA$/api/workflow/execute",LearnApiData:"true"!==a.IFC_FEE_isCurrency&&"true"!==a.IFC_FEE_isTransaction?o.split("_")[1]+"_IFC_LOOKUP_IFCTYPE_CO":`${o}_api_rulefunc_tran_fee_lkp_data_ifccd`,LearnApiNodeData:"execution_steps[0].p2_content.response.data",LearnApiApp:"BO",LearnApiMethod:"POST",FlowApi:"ncbsCbs_execute_new",SaveTo:"form",LearnApiHeader:'{"Authorization":"MapS.getToken(Bearer )"}',LearnApiMapping:JSON.stringify({workflowid:"true"===a.IFC_FEE_isCurrency&&"true"!==a.IFC_FEE_isTransaction?o.split("_")[1]+"_IFC_LOOKUP_IFCTYPE_CO_BY_CURRENCY":"true"===a.IFC_FEE_isCurrency&&"true"===a.IFC_FEE_isTransaction?"TRD"===o.split("_")[1]?"TRD_LIST_IFC_BY_CURRENCY_AND_TRANSCODE":o.split("_")[1]+"_IFC_LOOKUP_BY_CURRENCY_AND_TRANSCODE":o.split("_")[1]+"_IFC_LOOKUP_IFCTYPE_CO",lang:"MapS.infoRequest(lang)",token:"MapS.context(token)",fields:_}),NumberOfSteps:1,LearnApiGetInfo:"",KeyReadData:"execution_steps[0].p2_content.response.data",JwebuiUsercreate:null,App:n.value}];this.form_detail.list_layout.forEach((t=>{t.list_view.forEach((t=>{t.list_input.forEach((t=>{"cButton"===t.inputtype&&"btn_accept"===t.default.code&&(e=JSON.parse(t.config.txFo)[0].input.learn_api)}))}))}));let c={fee_data:'MapS.arrayJson(@form_code.fee_data|{"ifc_name":"MapS.dataS(fee_data.ifc_name)","value_type":"MapS.dataS(fee_data.value_type)","share_fee":"MapS.dataN(fee_data.share_fee)","ifc_code":"MapS.dataI(fee_data.ifc_code)","payrate":"MapS.dataI(fee_data.payrate)","ifc_value":"MapS.dataN(fee_data.ifc_value)","ifc_amount":"MapS.dataN(fee_data.ifc_amount)","currency_account_code":"MapS.dataS(fee_data.currency_account_code)","floor_value":"MapS.dataN(fee_data.floor_value)","ceiling_value":"MapS.dataN(fee_data.ceiling_value)","share_rate":"MapS.dataN(fee_data.share_rate)","share_amount":"MapS.dataN(fee_data.share_amount)","round_rate":"MapS.dataN(fee_data.round_rate)","round_amount":"MapS.dataN(fee_data.round_amount)","currency_fee_code":"MapS.dataS(fee_data.currency_fee_code)","pay_source":"MapS.dataS(fee_data.pay_source)"})'.replace("@form_code",o)};c[a.ACT_FEE_code]=`MapS.dataS(${o}.${a.ACT_FEE_code})`,c[a.METHOD_FEE_code]=`MapS.dataS(${o}.${a.METHOD_FEE_code})`;const r=await this.props.bo_add_fee(i,d,e,c,n.value);if(null!==r){if("NOT_ERROR"===l.ZP.foGetData("result",r).error_code){this.props.showToast(l.ZP.getLang("designForm_addFee"),!0);let{modal_add_fee:e}=this.state;e.visibility=!1,this.setState({modal_add_fee:e})}}}))},this.func_DF_Design_save=async()=>{if(this.form_detail){let e=l.ZP.cloneJson(this.form_detail),{form_design_state:t}=this.state,a=t.config_mode.data_config;if(e){let t=a.configForm_default.configForm_default_config.form_app.dataFull.data.find((e=>e.selected)),i=a.configForm_default.configForm_default_config.how_to_open.dataFull.data.find((e=>e.selected)),o=a.configForm_default.configForm_default_config.form_message_error.dataFull.data.find((e=>e.selected)),n=a.configForm_default.configForm_default_config.form_is_ofModal.dataFull.data.find((e=>e.selected)),s={};this.lang_system.forEach((e=>{const t=a.configForm_lang.configForm_lang_config.listLang.find((t=>t.dataFull.config.default.code_form_component===e.key));s[e.key]=t.dataFull.value}));let _=a.configForm_mode.configForm_mode_config.mode.dataFull.data.find((e=>e.selected));if(e.info.app=t.value,e.info.form_code=a.configForm_default.configForm_default_config.form_id.dataFull.value,e.info.title=a.configForm_default.configForm_default_config.form_title.dataFull.value,e.info.des=a.configForm_default.configForm_default_config.form_more_info.dataFull.value,e.info.openOne=i.value,e.info.list_show_error=o.value,e.info.ofModal=n.value,e.info.data=a.configForm_data.configForm_data_config.data_manipulation.dataFull.value,e.info.learnapi=a.configForm_data.configForm_data_config.learn_API.dataFull.value,e.info.learnsql=a.configForm_data.configForm_data_config.learn_SQL.dataFull.value,e.info.bodata=a.configForm_data.configForm_data_config.bo_data.dataFull.value,e.info.lang_form=s,e.info.mode_form.mode=_.value,e.info.mode_form.col_text=a.configForm_mode.configForm_mode_config.width_title.dataFull.value,e.info.mode_form.col_input=a.configForm_mode.configForm_mode_config.width_component.dataFull.value,e.info.last_update=this.formatDate(),e.info.form_code_alias=a.configForm_default.configForm_default_config.form_map.dataFull.value,e.template&&e.template.isTemplate){if(this.props.data.allListForms.find((t=>t.info.form_code===e.info.form_code&&t.info.app===e.info.app)))return void this.props.showToast(l.ZP.getLang("designForm_SaveIDTaken"),!1)}const d=await this.props.bo_save_form(e);if(null!==d){if("NOT_ERROR"===l.ZP.foGetData("result",d).error_code){delete e.template,this.form_detail=e;const t=this.loadDataToState(e.info);t.config_mode.data_config.configForm_default.configForm_default_config.form_id.dataFull.config.cmd.disable=!0,t.design_mode.data_config.data_form.title=e.info.title,t.design_mode.data_config.data_form.title_sub=e.info.title,this.props.showToast(l.ZP.getLang("btn_save"),!0),this.setState({form_design_state:t})}}}}},this.func_component_dropped=()=>{let{form_design_state:e}=this.state,t=this.convert_renderHTML_allListForm();this.form_detail.list_layout=t;const a=l.ZP.copyJsonObject(this.convert_allListForm_listLayout());e.design_mode.data_config.data_form.isUpdate=!0,e.design_mode.data_config.design_tool=[],this.setState({form_design_state:e},(()=>{e.design_mode.data_config.data_form.isUpdate=!1,e.design_mode.data_config.data_form.list_layout=a,e.design_mode.data_config.design_tool=this.convert_designToolItems_stateTemplate(this.allDesignToolItems),this.setState({form_design_state:e},(()=>{}))}))},this.renewCodehidden=(e,t)=>{let a=e;switch(t){case"layout":void 0!==a.list_view&&a.list_view.length>0&&a.list_view.forEach(((e,t)=>{a.list_view[t].codeHidden=l.ZP.autoID(),void 0!==a.list_view[t].list_input&&a.list_view[t].list_input.length>0&&a.list_view[t].list_input.forEach(((e,i)=>a.list_view[t].list_input[i].default.codeHidden=l.ZP.autoID()))}));break;case"view":void 0!==a.list_input&&a.list_input.length>0&&a.list_input.map((e=>e.default.codeHidden=l.ZP.autoID()))}return a},this.func_component_Copy=e=>{let t=this.state.form_design_state,a=t.design_mode.data_config.data_form.list_layout,i=e.att_data.split("."),o=i[0],n=i[1],s=i[2],_=l.ZP.cloneJson(this.form_detail);if(void 0!==o)if(void 0!==n)if(void 0!==s){let e=l.ZP.cloneJson(_.list_layout[o].list_view[n].list_input[s]);e.default.name+=" Copy",e.default.codeHidden=l.ZP.autoID(),_.list_layout[o].list_view[n].list_input.splice(s,0,e)}else{let e=l.ZP.cloneJson(_.list_layout[o].list_view[n]);e.name+=" Copy",e.codeHidden=l.ZP.autoID();let t=this.renewCodehidden(e,"view");_.list_layout[o].list_view.splice(n,0,l.ZP.cloneJson(t))}else{let e=l.ZP.cloneJson(_.list_layout[o]);e.name+=" Copy",e.codeHidden=l.ZP.autoID();let t=this.renewCodehidden(e,"layout");_.list_layout.splice(o,0,l.ZP.cloneJson(t))}this.form_detail=_,a=this.convert_allListForm_listLayout(),t.design_mode.data_config.data_form.list_layout=a,this.setState({form_design_state:t},(()=>{}))},this.convert_allListForm_listLayout=()=>{let e=[],t=[],a=[],o=this.form_detail.list_layout;for(let n=0;n<o.length;n++){t=[];const s=o[n].list_view;for(let e=0;e<s.length;e++){a=[];const _=o[n].list_view[e].list_input;for(let t=0;t<_.length;t++){let s=_[t].inputtype,d={dataItem:{inputtype:s,att_data:`${n}.${e}.${t}`,config_item:_[t]},abs_Copy:this.func_component_Copy,abs_Delete:this.func_component_Delete,abs_Edit:this.func_component_Edit,abs_ChooseLayout:this.func_component_ChooseLayout,chooseLayout_config:{title:l.ZP.getLang("designForm_chooseLayout"),data:[]}};switch(s){case"jFullCalendar":case"jProgressBar":case"jChart":a.push({inputtype:s,config:{default:(0,i.Z)({class:"col-sm-6 offset-2 offset-3-right",title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1}},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"cButton":case"jImage":case"jUploadFile":case"jPrintVoucher":case"jButtonSignature":a.push({inputtype:s,config:{default:(0,i.Z)({title:_[t].default.name,icon:_[t].config.icon,type:_[t].config.color},_[t].default)},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"jSameMain":a.push({inputtype:s,value:""!==_[t].config.callForm?"Load from":"No data form",code_form:_[t].config.callForm,config:{default:(0,i.Z)({title:_[t].default.name},_[t].default)},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"jLabel":a.push({inputtype:s,config:{default:(0,i.Z)({class:"col-sm-2",title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1},config:_[t]},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"cTableDefault":let l=JSON.parse(_[t].config.columns).map((e=>{var t;return{title:e.title||"",value:e.code||"",config:(0,i.Z)({textAlign:(null===(t=e.config)||void 0===t?void 0:t.textAlign)||"left"},e.config)}}));a.push({inputtype:s,config:{class:_[t].default.class,columns:l,cmd:{hasSearch:!0}},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"jTableDynamic":case"jTableDynamicSearch":a.push({inputtype:s,config:{class:_[t].default.class,columns:[{title:"Example",value:"",config:{}}],cmd:{hasSearch:!0}},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"jTableSearch":let c=JSON.parse(_[t].config.columns).map((e=>{var t;return{title:e.title||"",value:e.code||"",config:(0,i.Z)({textAlign:(null===(t=e.config)||void 0===t?void 0:t.textAlign)||"left"},e.config)}}));a.push({inputtype:s,config:{class:_[t].default.class,columns:c,cmd:{hasSearch:!0}},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"jListActivity":let r=JSON.parse(_[t].config.columns).map((e=>{var t;return{title:e.title||"",value:e.code||"",config:(0,i.Z)({textAlign:(null===(t=e.config)||void 0===t?void 0:t.textAlign)||"left"},e.config)}}));a.push({inputtype:s,config:{class:_[t].default.class,columns:r,cmd:{hasSearch:!0}},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"jReport":case"jIframeReport":a.push({inputtype:s,config:{default:(0,i.Z)({class:"col-sm-12",title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1}},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"jTableForm":a.push({title:_[t].default.name,inputtype:"jTableForm",config:{class:_[t].default.class,columns:JSON.parse(_[t].config.columns),cmd:{hasSearch:!1}},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"jCurrency":case"jCurrencyLongNumber":a.push({inputtype:s,value:"",config:{default:(0,i.Z)({placeholder:"0.00",class:"col-md-8",title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1}},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"jCheckbox":a.push({title:_[t].default.name,inputtype:s,value:!0,class:_[t].default.class,config:{default:(0,i.Z)({title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1}},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"jRadiobox":a.push({title:_[t].default.name,inputtype:s,value:!1,class:_[t].default.class,config:{default:(0,i.Z)({title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1,error:{message:"",type:""}}},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"jMutiValue":a.push({inputtype:s,value:""!==_[t].config.callForm?"Load from":"No data form",code_form:o[n].list_view[e].list_input[t].config.callForm,config:{default:(0,i.Z)({title:_[t].default.name,class:_[t].default.class},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1,error:{message:"",type:""}}},att_data:`${n}.${e}.${t}`,toolTip:d});break;case"cTextArea":case"jRichTextEditor":a.push({inputtype:s,data:[],config:{default:(0,i.Z)({class:_[t].default.class,title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1,error:{message:"",type:""}}},att_data:`${n}.${e}.${t}`,toolTip:d});break;default:a.push({title:_[t].default.name,inputtype:s,value:!1,class:_[t].default.class,config:{default:(0,i.Z)({title:_[t].default.name},_[t].default),cmd:{disable:!1,visible:!0,isLoading:!1,isFocus:!1}},att_data:`${n}.${e}.${t}`,toolTip:d})}}t.push({title:s[e].name,att_data:`${n}.${e}`,class:s[e].class,inputtype:"cView",toolTip:{dataItem:{inputtype:"cView",att_data:`${n}.${e}`},abs_Copy:this.func_component_Copy,abs_Delete:this.func_component_Delete,abs_Edit:this.func_component_Edit,abs_ChooseLayout:this.func_component_ChooseLayout,chooseLayout_config:{title:l.ZP.getLang("designForm_chooseLayout"),data:[]}},list_input:a})}e.push({title:o[n].name,att_data:n.toString(),inputtype:"cLayout",toolTip:{dataItem:{inputtype:"cLayout",att_data:`${n}`,title:o[n].name},abs_Copy:this.func_component_Copy,abs_Delete:this.func_component_Delete,abs_Edit:this.func_component_Edit,abs_ChooseLayout:this.abs_ChooseLayout,chooseLayout_config:{title:l.ZP.getLang("designForm_chooseLayout"),data:[]}},list_view:t})}return e},this.func_component_Edit=e=>{if(e.inputtype.includes("View")){let t=e.att_data.split("."),{modal_config_view:a}=this.state,i=this.form_detail.list_layout[e.att_data[0]].list_view[t[1]];a.att_data=t,a.visibility=!0,a.data=i,this.setState({modal_config_view:a})}else if(e.inputtype.includes("Layout")){let{modal_config_layout:t}=this.state,a=this.form_detail.list_layout[e.att_data];t.att_data=e.att_data,t.visibility=!0,t.data=a,this.setState({modal_config_layout:t},(()=>{}))}else{let t=this.state.component_config_state;const a=e.att_data.split(".");t.configItem=e.config_item,t.att_data_item=a,t.visibility=!0,t.configInputType=e.inputtype,this.setState({component_config_state:t})}},this.func_component_delete_confirm=()=>{let{form_design_state:e}=this.state,{modal_confirm_delete:t}=this.state;if("yes"===this.state.modal_confirm_delete.form.input_confirm.value.trim()){let a=e.design_mode.data_config.data_form.list_layout,i=this.modal_delete_component_dataItem.att_data.split("."),o=i[0],l=i[1],n=i[2];void 0!==o&&(void 0!==l?void 0!==n?this.form_detail.list_layout[o].list_view[l].list_input.splice(n,1):this.form_detail.list_layout[o].list_view.splice(l,1):this.form_detail.list_layout.splice(o,1)),a=this.convert_allListForm_listLayout(),e.design_mode.data_config.data_form.list_layout=a,t.modal.visibility=!1,t.form.input_confirm.value=""}else t.form.title=l.ZP.getLang("delete_failDeleteTitle");this.setState({modal_confirm_delete:t,form_design_state:e})},this.func_modal_confirm_input_change=e=>{let t=this.state.modal_confirm_delete;t.form.input_confirm.value=e.target.value,this.setState({modal_confirm_delete:t})},this.func_component_Delete=e=>{let t=this.state.modal_confirm_delete;t.modal.visibility=!0,this.modal_delete_component_dataItem=e,this.setState({modal_confirm_delete:t})},this.func_component_ChooseLayout=e=>{},this.func_confirm_delete_close=()=>{let e=this.state.modal_confirm_delete;e.modal.visibility=!1,this.setState({modal_confirm_delete:e})},this.func_close_modal_config_view=()=>{let{modal_config_view:e}=this.state;e.visibility=!1,this.setState({modal_config_view:e})},this.func_close_modal_config_layout=()=>{let{modal_config_layout:e}=this.state;e.visibility=!1,this.setState({modal_config_layout:e})},this.func_save_modal_config_layout=e=>{let{modal_config_layout:t,form_design_state:a}=this.state,i=t.att_data;e&&(this.form_detail.list_layout[i]=e,t.visibility=!1,a.design_mode.data_config.data_form.list_layout=this.convert_allListForm_listLayout(),this.setState({form_design_state:a,modal_config_layout:t}))},this.func_save_modal_config_view=e=>{let{modal_config_view:t,form_design_state:a}=this.state,i=t.att_data;e&&(this.form_detail.list_layout[i[0]].list_view[i[1]]=e,t.visibility=!1,a.design_mode.data_config.data_form.list_layout=this.convert_allListForm_listLayout(),this.setState({form_design_state:a,modal_config_view:t}))},this.func_save_cp_config=e=>{let{form_design_state:t,component_config_state:a}=this.state,i=a.att_data_item,o=this.form_detail.list_layout[i[0]].list_view[i[1]].list_input[i[2]];o&&e&&(o.default=e.default,o.config=e.config,o.lang=e.lang,o.validate=e.validate,t.design_mode.data_config.data_form.list_layout=this.convert_allListForm_listLayout(),a.visibility=!1),this.setState({form_design_state:t,component_config_state:a},(()=>{}))},this.select_tab=()=>{},this.loadDataToState=e=>{let t={abs_ClickOpenTool:this.func_ClickOpenTool,abs_component_dropped:this.func_component_dropped,design_mode:{title:l.ZP.getLang("designForm_Design"),img:"edit",data_config:{design_tool:[],search:{placeholder:l.ZP.getLang("designForm_Search"),value:"",abs_Change:this.func_design_inputFieldSearch_Change,abs_Submit:this.func_design_inputFieldSearch_Submit},data_form:{list_layout:[]}}},config_mode:{title:l.ZP.getLang("designForm_ConfigureInformation"),img:"settings",data_config:{tab:{data:[{id:"configForm_default",title:l.ZP.getLang("designForm_Config_Default")},{id:"configForm_data",title:l.ZP.getLang("designForm_Config_Data")},{id:"configForm_lang",title:l.ZP.getLang("designForm_Config_Lang")},{id:"configForm_mode",title:l.ZP.getLang("designForm_Config_Mode")},{id:"configForm_role",title:l.ZP.getLang("designForm_Config_Rule")}],abs_select:this.select_tab},configForm_default:{},configForm_data:{},configForm_lang:{configForm_lang_config:{listLang:[]}},configForm_mode:{},configForm_role:{configForm_role_config:{title:l.ZP.getLang("designForm_titleRule"),button_add_function:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_addRule"),type:"primary",class:"",icon:""}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.func_configForm_role_add}},table_config:[{type:"uTableColumnButtonHover",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnSelectItem",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnTextArea",config:{mode:"left",isFrozen:!1}}],table:{dataFull:{Header:{data:[{title:"",config:{width:"",isFrozen:!1}},{title:l.ZP.getLang("designForm_rulename"),config:{isFrozen:!1}},{title:l.ZP.getLang("designForm_order"),config:{isFrozen:!1}},{title:l.ZP.getLang("designForm_statusForm"),config:{isFrozen:!1}},{title:l.ZP.getLang("designForm_start"),config:{isFrozen:!1}},{title:l.ZP.getLang("designForm_inUse"),config:{isFrozen:!1}},{title:l.ZP.getLang("designForm_parameterConfig"),config:{isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:[]}},configForm_react:{configForm_react_config:{button_add_txt:{dataFull:{config:{default:{title:"React Txt",type:"primary",class:"col-md-1",icon:""}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.testButton}},text_area:{dataFull:{config:{default:{title:"",class:"col-md-12",rows:10,code_form_component:""},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:"test",abs_Change:this.testTextArea}}}},configForm_tool:{configForm_tool_config:{button_format:{dataFull:{config:{default:{title:"Format class default",type:"primary",class:"",icon:"cached_filled"}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.testButton}},button_copy:{dataFull:{config:{default:{title:"Copy form config",type:"",class:"",icon:"file_copy"}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.testButton}},command_line:{dataFull:{config:{default:{title:"Command line",class:"col-md-12 ",required:!0,placeholder:"Enter key word"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.testInput}}}}}},back_to_home:{title:l.ZP.getLang("designForm_BacktoHome"),abs_Click:this.func_design_back_to_home},cmd:{visibility:this.props.visibility},preview_button:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_Preview"),type:"",icon:""},cmd:{disable:!0,isLoading:!1,isFocus:!1}},abs_Click:this.previewBtn}},addFee_button:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_addFee"),type:"",icon:""},cmd:{disable:this.getCMDAddFee(e.form_code),isLoading:!1,isFocus:!1}},abs_Click:()=>{let{modal_add_fee:e}=this.state;e.visibility=!0,this.setState({modal_add_fee:e})}}},save_button:{dataFull:{config:{default:{title:l.ZP.getLang("designForm_save"),type:"primary",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_DF_Design_save}}};t.config_mode.data_config.configForm_default=this.convert_configMode_template_default(e),t.config_mode.data_config.configForm_data=this.convert_configMode_template_data(e);let a={};return this.lang_system.map((e=>(void 0===this.form_detail.info.lang_form?a="":a[e.key]=this.form_detail.info.lang_form[e.key],t.config_mode.data_config.configForm_lang.configForm_lang_config.listLang.push({dataFull:{config:{default:{title:e.view,class:"col-md-6 ",required:!1,placeholder:e.view,helper_description:e.view,code_form_component:e.key},cmd:{isHelper:!1,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:a[e.key],abs_Change:this.func_change_lang_title}})))),t.config_mode.data_config.configForm_mode=this.convert_configMode_template_mode(e),t.config_mode.data_config.configForm_role.configForm_role_config.table_data=this.convert_configMode_template_ruleFunc(e),t.design_mode.data_config.data_form.title=e.title,t.design_mode.data_config.data_form.title_sub=e.title,t.design_mode.data_config.data_form.list_layout=this.convert_allListForm_listLayout(),t.design_mode.data_config.design_tool=this.convert_designToolItems_stateTemplate(this.allDesignToolItems),t},this.previewBtn=()=>{let{form_preview_state:e,form_design_state:t}=this.state;e.cmd.visibility=!0,t.cmd.visibility=!1,this.setState({form_preview_state:e,form_design_state:t})},this.componentDidUpdate=(e,t)=>{if(this.props.visibility!==t.form_design_state.cmd.visibility){this.allDesignToolGroups=this.props.data.allDesignToolGroups,this.allDesignToolItems=this.props.data.allDesignToolItems,this.form_detail=this.readConfig(this.props.data.form_detail),this.list_component=this.renderBodyListConponentInfo();let e=this.form_detail.info;const t=this.loadDataToState(e);this.setState({form_design_state:t})}},this.componentDidMount=()=>{if(this.props.visibility){this.allDesignToolGroups=this.props.data.allDesignToolGroups,this.allDesignToolItems=this.props.data.allDesignToolItems,this.form_detail=this.readConfig(this.props.data.form_detail);let e=this.form_detail.info;const t=this.loadDataToState(e);this.setState({form_design_state:t})}},this.searchAddFeeConfig=(e,t)=>{let{modal_add_fee:a}=this.state;a.search[t]=e.target.value,this.setState({modal_add_fee:a})},this.addCCL_FEE=()=>{let{modal_add_fee:e}=this.state,t={pay_source:e.CCL_FEE_paysource,amount:e.CCL_FEE_amount,currency:e.CCL_FEE_currency,actf:e.CCL_FEE_actf,actdt:e.CCL_FEE_actdt};if(e.isModify_CCL_FEE)for(let a=0;a<e.CCL_FEE_data.length;a++){e.CCL_FEE_data[a].pay_source===e.CCL_FEE_paysource&&(e.CCL_FEE_data[a]=t)}else e.CCL_FEE_data.push(t);e.CCL_FEE_actf="",e.CCL_FEE_amount="",e.CCL_FEE_currency="",e.CCL_FEE_paysource="",e.CCL_FEE_actdt="",e.isModify_CCL_FEE=!1,this.setState({modal_add_fee:e})},this.addGET_FEE=()=>{let{modal_add_fee:e}=this.state,t={target:e.GET_FEE_target,value:e.GET_FEE_value,actf:e.GET_FEE_actf,actcdt:e.GET_FEE_actdt,value_calculator:e.GET_FEE_value_calculator};if(e.isModify_GET_FEE)for(let a=0;a<e.GET_FEE_data.length;a++){e.GET_FEE_data[a].target===e.GET_FEE_target&&(e.GET_FEE_data[a]=t)}else e.GET_FEE_data.push(t);e.GET_FEE_actf="",e.GET_FEE_value="TOTALFEE",e.GET_FEE_target="",e.GET_FEE_actdt="",e.GET_FEE_value_calculator="",e.isModify_GET_FEE=!1,this.setState({modal_add_fee:e})},this.DESIGNFORM_CODE_TOOL_GROUPS="designToolGroup",this.DESIGNFORM_CODE_TOOL_ITEMS="designToolItem",this.LIST_APP="app",this.list_component=[],this.allDesignToolItems=[],this.allDesignToolGroups=[],this.form_detail={},this.keylang=l.ZP.getLangKey(),this.DF_Design_Render=(0,n.Iq)("screen_design"),this.Modal_Confirm_Delete=(0,n.Iq)("designFormModal_confirm"),this.Modal_Add_Fee=(0,n.Iq)("designFormModal_addFeeConfig"),this.Modal_CloseForm_Render=(0,n.Iq)("designFormModal_form_delete"),this.lang_system=l.ZP.getConfigUserDefault("list_lang_config"),this.DF_Loading=(0,n.RP)("uScreenLoading"),this.ModalEditRuleFunc=null,this.state={form_preview_state:{cmd:{visibility:!1}},component_config_state:{visibility:!1,configInputType:"",configItem:{},att_data_item:[]},modal_config_layout:{visibility:!1,att_data:null,data:{}},modal_config_view:{visibility:!1,att_data:null,data:{}},form_design_state:{cmd:{visibility:!1}},modal_confirm_delete:{form:{title:l.ZP.getLang("designForm_delete_titleForm"),title_sub:l.ZP.getLang("designForm_delete_titleForm_sub"),list_buttons:[{dataFull:{config:{default:{title:l.ZP.getLang("designForm_btn_cancel"),type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_confirm_delete_close}},{dataFull:{config:{default:{title:l.ZP.getLang("designForm_btn_delete"),type:"danger",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_component_delete_confirm}}],input_confirm:{value:"",placeholder:l.ZP.getLang("designForm_delete_inputConfirm"),abs_Change:this.func_modal_confirm_input_change}},modal:{title:l.ZP.getLang("designForm_delete_titleModal"),abs_Close:this.func_confirm_delete_close,visibility:!1}},modal_add_fee:{tab_choose:"CCL_FEE",CCL_FEE_paysource:"",CCL_FEE_amount:"",CCL_FEE_currency:"",CCL_FEE_actf:"",visibility:!1,CCL_FEE_data:[],GET_FEE_data:[],GET_FEE_target:"",GET_FEE_actf:"",GET_FEE_value:"TOTALFEE",METHOD_FEE_code:"fee_collection",ACT_FEE_code:"account_number_for_fee",ACT_FEE_currency:"",ACT_FEE_isAutoFill:"false",ACT_FEE_component_fill:"",CCL_FEE_actdt:"",GET_FEE_actdt:"",GET_FEE_value_calculator:"",IFC_FEE_currency:"",IFC_FEE_isCurrency:"false",IFC_FEE_isTransaction:"false",IFC_FEE_transaction:"",search:{CCL_FEE_paysource:"",CCL_FEE_amount:"",CCL_FEE_currency:"",GET_FEE_target:"",GET_FEE_value:"",ACT_FEE_component_fill:"",ACT_FEE_currency:"",IFC_FEE_isTransaction:"",IFC_FEE_isCurrency:"",IFC_FEE_currency:""},isModify_CCL_FEE:!1,isModify_GET_FEE:!1},modal_edit_rule_func:{visibility:!1,ruleStrong_detail:{},ruleStrong_index:{},ruleStrong_default:{},list_components:[]},modal_close_form_state:{form:{title:l.ZP.getLang("designForm_close_TitleForm"),list_buttons:[{dataFull:{config:{default:{title:l.ZP.getLang("designForm_btn_stay"),type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_df_cancelCloseForm}},{dataFull:{config:{default:{title:l.ZP.getLang("designForm_btn_Accept"),type:"primary",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_df_confirmCloseForm}}]},modal:{title:l.ZP.getLang("designForm_close_TitleModal"),abs_Close:this.func_df_cancelCloseForm,visibility:!1}},isLoading:!1}}readConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},a={info:{form_code_alias:"",last_update:"",list_show_error:"false",app:"o9",title:"",bodata:"",data:"",des:"",flow_layout:[],form_code:"",key_form:"",lang_form:"",learnapi:"",learnsql:"",mode_form:{mode:"",col_text:"",col_input:""},node_position:[],ofModal:!1,openOne:"false",ruleStrong:[],responseType:"1"},list_layout:[],react_txt:"",template:!1};for(let i in a)if("info"===i){t.info={};for(let i in a.info)t.info[i]=e.info[i]||a.info[i]}else t[i]=e[i]||a[i];return t.list_layout=e.list_layout,t}formatDate(e){return e||(e=(new Date).getTime()),(0,d.FW)(e,"DD/MM/YYYY hh:mm:ss A")}getCMDAddFee(e){if(0===e.indexOf("FO_")&&3===e.split("_").length&&e[e.length-1]!==e[e.length-1].toLowerCase()){for(let e=0;e<this.form_detail.list_layout.length;e++){let t=this.form_detail.list_layout[e].list_view;for(let e=0;e<t.length;e++){const a=t[e].list_input;for(let e=0;e<a.length;e++){const t=a[e];if("jSameMain"===t.inputtype&&"form_fee"===t.default.code&&"fee_data"===t.default.name)return!0}}}return!1}return!0}getFormAddFeeConfig(){return{modal:{title:"Add Fee Config",abs_Close:this.func_df_cancelCloseAddFee,visibility:this.state.modal_add_fee.visibility},form:{tab_form:{data:[{title:"Fee collect method",id:"METHOD_FEE"},{title:"Account number for fee",id:"ACT_FEE"},{title:"IFC Config",id:"IFC_FEE"},{title:"CCL_FEE",id:"CCL_FEE"},{title:"GET_FEE",id:"GET_FEE"}],abs_select:(e,t)=>{let{modal_add_fee:a}=this.state;a.tab_choose=t,this.setState({modal_add_fee:a})}},METHOD_FEE:{code:{dataFull:{config:{default:{title:"Code component",class:"col-md-6 ",required:!1,placeholder:"T\xean layout",helper:"",code_form_component:"METHOD_FEE_code"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.modal_add_fee.METHOD_FEE_code,abs_Change:this.changeValueAddFeeConfig}}},ACT_FEE:{isAutoFill:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("search")},helper:"Is load from other field",title:"Is load from other field",class:"col-md-6",rows:10,code_form_component:"ACT_FEE_isAutoFill"},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[{title:"false",value:"false",selected:"false"===this.state.modal_add_fee.ACT_FEE_isAutoFill},{title:"true",value:"true",selected:"true"===this.state.modal_add_fee.ACT_FEE_isAutoFill}],value:"",abs_Change:this.changeValueSelectAddFeeConfig,search_value:this.state.modal_add_fee.search.ACT_FEE_isAutoFill,abs_search:this.searchAddFeeConfig}},component_fill:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("search")},helper:"Component code get account number",title:"Component code get account number",class:"col-md-6",rows:10,code_form_component:"ACT_FEE_component_fill"},cmd:{isHelper:!0,disable:!1,visible:"true"===this.state.modal_add_fee.ACT_FEE_isAutoFill,error:{message:"",type:""}}},data:this.getListComponentCode("ACT_FEE_component_fill"),value:"",abs_Change:this.changeValueSelectAddFeeConfig,search_value:this.state.modal_add_fee.search.ACT_FEE_component_fill,abs_search:this.searchAddFeeConfig}},currency:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("search")},helper:"Currency load data",title:"Currency load data",class:"col-md-6",rows:10,code_form_component:"ACT_FEE_currency"},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:this.getListComponentCode("ACT_FEE_currency"),value:"",abs_Change:this.changeValueSelectAddFeeConfig,search_value:this.state.modal_add_fee.search.ACT_FEE_currency,abs_search:this.searchAddFeeConfig}},code:{dataFull:{config:{default:{title:"Code component",class:"col-md-6 ",required:!1,placeholder:"Code component",helper:"",code_form_component:"ACT_FEE_code"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.modal_add_fee.ACT_FEE_code,abs_Change:this.changeValueAddFeeConfig}}},IFC_FEE:{isCurrency:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("search")},helper:"Is fitter by currency",title:"Is fitter by currency",class:"col-md-6",rows:10,code_form_component:"IFC_FEE_isCurrency"},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[{title:"false",value:"false",selected:"false"===this.state.modal_add_fee.IFC_FEE_isCurrency},{title:"true",value:"true",selected:"true"===this.state.modal_add_fee.IFC_FEE_isCurrency}],value:"",abs_Change:this.changeValueSelectAddFeeConfig,search_value:this.state.modal_add_fee.search.IFC_FEE_isCurrency,abs_search:this.searchAddFeeConfig}},currency:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("search")},helper:"Currency code",title:"Currency code",class:"col-md-6",rows:10,code_form_component:"IFC_FEE_currency"},cmd:{isHelper:!0,disable:!1,visible:"true"===this.state.modal_add_fee.IFC_FEE_isCurrency,error:{message:"",type:""}}},data:this.getListComponentCode("IFC_FEE_currency"),value:"",abs_Change:this.changeValueSelectAddFeeConfig,search_value:this.state.modal_add_fee.search.IFC_FEE_currency,abs_search:this.searchAddFeeConfig}},isTransaction:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("search")},helper:"Is fitter by transaction",title:"Is fitter by transaction",class:"col-md-6",rows:10,code_form_component:"IFC_FEE_isTransaction"},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[{title:"false",value:"false",selected:"false"===this.state.modal_add_fee.IFC_FEE_isTransaction},{title:"true",value:"true",selected:"true"===this.state.modal_add_fee.IFC_FEE_isTransaction}],value:"",abs_Change:this.changeValueSelectAddFeeConfig,search_value:this.state.modal_add_fee.search.IFC_FEE_isTransaction,abs_search:this.searchAddFeeConfig}},transaction:{dataFull:{config:{default:{title:"Transaction code",class:"col-md-6 ",required:!1,placeholder:"Transaction code",helper:"",code_form_component:"IFC_FEE_transaction"},cmd:{isHelper:!0,disable:!1,visible:"true"===this.state.modal_add_fee.IFC_FEE_isTransaction,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.modal_add_fee.IFC_FEE_transaction,abs_Change:this.changeValueAddFeeConfig}}},CCL_FEE:{apply_button:{dataFull:{config:{default:{title:l.ZP.getLang("btn_apply"),type:"primary",icon:""},cmd:{disable:this.getCMDAddCCL_FEE(),isLoading:!1,isFocus:!1}},abs_Click:this.addCCL_FEE}},table_config:[{type:"uTableColumnButtonHover",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_header:{dataFull:{Header:{data:[{title:"",config:{width:"",isFrozen:!1}},{title:"Pay source",config:{isFrozen:!1}},{title:"Amount Component",config:{isFrozen:!1}},{title:"Currency Component",config:{isFrozen:!1}},{title:"Component action",config:{isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:this.getDataCLL_FEE(),pay_source:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("search")},helper:"Pay Source",title:"Pay Source",class:"col-md-6",rows:10,code_form_component:"CCL_FEE_paysource"},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[{title:"Cash",value:"csh",selected:"csh"===this.state.modal_add_fee.CCL_FEE_paysource},{title:"Deposit",value:"dpt",selected:"dpt"===this.state.modal_add_fee.CCL_FEE_paysource},{title:"Accounting",value:"act",selected:"act"===this.state.modal_add_fee.CCL_FEE_paysource}],value:"",abs_Change:this.changeValueSelectAddFeeConfig,search_value:this.state.modal_add_fee.search.CCL_FEE_paysource,abs_search:this.searchAddFeeConfig}},amount:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("search")},helper:"Amount Component",title:"Amount Component",class:"col-md-6",rows:10,code_form_component:"CCL_FEE_amount"},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:this.getListComponentCode("CCL_FEE_amount"),value:"",abs_Change:this.changeValueSelectAddFeeConfig,search_value:this.state.modal_add_fee.search.CCL_FEE_amount,abs_search:this.searchAddFeeConfig}},currency:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("search")},helper:"Currency Component",title:"Currency Component",class:"col-md-6",rows:10,code_form_component:"CCL_FEE_currency"},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:this.getListComponentCode("CCL_FEE_currency"),value:"",abs_Change:this.changeValueSelectAddFeeConfig,search_value:this.state.modal_add_fee.search.CCL_FEE_currency,abs_search:this.searchAddFeeConfig}},actf:{dataFull:{config:{default:{title:"Component action",class:"col-md-6 ",required:!1,placeholder:"Component action",helper:"",code_form_component:"CCL_FEE_actf"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.modal_add_fee.CCL_FEE_actf,abs_Change:this.changeValueAddFeeConfig}},actdt:{dataFull:{config:{default:{title:"Condition action",class:"col-md-6 ",required:!1,placeholder:"Condition action",helper:"",code_form_component:"CCL_FEE_actdt"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.modal_add_fee.CCL_FEE_actdt,abs_Change:this.changeValueAddFeeConfig}}},GET_FEE:{actf:{dataFull:{config:{default:{title:"Component action",class:"col-md-6 ",required:!1,placeholder:"Component action",helper:"",code_form_component:"GET_FEE_actf"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.modal_add_fee.GET_FEE_actf,abs_Change:this.changeValueAddFeeConfig}},actdt:{dataFull:{config:{default:{title:"Condition action",class:"col-md-6 ",required:!1,placeholder:"Condition action",helper:"",code_form_component:"GET_FEE_actdt"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.modal_add_fee.GET_FEE_actdt,abs_Change:this.changeValueAddFeeConfig}},apply_button:{dataFull:{config:{default:{title:l.ZP.getLang("btn_apply"),type:"primary",icon:""},cmd:{disable:this.getCMDAddGET_FEE(),isLoading:!1,isFocus:!1}},abs_Click:this.addGET_FEE}},table_config:[{type:"uTableColumnButtonHover",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_header:{dataFull:{Header:{data:[{title:"",config:{width:"",isFrozen:!1}},{title:"Target Component",config:{isFrozen:!1}},{title:"Component action",config:{isFrozen:!1}},{title:"Value",config:{isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:this.getDataGET_FEE(),value:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("search")},helper:"Value",title:"Value",class:"col-md-6",rows:10,code_form_component:"GET_FEE_value"},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:[{title:"TOTALFEE",value:"TOTALFEE",selected:"TOTALFEE"===this.state.modal_add_fee.GET_FEE_value},{title:"TOTALCSH",value:"TOTALCSH",selected:"TOTALCSH"===this.state.modal_add_fee.GET_FEE_value},{title:"TOTALDPT",value:"TOTALDPT",selected:"TOTALDPT"===this.state.modal_add_fee.GET_FEE_value},{title:"TOTALDPT",value:"TOTALDPT",selected:"TOTALDPT"===this.state.modal_add_fee.GET_FEE_value},{title:"TOTALACT",value:"TOTALACT",selected:"TOTALACT"===this.state.modal_add_fee.GET_FEE_value},{title:"TOTALINT",value:"TOTALINT",selected:"TOTALINT"===this.state.modal_add_fee.GET_FEE_value},{title:"TOTALPRN",value:"TOTALPRN",selected:"TOTALPRN"===this.state.modal_add_fee.GET_FEE_value},{title:"TOTALFLAT",value:"TOTALFLAT",selected:"TOTALFLAT"===this.state.modal_add_fee.GET_FEE_value},{title:"TOTALSAMT",value:"TOTALSAMT",selected:"TOTALSAMT"===this.state.modal_add_fee.GET_FEE_value},{title:"TOTALRAMT",value:"TOTALRAMT",selected:"TOTALRAMT"===this.state.modal_add_fee.GET_FEE_value},{title:"TTSFPER",value:"TTSFPER",selected:"TTSFPER"===this.state.modal_add_fee.GET_FEE_value},{title:"CALCULATOR",value:"CALCULATOR",selected:"CALCULATOR"===this.state.modal_add_fee.GET_FEE_value}],value:"",abs_Change:this.changeValueSelectAddFeeConfig,search_value:this.state.modal_add_fee.search.GET_FEE_value,abs_search:this.searchAddFeeConfig}},value_calculator:{dataFull:{config:{default:{title:"Value Calculator",class:"col-md-6 ",required:!1,placeholder:"Value Calculator",helper:"",code_form_component:"GET_FEE_value_calculator"},cmd:{isHelper:!0,disable:!1,visible:"CALCULATOR"===this.state.modal_add_fee.GET_FEE_value,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.state.modal_add_fee.GET_FEE_value_calculator,abs_Change:this.changeValueAddFeeConfig}},target:{dataFull:{config:{default:{search:{placeholder:l.ZP.getLang("search")},helper:"Target Component",title:"Target Component",class:"col-md-6",rows:10,code_form_component:"GET_FEE_target"},cmd:{isHelper:!0,disable:!1,visible:!0,error:{message:"",type:""}}},data:this.getListComponentCode("GET_FEE_target"),value:"",abs_Change:this.changeValueSelectAddFeeConfig,search_value:this.state.modal_add_fee.search.GET_FEE_target,abs_search:this.searchAddFeeConfig}}},list_buttons:[{dataFull:{config:{default:{title:l.ZP.getLang("btn_cancel"),type:"",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.func_df_cancelCloseAddFee}},{dataFull:{config:{default:{title:l.ZP.getLang("btn_save"),type:"primary",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.addFeeBtn}}]}}}getDataCLL_FEE(){let{modal_add_fee:e}=this.state;return e.CCL_FEE_data.map((e=>({data:[{data:[{icon_item:"edit",title:l.ZP.getLang("designForm_btn_edit"),dataItem:(0,i.Z)({},e),abs_Click:e=>{let{modal_add_fee:t}=this.state;t.CCL_FEE_actf=e.actf,t.CCL_FEE_amount=e.amount,t.CCL_FEE_currency=e.currency,t.CCL_FEE_paysource=e.pay_source,t.isModify_CCL_FEE=!0,this.setState({modal_add_fee:t})}},{icon_item:"delete",title:l.ZP.getLang("designForm_btn_delete"),dataItem:(0,i.Z)({},e),abs_Click:e=>{let{modal_add_fee:t}=this.state;for(let a=0;a<t.CCL_FEE_data.length;a++)if(t.CCL_FEE_data[a].pay_source===e.pay_source){t.CCL_FEE_data.splice(a,1);break}this.setState({modal_add_fee:t})}}]},{data:e.pay_source},{data:e.amount},{data:e.currency},{data:e.actf}],config:{value:!1}})))}getDataGET_FEE(){let{modal_add_fee:e}=this.state;return e.GET_FEE_data.map((e=>({data:[{data:[{icon_item:"edit",title:l.ZP.getLang("designForm_btn_edit"),dataItem:(0,i.Z)({},e),abs_Click:e=>{let{modal_add_fee:t}=this.state;t.GET_FEE_actf=e.actf,t.GET_FEE_value=e.value,t.GET_FEE_target=e.target,t.isModify_GET_FEE=!0,this.setState({modal_add_fee:t})}},{icon_item:"delete",title:l.ZP.getLang("designForm_btn_delete"),dataItem:(0,i.Z)({},e),abs_Click:e=>{let{modal_add_fee:t}=this.state;for(let a=0;a<t.GET_FEE_data.length;a++)if(t.GET_FEE_data[a].target===e.target){t.GET_FEE_data.splice(a,1);break}this.setState({modal_add_fee:t})}}]},{data:e.target},{data:e.actf},{data:e.value}],config:{value:!1}})))}getCMDAddCCL_FEE(){let{modal_add_fee:e}=this.state;if(""===e.CCL_FEE_paysource)return!0;if(e.isModify_CCL_FEE)return!1;for(let t=0;t<e.CCL_FEE_data.length;t++){if(e.CCL_FEE_data[t].pay_source===e.CCL_FEE_paysource)return!0}return!1}getCMDAddGET_FEE(){let{modal_add_fee:e}=this.state;if(""===e.GET_FEE_target)return!0;if(e.isModify_GET_FEE)return!1;for(let t=0;t<e.GET_FEE_data.length;t++){if(e.GET_FEE_data[t].target===e.GET_FEE_target)return!0}return!1}getListComponentCode(e){return this.list_component.filter((t=>{var a,i,o,l,n;return null===(a=t.data[3].data+" - "+t.data[2].data)||void 0===a||null===(i=a.trim())||void 0===i||null===(o=i.toLowerCase())||void 0===o?void 0:o.includes(null===(l=this.state.modal_add_fee.search[e])||void 0===l||null===(n=l.trim())||void 0===n?void 0:n.toLowerCase())})).map((t=>({title:t.data[3].data+" - "+t.data[2].data,value:t.data[3].data,selected:t.data[3].data===this.state.modal_add_fee[e]})))}render(){const e=this.DF_Design_Render,t=this.Modal_Confirm_Delete,a=this.Modal_Add_Fee,l=this.ModalEditRuleFunc,n=this.DF_Loading,_=this.Modal_CloseForm_Render;return(0,g.jsxs)(o.Fragment,{children:[this.state.isLoading?(0,g.jsx)(n,{}):null,(0,g.jsx)(_,{stateData:this.state.modal_close_form_state}),(0,g.jsx)(e,{stateData:this.state.form_design_state}),(0,g.jsx)(u.default,{visibility:this.state.form_preview_state.cmd.visibility}),(0,g.jsx)(t,{stateData:this.state.modal_confirm_delete}),(0,g.jsx)(a,{stateData:this.getFormAddFeeConfig()}),this.state.modal_config_layout.visibility?(0,g.jsx)(r.default,{data:this.state.modal_config_layout.data,func_close_modal_config_layout:this.func_close_modal_config_layout,func_save_modal_config_layout:this.func_save_modal_config_layout}):null,this.state.modal_config_view.visibility?(0,g.jsx)(f.default,{data:this.state.modal_config_view.data,func_save_modal_config_view:this.func_save_modal_config_view,func_close_modal_config_view:this.func_close_modal_config_view}):null,this.state.component_config_state.visibility?(0,g.jsx)(s.default,(0,i.Z)((0,i.Z)({},this.props),{},{configComponent:this.state.component_config_state,func_cancel_modal_config_component:this.func_cancel_modal_config_component,func_save_cp_config:this.func_save_cp_config})):null,this.state.modal_edit_rule_func.visibility?(0,g.jsx)(l,{modal_edit_rule_func:this.state.modal_edit_rule_func,func_cancel_modal_edit_rule_func:this.func_cancel_modal_edit_rule_func,func_save_rule_and_close:this.func_save_rule_and_close}):(0,g.jsx)(o.Fragment,{})]})}}const p=m},5684:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var i=a(7313),o=a(9676),l=a(6417);class n extends i.Component{constructor(e){super(e),this.componentDidUpdate=(e,t)=>{if(e.visibility!==this.props.visibility){let{stateData:e}=this.state;e.cmd.visibility=this.props.visibility,this.setState({stateData:e},(()=>{this.iframeURLChange(this.ref_DFPreview.ref_myIframe,(function(e){}))}))}},this.DF_Preview_Render=(0,o.Iq)("screen_preview"),this.dataPreviewForm={form:"BO_006008",from:"designform"},this.state={stateData:{cmd:{visibility:this.props.visibility},back_to_home:{title:"Back to home",abs_Click:this.abs_Click},device_mode:[{title:"desktop",img:"laptop_mac",id:"desktop",abs_Click:this.abs_ClickMode},{title:"tablet",img:"tablet_mac",id:"tablet",abs_Click:this.abs_ClickMode},{title:"mobile",img:"phone_iphone",id:"mobile",abs_Click:this.abs_ClickMode}],templates:{data:[{title:"Theme Malibu-Blue",img:"../rs/global/img/malibu-blue.png",selected:!0,value:"123"},{title:"Theme malibu-green",img:"../rs/global/img/malibu-green.png",value:"123"},{title:"Theme malibu-purple",img:"../rs/global/img/malibu-purple.png",value:"123"}],abs_Click:this.abs_Click},data_view:{title:"Desktop view",link_form:""}}}}iframeURLChange(e,t){var a=null,i=function(){var i=e.contentWindow.location.href;i!==a&&(t(i),a=i)},o=function(){setTimeout(i,0)};function l(){e.contentWindow.removeEventListener("unload",o),e.contentWindow.addEventListener("unload",o)}e.addEventListener("load",(function(){l(),i()})),l()}render(){const e=this.DF_Preview_Render;return(0,l.jsx)(i.Fragment,{children:(0,l.jsx)("div",{className:"d-flex col-12",children:(0,l.jsx)("div",{className:"main",style:{width:"100%"},children:(0,l.jsx)(e,{ref:e=>{this.ref_DFPreview=e},stateData:this.state.stateData})})})})}}const s=n}}]);