/*! For license information please see main.3210dffc.js.LICENSE.txt */
(()=>{var __webpack_modules__={312:(e,t,i)=>{"use strict";i.d(t,{Z:()=>Go});var o=i(3063),a=i(7313),s=i(5842),n=i(9676),r=i(1168),l=i(6417);class c extends a.Component{constructor(e){super(e),this.modalClose=()=>{r.render((0,l.jsx)("div",{}),this.refs.content_modal),this.setState({show:"none"},(()=>{void 0!==this.props.abs_CloseModal&&this.props.abs_CloseModal()}))},this.getElementContentModal=()=>this.refs.content_modal,this.getDatafull=()=>({config:{default:{title:this.props.modal_title||"",size:this.props.size?this.props.size:"M"},cmd:{visibility:"block"===this.state.show}},abs_Close:this.modalClose}),this.state={show:"none",class:"modal_webui",renderFormChildDone:!1},this.title="",this.props.info_component&&(this.title=this.props.info_component.name),this.ref_modal=(0,a.createRef)()}componentDidUpdate(e){var t,i;this.props.show!==e.show&&setTimeout((()=>{"none"===this.props.show?this.setState({show:"none"}):this.setState({show:"block"})}),300),this.props.renderFormChildDone!==e.renderFormChildDone&&setTimeout((()=>{this.setState({renderFormChildDone:this.props.renderFormChildDone})}),300),null!==(t=this.ref_modal)&&void 0!==t&&null!==(i=t.current)&&void 0!==i&&i.abs_Focus&&"block"===this.state.show&&setTimeout((()=>{this.ref_modal.current.abs_Focus()}),100)}render(){let e=(0,n.RP)("uModal");const t=(0,n.RP)("uForm");return(0,l.jsxs)(e,{dataFull:this.getDatafull(),ref:this.ref_modal,children:[(0,l.jsx)("div",{className:"modal-body",ref:"content_modal"}),"none"!==this.props.show&&!1===this.props.renderFormChildDone&&(0,l.jsx)(t,{dataFull:{config:{default:{title:""}},mode:{form_min:!0},cmd:{visibility:"none"!==this.props.show&&!1===this.props.renderFormChildDone,isLoading:!0}}})]})}}const d=c;var h=i(4647);const u={txFOActions:"",txFo:"",useAction:"true",is_upperCase:"false",action:"",structable:"",structable_read:"",data_default:"",isLookup:"false",isEvaluation:"false",callform:"",callform_detail:"",callform_detail_mode:"",data_view:"",data_value:"",is_password:"false",form_evaluation:""};const p=class{constructor(e,t,i){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=e=>{this.property.cmd.disabled=e},this.getCMD_enable=()=>this.property.cmd.disabled,this.getConfig=()=>{let e=this.property.config,t=(0,o.Z)({},u);for(let i in t)e[i]&&(""!==e[i]&&""===e[i]||(t[i]=e[i]));return t||{}},this.getDefault=()=>this.property.default,this.property={inputType:e,config:i,default:t,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};var _=i(3745),f=i(7751),g=i(5258);class m extends a.Component{constructor(e){var t,i,n,r;super(e),this.setLoadingAction=(e,t)=>{const i=(null===t||void 0===t?void 0:t.isLoading)||!1;this.setState({isLoading:i})},this.getUInputConfig=()=>{var e;return{code:this.props_smooth.default.code,dataFull:{abs_ClickIcon:()=>{this.modalToggle()},abs_ClearData:()=>this.handleClearValue(),abs_Change:e=>this.handleChange(e),abs_Blur:e=>this.onBlur(),abs_KeyUp:this.onKeyUp,config:{default:{placeholder:"true"===String(this.state.CMD.disabled)?" ":"",title:(null===(e=this.state.lang)||void 0===e?void 0:e[this.state.lang_select])||this.props_smooth.default.name,type:(this.props_smooth.config.is_password,"text"),class:this.props_smooth.default.class,required:this.state.validate.request,icon:!0===this.state.isLookup?"search":this.state.isEvaluation?"edit":"",component_code:this.component_code},cmd:{disable:this.state.CMD.disabled+""==="true",visible:this.state.CMD.visible+""!=="false",error:{message:this.renderMess(this.state.help_mess),type:""},isFocus:this.state.isFocus,isLoading:this.state.isLoading},mode:{textAlign:"",isView:!0===this.state.isEvaluation}},mode:{autoWrap:"true"!==this.props_smooth.config.is_password&&!this.state.isLookup&&"true"!==String(this.props.config.isSearch)||"true"===String(this.props.config.autoWrap),isSearch:"true"===String(this.props.config.isSearch),readOnly:!1},valueTitleHover:"true"===this.props_smooth.config.is_password||this.state.CMD.disabled+""!=="true"?"":this.LOGIC_PASSWORD.getPasswordDecode(),value:"true"===this.props_smooth.config.is_password?this.LOGIC_PASSWORD.getPasswordDisplay():this.LOGIC_PASSWORD.getPasswordDecode()}}},this.convertStringWithContext=e=>{let t=s.ZP.getlistCodeContext(e);for(let i=0;i<t.length;i++){let o=t[i],a=s.ZP.context_get(o.code);void 0!==a&&(e=e.replace(o.key,a))}return e},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props_smooth.infoView,default:this.props_smooth.default,layout:this.props_smooth.infoLayout,block:e.block}},this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.setValidate=(e,t)=>{const{validate:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);i.request!==o.request&&this.setState({validate:o})},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setCallBuildFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.closeModal=(e,t)=>{this.refs.b_modal.modalClose()},this.clearCacheCompare=()=>{let{compare_info:e}=this.state;e.cache_value=void 0,e.is_change_value=!1,this.setState({compare_info:e})},this.set=(e,t)=>{this.clearError(),this.clearCacheCompare(),clearTimeout(this._enterTimeout),this._enterTimeout=void 0;let i=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);if(void 0!==t&&null!==t){if(void 0!==this.props_smooth.config.structable_read&&this.props_smooth.config.structable_read.includes(".")){let e=this.props_smooth.config.structable_read.split(".");if(e.length>0)if(2===e.length){if(void 0!==t[e[0]]&&null!==t[e[0]]&&(this.data_debug.data_cpn=t[e[0]][e[1]],void 0!==t[e[0]][e[1]]&&null!==t[e[0]][e[1]])){let{compare_info:o}=this.state;return t[e[0]][e[1]]!==o.cache_value?o.cache_value=t[e[0]][e[1]]:o.is_change_value=!1,void this.setState({value:t[e[0]][e[1]],compare_info:o},(()=>{void 0!==i&&i.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"on_change")}))}}else{let o=t;for(let t=0;t<e.length;t++)if(t===e.length-1){if(void 0!==o&&null!==o[e[t]]){let{compare_info:a}=this.state;return o[e[t]]!==a.cache_value?a.cache_value=o[e[t]]:a.is_change_value=!1,void this.setState({value:o[e[t]],compare_info:a},(()=>{void 0!==i&&i.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"on_change")}))}}else void 0!==o&&null!==o[e[t]]&&(o=o[e[t]])}}this.setState({value:this.props_smooth.config.data_default},(()=>{void 0!==i&&i.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"on_change")}))}},this.getAdvanced=(e,t)=>this.LOGIC_PASSWORD.getPasswordDecode(),this.getDataOOP=(e,t)=>this.data_select,this.toolAutoValue=()=>{let{max:e}=this.state.validate;if(Number.isInteger(e)&&0!==e||(e=500),"false"===String(this.state.CMD.disabled)||"false"===String(this.state.CMD.visible)){let t=this.props_smooth.default.name+Math.round(1e3*Math.random());Number(e)<t.length&&(t="1"),this.setState({value:t,data_view:t})}},this.setAdvanced=(e,t)=>{if(e.codeHidden){if(e.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){let e="";void 0!==this.props_smooth.config.data_view&&(e=": "+s.ZP.getOOP(this.data_select,this.props_smooth.config.data_view.trim()));let t="";void 0!==this.props_smooth.config.data_value&&(t=s.ZP.getOOP(this.data_select,this.props_smooth.config.data_value.trim())+""),this.setState({value:t,data_view:e},(async()=>{let e=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==e&&await e.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"enter_tab")}))}}else if(e.list_component){let{list_component:i}=e,{code:o}=this.props_smooth.default;if(void 0!==t&&null!==t||(t=""),i){if(i.split(";").includes(o)){let i=e.component_action||"";this.setState({value:t},(()=>{let e=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==e&&(i.split(";").includes(o)||e.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"enter_tab"))}))}}}this.clearError()},this.setGetInfo=(e,t)=>{if(t=t[this.props.default.code],e.codeHidden){if(e.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){let e="";void 0!==this.props_smooth.config.data_view&&(e=": "+s.ZP.getOOP(this.data_select,this.props_smooth.config.data_view.trim()));let t="";void 0!==this.props_smooth.config.data_value&&(t=s.ZP.getOOP(this.data_select,this.props_smooth.config.data_value.trim())+""),this.setState({value:t,data_view:e},(async()=>{let e=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==e&&await e.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"enter_tab")}))}}else if(e.list_component){let{list_component:i}=e,{code:o}=this.props_smooth.default;if(void 0!==t&&null!==t||(t=""),i){if(i.split(";").includes(o)){let i=e.component_action||"";this.setState({value:t},(()=>{let e=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==e&&(i.split(";").includes(o)||e.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"enter_tab"))}))}}}this.clearError()},this.get=(e,t)=>{let i=this.props_smooth.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.checkValidate=()=>{let e="",t=this.state.value;if(void 0===t||null===t)return!1;t=t.toString().trim();let{min:i,max:o,request:a,regex_format:n,validate_html:r}=this.state.validate;if(Number.isInteger(i)&&i>t.length&&(e="validateStringMin"),Number.isInteger(o)&&0!==o?(o<t.length||o<encodeURI(this.LOGIC_PASSWORD.getPasswordDecode()).split(/%..|./).length-1)&&(e="validateStringMax"):o=500,a&&""===t.trim()&&(e="validateRequest"),n&&""!==t){new RegExp(n,"gm").test(t)||(e="validateFormat")}if(void 0===r||"true"===r){/<\/?[a-z][\s\S]*>/g.test(t)&&(e="validateHtml")}if(""!==e){let t=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);return void 0!==t&&t.setFormValidateFromComponent(!0,this.props_smooth.default),this.state.help_mess=e,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:e}),!0}return this.setState({help_css:"",help_icon:"",help_mess:""}),!1},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.data_select={},this.setState({value:this.props_smooth.config.data_default},(()=>{let e=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"reload")}))},this.setDataDefault=()=>{this.data_select={},this.setState({value:this.props_smooth.config.data_default})},this.getInfoCompare=(e,t)=>{let{lang_compare:i,compare_info:o,isCompare:a}=this.state;if(a){let e=i[this.state.lang_select];if(o.is_change_value){let t=e.replace("{value_old}","");return t=t.replace("{value_new}",""),{is_change_value:o.is_change_value,compareInfo:{component_code:this.props_smooth.default.code,component_name:this.props_smooth.default.name,message:{title_before:o.cache_value,title_status:t,title_after:o.change_value}}}}}return{}},this.modalToggle=e=>{e||this.buildFormChild(),!0===this.state.CMD.disabled&&this.props.config.isEvaluation+""!=="true"||(void 0===e?this.setState({show_modal:s.ZP.autoID()}):e&&(this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})))},this.eventEnter=()=>{if(void 0!==this.props_smooth.config.useAction)if("true"===this.props_smooth.config.useAction){let e=s.ZP.parseJson(this.props_smooth.config.txFoActions);void 0!==e?_.ZP.runActionWithContext(e,{},this.props_smooth.infoA,this.props_smooth.infoA_parent,this.props_smooth.default):s.ZP.AppException("#CTEXTINPUT.onKeyDown","config_fo is undefined")}else if(void 0!==this.props_smooth.config.txFo){let e=s.ZP.parseJson(this.props_smooth.config.txFo);void 0!==e?_.ZP.runFoWithContext(e,{},this.props_smooth.infoA,this.props_smooth.infoA_parent,this.props_smooth.default):s.ZP.AppException("#CTEXTINPUT.onKeyDown","Error Json is undefined")}else s.ZP.AppException("#CTEXTINPUT.onKeyDown","txFo is undefined");else s.ZP.AppException("#CTEXTINPUT.onKeyDown","useAction is undefined");s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form).runRuleFunction(this.props_smooth.default,{},this.props_smooth.infoA_parent,"tab_enter")},this.onKeyUp=e=>{if("Enter"===e.key){this.eventEnter(),s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form).runRuleFunction(this.props_smooth.default,{},this.props_smooth.infoA_parent,"enter"),clearTimeout(this._enterTimeout),this._enterTimeout=void 0}},this.onBlur=()=>{if(clearTimeout(this._enterTimeout),this._enterTimeout=void 0,!1===this.checkValidate()){let e=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==e&&("true"!==String(this.props.config.isSearch)&&e.runRuleFunction(this.props_smooth.default,{},this.props_smooth.infoA_parent,"enter_tab"),!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(e.buildValidateForm(!1),e.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.buildValidateForm(!1)}})))}},this.onFocus=e=>{e.target.select()},this.checkDisable=()=>{let e=this.props_smooth.config.is_disabled;return"true"===e||!0===e},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props_smooth.default.name;return this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:e||this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props_smooth.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}}return""},this.renderDebug=()=>{if(s.ZP.isDebug()){this.props_smooth.config.structable=this.props_smooth.config.structable||"";let e=this.props_smooth.config.structable.split(".")[1],t=this.data_debug.data_cpn;return null===t&&(t="NULL"),(0,l.jsx)(a.Fragment,{children:(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${e}|:|${t}|`})})}},this.renderMess=e=>{switch(e){case"validateStringMin":return s.ZP.getLang(e).replace("{count}",this.state.validate.min);case"validateStringMax":return s.ZP.getLang(e).replace("{count}",this.state.validate.max);default:return s.ZP.getLang(e)}},this.setFocus=()=>{var e,t;null!==(e=this.myRef)&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.ref_myInput&&this.myRef.current.ref_myInput.focus()},this.abs_CloseModal=()=>{this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})},this.renderFormChildDone=!1,this.LOGIC_PASSWORD=new g.y,this.component_code=s.ZP.autoID(),this.propertyConstructor=new p(e.inputType,e.default,e.config),this.props_smooth=(0,o.Z)({},this.props),null!==(t=this.props_smooth)&&void 0!==t&&null!==(i=t.validate)&&void 0!==i&&i.max&&(this.props_smooth.validate.max=Number(null===(n=this.props_smooth)||void 0===n||null===(r=n.validate)||void 0===r?void 0:r.max)),this.props_smooth.config=this.propertyConstructor.getConfig(),this.props_smooth.default=this.propertyConstructor.getDefault(),this._enterTimeout=void 0,this.data_default="",void 0!==this.props_smooth.config.data_default&&(this.props_smooth.config.data_default=this.convertStringWithContext(this.props_smooth.config.data_default),this.data_default=this.props_smooth.config.data_default);let c=this.props_smooth.validate;void 0===c&&(c={});let d="true"===this.props_smooth.config.isLookup,h="true"===this.props_smooth.config.isEvaluation,u="true"===String(this.props_smooth.validate.is_compare);this.callform_detail="",this.callform="",this.data_select={};let f={},m={};void 0!==this.props_smooth.lang&&(f=void 0!==this.props_smooth.lang.title?this.props_smooth.lang.title:this.props_smooth.lang,void 0!==this.props_smooth.lang.lang_compare&&(m=this.props_smooth.lang.lang_compare)),this.state={isCompare:u,compare_info:{cache_value:void 0,is_change_value:!1,change_value:void 0},value:this.data_default,value_old:"",lang_compare:m,lang:f,lang_select:s.ZP.getLangKey(),validate:c,isLookup:d,isEvaluation:h,data_view:"",show_modal:"none",show_modal_detail:"none",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:this.propertyConstructor.getCMD(),check_upper_case:this.props_smooth.config.is_upperCase,isFocus:!1,isLoading:!1,renderFormChildDone:!1,id_component:s.ZP.autoID(),hasErrorInForm:!1},this.data_debug={},this.myRef=a.createRef(),this.LOGIC_PASSWORD.setPassword(this.data_default)}componentDidUpdate(e){void 0===this.state.value&&this.setState({value:""}),e.value!==this.state.value&&this.state.value!==this.LOGIC_PASSWORD.getPasswordDisplay()&&(this.LOGIC_PASSWORD.setPassword(this.state.value),this.setState({value:this.LOGIC_PASSWORD.getPasswordDisplay()}))}buildFormChild(){if(this.state.isLookup){if(this.props_smooth.config.callform&&""!==this.props_smooth.config.callform.trim()){let e=s.ZP.cloneJson(this.props_smooth.infoA);e.componentParent=this.props_smooth.default,(0,h.BR)(this.props_smooth.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props_smooth.default,"callform;"+this.state.id_component)}}else if(this.state.isEvaluation&&this.props_smooth.config.form_evaluation&&""!==this.props_smooth.config.form_evaluation.trim()){var e;let t=s.ZP.cloneJson(this.props_smooth.infoA);t.componentParent=this.props_smooth.default,(0,h.BR)(this.props_smooth.config.form_evaluation,this.refs.b_modal.getElementContentModal(),t,this.props_smooth.default,"callform;"+this.state.id_component,{title_component:(null===(e=this.state.lang)||void 0===e?void 0:e[this.state.lang_select])||this.props_smooth.default.name,value_component:this.LOGIC_PASSWORD.getPasswordDecode().trim(),cmd_component:this.state.CMD})}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props_smooth.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){if(e.includes(".")){let i=e.split(".");const o=this.LOGIC_PASSWORD.getPasswordDecode().trim();void 0===t||"true"===t?s.ZP.putData(i[0],i[1],o,this.props_smooth.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],o):s.ZP.putDataGB(i[0],i[1],"")}}handleClearValue(){if("true"===String(this.props.config.isSearch)){let e="";this.LOGIC_PASSWORD.setPassword(e),this.setState({value:e})}}handleChange(e){if(e.target.value.includes("\n"))return;if(this.state.isLoading)return;let{compare_info:t}=this.state;t.cache_value!==e.target.value?(t.change_value=e.target.value,t.is_change_value=!0):t.is_change_value=!1;let i=e.target.value,o=Number(this.props_smooth.validate.max)||500;i.length>o||("true"===this.state.check_upper_case?i=i.toUpperCase():"-"===this.state.check_upper_case&&(i=i.toLowerCase()),this.LOGIC_PASSWORD.setPassword(i),this.setState({value:i,compare_info:t}))}openDetail(){if(""!==this.callform_detail&&void 0!==this.props_smooth.infoA){let e=s.ZP.getFormAppAuto(this.callform_detail);if(void 0!==e)return void("modal"===this.props_smooth.config.callform_detail_mode?(e.putDataAll_andSet(this.data_select),this.setState({show_modal_detail:s.ZP.autoID()})):(e.putDataAll_andSet(this.data_select),s.ZP.openForm(this.callform_detail)))}(0,h.QS)({form_code:this.props_smooth.config.callform_detail},this.props_smooth.infoA,this.props_smooth.default,"callform_detail",this.data_select)}listenHandlerUser(e){this.setState({value_old:e}),void 0===this.data_select&&(this.data_select={}),this.data_select.new_value=e;let t=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props_smooth.default,this.state.value,this.props_smooth.infoA_parent,"on_change")}render(){const e=(0,n.RP)("uInput"),t=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup+("false"===String(this.state.CMD.visible)?" malibu-invisible":""),children:[(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(e,(0,o.Z)({ref:this.myRef},this.getUInputConfig())),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal}),this.state.isLookup&&(0,l.jsx)(d,{info_component:this.props.default,show:this.state.show_modal_detail,infoA_call_form:this.state.infoA_call_form,ref:"b_modal_detail",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]}),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(e,(0,o.Z)({ref:this.myRef},this.getUInputConfig())),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal}),this.state.isLookup&&(0,l.jsx)(d,{info_component:this.props.default,show:this.state.show_modal_detail,infoA_call_form:this.state.infoA_call_form,ref:"b_modal_detail",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal}),this.state.isEvaluation&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("evaluation_modal_title"),info_component:this.props.default,size:"L",show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.props_smooth.config.form_evaluation,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]})}}const v=m,b={},y={},A={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class D{}D.get=()=>({main:b,position:y,cmd:A}),D.getCmd=()=>A,D.getValueCmd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return void 0!==e.infoA.form_code&&(t=s.ZP.role_getComponent(e.infoA.form_code,e.default.codeHidden)||{},t=t.role||{}),t};const k=D,O=["tree","form","view","code","text"];class w extends a.Component{constructor(e){var t;super(e),t=this,this.setValidate=(e,t)=>{const{validate:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);i.request!==o.request&&this.setState({validate:o})},this.getUTextareaConfig=()=>{var e;let{schema:t}=this.state;return{config:{default:{title:(null===(e=this.state.lang)||void 0===e?void 0:e[this.state.lang_select])||this.props.default.name,class:this.props.default.class,rows:10,isJson:"true"===this.props.config.isjson,required:"true"===this.state.validate.request,component_code:this.component_code},cmd:{disable:this.state.CMD.disabled+""==="true",visible:this.state.CMD.visible+""!=="false"},error:{message:s.ZP.getLang(this.state.help_mess),type:""!==this.state.help_mess?"danger":""},mode:{}},data:[],value:this.state.value,tooltip_copy:{icon:"copy",title:s.ZP.getLang("btn_copy")},abs_Copy:()=>{s.ZP.copyToClipboard(this.state.value)},json_config:"true"===this.props.config.isjson?{schema:t,mode:this.state.mode,indentation:4,modes:this.state.CMD.disabled+""==="true"?[]:O,text:this.getValueJson(),onChangeText:this.onChangeText,onModeChange:this.onModeChange}:{}}},this.onChangeText=e=>{this.setState({value:e})},this.onModeChange=e=>{this.setState({mode:e})},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.onRunRule=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"on_change",i=s.ZP.getFormAppAuto(t.props.infoA.key_form);void 0!==i&&i.runRuleFunction(t.props.default,{},t.props.infoA_parent,e)},this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o},(()=>{o.disabled+""==="true"?this.setState({mode:"view"}):this.setState({mode:"tree"})}))},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:e||this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}}return""},this.callDir=()=>this,this.setAdvanced=(e,t)=>{try{t||(t=JSON.stringify(JSON.parse(this.data_default),null,4))}catch(i){t=this.data_default}if(void 0!==this.props.config.isjson&&"true"===this.props.config.isjson)try{t=JSON.stringify(JSON.parse(t),null,4)}catch(i){}this.setState({value:t},(()=>{this.onRunRule("enter_tab")}))},this.setGetInfo=(e,t)=>{t=t[this.props.default.code];try{t||(t=JSON.stringify(JSON.parse(this.data_default),null,4))}catch(i){t=this.data_default}if(void 0!==this.props.config.isjson&&"true"===this.props.config.isjson)try{t=JSON.stringify(JSON.parse(t),null,4)}catch(i){}this.setState({value:t})},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var i=this.props.config.structable_read.split(".");if(i.length>0&&void 0!==t[i[0]]&&void 0!==t[i[0]][i[1]]){if(void 0!==this.props.config.isjson)if("true"===this.props.config.isjson)try{"object"===typeof t[i[0]][i[1]]?this.setState({value:JSON.stringify(t[i[0]][i[1]])}):this.setState({value:t[i[0]][i[1]]})}catch(o){}else this.setState({value:t[i[0]][i[1]]});else this.setState({value:t[i[0]][i[1]]});return void this.onRunRule()}}let e="";this.data_default&&(e=this.data_default),this.setState({value:e})}},this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.getAdvanced=(e,t)=>this.state.value,this.reload=(e,t)=>{if(void 0!==this.props.config.isjson)if("true"===this.props.config.isjson)try{this.setState({value:this.data_default||""})}catch(i){this.setState({value:""})}else this.setState({value:this.data_default});else this.setState({value:this.data_default})},this.onBlur=e=>{if(!this.checkValidate()){if(void 0!==this.props.config.isjson&&"true"===this.props.config.isjson)try{this.setState({value:e.target.value})}catch(t){alert(t)}let i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(i.buildValidateForm(!1),i.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.buildValidateForm(!1)}}))}},this.component_code=s.ZP.autoID(),this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var i=this.props.lang;void 0===i&&(i={});let a=this.data_default,n=k.getValueCmd(this.props),r=this.props.validate;void 0===r&&(r={}),this.state={value:a,lang:i,validate:r,lang_select:s.ZP.getLangKey(),help_css:"",help_icon:"",help_mess:"",CMD:k.getValueCmd(this.props),schema:{title:this.props.default.name,type:"object",properties:{array:{type:"array",items:{type:"number"}},boolean:{type:"boolean"},number:{type:"number"},string:{type:"string"}},required:[]},mode:n.disabled+""==="true"?"view":"tree",hasErrorInForm:!1},this.handleChange=this.handleChange.bind(this)}isJson(e){try{JSON.parse(e)}catch(t){return!1}return!0}getValueJson(){try{return"code"===this.state.mode||"text"===this.state.mode?this.state.value?this.state.value:"":this.state.value?JSON.stringify(JSON.parse(this.state.value)):(this.setState({value:JSON.stringify({})}),"{}")}catch(e){return this.state.value}}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}readData(e,t){if(e.includes(".")){var i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}handleChange(e){this.setState({value:e.target.value})}checkValidate(){let e="",t=this.state.value.trim();if("true"===this.state.validate.request&&""===t&&(e="validateRequest"),""!==e){let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);return void 0!==t&&t.setFormValidateFromComponent(!0,this.props.default),this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:e}),!0}return this.setState({help_css:"",help_icon:"",help_mess:""}),!1}render(){const e=(0,n.RP)("uTextArea"),t=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getUTextareaConfig()),{},{abs_Change:this.handleChange,abs_Blur:this.onBlur})}),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getUTextareaConfig()),{},{abs_Change:this.handleChange,abs_Blur:this.onBlur})})}}const C=w;const x=class{constructor(e,t,i){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=e=>{this.property.cmd.disabled=e},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};var S=i(1896);class M extends a.Component{constructor(e){var t;if(super(e),this.modalToggle=e=>{void 0===e?this.setState({show_modal:s.ZP.autoID()}):e&&this.setState({show_modal:"none"})},this.setDataOOP=(e,t)=>{this.setState({dataOOP:t},(()=>{s.ZP.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,t,this.props.infoA_parent,"update")}))},this.getDataOOP=(e,t)=>{const{list_component:i}=e,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.state.dataOOP}},this.setCMD=(e,t)=>{if(void 0!==e&&void 0!==t){const i=e.list_component;if(i&&i.includes(this.props.default.code)){const{CMD:e}=this.state;let i=Object.assign(s.ZP.cloneJson(e),t);e.disabled===i.disabled&&e.visible===i.visible&&e.block===i.block||this.setState({CMD:i})}}},this.getInfoCheckRun=()=>{let e=this.propertyConstructor.getCMD();return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.state.lang_default?this.setState({lang:s.ZP.getLang(this.props.default.code),lang_select:s.ZP.getLangKey()}):this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.get=(e,t)=>{void 0!==this.props.config.uploadfile&&"true"===this.props.config.uploadfile.active&&s.ZP.putData(this.props.default.code,"uploadFile",this.uploadfile_result,this.props.infoA)},this.runFO=(e,t)=>{t.action&&_.ZP.runActionWithContext(t.action,{},this.props.infoA,this.props.infoA_parent,this.props.default),t.txFo&&_.ZP.runFoWithContext(t.txFo,{},this.props.infoA,this.props.infoA_parent,this.props.default)},this.setLoadingAction=(e,t)=>{let i=(null===t||void 0===t?void 0:t.isLoading)||!1;this.setState({isLoading:i})},this.fileSelectHandler=e=>{},this.clearTimeOut=()=>{clearTimeout(this.timer),this.timer=null},this.reload=()=>{this.setState({test:"",isLoading:!1})},this.set=()=>{this.setState({test:""})},this.showToast=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s.ZP.showToast(e,t,i)},this.propertyConstructor=new x(e.inputType,e.default,e.config),this.timer=void 0,this.uploadfile_result={},this.disabled=!1,void 0!==this.props.infoA.form_code){var i=s.ZP.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=i&&void 0!==i.role&&(void 0!==i.role.disabled&&(!0===i.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==i.role.visible&&(!0===i.role.visible?this.propertyConstructor.setCMD_visible(e.visibility&&!0):this.propertyConstructor.setCMD_visible(e.visibility&&!1)))}let o=(null===(t=this.props.config.uploadfile)||void 0===t?void 0:t.filetype)||"*";this.fileTypeRegx=o.split(",").map((function(e){return new RegExp(e.replace("*","[^\\/,]+"))}));var a=this.props.lang;void 0===a&&(a={});let n=!1;void 0!=={btn_remove:{color:"danger",icon:"fa-trash-o"},btn_save:{color:"success",icon:"fa-save"},btn_add:{color:"primary",icon:"fa-plus"},btn_modified:{color:"warning",icon:"fa-pencil-square-o"},btn_update:{color:"warning",icon:"fa-cloud-upload"},btn_cancel:{color:"default",icon:"fa-ban"},btn_clear:{color:"default",icon:"fa-times"},btn_import:{color:"primary",icon:"fa-upload"},btn_export:{color:"primary",icon:"fa-download"},btn_accept:{color:"primary",icon:"fa-check"},btn_apply:{color:"primary",icon:"fa-check"},btn_search:{color:"primary",icon:"fa-search"},btn_copy:{color:"primary",icon:"fa-files-o"},btn_print:{color:"base",icon:"fa-print"},btn_printVoucher:{color:"base",icon:"fa-file-text-o"}}[this.props.default.code]&&(a=s.ZP.getLang(this.props.default.code),n=!0);var r=!1;void 0!==this.props.config.isLookup&&"true"===this.props.config.isLookup&&(r=!0),this.state={lang:a,lang_select:s.ZP.getLangKey(),lang_default:n,dataOOP:{},count:1,isLoading:!1,show_modal:"none",isLookup:r,CMD:this.propertyConstructor.getCMD()},this.time_last_click=0}getTitleButton(e,t,i,o){return e?t||o:t[i]?t[i]:o}getTemplateConfig(){var e,t;let{lang_default:i,lang:o,isLoading:a}=this.state;return{config:{default:{title:this.getTitleButton(i,o,s.ZP.getLangKey(),this.props.default.name),type:this.props.config.color,class:"true"===(null===(e=this.props.config.uploadfile)||void 0===e?void 0:e.active)?"malibu-button-upload":this.props.default.class,icon:this.props.config.icon,accept:null===(t=this.props.config.uploadfile)||void 0===t?void 0:t.filetype,att_content:""},cmd:{disable:a||"true"===String(this.state.CMD.disabled),isLoading:a,visible:"true"===String(this.state.CMD.visible)}}}}checkFileTypeAccept(e){return this.fileTypeRegx.some((t=>t.test(e)))}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}componentDidMount(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let e=s.ZP.cloneJson(this.props.infoA);e.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props.default,"callform")}setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}onClick(){void 0!==this.timer&&null!==this.timer||(this.timer=setTimeout((()=>{clearTimeout(this.timer),this.timer=null}),3e3),void 0!==this.props.config.uploadfile&&"true"===this.props.config.uploadfile.active||this.this_redirect())}this_redirect(){if(this.propertyConstructor.getCMD_visible())if(void 0!==this.props.config.useAction)if("true"===this.props.config.useAction){var e=s.ZP.parseJson(this.props.config.txFoActions);void 0!==e?_.ZP.runActionWithContext(e,{},this.props.infoA,this.props.infoA_parent,this.props.default):s.ZP.AppException("#CBUTTON.onClick","config_fo is undefined")}else if(void 0!==this.props.config.txFo){var t=s.ZP.parseJson(this.props.config.txFo);void 0!==t?_.ZP.runFoWithContext(t,{},this.props.infoA,this.props.infoA_parent,this.props.default):s.ZP.AppException("#CBUTTON.onClick","Error Json is undefined")}else s.ZP.AppException("#CBUTTON.onClick","txFo is undefined");else s.ZP.AppException("#CBUTTON.onClick","useAction is undefined");else alert(s.ZP.getLang("#sysDontLoveMe"));var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click"),s.ZP.isDebug()&&s.ZP.copyToClipboard(JSON.stringify(this.props.config.txFo))}render(){var e,t;const i=(0,n.RP)("uButton"),r=(0,n.RP)("uInputFile");if("false"===this.state.CMD.visible)return null;const c=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(c,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(a.Fragment,{children:"true"===(null===(e=this.props.config.uploadfile)||void 0===e?void 0:e.active)?(0,l.jsx)(r,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Change:e=>{if(void 0!==e.target)if(e.target.files.length>0)if(this.file_upload=e.target.files[0],this.checkFileTypeAccept(e.target.files[0].type))if(this.props.config.isUploadFileZipNeptune){let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!0),(0,S.BH)(e.target.files[0],this.props.infoA)}else(0,S.bq)(e.target.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((e=>{this.uploadfile_result=e,this.uploadfile_result.file=this.file_upload,this.this_redirect()}),(e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#",!1):this.showToast(s.ZP.getLang("FileUploadError"),!1)}));else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1)},abs_Click:(e,t)=>{this.onClick()}})}):(0,l.jsx)(i,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Click:(e,t)=>{this.onClick()}})})}),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(a.Fragment,{children:"true"===(null===(t=this.props.config.uploadfile)||void 0===t?void 0:t.active)?(0,l.jsx)(r,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Change:e=>{if(void 0!==e.target)if(e.target.files.length>0)if(this.file_upload=e.target.files[0],this.checkFileTypeAccept(e.target.files[0].type))if(this.props.config.isUploadFileZipNeptune){let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!0),(0,S.BH)(e.target.files[0],this.props.infoA)}else(0,S.bq)(e.target.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((e=>{this.uploadfile_result=e,this.uploadfile_result.file=this.file_upload,this.this_redirect()}),(e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#",!1):this.showToast(s.ZP.getLang("FileTypeError"),!1)}));else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1)},abs_Click:(e,t)=>{this.onClick()}})}):(0,l.jsx)(i,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Click:(e,t)=>{this.onClick()}})})})}}const P=M;var T=i(2200);const I={btn_delete:{color:"danger",icon:"fa-trash-o"},btn_view:{color:"info",icon:"fa-eye"},btn_select:{color:"primary",icon:"fa-check"},btn_print:{color:"base",icon:"fa-print"},view:{color:"info",icon:"fa-eye"},delete:{color:"danger",icon:"fa-trash-o"}};class N extends a.Component{constructor(e){super(e),this.onClickButton=async e=>{var t,i,o,a;if(!0===((null===(t=this.props)||void 0===t||null===(i=t.tableContext)||void 0===i||null===(o=i.state)||void 0===o?void 0:o.CMD)||{}).disabled&&!0!==(null===(a=this.props)||void 0===a?void 0:a.isButtonSystem))return;let n=e.default,r=e.config,l=s.ZP.getFormAppAuto(this.props.infoA.key_form);if(await l.runRuleFunction(n,JSON.parse(this.row_data),this.props.infoA_parent,"on_click"),void 0!==r.useAction)if("true"===r.useAction){let e=s.ZP.parseJson(r.txFoActions);void 0!==e?_.ZP.runActionWithContext(e,JSON.parse(this.row_data),this.props.infoA,this.props.infoA_parent,n):s.ZP.AppException("#cColumnAction.onClick","config_fo is undefined")}else if(void 0!==r.txFo){let e=s.ZP.parseJson(r.txFo);void 0!==e?_.ZP.runFoWithContext(e,JSON.parse(this.row_data),this.props.infoA,this.props.infoA_parent,n):s.ZP.AppException("#cColumnAction.onClick","Error Json is undefined")}else s.ZP.AppException("#cColumnAction.onClick","txFo is undefined");else s.ZP.AppException("#cColumnAction.onClick","useAction is undefined");s.ZP.isDebug()&&s.ZP.copyToClipboard(r.txFo)},this.row_data={},this.state={lang_select:this.props.lang_select,data:this.callBuildColumn(!0)}}callBuildColumn(e){this.row_data=JSON.stringify(this.props.value);let t=this.props.data.filter((e=>s.ZP.checkDynamicCondition(this.props.value,e.default.condition)));if(void 0!==e&&e)return t;this.setState({data:t})}componentDidUpdate(e){this.props.lang_select!==e.lang_select&&this.setState({lang_select:this.props.lang_select}),this.props.value===e.value&&this.props.data===e.data||this.callBuildColumn()}getIcon(e){var t,i;return null!==(t=I[e.default.code])&&void 0!==t&&t.icon?null===(i=I[e.default.code])||void 0===i?void 0:i.icon:e.config.icon?e.config.icon:""}render(){var e;const t=(0,n.RP)("uTableColumnButtonHover");return 0===(null===(e=this.state.data)||void 0===e?void 0:e.length)?(0,l.jsx)("td",{style:{boxShadow:"inset 0 -1px 0 #cbd6e2, inset 1px 0 0 #cbd6e2, inset 0px 0 0 #ecf0f4 !important"}}):(0,l.jsx)(t,{title_parent:"title",dataFull:{icon:"more_vert",data:[...this.state.data].map((e=>{var t;return{icon_item:this.getIcon(e),title:(null===(t=e.lang)||void 0===t?void 0:t[this.props.lang_select])||e.default.name,dataItem:e,abs_Click:this.onClickButton}}))}})}}const F=N,L={},E={},j={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class Z{}Z.get=()=>({main:L,position:E,cmd:j}),Z.getCmd=()=>j,Z.getValueCmd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return void 0!==e.infoA.form_code&&(t=s.ZP.role_getComponent(e.infoA.form_code,e.default.codeHidden)||{},t=t.role||{}),t};const R=Z;var Q=i(6633);class z extends a.Component{constructor(e){super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.callDir=()=>this,this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)"true"===o[a]&&(o[a]=!0),"false"===o[a]&&(o[a]=!1);this.setState({CMD:o})},this.set=(e,t)=>{},this.reload=(e,t)=>{this.dataGlobal=s.ZP.getDataLimited(this.state.config_table.query_data,0,999999999);let i={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[],total:this.dataGlobal.total},o=[],a=0;void 0!==i.total&&(a=i.total);let n=this.buildPaging(a,this.state.config_table);void 0!==i.data&&(o=i.data),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:o,paging:n,page_index:1,total_record:a})},this.getData=()=>({total_paging:this.state.total_record}),this.getAdvanced=(e,t)=>this.getData(),this.get=(e,t)=>{if(null!==e&&void 0!==e&&e.list_component&&(";"+e.list_component+";").includes(";"+this.props.default.code+";")){let t=this.props.config.structable;if(t.includes("|")){let i=t.split("|");for(let t=0;t<i.length;t++)this.readData(i[t],e.inform)}else this.readData(t,e.inform)}},this.abs_getDataLimited=function(e,t){let i={data:this.state.dataFilter.slice(e,e+t)||[],total:this.state.dataFilter.length},o=i.data;if(!0===this.state.hasCheck)for(let n=0;n<o.length;n++)o[n].hasCheck__=!1;let a=1;void 0!==i.total&&(a=i.total);let s=this.buildPaging(a,this.state.config_table);this.setState({data:o,total_record:a,paging:s})},this.recordChangeHandler=e=>{let t=this.state.config_table;t.paging_record=this.state.paging_record[e];let i=this.buildPaging(this.state.total_record,t);this.setState({paging:i,page_index:1,selectedRecordIndex:e,config_table:t},(()=>{this.abs_getDataLimited(0,this.state.paging_record[e])}))},this.abs_PagingActive=e=>{let t=(e-1)*this.state.config_table.paging_record,i=this.state.config_table.paging_record;this.setState({page_index:e},(()=>{this.abs_getDataLimited(t,i)}))},this.getHeaderConfig=e=>{let t=[];return!0===e&&t.push({title:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),t=t.concat(this.state.columns.map((e=>{var t,i;return{title:(null===(t=this.state.lang)||void 0===t||null===(i=t[this.state.lang_select])||void 0===i?void 0:i[e.title])||e.title,id:e.code,config:{width:"",isFrozen:!1},value_search:this.state.columnSearchValue[e.code]}}))),t},this.handelClearSearch=()=>{let e=this.state.columnSearchValue;for(const s in e)e[s]="";let t=this.dataGlobal.data,i=t.slice(0,this.state.config_table.paging_record),o=t.length,a=this.buildPaging(o,this.state.config_table);this.setState({data:i,dataFilter:t,paging:a,page_index:1,total_record:o,columnSearchValue:e})},this.getCaptionLang=(e,t,i)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${t}_${i}`]&&(this.CACHE_CDLIST[`${t}_${i}`]=s.ZP.data_cdList(t,i,!0));let o={};for(const s of this.CACHE_CDLIST[`${t}_${i}`]){let e=s.c_cdlist.mcaption||{},t=s.c_cdlist.caption||"";o[s.c_cdlist.cdid]=s.c_cdlist={mcaption:e,caption:t}}const a=o[e]||{};let n=(null===a||void 0===a?void 0:a.mcaption)||{},r=(null===a||void 0===a?void 0:a.caption)||"";return n[s.ZP.getLangKey()]||r},this.handelChangeSearch=(e,t)=>{var i;let o=this.state.columnSearchValue;o[t]=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"";let a=this.dataGlobal.data.filter((e=>{let t=!0;for(const a in o){let n=s.ZP.getOOP(e,a);const r=this.cols_config[a];if("columnMask"===r.inputtype){var i;let e=r.config.mask;(e.includes("DD")&&e.includes("MM")&&e.includes("YY")||!0===(null===(i=r.config)||void 0===i?void 0:i.isDate))&&(void 0!==r.data_type&&"string"===r.data_type&&(n=Q.cI(n,"YYYY-MM-DDTHH:mm:ss.SSS[Z]")),n=Q.FW(n,e))}if("ColumnCdlist"===r.inputtype){let{cdgrp:e,cdname:t}=r.config;n=this.getCaptionLang(n,e,t)}!1===String(n).toLowerCase().includes(o[a].toLowerCase())&&(t=!1)}return t})),n=a.slice(0,this.state.config_table.paging_record),r=a.length,l=this.buildPaging(r,this.state.config_table);this.setState({data:n,dataFilter:a,paging:l,page_index:1,total_record:r,columnSearchValue:o})},this.abs_autoCallBackData=()=>{let e=this.state.paging_record;e[this.state.selectedRecordIndex]+=5,this.setState({paging_record:e},(()=>{this.recordChangeHandler(0)}))},this.handleClickTableRow=e=>{},this.handleMoveLeft=e=>{let t=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;t&&e--,"true"===i&&e--;let o=e-1,{columns:a}=this.state,s=a.splice(e,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.handleMoveRight=e=>{let t=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;t&&e--,"true"===i&&e--;let o=e+1,{columns:a}=this.state,s=a.splice(e,1)[0];a.splice(o,0,s),this.setState({columns:a})};let t=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let e=this.props.config.paging_record.split(",");e.length>1&&(t=e)}let i={paging_record:t[0],query_data:this.props.config.query_data};this.dataGlobal=s.ZP.getDataLimited(i.query_data,0,999999999)||{};let o={data:[],total:0};"false"!==this.props.config.isLoadDataStart&&(o={data:this.dataGlobal.data.slice(0,i.paging_record)||[],total:this.dataGlobal.total}),void 0===o&&(o={});let a=0;void 0!==o.total&&(a=o.total);let n=this.buildPaging(a,i),r=[];void 0!==o.data&&(r=o.data);let l=[],c=e.default.code.trim();if(void 0!==e.btn_of_grid&&""!==c)for(let s=0;s<e.btn_of_grid.length;s++){c===e.btn_of_grid[s].config.onTable.trim()&&(l[l.length]=e.btn_of_grid[s])}let d=this.props.lang;void 0===d&&(d={}),this.state={dataFilter:this.dataGlobal.data,data:r,lang:d,lang_select:s.ZP.getLangKey(),paging:n,total_record:a,paging_record:t,selectedRecordIndex:0,page_index:1,STT:!1,hasCheck:!1,columns:void 0===this.props.config.columns?[]:JSON.parse(this.props.config.columns),action:l,config_table:i,CMD:R.getValueCmd(this.props),columnSearchValue:{}},this.cols_config={};for(const s of this.state.columns)this.cols_config[s.code]=s}buildPaging(e,t){let i=[],o=1;if(e>0)for(let a=0;a<e;a+=parseInt(t.paging_record))i[i.length]=o,o++;else i[i.length]=1;return i}pageIndexChange(e){this.setState({page_index:e.target.value}),this.abs_getDataLimited((parseInt(e.target.value)-1)*this.state.config_table.paging_record,this.state.config_table.paging_record)}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({columns:JSON.parse(this.props.config.columns)}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}readData(e,t){if(e.includes(".")){let i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}checkAll(e){if(this.state.hasCheck){let t=this.state.data;for(let i=0;i<t.length;i++)t[i].hasCheck__=e.target.checked;this.setState({checkAll:e.target.checked,data:t})}}render(){var e,t,i,o,a;let r=this.state.action.length>0,c=this.getHeaderConfig(r);const d=(0,n.RP)("uTable"),h=(0,n.RP)("uTableBodyRow");return"false"===String(this.state.CMD.visible)?null:(0,l.jsx)(d,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,abs_MoveLeft:this.handleMoveLeft,abs_MoveRight:this.handleMoveRight,Header:{data:c,config:{mode:{hasSearch:!0}}},dataEmpty:{isShow:!(null!==(e=this.state)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{modeTitle:"center",isFrozenHeader:!1,isMoveColumn:"true"===String(null===(i=this.props.config)||void 0===i?void 0:i.isMoveColumn),isResize:"true"===String(null===(o=this.props.config)||void 0===o?void 0:o.isResize)}},uPagination:{config:{show:s.ZP.getLang("cTable_Paging_show"),in:s.ZP.getLang("cTable_Paging_in"),jump_to_page:s.ZP.getLang("cTable_Paging_jump_to_page"),results:s.ZP.getLang("cTable_Paging_results")},mode:{paging_min:"MIN"===(null===(a=this.props.config)||void 0===a?void 0:a.paging_mode)},result_total:this.state.total_record,abs_PagingActive:this.abs_PagingActive,abs_setRecordActive:this.recordChangeHandler,paging_index:this.state.page_index,paging_record:this.state.paging_record.map(((e,t)=>({number:e,selected:t===this.state.selectedRecordIndex})))}},children:this.state.data.map(((e,t)=>(0,l.jsxs)(h,{abs_Click:this.handleClickTableRow,children:[!0===r&&(0,l.jsx)(F,{tableContext:this,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,data:this.state.action,value:e,title:"Action"},t),this.state.columns.map(((i,o)=>{var a,n;let r=T.Z[i.inputtype];return void 0===r&&(r=T.Z.ColumnDefault),(0,l.jsx)(r,{tableContext:this,title_parent:i.title,rowData:e,code_col:i.code,index_row:t,title:(null===(a=this.state.lang)||void 0===a||null===(n=a[this.state.lang_select])||void 0===n?void 0:n[i.title])||i.title,config:i.config,data:s.ZP.getOOP(e,i.code),value:e},o)}))]},t)))})}}const U=z,B={structable:"table.col",structable_read:"table.col",data_default:"",format:"#,###.00",decimal_length:2};var Y=i(9425);class H extends a.Component{constructor(e){super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponent:this.props.default}}return""},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.setAdvanced=(e,t)=>{this.setValue(t)},this.setGetInfo=(e,t)=>{t=t[this.props.default.code],this.setValue(t)},this.set=(e,t)=>{let i=s.ZP.getNodeJson(t,this.props.config.structable_read);this.setValue(i,!0)},this.getAdvanced=(e,t)=>this.getValue(),this.get=(e,t)=>{var i=this.props.config.structable.split("|");let o=this.getValue();for(const n of i){var a=n.split(".");if("false"===e.inform)s.ZP.putDataGB(a[0],a[1],o);else s.ZP.putData(a[0],a[1],o,this.props.infoA)}},this.checkValidate=()=>{let e=!1,t=this.getValue();const{request:i,max:o,min:a,max_length:n}=this.props_smooth.validate;if(void 0!==t&&""!==t||"true"!==i.toString()){if(void 0!==t){let i=this.state.value.replace(/\D/g,"");i.length>Number(n)&&Number(n)>0&&encodeURI(i).split(/%..|./).length-1>Number(n)?(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"jCurrency_maxLength"})):t>Number(o)&&null!==o&&void 0!==o&&""!==o?(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"validateNumMax"})):t<Number(a)&&null!==a&&void 0!==a&&""!==a&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"validateNumMin"}))}}else e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"});if(e){var r=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==r&&r.setFormValidateFromComponent(!0,this.props.default)}else this.setState({help_css:"",help_icon:"",help_mess:""});return e},this.reload=(e,t)=>{this.setValue(this.props_smooth.config.data_default)},this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o){let e=o[a];"false"===e&&(o[a]=!1),"true"===e&&(o[a]=!0)}this.setState({CMD:o})},this.onBlur=async()=>{void 0!==this.state.value&&!this.state.value.includes("-.")&&0!==Number(this.state.value)||""===this.state.value||await this.setValue(0),!1===this.checkValidate()&&!0===this.state.isChange&&(this.setState({isChange:!1}),this.onRunRule("enter_tab")),this.onFocus=!1},this.onChange=e=>{let t=e.target;const{selectionStart:i,value:o}=t,{decimal_char:a,int_char:s,decimal_length:n}=this,r=this.state.value;let l=o;if(l.includes("-")&&!1===this.isNegative)return void this.setState({value:r},(()=>{t.setSelectionRange(0,0)}));if(r.includes(a)&&!o.includes(a)&&a){let e=r.lastIndexOf(a);l=o.substring(0,e)+a+o.substring(e,o.length),l===a&&(l="")}let c=r,d=o.lastIndexOf(a);o.indexOf(a)!==o.lastIndexOf(a)&&a?d=c.length-n:(c=(0,Y.Nx)(l,n,s,a)||"",d=i-(o.length-c.length),1===i?d=1:i>o.lastIndexOf(a)&&(d+=1));let h=c.replace(/\D/g,"");const u=this.props_smooth.validate.max_length;h.length>Number(u)&&Number(u)>0&&(c=r),this.setState({value:c,isChange:!0},(()=>{t.setSelectionRange(d,d)}))},this.renderMess=e=>{switch(e){case"validateNumMin":return s.ZP.getLang(e).replace("{count}",this.props_smooth.validate.min);case"validateNumMax":return s.ZP.getLang(e).replace("{count}",this.props_smooth.validate.max);case"validateRequest":default:return s.ZP.getLang(e);case"jCurrency_maxLength":return s.ZP.getLang(e).replace("@{max_length}",this.props_smooth.validate.max_length)}},this.props_smooth=this.getConfigSmooth(this.props),this.int_char="",this.decimal_char="",this.decimal_length=0,this.decimal_char="",this.decimal_length=0,this.isNegative=!1,(void 0===(0,Y.XG)(this.props_smooth.validate.min)||(0,Y.XG)(this.props_smooth.validate.min)<0)&&(this.isNegative=!0),this.state={help_css:"",help_icon:"",help_mess:"",value:"",CMD:{},isChange:!1},this.onFocus=!1,this.data_debug={}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent()),this.setValue(this.props_smooth.config.data_default)}onRunRule(e){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}getConfigSmooth(e){let t=s.ZP.cloneJson(e);return t.config=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.Z)({},B);for(let i in t)void 0!==e[i]&&(""!==t[i]&&""===e[i]||(t[i]=e[i]));return t||{}}(t.config),t.validate.max_length||(t.validate.max_length=16),t}getValue(){return(0,Y.XG)(this.state.value,this.int_char,this.decimal_char)}setValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props_smooth.config.data_default,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.isNegative;e+="";const{decimal_char:i,int_char:o,decimal_length:a}=this;let s=(0,Y.Nx)(e,a,o,i);(void 0===s||s.includes("-")&&!1===t)&&(s=""),0===Number(s)&&""!==s&&(s=(0,Y.Nx)(0,a,o,i)),this.setState({value:s,help_css:"",help_icon:"",help_mess:""},(()=>{this.onRunRule("on_change")}))}renderDebug(){if(s.ZP.isDebug()){void 0===this.data_debug&&(this.data_debug={});let e=(this.props.config.structable||"").split(".")[1],t=this.data_debug.data_cpn;return null===t&&(t="NULL"),void 0===this.props.config.cdlist&&(this.props.config.cdlist={}),(0,l.jsx)(a.Fragment,{children:(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${e}|:|${t}|`})})}}render(){if(!1===this.state.CMD.visible)return null;const e=(0,n.RP)("uInput");return(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChange,abs_Blur:this.onBlur})})}getConfigTemplate(){return{config:{default:{title:this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.props_smooth.validate.request},cmd:{disable:this.state.CMD.disabled+""==="true",visible:!0,error:{message:this.renderMess(this.state.help_mess),type:""}},mode:{textAlign:"right"}},mode:{readOnly:"true"===String(this.props.config.readOnly)},value:this.state.value}}}const V=H,W={structable:"",structable_read:"",cdlist:{},data_default:"",data_mode:"query",query_data:"",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:'[\n        {\n            "c_cdlist": {\n                "cdid": null,\n                "caption": "val_1"\n            }\n        },\n        {\n            "c_cdlist": {\n                "cdid": "id_2",\n                "caption": "val_2"\n            }\n        }\n        ,\n        {\n            "c_cdlist": {\n                "cdid": "id_3",\n                "caption": "val_3"\n            }\n        }\n    ]',key_selected:"c_cdlist.cdid",useAction:"false",isAutoDefault:"true",isLabel:"false",isHasDataNull:"false"},G=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.Z)({},W);for(let i in t)e[i]&&(""!==t[i]&&""===e[i]||(t[i]=e[i]));return t||{}},J={ui:{},data:{}},q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t in J)void 0===e[t]&&(e[t]={});return e},K={c_cdlist:{cdid:"select_null",caption:"All"}},X=e=>{if(!e)return[];if(void 0!==e.data_mode){let t=[],{query_data:i,json_data:o}=e;if("cdlist"===e.data_mode){let i="",o="";void 0!==e.cdlist&&void 0!==e.cdlist.cdgrp&&void 0!==e.cdlist.cdname&&(i=e.cdlist.cdgrp,o=e.cdlist.cdname),t=s.ZP.data_cdList(i,o)||[]}else t=s.ZP.getDataLimited(i,0,99999)||[],t=t.data||[];let a=s.ZP.parseJson(o).concat(t)||[];return"true"===e.isHasDataNull&&a.unshift($(e)),a=ee(a),a||[]}return[]},$=e=>{if("cdlist"===e.data_mode)return K;{var t,i;let o=null===(t=e.key_selected)||void 0===t?void 0:t.split("."),a=null===(i=e.selected_view_format)||void 0===i?void 0:i.split(".");o[2]=a[a.length-1];let s={};return s[o[0]]={},s[o[0]][o[1]]="select_null",s[o[0]][o[2]]="All",s}},ee=e=>{for(let t=0;t<e.length;t++)e[t].key_jselect=t;return e},te=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(arguments.length>2?arguments[2]:void 0){case"ArrowDown":e<t&&(e+=1);break;case"ArrowUp":e>0&&(e-=1)}return e<0&&(e=0),e>=t&&(e=t-1),e},ie=(e,t)=>{let i=e.split(" "),o=!1;return i.forEach((i=>{if("@"===i[0]){let a=i.substring(1),n=s.ZP.getOOP(t,a);if("c_cdlist.caption"===a){let e=s.ZP.getOOP(t,"c_cdlist.mcaption");null!==e&&void 0!==e&&e[s.ZP.getLangKey()]&&(n=null===e||void 0===e?void 0:e[s.ZP.getLangKey()])}""===n&&(o=!0),e=e.replace(i,n)}})),o&&(e=e.replace(" - ","")),e},oe=(e,t,i)=>{if(void 0===e||void 0===t||void 0===i)return[];if(null===t||null===i)return[];if(""===e||""===i)return[];let o=(e+"").split(";"),a=[];return t.forEach(((e,t)=>{let n=s.ZP.getOOP(e,i)+"";null!==n&&void 0!==n&&o.includes(n+"")&&a.push(t)})),a},ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i="";for(let o=0;o<t.length;o++){const a=t[o].code||"";i+=s.ZP.getOOP(e,a)}return i},se=(e,t,i)=>{let o="";for(let a=0;a<e.length;a++){a>0&&(o+=";");const n=e[a];o=s.ZP.getOOP(t[n],i)}return o},ne={structable:"",structable_read:"",cdlist:{},data_default:"",data_mode:"query",query_data:"",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n            {\n                "title": "Name",\n                "code": "col.col_name"\n            },\n            {\n                "title": "ID",\n                "code": "col.col_id"\n            }\n        ]',col_format:"@c_cdlist.caption",json_data:'[\n            {\n                "col": {\n                    "col_name": "val_1",\n                    "col_id": "val_2"\n                }\n            },\n            {\n                "col": {\n                    "col_name": "val_3",\n                    "col_id": "val_4"\n                }\n            }\n        ]',key_selected:"c_cdlist.cdid",useAction:"false",isAutoDefault:"true",isLabel:"false",isHasDataNull:"false"};const re=class{constructor(e,t,i){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=e=>{this.property.cmd.disabled=e},this.getCMD_enable=()=>this.property.cmd.disabled,this.getConfig=()=>{let e=this.property.config,t=(0,o.Z)({},ne);for(let i in t)e[i]&&(""!==e[i]&&""===e[i]||(t[i]=e[i]));return t||{}},this.getDefault=()=>this.property.default,this.property={inputType:e,config:i,default:t,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class le extends a.Component{constructor(){super(...arguments),this.convertMaskToValue=(e,t)=>{this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT");let i=t.mask;if(this.isDate=i.includes("DD")&&i.includes("MM")&&i.includes("YY")||!0===(null===t||void 0===t?void 0:t.isDate),String(i).startsWith("$")&&String(i).endsWith("$")&&(i=s.ZP.getParameterSystem(i.replace(/\$/g,""))),this.isDate){if(!e&&0!==e)return"";if(void 0!==this.dateFormat){var o;let e=(null===(o=i)||void 0===o?void 0:o.split(" "))||[];if(e.length>=1){let t="";for(let i=0;i<e.length;i++){var a,n,r;null!==(a=e[i])&&void 0!==a&&a.includes("DD")&&null!==(n=e[i])&&void 0!==n&&n.includes("MM")&&null!==(r=e[i])&&void 0!==r&&r.includes("YY")?t+=""===t?this.dateFormat:" "+this.dateFormat:t+=""===t?e[i]:" "+e[i]}i=t}else i=this.dateFormat}return Q.sx(Q.xY(e),i,t.mask_mode_time)}return Q.Ui(e,i)},this.getValue=(e,t)=>this.convertMaskToValue(e,t)||""}}const ce=le;class de extends a.Component{constructor(){super(...arguments),this.getValue=e=>e}}const he={ColumnMask:ce,ColumnDefault:de,columnDefault:de,columnMask:ce};class ue extends a.Component{constructor(e){var t;super(e),t=this,this.convertStringWithContext=e=>{let t=s.ZP.getlistCodeContext(e);for(let i=0;i<t.length;i++){const o=t[i];let a=s.ZP.context_get(o.code);void 0!==a&&(e=e.replace(o.key,a))}return e},this.reloadData=()=>{let e=X(this.config);this.setState({datas:e,datas_view:e},(async()=>{await this.setSelected(oe(this.state.val_select_tmp,e,this.config.key_selected)||[])}))},this.getConfigSmooth=e=>{let t=s.ZP.cloneJson(e);return t.config=G(t.config),t.config.data_default=this.convertStringWithContext(t.config.data_default),t.config.json_data=this.convertStringWithContext(t.config.json_data),t},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.isRunRule=(e,t)=>{if(!e)return!1;if("*"===e)return!0;return e.split(";").includes(t)},this.setCMD=(e,t)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),t);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.toolAutoValue=()=>{let{datas:e}=this.state,t=e.length>1?[1]:[0];"false"!==String(this.state.CMD.disabled)&&"false"!==String(this.state.CMD.visible)||this.setSelected(t)},this.set=async(e,t)=>{this.data_debug.data_form=t;let{structable_read:i,key_selected:o}=this.config,{datas:a}=this.state,s="",n=[];if(t&&i){let e=i.split(".");if(2===e.length){if(!t[e[0]]||void 0===t[e[0]][e[1]])return void this.setSelectedDefault();if(s=t[e[0]][e[1]],this.data_debug.data_cpn=s,this.last_selected_data=s,n=oe(s,a,o),0!==n.length){let{compare_info:i}=this.state;return t[e[0]][e[1]]!==i.cache_value?i.cache_value=this.getSelectedView(n):i.is_change_value=!1,await this.setSelected(n),this.setState({val_select_tmp:s,compare_info:i}),void this.onRunRule("update")}}else{let i=t;for(let t=0;t<e.length;t++)if(t===e.length-1){if(void 0===i||null===i[e[t]])return void this.setSelectedDefault();if(s=i[e[t]],this.data_debug.data_cpn=s,this.last_selected_data=s,n=oe(s,a,o),0!==n.length){let{compare_info:o}=this.state;return i[e[t]]!==o.cache_value?o.cache_value=this.getSelectedView(n):o.is_change_value=!1,await this.setSelected(n),this.setState({val_select_tmp:s,compare_info:o}),void this.onRunRule("update")}}else void 0!==i&&null!==i[e[t]]&&(i=i[e[t]])}}void 0===this.data_debug.data_cpn&&(this.data_debug.data_cpn="undefined"),this.setState({list_selected:[],val_select_tmp:s,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jSelect_NotFindValue"})},this.setAdvanced=async(e,t)=>{let i=e.component_action||"",{code:o}=this.props.default,a=i.split(";").includes(o);if(void 0!==t&&""!==t){var s,n;let{key_selected:e}=this.config,{datas:i}=this.state,o=[];o=oe(t,i,e);let r=(null===(s=o)||void 0===s?void 0:s.toString())!==(null===(n=this.state.list_selected)||void 0===n?void 0:n.toString());if(0!==o.length)await this.setSelected(o),r&&!a&&this.onRunRule("enter_tab");else{let e=[0];0!==e.length&&(await this.setSelected(e),r&&!a&&this.onRunRule("enter_tab"))}}else{let e=[0];0!==e.length&&(await this.setSelected(e),a||this.onRunRule("enter_tab"))}},this.setGetInfo=async(e,t)=>{t=t[this.props.default.code];let i=e.component_action||"",{code:o}=this.props.default,a=i.split(";").includes(o);if(void 0!==t&&""!==t){var s,n;let{key_selected:e}=this.config,{datas:i}=this.state,o=[];o=oe(t,i,e);let r=(null===(s=o)||void 0===s?void 0:s.toString())!==(null===(n=this.state.list_selected)||void 0===n?void 0:n.toString());if(0!==o.length)await this.setSelected(o),r&&!a&&this.onRunRule("enter_tab");else{let e=[0];0!==e.length&&(await this.setSelected(e),r&&!a&&this.onRunRule("enter_tab"))}}else{let e=[0];0!==e.length&&(await this.setSelected(e),a||this.onRunRule("enter_tab"))}},this.getAdvanced=e=>{let{list_component:t}=e,{code:i}=this.props_smooth.default;if(this.isRunRule(t,i)){let{list_selected:e,datas:t,get_data_format:i,structable:o}=this.state,a=se(e,t,i);if(2===o.split(".").length)return a}},this.getInfoErrror=()=>{var e,t,i;return""!==this.state.help_mess&&!0===this.checkValidate()&&"jSelect_NotFindValue"!==this.state.help_mess?(this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:(null===(e=this.props_smooth.lang)||void 0===e||null===(t=e.ui)||void 0===t||null===(i=t[s.ZP.getLangKey()])||void 0===i?void 0:i[this.props_smooth.default.name])||this.props_smooth.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}):""},this.setDataGB=async(e,t)=>{let{datas:i,key_selected:o,list_selected:a,selected_view:n}=this.state,{json_data:r}=this.props_smooth.config;t=s.ZP.parseJson(r).concat(t)||[],t=ee(t);let l=s.ZP.getOOP(i[a[0]],o);this.setState({datas:t,datas_view:t,list_selected:a,selected_view:n},(()=>{let e=this.state.val_select_tmp||l,t=oe(e,this.state.datas,o);e&&0!==t.length?(this.state.val_select_tmp="",this.setSelected(t)):this.setSelected([0])}))},this.get=(e,t)=>{let i=this.props_smooth.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.getAdvanced=(e,t)=>{let{list_selected:i,datas:o,get_data_format:a}=this.state;return se(i,o,a)},this.runFO=(e,t)=>{t.action&&_.ZP.runActionWithContext(t.action,{},this.props.infoA,this.props.infoA_parent,this.props.default),t.txFo&&_.ZP.runFoWithContext(t.txFo,{},this.props.infoA,this.props.infoA_parent,this.props.default)},this.checkValidate=()=>{let e=!1,t=this.state.list_selected;if(void 0!==t&&void 0!==this.state.validate.request&&!e&&this.state.validate.request){let{list_selected:i,datas:o,get_data_format:a}=this.state,s=se(i,o,a);0!==t.length&&null!==s&&""!==s||(e=!0,this.state.help_mess="validateRequest",this.setState({help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"}))}if(e){let e=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==e&&e.setFormValidateFromComponent(!0,this.props.default)}else{this.clearError();let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(e.buildValidateForm(!1),e.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.buildValidateForm(!1)}}))}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setSelectedDefault(),this.setState({search_input:"",datas_view:this.state.datas})},this.setDataDefault=()=>{this.setSelectedDefault()},this.onEvent=e=>{switch(e){case"closeTable":this.setState({isOpen:!1});break;case"openTable":!1===this.state.isOpen&&this.setState({isOpen:!0})}},this.onSelectedRow=async(e,t)=>{let{is_multi_select:i,list_selected:o}=this.state,a=[t];if(i){a=o;let e=a.indexOf(t);e>-1?a.splice(e,1):a.push(t)}await this.setSelected(a,t,!0),await this.checkValidate(),await this.onRunRule("enter_tab")},this.onRunRule=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"on_change",i=s.ZP.getFormAppAuto(t.props_smooth.infoA.key_form);void 0!==i&&i.runRuleFunction(t.props_smooth.default,{},t.props_smooth.infoA_parent,e)},this.setSelectedDefault=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"enter_tab",{datas:i,data_default:o}=t.state,{key_selected:a}=t.config,s=oe(o,i,a);0===s.length&&i.length>0&&"false"!==t.props_smooth.config.isAutoDefault&&(s=[0],t.state.search_input=""),await t.setSelected(s),t.onRunRule(e||"enter_tab")},this.setSelected=(e,t,i)=>{let o=this.getSelectedView(e),{compare_info:a}=this.state;a.cache_value!==o?(a.change_value=o,a.is_change_value=!0):a.is_change_value=!1;let s=this.state.val_select_tmp;i&&(s=""),this.setState({list_selected:e,selected_view:o,pos_row:t,isOpen:!1,val_select_tmp:s,compare_info:a},(()=>{this.clearError(),this.onRunRule()}))},this.getSelectedView=e=>{let{selected_view_format:t,datas:i,table_format:o,is_multi_col:a}=this.state,s="";for(let n=0;n<e.length;n++){n>0&&(s+=";");let r=i[e[n]],l=ie(t,r);if(a){let e=o[this.props.config.index_view_value||0],t=he[e.inputtype];void 0===t&&(t=he.columnDefault),s+=(new t).getValue(l,e.config)}else s+=l}return s},this.onChangeSearch=e=>{let{datas:t,table_format:i,is_multi_col:o,col_format:a,compare_info:n}=this.state,r=e.target.value,l=t,c=s.ZP.getArrayWithRegex(a,"@([^\\s]*)");""!==r&&(l=t.filter((e=>{let t="";return t=ae(e,!0===o?i:c),s.ZP.searchPerfect(r,t)}))),this.setState({search_input:r,datas_view:l,pos_row:-1,compare_info:n})},this.onKeyBoard=e=>{let{pos_row:t,datas_view:i}=this.state;switch(e.key){case"ArrowDown":this.setState({pos_row:te(t,i.length,"ArrowDown")},(()=>{this.refs.table_jselect&&this.refs.table_jselect.focus()}));break;case"ArrowUp":this.setState({pos_row:te(t,i.length,"ArrowUp")},(()=>{this.refs.table_jselect&&this.refs.table_jselect.focus()}));break;case"Enter":i[t]&&this.onSelectedRow(i[t].key_jselect);break;case"Delete":this.setSelected([],-1);break;case"Backspace":break;default:this.refs.search_jselect&&this.refs.search_jselect.focus()}},this.getDataOOP=(e,t)=>0===this.state.list_selected.length?void 0:this.state.datas[this.state.list_selected[0]],this.onBlur=()=>{this.checkValidate()},this.setValidate=(e,t)=>{let{validate:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),t);i.request!==o.request&&this.setState({validate:o})},this.getOptionConfig=e=>e.map(((e,t)=>{if(this.state.is_multi_col){return{data:this.state.table_format.map((t=>{let i=he[t.inputtype];return void 0===i&&(i=he.columnDefault),(new i).getValue(s.ZP.getOOP(e,t.code),t.config)})),value:e.key_jselect,selected:this.state.list_selected.includes(e.key_jselect)}}var i;return{title:ie(this.props_smooth.config.col_format,e),value:e.key_jselect,selected:this.state.list_selected.includes(e.key_jselect),title_hover:this.props.config.cdlist?"CodeID: "+(null===e||void 0===e||null===(i=e.cdlist)||void 0===i?void 0:i.cdid)+" - CodeName: "+this.props.config.cdlist.cdname+" - CodeGroup: "+this.props.config.cdlist.cdgrp:void 0}})),this.abs_Change=async(e,t)=>{await this.onSelectedRow(e,e),this.checkValidate()},this.getInfoCompare=(e,t)=>{let{lang_compare:i,compare_info:o,isCompare:a}=this.state;if(a){let e=i[this.state.lang_select];if(o.is_change_value){let t=e.replace("{value_old}","");return t=t.replace("{value_new}",""),{is_change_value:o.is_change_value,compareInfo:{component_code:this.props_smooth.default.code,component_name:this.props_smooth.default.name,message:{title_before:o.cache_value,title_status:t,title_after:o.change_value}}}}}return{}},this.clearCacheCompare=()=>{let{compare_info:e}=this.state;e.cache_value=void 0,e.is_change_value=!1,this.setState({compare_info:e})},this.renderThisComponent=()=>{const e=(0,n.RP)("uSelectItem");if("true"===String(this.props.config.isLabel)){const e=(0,n.RP)("uLabel");return(0,l.jsx)(e,{dataFull:{config:{default:{title:this.getSelectedView(this.state.list_selected)||"",class:this.props_smooth.default.class},cmd:{visible:"true"===String(this.state.CMD.visible)}}}})}return(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_Change:this.abs_Change,abs_search:this.onChangeSearch})})},this.renderMess=e=>{switch(e){case"validateNumMin":return s.ZP.getLang(e).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(e).replace("{count}",this.state.validate.max);case"validateRequest":default:return s.ZP.getLang(e);case"jSelect_NotFindValue":return s.ZP.isDebug()?s.ZP.getLang(e):""}},this.propertyConstructor=new re(e.inputType,e.default,e.config),this.props_smooth=this.getConfigSmooth(this.props),this.component_code=s.ZP.autoID();let{config:i,lang:a}=this.props_smooth;this.config=G(i),this.lang=q(a);let{table_format:r,is_multi_col:c,is_multi_select:d,selected_view_format:h,get_data_format:u,col_format:p,key_selected:f,structable:g,structable_read:m}=this.config;this.data_default="",void 0!==this.props_smooth.config.data_default&&(this.data_default=this.props_smooth.config.data_default);let v=this.props_smooth.validate;void 0===v&&(v={}),this.callform_detail="",this.callform="";let b="true"===String(this.props_smooth.validate.is_compare),y={},A={};void 0!==this.props_smooth.lang&&(y=void 0!==this.props_smooth.lang.title?this.props_smooth.lang.title:this.props_smooth.lang,void 0!==this.props_smooth.lang.lang_compare&&(A=this.props_smooth.lang.lang_compare));let D=X(this.config);this.state={isCompare:b,structable:g,structable_read:m,data_default:this.data_default,value:this.data_default,compare_info:{cache_value:void 0,is_change_value:!1},val_select_tmp:"",lang_compare:A,lang:y,lang_select:s.ZP.getLangKey(),validate:v,infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",datas:D,datas_view:D,is_multi_col:"false"!==c,table_format:("false"===c?r:s.ZP.parseJson(r))||[],col_format:p,get_data_format:u,key_selected:f,selected_view:"",selected_view_format:h,list_selected:[],pos_row:-1,search_input:"",isOpen:!1,is_multi_select:"false"!==d,CMD:this.propertyConstructor.getCMD(),max_item_length:50,hasErrorInForm:!1},this.data_debug={}}UNSAFE_componentWillMount(){this.data_view_template=this.getOptionConfig(this.state.datas_view)}componentDidMount(){this.setSelectedDefault(),setTimeout((()=>{s.ZP.FromAddComponent(this.props_smooth.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}UNSAFE_componentWillUpdate(e,t){this.state.datas_view===t.datas_view&&this.state.lang_select===t.lang_select||(this.data_view_template=this.getOptionConfig(t.datas_view))}componentDidUpdate(e){}readData(e,t){let{list_selected:i,datas:o,get_data_format:a}=this.state,n=se(i,o,a);""!==this.state.help_mess&&(n=null);let r=e.split(".");2===r.length&&(void 0===t||"true"===t?s.ZP.putData(r[0],r[1],n,this.props_smooth.infoA):"false"===t?s.ZP.putDataGB(r[0],r[1],n):s.ZP.putDataGB(r[0],r[1],""))}getConfigTemplate(){var e,t,i,o,a;let n=this.props_smooth.default.name;return{config:{default:{search:{placeholder:s.ZP.getLang("jselect_search")},placeholder:s.ZP.getLang("jselect_placeholder"),data_status:s.ZP.getLang("jselect_no_result"),title:(null===(e=this.props_smooth.lang)||void 0===e||null===(t=e.ui)||void 0===t||null===(i=t[s.ZP.getLangKey()])||void 0===i?void 0:i[n])||(null===(o=this.state.lang)||void 0===o?void 0:o[s.ZP.getLangKey()])||n,type:"",class:this.props_smooth.default.class,required:this.state.validate.request,title_hover:s.ZP.isDebug()&&this.props.config.cdlist?"CodeName: "+this.props.config.cdlist.cdname+" - CodeGroup: "+this.props.config.cdlist.cdgrp:void 0,component_code:this.component_code},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:"true"===String(this.state.CMD.visible),error:{message:"jSelect_NotFindValue"===this.state.help_mess?"":this.renderMess(this.state.help_mess),type:""}},mode:{moreColumn:this.state.is_multi_col},column:this.state.table_format},data:null===(a=this.data_view_template)||void 0===a?void 0:a.map((e=>{e.selected=e.value===this.state.list_selected[0];let t=JSON.parse(JSON.stringify(e));return t.title_hover=s.ZP.isDebug()?e.title_hover:void 0,t})),input_value:this.getSelectedView(this.state.list_selected)||"",search_value:this.state.search_input||""}}render(){const e=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(e,{class:this.props.default.class_ofgroup+("false"===String(this.state.CMD.visible)?" malibu-invisible":""),children:[this.renderThisComponent(),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):this.renderThisComponent()}}const pe=ue;var _e=i(4200);const fe=(e,t,i)=>{t=t.replace("_","0");let o=(0,Q.w5)(t,e,i);return(0,Q.sx)(o,e,i)},ge={a:/[a-zA-Z]/,9:/\d/,h:/\d/,H:/\d/,m:/\d/,s:/\d/,"*":/./,_:/[a-zA-Z\d]/,L:/[a-zA-Z\d]/,".":/./,0:/\d/,z:/[a-zA-Z]/,Z:/[a-zA-Z ]/,A:/[A-Za-z0-9\\_]/},me={"#":"_"},ve={0:{status:!0,reg_remove:/[^\d/]/g},L:{status:!0,reg_remove:/[^a-zA-Z\d]/g},z:{status:!0,reg_remove:/[^a-zA-Z]/g},Z:{status:!0,reg_remove:/[^a-zA-Z ]/g},".":{status:!0,reg_remove:""},A:{status:!0,reg_remove:/[^A-Za-z0-9\\_]/g}},be={EMAIL:{regex_validate:/^[\w-.]+@([\w-]+.)+[\w-]{2,4}$/,regex_lang:"jMaskInput_WrongFormat"},EMAIL_MULTI:{regex_validate:/^[\w-.]+@([\w-]+.)+[\w-]{2,4}$/,regex_lang:"jMaskInput_WrongFormat",isMulti:!0}},ye={"-":".{100}",EMAIL:".{100}",EMAIL_MULTI:".{500}"},Ae=e=>me[e],De=e=>ge[e],ke=e=>{let t=e[0];return ve[t]},Oe=e=>{var t,i;if(!e)return!1;let o=e[0];if(!0!==(null===(t=ve[o])||void 0===t?void 0:t.status))return!1;let a=!0;for(const s of e)e[0]!==s&&(a=!1);return!0===(null===(i=ke(o))||void 0===i?void 0:i.status)&&a},we=(e,t)=>{let i=[];const o=/(\\.|.)/g;let a;for(;null!==(a=o.exec(e));){a.index===o.lastIndex&&o.lastIndex++;const e=a[0],s=1===e.length?"regex":"const";let n={type:s,key:e};"regex"===s?De(e)?"date"===t&&/[^/:]/.test(e)?(n.reg=De("9"),n.value=e):(n.reg=De(e),n.value="_"):"date"===t&&/[^/:]/.test(e)?(n.reg=De("9"),n.value=e):Ae(e)?(n.value=Ae(e),n.type="static"):(n.value=e,n.type="const"):n.value=e[1],i.push(n)}return i},Ce=(e,t)=>{let i="";for(const o of e)i+="date"===t?o.key:o.value;return i},xe=(e,t)=>{let i="";for(const o of e)i+=o.key.includes("\\")?o.value:o.key;return i},Se=e=>{let t=/\${([^}]+)}/gm.exec(e);if(null!==t)try{let i=s.ZP.context_get(t[1])||"";e=e.replace(t[0],i)}catch(i){}return e},Me=(e,t,i,o,a,s)=>{if(!e||!t||!i)return"";let n="";if(!e)return"";switch(i){case"default":for(const o in t){let i=e[o];if("regex"===t[o].type){if(!1===t[o].reg.test(i))return"";n+=i}else"static"===t[o].type&&(n+=i)}break;case"date":let i=Ce(t);if("string"===o)n=a&&""!==a?(0,Q.Al)(e,i,a,s):(0,Q.w5)(e,i,s);else n=(0,Q.w5)(e,i,s);break;default:n=e}return n||0===n?n:""},Pe=function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!t||!i)return"";let a="";if(!e)return"";switch(i){case"default":for(const i in t){let s=e[i];"regex"===t[i].type?!1===t[i].reg.test(s)?a+=" ":a+=s:("static"===t[i].type||"const"===t[i].type&&o)&&(a+=s)}break;case"date":break;default:a=e}return a||0===a?a:""},Te=(e,t,i,o,a)=>{if(!e&&0!==e||!t||!i)return"";let s="";const n=xe(t);switch(i){case"default":let i=0;for(const a in t)if("regex"===t[a].type)if(Oe(n))s+=e[i]||"",i++;else{if(e[i]&&t[a].reg.test(e[i]))s+=e[i];else{if("OPTIMISTIC"!==o)return"";s+=t[a].value}i++}else"static"===t[a].type?(s+=t[a].value,t[a].value===e[i]&&i++):s+=t[a].value;break;case"date":let r=Ce(t);s=(0,Q.sx)(e,r,a);break;default:s=e}return s||""},Ie=(e,t,i,o,a,s,n)=>{let r=Me(e,t,i,a,s,n);return null!==o&&void 0!==o&&o.length?Te(r,o,i):r},Ne=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,n=e;return null!==o&&void 0!==o&&o.length&&(n=Me(e,o,i,s)),Te(n,t,i,a,s)},Fe=()=>["SUN","MON","TUE","WED","THU","FRI","SAT"].map(((e,t)=>({title:e,type:"gray"}))),Le=e=>{e||(e=window.moment.utc().toDate().getMonth()+1);return["January","February","March","April","May","June","July","August","September","October","November","December"].map(((t,i)=>({title:t,selected:e-1===i})))},Ee=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1900,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2100,i=[];if(e<=t)for(let o=e;o<=t;o++)i.push(o);return i},je=e=>{let t=window.moment.utc(e).toDate().getMonth()+1,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];(e=>e%400===0||e%100!==0&&e%4===0)(window.moment.utc(e).toDate().getFullYear())&&i[2]++;let o=[];for(let a=1;a<=i[t];a++)o.push(a);return o},Ze=(e,t)=>{e||(e=Date.parse(window.moment.utc().toDate()));let i=window.moment.utc(e).toDate(),o=window.moment.utc((0,_e.X7)(e,{M:-1})).toDate(),a=window.moment.utc((0,_e.X7)(e,{M:1})).toDate(),s=Date.parse(o),n=Date.parse(a),r=je(s),l=je(e),c=je(n),d=window.moment.utc([i.getFullYear(),i.getMonth(),1]).toDate(),h=window.moment.utc([i.getFullYear(),i.getMonth(),l.length]).toDate(),u=r.slice(r.length-d.getDay(),r.length),p=c.slice(0,6-h.getDay()),_=u.map((e=>{let t=String(e),a="gray",n=window.moment.utc(new Date(s).setDate(e)).valueOf();return e===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()&&(a="primary"),{title:t,type:a,value:n}})),f=l.map((t=>{let o=String(t),a="",s=window.moment.utc(new Date(e).setDate(t)).valueOf();return t===i.getDate()&&(a="primary"),{title:o,type:a,value:s}})),g=p.map((e=>{let t=String(e),o="gray",s=window.moment.utc(new Date(n).setDate(e)).valueOf();return e===i.getDate()&&a.getMonth()===i.getMonth()&&a.getFullYear()===i.getFullYear()&&(o="primary"),{title:t,type:o,value:s}})),m=_.concat(f);return m=m.concat(g),m},Re={structable:"",structable_read:"",data_default:"",data_type:"edit",component_title:"",mask_format:"",mask_data_format:"",value_type:"all",auto_delete:"true",mask_mode:"default",content_style:"",format_value_type_string:"",min_year:"",max_year:"",hasSuggest:!1,keyLoadCache:"",PK_key:"",moreInformation_key:""};const Qe=class{constructor(e,t,i){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=e=>{this.property.cmd.disabled=e},this.getCMD_enable=()=>this.property.cmd.disabled,this.combinePrevConfig=e=>{let t=e||this.property.config,i=(0,o.Z)({},Re);for(let o in i)t[o]&&(""!==t[o]&&""===t[o]||(i[o]=t[o]));return i||{}},this.getDefault=()=>this.property.default,this.property={inputType:e,config:i,default:t,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class ze extends a.Component{constructor(e){var t;super(e),t=this,this.getComponentContructor=(e,t)=>{let i=this.buildPropsSmooth(t);return{props_smooth:i,state_smooth:this.buildStateSmooth(i)}},this.buildPropsSmooth=e=>{let t=s.ZP.cloneJson(e);if(t.config=this.propertyConstructor.combinePrevConfig(e.config),"date"===t.config.mask_mode&&void 0!==this.dateFormat){let e=t.config.mask_format.split(" ");if(e.length>=1){let s="";for(let t=0;t<e.length;t++){var i,o,a;null!==(i=e[t])&&void 0!==i&&i.includes("DD")&&null!==(o=e[t])&&void 0!==o&&o.includes("MM")&&null!==(a=e[t])&&void 0!==a&&a.includes("YY")?s+=""===s?this.dateFormat:" "+this.dateFormat:s+=""===s?e[t]:" "+e[t]}t.config.mask_format=s}else t.config.mask_format=this.dateFormat}else String(t.config.mask_format).startsWith("$")&&String(t.config.mask_format).endsWith("$")&&(t.config.mask_format=s.ZP.getParameterSystem(t.config.mask_format.replace(/\$/g,"")));var n;t.config.const_mask_format=t.config.mask_format,t.config.mask_format=(n=t.config.mask_format,ye[n]||n),t.config.mask_format=(e=>{for(const t in ge){let i,o=new RegExp(`\\${t}{(\\d+)}`,"g");for(;null!==(i=o.exec(e));){i.index===o.lastIndex&&o.lastIndex++;let a="";for(let e=0;e<Number(i[1]);e++)a+=t;e=e.replace(i[0],a)}}return e})(t.config.mask_format);let r="";""!==t.config.data_default&&(r=Se(t.config.data_default),r="HH:mm"===t.config.format_value_type_string?Q.ec(r,t.config.format_value_type_string,t.config.mask_mode_time):Number(r)||"string"!==t.config.value_type||-1!==r.indexOf("libDate_cal")?((e,t)=>{let i=e,o=/libDate_cal\((.*),(.*)\)/gm.exec(i);if(null!==o)try{i=(0,_e.X7)((0,Q.xY)(o[1]),JSON.parse(o[2]))}catch(n){}let a=/JF_DATE\.([^(]+)\(([^)]*)\)/gm.exec(i);if(null!==a)try{e=s.ZP.persist_convertCondition(e);let t=a[1],o=a[2].split(",");i=_e.ZP[t].apply(null,o)}catch(n){}return i})(r,t.config.format_value_type_string):Q.cI(r,t.config.format_value_type_string)),void 0!==r&&null!==r||(r="");let l=2100,c=1900;if("date"===this.propertyConstructor.property.config.mask_mode){let e=Se(t.config.max_year),i=Se(t.config.min_year);(e||0===e)&&(l=Number(e)?new Date(Number(e)).getFullYear():new Date(e).getFullYear()),(i||0===i)&&(c=Number(i)?new Date(Number(i)).getFullYear():new Date(i).getFullYear())}return t.config.data_default=r,t.config.max_year=l,t.config.min_year=c,t},this.buildStateSmooth=e=>{let t=e.config,i=we(t.mask_format,t.mask_mode),o=we(t.mask_data_format,t.mask_mode),a=Ce(i,t.mask_mode),n=t.mask_mode,r={status:!1,reg_remove:""};if(Oe(t.mask_format)){let e=ke(t.mask_format);void 0!==e&&(r.status=e.status,r.reg_remove=e.reg_remove)}let l=a,c=Date.parse(new Date),d={mounth_data:Le(),year_data:Ee(e.config.min_year,e.config.max_year),day_data:Fe(),day_of_mounth_data:Ze(c,c),date_view:c};return{isLookup:"true"===this.props.config.isLookup,error_input:!1,lang_select:s.ZP.getLangKey(),component_title:this.props.default.name||"",CMD:this.propertyConstructor.getCMD(),format_value_type_string:e.config.format_value_type_string,value:"",mask_value:"",date_selected_cache:0,content_style:e.config.content_style,value_type:e.config.value_type,mask_mode:n,mask_format:l,mask_regs:i,mask_regs_to:o,mask_placeholder:a,free_style:r,date_picker:d,max_year:e.config.max_year,min_year:e.config.min_year,validate:e.validate,hasSuggest:"true"===e.config.hasSuggest,keyLoadCache:e.config.keyLoadCache,moreInformation_key:e.config.moreInformation_key,PK_key:e.config.PK_key}},this.getInfoErrror=()=>{var e;let{help_mess:t}=this.state;return t?(this.setState({hasErrorInForm:!0}),{info:this.getErrorLang(this.state.help_mess),key:(null===(e=this.state.lang)||void 0===e?void 0:e[this.state.lang_select])||this.props_smooth.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}):""},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.getDataOOP=(e,t)=>this.data_select,this.getAdvanced=(e,t)=>{let{format_value_type_string:i}=this.state;return this.maskInputGet(i)},this.setAdvanced=(e,t)=>{if(e.codeHidden){if(e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(void 0!==this.props.config.data_view)var i="";void 0!==this.props.config.data_value&&(i=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),"date"===this.state.mask_mode&&(i=Q.xY(i)),this.maskInputSet(i,"enter_tab",void 0,void 0,void 0)}}else e.list_component&&(null!==t&&void 0!==t||(t=""),"date"===this.state.mask_mode&&(t=Q.xY(t)),this.maskInputSet(t,"on_change",void 0,void 0,void 0))},this.setGetInfo=(e,t)=>{if(t=t[this.props.default.code],e.codeHidden){if(e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(void 0!==this.props.config.data_view)var i="";void 0!==this.props.config.data_value&&(i=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),"date"===this.state.mask_mode&&(i=Q.xY(i)),this.maskInputSet(i,"enter_tab",void 0,void 0,void 0)}}else e.list_component&&(null!==t&&void 0!==t||(t=""),"date"===this.state.mask_mode&&(t=Q.xY(t)),this.maskInputSet(t,"on_change",void 0,void 0,void 0))},this.get=(e,t)=>{let i=this.props_smooth.config.structable.split("|");for(const o of i)this.readData(o,e.inform)},this.runRule=e=>{if(e){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.set=(e,t)=>{var i;let o=this.props_smooth.config.structable_read,{mask_mode:a,format_value_type_string:s,mask_mode_time:n}=this.state,r=o.split("."),l=null===t||void 0===t||null===(i=t[r[0]])||void 0===i?void 0:i[r[1]];void 0!==l||this.props_smooth.config.structable_read||(l=this.props_smooth.config.data_default),void 0!==l&&(null==l&&(l=""),"date"===a&&(l="HH:mm"===s?Q.ec(l,s,n):Q.xY(l)),this.maskInputSet(l,"on_change",void 0,void 0,void 0))},this.reload=(e,t)=>{let i=this.props_smooth.config;this.data_select={},this.maskInputSet(i.data_default,"reload",void 0,void 0,"OPTIMISTIC")},this.setDataDefault=()=>{let e=this.props_smooth.config;this.data_select={},this.maskInputSet(e.data_default,void 0,void 0,void 0,"OPTIMISTIC")},this.checkValidate=()=>{let e=this.maskInputGet(),t=new Date(e).getFullYear(),i="",{min_year:o,max_year:a,mask_mode:n}=this.state;if(this.state.validate.request&&!e&&(i="validateRequest",this.state.mask_value&&0!==e&&(i="jMaskInput_WrongFormat")),"date"===n&&(o>t&&""!==this.props_smooth.config.min_year&&(i="jDate_Min"),a<t&&""!==this.props_smooth.config.max_year&&(i="jDate_Max")),i||(i=this.maskInputValidate()),i){var r=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==r&&r.setFormValidateFromComponent(!0,this.props.default)}return this.state.help_mess=i,this.setState({help_mess:i}),!!i},this.setMaskConfig=(e,t)=>{let i=this.props_smooth;i.config.mask_format=t.mask_format,i.config.mask_data_format=t.mask_data_format,i.config.mask_mode=t.mask_mode,this.props_smooth=this.buildPropsSmooth(i);let o=this.buildStateSmooth(this.props_smooth),{mask_format:a,mask_mode:s,mask_reg:n,mask_regs:r,mask_regs_to:l,mask_placeholder:c,mask_value:d,free_style:h,date_picker:u,validate:p}=o;this.setState({validate:p,mask_format:a,mask_mode:s,mask_reg:n,mask_regs:r,mask_regs_to:l,mask_placeholder:c,mask_value:d,free_style:h,date_picker:u})},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()},(()=>{this.onBlur()}))},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setCallBuildFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.modalToggle=e=>{e||this.buildFormChild(),!0!==this.state.CMD.disabled&&(void 0===e?this.setState({show_modal:s.ZP.autoID()}):e&&(this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})))},this.clearError=()=>{this.setState({help_mess:""})},this.maskInputSet=(e,t,i,o,a,s)=>{let n,{mask_regs:r,mask_regs_to:l,mask_mode:c,mask_mode_time:d,max_year:h,min_year:u,mask_value:p,value_type:_}=this.state,f={end_pos:0,start_pos:0,help_mess:"",mask_value:"",value:e},g=xe(r,this.props_smooth.config.mask_mode);if("date"===c){n=Ne(e,r,c,[],"",d);let t=Q.ng(n,Ce(r),d);if(f.date_picker=((e,t,i)=>{e=e?new Date(e):window.moment.utc().toDate();const o=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));return{mounth_data:Le(o.getMonth()+1),year_data:Ee(t,i),day_data:Fe(),day_of_mounth_data:Ze(o.getTime()),date_view:e}})(t,u,h),s&&/\d\d:\d\d/.test(p)){let e=p.split(" ");if(/\d\d:\d\d/.test(e[e.length-1])){let t=n.split(" ");n=t.length>1?t[0]+" "+e[e.length-1]:e[e.length-1]}}}else g.includes("HH:mm")&&/\d\d:\d\d/.test(p)?e?(n=fe(g,p,d),"Invalid date"===n&&(n=this.state.mask_value)):n="":n=Ne(e,r,c,l,a);f.mask_value=n,f=Object.assign(f,o),this.setState(f,(()=>{this.runRule(t),i&&i()}))},this.maskInputGet=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{mask_regs:i,mask_regs_to:o,mask_value:a,mask_mode:s,value_type:n,mask_mode_time:r}=t.state,l="";if(t.state.free_style.status)return a;let c=xe(t.state.mask_regs,t.props_smooth.config.mask_mode);if("date"===s)l=Ie(a,i,s,[],n,e,r);else if(c.includes("HH:mm")){let e=fe(c,a,r);"Invalid date"===e&&(e=t.state.mask_value),l=e}else l=Ie(a,i,s,o);return l},this.maskInputClear=()=>{this.data_select={},this.setState({end_pos:0,start_pos:0,value:"",mask_value:"",help_mess:""},(()=>{}))},this.maskInputValidate=()=>{let{mask_value:e}=this.state,t="",i=this.maskInputGet(),o=(a=this.props_smooth.config.const_mask_format,be[a]);var a;if(t=e&&!i&&0!==i?"jMaskInput_WrongFormat":function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[{title:"@VALUE",value:arguments.length>1?arguments[1]:void 0},{title:"@NOW",value:Date.parse(new Date)},{title:"@YEAR",value:31536e6.toString()},{title:"@MOUNTH",value:2592e6.toString()},{title:"@DAY",value:864e5.toString()},{title:"@HOURS",value:36e5.toString()},{title:"@MINUTE",value:6e4.toString()},{title:"@SECONDS",value:1e3.toString()}];for(const i of e){let{content:e,mess:o}=i;for(const i of t)e=e.replace(new RegExp(i.title,"g"),i.value);if(!1===s.ZP.checkDynamicConditionNoData(e))return o}return""}(this.props_smooth.validate.conditions,i),o&&e){let i=o.regex_validate;if(o.isMulti){let o=e.split(",");for(let e=0;e<o.length;e++){const a=o[e];if(!i.test(a)){t="jMaskInput_WrongFormat";break}}}else i.test(e)||(t="jMaskInput_WrongFormat")}return t},this.abs_calendar_changeMonth=e=>{let{format_value_type_string:t}=this.state,i=this.maskInputGet()||Date.parse(new Date),o=(0,_e.X7)(i,{M:e},"string"===this.state.value_type?this.state.format_value_type_string:this.state.mask_format,"string"===this.state.value_type);this.maskInputSet(o,void 0,void 0,void 0,void 0,!0)},this.abs_calendar_submit=e=>{let t=this.state.date_picker.day_of_mounth_data[e].value;this.maskInputSet(t,"enter_tab",void 0,void 0,void 0,!0),this.setState({isOpenCalender:!1})},this.abs_calendar_chooseYear=e=>{let{format_value_type_string:t}=this.state,i=this.maskInputGet()||Date.parse(new Date),o=new Date(i).setFullYear(e);this.maskInputSet(o,void 0,void 0,void 0,void 0,!0)},this.abs_calendar_changeYear=e=>{},this.abs_calendar_chooseMonth=e=>{let t=e,{format_value_type_string:i}=this.state,o=this.maskInputGet()||Date.parse(new Date),a=new Date(o).setMonth(t);this.maskInputSet(a,void 0,void 0,void 0,void 0,!0)},this.abs_calendar_openCalendar=e=>{let{format_value_type_string:t}=this.state,i=this.maskInputGet();i&&this.maskInputSet(i,"","",{date_selected_cache:i},void 0,!0),this.setState({isOpenCalender:e})},this.abs_calendar_KeyUp=e=>{let t,{isOpenCalender:i}=this.state,o=this.maskInputGet()||Date.parse(new Date),a=this.state.date_selected_cache;if(i)switch(e.key){case"ArrowLeft":i&&(t=(0,_e.X7)(o,{d:-1}),this.maskInputSet(t,void 0,void 0,void 0,void 0,!0));break;case"ArrowRight":i&&(t=(0,_e.X7)(o,{d:1}),this.maskInputSet(t,void 0,void 0,void 0,void 0,!0));break;case"ArrowUp":t=(0,_e.X7)(o,{d:-7}),this.maskInputSet(t,void 0,void 0,void 0,void 0,!0);break;case"ArrowDown":t=(0,_e.X7)(o,{d:7}),this.maskInputSet(t,void 0,void 0,void 0,void 0,!0);break;case"Enter":t=o,this.maskInputSet(t,void 0,void 0,void 0,void 0,!0),this.ref_maskinput.current.abs_CloseCalendar(),this.setState({isOpenCalender:!1});break;case"Escape":Number(a)!==Number(this.maskInputGet())&&a!==this.maskInputGet()?i&&this.maskInputSet(a,void 0,void 0,void 0,void 0,!0):(this.ref_maskinput.current.abs_CloseCalendar(),this.setState({isOpenCalender:!1}))}else switch(e.key){case"ArrowDown":t=(0,_e.X7)(o,{d:-1}),this.maskInputSet(t,void 0,void 0,void 0,void 0,!0);break;case"ArrowUp":t=(0,_e.X7)(o,{d:1}),this.maskInputSet(t,void 0,void 0,void 0,void 0,!0)}},this.abs_calendar_today=()=>{this.maskInputSet(Date.parse(new Date),"enter_tab",void 0,void 0,void 0,!0)},this.componentDidUpdate=(e,t)=>{},this.onEventKey=e=>{if("Delete"===e.key)this.maskInputClear()},this.onClick=e=>{this.clearError()},this.onBlur=()=>{let e=this.state.mask_mode;if(this.setState({isOpenCalender:!1}),"date"===e){let e=this.maskInputGet();this.maskInputSet(e,"",(()=>{if(!1===this.checkValidate()){this.runRule("enter_tab");let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(e.buildValidateForm(!1),e.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.buildValidateForm(!1)}}))}}),void 0,void 0,!0)}else if(!1===this.checkValidate()){this.runRule("enter_tab");let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(e.buildValidateForm(!1),e.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.buildValidateForm(!1)}}))}},this.setLastPost=e=>{let t=e.target;this.state.start_pos=t.selectionStart,this.state.end_pos=t.selectionEnd},this.setPos=(e,t)=>{e.selectionStart=t,e.selectionEnd=t},this.onChangeMaskInput=e=>{let{start_pos:t,mask_value:i,mask_regs:o,mask_placeholder:a,content_style:s,mask_mode:n,mask_mode_time:r}=this.state,l=e.target,c=l.selectionStart,d=l.value||"";"UPPER"===s&&(d=d.toLocaleUpperCase());let h=this.state.free_style;if(h.status)return d=d.replace(h.reg_remove,""),d=d.slice(0,o.length),void this.setState({mask_value:d});let u=d.slice(t,c)||"",p=0,_="",f=d.slice(0,c);for(let m=c;m<a.length;m++)m<c+(a.length-d.length)?f+=a[m]:f+=i[m]||a[m];i=f;for(const m in o){let e=o[m];"regex"===e.type||"const"===e.type&&e.value===u[p]||"static"===e.type&&e.value===u[p]?t<=m&&p<u.length?("static"===e.type&&e.value===u[p]||"const"===e.type&&e.value===u[p]||e.reg.test(u[p])?_+=u[p]||e.value:(_+=e.value,c--),p++):_+=i[m]||a[m]:(_+=e.value,t<=m&&p<u.length&&c++)}_===a&&(_="");let g=xe(this.state.mask_regs,this.props_smooth.config.mask_mode);if(g.includes("HH:mm")&&!0!==/[A-Za-z]/.test(_)){let e=fe(g,_,r);"Invalid date"===e&&(e=this.state.mask_value),_=e}this.setState({mask_value:_,value:"date"===n?Q.w5(_,g,r):""},(()=>{this.setPos(l,c);let{mask_format:e,hasSuggest:t,keyLoadCache:i,mask_value:o,mask_regs:a}=this.state;"date"!==e&&t&&""!==i&&this.getDataKeyCache({key_cache:i+Pe(o,a,n,!1).replace(" ","")}).then((e=>{if(null!==e){let t=JSON.parse(e);Array.isArray(t)?this.setState({list_suggest:t}):this.setState({list_suggest:[t]})}else this.setState({list_suggest:[]})})).catch((e=>{}))}))},this.getDataKeyCache=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:"get_data_by_key_cache"}}];return i[0].input=Object.assign(i[0].input,e),await(0,S.Yr)(i,t).then((e=>{var t=s.ZP.foGetData("infoError",e);return void 0!==t?{infoError:t}:s.ZP.foGetData("data",e)})).finally((e=>{}))},this.setValidate=(e,t)=>{let{validate:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),t);i.request!==o.request&&this.setState({validate:o})},this.abs_ChooseSuggest=e=>{this.maskInputSet(e.value,void 0,void 0,void 0,void 0,!0)},this.getErrorLang=e=>{switch(e){case"validateNumMin":return s.ZP.getLang(e).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(e).replace("{count}",this.state.validate.max);case"jDate_Min":return s.ZP.getLang(e).replace("{count}",this.state.min_year);case"jDate_Max":return s.ZP.getLang(e).replace("{count}",this.state.max_year);default:return s.ZP.getLang(e)}},this.renderThisComponent=()=>{let e=this.state.mask_mode;const t=(0,n.RP)("date"===e?"uDate":"uInput");if("true"===String(this.props.config.isLabel)){const e=(0,n.RP)("uLabel");return(0,l.jsx)(e,{dataFull:{config:{default:{title:this.state.mask_value||"",class:this.props_smooth.default.class},cmd:{visible:"true"===String(this.state.CMD.visible)}}}})}return(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChangeMaskInput,abs_Blur:this.onBlur,abs_Click:this.onClick,abs_KeyDown:this.setLastPost,abs_KeyUp:this.onEventKey,abs_MouseUp:this.setLastPost}),ref:this.ref_maskinput})},this.abs_CloseModal=()=>{this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})},this.propertyConstructor=new Qe(e.inputType,e.default,e.config),this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT"),this.component_code=s.ZP.autoID(),this.data_debug={},this.app_debug=[];let i="time_zone_c";"date"===this.propertyConstructor.property.config.mask_mode&&this.propertyConstructor.property.config.mask_mode_time&&(i=this.propertyConstructor.property.config.mask_mode_time),this.renderFormChildDone=!1,this.state={is_lookup:!1,is_error:!1,is_clicked:!1,lang:this.props.lang,help_mess:"",lang_select:"",title:"",CMD:{},format_value_type_string:"",end_pos:-1,start_pos:0,_type:"",value:"",mask_mode_time:i,mask_value:"",mask_format:"",mask_placeholder:"",mask_mode:"default",mask_regs:[],mask_regs_to:[],content_style:"",value_type:"long",free_style:{status:!1,reg_remove:""},date_picker:{mounth_data:[],year_data:[],day_data:[],day_of_mounth_data:[],date_view:Date.parse(new Date)},date_selected_cache:0,renderFormChildDone:!1,id_component:s.ZP.autoID(),isOpenCalender:!1,hasErrorInForm:!1,hasSuggest:!1,keyLoadCache:"",PK_key:"",moreInformation_key:"",list_suggest:[]},this.ref_maskinput=a.createRef();const r=this.getComponentContructor({},e);this.state=Object.assign(this.state,r.state_smooth),this.props_smooth=r.props_smooth}readData(e,t){let i=e.split(".");if(2!==i.length)return;let{format_value_type_string:o}=this.state,a=this.maskInputGet(o);switch(t){case void 0:case"true":s.ZP.putData(i[0],i[1],a,this.props.infoA);break;case"false":s.ZP.putDataGB(i[0],i[1]);break;default:s.ZP.putDataGB(i[0],i[1],"")}}openDetail(){let e=this.props.config.callform_detail;if(e){var t=s.ZP.getFormAppAuto(e);t&&this.props.config.callform_detail_mode,void 0===t?(0,h.QS)({form_code:this.props.config.callform_detail},this.props.infoA,this.props.default,"callform_detail;"+this.state.id_component,this.data_select):"modal"===this.props.config.callform_detail_mode?(t.putDataAll_andSet(this.data_select),this.setState({show_modal_detail:s.ZP.autoID()})):(t.putDataAll_andSet(this.data_select),s.ZP.openForm(e))}}buildFormChild(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let e=s.ZP.cloneJson(this.props.infoA);e.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props.default,"callform;"+this.state.id_component)}}componentDidMount(){const e=()=>{setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())};this.props_smooth.config.data_default?this.maskInputSet(this.props_smooth.config.data_default,"on_change",e(),{},"OPTIMISTIC"):e()}getConfigTemplate(){var e,t;let{date_picker:i,free_style:o,format_value_type_string:a,mask_value:n,mask_regs:r,mask_mode:l,mask_regs_to:c,hasSuggest:d}=this.state;return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{subTitle_isShow:"date"===l,subTitle:`(${this.state.mask_placeholder})`,placeholder:this.state.CMD.disabled+""==="true"?" ":xe(r,this.props_smooth.config.mask_mode),title:(null===(e=this.state.lang)||void 0===e?void 0:e[this.state.lang_select])||this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:null===(t=this.state.validate)||void 0===t?void 0:t.request,icon:!0===this.state.isLookup?"search":"",component_code:this.component_code},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:"false"!==String(this.state.CMD.visible),error:{message:this.getErrorLang(this.state.help_mess),type:""}},mode:{textAlign:"left",letterSpacing:o.status?"":"M"}},valueTitleHover:"true"!==String(this.state.CMD.disabled)?"":n,value:n,cmd:{isLock:!1},suggest:{isShow:d,data:this.state.list_suggest.map((e=>{let t=Ne(e[this.state.PK_key],r,l,c,void 0),i=[];if(n){let e="",o="";for(let a=0;a<t.length;a++){let s=r.filter((e=>e.key===t[a]&&"const"===e.type));s.length>0?""!==o?o+=t[a]:""!==e&&(e+=t[a]):t[a]===n[a]?(o+=t[a],""!==e&&(i.push({value:e,mode:"suggest"}),e="")):(e+=t[a],""!=o&&(i.push({value:o}),o="")),a===t.length-1&&(""!==e?(i.push({value:e,mode:"suggest"}),e=""):""!=o&&(i.push({value:o}),o=""))}}return{title:i,more_information:e[this.state.moreInformation_key],value:e[this.state.PK_key]}})),title:{noData:s.ZP.getLang("header_searchNoResult")}},calendar_data:{value_current:"",today:{title:"Today"},config:{days_title:i.day_data},list_months:i.mounth_data,list_years:{value:new Date(i.date_view).getFullYear()||"",data:i.year_data},list_days:i.day_of_mounth_data},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_today:this.abs_calendar_today,abs_calendar_KeyUp:this.abs_calendar_KeyUp,abs_ChooseSuggest:this.abs_ChooseSuggest,tooltip_copy:{icon:"copy",title:s.ZP.getLang("btn_copy")},abs_Copy:()=>{s.ZP.copyToClipboard(this.maskInputGet(a))}}}render(){const e=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(e,{class:this.props.default.class_ofgroup+("false"===String(this.state.CMD.visible)?" malibu-invisible":""),children:[(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]}),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]})}}const Ue=ze;class Be extends a.Component{constructor(e){var t;if(super(e),t=this,this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.setCMD=(e,t)=>{const{CMD:i}=this.state||{};let o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){let e=this.props.config.structable_read;var i=e.split(".");if(i.length>0&&void 0!==t[i[0]]&&void 0!==t[i[0]][i[1]]){let o=0;if(void 0!==this.state.data_gb)for(let a=0;a<this.state.data_gb.length;a++){const n=this.state.data_gb[a];if(t[i[0]][i[1]]===s.ZP.getOOP(n,e)){o=a;break}}return void this.setState({value:{code:t[i[0]][i[1]]},index_selected:o})}}this.setState({value:this.state.data_gb[0]})}},this.setAdvanced=(e,t)=>{if(e.codeHidden&&e.codeHidden===this.props.default.codeHidden){if(this.data_select=t,void 0!==this.data_select){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change")}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:{code:a},data_view:o})}this.setState({value:this.state.data_gb[0]})}},this.setGetInfo=(e,t)=>{if(t=t[this.props.default.code],e.codeHidden&&e.codeHidden===this.props.default.codeHidden){if(this.data_select=t,void 0!==this.data_select){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change")}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:{code:a},data_view:o})}this.setState({value:this.state.data_gb[0]})}},this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(var o=0;o<t.length;o++)this.readData(t[o],e.inform)}else this.readData(i,e.inform)},this.checkValidate=()=>{let e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default})},this.onChangeRadio=e=>{let t=e.target.value,i=this.props.config.structable,o=s.ZP.getOOP(this.state.data_gb[t],i);this.setState({index_selected:t,value:o})},this.changeView=(e,t,i)=>{let o="",a=(t=t.trim()).split("@");for(let n=0;n<a.length;n++){let t=a[n].trim();if(""!==t&&void 0!==t)if(0===n)void 0!==this.state.lang[i]&&void 0!==this.state.lang[i][this.state.lang_select]&&void 0!==this.state.lang[i][this.state.lang_select][t]?o+=this.state.lang[i][this.state.lang_select][t]+" ":o+=a[n];else{let a=t.indexOf(" ");if(-1===a)o+=s.ZP.getOOP(e,t)+" ";else if(-1!==a){let n=t.substring(a,t.length).trim(),r=t.substring(0,a).trim();o+=s.ZP.getOOP(e,r)+" ",void 0!==this.state.lang[i]&&void 0!==this.state.lang[i][this.state.lang_select]&&void 0!==this.state.lang[i][this.state.lang_select][n]?o+=this.state.lang[i][this.state.lang_select][n]+" ":o+=n}}}return o},this.runRule=e=>{if(e){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.getAdvanced=(e,t)=>{var i;return null===(i=this.state.value)||void 0===i?void 0:i.code},this.handleClick=function(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).input;t.setState({value:e},(()=>{t.runRule("enter_tab")}))},this.getConfigComponent=(e,t)=>({value:e.code===this.state.value.code,dataItem:{index:t,input:e},abs_Click:this.handleClick,class:this.props.default.class,title:e.title,config:{cmd:{disable:this.state.CMD.disabled+""==="true",isLock:!1,error:{message:""}}}}),this.data_gb=[],void 0!==this.props.config.data_type){if("database"===this.props.config.data_type&&void 0!==this.props.config.data_query){let e=this.props.config.data_query;if(void 0!==e){let t=s.ZP.getDataLimited(e,0,50);void 0!==t?this.data_gb=t.data:s.ZP.AppException("#jSelect.constructor#1","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","data")}}if("json"===this.props.config.data_type&&void 0!==this.props.config.data_json){let e=s.ZP.parseJson(this.props.config.data_json);void 0!==e?this.data_gb=e:s.ZP.AppException("#jSelect.constructor#1","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","data")}}if(void 0!==this.props.config.data_more&&""!==this.props.config.data_more){let e=s.ZP.parseJson(this.props.config.data_more);if(void 0!==e)for(let t=0;t<e.length;t++){const i=e[t];this.data_gb.unshift(i)}}if(void 0!==this.props.config){this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var i=this.props.config.component_title;void 0===i&&(i=""),this.data_view_format_="",void 0!==this.props.config.data_view_format&&(this.data_view_format_=this.props.config.data_view_format)}var o=this.props.validate;void 0===o&&(o={});var a=this.props.lang;if(void 0===a&&(a={}),this.callform_detail="",this.callform="",this.data_select={},this.state={value:{},value_old:"",lang:a,lang_select:s.ZP.getLangKey(),validate:o,CMD:{},data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",data_gb:this.data_gb,index_selected:0,component_title:i,value_checked:!0,component_key:s.ZP.autoID()},void 0!==this.state.data_gb&&""!==this.data_default)for(let s=0;s<this.state.data_gb.length;s++){if(this.state.data_gb[s].code===this.data_default){this.state.index_selected=s,this.state.value={code:this.data_default};break}}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent()),void 0!==this.props.config.structable_read&&void 0!==this.state.data_gb&&void 0!==this.state.index_selected&&this.setState({value:this.state.data_gb[this.state.index_selected]})}readData(e,t){if(e.includes(".")){let i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.state.value.code,this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.state.value.code):s.ZP.putDataGB(i[0],i[1],"")}}render(){const e=(0,n.RP)("uRadioButton");return"false"===String(this.state.CMD.visible)?null:(0,l.jsx)(a.Fragment,{children:""!==this.state.data_gb&&this.state.data_gb.map(((t,i)=>(0,l.jsx)(e,{dataFull:this.getConfigComponent(t,i)},i)))})}}const Ye=Be;class He extends a.Component{constructor(e){if(super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var i=this.props.config.structable_read.split(".");if(i.length>0&&void 0!==t[i[0]]&&void 0!==t[i[0]][i[1]])return void this.setState({value:t[i[0]][i[1]]})}this.setState({value:""})}},this.setAdvanced=(e,t)=>{if(e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}let e="";void 0!==this.props.config.data_view&&(e=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));let t="";void 0!==this.props.config.data_value&&(t=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:t,data_view:e})}},this.setGetInfo=(e,t)=>{if(t=t[this.props.default.code],e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.get=(e,t)=>{let i=!0;if(e.checkError&&"false"===e.checkError&&(i=!1),!i||!this.checkValidate()){let t=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(t=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(t=!0),t)){let t=this.props.config.structable;if(t.includes("|")){let i=t.split("|");for(var o=0;o<i.length;o++)this.readData(i[o],e.inform)}else this.readData(t,e.inform)}}},this.checkValidate=()=>{let e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.getResultData=()=>{let e=this.state.json_tree,t={value:[]};return"string"===this.props.config.get_value_type&&(t={value:""}),this.convertResultData(e,t),t},this.convertResultData=(e,t)=>{if(void 0!==this.props.config.get_value_type)switch(this.props.config.get_value_type){case"string":let i="";void 0!==this.props.config.get_value_string_format&&(i=this.props.config.get_value_string_format);for(let a=0;a<e.chil.length;a++){const i=e.chil[a];this.convertResultData(i,t)}if(!0===e.my_system.isChecked&&""!==i){""!==s.ZP.getOOP(e.value,i)&&(t.value+=s.ZP.getOOP(e.value,i),void 0!==this.props.config.get_value_string_format_split&&(t.value+=this.props.config.get_value_string_format_split))}break;case"array":let o="";if(void 0!==this.props.config.get_value_array_format&&(o=this.props.config.get_value_array_format,o=s.ZP.parseJson(o)),!0===e.my_system.isChecked&&void 0!==e.value){let i={};for(let t in o)i[t]=s.ZP.getOOP(e.value,o[t]);t.value.push(i)}for(let a=0;a<e.chil.length;a++){const i=e.chil[a];this.convertResultData(i,t)}}},this.changeView=(e,t,i)=>{let o="",a=(t=t.trim()).split("@");for(let n=0;n<a.length;n++){let t=a[n].trim();if(""!==t&&void 0!==t)if(0===n)void 0!==this.state.lang[i]&&void 0!==this.state.lang[i][this.state.lang_select]&&void 0!==this.state.lang[i][this.state.lang_select][t]?o+=this.state.lang[i][this.state.lang_select][t]+" ":o+=a[n];else{let a=t.indexOf(" ");if(-1===a)o+=s.ZP.getOOP(e,t)+" ";else if(-1!==a){let n=t.substring(a,t.length).trim(),r=t.substring(0,a).trim();o+=s.ZP.getOOP(e,r)+" ",void 0!==this.state.lang[i]&&void 0!==this.state.lang[i][this.state.lang_select]&&void 0!==this.state.lang[i][this.state.lang_select][n]?o+=this.state.lang[i][this.state.lang_select][n]+" ":o+=n}}}return o},this.reload=(e,t)=>{this.setState({value:this.data_default})},this.createJsonTree=(e,t,i,o)=>{if(void 0===e.parent&&(e.parent=[]),void 0!==o)for(let a=0;a<o.length;a++){const t=o[a];e.parent.push(t)}void 0!==i&&!1===e.parent.includes(i)&&e.parent.push(i),void 0===e&&(e={}),void 0===e.chil&&(e.chil=[]),void 0===e.my_system&&(e.my_system={isOpen:!0,isChecked:!0,isDisable:!1});if(e.parent.length<=this.tree_level||0===this.tree_level)for(let a=0;a<t.length;a++){const o=t[a];if(s.ZP.getOOP(o,this.key_get_parent)===i){let i=e.chil.length;e.chil[i]={value:o};let a=s.ZP.getOOP(o,this.key_set_parent);void 0!==a&&this.createJsonTree(e.chil[i],t,a,e.parent)}}},this.checkUnCheckChil=e=>{for(let t in e.data){if(!1===e.data[t].my_system.isChecked)return!0;if(!0===e.data[t].my_system.isDisable)return!0;this.checkUnCheckChil(e.data[t])}return!1},this.eventOnTree=(e,t)=>{let i=s.ZP.getOOP(e.value,this.key_private),o=this.state.json_tree;switch(t){case"change_isOpen":this.changeTreeItem(o,this.key_private,i,"isOpen",!e.my_system.isOpen);break;case"change_isChecked":this.changeTreeItem(o,this.key_private,i,"isChecked",!e.my_system.isChecked);break;case"isChecked":this.changeTreeItem(o,this.key_private,i,"isChecked",!0)}for(;"true"===this.auto_select;){let e=JSON.stringify(o);if(this.updateCheckboxTree(o),e===JSON.stringify(o))break}this.setState({json_tree:o})},this.changeTreeItem=(e,t,i,o,a)=>{let n=e.value;if(s.ZP.getOOP(n,t)===i)e.my_system[o]=a,"true"===this.auto_select&&this.changeTreeChil(e,o,a);else for(let s=0;s<e.chil.length;s++){const n=e.chil[s];this.changeTreeItem(n,t,i,o,a)}},this.changeTreeChil=(e,t,i)=>{for(let o=0;o<e.chil.length;o++){let a=e.chil[o];a.my_system[t]=i,this.changeTreeChil(a,t,i)}},this.checkTreeChil=(e,t,i,o)=>{for(let a=0;a<e.chil.length;a++){let s=e.chil[a];s.my_system[t]===i?o.value=!0:this.checkTreeChil(s,t,i,o)}},this.updateCheckboxTree=e=>{let t={value:!1},i={value:!1};this.checkTreeChil(e,"isChecked",!0,t),this.checkTreeChil(e,"isChecked",!1,i),!0===t.value&&!0===i.value?(e.my_system.isChecked=!0,e.my_system.isDisable=!0):!0===t.value?(e.my_system.isChecked=!0,e.my_system.isDisable=!1):!0===i.value?(e.my_system.isChecked=!1,e.my_system.isDisable=!1):e.my_system.isDisable=!1;for(let o=0;o<e.chil.length;o++){let t=e.chil[o];this.updateCheckboxTree(t)}},this.renderTreeView=e=>{if(void 0!==e&&e.chil.length>0)return(0,l.jsx)("div",{className:"item-jTreeView",children:(0,l.jsx)("ul",{children:e.chil.map(((e,t)=>(0,l.jsxs)("li",{children:[(0,l.jsxs)("span",{style:{position:"relative",display:"inline-block"},children:[!0===e.my_system.isDisable&&(0,l.jsx)("div",{style:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",cursor:"pointer"},onClick:()=>this.eventOnTree(e,"isChecked")}),(0,l.jsx)("input",{type:"checkbox",checked:e.my_system.isChecked,onChange:()=>this.eventOnTree(e,"change_isChecked"),disabled:e.my_system.isDisable})]}),e.chil.length>0?!0===e.my_system.isOpen?(0,l.jsx)("i",{className:this.icon_close_,onClick:()=>this.eventOnTree(e,"change_isOpen")}):(0,l.jsx)("i",{className:this.icon_open_,onClick:()=>this.eventOnTree(e,"change_isOpen")}):(0,l.jsx)("i",{className:this.icon_min_chil_}),(0,l.jsx)("span",{children:this.changeView(e.value,this.key_view,"data_view_format")}),!0===e.my_system.isOpen&&this.renderTreeView(e)]},t)))})})},this.data_gb=[],void 0!==this.props.config.data_type){if("query"===this.props.config.data_type&&void 0!==this.props.config.data_query){let e=this.props.config.data_query;if(void 0!==e){let t=s.ZP.getDataLimited(e,0,999999);void 0!==t?this.data_gb=t.data:s.ZP.AppException("#jTreeView.constructor#1","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","data")}}if("json"===this.props.config.data_type&&void 0!==this.props.config.data_json){let e=s.ZP.parseJson(this.props.config.data_json);void 0!==e?this.data_gb=e:s.ZP.AppException("#jTreeView.constructor#1","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","data")}}if(void 0!==this.props.config.data_more&&""!==this.props.config.data_more){let e=s.ZP.parseJson(this.props.config.data_more);if(void 0!==e)for(let t=0;t<e.length;t++){const i=e[t];this.data_gb.unshift(i)}}if(void 0!==this.props.config){this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var t=this.props.config.component_title;void 0===t&&(t=""),this.key_private="group_menu.group_menu_id",void 0!==this.props.config.key_private&&(this.key_private=this.props.config.key_private),this.key_set_parent="group_menu.group_menu_id",void 0!==this.props.config.key_set_parent&&(this.key_set_parent=this.props.config.key_set_parent),this.key_get_parent="group_menu.group_menu_parent",void 0!==this.props.config.key_get_parent&&(this.key_get_parent=this.props.config.key_get_parent),this.key_view="group_menu.group_menu_name",void 0!==this.props.config.key_view&&(this.key_view=this.props.config.key_view),this.icon_close_="",void 0!==this.props.config.icon_close&&(this.icon_close_=this.props.config.icon_close),this.icon_open_="",void 0!==this.props.config.icon_open&&(this.icon_open_=this.props.config.icon_open),this.icon_min_chil_="",void 0!==this.props.config.icon_min_chil&&(this.icon_min_chil_=this.props.config.icon_min_chil),this.auto_select=!0,void 0!==this.props.config.auto_select&&(this.auto_select=this.props.config.auto_select),this.tree_level="0",void 0!==this.props.config.tree_level&&(this.tree_level=this.props.config.tree_level),this.tree_level=parseInt(this.tree_level),this.max_parent_id="",void 0!==this.props.config.max_parent_id&&(this.max_parent_id=this.props.config.max_parent_id),""===this.max_parent_id&&(this.max_parent_id="0")}var i=this.props.validate;void 0===i&&(i={});var o=this.props.lang;void 0===o&&(o={}),this.callform_detail="",this.callform="",this.data_select={},this.state={value:this.data_default,value_old:"",lang:o,lang_select:s.ZP.getLangKey(),validate:i,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",data_gb:this.data_gb,json_tree:{},component_title:t,key_component:s.ZP.autoID(),update:!1};let a={};this.createJsonTree(a,this.state.data_gb,this.max_parent_id,[]),this.state.json_tree=a}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){let i=this.getResultData();if(e.includes(".")){var o=e.split(".");void 0===t||"true"===t?s.ZP.putData(o[0],o[1],i,this.props.infoA):"false"===t&&s.ZP.putDataGB(o[0],o[1],i),s.ZP.putDataGB(o[0],o[1],"")}}render(){return(0,l.jsx)("div",{className:this.props.default.class,children:(0,l.jsx)("div",{className:"col-sm-12 col-md-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsxs)("label",{children:[void 0!==this.state.lang.ui&&void 0!==this.state.lang.ui[this.state.lang_select]&&void 0!==this.state.lang.ui[this.state.lang_select][this.state.component_title]?this.state.lang.ui[this.state.lang_select][this.state.component_title]:this.state.component_title,""===this.state.component_title&&(0,l.jsx)("small",{className:"form-text text-success",children:"\xa0"})]}),this.renderTreeView(this.state.json_tree,this.state.key_component)]})})})}}const Ve=He;var We=i(3628);class Ge extends a.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.data_elearning?t.data_elearning=e.data_elearning:t.data_elearning="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var i=this.state.data;i[e]=t.target.value,this.setState({data:i})}render(){return(0,l.jsx)("div",{className:"col-sm-12 col-md-12",children:(0,l.jsx)(We.Z,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u \u0111\xe0o t\u1ea1o",value:this.state.data.data_elearning,onChange:e=>this.onChange_Value("data_elearning",e)})})}}const Je=Ge;class qe extends a.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return(0,l.jsx)("div",{className:"col-sm-12 col-md-12",children:(0,l.jsx)("div",{className:"prtm-block-content",children:(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsxs)("table",{className:"table table-striped",children:[(0,l.jsx)("thead",{className:"thead-primary",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"T\xean x\xe1c nh\u1eadn"}),(0,l.jsx)("th",{children:"D\u1eef li\u1ec7u"})]})}),(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"B\u1eaft bu\u1ed9c nh\u1eadp"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"S\u1ed1 t\u1eeb kh\xf4ng nh\u1ecf h\u01a1n"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"S\u1ed1 t\u1eeb kh\xf4ng v\u01b0\u1ee3t qu\xe1"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}})})]})]})]})})})})}}const Ke=qe;class Xe extends a.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:s.ZP.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return(0,l.jsx)("div",{children:this.state.lang_system.map(((e,t)=>(0,l.jsx)(We.Z,{class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var i=this.state.data;i[e.key]=t.target.value,this.setState({data:i})}},t)))})}}const $e=Xe;var et=i(5745);class tt extends a.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var i=this.state.data;i[e]=t.target.value,this.setState({data:i})}render(){return(0,l.jsxs)("div",{className:"col-sm-12 col-md-12",children:[(0,l.jsx)(et.Z,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),(0,l.jsx)(et.Z,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)})]})}}const it=tt;class ot extends a.Component{constructor(e){super(e),this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>(0,l.jsx)(Je,{data:e,ref:e=>s.ZP.setConfigComponent("config",e)}),this.getFormRole=e=>(0,l.jsx)(it,{data:e,ref:e=>s.ZP.setConfigComponent("role",e)}),this.getFormValidate=e=>(0,l.jsx)(Ke,{data:e,ref:e=>s.ZP.setConfigComponent("validate",e)}),this.getFormLang=(e,t,i,o,a)=>(0,l.jsx)($e,{data:o,default:e,config:t,validate:i,configAVD:a,ref:e=>s.ZP.setConfigComponent("lang",e)}),this.getCode=()=>this.props.default.code,this.getElearning=()=>r.findDOMNode(this),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}};var t="";void 0!==this.props.config.data_elearning&&(t=this.props.config.data_elearning),this.ob_mde=void 0,this.state={data_elearning:t,lang_select:s.ZP.getLangKey(),lang_system:s.ZP.getConfigUserDefault("list_lang_config"),data:{}}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this);let e=document.body.getElementsByClassName("content");for(let t of e)for(let e of t.getElementsByTagName("img"))e.style.width="100%"}),s.ZP.getTimeAddComponent()),this.downLoadOneELearning()}downLoadOneELearning(){for(var e="",t=0;t<this.state.lang_system.length;t++)e+=""===e?this.state.lang_system[t].key:";"+this.state.lang_system[t].key;(0,S.Yr)([{txcode:"#sys:bo-load-oneELearing",input:{eleaning_id:this.state.data_elearning,all_lang:e}}],{}).then((e=>{this.setState({data:s.ZP.foGetData("data",e)})}),(e=>{}))}render(){return(0,l.jsx)("div",{className:this.props.default.class,children:(0,l.jsx)("div",{className:"content",dangerouslySetInnerHTML:{__html:s.ZP.markdown_render(this.state.data[this.state.lang_select])}})})}}const at=ot;class st extends a.Component{constructor(e){super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getCodeHidden=()=>this.props.default.codeHidden,this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.checkIsLoading=()=>this.isLoading,this.setCallFormBack=(e,t)=>{if(void 0!==e.key_form&&void 0!==e.key&&e.key===this.props.default.codeHidden){this.muti_form_didMount[this.muti_form_didMount.length]=e.key_form,this.isLoading=!0,this.setState({isLoadingComponent:!1});var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.hasOwnProperty("componentIsLoaded")&&i.componentIsLoaded(this.props.default.codeHidden)}},this.getAdvanced=(e,t)=>{if(this.muti_form_didMount.length>0){var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i)return i.getDataAll();s.ZP.AppException("#jMutivalue.setDataCallForm","form is undefined","system")}else s.ZP.AppException("#jMutivalue.setDataCallForm","muti_form_didMount is 0","system")},this.set=(e,t)=>{if(this.setState({isLoadingComponent:!0}),void 0!==t){if(void 0!==this.props.config.structable_read){if(this.props.config.structable_read.includes(".")){let e=this.props.config.structable_read.split(".");if(e.length>0&&void 0!==t[e[0]]&&void 0!==t[e[0]][e[1]]){let o=t[e[0]][e[1]];if(o=JSON.parse(JSON.stringify(o)),"object"!==typeof o)try{o=JSON.parse(o)}catch(i){o={}}return o={muti:o},this.setState({value:o}),void this.setDataCallForm(o)}return void this.setDataCallForm(void 0)}{let e=this.props.config.structable_read;if(void 0!==t[e]){let i=t[e];return i=JSON.parse(JSON.stringify(i)),"object"!==typeof i&&(i={}),i={muti:i},this.setState({value:i}),void this.setDataCallForm(i)}return void this.setDataCallForm(void 0)}}this.reloadForm(this.muti_form_didMount[0]),this.setState({isLoadingComponent:!1})}else this.setDataCallForm(void 0)},this.setAdvanced=(e,t)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,e.list_component);n||(n=e.list_component),"*"===n?i.putDataAll_andSet(t):i.callDirFromSupport("setAdvanced",{list_component:n,list_view:e.list_view},t)}},this.setGetInfo=(e,t)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g");for(;-1!==e.list_component.indexOf(o);){let n=s.ZP.getElementWithRegex(a,e.list_component);if("*"===n){let e=t[o+";"+o+"("+n+")"];i.putDataAll_andSet(e)}else{let a=t[o+";"+o+"("+n+")"];i.callDirFromSupport("setAdvanced",{list_component:n,list_view:e.list_view},a)}e.list_component.endsWith(o+";"+o+"("+n+")")?e.list_component=e.list_component.replace(o+";"+o+"("+n+")",""):e.list_component=e.list_component.replace(o+";"+o+"("+n+");","")}}},this.getInfoErrror=()=>{let e=[];var t=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==t&&t.hasOwnProperty("getValidateForm")){let i=t.getValidateForm();for(let t=0;t<i.length;t++){const o=i[t];e.push(o.key+": "+o.info)}}if(e.length>0)return{info:e,key:this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}},this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(var o=0;o<t.length;o++)this.readData(t[o],e.inform)}else this.readData(i,e.inform)},this.checkValidate=()=>{let e=!1;var t=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==t&&(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport")&&(t.callDirFromSupport("clearError",{},{}),t.callDirFromSupport("checkValidate",{},{}),t.hasOwnProperty("getFormValidate")&&(e=t.getFormValidate()))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{!0!==this.props.config.notReload&&this.setState({value:this.data_default},(()=>{this.reloadForm(this.muti_form_didMount[0])}))},this.getDataCallForm=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var i=s.ZP.getFormAppAuto(e);if(void 0===i)return"";if(i.hasOwnProperty("setFormValidateFromFunctionClient")&&i.setFormValidateFromFunctionClient(!1),i.hasOwnProperty("callDirFromSupport")){let e=!1;if(!1!==t&&(i.callDirFromSupport("clearError",{},{}),i.callDirFromSupport("checkValidate",{},{}),e=i.getFormValidate()),!e&&(i.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),i.hasOwnProperty("getData")))return i.getData("")}},this.toolAutoValue=()=>{var e=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("toolAutoValue",{list_component:"*"},{})},this.setCMD=(e,t)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,e.list_component);n||(n="*"),i.callDirFromSupport("setCMD",{list_component:n},t);let{CMD:r}=this.state,l=Object.assign(s.ZP.cloneJson(r),t);for(let e in l)l[e]="true"===String(l[e]);this.setState({CMD:l})}},this.clearError=()=>{var e=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);void 0!==e&&e.hasOwnProperty("clearError")&&e.clearError()},this.reloadForm=e=>{var t=s.ZP.getFormAppAuto(e);void 0!==t&&(t.hasOwnProperty("reload")&&t.reload({}),t.hasOwnProperty("clearError")&&t.clearError())},this.setDataCallForm=e=>{if(this.muti_form_didMount.length>0){var t=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);void 0!==t?this.isLoading&&(void 0!==e?t.putDataAll_andSet(e):t.clearForm(),this.setState({isLoadingComponent:!1})):s.ZP.AppException("#jMutivalue.setDataCallForm","form is undefined","system")}else s.ZP.AppException("#jMutivalue.setDataCallForm","muti_form_didMount is 0","system");this.setState({isLoadingComponent:!1})},this.renderButton=()=>{let e=this.state.isOpenForm;return(0,l.jsx)("div",{style:{height:"34px"},children:(0,l.jsx)("div",{className:"btn btn-primary","data-toggle":"collapse",href:"#collapseOne"+this.id_component,onClick:()=>{this.setState({isOpenForm:!e})},children:e?(0,l.jsx)("i",{className:"fa fa-minus-circle","aria-hidden":"true"}):(0,l.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true"})})})},this.config={},this.component_code=s.ZP.autoID(),this.props.config&&(this.config=this.props.config),this.ref_callForm=a.createRef(),this.data_default="",void 0!==this.config.data_default&&(this.data_default=this.config.data_default);let t=this.props.validate;void 0===t&&(t={}),this.data_select={};let i=this.props.lang;void 0===i&&(i={}),this.is_open="true"===this.config.is_open,this.state={value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpenForm:this.is_open,call_form:this.props.config.callform||"",isLoadingComponent:!0,CMD:{}},this.id_component=s.ZP.autoID(),this.isLoading=!1,this.isErrorLoadForm=!1,this.muti_form_didMount=[]}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.lang!==e.lang&&this.setState({lang:this.props.lang}),this.props.validate!==e.validate&&this.setState({validate:this.props.validate}),this.props.property!==e.property&&this.setState({property:this.props.property})}componentDidMount(){let e=this.props.config.callform;e&&""!==e.trim()&&void 0!==this.ref_callForm.current&&(0,h.BR)(e,this.ref_callForm.current,this.props.infoA,(0,o.Z)((0,o.Z)({},this.props.default),{},{isReloadValidate:!0}),this.props.default.codeHidden),setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){let i=this.getDataCallForm(this.muti_form_didMount[0],!1);if(e.includes(".")){let o=e.split(".");if(void 0===t)s.ZP.putData(o[0],o[1],i.muti,this.props.infoA);else if("true"===t&&void 0!==i){let{address_default:e,value_default:t,has_default:a}=this.props.config;if(s.ZP.putData(o[0],o[1],i.muti,this.props.infoA),"true"===a){let o=e.split(".")||[],a=t.split(".")||[];if(2===o.length&&2===a.length){let e=i||{};e=e[a[0]]||{},e=e[a[1]],s.ZP.putData(o[0],o[1],e,this.props.infoA)}}}else"false"===t?s.ZP.putDataGB(o[0],o[1],i):s.ZP.putDataGB(o[0],o[1],"")}}render(){let e=this.state.lang||{};e=e[this.state.lang_select]||this.props.default.name;const t=(0,n.RP)("uMultiValue");return(0,l.jsx)(t,{title:e,class:this.props.default.class,isLoadingEnd:!this.state.isLoadingComponent,isOpenDefault:this.state.isOpenForm,component_code:this.component_code,children:(0,l.jsx)("div",{ref:this.ref_callForm})})}}const nt=st;class rt{}rt.getProperty=()=>({main:[{tagType:{style:[{backgroundColor:"#ff471a"},{marginRight:"4px"}],attr:[{tabIndex:-1}],class:"tag label label-info tag-focus"}},{tagData:{style:[{backgroundColor:"#adad85"},{marginRight:"4px"}],attr:[{tabIndex:-1}],class:"tag label label-info tag-focus"}}],position:[{tagRemove:{style:[{marginRight:"10px"}],attr:[{tabIndex:-1}],class:""}}]});const lt=rt;class ct extends a.Component{constructor(e){super(e),this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.set=(e,t)=>{if(this.setState({value_selected:[]}),void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var i=this.props.config.structable_read.split(".");if(i.length>0&&void 0!==t[i[0]]&&void 0!==t[i[0]][i[1]]&&0!==t[i[0]][i[1]].length){let e=[],o=this.state.data_search;for(let a of t[i[0]][i[1]].split(";"))0===this.getDataFromValueSelected(a).length?e.push(a):e=e.concat(this.getDataFromValueSelected(a));for(let t of e)o=o.filter((e=>e!==t));return void this.setState({value_selected:e,data_search:o})}}this.setState({value:""})}},this.setAdvanced=(e,t)=>{if(e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.setGetInfo=(e,t)=>{if(t=t[this.props.default.code],e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.get=(e,t)=>{var i=!0;if(e.checkError&&"false"===e.checkError&&(i=!1),!i){var o=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(o=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(o=!0),o)){if(0!==this.state.value_selected.length){let e=[];for(let t of this.state.value_selected)"string"===typeof t?e.push(t):e.push(s.ZP.getOOP(t,this.state.config_.type_value_string_config));this.setState({result_:e.join(this.state.config_.separator_config)})}var a=this.props.config.structable;if(a.includes("|"))for(var n=a.split("|"),r=0;r<n.length;r++)this.readData(n[r],e.inform);else this.readData(a,e.inform)}}},this.checkValidate=()=>{let e=!1,t=this.state.value_selected;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&0===t.length&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"}))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default,value_selected:[]})},this.onClickSelected=e=>{if(!this.state.value_selected.includes(e)){let t=this.state.data_search.filter((t=>t!==e));this.setState({value_selected:[...this.state.value_selected,e],data_search:t})}},this.onClickRemove=e=>{let t=this.state.value_selected.filter((t=>t!==e));"string"===typeof e?this.setState({value_selected:t}):this.setState({value_selected:t,data_search:[...this.state.data_search,e]})},this.getDataFromValueSelected=e=>{let t=s.ZP.convertStringToEn(e).replace(/ /g,""),i="";for(let o of this.state.config_.data_display_array)for(let e of this.state.data_search){s.ZP.convertStringToEn(s.ZP.getOOP(e,o)).replace(/ /g,"")===t&&(i=e)}return i},this.handleSearch=e=>{let t=this.state.arr_,i=this.state.value_selected,o=this.state.config_.data_display_array,a=s.ZP.convertStringToEn(e.target.value.trim()).replace(/ /g,""),n=[],r=[];if(0!==e.target.value.length&&0===i.length){for(let e of t)for(let t of o){s.ZP.convertStringToEn(s.ZP.getOOP(e,t)).replace(/ /g,"").includes(a)&&-1===n.indexOf(e)&&n.push(e)}r=n}if(0===e.target.value.length&&0===i.length&&(r=t),0!==i.length&&0===e.target.value.length){for(let e=0;e<i.length;e++)t=t.filter((t=>t!==i[e]));r=t}if(0!==i.length&&0!==e.target.value.length){for(let e=0;e<i.length;e++)t=t.filter((t=>t!==i[e]));for(let e of t)for(let t of o){s.ZP.convertStringToEn(s.ZP.getOOP(e,t)).replace(/ /g,"").includes(a)&&-1===n.indexOf(e)&&n.push(e)}r=n}this.setState({data_search:r})},this.handleChangeValue=e=>{const{name:t,value:i}=e.target;this.setState({[t]:i})},this.handleKeyDownForInput=e=>{switch(e.keyCode){case 37:if(0!==this.state.value_selected.length){let e=this.state.value_selected.length-1;this.refs["tag_"+e.toString()].focus(),this.setState({current_tag:e})}break;case 40:"true"===this.state.config_.isSearch_config?this.refs.input_search.focus():0!==this.state.data_search.length&&(this.refs.tr_0.focus(),this.setState({current_tableRow:0}));break;case 13:if(""!==e.target.value)if(this.state.value_selected.some((t=>t===e.target.value))){let t=this.state.value_selected.findIndex((t=>t===e.target.value));this.refs["tag_"+t.toString()].focus(),this.setState({current_tag:t,value:""})}else this.setState({value_selected:[...this.state.value_selected,e.target.value],value:""})}},this.handleKeyDownForInputSearch=e=>{switch(e.keyCode){case 38:this.refs.input_import.focus();break;case 40:0!==this.state.data_search.length&&(this.refs.tr_0.focus(),this.setState({current_tableRow:0}))}},this.handleKeyDownForSpanTag=e=>{let t=this.state.value_selected.length-1,i=this.state.current_tag-1,o=this.state.current_tag+1;switch(e.keyCode){case 37:this.state.current_tag>=0&&i>=0&&(this.refs["tag_"+i.toString()].focus(),this.setState({current_tag:i<0?0:i}));break;case 39:this.state.current_tag===t?(this.refs.input_import.focus(),this.setState({current_tag:void 0})):this.state.current_tag<t&&(this.refs["tag_"+o.toString()].focus(),this.setState({current_tag:o>t?t:o}));break;case 46:this.onClickRemove(this.state.value_selected[this.state.current_tag]),this.state.current_tag===t&&0!==this.state.current_tag&&(this.refs["tag_"+(0!==t&&t-1).toString()].focus(),this.setState({current_tag:0!==t&&t-1}))}},this.handleKeyDownForTable=e=>{let t=this.state.data_search.length-1,i=this.state.current_tableRow-1,o=this.state.current_tableRow+1;switch(e.keyCode){case 38:0===this.state.current_tableRow?"true"!==this.state.config_.isSearch_config?this.refs.input_import.focus():this.refs.input_search.focus():this.state.current_tableRow>0&&(this.refs["tr_"+i.toString()].focus(),this.setState({current_tableRow:i<0?0:i}));break;case 40:this.state.current_tableRow<t&&(this.refs["tr_"+o.toString()].focus(),this.setState({current_tableRow:o>t?t:o}));break;case 13:let e=this.refs["hiddenInput_"+this.state.current_tableRow.toString()].value;for(let t of this.state.config_.data_display_array){let i=this.state.data_search.filter((i=>s.ZP.getOOP(i,t).includes(e)));0!==i.length&&this.onClickSelected(i[0])}this.state.current_tableRow===t&&0!==t&&(this.refs["tr_"+(t-1).toString()].focus(),this.setState({current_tableRow:t-1}))}},this.renderTable=()=>(0,l.jsx)("div",{className:"selectize-dropdown-content",children:(0,l.jsx)("table",{id:"myTable",className:"table table-hover table-bordered table-striped",children:"true"===this.state.config_.format_col_config?(0,l.jsx)("tbody",{children:this.state.data_search.map(((e,t)=>(0,l.jsx)("tr",{style:{cursor:"pointer"},tabIndex:"-1",ref:"tr_"+t,onKeyDown:this.handleKeyDownForTable,onClick:()=>{this.onClickSelected(e)},children:"json"!==this.state.config_.data_type_config?this.state.config_.data_display_array.map(((i,o)=>(0,l.jsxs)("td",{children:[s.ZP.getOOP(e,i),this.state.config_.data_display_array[0]===i&&(0,l.jsx)("input",{ref:"hiddenInput_"+t,value:s.ZP.getOOP(e,this.state.config_.data_display_array[0]),hidden:!0,readOnly:!0})]},o))):this.state.config_.data_display_array.map(((t,i)=>(0,l.jsx)("td",{children:e[t]},i)))},t)))}):(0,l.jsx)("tbody",{children:this.state.data_search.map(((e,t)=>(0,l.jsx)("tr",{style:{cursor:"pointer"},tabIndex:"-1",ref:"tr_"+t,onKeyDown:this.handleKeyDownForTable,onClick:()=>{this.onClickSelected(e)},children:"json"!==this.state.config_.data_type_config?(0,l.jsxs)("td",{children:[this.convertMixDisplay(e),(0,l.jsx)("input",{ref:"hiddenInput_"+t,value:s.ZP.getOOP(e,this.state.config_.data_display_array[0]),hidden:!0,readOnly:!0})]}):(0,l.jsx)("td",{children:this.convertMixDisplay(e)})},t)))})})}),this.renderTag=()=>this.state.value_selected.map(((e,t)=>(0,l.jsx)("span",{children:-1===this.state.arr_.indexOf(e)?(0,l.jsxs)("span",(0,o.Z)((0,o.Z)({className:"tagInput "+this.state.property.main.tagType.class},this.state.property.main.tagType.attr),{},{ref:"tag_"+t,style:this.state.property.main.tagType.style,onKeyDown:this.handleKeyDownForSpanTag,children:[e,(0,l.jsx)("span",{"data-role":"remove",className:"tag-style",onClick:()=>{this.onClickRemove(e)}})]})):(0,l.jsxs)("span",(0,o.Z)((0,o.Z)({className:"tagInput "+this.state.property.main.tagData.class,ref:"tag_"+t},this.state.property.main.tagData.attr),{},{style:this.state.property.main.tagData.style,onKeyDown:this.handleKeyDownForSpanTag,children:["json"!==this.state.config_.data_type_config?s.ZP.getOOP(e,this.state.config_.tag_display_config):e[this.state.config_.tag_display_config],(0,l.jsx)("span",{"data-role":"remove",className:"tag-style",onClick:()=>{this.onClickRemove(e)}})]}))},t))),this.convertMixDisplay=e=>{let t=this.state.config_.display_mixing_col_config,i=s.ZP.component_getListCode(this.state.config_.display_mixing_col_config);if("json"!==this.state.config_.data_type_config)for(let o of i)t=t.replace(o.key,s.ZP.getOOP(e,o.code));else for(let o of i)t=t.replace(o.key,e[o.code]);return t.trim()},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.renderMess=e=>s.ZP.getLang(e),this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var t=this.props.validate;void 0===t&&(t={}),this.callform_detail="",this.callform="",this.data_select={};var i=s.ZP.component_propertyIndex(this.props.property.properties,lt.getProperty());void 0===i&&(i={});var a=this.props.lang;void 0===a&&(a={});var n="";void 0!==this.props.config.data_type&&(n=this.props.config.data_type);var r="false";void 0!==this.props.config.isSearch&&(r=this.props.config.isSearch);var c="true";void 0!==this.props.config.format_col&&(c=this.props.config.format_col);var d="";void 0!==this.props.config.tag_display&&(d=this.props.config.tag_display);var h="";void 0!==this.props.config.data_gb&&(h=this.props.config.data_gb);var u="";void 0!==this.props.config.cdlist&&(u=this.props.config.cdlist);var p="";void 0!==this.props.config.data_display&&(p=this.props.config.data_display);var _="";void 0!==this.props.config.title_tag_input&&(_=this.props.config.title_tag_input);var f="";void 0!==this.props.config.type_value_string&&(f=this.props.config.type_value_string);var g=";";void 0!==this.props.config.separator&&(g=this.props.config.separator);var m="";void 0!==this.props.config.display_mixing_col&&(m=this.props.config.display_mixing_col),this.state={value:this.data_default,value_old:"",lang:a,lang_select:s.ZP.getLangKey(),validate:t,property:i,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",value_selected:[],arr_:[],data_search:[],result_:"",config_:{data_display_array:p.split(";"),query_db:h,isSearch_config:r,format_col_config:c,title_tag_input_config:_,type_value_string_config:f,separator_config:g,display_mixing_col_config:m,cdlist_config:u,data_type_config:n,tag_display_config:d},current_tag:void 0,current_tableRow:void 0,hover_event:!1}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent()),this.setState({data_search:this.state.arr_})}UNSAFE_componentWillMount(){switch(this.state.config_.data_type_config){case"database":0!==this.state.config_.query_db.length&&this.setState({arr_:s.ZP.getDataLimited(this.state.config_.query_db,0,999999).data});break;case"cdlist":let e=this.state.config_.cdlist_config.cdgrp,t=this.state.config_.cdlist_config.cdname;this.setState({arr_:s.ZP.data_cdList(e,t)||[]});break;case"json":if(void 0!==this.props.config.data_json){let e=s.ZP.parseJson(this.props.config.data_json);void 0!==e&&this.setState({arr_:e})}}}readData(e,t){if(e.includes(".")){var i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.state.result_,this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.state.result_):s.ZP.putDataGB(i[0],i[1],"")}}render(){return(0,l.jsxs)("div",{ref:"jTagInput",children:[(0,l.jsxs)("div",{className:this.props.default.class,children:[(0,l.jsx)("label",{style:{fontWeight:400},children:void 0!==this.state.lang&&(void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:""!==this.state.config_.title_tag_input_config?this.state.config_.title_tag_input_config:this.props.default.name)}),(0,l.jsx)("div",{className:""!==this.state.help_css?"form-group has-"+this.state.help_css+" has-feedback":"prtm-block-content",children:(0,l.jsx)("div",{className:"bootstrap-tagsinput tag-input",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-sm-6 cont-tag",children:this.renderTag()}),(0,l.jsx)("div",{className:"col-sm-6 cont-main",children:(0,l.jsx)("div",{className:"selectize-control selectize-optgroup single plugin-optgroup_columns",children:(0,l.jsxs)("div",{className:"items has-options not-full",children:[(0,l.jsx)("input",{type:"text",className:"tag-register",ref:"input_import",autoComplete:"off",name:"value",placeholder:s.ZP.getLang("jTagInput_register_Input"),value:this.state.value,onChange:this.handleChangeValue,onKeyDown:this.handleKeyDownForInput}),(0,l.jsxs)("div",{className:"selectize-dropdown single selectize-optgroup plugin-optgroup_columns table-data cont-table",children:["true"===this.state.config_.isSearch_config&&(0,l.jsxs)("div",{className:"cont-search",children:[(0,l.jsx)("input",{type:"text",className:"tag-search",ref:"input_search",placeholder:s.ZP.getLang("jTagInput_search_Input"),name:"value_search",onKeyDown:this.handleKeyDownForInputSearch,onChange:this.handleSearch}),(0,l.jsx)("i",{className:"fa fa-search tag-remove"})]}),0!==this.state.data_search.length&&this.renderTable()]})]})})})]})})})]}),""!==this.state.help_icon&&(0,l.jsx)("span",{className:"glyphicon "+this.state.help_icon+" form-control-feedback","aria-hidden":"true"}),""===this.state.help_mess&&(0,l.jsx)("small",{className:"form-text text-danger",children:"\xa0"}),""!==this.state.help_mess&&(0,l.jsx)("small",{className:"form-text text-danger",children:this.renderMess(this.state.help_mess)})]})}}const dt=ct;class ht extends a.Component{constructor(){super(...arguments),this.getInfoCheckRun=()=>({view:this.props.infoView,default:this.props.default}),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.printComponent=()=>{let e=s.ZP.getFormAppAuto(this.props.infoA.key_form).callDirFromSupport("getElearning",{},{}),t=window.open("","","height=600,width=1200");for(let o in e){if(void 0===e[o])return;let a="",s="",n="",r="";if(null!==document.querySelector("code")&&void 0!==document.querySelector("code")){let e=window.getComputedStyle(document.querySelector("code"));for(let t=0;t<e.length;t++)a+=e[t]+":"+e.getPropertyValue(e[t])+";"}if(null!==document.querySelector("p")&&void 0!==document.querySelector("p")){let e=window.getComputedStyle(document.querySelector("p"));for(let t=0;t<e.length;t++)s+=e[t]+":"+e.getPropertyValue(e[t])+";"}if(null!==document.querySelector("pre")&&void 0!==document.querySelector("pre")){let e=window.getComputedStyle(document.querySelector("pre"));for(let t=0;t<e.length;t++)n+=e[t]+":"+e.getPropertyValue(e[t])+";"}if(null!==document.querySelector("blockquote")&&void 0!==document.querySelector("blockquote")){let e=window.getComputedStyle(document.querySelector("blockquote"));for(let t=0;t<e.length;t++)r+=e[t]+":"+e.getPropertyValue(e[t])+";"}var i=`code {${a}}p {${s}}pre {${n} height: auto; width: auto;}blockquote {${r} height: auto; width: auto;}hr {page-break-before:always;}`;t.document.write('<html><head><style type="text/css">'),t.document.write(i),t.document.write("</style></head><body>"),t.document.write(e[o].innerHTML),t.document.write("</body></html>")}t.document.close(),t.print()}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}render(){return(0,l.jsx)("div",{className:this.props.default.class,children:(0,l.jsx)("div",{style:{textAlign:"right"},children:(0,l.jsx)("button",{className:"btn btn-primary",onClick:()=>this.printComponent(),children:s.ZP.getLang("jButtonPrint_title")})})})}}const ut=ht;class pt extends a.Component{constructor(e){super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.setCMD=(e,t)=>{},this.getAdvanced=(e,t)=>{},this.getDataOOP=(e,t)=>{const{list_component:i}=e,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.setDataGB=(e,t)=>{},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var i=this.props.config.structable_read.split(".");if(i.length>0&&void 0!==t[i[0]]&&void 0!==t[i[0]][i[1]])return void this.setState({value:t[i[0]][i[1]]})}this.setState({value:""})}},this.setAdvanced=(e,t)=>{if(e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.setGetInfo=(e,t)=>{if(t=t[this.props.default.code],e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.get=(e,t)=>{var i=!0;if(e.checkError&&"false"===e.checkError&&(i=!1),!i||!this.checkValidate()){var o=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(o=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(o=!0),o)){var a=this.props.config.structable;if(a.includes("|"))for(var s=a.split("|"),n=0;n<s.length;n++)this.readData(s[n],e.inform);else this.readData(a,e.inform)}}},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default})},this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);let t=this.props.validate;void 0===t&&(t={}),this.callform_detail="",this.callform="",this.data_select={};let i=this.props.lang;void 0===i&&(i={}),this.state={value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:""}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){if(e.includes(".")){var i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}render(){return(0,l.jsx)("div",{className:this.props.default.class,children:"jTableCalculator"})}}const _t=pt;class ft extends a.Component{constructor(e){switch(super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCMD=(e,t)=>{const{CMD:i}=this.state||{};let o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)"true"===o[a]&&(o[a]=!0),"false"===o[a]&&(o[a]=!1);this.setState({CMD:o})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.renderDebug=()=>{if(s.ZP.isDebug()){let e=this.props.config.structable.split(".")[1],t=this.data_debug.data_cpn;return null===t&&(t="NULL"),void 0===this.props.config.cdlist&&(this.props.config.cdlist={}),(0,l.jsx)(a.Fragment,{children:(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${e}|:|${t}|`})})}},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){let e=this.props.config.structable_read.split(".");if(e.length>0&&void 0!==t[e[0]]&&(this.data_debug.data_cpn=t[e[0]][e[1]],void 0!==t[e[0]][e[1]])){let i=t[e[0]][e[1]]===this.IS_CHECKED;return void this.setState({value:i})}}this.setState({value:!1},(()=>{this.runRule("enter_tab")}))}},this.setAdvanced=(e,t)=>{if(e.codeHidden){if(e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o},(()=>{this.runRule("enter_tab")}))}}else{let e=t===this.IS_CHECKED;this.setState({value:e},(()=>{this.runRule("enter_tab")}))}},this.setGetInfo=(e,t)=>{if(t=t[this.props.default.code],e.codeHidden){if(e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o},(()=>{this.runRule("enter_tab")}))}}else{let e=t===this.IS_CHECKED;this.setState({value:e},(()=>{this.runRule("enter_tab")}))}},this.get=(e,t)=>{var i=this.props.config.structable;if(i.includes("|"))for(var o=i.split("|"),a=0;a<o.length;a++)this.readData(o[a],e.inform);else this.readData(i,e.inform)},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.state.help_mess=s.ZP.getLang("validateRequest"),this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.getAdvanced=(e,t)=>!0===this.state.value?this.IS_CHECKED:this.IS_UNCHECKED,this.reload=(e,t)=>{this.setState({value:this.getValueDefault()},(()=>{this.runRule("reload")}))},this.runRule=e=>{if(e){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.props.config.checked_mode||"Y_N"){case"true_false":this.IS_CHECKED=!0,this.IS_UNCHECKED=!1;break;case"1_0":this.IS_CHECKED=1,this.IS_UNCHECKED=0;break;default:this.IS_CHECKED="Y",this.IS_UNCHECKED="N"}this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var t=this.props.validate;void 0===t&&(t={}),this.callform_detail="",this.callform="",this.data_select={};var i=this.props.lang;void 0===i&&(i={}),this.state={value:this.getValueDefault(),value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{}},this.data_debug={}}getValueDefault(){switch(this.props.config.checked_mode){case"true_false":return"true"===String(this.data_default);case"1_0":return"1"===String(this.data_default);default:return"Y"===String(this.data_default)}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){if(e.includes(".")){var i=e.split(".");void 0===t?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"true"===t?s.ZP.putData(i[0],i[1],!0===this.state.value?this.IS_CHECKED:this.IS_UNCHECKED,this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}render(){var e,t;if(!1===this.state.CMD.visible)return null;let i=(0,n.RP)("uCheckBox");const a=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(a,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(i,{dataFull:{class:this.props.default.class,title:(null===(e=this.state.lang)||void 0===e?void 0:e[this.state.lang_select])||this.props.default.name,value:this.state.value,config:{cmd:{disable:this.state.CMD.disabled+""==="true"}},abs_Click:()=>{this.setState({value:!this.state.value},(()=>{this.runRule("checked")}))}}}),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(i,{dataFull:{class:this.props.default.class,title:(null===(t=this.state.lang)||void 0===t?void 0:t[this.state.lang_select])||this.props.default.name,value:this.state.value,config:{cmd:{disable:this.state.CMD.disabled+""==="true"}},abs_Click:()=>{this.setState({value:!this.state.value},(()=>{this.runRule("checked")}))}}})}}const gt=ft,mt={structable:"",structable_read:"",data_default:"",format:"#,###.00",decimal_length:2};class vt extends a.Component{constructor(e){var t;super(e),t=this,this.getDataOOP=(e,t)=>this.data_select,this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setCallBuildFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setValidate=(e,t)=>{const{validate:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);i.request!==o.request&&this.setState({validate:o})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]&&""!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:e,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{layout_index:this.props.layoutIndex,component_code:this.component_code,view_code:this.props.viewID})}}return""},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.toolAutoValue=()=>{"false"!==String(this.state.CMD.disabled)&&"false"!==String(this.state.CMD.visible)||this.setValue(1,this.isNegative,"enter_tab")},this.setAdvanced=(e,t)=>{if(e.codeHidden){if(e.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){let e="";void 0!==this.props.config.data_value&&(e=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),this.setValue(e,this.isNegative,"enter_tab")}}else if(e.list_component){let{list_component:i}=e,{code:o}=this.props_smooth.default;if(void 0!==t&&null!==t||(t=""),i){i.split(";").includes(o)&&this.setValue(t,this.isNegative,"enter")}}else this.setValue(t,this.isNegative,"enter")},this.setGetInfo=(e,t)=>{if(t=t[this.props.default.code],e.codeHidden){if(e.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){let e="";void 0!==this.props.config.data_value&&(e=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),this.setValue(e,this.isNegative,"enter_tab")}}else if(e.list_component){let{list_component:i}=e,{code:o}=this.props_smooth.default;if(void 0!==t&&null!==t||(t=""),i){i.split(";").includes(o)&&this.setValue(t,this.isNegative,"enter")}}else this.setValue(t,this.isNegative,"enter")},this.set=(e,t)=>{let i=this.props_smooth.config.structable_read?s.ZP.getNodeJson(t,this.props.config.structable_read):this.props_smooth.config.data_default;void 0!==i?this.setValue(i,this.isNegative):this.setDataDefault()},this.getAdvanced=(e,t)=>this.getValue(),this.get=(e,t)=>{let i=this.props.config.structable.split("|"),o=this.getValue();for(const a of i){let t=a.split(".");if("false"===e.inform)s.ZP.putDataGB(t[0],t[1],o);else s.ZP.putData(t[0],t[1],o,this.props.infoA)}},this.checkValidate=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=!1,o=t.getValue(),a="";const{request:n,max:r,min:l,max_length:c}=t.state.validate;if(void 0!==o&&""!==o||"true"!==n.toString())if(void 0!==o){let e=t.state.value.replace(/\D/g,"");e.length>Number(c)&&Number(c)>0&&encodeURI(e).split(/%..|./).length-1>Number(c)?(i=!0,a="jCurrency_maxLength"):o>Number(r)&&null!==r&&void 0!==r&&""!==r?(i=!0,a="validateNumMax"):(o<Number(l)||""===o)&&null!==l&&void 0!==l&&""!==l&&(i=!0,a="validateNumMin")}else""===t.state.value&&null!==l&&void 0!==l&&""!==l&&!0===e&&(i=!0,a="validateNumMin");else i=!0,a="validateRequest";if(t.state.help_mess=a,t.setState({help_mess:a}),i){var d=s.ZP.getFormAppAuto(t.props.infoA.key_form);void 0!==d&&d.setFormValidateFromComponent(!0,t.props.default)}return i},this.convertConfigWithContext=e=>{let t=e,i=s.ZP.getlistCodeContext(e);for(const o of i){let e=s.ZP.context_get(o.code)||"";t=t.replace(o.key,e),"number"===typeof e&&(t=Number(t))}return t},this.reload=(e,t)=>{this.setValue(this.props_smooth.config.data_default,this.isNegative,"reload")},this.setDataDefault=()=>{this.setValue(this.props_smooth.config.data_default,this.isNegative)},this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.onBlur=async()=>{if(void 0!==this.state.value&&!this.state.value.includes("-.")&&0!==Number(this.state.value)||""===this.state.value||await this.setValue(0),!1===this.checkValidate(!0)&&!0===this.state.isChange){this.setState({isChange:!1}),this.onRunRule("enter_tab");let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(e.buildValidateForm(!1),e.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.buildValidateForm(!1)}}))}this.onFocus=!1},this.UNSAFE_componentWillUpdate=(e,t)=>{this.realtime_value=t.value},this.onChange=e=>{let t=e.target,{selectionStart:i,value:o}=t,{decimal_char:a,int_char:s,decimal_length:n}=this,r=this.state.value,l=o;if(l.includes("-")&&!1===this.isNegative)return void this.setState({value:r},(()=>{t.setSelectionRange(0,0)}));if(r.includes(a)&&!o.includes(a)&&a){let e=r.lastIndexOf(a);l=o.substring(0,e)+a+o.substring(e,o.length),l===a&&(l="")}let c=r,d=o.lastIndexOf(a);o.indexOf(a)!==o.lastIndexOf(a)&&a?d=c.length-n:(c=(0,Y.Nx)(l,n,s,a,!1)||"",d=i-(o.length-c.length),1===i?d=1:(i>o.lastIndexOf(a)||o[d]===this.int_char)&&(d+=1));let h=c.replace(/\D/g,""),u=this.props_smooth.validate.max_length;h.length>Number(u)&&Number(u)>0&&(c=r),this.setState({value:c,isChange:!0},(()=>{t.setSelectionRange(d,d)}))},this.renderThisComponent=()=>{const e=(0,n.RP)("uInput");if("true"===String(this.props.config.isLabel)){const e=(0,n.RP)("uLabel");return(0,l.jsx)(e,{dataFull:{config:{default:{title:null!==this.state.value&&void 0!==this.state.value?this.state.value:"",class:this.props_smooth.default.class},cmd:{visible:"false"!==String(this.state.CMD.visible)}}}})}return(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChange,abs_Blur:this.onBlur})})},this.modalToggle=e=>{e||this.buildFormChild(),!0!==this.state.CMD.disabled&&(void 0===e?this.setState({show_modal:s.ZP.autoID()}):e&&(this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})))},this.abs_CloseModal=()=>{this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})},this.renderMess=e=>{switch(e){case"validateNumMin":return s.ZP.getLang(e).replace("{count}",this.props_smooth.validate.min);case"validateNumMax":return s.ZP.getLang(e).replace("{count}",this.props_smooth.validate.max);case"validateRequest":default:return s.ZP.getLang(e);case"jCurrency_maxLength":return s.ZP.getLang(e).replace("@{max_length}",this.props_smooth.validate.max_length)}},this.props.config.data_default=this.convertConfigWithContext(this.props.config.data_default),this.props_smooth=this.getConfigSmooth(this.props),this.renderFormChildDone=!1,this.component_code=s.ZP.autoID(),this.int_char=s.ZP.getElementWithRegex(/#(\D)#/,this.props_smooth.config.format)||"",this.decimal_char=s.ZP.getElementWithRegex(/#(\D)0/,this.props_smooth.config.format)||"",this.decimal_length=this.props_smooth.config.decimal_length,""!==this.decimal_char&&this.decimal_char!==this.int_char||(this.decimal_length=0),this.isNegative=!1,(void 0===(0,Y.XG)(this.props_smooth.validate.min)||(0,Y.XG)(this.props_smooth.validate.min)<0)&&(this.isNegative=!0);let i=this.props_smooth.validate;void 0===i&&(i={}),this.state={isLookup:"true"===this.props.config.isLookup,help_css:"",help_icon:"",help_mess:"",value:"",CMD:{},validate:i,isChange:!1,renderFormChildDone:!1,id_component:s.ZP.autoID(),lang:this.props.lang,lang_select:s.ZP.getLangKey(),hasErrorInForm:!1},this.onFocus=!1,this.data_debug={}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent()),this.setValue(this.props_smooth.config.data_default,this.isNegative)}onRunRule(e){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}getConfigSmooth(e){let t=s.ZP.cloneJson(e);return t.config=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.Z)({},mt);for(let i in t)void 0!==e[i]&&(""!==t[i]&&""===e[i]||(t[i]=e[i]));return t||{}}(t.config),t.validate.max_length&&!Number(t.validate.max_length>16)||(t.validate.max_length=16),t}getValue(){let e=this.realtime_value;return void 0===e&&(e=this.state.value),(0,Y.XG)(e,this.int_char,this.decimal_char)}setValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.isNegative,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on_change";null!==e&&void 0!==e||(e=""),e+="";const{decimal_char:o,int_char:a,decimal_length:s}=this;let n=(0,Y.Nx)(e,s,a,o);(void 0===n||n.includes("-")&&!1===t)&&(n=""),0===Number(n)&&""!==n&&(n=(0,Y.Nx)(0,s,a,o)),this.realtime_value=n,this.setState({value:n,help_css:"",help_icon:"",help_mess:""},(()=>{this.onRunRule(i||"on_change")}))}render(){const e=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(e,{class:this.props.default.class_ofgroup+("false"===String(this.state.CMD.visible)?" malibu-invisible":""),children:[(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]}),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]})}buildFormChild(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let e=s.ZP.cloneJson(this.props.infoA);e.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props.default,"callform;"+this.state.id_component)}}getConfigTemplate(){var e;return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{title:(null===(e=this.state.lang)||void 0===e?void 0:e[this.state.lang_select])||this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.state.validate.request,icon:!0===this.state.isLookup?"search":"",placeholder:"true"===String(this.state.CMD.disabled)?" ":"",component_code:this.component_code},cmd:{disable:this.state.CMD.disabled+""==="true",visible:this.state.CMD.visible+""!=="false",error:{message:this.renderMess(this.state.help_mess),type:""}},mode:{textAlign:"right"}},mode:{readOnly:"true"===String(this.props.config.readOnly)},valueTitleHover:this.state.CMD.disabled+""!=="true"?"":this.state.value,value:this.state.value}}}const bt=vt;var yt=i(1203);class At extends a.Component{constructor(e){super(e),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>{},this.getDataOOP=(e,t)=>{const{list_component:i}=e,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.setDataGB=(e,t)=>{},this.set=(e,t)=>{let i=t,o=this.state.json_path.split(".");if(void 0!==this.state.node_data_print&&void 0!==i[this.state.node_data_print]&&null!==i[this.state.node_data_print]&&""!==i[this.state.node_data_print]||this.setState({first_print:!1}),void 0!==i){if(o.length>0)for(let e=0;e<o.length;e++)void 0!==i[o[e]]&&(i=i[o[e]]);this.setState({value:i,first_print:!0})}else this.setState({value:""})},this.setAdvanced=(e,t)=>{},this.setGetInfo=(e,t)=>{t=t[this.props.default.code]},this.get=(e,t)=>{let i=!0;if(e.checkError&&"false"===e.checkError&&(i=!1),!i||!this.checkValidate()){let t=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(t=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(t=!0),t)){let t=this.props.config.structable;if(t.includes("|")){let i=t.split("|");for(let t=0;t<i.length;t++)this.readData(i[t],e.inform)}else this.readData(t,e.inform)}}},this.checkValidate=()=>{let e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),e){let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.printed=!1,this.setState({value:this.data_default})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.getValueByParam=e=>{let t=this.state.value;if(void 0!==t&&0!==t.length){if(-1===e.indexOf("."))return void 0!==t[e]&&0!==t[e].length?t[e]:"";{let i=e.split("."),o="";if(void 0!==t[i[0]]){for(let e=0;e<t[i[0]].length;e++){const a=t[i[0]][e];if(a[i[2]]){let e=a[i[2]]+"&"+a.order;o+=""===o?e:","+e}}return 0!==o.length?o:""}return""}}},this.printReportHandler=()=>{if(void 0!==this.props.config.useAction){let e=this.props.config.list_report.split(",");if("true"===this.props.config.useAction){let e=this.props.config.list_report.split(","),t=s.ZP.parseJson(this.props.config.txFoActions);void 0!==t&&_.ZP.runActionWithContext(t,{list_template_code:e},this.props.infoA,this.props.infoA_parent,this.props.default)}else if(void 0!==this.props.config.txFo){let t=s.ZP.parseJson(this.props.config.txFo);void 0!==t&&_.ZP.runFoWithContext(t,{list_template_code:e},this.props.infoA,this.props.infoA_parent,this.props.default)}}},this.printVoucher=()=>{if("type"===this.props.config.get_voucher_way)yt.Qf(this.props.config.list_report,this.printReportHandler);else{if(0===this.state.value.length)return;{let e=this.state.node_data_print.split(".");void 0!==this.state.value[e[0]]&&null!==this.state.value[e[0]]&&""!==this.state.value[e[0]]||this.setState({first_print:!1})}let e=this.getValueByParam(this.state.node_data_print);if(void 0!==e&&""!==e){if("true"===this.state.auto_print&&!0===this.printed)return;this.printed=!0,yt.xd(e.split(","),this.state.value.ref_id)}}},this.workFlowCall=(e,t)=>{void 0!==e&&void 0!==this.props.default.codeHidden&&(void 0!==e[this.props.default.codeHidden]?(this.visibility=e[this.props.default.codeHidden],this.setState({visibility:e[this.props.default.codeHidden]})):(this.visibility=!1,this.setState({visibility:!1})))},this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);let t=this.props.validate;void 0===t&&(t={}),this.callform_detail="",this.callform="",this.data_select={};let i=this.props.lang;void 0===i&&(i={});let o="";void 0!==this.props.config.node_data_print&&(o=this.props.config.node_data_print);let a="";void 0!==this.props.config.json_path&&(a=this.props.config.json_path);let n="true";void 0!==this.props.config.auto_print&&(n=this.props.config.auto_print),this.visibility=e.visibility&&this.visibility_role,this.VOUCHER_URL="";let r=s.ZP.getParameterSystem("VOUCHER_URL");void 0!==r&&(this.VOUCHER_URL=r),this.state={value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",node_data_print:o,auto_print:n,visibility:e.visibility&&this.visibility_role,block_send_mail:!1,json_path:a,first_print:void 0,str_voucher:"",str_style:""}}encodeQueryData(e){const t=[];for(let i in e)t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}componentDidUpdate(){this.state.first_print&&"true"===this.state.auto_print&&0!==this.state.value.length&&(this.printVoucher(),this.setState({first_print:!1}))}readData(e,t){if(e.includes(".")){let i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}render(){return(0,l.jsx)("div",{hidden:"true"===this.state.auto_print,children:(0,l.jsxs)("button",{className:"btn btn-primary",onClick:()=>this.printVoucher(),children:[(0,l.jsx)("i",{className:"fa fa-print",style:{padding:5}}),s.ZP.getLang("jPrintVoucher_title")]})})}}const Dt=At;class kt extends a.Component{constructor(e){super(e),this.onCheck=e=>{const t=this.props.tableContext.props;s.ZP.getFormAppAuto(t.infoA.key_form).runRuleFunction(t.default,{value:e,rown_data:this.props.rowData},t.infoA_parent,"checked")},this.onCheckToSelected=()=>{this.onCheck(!0)},this.state={}}render(){var e,t,i,o=this;const a=(null===(e=this.props)||void 0===e||null===(t=e.tableContext)||void 0===t||null===(i=t.state)||void 0===i?void 0:i.CMD)||{};let s=(0,n.RP)("uTableColumnCheckbox");return(0,l.jsx)(s,{dataFull:{title_parent:this.props.title_parent,value:!!this.props.dataValue,config:{cmd:{disable:!0===a.disabled}},abs_Click:function(){let e=arguments.length>1?arguments[1]:void 0;o.onCheck(!e),void 0!==o.props.parent_handleCheckToSelected&&o.props.parent_handleCheckToSelected(o.props.dataIndex,!e,o.props.check_type)}}})}}const Ot=kt;class wt extends a.Component{constructor(e){var t,i,o,a,r,c,d,h,u,p;super(e),t=this,this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setAdvanced=(e,t)=>{if(!1===Array.isArray(t))this.setState({data:[]});else{let e=s.ZP.cloneJson(t),r=[],l=this.props.config.query_data,c=l.split(".")[1]||l;if(r=e,Array.isArray(r)){var i,o,a,n;for(let e=0;e<r.length;e++){const t=r[e];for(const i in t){const o=t[i];if("object"!==typeof o){let t=s.ZP.cloneJson(r[e]);r[e]={},r[e][c]=t,r[e][c].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(r[e][i].AFGHkeyIndexWJ=s.ZP.autoID())}}if(void 0!==(null===(i=this.props.config)||void 0===i||null===(o=i.columnSystemCheckBox)||void 0===o?void 0:o.methodGet)&&void 0!==(null===(a=this.props.config)||void 0===a?void 0:a.hasSystemColumnCheck)&&void 0!==(null===(n=this.props.config)||void 0===n?void 0:n.columnSystemCheckBox)){let e={},t=this.props.config.columnSystemCheckBox.methodGet;for(let i=0;i<r.length;i++)e[r[i][c].AFGHkeyIndexWJ]=r[i][c][t];this.setState({statusCheck:e,data:r,total_record:r.length,data_search:r,column_search:{}},(()=>{}))}else this.setState({data:r,total_record:r.length,data_search:r,column_search:{}},(()=>{}))}else this.setState({data:[],data_search:[]},(()=>{}))}},this.setGetInfo=(e,t)=>{if(t=t[this.props.default.code],!1===Array.isArray(t))this.setState({data:[]});else{let e=s.ZP.cloneJson(t),r=[],l=this.props.config.query_data,c=l.split(".")[1]||l;if(r=e,Array.isArray(r)){var i,o,a,n;for(let e=0;e<r.length;e++){const t=r[e];for(const i in t){const o=t[i];if("object"!==typeof o||null===o||void 0===o){let t=s.ZP.cloneJson(r[e]);r[e]={},r[e][c]=t,r[e][c].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(r[e][i].AFGHkeyIndexWJ=s.ZP.autoID())}}if(void 0!==(null===(i=this.props.config)||void 0===i||null===(o=i.columnSystemCheckBox)||void 0===o?void 0:o.methodGet)&&void 0!==(null===(a=this.props.config)||void 0===a?void 0:a.hasSystemColumnCheck)&&void 0!==(null===(n=this.props.config)||void 0===n?void 0:n.columnSystemCheckBox)){let e={},t=this.props.config.columnSystemCheckBox.methodGet;for(let i=0;i<r.length;i++)e[r[i][c].AFGHkeyIndexWJ]=r[i][c][t];this.setState({statusCheck:e,data:r,total_record:r.length,data_search:r,column_search:{}},(()=>{}))}else this.setState({data:r,total_record:r.length,data_search:r,column_search:{}},(()=>{}))}else this.setState({data:[],data_search:[]},(()=>{}))}},this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);if(void 0!==e&&void 0!==t){const t=e.list_component;if(t&&t.includes(this.props.default.code)){for(let e in o)o[e]="true"===String(o[e]);this.setState({CMD:o})}}},this.pageIndexChange=e=>{this.setState({page_index:e})},this.callDir=()=>this,this.set=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on_change",a=s.ZP.cloneJson(i),n=[],r=t.props.config.query_data,l=r.split(".")[1]||r;if(void 0!==r&&""!==r&&(!0===r.includes(".")?void 0!==s.ZP.getOOP(a,r)&&(n=s.ZP.getOOP(a,r)):void 0!==a[r]&&(n=a[r])),Array.isArray(n)){var c,d,h,u;for(let e=0;e<n.length;e++){const t=n[e];for(const i in t){const o=t[i];if("object"!==typeof o){let t=s.ZP.cloneJson(n[e]);n[e]={},n[e][l]=t,n[e][l].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(n[e][i].AFGHkeyIndexWJ=s.ZP.autoID())}}if(void 0!==(null===(c=t.props.config)||void 0===c||null===(d=c.columnSystemCheckBox)||void 0===d?void 0:d.methodGet)&&void 0!==(null===(h=t.props.config)||void 0===h?void 0:h.hasSystemColumnCheck)&&void 0!==(null===(u=t.props.config)||void 0===u?void 0:u.columnSystemCheckBox)){let e={},i=t.props.config.columnSystemCheckBox.methodGet;for(let t=0;t<n.length;t++)e[n[t][l].AFGHkeyIndexWJ]=n[t][l][i];t.setState({statusCheck:e,data:n,total_record:n.length,data_search:n,column_search:{}},(()=>{t.runRule(o||"on_change")}))}else t.setState({data:n,total_record:n.length,data_search:n,column_search:{}},(()=>{t.runRule(o||"on_change")}))}else t.setState({data:[],data_search:[]},(()=>{t.runRule(o||"on_change")}))},this.runRule=(e,t)=>{if(e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.runRuleFunction(this.props.default,t||this.data_select,this.props.infoA_parent,e)}},this.reload=(e,t)=>{this.set(e,t)},this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.abs_getDataLimited=function(e,t){let i={data:this.state.dataFilter.slice(e,e+t)||[],total:this.state.dataFilter.length},o=i.data;if(!0===this.state.hasCheck)for(let n=0;n<o.length;n++)o[n].hasCheck__=!1;let a=1;void 0!==i.total&&(a=i.total);let s=this.buildPaging(a,this.state.config_table);this.setState({data:o,total_record:a,paging:s})},this.pageRecordChange=e=>{let t=this.state.config_table;t.paging_record=this.state.paging_record[e];let i=this.buildPaging(this.state.total_record,t);this.setState({paging:i,page_index:1,selectedRecordIndex:e,config_table:t})},this.getAdvanced=(e,t)=>this.getData(),this.checkAllDataHandler=()=>{let e=this.props.config.query_data,t=e.split(".")[1]||e,i=this.state.statusCheck;for(let o=0;o<this.state.data_search.length;o++)this.state.totalCheck?i={}:i[this.state.data_search[o][t].AFGHkeyIndexWJ]=!0;this.setState({statusCheck:i,totalCheck:!this.state.totalCheck},(()=>{this.runRule("checked")}))},this.getHeaderConfig=(e,t)=>{let i=[];return"true"===this.state.hasSystemColumnCheck&&"true"!==String(this.state.CMD.disabled)&&i.push({title:this.state.headerCheckTitle,id:"system_check_box",data:{value:this.state.totalCheck,abs_Click:this.checkAllDataHandler},config:{mode:{hasSearch:!1},hasCheck:"true"===String(this.state.hasSystemColumnCheckTotal),width:"true"===this.state.hasSystemColumnCheckTotal?"70px":"",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),(!0===e&&"true"!==String(this.state.CMD.disabled)||!0===t)&&i.push({title:"",id:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),i=i.concat(this.state.columns.map(((e,t)=>{var i,o;return{title:(null===(i=this.state.lang)||void 0===i||null===(o=i[this.state.lang_select])||void 0===o?void 0:o[e.title])||e.title,id:e.code,config:{width:"",isFrozen:!1},value_search:this.state.column_search[e.code]}}))),i},this.onChangeSearch=(e,t)=>{let i=this.state.column_search;i[t]=e.target.value;let o=this.state.data.filter((e=>{let o=!0;for(const r in i)if(i[r].trim()){var a;let l=s.ZP.getOOP(e,r);const c=this.cols_config[t];if("columnMask"===c.inputtype){var n;let e=c.config.mask;(e.includes("DD")&&e.includes("MM")&&e.includes("YY")||!0===(null===(n=c.config)||void 0===n?void 0:n.isDate))&&(l=Q.FW(l,e))}if(null===l)return!1;let d=null===(a=i[r])||void 0===a?void 0:a.split(" ");for(const e of d)e&&!l.toLowerCase().includes(e.toLowerCase())&&(o=!1)}return o})),a=o.length,n=this.buildPaging(a,this.state.config_table);this.setState({paging:n,page_index:1,total_record:a,data_search:o})},this.abs_autoCallBackData=()=>{let e=this.state.paging_record;e[this.state.selectedRecordIndex]+=5,this.setState({paging_record:e},(()=>{}))},this.getData=()=>{var e;let t=this.state.data,i="true"===this.state.hasSystemColumnCheck?null===(e=this.state.checked_to_selected)||void 0===e?void 0:e.mode:"",o=this.props.config.query_data,a=o.split(".")[1]||o,s=this.state.statusCheck;switch(i){case"CHECK_TO_SELECTED":case"DEFAULT":case"NO_EMPTY":return t.filter((e=>s[e[a].AFGHkeyIndexWJ]));default:return t}},this.parent_handleCheckToSelected=(e,t,i)=>{let o=this.props.config.query_data,a=o.split(".")[1]||o,s=this.state.statusCheck,n=[];const r=this.state.data_search;switch(i){case"CHECK_TO_SELECTED":for(let c=0;c<r.length;c++){let i=r[c][a].AFGHkeyIndexWJ;t?s[i]=c<=e||void 0:c>=e&&(s[i]=void 0),s[i]&&n.push(r[c])}break;case"DEFAULT":s[r[e][a].AFGHkeyIndexWJ]=t;for(let e=0;e<r.length;e++){s[r[e][a].AFGHkeyIndexWJ]&&n.push(this.state.data_search[e])}break;case"NO_EMPTY":let i,o,l=e;for(let e=0;e<r.length;e++){s[r[e][a].AFGHkeyIndexWJ]&&(void 0===i&&(i=e),o=e)}if(l<i)for(let e=l+1;e<i;e++){s[r[e][a].AFGHkeyIndexWJ]=!0}else if(l>i&&l<o)for(let e=l+1;e<=o;e++){s[r[e][a].AFGHkeyIndexWJ]=!1}else for(let e=o;e<l;e++){s[r[e][a].AFGHkeyIndexWJ]=!0}s[r[e][a].AFGHkeyIndexWJ]=t}let l=this.state.totalCheck;null!==n&&void 0!==n&&n.length||(l=!1),this.setState({statusCheck:s,totalCheck:l},(()=>{var e,t;void 0!==(null===(e=this.props.config.columnSystemCheckBox)||void 0===e?void 0:e.actionFo_SystemCheck)&&this.functionFo(n,null===(t=this.props.config.columnSystemCheckBox)||void 0===t?void 0:t.actionFo_SystemCheck),this.runRule("checked")}))},this.parent_handleSetChecked=e=>{let t=this.state.data_show_table,i=t[e].isCheck;void 0===i&&(i=!1),t[e].isCheck=!i,this.setState({data_show_table:t})},this.handleClickTableRow=e=>{var t,i,o;!0!==((null===(t=this.props)||void 0===t||null===(i=t.tableContext)||void 0===i||null===(o=i.state)||void 0===o?void 0:o.CMD)||{}).disabled&&void 0!==this.props.config.actionFo_RowSelect&&this.functionFo(e,this.props.config.actionFo_RowSelect)},this.handleChange=e=>{let{index_row:t,code_col:i,value_change:o}=e,a=i.split("."),s=[];s=this.hasPaging?this.getDataWithPaging(this.state.data_search,this.state.page_index,this.state.config_table.paging_record):this.state.data_search,s[t][a[0]][a[1]]!==o&&(s[t][a[0]][a[1]]=o,this.setState({data:s,data_search:s,column_search:{}},(()=>{this.runRule("enter_tab",s[t])})))},this.handleMoveLeft=e=>{let t=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;t&&e--,"true"===i&&e--;let o=e-1,{columns:a}=this.state,s=a.splice(e,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.handleMoveRight=e=>{let t=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;t&&e--,"true"===i&&e--;let o=e+1,{columns:a}=this.state,s=a.splice(e,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.getSumDataCol=e=>{let t=0;for(const o of this.state.data_search)t+=Number(s.ZP.getOOP(o,e.code));let i=2;return void 0!==e.config.decimal&&(i=e.config.decimal),(0,Y.Nx)(t,i)},this.isHasColumnAction=()=>this.state.action.length>0&&"true"!==String(this.state.CMD.disabled),this.renderColSum=()=>{const e=this.state.columns;let t=[],i=!1,o=this.isHasColumnAction()?1:0;"true"===String(this.state.hasSystemColumnCheck)&&o++;for(const n of e)n.isSum?(o&&t.push({type:"EMPTY",count:o}),t.push({type:"SUM",config:n}),i=!0,o=0):o++;if(o&&t.push({type:"EMPTY",count:o}),!i)return null;const a=(0,n.RP)("uTableBodyRowCalculator"),s=(0,n.RP)("uTableColumnCalculator"),r=(0,n.RP)("uTableColumnMerge");return(0,l.jsx)(a,{children:t.map(((e,t)=>"EMPTY"===e.type?(0,l.jsx)(r,{dataFull:{col_span:e.count}},t):(0,l.jsx)(s,{dataFull:{data:`${e.config.sumTitle||"Sum"} = ${this.getSumDataCol(e.config)}`}},t)))})};let _=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let e=this.props.config.paging_record.split(",");e.length>1&&(_=e)}let f={paging_record:_[0],query_data:this.props.config.query_data},g={},m=0;void 0!==g.total&&(m=g.total);let v=this.buildPaging(m,f),b=[];void 0!==g.data&&(b=g.data);let y=[],A=[],D=e.default.code.trim();if(void 0!==e.btn_of_grid&&""!==D)for(let s=0;s<e.btn_of_grid.length;s++){D===e.btn_of_grid[s].config.onTable.trim()&&(y[y.length]=e.btn_of_grid[s],-1!==e.btn_of_grid[s].default.code.indexOf("_system")&&(A[A.length]=e.btn_of_grid[s]))}let k=this.props.lang;void 0===k&&(k={}),void 0!==this.props.config.hasPaging&&(this.hasPaging="true"===this.props.config.hasPaging);let O="false";void 0!==this.props.config.hasSystemColumnCheck&&(O=this.props.config.hasSystemColumnCheck);let w="not_use";void 0!==(null===(i=this.props.config)||void 0===i||null===(o=i.columnSystemCheckBox)||void 0===o?void 0:o.check_type)&&(w=this.props.config.columnSystemCheckBox.check_type);let C="false";void 0!==(null===(a=this.props.config)||void 0===a||null===(r=a.columnSystemCheckBox)||void 0===r?void 0:r.hasSystemColumnCheckTotal)&&(C=this.props.config.columnSystemCheckBox.hasSystemColumnCheckTotal);let x="";void 0!==(null===(c=this.props.config)||void 0===c||null===(d=c.columnSystemCheckBox)||void 0===d?void 0:d.headerCheckTitle)&&(x=null===(h=this.props.config.columnSystemCheckBox)||void 0===h?void 0:h.headerCheckTitle);let S={};void 0!==(null===(u=this.props.config)||void 0===u||null===(p=u.columnSystemCheckBox)||void 0===p?void 0:p.checked_to_selected)&&(S=this.props.config.columnSystemCheckBox.checked_to_selected),this.state={dataFilter:b,data:b,lang:k,lang_select:s.ZP.getLangKey(),paging:v,total_record:m,paging_record:_,page_index:1,STT:!1,columns:void 0===this.props.config.columns?[]:JSON.parse(this.props.config.columns),action:y,action_system:A,config_table:f,check_screen_width:void 0,CMD:{disabled:!1},selectedRecordIndex:0,column_search:{},data_search:[],data_show_table:[],hasSystemColumnCheck:O,check_type:w,hasSystemColumnCheckTotal:C,headerCheckTitle:x,totalCheck:!1,checkedRow:!1,statusCheck:{},checked_to_selected:S},this.cols_config={};for(const s of this.state.columns)this.cols_config[s.code]=s;this.all_columnSystemCheck=[],this.value_row_select={}}buildPaging(e,t){let i=[],o=1;if(e>0)for(let a=0;a<e;a+=parseInt(t.paging_record))i[i.length]=o,o++;else i[i.length]=1;return i}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}getDataWithPaging(){let e=arguments.length>2?arguments[2]:void 0,t=((arguments.length>1?arguments[1]:void 0)-1)*e,i=t+e;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice(t,i)}readData(e,t){if(e.includes(".")){let i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.getData(),this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.getData()):s.ZP.putDataGB(i[0],i[1],"")}}getPagingConfig(){return{config:{show:s.ZP.getLang("cTable_Paging_show"),in:s.ZP.getLang("cTable_Paging_in"),jump_to_page:s.ZP.getLang("cTable_Paging_jump_to_page"),results:s.ZP.getLang("cTable_Paging_results")},result_total:this.state.total_record,abs_PagingActive:this.pageIndexChange,abs_setRecordActive:this.pageRecordChange,paging_index:this.state.page_index,paging_record:this.state.paging_record.map(((e,t)=>({number:e,selected:t===this.state.selectedRecordIndex})))}}UNSAFE_componentWillUpdate(e,t){this.state.data!==t.data&&(this.state.data_search=s.ZP.cloneJson(t.data))}functionFo(e,t){let i=void 0===t.useAction?"notUse":t.useAction,o=this.props.default;switch(i){case"txFo":var a=s.ZP.parseJson(t.txFo);void 0!==a?_.ZP.runFoWithContext(a,e,this.props.infoA,this.props.infoA_parent,o):s.ZP.AppException("#cColumnAction.onClick","Error Json is undefined");break;case"txFoAction":var n=s.ZP.parseJson(t.txFoActions);void 0!==n?_.ZP.runActionWithContext(n,e,this.props.infoA,this.props.infoA_parent,o):s.ZP.AppException("#cColumnAction.onClick","config_fo is undefined")}}render(){var e,t,i,r,c;if("false"===String(this.state.CMD.visible))return null;let d=this.state.action.length>0,h=this.state.action_system.length>0,u=this.getHeaderConfig(d,h),{hasSystemColumnCheck:p,check_type:_,statusCheck:f}=this.state;const g=(0,n.RP)("uTable"),m=(0,n.RP)("uTableBodyRow");if("false"===String(this.state.CMD.visible))return null;let v=[];return v=this.hasPaging?this.getDataWithPaging(this.state.data_search,this.state.page_index,this.state.config_table.paging_record):this.state.data_search,(0,l.jsx)(a.Fragment,{children:(0,l.jsxs)(g,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.onChangeSearch,abs_MoveLeft:this.handleMoveLeft,abs_MoveRight:this.handleMoveRight,Header:{data:u,config:{mode:{hasSearch:this.state.data.length>5,isFrozenHeader:!0}}},dataEmpty:{isShow:!(null!==(e=this.state)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")||"Search"},title:this.props.default.name,mode:{maxHeight:!0,modeTitle:"center",isMoveColumn:"true"===String(null===(i=this.props.config)||void 0===i?void 0:i.isMoveColumn),isResize:"true"===String(null===(r=this.props.config)||void 0===r?void 0:r.isResize)},class:this.props.default.class,isBorder:!!this.props.default.name},uPagination:this.hasPaging?this.getPagingConfig():void 0},children:[null===(c=v)||void 0===c?void 0:c.map(((e,t)=>{let i=this.props.config.query_data,a=i.split(".")[1]||i;return(0,l.jsxs)(m,{dataItem:e,abs_Click:this.handleClickTableRow,children:["true"===p&&"true"!==String(this.state.CMD.disabled)&&(0,l.jsx)(Ot,{ref:e=>{void 0===this.all_columnSystemCheck&&(this.all_columnSystemCheck=[]),this.all_columnSystemCheck[t]=e},tableContext:this,dataValue:!0===f[e[a].AFGHkeyIndexWJ],dataIndex:t,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,check_type:_,parent_handleCheckToSelected:this.parent_handleCheckToSelected},t),!0===d&&"true"!==String(this.state.CMD.disabled)&&(0,l.jsx)(F,{tableContext:this,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,data:this.state.action,title:"Action",value:(0,o.Z)((0,o.Z)({},e),{},{index:t,data_length:v.length})},t),"true"===String(this.state.CMD.disabled)&&!0===h&&(0,l.jsx)(F,{tableContext:this,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,data:this.state.action_system,isButtonSystem:!0,value:(0,o.Z)((0,o.Z)({},e),{},{index:t,data_length:v.length}),title:"Action"},t),this.state.columns.map(((i,o)=>{var a,n;let r=T.Z[i.inputtype];return void 0===r&&(r=T.Z.ColumnDefault),(0,l.jsx)(r,{code_col:i.code,index_row:t,rowData:e,tableContext:this,title_parent:i.title,title:(null===(a=this.state.lang)||void 0===a||null===(n=a[this.state.lang_select])||void 0===n?void 0:n[i.title])||i.title,config:i.config,data:s.ZP.getOOP(e,i.code),cmd:this.state.CMD,value:e,abs_TableChange:this.handleChange},o)}))]},t)})),this.renderColSum()]})})}}const Ct=wt;class xt extends a.Component{constructor(e){if(super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getCodeHidden=()=>this.props.default.codeHidden,this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.checkIsLoading=()=>!!this.props.config.is_open_static_form||this.isLoading,this.setCallFormBack=(e,t)=>{if(this.props.config.is_open_static_form)this.isLoading=!0;else if(void 0!==e.key_form&&void 0!==e.key&&e.key===this.props.default.codeHidden){this.muti_form_didMount[this.muti_form_didMount.length]=e.key_form,this.isLoading=!0;var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.hasOwnProperty("componentIsLoaded")&&i.componentIsLoaded(this.props.default.codeHidden)}},this.set=(e,t)=>{this.setDataCallForm(t)},this.getKeyForm=()=>this.muti_form_didMount[0],this.getInfoErrror=()=>{let e="";var t=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(!0!==this.props.config.notCheckValidate&&void 0!==t&&t.hasOwnProperty("getValidateForm")){let i=t.getValidateForm();for(let t=0;t<i.length;t++){const o=i[t];e+=o.key+": "+o.info+";"}}if(""!==e)return{info:e,key:this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}},this.get=(e,t)=>{var i=this.props.config.structable;if(i.includes("|"))for(var o=i.split("|"),a=0;a<o.length;a++)this.readData(o[a],e.inform);else this.readData(i,e.inform)},this.setAdvanced=(e,t)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,e.list_component);n||(n=e.list_component),"*"===n?i.putDataAll_andSet(t):i.callDirFromSupport("setAdvanced",{list_component:n,list_view:e.list_view},t)}},this.setGetInfo=(e,t)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g");for(;-1!==e.list_component.indexOf(o);){let n=s.ZP.getElementWithRegex(a,e.list_component);if("*"===n){let e=t[o+";"+o+"("+n+")"];i.putDataAll_andSet(e)}else{let a=t[o+";"+o+"("+n+")"];i.callDirFromSupport("setAdvanced",{list_component:n,list_view:e.list_view},a)}e.list_component.endsWith(o+";"+o+"("+n+")")?e.list_component=e.list_component.replace(o+";"+o+"("+n+")",""):e.list_component=e.list_component.replace(o+";"+o+"("+n+");","")}}},this.checkValidate=()=>{let e=!1;var t=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==t&&(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport")&&(t.callDirFromSupport("clearError",{},{}),!0!==this.props.config.notCheckValidate&&(t.callDirFromSupport("checkValidate",{},{}),t.hasOwnProperty("getFormValidate")&&(e=t.getFormValidate())))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default},(async()=>{this.props.config.is_open_static_form||(await this.reloadForm(this.muti_form_didMount[0],t),this.runRuleCPN("reload"))}))},this.getDataCallForm=e=>{var t=s.ZP.getFormAppAuto(e);if(void 0===t)return"";if(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport"))if(t.callDirFromSupport("clearError",{},{}),!0!==this.props.config.notCheckValidate){if(t.callDirFromSupport("checkValidate",{},{}),t.hasOwnProperty("getFormValidate")&&!t.getFormValidate()&&(t.callDirFromSupport("get",{list_component:"*",list_view:"",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")))return t.getData("")}else if(t.callDirFromSupport("get",{list_component:"*",list_view:"",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData"))return t.getData("")},this.setCMD=(e,t)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,e.list_component);if(n||(n=e.list_component),i.callDirFromSupport("setCMD",Object.assign(e,{list_component:n,list_view:e.list_view}),t),e.list_component.includes(`${o}()`)){let{CMD:e}=this.state,i=Object.assign(s.ZP.cloneJson(e),t);for(let t in i)i[t]="true"===String(i[t]);this.setState({CMD:i})}}},this.setDataGB=(e,t)=>{var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){let o=this.props.default.code,a=new RegExp(`${o}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(a,e.list_component);n||(n=e.list_component),i.callDirFromSupport("setDataGB",{list_component:n,list_view:e.list_view},t)}},this.reloadForm=(e,t)=>{var i=s.ZP.getFormAppAuto(e);void 0!==i&&i.clearForm()},this.getAdvanced=(e,t)=>{if(this.muti_form_didMount.length>0){var i=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==i)return i.getDataAll();s.ZP.AppException("#jTheSameMain.setDataCallForm","form is undefined","system")}else s.ZP.AppException("#jTheSameMain.setDataCallForm","muti_form_didMount is 0","system")},this.runRuleCPN=e=>{if(this.muti_form_didMount.length>0)if(void 0!==s.ZP.getFormAppAuto(this.muti_form_didMount[0])){if(this.isLoading){s.ZP.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,{},this.props.infoA_parent,e||"on_change")}}else s.ZP.AppException("#jTheSameMain.setDataCallForm","form is undefined","system");else s.ZP.AppException("#jTheSameMain.setDataCallForm","muti_form_didMount is 0","system")},this.setDataCallForm=async e=>{if(this.muti_form_didMount.length>0){var t=s.ZP.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==t){if(this.isLoading)if(void 0!==e){let i=s.ZP.getFormAppAuto(this.props.infoA.key_form);await t.putDataAll_andSet(e),i.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_change")}else t.clearForm()}else s.ZP.AppException("#jTheSameMain.setDataCallForm","form is undefined","system")}else s.ZP.AppException("#jTheSameMain.setDataCallForm","muti_form_didMount is 0","system")},this.ref_callForm=a.createRef(),this.component_code=s.ZP.autoID(),this.config={},this.props.config&&(this.config=this.props.config),this.data_default={},void 0!==this.config.data_default&&""!==this.config.data_default)try{this.data_default=JSON.parse(this.config.data_default)}catch(n){}var t=this.props.validate;void 0===t&&(t={}),this.data_select={};var i=this.props.lang;void 0===i&&(i={}),this.is_open="true"===this.config.is_open,this.state={value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpenForm:this.is_open,call_form:this.props.config.callform||"",CMD:{}},this.id_component=s.ZP.autoID(),this.isLoading=!1,this.isErrorLoadForm=!1,this.muti_form_didMount=[]}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.lang!==e.lang&&this.setState({lang:this.props.lang}),this.props.validate!==e.validate&&this.setState({validate:this.props.validate}),this.props.property!==e.property&&this.setState({property:this.props.property})}componentDidMount(){let e=this.state.call_form;e&&""!==e.trim()&&void 0!==this.ref_callForm.current&&(this.props.config.is_open_static_form?(0,h.HX)(e,this.ref_callForm.current,this.props.infoA,(0,o.Z)((0,o.Z)({},this.props.default),{},{isReloadValidate:!this.props.config.notCheckValidate}),this.props.default.codeHidden):(0,h.BR)(e,this.ref_callForm.current,this.props.infoA,(0,o.Z)((0,o.Z)({},this.props.default),{},{isReloadValidate:!this.props.config.notCheckValidate}),this.props.default.codeHidden)),setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){const i=this.getDataCallForm(this.muti_form_didMount[0]);if(e.includes(".")&&void 0!==i){var o=e.split(".");const{callData:a}=this.props.config;let n=i;n=a.includes(".")?s.ZP.getOOP(i,a):a?i[a]:i,void 0===t||"true"===t?s.ZP.putData(o[0],o[1],n,this.props.infoA):"false"===t?s.ZP.putDataGB(o[0],o[1],i):s.ZP.putDataGB(o[0],o[1],"")}else if(void 0!==i){const{callData:t}=this.props.config;let o=i;o=t.includes(".")?s.ZP.getOOP(i,t):t?i[t]||this.data_default:i,s.ZP.putDataOneKey(e,o,this.props.infoA)}}render(){const e=(0,n.RP)("uSameForm");let t=this.props.default.class||"col-12";return(0,l.jsx)("div",{style:{display:"false"===String(this.state.CMD.visible)?"none":""},className:t,children:(0,l.jsx)(e,{component_code:this.component_code,children:(0,l.jsx)("div",{ref:this.ref_callForm})})})}}const St=xt;class Mt extends a.Component{constructor(e){super(e),this.getCode=()=>this.props.default.code,this.convertStringWithContext=e=>{let t=s.ZP.getlistCodeContext(e);for(let i=0;i<t.length;i++){const o=t[i];let a=s.ZP.context_get(o.code);void 0!==a&&(e=e.replace(o.key,a))}return e},this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>this.state.value,this.getDataOOP=(e,t)=>{const{list_component:i}=e,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.setDataGB=(e,t)=>{},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){let e=this.props.config.structable_read.split(".");if(e.length>0&&void 0!==t[e[0]]&&void 0!==t[e[0]][e[1]])return this.data_debug.data_cpn=t[e[0]][e[1]],void this.setState({value:t[e[0]][e[1]]})}this.data_debug.data_cpn="undefined"}},this.setAdvanced=(e,t)=>{this.setState({value:t})},this.setGetInfo=(e,t)=>{t=t[this.props.default.code],this.setState({value:t})},this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.checkValidate=()=>{let e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default})},this.setDataDefault=()=>{this.setState({value:this.data_default})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderDebug=()=>{if(s.ZP.isDebug()){this.props.config.structable=this.props.config.structable||"";let e=this.props.config.structable.split(".")[1],t=this.data_debug.data_cpn;return null===t&&(t="NULL"),(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${e}|:|${t}|`})}},this.getComponentConfig=()=>({config:{default:{title:this.getTitleLabel(),class:this.props.default.class,type:this.props.config.color,isBold:this.props.config.isBold,fontSize:this.props.config.fontSize},cmd:{visible:"false"!==String(this.state.CMD.visible)&&!!this.state.value}}}),this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.convertStringWithContext(this.props.config.data_default));var t=this.props.validate;void 0===t&&(t={}),this.callform_detail="",this.callform="",this.data_select={};var i=this.props.lang;void 0===i&&(i={}),this.state={value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{}},this.data_debug={}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){if(""!==e&&e.includes(".")){let i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}getTitleLabel(){return this.props.config.isUseTitle+""==="true"?this.state.lang&&this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name:s.ZP.isDebug()?this.props.default.name+"|->"+this.state.value:"{}"!==JSON.stringify(this.state.value)?this.state.value:""}render(){const e=(0,n.RP)("uLabel"),t=(0,n.RP)("uOfGroup");return"false"===String(this.state.CMD.visible)||!this.state.value&&0!==this.state.value&&"0"!==this.state.value?null:this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(e,{dataFull:this.getComponentConfig()}),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(e,{dataFull:this.getComponentConfig()})}}const Pt=Mt;class Tt extends a.Component{constructor(e){var t;super(e),t=this,this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>{},this.getDataOOP=(e,t)=>{let{list_component:i}=e,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.setDataGB=(e,t)=>{},this.set=(e,t)=>{},this.setAdvanced=(e,t)=>{this.setState({value:t})},this.setGetInfo=(e,t)=>{t=t[this.props.default.code],this.setState({value:t})},this.get=(e,t)=>{let i=!0;if(e.checkError&&"false"===e.checkError&&(i=!1),!i||!this.checkValidate()){let t=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(t=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(t=!0),t)){let t=this.props.config.structable;if(t.includes("|")){let i=t.split("|");for(var o=0;o<i.length;o++)this.readData(i[o],e.inform)}else this.readData(t,e.inform)}}},this.checkValidate=()=>!1,this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:[]})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderMess=e=>s.ZP.getLang(e),this.setPaging=e=>{this.callAPI(this.props.config.api_id,{page:e}).then((t=>{if(t.paging&&t.paging.total){let{value:i,dataFull_paging:o,titleNoData:a}=this.state;a="",o.result_total=t.paging.total,i=t.media,o.number_item=e-1,this.setState({dataFull_paging:o,value:i,titleNoData:a})}else{let{value:e,dataFull_paging:t,titleNoData:i}=this.state;t.result_total=0,e=[],t.number_item=0,i="Hasn't Signature Information",this.setState({value:e,dataFull_paging:t,titleNoData:i})}}))},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.state.isLoading||t.setState({isLoading:!0});var a=[{txcode:"#sys:bo-rule-getInfoAPI-Signature",input:{learn_api:e}}];let n={},r=s.ZP.getFormAppAuto(t.props.infoA.key_form);return void 0!==r&&(n=r.getDataAll()),n&&(i=Object.assign(n,i)),a[0].input=Object.assign(a[0].input,i),(0,S.Yr)(a,o).then((e=>{var i=s.ZP.foGetData("infoError",e);if(void 0!==i)return{infoError:i};var o=s.ZP.foGetData("data",e);return o&&o[t.props.config.api_map_data]?o[t.props.config.api_map_data]:o})).finally((e=>{t.setState({isLoading:!1})}))},this.renderModal=()=>{const e=this.MediaDetail;return this.state.isOpen?(0,l.jsx)(a.Suspense,{fallback:(0,l.jsx)("div",{}),children:(0,l.jsx)(e,(0,o.Z)({},this.getDefaultConfig(this.state.value)))}):null};let i={};void 0===i&&(i={}),this.accountNumberFormat=s.ZP.getParameterSystem("MEDIA_ACCOUNT_NUMBER"),this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);let r=this.props.validate;void 0===r&&(r={}),this.callform_detail="",this.callform="",this.data_select={};let c=this.props.lang;void 0===c&&(c={}),this.referenceTypeData=[{title:"Single customer",value:"C"}],this.businessLineTypeData=[{title:"-Select one-",value:"XX"}],this.state={value:[],value_old:"",lang:c,lang_select:s.ZP.getLangKey(),validate:r,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpen:!1,dataFull_paging:{result_total:0,paging_record:[{number:1,selected:!0}],abs_PagingActive:this.setPaging,number_item:0,config:{show:"Show",in:"in",jump_to_page:"Jump to page",results:"results"},mode:{noShowResult:!0}}},this.MediaDetail=(0,n.Iq)("O9_FormMediaDetail")}componentDidMount(){(0,S.Yr)([{txcode:"bo-get-cdlistMediaFile",input:{}}],{}).then((e=>{let t=s.ZP.foGetData("data",e);this.OWN_CDLIST={STS:{},TYPE:{},CATEGORIES:{}};for(const i of t)"MEDIASTS"===i.cdname?this.OWN_CDLIST.STS[i.cdid]=i:"CTMTYPE"===i.cdname?this.referenceTypeData.push({title:i.caption,value:i.cdid}):"CATEGORIES"===i.cdname&&this.businessLineTypeData.push({title:i.caption,value:i.cdid})})),setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){}render(){const e=(0,n.RP)("uButton");return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(e,{dataFull:{config:{default:{title:"",type:"",class:"",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyOCAyOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGQ9Ik0yMC40ODkgMTAuODM2NUwyNC43MDc0IDEyLjM4NkwyMS4xOTkyIDIxLjkzNzhDMjAuODcwOSAyMi44MzYyIDE5LjA5MDUgMjUuNjQ3MyAxNy44NTA3IDI2LjIyMDdMMTcuNTQ5OCAyNy4wNDE0QzE3LjQ3MzIgMjcuMjQ5MyAxNy4yNzYzIDI3LjM3OTYgMTcuMDY3MyAyNy4zNzk2QzE3LjAwODIgMjcuMzc5NiAxNi45NDkxIDI3LjM2ODYgMTYuODkgMjcuMzQ3OEMxNi42MjQxIDI3LjI0OTMgMTYuNDg2MiAyNi45NTUgMTYuNTg0NyAyNi42ODY5TDE2Ljg2OTIgMjUuOTExMUMxNi4yNCAyNC42ODg4IDE2LjcwOTQgMjEuMTM5IDE2Ljk4NTIgMjAuMzg4M0wyMC40ODkgMTAuODM2NVpNMjYuNTkzOSAwLjcyOTg3NkMyNS40MzQgMC4zMDUzMDIgMjQuMDc2IDEuMTgyOSAyMy42ODc1IDIuMjQzMjRMMjEuMTQ2NyA5LjE2NTU1TDI1LjM2NCAxMC43MTI4TDI3LjkwMTYgMy43OTE2MkMyOC4yMjExIDIuOTI0OTcgMjcuNzU2IDEuMTU1NTQgMjYuNTkzOSAwLjcyOTg3NlpNMTguOTYxNCAxMC40Nzg3QzE5LjA3OTYgMTAuNTIyNCAxOS4yMDExIDEwLjU0MzIgMTkuMzE5MyAxMC41NDMyQzE5LjczNzMgMTAuNTQzMiAyMC4xMzAxIDEwLjI4NzIgMjAuMjg0NCA5Ljg3MTM1TDIyLjk2NTMgMi42NDA0NkMyMy4xNjM0IDIuMTA3NTUgMjIuODkwOSAxLjUxNTU2IDIyLjM1OCAxLjMxODU5QzIxLjgyMDcgMS4xMjM4MSAyMS4yMzMxIDEuMzkzIDIxLjAzNTEgMS45MjU5MUwxOC4zNTQxIDkuMTU2NzlDMTguMTU2IDkuNjg5NyAxOC40Mjg1IDEwLjI4MTcgMTguOTYxNCAxMC40Nzg3Wk0xNC42NDU3IDI0LjAzNzdDMTQuMzY4OCAyMy43NzYxIDE0LjAyNDEgMjMuNDUwMSAxMy40NjYgMjMuMjAxN0MxMy4wMDY0IDIyLjk5NyAxMi41NTg5IDIyLjk4NzIgMTIuMjMxNyAyMi45Nzk1QzEyLjE5NzggMjIuOTc5NSAxMi4xNTg0IDIyLjk3ODQgMTIuMTE5IDIyLjk3NzNDMTEuOTE0NCAyMi40MTcxIDExLjQ5OTYgMjIuMDY0NyAxMC44NzcgMjEuOTI2OEMxMC4wNTMgMjEuNzUyOSA5LjM5NTM4IDIyLjE0MTMgOC45MzkwNyAyMi40NDExQzguOTc5NTYgMjIuMjExNCA5LjA0NjMxIDIxLjkzNzggOS4wOTU1NSAyMS43NDA4QzkuMjUzMTMgMjEuMTA2MSA5LjQxNTA4IDIwLjQ0OTYgOS4yOTQ3MSAxOS44MzQ2QzkuMTk5NTEgMTkuMzQ4OCA4Ljc4OTE2IDE4Ljk4NzcgOC4yOTQ1NSAxOC45NTI2QzcuMDE5NzMgMTguODgxNSA1Ljk3OCAxOS41Njc2IDUuMDU5OTEgMjAuMTg4MUM0LjA5NTg2IDIwLjgzOTEgMy40Nzc2MSAyMS4yMjc2IDIuODYyNjMgMjEuMDA3N0MyLjExMTk2IDIwLjc0MDcgMi4wMzY0NiAxOC43MDg2IDIuMzk3NTcgMTYuODk4N0MyLjcyMDM4IDE1LjI2ODMgMy4zMjExMyAxMi4yMzI4IDQuODYwNzUgMTAuODU0QzUuMzc5NDMgMTAuMzkgNi4xMzAxIDkuODg3NzYgNi43NDcyNiAxMC4xMzE4QzcuNDcyNzYgMTAuNDE2MyA4LjA3MjQyIDExLjYxMTIgOC4yMDU5MiAxMy4wMzQ5QzguMjYxNzIgMTMuNjM1NiA4Ljc4NTg4IDE0LjA3NjYgOS4zOTc1NyAxNC4wMjE5QzkuOTk5NDEgMTMuOTY2MSAxMC40NDE1IDEzLjQzMjEgMTAuMzg0NiAxMi44MzAyQzEwLjE2NzkgMTAuNTEwNCA5LjA4MDIzIDguNjk2MTEgNy41NDcxNyA4LjA5MzE3QzYuNjI5MDggNy43MzY0NCA1LjE2OTM0IDcuNjQwMTUgMy4zOTk5MSA5LjIyMzU1QzEuNDc1MSAxMC45NDcgMC43NjM4MzMgMTMuODY5OCAwLjI0ODQzNSAxNi40NzNDLTAuMDA5ODEwODUgMTcuNzczIC0wLjYzOTAxMiAyMi4wODY2IDIuMTI3MjggMjMuMDcwM0MzLjgxMjQ1IDIzLjY3MTEgNS4xODEzNyAyMi43NDQzIDYuMjgxMTEgMjIuMDAyM0M2LjQ4MjQ1IDIxLjg2NjcgNi42ODA1MSAyMS43MzMyIDYuODczMSAyMS42MTM5QzYuNjkwMzYgMjIuNDA3MiA2LjU3NjU2IDIzLjI1NjQgNy4wNTU4NSAyMy45NzJDNy43NzA0IDI1LjA0NjYgOC43ODA0IDI1LjE2MzcgMTAuMDU2MyAyNC4zMjMzQzEwLjEwNTYgMjQuMjkxNSAxMC4xNjI1IDI0LjI1NDMgMTAuMjE2MSAyNC4yMTcxQzEwLjMzNDMgMjQuNDY0NCAxMC41NDMzIDI0LjczNjkgMTAuOTIzIDI0LjkyMjlDMTEuMzgyNiAyNS4xNDg0IDExLjg0MjIgMjUuMTU5MyAxMi4xNzcgMjUuMTY4MUMxMi4zMjAzIDI1LjE3MTMgMTIuNTE2MiAyNS4xNzU3IDEyLjU3NTMgMjUuMjAyQzEyLjc4MSAyNS4yOTI4IDEyLjkwMjUgMjUuNDA0NCAxMy4xMzg5IDI1LjYyNzZDMTMuMzE2MSAyNS43OTUxIDEzLjUwMzIgMjUuOTY5MSAxMy43NDA3IDI2LjE0ODVDMTMuOTM3NyAyNi4yOTYyIDE0LjE2NzUgMjYuMzY2MyAxNC4zOTUxIDI2LjM2NjNDMTQuNzI3NyAyNi4zNjYzIDE1LjA1NzEgMjYuMjE0MiAxNS4yNzE2IDI1LjkyODZDMTUuNjMzOCAyNS40NDQ5IDE1LjUzNTMgMjQuNzU4OCAxNS4wNTE2IDI0LjM5NjZDMTQuODkzIDI0LjI3NCAxNC43NjcxIDI0LjE1MjYgMTQuNjQ1NyAyNC4wMzc3WiIgZmlsbD0iIzQ5NEY1OSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KPHJlY3Qgd2lkdGg9IjI4IiBoZWlnaHQ9IjI4IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="},cmd:{disable:!1,isLoading:!1},mode:"square"},abs_Click:()=>{var e;this.props.config.api_id?(this.setState({isOpen:!0}),this.callAPI(this.props.config.api_id,{page:"1"}).then((e=>{if(e.paging&&e.paging.total){let{value:t,dataFull_paging:i,titleNoData:o}=this.state;o="",i.result_total=e.paging.total,t=e.media,i.number_item=0,this.setState({dataFull_paging:i,value:t,titleNoData:o})}else{let{value:e,dataFull_paging:t,titleNoData:i}=this.state;t.result_total=0,e=[],t.number_item=0,i="Hasn't Signature Information",this.setState({value:e,dataFull_paging:t,titleNoData:i})}}))):(null===(e=this.state.value)||void 0===e?void 0:e.length)>0&&this.setState({isOpen:!0})}}}),this.renderModal()]})}isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(i){}return t}getRefTypeData(e){return[{title:"Single customer",value:"C"},{title:"Group of customer",value:"G"},{title:"Customer linkage",value:"L"}].map(((t,i)=>(0,o.Z)((0,o.Z)({},t),{},{selected:t.value===e})))}getDefaultConfig(e){return void 0!==e&&this.props.config.api_id?{modal:{title:"Signature Viewer",visibility:this.state.isOpen,abs_Close:()=>{this.setState({isOpen:!1})}},media_paging:{dataFull:(0,o.Z)({},this.state.dataFull_paging)},form:{config:{default:{title:this.state.titleNoData}},cmd:{isLoading:this.state.isLoading}},stateData:e.map((e=>({img_form:{title:e.fn,link:this.isImage(e.mcs)?`data:image/png;base64,${e.mcs}`:"../rs/global/img/file_icon.svg",content:this.isImage(e.mcs)?"":e.mcs,file_type:e.ft},code:{dataFull:{config:{default:{title:"File Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.fn}},infor1:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:this.getBusinessLineTypeData(e.infor1)}},infor2:{dataFull:{config:{default:{title:"Customer Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.infor2}},expireDate:{dataFull:{config:{default:{placeholder:this.dateFormat||" ",title:"Expire date",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:e.ed?(0,Q.sx)((0,Q.xY)(e.ed),"DD/MM/YYYY"):""}},other:{dataFull:{config:{default:{title:"Account Number",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:(0,Q.Ui)(e.ot,this.accountNumberFormat)}}})))}:void 0!==e?{modal:{title:"Signature Viewer",visibility:this.state.isOpen,abs_Close:()=>{this.setState({isOpen:!1})}},form:{config:{default:{title:this.state.titleNoData}},cmd:{isLoading:this.state.isLoading}},stateData:e.map((e=>({img_form:{title:e.fn,link:this.isImage(e.mcs)?`data:image/png;base64,${e.mcs}`:"../rs/global/img/file_icon.svg",content:this.isImage(e.mcs)?"":e.mcs,file_type:e.ft},code:{dataFull:{config:{default:{title:"File Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.fn}},infor1:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:this.getBusinessLineTypeData(e.infor1)}},infor2:{dataFull:{config:{default:{title:"Customer Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.infor2}},expireDate:{dataFull:{config:{default:{placeholder:this.dateFormat||" ",title:"Expire date",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:e.ed?(0,Q.sx)((0,Q.xY)(e.ed),"DD/MM/YYYY"):""}},other:{dataFull:{config:{default:{title:"Account Number",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:(0,Q.Ui)(e.ot,this.accountNumberFormat)}}})))}:void 0}getBusinessLineTypeData(e){return this.businessLineTypeData.map(((t,i)=>(0,o.Z)((0,o.Z)({},t),{},{selected:t.value===e})))}}const It=Tt;class Nt extends a.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data),private_key_config:s.ZP.autoID()}}readConfig(e){var t={};void 0===e&&(e={}),null!=e.structable?t.structable=e.structable:t.structable="",null!=e.structable_read?t.structable_read=e.structable_read:t.structable_read="",null!=e.eventFoStart?t.eventFoStart=e.eventFoStart:t.eventFoStart="DataCoffeeShop",null!=e.eventFoStart_config?t.eventFoStart_config=e.eventFoStart_config:t.eventFoStart_config="";let i="eventClick",o="eventClick_config";return t[i]=e[i]?e[i]:"DataCoffeeShop",t[o]=e[o]?e[o]:"",null!=e.eventFo_Year?t.eventFo_Year=e.eventFo_Year:t.eventFo_Year="",null!=e.formatDateRead?t.formatDateRead=e.formatDateRead:t.formatDateRead="",null!=e.formatDateGet?t.formatDateGet=e.formatDateGet:t.formatDateGet="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var i=this.state.data;i[e]=t.target.value,this.setState({data:i})}render(){return(0,l.jsxs)("div",{className:"col-sm-12 col-md-12",children:[(0,l.jsx)(We.Z,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),(0,l.jsx)(We.Z,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),(0,l.jsx)(We.Z,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),(0,l.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:(0,l.jsxs)("div",{className:"panel panel-primary",children:[(0,l.jsx)("div",{className:"panel-heading",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-xs-8 col-sm-8 col-md-8",children:(0,l.jsx)("h3",{className:"panel-title text-capitalize",children:(0,l.jsx)("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse",children:"G\u1ecdi fo khi m\u1edbi m\u1edf calender"})})}),(0,l.jsx)("div",{className:"col-xs-4 col-sm-4 col-md-4",children:(0,l.jsx)("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse",children:(0,l.jsx)("i",{className:"fa fa-angle-down fa-lg fa-inverse"})})})]})}),(0,l.jsx)("div",{id:this.state.private_key_config+"_function",className:"collapse",children:(0,l.jsxs)("div",{className:"panel-body",children:[(0,l.jsx)(et.Z,{class:"col-sm-12 col-md-12",name:"H\xe0nh \u0111\u1ed9ng",value:this.state.data.eventFoStart,data:[{title:"L\u1ea5y v\u1edbi API",code:"LearnApi"},{title:"L\u1ea5y v\u1edbi SQL",code:"LearnSql"},{title:"Data Coffee Shop",code:"DataCoffeeShop"}],onChange:e=>this.onChange_Value("eventFoStart",e)}),(0,l.jsx)(We.Z,{class:"col-sm-12 col-md-12",name:"T\xean c\u1ea5u h\xecnh li\xean k\u1ebft (API,SQL,DCS)",value:this.state.data.eventFoStart_config,onChange:e=>this.onChange_Value("eventFoStart_config",e)})]})})]})}),(0,l.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:(0,l.jsxs)("div",{className:"panel panel-primary",children:[(0,l.jsx)("div",{className:"panel-heading",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-xs-8 col-sm-8 col-md-8",children:(0,l.jsx)("h3",{className:"panel-title text-capitalize",children:(0,l.jsx)("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse",children:"Click event"})})}),(0,l.jsx)("div",{className:"col-xs-4 col-sm-4 col-md-4",children:(0,l.jsx)("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse",children:(0,l.jsx)("i",{className:"fa fa-angle-down fa-lg fa-inverse"})})})]})}),(0,l.jsx)("div",{id:this.state.private_key_config+"_function",className:"collapse",children:(0,l.jsxs)("div",{className:"panel-body",children:[(0,l.jsx)(et.Z,{class:"col-sm-12 col-md-12",name:"H\xe0nh \u0111\u1ed9ng",value:this.state.data.eventClick,data:[{title:"L\u1ea5y v\u1edbi API",code:"LearnApi"},{title:"L\u1ea5y v\u1edbi SQL",code:"LearnSql"},{title:"Data Coffee Shop",code:"DataCoffeeShop"}],onChange:e=>this.onChange_Value("eventClick",e)}),(0,l.jsx)(We.Z,{class:"col-sm-12 col-md-12",name:"T\xean c\u1ea5u h\xecnh li\xean k\u1ebft (API,SQL,DCS)",value:this.state.data.eventClick_config,onChange:e=>this.onChange_Value("eventClick_config",e)})]})})]})}),(0,l.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:(0,l.jsxs)("div",{className:"panel panel-primary",children:[(0,l.jsx)("div",{className:"panel-heading",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-xs-8 col-sm-8 col-md-8",children:(0,l.jsx)("h3",{className:"panel-title text-capitalize",children:(0,l.jsx)("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse",children:"Chuy\u1ec3n date*"})})}),(0,l.jsx)("div",{className:"col-xs-4 col-sm-4 col-md-4",children:(0,l.jsx)("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse",children:(0,l.jsx)("i",{className:"fa fa-angle-down fa-lg fa-inverse"})})})]})}),(0,l.jsx)("div",{id:this.state.private_key_config+"_function",className:"collapse",children:(0,l.jsxs)("div",{className:"panel-body",children:[(0,l.jsx)(We.Z,{class:"col-sm-12 col-md-6",name:"\u0110\u1ecbnh d\u1ea1ng ng\xe0y \u0111\u1ea7u v\xe0o",value:this.state.data.eventFoStart_config,onChange:e=>this.onChange_Value("eventFoStart_config",e)}),(0,l.jsx)(We.Z,{class:"col-sm-12 col-md-6",name:"\u0110\u1ecbnh d\u1ea1ng ng\xe0y \u0111\u1ea7u ra",value:this.state.data.eventFoStart_config,onChange:e=>this.onChange_Value("eventFoStart_config",e)})]})})]})})]})}}const Ft=Nt;class Lt extends a.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),null!=e.regex_format&&(t.regex_format=e.regex_format),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return(0,l.jsx)("div",{className:"col-sm-12 col-md-12",children:(0,l.jsx)("div",{className:"prtm-block-content",children:(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsxs)("table",{className:"table table-striped",children:[(0,l.jsx)("thead",{className:"thead-primary",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Confirmation Name"}),(0,l.jsx)("th",{children:"Data"})]})}),(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"Required"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"The number of words is not less than"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"The number of words does not exceed"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)("label",{children:"Regex structure"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{className:"form-control",value:void 0!==this.state.data.regex_format?this.state.data.regex_format:"",type:"text",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.regex_format=e.target.value:t.regex_format="",this.setState({data:t})}})})]})]})]})})})})}}const Et=Lt;class jt extends a.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:s.ZP.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return(0,l.jsx)("div",{children:this.state.lang_system.map(((e,t)=>(0,l.jsx)(We.Z,{class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var i=this.state.data;i[e.key]=t.target.value,this.setState({data:i})}},t)))})}}const Zt=jt;class Rt extends a.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var i=this.state.data;i[e]=t.target.value,this.setState({data:i})}render(){return(0,l.jsxs)("div",{className:"col-sm-12 col-md-12",children:[(0,l.jsx)(et.Z,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),(0,l.jsx)(et.Z,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)})]})}}const Qt=Rt;class zt extends a.Component{constructor(e){super(e),this.getValue=()=>({}),this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.properties?t.properties=e.properties:t.properties="",t}render(){return(0,l.jsx)("div",{})}}const Ut=zt;const Bt=class{constructor(e,t,i){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=e=>{this.property.cmd.disabled=e},this.property={main:[],position:[],cmd:{visible:"true",disabled:"true",block:"false"}}}};class Yt extends a.Component{render(){return(0,l.jsx)(a.Fragment,{children:""!==this.props.ofgroup&&"false"!==this.props.ofgroup&&void 0!==this.props.ofgroup_data&&this.props.ofgroup_data.map(((e,t)=>(void 0===e.config.onTable||""===e.config.onTable)&&(0,l.jsx)(f.Z,{btn_of_grid:this.props.btn_of_grid,index:t,default:e.default,visibility:e.visibility,config:e.config,role:e.role,property:e.property,validate:e.validate,lang:e.lang,configAVD:e.configAVD,inputType:e.inputtype,value:e.value,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,infoView:this.props.infoView,css_default:this.props.css_default,ofgroup_data:this.props.ofgroup_data,ofgroup_parent:this.props.ofgroup_parent,ofgroup_child:!0},t)))})}}const Ht=Yt;class Vt extends a.Component{constructor(e){super(e),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>{},this.getDataOOP=(e,t)=>{const{list_component:i}=e,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()},(()=>{this.calendar.setOption("locale",this.state.lang_select)}))},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>(0,l.jsx)(Ft,{data:e,ref:e=>s.ZP.setConfigComponent("config",e)}),this.getFormRole=e=>(0,l.jsx)(Qt,{data:e,ref:e=>s.ZP.setConfigComponent("role",e)}),this.getFormValidate=e=>(0,l.jsx)(Et,{data:e,ref:e=>s.ZP.setConfigComponent("validate",e)}),this.getFormProperty=e=>(0,l.jsx)(Ut,{data:e,ref:e=>s.ZP.setConfigComponent("property",e)}),this.getFormLang=(e,t,i,o,a)=>(0,l.jsx)(Zt,{data:o,default:e,config:t,validate:i,configAVD:a,ref:e=>s.ZP.setConfigComponent("lang",e)}),this.setDataGB=(e,t)=>{},this.set=(e,t)=>{if(void 0!==t&&void 0!==t.calender&&t.calender.length>=0){let e=[];for(let i=0;i<t.calender.length;i++){let o=t.calender[i];if(void 0!==o.calender&&void 0!==o.calender.start&&o.calender.title){let t=(0,_e.ji)(o.calender.start,"dd/mm/yyyy");null!=t&&e.push({id:s.ZP.autoID(),title:s.ZP.getLang(o.calender.title),start:(0,_e.Qv)(t,"ISOString"),end:null,constraint:o.calender.constraint?o.calender.constraint:"",color:o.calender.color?o.calender.color:"#257e4a",allDay:!!o.calender.allDay&&o.calender.allDay})}}this.addEvents(e)}},this.setAdvanced=(e,t)=>{if(void 0!==t&&void 0!==t&&t.length>0){let e=[];for(let i=0;i<t.length;i++){let o=t[i].calender.calender;if(void 0!==o&&void 0!==o.start&&o.title){let t=(0,_e.ji)(o.start,"dd/mm/yyyy");null!=t&&e.push({id:s.ZP.autoID(),title:s.ZP.getLang(o.title),start:(0,_e.Qv)(t,"ISOString"),end:null,constraint:o.constraint?o.constraint:"",color:o.color?o.color:"#257e4a",allDay:!!o.allDay&&o.allDay})}}this.addEvents(e)}},this.setGetInfo=(e,t)=>{if(void 0!==(t=t[this.props.default.code])&&void 0!==t&&t.length>0){let e=[];for(let i=0;i<t.length;i++){let o=t[i].calender.calender;if(void 0!==o&&void 0!==o.start&&o.title){let t=(0,_e.ji)(o.start,"dd/mm/yyyy");null!=t&&e.push({id:s.ZP.autoID(),title:s.ZP.getLang(o.title),start:(0,_e.Qv)(t,"ISOString"),end:null,constraint:o.constraint?o.constraint:"",color:o.color?o.color:"#257e4a",allDay:!!o.allDay&&o.allDay})}}this.addEvents(e)}},this.goToDate=(e,t)=>{this.calendar&&this.calendar.gotoDate(new Date(t))},this.get=(e,t)=>{var i=!0;if(e.checkError&&"false"===e.checkError&&(i=!1),!i||!this.checkValidate()){var o=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(o=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(o=!0),o)){var a=this.props.config.structable;if(a.includes("|"))for(var s=a.split("|"),n=0;n<s.length;n++)this.readData(s[n],e.inform);else this.readData(a,e.inform)}}},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{let i=this.calendar.getEventById(this.eventNeedDeleteId);i&&i.remove()},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderMess=e=>s.ZP.getLang(e),this.propertyConstructor=new Bt(e.inputType,e.default,e.config);var t=s.ZP.component_propertyIndex(this.props.property.properties,this.propertyConstructor.getProperty());void 0===t&&(t={});var i=this.props.validate;void 0===i&&(i={}),this.callform_detail="",this.callform="",this.data_select={};var o=this.props.lang;void 0===o&&(o={});let a={mode:"",col_text:"",col_input:""};void 0!==e.infoA.mode_form&&(a=e.infoA.mode_form);let n={parent:"",child:""},r={class:""},c=void 0!==this.props.ofgroup&&""!==this.props.ofgroup&&"false"!==this.props.ofgroup,d=void 0!==e.infoA.mode_form&&"1"===e.infoA.mode_form.mode,h=!!this.props.ofgroup_child;if(d)if(h)n={parent:"",child:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:void 0!==this.props.css_default.class&&""!==this.props.css_default.class?this.props.css_default.class:"col-sm-4"};else if(c){let e="col-sm-"+parseInt(10/(this.props.ofgroup_data.length+1));r={class:e},n={parent:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:e,child:""}}else n={parent:"col-sm-6",child:""};else n=h?{parent:"",child:this.props.default.class+" jwebui-ofgroup"}:c?0===this.props.ofgroup_data.length?{parent:this.props.default.class,child:""}:{parent:this.props.default.class_ofgroup,child:this.props.default.class+" jwebui-ofgroup-fisrt"}:{parent:this.props.default.class,child:""};this.resourceData={id:s.ZP.autoID(),title:"Resource"},this.state={value:{},value_old:{},data:[],lang:o,lang_select:s.ZP.getLangKey(),validate:i,date_now:(new Date).toISOString(),data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",config_mode:a,class_config:n,css_default:r}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this),_.ZP.runFoWithContext([{txcode:"#sys:fo-calender-loadData",input:{dataType:this.props.config.eventFoStart,dataContent:this.props.config.eventFoStart_config}}],{},this.props.infoA,this.props.infoA_parent,this.props.default)}),s.ZP.getTimeAddComponent());let e=s.ZP.getConfigUserDefault("list_lang_config");for(let t=0;t<e.length;t++)void 0!==e[t].key&&s.ZP.loadJs("/app/calender/core/locales/"+e[t].key+".js");s.ZP.loadCss("/app/calender/core/main.css"),s.ZP.loadCss("/app/calender/daygrid/main.css"),s.ZP.loadCss("/app/calender/timegrid/main.css"),s.ZP.loadCss("/app/calender/list/main.css"),s.ZP.loadJs("/app/calender/core/main.js").then((e=>{s.ZP.loadJs("/app/calender/interaction/main.js").then((e=>{s.ZP.loadJs("/app/calender/daygrid/main.js").then((e=>{s.ZP.loadJs("/app/calender/timegrid/main.js").then((e=>{s.ZP.loadJs("/app/calender/list/main.js").then((e=>{this.calendar=new window.FullCalendar.Calendar(this.refs.calendar,{plugins:["interaction","dayGrid","timeGrid","list"],header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},locale:s.ZP.getLangKey(),weekNumbers:!0,weekNumbersWithinDays:!0,weekNumberCalculation:"ISO",contentHeight:900,defaultDate:this.state.date_now,navLinks:!0,businessHours:!0,editable:!0,events:[],displayEventTime:!1,eventClick:e=>{this.eventNeedDeleteId=e.event.id,_.ZP.runFoWithContext([{txcode:"#sys:fo-calendar-removeEvent",input:{dataType:this.props.config.eventClick,dataContent:this.props.config.eventClick_config,start:(0,_e.p6)(e.event.start,"YYYY-MM-DD")}}],{},this.props.infoA,this.props.infoA_parent,this.props.default)},dateClick:e=>{}}),this.calendar.render()}),(e=>{}))}),(e=>{}))}),(e=>{}))}),(e=>{}))}),(e=>{}))}readData(e,t){if(e.includes(".")){var i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}readEvents(){let e=this.calendar.getEvents(),t=[];for(let i=0;i<e.length;i++){let o=e[i];void 0!==o.start&&void 0!==o.end&&void 0!==o.title&&t.push({start:o.start,end:o.end,title:o.title,backgroundColor:o.backgroundColor,borderColor:o.borderColor,textColor:o.textColor,rendering:o.rendering,groupId:o.groupId,allDay:o.allDay})}return t}addEvents(e){for(var t=this.calendar.getEventSources(),i=t.length,o=0;o<i;o++)t[o].remove();this.calendar.addEventSource(e)}render(){return(0,l.jsxs)("div",{className:"col-sm-12 col-md-12",children:[(0,l.jsx)("div",{ref:"calendar",className:"basic-full-calendar malibu-component-padding",style:{margin:"32px auto 32px"}}),(0,l.jsx)(Ht,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,infoView:this.props.infoView,ofgroup:this.props.ofgroup,ofgroup_data:this.props.ofgroup_data,ofgroup_parent:s.ZP.cloneJson(this.props),css_default:this.state.css_default})]})}}const Wt=Vt;class Gt extends a.Component{constructor(e){super(e),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>{},this.getDataOOP=(e,t)=>{const{list_component:i}=e,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.drawChart=()=>{if(void 0!==this.state.data&&void 0!==window.google&&void 0!==window.google.visualization){let e=window.google.visualization.arrayToDataTable(this.state.data),{options:t,chart_id:i,chartType:o}=this.state,a=this.getChartByIdAndType(i,o);null!=a&&a.draw(e,t)}},this.getChartByIdAndType=(e,t)=>{let i=null;switch(t){case"AreaChart":i=new window.google.visualization.AreaChart(document.getElementById(e));break;case"ColumnChart":i=new window.google.visualization.ColumnChart(document.getElementById(e));break;case"LineChart":i=new window.google.visualization.LineChart(document.getElementById(e));break;case"PieChart":i=new window.google.visualization.PieChart(document.getElementById(e))}return i},this.setDataGB=(e,t)=>{},this.set=(e,t)=>{if(void 0!==t&&void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){let e=this.props.config.structable_read.split(".");if(e.length>0&&void 0!==t[e[0]]&&void 0!==t[e[0]][e[1]])return void this.convertDataJWebUI_toDataChart(t)}this.convertDataJWebUI_toDataChart([])},this.setAdvanced=(e,t)=>{if(e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.setGetInfo=(e,t)=>{if(t=t[this.props.default.code],e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&(i.putDataSetAdvanced(this.props.default,this.data_select),i.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var o="";void 0!==this.props.config.data_view&&(o=": "+s.ZP.getOOP(this.data_select,this.props.config.data_view.trim()));var a="";void 0!==this.props.config.data_value&&(a=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:a,data_view:o})}},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{let i=s.ZP.getDataLimited(this.props.config.query_data,0,9999999);this.setState({data:this.convertDataJWebUI_toDataChart(i.data,this.state.data_column)},(()=>this.drawChart()))},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderMess=e=>s.ZP.getLang(e);var t=s.ZP.getDataLimited(this.props.config.query_data,0,9999999);let i=this.props.lang;void 0===i&&(i={});let o={};void 0!==this.props.config.options&&(o=s.ZP.jsonParser(this.props.config.options),void 0===o&&(o={}));let a=[];void 0!==this.props.config.columns&&(a=s.ZP.jsonParser(this.props.config.columns),void 0===a&&(a=[]));let n=600;void 0!==this.props.config.chart_height&&"0"!==this.props.config.chart_height&&(n=parseInt(this.props.config.chart_height));let r=document.getElementById("content").offsetWidth-240;void 0!==this.props.config.chart_width&&""!==this.props.config.chart_width&&"0"!==this.props.config.chart_width&&(r=parseInt(this.props.config.chart_width)),o.width=r,o.height=n;let l=s.ZP.autoID();this.state={chart_id:l,value:this.data_default,data_column:a,data:this.convertDataJWebUI_toDataChart(t.data,a),options:o,chartType:this.props.config.chartType,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:""}}convertDataJWebUI_toDataChart(e,t){let i={},o=t,a=[];if(void 0!==e&&void 0!==t){for(let t=0;t<e.length;t++){let a=e[t];if(o.length>1&&void 0!==o[0].tableColumnGroup){var s;let e=this.readTableCode(o[0].tableColumnGroup,a);"date"===(null===(s=o[0].config)||void 0===s?void 0:s.value_type)&&(e=new Date(e)),void 0===i[e]&&(i[e]=[]);for(let t=1;t<o.length;t++)if(void 0!==o[t].tableColumn&&""!==o[t].tableColumn.trim()){let s=i[e][t-1];void 0===s&&(s=0);let n=this.readTableCode(o[t].tableColumn,a);""!==n&&(s=n,i[e][t-1]=s)}}}let r=[];for(let e=0;e<t.length;e++)void 0!==t[e].columnName&&r.push(t[e].columnName);a.push(r);for(let e in i){var n;let t=[];"date"===(null===(n=o[0].config)||void 0===n?void 0:n.value_type)?t.push(new Date(e)):t.push(e);let s=i[e];for(let e=0;e<s.length;e++)t.push(s[e]);a.push(t)}}return a}readTableCode(e,t){if(e.includes(".")&&void 0!==t){let i=e.split(".");if(i.length>1)return t[i[0]][[i[1]]]}return""}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this),this.drawChart()}),s.ZP.getTimeAddComponent())}readData(e,t){if(e.includes(".")){var i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}render(){return(0,l.jsx)("div",{className:"col-sm-12 col-md-12",children:(0,l.jsx)("div",{id:this.state.chart_id,style:{width:"100%"}})})}}const Jt=Gt;class qt extends a.Component{constructor(e){var t,i;super(e),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>this.state.value,this.getDataOOP=(e,t)=>{const{list_component:i}=e,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.setDataGB=(e,t)=>{},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var i=this.props.config.structable_read.split(".");if(i.length>0&&void 0!==t[i[0]]&&void 0!==t[i[0]][i[1]])return this.data_debug.data_cpn=t[i[0]][i[1]],void this.setState({value:t[i[0]][i[1]]})}this.data_debug.data_cpn="undefined"}},this.setAdvanced=(e,t)=>{},this.get=(e,t)=>{},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default})},this.setDataDefault=()=>{this.setState({value:this.data_default})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderDebug=()=>{if(s.ZP.isDebug()){this.props.config.structable=this.props.config.structable||"";let e=this.props.config.structable.split(".")[1],t=this.data_debug.data_cpn;return null===t&&(t="NULL"),(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${e}|:|${t}|`})}},this.getComponentConfig=()=>{let e=this.state.total;return isNaN(parseInt(e))&&parseInt(e)<=0&&(e=100),{config:{default:{title:this.props.lang.label[this.state.lang_select],hasLabel:"true"===this.props.config.label},cmd:{percent:this.state.value},mode:!0}}},this.getComponentConfigLabel=()=>{let e=this.state.lang.label[this.state.lang_select];return{config:{default:{title:e,class:this.props.default.class},cmd:{visible:"false"!==String(this.state.hasLabel)&&!!e&&""!==e}}}},this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var o=this.props.validate;void 0===o&&(o={}),this.data_select={};var a=this.props.lang;void 0===a&&(a={});let n=null===(t=this.props.config)||void 0===t?void 0:t.label,r=null===(i=this.props.config)||void 0===i?void 0:i.total;this.state={value:this.data_default,value_old:"",lang:a,lang_select:s.ZP.getLangKey(),validate:o,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{},hasLabel:n,total:r},this.data_debug={}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){if(e.includes(".")){var i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}render(){if("false"===String(this.state.CMD.visible))return null;const e=(0,n.RP)("uProgressBarLogic");return(0,l.jsx)(e,{dataFull:this.getComponentConfig()})}}const Kt=qt;const Xt=class{constructor(e,t,i){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=e=>{this.property.cmd.disabled=e},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class $t extends a.Component{constructor(e){var t;if(super(e),this.setDataOOP=(e,t)=>{this.setState({dataOOP:t},(()=>{s.ZP.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,t,this.props.infoA_parent,"update")}))},this.getDataOOP=(e,t)=>{let{list_component:i}=e,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.state.dataOOP}},this.setCMD=(e,t)=>{if(void 0!==e&&void 0!==t){let i=e.list_component;if(i&&i.includes(this.props.default.code)){const{CMD:e}=this.state;let i=Object.assign(s.ZP.cloneJson(e),t);e.disabled===i.disabled&&e.visible===i.visible&&e.block===i.block||this.setState({CMD:i})}}},this.getAdvanced=(e,t)=>this.state.file_content,this.setAdvanced=(e,t)=>{},this.getInfoCheckRun=()=>{let e=this.propertyConstructor.getCMD();return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.state.lang_default?this.setState({lang:s.ZP.getLang(this.props.default.code),lang_select:s.ZP.getLangKey()}):this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.reload=(e,t)=>{this.setState({file_value:void 0,file_content:void 0})},this.runFO=(e,t)=>{t.action&&_.ZP.runActionWithContext(t.action,{},this.props.infoA,this.props.infoA_parent,this.props.default),t.txFo&&_.ZP.runFoWithContext(t.txFo,{},this.props.infoA,this.props.infoA_parent,this.props.default)},this.setLoadingAction=(e,t)=>{let i=(null===t||void 0===t?void 0:t.isLoading)||!1;this.setState({isLoading:i})},this.fileSelectHandler=e=>{},this.runRule=e=>{if(e){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.showToast=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s.ZP.showToast(e,t,i)},this.propertyConstructor=new Xt(e.inputType,e.default,e.config),this.uploadfile_result={},this.disabled=!1,void 0!==this.props.infoA.form_code){var i=s.ZP.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=i&&void 0!==i.role&&(void 0!==i.role.disabled&&(!0===i.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==i.role.visible&&(!0===i.role.visible?this.propertyConstructor.setCMD_visible(e.visibility&&!0):this.propertyConstructor.setCMD_visible(e.visibility&&!1)))}var o=this.props.lang;void 0===o&&(o={});let a=(null===(t=this.props.config.uploadfile)||void 0===t?void 0:t.filetype)||"*";this.fileTypeRegx=a.split(",").map((function(e){return new RegExp(e.replace("*","[^\\/,]+"))}));let n=!1;void 0!=={btn_remove:{color:"danger",icon:"fa-trash-o"},btn_save:{color:"success",icon:"fa-save"},btn_add:{color:"primary",icon:"fa-plus"},btn_modified:{color:"warning",icon:"fa-pencil-square-o"},btn_update:{color:"warning",icon:"fa-cloud-upload"},btn_cancel:{color:"default",icon:"fa-ban"},btn_clear:{color:"default",icon:"fa-times"},btn_import:{color:"primary",icon:"fa-upload"},btn_export:{color:"primary",icon:"fa-download"},btn_accept:{color:"primary",icon:"fa-check"},btn_apply:{color:"primary",icon:"fa-check"},btn_search:{color:"primary",icon:"fa-search"},btn_copy:{color:"primary",icon:"fa-files-o"},btn_print:{color:"base",icon:"fa-print"},btn_printVoucher:{color:"base",icon:"fa-file-text-o"}}[this.props.default.code]&&(o=s.ZP.getLang(this.props.default.code),n=!0);var r=!1;void 0!==this.props.config.isLookup&&"true"===this.props.config.isLookup&&(r=!0),this.state={file_value:void 0,file_content:"",lang:o,lang_select:s.ZP.getLangKey(),lang_default:n,dataOOP:{},count:1,show_modal:"none",isLookup:r,CMD:this.propertyConstructor.getCMD(),isLoading:!1},this.time_last_click=0}getTemplateConfig(){var e;let{isLoading:t}=this.state;return{config:{default:{title:this.props.default.name,type:this.props.config.color,class:this.props.default.class,icon:this.props.config.icon,accept:null===(e=this.props.config.uploadfile)||void 0===e?void 0:e.filetype,att_content:this.state.file_value?this.state.file_value.name:"No file choose"},cmd:{disable:t||"true"===String(this.state.CMD.disabled),isLoading:t,visible:"true"===String(this.state.CMD.visible)}}}}checkFileTypeAccept(e){return this.fileTypeRegx.some((t=>t.test(e)))}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}readData(e,t){let i=e.split(".");if(2!==i.length)return;let o=this.uploadfile_result;switch(t){case void 0:case"true":s.ZP.putData(i[0],i[1],o,this.props.infoA);break;case"false":s.ZP.putDataGB(i[0],i[1]);break;default:s.ZP.putDataGB(i[0],i[1],"")}}componentDidMount(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let e=s.ZP.cloneJson(this.props.infoA);e.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props.default,"callform")}setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}onClick(){let e=(new Date).getTime();e-this.time_last_click<1e3||(this.time_last_click=e,void 0!==this.props.config.uploadfile&&"true"===this.props.config.uploadfile.active?this.refs.uploadfile_hidden.click():this.this_redirect())}this_redirect(){if(this.propertyConstructor.getCMD_visible())if(void 0!==this.props.config.useAction)if("true"===this.props.config.useAction){var e=s.ZP.parseJson(this.props.config.txFoActions);void 0!==e?_.ZP.runActionWithContext(e,{},this.props.infoA,this.props.infoA_parent,this.props.default):s.ZP.AppException("#CBUTTON.onClick","config_fo is undefined")}else if(void 0!==this.props.config.txFo){var t=s.ZP.parseJson(this.props.config.txFo);void 0!==t?_.ZP.runFoWithContext(t,{},this.props.infoA,this.props.infoA_parent,this.props.default):s.ZP.AppException("#CBUTTON.onClick","Error Json is undefined")}else s.ZP.AppException("#CBUTTON.onClick","txFo is undefined");else s.ZP.AppException("#CBUTTON.onClick","useAction is undefined");else alert(s.ZP.getLang("#sysDontLoveMe"));var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click"),s.ZP.isDebug()&&s.ZP.copyToClipboard(JSON.stringify(this.props.config.txFo))}render(){const e=(0,n.RP)("uInputFile");if("false"===this.state.CMD.visible)return null;const t=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Change:e=>{if(e.preventDefault(),void 0!==e.target.files)if(e.target.files.length>0)if(this.checkFileTypeAccept(e.target.files[0].type)||""===e.target.files[0].type){if(this.uploadfile_result={name:e.target.files[0].name},"encode_server"!==this.props.config.read_style){let t=new FileReader,[i]=e.target.files;t.onloadend=()=>{this.setState({file_content:"base64"===this.props.config.read_style?t.result.split(",")[1]:t.result},(()=>{if(!this.props.config.structable){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click")}}))};let o=100;void 0!==i&&null!==i&&i.size/1024/1024<o&&("text_in_file"===this.props.config.read_style?t.readAsText(i):t.readAsDataURL(i))}else this.props.config.structable&&(0,S.bq)(e.target.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((e=>{this.this_redirect()}),(e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#",!1):this.showToast(s.ZP.getLang("FileUploadError"),!1)}));this.setState({file_value:e.target.files[0]})}else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1)},abs_Click:(e,t)=>{this.onClick()}})})}),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Change:e=>{if(e.preventDefault(),void 0!==e.target.files)if(e.target.files.length>0)if(this.checkFileTypeAccept(e.target.files[0].type)||""===e.target.files[0].type){if(this.uploadfile_result={name:e.target.files[0].name},"encode_server"!==this.props.config.read_style){let t=new FileReader,[i]=e.target.files;t.onloadend=()=>{this.setState({file_content:"base64"===this.props.config.read_style?t.result.split(",")[1]:t.result},(()=>{if(!this.props.config.structable){var e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click")}}))};let o=100;void 0!==i&&null!==i&&i.size/1024/1024<o&&("text_in_file"===this.props.config.read_style?t.readAsText(i):t.readAsDataURL(i))}else this.props.config.structable&&(0,S.bq)(e.target.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((e=>{this.this_redirect()}),(e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#",!1):this.showToast(s.ZP.getLang("FileUploadError"),!1)}));this.setState({file_value:e.target.files[0]})}else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1)},abs_Click:(e,t)=>{this.onClick()}})})})}}const ei=$t;const ti=class{constructor(e,t,i){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=e=>{this.property.cmd.disabled=e},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class ii extends a.Component{constructor(e){if(super(e),this.setDataOOP=(e,t)=>{this.setState({dataOOP:t},(()=>{s.ZP.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,t,this.props.infoA_parent,"update")}))},this.getDataOOP=(e,t)=>{const{list_component:i}=e,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.state.dataOOP}},this.setCMD=(e,t)=>{if(void 0!==e&&void 0!==t){const i=e.list_component;if(i&&i.includes(this.props.default.code)){const{CMD:e}=this.state;let i=Object.assign(s.ZP.cloneJson(e),t);e.disabled===i.disabled&&e.visible===i.visible&&e.block===i.block||this.setState({CMD:i})}}},this.getAdvanced=(e,t)=>{},this.setAdvanced=(e,t)=>{},this.setGetInfo=(e,t)=>{t=t[this.props.default.code]},this.getInfoCheckRun=()=>{let e=this.propertyConstructor.getCMD();return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.state.lang_default?this.setState({lang:s.ZP.getLang(this.props.default.code),lang_select:s.ZP.getLangKey()}):this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.reload=(e,t)=>{this.setState({file_value:void 0,img_value:"../rs/global/img/file_icon.svg"})},this.runFO=(e,t)=>{t.action&&_.ZP.runActionWithContext(t.action,{},this.props.infoA,this.props.infoA_parent,this.props.default),t.txFo&&_.ZP.runFoWithContext(t.txFo,{},this.props.infoA,this.props.infoA_parent,this.props.default)},this.setLoadingAction=(e,t)=>{let i=(null===t||void 0===t?void 0:t.isLoading)||!1;this.setState({isLoading:i})},this.fileSelectHandler=e=>{},this.set=(e,t)=>{if(void 0!==t&&null!==t&&void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){let e=this.props.config.structable_read.split(".");if(e.length>0&&void 0!==t[e[0]]&&null!==t[e[0]]&&void 0!==t[e[0]][e[1]]&&null!==t[e[0]][e[1]])return void(""!==t[e[0]][e[1]]?"string"===typeof t[e[0]][e[1]]&&(t[e[0]][e[1]].indexOf("../rs")>-1||t[e[0]][e[1]].indexOf(this.prefixImage)>-1?this.setState({img_value:t[e[0]][e[1]]},(()=>{})):this.setState({img_value:this.prefixImage+t[e[0]][e[1]]},(()=>{}))):this.setState({img_value:"../rs/global/img/file_icon.svg"},(()=>{})))}},this.runRule=e=>{if(e){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.showToast=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s.ZP.showToast(e,t,i)},this.propertyConstructor=new ti(e.inputType,e.default,e.config),this.prefixImage="data:image/png;base64,",this.uploadfile_result={},this.disabled=!1,void 0!==this.props.infoA.form_code){var t=s.ZP.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=t&&void 0!==t.role&&(void 0!==t.role.disabled&&(!0===t.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==t.role.visible&&(!0===t.role.visible?this.propertyConstructor.setCMD_visible(e.visibility&&!0):this.propertyConstructor.setCMD_visible(e.visibility&&!1)))}var i=this.props.lang;void 0===i&&(i={});var o=!1;void 0!==this.props.config.isLookup&&"true"===this.props.config.isLookup&&(o=!0),this.state={file_value:void 0,lang:i,img_value:"",lang_select:s.ZP.getLangKey(),lang_default:!1,dataOOP:{},count:1,CMD:this.propertyConstructor.getCMD(),show_modal:"none",isLookup:o,isLoading:!1},this.time_last_click=0}getTemplateConfig(){let{isLoading:e,CMD:t}=this.state;return{config:{default:{title:this.props.default.name,type:this.props.config.color,class:this.props.default.class,icon:this.props.config.icon,accept:"image/png,image/jpeg",hasUpload:this.props.config.uploadfile,att_content:this.state.file_value?this.state.file_value.name:"No file choose"},cmd:{disable:e||"true"===String(t.disabled),visible:"true"===String(t.visible),isLoading:e}}}}checkFileTypeAccept(e){return"image/png,image/jpeg".split(",").map((function(e){return new RegExp(e.replace("*","[^\\/,]+"))})).some((t=>t.test(e)))}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}readData(e,t){var i=e.split(".");if(2!==i.length)return;let o=this.uploadfile_result;switch("{}"===JSON.stringify(o)&&(o=this.state.img_value),t){case void 0:case"true":s.ZP.putData(i[0],i[1],o,this.props.infoA);break;case"false":s.ZP.putDataGB(i[0],i[1]);break;default:s.ZP.putDataGB(i[0],i[1],"")}}componentDidMount(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let e=s.ZP.cloneJson(this.props.infoA);e.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props.default,"callform")}setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}onClick(){let e=(new Date).getTime();e-this.time_last_click<1e3||(this.time_last_click=e,void 0!==this.props.config.uploadfile&&"true"===this.props.config.uploadfile.active?this.refs.uploadfile_hidden.click():this.this_redirect())}this_redirect(){if(this.propertyConstructor.getCMD_visible())if(void 0!==this.props.config.useAction)if("true"===this.props.config.useAction){var e=s.ZP.parseJson(this.props.config.txFoActions);void 0!==e?_.ZP.runActionWithContext(e,{},this.props.infoA,this.props.infoA_parent,this.props.default):s.ZP.AppException("#UploadImage.onClick","config_fo is undefined")}else if(void 0!==this.props.config.txFo){var t=s.ZP.parseJson(this.props.config.txFo);void 0!==t?_.ZP.runFoWithContext(t,{},this.props.infoA,this.props.infoA_parent,this.props.default):s.ZP.AppException("#UploadImage.onClick","Error Json is undefined")}else s.ZP.AppException("#UploadImage.onClick","txFo is undefined");else s.ZP.AppException("#UploadImage.onClick","useAction is undefined");else alert(s.ZP.getLang("#sysDontLoveMe"));var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click"),s.ZP.isDebug()&&s.ZP.copyToClipboard(JSON.stringify(this.props.config.txFo))}render(){const e=(0,n.RP)("uUploadImage");if("false"===this.state.CMD.visible)return null;const t=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Change:e=>{void 0!==e.target.files&&(e.target.files.length>0&&this.checkFileTypeAccept(e.target.files[0].type)?((0,S.bq)(e.target.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((e=>{this.uploadfile_result=e,this.this_redirect()}),(e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#",!1):this.showToast(s.ZP.getLang("FileUploadError"),!1)})),this.setState({file_value:e.target.files[0]})):this.showToast(s.ZP.getLang("FileTypeError"),!1))},abs_Click:(e,t)=>{this.onClick()}})})}),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Change:e=>{if(e.preventDefault(),void 0!==e.target.files)if(e.target.files.length>0)if(this.checkFileTypeAccept(e.target.files[0].type)){let t=new FileReader,i=e.target.files[0];t.onloadend=()=>{let{img_value:e}=this.state;e=t.result,this.setState({img_value:e})};let o=10;void 0!==i&&null!==i&&i.size/1024/1024<o&&t.readAsDataURL(i),(0,S.bq)(e.target.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((e=>{this.uploadfile_result=e,this.this_redirect()}),(e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#",!1):this.showToast(s.ZP.getLang("FileUploadError"),!1)})),this.setState({file_value:e.target.files[0]})}else this.showToast(s.ZP.getLang("FileTypeError"),!1);else this.showToast(s.ZP.getLang("FileTypeError"),!1)},abs_Click:(e,t)=>{this.onClick()},value:this.state.img_value})})})}}const oi=ii;const ai=class{constructor(e,t,i){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=e=>{this.property.cmd.disabled=e},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class si extends a.Component{constructor(e){var t;super(e),t=this,this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{if(void 0!==e&&void 0!==t){const i=e.list_component;if(i&&i.includes(this.props.default.code)){this.propertyConstructor.setCMD(t);const{CMD:e}=this.state;let i=Object.assign(s.ZP.cloneJson(e),t);e.disabled===i.disabled&&e.visible===i.visible&&e.block===i.block||this.setState({CMD:i})}}},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>{},this.getDataOOP=(e,t)=>{const{list_component:i}=e,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{this.state.lang_default?this.setState({lang:s.ZP.getLang(this.props.default.code),lang_select:s.ZP.getLangKey()}):this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.setDataGB=(e,t)=>{},this.set=(e,t)=>{},this.get=(e,t)=>{var i=!0;if(e.checkError&&"false"===e.checkError&&(i=!1),!i||!this.checkValidate()){var o=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(o=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(o=!0),o)){var a=this.props.config.structable;if(a.includes("|"))for(var s=a.split("|"),n=0;n<s.length;n++)this.readData(s[n],e.inform);else this.readData(a,e.inform)}}},this.checkValidate=()=>!1,this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:[]})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderMess=e=>s.ZP.getLang(e),this.setPaging=e=>{this.callAPI(this.props.config.apiId,{page:e}).then((t=>{if(t.paging&&t.paging.total){let{value:i,dataFull_paging:o,titleNoData:a}=this.state;a="",o.result_total=t.paging.total,i=t.media,o.number_item=e-1,this.setState({dataFull_paging:o,value:i,titleNoData:a})}else{let{value:e,dataFull_paging:t,titleNoData:i}=this.state;t.result_total=0,e=[],t.number_item=0,i="Hasn't Signature Information",this.setState({value:e,dataFull_paging:t,titleNoData:i})}}))},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.state.isLoading||t.setState({isLoading:!0});var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];let n={},r=s.ZP.getFormAppAuto(t.props.infoA.key_form);return void 0!==r&&(n=r.getData("")),n&&(i=Object.assign(n,i)),a[0].input=Object.assign(a[0].input,i),(0,S.Yr)(a,o).then((e=>{var t=s.ZP.foGetData("infoError",e);return void 0!==t?{infoError:t}:s.ZP.foGetData("data",e)})).finally((e=>{t.setState({isLoading:!1})}))},this.renderModal=()=>{const e=this.MediaDetail;return this.state.isOpen?(0,l.jsxs)(a.Suspense,{fallback:(0,l.jsx)("div",{}),children:[" ",(0,l.jsx)(e,(0,o.Z)({},this.getDefaultConfig(this.state.value)))]}):null},this.propertyConstructor=new ai(e.inputType,e.default,e.config),this.accountNumberFormat=s.ZP.getParameterSystem("MEDIA_ACCOUNT_NUMBER");var i={};void 0===i&&(i={});var r=this.props.validate;void 0===r&&(r={}),this.callform_detail="",this.callform="",this.data_select={},this.referenceTypeData=[{title:"Single customer",value:"C"}],this.businessLineTypeData=[{title:"-Select one-",value:"XX"}];var c=this.props.lang;if(void 0===c&&(c={}),void 0!==this.props.infoA.form_code){var d=s.ZP.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=d&&void 0!==d.role&&(void 0!==d.role.disabled&&(!0===d.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==d.role.visible&&(!0===d.role.visible?this.propertyConstructor.setCMD_visible(e.visibility&&!0):this.propertyConstructor.setCMD_visible(e.visibility&&!1)))}this.businessLineTypeData=[{title:"-Select one-",value:"XX"}],this.state={value:[],value_old:"",CMD:this.propertyConstructor.getCMD(),lang:c,lang_select:s.ZP.getLangKey(),validate:r,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpen:!1,titleNoData:"",isLoading:!1,dataFull_paging:{result_total:0,paging_record:[{number:1,selected:!0}],abs_PagingActive:this.setPaging,number_item:0,config:{show:"Show",in:"in",jump_to_page:"Jump to page",results:"results"},mode:{noShowResult:!0}}},this.MediaDetail=(0,n.Iq)("O9_FormMediaDetail")}getTemplateConfig(){let{CMD:e,lang:t,lang_select:i,isLoading:o}=this.state;return{config:{default:{title:this.getTitleButton(t,i,this.props.default.name),type:this.props.config.color,class:this.props.default.class,icon:""},cmd:{disable:"true"===String(e.disabled),visible:"true"===String(this.state.CMD.visible),isLoading:o},mode:"signature"}}}getTitleButton(e,t,i,o){return t[i]?t[i]:o}componentDidMount(){(0,S.Yr)([{txcode:"bo-get-cdlistMediaFile",input:{}}],{}).then((e=>{let t=s.ZP.foGetData("data",e);this.OWN_CDLIST={STS:{},TYPE:{},CATEGORIES:{}};for(const i of t)"MEDIASTS"===i.cdname?this.OWN_CDLIST.STS[i.cdid]=i:"CTMTYPE"===i.cdname?this.referenceTypeData.push({title:i.caption,value:i.cdid}):"CATEGORIES"===i.cdname&&this.businessLineTypeData.push({title:i.caption,value:i.cdid})})),setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){}render(){const e=(0,n.RP)("uButton");return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getTemplateConfig()),{},{abs_Click:()=>{this.setState({isOpen:!0}),this.callAPI(this.props.config.apiId,{page:"1"}).then((e=>{if(e.paging&&e.paging.total){let{value:t,dataFull_paging:i,titleNoData:o}=this.state;o="",i.result_total=e.paging.total,t=e.media,i.number_item=0,this.setState({dataFull_paging:i,value:t,titleNoData:o})}else{let{value:e,dataFull_paging:t,titleNoData:i}=this.state;t.result_total=0,e=[],t.number_item=0,i="Hasn't Signature Information",this.setState({value:e,dataFull_paging:t,titleNoData:i})}}))}})}),this.renderModal()]})}isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(i){}return t}getRefTypeData(e){return[{title:"Single customer",value:"C"},{title:"Group of customer",value:"G"},{title:"Customer linkage",value:"L"}].map(((t,i)=>(0,o.Z)((0,o.Z)({},t),{},{selected:t.value===e})))}getDefaultConfig(e){if(void 0!==e)return{modal:{title:"Signature Viewer",visibility:this.state.isOpen,abs_Close:()=>{this.setState({isOpen:!1})}},media_paging:{dataFull:(0,o.Z)({},this.state.dataFull_paging)},form:{config:{default:{title:this.state.titleNoData}},cmd:{isLoading:this.state.isLoading}},stateData:e.map((e=>({img_form:{title:e.fn,link:this.isImage(e.mcs)?`data:image/png;base64,${e.mcs}`:"../rs/global/img/file_icon.svg",content:this.isImage(e.mcs)?"":e.mcs,file_type:e.FT},code:{dataFull:{config:{default:{title:"File Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.fn}},infor1:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:this.getBusinessLineTypeData(e.infor1)}},infor2:{dataFull:{config:{default:{title:"Customer Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.infor2}},expireDate:{dataFull:{config:{default:{placeholder:this.dateFormat||" ",title:"Expire date",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:e.ed?(0,Q.sx)((0,Q.xY)(e.ed),"DD/MM/YYYY"):""}},other:{dataFull:{config:{default:{title:"Account Number",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:(0,Q.Ui)(e.ot,this.accountNumberFormat)}}})))}}getBusinessLineTypeData(e){return this.businessLineTypeData.map(((t,i)=>(0,o.Z)((0,o.Z)({},t),{},{selected:t.value===e})))}}const ni=si,ri={},li={},ci={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class di{}di.get=()=>({main:ri,position:li,cmd:ci}),di.getCmd=()=>ci,di.getValueCmd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return void 0!==e.infoA.form_code&&(t=s.ZP.role_getComponent(e.infoA.form_code,e.default.codeHidden)||{},t=t.role||{}),t};const hi=di;var ui;class pi extends a.Component{constructor(e){var t,i,a,n,r,l,c,d,h,u;super(e),t=this,this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.callDir=()=>this,this.setCMD=(e,t)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.set=(e,t)=>{let i="false",o=0,a="table_paging";this.props.config.table_name&&(a=this.props.config.table_name+"_paging"),void 0!==t[a]&&(void 0!==t[a].total_items&&(o=t[a].total_items),void 0!==t[a].search_advanced&&(i=t[a].search_advanced));let n=this.buildPaging(o,this.state.config_table);this.dataGlobal=s.ZP.getDataLimited(this.state.config_table.query_data,0,999999999);let r={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[]},l=[];void 0!==r.data&&(l=r.data);let c=s.ZP.cloneJson(l),d=[],h=this.props.config.query_data.split(" "),u=h[h.length-1]||h;if(void 0!==c&&(d=c),Array.isArray(d)){var p,_,f,g;for(let e=0;e<d.length;e++)for(const t in d[e]){const i=d[e][t];if("object"!==typeof i){let t=s.ZP.cloneJson(d[e]);d[e]={},d[e][u]=t,d[e][u].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===i.AFGHkeyIndexWJ&&(d[e][t].AFGHkeyIndexWJ=s.ZP.autoID())}void 0!==(null===(p=this.props.config)||void 0===p||null===(_=p.columnSystemCheckBox)||void 0===_?void 0:_.methodGet)&&void 0!==(null===(f=this.props.config)||void 0===f?void 0:f.hasSystemColumnCheck)&&void 0!==(null===(g=this.props.config)||void 0===g?void 0:g.columnSystemCheckBox)?this.setState({statusCheck:{},column_search:{},total_record:o,paging:n,data:d,data_card:d,isSearchAdvanced:i,totalCheck:!1},(()=>{this.runRule("checked"),this.runRule("on_change")})):this.setState({column_search:{},total_record:o,paging:n,data:d,data_card:d,isSearchAdvanced:i,totalCheck:!1},(()=>{this.runRule("on_change")}))}else this.setState({data:l,data_card:l,total_record:o,paging:n,isSearchAdvanced:i,totalCheck:!1},(()=>{this.runRule("on_change")}))},this.runRule=e=>{e&&void 0!==(ui=s.ZP.getFormAppAuto(this.props.infoA.key_form))&&ui.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)},this.checkAllDataHandler=()=>{let e=this.props.config.query_data.split(" "),t=e[e.length-1]||e,i=this.state.statusCheck;for(let o=0;o<this.state.data.length;o++)this.state.totalCheck?i={}:i[this.state.data[o][t].AFGHkeyIndexWJ]=!0;this.setState({statusCheck:i,totalCheck:!this.state.totalCheck},(()=>{this.runRule("checked")}))},this.reload=(e,t)=>{this.page_index=1,this.card_page_index=1,this.setState({page_index:1},(()=>{}))},this.setData=function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.length>0?t.dataGlobal.data=e:t.dataGlobal=s.ZP.getDataLimited(t.state.config_table.query_data,0,999999999);let o={data:t.dataGlobal.data.slice(0,t.state.config_table.paging_record)||[],total:t.dataGlobal.total},a=[];void 0!==o.data&&(a=o.data);let n=s.ZP.cloneJson(a),r=[],l=t.props.config.query_data.split(" "),c=l[l.length-1]||l;if(void 0!==l&&""!==l&&(!0===l.includes(".")?void 0!==s.ZP.getOOP(n,l)&&(r=s.ZP.getOOP(n,l)):void 0!==n&&(r=n)),Array.isArray(r)){var d,h,u,p;for(let e=0;e<r.length;e++){const t=r[e];for(const i in t){const o=t[i];if("object"!==typeof o){let t=s.ZP.cloneJson(r[e]);r[e]={},r[e][c]=t,r[e][c].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(r[e][i].AFGHkeyIndexWJ=s.ZP.autoID())}}if(void 0!==(null===(d=t.props.config)||void 0===d||null===(h=d.columnSystemCheckBox)||void 0===h?void 0:h.methodGet)&&void 0!==(null===(u=t.props.config)||void 0===u?void 0:u.hasSystemColumnCheck)&&void 0!==(null===(p=t.props.config)||void 0===p?void 0:p.columnSystemCheckBox)){let e={},i=t.props.config.columnSystemCheckBox.methodGet;for(let t=0;t<r.length;t++)e[r[t][c].AFGHkeyIndexWJ]=r[t][c][i];t.setState({statusCheck:e,column_search:{},data:r,totalCheck:!1},(()=>{t.runRule("on_change")}))}else t.setState({column_search:{},data:r,totalCheck:!1},(()=>{t.runRule("on_change")}));i&&t.setState({data_card:r})}else t.setState({data:a,totalCheck:!1},(()=>{t.runRule("on_change")})),i&&t.setState({data_card:a})},this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.abs_getDataLimited=function(e,t){let i={data:this.state.dataFilter.slice(e,e+t)||[],total:this.state.dataFilter.length},o=i.data;if(!0===this.state.hasCheck)for(let n=0;n<o.length;n++)o[n].hasCheck__=!1;let a=1;void 0!==i.total&&(a=i.total);let s=this.buildPaging(a,this.state.config_table);this.setState({data:o,total_record:a,paging:s})},this.buildDataPaging=e=>({pagingIndex:e?1:this.page_index,recordItem:this.state.paging_record.find(((e,t)=>t===this.state.selectedRecordIndex)),isSearchAdvanced:this.state.isSearchAdvanced}),this.getData=()=>{var e;let t=this.state.data,i="true"===this.state.hasSystemColumnCheck?null===(e=this.state.checked_to_selected)||void 0===e?void 0:e.mode:"",o=this.props.config.query_data.split(" "),a=o[o.length-1]||o,s=this.state.statusCheck;switch(i){case"CHECK_TO_SELECTED":case"DEFAULT":case"NO_EMPTY":return t.filter((e=>s[e[a].AFGHkeyIndexWJ]));default:return{data:t,total_paging:this.state.total_record}}},this.getAdvanced=(e,t)=>this.getData(),this.handleMoveLeft=e=>{let t=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;t&&e--,"true"===i&&e--;let o=e-1,{columns:a}=this.state,s=a.splice(e,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.handleMoveRight=e=>{let t=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;t&&e--,"true"===i&&e--;let o=e+1,{columns:a}=this.state,s=a.splice(e,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.readData=(e,t)=>{e.includes(".")&&(void 0===t||"true"===t?this.props.config.table_name?s.ZP.putData(this.props.config.table_name,"paging",this.buildDataPaging(!0),this.props.infoA):s.ZP.putData("table_search","paging",this.buildDataPaging(!0),this.props.infoA):"false"===t?this.props.config.table_name?s.ZP.putData(this.props.config.table_name,"paging",this.buildDataPaging(!0),this.props.infoA):s.ZP.putData("table_search","paging",this.buildDataPaging(!0)):this.props.config.table_name?s.ZP.putData(this.props.config.table_name,"paging"," "):s.ZP.putData("table_search","paging"," "))},this.recordChangeHandler=e=>{let t=this.state.config_table;t.paging_record=this.state.paging_record[e];let i=this.buildPaging(this.state.total_record,t);this.page_index=1,this.card_page_index=1,this.setState({paging:i,page_index:1,selectedRecordIndex:e,config_table:t},(()=>{let e="table_search",t={};this.props.config.table_name&&(e=this.props.config.table_name),t[e]={paging:this.buildDataPaging()},"true"===this.state.isSearchAdvanced&&this.props.config.apiSearchAdvanced?this.callBOSearchAdvanced(this.props.config.apiSearchAdvanced,(0,o.Z)({},t),this.props.config.BoSearchAdvance).then((e=>{this.setData(e,!0)})):this.callBOSearch(this.props.config.apiId,(0,o.Z)({},t),this.props.config.BoSearch).then((e=>{this.setData(e,!0)}))}))},this.abs_PagingActive=e=>{this.page_index=e,this.setState({page_index:e},(()=>{let e="table_search",t={};this.props.config.table_name&&(e=this.props.config.table_name),t[e]={paging:this.buildDataPaging()},"true"===this.state.isSearchAdvanced&&this.props.config.apiSearchAdvanced?this.callBOSearchAdvanced(this.props.config.apiSearchAdvanced,(0,o.Z)({},t),this.props.config.BoSearchAdvance).then((e=>{this.setData(e)})):this.callBOSearch(this.props.config.apiId,(0,o.Z)({},t),this.props.config.BoSearch).then((e=>{this.setData(e)}))}))},this.callBOSearch=function(e,i,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(""!==o&&void 0!==o||(o="bo-search-API"),""===e)return;var n=[{txcode:o,input:{learn_api:e}}];let r={},l=s.ZP.getFormAppAuto(t.props.infoA.key_form);return void 0!==l&&(l.setLoadingAction(!0),r=l.getData("")),r&&i?i=Object.assign(r,i):i||(i=r),t.props.config.api_data&&(i=Object.assign(i,JSON.parse(t.props.config.api_data))),n[0].input=Object.assign(n[0].input,i),(0,S.Yr)(n,a).then((e=>{var i,o,a=s.ZP.foGetData("infoError",e);if(void 0!==a)return{infoError:a};let n=t.props.config.query_data.split(" "),r=n[n.length-1]||n;var l=s.ZP.foGetData(r,e);let c="table_search";if(t.props.config.table_name&&(c=t.props.config.table_name),null!==(i=s.ZP.foGetData(c,e))&&void 0!==i&&i.total_items||0===(null===(o=s.ZP.foGetData(c,e))||void 0===o?void 0:o.total_items)){var d;let i=null===(d=s.ZP.foGetData(c,e))||void 0===d?void 0:d.total_items;i!==t.state.total_record&&t.setState({total_record:i})}return l||(l=[]),l})).finally((e=>{l.setLoadingAction(!1)}))},this.callBOSearchAdvanced=function(e,i,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(""!==o&&void 0!==o||(o="bo-search-advanced-API"),""===e)return;var n=[{txcode:o,input:{learn_api:e}}];let r={},l=s.ZP.getFormAppAuto(t.props.infoA.key_form);return void 0!==l&&(l.setLoadingAction(!0),r=l.getData("")),r&&i?i=Object.assign(r,i):i||(i=r),t.props.config.api_advanced_data&&(i=Object.assign(i,JSON.parse(t.props.config.api_advanced_data))),n[0].input=Object.assign(n[0].input,i),(0,S.Yr)(n,a).then((e=>{var i=s.ZP.foGetData("infoError",e);if(void 0!==i)return{infoError:i};let o=t.props.config.query_data.split(" "),a=o[o.length-1]||o;var n=s.ZP.foGetData(a,e);return n||(n=[]),n})).finally((e=>{l.setLoadingAction(!1)}))},this.parent_handleCheckToSelected=(e,t,i)=>{let o=this.props.config.query_data.split(" "),a=o[o.length-1]||o,s=this.state.statusCheck,n=[],r=this.state.data;switch(i){case"CHECK_TO_SELECTED":for(let c=0;c<r.length;c++){let i=r[c][a].AFGHkeyIndexWJ;t?s[i]=c<=e||void 0:c>=e&&(s[i]=void 0),s[i]&&n.push(r[c])}break;case"DEFAULT":s[r[e][a].AFGHkeyIndexWJ]=t;for(let e=0;e<r.length;e++){s[r[e][a].AFGHkeyIndexWJ]&&n.push(this.state.data[e])}break;case"NO_EMPTY":let i,o,l=e;for(let e=0;e<r.length;e++){s[r[e][a].AFGHkeyIndexWJ]&&(void 0===i&&(i=e),o=e)}if(l<i)for(let e=l+1;e<i;e++){s[r[e][a].AFGHkeyIndexWJ]=!0}else if(l>i&&l<o)for(let e=l+1;e<=o;e++){s[r[e][a].AFGHkeyIndexWJ]=!1}else for(let e=o;e<l;e++){s[r[e][a].AFGHkeyIndexWJ]=!0}s[r[e][a].AFGHkeyIndexWJ]=t}let l=this.state.totalCheck;null!==n&&void 0!==n&&n.length?n.length<r.length?l="-":n.length===r.length&&(l=!0):l=!1,this.setState({statusCheck:s,totalCheck:l},(()=>{var e,t;void 0!==(null===(e=this.props.config.columnSystemCheckBox)||void 0===e?void 0:e.actionFo_SystemCheck)&&this.functionFo(n,null===(t=this.props.config.columnSystemCheckBox)||void 0===t?void 0:t.actionFo_SystemCheck),this.runRule("checked")}))},this.parent_handleSetChecked=e=>{let t=this.state.data_show_table,i=t[e].isCheck;void 0===i&&(i=!1),t[e].isCheck=!i,this.setState({data_show_table:t})},this.getHeaderConfig=e=>{let t=[];return!0===e&&t.push({title:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),"true"===this.state.hasSystemColumnCheck&&"true"!==String(this.state.CMD.disabled)&&t.push({title:this.state.headerCheckTitle,id:"system_check_box",data:{value:this.state.totalCheck,abs_Click:this.checkAllDataHandler},config:{mode:{hasSearch:!1},hasCheck:"true"===String(this.state.hasSystemColumnCheckTotal),width:"true"===this.state.hasSystemColumnCheckTotal?"70px":"",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),t=t.concat(this.state.columns.map((e=>{var t,i;return{title:(null===(t=this.state.lang)||void 0===t||null===(i=t[this.state.lang_select])||void 0===i?void 0:i[e.title])||e.title,id:e.code,config:{width:"",isFrozen:!1},value_search:this.state.columnSearchValue[e.code]}}))),t},this.handelClearSearch=()=>{let e=this.state.columnSearchValue;for(const s in e)e[s]="";let t=this.dataGlobal.data,i=t.slice(0,this.state.config_table.paging_record),o=t.length,a=this.buildPaging(o,this.state.config_table);this.page_index=1,this.setState({data:i,dataFilter:t,paging:a,page_index:1,total_record:o,columnSearchValue:e})},this.getCaptionLang=(e,t,i)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${t}_${i}`]&&(this.CACHE_CDLIST[`${t}_${i}`]=s.ZP.data_cdList(t,i,!0));let o={};for(const s of this.CACHE_CDLIST[`${t}_${i}`]){let e=s.c_cdlist.mcaption||{},t=s.c_cdlist.caption||"";o[s.c_cdlist.cdid]=s.c_cdlist={mcaption:e,caption:t}}const a=o[e]||{};let n=(null===a||void 0===a?void 0:a.mcaption)||{},r=(null===a||void 0===a?void 0:a.caption)||"";return n[s.ZP.getLangKey()]||r},this.handelChangeSearch=(e,t)=>{var i;let o=this.state.columnSearchValue;o[t]=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"";let a=this.dataGlobal.data.filter((e=>{let t=!0;for(const a in o){let n=s.ZP.getOOP(e,a);const r=this.cols_config[a];if("columnMask"===r.inputtype){var i;let e=r.config.mask;(e.includes("DD")&&e.includes("MM")&&e.includes("YY")||!0===(null===(i=r.config)||void 0===i?void 0:i.isDate))&&(n=Q.FW(n,e))}if("ColumnCdlist"===r.inputtype){let{cdgrp:e,cdname:t}=r.config;n=this.getCaptionLang(n,e,t)}!1===String(n).toLowerCase().includes(o[a].toLowerCase())&&(t=!1)}return t})),n=a.slice(0,this.state.config_table.paging_record),r=a.length,l=this.buildPaging(r,this.state.config_table);this.page_index=1,this.setState({data:n,dataFilter:a,paging:l,page_index:1,total_record:r,columnSearchValue:o})},this.abs_autoCallBackData=()=>{let e=this.state.paging_record;e[this.state.selectedRecordIndex]+=5,this.setState({paging_record:e},(()=>{this.recordChangeHandler(0)}))},this.handleClickTableRow=e=>{},this.onClickButtonAction=async(e,t)=>{let i=t.default,o=t.config;if(ui=s.ZP.getFormAppAuto(this.props.infoA.key_form),await ui.runRuleFunction(i,JSON.parse(t.row_data),this.props.infoA_parent,"on_click"),void 0!==o.useAction)if("true"===o.useAction){var a=s.ZP.parseJson(o.txFoActions);void 0!==a?_.ZP.runActionWithContext(a,JSON.parse(t.row_data),this.props.infoA,this.props.infoA_parent,i):s.ZP.AppException("#cColumnAction.onClick","config_fo is undefined")}else if(void 0!==o.txFo){var n=s.ZP.parseJson(o.txFo);void 0!==n?_.ZP.runFoWithContext(n,JSON.parse(t.row_data),this.props.infoA,this.props.infoA_parent,i):s.ZP.AppException("#cColumnAction.onClick","Error Json is undefined")}else s.ZP.AppException("#cColumnAction.onClick","txFo is undefined");else s.ZP.AppException("#cColumnAction.onClick","useAction is undefined");s.ZP.isDebug()&&s.ZP.copyToClipboard(o.txFo)},this.handleScroll=()=>{this.card_page_index++;let e="table_search",t={};this.props.config.table_name&&(e=this.props.config.table_name),t[e]={paging:this.builCarddDataPaging()},this.state.data_card.length<this.state.total_record&&("true"===this.state.isSearchAdvanced&&this.props.config.apiSearchAdvanced?this.callBOSearchAdvanced(this.props.config.apiSearchAdvanced,(0,o.Z)({},t),this.props.config.BoSearchAdvance).then((e=>{this.setDataCard(e)})):this.callBOSearch(this.props.config.apiId,(0,o.Z)({},t),this.props.config.BoSearch).then((e=>{this.setDataCard(e)})))},this.builCarddDataPaging=e=>({pagingIndex:e?1:this.card_page_index,recordItem:this.state.paging_record.find(((e,t)=>t===this.state.selectedRecordIndex))}),this.setDataCard=e=>{e.length>0?this.dataGlobal.data=e:this.dataGlobal=s.ZP.getDataLimited(this.state.config_table.query_data,0,999999999);let t={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[],total:this.dataGlobal.total},i=[];void 0!==t.data&&(i=t.data);let o=s.ZP.cloneJson(i),a=[],n=this.props.config.query_data.split(" "),r=n[n.length-1]||n;if(void 0!==n&&""!==n&&(!0===n.includes(".")?void 0!==s.ZP.getOOP(o,n)&&(a=s.ZP.getOOP(o,n)):void 0!==o&&(a=o)),Array.isArray(a)){var l,c,d,h;for(let e=0;e<a.length;e++){const t=a[e];for(const i in t){const o=t[i];if("object"!==typeof o){let t=s.ZP.cloneJson(a[e]);a[e]={},a[e][r]=t,a[e][r].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(a[e][i].AFGHkeyIndexWJ=s.ZP.autoID())}}if(a=this.state.data_card.concat(a),void 0!==(null===(l=this.props.config)||void 0===l||null===(c=l.columnSystemCheckBox)||void 0===c?void 0:c.methodGet)&&void 0!==(null===(d=this.props.config)||void 0===d?void 0:d.hasSystemColumnCheck)&&void 0!==(null===(h=this.props.config)||void 0===h?void 0:h.columnSystemCheckBox)){let e={},t=this.props.config.columnSystemCheckBox.methodGet;for(let i=0;i<a.length;i++)e[a[i][r].AFGHkeyIndexWJ]=a[i][r][t];this.setState({statusCheck:e,column_search:{},data_card:a,totalCheck:!1},(()=>{this.runRule("on_change")}))}else this.setState({column_search:{},data_card:a,totalCheck:!1},(()=>{this.runRule("on_change")}))}else i=this.state.data_card.concat(i),this.setState({data_card:i,totalCheck:!1},(()=>{this.runRule("on_change")}))},this.page_index=1,this.card_page_index=1;let p=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let e=this.props.config.paging_record.split(",");e.length>1&&(p=e)}let f={paging_record:p[0],query_data:this.props.config.query_data};this.dataGlobal=s.ZP.getDataLimited(f.query_data,0,999999999)||{};let g={data:[],total:0};"false"!==this.props.config.isLoadDataStart&&(g={data:this.dataGlobal.data.slice(0,f.paging_record)||[],total:this.dataGlobal.total}),void 0===g&&(g={});let m=0;void 0!==g.total&&(m=g.total);let v=this.buildPaging(m,f),b=[],y=e.default.code.trim();if(void 0!==e.btn_of_grid&&""!==y)for(let o=0;o<e.btn_of_grid.length;o++){y===e.btn_of_grid[o].config.onTable.trim()&&(b[b.length]=e.btn_of_grid[o])}let A="false";void 0!==this.props.config.hasSystemColumnCheck&&(A=this.props.config.hasSystemColumnCheck);let D="not_use";void 0!==(null===(i=this.props.config)||void 0===i||null===(a=i.columnSystemCheckBox)||void 0===a?void 0:a.check_type)&&(D=this.props.config.columnSystemCheckBox.check_type);let k="false";void 0!==(null===(n=this.props.config)||void 0===n||null===(r=n.columnSystemCheckBox)||void 0===r?void 0:r.hasSystemColumnCheckTotal)&&(k=this.props.config.columnSystemCheckBox.hasSystemColumnCheckTotal);let O="";void 0!==(null===(l=this.props.config)||void 0===l||null===(c=l.columnSystemCheckBox)||void 0===c?void 0:c.headerCheckTitle)&&(O=null===(d=this.props.config.columnSystemCheckBox)||void 0===d?void 0:d.headerCheckTitle);let w={};void 0!==(null===(h=this.props.config)||void 0===h||null===(u=h.columnSystemCheckBox)||void 0===u?void 0:u.checked_to_selected)&&(w=this.props.config.columnSystemCheckBox.checked_to_selected);let C=this.props.lang;void 0===C&&(C={}),this.state={dataFilter:this.dataGlobal.data,data:[],data_card:[],lang:C,lang_select:s.ZP.getLangKey(),paging:v,total_record:0,paging_record:p,selectedRecordIndex:0,page_index:1,STT:!1,hasCheck:!1,columns:void 0===this.props.config.columns?[]:JSON.parse(this.props.config.columns),action:b,config_table:f,CMD:hi.getValueCmd(this.props),columnSearchValue:{},hasSystemColumnCheck:A,check_type:D,hasSystemColumnCheckTotal:k,headerCheckTitle:O,totalCheck:!1,checkedRow:!1,statusCheck:{},checked_to_selected:w,isSearchAdvanced:!1},this.all_columnSystemCheck=[],this.cols_config={};for(const o of this.state.columns)this.cols_config[o.code]=o}buildPaging(e,t){let i=[],o=1;if(e>0)for(let a=0;a<e;a+=parseInt(t.paging_record))i[i.length]=o,o++;else i[i.length]=1;return i}pageIndexChange(e){this.page_index=e.target.value,this.setState({page_index:e.target.value}),this.abs_getDataLimited((parseInt(e.target.value)-1)*this.state.config_table.paging_record,this.state.config_table.paging_record)}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({columns:JSON.parse(this.props.config.columns)}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}checkAll(e){if(this.state.hasCheck){let t=this.state.data;for(let i=0;i<t.length;i++)t[i].hasCheck__=e.target.checked;this.setState({checkAll:e.target.checked,data:t})}}functionFo(e,t){let i=void 0===t.useAction?"notUse":t.useAction,o=this.props.default;switch(i){case"txFo":var a=s.ZP.parseJson(t.txFo);void 0!==a?_.ZP.runFoWithContext(a,e,this.props.infoA,this.props.infoA_parent,o):s.ZP.AppException("#cColumnAction.onClick","Error Json is undefined");break;case"txFoAction":var n=s.ZP.parseJson(t.txFoActions);void 0!==n?_.ZP.runActionWithContext(n,e,this.props.infoA,this.props.infoA_parent,o):s.ZP.AppException("#cColumnAction.onClick","config_fo is undefined")}}renderTable(){var e,t,i,o,a;let r=this.state.action.length>0,c=this.getHeaderConfig(r),{hasSystemColumnCheck:d,check_type:h,statusCheck:u}=this.state;const p=(0,n.RP)("uTable"),_=(0,n.RP)("uTableBodyRow");return(0,l.jsx)(p,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,abs_MoveLeft:this.handleMoveLeft,abs_MoveRight:this.handleMoveRight,Header:{data:c,config:{mode:{hasSearch:!1}}},dataEmpty:{isShow:!(null!==(e=this.state)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{modeTitle:"center",isFrozenHeader:!1,isMoveColumn:"true"===String(null===(i=this.props.config)||void 0===i?void 0:i.isMoveColumn),isResize:"true"===String(null===(o=this.props.config)||void 0===o?void 0:o.isResize)}},uPagination:{config:{show:s.ZP.getLang("cTable_Paging_show"),in:s.ZP.getLang("cTable_Paging_in"),jump_to_page:s.ZP.getLang("cTable_Paging_jump_to_page"),results:s.ZP.getLang("cTable_Paging_results")},mode:{paging_min:"MIN"===(null===(a=this.props.config)||void 0===a?void 0:a.paging_mode)},result_total:this.state.total_record,abs_PagingActive:this.abs_PagingActive,abs_setRecordActive:this.recordChangeHandler,paging_index:this.state.page_index,paging_record:this.state.paging_record.map(((e,t)=>({number:e,selected:t===this.state.selectedRecordIndex})))}},children:this.state.data.map(((e,t)=>{let i=this.props.config.query_data.split(" "),o=i[i.length-1]||i;return(0,l.jsxs)(_,{abs_Click:this.handleClickTableRow,children:[!0===r&&(0,l.jsx)(F,{tableContext:this,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,data:this.state.action,value:e,title:"Action"},t),"true"===d&&"true"!==String(this.state.CMD.disabled)&&(0,l.jsx)(Ot,{ref:e=>{void 0===this.all_columnSystemCheck&&(this.all_columnSystemCheck=[]),this.all_columnSystemCheck[t]=e},tableContext:this,dataValue:!0===u[e[o].AFGHkeyIndexWJ],dataIndex:t,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,check_type:h,parent_handleCheckToSelected:this.parent_handleCheckToSelected}),this.state.columns.map(((t,i)=>{var o,a;let n=T.Z[t.inputtype];return void 0===n&&(n=T.Z.ColumnDefault),(0,l.jsx)(n,{tableContext:this,title_parent:t.title,rowData:e,code_col:t.code,title:(null===(o=this.state.lang)||void 0===o||null===(a=o[this.state.lang_select])||void 0===a?void 0:a[t.title])||t.title,config:t.config,data:s.ZP.getOOP(e,t.code),value:e},i)}))]},t)}))})}renderCard(){const e=(0,n.hr)(this.props.config.card_type);return this.state.data_card.map(((t,i)=>(0,l.jsx)(e,{dataFull:{config:{index:i+1,total:this.state.total_record,lang:{of:s.ZP.getLang("cTable_Paging_of")}},list_button:this.getConfigButtonCard(t),data_card:this.getConfigCard(void 0===this.props.config.card_config?[]:JSON.parse(this.props.config.card_config),t)}},i)))}getConfigButtonCard(e){return this.state.action.map((t=>{var i;return{dataFull:{config:{default:{title:(null===(i=t.lang)||void 0===i?void 0:i[s.ZP.getLangKey()])||t.default.name,type:t.config.color,class:t.default.class,icon:t.config.icon},cmd:{disable:!s.ZP.checkDynamicCondition(e,t.default.condition),isLoading:!1}},dataItem:(0,o.Z)((0,o.Z)({},t),{},{row_data:JSON.stringify(e)}),abs_Click:this.onClickButtonAction}}}))}getConfigCard(e,t){return e.map((e=>{var i,o;let a=s.ZP.getNodeJson(t,e.data);return a=this.getDataCard(e.inputtype,e.config,a),{data:a,title:(null===(i=this.state.lang)||void 0===i||null===(o=i[this.state.lang_select])||void 0===o?void 0:o[e.title])||e.title}}))}getDataCard(e,t,i){switch(e){case"columnMask":return((e,t)=>{let i=e.mask,o=i.includes("DD")&&i.includes("MM")&&i.includes("YY")||!0===(null===e||void 0===e?void 0:e.isDate);return String(i).startsWith("$")&&String(i).endsWith("$")&&(i=s.ZP.getParameterSystem(i.replace(/\$/g,""))),o?t||0===t?Q.sx(Q.xY(t),i):"":Q.Ui(t,i)})(t,i);case"columnCurrency":return((e,t)=>{if(0!==t&&!t)return"--";let i=e.decimal_length||e.decimal;return 0===i||i||(i=2),i=Number(i)||0,t=Math.round(Number(t)*Math.pow(10,i))/Math.pow(10,i),Q.Nx(t,i)})(t,i);default:return i}}render(){const e=(0,n.RP)("uViewList");return"false"===String(this.state.CMD.visible)?null:"table_card"===this.props.config.view_type?(0,l.jsx)(e,{dataFull:{view_as_table_DOM:this.renderTable(),view_as_card_DOM:this.renderCard(),abs_autoCallBackData:this.handleScroll}}):this.renderTable()}}const _i=pi,fi={structable:"",structable_read:"",cdlist:{},data_default:"",data_mode:"query",query_data:"",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:"[\n   \n    ]",key_selected:"c_cdlist.cdid",useAction:"false",isAutoDefault:"true",isLabel:"false",isHasDataNull:"false"},gi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.Z)({},fi);for(let i in t)e[i]&&(""!==t[i]&&""===e[i]||(t[i]=e[i]));return t||{}},mi={ui:{},data:{}},vi={c_cdlist:{cdid:"select_null",caption:"All"}},bi=e=>{if("cdlist"===e.data_mode)return vi;{var t,i;let o=null===(t=e.key_selected)||void 0===t?void 0:t.split("."),a=null===(i=e.selected_view_format)||void 0===i?void 0:i.split(".");o[2]=a[a.length-1];let s={};return s[o[0]]={},s[o[0]][o[1]]="select_null",s[o[0]][o[2]]="All",s}},yi=e=>{for(let t=0;t<e.length;t++)e[t].value=!1,e[t].key_select=t;return e},Ai=(e,t)=>(e.split(" ").forEach((i=>{if("@"===i[0]){let o=i.substring(1),a=s.ZP.getOOP(t,o);if("c_cdlist.caption"===o){let e=s.ZP.getOOP(t,"c_cdlist.mcaption");null!==e&&void 0!==e&&e[s.ZP.getLangKey()]&&(a=null===e||void 0===e?void 0:e[s.ZP.getLangKey()])}e=e.replace(i,a)}})),e),Di=(e,t,i)=>{if(void 0===t||void 0===i)return[];if(null===t||null===i)return[];if(""===i)return[];let o=[];return t.forEach(((t,a)=>{let n=s.ZP.getOOP(t,i)+"",r=JSON.parse(JSON.stringify(t));null!==n&&void 0!==n&&e.includes(n+"")?r.value=!0:r.value=!1,o.push(r)})),o},ki=(e,t,i)=>{let o=[];for(let a=0;a<e.length;a++)!0===e[a].value&&o.push(s.ZP.getOOP(t[a],i));return o},Oi={structable:"",structable_read:"",cdlist:{},data_default:"",data_mode:"query",query_data:"",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n            {\n                "title": "Name",\n                "code": "col.col_name"\n            },\n            {\n                "title": "ID",\n                "code": "col.col_id"\n            }\n        ]',col_format:"@c_cdlist.caption",json_data:'[\n            {\n                "col": {\n                    "col_name": "val_1",\n                    "col_id": "val_2"\n                }\n            },\n            {\n                "col": {\n                    "col_name": "val_3",\n                    "col_id": "val_4"\n                }\n            }\n        ]',key_selected:"c_cdlist.cdid",useAction:"false",isAutoDefault:"true",isLabel:"false",isHasDataNull:"false"};const wi=class{constructor(e,t,i){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=e=>{this.property.cmd.disabled=e},this.getCMD_enable=()=>this.property.cmd.disabled,this.getConfig=()=>{let e=this.property.config,t=(0,o.Z)({},Oi);for(let i in t)e[i]&&(""!==e[i]&&""===e[i]||(t[i]=e[i]));return t||{}},this.getDefault=()=>this.property.default,this.property={inputType:e,config:i,default:t,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class Ci extends a.Component{constructor(e){var t;super(e),t=this,this.convertStringWithContext=e=>{let t=s.ZP.getlistCodeContext(e);for(let i=0;i<t.length;i++){const o=t[i];let a=s.ZP.context_get(o.code);void 0!==a&&(e=e.replace(o.key,a))}return e},this.getConfigSmooth=e=>{let t=s.ZP.cloneJson(e);return t.config=gi(t.config),t},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.isRunRule=(e,t)=>{if(!e)return!1;return e.split(";").includes(t)},this.setCMD=(e,t)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),t);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.set=async(e,t)=>{this.data_debug.data_form=t;let{structable_read:i,key_selected:o}=this.config,{datas:a}=this.state,s="",n=[];if(t&&i){let e=i.split(".");if(2===e.length)return t[e[0]]&&void 0!==t[e[0]][e[1]]?(s=t[e[0]][e[1]],this.data_debug.data_cpn=s,this.last_selected_data=s,n=Di(s,a,o),this.setState({val_select_tmp:s,datas_view:n}),void this.onRunRule("update")):void 0;{let i=t;for(let t=0;t<e.length;t++){if(t===e.length-1)return void 0!==i&&null!==i[e[t]]?(s=i[e[t]],this.data_debug.data_cpn=s,this.last_selected_data=s,n=Di(s,a,o),this.setState({val_select_tmp:s,datas_view:n}),void this.onRunRule("update")):void 0;void 0!==i&&null!==i[e[t]]&&(i=i[e[t]])}}}void 0===this.data_debug.data_cpn&&(this.data_debug.data_cpn="undefined"),this.setState({list_selected:[],val_select_tmp:s,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jListCheckBox_NotFindValue"})},this.setAdvanced=async(e,t)=>{let i=e.component_action||"",{code:o}=this.props.default,a=i.split(";").includes(o);if(void 0!==t&&""!==t){var s,n;let{key_selected:e}=this.config,{datas:i}=this.state,o=[];o=Di(t,i,e);let r=(null===(s=o)||void 0===s?void 0:s.toString())!==(null===(n=this.state.list_selected)||void 0===n?void 0:n.toString());if(0!==o.length){if(r&&!a)return this.onRunRule("enter_tab"),void this.setState({val_select_tmp:t,datas_view:o})}else{let e=[0];if(0!==e.length&&r&&!a)return this.onRunRule("enter_tab"),void this.setState({val_select_tmp:t,datas_view:e})}this.setState({list_selected:[],val_select_tmp:t,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jListCheckBox_NotFindValue"})}else{0!==[0].length&&(a||this.onRunRule("enter_tab"))}},this.setGetInfo=async(e,t)=>{t=t[this.props.default.code];let i=e.component_action||"",{code:o}=this.props.default,a=i.split(";").includes(o);if(void 0!==t&&""!==t){var s,n;let{key_selected:e}=this.config,{datas:i}=this.state,o=[];o=Di(t,i,e);let r=(null===(s=o)||void 0===s?void 0:s.toString())!==(null===(n=this.state.list_selected)||void 0===n?void 0:n.toString());if(0!==o.length){if(r&&!a)return this.onRunRule("enter_tab"),void this.setState({val_select_tmp:t,datas_view:o})}else{let e=[0];if(0!==e.length&&r&&!a)return this.onRunRule("enter_tab"),void this.setState({val_select_tmp:t,datas_view:e})}this.setState({list_selected:[],val_select_tmp:t,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jListCheckBox_NotFindValue"})}else{0!==[0].length&&(a||this.onRunRule("enter_tab"))}},this.getAdvanced=e=>{let{list_component:t}=e,{code:i}=this.props_smooth.default;if(this.isRunRule(t,i)){let{list_selected:e,datas:t,get_data_format:i,structable:o}=this.state,a=ki(e,t,i);if(2===o.split(".").length)return a}},this.getInfoErrror=()=>{var e,t,i;return""!==this.state.help_mess&&!0===this.checkValidate()&&"jListCheckBox_NotFindValue"!==this.state.help_mess?{info:this.renderMess(this.state.help_mess),key:(null===(e=this.props_smooth.lang)||void 0===e||null===(t=e.ui)||void 0===t||null===(i=t[s.ZP.getLangKey()])||void 0===i?void 0:i[this.props_smooth.default.name])||this.props_smooth.default.name,infoComponent:this.props.default}:""},this.setDataGB=async(e,t)=>{let{datas:i,key_selected:o,list_selected:a,selected_view:n}=this.state,{json_data:r}=this.props_smooth.config;t=s.ZP.parseJson(r).concat(t)||[],t=yi(t);let l=s.ZP.getOOP(i[a[0]],o);this.setState({datas:t,datas_view:t,list_selected:a,selected_view:n},(()=>{let e=this.state.val_select_tmp||l,t=Di(e,this.state.datas,o);e&&0!==t.length&&(this.state.val_select_tmp="")}))},this.get=(e,t)=>{let i=this.props_smooth.config.structable;if(i.includes("|")){let t=i.split("|");for(var o=0;o<t.length;o++)this.readData(t[o],e.inform)}else this.readData(i,e.inform)},this.getAdvanced=(e,t)=>{let{list_selected:i,datas:o,get_data_format:a}=this.state;return ki(i,o,a)},this.checkValidate=()=>{let e=!1,t=this.state.list_selected;if(void 0!==t&&void 0!==this.state.validate.request&&!e&&this.state.validate.request){let{list_selected:i,datas:o,get_data_format:a}=this.state,s=ki(i,o,a);0!==t.length&&null!==s&&""!==s||(e=!0,this.state.help_mess="validateRequest",this.setState({help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"}))}if(e){var i=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}else this.clearError();return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({search_input:"",datas_view:this.state.datas})},this.setDataDefault=()=>{},this.onEvent=e=>{switch(e){case"closeTable":this.setState({isOpen:!1});break;case"openTable":!1===this.state.isOpen&&this.setState({isOpen:!0})}},this.onRunRule=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"on_change";var i=s.ZP.getFormAppAuto(t.props_smooth.infoA.key_form);void 0!==i&&i.runRuleFunction(t.props_smooth.default,{},t.props_smooth.infoA_parent,e)},this.getSelectedView=e=>{let{selected_view_format:t,datas:i}=this.state,o="";for(let a=0;a<e.length;a++){a>0&&(o+=";");let s=i[e[a]];o+=Ai(t,s)}return o},this.getDataOOP=(e,t)=>0===this.state.list_selected.length?void 0:this.state.datas[this.state.list_selected[0]],this.onBlur=()=>{this.checkValidate()},this.getOptionConfig=e=>e.map(((e,t)=>({title:Ai(this.props_smooth.config.col_format,e),value:e.value,dataItem:{key_select:e.key_select},value_code:e.value_code}))),this.getInfoCompare=(e,t)=>{let{lang_compare:i,compare_info:o,isCompare:a}=this.state;if(a){let e=i[this.state.lang_select];if(o.is_change_value){let t=e.replace("{value_old}","");return t=t.replace("{value_new}",""),{is_change_value:o.is_change_value,compareInfo:{component_code:this.props_smooth.default.code,component_name:this.props_smooth.default.name,message:{title_before:o.cache_value,title_status:t,title_after:o.change_value}}}}}return{}},this.clearCacheCompare=()=>{let{compare_info:e}=this.state;e.cache_value=void 0,e.is_change_value=!1,this.setState({compare_info:e})},this.renderThisComponent=()=>{var e,t,i,o;const a=(0,n.RP)("uCheckBox"),r=(0,n.RP)("uMultiValue");let c=this.props_smooth.default.name;return(0,l.jsx)(r,{title:(null===(e=this.props_smooth.lang)||void 0===e||null===(t=e.ui)||void 0===t||null===(i=t[s.ZP.getLangKey()])||void 0===i?void 0:i[c])||c,class:this.props_smooth.default.class,isOpenDefault:!0,children:null===(o=this.data_view_template)||void 0===o?void 0:o.map(((e,t)=>(0,l.jsx)(a,{dataFull:{class:"col-sm-4 col-12",title:e.title,value:e.value,config:{cmd:{disable:"true"===String(this.state.CMD.disabled)}},dataItem:e.dataItem,abs_Click:(e,t)=>{let{datas_view:i}=this.state;i[e.key_select].value=!t,this.setState({datas_view:i})}}},t)))})},this.renderMess=e=>{switch(e){case"validateNumMin":return s.ZP.getLang(e).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(e).replace("{count}",this.state.validate.max);case"validateRequest":default:return s.ZP.getLang(e);case"jListCheckBox_NotFindValue":return s.ZP.isDebug()?s.ZP.getLang(e):""}},this.propertyConstructor=new wi(e.inputType,e.default,e.config),this.props_smooth=this.getConfigSmooth(this.props);let{config:i,lang:o}=this.props_smooth;this.config=gi(i),this.lang=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t in mi)void 0===e[t]&&(e[t]={});return e}(o);let{selected_view_format:a,get_data_format:r,key_selected:c,structable:d,structable_read:h}=this.config,u=this.props_smooth.validate;void 0===u&&(u={}),this.callform_detail="",this.callform="";let p="true"===String(this.props_smooth.validate.is_compare),_={},f={};void 0!==this.props_smooth.lang&&(_=void 0!==this.props_smooth.lang.title?this.props_smooth.lang.title:this.props_smooth.lang,void 0!==this.props_smooth.lang.lang_compare&&(f=this.props_smooth.lang.lang_compare));let g=(e=>{if(!e)return[];let t=[];const{query_data:i,json_data:o}=e;if("cdlist"===e.data_mode){var a="",n="";void 0!==e.cdlist&&void 0!==e.cdlist.cdgrp&&void 0!==e.cdlist.cdname&&(a=e.cdlist.cdgrp,n=e.cdlist.cdname),t=s.ZP.data_cdList(a,n)||[]}else t=s.ZP.getDataLimited(i,0,99999)||[],t=t.data||[];let r=s.ZP.parseJson(o).concat(t)||[];return"true"===e.isHasDataNull&&r.unshift(bi(e)),r=yi(r),r||[]})(this.config);this.state={isCompare:p,structable:d,structable_read:h,value:this.data_default,compare_info:{cache_value:void 0,is_change_value:!1},val_select_tmp:"",lang_compare:f,lang:_,lang_select:s.ZP.getLangKey(),validate:u,infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",datas:g,datas_view:g,get_data_format:r,key_selected:c,selected_view:"",selected_view_format:a,list_selected:[],pos_row:-1,search_input:"",isOpen:!1,CMD:this.propertyConstructor.getCMD(),max_item_length:50},this.data_debug={}}UNSAFE_componentWillMount(){this.data_view_template=this.getOptionConfig(this.state.datas_view)}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props_smooth.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}UNSAFE_componentWillUpdate(e,t){this.data_view_template=this.getOptionConfig(t.datas_view)}componentDidUpdate(e){}readData(e,t){let{datas_view:i,datas:o,get_data_format:a}=this.state,n=ki(i,o,a);""!==this.state.help_mess&&(n=null);let r=e.split(".");2===r.length&&(void 0===t||"true"===t?s.ZP.putData(r[0],r[1],n,this.props_smooth.infoA):"false"===t?s.ZP.putDataGB(r[0],r[1],n):s.ZP.putDataGB(r[0],r[1],""))}render(){if("false"===String(this.state.CMD.visible))return null;const e=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(e,{class:this.props.default.class_ofgroup,children:[this.renderThisComponent(),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):this.renderThisComponent()}}const xi=Ci;const Si=class{constructor(e,t,i){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=e=>{this.property.cmd.disabled=e},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class Mi extends a.Component{constructor(e){var t;super(e),t=this,this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getDataOOP=(e,t)=>{const{list_component:i}=e,{code:o}=this.props.default;if(i){if(i.split(";").includes(o))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.setDataGB=(e,t)=>{},this.set=(e,t)=>{},this.getAdvanced=(e,t)=>this.getData(),this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.checkValidate=()=>!1,this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.getData=()=>{let e=this.state.data_config,t=[];for(let i=0;i<e.length;i++){const o=e[i];o.cmd.isDone&&t.push({authentic:{value:o.value_img_scan}})}return t},this.reload=(e,t)=>{this.setState({value:[]})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderMess=e=>s.ZP.getLang(e),this.runRule=e=>{if(e){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.handleClick=(e,t)=>{let{data_config:i}=this.state;i[t.key_select].cmd.isLoading=!0,this.setState({data_config:i},(()=>{this.callAPI(t.api_id).then((e=>{let{data_config:i}=this.state;setTimeout((()=>{i[t.key_select].cmd.isLoading=!1,i[t.key_select].cmd.isDone=!0,i[t.key_select].title_button=s.ZP.getLang("done"),i[t.key_select].value_img_scan="https://static.remove.bg/remove-bg-web/669d7b10b2296142983fac5a5243789bd1838d00/assets/start_remove-c851bdf8d3127a24e2d137a55b1b427378cd17385b01aec6e59d5d4b5f39d2ec.png",this.setState({data_config:i}),this.runRule("enter_tab")}),4e3)}))}))},this.handleClear=e=>{let{data_config:t}=this.state;t[e.key_select].cmd.isLoading=!1,t[e.key_select].cmd.isDone=!1,t[e.key_select].title_button=s.ZP.getLang("scan"),t[e.key_select].value_img_scan="",this.setState({data_config:t},(()=>{})),this.runRule("enter_tab")},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];let n={},r=s.ZP.getFormAppAuto(t.props.infoA.key_form);return void 0!==r&&(n=r.getData("")),n&&(i=Object.assign(n,i)),a[0].input=Object.assign(a[0].input,i),(0,S.Yr)(a,o).then((e=>{var t=s.ZP.foGetData("infoError",e);return void 0!==t?{infoError:t}:s.ZP.foGetData("data",e)})).finally((e=>{}))},this.propertyConstructor=new Si(e.inputType,e.default,e.config);var i={};void 0===i&&(i={});var o=this.props.validate;void 0===o&&(o={}),this.callform_detail="",this.callform="",this.data_select={};var a=this.props.lang;if(void 0===a&&(a={}),void 0!==this.props.infoA.form_code){var n=s.ZP.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=n&&void 0!==n.role&&(void 0!==n.role.disabled&&(!0===n.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==n.role.visible&&(!0===n.role.visible?this.propertyConstructor.setCMD_visible(e.visibility&&!0):this.propertyConstructor.setCMD_visible(e.visibility&&!1)))}this.state={value:[],value_old:"",lang:a,lang_select:s.ZP.getLangKey(),validate:o,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpen:!1,titleNoData:"",data_config:this.getDataConfig(JSON.parse(this.props.config.data_config)||[])}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){if(e.includes(".")){let i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.getData(),this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.getData()):s.ZP.putDataGB(i[0],i[1],"")}}getDataConfig(e){let t=[];for(let i=0;i<e.length;i++){const o=e[i];t.push({api_id:o.api_id,cmd:{isLoading:!1,isDone:!1},title_button:s.ZP.getLang("scan"),mode:o.mode,value_img_scan:"",dataItem:{key_select:i,api_id:o.api_id},abs_Click:this.handleClick,abs_Clear:this.handleClear})}return t}getDataFull(){return{config:{data_config:this.state.data_config}}}render(){const e=(0,n.RP)("uAuthentic");return(0,l.jsx)(e,{dataFull:this.getDataFull()})}}const Pi=Mi;class Ti extends a.Component{constructor(e){super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCMD=(e,t)=>{const{CMD:i}=this.state||{};let o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.renderDebug=()=>{if(s.ZP.isDebug()){let e=this.props.config.structable.split(".")[1],t=this.data_debug.data_cpn;return null===t&&(t="NULL"),void 0===this.props.config.cdlist&&(this.props.config.cdlist={}),(0,l.jsx)(a.Fragment,{children:(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${e}|:|${t}|`})})}},this.set=(e,t)=>{let i={},o=this.props.config.query_data.split(";");for(let a=0;a<o.length;a++){let e=o[a].split(" "),t=s.ZP.getDataLimited(o[a],0,9999999);i[e[e.length-1]]=t.data}this.setState({data:i})},this.setAdvanced=(e,t)=>{},this.get=(e,t)=>{},this.checkValidate=()=>{var e=!1,t=this.state.data;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.state.help_mess=s.ZP.getLang("validateRequest"),this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.getAdvanced=(e,t)=>{},this.reload=(e,t)=>{let i={},o=this.props.config.query_data.split(";");for(let a=0;a<o.length;a++){let e=o[a].split(" "),t=s.ZP.getDataLimited(o[a],0,9999999);i[e[e.length-1]]=t.data}this.setState({data:i})},this.runRule=e=>{if(e){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.report_file=void 0,this.id_theme_component=s.ZP.autoID();var t=this.props.validate;void 0===t&&(t={}),this.callform_detail="",this.callform="";var i=this.props.lang;void 0===i&&(i={});let o={},n=this.props.config.query_data.split(";");for(let a=0;a<n.length;a++){let e=n[a].split(" "),t=s.ZP.getDataLimited(n[a],0,9999999);o[e[e.length-1]]=t.data}let r=s.ZP.context_get("user_acc");this.user_data={},this.user_data.UserVariable={},this.user_data.UserVariable.BankStatus=r.bank_status,this.user_data.UserVariable.BranchCode=r.branch_code,this.user_data.UserVariable.BranchId=r.branch_id,this.user_data.UserVariable.BranchName=r.branch_name,this.user_data.UserVariable.BranchStatus=r.branch_status,this.user_data.UserVariable.UserID=r.id,this.user_data.UserVariable.LoginName=r.login_name,this.user_data.UserVariable.UserCode=r.user_code,this.user_data.UserVariable.UserName=r.user_name,this.user_data.UserVariable.WorkingDate=r.working_date,this.state={data:o,data_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{}},this.data_debug={}}async componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){}isEmpty(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return JSON.stringify(e)===JSON.stringify({})}convertData(){if(this.props.config.config_data&&!this.isEmpty(this.state.data)){let e=JSON.parse(this.props.config.config_data),t={};for(const i in e)if(Object.hasOwnProperty.call(e,i))if(Array.isArray(e[i])){let o=JSON.parse(JSON.stringify(e[i][0]));t[i.split(".")[0]]=[];for(let e=0;e<this.state.data[i.split(".")[1]].length;e++){const a=this.state.data[i.split(".")[1]][e];let n=JSON.parse(JSON.stringify(o));for(const e in n)n[e]=s.ZP.getNodeJson(a,n[e]);t[i.split(".")[0]].push(n)}}else{let o=JSON.parse(JSON.stringify(e[i]));for(const e in o)o[e]=s.ZP.getNodeJson(this.state.data[i.split(".")[1]],o[e]);t[i.split(".")[0]].push(o)}return Object.assign(t,this.user_data)}return{}}render(){return!1===this.state.CMD.visible?null:(0,l.jsx)("div",{className:"col-md-12 col-lg-12 col-xl-12 malibu-component-margin_top malibu-component-padding ",id:this.id_theme_component})}}const Ii=Ti;class Ni extends a.Component{constructor(e){super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCMD=(e,t)=>{const{CMD:i}=this.state||{};let o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)"true"===o[a]&&(o[a]=!0),"false"===o[a]&&(o[a]=!1);this.setState({CMD:o})},this.renderDebug=()=>{if(s.ZP.isDebug()){let e=this.props.config.structable.split(".")[1],t=this.data_debug.data_cpn;return null===t&&(t="NULL"),void 0===this.props.config.cdlist&&(this.props.config.cdlist={}),(0,l.jsx)(a.Fragment,{children:(0,l.jsx)("div",{style:{color:"#f17316"},children:`DATA-> |${e}|:|${t}|`})})}},this.set=(e,t)=>{},this.setAdvanced=(e,t)=>{},this.setGetInfo=(e,t)=>{},this.get=(e,t)=>{},this.checkValidate=()=>{var e=!1,t=this.state.data;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.state.help_mess=s.ZP.getLang("validateRequest"),this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:s.ZP.getLang("validateRequest")}))),e){var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.getAdvanced=(e,t)=>{},this.reload=(e,t)=>{},this.runRule=e=>{if(e){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.report_file=void 0,this.id_theme_component=s.ZP.autoID();var t=this.props.validate;void 0===t&&(t={}),this.user_acc=s.ZP.context_get("user_acc"),this.callform_detail="",this.callform="";var i=this.props.lang;void 0===i&&(i={}),this.file_report="",void 0!==this.props.config.file_report&&(this.file_report=this.props.config.file_report),this.more_config="",void 0!==this.props.config.more_config&&(this.more_config=this.props.config.more_config),this.design_type="",void 0!==this.props.config.design_type&&(this.design_type=this.props.config.design_type),this.REPORT_URL="https://localhost:7141";let o="REPORT_URL";if("dashboard"===this.design_type)o="DASHBOARD_URL";else o="REPORT_URL";let n=s.ZP.getParameterSystem(o);void 0!==n&&(this.REPORT_URL=n);var r="?"+this.encodeQueryData({report_code:this.file_report,token:(0,s.VN)()});this.state={url:r,data_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{}},this.data_debug={}}encodeQueryData(e){const t=[];for(let i in e)t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")}async componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t){}isEmpty(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return JSON.stringify(e)===JSON.stringify({})}render(){return!1===this.state.CMD.visible||window.open(this.REPORT_URL+this.state.url),null}}const Fi=Ni;i(8022);const Li={},Ei={},ji={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class Zi{}Zi.get=()=>({main:Li,position:Ei,cmd:ji}),Zi.getCmd=()=>ji,Zi.getValueCmd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return void 0!==e.infoA.form_code&&(t=s.ZP.role_getComponent(e.infoA.form_code,e.default.codeHidden)||{},t=t.role||{}),t};const Ri=Zi;var Qi;class zi extends a.Component{constructor(e){var t;super(e),t=this,this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.callDir=()=>this,this.setCMD=(e,t)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.set=(e,t)=>{this.card_page_index=1;let i=0,o="table_paging";this.props.config.table_name&&(o=this.props.config.table_name+"_paging"),void 0!==t[o]&&void 0!==t[o].total_items&&(i=t[o].total_items),this.dataGlobal=s.ZP.getDataLimited(this.state.config_table.query_data,0,999999999);let a={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[],total:this.dataGlobal.total};0===i&&(i=a.total);let n=[];void 0!==a.data&&(n=a.data),this.setState({columnSearchValue:{},data:n,page_index:1,total_record:i},(()=>{this.runRule("on_change")}))},this.runRule=e=>{e&&void 0!==(Qi=s.ZP.getFormAppAuto(this.props.infoA.key_form))&&Qi.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)},this.reload=(e,t)=>{this.page_index=1,this.card_page_index=1,this.setState({page_index:1},(()=>{}))},this.setData=function(e){e.length>0?t.dataGlobal.data=e:t.dataGlobal=s.ZP.getDataLimited(t.state.config_table.query_data,0,999999999);let i={data:t.dataGlobal.data.slice(0,t.state.config_table.paging_record)||[],total:t.dataGlobal.total},o=[];void 0!==i.data&&(o=i.data);let a=s.ZP.cloneJson(o),n=[],r=t.props.config.query_data.split(" "),l=r[r.length-1]||r;if(void 0!==r&&""!==r&&(!0===r.includes(".")?void 0!==s.ZP.getOOP(a,r)&&(n=s.ZP.getOOP(a,r)):void 0!==a&&(n=a)),Array.isArray(n)){for(let e=0;e<n.length;e++){let t=n[e];for(const i in t){const o=t[i];if("object"!==typeof o){let t=s.ZP.cloneJson(n[e]);n[e]={},n[e][l]=t,n[e][l].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(n[e][i].AFGHkeyIndexWJ=s.ZP.autoID())}}t.setState({column_search:{},data:n,totalCheck:!1},(()=>{t.runRule("on_change")}))}else t.setState({data:o,totalCheck:!1},(()=>{t.runRule("on_change")}))},this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.abs_getDataLimited=function(e,t){let i={data:this.state.dataFilter.slice(e,e+t)||[],total:this.state.dataFilter.length},o=i.data;if(!0===this.state.hasCheck)for(let n=0;n<o.length;n++)o[n].hasCheck__=!1;let a=1;void 0!==i.total&&(a=i.total);let s=this.buildPaging(a,this.state.config_table);this.setState({data:o,total_record:a,paging:s})},this.getData=()=>{var e;let t=this.state.data,i="true"===this.state.hasSystemColumnCheck?null===(e=this.state.checked_to_selected)||void 0===e?void 0:e.mode:"",o=this.props.config.query_data.split(" "),a=o[o.length-1]||o,s=this.state.statusCheck;return"IS_SELECTED"===i?t.filter((e=>s[e[a].AFGHkeyIndexWJ])):{data:t,total_paging:this.state.total_record}},this.getAdvanced=(e,t)=>this.getData(),this.buildDataPaging=e=>({pagingIndex:e?1:this.card_page_index,recordItem:5}),this.callBOSearch=function(e,i,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(""!==o&&void 0!==o||(o="bo-search-API"),""===e)return;var n=[{txcode:o,input:{learn_api:e}}];let r={},l=s.ZP.getFormAppAuto(t.props.infoA.key_form);return void 0!==l&&(l.setLoadingAction(!0),r=l.getData("")),r&&i?i=Object.assign(r,i):i||(i=r),t.props.config.api_data&&(i=Object.assign(i,JSON.parse(t.props.config.api_data))),n[0].input=Object.assign(n[0].input,i),(0,S.Yr)(n,a).then((e=>{var i,o,a=s.ZP.foGetData("infoError",e);if(void 0!==a)return{infoError:a};let n=t.props.config.query_data.split(" "),r=n[n.length-1]||n;var l=s.ZP.foGetData(r,e);let c="table_search";if(t.props.config.table_name&&(c=t.props.config.table_name),null!==(i=s.ZP.foGetData(c,e))&&void 0!==i&&i.total_items||0===(null===(o=s.ZP.foGetData(c,e))||void 0===o?void 0:o.total_items)){var d;let i=null===(d=s.ZP.foGetData(c,e))||void 0===d?void 0:d.total_items;i!==t.state.total_record&&t.setState({total_record:i})}return l||(l=[]),l})).finally((e=>{l.setLoadingAction(!1)}))},this.setAdvanced=(e,t)=>{if(!1===Array.isArray(t))this.setState({data:[]});else{let e=s.ZP.cloneJson(t),i=[],o=this.props.config.query_data.split(" "),a=o[o.length-1]||o;if(i=e,Array.isArray(i)){for(let e=0;e<i.length;e++){let t=i[e];for(const o in t){const n=t[o];if("object"!==typeof n){let t=s.ZP.cloneJson(i[e]);i[e]={},i[e][a]=t,i[e][a].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===n.AFGHkeyIndexWJ&&(i[e][o].AFGHkeyIndexWJ=s.ZP.autoID())}}this.card_page_index=1,this.setState({data:i,total_record:i.length,data_search:i,column_search:{}},(()=>{}))}else this.setState({data:[],data_search:[]},(()=>{}))}},this.setGetInfo=(e,t)=>{if(t=t[this.props.default.code],!1===Array.isArray(t))this.setState({data:[]});else{let e=s.ZP.cloneJson(t),i=[],o=this.props.config.query_data.split(" "),a=o[o.length-1]||o;if(i=e,Array.isArray(i)){for(let e=0;e<i.length;e++){let t=i[e];for(const o in t){const n=t[o];if("object"!==typeof n){let t=s.ZP.cloneJson(i[e]);i[e]={},i[e][a]=t,i[e][a].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===n.AFGHkeyIndexWJ&&(i[e][o].AFGHkeyIndexWJ=s.ZP.autoID())}}this.card_page_index=1,this.setState({data:i,total_record:i.length,data_search:i,column_search:{}},(()=>{}))}else this.setState({data:[],data_search:[]},(()=>{}))}},this.callBOSearchAdvanced=function(e,i,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(""!==o&&void 0!==o||(o="bo-search-advanced-API"),""===e)return;var n=[{txcode:o,input:{learn_api:e}}];let r={},l=s.ZP.getFormAppAuto(t.props.infoA.key_form);return void 0!==l&&(l.setLoadingAction(!0),r=l.getData("")),r&&i?i=Object.assign(r,i):i||(i=r),t.props.config.api_advanced_data&&(i=Object.assign(i,JSON.parse(t.props.config.api_advanced_data))),n[0].input=Object.assign(n[0].input,i),(0,S.Yr)(n,a).then((e=>{var i=s.ZP.foGetData("infoError",e);if(void 0!==i)return{infoError:i};let o=t.props.config.query_data.split(" "),a=o[o.length-1]||o;var n=s.ZP.foGetData(a,e);return n||(n=[]),n})).finally((e=>{l.setLoadingAction(!1)}))},this.abs_autoCallBackData=()=>{let e=this.state.paging_record;e[this.state.selectedRecordIndex]+=5,this.setState({paging_record:e},(()=>{this.recordChangeHandler(0)}))},this.handleClickTableRow=e=>{},this.handleOpenTransaction=e=>{e.tran_reference=e.ref_id,(0,S.Yr)([{txcode:"#sys:bo-view-dataAPIO9_F8",input:{table_code:"fof_transaction_journal",table_col_key:"",form_key:"@{a.b}",learn_api:"fof_transaction_journal_search_view_get_api_journal_txrefid_viewActivity",fof_transaction_journal:e}}],{})},this.handleScroll=()=>{this.card_page_index++;let e="table_search",t={};this.props.config.table_name&&(e=this.props.config.table_name),t[e]={paging:this.builCarddDataPaging()},this.state.data.length<this.state.total_record&&("true"===this.state.isSearchAdvanced&&this.props.config.apiSearchAdvanced?this.callBOSearchAdvanced(this.props.config.apiSearchAdvanced,(0,o.Z)({},t),this.props.config.BoSearchAdvance).then((e=>{this.setDataCard(e)})):this.callBOSearch(this.props.config.apiId,(0,o.Z)({},t),this.props.config.BoSearch).then((e=>{this.setDataCard(e)})))},this.builCarddDataPaging=e=>({pagingIndex:e?1:this.card_page_index,recordItem:5}),this.setDataCard=e=>{e.length>0?this.dataGlobal.data=e:this.dataGlobal=s.ZP.getDataLimited(this.state.config_table.query_data,0,999999999);let t={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[],total:this.dataGlobal.total},i=[];void 0!==t.data&&(i=t.data);let o=s.ZP.cloneJson(i),a=[],n=this.props.config.query_data.split(" "),r=n[n.length-1]||n;if(void 0!==n&&""!==n&&(!0===n.includes(".")?void 0!==s.ZP.getOOP(o,n)&&(a=s.ZP.getOOP(o,n)):void 0!==o&&(a=o)),Array.isArray(a)){for(let e=0;e<a.length;e++){let t=a[e];for(const i in t){const o=t[i];if("object"!==typeof o){let t=s.ZP.cloneJson(a[e]);a[e]={},a[e][r]=t,a[e][r].AFGHkeyIndexWJ=s.ZP.autoID();break}void 0===o.AFGHkeyIndexWJ&&(a[e][i].AFGHkeyIndexWJ=s.ZP.autoID())}}a=this.state.data.concat(a),this.setState({column_search:{},data:a,totalCheck:!1},(()=>{this.runRule("on_change")}))}else i=this.state.data.concat(i),this.setState({data:i,totalCheck:!1},(()=>{this.runRule("on_change")}))},this.page_index=1,this.card_page_index=1,this.timerType=s.ZP.getParameterSystem("TimerSpanType");let i={query_data:this.props.config.query_data};this.dataGlobal=s.ZP.getDataLimited(i.query_data,0,999999999)||{};let a={data:[],total:0};"false"!==this.props.config.isLoadDataStart&&(a={data:this.dataGlobal.data.slice(0,i.paging_record)||[],total:this.dataGlobal.total}),void 0===a&&(a={});let n=0;void 0!==a.total&&(n=a.total);let r=this.props.lang;void 0===r&&(r={}),this.state={config_table:i,data:[],lang:r,lang_select:s.ZP.getLangKey(),total_record:n,selectedRecordIndex:0,page_index:1,STT:!1,hasCheck:!1,CMD:Ri.getValueCmd(this.props),columnSearchValue:{},totalCheck:!1,checkedRow:!1,statusCheck:{},isSearchAdvanced:!1}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({columns:JSON.parse(this.props.config.columns)}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}readData(e,t){e.includes(".")&&(void 0===t||"true"===t?this.props.config.table_name?s.ZP.putData(this.props.config.table_name,"paging",this.buildDataPaging(!0),this.props.infoA):s.ZP.putData("table_search","paging",this.buildDataPaging(!0),this.props.infoA):"false"===t?this.props.config.table_name?s.ZP.putData(this.props.config.table_name,"paging",this.buildDataPaging(!0),this.props.infoA):s.ZP.putData("table_search","paging",this.buildDataPaging(!0)):this.props.config.table_name?s.ZP.putData(this.props.config.table_name,"paging"," "):s.ZP.putData("table_search","paging"," "))}functionFo(e,t){let i=void 0===t.useAction?"notUse":t.useAction,o=this.props.default;switch(i){case"txFo":var a=s.ZP.parseJson(t.txFo);void 0!==a?_.ZP.runFoWithContext(a,e,this.props.infoA,this.props.infoA_parent,o):s.ZP.AppException("#cColumnAction.onClick","Error Json is undefined");break;case"txFoAction":var n=s.ZP.parseJson(t.txFoActions);void 0!==n?_.ZP.runActionWithContext(n,e,this.props.infoA,this.props.infoA_parent,o):s.ZP.AppException("#cColumnAction.onClick","config_fo is undefined")}}renderTable(){const e=(0,n.RP)("uListActivity");return(0,l.jsx)(e,{dataFull:this.getDataActivity()})}getStatus(e){return"Completed"===e?"success":"default"}getDataConvert(e,t,i){switch(e){case"columnMask":return((e,t)=>{let i=e.mask,o=i.includes("DD")&&i.includes("MM")&&i.includes("YY")||!0===(null===e||void 0===e?void 0:e.isDate);return String(i).startsWith("$")&&String(i).endsWith("$")&&(i=s.ZP.getParameterSystem(i.replace(/\$/g,""))),o?t||0===t?Q.sx(Q.xY(t),i,e.mask_mode_time):"":Q.Ui(t,i)})(t,i);case"columnCurrency":return((e,t)=>{if(0!==t&&!t)return"--";let i=e.decimal_length||e.decimal;return 0===i||i||(i=2),i=Number(i)||0,t=Math.round(Number(t)*Math.pow(10,i))/Math.pow(10,i),Q.Nx(t,i)})(t,i);default:return i}}getDataActivity(e){let t=this.props.config.query_data.split(" ");return{abs_Click:this.handleOpenTransaction,cmd:{isLoading:this.state.isLoading},abs_autoCallBackData:this.handleScroll,data:this.state.data.map(((e,i)=>{let o=e[t[t.length-1]];return{cmd:{disable:!s.ZP.checkHasRoleForm("FO_"+o.transaction_code)},dataItem:o,img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG1SURBVHgB7ZlbT8IwFMf/bLDhGDKRi5J4efP7fw6fNfHFGwmRychwchk35dSQYBSm9Cw0pL9kL1uX9NfT9pxumevb5w/sAQb2BC2iGlpENbSIamgR1dAiqqFFVGNvRLJIiaJjo1Et4SCfQ9YwMBiN4Xff0en1kQapiDQqh0JiFSdv4bJRhluw8djqghv2qWXnsj8kVqmUChufbwu7yGn1MLFN/cgFN+wizmJNJGGahogcJ3r7XUfUjxPbjCczxJMpOGEXCXqDxDZpbMHsIpQvmi/h2uck0XrtgRu2FUcJsF4uwsqZaPohbu7bOD/xRP4wjYyYSn43QhiNcHVRE+8EYZ8tOhmOD3QkcFb3vt2jDgaLazicYDqfC9FiIY9a2RWZfkk0iHH35EMW6YjQNvpb7qDER1cSJEjtZCMjvUaoI6sjvA3HXrJwEtIiHJ2gwTAlB0NaxDQz4MC2TMggLeLYFjiQLVmUKVF2PrVmc57fK/FUrmSRFmkHb5CFaq+/1GibkM4jrc6XSMVzRVb/DxRNKmkeGE6MLCUKySyFdoU+j6iGFlENLaIaWkQ1tIhqaBHV0CKq8Qm17HooAQMieQAAAABJRU5ErkJggg==",title_bold:o.user_name,status:{title:o.status,type:this.getStatus(o.status)},title:s.ZP.getLang("activity_action")+" "+(o.description?o.description:""),time:this.getDataConvert("columnMask",{mask:"DD/MM/YYYY",mask_mode_time:"utc"},o.transaction_date)+" "+this.getDataConvert("columnMask",{mask:"HH:mm:ss",isDate:!0},o.transaction_date),title_ref:o.transaction_number,table:{header:{dataFull:{Header:{data:o.details.map((e=>({title:e.field_name,id:e.ref_id,config:{width:"",isFrozen:!1}}))),config:{}}}},data:o.details.map((e=>({data_new:e.new_value,data_old:e.old_value}))),config_row:o.details.map(((e,t)=>({type:"uTableColumnDefault"})))}}}))}}render(){return"false"===String(this.state.CMD.visible)?null:this.renderTable()}}const Ui=zi,Bi={structable:"",structable_read:"",data_default:"",data_mode:"query",query_data:"",collect_method_style:"string",hasAddLabel:"true",hasCheckAll:"false",isLoadDataBegin:"false",api_id:"",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",col_format:"@c_cdlist.caption",json_data:"[\n   \n    ]",key_selected:"c_cdlist.cdid",isLabel:"false"},Yi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.Z)({},Bi);for(let i in t)e[i]&&(""!==t[i]&&""===e[i]||(t[i]=e[i]));return t||{}},Hi={ui:{},data:{}},Vi=e=>{if(!e)return[];let t=[];const{query_data:i,json_data:o}=e;if("cdlist"===e.data_mode){var a="",n="";void 0!==e.cdlist&&void 0!==e.cdlist.cdgrp&&void 0!==e.cdlist.cdname&&(a=e.cdlist.cdgrp,n=e.cdlist.cdname),t=s.ZP.data_cdList(a,n)||[]}else t=s.ZP.getDataLimited(i,0,99999)||[],t=t.data||[];let r=s.ZP.parseJson(o).concat(t)||[];return r=Wi(r,e.col_format,e.key_selected),r||[]},Wi=(e,t,i)=>{for(let o=0;o<e.length;o++)e[o].selected=!1,e[o].key_select=o,e[o].title=Gi(t,e[o]),e[o].value=Gi("@"+i,e[o]);return e},Gi=(e,t)=>(e.split(" ").forEach((i=>{if("@"===i[0]){let o=i.substring(1),a=s.ZP.getOOP(t,o);if("c_cdlist.caption"===o){let e=s.ZP.getOOP(t,"c_cdlist.mcaption");null!==e&&void 0!==e&&e[s.ZP.getLangKey()]&&(a=null===e||void 0===e?void 0:e[s.ZP.getLangKey()])}e=e.replace(i,a)}})),e),Ji=(e,t,i,o,a)=>{if(void 0===e||void 0===t||void 0===i)return[];if(null===t||null===i)return[];if(""===i)return[];"string"===typeof e&&(e=e.includes(",")?e.split(","):e.includes("|")?e.split("|"):[e]);let n=[];return t.forEach(((t,r)=>{var l;let c=JSON.parse(JSON.stringify(t));void 0===c.key_select&&(c.key_select=r),void 0===c.title&&(c.title=Gi(o,c)),void 0===c.value&&(c.value=Gi("@"+a,c));let d=s.ZP.getOOP(t,i)+""||c.value;null!==d&&void 0!==d&&""!==d&&null!==(l=e)&&void 0!==l&&l.includes(d+"")?c.selected=!0:c.selected=!1,n.push(c)})),n},qi=(e,t)=>{let i=[];for(let o=0;o<e.length;o++)!0===e[o].selected&&i.push(s.ZP.getOOP(e[o],t));return i};const Ki=class{constructor(e,t,i){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=e=>{this.property.cmd.disabled=e},this.getCMD_enable=()=>this.property.cmd.disabled,this.getDefault=()=>this.property.default,this.property={inputType:e,config:i,default:t,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class Xi extends a.Component{constructor(e){var t;super(e),t=this,this.convertStringWithContext=e=>{let t=s.ZP.getlistCodeContext(e);for(let i=0;i<t.length;i++){const o=t[i];let a=s.ZP.context_get(o.code);void 0!==a&&(e=e.replace(o.key,a))}return e},this.getConfigSmooth=e=>{let t=s.ZP.cloneJson(e);return t.config=Yi(t.config),t},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.isRunRule=(e,t)=>!!e&&e.split(";").includes(t),this.setCMD=(e,t)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),t);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.set=async(e,t)=>{this.data_debug.data_form=t;let{structable_read:i,key_selected:o,collect_method_style:a}=this.config,{datas:s}=this.state,n="",r=[];if(t&&i){let e=i.split(".");if(2===e.length){if(t[e[0]]&&void 0!==t[e[0]][e[1]]){n=t[e[0]][e[1]],this.data_debug.data_cpn=n,this.last_selected_data=n,r=Ji(n,s,o,this.props_smooth.config.col_format,this.props_smooth.config.key_selected);let i=r.filter((e=>!0===e.selected));return"array"===a&&(n+=""),n+""!=="null"&&n+""!=="undefined"||(n=""),this.setState({val_select_tmp:n,datas:r,datas_view:r,input_value:i}),void this.onRunRule("update")}return}{let i=t;for(let t=0;t<e.length;t++){if(t===e.length-1){if(void 0!==i&&null!==i[e[t]]){n=i[e[t]],this.data_debug.data_cpn=n,this.last_selected_data=n,r=Ji(n,s,o,this.props_smooth.config.col_format,this.props_smooth.config.key_selected);let l=r.filter((e=>!0===e.selected));return"array"===a&&(n+=""),n+""!=="null"&&n+""!=="undefined"||(n=""),this.setState({input_value:l,val_select_tmp:n,datas:r,datas_view:r}),void this.onRunRule("update")}return}void 0!==i&&null!==i[e[t]]&&(i=i[e[t]])}}}void 0===this.data_debug.data_cpn&&(this.data_debug.data_cpn="undefined"),this.setState({list_selected:[],val_select_tmp:n,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jSelectMulti_NotFindValue"})},this.setAdvanced=async(e,t)=>{let i=e.component_action||"",{code:o}=this.props.default,a=i.split(";").includes(o);if(void 0!==t){var s;let{key_selected:e}=this.config,{datas:i,collect_method_style:o}=this.state,n=Ji(t,i,e,this.props_smooth.config.col_format,this.props_smooth.config.key_selected)||[],r=(null===n||void 0===n?void 0:n.toString())!==(null===(s=this.state.list_selected)||void 0===s?void 0:s.toString());if(0!==n.length){if(r&&!a){this.onRunRule("enter_tab");let e=n.filter((e=>!0===e.selected));return"array"===o&&(t+=""),t+""!=="null"&&t+""!=="undefined"||(t=""),void this.setState({input_value:e,val_select_tmp:t,datas:n,datas_view:n})}}else{let e=[0];if(0!==e.length&&r&&!a){this.onRunRule("enter_tab");let i=e.filter((e=>!0===e.selected));return"array"===o&&(t+=""),void this.setState({input_value:i,val_select_tmp:t,datas:e,datas_view:e})}}this.setState({list_selected:[],val_select_tmp:t,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jSelectMulti_NotFindValue"})}else{0!==[0].length&&(a||this.onRunRule("enter_tab"))}},this.setGetInfo=async(e,t)=>{t=t[this.props.default.code];let i=e.component_action||"",{code:o}=this.props.default,a=i.split(";").includes(o);if(void 0!==t&&""!==t){var s;let{key_selected:e}=this.config,{datas:i,collect_method_style:o}=this.state,n=Ji(t,i,e,this.props_smooth.config.col_format,this.props_smooth.config.key_selected)||[],r=(null===n||void 0===n?void 0:n.toString())!==(null===(s=this.state.list_selected)||void 0===s?void 0:s.toString());if(0!==n.length){if(r&&!a){this.onRunRule("enter_tab");let e=n.filter((e=>!0===e.selected));return"array"===o&&(t+=""),t+""!=="null"&&t+""!=="undefined"||(t=""),void this.setState({input_value:e,val_select_tmp:t,datas:n,datas_view:n})}}else{let e=[0];if(0!==e.length&&r&&!a){this.onRunRule("enter_tab");let i=e.filter((e=>!0===e.selected));return"array"===o&&(t+=""),void this.setState({input_value:i,val_select_tmp:t,datas:e,datas_view:e})}}this.setState({list_selected:[],val_select_tmp:t,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jSelectMulti_NotFindValue"})}else{0!==[0].length&&(a||this.onRunRule("enter_tab"))}},this.getAdvanced=e=>{let{list_component:t}=e,{code:i}=this.props_smooth.default;if(this.isRunRule(t,i)){let{collect_method_style:e,get_data_format:t,structable:i}=this.state,o=this.state.val_select_tmp;if("array"===e&&(o=qi(input_value,t)),2===i.split(".").length)return o}},this.getInfoErrror=()=>{var e,t,i;return""!==this.state.help_mess&&!0===this.checkValidate()&&"jSelectMulti_NotFindValue"!==this.state.help_mess?(this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:(null===(e=this.props_smooth.lang)||void 0===e||null===(t=e.ui)||void 0===t||null===(i=t[s.ZP.getLangKey()])||void 0===i?void 0:i[this.props_smooth.default.name])||this.props_smooth.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}):""},this.setDataGB=async(e,t)=>{let{datas:i,key_selected:o,list_selected:a,selected_view:n}=this.state,{json_data:r}=this.props_smooth.config;t=s.ZP.parseJson(r).concat(t)||[],t=Wi(t);let l=s.ZP.getOOP(i[a[0]],o);this.setState({datas:t,datas_view:t,list_selected:a,selected_view:n},(()=>{let e=this.state.val_select_tmp||l,t=Ji(e,this.state.datas,o,this.props_smooth.config.col_format,this.props_smooth.config.key_selected);e&&0!==t.length&&(this.state.val_select_tmp="")}))},this.get=(e,t)=>{let i=this.props_smooth.config.structable;if(i.includes("|")){let t=i.split("|");for(var o=0;o<t.length;o++)this.readData(t[o],e.inform)}else this.readData(i,e.inform)},this.checkValidate=()=>{let e=!1,t=this.state.input_value;if(void 0!==t&&void 0!==this.state.validate.request&&!e&&this.state.validate.request){let{input_value:i,get_data_format:o,collect_method_style:a}=this.state,s=this.state.val_select_tmp;"array"===a&&(s=qi(i,o)),0!==t.length&&null!==s&&""!==s&&0!==s.length||(e=!0,this.state.help_mess="validateRequest",this.setState({help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"}))}if(e){var i=s.ZP.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==i&&i.setFormValidateFromComponent(!0,this.props.default)}else{this.clearError();let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(e.buildValidateForm(!1),e.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.buildValidateForm(!1)}}))}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{let{datas:i}=this.state;i.forEach((e=>{e.selected=!1})),this.setState({search_input:"",datas:i,datas_view:i,input_value:[],val_select_tmp:""})},this.setDataDefault=()=>{},this.onEvent=e=>{switch(e){case"closeTable":this.setState({isOpen:!1});break;case"openTable":!1===this.state.isOpen&&this.setState({isOpen:!0})}},this.onRunRule=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"on_change";var i=s.ZP.getFormAppAuto(t.props_smooth.infoA.key_form);void 0!==i&&i.runRuleFunction(t.props_smooth.default,{},t.props_smooth.infoA_parent,e)},this.getDataOOP=(e,t)=>0===this.state.list_selected.length?void 0:this.state.datas[this.state.list_selected[0]],this.onBlur=()=>{this.checkValidate()},this.getOptionConfig=e=>e.map(((e,t)=>({title:Gi(this.props_smooth.config.col_format,e)||e.title,selected:e.selected,dataItem:{key_select:e.key_select,value:e.value},value:e.value,value_code:e.value_code}))),this.getInfoCompare=(e,t)=>{let{lang_compare:i,compare_info:o,isCompare:a}=this.state;if(a){let e=i[this.state.lang_select];if(o.is_change_value){let t=e.replace("{value_old}","");return t=t.replace("{value_new}",""),{is_change_value:o.is_change_value,compareInfo:{component_code:this.props_smooth.default.code,component_name:this.props_smooth.default.name,message:{title_before:o.cache_value,title_status:t,title_after:o.change_value}}}}}return{}},this.setValidate=(e,t)=>{let{validate:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),t);i.request!==o.request&&this.setState({validate:o})},this.clearCacheCompare=()=>{let{compare_info:e}=this.state;e.cache_value=void 0,e.is_change_value=!1,this.setState({compare_info:e})},this.abs_Change=async(e,t,i,a)=>{let{datas:n,search_input:r,datas_view:l,input_value:c,val_select_tmp:d}=this.state;n[a.key_select].selected=!n[a.key_select].selected;let h=d.split(",");if(n[a.key_select].selected)h.includes(n[a.key_select].value)||(c.push((0,o.Z)((0,o.Z)({},n[a.key_select]),{},{dataItem:a})),h.push(n[a.key_select].value),d=h+"");else for(let o=0;o<c.length;o++){var u;if((null===(u=c[o])||void 0===u?void 0:u.value)===e){c.splice(o,1),h=d.split(","),h.splice(h.indexOf(e)),d=h+"";break}}l=""!==r?n.filter((e=>s.ZP.searchPerfect(r,e.title))):n,this.setState({datas:n,datas_view:l,input_value:c,val_select_tmp:d},(()=>{this.checkValidate()})),await this.onRunRule("on_change")},this.onChangeSearch=e=>{let{datas:t,compare_info:i}=this.state,o=e.target.value,a=t;""!==o&&(a=t.filter((e=>s.ZP.searchPerfect(o,e.title)))),this.setState({search_input:o,datas_view:a,pos_row:-1,compare_info:i})},this.handleAddItem=e=>{let{datas:t,search_input:i,datas_view:o,list_item_add:a}=this.state;if(0===t.filter((t=>t.value===e)).length){const i=t.length;t.push({title:e,value:e,selected:!1,key_select:i}),a.push({title:e,value:e,selected:!1,key_select:i})}o=""!==i?t.filter((e=>s.ZP.searchPerfect(i,e.title))):t,this.setState({datas:t,datas_view:o,list_item_add:a})},this.handleOpen=()=>{this.setState({search_input:""},(()=>{let{datas:e,isLoadDataBegin:t,api_id:i,list_item_add:o}=this.state;t+""==="true"?this.callAPI(i).then((t=>{for(let e in t)s.ZP.setData(e,t[e]);let{key_selected:i}=this.config;e=Vi(this.config).concat(o);let a=Ji(this.state.val_select_tmp,e,i,this.props_smooth.config.col_format,this.props_smooth.config.key_selected),n=a.filter((e=>!0===e.selected));this.setState({input_value:n,datas:a,datas_view:a})})):this.setState({datas_view:e})}))},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.state.isLoading||t.setState({isLoading:!0});var a=[{txcode:"#sys:bo-getInfoArray-API",input:{learn_api:e}}];let n={},r=s.ZP.getFormAppAuto(t.props.infoA.key_form);return void 0!==r&&(n=r.getData("")),n&&(i=Object.assign(n,i)),a[0].input=Object.assign(a[0].input,i),(0,S.Yr)(a,o).then((e=>{var t=s.ZP.foGetData("infoError",e);return void 0!==t?{infoError:t}:s.ZP.foGetData("data",e)})).finally((e=>{t.setState({isLoading:!1})}))},this.renderThisComponent=()=>{const e=(0,n.RP)("uSelectMulti");return(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_CheckALL:this.handleCheckAll,abs_Open:this.handleOpen,abs_Change:this.abs_Change,abs_search:this.onChangeSearch,abs_Add:this.handleAddItem})})},this.handleCheckAll=e=>{let{datas_view:t,input_value:i,val_select_tmp:a}=this.state;switch(e){case!0:case"-":for(let e=0;e<t.length;e++)t[e].selected=!1;i=[],a="";break;case!1:for(let e=0;e<t.length;e++)t[e].selected||(t[e].selected=!0,i.push((0,o.Z)((0,o.Z)({},t[e]),{},{dataItem:{key_select:t[e].key_select,value:t[e].value}})),a+=(""!==a?",":"")+t[e].value)}this.setState({datas_view:t,input_value:i,val_select_tmp:a})},this.renderMess=e=>{switch(e){case"validateNumMin":return s.ZP.getLang(e).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(e).replace("{count}",this.state.validate.max);case"validateRequest":default:return s.ZP.getLang(e);case"jSelectMulti_NotFindValue":return s.ZP.isDebug()?s.ZP.getLang(e):""}},this.propertyConstructor=new Ki(e.inputType,e.default,e.config),this.props_smooth=this.getConfigSmooth(this.props),this.component_code=s.ZP.autoID();let{config:i,lang:a}=this.props_smooth;this.config=Yi(i),this.lang=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t in Hi)void 0===e[t]&&(e[t]={});return e}(a);let{isLoadDataBegin:r,hasAddLabel:c,hasCheckAll:d,api_id:h,selected_view_format:u,get_data_format:p,key_selected:_,structable:f,structable_read:g,col_format:m,collect_method_style:v}=this.config,b=this.props_smooth.validate;void 0===b&&(b={}),this.callform_detail="",this.callform="";let y="true"===String(this.props_smooth.validate.is_compare),A={},D={};void 0!==this.props_smooth.lang&&(A=void 0!==this.props_smooth.lang.title?this.props_smooth.lang.title:this.props_smooth.lang,void 0!==this.props_smooth.lang.lang_compare&&(D=this.props_smooth.lang.lang_compare));let k=Vi(this.config);this.state={isCompare:y,structable:f,structable_read:g,value:this.data_default,compare_info:{cache_value:void 0,is_change_value:!1},col_format:m,collect_method_style:v,val_select_tmp:"",lang_compare:D,lang:A,lang_select:s.ZP.getLangKey(),validate:b,input_value:[],infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isLoading:!1,datas:k,datas_view:k,get_data_format:p,key_selected:_,selected_view:"",selected_view_format:u,list_selected:[],pos_row:-1,search_input:"",isLoadDataBegin:r,hasAddLabel:c,hasCheckAll:d,api_id:h,isOpen:!1,CMD:this.propertyConstructor.getCMD(),max_item_length:50,hasErrorInForm:!1,list_item_add:[]},this.data_debug={}}UNSAFE_componentWillMount(){this.data_view_template=this.getOptionConfig(this.state.datas_view)}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props_smooth.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}UNSAFE_componentWillUpdate(e,t){this.data_view_template=this.getOptionConfig(t.datas_view)}readData(e,t){let{input_value:i,get_data_format:o,collect_method_style:a}=this.state,n=this.state.val_select_tmp;"array"===a&&(n=qi(i,o)),""!==this.state.help_mess&&(n=null);let r=e.split(".");2===r.length&&(void 0===t||"true"===t?s.ZP.putData(r[0],r[1],n,this.props_smooth.infoA):"false"===t?s.ZP.putDataGB(r[0],r[1],n):s.ZP.putDataGB(r[0],r[1],""))}getConfigTemplate(){var e,t,i,o,a,n,r,l,c;let d=this.props_smooth.default.name;return{config:{default:{search:{placeholder:s.ZP.getLang("jselect_search")},more_option:{title_header:(null===(e=this.props_smooth.lang)||void 0===e||null===(t=e.ui)||void 0===t||null===(i=t[s.ZP.getLangKey()])||void 0===i?void 0:i[d])||(null===(o=this.state.lang)||void 0===o?void 0:o[s.ZP.getLangKey()])||d,title_add:"Add new labels"},placeholder:s.ZP.getLang("jselect_placeholder"),data_status:s.ZP.getLang("jselect_no_result"),title:(null===(a=this.props_smooth.lang)||void 0===a||null===(n=a.ui)||void 0===n||null===(r=n[s.ZP.getLangKey()])||void 0===r?void 0:r[d])||(null===(l=this.state.lang)||void 0===l?void 0:l[s.ZP.getLangKey()])||d,type:"",class:this.props_smooth.default.class,required:this.state.validate.request,component_code:this.component_code},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:"false"!==String(this.state.CMD.visible),isLoading:this.state.isLoading,error:{message:"jSelect_NotFindValue"===this.state.help_mess?"":this.renderMess(this.state.help_mess),type:""}},mode:{hasCheckAll:"true"===String(this.state.hasCheckAll),noAddLabel:"false"===String(this.state.hasAddLabel)}},check_all:{value:this.getValueCheckAll(),title:"Check all items in show"},data:null===(c=this.data_view_template)||void 0===c?void 0:c.map((e=>e)),input_value:this.state.input_value.map((e=>(e.dataItem={key_select:e.key_select,value:e.value},e))),input_value_string:this.state.input_value.length>0?this.state.input_value[0].title+(this.state.input_value.length>1?" +"+(this.state.input_value.length-1)+"more":""):"",search_value:this.state.search_input||""}}getValueCheckAll(){let e=0;return this.state.datas_view.forEach((t=>{!0===t.selected&&e++})),0!==e&&(e===this.state.datas_view.length||"-")}render(){const e=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(e,{class:this.props.default.class_ofgroup+("false"===String(this.state.CMD.visible)?" malibu-invisible":""),children:[this.renderThisComponent(),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):this.renderThisComponent()}}const $i=Xi,eo={},to={},io={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class oo{}oo.get=()=>({main:eo,position:to,cmd:io}),oo.getCmd=()=>io,oo.getValueCmd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return void 0!==e.infoA.form_code&&(t=s.ZP.role_getComponent(e.infoA.form_code,e.default.codeHidden)||{},t=t.role||{}),t};const ao=oo;class so extends a.Component{constructor(e){super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.callDir=()=>this,this.setCMD=(e,t)=>{let{CMD:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.set=(e,t)=>{if(t[this.state.config_table.query_data]&&Array.isArray(t[this.state.config_table.query_data])){let e=t[this.state.config_table.query_data],i=e[0];e.splice(0,1);let o={data:e||[],total:e.length},a=[],s=0;void 0!==o.total&&(s=o.total);let n=this.buildPaging(s,this.state.config_table);this.dataGlobal=JSON.parse(JSON.stringify(o)),void 0!==o.data&&(a=o.data.slice(0,this.state.config_table.paging_record)),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:a,paging:n,page_index:1,total_record:s,data_header:i})}},this.reload=(e,t)=>{},this.getData=()=>({total_paging:this.state.total_record}),this.getAdvanced=(e,t)=>this.getData(),this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.abs_getDataLimited=function(e,t){let i={data:this.state.dataFilter.slice(e,e+t)||[],total:this.state.dataFilter.length},o=i.data;if(!0===this.state.hasCheck)for(let n=0;n<o.length;n++)o[n].hasCheck__=!1;let a=1;void 0!==i.total&&(a=i.total);let s=this.buildPaging(a,this.state.config_table);this.setState({data:o,total_record:a,paging:s})},this.recordChangeHandler=e=>{let t=this.state.config_table;t.paging_record=this.state.paging_record[e];let i=this.buildPaging(this.state.total_record,t);this.setState({paging:i,page_index:1,selectedRecordIndex:e,config_table:t},(()=>{this.abs_getDataLimited(0,this.state.paging_record[e])}))},this.abs_PagingActive=e=>{let t=(e-1)*this.state.config_table.paging_record,i=this.state.config_table.paging_record;this.setState({page_index:e},(()=>{this.abs_getDataLimited(t,i)}))},this.getHeaderConfig=e=>{var t;let i=[];return!0===e&&i.push({title:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),void 0!==this.state.data_header&&(i=i.concat(null===(t=this.state.data_header)||void 0===t?void 0:t.map(((e,t)=>{var i,o;return{title:(null===(i=this.state.lang)||void 0===i||null===(o=i[this.state.lang_select])||void 0===o?void 0:o[e.title])||e,id:t,config:{width:"",isFrozen:!1},value_search:this.state.columnSearchValue[t]}})))),i},this.handelClearSearch=()=>{let e=this.state.columnSearchValue;for(const s in e)e[s]="";let t=this.dataGlobal.data,i=t.slice(0,this.state.config_table.paging_record),o=t.length,a=this.buildPaging(o,this.state.config_table);this.setState({data:i,dataFilter:t,paging:a,page_index:1,total_record:o,columnSearchValue:e})},this.getCaptionLang=(e,t,i)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${t}_${i}`]&&(this.CACHE_CDLIST[`${t}_${i}`]=s.ZP.data_cdList(t,i,!0));let o={};for(const s of this.CACHE_CDLIST[`${t}_${i}`]){let e=s.c_cdlist.mcaption||{},t=s.c_cdlist.caption||"";o[s.c_cdlist.cdid]=s.c_cdlist={mcaption:e,caption:t}}const a=o[e]||{};let n=(null===a||void 0===a?void 0:a.mcaption)||{},r=(null===a||void 0===a?void 0:a.caption)||"";return n[s.ZP.getLangKey()]||r},this.handelChangeSearch=(e,t)=>{var i;let o=this.state.columnSearchValue;o[t]=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"";let a=this.dataGlobal.data.filter((e=>{let t=!0;for(const i in o){let a=e[i];!1===String(a).toLowerCase().includes(o[i].toLowerCase())&&(t=!1)}return t})),s=a.slice(0,this.state.config_table.paging_record),n=a.length,r=this.buildPaging(n,this.state.config_table);this.setState({data:s,dataFilter:a,paging:r,page_index:1,total_record:n,columnSearchValue:o})},this.abs_autoCallBackData=()=>{let e=this.state.paging_record;e[this.state.selectedRecordIndex]+=5,this.setState({paging_record:e},(()=>{this.recordChangeHandler(0)}))},this.handleClickTableRow=e=>{},this.handleMoveLeft=e=>{let t=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;t&&e--,i&&e--;let o=e-1,{columns:a}=this.state,s=a.splice(e,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.handleMoveRight=e=>{let t=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;t&&e--,i&&e--;let o=e+1,{columns:a}=this.state,s=a.splice(e,1)[0];a.splice(o,0,s),this.setState({columns:a})};let t=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let e=this.props.config.paging_record.split(",");e.length>1&&(t=e)}let i={paging_record:t[0],query_data:this.props.config.query_data};this.dataGlobal={data:[],total:0};let o={data:[],total:0};void 0===o&&(o={});let a=0;void 0!==o.total&&(a=o.total);let n=this.buildPaging(a,i),r=[];void 0!==o.data&&(r=o.data);let l=[],c=e.default.code.trim();if(void 0!==e.btn_of_grid&&""!==c)for(let s=0;s<e.btn_of_grid.length;s++){c===e.btn_of_grid[s].config.onTable.trim()&&(l[l.length]=e.btn_of_grid[s])}let d=this.props.lang;void 0===d&&(d={}),this.state={dataFilter:this.dataGlobal.data,data_header:[],data:r,lang:d,lang_select:s.ZP.getLangKey(),paging:n,total_record:a,paging_record:t,selectedRecordIndex:0,page_index:1,STT:!1,hasCheck:!1,action:l,config_table:i,CMD:ao.getValueCmd(this.props),columnSearchValue:{}}}buildPaging(e,t){let i=[],o=1;if(e>0)for(let a=0;a<e;a+=parseInt(t.paging_record))i[i.length]=o,o++;else i[i.length]=1;return i}pageIndexChange(e){this.setState({page_index:e.target.value}),this.abs_getDataLimited((parseInt(e.target.value)-1)*this.state.config_table.paging_record,this.state.config_table.paging_record)}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config,e.config,this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}readData(e,t){if(e.includes(".")){let i=[this.state.data_header];i.push.apply(i,this.dataGlobal.data);let o=e.split(".");void 0===t||"true"===t?s.ZP.putData(o[0],o[1],i,this.props.infoA):"false"===t?s.ZP.putDataGB(o[0],o[1],i):s.ZP.putDataGB(o[0],o[1],"")}}checkAll(e){if(this.state.hasCheck){let t=this.state.data;for(let i=0;i<t.length;i++)t[i].hasCheck__=e.target.checked;this.setState({checkAll:e.target.checked,data:t})}}render(){var e,t,i,o,a;let r=this.state.action.length>0,c=this.getHeaderConfig(r);const d=(0,n.RP)("uTable"),h=(0,n.RP)("uTableBodyRow");return"false"===String(this.state.CMD.visible)?null:(0,l.jsx)(d,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,abs_MoveLeft:this.handleMoveLeft,abs_MoveRight:this.handleMoveRight,Header:{data:c,config:{mode:{hasSearch:!0}}},dataEmpty:{isShow:!(null!==(e=this.state)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{modeTitle:"center",isFrozenHeader:!1,isMoveColumn:"true"===String(null===(i=this.props.config)||void 0===i?void 0:i.isMoveColumn),isResize:"true"===String(null===(o=this.props.config)||void 0===o?void 0:o.isResize)}},uPagination:{config:{show:s.ZP.getLang("cTable_Paging_show"),in:s.ZP.getLang("cTable_Paging_in"),jump_to_page:s.ZP.getLang("cTable_Paging_jump_to_page"),results:s.ZP.getLang("cTable_Paging_results")},mode:{paging_min:"MIN"===(null===(a=this.props.config)||void 0===a?void 0:a.paging_mode)},result_total:this.state.total_record,abs_PagingActive:this.abs_PagingActive,abs_setRecordActive:this.recordChangeHandler,paging_index:this.state.page_index,paging_record:this.state.paging_record.map(((e,t)=>({number:e,selected:t===this.state.selectedRecordIndex})))}},children:this.state.data.map(((e,t)=>(0,l.jsx)(h,{abs_Click:this.handleClickTableRow,children:e.map(((i,o)=>{var a,s,n;let r=T.Z[i.inputtype];return void 0===r&&(r=T.Z.ColumnDefault),(0,l.jsx)(r,{tableContext:this,title_parent:null===(a=this.state.data_header)||void 0===a?void 0:a[o],rowData:e,code_col:i,index_row:t,title:(null===(s=this.state.lang)||void 0===s||null===(n=s[this.state.lang_select])||void 0===n?void 0:n[i])||i,config:{},data:i,value:e},o)}))},t)))})}}const no=so,ro={},lo={},co={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class ho{}ho.get=()=>({main:ro,position:lo,cmd:co}),ho.getCmd=()=>co,ho.getValueCmd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return void 0!==e.infoA.form_code&&(t=s.ZP.role_getComponent(e.infoA.form_code,e.default.codeHidden)||{},t=t.role||{}),t};const uo=ho;class po extends a.Component{constructor(e){var t;super(e),t=this,this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.callDir=()=>this,this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o})},this.set=(e,t)=>{if(t[this.state.config_table.query_data]&&Array.isArray(t[this.state.config_table.query_data])){let e=t[this.state.config_table.query_data],i=e[0];e.splice(0,1);let o={data:e||[],total:t.total_item||e.length},a=[],s=0;void 0!==o.total&&(s=o.total);let n=this.buildPaging(s,this.state.config_table);this.dataGlobal=JSON.parse(JSON.stringify(o)),void 0!==o.data&&(a=o.data.slice(0,this.state.config_table.paging_record)),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:a,paging:n,page_index:1,total_record:s,data_header:i})}},this.setData=e=>{if(e[this.state.config_table.query_data]&&Array.isArray(e[this.state.config_table.query_data])){let t=e[this.state.config_table.query_data],i=t[0];t.splice(0,1);let o={data:t||[],total:e.total_item||t.length},a=[],s=0;void 0!==o.total&&(s=o.total);let n=this.buildPaging(s,this.state.config_table);this.dataGlobal=JSON.parse(JSON.stringify(o)),void 0!==o.data&&(a=o.data.slice(0,this.state.config_table.paging_record)),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:a,paging:n,total_record:s,data_header:i})}},this.reload=(e,t)=>{},this.getData=()=>({total_paging:this.state.total_record}),this.getAdvanced=(e,t)=>this.getData(),this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.abs_getDataLimited=function(e,t){let i={data:this.state.dataFilter.slice(e,e+t)||[],total:this.state.dataFilter.length},o=i.data;if(!0===this.state.hasCheck)for(let n=0;n<o.length;n++)o[n].hasCheck__=!1;let a=1;void 0!==i.total&&(a=i.total);let s=this.buildPaging(a,this.state.config_table);this.setState({data:o,total_record:a,paging:s})},this.buildDataPaging=e=>({pagingIndex:e?1:this.page_index,recordItem:this.state.paging_record.find(((e,t)=>t===this.state.selectedRecordIndex))}),this.recordChangeHandler=e=>{let t=this.state.config_table;t.paging_record=this.state.paging_record[e];let i=this.buildPaging(this.state.total_record,t);this.page_index=1,this.setState({paging:i,page_index:1,selectedRecordIndex:e,config_table:t},(()=>{this.callAPI(this.props.config.bo_txcode,this.props.config.bo_input,this.buildDataPaging()).then((e=>{this.setData(e)}))}))},this.abs_PagingActive=e=>{this.page_index=e,this.setState({page_index:e},(()=>{this.callAPI(this.props.config.bo_txcode,this.props.config.bo_input,this.buildDataPaging()).then((e=>{this.setData(e)}))}))},this.callAPI=function(e,i,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"data_api";""!==e&&void 0!==e||(e="bo-load-dataArray");var r=[{txcode:e,input:JSON.parse(i)}];let l={},c=s.ZP.getFormAppAuto(t.props.infoA.key_form);return void 0!==c&&(c.setLoadingAction(!0),l=c.getData("")),l&&o?o=Object.assign(l,o):o||(o=l),r[0].input=Object.assign(r[0].input,o),(0,S.Yr)(r,a).then((e=>{var t=s.ZP.foGetData("infoError",e);if(void 0!==t)return{infoError:t};var i=s.ZP.foGetData(n,e);return i||(i=[]),i})).finally((e=>{c.setLoadingAction(!1)}))},this.getHeaderConfig=e=>{var t;let i=[];return!0===e&&i.push({title:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),void 0!==this.state.data_header&&(i=i.concat(null===(t=this.state.data_header)||void 0===t?void 0:t.map(((e,t)=>{var i,o;return{title:(null===(i=this.state.lang)||void 0===i||null===(o=i[this.state.lang_select])||void 0===o?void 0:o[e.title])||e,id:t,config:{width:"",isFrozen:!1},value_search:this.state.columnSearchValue[t]}})))),i},this.handelClearSearch=()=>{let e=this.state.columnSearchValue;for(const s in e)e[s]="";let t=this.dataGlobal.data,i=t.slice(0,this.state.config_table.paging_record),o=t.length,a=this.buildPaging(o,this.state.config_table);this.setState({data:i,dataFilter:t,paging:a,page_index:1,total_record:o,columnSearchValue:e})},this.getCaptionLang=(e,t,i)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${t}_${i}`]&&(this.CACHE_CDLIST[`${t}_${i}`]=s.ZP.data_cdList(t,i,!0));let o={};for(const s of this.CACHE_CDLIST[`${t}_${i}`]){let e=s.c_cdlist.mcaption||{},t=s.c_cdlist.caption||"";o[s.c_cdlist.cdid]=s.c_cdlist={mcaption:e,caption:t}}const a=o[e]||{};let n=(null===a||void 0===a?void 0:a.mcaption)||{},r=(null===a||void 0===a?void 0:a.caption)||"";return n[s.ZP.getLangKey()]||r},this.handelChangeSearch=(e,t)=>{var i;let o=this.state.columnSearchValue;o[t]=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"";let a=this.dataGlobal.data.filter((e=>{let t=!0;for(const i in o){let a=e[i];!1===String(a).toLowerCase().includes(o[i].toLowerCase())&&(t=!1)}return t})),s=a.slice(0,this.state.config_table.paging_record),n=a.length,r=this.buildPaging(n,this.state.config_table);this.setState({data:s,dataFilter:a,paging:r,page_index:1,total_record:n,columnSearchValue:o})},this.abs_autoCallBackData=()=>{let e=this.state.paging_record;e[this.state.selectedRecordIndex]+=5,this.setState({paging_record:e},(()=>{this.recordChangeHandler(0)}))},this.handleClickTableRow=e=>{},this.handleMoveLeft=e=>{let t=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;t&&e--,i&&e--;let o=e-1,{columns:a}=this.state,s=a.splice(e,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.handleMoveRight=e=>{let t=this.state.action.length>0,{hasSystemColumnCheck:i}=this.state;t&&e--,i&&e--;let o=e+1,{columns:a}=this.state,s=a.splice(e,1)[0];a.splice(o,0,s),this.setState({columns:a})},this.page_index=1;let i=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let e=this.props.config.paging_record.split(",");e.length>1&&(i=e)}let o={paging_record:i[0],query_data:this.props.config.query_data};this.dataGlobal={data:[],total:0};let a={data:[],total:0};void 0===a&&(a={});let n=0;void 0!==a.total&&(n=a.total);let r=this.buildPaging(n,o),l=[];void 0!==a.data&&(l=a.data);let c=[],d=e.default.code.trim();if(void 0!==e.btn_of_grid&&""!==d)for(let s=0;s<e.btn_of_grid.length;s++){d===e.btn_of_grid[s].config.onTable.trim()&&(c[c.length]=e.btn_of_grid[s])}let h=this.props.lang;void 0===h&&(h={}),this.state={dataFilter:this.dataGlobal.data,data_header:[],data:l,lang:h,lang_select:s.ZP.getLangKey(),paging:r,total_record:n,paging_record:i,selectedRecordIndex:0,page_index:1,STT:!1,hasCheck:!1,action:c,config_table:o,CMD:uo.getValueCmd(this.props),columnSearchValue:{}}}buildPaging(e,t){let i=[],o=1;if(e>0)for(let a=0;a<e;a+=parseInt(t.paging_record))i[i.length]=o,o++;else i[i.length]=1;return i}pageIndexChange(e){this.setState({page_index:e.target.value}),this.abs_getDataLimited((parseInt(e.target.value)-1)*this.state.config_table.paging_record,this.state.config_table.paging_record)}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config,e.config,this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}readData(e,t){if(e.includes(".")){let i=[this.state.data_header];i.push.apply(i,this.dataGlobal.data);let o=e.split(".");void 0===t||"true"===t?(s.ZP.putData(o[0],o[1],i,this.props.infoA),s.ZP.putData("table_dynamic_search","paging",this.buildDataPaging(!0),this.props.infoA)):"false"===t?(s.ZP.putDataGB(o[0],o[1],i),s.ZP.putData("table_dynamic_search","paging",this.buildDataPaging(!0))):(s.ZP.putDataGB(o[0],o[1],""),s.ZP.putData("table_dynamic_search","paging",this.buildDataPaging(!0)))}}checkAll(e){if(this.state.hasCheck){let t=this.state.data;for(let i=0;i<t.length;i++)t[i].hasCheck__=e.target.checked;this.setState({checkAll:e.target.checked,data:t})}}render(){var e,t,i,o,a;let r=this.state.action.length>0,c=this.getHeaderConfig(r);const d=(0,n.RP)("uTable"),h=(0,n.RP)("uTableBodyRow");return"false"===String(this.state.CMD.visible)?null:(0,l.jsx)(d,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,abs_MoveLeft:this.handleMoveLeft,abs_MoveRight:this.handleMoveRight,Header:{data:c,config:{mode:{hasSearch:!1}}},dataEmpty:{isShow:!(null!==(e=this.state)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{modeTitle:"center",isFrozenHeader:!1,isMoveColumn:"true"===String(null===(i=this.props.config)||void 0===i?void 0:i.isMoveColumn),isResize:"true"===String(null===(o=this.props.config)||void 0===o?void 0:o.isResize)}},uPagination:{config:{show:s.ZP.getLang("cTable_Paging_show"),in:s.ZP.getLang("cTable_Paging_in"),jump_to_page:s.ZP.getLang("cTable_Paging_jump_to_page"),results:s.ZP.getLang("cTable_Paging_results")},mode:{paging_min:"MIN"===(null===(a=this.props.config)||void 0===a?void 0:a.paging_mode)},result_total:this.state.total_record,abs_PagingActive:this.abs_PagingActive,abs_setRecordActive:this.recordChangeHandler,paging_index:this.state.page_index,paging_record:this.state.paging_record.map(((e,t)=>({number:e,selected:t===this.state.selectedRecordIndex})))}},children:this.state.data.map(((e,t)=>(0,l.jsx)(h,{abs_Click:this.handleClickTableRow,children:e.map(((i,o)=>{var a,s,n;let r=T.Z[i.inputtype];return void 0===r&&(r=T.Z.ColumnDefault),(0,l.jsx)(r,{tableContext:this,title_parent:null===(a=this.state.data_header)||void 0===a?void 0:a[o],rowData:e,code_col:i,index_row:t,title:(null===(s=this.state.lang)||void 0===s||null===(n=s[this.state.lang_select])||void 0===n?void 0:n[i])||i,config:{},data:i,value:e},o)}))},t)))})}}const _o=po,fo=(e,t,i)=>{t=t.replace("_","0");let o=(0,Q.w5)(t,e,i);return(0,Q.sx)(o,e,i)},go={a:/[a-zA-Z]/,9:/\d/,h:/\d/,H:/\d/,m:/\d/,s:/\d/,"*":/./,_:/[a-zA-Z\d]/,L:/[a-zA-Z\d]/,".":/./,0:/\d/,z:/[a-zA-Z]/,Z:/[a-zA-Z ]/,A:/[A-Za-z0-9\\_]/},mo={"#":"_"},vo={0:{status:!0,reg_remove:/[^\d/]/g},L:{status:!0,reg_remove:/[^a-zA-Z\d]/g},z:{status:!0,reg_remove:/[^a-zA-Z]/g},Z:{status:!0,reg_remove:/[^a-zA-Z ]/g},".":{status:!0,reg_remove:""},A:{status:!0,reg_remove:/[^A-Za-z0-9\\_]/g}},bo={EMAIL:{regex_validate:/^[\w-.]+@([\w-]+.)+[\w-]{2,4}$/,regex_lang:"jMaskInput_WrongFormat"},EMAIL_MULTI:{regex_validate:/^[\w-.]+@([\w-]+.)+[\w-]{2,4}$/,regex_lang:"jMaskInput_WrongFormat",isMulti:!0}},yo={"-":".{100}",EMAIL:".{100}",EMAIL_MULTI:".{500}"},Ao=e=>mo[e],Do=e=>go[e],ko=e=>{let t=e[0];return vo[t]},Oo=e=>{var t,i;if(!e)return!1;let o=e[0];if(!0!==(null===(t=vo[o])||void 0===t?void 0:t.status))return!1;let a=!0;for(const s of e)e[0]!==s&&(a=!1);return!0===(null===(i=ko(o))||void 0===i?void 0:i.status)&&a},wo=(e,t)=>{let i=[];const o=/(\\.|.)/g;let a;for(;null!==(a=o.exec(e));){a.index===o.lastIndex&&o.lastIndex++;const e=a[0],s=1===e.length?"regex":"const";let n={type:s,key:e};"regex"===s?Do(e)?"date"===t&&/[^/:]/.test(e)?(n.reg=Do("9"),n.value=e):(n.reg=Do(e),n.value="_"):"date"===t&&/[^/:]/.test(e)?(n.reg=Do("9"),n.value=e):Ao(e)?(n.value=Ao(e),n.type="static"):(n.value=e,n.type="const"):n.value=e[1],i.push(n)}return i},Co=(e,t)=>{let i="";for(const o of e)i+="date"===t?o.key:o.value;return i},xo=(e,t)=>{let i="";for(const o of e)i+=o.key.includes("\\")?o.value:o.key;return i},So=e=>{let t=/\${([^}]+)}/gm.exec(e);if(null!==t)try{let i=s.ZP.context_get(t[1])||"";e=e.replace(t[0],i)}catch(i){}return e},Mo=(e,t,i,o,a,s)=>{if(!e||!t||!i)return"";let n="";if(!e)return"";switch(i){case"default":for(const o in t){let i=e[o];if("regex"===t[o].type){if(!1===t[o].reg.test(i))return"";n+=i}else"static"===t[o].type&&(n+=i)}break;case"date":let i=Co(t);if("string"===o)n=a&&""!==a?(0,Q.Al)(e,i,a,s):(0,Q.w5)(e,i,s);else n=(0,Q.w5)(e,i,s);break;default:n=e}return n||0===n?n:""},Po=(e,t,i,o,a)=>{if(!e&&0!==e||!t||!i)return"";let s="";const n=xo(t);switch(i){case"default":let i=0;for(const a in t)if("regex"===t[a].type)if(Oo(n))s+=e[i]||"",i++;else{if(e[i]&&t[a].reg.test(e[i]))s+=e[i];else{if("OPTIMISTIC"!==o)return"";s+=t[a].value}i++}else"static"===t[a].type?(s+=t[a].value,t[a].value===e[i]&&i++):s+=t[a].value;break;case"date":let r=Co(t);s=(0,Q.sx)(e,r,a);break;default:s=e}return s||""},To=(e,t,i,o,a,s,n)=>{let r=Mo(e,t,i,a,s,n);return null!==o&&void 0!==o&&o.length?Po(r,o,i):r},Io=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,n=e;return null!==o&&void 0!==o&&o.length&&(n=Mo(e,o,i,s)),Po(n,t,i,a,s)},No=()=>["SUN","MON","TUE","WED","THU","FRI","SAT"].map(((e,t)=>({title:e,type:"gray"}))),Fo=e=>{e||(e=window.moment.utc().toDate().getMonth()+1);return["January","February","March","April","May","June","July","August","September","October","November","December"].map(((t,i)=>({title:t,selected:e-1===i})))},Lo=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1900,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2100,i=[];if(e<=t)for(let o=e;o<=t;o++)i.push(o);return i},Eo=e=>{let t=window.moment.utc(e).toDate().getMonth()+1,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];(e=>e%400===0||e%100!==0&&e%4===0)(window.moment.utc(e).toDate().getFullYear())&&i[2]++;let o=[];for(let a=1;a<=i[t];a++)o.push(a);return o},jo=(e,t)=>{e||(e=Date.parse(window.moment.utc().toDate()));let i=window.moment.utc(e).toDate(),o=window.moment.utc((0,_e.X7)(e,{M:-1})).toDate(),a=window.moment.utc((0,_e.X7)(e,{M:1})).toDate(),s=Date.parse(o),n=Date.parse(a),r=Eo(s),l=Eo(e),c=Eo(n),d=window.moment.utc([i.getFullYear(),i.getMonth(),1]).toDate(),h=window.moment.utc([i.getFullYear(),i.getMonth(),l.length]).toDate(),u=r.slice(r.length-d.getDay(),r.length),p=c.slice(0,6-h.getDay()),_=u.map((e=>{let t=String(e),a="gray",n=window.moment.utc(new Date(s).setDate(e)).valueOf();return e===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()&&(a="primary"),{title:t,type:a,value:n}})),f=l.map((t=>{let o=String(t),a="",s=window.moment.utc(new Date(e).setDate(t)).valueOf();return t===i.getDate()&&(a="primary"),{title:o,type:a,value:s}})),g=p.map((e=>{let t=String(e),o="gray",s=window.moment.utc(new Date(n).setDate(e)).valueOf();return e===i.getDate()&&a.getMonth()===i.getMonth()&&a.getFullYear()===i.getFullYear()&&(o="primary"),{title:t,type:o,value:s}})),m=_.concat(f);return m=m.concat(g),m},Zo={structable:"",structable_read:"",data_default:"",data_type:"edit",component_title:"",mask_format:"",mask_data_format:"",value_type:"all",auto_delete:"true",mask_mode:"default",content_style:"",format_value_type_string:"",min_year:"",max_year:""};const Ro=class{constructor(e,t,i){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=e=>{this.property.cmd.disabled=e},this.getCMD_enable=()=>this.property.cmd.disabled,this.combinePrevConfig=e=>{let t=e||this.property.config,i=(0,o.Z)({},Zo);for(let o in i)t[o]&&(""!==t[o]&&""===t[o]||(i[o]=t[o]));return i||{}},this.getDefault=()=>this.property.default,this.property={inputType:e,config:i,default:t,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class Qo extends a.Component{constructor(e){var t;super(e),t=this,this.getComponentContructor=(e,t)=>{let i=this.buildPropsSmooth(t);return{props_smooth:i,state_smooth:this.buildStateSmooth(i)}},this.buildPropsSmooth=e=>{let t=s.ZP.cloneJson(e);if(t.config=this.propertyConstructor.combinePrevConfig(e.config),"date"===t.config.mask_mode&&void 0!==this.dateFormat){let e=t.config.mask_format.split(" ");if(e.length>=1){let s="";for(let t=0;t<e.length;t++){var i,o,a;null!==(i=e[t])&&void 0!==i&&i.includes("DD")&&null!==(o=e[t])&&void 0!==o&&o.includes("MM")&&null!==(a=e[t])&&void 0!==a&&a.includes("YY")?s+=""===s?this.dateFormat:" "+this.dateFormat:s+=""===s?e[t]:" "+e[t]}t.config.mask_format=s}else t.config.mask_format=this.dateFormat}else String(t.config.mask_format).startsWith("$")&&String(t.config.mask_format).endsWith("$")&&(t.config.mask_format=s.ZP.getParameterSystem(t.config.mask_format.replace(/\$/g,"")));var n;t.config.const_mask_format=t.config.mask_format,t.config.mask_format=(n=t.config.mask_format,yo[n]||n),t.config.mask_format=(e=>{for(const t in go){let i,o=new RegExp(`\\${t}{(\\d+)}`,"g");for(;null!==(i=o.exec(e));){i.index===o.lastIndex&&o.lastIndex++;let a="";for(let e=0;e<Number(i[1]);e++)a+=t;e=e.replace(i[0],a)}}return e})(t.config.mask_format);let r="";""!==t.config.data_default&&(r=So(t.config.data_default),r=Number(r)||"string"!==t.config.value_type||-1!==r.indexOf("libDate_cal")?((e,t)=>{let i=e,o=/libDate_cal\((.*),(.*)\)/gm.exec(i);if(null!==o)try{i=(0,_e.X7)((0,Q.xY)(o[1]),JSON.parse(o[2]))}catch(n){}let a=/JF_DATE\.([^(]+)\(([^)]*)\)/gm.exec(i);if(null!==a)try{e=s.ZP.persist_convertCondition(e);let t=a[1],o=a[2].split(",");i=_e.ZP[t].apply(null,o)}catch(n){}return i})(r,t.config.format_value_type_string):Q.cI(r,t.config.format_value_type_string)),void 0!==r&&null!==r||(r="");let l=2100,c=1900;if("date"===this.propertyConstructor.property.config.mask_mode){let e=So(t.config.max_year),i=So(t.config.min_year);(e||0===e)&&(l=Number(e)?new Date(Number(e)).getFullYear():new Date(e).getFullYear()),(i||0===i)&&(c=Number(i)?new Date(Number(i)).getFullYear():new Date(i).getFullYear())}return t.config.data_default=r,t.config.max_year=l,t.config.min_year=c,t},this.buildStateSmooth=e=>{let t=e.config,i=wo(t.mask_format,t.mask_mode),o=wo(t.mask_data_format,t.mask_mode),a=Co(i,t.mask_mode),n=t.mask_mode,r={status:!1,reg_remove:""};if(Oo(t.mask_format)){let e=ko(t.mask_format);void 0!==e&&(r.status=e.status,r.reg_remove=e.reg_remove)}let l=a,c=Date.parse(new Date),d={mounth_data:Fo(),year_data:Lo(e.config.min_year,e.config.max_year),day_data:No(),day_of_mounth_data:jo(c,c),date_view:c};return{isLookup:"true"===this.props.config.isLookup,error_input:!1,lang_select:s.ZP.getLangKey(),component_title:this.props.default.name||"",CMD:this.propertyConstructor.getCMD(),format_value_type_string:e.config.format_value_type_string,value:"",mask_value:"",date_selected_cache:0,content_style:e.config.content_style,value_type:e.config.value_type,mask_mode:n,mask_format:l,mask_regs:i,mask_regs_to:o,mask_placeholder:a,free_style:r,date_picker:d,max_year:e.config.max_year,min_year:e.config.min_year,validate:e.validate,hasSuggest:"true"===e.config.hasSuggest,keyLoadCache:e.config.keyLoadCache,moreInformation_key:e.config.moreInformation_key,PK_key:e.config.PK_key}},this.getInfoErrror=()=>{var e;let{help_mess:t}=this.state;return t?(this.setState({hasErrorInForm:!0}),{info:this.getErrorLang(this.state.help_mess),key:(null===(e=this.state.lang)||void 0===e?void 0:e[this.state.lang_select])||this.props_smooth.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}):""},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);i.disabled===o.disabled&&i.visible===o.visible&&i.block===o.block||this.setState({CMD:o})},this.getDataOOP=(e,t)=>this.data_select,this.getAdvanced=(e,t)=>{let{format_value_type_string:i}=this.state;return this.maskInputGet(i)},this.setAdvanced=(e,t)=>{if(e.codeHidden){if(e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(void 0!==this.props.config.data_view)var i="";void 0!==this.props.config.data_value&&(i=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),"date"===this.state.mask_mode&&(i=Q.xY(i)),this.maskInputSet(i,"enter_tab",void 0,void 0,void 0,!0)}}else e.list_component&&(null!==t&&void 0!==t||(t=""),"date"===this.state.mask_mode&&(t=Q.xY(t)),this.maskInputSet(t,"on_change",void 0,void 0,void 0,!0))},this.setGetInfo=(e,t)=>{if(t=t[this.props.default.code],e.codeHidden){if(e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(void 0!==this.props.config.data_view)var i="";void 0!==this.props.config.data_value&&(i=s.ZP.getOOP(this.data_select,this.props.config.data_value.trim())+""),"date"===this.state.mask_mode&&(i=Q.xY(i)),this.maskInputSet(i,"enter_tab",void 0,void 0,void 0,!0)}}else e.list_component&&(null!==t&&void 0!==t||(t=""),"date"===this.state.mask_mode&&(t=Q.xY(t)),this.maskInputSet(t,"on_change",void 0,void 0,void 0,!0))},this.get=(e,t)=>{let i=this.props_smooth.config.structable.split("|");for(const o of i)this.readData(o,e.inform)},this.runRule=e=>{if(e){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.set=(e,t)=>{var i;let o=this.props_smooth.config.structable_read,{mask_mode:a}=this.state,s=o.split("."),n=null===t||void 0===t||null===(i=t[s[0]])||void 0===i?void 0:i[s[1]];void 0!==n||this.props_smooth.config.structable_read||(n=this.props_smooth.config.data_default),void 0!==n&&(null==n&&(n=""),"date"===a&&(n=Q.xY(n)),this.maskInputSet(n,"on_change",void 0,void 0,void 0,!0))},this.reload=(e,t)=>{let i=this.props_smooth.config;this.data_select={},this.maskInputSet(i.data_default,"reload",void 0,void 0,"OPTIMISTIC")},this.setDataDefault=()=>{let e=this.props_smooth.config;this.data_select={},this.maskInputSet(e.data_default,void 0,void 0,void 0,"OPTIMISTIC")},this.checkValidate=()=>{let e=this.maskInputGet(),t=new Date(e).getFullYear(),i="",{min_year:o,max_year:a,mask_mode:n}=this.state;if(this.state.validate.request&&!e&&(i="validateRequest",this.state.mask_value&&0!==e&&(i="jMaskInput_WrongFormat")),"date"===n&&(o>t&&""!==this.props_smooth.config.min_year&&(i="jDate_Min"),a<t&&""!==this.props_smooth.config.max_year&&(i="jDate_Max")),i||(i=this.maskInputValidate()),i){var r=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==r&&r.setFormValidateFromComponent(!0,this.props.default)}return this.state.help_mess=i,this.setState({help_mess:i}),!!i},this.setMaskConfig=(e,t)=>{let i=this.props_smooth;i.config.mask_format=t.mask_format,i.config.mask_data_format=t.mask_data_format,i.config.mask_mode=t.mask_mode,this.props_smooth=this.buildPropsSmooth(i);let o=this.buildStateSmooth(this.props_smooth),{mask_format:a,mask_mode:s,mask_reg:n,mask_regs:r,mask_regs_to:l,mask_placeholder:c,mask_value:d,free_style:h,date_picker:u,validate:p}=o;this.setState({validate:p,mask_format:a,mask_mode:s,mask_reg:n,mask_regs:r,mask_regs_to:l,mask_placeholder:c,mask_value:d,free_style:h,date_picker:u})},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()},(()=>{this.onBlur()}))},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setCallBuildFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.modalToggle=e=>{e||this.buildFormChild(),!0!==this.state.CMD.disabled&&(void 0===e?this.setState({show_modal:s.ZP.autoID()}):e&&(this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})))},this.clearError=()=>{this.setState({help_mess:""})},this.maskInputSet=(e,t,i,o,a,s)=>{let n,{mask_regs:r,mask_regs_to:l,mask_mode:c,mask_mode_time:d,max_year:h,min_year:u,mask_value:p}=this.state,_={end_pos:0,start_pos:0,help_mess:"",mask_value:"",value:e},f=xo(r,this.props_smooth.config.mask_mode);"date"===c?(_.date_picker=((e,t,i)=>{e=e?new Date(e):window.moment.utc().toDate();const o=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));return{mounth_data:Fo(o.getMonth()+1),year_data:Lo(t,i),day_data:No(),day_of_mounth_data:jo(o.getTime()),date_view:e}})(e,u,h),n=Io(e,r,c,[],"",d)):f.includes("HH:mm")?e?(n=fo(f,p,d),"Invalid date"===n&&(n=this.state.mask_value)):n="":n=Io(e,r,c,l,a),_.mask_value=n,_=Object.assign(_,o),this.setState(_,(()=>{this.runRule(t),i&&i()}))},this.maskInputGet=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{mask_regs:i,mask_regs_to:o,mask_value:a,mask_mode:s,value_type:n,mask_mode_time:r}=t.state,l="";if(t.state.free_style.status)return a;let c=xo(t.state.mask_regs,t.props_smooth.config.mask_mode);if("date"===s)l=To(a,i,s,[],n,e,r);else if(c.includes("HH:mm")){let e=fo(c,a,r);"Invalid date"===e&&(e=t.state.mask_value),l=e}else l=To(a,i,s,o);return l},this.maskInputClear=()=>{this.data_select={},this.setState({end_pos:0,start_pos:0,value:"",mask_value:"",help_mess:""},(()=>{}))},this.maskInputValidate=()=>{let{mask_value:e}=this.state,t="",i=this.maskInputGet(),o=(a=this.props_smooth.config.const_mask_format,bo[a]);var a;if(t=e&&!i&&0!==i?"jMaskInput_WrongFormat":function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[{title:"@VALUE",value:arguments.length>1?arguments[1]:void 0},{title:"@NOW",value:Date.parse(new Date)},{title:"@YEAR",value:31536e6.toString()},{title:"@MOUNTH",value:2592e6.toString()},{title:"@DAY",value:864e5.toString()},{title:"@HOURS",value:36e5.toString()},{title:"@MINUTE",value:6e4.toString()},{title:"@SECONDS",value:1e3.toString()}];for(const i of e){let{content:e,mess:o}=i;for(const i of t)e=e.replace(new RegExp(i.title,"g"),i.value);if(!1===s.ZP.checkDynamicConditionNoData(e))return o}return""}(this.props_smooth.validate.conditions,i),o&&e){let i=o.regex_validate;if(o.isMulti){let o=e.split(",");for(let e=0;e<o.length;e++){const a=o[e];if(!i.test(a)){t="jMaskInput_WrongFormat";break}}}else i.test(e)||(t="jMaskInput_WrongFormat")}return t},this.abs_calendar_changeMonth=e=>{let{format_value_type_string:t}=this.state,i=this.maskInputGet()||Date.parse(new Date),o=(0,_e.X7)(i,{M:e},"string"===this.state.value_type?this.state.format_value_type_string:this.state.mask_format,"string"===this.state.value_type);this.maskInputSet(o,void 0,void 0,void 0,void 0,!0)},this.abs_calendar_submit=e=>{let t=this.state.date_picker.day_of_mounth_data[e].value;this.maskInputSet(t,"enter_tab",void 0,void 0,void 0,!0),this.setState({isOpenCalender:!1})},this.abs_calendar_chooseYear=e=>{let{format_value_type_string:t}=this.state,i=this.maskInputGet()||Date.parse(new Date),o=new Date(i).setFullYear(e);this.maskInputSet(o,void 0,void 0,void 0,void 0,!0)},this.abs_calendar_changeYear=e=>{},this.abs_calendar_chooseMonth=e=>{let t=e,{format_value_type_string:i}=this.state,o=this.maskInputGet()||Date.parse(new Date),a=new Date(o).setMonth(t);this.maskInputSet(a,void 0,void 0,void 0,void 0,!0)},this.abs_calendar_openCalendar=e=>{let{format_value_type_string:t}=this.state,i=this.maskInputGet();i&&this.maskInputSet(i,"","",{date_selected_cache:i},void 0,!0),this.setState({isOpenCalender:e})},this.abs_calendar_KeyUp=e=>{let t,{isOpenCalender:i}=this.state,o=this.maskInputGet()||Date.parse(new Date),a=this.state.date_selected_cache;if(i)switch(e.key){case"ArrowLeft":i&&(t=(0,_e.X7)(o,{d:-1}),this.maskInputSet(t,void 0,void 0,void 0,void 0,!0));break;case"ArrowRight":i&&(t=(0,_e.X7)(o,{d:1}),this.maskInputSet(t,void 0,void 0,void 0,void 0,!0));break;case"ArrowUp":t=(0,_e.X7)(o,{d:-7}),this.maskInputSet(t,void 0,void 0,void 0,void 0,!0);break;case"ArrowDown":t=(0,_e.X7)(o,{d:7}),this.maskInputSet(t,void 0,void 0,void 0,void 0,!0);break;case"Enter":t=o,this.maskInputSet(t,void 0,void 0,void 0,void 0,!0),this.ref_maskinput.current.abs_CloseCalendar(),this.setState({isOpenCalender:!1});break;case"Escape":Number(a)!==Number(this.maskInputGet())&&a!==this.maskInputGet()?i&&this.maskInputSet(a,void 0,void 0,void 0,void 0,!0):(this.ref_maskinput.current.abs_CloseCalendar(),this.setState({isOpenCalender:!1}))}else switch(e.key){case"ArrowDown":t=(0,_e.X7)(o,{d:-1}),this.maskInputSet(t,void 0,void 0,void 0,void 0,!0);break;case"ArrowUp":t=(0,_e.X7)(o,{d:1}),this.maskInputSet(t,void 0,void 0,void 0,void 0,!0)}},this.abs_calendar_today=()=>{this.maskInputSet(Date.parse(new Date),"enter_tab")},this.componentDidUpdate=(e,t)=>{},this.onEventKey=e=>{if("Delete"===e.key)this.maskInputClear()},this.onClick=e=>{this.clearError()},this.onBlur=()=>{let e=this.state.mask_mode;if(this.setState({isOpenCalender:!1}),"date"===e){let e=this.maskInputGet();this.maskInputSet(e,"",(()=>{if(!1===this.checkValidate()){this.runRule("enter_tab");let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(e.buildValidateForm(!1),e.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.buildValidateForm(!1)}}))}}))}else if(!1===this.checkValidate()){this.runRule("enter_tab");let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&!0===this.state.hasErrorInForm&&this.setState({hasErrorInForm:!1},(()=>{if(e.buildValidateForm(!1),e.checkReloadValidateFormParent()&&Object.keys(this.props.infoA_parent).length>0&&this.props.infoA_parent.constructor===Object){let e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.buildValidateForm(!1)}}))}},this.setLastPost=e=>{let t=e.target;this.state.start_pos=t.selectionStart,this.state.end_pos=t.selectionEnd},this.setPos=(e,t)=>{e.selectionStart=t,e.selectionEnd=t},this.onChangeMaskInput=e=>{let{start_pos:t,mask_value:i,mask_regs:o,mask_placeholder:a,content_style:s,mask_mode:n,mask_mode_time:r}=this.state,l=e.target,c=l.selectionStart,d=l.value||"";"UPPER"===s&&(d=d.toLocaleUpperCase());let h=this.state.free_style;if(h.status)return d=d.replace(h.reg_remove,""),d=d.slice(0,o.length),void this.setState({mask_value:d});let u=d.slice(t,c)||"",p=0,_="",f=d.slice(0,c);for(let m=c;m<a.length;m++)m<c+(a.length-d.length)?f+=a[m]:f+=i[m]||a[m];i=f;for(const m in o){let e=o[m];"regex"===e.type||"const"===e.type&&e.value===u[p]||"static"===e.type&&e.value===u[p]?t<=m&&p<u.length?("static"===e.type&&e.value===u[p]||"const"===e.type&&e.value===u[p]||e.reg.test(u[p])?_+=u[p]||e.value:(_+=e.value,c--),p++):_+=i[m]||a[m]:(_+=e.value,t<=m&&p<u.length&&c++)}_===a&&(_="");let g=xo(this.state.mask_regs,this.props_smooth.config.mask_mode);if(g.includes("HH:mm")){let e=fo(g,_,r);"Invalid date"===e&&(e=this.state.mask_value),_=e}this.setState({mask_value:_,value:"date"===n?Q.w5(_,g,r):""},(()=>{this.setPos(l,c);let{mask_format:e,hasSuggest:t,keyLoadCache:i,mask_value:o,mask_regs:a}=this.state;"date"!==e&&t&&""!==i&&(0,S.SQ)(i+function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!t||!i)return"";let a="";if(!e)return"";switch(i){case"default":for(const i in t){let s=e[i];"regex"===t[i].type?!1===t[i].reg.test(s)?a+=" ":a+=s:("static"===t[i].type||"const"===t[i].type&&o)&&(a+=s)}break;case"date":break;default:a=e}return a||0===a?a:""}(o,a,n,!1).replace(" ","")).then((e=>{this.setState({list_suggest:e})})).catch((e=>{console.log("reason",e.split("\n")[0]),this.setState({list_suggest:[]})}))}))},this.setValidate=(e,t)=>{let{validate:i}=this.state,o=Object.assign(s.ZP.cloneJson(i),t);i.request!==o.request&&this.setState({validate:o})},this.abs_ChooseSuggest=e=>{this.maskInputSet(e.value)},this.getErrorLang=e=>{switch(e){case"validateNumMin":return s.ZP.getLang(e).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(e).replace("{count}",this.state.validate.max);case"jDate_Min":return s.ZP.getLang(e).replace("{count}",this.state.min_year);case"jDate_Max":return s.ZP.getLang(e).replace("{count}",this.state.max_year);default:return s.ZP.getLang(e)}},this.renderThisComponent=()=>{let e=this.state.mask_mode;const t=(0,n.RP)("date"===e?"uDate":"uInput");if("true"===String(this.props.config.isLabel)){const e=(0,n.RP)("uLabel");return(0,l.jsx)(e,{dataFull:{config:{default:{title:this.state.mask_value||"",class:this.props_smooth.default.class},cmd:{visible:"true"===String(this.state.CMD.visible)}}}})}return(0,l.jsx)(t,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChangeMaskInput,abs_Blur:this.onBlur,abs_Click:this.onClick,abs_KeyDown:this.setLastPost,abs_KeyUp:this.onEventKey,abs_MouseUp:this.setLastPost}),ref:this.ref_maskinput})},this.abs_CloseModal=()=>{this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})},this.propertyConstructor=new Ro(e.inputType,e.default,e.config),this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT"),this.component_code=s.ZP.autoID(),this.data_debug={},this.app_debug=[];let i="time_zone_c";"date"===this.propertyConstructor.property.config.mask_mode&&this.propertyConstructor.property.config.mask_mode_time&&(i=this.propertyConstructor.property.config.mask_mode_time),this.renderFormChildDone=!1,this.state={is_lookup:!1,is_error:!1,is_clicked:!1,lang:this.props.lang,help_mess:"",lang_select:"",title:"",CMD:{},format_value_type_string:"",end_pos:-1,start_pos:0,_type:"",value:"",mask_mode_time:i,mask_value:"",mask_format:"",mask_placeholder:"",mask_mode:"default",mask_regs:[],mask_regs_to:[],content_style:"",value_type:"long",free_style:{status:!1,reg_remove:""},date_picker:{mounth_data:[],year_data:[],day_data:[],day_of_mounth_data:[],date_view:Date.parse(new Date)},date_selected_cache:0,renderFormChildDone:!1,id_component:s.ZP.autoID(),isOpenCalender:!1,hasErrorInForm:!1,hasSuggest:!1,keyLoadCache:"",PK_key:"",moreInformation_key:"",list_suggest:[]},this.ref_maskinput=a.createRef();const r=this.getComponentContructor({},e);this.state=Object.assign(this.state,r.state_smooth),this.props_smooth=r.props_smooth}readData(e,t){let i=e.split(".");if(2!==i.length)return;let{format_value_type_string:o}=this.state,a=this.maskInputGet(o);switch(t){case void 0:case"true":s.ZP.putData(i[0],i[1],a,this.props.infoA);break;case"false":s.ZP.putDataGB(i[0],i[1]);break;default:s.ZP.putDataGB(i[0],i[1],"")}}openDetail(){let e=this.props.config.callform_detail;if(e){var t=s.ZP.getFormAppAuto(e);t&&this.props.config.callform_detail_mode,void 0===t?(0,h.QS)({form_code:this.props.config.callform_detail},this.props.infoA,this.props.default,"callform_detail;"+this.state.id_component,this.data_select):"modal"===this.props.config.callform_detail_mode?(t.putDataAll_andSet(this.data_select),this.setState({show_modal_detail:s.ZP.autoID()})):(t.putDataAll_andSet(this.data_select),s.ZP.openForm(e))}}buildFormChild(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let e=s.ZP.cloneJson(this.props.infoA);e.componentParent=this.props.default,(0,h.BR)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props.default,"callform;"+this.state.id_component)}}componentDidMount(){const e=()=>{setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())};this.props_smooth.config.data_default?this.maskInputSet(this.props_smooth.config.data_default,"on_change",e(),{},"OPTIMISTIC"):e()}getConfigTemplate(){var e,t;let{date_picker:i,free_style:o,format_value_type_string:a,mask_value:n,mask_regs:r,mask_mode:l,mask_regs_to:c,hasSuggest:d}=this.state;return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{subTitle_isShow:"date"===this.state.mask_mode,subTitle:`(${this.state.mask_placeholder})`,placeholder:this.state.CMD.disabled+""==="true"?" ":xo(this.state.mask_regs,this.props_smooth.config.mask_mode),title:(null===(e=this.state.lang)||void 0===e?void 0:e[this.state.lang_select])||this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:null===(t=this.state.validate)||void 0===t?void 0:t.request,icon:!0===this.state.isLookup?"search":"",component_code:this.component_code},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:!0,error:{message:this.getErrorLang(this.state.help_mess),type:""}},mode:{textAlign:"left",letterSpacing:o.status?"":"M"}},valueTitleHover:"true"!==String(this.state.CMD.disabled)?"":this.state.mask_value,value:this.state.mask_value,cmd:{isLock:!1},suggest:{isShow:d,data:this.state.list_suggest.map((e=>{let t=Io(e[this.state.PK_key],r,l,c,void 0),i=[];if(n){let e="",o="";for(let a=0;a<t.length;a++){let s=r.filter((e=>e.key===t[a]&&"const"===e.type));s.length>0?""!==o?o+=t[a]:""!==e&&(e+=t[a]):t[a]===n[a]?(o+=t[a],""!==e&&(i.push({value:e,mode:"suggest"}),e="")):(e+=t[a],""!=o&&(i.push({value:o}),o="")),a===t.length-1&&(""!==e?(i.push({value:e,mode:"suggest"}),e=""):""!=o&&(i.push({value:o}),o=""))}}return{title:i,more_information:e[this.state.moreInformation_key],value:e[this.state.PK_key]}})),title:{noData:s.ZP.getLang("header_searchNoResult")}},calendar_data:{value_current:"",today:{title:"Today"},config:{days_title:i.day_data},list_months:i.mounth_data,list_years:{value:new Date(i.date_view).getFullYear()||"",data:i.year_data},list_days:i.day_of_mounth_data},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_today:this.abs_calendar_today,abs_calendar_KeyUp:this.abs_calendar_KeyUp,abs_ChooseSuggest:this.abs_ChooseSuggest,tooltip_copy:{icon:"copy",title:s.ZP.getLang("btn_copy")},abs_Copy:()=>{s.ZP.copyToClipboard(this.maskInputGet(a))}}}render(){if("false"===String(this.state.CMD.visible))return null;const e=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(e,{class:this.props.default.class_ofgroup,children:[(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]}),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):(0,l.jsxs)(a.Fragment,{children:[this.renderThisComponent(),this.state.isLookup&&(0,l.jsx)(d,{modal_title:s.ZP.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})]})}}const zo=Qo;class Uo extends a.Component{constructor(e){super(e),this.setValidate=(e,t)=>{const{validate:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);i.request!==o.request&&this.setState({validate:o})},this.getConfig=()=>{var e;return{config:{default:{title:(null===(e=this.state.lang)||void 0===e?void 0:e[this.state.lang_select])||this.props.default.name,class:this.props.default.class,required:"true"===this.state.validate.request,component_code:this.component_code},cmd:{disable:this.state.CMD.disabled+""==="true",visible:this.state.CMD.visible+""!=="false"},error:{message:s.ZP.getLang(this.state.help_mess),type:""!==this.state.help_mess?"danger":""}},value:this.state.value,mention:JSON.parse(this.props.config.mention||"[]")}},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)o[a]="true"===String(o[a]);this.setState({CMD:o},(()=>{}))},this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return this.setState({hasErrorInForm:!0}),{info:this.renderMess(this.state.help_mess),key:e||this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}}return""},this.callDir=()=>this,this.setAdvanced=(e,t)=>{void 0!==t&&null!==t||(t=this.data_default),this.setState({value:t})},this.setGetInfo=(e,t)=>{void 0!==(t=t[this.props.default.code])&&null!==t||(t=this.data_default),this.setState({value:t})},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var i=this.props.config.structable_read.split(".");if(i.length>0&&void 0!==t[i[0]]&&void 0!==t[i[0]][i[1]])return void this.setState({value:t[i[0]][i[1]]})}let e="";this.data_default&&(e=this.data_default),this.setState({value:e})}},this.get=(e,t)=>{let i=this.props.config.structable;if(i.includes("|")){let t=i.split("|");for(let i=0;i<t.length;i++)this.readData(t[i],e.inform)}else this.readData(i,e.inform)},this.getAdvanced=(e,t)=>this.state.value,this.reload=(e,t)=>{this.setState({value:this.data_default})},this.handleChange=e=>{e.trim()!==this.state.value.trim()&&this.setState({value:e})},this.onBlur=e=>{},this.component_code=s.ZP.autoID(),this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var t=this.props.lang;void 0===t&&(t={});let i=this.data_default,a=this.props.validate;void 0===a&&(a={}),this.state={value:i,lang:t,validate:a,lang_select:s.ZP.getLangKey(),help_css:"",help_icon:"",help_mess:"",CMD:{},hasErrorInForm:!1}}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}readData(e,t){if(e.includes(".")){var i=e.split(".");void 0===t||"true"===t?s.ZP.putData(i[0],i[1],this.state.value,this.props.infoA):"false"===t?s.ZP.putDataGB(i[0],i[1],this.state.value):s.ZP.putDataGB(i[0],i[1],"")}}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}checkValidate(){let e="",t=this.state.value.trim();if("true"===this.state.validate.request&&""===t&&(e="validateRequest"),""!==e){let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);return void 0!==t&&t.setFormValidateFromComponent(!0,this.props.default),this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:e}),!0}return this.setState({help_css:"",help_icon:"",help_mess:""}),!1}render(){const e=(0,n.RP)("uRichTextEditor"),t=(0,n.RP)("uOfGroup");return this.props.isOfgroupParent?(0,l.jsxs)(t,{class:this.props.default.class_ofgroup,children:[(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfig()),{},{abs_Change:this.handleChange,abs_Blur:this.onBlur})}),this.props.ofGroupData.map((e=>(0,l.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{isOfgroupParent:!1}))))]}):(0,l.jsx)(e,{dataFull:(0,o.Z)((0,o.Z)({},this.getConfig()),{},{abs_Change:this.handleChange,abs_Blur:this.onBlur})})}}const Bo=Uo,Yo=(e,t,i)=>{for(let o=0;o<e.length;o++)e[o].selected=!1,e[o].key_select=o,e[o].title=Ho(t,e[o]),e[o].value=Ho("@"+i,e[o]);return e},Ho=(e,t)=>(e.split(" ").forEach((i=>{if("@"===i[0]){let o=i.substring(1),a=s.ZP.getOOP(t,o);if("c_cdlist.caption"===o){let e=s.ZP.getOOP(t,"c_cdlist.mcaption");null!==e&&void 0!==e&&e[s.ZP.getLangKey()]&&(a=null===e||void 0===e?void 0:e[s.ZP.getLangKey()])}e=e.replace(i,a)}})),e);var Vo=i(4419);class Wo extends a.Component{constructor(e){super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getCodeHidden=()=>this.props.default.codeHidden,this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:s.ZP.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.checkIsLoading=()=>!!this.props.config.is_open_static_form||this.isLoading,this.setCallFormBack=(e,t)=>{if(void 0!==e.key_form&&void 0!==e.key&&e.key===this.props.default.codeHidden){this.form_render_done++;let t=e.componentConfigDefault,{call_form:o}=this.state;if(o[t.index_form].tab_id===t.form_id)o[t.index_form].auto_form_key=e.key_form;else for(let i=0;i<o.length;i++){if(o[i].tab_id===t.form_id){o[i].auto_form_key=e.key_form;break}}this.setState({call_form:o});var i=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==i&&i.hasOwnProperty("componentIsLoaded")&&i.componentIsLoaded(this.props.default.codeHidden)}this.form_render_done===this.state.call_form.length&&(this.isLoading=!0,this.setState({isLoading:!1}))},this.set=(e,t)=>{this.setDataCallForm(t)},this.getKeyForm=()=>this.muti_form_didMount+"",this.getInfoErrror=()=>{let e="";if(this.state.call_form.forEach((t=>{let i=t.auto_form_key,o="";var a=s.ZP.getFormAppAuto(i);if(!0!==this.props.config.notCheckValidate&&void 0!==a&&a.hasOwnProperty("getValidateForm")){let t=a.getValidateForm();for(let e=0;e<t.length;e++){const i=t[e];o+=i.key+": "+i.info+";"}e+=o}})),""!==e)return{info:e,key:this.props.default.name,infoComponent:(0,o.Z)((0,o.Z)({},this.props.default),{},{component_code:this.component_code,view_code:this.props.viewID,layout_index:this.props.layoutIndex})}},this.get=(e,t)=>{void 0!==e.isCallFromFormChild&&null!==e.isCallFromFormChild||(e.isCallFromFormChild=!1);var i=this.props.config.structable;if(i.includes("|"))for(var o=i.split("|"),a=0;a<o.length;a++)this.readData(o[a],e.inform,e.isCallFromFormChild);else this.readData(i,e.inform,e.isCallFromFormChild)},this.checkValidate=()=>{let e=!1;if(this.state.call_form.forEach((t=>{let i=t.auto_form_key;var o=s.ZP.getFormAppAuto(i);void 0!==o&&(o.hasOwnProperty("setFormValidateFromFunctionClient")&&o.setFormValidateFromFunctionClient(!1),o.hasOwnProperty("callDirFromSupport")&&(o.callDirFromSupport("clearError",{},{}),!0!==this.props.config.notCheckValidate&&(o.callDirFromSupport("checkValidate",{},{}),o.hasOwnProperty("getFormValidate")&&(e=o.getFormValidate()))))})),e){var t=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default},(async()=>{this.props.config.is_open_static_form||(await this.reloadForm(this.state.call_form,t),this.runRuleCPN("reload"))}))},this.getDataCallForm=function(e){return[]},this.setCMD=(e,t)=>{if(this.state.call_form.forEach((i=>{let o=i.auto_form_key;var a=s.ZP.getFormAppAuto(o);if(void 0!==a&&a.hasOwnProperty("callDirFromSupport")){let i=this.props.default.code,o=new RegExp(`${i}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(o,e.list_component);n||(n=e.list_component),a.callDirFromSupport("setCMD",Object.assign(e,{list_component:n,list_view:e.list_view}),t)}})),e.list_component.includes(`${code}()`)){let{CMD:e}=this.state,i=Object.assign(s.ZP.cloneJson(e),t);for(let t in i)i[t]="true"===String(i[t]);this.setState({CMD:i})}},this.setDataGB=(e,t)=>{this.state.call_form.forEach((i=>{let o=i.auto_form_key;var a=s.ZP.getFormAppAuto(o);if(void 0!==a&&a.hasOwnProperty("callDirFromSupport")){let i=this.props.default.code,o=new RegExp(`${i}\\(([^)]*)\\)`,"g"),n=s.ZP.getElementWithRegex(o,e.list_component);n||(n=e.list_component),a.callDirFromSupport("setDataGB",{list_component:n,list_view:e.list_view},t)}}))},this.reloadForm=(e,t)=>{this.state.call_form.forEach((e=>{let t=e.auto_form_key;var i=s.ZP.getFormAppAuto(t);void 0!==i&&i.clearForm()}))},this.getAdvanced=(e,t)=>{if(this.state.call_form.length>0){let e=[];this.state.call_form.forEach((t=>{let i=t.auto_form_key;var o=s.ZP.getFormAppAuto(i);void 0!==o?e.push(o.getDataAll()):s.ZP.AppException("#jTabList.getData","form is undefined","system")}))}return[]},this.runRuleCPN=e=>{this.state.call_form.length>0?this.state.call_form.forEach((t=>{let i=t.auto_form_key;if(void 0!==s.ZP.getFormAppAuto(i)){if(this.isLoading){s.ZP.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,{},this.props.infoA_parent,e||"on_change")}}else s.ZP.AppException("#jTabList.runRuleCPN","form is undefined","system")})):s.ZP.AppException("#jTabList.runRuleCPN","muti_form_didMount is 0","system")},this.setDataCallForm=async e=>{this.state.call_form.length>0?this.state.call_form.forEach((async t=>{let i=t.auto_form_key;var o=s.ZP.getFormAppAuto(i);if(void 0!==o){if(this.isLoading)if(void 0!==e){let t=s.ZP.getFormAppAuto(this.props.infoA.key_form);await o.putDataAll_andSet(e),t.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_change")}else o.clearForm()}else s.ZP.AppException("#jTabList.setDataCallForm","form is undefined","system")})):s.ZP.AppException("#jTabList.setDataCallForm","muti_form_didMount is 0","system")},this.onSelectTab=(e,t)=>{this.last_tab_view=this.state.view_active,this.setState({view_active:t})},this.ref_callForm=[],this.component_code=s.ZP.autoID(),this.config={},this.props.config&&(this.config=this.props.config),this.data_default="",void 0!==this.config.data_default&&(this.data_default=this.config.data_default);var t=this.props.validate;void 0===t&&(t={}),this.data_select={};var i=this.props.lang;void 0===i&&(i={}),this.is_open="true"===this.config.is_open;let a=(e=>{if(!e)return[];let t=[];const{query_data:i,json_data:o}=e;t=s.ZP.getDataLimited(i,0,99999)||[],t=t.data||[];let a=s.ZP.parseJson(o).concat(t)||[];return a=Yo(a,e.col_format,e.key_selected),a||[]})(this.config);this.state={view_active:"",value:this.data_default,value_old:"",lang:i,lang_select:s.ZP.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpenForm:this.is_open,call_form:[],list_form_render:[],CMD:{},tab_add_config:a,isLoading:!1,value_search:""},this.id_component=s.ZP.autoID(),this.isLoading=0===this.state.call_form.length,this.isErrorLoadForm=!1,this.form_render_done=0,this.muti_form_didMount=[],this.list_DOM_tab=[]}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.lang!==e.lang&&this.setState({lang:this.props.lang}),this.props.validate!==e.validate&&this.setState({validate:this.props.validate}),this.props.property!==e.property&&this.setState({property:this.props.property})}componentDidMount(){setTimeout((()=>{s.ZP.FromAddComponent(this.props.infoA.key_form,this)}),s.ZP.getTimeAddComponent())}readData(e,t,i){let o=[];if(this.state.call_form.forEach(((e,t)=>{let a={form_code:e.form_code,form_name:e.title,form_id:e.tab_id,form_auto_key:e.auto_form_key,form_data:{}};var n=s.ZP.getFormAppAuto(e.auto_form_key);void 0!==n&&(n.hasOwnProperty("setFormValidateFromFunctionClient")&&n.setFormValidateFromFunctionClient(!1),n.hasOwnProperty("callDirFromSupport")&&(n.callDirFromSupport("clearError",{},{}),!0===this.props.config.notCheckValidate||i?(n.callDirFromSupport("get",{list_component:"*",list_view:"",inform:"true",checkError:!1},{}),n.hasOwnProperty("getData")&&(a.form_data=n.getData("")[a.form_code])):(n.callDirFromSupport("checkValidate",{},{}),n.hasOwnProperty("getFormValidate")&&(n.getFormValidate()||(n.callDirFromSupport("get",{list_component:"*",list_view:"",inform:"true",checkError:!1},{}),n.hasOwnProperty("getData")&&(a.form_data=n.getData("")[a.form_code])))))),o[t]=a})),e.includes(".")&&void 0!==o){var a=e.split(".");let i=o;void 0===t||"true"===t?s.ZP.putData(a[0],a[1],i,this.props.infoA):"false"===t?s.ZP.putDataGB(a[0],a[1],o):s.ZP.putDataGB(a[0],a[1],"")}else if(void 0!==o){let t=o;s.ZP.putDataOneKey(e,t,this.props.infoA)}}getListTabView(){let e=[],{call_form:t}=this.state;for(let i=0;i<t.length;i++)t[i].form_code&&e.push({tabInfo:{title:t[i].title,id:t[i].tab_id},sysStyle:{show:""===this.state.view_active?0===i?"show":"":t[i].tab_id===this.state.view_active?"show":""}});return e}getListContentTabView(){let e=[],{list_form_render:t}=this.state;for(let i=0;i<t.length;i++)e.push({id:t[i].tab_id,DOM_elm:t[i].DOM_elm});return e}render(){const e=(0,n.RP)("uTabList");return(0,l.jsx)(e,{dataFull:{data:this.getListTabView(),button_add:{title:"Add Tabs"},search:{placeholder:s.ZP.getLang("jselect_search"),value:this.state.value_search},form_content:this.getListContentTabView(),cmd:{disable:"true"===String(this.state.CMD.disabled),isLoading:this.state.isLoading},tab_add_config:this.state.tab_add_config.filter((e=>""===this.state.value_search||(s.ZP.searchPerfect(this.state.value_search,e.title)||s.ZP.searchPerfect(this.state.value_search,e.value)))).map((e=>({title:e.title,value:e.value}))),abs_addTab:e=>{this.setState({isLoading:!0},(()=>{let{call_form:t,list_form_render:i}=this.state;const a=t.length;let n=(0,s.cb)();t.push({title:e.title+" (Tab "+(a+1)+")",form_code:e.value,tab_id:n,auto_form_key:""}),i.push({tab_id:n,DOM_elm:(0,l.jsx)("div",{ref:e=>{this.ref_callForm[a]=e}})}),this.setState({call_form:t,list_form_render:i,view_active:n},(()=>{setTimeout((()=>{(0,h.BR)(e.value,this.ref_callForm[a],this.props.infoA,(0,o.Z)((0,o.Z)({},this.props.default),{},{form_id:n,index_form:a}),this.props.default.codeHidden)}),1)}))}))},abs_Sort:e=>{let{oldIndex:t,newIndex:i}=e;this.setState({call_form:(0,Vo.q)(this.state.call_form,t,i)},(()=>{}))},abs_Close:e=>{let{call_form:t,list_form_render:i,view_active:o}=this.state;for(let a=0;a<t.length;a++){if(t[a].tab_id===e.id){t.splice(a,1);break}}for(let a=0;a<i.length;a++){if(i[a].tab_id===e.id){i.splice(a,1);break}}this.form_render_done--,o===e.id&&(o=this.last_tab_view?this.last_tab_view:t.length>0?t[0].tab_id:""),this.setState({call_form:t,list_form_render:i,view_active:o})},abs_select:this.onSelectTab,abs_search:e=>{this.setState({value_search:e.target.value})},abs_ChangeTitle:(e,t,i)=>{let{call_form:o}=this.state;if(o[t].tab_id===i.id)o[t].title=e.target.value;else for(let a=0;a<o.length;a++){if(o[a].tab_id===i.id){o[a].title=e.target.value;break}}this.setState({call_form:o})}}})}}const Go={jTabList:Wo,jRichTextEditor:Bo,jMaskInputVer2:zo,jTableDynamicSearch:_o,jTableDynamic:no,jSelectMulti:$i,jListActivity:Ui,jIframeReport:Fi,jReport:Ii,jAuthentic:Pi,jListCheckBox:xi,jTableSearch:_i,jCheckbox:gt,cTextInput:v,cTextArea:C,cButton:P,jButtonPrint:ut,cTableDefault:U,jTableCalculator:_t,jNumberInput:V,jSelect:pe,jMaskInput:Ue,jRadioBox:Ye,jTreeView:Ve,jeLearning:at,jMutiValue:nt,jTagInput:dt,jCurrency:bt,jPrintVoucher:Dt,jLabel:Pt,jTableForm:Ct,jSameMain:St,jSignature:It,jFullCalendar:Wt,jChart:Jt,jProgressBar:Kt,jUploadFile:ei,jImage:oi,jButtonSignature:ni}},8022:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var o=i(7313),a=i(5842),s=i(6633),n=i(6417);class r extends o.Component{constructor(e){super(e),this.timerType=this.props.timerType||"",this.state={time:this.getTimeType()-this.props.time}}getTimeType(){let e=a.ZP.context_get("user_acc");return"working_date"===this.timerType?(0,s.xY)(e.working_date):Date.now()}componentDidMount(){this.save_interval=setInterval((()=>{var e=this.state.time+6e4;this.setState({time:e})}),6e4)}componentWillUnmount(){clearInterval(this.save_interval)}render(){let e=this.state.time,t=new Date(this.getTimeType()-e);return(0,n.jsx)("span",{className:this.props.class,children:a.ZP.timeSince(t)})}}const l=r},2200:(e,t,i)=>{"use strict";i.d(t,{Z:()=>W});var o=i(7313),a=i(9676),s=i(6417);class n extends o.Component{render(){const e=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:null===this.props.data||""===this.props.data?"":"object"===typeof this.props.data?JSON.stringify(this.props.data):String(this.props.data),config:{mode:"number"===typeof this.props.data?"right":"left"}}})}}const r=n;var l=i(5842);class c extends o.Component{constructor(e){super(e),this.state={title:this.props.title,html:this.callBuildColumn(!0)}}componentDidUpdate(e){this.props.value===e.value&&this.props.data===e.data&&this.props.title===e.title||this.callBuildColumn()}callBuildColumn(e){let t="",i="",o=this.props.data;if(this.data_copy=JSON.stringify(this.props.value),void 0!==this.props.config){if(void 0!==this.props.config.data&&void 0!==this.props.config.data[this.props.data]){let e=this.props.config.data[this.props.data];e.color&&(t=e.color),e.icon_img&&(i=e.icon_img)}if(void 0!==this.props.config.cdname&&void 0!==this.props.config.cdgrp&&""!==this.props.config.cdname&&""!==this.props.config.cdgrp){let e=l.ZP.data_cdList(this.props.config.cdgrp,this.props.config.cdname)||[];for(let t=0;t<e.length;t++){let i=e[t];if(void 0!==i.c_cdlist.cdid&&i.c_cdlist.cdid===o){o=i.c_cdlist.caption;break}}}}let a=null;if(i.includes("data:image/png;base64")||i.includes("http")&&i.includes("//")?a=(0,s.jsx)("img",{src:i,alt:this.props.title,title:o}):i.includes("fa-")&&(a=(0,s.jsx)("i",{className:"fa "+i,"aria-hidden":"true",style:{color:t},title:o})),void 0!==e&&e)return a;this.setState({title:this.props.title,html:a})}render(){return(0,s.jsx)("td",{"data-title":this.state.title,className:"text-center",style:{textAlign:"center"},children:this.state.html})}}const d=c;class h extends o.Component{getNumber(e){return void 0===e||null===e||Number.isNaN(Number(e))?"":String(Number(e))}render(){const e=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.getNumber(this.props.data),config:{mode:"right"}}})}}const u=h;class p extends o.Component{isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(i){}return t}getImageTemplate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data:image/png;base64,";return void 0!==e&&null!==e&&this.isImage(e)?e.indexOf(t)>-1?e:t+e:e.indexOf("../")>-1?e:"../rs/global/img/file_icon.svg"}render(){const e=(0,a.RP)("uTableColumnImg");return(0,s.jsx)(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,src:this.getImageTemplate(this.props.data)}})}}const _=p;var f=i(6633);class g extends o.Component{constructor(e){var t;super(e),this.convertMaskToValue=e=>{var t,i,o;if(e&&String(e).startsWith("$")&&String(e).endsWith("$")&&(e=l.ZP.getParameterSystem(e.replace(/\$/g,""))),this.isDate){var a,s,n;if(void 0!==this.dateFormat){if(!0===this.props.config.show_text){let e="";if(!this.props.data)return"";let a=this.dateFormat.split("/");if(3===a.length)for(let s=0;s<a.length;s++){switch(a[s]){case"DD":e+=(null===(t=this.props.data)||void 0===t?void 0:t.substring(8,10))+"/";break;case"MM":e+=(null===(i=this.props.data)||void 0===i?void 0:i.substring(5,7))+"/";break;case"YYYY":e+=(null===(o=this.props.data)||void 0===o?void 0:o.substring(0,4))+"/"}}return e.endsWith("/")&&(e=e.slice(0,-1)),e}{var r;let t=(null===(r=e)||void 0===r?void 0:r.split(" "))||[];if(t.length>=1){let i="";for(let e=0;e<t.length;e++){var c,d,h;null!==(c=t[e])&&void 0!==c&&c.includes("DD")&&null!==(d=t[e])&&void 0!==d&&d.includes("MM")&&null!==(h=t[e])&&void 0!==h&&h.includes("YY")?i+=""===i?this.dateFormat:" "+this.dateFormat:i+=""===i?t[e]:" "+t[e]}e=i}else e=this.dateFormat}}return!0===this.props.config.show_text&&"DD/MM/YYYY"===e?this.props.data?(null===(a=this.props.data)||void 0===a?void 0:a.substring(8,10))+"/"+(null===(s=this.props.data)||void 0===s?void 0:s.substring(5,7))+"/"+(null===(n=this.props.data)||void 0===n?void 0:n.substring(0,4)):"":this.props.data||0===this.props.data?f.sx(f.xY(this.props.data),e,this.props.config.mask_mode_time):""}return f.Ui(this.props.data,e)},this.dateFormat=l.ZP.getParameterSystem("DATE_FORMAT");let i=this.props.config.mask;this.isDate=(null===i||void 0===i?void 0:i.includes("DD"))&&(null===i||void 0===i?void 0:i.includes("MM"))&&(null===i||void 0===i?void 0:i.includes("YY"))||!0===(null===(t=this.props.config)||void 0===t?void 0:t.isDate)}render(){const e=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.convertMaskToValue(this.props.config.mask)||"",config:{mode:this.isDate?"center":"left"},tooltip_copy:{icon:"copy",title:l.ZP.getLang("btn_copy")},abs_Copy:()=>{l.ZP.copyToClipboard(this.isDate?this.convertMaskToValue(this.props.config.mask):this.props.data)}}})}}const m=g;class v extends o.Component{render(){let e=this.props.data||{},t=l.ZP.getLangKey();e=this.props.data[t];const i=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(i,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:e,config:{mode:"number"===typeof this.props.data?"right":"left"}}})}}const b=v;class y extends o.Component{constructor(e){super(e),this.decimal_length=l.ZP.getNodeJson(this.props,"config.decimal_length")||l.ZP.getNodeJson(this.props,"config.decimal")}checkConfigColor(e){if(0!==e&&!e)return"";let t=this.decimal_length;return 0===t||t||(t=2),t=Number(t)||0,e=Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t),(0,f.Nx)(e,t)}render(){const e=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(e,{dataFull:{title_parent:this.props.title_parent,data:this.checkConfigColor(this.props.data),config:{mode:"right"},tooltip_copy:{icon:"copy",title:l.ZP.getLang("btn_copy")},abs_Copy:()=>{l.ZP.copyToClipboard(this.props.data)}}})}}const A=y;var D=i(9425);const k={number:/[^\d/]/g,string:/[^a-zA-Z ]/g,free_style:/[^a-zA-Z\d]/g};class O extends o.Component{constructor(e){super(e),this.setLastPost=e=>{let t=e.target;this.state.start_pos=t.selectionStart,this.state.end_pos=t.selectionEnd},this.setPos=(e,t)=>{e.selectionStart=t,e.selectionEnd=t},this.handleChangeValue=(e,t,i,o)=>{const a=e.target;let s=a.selectionStart,n=a.value||"";if("currency"===this.props.config.columnEditType){let t=e.target;const{selectionStart:i,value:o}=t,{decimal_char:a,int_char:s,decimal_length:n}=this,r=this.state.valueChange;let l=o;if(l.includes("-")&&!1===this.isNegative)return void this.setState({value:r},(()=>{t.setSelectionRange(0,0)}));if(r.includes(a)&&!o.includes(a)&&a){let e=r.lastIndexOf(a);l=o.substring(0,e)+a+o.substring(e,o.length),l===a&&(l="")}let c=r,d=o.lastIndexOf(a);o.indexOf(a)!==o.lastIndexOf(a)&&a?d=c.length-n:(c=(0,D.Nx)(l,n,s,a,!1)||"",d=i-(o.length-c.length),1===i?d=1:(i>o.lastIndexOf(a)||o[d]===this.int_char)&&(d+=1));let h=c.replace(/\D/g,"");const u=this.props.config.max_length||15;if(h.length>Number(u)&&Number(u)>0){let e=h.length-Number(u);if(i<=c.lastIndexOf(a)-1){let t=i;c[i]===this.int_char&&t++,h=(c.substring(0,t)+c.substring(t+e,c.length)).replace(/\D/g,""),l=h.substring(0,h.length-n)+a+h.substring(h.length-n,h.length),c=(0,D.Nx)(l,n,s,a,!1)||""}else c=r}this.setState({valueChange:c,isChange:!0},(()=>{t.setSelectionRange(d,d)}))}else k[this.props.config.columnEditType]?(n=n.replace(k[this.props.config.columnEditType],""),this.setState({valueChange:n},(()=>{this.setPos(a,s)}))):this.setState({valueChange:n},(()=>{this.setPos(a,s)}))},this.handleSubmit=(e,t,i)=>{let{valueChange:o}=this.state,a=this.getValueReturn(o);"number"!==this.props.config.columnEditType&&"currency"!==this.props.config.columnEditType||(this.props.config.minValue&&parseFloat(a)<parseFloat(this.props.config.minValue)&&(a=0),this.props.config.maxValue&&parseFloat(a)>parseFloat(this.props.config.maxValue)&&(a=0)),0===a?this.setState({valueLogicDefault:"currency"===this.props.config.columnEditType?(0,D.Nx)(a,this.decimal_length,this.int_char,this.decimal_char,!1):a,valueChange:"currency"===this.props.config.columnEditType?(0,D.Nx)(a,this.decimal_length,this.int_char,this.decimal_char,!1):a},(()=>{this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:a,dataItem:e})})):this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:a,dataItem:e})},this.handleCancel=(e,t,i)=>{this.setState({valueChange:this.state.valueLogicDefault})},"currency"===this.props.config.columnEditType&&(this.int_char=l.ZP.getElementWithRegex(/#(\D)#/,this.props.config.format)||"",this.decimal_char=l.ZP.getElementWithRegex(/#(\D)0/,this.props.config.format)||"",this.decimal_length=this.props.config.decimal_length,""!==this.decimal_char&&this.decimal_char!==this.int_char||(this.decimal_length=0)),this.state={valueLogicDefault:"currency"===this.props.config.columnEditType?(0,D.Nx)(this.props.data,this.decimal_length,this.int_char,this.decimal_char,!1)||"":this.props.data,valueChange:"currency"===this.props.config.columnEditType?(0,D.Nx)(this.props.data,this.decimal_length,this.int_char,this.decimal_char,!1)||"":this.props.data,isUpdate:!1,end_pos:-1,start_pos:0}}getValueCurrency(e){return void 0===e&&(e=this.state.valueLogicDefault),(0,D.XG)(e,this.int_char,this.decimal_char)}getValueReturn(e){switch(this.props.config.columnEditType){case"number":return""===e||null===e||void 0===e?"":Number(e);case"currency":return this.getValueCurrency(e);default:return e}}componentDidUpdate(e){if(void 0!==e.data&&void 0!==this.props.data&&this.props.data!==e.data){let e=!1,{valueLogicDefault:t,valueChange:i}=this.state,o="currency"===this.props.config.columnEditType?(0,D.Nx)(this.props.data,this.decimal_length,this.int_char,this.decimal_char,!1)||"":this.props.data;o!==i&&(i=o,t=o,e=!0),this.setState({valueLogicDefault:t,valueChange:i,isUpdate:e})}}render(){var e;const t=(0,a.RP)("uTableColumnEditInput");return(0,s.jsx)(t,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.state.valueChange,dataItem:this.props.dataItem,isUpdate:this.state.isUpdate,abs_Change:this.handleChangeValue,abs_Submit:this.handleSubmit,abs_Cancel:this.handleCancel,abs_KeyDown:this.setLastPost,cmd:{disable:"true"===String(null===(e=this.props.cmd)||void 0===e?void 0:e.disabled)},default:{textAlign:"number"===this.props.config.columnEditType||"currency"===this.props.config.columnEditType?"right":"left"},config:{isResize:this.props.config.isResize}}})}}const w=O;class C extends o.Component{getStatusIconStep(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S"){case"S":return"check_circle";case"F":return"remove_circle";case"N":return"add_circle";case"R":return"trending_up";default:return""}}getStatusColorStep(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S"){case"S":return"success";case"F":return"danger";default:return"info"}}render(){const e=(0,a.RP)("uTableColumnIcon");return(0,s.jsx)(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:[{val:this.getStatusIconStep(this.props.data),color:this.getStatusColorStep(this.props.data),title:"warning",class:"-round"}],config:{mode:"left"}}})}}const x=C,S={number:/[^\d/]/g,string:/[^a-zA-Z ]/g,free_style:/[^a-zA-Z\d]/g};class M extends o.Component{constructor(e){super(e),this.setLastPost=e=>{let t=e.target;this.state.start_pos=t.selectionStart,this.state.end_pos=t.selectionEnd},this.setPos=(e,t)=>{e.selectionStart=t,e.selectionEnd=t},this.handleChangeValue=(e,t,i,o)=>{const a=e.target;let s=a.selectionStart,n=a.value||"";if("currency"===this.props.config.columnEditType){let t=e.target;const{selectionStart:i,value:o}=t,{decimal_char:a,int_char:s,decimal_length:n}=this,r=this.state.valueChange;let l=o;if(l.includes("-")&&!1===this.isNegative)return void this.setState({value:r},(()=>{t.setSelectionRange(0,0)}));if(r.includes(a)&&!o.includes(a)&&a){let e=r.lastIndexOf(a);l=o.substring(0,e)+a+o.substring(e,o.length),l===a&&(l="")}let c=r,d=o.lastIndexOf(a);o.indexOf(a)!==o.lastIndexOf(a)&&a?d=c.length-n:(c=(0,D.Nx)(l,n,s,a,!1)||"",d=i-(o.length-c.length),1===i?d=1:(i>o.lastIndexOf(a)||o[d]===this.int_char)&&(d+=1));let h=c.replace(/\D/g,"");const u=this.props.config.max_length||15;if(h.length>Number(u)&&Number(u)>0){let e=h.length-Number(u);if(i<=c.lastIndexOf(a)-1){let t=i;c[i]===this.int_char&&t++,h=(c.substring(0,t)+c.substring(t+e,c.length)).replace(/\D/g,""),l=h.substring(0,h.length-n)+a+h.substring(h.length-n,h.length),c=(0,D.Nx)(l,n,s,a,!1)||""}else c=r}this.setState({valueChange:c,isChange:!0},(()=>{t.setSelectionRange(d,d)}))}else S[this.props.config.columnEditType]?(n=n.replace(S[this.props.config.columnEditType],""),this.setState({valueChange:n},(()=>{this.setPos(a,s)}))):this.setState({valueChange:n},(()=>{this.setPos(a,s)}))},this.handleSubmit=(e,t,i)=>{let{valueChange:o}=this.state,a=this.getValueReturn(o);"number"!==this.props.config.columnEditType&&"currency"!==this.props.config.columnEditType||(this.props.config.minValue&&parseFloat(a)<parseFloat(this.props.config.minValue)&&(a=0),this.props.config.maxValue&&parseFloat(a)>parseFloat(this.props.config.maxValue)&&(a=0)),0===a?this.setState({valueLogicDefault:"currency"===this.props.config.columnEditType?(0,D.Nx)(a,this.decimal_length,this.int_char,this.decimal_char,!1):a,valueChange:"currency"===this.props.config.columnEditType?(0,D.Nx)(a,this.decimal_length,this.int_char,this.decimal_char,!1):a},(()=>{this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:a,dataItem:e})})):this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:a,dataItem:e})},this.handleCancel=(e,t,i)=>{this.setState({valueChange:this.state.valueLogicDefault})},"currency"===this.props.config.columnEditType&&(this.int_char=l.ZP.getElementWithRegex(/#(\D)#/,this.props.config.format)||"",this.decimal_char=l.ZP.getElementWithRegex(/#(\D)0/,this.props.config.format)||"",this.decimal_length=this.props.config.decimal_length,""!==this.decimal_char&&this.decimal_char!==this.int_char||(this.decimal_length=0)),this.state={valueLogicDefault:"currency"===this.props.config.columnEditType?(0,D.Nx)(this.props.data,this.decimal_length,this.int_char,this.decimal_char,!1)||"":this.props.data,valueChange:"currency"===this.props.config.columnEditType?(0,D.Nx)(this.props.data,this.decimal_length,this.int_char,this.decimal_char,!1)||"":this.props.data,isUpdate:!1,end_pos:-1,start_pos:0}}getValueCurrency(e){return void 0===e&&(e=this.state.valueLogicDefault),(0,D.XG)(e,this.int_char,this.decimal_char)}getValueReturn(e){switch(this.props.config.columnEditType){case"number":return""===e||null===e||void 0===e?"":Number(e);case"currency":return this.getValueCurrency(e);default:return e}}componentDidUpdate(e){if(void 0!==e.data&&void 0!==this.props.data&&this.props.data!==e.data){let e=!1,{valueLogicDefault:t,valueChange:i}=this.state,o="currency"===this.props.config.columnEditType?(0,D.Nx)(this.props.data,this.decimal_length,this.int_char,this.decimal_char,!1)||"":this.props.data;o!==i&&(i=o,t=o,e=!0),this.setState({valueLogicDefault:t,valueChange:i,isUpdate:e})}}render(){var e,t;const i=(0,a.RP)("uTableColumnEditInputWithHistory");return(0,s.jsx)(i,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.state.valueChange,dataItem:this.props.dataItem,isUpdate:this.state.isUpdate,abs_Change:this.handleChangeValue,abs_Submit:this.handleSubmit,abs_Cancel:this.handleCancel,abs_KeyDown:this.setLastPost,cmd:{disable:"true"===String(null===(e=this.props.cmd)||void 0===e?void 0:e.disabled)},default:{textAlign:"number"===this.props.config.columnEditType||"currency"===this.props.config.columnEditType?"right":"left"},config:{isResize:this.props.config.isResize},abs_ClickHistory:this.props.abs_ClickHistory,history:{isShow:null===(t=this.props.cmd)||void 0===t?void 0:t.isShowHistory,before_value:this.props.before_value}}})}}const P=M;class T extends o.Component{constructor(){super(...arguments),this.onChange=e=>{this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:e});const t=this.props.tableContext.props;l.ZP.getFormAppAuto(t.infoA.key_form).runRuleFunction(t.default,{value:e,rown_data:this.props.rowData},t.infoA_parent,"checked")}}render(){var e,t,i;const o=(null===(e=this.props)||void 0===e||null===(t=e.tableContext)||void 0===t||null===(i=t.state)||void 0===i?void 0:i.CMD)||{};let n=(0,a.RP)("uTableColumnCheckbox");return(0,s.jsx)(n,{dataFull:{title_parent:this.props.title_parent,value:!!this.props.data,config:{cmd:{disable:!0===o.disabled}},abs_Click:(e,t)=>{this.onChange(!t)}}})}}const I=T,N={Normal:"active",Draft:"default",Editing:"warning","Require NRC change":"success",Close:"danger",Block:"purple"};class F extends o.Component{constructor(e){super(e),this.getDataTemplate=()=>{let e=String(this.props.data);return this.config[e]?{title:this.config[e].lang,type:this.config[e].type}:{title:this.props.data,type:N[this.props.data]}},this.config=this.props.config}render(){const e=(0,a.RP)("uTableColumnAction");return(0,s.jsx)(e,{dataFull:{title_parent:this.props.title_parent,data:this.getDataTemplate(),config:{isFrozen:!1}}})}}const L=F;class E extends o.Component{constructor(e){var t,i;super(e),this.getCaptionLang=e=>{if(0===Object.keys(this.CDLIST_BUILD).length&&this.CDLIST_BUILD.constructor===Object){var t,i;let e=(null===(t=this.props.config)||void 0===t?void 0:t.cdgrp)||"",o=(null===(i=this.props.config)||void 0===i?void 0:i.cdname)||"",a=l.ZP.data_cdList(e,o,!0);this.CDLIST_BUILD={};for(const t of a){let e=t.c_cdlist.mcaption||{},i=t.c_cdlist.caption||"";this.CDLIST_BUILD[t.c_cdlist.cdid]=t.c_cdlist={mcaption:e,caption:i}}}let o=this.CDLIST_BUILD[e]||{},a=(null===o||void 0===o?void 0:o.mcaption)||{},s=(null===o||void 0===o?void 0:o.caption)||"";return a[l.ZP.getLangKey()]||s};let o=(null===(t=e.config)||void 0===t?void 0:t.cdgrp)||"",a=(null===(i=e.config)||void 0===i?void 0:i.cdname)||"",s=l.ZP.data_cdList(o,a,!0);this.CDLIST_BUILD={};for(const n of s){let e=n.c_cdlist.mcaption||{},t=n.c_cdlist.caption||"";this.CDLIST_BUILD[n.c_cdlist.cdid]=n.c_cdlist={mcaption:e,caption:t}}}render(){const e=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:null===this.props.data?"":this.getCaptionLang(this.props.data),config:{mode:"left"}}})}}const j=E;class Z extends o.Component{constructor(e){var t,i;super(e),this.getCaptionLang=e=>{const t=this.CDLIST_BUILD[e]||{};let i=(null===t||void 0===t?void 0:t.mcaption)||{},o=(null===t||void 0===t?void 0:t.caption)||"";return i[l.ZP.getLangKey()]||o},this.abs_Change=(e,t,i,o,a,s)=>{let{data_view:n,value_select:r,item_select:l}=this.state,c=n.filter((e=>!0===e.selected));c.length>0&&(c[0].selected=!1);let d=n.filter(((e,t)=>t===s));d.length>0&&(d[0].selected=!0,r=l=d[0].value,this.setState({data_view:n,value_select:r,item_select:l},(()=>{this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:this.state.value_select})})))};const o=(null===(t=e.config)||void 0===t?void 0:t.cdgrp)||"",a=(null===(i=e.config)||void 0===i?void 0:i.cdname)||"";this.C_CDLISTS=l.ZP.data_cdList(o,a,!0),this.CDLIST_BUILD={};for(const s of this.C_CDLISTS){let t=s.c_cdlist.mcaption||{},i=s.c_cdlist.caption||"",o=s.c_cdlist.cdid;this.CDLIST_BUILD[s.c_cdlist.cdid]=s.c_cdlist={mcaption:t,caption:i,cdid:o},s.selected=s.c_cdlist.cdid===e.data}this.state={data_view:this.C_CDLISTS,item_select:e.data,value_select:this.getCaptionLang(e.data),isUpdate:!1}}componentDidUpdate(e){if(void 0!==e.data&&void 0!==this.props.data&&this.props.data!==e.data){let e=!1,{item_select:t,value_select:i}=this.state;this.props.data!==t&&(t=this.props.data,i=this.getCaptionLang(this.props.data),e=!0),this.setState({item_select:t,value_select:i,isUpdate:e})}}render(){var e,t;const i=(0,a.RP)("uTableColumnEditSelect");return(0,s.jsx)(i,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,value:this.state.value_select,data:null===(e=this.state.data_view)||void 0===e?void 0:e.map(((e,t)=>(e.title=this.getCaptionLang(e.c_cdlist.cdid),e.value=e.c_cdlist.cdid,e))),config:{mode:"number"===typeof this.props.data?"right":"left"},isUpdate:this.state.isUpdate,cmd:{disable:"true"===String(null===(t=this.props.cmd)||void 0===t?void 0:t.disabled)},abs_Change:this.abs_Change}})}}const R=Z;class Q extends o.Component{render(){const e=(0,a.RP)("uTableColumnProgressBar");return(0,s.jsx)(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,percent:this.props.data?parseInt(this.props.data):0,config:{mode:"left"}}})}}const z=Q;class U extends o.Component{getStringHtml(){return this.props.data.replace(/\n/gm,"<br/>")}render(){const e=(0,a.RP)("uTableColumnHtmlDanger");return(0,s.jsx)(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:null===this.props.data||""===this.props.data?"":this.getStringHtml()}})}}const B=U;class Y extends o.Component{getData(){let e=this.getStringCalculator(),t=l.ZP.paramStringCaculator(e);return 0===t||t?Number.isNaN(Number(t))?"":String(Number(t)):""}getStringCalculator(){let e=this.props.config.calculator,t=l.ZP.getlistCodeContext(e);for(const o of t){let t=l.ZP.context_get(o.code)||"";e=e.replace(o.key,t)}let i=l.ZP.component_getListCode(this.props.config.calculator);for(let o of i){let t=this.getNodeJson(this.props.rowData,o.code);null!==t&&void 0!==t||(t=""),"object"===typeof t&&(t=JSON.stringify(t)),e=e.replace(o.key,t)}return e}getNodeJson(e,t){if("object"!==typeof e||!t)return;let i=t.split("."),o=e;for(const a of i){if(void 0===o||null===o)return;o=o[a]}return o}render(){const e=(0,a.RP)("uTableColumnDefault");return(0,s.jsx)(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.getData(),config:{mode:"right"}}})}}const H=Y;class V extends o.Component{render(){const e=(0,a.RP)("uTableColumnHiddenText");return(0,s.jsx)(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:null===this.props.data||""===this.props.data?"":"object"===typeof this.props.data?JSON.stringify(this.props.data):String(this.props.data),title_lang:{title_copy:l.ZP.getLang("btn_copy"),title_view:l.ZP.getLang("btn_view"),title_hide:l.ZP.getLang("btn_hide")},abs_Copy:e=>{l.ZP.copyToClipboard(this.props.data)}}})}}const W={ColumnInputEditHistory:P,ColumnProgressBar:z,ColumnHiddenText:V,ColumnImg:_,ColumnMask:m,ColumnLang:b,ColumnCurrency:A,ColumnInputEdit:w,ColumnString:r,ColumnDefault:r,ColumnStatus:d,ColumnNumber:u,columnImg:_,columnMask:m,columnLang:b,columnCurrency:A,ColumnCheckbox:I,ColumnStatusTitle:L,ColumnCdlist:j,ColumnHtmlDanger:B,columnInputEdit:w,ColumnSelectEdit:R,ColumnCalculator:H,ColumnIcon:x}},5258:(e,t,i)=>{"use strict";i.d(t,{y:()=>o});class o{constructor(e){this.setPassword=e=>(this.rebuildPassword(e),this.pwd_display),this.getPasswordDecode=()=>this.decodePassword(this.pwd_encode),this.getPasswordDisplay=()=>this.pwd_display,this.props=e,this.pwd_encode="",this.pwd_display=""}rebuildPassword(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=String(e);let t=0,i=this.decodePassword(this.pwd_encode),o="";for(const a of e)"\u2022"===a?(o+=i[t]||"",t++):o+=a;this.pwd_encode=this.encodePassword(o),this.pwd_display=e.replace(/./g,"\u2022")}encodePassword(e){let t="";for(let i of e){let e=i.charCodeAt(0);t+=String.fromCharCode(2*e)}return t}decodePassword(e){let t="";for(let i of e){let e=i.charCodeAt(0);t+=String.fromCharCode(e/2)}return t}}},9431:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const o=class{constructor(){this.changeNumericToWords=(e,t,i,o,a)=>{let s=e.toString();return s.indexOf(".")>s.length-3&&(s=parseFloat(s).toFixed(2)),this.changeToWords(s,!1,t,i,o,a)},this.changeCurrencyToWords=(e,t,i,o,a)=>(e.indexOf(".")>e.length-3&&(e=parseFloat(e).toFixed(2)),""!==o&&void 0!==o&&null!==o?this.changeToWords(e,!0,o,a,o,a):this.changeToWords(e,!0,t,i,o,o)),this.changeCurrencyToWords=(e,t,i)=>(e.indexOf(".")>e.length-3&&(e=parseFloat(e).toFixed(2)),this.changeToWords(e,!0,t,i,"","")),this.changeNumericToWords=(e,t,i,o,a)=>(e.indexOf(".")>e.length-3&&(e=parseFloat(e).toFixed(2)),this.changeToWords(e,!1,t,i,o,a)),this.changeCurrencyToWords=(e,t,i)=>(e.indexOf(".")>e.length-3&&(e=parseFloat(e).toFixed(2)),this.changeToWords(e.toString(),!0,t,i,"","")),this.changeCurrencyToWords=(e,t,i,o,a,s)=>{let n=e.toString();return n.indexOf(".")>n.length-3&&(n=parseFloat(n).toFixed(2)),s?this.changeToWordsCents(n,!0,t,i,o,o):""!==o&&void 0!==o&&null!==o?this.changeToWords(n,!0,o,a,o,a):this.changeToWords(n,!0,t,i,o,o)},this.changeToWords=(e,t,i,o,a,s)=>{let n="",r=e,l="",c="",d="",h=i;try{let a=e.indexOf(".");if(a>0){r=e.substring(0,a),parseFloat(r)<=1&&(h=o),l=e.substring(a+1),parseInt(l)>0?(c=t?"and":"point",d=this.translateWholeNumber(l)+this.translateNameCents(h)):(c="only",d="")}else c="only",d="";let s=this.translateWholeNumber(r).trim();" Kyat/ Kyat"!==i&&"Zero"===s&&(s=""),n=s+" "+this.translateNameCurrency(i)+" "+c+" "+d," Kyat/ Kyat"!==i&&(n=n.toLowerCase()),n=n.substring(0,1).toUpperCase()+n.substring(1,n.length),n=n.trim()}catch(u){}return n},this.changeToWordsCents=(e,t,i,o,a,s)=>{let n="",r=e,l="",c="",d="",h=i;try{let i=e.indexOf(".");if(i>0){r=e.substring(0,i),parseFloat(r)<=1&&(h=o),l=e.substring(i+1),parseInt(l),c=t?"and":"point",d=this.translateCents(l)}else c=t?"and":"point",d=this.translateCents(l);n=this.translateWholeNumberCents(r).trim()+" "+c+" "+d+" "+h,n=n.substring(0,1).toUpperCase()+n.substring(1,n.length),n=n.trim()}catch(u){}return n},this.translateNameCents=e=>{let t=" "+e.split("/")[0];try{switch(e){case"THB":t=" satang";break;case"USD":t=" cent(s)"}}catch(i){}return t},this.translateNameCurrency=e=>{let t=e.split("/")[0];try{switch(e){case"USD":t="Dollars";break;case"KHR":t="Riels";break;case"THB":t="Baht";break;case"EUR":t="Euro";break;case"GBG":t="Pound Sterling";break;case"CNY":t="Yuan Renminbi";break;case"HKD":t="HongKongDollar";break;case"JPY":t="Yen";break;case"LAK":t="Kip";break;case"SGD":t="Singapore Dollar";break;case"Pay/ Pay":t=""}}catch(i){}return t.trim()},this.translateWholeNumberCents=e=>{let t="";try{let i=!1,o=!1;if(parseFloat(e)>0){i=e.startsWith("0");let a=e.length,s=0,n="";switch(a){case 1:t=this.ones(e),o=!0;break;case 2:t=this.tens(e),o=!0;break;case 3:s=a%3+1,n=" Hundred ";break;case 4:case 5:case 6:s=a%4+1,n=" Thousand ";break;case 7:case 8:case 9:s=a%7+1,n=" Million ";break;case 10:case 11:case 12:s=a%10+1,n=" Billion ";break;default:o=!0}if(!o){let o=this.translateWholeNumberCents(e.toString().substring(0,s));null!==o&&""!==o&&(o=this.translateWholeNumberCents(e.toString().substring(0,s))+n),t=o+this.translateWholeNumberCents(e.toString().substring(s)),i&&(t=t.trim())}t.trim().equals(n.trim())&&(t="")}}catch(i){}return t.trim()},this.translateWholeNumber=e=>{let t="";try{let i=!1,o=!1,a=parseFloat(e);if(0===a)t="Zero";else if(a>0){i=e.startsWith("0");let a=e.length,s=0,n="";switch(a){case 1:t=this.ones(e),o=!0;break;case 2:t=this.tens(e),o=!0;break;case 3:s=a%3+1,n=" hundred ";break;case 4:case 5:case 6:s=a%4+1,n=" thousand ";break;case 7:case 8:case 9:s=a%7+1,n=" million ";break;case 10:case 11:case 12:s=a%10+1,n=" billion ";break;default:o=!0}if(!o){let o=this.translateWholeNumber(e.toString().substring(0,s));null!==o&&""!==o&&(o=this.translateWholeNumber(e.toString().substring(0,s))+n),t=o+this.translateWholeNumber(e.toString().substring(s)),i&&(t=t.trim())}t.trim().equals(n.trim())&&(t="")}}catch(i){}return t.trim()},this.tens=e=>{let t=parseInt(e),i="";switch(t){case 10:i="Ten";break;case 11:i="Eleven";break;case 12:i="Twelve";break;case 13:i="Thirteen";break;case 14:i="Fourteen";break;case 15:i="Fifteen";break;case 16:i="Sixteen";break;case 17:i="Seventeen";break;case 18:i="Eighteen";break;case 19:i="Nineteen";break;case 20:i="Twenty";break;case 30:i="Thirty";break;case 40:i="Forty";break;case 50:i="Fifty";break;case 60:i="Sixty";break;case 70:i="Seventy";break;case 80:i="Eighty";break;case 90:i="Ninety";break;default:t>0&&(i=this.tens(e.substring(0,1)+"0")+" "+this.ones(e.substring(1)))}return i.toLowerCase()},this.ones=e=>{let t="";switch(parseInt(e)){case 1:t="One";break;case 2:t="Two";break;case 3:t="Three";break;case 4:t="Four";break;case 5:t="Five";break;case 6:t="Six";break;case 7:t="Seven";break;case 8:t="Eight";break;case 9:t="Nine"}return t},this.translateCents=e=>{let t="";return null===e||0===e.length?t="00/100":1===e.length?t=e+"0/100":e.length<=2?t=e+"/100":3===e.length?t=e+"/1000":4===e.length&&(t=e+"/10000"),t}}}},9664:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const o=class{constructor(){this.changeNumericToWords=(e,t,i,o,a)=>{let s=e.toString();return this.changeToWords(s,!1,t,i,o,a)},this.changeCurrencyToWords=(e,t,i,o,a)=>""!==o&&void 0!==o&&null!==o?this.changeToWords(e,!0,o,a,o,a):this.changeToWords(e,!0,t,i,o,o),this.changeCurrencyToWords=(e,t,i)=>this.changeToWords(e,!0,t,i,"",""),this.changeNumericToWords=(e,t,i,o,a)=>this.changeToWords(e,!1,t,i,o,a),this.changeCurrencyToWords=(e,t,i)=>this.changeToWords(e.toString(),!0,t,i,"",""),this.changeCurrencyToWords=(e,t,i,o,a,s)=>{let n=e.toString();return s?this.changeToWordsCents(n,!0,t,i,o,o):""!==o&&void 0!==o&&null!==o?this.changeToWords(n,!0,o,a,o,a):this.changeToWords(n,!0,t,i,o,o)},this.changeToWords=(e,t,i,o,a,s)=>{let n="",r=e,l="",c="",d="";try{let o=e.indexOf(".");o>0?(r=e.substring(0,o),l=e.substring(o+1),parseInt(l)>0&&(c=t?" ":"point",d=this.readCurrency(i))):(c=t?" ":"point",d=this.readCurrency(i)),n=this.translateWholeNumber(r).trim()+c+d,n=n.trim()}catch(h){}return n},this.readCurrency=e=>{let t=" "+e.split("/")[0];try{switch(e){case"USD":t="Dollars";break;case"MMK":t="Pya";break;case"LAK":t="Kip";break;case"EUR":t="Euro";break;case"SGP":t="Singapore dollar";break;case"THB":t="Baht";break;case"KHR":t="Riel";break;case"VND":t="VN \u0111\u1ed3ng";break;case"HKD":t="HongKong Dollars"}}catch(i){}return t},this.translateWholeNumber=e=>{let t="";try{let i=!1,o=!1;if(parseFloat(e)>0){i=e.startsWith("0");let a=e.length,s=0,n="";switch(a){case 1:t=this.ones(e),o=!0;break;case 2:t=this.tens(e),o=!0;break;case 3:s=a%3+1,n=" Hundred ";break;case 4:case 5:case 6:s=a%4+1,n=" Thousand ";break;case 7:case 8:case 9:s=a%7+1,n=" Million ";break;case 10:s=a%10+1,n=" Billion ";break;default:o=!0}if(!o){let o=this.translateWholeNumber(e.toString().substring(0,s));null!==o&&""!==o&&(o=this.translateWholeNumber(e.toString().substring(0,s))+n),t=o+this.translateWholeNumber(e.toString().substring(s)),i&&(t=t.trim())}t.trim().equals(n.trim())&&(t="")}}catch(i){}return t.trim()},this.tens=e=>{let t=parseInt(e),i="";switch(t){case 10:i="Ten";break;case 11:i="Eleven";break;case 12:i="Twelve";break;case 13:i="Thirteen";break;case 14:i="Fourteen";break;case 15:i="Fifteen";break;case 16:i="Sixteen";break;case 17:i="Seventeen";break;case 18:i="Eighteen";break;case 19:i="Nineteen";break;case 20:i="Twenty";break;case 30:i="Thirty";break;case 40:i="Forty";break;case 50:i="Fifty";break;case 60:i="Sixty";break;case 70:i="Seventy";break;case 80:i="Eighty";break;case 90:i="Ninety";break;default:t>0&&(i=this.tens(e.substring(0,1)+"0")+" "+this.ones(e.substring(1)))}return i},this.ones=e=>{let t="";switch(parseInt(e)){case 1:t="One";break;case 2:t="Two";break;case 3:t="Three";break;case 4:t="Four";break;case 5:t="Five";break;case 6:t="Six";break;case 7:t="Seven";break;case 8:t="Eight";break;case 9:t="Nine"}return t},this.translateCents=e=>{let t="";return null===e||0===e.length?t="00/100":1===e.length?t=e+"0/100":e.length<=2?t=e+"/100":3===e.length?t=e+"/1000":4===e.length&&(t=e+"/10000"),t}}}},7210:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _lib_libSupport__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5842),_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(418),_NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9431),_NumberToEnglish_SBILH__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9664),_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6633);const _space='<div style="padding-right:24px"></div>',_space_small='<div style="padding-right:8px"></div>';class functionDynamic{constructor(){this.checkRenderThead_O9=(e,t)=>{let i=this.ob_data[e.data]||[],o=!1;for(let a=0;a<i.length;a++)if("A3"!==i[a].prn){o=!0;break}return i.length>0&&o?"<div>Acc</div><div>Name</div><div>CRC</div><div>Amount DR</div><div>Amount CR</div>":""},this.checkRender=(e,t)=>{let i=e.data,o=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.getNodeJson(this.ob_data,i);return o&&o.length>0?t:""},this.date_format=(e,t)=>t?(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(t).getTime(),e.mark):"",this.getCUSTACNO_A1=(e,t)=>{let i=this.ob_data_voucher.A1,o=i.transaction_body.account_number,a="";return"PMT_IITT"!==i.transaction_code&&"PMT_IIT"!==i.transaction_code&&"PMT_IDT"!==i.transaction_code||(o=i.transaction_body.racno),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||(o=i.transaction_body.sacno),""!==o&&void 0!==o||""===i.transaction_body.account_number||void 0===i.transaction_body.account_number||(o=i.transaction_body.account_number),void 0!==o&&null!==o&&(o=o.replace("-",""),o=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},o),"DPT_TRF"!==i.transaction_code&&"DPT_CDT"!==i.transaction_code||(a=i.transaction_body.pdoacc,a=a.replace("-",""),o+=_space+"Credit A/C No:  "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},a),o+=_space+i.transaction_body.caccount_name2)),o||""},this.checkNumberZero=(e,t)=>0===t||"0"===t?"":_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},t.toString()),this.getTotal_A801=(e,t)=>{let i=this.ob_data_voucher.A801,o=i.transaction_body.psamt||0,a=i.transaction_body.cfamt||0,s=i.transaction_body.cvat||0;return _functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o+a+s,2).toString())},this.getTotal_A802=(e,t)=>{let i=this.ob_data_voucher.A802,o=i.transaction_body.pramt||0,a=i.transaction_body.cfamt||0,s=i.transaction_body.cvat||0;return _functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o-a-s,2).toString())},this.getTotal_A803=(e,t)=>{let i=this.ob_data_voucher.A803,o=i.transaction_body.psamt||0,a=i.transaction_body.cfamt||0;return _functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o+a,2).toString())},this.getTXINFO1_A2=(e,t)=>{let i=this.ob_data_voucher.A2,o=i.transaction_body.account_number;if("PMT_IITT"!==i.transaction_code&&"PMT_IIT"!==i.transaction_code&&"PMT_IDT"!==i.transaction_code||""!==i.transaction_body.racno&&void 0!==i.transaction_body.racno&&null!==i.transaction_body.racno&&(o=i.transaction_body.racno),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||""!==i.transaction_body.sacno&&void 0!==i.transaction_body.sacno&&null!==i.transaction_body.sacno&&(o=i.transaction_body.sacno),void 0!==o&&null!==o&&""!==o){let e=o.replace("-","");o=15===e.length?"Cust. A/C No. "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},e):"Cust. A/C No. "+o,""===i.transaction_body.account_name||void 0===i.transaction_body.account_name||Array.isArray(i.transaction_body.account_name)?""!==i.transaction_body.customer_name&&void 0!==i.transaction_body.customer_name&&(o+=_space_small+i.transaction_body.customer_name):o+=_space_small+i.transaction_body.account_name,""!==i.branch_name&&void 0!==i.branch_name&&(o+=_space_small+"Branch:  "+i.branch_name),""!==i.transaction_date&&void 0!==i.transaction_date&&(o+=_space_small+(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(i.transaction_date).getTime(),"DD/MM/YYYY HH:mm:ss"))}return o||""},this.getTXINFO2_A2=(e,t)=>{let i="",o=this.ob_data_voucher.A2;return""!==o.transaction_refid&&void 0!==o.transaction_refid&&(i+="Ref: "+o.transaction_refid+_space_small),""!==o.transaction_body.system_user_code&&void 0!==o.transaction_body.system_user_code&&(i+="Teller ID: "+o.transaction_body.system_user_code+_space_small),""!==o.transaction_code&&void 0!==o.transaction_code&&(i+="Tran code:  "+o.transaction_code),i},this.getTXINFO2_A2Y=(e,t)=>{let i="",o=this.ob_data_voucher.A2;""!==o.transaction_refid&&void 0!==o.transaction_refid&&(i+="Ref: "+o.transaction_refid+_space_small),""!==o.transaction_body.system_user_code&&void 0!==o.transaction_body.system_user_code&&(i+="Teller ID: "+o.transaction_body.system_user_code+_space_small),""!==o.transaction_code&&void 0!==o.transaction_code&&(i+="Tran code:  "+o.transaction_code+_space_small);let a="";return""!==o.transaction_body.other_currency&&void 0!==o.transaction_body.other_currency?a=o.transaction_body.other_currency:""!==o.transaction_body.currency_code&&void 0!==o.transaction_body.currency_code&&(a=o.transaction_body.currency_code),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||(a=o.transaction_body.rccr),0!==o.transaction_body.account_amount&&void 0!==o.transaction_body.account_amount&&(i+=a+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.account_amount.toString())),"PMT_IITT"!==o.transaction_code&&"PMT_IIT"!==o.transaction_code&&"PMT_IDT"!==o.transaction_code||0!==o.transaction_body.psamt&&void 0!==o.transaction_body.psamt&&(i+=a+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.psamt.toString())),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||0!==o.transaction_body.pramt&&void 0!==o.transaction_body.pramt&&(i+=a+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.pramt.toString())),i},this.getTXDESCR_A2=(e,t)=>{let i=this.ob_data_voucher.A2,o="",a="";return""!==i.transaction_body.other_currency&&void 0!==i.transaction_body.other_currency&&null!==i.transaction_body.other_currency?o=i.transaction_body.other_currency:""!==i.transaction_body.currency_code&&void 0!==i.transaction_body.currency_code&&(o=i.transaction_body.currency_code),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||(o=i.transaction_body.rccr),0!==i.transaction_body.account_amount&&void 0!==i.transaction_body.account_amount&&(a=o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.account_amount.toString())),"PMT_IITT"!==i.transaction_code&&"PMT_IIT"!==i.transaction_code&&"PMT_IDT"!==i.transaction_code||0!==i.transaction_body.psamt&&void 0!==i.transaction_body.psamt&&(a=o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.psamt.toString())),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||0!==i.transaction_body.pramt&&void 0!==i.transaction_body.pramt&&(a=o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.pramt.toString())),a},this.getTxInfo_A2C=(e,t)=>{let i=e.line,o=this.ob_data_voucher.A2;if("1"===i){let e=o.transaction_body.account_number;if("PMT_IITT"!==o.transaction_code&&"PMT_IIT"!==o.transaction_code&&"PMT_IDT"!==o.transaction_code||""!==o.transaction_body.racno&&void 0!==o.transaction_body.racno&&null!==o.transaction_body.racno&&(e=o.transaction_body.racno),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||""!==o.transaction_body.sacno&&void 0!==o.transaction_body.sacno&&null!==o.transaction_body.sacno&&(e=o.transaction_body.sacno),void 0!==e&&null!==e&&""!==e){let t=e.replace("-","");e=15===t.length?"Cust. A/C No. "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},t):"Cust. A/C No. "+e,""===o.transaction_body.account_name||void 0===o.transaction_body.account_name||Array.isArray(o.transaction_body.account_name)?""!==o.transaction_body.caccount_name&&void 0!==o.transaction_body.caccount_name&&(e+=_space_small+o.transaction_body.caccount_name):e+=_space_small+o.transaction_body.account_name,""!==o.branch_name&&void 0!==o.branch_name&&(e+=_space_small+"Branch:  "+o.branch_name),""!==o.transaction_date&&void 0!==o.transaction_date&&(e+=_space_small+(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(o.transaction_date).getTime(),"DD/MM/YYYY HH:mm:ss"))}return e||""}if("2"===i){let e="";""!==o.transaction_refid&&void 0!==o.transaction_refid&&(e+="Ref: "+o.transaction_refid+_space_small),""!==o.transaction_body.system_user_code&&void 0!==o.transaction_body.system_user_code&&(e+="Teller ID: "+o.transaction_body.system_user_code+_space_small),""!==o.transaction_code&&void 0!==o.transaction_code&&(e+="Tran code:  "+o.transaction_code+_space_small);let t="";return""!==o.transaction_body.other_currency&&void 0!==o.transaction_body.other_currency?t=o.transaction_body.other_currency:""!==o.transaction_body.currency_code&&void 0!==o.transaction_body.currency_code&&(t=o.transaction_body.currency_code),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||(t=o.transaction_body.rccr),0!==o.transaction_body.account_amount&&void 0!==o.transaction_body.account_amount&&(e+=t+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.account_amount.toString())),"PMT_IITT"!==o.transaction_code&&"PMT_IIT"!==o.transaction_code&&"PMT_IDT"!==o.transaction_code||0!==o.transaction_body.psamt&&void 0!==o.transaction_body.psamt&&(e+=t+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.psamt.toString())),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||0!==o.transaction_body.pramt&&void 0!==o.transaction_body.pramt&&(e+=t+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.pramt.toString())),e}},this.getTxInfo_A2D=(e,t)=>{let i=e.line,o=this.ob_data_voucher.A2;if("1"===i){let e=o.transaction_body.account_number;if("PMT_IITT"!==o.transaction_code&&"PMT_IIT"!==o.transaction_code&&"PMT_IDT"!==o.transaction_code||""!==o.transaction_body.racno&&void 0!==o.transaction_body.racno&&null!==o.transaction_body.racno&&(e=o.transaction_body.racno),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||""!==o.transaction_body.sacno&&void 0!==o.transaction_body.sacno&&null!==o.transaction_body.sacno&&(e=o.transaction_body.sacno),void 0!==e&&null!==e&&""!==e){let t=e.replace("-","");e=15===t.length?"Cust. A/C No. "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},t):"Cust. A/C No. "+e,""===o.transaction_body.account_name||void 0===o.transaction_body.account_name||Array.isArray(o.transaction_body.account_name)?""!==o.transaction_body.caccount_name&&void 0!==o.transaction_body.caccount_name&&(e+=_space_small+o.transaction_body.caccount_name):e+=_space_small+o.transaction_body.account_name,""!==o.branch_name&&void 0!==o.branch_name&&(e+=_space_small+"Branch:  "+o.branch_name),""!==o.transaction_date&&void 0!==o.transaction_date&&(e+=_space_small+(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(o.transaction_date).getTime(),"DD/MM/YYYY HH:mm:ss"))}return e||""}if("2"===i){let e="";""!==o.transaction_refid&&void 0!==o.transaction_refid&&(e+="Ref: "+o.transaction_refid+_space_small),""!==o.transaction_body.system_user_code&&void 0!==o.transaction_body.system_user_code&&(e+="Teller ID: "+o.transaction_body.system_user_code+_space_small),""!==o.transaction_code&&void 0!==o.transaction_code&&(e+="Tran code:  "+o.transaction_code+_space_small);let t="";return""!==o.transaction_body.other_currency&&void 0!==o.transaction_body.other_currency?t=o.transaction_body.other_currency:""!==o.transaction_body.currency_code&&void 0!==o.transaction_body.currency_code&&(t=o.transaction_body.currency_code),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||(t=o.transaction_body.rccr),0!==o.transaction_body.account_amount&&void 0!==o.transaction_body.account_amount&&(e+=t+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.account_amount.toString())),"PMT_IITT"!==o.transaction_code&&"PMT_IIT"!==o.transaction_code&&"PMT_IDT"!==o.transaction_code||0!==o.transaction_body.psamt&&void 0!==o.transaction_body.psamt&&(e+=t+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.psamt.toString())),"PMT_ODT"!==o.transaction_code&&"PMT_OIT"!==o.transaction_code&&"PMT_OITT"!==o.transaction_code||0!==o.transaction_body.pramt&&void 0!==o.transaction_body.pramt&&(e+=t+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},o.transaction_body.pramt.toString())),e}},this.getTXDESCR_A2_Lao=(e,t)=>{let i=this.ob_data_voucher.A2,o="",a="";return""!==i.transaction_body.other_currency&&void 0!==i.transaction_body.other_currency?o=i.transaction_body.other_currency:""!==i.transaction_body.currency_code&&void 0!==i.transaction_body.currency_code&&(o=i.transaction_body.currency_code),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||(o=i.transaction_body.rccr),0!==i.transaction_body.account_amount&&void 0!==i.transaction_body.account_amount&&(a=o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.account_amount.toString())),"PMT_IITT"!==i.transaction_code&&"PMT_IIT"!==i.transaction_code&&"PMT_IDT"!==i.transaction_code||0!==i.transaction_body.samt&&void 0!==i.transaction_body.samt&&(a=o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.samt.toString())),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||0!==i.transaction_body.ramt&&void 0!==i.transaction_body.ramt&&(a=o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.ramt.toString())),"CRD_FCD"===i.transaction_code&&""!==i.transaction_body.account_number&&void 0!==i.transaction_body.account_number&&(a+=_space_small+"Debit A/C No.  "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},i.transaction_body.account_number),a+=_space_small+i.transaction_body.caccount_name2),a},this.getTXINFO1_A203=(e,t)=>{let i=this.ob_data_voucher.A203,o="";return""!==i.transaction_body.account_number&&void 0!==i.transaction_body.account_number&&(o+="A/C No. "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},i.transaction_body.account_number)),""!==i.transaction_body.account_name&&void 0!==i.transaction_body.account_name?o+=_space_small+i.transaction_body.account_name:""!==i.transaction_body.caccount_name2&&void 0!==i.transaction_body.caccount_name2&&(o+=_space_small+i.transaction_body.caccount_name2),""!==i.branch_name&&void 0!==i.branch_name&&(o+=_space_small+"Branch:  "+i.branch_name),""!==i.transaction_date&&void 0!==i.transaction_date&&(o+=_space_small+(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(i.transaction_date).getTime(),"DD/MM/YYYY HH:mm:ss")),o},this.getTXINFO2_A203=(e,t)=>{let i="",o=this.ob_data_voucher.A203;return""!==o.transaction_refid&&void 0!==o.transaction_refid&&(i+="Ref:  "+o.transaction_refid),o.transaction_body.user_code&&(i+=_space_small+"Teller: "+o.transaction_body.user_code),i+=_space_small+"Tran code: "+o.transaction_code,i},this.getTXDESCR_A203=(e,t)=>{let i=this.ob_data_voucher.A203,o="";return 0!==i.transaction_body.account_amount&&void 0!==i.transaction_body.account_amount&&(""!==i.transaction_body.book_currency&&void 0!==i.transaction_body.book_currency&&(o+=i.transaction_body.book_currency),o+=_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.account_amount.toString())),o},this.getTXINFO1_A204=(e,t)=>{let i=this.ob_data_voucher.A204,o=i.transaction_body.account_number;return"PMT_IITT"!==i.transaction_code&&"PMT_IIT"!==i.transaction_code&&"PMT_IDT"!==i.transaction_code||""!==i.transaction_body.racno&&void 0!==i.transaction_body.racno&&(o=i.transaction_body.racno),"PMT_ODT"!==i.transaction_code&&"PMT_OIT"!==i.transaction_code&&"PMT_OITT"!==i.transaction_code||""!==i.transaction_body.sacno&&void 0!==i.transaction_body.sacno&&(o=i.transaction_body.sacno),void 0!==o&&null!==o&&(o=o.replace("-",""),o="Cust. A/C No. "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},o),""!==i.transaction_body.account_name&&void 0!==i.transaction_body.account_name&&null!==i.transaction_body.account_name?o+=_space_small+i.transaction_body.account_name:""!==i.transaction_body.caccount_name&&void 0!==i.transaction_body.caccount_name&&null!==i.transaction_body.caccount_name&&(o+=_space_small+i.transaction_body.caccount_name),""!==i.branch_name&&void 0!==i.branch_name&&null!==i.branch_name&&(o+=_space_small+"Branch:  "+i.branch_name+_space_small),""!==i.transaction_date&&void 0!==i.transaction_date&&null!==i.transaction_date&&(o+=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(i.transaction_date).getTime(),"DD/MM/YYYY HH:mm:ss"))),o||""},this.getTXINFO2_A204=(e,t)=>{let i="",o=this.ob_data_voucher.A204;return""!==o.transaction_refid&&void 0!==o.transaction_refid&&(i+="Ref: "+o.transaction_refid+_space_small),""!==o.transaction_body.user_code&&void 0!==o.transaction_body.user_code&&null!==o.transaction_body.user_code&&(i+="Teller: "+o.transaction_body.user_code+_space_small),""!==o.transaction_code&&void 0!==o.transaction_code&&(i+="Tran code:  "+o.transaction_code),i},this.getTXDESCR_A204=(e,t)=>{let i=this.ob_data_voucher.A204,o="",a="Debit Amount ",s="interest amount  ",n="WHT ";return""!==i.transaction_body.other_currency&&void 0!==i.transaction_body.other_currency&&null!==i.transaction_body.other_currency?o=i.transaction_body.other_currency:""!==i.transaction_body.deposit_currency&&void 0!==i.transaction_body.deposit_currency&&null!==i.transaction_body.deposit_currency&&(o=i.transaction_body.deposit_currency),0!==i.transaction_body.account_amount&&void 0!==i.transaction_body.account_amount&&(a=a+o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.account_amount.toString())+_space),0!==i.transaction_body.interest_amount&&void 0!==i.transaction_body.interest_amount&&(s=s+o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.interest_amount.toString())+_space),0!==i.transaction_body.withholding_tax_amount&&void 0!==i.transaction_body.withholding_tax_amount&&(n=n+o+_space_small+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.withholding_tax_amount.toString())),a+s+n},this.getToday=()=>(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.FW)((new Date).getTime(),"DD/MM/YYYY"),this.getTXINFO1_A202=(e,t)=>{let i=this.ob_data_voucher.A202,o="",a="",s="",n="",r="";return""!==i.transaction_body.account_number&&void 0!==i.transaction_body.account_number&&(o="Debit A/C No.  "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},i.transaction_body.account_number)),""!==i.transaction_body.account_name&&void 0!==i.transaction_body.account_name&&(a=_space+i.transaction_body.account_name),""!==i.transaction_body.from_serial&&void 0!==i.transaction_body.from_serial&&(s=_space+"Cheque no.  "+i.transaction_body.from_serial),""!==i.branch_name&&void 0!==i.branch_name&&(n=_space+"Branch:  "+i.branch_name),""!==i.transaction_date&&(r=_space+(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.AH)(new Date(i.transaction_date).getTime(),"DD/MM/YYYY HH:mm:ss")),o+a+s+n+r},this.getTXINFO2_A202=(e,t)=>{let i=this.ob_data_voucher.A202,o="",a="",s="";return""!==i.transaction_refid&&void 0!==i.transaction_refid&&(o="Ref:  "+i.transaction_refid),""!==i.transaction_body.user_code&&void 0!==i.transaction_body.user_code&&(a=_space+"Teller:  "+i.transaction_body.user_code),""!==i.transaction_code&&void 0!==i.transaction_code&&(s=_space+"Tran code:  "+i.transaction_code),o+a+s},this.getTXDESCR_A202=(e,t)=>{let i=this.ob_data_voucher.A202,o="",a="",s="",n="",r="";return 0!==i.transaction_body.account_amount&&void 0!==i.transaction_body.account_amount&&(s=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.account_amount.toString())),""!==i.transaction_body.other_currency&&void 0!==i.transaction_body.other_currency&&"DPT_CWC"!==i.transaction_code?o=i.transaction_body.other_currency:""!==i.transaction_body.currency_code&&void 0!==i.transaction_body.currency_code&&(o=i.transaction_body.currency_code),""!==s&&(s=o+"  "+s),0!==i.transaction_body.cfamt&&void 0!==i.transaction_body.cfamt&&(n=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},i.transaction_body.cfamt.toString()),n=_space+"Fee. "+o+"  "+n),""!==i.transaction_body.pdoacc&&void 0!==i.transaction_body.pdoacc?a=i.transaction_body.pdoacc:""!==i.transaction_body.pcacc&&void 0!==i.transaction_body.pcacc&&(a=i.transaction_body.pcacc),""!==a&&(a=_space+"Credit A/C No. "+_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.eg({mark:"####-##-##-######-#"},a)),"DPT_CDT"!==i.transaction_code&&"DPT_TRF"!==i.transaction_code||(r=_space+i.transaction_body.caccount_name2),s+n+a+r},this.getTXCFNMS_A17=(e,t)=>{let i=this.ob_data_voucher.A17,o="";if(""!==i.transaction_body.fee_names&&void 0!==i.transaction_body.fee_names){var a;let e=null===(a=i.transaction_body.fee_names)||void 0===a?void 0:a.split("|");if(void 0!==e)for(const t of e)""!==t&&(o+=t+"<br/>")}return o},this.getLISTCFAMT_A17=(e,t)=>{let i=this.ob_data_voucher.A17,o="";if(""!==i.transaction_body.fee_amounts&&void 0!==i.transaction_body.fee_amounts){var a;let e=null===(a=i.transaction_body.fee_amounts)||void 0===a?void 0:a.split("|");if(void 0!==e)for(const t of e)""!==t&&(o+=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(t,2).toString())+"<br/>")}return o},this.getCurrency_A17=(e,t)=>{var i,o;let a=this.ob_data_voucher.A17,s=0,n=null===(i=a.transaction_body.fee_amounts)||void 0===i?void 0:i.split("|");if(void 0!==n)for(const u of n)""!==u&&(s+=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(u,2).toString()));let r=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,l="";var c,d,h;""!==(null===(o=a.transaction_body.rccr)||void 0===o?void 0:o.trim())&&void 0!==a.transaction_body.rccr?l=a.transaction_body.rccr.toString():""!==(null===(c=a.transaction_body.currency_code)||void 0===c?void 0:c.trim())&&void 0!==a.transaction_body.currency_code?l=a.transaction_body.currency_code.toString():"ACT_ACT"===a.transaction_code||"CSH_CSH"===a.transaction_code||"ACT_CSH"===a.transaction_code||"CSH_ACT"===a.transaction_code||"ACT_DPT"===a.transaction_code||"CSH_DPT"===a.transaction_code||"DPT_ACT"===a.transaction_code||"DPT_CSH"===a.transaction_code||"DPT_DPT"===a.transaction_code?""!==(null===(d=a.transaction_body.pgccr)||void 0===d?void 0:d.trim())&&void 0!==a.transaction_body.pgccr&&(l=a.transaction_body.pgccr.toString()):""!==(null===(h=a.transaction_body.other_currency)||void 0===h?void 0:h.trim())&&void 0!==a.transaction_body.other_currency&&(l=a.transaction_body.other_currency.toString());return"(Total amount in words:  "+r.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(s,2).toFixed(2),l,l)+")"},this.getTotal_A17=(e,t)=>{var i;let o="",a=0,s=null===(i=this.ob_data_voucher.A17.transaction_body.fee_amounts)||void 0===i?void 0:i.split("|");if(void 0!==s)for(const n of s)""!==n&&(a+=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(n,2).toString()));return o=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString()),o},this.getTotal_A171=(e,t)=>{var i;let o="",a=0,s=null===(i=this.ob_data_voucher.A171.transaction_body.fee_amounts)||void 0===i?void 0:i.split("|");if(void 0!==s)for(const n of s)""!==n&&(a+=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(n,2).toString()));return o=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString()),o},this.getTXCFNMS_A171=(e,t)=>{let i=this.ob_data_voucher.A171,o="";if(""!==i.transaction_body.fee_names&&void 0!==i.transaction_body.fee_names){var a;let e=null===(a=i.transaction_body.fee_names)||void 0===a?void 0:a.split("|");if(void 0!==e)for(const t of e)""!==t&&(o+=t+"<br/>")}return o},this.getLISTCFAMT_A171=(e,t)=>{let i=this.ob_data_voucher.A171,o="";if(""!==i.transaction_body.fee_amounts&&void 0!==i.transaction_body.fee_amounts){var a;let e=null===(a=i.transaction_body.fee_amounts)||void 0===a?void 0:a.split("|");if(void 0!==e)for(const t of e)""!==t&&(o+=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(t,2).toString())+"<br/>")}return o},this.getCurrency_A171=(e,t)=>{var i,o;let a=this.ob_data_voucher.A171,s=0,n=null===(i=a.transaction_body.fee_amounts)||void 0===i?void 0:i.split("|");if(void 0!==n)for(const u of n)""!==u&&(s+=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(u,2).toString()));let r=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,l="";var c,d,h;""!==(null===(o=a.transaction_body.rccr)||void 0===o?void 0:o.trim())&&void 0!==a.transaction_body.rccr?l=a.transaction_body.rccr.toString():""!==(null===(c=a.transaction_body.currency_code)||void 0===c?void 0:c.trim())&&void 0!==a.transaction_body.currency_code?l=a.transaction_body.currency_code.toString():"ACT_ACT"===a.transaction_code||"CSH_CSH"===a.transaction_code||"ACT_CSH"===a.transaction_code||"CSH_ACT"===a.transaction_code||"ACT_DPT"===a.transaction_code||"CSH_DPT"===a.transaction_code||"DPT_ACT"===a.transaction_code||"DPT_CSH"===a.transaction_code||"DPT_DPT"===a.transaction_code?""!==(null===(d=a.transaction_body.pgccr)||void 0===d?void 0:d.trim())&&void 0!==a.transaction_body.pgccr&&(l=a.transaction_body.pgccr.toString()):""!==(null===(h=a.transaction_body.other_currency)||void 0===h?void 0:h.trim())&&void 0!==a.transaction_body.other_currency&&(l=a.transaction_body.other_currency.toString());return"(Total amount in words:  "+r.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(s,2).toFixed(2),l,l)+")"},this.getTotal_A172=(e,t)=>{var i;let o="",a=0,s=null===(i=this.ob_data_voucher.A172.transaction_body.fee_amounts)||void 0===i?void 0:i.split("|");if(void 0!==s)for(const n of s)""!==n&&(a+=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(n,2).toString()));return o=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString()),o},this.getTXCFNMS_A172=(e,t)=>{let i=this.ob_data_voucher.A172,o="";if(""!==i.transaction_body.fee_names&&void 0!==i.transaction_body.fee_names){var a;let e=null===(a=i.transaction_body.fee_names)||void 0===a?void 0:a.split("|");if(void 0!==e)for(const t of e)""!==t&&(o+=t+"<br/>")}return o},this.getLISTCFAMT_A172=(e,t)=>{let i=this.ob_data_voucher.A172,o="";if(""!==i.transaction_body.fee_amounts&&void 0!==i.transaction_body.fee_amounts){var a;let e=null===(a=i.transaction_body.fee_amounts)||void 0===a?void 0:a.split("|");if(void 0!==e)for(const t of e)""!==t&&(o+=_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(t,2).toString())+"<br/>")}return o},this.getCurrency_A172=(e,t)=>{var i,o;let a=this.ob_data_voucher.A172,s=0,n=null===(i=a.transaction_body.fee_amounts)||void 0===i?void 0:i.split("|");if(void 0!==n)for(const u of n)""!==u&&(s+=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(u,2).toString()));let r=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,l="";var c,d,h;""!==(null===(o=a.transaction_body.rccr)||void 0===o?void 0:o.trim())&&void 0!==a.transaction_body.rccr?l=a.transaction_body.rccr.toString():""!==(null===(c=a.transaction_body.currency_code)||void 0===c?void 0:c.trim())&&void 0!==a.transaction_body.currency_code?l=a.transaction_body.currency_code.toString():"ACT_ACT"===a.transaction_code||"CSH_CSH"===a.transaction_code||"ACT_CSH"===a.transaction_code||"CSH_ACT"===a.transaction_code||"ACT_DPT"===a.transaction_code||"CSH_DPT"===a.transaction_code||"DPT_ACT"===a.transaction_code||"DPT_CSH"===a.transaction_code||"DPT_DPT"===a.transaction_code?""!==(null===(d=a.transaction_body.pgccr)||void 0===d?void 0:d.trim())&&void 0!==a.transaction_body.pgccr&&(l=a.transaction_body.pgccr.toString()):""!==(null===(h=a.transaction_body.other_currency)||void 0===h?void 0:h.trim())&&void 0!==a.transaction_body.other_currency&&(l=a.transaction_body.other_currency.toString());return"(Total amount in words:  "+r.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(s,2).toFixed(2).toString(),l,l)+")"},this.getCurrency_A16=(e,t)=>{let i=this.ob_data_voucher.A16,o=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,a=i.transaction_body.amount;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),!0,!1,i.transaction_body.currency_code+"/"+i.transaction_body.currency_code,i.transaction_body.currency_code+"/"+i.transaction_body.currency_code)},this.getCustomerNo_A201=(e,t)=>""!==t&&void 0!==t?"Customer A/C no :":"",this.getCustomerName_A201=(e,t)=>""!==t&&void 0!==t?"Customer A/C name :":"",this.getCurrency_A201=(e,t)=>""!==t&&void 0!==t?"Currency :":"",this.getCurrency_A10=(e,t)=>{let i=this.ob_data_voucher.A10,o=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,a=i.transaction_body.txamt;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),!0,!0," Kyat/ Kyat"," Pya/ Pya").replace(" and "," ")},this.getCurrency_A15=(e,t)=>{let i=this.ob_data_voucher.A15;return(new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z).changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(t,2).toString(),i.transaction_body.other_currency,i.transaction_body.other_currency,i.transaction_body.other_currency,i.transaction_body.other_currency,!0)},this.getCurrency_A13=(e,t)=>{let i=this.ob_data_voucher.A13,o=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,a=i.result.balance;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),i.result.ccr,i.result.ccr)},this.getCurrency_A14=(e,t)=>{let i=this.ob_data_voucher.A14,o=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,a=i.voucher.amt1;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),!0,!0," Kyat/ Kyat"," Pya/ Pya").replace(" and "," ")},this.getNumber_A13=(e,t)=>{let i=this.ob_data_voucher.A13,o=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,a=i.result.balance;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),i.transaction_body.currency_code,"")},this.getNumber_A13_SBILH=(e,t)=>{let i=this.ob_data,o=new _NumberToEnglish_SBILH__WEBPACK_IMPORTED_MODULE_4__.Z,a=i.result.balance;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),i.transaction_body.currency_code,"")},this.getCurrency_A12=(e,t)=>{let i=this.ob_data_voucher.A12,o=new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z,a=i.transaction_body.samt;return o.changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(a,2).toString(),!0,!0," Kyat/ Kyat"," Pya/ Pya")},this.checkValueCFAMT_A801=(e,t)=>{let i=this.ob_data_voucher.A801;return 0!==i.transaction_body.cfamt&&i.transaction_body.currency_code,"<br/>",0!==i.transaction_body.cvat&&i.transaction_body.currency_code,""},this.checkValueCFAMT_A803=(e,t)=>{let i=this.ob_data_voucher.A803;return 0!==i.transaction_body.cfamt&&i.transaction_body.sccr,""},this.checkValueCFAMT_A802=(e,t)=>{let i=this.ob_data_voucher.A802;return 0!==i.transaction_body.cfamt&&i.transaction_body.rccr,"<br/>",0!==i.transaction_body.cvat&&i.transaction_body.rccr,""},this.formatDate=(e,t)=>t.split(" ")[0],this.checkValue_A801=(e,t)=>""===t||void 0===t||null===t||"null"===t||"undefined"===t?"&nbsp;":this.ob_data_voucher.A801.transaction_body.account_name,this.checkValue_A802=(e,t)=>""===t||void 0===t||null===t||"null"===t||"undefined"===t?"&nbsp;":t,this.getInfoA1=(e,t)=>{let i=e.data,o=[],a=this.ob_data_voucher.A1[i];for(let n=0;n<a.length;n++){var s;"A3"!==(null===(s=a[n][i])||void 0===s?void 0:s.prn)&&o.push(a[n])}return o},this.formatCurrency_A13=(e,t)=>{let i=parseFloat(t.replace("%",""));return _functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(i,2).toString())+"%"},this.getApprove_A1=(e,t)=>{var i,o;let a=this.ob_data_voucher.A1,s=0,n=0;if(void 0!==a.postings_debit&&(null===(i=a.postings_debit[0])||void 0===i?void 0:i.postings_debit.branchid)===a.transaction_body.branchid&&void 0!==a.transaction_body.branchid&&(s=a.postings_debit[0].postings_debit.amt),void 0!==a.postings_credit&&(null===(o=a.postings_credit[0])||void 0===o?void 0:o.postings_credit.branchid)===a.transaction_body.branchid&&void 0!==a.transaction_body.branchid&&(n=a.postings_credit[0].postings_credit.amt),s+n>0){let e=s+n;return(new _NumberToEnglish__WEBPACK_IMPORTED_MODULE_3__.Z).changeCurrencyToWords(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(e,2).toString(),!0,!0,a.transaction_body.ccrname+"/ "+a.transaction_body.ccrname,a.transaction_body.ccrunit+"/ "+a.transaction_body.ccrunit)}return""},this.getInfoA5=(e,t)=>{let i=e.data,o=[],a=this.ob_data_voucher.A5[i];for(let s=0;s<a.length;s++){let e=a[s];e[i].amt=e[i].balance,0===e[i].balance&&0===e[i].credit&&0===e[i].debit&&(e[i].amt=null),o.push(e)}return o},this.getDefaultTable=(e,t)=>{let i=e.data,o=[],a=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.getNodeJson(this.data_list,i),s=i.split("."),n=s[s.length-1];if(Array.isArray(a))for(let r=0;r<a.length;r++){const e=a[r];for(const t in e){const i=e[t];if("object"!==typeof i){let e=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.cloneJson(a[r]);a[r]={},a[r][n]=e,a[r][n].AFGHkeyIndexWJ=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.autoID();break}void 0===i.AFGHkeyIndexWJ&&(a[r][t].AFGHkeyIndexWJ=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.autoID())}}for(let r=0;r<a.length;r++)o.push(a[r]);return o},this.getInfoA3=(e,t)=>{let i=e.data,o=[],a=this.ob_data_voucher.A3[i];for(let s=0;s<a.length;s++)o.push(a[s]);return o},this.Summary=(e,t)=>{let i=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.getNodeJson(this.ob_data_voucher,e.data),o=e.data.split("."),a=o[o.length-1],s=0,n=!1,r="";for(let l=0;l<i.length;l++)s+=i[l][a].amount;if(0===s)return r;switch(e.decimal){case"1":r=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(s,1)).toFixed(1),n=!0;break;case"2":r=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(s,2)).toFixed(2),n=!0;break;case"3":r=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(s,3)).toFixed(3),n=!0}if(n)switch(r=""+r,e.type){case"us":r=r.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");break;case"vn":r=r.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}return-1!=="CSH_CSH;CSH_ACT;CSH_DPT;ACT_ACT;ACT_CSH;ACT_DPT;DPT_DPT;DPT_ACT;DPT_CSH".indexOf(this.ob_data.transaction_code)&&(r="&nbsp;"),r},this.checkValueAndReplace=(e,t)=>t?e.replace:"",this.checkValueAndReplaceNumber=(e,t)=>t?_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.xG({decimal:"2",type:"us"},_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(e.replace,2).toString()):"",this.checkNumberAndReplace=(e,t)=>Number(t)<0||Number(t)>0?e.replace:"",this.checkValueZero=(e,t)=>t||"",this.getValueFromTo=(e,t)=>{if(t)return t.toString().substring(parseInt(e.from),parseInt(e.from)+parseInt(e.index))},this.checkValue=(json_param,value)=>{let value_format="";if(""===value||void 0===value||null===value)return"&nbsp;";let param=json_param.condition.split(";");switch(param[2]=""!==param[2]?param[2]:"&nbsp;",param[3]=""!==param[3]?param[3]:"&nbsp;",param[0]){case"=":value=value===param[1]?param[2]:param[3];break;case"!=":value=value!==param[1]?param[2]:param[3];break;case">":value=value>param[1]?param[2]:param[3];break;case"<":value=value<param[1]?param[2]:param[3];break;case">=":value=value>=param[1]?param[2]:param[3];break;case"<=":value=value<=param[1]?param[2]:param[3];break;default:value=param[3]}if(value&&""!==value.trim())try{value=eval(value)+""}catch(_unused){}if(isNaN(value))return value;let voucher_not_rate="CSH_CSH;CSH_ACT;CSH_DPT;ACT_ACT;ACT_CSH;ACT_DPT;DPT_DPT;DPT_ACT;DPT_CSH";return-1===voucher_not_rate.indexOf(this.ob_data.transaction_code)?value:(void 0!==json_param.decimal&&null!==json_param.decimal&&""!==json_param.decimal?(value_format=parseFloat(_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.condition_checkDynamicNoData(value)).toFixed(parseInt(json_param.decimal)),value_format=value_format.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")):value_format=value,value_format)},this.Calculator=(json_param,value)=>{let value_format="",calculation=json_param.calculation;if(calculation&&""!==calculation.trim())try{calculation=eval(calculation)+""}catch(_unused2){}return isNaN(calculation)?calculation:(void 0!==json_param.decimal&&null!==json_param.decimal&&""!==json_param.decimal?(value_format=parseFloat(_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.condition_checkDynamicNoData(calculation)).toFixed(parseInt(json_param.decimal)),value_format=value_format.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")):value_format=calculation,value_format)},this.formatMark=(e,t)=>{if(""===t||void 0===t||null===t||"null"===t||"undefined"===t||t.indexOf("null")>-1)return"&nbsp;";{let i=e.mark,o="",a=[],s=0,n=t.length-1;if(void 0!==i){for(let e=i.length-1;e>=0;e--){const o=i[e];"#"===o?(t[n]+""!=="undefined"?a[s]=t[n]:a[s]=0,n--):a[s]=o,s++}for(let e=n;e>=0;e--)a[s]=t[e],s++;for(let e=a.length-1;e>=0;e--)o+=a[e]}else o=t;return o}},this.Insert=(e,t)=>{if(""===t||void 0===t||null===t)return"";let i=e["config-insert"].split(";"),o=parseInt(i[0]),a=i[1];if("false"===i[2]){for(let e=0;e<t.length;e++)e%(o+1)||(t=t.substring(0,e)+a+t.substring(e));t=t.substring(1)}else t=t.substr(0,o)+a+t.substr(o+1);return t},this.Substring=(e,t)=>{if(""===t||void 0===t||null===t)return t;let i=parseInt(e["start-character"]),o=parseInt(e["end-character"]);return t=t.substring(i,o)},this.formatCurrency=(e,t)=>{if((""===t||void 0===t||null===t)&&0!==t)return"&nbsp;";let i="",o=t.replace(/[^-0-9.]/g,""),a=!1;switch(e.decimal){case"0":i=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,0)).toFixed(0),a=!0;break;case"1":i=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,1)).toFixed(1),a=!0;break;case"2":i=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,2)).toFixed(2),a=!0;break;case"3":i=parseFloat(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,3)).toFixed(3),a=!0;break;case"4":i=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.Nx)(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,4),4);break;case"5":i=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.Nx)(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,5),5);break;case"6":i=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.Nx)(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,6),6);break;case"7":i=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.Nx)(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,7),7);break;case"8":i=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.Nx)(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,8),8);break;case"9":i=(0,_lib_libFormat__WEBPACK_IMPORTED_MODULE_1__.Nx)(_functionSupportVoucher__WEBPACK_IMPORTED_MODULE_2__.QV(o,9),9)}if(a)switch(i=""+i,e.type){case"us":i=i.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");break;case"vn":i=i.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}return i},this.ToCurrencyWords_O9=(e,t)=>{let i=0,o="";if(void 0!==this.ob_data.postings_debit&&void 0!==this.ob_data.transaction_body){let e=this.ob_data;if(void 0!==e.branchid){for(let t=0;t<this.ob_data.postings_debit.length;t++){let o=this.ob_data.postings_debit[t];o.branchid===e.branchid&&(i+=o.amt)}for(let t=0;t<this.ob_data.postings_credit.length;t++){let o=this.ob_data.postings_credit[t];o.branchid===e.branchid&&(i+=o.amt)}}}let a,s,n,r,l,c,d,h,u,p,_,f,g=i.toString().split("."),m=g[0].toString();if(0===parseInt(m))return"Zero";for(a=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],s=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],n=["","thousand","million","billion","trillion"],r=m.length,c=[];r>0;)l=r,c.push(m.slice(r=Math.max(0,r-3),l));if(d=c.length,d>n.length)return"";for(f=[],p=0;p<d;p++)h=parseInt(c[p]),h&&(u=c[p].split("").reverse().map(parseFloat),1===u[1]&&(u[0]+=10),(_=n[p])&&f.push(_),(_=a[u[0]])&&f.push(_),(_=s[u[1]])&&f.push(_),(_=a[u[2]])&&f.push(_+" hundred"));let v="";if(void 0!==e.show&&"true"===e.show){let t=" "+e.dollars+" "+e.cents;if(void 0!==g[1])switch(g[1].length){case 0:v+=f.reverse().join(" ")+" "+t;break;case 1:v+=f.reverse().join(" ")+" and "+g[1]+"/10"+t;break;case 2:v+=f.reverse().join(" ")+" and "+g[1]+"/100"+t;break;case 3:v+=f.reverse().join(" ")+" and "+g[1]+"/1000"+t}else v+=f.reverse().join(" ")+" "+t}if(void 0!==e.uppercase&&"true"===e.uppercase)for(let b of v.split(" "))o+=b.charAt(0).toUpperCase()+b.slice(1)+" ";return o},this.renderCheckBox=(e,t)=>{let i=e.data.split(";"),o=e.selected,a="";for(let s=0;s<i.length;s++){let e=i[s].split("|"),t=e[0];a+=e[1]===o?'<div style="display:flex;align-items:center; margin-right:40px;margin-bottom:10px"><div style="width:15px;height:15px;border:1px solid transparent;border-radius:50%;background-color:#4085F7"><div style="width: 15px;height: 15px;background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iI0ZGRkZGRiI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTkgMTYuMTdMNC44MyAxMmwtMS40MiAxLjQxTDkgMTkgMjEgN2wtMS40MS0xLjQxTDkgMTYuMTd6Ii8+PC9zdmc+);border-radius: 50%;background-repeat: no-repeat;background-position: center;background-size:cover"></div></div><div style="padding-left:10px">'+t+"</div></div>":'<div style="display:flex;align-items:center; margin-right:40px;margin-bottom:10px"><div style="width:15px;height:15px;border:1px solid black;border-radius:50%"></div><div style="padding-left:10px">'+t+"</div></div>"}return'<div style="display: -webkit-box;display: -ms-flexbox;display: flex;-ms-flex-wrap: wrap;flex-wrap: wrap;">'+a+"</div>"},this.ToCurrencyWords=(e,t)=>{if(""===t||void 0===t||null===t)return"&nbsp;";let i,o,a,s,n,r,l,c,d,h,u,p,_="",f=t.split("."),g=f[0].toString();if(0===parseInt(g))return"Zero";for(i=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],o=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],a=["","thousand","million","billion","trillion"],s=g.length,r=[];s>0;)n=s,r.push(g.slice(s=Math.max(0,s-3),n));if(l=r.length,l>a.length)return"";for(p=[],h=0;h<l;h++)c=parseInt(r[h]),c&&(d=r[h].split("").reverse().map(parseFloat),1===d[1]&&(d[0]+=10),(u=a[h])&&p.push(u),(u=i[d[0]])&&p.push(u),(u=o[d[1]])&&p.push(u),(u=i[d[2]])&&p.push(u+" hundred"));let m="";if(void 0!==e.show&&"true"===e.show){let t=" "+e.dollars+" "+e.cents;if(void 0!==f[1])switch(f[1].length){case 0:m+=p.reverse().join(" ")+" "+t;break;case 1:m+=p.reverse().join(" ")+" and "+f[1]+"/10"+t;break;case 2:m+=p.reverse().join(" ")+" and "+f[1]+"/100"+t;break;case 3:m+=p.reverse().join(" ")+" and "+f[1]+"/1000"+t}else m+=p.reverse().join(" ")+" "+t}if(void 0!==e.uppercase&&"true"===e.uppercase)for(let v of m.split(" "))_+=v.charAt(0).toUpperCase()+v.slice(1)+" ";return _}}environmentVariables(e){void 0!==e&&(this.ob_data=e)}environmentDataList(e){void 0!==e&&(this.data_list=e)}environmentVariableVoucher(e,t){void 0===this.ob_data_voucher&&(this.ob_data_voucher={}),void 0!==e&&(this.ob_data_voucher[t]=e)}}const __WEBPACK_DEFAULT_EXPORT__=functionDynamic},418:(e,t,i)=>{"use strict";i.d(t,{QV:()=>s,eg:()=>o,xG:()=>a});const o=(e,t)=>{if(""===t||void 0===t||null===t||"null"===t||"undefined"===t||t.indexOf("null")>-1)return"&nbsp;";let i=e.mark,o="",a=[],s=0,n=t.length-1;if(void 0!==i){for(let e=i.length-1;e>=0;e--){const o=i[e];"#"===o?(a[s]=t[n],n--):a[s]=o,s++}for(let e=a.length-1;e>=0;e--)o+=a[e]}else o=t;return o},a=(e,t)=>{if(""===t||void 0===t||null===t)return"&nbsp;";let i="",o=t.replace(/[^-0-9.]/g,""),a=!1;switch(e.decimal){case"1":i=parseFloat(o).toFixed(1),a=!0;break;case"2":i=parseFloat(o).toFixed(2),a=!0;break;case"3":i=parseFloat(o).toFixed(3),a=!0}if(a)switch(i=""+i,e.type){case"us":i=i.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");break;case"vn":i=i.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}return i},s=(e,t)=>{if((""+e).includes("e")){var i=(""+e).split("e"),o="";return+i[1]+t>0&&(o="+"),+(Math.round(+i[0]+"e"+o+(+i[1]+t))+"e-"+t)}return+(Math.round(e+"e+"+t)+"e-"+t)}},4647:(e,t,i)=>{"use strict";i.d(t,{QS:()=>uv,BR:()=>pv,HX:()=>_v});var o=i(7313),a=i(1168),s=i(5842),n=i(3628),r=i(5745),l=i(3745),c=i(6417);class d extends o.Component{constructor(e){super(e),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.updateConnections=(e,t)=>{if(!this.state.Clock_updateConnections){var i=this.connections,o=[];if(t){for(var a=-1,s=0;s<i.length;s++)if(i[s]===e){a=s;break}-1!==a&&i.splice(a,1)}else i.push(e);if(i.length>0)for(var n=0;n<i.length;n++){var r={};r.sourceId=i[n].sourceId+"",r.targetId=i[n].targetId+"",o[o.length]=r}this.flow_layout=o,this.connections=i}},this.newNode=function(e,t,i,o){var a=document.createElement("div");a.className="w",a.id=o;var s='<i class="fa fa-table" aria-hidden="true"></i>&nbsp;'+i.type+"&nbsp&nbsp";if(void 0!==i.dbcoffee_create&&"true"===i.dbcoffee_create&&(s+='<i style="color: red;" class="fa '+this.state.icon_partition_user+'" aria-hidden="true"></i>&nbsp'),void 0!==i.dbcoffee_col1&&""!==i.dbcoffee_col1&&"none"!==i.dbcoffee_col1&&(s+='<i style="color: red;" class="fa '+this.state.icon_partition_lvl+'" aria-hidden="true"></i>&nbsp'),void 0!==i.dbcoffee_col2&&""!==i.dbcoffee_col2&&"none"!==i.dbcoffee_col2&&(s+='<i style="color: red;" class="fa '+this.state.icon_partition_lvl+'" aria-hidden="true"></i>&nbsp'),s+="<br />"+i.title+'<br></br><ul style="padding-inline-start: 10px;">',null!=i.detail)for(var n=0;n<i.detail.length;n++)s+='<li id="'+i.type+i.detail[n].code+'">+&nbsp',null!=i.detail[n].datapk&&"true"===i.detail[n].datapk&&(s+='<i class="fa  '+this.state.icon_datapk+'" aria-hidden="true"></i>&nbsp'),null!=i.detail[n].autoseq&&"true"===i.detail[n].autoseq&&(s+='<i class="fa '+this.state.icon_autoseq+'" aria-hidden="true"></i>&nbsp'),null!=i.detail[n].fileid&&"true"===i.detail[n].fileid&&(s+='<i style="color: red;" class="fa  '+this.state.icon_fileid+'" aria-hidden="true"></i>&nbsp'),s+=i.detail[n].code+"&nbsp;:&nbsp"+i.detail[n].title+"</li>";s+="</ul>",a.innerHTML=s,a.style.left=e+"px",a.style.top=t+"px",this.instance.getContainer().appendChild(a),this.initNode(a),this.all_node_flow[this.all_node_flow.length]=a},this.initNode=function(e){for(var t=e.querySelectorAll("li"),i=0;i<t.length;i++)this.instance.makeSource(t[i],{anchor:"Continuous",connectorStyle:{stroke:"#5c96bc",strokeWidth:2,outlineStroke:"transparent",outlineWidth:4},connectionType:"basic",extract:{action:"the-action"}}),this.instance.makeTarget(t[i],{anchor:"Continuous",dropOptions:{hoverClass:"dragHover"},allowLoopback:!0})},this.createButton=function(e,t,i){for(var o=e,a=t,s=0,n=0;n<o.length;n++){for(var r=0,l=0,c=0;c<a.length;c++)if(o[n].type===a[c].id){r=a[c].left,l=a[c].top;break}0===l&&(l=50*(++s+1)),this.newNode(r,l,o[n],o[n].type)}this.joinConnect(i)},this.resetFlowLayout=function(){this.setState({connections:[]}),this.all_node_flow=[],this.instance.empty("designDataBasecanvas"),this.instance.reset(!0)},this.key_form="designDataBase",this.all_node_flow=[],this.flow_layout=this.props.data.flow_layout,this.connections=[],this.all_id_button=this.props.data.all_id_button,this.node_position=this.props.data.node_position;for(var t=[],i=0;i<this.all_id_button.length;i++)t[i]={},t[i].title=this.all_id_button[i].title,t[i].code=this.all_id_button[i].type;var o=[];o[0]={},o[0].title="D\xf9ng",o[0].code="true",o[1]={},o[1].title="Kh\xf4ng",o[1].code="false";var a=[];a[0]={},a[0].title="Chu\u1ed7i",a[0].code="t_string",a[1]={},a[1].title="Ng\xe0y",a[1].code="t_date",a[2]={},a[2].title="Gi\u1edd",a[2].code="t_time",a[3]={},a[3].title="Ng\xe0y v\xe0 gi\u1edd",a[3].code="t_date_time",a[4]={},a[4].title="S\u1ed1 th\u1eadp ph\xe2n",a[4].code="t_double",a[5]={},a[5].title="S\u1ed1 nguy\xean",a[5].code="t_integer",a[6]={},a[6].title="Tr\u1ea1ng th\xe1i",a[6].code="t_status",a[7]={},a[7].title="H\xecnh",a[7].code="t_img",a[8]={},a[8].title="M\xe3 v\u1ea1ch",a[8].code="t_code",this.state={icon_autoseq:"fa-magic",icon_fileid:"fa-book",icon_datapk:"fa-key",icon_partition_user:"fa-user-circle-o",icon_partition_lvl:"fa-star",Clock_updateConnections:!1,list_true_false:o,list_column_type:a,list_table:t,visibility:"",editTable:{type:"",title:"",detail:[]},editColumns:{code:"",title:"",mapping:"",type:"t_string",autoseq:"false",is_share:"false",is_mater:"false",datapk:"false",fileid:"false"},infoA:{title:"Thi\u1ebft k\u1ebf Database",des:"Y\xeau c\u1ea7u l\xe0m tr\xean Desktop",openOne:"true",ofModal:!1}}}getLayoutNode(){for(var e=[],t=0;t<this.all_node_flow.length;t++){var i={};i.id=this.all_node_flow[t].id,i.left=this.all_node_flow[t].style.left.replace("px",""),i.top=this.all_node_flow[t].style.top.replace("px",""),e.push(i)}return e}componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.createButton(this.all_id_button,this.node_position,this.flow_layout)}onClickSaveDataBase(){this.node_position=this.getLayoutNode();var e={};e.node_position=this.node_position,e.all_id_button=this.all_id_button,e.flow_layout=this.flow_layout,l.ZP.quickPost([{txcode:"#sys:bo-save-database",input:{database:e}}],{})}joinConnect(e){for(var t=e,i=0;i<t.length;i++)this.instance.connect({source:t[i].sourceId,target:t[i].targetId,type:"basic"})}onClickAddTable(){for(var e=this.all_id_button,t=0;t<e.length;t++)if(e[t].type===this.state.editTable.type)return e[t]=this.state.editTable,this.all_id_button=e,void this.autoPaint();e[e.length]=this.state.editTable,this.all_id_button=e,this.autoPaint()}checkHasRelationshipTable(e,t){for(var i=this.all_id_button,o=0;o<i.length;o++)for(var a=i[o].detail,s=0;s<a.length;s++)for(var n=i[o].type+a[s].code,r=0;r<t.length;r++)for(var l=e+t[r].code,c=0;c<this.flow_layout.length;c++){if(this.flow_layout[c].sourceId===n)return!0;if(this.flow_layout[c].sourceId===l)return!0;if(this.flow_layout[c].targetId===n)return!0;if(this.flow_layout[c].targetId===l)return!0}return!1}onClickDeleteTable(){for(var e=this.all_id_button,t=0;t<e.length;t++)if(e[t].type===this.state.editTable.type)return this.checkHasRelationshipTable(this.state.editTable.type,this.state.editTable.detail)?void window.alert((0,s.VQ)("flowDatabase_hasrelationship")):(e.splice(t,1),window.alert((0,s.VQ)("flowDatabase_deleteTable")),void this.autoPaint())}autoPaint(){this.resetFlowLayout(),this.createButton(this.all_id_button,this.node_position,this.flow_layout)}onClickAddComlumn(){var e=this.state.editTable;if(null!=e.detail){for(var t=0;t<e.detail.length;t++)if(e.detail[t].code===this.state.editColumns.code)return void window.alert((0,s.VQ)("flowDatabase_doublekey"));e.detail[e.detail.length]=this.state.editColumns,this.setState({editColumns:{code:"",title:"",mapping:"",type:"t_string",autoseq:"false",datapk:"false",fileid:"false"}}),this.autoPaint()}}onClickDeleteComlumn(){var e=this.state.editTable;if(null!=e.detail)for(var t=0;t<e.detail.length;t++)if(e.detail[t].code===this.state.editColumns.code)return e.detail.splice(t,1),this.autoPaint(),void window.alert((0,s.VQ)("flowDatabase_deleteCol"))}onChange_AddTable(e,t){var i=this.state.editTable;i[e]=t.target.value,this.setState({editTable:i})}onChange_AddColumn(e,t){var i=this.state.editColumns;i[e]=t.target.value,this.setState({editColumns:i})}onSelectTableForEdit(e){if("new"!==e.target.value){for(var t=0;t<this.all_id_button.length;t++)if(this.all_id_button[t].type===e.target.value){this.setState({editTable:this.all_id_button[t]});break}}else this.setState({editTable:{type:"",title:"",detail:[]}})}onSelectColumnForEdit(e){if("new"!==e.target.value){for(var t=0;t<this.state.editTable.detail.length;t++)if(this.state.editTable.detail[t].code===e.target.value){var i=this.state.editTable.detail[t];void 0===i.mapping&&(i.mapping=""),this.setState({editColumns:i});break}}else this.setState({editColumns:{code:"",title:"",mapping:"",type:"t_string",autoseq:"false",datapk:"false",fileid:"false"}})}render(){return(0,c.jsx)("div",{className:"form-style",style:{display:this.state.visibility},children:(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12 col-lg-12",children:(0,c.jsx)("div",{className:"col-md-12 col-lg-12",children:(0,c.jsxs)("div",{className:"prtm-block",children:[(0,c.jsxs)("div",{className:"prtm-block-title mrgn-b",children:[(0,c.jsx)("h3",{children:this.state.infoA.title}),(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"note-box bg-danger",children:"Note !"}),this.state.infoA.des]})]}),(0,c.jsx)("button",{className:"btn btn-primary",type:"button",onClick:e=>this.onClickSaveDataBase(),children:"L\u01b0u database"}),(0,c.jsx)("div",{className:"jtk-demo-main",children:(0,c.jsx)("div",{className:"jtk-demo-canvas canvas-wide statemachine-demo jtk-surface jtk-surface-nopan",id:"designDataBasecanvas"})}),(0,c.jsxs)("div",{children:["Qu\u1ea3n l\xfd table",(0,c.jsx)("br",{}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-12",name:"Danh s\xe1ch table",data:this.all_id_button,d_key:"type",d_name:"title",hasNew:!0,onChange:e=>this.onSelectTableForEdit(e)}),(0,c.jsx)(n.Z,{name:"T\xean Table",class:"col-sm-12 col-md-6",onChange:e=>this.onChange_AddTable("title",e),value:this.state.editTable.title,disabled:!1}),(0,c.jsx)(n.Z,{name:"ID",class:"col-sm-12 col-md-6",onChange:e=>this.onChange_AddTable("type",e),disabled:!1,value:this.state.editTable.type}),(0,c.jsx)("br",{}),(0,c.jsxs)("div",{children:["C\u1ea5u h\xecnh Data Coffee Shop",(0,c.jsx)("br",{}),(0,c.jsx)(r.Z,{name:"L\u01b0u theo ng\u01b0\u1eddi t\u1ea1o",class:"col-sm-12 col-md-4",d_key:"code",d_name:"title",data:[{title:"Ch\u01b0a c\u1ea5u h\xecnh",code:"none"},{title:"\xc1p d\u1ee5ng",code:"true"},{title:"Kh\xf4ng \xe1p d\u1ee5ng",code:"false"}],value:void 0!==this.state.editTable.dbcoffee_create?this.state.editTable.dbcoffee_create:"none",onChange:e=>this.onChange_AddTable("dbcoffee_create",e)}),(0,c.jsx)(r.Z,{name:"L\u01b0u theo c\u1ed9t 1 (kh\xf4ng gi\u1ed1ng c\u1ed9t 2)",hasNew:!0,has_new_name:"Kh\xf4ng d\xf9ng",has_new_value:"none",class:"col-sm-12 col-md-4",d_key:"code",d_name:"title",data:this.state.editTable.detail,value:void 0!==this.state.editTable.dbcoffee_col1?this.state.editTable.dbcoffee_col1:"none",onChange:e=>this.onChange_AddTable("dbcoffee_col1",e)}),(0,c.jsx)(r.Z,{name:"L\u01b0u theo c\u1ed9t 2 (kh\xf4ng gi\u1ed1ng c\u1ed9t 1)",hasNew:!0,has_new_name:"Kh\xf4ng d\xf9ng",has_new_value:"none",class:"col-sm-12 col-md-4",d_key:"code",d_name:"title",data:this.state.editTable.detail,value:void 0!==this.state.editTable.dbcoffee_col2?this.state.editTable.dbcoffee_col2:"none",onChange:e=>this.onChange_AddTable("dbcoffee_col2",e)})]}),(0,c.jsx)("br",{}),(0,c.jsx)("button",{className:"btn btn-primary",type:"button",onClick:()=>this.onClickAddTable(),children:"L\u01b0u table v\xe0 v\u1ebd l\u1ea1i"}),(0,c.jsx)("button",{className:"btn btn-primary",type:"button",onClick:()=>this.onClickDeleteTable(),children:"X\xf3a table"})]}),(0,c.jsx)("br",{}),(0,c.jsxs)("div",{children:["Qu\u1ea3n l\xfd columns",(0,c.jsx)("br",{}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-12",name:"Danh s\xe1ch column",hasNew:!0,d_key:"code",d_name:"title",data:this.state.editTable.detail,onChange:e=>this.onSelectColumnForEdit(e)}),(0,c.jsx)(n.Z,{name:"ID",class:"col-sm-12 col-md-4",onChange:e=>this.onChange_AddColumn("code",e),value:this.state.editColumns.code}),(0,c.jsx)(n.Z,{name:"ID (\xc1nh x\u1ea1)",class:"col-sm-12 col-md-4",onChange:e=>this.onChange_AddColumn("mapping",e),value:this.state.editColumns.mapping}),(0,c.jsx)(n.Z,{name:"T\xean column",class:"col-sm-12 col-md-4",onChange:e=>this.onChange_AddColumn("title",e),value:this.state.editColumns.title}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-2",name:"Lo\u1ea1i column",hasNew:!1,data:this.state.list_column_type,onChange:e=>this.onChange_AddColumn("type",e),value:this.state.editColumns.type}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-2",name:"Kh\xf3a ch\xednh",hasNew:!1,data:this.state.list_true_false,onChange:e=>this.onChange_AddColumn("datapk",e),value:this.state.editColumns.datapk}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-2",name:"T\xean file",hasNew:!1,data:this.state.list_true_false,onChange:e=>this.onChange_AddColumn("fileid",e),value:this.state.editColumns.fileid}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-2",name:"T\u1ef1 t\u0103ng",hasNew:!1,data:this.state.list_true_false,onChange:e=>this.onChange_AddColumn("autoseq",e),value:this.state.editColumns.autoseq}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-2",name:"Chia s\u1ebd",hasNew:!1,data:this.state.list_true_false,onChange:e=>this.onChange_AddColumn("is_share",e),value:this.state.editColumns.is_share}),(0,c.jsx)(r.Z,{class:"col-sm-12 col-md-2",name:"Master Data",hasNew:!1,data:this.state.list_true_false,onChange:e=>this.onChange_AddColumn("is_mater",e),value:this.state.editColumns.is_mater}),(0,c.jsx)("br",{}),(0,c.jsx)("button",{className:"btn btn-primary",type:"button",onClick:()=>this.onClickAddComlumn(),children:"Th\xeam c\u1ed9t (s\u1eeda th\xec ch\u1ec9 c\u1ea7n l\u01b0u table)"}),(0,c.jsx)("button",{className:"btn btn-primary",type:"button",onClick:()=>this.onClickDeleteComlumn(),children:"X\xf3a c\u1ed9t"})]})]})})})})})}}const h=d;var u=i(3063),p=i(7751),_=i(9676);class f extends o.Component{constructor(e){super(e),this.changeKeyLanguage=()=>{this.setState({lang_select:s.ZP.getLangKey()})},this.getDataFull=()=>{var e;return{config:{default:{isBorder:"true"===this.props.isBorder,class:this.props.class||"col-12",title:"true"===String(this.props.isBorder)?(null===(e=this.props.lang)||void 0===e?void 0:e[this.state.lang_select])||this.props.name:""}}}};var t={};"cView"===e.inputType&&(t.code=e.code),this.AUTO_ID=s.ZP.autoID(),this.state={list_group:[],data:s.ZP.cloneJson(e.list_input),infoView:t,lang_select:s.ZP.getLangKey()}}conVertModeForm(e,t){return t}getListComponent(){let e=this.state.data,t=[],i=0;for(let n of e){var o;n=this.conVertModeForm(this.props.infoA.mode_form,n);const e={btn_of_grid:this.props.btn_of_grid,key:n.default.codeHidden,index:i,default:n.default,visibility:n.visibility,config:n.config,role:n.role,property:n.property,validate:n.validate,lang:n.lang,configAVD:n.configAVD,inputType:n.inputtype,value:n.value,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,infoView:this.state.infoView};let r=null===(o=n.default)||void 0===o?void 0:o.ofgroup,l=t[t.length-1];if(!n.config.onTable)if(r&&"false"!==r&&r===(null===l||void 0===l?void 0:l.groupid))l.list_cpn.push(e);else{var a,s;let i={list_cpn:[],groupid:null===(a=n.default)||void 0===a?void 0:a.ofgroup,class:null===(s=n.default)||void 0===s?void 0:s.class_ofgroup};i.list_cpn.push(e),t.push(i)}i++}return t}componentDidMount(){setTimeout((()=>{let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.hasOwnProperty("addView")&&e.addView(this)}),s.ZP.getTimeAddComponent()),this.setState({list_group:this.getListComponent()})}render(){const e=(0,_.RP)("uView");return(0,c.jsx)(e,{dataFull:this.getDataFull(),children:this.state.list_group.map(((e,t)=>{if(0===e.list_cpn.length)return null;{const i=e.list_cpn.slice(1),a=i.length>0;return(0,o.createElement)(p.Z,(0,u.Z)((0,u.Z)({},e.list_cpn[0]),{},{layoutIndex:this.props.layoutIndex,viewID:this.props.viewID,isOfgroupParent:a,ofGroupData:i,key:this.AUTO_ID+t}))}}))})}}const g={cView:f};class m extends o.Component{render(){const e=g[this.props.inputType];return(0,c.jsx)(e,(0,u.Z)((0,u.Z)({},this.props),{},{list_view:this.props.list_view}))}}const v=m;class b extends o.Component{constructor(e){super(e),this.changeKeyLanguage=()=>{this.setState({key_lang:s.ZP.getLangKey()})},this.hanndleChangeTabActive=e=>new Promise((t=>{this.setState({view_active:e},(()=>{t(!0)}))})),this.onSelectTab=(e,t)=>{this.setState({view_active:t})},this.state={ID:s.ZP.autoID(),key_lang:s.ZP.getLangKey(),tab_selected:this.props.list_view[0].name,DOM_views_tab:[],DOM_view:[],view_active:""};for(let t=0;t<this.props.list_view.length;t++){const e=this.props.list_view[t];if("true"===e.isTab){let i={};i.title=e.name,i.id=s.ZP.autoID(),i.condition=e.condition,i.more_information=e.more_information,i.lang=e.lang,i.DOM_elm=(0,c.jsx)(v,{btn_of_grid:this.props.btn_of_grid,index:t,name:e.name,code:e.code,isTab:e.isTab,isBorder:e.isBorder,class:e.class,inputType:e.inputtype,visibility:e.visibility,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,list_input:e.list_input,lang:e.lang,viewID:i.id,layoutIndex:this.props.index},t),this.state.DOM_views_tab.push(i),0===t&&this.setState({view_active:i.id})}else this.state.DOM_view.push((0,c.jsx)(v,{btn_of_grid:this.props.btn_of_grid,index:t,name:e.name,code:e.code,isTab:e.isTab,isBorder:e.isBorder,class:e.class,inputType:e.inputtype,visibility:e.visibility,lang:e.lang,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,list_input:e.list_input,viewID:e.id},t))}}componentDidMount(){setTimeout((()=>{let e=s.ZP.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.hasOwnProperty("addLayout")&&e.addLayout(this)}),s.ZP.getTimeAddComponent())}isEmpty(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return JSON.stringify(e)===JSON.stringify({})}getListTabView(){let e=[],t=s.ZP.getFormAppAuto(this.props.infoA.key_form),i={};if(void 0!==t&&(i=t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{})),this.isEmpty(i))for(const s of this.state.DOM_views_tab){var o;e.push({tabInfo:{title:(null===(o=s.lang)||void 0===o?void 0:o[this.state.key_lang])||s.title,id:s.id,more_information:this.getMoreInformation(s.more_information,i)},DOM_elm:s.DOM_elm,isHidden:!1,sysStyle:{show:s.id===this.state.view_active?"show":""}})}else for(const r of this.state.DOM_views_tab){var a,n;e.push({tabInfo:{title:(null===(a=r.lang)||void 0===a?void 0:a[this.state.key_lang])||r.title,id:r.id,error:(null===(n=this.props.list_view_error)||void 0===n?void 0:n[r.id])||"",more_information:this.getMoreInformation(r.more_information,i)},DOM_elm:r.DOM_elm,isHidden:!s.ZP.checkDynamicCondition(i,r.condition||""),sysStyle:{show:r.id===this.state.view_active?"show":""}})}return e}getNodeJson(e,t){if("object"!==typeof e||!t)return;let i=t.split("."),o=e;for(const a of i){if(void 0===o||null===o)return;o=o[a]}return o}getMoreInformation(e,t){if(!e||""===e)return;let i=s.ZP.component_getListCode(e);for(let o of i){let i=this.getNodeJson(t,o.code);if("object"===typeof i)i=JSON.stringify(i);else{if(!i&&0!==i)return;i+=""}e=e.replace(o.key,i)}return e}render(){const e=(0,_.RP)("uFormTab"),t=(0,_.RP)("uLayout");return(0,c.jsxs)(o.Fragment,{children:[this.state.DOM_view.length>0&&(0,c.jsx)(t,{children:this.state.DOM_view}),this.state.DOM_views_tab.length>0&&(0,c.jsx)(e,{dataFull:{data:this.getListTabView(),isLoadingEnd:this.props.loading_form_end,abs_select:this.onSelectTab}})]})}}const y={cLayout:b};class A extends o.Component{render(){const e=y[this.props.inputType];return(0,c.jsx)(e,(0,u.Z)((0,u.Z)({},this.props),{},{ref:e=>{this.ref_layoutControl=e},list_view:this.props.list_view}))}}const D=A,k=e=>{var t=e.childNodes,i={inputType:"cHtml"};i.tagHtml=e.tagName,i.tagAtt=C(e),void 0!==i.tagAtt&&void 0!==i.tagAtt.style&&(i.tagAtt.style=O(i.tagAtt.style)),1===e.childNodes.length&&(i.content=e.textContent),e.hasOwnProperty("getAttribute")&&(null!=e.getAttribute("class")?(i.class=e.getAttribute("class"),i.code=e.getAttribute("code")):i.class=""),i.loadScreen=[];for(var o=0;o<t.length;o++)if(t[o]&&void 0!==t[o].tagName)if(t[o].childNodes&&t[o].childNodes.length>0)i.loadScreen[i.loadScreen.length]=k(t[o]);else{var a={};a.inputType=t[o].tagName,a.tagAtt=C(t[o]),void 0!==a.tagAtt&&void 0!==a.tagAtt.style&&(a.tagAtt.style=O(a.tagAtt.style)),i.loadScreen[i.loadScreen.length]=a}return i},O=e=>{var t={};if(void 0!==e){for(var i=e.split(";"),o=0;o<i.length;o++)if(""!==i[o]){var a=i[o].split(":");a.length>0&&(t[w(a[0].trim())]=a[1].trim())}return t}return t},w=e=>{var t=e;if(""!==e&&e.includes("-")){var i=e.split("-");i.length>0&&(t=i[0]+i[1].charAt(0).toUpperCase()+i[1].slice(1))}return t},C=e=>{var t={},i=e.attributes;if(void 0!==i)for(var o=i.length-1;o>=0;o--)t[i[o].name]=i[o].value;return t},x=(e,t,i)=>{if(void 0!==e&&e.length>0)for(var o=0;o<e.length;o++){if(e[o].tagAtt&&void 0!==e[o].tagAtt.code){var a=S(e[o].tagAtt.code,t);if(void 0!==a)for(var s in a)e[o][s]=a[s];e[o].inputType.includes("TABLE")&&(e[o].btn_of_grid=i)}void 0!==e[o].loadScreen&&e[o].loadScreen.length>0&&(e[o].loadScreen=x(e[o].loadScreen,t,i))}return e},S=(e,t)=>{if(void 0!==e)for(var i=0;i<t.length;i++){var o=t[i].list_view;if(void 0!==o)for(var a=0;a<o.length;a++)for(var s=o[a].list_input,n=0;n<s.length;n++)if(void 0!==s[n].default.code&&s[n].default.code===e.trim())return s[n]}};var M=i(1139);class P{static async callRule(e,t,i,o,a,n){var r=[];let l=!1;var c={data:i,event:n,infoA:o,infoA_parent:a,configComponent:t};let d=s.ZP.getFormAppAuto(o.key_form);for(const s of e){const e=new M.Z[s.code];e.setConfig(s),T(s,c)&&e.checkUse(c)&&(r[r.length]={code:s.code,rule_elm:e})}l=(null===r||void 0===r?void 0:r.length)>0,d&&l&&d.setLoadingRule(!0);var h=-1;for(const s of r){let e=await s.rule_elm.start(c);"getInfo"===s.code&&(-1===h&&(h=0),!1===e&&h++)}return d&&l&&d.setLoadingRule(!1),-1!==h&&d.hasOwnProperty("setStatusToForm_AndRunRule")&&d.setStatusToForm_AndRunRule(h>0?11:0),s.ZP.isDebug?r.map((e=>e.rule_elm.config)):[]}}function T(e,t){if("isOpenFromOther"===t.event)return!0;if(!0===e.isStart&&"isStart"===t.event)return!0;{var i;const o=e.config,a=t.configComponent,s=t.event,n=o.component_event;if(("all"===n||s===n)&&`;${o.component_action.trim()};`.includes(`;${null===(i=a.code)||void 0===i?void 0:i.trim()};`))return!0}return!1}var I=i(8022),N=i(1896);const F=["All","setCMD","set","get","setAdvanced","getAdvanced","getDataOOP"],L=(e,t)=>{switch(t){case"build_api":!function(e,t){const i=[{code:"url",value:"/api/exp/exp"},{code:"body",value:"auto"},{code:"type",value:"create",data:["create","search","getinfo","delete"],type:"array"}],o={script:e,tutorial:[{value:"Giao di\u1ec7n t\u1ea1o api t\u1ef1 \u0111\u1ed9ng"}]};t.ref_debug.current.handleOpen(e,i,o,((e,i,o,a)=>{const{url:s,body:n}=a;let r=s.trim();r=r.trim();let l=t.props.form_code+r.replace(/\//g,"_");var c=n;let d={};d="auto"!==c?JSON.parse(c):t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}),delete d.errorjwebui_code;const h={learn_api_name:l,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+r,learn_api_data:t.props.form_code,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:"POST",learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(Z(d,t.props.form_code)),learn_api_id:l,AFGHkeyIndexWJ:l,AFGHkeyTime:1603872320968,AFGHkeyWorkFlow:"",AFGHTimeWJ:1603872320968,app_code:"o9"};j(e,{BUTTON:{txFO:`[{"txcode":"#sys:fo-create-dataAPI","input":{"list_component":"*","list_view":"","table_code":"${t.props.form_code}","learn_api":"${l}"}}]`},API:h},!0)}))}(t,e);break;case"h=f":!function(e){e.callDirFromSupport("setCMD",{list_component:`*;${JSON.stringify(E(e)).replace(/,/g,";")}`,list_view:"",inform:"true",checkError:"false"},{visible:!0})}(e);break;case"ai":!function(e){e.callDirFromSupport("toolAutoValue",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{})}(e);break;case"debug":!function(e,t){const i=[{code:"cpn_code",value:"- Select one -",data:E(t),type:"array"},{code:"func_call",value:"All",data:F,type:"array"},{code:"condition",value:""}],o={script:e,tutorial:[{value:"Giao di\u1ec7n debug c\xe1c h\xe0m t\xe1c \u0111\u1ed9ng \u0111\u1ebfn component \u0111\u01b0\u1ee3c ch\u1ecdn (code = cpn_code)"}]};t.ref_debug.current.handleOpen(e,i,o,((e,i,o,a)=>{var n,r;const{cpn_code:l,func_call:c,condition:d}=a,h=s.ZP.cloneJson(null===(n=t.debug_form.component[l])||void 0===n?void 0:n.callDirFromSupport)||[],u=s.ZP.cloneJson(null===(r=t.debug_form.component[l])||void 0===r?void 0:r.runRuleFunction)||[];j(e,{func_call:h.filter((e=>(e.function_name===c||"All"===c)&&(s.ZP.checkCondition(e,d)||!d))),rule_call:u},!0)}))}(t,e);break;case"condition":!function(e,t){var i=prompt("Nh\u1eadp c\xe2u \u0111i\u1ec1u ki\u1ec7n: ","");let o=function(e,t){let i=t,o={},a=s.ZP.component_getListCode(t);a.length>0&&(o=e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}));return t=s.ZP.convertCondition(t,o),{old_condition:i,condition:t,data_component:o}}(t,i);j(e,o,!0)}(t,e);break;case"build_getinfo":!function(e,t){const i=[{code:"api_getinfo",value:"/api/exp"},{code:"body_request",value:"{    }"},{code:"body_response",value:"{ }"},{code:"input_key",value:""},{code:"label_key",value:""}],o={script:e,tutorial:[{value:"Giao di\u1ec7n t\u1ea1o rule GetInfo t\u1ef1 \u0111\u1ed9ng"}]};t.ref_debug.current.handleOpen(e,i,o,((e,i,o,a)=>{let{api_getinfo:n,body_request:r,body_response:l,label_key:c,input_key:d}=a;r=JSON.parse(r),l=JSON.parse(l);let h=Object.keys(r).toString().replace(/,/,"_"),u=R(h.split("_")[0],t).config.structable_read.split(".")[0];const p=t.props.form_code;let _=Z(r,u);const f=`api_rulefunc_${p}_get_info_${h}`,g={learn_api_name:f,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+n,learn_api_data:f,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:"POST",learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(_),learn_api_id:f,AFGHkeyIndexWJ:f,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime(),app_code:"o9"};let m={};for(const s in l){let e=R(s,t);e?m[e.default.code]=`${f}.${s}`:m[s]=`${f}.${s}`}console.log("body_cpn_result",m);const v={code:"getInfo",config:{component_event:"enter_tab",component_action:R(d,t).default.code,component_result:JSON.stringify(m),isSetCode:"true",data_type:"api",api_id:f,condition:""},isStart:!1,inUse:!0,order:1};let b={info:s.ZP.cloneJson(t.props.infoA),list_layout:s.ZP.cloneJson(t.props.conf),react_txt:""};b.info.ruleStrong.push(v),b.list_layout.forEach((e=>{e.list_view.forEach((e=>{let t=e.list_input;t.forEach(((e,i)=>{var o,a,n;(null===(o=e.config)||void 0===o||null===(a=o.structable_read)||void 0===a||null===(n=a.split("."))||void 0===n?void 0:n[1])===d&&(e.default.ofgroup=e.default.code,e.default.class="col-sm-6 col-12",e.default.class_ofgroup="col-xl-4 col-lg-4 col-md-5 col-sm-5 offset-xl-2-right offset-lg-2-right offset-md-1-right offset-sm-1-right",t=t.splice(i+1,0,{config:{action:"",structable:`${u}.${c}`,structable_read:`${u}.${c}`,data_default:""},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"jLabel",default:{name:c,code:c,codeHidden:s.ZP.autoID(),class:"col-6",condition:"",role:"",ofgroup:e.default.code,class_ofgroup:""}}))}))}))}));const y={form_code:p,api_code:f,api_config:g,form_config:b,script:e};console.log("input",y);var A=[{txcode:"#sys:bo-jwebui-tools",input:y}];(0,N.Yr)(A,{}).then((e=>{console.log(e)}))}))}(t,e)}};function E(e){return Object.keys(e.debug_form.component)}function j(e,t,i){console.log("==================================================================="),console.log("SCRIPT  => ",e.toUpperCase()),console.log("CONTENT => ",t),console.log("-------------------------------------------------------------------"),i&&s.ZP.copyToClipboard(JSON.stringify(t))}function Z(e,t){let i={};for(const o in e)if(e.hasOwnProperty(o)){const a=e[o];"number"===typeof a&&(i[o.toLocaleLowerCase()]=`MapS.dataN(${t}.${o.toLocaleLowerCase()})`),"string"===typeof a&&(/\d\d\/\d\d\/\d\d\d\d/.test(a)?i[o.toLocaleLowerCase()]=`MapS.dateDDMMYYYY(${t}.${o.toLocaleLowerCase()})`:i[o.toLocaleLowerCase()]=`MapS.dataS(${t}.${o.toLocaleLowerCase()})`),"object"===typeof a&&!1===Array.isArray(a)&&(i[o.toLocaleLowerCase()]=Z(a,t)),"object"===typeof a&&!0===Array.isArray(a)&&(i[o.toLocaleLowerCase()]=`MapS.arrayJson(${t}.${o.toLocaleLowerCase()}|${JSON.stringify(Z(a[0],o))})`)}return i}function R(e,t){let i;return t.props.conf.forEach((t=>{t.list_view.forEach((t=>{t.list_input.forEach(((t,o)=>{var a,s,n;(null===(a=t.config)||void 0===a||null===(s=a.structable_read)||void 0===s||null===(n=s.split("."))||void 0===n?void 0:n[1])===e&&(i=t)}))}))})),i}class Q extends o.Component{constructor(e){super(e),this.handleOpen=(e,t,i,o)=>{let a={script:e,config:t,dataItem:i,funcCallBack:o,dataTool:{}};for(const s of t)a.dataTool[s.code]=s.value||"";this.setState({devTool:a,isOpen:!0})},this.handleClose=()=>{this.setState({isOpen:!1},(()=>{const{script:e,config:t,dataItem:i,dataTool:o,funcCallBack:a}=this.state.devTool;a&&a(e,t,i,o)}))},this.handleChange=(e,t)=>{let i=this.state.devTool,o=this.state.devTool.config;for(const a of o)a.code===e&&(a.value=t,i.dataTool[e]=t);this.setState({devTool:i})},this.buildDataFullInput=()=>{},this.buildDataFullSelect=()=>{},this.builDataFullCheckbox=()=>{},this.getDataFullModal=()=>({config:{default:{title:"",size:"M"},cmd:{visibility:this.state.isOpen}},abs_Close:this.handleClose}),this.getBtnDatafull=(e,t,i,o)=>({config:{default:{title:e,type:t,class:"",icon:i},cmd:{disable:!1,isLoading:!1}}}),this.builDataFull=(e,t)=>{var i;const o=e.code||"",a=e.value||"",n=e.icon||"",r=e.type||"string",l=e.data||[],c=null!==e&&void 0!==e&&null!==(i=e.data_filter)&&void 0!==i&&i.length?e.data_filter:l;switch(r){case"string":return{abs_Change:e=>{this.handleChange(o,e.target.value)},config:{default:{placeholder:o,title:o,type:"text",class:"col-6",required:!1,icon:n},cmd:{disable:!1,visible:!0,error:{message:"",type:""},isFocus:!1,isLoading:!1},mode:{textAlign:""}},mode:{isSearch:!1,readOnly:!1},valueTitleHover:o,value:a};case"array":return{abs_Change:e=>{this.handleChange(o,e)},abs_search:e=>{const t=e.target.value;let i=this.state.devTool;for(const a of i.config)a.code===o&&(a.search_value=t,a.data_filter=l.filter((e=>e.includes(t)||!t)));this.setState({devTool:i})},config:{default:{search:{placeholder:s.ZP.getLang("jselect_search")},data_status:s.ZP.getLang("jselect_no_result"),title:o,type:"",class:"col-6",required:!1},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{moreColumn:!1},column:[]},data:null===c||void 0===c?void 0:c.map((e=>({title:e,value:e,selected:e===a}))),input_value:a,search_value:e.search_value||""}}},this.state={devTool:{script:"",config:[],dataItem:{},dataTool:{},funcCallBack:null},isOpen:!1}}render(){const e=this.state.devTool.config,t={string:(0,_.RP)("uInput"),array:(0,_.RP)("uSelectItem")};let i=(0,_.RP)("uModal");const o=(0,_.RP)("uForm"),a=(0,_.RP)("uLayout"),n=(0,_.RP)("uView"),r=(0,_.RP)("uButton"),l=[{name:"Accept",color:"primary",icon:"check",key:"",onClick:()=>{const{script:e,config:t,dataItem:i,dataTool:o,funcCallBack:a}=this.state.devTool;a&&a(e,t,i,o)}},{name:"Clear",color:"danger",icon:"delete",onClick:()=>{let e=this.state.devTool;for(const t of e.config)e.dataTool[t.code]="",t.value="";this.setState({devTool:e})}}],d=this.state.devTool.dataItem.tutorial||[],h=this.state.devTool.dataItem.script||"";return(0,c.jsxs)(i,{dataFull:this.getDataFullModal(),children:[(0,c.jsxs)(o,{dataFull:{config:{default:{title:"Developer Tool: "+h,icon:"bug_report"}},title_button:{close_button:s.ZP.getLang("form_close_title"),add_form:s.ZP.getLang("form_add_title")},cmd:{visibility:!0}},children:[d.map((e=>(0,c.jsx)("div",{style:{marginTop:"20px",color:"darkgreen"},children:(0,c.jsx)("i",{children:e.value})}))),(0,c.jsx)(a,{children:(0,c.jsx)(n,{class:"col-12",children:e.map((e=>{const i=e.type||"string",o=t[i];return(0,c.jsx)(o,{dataFull:this.builDataFull(e,this)})}))})}),(0,c.jsx)(a,{children:(0,c.jsx)(n,{class:"col-12",children:l.map((e=>(0,c.jsx)(r,{dataFull:(0,u.Z)((0,u.Z)({},this.getBtnDatafull(e.name,e.color,e.icon,e.key)),{},{abs_Click:e.onClick})})))})})]}),(0,c.jsx)("div",{className:"modal-body",ref:"content_modal"})]})}}const z=Q;class U extends o.Component{constructor(e){var t;super(e),t=this,this.addView=e=>{void 0!==e&&this.list_view.push(e)},this.addDebug=(e,t)=>{e},this.addLayout=e=>{void 0!==e&&this.list_layout.push(e)},this.addComponent=e=>{if(s.ZP.isDebug())for(const i in this.list_component_debug){let t=this.list_component_debug[i];e.props.default.codeHidden===t.default.codeHidden&&delete this.list_component_debug[i]}if(void 0!==e&&(this.list_component.push(e),this.list_component_max===this.list_component.length&&this.form_blockCheckMaxComponent)){if(this.form_blockCheckMaxComponent=!1,this.list_component.length>0)for(var t=0;t<this.list_component.length;t++)this.list_component[t].hasOwnProperty("checkIsLoading")&&this.list_component[t].hasOwnProperty("getCodeHidden")&&!1===this.list_component[t].checkIsLoading()&&this.list_isLoading++;0===this.list_isLoading&&(this.loading_final=!0),this.formStart()}},this.changeKeyLanguage=()=>{if(this.list_layout.length>0)for(let t=0;t<this.list_layout.length;t++)this.list_layout[t].hasOwnProperty("changeKeyLanguage")&&this.list_layout[t].changeKeyLanguage();if(this.list_view.length>0)for(let t=0;t<this.list_view.length;t++)this.list_view[t].hasOwnProperty("changeKeyLanguage")&&this.list_view[t].changeKeyLanguage();if(this.list_component.length>0)for(let t=0;t<this.list_component.length;t++)this.list_component[t].hasOwnProperty("changeKeyLanguage")&&this.list_component[t].changeKeyLanguage();void 0!==this.refs.timeline_ref&&this.refs.timeline_ref.changeKeyLanguage(),"none"!==this.state.hasError&&this.buildValidateForm();let{lang:e}=this.state;e.close_button=s.ZP.getLang("form_close_title"),e.add_form=s.ZP.getLang("form_add_title"),this.setState({lang:e})},this.forDebug=e=>{if(this.list_component.length>0)for(var t=0;t<this.list_component.length;t++)this.list_component[t].hasOwnProperty("forDebug")&&this.list_component[t].forDebug(e);this.setState({isDebug:e})},this.rule_runIsStart=async()=>{const e=["setFocus"];for(var t=[],i=0;i<this.state.ruleStrong.length;i++){const o=this.state.ruleStrong[i];void 0!==o.isStart&&!1===e.includes(o.code)&&!0!==o.isDidStart&&(t[t.length]=this.state.ruleStrong[i])}if(t.length>0)return P.callRule(t,{},{},this.state.infoA,this.state.infoA_parent,"isStart")},this.ruleDidStart=async()=>{const e=["setFocus"];for(var t=[],i=0;i<this.state.ruleStrong.length;i++){const o=this.state.ruleStrong[i];o&&(void 0!==o.isStart&&!0===e.includes(o.code)||!0===o.isDidStart)&&(t[t.length]=this.state.ruleStrong[i])}if(t.length>0)return P.callRule(t,{},{},this.state.infoA,this.state.infoA_parent,"isStart")},this.setFormValidateFromComponent=(e,t)=>{void 0!==e&&!0===e&&!1===this.formValidate&&(s.ZP.isDebug(),this.formValidate=e)},this.setFormValidateFromFunctionClient=e=>{void 0!==e&&(!0!==e&&!1!==e||(this.formValidate=e))},this.setCompareroCpn=e=>{this.comprare=[e]},this.getFormValidate=()=>this.buildValidateForm(),this.getListError=()=>this.state.list_error,this.getValidateForm=()=>{let e=[];for(const t of this.list_component){let i=!1,o="";t.hasOwnProperty("getInfoCheckRun")&&(i=t.getInfoCheckRun().block),t.hasOwnProperty("getInfoErrror")&&(o=t.getInfoErrror()),!0!==i&&o&&e.push(Object.assign({type:"form"},o))}return e.length>0&&console.log("list_error",e),e},this.runRuleFunctionQueue=async()=>{for(;0!==this.queue_rules.length;){const{configComponent:e,dataComponent:t,infoA_Parent:i,event_code:o}=this.queue_rules.shift();await P.callRule(this.state.ruleStrong,e,t,this.state.infoA,i,o)}},this.runRuleFunction=async(e,t,i,o)=>{if(!0===this.state.is_loading_form||0!==this.queue_rules.length)this.queue_rules.push({configComponent:e,dataComponent:t,infoA_Parent:i,event_code:o});else if(this.state.ruleStrong.length>0){const r=await P.callRule(this.state.ruleStrong,e,t,this.state.infoA,i,o);var a,n;if(s.ZP.isDebug())null!==(a=this.debug_form.component)&&void 0!==a&&null!==(n=a[e.code])&&void 0!==n&&n.runRuleFunction||(this.debug_form.component=s.ZP.setNodeJson(this.debug_form.component,e.code+".runRuleFunction",[])),this.debug_form.component[e.code].runRuleFunction.push({event:o,start_rules:r})}},this.getInfoComponentParent=()=>this.props.componentConfigDefault,this.checkReloadValidateFormParent=()=>this.props.componentConfigDefault.isReloadValidate,this.getInfoA=()=>this.state.infoA,this.putData=(e,t,i)=>{null==this.obDataForm[e]&&(this.obDataForm[e]={}),this.obDataForm[e][t]=i},this.putDataOneKey=(e,t)=>{this.obDataForm[e]=t},this.putDataJoin=e=>{for(var t in e)if(void 0!==this.obDataForm[t])for(var i in e[t])this.obDataForm[t][i]=e[t][i];else this.obDataForm[t]=e[t]},this.getDataForm=e=>(!0!==this.is_did_set_data||this.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true",isCallFromFormChild:e},{}),this.getData("")),this.getDataAll=function(e){var i,o;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!0!==e)return t.getDataForm(n);let r=t.getDataForm(n),l=null===(i=t.props)||void 0===i||null===(o=i.infoA_parent)||void 0===o?void 0:o.key_form;if(l){let e=s.ZP.getFormAppAuto(l).getDataAll(!0,a,!0);r=a?Object.assign(r,e):Object.assign(e,r)}return r},this.getData=e=>void 0!==e&&""!==e.trim()&&null!=this.obDataForm[e]?s.ZP.cloneJson(this.obDataForm[e]):s.ZP.cloneJson(this.obDataForm),this.getDataAdvanced=()=>this.callDirFromSupport("getAdvanced",{list_component:"*"},{}),this.putDataAll=e=>{s.ZP.isDebug()&&console.log("putDataAll===>",s.ZP.cloneJson(e)),this.obDataForm=e},this.putDataAll_andSet=(e,t)=>{s.ZP.isDebug()&&console.log("putDataAll_andSet===>",s.ZP.cloneJson(e)),void 0!==t&&!0===t&&this.clearForm();for(const i in e)if(e.hasOwnProperty(i)){const t=e[i];if("object"===typeof t&&null!==t&&!1===Array.isArray(t)){for(const e in t)if(t.hasOwnProperty(e)){const o=t[e];void 0===this.obDataForm[i]&&(this.obDataForm[i]={}),this.obDataForm[i][e]=o}}else Array.isArray(t)&&(this.obDataForm[i]=t)}this.callDirFromSupport("set",{},s.ZP.cloneJson(this.obDataForm))},this.putDataAll_andSetComponent=(e,t)=>{s.ZP.isDebug()&&console.log("putDataAll_andSetComponent===>",s.ZP.cloneJson(e));for(const i in e)if(e.hasOwnProperty(i)){const t=e[i];if("object"===typeof t&&null!==t&&!1===Array.isArray(t)){for(const e in t)if(t.hasOwnProperty(e)){const o=t[e];void 0===this.obDataForm[i]&&(this.obDataForm[i]={}),this.obDataForm[i][e]=o}}else Array.isArray(t)&&(this.obDataForm[i]=t)}this.callDirFromSupport("setComponent",{list_component:t,list_view:""},s.ZP.cloneJson(this.obDataForm))},this.clearForm=()=>{this.obDataForm={},this.setState({follow:{hasFollow:!1,removeFollow:!1}}),this.showErrorFromServer(),this.callDirFromSupport("reload",{},this.obDataForm)},this.reload=e=>{void 0===e?this.callDirFromSupport("reload",{},this.obDataForm):this.callDirFromSupport("reload",{},e)},this.reloadComponent=e=>{this.callDirFromSupport("reloadComponent",{list_component:e})},this.clearTimeOut=()=>{this.callDirFromSupport("clearTimeOut",{},this.obDataForm)},this.componentIsLoaded=e=>{this.list_statusIsLoadingFromComponent++,this.list_statusIsLoadingFromComponent===this.list_isLoading&&(this.loading_final=!0,this.formStart())},this.clearError=()=>{this.callDirFromSupport("clearError","",{}),this.showError(!1)},this.callDirOneComponent=(e,t,i)=>{let o={};if(void 0===e)return o;if(this.list_component.length>0)for(let a=0;a<this.list_component.length;a++)if(this.list_component[a].hasOwnProperty("getInfoCheckRun")){let s=this.list_component[a].getInfoCheckRun();if(s.default.code===t&&this.list_component[a].hasOwnProperty(e)){o[s.default.code]=this.list_component[a][e](t,i);break}}},this.callDirFromSupport=(e,t,i)=>{let o=s.ZP.cloneJson(i);var a={};if(void 0===e)return a;let n=t.list_component||"";if(n=n.replace(/\w+\([^\\)]+\)/gm,";"),this.list_component.length>0)for(var r=0;r<this.list_component.length;r++)if(this.list_component[r].hasOwnProperty("getInfoCheckRun")){var l=this.list_component[r].getInfoCheckRun(),c=!1;if(",setCallBuildFormBack,setCallFormBack,clearError,checkValidate,reload,set,getElearning,clearTimeOut,".includes(","+e+",")?c=!0:(void 0!==t.list_view&&""!==t.list_view&&(";"+t.list_view+";").includes(";"+l.view.code+";")&&(c=!0),c||void 0===n||""!==n&&((";"+n+";").includes(";*;")||(";"+n+";").includes(";"+l.default.code+";"))&&(c=!0),c||void 0===t.codeHidden||""!==t.codeHidden&&(";"+t.codeHidden+";").includes(";"+l.default.codeHidden+";")&&(c=!0)),!0===l.block&&"setCMD"!==e&&(c=!1),!c)continue;if("setComponent"===e&&(e="set"),"reloadComponent"===e&&(e="reload"),this.list_component[r].hasOwnProperty(e)&&(a[l.default.code]=this.list_component[r][e](s.ZP.cloneJson(t),o),s.ZP.isDebug())){var d,h,u=new Error;null!==(d=this.debug_form.component)&&void 0!==d&&null!==(h=d[l.default.code])&&void 0!==h&&h.callDirFromSupport||(this.debug_form.component=s.ZP.setNodeJson(this.debug_form.component,l.default.code+".callDirFromSupport",[])),this.debug_form.component[l.default.code].callDirFromSupport.push({function_name:e,function_para:t,data:o,srack:u.stack.toString()})}}else s.ZP.log("not getInfoCheckRun");return a},this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.isDidSetData=()=>this.is_did_set_data,this.checkMasterData=()=>{var e=s.ZP.ms_getMasterData(this.key_form);void 0!==e&&l.ZP.quickPost([{txcode:"#sys:bo-masterdata-loadFollow",input:{master_data_start:e}}],l.ZP.createContext(this.obDataForm,this.state.infoA,this.state.infoA_parent,{}))},this.readMasterDataInfo=e=>{var t=this.state.follow;t.hasFollow=!0,t.removeFollow=!1,void 0!==e.table&&void 0!==e.data_key_value&&void 0!==this.obDataForm&&void 0!==e.pk&&void 0!==this.obDataForm[e.table]&&void 0!==this.obDataForm[e.table][e.pk]&&this.obDataForm[e.table][e.pk]===e.data_key_value&&(t.hasFollow=!1,t.removeFollow=!0),this.setState({follow:t})},this.showError=(e,t)=>{e?this.setState({hasError:"block"},(()=>{window.scroll(0,this.refs.hasError)})):(this.setState({hasError:"none",list_error:[]}),this.list_error_start=[])},this.toggleLoading=e=>{setTimeout((()=>{window.scrollTo(0,0),e?this.setState({status_loading:"none",status_form:"block"}):this.setState({status_loading:"block",status_form:"none"})}),2e3)},this.showErrorFromServer=function(e){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=t.state.list_error,a={};if(void 0!==e)if(e.length>0){o=[];let i=[];for(var n=0;n<e.length;n++){var r=e[n];if(["OverLimit","ApprovalRequired"].includes(r.key)&&!["BO_013001"].includes(t.state.infoA.form_code))continue;let _=s.ZP.getLang(r.typeError);void 0!==_&&""!==_||(_="warning");let f=!1;var l,c,d,h,u,p;if("form"===r.type)o.push({key:r.key,typeError:_,info:r.info,code:r.code||"",error_end:f,icon:t.showErrorFromServer_getIcon(r.key),dataItem:r.infoComponent?{view_code:null===(l=r.infoComponent)||void 0===l?void 0:l.view_code,component_code:null===(c=r.infoComponent)||void 0===c?void 0:c.component_code,layout_index:null===(d=r.infoComponent)||void 0===d?void 0:d.layout_index}:{}}),a[null===(h=r.infoComponent)||void 0===h?void 0:h.view_code]?a[null===(p=r.infoComponent)||void 0===p?void 0:p.view_code]++:a[null===(u=r.infoComponent)||void 0===u?void 0:u.view_code]=1;else"system"===r.type&&(i.includes(r.info)||(i.push(r.info),void 0!==r.code&&""!==r.code?o.push({key:r.key,info:r.info,typeError:_,code:r.code,error_end:f,icon:t.showErrorFromServer_getIcon(r.key),dataItem:{}}):o.push({key:r.key,info:r.info,typeError:_,code:"",error_end:f,icon:t.showErrorFromServer_getIcon(r.key),dataItem:{}})))}void 0!==o?void 0!==o[o.length-1]&&(o[o.length-1].error_end=!0):o=[]}else o=[];else o=[];o.length>0&&!1!==i?t.setState({hasError:"block",list_error:o,list_view_error:a},(()=>{document.getElementById("content").scrollTo(0,0)})):t.setState({hasError:"none",list_error:o,list_view_error:a}),t.list_error_start=e},this.getContext_FormOpenModal=()=>({list_error:this.list_error_start}),this.setStatusToForm_AndRunRule=e=>{var t=[];if(void 0!==this.state.ruleStatus[e])for(var i=0;i<this.state.ruleStatus[e].length;i++){let o=s.ZP.cloneJson(this.state.ruleStatus[e][i]);o.isStart=!0,t.push(o)}t.length>0&&P.callRule(t,{},{},this.state.infoA,this.state.infoA_parent,"isStart")},this.getNotification=()=>({dataFull:{title:s.ZP.getLang("error_occurr"),data:this.state.list_error.map(((e,t)=>({title:(null!==e.key&&""!==e.key?e.key+": ":"")+(!0===s.ZP.isDebug()&&""!==e.code?e.code+": ":"")+("object"===typeof e.info?"":e.info),list_error:"object"===typeof e.info?e.info:void 0,dataItem:e.dataItem,time:(0,c.jsx)(I.Z,{class:"pull-right display-ib",time:Date.now()},t)}))),abs_Click:this.handleJumpToComponentError}}),this.handleJumpToComponentError=async e=>{Object.keys(e).length>0&&e.constructor===Object&&(e.view_code&&e.layout_index?await this.list_ref_layout[e.layout_index].ref_layoutControl.hanndleChangeTabActive(e.view_code).then((()=>{this.jumpToComponentError(e)})):this.jumpToComponentError(e))},this.jumpToComponentError=e=>{let t=document.getElementById(e.component_code);t&&(t.scrollIntoView({behavior:"smooth"}),t.focus())},this.getTitleForm=()=>{var e,t;return null!==(e=this.props.infoA_parent)&&void 0!==e&&e.key_form?this.props.conf[0].name:(null===(t=this.props.infoA.lang_form)||void 0===t?void 0:t[s.ZP.getLangKey()])||this.props.infoA.des},this.setLoadingAction=e=>{this.setState({loading_action_flow:e})},this.getLoadingAction=()=>this.state.loading_action_flow,this.setLoadingRule=e=>{e?(this.count_loading++,this.setState({loading_action:e})):(this.count_loading--,this.count_loading||this.setState({loading_action:e}))},this.renderFormContent=()=>{const e=(0,_.RP)("uFormNotify");let t="hidden";return!1===this.state.is_loading_form&&(t=""),this.state.list_error.length>0&&this.ref_myFormScroll&&this.ref_myFormScroll.abs_ScrollTop&&this.ref_myFormScroll.abs_ScrollTop(),(0,c.jsxs)(o.Fragment,{children:[this.state.list_error.length>0&&(0,c.jsx)(e,(0,u.Z)({},this.getNotification())),this.state.data.map(((e,i)=>(0,c.jsx)("div",{style:{visibility:t},children:(0,c.jsx)(D,{ref:e=>{this.list_ref_layout[i]=e},index:i,list_view_error:this.state.list_view_error,btn_of_grid:this.state.btn_of_grid,name:e.name,des:e.des,lang:e.lang,lang_des:e.lang_des,inputType:e.inputtype,type:e.type,infoA:this.state.infoA,infoA_parent:this.state.infoA_parent,value:e.value,visibility:e.visibility,list_view:e.list_view,loading_form_end:!1===this.state.is_loading_form,jumpToComponentError:this.jumpToComponentError})},i)))]})},this.renderDebug=()=>{const e=(0,_.RP)("uButton"),t=(0,_.RP)("uForm"),i=(0,_.RP)("uLayout"),o=(0,_.RP)("uView");function a(e,t,i,o){return{config:{default:{title:e,type:t,class:"",icon:i},cmd:{disable:!1,isLoading:!1}}}}if(!s.ZP.isDebug())return null;const n=[{name:"Command line",color:"primary",icon:"code",key:"",onClick:()=>{var e=prompt("Enter code:","");e&&L(this,e)}},{name:"Debug component",color:"",icon:"adb",key:"",onClick:()=>{L(this,"debug")}},{name:"Clear Cache",color:"",icon:"delete",onClick:()=>{this.debug_form.component={},this.debug_form.rule={}}}];return(0,c.jsxs)(t,{dataFull:{config:{default:{title:"Debug",icon:"bug_report"}},title_button:{close_button:s.ZP.getLang("form_close_title"),add_form:s.ZP.getLang("form_add_title")},mode:{form_min:!0},cmd:{visibility:this.state.visibility}},children:[(0,c.jsx)(z,{ref:this.ref_debug}),(0,c.jsx)(i,{dataFull:{config:{title:this.props.form_code}},children:(0,c.jsx)(o,{class:"col-12",children:n.map((t=>(0,c.jsx)(e,{dataFull:(0,u.Z)((0,u.Z)({},a(t.name,t.color,t.icon,t.key)),{},{abs_Click:t.onClick})},t.name)))})})]})},this.closeForm=()=>{s.ZP.removeForm(this.key_form)},this.key_form=(0,s.cb)(),this.list_ref_layout=[],this.is_first_time_render=!1,null!=this.props.infoA.openOne&&"true"===this.props.infoA.openOne&&void 0!==this.props.form_code&&(this.key_form=this.props.form_code);var i=[],a={};if(void 0!==this.props.infoA.ruleStrong)for(var n=0;n<this.props.infoA.ruleStrong.length;n++){var r=this.props.infoA.ruleStrong[n];void 0!==r.inUse&&r.inUse&&(i[i.length]=r),void 0===a[r.isStatus]&&(a[r.isStatus]=[]),a[r.isStatus].push(r)}for(let o=0;o<i.length-1;o++)for(let e=o+1;e<i.length;e++)if(i[o].order>i[e].order){let t=s.ZP.cloneJson(i[o]);i[o]=s.ZP.cloneJson(i[e]),i[e]=t}for(const o in a)if(Object.hasOwnProperty.call(a,o)){const e=a[o];for(let t=0;t<e.length-1;t++)for(let i=t+1;i<e.length;i++)if(e[t].order>e[i].order){let o=s.ZP.cloneJson(e[t]);e[t]=s.ZP.cloneJson(e[i]),e[i]=o}a[o]=e}this.obDataForm={},void 0!==this.props.data_select&&(this.obDataForm=JSON.parse(JSON.stringify(this.props.data_select))),this.openFromFormOther=!1,void 0!==this.obDataForm.form_status&&"open_from_form_other"===this.obDataForm.form_status&&(this.openFromFormOther=!0),(0,s.ST)(this.props.form_code);var d=s.ZP.cloneJson(e.infoA);d.form_code=this.props.form_code,d.key_form=this.key_form,void 0===this.props.ofModal?d.ofModal=!1:d.ofModal=this.props.ofModal;var h="none",p="";void 0!==e.form_error&&(h="block",p=JSON.stringify(e.form_error)),this.formValidate=!1;var f=s.ZP.cloneJson(e.conf),g=s.ZP.role_getAllRoleRight(this.props.infoA.form_code);let m={mode:"",col_text:"",col_input:""};void 0!==this.props.infoA.mode_form&&(m=s.ZP.cloneJson(this.props.infoA.mode_form)),this.list_component_max=0;var v={},b={},y={};if(void 0!==g){for(var A in g)void 0!==g[A].view?!0!==g[A].view.install&&(v[A]=!1):void 0!==g[A].layout?!0!==g[A].layout.install&&(b[A]=!1):void 0!==g[A].component&&!0!==g[A].component.install&&(y[A]=!1);for(var O=0;O<f.length;O++)if(void 0===f[O].codeHidden||void 0===b[f[O].codeHidden]){if(void 0!==f[O].list_view)for(var w=f[O].list_view,C=0;C<w.length;C++)if(void 0===w[C].codeHidden||void 0===v[w[C].codeHidden]){if(void 0!==w[C].list_input)for(var S=w[C].list_input,M=0;M<S.length;M++)if(void 0!==S[M].default.codeHidden){if(void 0!==y[S[M].default.codeHidden]){S.splice(M,1),M--;continue}void 0!==S[M].default&&(S[M].default.mode_form=m),this.list_component_max++}}else w.splice(C,1),C--}else f.splice(O,1),O--;var T=this.analyticButton(f);this.list_component_max=this.list_component_max-T.length,this.reactTxt=[];var N=(0,s.C9)(this.props.form_code);void 0!==N&&(this.reactTxt=(e=>{for(var t=(new DOMParser).parseFromString(e,"text/html"),i=[],o=0;o<t.body.childNodes.length;o++)i[i.length]=k(t.body.childNodes[o]);return i})(N),this.reactTxt=x(this.reactTxt,e.conf,T)),this.state={is_loading_form:!0,is_first_time_render:!1,data:f,hasError:h,errorInfo:p,ruleStrong:i,ruleStatus:a,btn_of_grid:T,infoA:d,infoA_parent:s.ZP.cloneJson(e.infoA_parent),visibility:"",status_loading:"block",status_form:"none",list_isLoading:{},follow:{hasFollow:!1,removeFollow:!1},timeline_hidden:!1,list_error:[],list_view_error:[],isDebug:!1,isOpenModalDebug:!1,lang:{close_button:s.ZP.getLang("form_close_title"),add_form:s.ZP.getLang("form_add_title")}},this.queue_rules=[],this.list_error_start=[],this.list_component=[],this.list_layout=[],this.list_view=[],this.list_isLoading=0,this.list_statusIsLoadingFromComponent=0,this.loading_final=!1,this.form_didMount=!1,this.form_blockCheckMaxComponent=!0,this.debug_form={component:{},rule:[]},this.ref_debug=o.createRef(),this.list_rule_waiting=[],this.count_loading=0}}buildValidateForm(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getValidateForm();return this.showErrorFromServer(t,e),t.length>0&&this.formValidate}analyticButton(e){for(var t=[],i=0;i<e.length;i++){var o=e[i].list_view;if(void 0!==o)for(var a=0;a<o.length;a++)for(var s=o[a].list_input,n=0;n<s.length;n++)s[n].inputtype.includes("Button")&&void 0!==s[n].config.onTable&&""!==s[n].config.onTable.trim()&&(t[t.length]=s[n])}return t}putDataSetAdvanced(e,t){void 0!==e&&void 0!==e.code&&(this.obDataForm[e.code]=t)}checkCompareIsLoading(){for(var e in this.list_statusIsLoadingFromComponent)if(void 0===this.list_isLoading[e])return!1;return!0}componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.form_didMount=!0,this.formStart()}async formStart(){if(this.list_component_max===this.list_component.length&&this.form_didMount&&this.loading_final&&!this.form_blockCheckMaxComponent&&this.list_statusIsLoadingFromComponent===this.list_isLoading){let e=0;void 0!==this.props.data_select&&"{}"!==JSON.stringify(this.props.data_select)&&(this.putDataAll_andSet(this.props.data_select),e=1e3),setTimeout((async()=>{this.is_did_set_data=!0,await this.rule_runIsStart(),await this.runRuleFunctionQueue(),this.setState({is_loading_form:!1},(()=>{this.formDidStart()})),this.toggleLoading(!0)}),e)}}async formDidStart(){await this.ruleDidStart(),void 0!==this.props.set_call_form_back&&void 0!==this.state.infoA_parent&&setTimeout((()=>{var e=s.ZP.getFormAppAuto(this.state.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form,componentConfigDefault:this.props.componentConfigDefault},{})}),s.ZP.getTimeAddComponent())}showErrorFromServer_getIcon(e){switch(e){case"info":return"fa-info-circle";case"warning":return"fa-bell";case"success":return"fa-check-square-o";case"danger":return"fa-exclamation-triangle";default:return"fa-question"}}render(){const e=(0,_.RP)("uForm");let t="hidden";if(!1===this.is_first_time_render){this.is_first_time_render=!0;let e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}return!1===this.state.is_loading_form&&(t=""),(0,c.jsx)(o.Fragment,{children:(0,c.jsxs)(e,{dataFull:{config:{default:{title:this.getTitleForm(),icon:"folder"}},mode:{form_min:this.props.ofModal},title_button:{close_button:this.state.lang.close_button,add_form:this.state.lang.add_form},list_button_on_header:[],cmd:{visibility:this.state.visibility,isLoading:"hidden"===t||!0===this.state.loading_action||!0===this.state.loading_action_flow,isFavorite:!1},abs_Close:this.closeForm,abs_AddMenuBar:this.addMenu},ref:e=>{this.ref_myFormScroll=e},children:[this.renderDebug(),this.renderFormContent()]})})}}const B=U;var Y=i(6633);const H="_",V=["D","M","Y","h","m","s"];function W(e){if(!e)return"";let t=["D","M","Y","h","m","s"];for(let i in t){let o=t[i];e=e.replace(new RegExp(o,"g"),H)}return e}function G(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=!1,a="";if(void 0!==e&&""!==e)if(e.includes("_"))o=!0,a="jMaskInput_WrongFormat";else if("date"===t)(function(e,t){let i={};if(void 0===t||null===t||void 0===e||null===e)return{};for(let o in t){let a=t[o];V.includes(a)&&e[o]!==H&&(i[a]=i[a]||"",i[a]+=e[o])}Number.isNaN(i.D)||(i.D=parseInt(i.D));Number.isNaN(i.M)||(i.M=parseInt(i.M));Number.isNaN(i.Y)||(i.Y=parseInt(i.Y));if(i.D||i.M||i.Y){const{D:e,M:t,Y:o}=i;if(t<=0||t>12||e<=0||o<=0)return!1;let a=[0,31,28,31,30,31,30,31,31,30,31,30,31];return(o%400===0||o%100!==0&&o%4===0)&&(a[2]=29),e<=a[t]}return!1})(e,i)||(o=!0,a="jMaskInput_WrongFormat");return{isError:o,message:a}}var J=i(4200);const q={a:/[a-zA-Z]/,9:/\d/,h:/\d/,H:/\d/,m:/\d/,s:/\d/,"*":/./,_:/[a-zA-Z\d]/,L:/[a-zA-Z\d]/,".":/./,0:/\d/,z:/[a-zA-Z]/,Z:/[a-zA-Z ]/,A:/[A-Za-z0-9\\_]/},K={"#":"_"},X={0:{status:!0,reg_remove:/[^\d/]/g},L:{status:!0,reg_remove:/[^a-zA-Z\d]/g},z:{status:!0,reg_remove:/[^a-zA-Z]/g},Z:{status:!0,reg_remove:/[^a-zA-Z ]/g},".":{status:!0,reg_remove:""},A:{status:!0,reg_remove:/[^A-Za-z0-9\\_]/g}},$={"-":".{100}",EMAIL:".{100}",EMAIL_MULTI:".{500}"},ee=e=>K[e],te=e=>q[e],ie=e=>{let t=e[0];return X[t]},oe=e=>{var t,i;if(!e)return!1;let o=e[0];if(!0!==(null===(t=X[o])||void 0===t?void 0:t.status))return!1;let a=!0;for(const s of e)e[0]!==s&&(a=!1);return!0===(null===(i=ie(o))||void 0===i?void 0:i.status)&&a},ae=(e,t)=>{let i=[];const o=/(\\.|.)/g;let a;for(;null!==(a=o.exec(e));){a.index===o.lastIndex&&o.lastIndex++;const e=a[0],s=1===e.length?"regex":"const";let n={type:s,key:e};"regex"===s?te(e)?"date"===t&&/[^/:]/.test(e)?(n.reg=te("9"),n.value=e):(n.reg=te(e),n.value="_"):"date"===t&&/[^/:]/.test(e)?(n.reg=te("9"),n.value=e):ee(e)?(n.value=ee(e),n.type="static"):(n.value=e,n.type="const"):n.value=e[1],i.push(n)}return i},se=(e,t)=>{let i="";for(const o of e)i+="date"===t?o.key:o.value;return i},ne=(e,t)=>{let i="";for(const o of e)i+=o.key.includes("\\")?o.value:o.key;return i},re=(e,t,i,o,a,s)=>{if(!e||!t||!i)return"";let n="";if(!e)return"";switch(i){case"default":for(const o in t){let i=e[o];if("regex"===t[o].type){if(!1===t[o].reg.test(i))return"";n+=i}else"static"===t[o].type&&(n+=i)}break;case"date":let i=se(t);if("string"===o)n=a&&""!==a?(0,Y.Al)(e,i,a,s):(0,Y.w5)(e,i,s);else n=(0,Y.w5)(e,i,s);break;default:n=e}return n||0===n?n:""},le=(e,t,i,o,a)=>{if(!e&&0!==e||!t||!i)return"";let s="";const n=ne(t);switch(i){case"default":let i=0;for(const a in t)if("regex"===t[a].type)if(oe(n))s+=e[i]||"",i++;else{if(e[i]&&t[a].reg.test(e[i]))s+=e[i];else{if("OPTIMISTIC"!==o)return"";s+=t[a].value}i++}else"static"===t[a].type?(s+=t[a].value,t[a].value===e[i]&&i++):s+=t[a].value;break;case"date":let r=se(t);s=(0,Y.sx)(e,r,a);break;default:s=e}return s||""},ce=(e,t,i,o,a,s,n)=>{let r=re(e,t,i,a,s,n);return null!==o&&void 0!==o&&o.length?le(r,o,i):r},de=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,n=e;return null!==o&&void 0!==o&&o.length&&(n=re(e,o,i,s)),le(n,t,i,a,s)},he=()=>["SUN","MON","TUE","WED","THU","FRI","SAT"].map(((e,t)=>({title:e,type:"gray"}))),ue=e=>{e||(e=window.moment.utc().toDate().getMonth()+1);return["January","February","March","April","May","June","July","August","September","October","November","December"].map(((t,i)=>({title:t,selected:e-1===i})))},pe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1900,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2100,i=[];if(e<=t)for(let o=e;o<=t;o++)i.push(o);return i},_e=e=>{let t=window.moment.utc(e).toDate().getMonth()+1,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];(e=>e%400===0||e%100!==0&&e%4===0)(window.moment.utc(e).toDate().getFullYear())&&i[2]++;let o=[];for(let a=1;a<=i[t];a++)o.push(a);return o},fe=(e,t)=>{e||(e=Date.parse(window.moment.utc().toDate()));let i=window.moment.utc(e).toDate(),o=window.moment.utc((0,J.X7)(e,{M:-1})).toDate(),a=window.moment.utc((0,J.X7)(e,{M:1})).toDate(),s=Date.parse(o),n=Date.parse(a),r=_e(s),l=_e(e),c=_e(n),d=window.moment.utc([i.getFullYear(),i.getMonth(),1]).toDate(),h=window.moment.utc([i.getFullYear(),i.getMonth(),l.length]).toDate(),u=r.slice(r.length-d.getDay(),r.length),p=c.slice(0,6-h.getDay()),_=u.map((e=>{let t=String(e),a="gray",n=window.moment.utc(new Date(s).setDate(e)).valueOf();return e===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()&&(a="primary"),{title:t,type:a,value:n}})),f=l.map((t=>{let o=String(t),a="",s=window.moment.utc(new Date(e).setDate(t)).valueOf();return t===i.getDate()&&(a="primary"),{title:o,type:a,value:s}})),g=p.map((e=>{let t=String(e),o="gray",s=window.moment.utc(new Date(n).setDate(e)).valueOf();return e===i.getDate()&&a.getMonth()===i.getMonth()&&a.getFullYear()===i.getFullYear()&&(o="primary"),{title:t,type:o,value:s}})),m=_.concat(f);return m=m.concat(g),m};class ge extends o.Component{constructor(e){super(e),this.BuildPropsDefault=e=>{const{name:t,code:i,mask_format:o,abs_Blur:a}=e,s=e.mask_mode||"default",n=e.data_default||"",r=e.request||!1;return{default:{name:t,code:i,class:e.class||""},config:{data_default:n,mask_format:o,mask_data_format:"",value_type:"all",mask_mode:s},validate:{request:r},lang:{}}},this.getComponentContructor=(e,t)=>{let i=this.buildPropsSmooth(t);return{props_smooth:i,state_smooth:this.buildStateSmooth(i)}},this.buildPropsSmooth=e=>{let t=s.ZP.cloneJson(e);t.config=e.config;let i=(e=>{let t=/\${([^}]+)}/gm.exec(e);if(null!==t)try{let i=s.ZP.context_get(t[1])||"";e=e.replace(t[0],i)}catch(i){}return e})(t.config.data_default);var o;return i=((e,t)=>{let i=e,o=/libDate_cal\((.*),(.*)\)/gm.exec(i);if(null!==o)try{i=(0,J.X7)((0,Y.xY)(o[1]),JSON.parse(o[2]))}catch(n){}let a=/JF_DATE\.([^(]+)\(([^)]*)\)/gm.exec(i);if(null!==a)try{e=s.ZP.persist_convertCondition(e);let t=a[1],o=a[2].split(",");i=J.ZP[t].apply(null,o)}catch(n){}return i})(i),void 0!==i&&null!==i||(i=""),t.config.data_default=i,t.config.mask_format=(o=t.config.mask_format,$[o]||o),t.config.mask_format=(e=>{for(const t in q){let i,o=new RegExp(`\\${t}{(\\d+)}`,"g");for(;null!==(i=o.exec(e));){i.index===o.lastIndex&&o.lastIndex++;let a="";for(let e=0;e<Number(i[1]);e++)a+=t;e=e.replace(i[0],a)}}return e})(t.config.mask_format),t},this.buildStateSmooth=e=>{const t=e.config;let i=ae(t.mask_format,t.mask_mode),o=ae(t.mask_data_format,t.mask_mode),a=se(i,t.mask_mode),n=t.mask_mode,r={status:!1,reg_remove:""};if(oe(t.mask_format)){let e=ie(t.mask_format);void 0!==e&&(r.status=e.status,r.reg_remove=e.reg_remove)}const l=a,c=Date.parse(new Date);let d={mounth_data:ue(),year_data:pe(),day_data:he(),day_of_mounth_data:fe(c,c),date_view:c};return{value_type:t.value_type||"all",error_input:!1,lang_select:s.ZP.getLangKey(),component_title:e.default.name||"",CMD:{},value:"",mask_value:"",date_selected_cache:0,mask_mode:n,mask_format:l,mask_regs:i,mask_regs_to:o,mask_placeholder:a,free_style:r,date_picker:d}},this.getInfoErrror=()=>{var e;const{help_mess:t}=this.state;return t?{info:this.getErrorLang(this.state.help_mess),key:(null===(e=this.state.lang)||void 0===e?void 0:e[this.props_smooth.default.name])||this.props_smooth.default.name,infoComponent:this.props_smooth.default}:""},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props_smooth.infoView,default:this.props_smooth.default,layout:this.props_smooth.infoLayout,block:e.block}},this.getDataOOP=(e,t)=>this.data_select,this.getAdvanced=(e,t)=>this.maskInputGet(),this.setAdvanced=(e,t)=>{if(e.codeHidden){if(e.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(void 0!==this.props_smooth.config.data_view)var i="";void 0!==this.props_smooth.config.data_value&&(i=s.ZP.getOOP(this.data_select,this.props_smooth.config.data_value.trim())+""),this.maskInputSet(i,"enter_tab")}}else e.list_component&&(null!==t&&void 0!==t||(t=""),this.maskInputSet(t,"on_change"))},this.get=()=>this.maskInputGet(),this.getValue=()=>this.state.mask_value,this.set=e=>{this.maskInputSet(e,"on_change")},this.reload=(e,t)=>{const i=this.props_smooth.config;this.data_select={},this.maskInputSet(i.data_default)},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.maskInputSet=(e,t,i,o)=>{const{mask_regs:a,mask_regs_to:s,mask_mode:n}=this.state;let r={end_pos:0,start_pos:0,help_mess:"",mask_value:"",value:e},l=de(e,a,n,s);"date"===n&&(r.date_picker=((e,t,i)=>{e=e?new Date(e):window.moment.utc().toDate();const o=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));return{mounth_data:ue(o.getMonth()+1),year_data:pe(t,i),day_data:he(),day_of_mounth_data:fe(o.getTime()),date_view:e}})(e),Number(e)&&(l=de(Number(e),a,n,[]))),r.mask_value=l,r=Object.assign(r,o),this.setStateLogic(r,(()=>{i&&i()}))},this.maskInputGet=()=>{const{mask_regs:e,mask_regs_to:t,mask_value:i,mask_mode:o}=this.state;let a="";return this.state.free_style.status?i:(a=ce(i,e,o,"date"===o?[]:t),a)},this.maskInputClear=()=>{this.data_select={},this.setStateLogic({end_pos:0,start_pos:0,value:"",mask_value:"",help_mess:""},(()=>{}))},this.maskInputValidate=()=>{const{mask_value:e}=this.state;let t="",i=this.maskInputGet();return t=e&&!this.maskInputGet()?"jMaskInput_WrongFormat":function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[{title:"@VALUE",value:arguments.length>1?arguments[1]:void 0},{title:"@NOW",value:Date.parse(new Date)},{title:"@YEAR",value:31536e6.toString()},{title:"@MOUNTH",value:2592e6.toString()},{title:"@DAY",value:864e5.toString()},{title:"@HOURS",value:36e5.toString()},{title:"@MINUTE",value:6e4.toString()},{title:"@SECONDS",value:1e3.toString()}];for(const i of e){let{content:e,mess:o}=i;for(const i of t)e=e.replace(new RegExp(i.title,"g"),i.value);if(!1===s.ZP.checkDynamicConditionNoData(e))return o}return""}(this.props_smooth.validate.conditions,i),t},this.abs_calendar_changeMonth=e=>{const t=this.maskInputGet()||Date.parse(new Date),i=(0,J.X7)(t,{M:e});this.maskInputSet(i)},this.abs_calendar_submit=e=>{let t=this.state.date_picker.day_of_mounth_data[e].value;this.maskInputSet(t)},this.abs_calendar_chooseYear=e=>{const t=this.maskInputGet()||Date.parse(new Date),i=new Date(t).setFullYear(e);this.maskInputSet(i)},this.abs_calendar_changeYear=e=>{},this.abs_calendar_chooseMonth=e=>{const t=e,i=this.maskInputGet()||Date.parse(new Date),o=new Date(i).setMonth(t);this.maskInputSet(o)},this.abs_calendar_openCalendar=()=>{let e=this.maskInputGet();e&&this.maskInputSet(e,"","",{date_selected_cache:e})},this.abs_calendar_KeyUp=e=>{const t=this.maskInputGet()||Date.parse(new Date);let i,o=this.state.date_selected_cache;switch(e.key){case"ArrowLeft":i=(0,J.X7)(t,{d:-1}),this.maskInputSet(i);break;case"ArrowRight":i=(0,J.X7)(t,{d:1}),this.maskInputSet(i);break;case"ArrowUp":i=(0,J.X7)(t,{d:-7}),this.maskInputSet(i);break;case"ArrowDown":i=(0,J.X7)(t,{d:7}),this.maskInputSet(i);break;case"Enter":i=t,this.maskInputSet(i),this.ref_maskinput.current.abs_CloseCalendar();break;case"Escape":Number(o)!==Number(this.maskInputGet())?this.maskInputSet(o):this.ref_maskinput.current.abs_CloseCalendar()}},this.abs_calendar_today=()=>{const e=Date.parse(new Date);this.maskInputSet(e)},this.onEventKey=e=>{if("Delete"===e.key)this.maskInputClear();this.state.mask_mode},this.onClick=e=>{},this.onBlur=()=>{let e=this.maskInputValidate();void 0!==this.props.abs_Blur&&this.props.abs_Blur(),e&&this.maskInputSet("")},this.setLastPost=e=>{let t=e.target;this.state.start_pos=t.selectionStart,this.state.end_pos=t.selectionEnd},this.setPos=(e,t)=>{this.countInterVal=0,this.interValSetTimeOut&&(clearInterval(this.interValSetTimeOut),this.countInterVal=0),this.interValSetTimeOut=setTimeout((()=>{e.selectionStart=t,e.selectionEnd=t,this.countInterVal+=2}),2),this.countInterVal>300&&this.interValSetTimeOut&&clearInterval(this.interValSetTimeOut)},this.onChangeMaskInput=e=>{let{start_pos:t,mask_value:i,mask_regs:o,mask_placeholder:a}=this.state;const s=e.target;let n=s.selectionStart,r=s.value||"";const l=this.state.free_style;if(l.status)return r=r.replace(l.reg_remove,""),r=r.slice(0,o.length),void this.setStateLogic({mask_value:r});let c=r.slice(t,n)||"",d=0,h="",u=r.slice(0,n);for(let p=n;p<a.length;p++)p<n+(a.length-r.length)?u+=a[p]:u+=i[p]||a[p];i=u;for(const p in o){const e=o[p];"regex"===e.type||"const"===e.type&&e.value===c[d]?t<=p&&d<c.length?("const"===e.type&&e.value===c[d]||e.reg.test(c[d])?h+=c[d]||e.value:(h+=e.value,n--),d++):h+=i[p]||a[p]:(h+=e.value,t<=p&&d<c.length&&n++)}h===a&&(h=""),this.setStateLogic({mask_value:h},(()=>{this.setPos(s,n)}))},this.getErrorLang=e=>{switch(e){case"validateNumMin":return s.ZP.getLang(e).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(e).replace("{count}",this.state.validate.max);default:return s.ZP.getLang(e)}},this.getDataFullLogic=()=>(0,u.Z)((0,u.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChangeMaskInput,abs_Blur:this.onBlur,abs_Click:this.onClick,abs_KeyDown:this.setLastPost,abs_KeyUp:this.onEventKey,abs_MouseUp:this.setLastPost}),this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);if(i.disabled!==o.disabled||i.visible!==o.visible||i.block!==o.block){let e=this.state;e.CMD=o,this.setStateLogic(e)}},this.setStateLogic=(e,t)=>{this.prevStateLogic=s.ZP.cloneJson(this.state),this.state=Object.assign(this.state,e),t&&t(),this.props.abs_update&&this.props.abs_update()},this.prop_default=this.BuildPropsDefault(e),this.propertyConstructor={},this.data_debug={},this.app_debug=[],this.state={is_lookup:!1,is_error:!1,is_clicked:!1,help_mess:"",lang_select:"",title:"",CMD:{},end_pos:-1,start_pos:0,_type:"",value:"",mask_value:"",mask_format:"",mask_placeholder:"",mask_mode:"default",mask_regs:[],mask_regs_to:[],free_style:{status:!1,reg_remove:""},date_picker:{mounth_data:[],year_data:[],day_data:[],day_of_mounth_data:[],date_view:Date.parse(new Date)},date_selected_cache:0},this.ref_maskinput=o.createRef();const t=this.getComponentContructor({},this.prop_default);this.state=Object.assign(this.state,t.state_smooth),this.props_smooth=t.props_smooth}getConfigTemplate(){const{date_picker:e}=this.state;return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{subTitle_isShow:"date"===this.state.mask_mode,subTitle:`(${this.state.mask_placeholder})`,placeholder:this.state.CMD.disabled+""==="true"?" ":ne(this.state.mask_regs,this.props_smooth.config.mask_mode),title:this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.props_smooth.validate.request,icon:""},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:!0,error:{message:this.state.help_mess,type:""}},mode:{textAlign:"left",letterSpacing:"M"}},valueTitleHover:"true"!==String(this.state.CMD.disabled)?"":this.state.mask_value,value:this.state.mask_value,cmd:{isLock:!1},calendar_data:{value_current:"",today:{title:"Today"},config:{days_title:e.day_data},list_months:e.mounth_data,list_years:{value:new Date(e.date_view).getFullYear()||"",data:e.year_data},list_days:e.day_of_mounth_data},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_today:this.abs_calendar_today,abs_calendar_KeyUp:this.abs_calendar_KeyUp}}}const me=ge;class ve extends o.Component{constructor(e){super(e),this.clickRunNormallyHandler=e=>{this.LOGIC_DATE.setCMD("",{disabled:!0}),this.setState({radio_step_summary:"nor"})},this.clickNumberRunningHandler=e=>{this.LOGIC_DATE.setCMD("",{disabled:!1}),this.setState({radio_step_summary:"num"})},this.onBlurMaskInput=()=>{let{maskNumberRunning:e}=this.state;e.help_mess=G(e.mask_value,e.mode,e.defaultMask).message,this.setState({maskNumberRunning:e})},this.onClickMaskInput=()=>{let{maskNumberRunning:e}=this.state;e.help_mess="",e.error_input=!1,this.setState({maskNumberRunning:e})},this.setLastPosition=e=>{let{maskNumberRunning:t}=this.state;t.start_pos=e.target.selectionStart,t.end_pos=e.target.selectionEnd,this.setState({maskNumberRunning:t})},this.onChangeBatchDate=e=>{this.propsTemplate.stateData.stepSummary.date_time.dataFull=this.LOGIC_DATE.getDataFullLogic();let{maskNumberRunning:t}=this.state,i={mask_value:this.LOGIC_DATE.getDataFullLogic().value,newPosition:0};t.mask_value=i.mask_value;let{date_select:o,date_calculator:a}=this.state;G(i.mask_value,t.mode,t.defaultMask).isError||(o=(0,Y.ec)(i.mask_value,this.dateFormat),a=Math.round((o-this.state.working_date_long)/1e3/60/60/24),a<0&&(a=0)),this.setState({date_select:o,date_calculator:a,maskNumberRunning:t})},this.checkStepHandler=e=>{e.checked=!e.checked;let t=this.state.O9_job_process_refesh_table_summary,i={S:""};if(t.length>0){t.filter((t=>t.ordinal<e.ordinal)).forEach((e=>{i.S+=e.stepname+","}))}e.checked&&(i.S+=e.stepname+","),this.callAPI("POST_api_job_check",i).then((e=>{this.refeshForm()}))},this.changeKeyLanguage=e=>{let t={title_:s.ZP.getLang("jobProcess_title"),des_:s.ZP.getLang("jobProcess_des"),btn_start:s.ZP.getLang("jobProcess_btnStart"),btn_stop:s.ZP.getLang("jobProcess_btnStop"),btn_refresh:s.ZP.getLang("jobProcess_btnRefresh"),tab_summary:s.ZP.getLang("jobProcess_tabSummary"),tab_step_summary:s.ZP.getLang("jobProcess_tabStepSummary"),tab_step_details:s.ZP.getLang("jobProcess_tabStepDetails"),tab_error_details:s.ZP.getLang("jobProcess_tabErrorDetails"),batch_date:s.ZP.getLang("jobProcess_batchDate"),progress:s.ZP.getLang("jobProcess_progress"),run_normally:s.ZP.getLang("jobProcess_runNormally"),number_running:s.ZP.getLang("jobProcess_numberRunning"),days:s.ZP.getLang("jobProcess_days"),stop_at:s.ZP.getLang("jobProcess_stopAt"),select:s.ZP.getLang("jobProcess_select"),step_name:s.ZP.getLang("jobProcess_stepName"),comments:s.ZP.getLang("jobProcess_comments"),status:s.ZP.getLang("jobProcess_status"),status_description:s.ZP.getLang("jobProcess_statusDescription"),percent_started:s.ZP.getLang("jobProcess_percentStarted"),start_at:s.ZP.getLang("jobProcess_startAt"),end_at:s.ZP.getLang("jobProcess_endAt"),threads_created:s.ZP.getLang("jobProcess_threadsCreated"),threads_running:s.ZP.getLang("jobProcess_threadsRunning"),threads_compeleted:s.ZP.getLang("jobProcess_threadsCompeleted"),threads_canceled:s.ZP.getLang("jobProcess_threadsCanceled"),threads_failed:s.ZP.getLang("jobProcess_threadsFailed"),threads_id:s.ZP.getLang("jobProcess_threadsID"),total_threads:s.ZP.getLang("jobProcess_totalThreads"),total_started:s.ZP.getLang("jobProcess_totalStarted"),total_duration:s.ZP.getLang("jobProcess_totalDuration"),total_remaining:s.ZP.getLang("jobProcess_totalRemaining"),job_name:s.ZP.getLang("jobProcess_jobName"),read_count:s.ZP.getLang("jobProcess_readCount"),write_count:s.ZP.getLang("jobProcess_writeCount"),commit_count:s.ZP.getLang("jobProcess_commitCount"),read_skip_count:s.ZP.getLang("jobProcess_readSkipCount"),write_skip_count:s.ZP.getLang("jobProcess_writeSkipCount"),process_skip_count:s.ZP.getLang("jobProcess_processSkipCount"),rollback_count:s.ZP.getLang("jobProcess_rollbackCount"),exit_code:s.ZP.getLang("jobProcess_exitCode"),exit_message:s.ZP.getLang("jobProcess_exitMessage")};if(void 0!==e)return t;let i=this.state.infoA;i.title=s.ZP.getLang("jobProcess_title"),i.des=s.ZP.getLang("jobProcess_des"),i.lang_form.vi=s.ZP.getLang("jobProcess_title"),i.lang_form.en=s.ZP.getLang("jobProcess_title"),this.setState({languages:t,infoA:i})},this.callAPI=(e,t)=>{let i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return i[0].input=Object.assign(i[0].input,t),(0,N.Yr)(i,{}).then((e=>s.ZP.foGetData("data",e)))},this.componentDidMount=async()=>{s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.LOGIC_DATE.set(this.user_info.workingdate),this.LOGIC_DATE.setCMD("",{disabled:!0}),await this.callAPI("O9_job_process_create_table_summary").then((e=>{this.refeshForm()}))},this.reloadTableSummary=async()=>{let e=[];await this.callAPI("O9_job_process_refesh_table_summary").then((t=>{t&&(e=t.O9_job_process_refesh_table_summary,Array.isArray(e)||(e=[]))})),this.setState({O9_job_process_refesh_table_summary:e})},this.refeshForm=async()=>{let e=[],t="";await this.callAPI("O9_job_process_refesh_table_summary").then((t=>{t&&(e=t.O9_job_process_refesh_table_summary,Array.isArray(e)||(e=[]))})),await this.callAPI("O9_job_process_stop_error_mess").then((e=>{e&&(t=e.O9_job_process_stop_error_mess)})),this.setState({O9_job_process_refesh_table_summary:e,O9_job_process_stop_error_mess:t})},this.onClickStop=async()=>{await this.callAPI("O9_job_process_stop").then((e=>{this.setState({is_started:!1})}))},this.onClickRefresh=()=>{this.refeshForm(),this.setState({is_started:!1})},this.onClickStart=()=>{this.setState({is_started:!0},(()=>{let e=setInterval((()=>{let e=[];this.callAPI("O9_job_process_refesh_table_summary").then((t=>{t&&(e=t.O9_job_process_refesh_table_summary,Array.isArray(e)||(e=[])),this.setState({O9_job_process_refesh_table_summary:e})}))}),1e3),t=1;"num"===this.state.radio_step_summary&&(t=this.state.date_calculator),this.callAPI("O9_job_process_start",{days:t}).then((t=>{clearInterval(e),this.setState({is_started:!1}),this.refeshForm()}))}))},this.getProgress=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;for(let i=0;i<e.length;i++){const o=e[i];!0===o.checked&&100===o.percentstarted&&"S"===o.status&&t++}return Math.round(t/e.length*100)},this.onClickRowTableStepSummary=e=>{this.callAPI("O9_job_process_refesh_table_errror",e).then((e=>{let t=[];e&&(t=e.O9_job_process_refesh_table_errror,t&&Array.isArray(t)&&(t=t.filter((e=>void 0!==e[3]))),this.setState({O9_job_process_refesh_table_errror:t}))})),this.callAPI("O9_job_process_refesh_table_details",e).then((e=>{let t=[];e&&Array.isArray(e.O9_job_process_refesh_table_details)&&(t=e.O9_job_process_refesh_table_details),this.setState({O9_job_process_refesh_table_details:t})}))},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})};let t=this.changeKeyLanguage("start");this.key_form="016002",this.jobProcessForm=(0,_.Iq)("O9_jobProcess"),this.user_info=s.ZP.context_get("user_acc"),this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT");let i=(0,Y.FW)(this.user_info.workingdate,this.dateFormat);this.LOGIC_DATE=new me({abs_update:this.onChangeBatchDate,name:"From",code:"from",mask_format:"DD/MM/YYYY",mask_mode:"date",class:"col-md-3 col-sm-8"}),this.mappingKeyToIndex={buttons:{start:0,stop:1,refresh:2}},this.propsTemplate={stateData:this.getStateData(this.user_info,t)},this.state={maskNumberRunning:{defaultMask:this.dateFormat,mask:W(this.dateFormat),error_input:!1,help_mess:"",start_pos:0,end_pos:0,mask_value:i,value_type:"number",mode:"date"},visibility:"",error_details_data:[],step_details_data:[],step_summary_data:[],languages:t,is_started:!1,tab_active:1,infoA:{lang_form:{vi:s.ZP.getLang("jobProcess_title"),en:s.ZP.getLang("jobProcess_title")},title:"Job Process",des:"",openOne:"true",form_code:this.key_form,ofModal:!1},O9_job_process_refesh_table_summary:[],O9_job_process_refesh_table_errror:[],O9_job_process_refesh_table_details:[],radio_step_summary:"nor",date_select:this.user_info.workingdate,date_calculator:0,working_date:i,working_date_long:this.user_info.workingdate}}getStateData(e,t){return{form:{dataFull:{config:{default:{title:"Job Process"}},cmd:{visibility:""}}},listButton:[{dataFull:{config:{default:{title:t.btn_start,icon:"play_circle_outline"},cmd:{disable:!1}}},abs_Click:this.onClickStart},{dataFull:{config:{default:{title:t.btn_stop,icon:"pause_circle_outline"},cmd:{disable:!0}}},abs_Click:this.onClickStop},{dataFull:{config:{default:{title:t.btn_refresh,icon:"autorenew"},cmd:{disable:!1}}},abs_Click:this.onClickRefresh}],tab:[{id:"summary",title:"Summary"},{id:"stepSummary",title:"Step Summary"},{id:"stepDetail",title:"Step Details"},{id:"errorDetail",title:"Error Details"}],summary:{date_batch:{title:"Batch Date",value:(0,Y.FW)(e.workingdate,this.dateFormat)},percent:{title:"Progress",value:0}},stepSummary:{run_normal:{dataFull:{title:"Run Normally",value:!0,dataItem:{},abs_Click:this.clickRunNormallyHandler}},number_run:{dataFull:{title:"Number Running",value:!1,dataItem:{},abs_Click:this.clickNumberRunningHandler}},date_day:0,date_time:{dataFull:this.LOGIC_DATE.getDataFullLogic()},table_header:this.getTableHeaderConfigStepSummary(),table_data:[],table_config:this.getTableConfigStepSummary()},stepDetail:{table_header:this.getTableHeaderConfigStepDetail(t),table_data:[],table_config:this.getTableConfigStepDetail()},errorDetail:{table_header:this.getTableHeaderConfigErrorDetail(),table_data:[],table_config:this.getTableConfigErrorDetail()}}}getStatusIconStep(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S"){case"S":return"check_circle";case"F":return"remove_circle";case"N":return"add_circle";case"R":return"trending_up";default:return""}}getStatusColorStep(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S"){case"S":return"success";case"F":return"danger";default:return"info"}}getTableHeaderConfigStepSummary(){return{dataFull:{Header:{data:[{title:"Select",config:{width:"",isFrozen:!1}},{title:"Step Name",config:{width:"",isFrozen:!1}},{title:"Comment",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Percent Started",config:{width:"",isFrozen:!1}},{title:"Status Decs",config:{width:"",isFrozen:!1}},{title:"Start At",config:{width:"",isFrozen:!1}},{title:"End At",config:{width:"",isFrozen:!1}},{title:"Threads Created",config:{width:"",isFrozen:!1}},{title:"Threads Running",config:{width:"",isFrozen:!1}},{title:"Threads Completed",config:{width:"",isFrozen:!1}},{title:"Threads Canceled",config:{width:"",isFrozen:!1}},{title:"Threads Failed",config:{width:"",isFrozen:!1}},{title:"Total Threads",config:{width:"",isFrozen:!1}},{title:"Total Started",config:{width:"",isFrozen:!1}},{title:"Total Duration",config:{width:"",isFrozen:!1}},{title:"Total Remaining",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}}}getTableConfigStepSummary(){return[{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnIcon"},{type:"uTableColumnProgressBar"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]}getTableDataStepSummary(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>({data:[{value:e.checked,dataItem:e,abs_Click:this.checkStepHandler},{data:e.stepname},{data:e.comments},{data:[{val:this.getStatusIconStep(e.status),color:this.getStatusColorStep(e.status),title:"warning",class:"-round"}]},{percent:e.percentstarted},{data:e.statusdesc},{data:e.startat},{data:e.endat},{data:e.threadscreated},{data:e.threadsrunning},{data:e.threadscompleted},{data:e.threadscanceled},{data:e.threadsfailed},{data:e.totalthreads},{data:e.totalstarted},{data:e.totalduration},{data:e.totalstarted}],dataItem:e,abs_Click:this.onClickRowTableStepSummary})))}getTableHeaderConfigStepDetail(e){return{dataFull:{Header:{data:[{title:e.job_name,config:{width:"",isFrozen:!1}},{title:e.step_name,config:{width:"",isFrozen:!1}},{title:e.status,config:{width:"",isFrozen:!1}},{title:e.read_count,config:{width:"",isFrozen:!1}},{title:e.write_count,config:{width:"",isFrozen:!1}},{title:e.commit_count,config:{width:"",isFrozen:!1}},{title:e.read_skip_count,config:{width:"",isFrozen:!1}},{title:e.write_skip_count,config:{width:"",isFrozen:!1}},{title:e.process_skip_count,config:{width:"",isFrozen:!1}},{title:e.rollback_count,config:{width:"",isFrozen:!1}},{title:e.exit_code,config:{width:"",isFrozen:!1}},{title:e.exit_message,config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}}}getTableConfigStepDetail(){return[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}getTableDataStepDetail(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>[{data:e.jobname},{data:e.stepname},{data:e.status},{data:e.readcount},{data:e.writecount},{data:e.commitcount},{data:e.readskipcount},{data:e.writeskipcount},{data:e.processskipcount},{data:e.rollbackcount},{data:e.exitcode},{data:e.exitmessage}]))}getTableHeaderConfigErrorDetail(){return{dataFull:{Header:{data:[{title:"Thread id",config:{width:"",isFrozen:!1}},{title:"Step name",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Status description",config:{width:"",isFrozen:!1}}]},config:{mode:{noHeader:!1}}}}}getTableConfigErrorDetail(){return[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}getTableDataErrorDetail(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null===e?[]:e.map((e=>[{data:e},{data:e},{data:e},{data:e}]))}UNSAFE_componentWillUpdate(e,t){var i,o,a;this.propsTemplate.stateData.stepSummary.table_header.dataFull.dataEmpty={isShow:!(null!==(i=t.O9_job_process_refesh_table_summary)&&void 0!==i&&i.length),title:s.ZP.getLang("header_searchNoResult")},this.propsTemplate.stateData.stepSummary.table_data=this.getTableDataStepSummary(t.O9_job_process_refesh_table_summary),this.propsTemplate.stateData.stepDetail.table_header.dataFull.dataEmpty={isShow:!(null!==(o=t.O9_job_process_refesh_table_details)&&void 0!==o&&o.length),title:s.ZP.getLang("header_searchNoResult")},this.propsTemplate.stateData.stepDetail.table_data=this.getTableDataStepDetail(t.O9_job_process_refesh_table_details),this.propsTemplate.stateData.errorDetail.table_header.dataFull.dataEmpty={isShow:!(null!==(a=t.O9_job_process_refesh_table_errror)&&void 0!==a&&a.length),title:s.ZP.getLang("header_searchNoResult")},this.propsTemplate.stateData.errorDetail.table_data=this.getTableDataErrorDetail(t.O9_job_process_refesh_table_errror),this.propsTemplate.stateData.summary.percent.value=this.getProgress(t.O9_job_process_refesh_table_summary),t.radio_step_summary!==this.state.radio_step_summary&&(this.propsTemplate.stateData.stepSummary.run_normal.dataFull.value="nor"===t.radio_step_summary,this.propsTemplate.stateData.stepSummary.number_run.dataFull.value=!this.propsTemplate.stateData.stepSummary.run_normal.dataFull.value,this.propsTemplate.stateData.stepSummary.date_time.dataFull.config.cmd.disable="nor"===t.radio_step_summary),t.is_started!==this.state.is_started&&(this.propsTemplate.stateData.listButton[this.mappingKeyToIndex.buttons.start].dataFull.config.cmd.disable=!!t.is_started,this.propsTemplate.stateData.listButton[this.mappingKeyToIndex.buttons.stop].dataFull.config.cmd.disable=!t.is_started),this.propsTemplate.stateData.stepSummary.date_time.dataFull.value=t.maskNumberRunning.mask_value,this.propsTemplate.stateData.stepSummary.date_time.dataFull.config.cmd.error.message=s.ZP.getLang(t.maskNumberRunning.help_mess),t.date_calculator!==this.state.date_calculator&&(this.propsTemplate.stateData.stepSummary.date_day=t.date_calculator)}render(){if("none"===this.state.visibility)return null;const e=this.jobProcessForm;return(0,c.jsx)(e,{stateData:this.propsTemplate.stateData})}}const be=ve;var ye=i(9425);let Ae;class De extends o.Component{constructor(e){super(e),this.handleSelectTabID=e=>{this.setState({menu_select:e})},this.handelSearchInvokeLimit=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",a=this.state.invoke_limit_search_value;a[t]=o,this.setState({invoke_limit_search_value:a})},this.handelSearchApproveLimit=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",a=this.state.approve_limit_search_value;a[t]=o,this.setState({approve_limit_search_value:a})},this.handelChangeSearch=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",a=this.state.Col3_Assignment_Search;switch(a[t]=o,t){case"TBL_USER_CODE":this.stateData.column3.table_left.dataFull.Header.data[2].value_search=o;break;case"TBL_USER_NAME":this.stateData.column3.table_left.dataFull.Header.data[3].value_search=o;break;case"TBR_USER_CODE":this.stateData.column3.table_right.dataFull.Header.data[2].value_search=o;break;case"TBR_USER_NAME":this.stateData.column3.table_right.dataFull.Header.data[3].value_search=o}this.setState({Col3_Assignment_Search:a})},this.handelClearSearch=()=>{},this.getTableHeader=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return t.push({title:"Group",code:"module"}),t.push({title:"Caption",code:"tranname"}),e.forEach((e=>{t.push({title:e,code:e})})),t},this.abs_role_name_copying_select=(e,t,i)=>{this.setState({role_name_copying_selected:e.roleid,column2_role_select:e})},this.abs_Ckeck_invoke_approve_verification=(e,t)=>{this.callAPI("O9_Roles_Invoke_approve_Table_Change_save_approve",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then((e=>{let t=e.O9_Roles_Invoke_approve_Table_Change_save_approve;this.reloadTableWithMenuInvokeApprove(),1===t[0].type?s.ZP.showToast("Save",!0):s.ZP.showToast("Save",!1)}))},this.abs_Ckeck_invoke_approve_operation=(e,t)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let i=this.state.menu_invoke_aprrove.filter((t=>t.parentid===e.parentid));this.callAPI("O9_Roles_Invoke_approve_Table_Change_save",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then((o=>{let a=o.O9_Roles_Invoke_approve_Table_Change_save;if(this.reloadTableWithMenuInvokeApprove(!0),1===a[0].type){var n=[{txcode:"bo-update-roleBO-JWEBUI",input:{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0,menu_child:i}}];return(0,N.Yr)(n,{}).then((e=>{s.ZP.showToast("Save",!0),this.setState({isLoading:!1})}))}s.ZP.showToast(a[0].message,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.UNSAFE_componentWillUpdate=(e,t)=>{var i,o,a;let n=t.role_action||{};this.stateData.tab.data=this.stateData.tab.data.map((e=>(e.isShow=e.id===t.menu_select,e))),this.stateData.column3.table_in_role_data=t.table_user_profile_user_in_role.map((e=>({config:{value:!1},data:[{data:e.rolename},{data:e.user_code},{data:e.usrname}]}))),this.stateData.column1.tree_data.tree_data=null===(i=t.menu_invoke_aprrove)||void 0===i?void 0:i.map((e=>({title:e.caption,parent_id:e.parentid,is_open:!1,DOM_elm:null,id:e.cmdid,dataItem:e,abs_click:this.onClickTreeMenuInvokeApprove}))),this.stateData.column1.table_up.dataFull.Header.data=t.O9_Roles_InvokeApprove_Table_header.map((e=>({title:e.caption,config:{width:"",isFrozen:!1}}))),this.stateData.column1.table_down.dataFull.Header.data=s.ZP.cloneJson(this.stateData.column1.table_up.dataFull.Header.data),this.stateData.column1.table_down.dataFull.Header.data[1]&&(this.stateData.column1.table_down.dataFull.Header.data[1].title="Self Approve");let r=t.O9_Roles_InvokeApprove_Table_header;this.stateData.column1.table_up_config=r.map(((e,t)=>0===t?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:"uTableColumnCheckbox",config:{cmd:{disable:!1===n.save}}})),this.stateData.column1.table_down_config=this.stateData.column1.table_up_config;let l=t.O9_Roles_InvokeApprove_Table_body;this.stateData.column1.table_up_data=[],this.stateData.column1.table_down_data=[];for(let s=0;s<l.length;s++){let e=r.length-1,t=[],i=[];for(let o=0;o<e;o++)0===o&&(t.push({data:l[s+o].rolename}),i.push({data:l[s+o].rolename})),t.push({value:1===l[s+o].invoke,dataItem:l[s+o],abs_Click:this.abs_Ckeck_invoke_approve_operation}),i.push({value:1===l[s+o].approve,dataItem:l[s+o],abs_Click:this.abs_Ckeck_invoke_approve_verification});this.stateData.column1.table_up_data.push(t),this.stateData.column1.table_down_data.push(i),s=s+e-1}if(this.stateData.column2.role_name_adding.dataFull.config.cmd.disable=!0!==t.addAndRemove_btnAddClick,this.stateData.column2.listButton[2].dataFull.config.cmd.disable=!0===t.addAndRemove_btnSaveClick,this.stateData.column2.role_name_copying.dataFull.search_value=t["column2.role_name_copying"],this.stateData.column2.listButton[0].dataFull.config.cmd.visible=!1!==n.save,this.stateData.column2.listButton[2].dataFull.config.cmd.visible=!1!==n.save,this.stateData.column2.listButton[1].dataFull.config.cmd.visible=!1!==n.delete,this.stateData.column3.next.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.next_all.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.preview.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.preview_all.dataFull.config.cmd.disable=!1===n.save,!t.role_name_copying_selected&&t.O9_Roles_Add_and_Remove_Role_Name.length>0)this.setState({role_name_copying_selected:t.O9_Roles_Add_and_Remove_Role_Name[0].roleid});else{var c;this.stateData.column2.role_name_copying.dataFull.input_value=null===(c=t.column2_role_select)||void 0===c?void 0:c.rolename;let e=t.O9_Roles_Add_and_Remove_Role_Name.filter((e=>(e.rolename||"").toLowerCase().includes(t["column2.role_name_copying"].toLowerCase())));this.stateData.column2.role_name_copying.dataFull.data=e.map(((e,i)=>{let o=!1;return e.roleid===t.role_name_copying_selected&&(o=!0),{title:e.rolename,value:e,selected:o}}))}this.stateData.column2.role_name_adding.dataFull.value=t.role_name_adding_input;let d=this.unCheck_user_assign_table_left,h=this.unCheck_user_assign_table_right;!0===this.unCheck_user_assign_table_left&&(this.unCheck_user_assign_table_left=!1),!0===this.unCheck_user_assign_table_right&&(this.unCheck_user_assign_table_right=!1),this.stateData.column3.table_left_data=t.O9_Roles_User_assignment_table_left.filter((e=>e.user_code.includes(t.Col3_Assignment_Search.TBL_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBL_USER_NAME||""))).map(((e,t)=>{var i,o,a;return{data:[{data:t+1},{value:!0!==d&&((null===(i=this.stateData.column3.table_left_data[t])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_left,dataItem:{value:e,index:t}},{data:e.user_code},{data:e.usrname}],config:{value:!1}}})),this.stateData.column3.table_right_data=t.O9_Roles_User_assignment_table_right.filter((e=>e.user_code.includes(t.Col3_Assignment_Search.TBR_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBR_USER_NAME||""))).map(((e,t)=>{var i,o,a;return{data:[{data:t+1},{value:!0!==h&&((null===(i=this.stateData.column3.table_right_data[t])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_right,dataItem:{value:e,index:t}},{data:e.user_code},{data:e.usrname}],config:{value:!1}}})),this.stateData.column3.role_choose_left.dataFull.data=[],this.stateData.column3.role_choose_left.dataFull.search_value=t["column3.role_choose_left"],this.stateData.column3.role_choose_left.dataFull.input_value=null===(o=t.column3_role_left_select)||void 0===o?void 0:o.rolename,t.O9_RolesUser_assignment_Role_Name_Left.filter((e=>null!==e.rolename&&e.rolename.toLowerCase().includes(t["column3.role_choose_left"].toLowerCase()))).forEach(((e,i)=>{let o=!1;(t.column3_role_left_select.roleid===e.roleid||0===i&&void 0===t.column3_role_left_select.roleid)&&(o=!0),this.stateData.column3.role_choose_left.dataFull.data.push({title:e.rolename,value:{id:e.roleid,item:e,type:"left"},selected:o})})),this.stateData.column3.role_choose_right.dataFull.search_value=t["column3.role_choose_right"],this.stateData.column3.role_choose_right.dataFull.input_value=null===(a=t.column3_role_right_select)||void 0===a?void 0:a.rolename;let u=t.O9_RolesUser_assignment_Role_Name_Right.filter((e=>null!==e.rolename&&e.rolename.toLowerCase().includes(t["column3.role_choose_right"].toLowerCase())));this.stateData.column3.role_choose_right.dataFull.data=u.map(((e,i)=>{let o=!1;return(t.column3_role_right_select.roleid===e.roleid||0===i&&void 0===t.column3_role_right_select.roleid)&&(o=!0),{title:e.rolename,value:{id:e.roleid,item:e,type:"right"},selected:o}})),this.stateData.column4.listItem=t.O9_Roles_Invoke_limit_menu.map((e=>{let i=!1;return t.Invoke_role_selected===e.roleid&&(i=!0),{dataFull:{title:e.rolename,dataItem:e,selected:i},abs_Click:this.onClickMenuInvokeLimit}})),this.stateData.column4.table.dataFull.Header.data=t.invoke_limit_header.map((e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.invoke_limit_search_value[e.code]||""}))),this.stateData.column4.table_config=t.invoke_limit_header.map(((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===n.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),this.stateData.column4.table_data=t.O9_Roles_InvokeLimit_Table.filter((e=>{let i=!0;for(const o in t.invoke_limit_search_value){let a=t.invoke_limit_search_value[o];e[o].toLowerCase().includes(a.toLowerCase())||(i=!1)}return i})).map(((e,i)=>t.invoke_limit_header.map(((t,o)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:i,index_col:o,abs_Change:this.abs_change_invoke_table,abs_Submit:this.abs_submit_invoke_table}))))),this.stateData.column5.listItem=t.O9_Roles_Invoke_limit_menu.map((e=>{let i=!1;return t.Approve_role_selected===e.roleid&&(i=!0),{dataFull:{title:e.rolename,dataItem:e,selected:i},abs_Click:this.onClickMenuApproveLimit}})),this.stateData.column5.table.dataFull.Header.data=t.approve_limit_header.map((e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.approve_limit_search_value[e.code]||""}))),this.stateData.column5.table_config=t.approve_limit_header.map(((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===n.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),this.stateData.column5.table_data=t.O9_Roles_ApproveLimit_Table.filter((e=>{let i=!0;for(const o in t.approve_limit_search_value){let a=t.approve_limit_search_value[o];e[o].toLowerCase().includes(a.toLowerCase())||(i=!1)}return i})).map(((e,i)=>t.approve_limit_header.map(((t,o)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:i,index_col:o,abs_Change:this.abs_change_approve_table,abs_Submit:this.abs_submit_approve_table})))))},this.CheckAddRoleName=e=>{let t=e.target.value,i=!1;for(const o of this.stateData.column2.role_name_copying.dataFull.data)if(o.title===t||""===t){i=!0;break}""===t&&(i=!0),this.setState({addAndRemove_btnSaveClick:i,role_name_adding_input:t})},this.abs_Check_role_profile_user_assign_left=e=>{this.onClickAssignLeftRow(e);let t=this.stateData.column3.table_left_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_Check_role_profile_user_assign_right=e=>{let t=this.stateData.column3.table_right_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_CheckAll_left=()=>{let e=this.stateData.column3.table_left.dataFull.Header.data[1],t=0;this.stateData.column3.table_left_data.forEach((()=>{!0===e.data.value?this.stateData.column3.table_left_data[t].data[1].value=!1:this.stateData.column3.table_left_data[t].data[1].value=!0,t++})),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_CheckAll_right=()=>{let e=this.stateData.column3.table_right.dataFull.Header.data[1],t=0;this.stateData.column3.table_right_data.forEach((()=>{!0===e.data.value?this.stateData.column3.table_right_data[t].data[1].value=!1:this.stateData.column3.table_right_data[t].data[1].value=!0,t++})),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_change_approve_table=(e,t,i,o)=>{let a=e.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_ApproveLimit_Table;let l=r[t.row_idx][t.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let e=l.lastIndexOf(".");c=n.substring(0,e)+"."+n.substring(e,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[t.row_idx][t.header.code]=d,this.setState({O9_Roles_ApproveLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_change_invoke_table=(e,t,i,o)=>{let a=e.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_InvokeLimit_Table;let l=r[t.row_idx][t.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let e=l.lastIndexOf(".");c=n.substring(0,e)+"."+n.substring(e,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[t.row_idx][t.header.code]=d,this.setState({O9_Roles_InvokeLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_submit_invoke_table=(e,t,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_InvokeLimit_Table;this.callAPI("O9_Roles_InvokeLimit_Table_Change_save",{roleid:this.state.Invoke_role_selected,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then((i=>{if(1===i.O9_Roles_InvokeLimit_Table_Change_save[0].type){s.ZP.showToast("Save",!0);var o=[{txcode:"bo-update-roleFOJWEBUI",input:{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,cmdid:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code]),list_currency:this.state.invoke_limit_currency,list_ccr:t[e.row_idx]}}];return(0,N.Yr)(o,{}).then((e=>{}))}s.ZP.showToast("Save",!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.abs_submit_approve_table=(e,t,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_ApproveLimit_Table;this.callAPI("O9_Roles_ApproveLimit_Table_Change_save",{roleid:this.state.O9_Roles_Approve_limit_menu_select.roleid,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then((e=>{1===e.O9_Roles_ApproveLimit_Table_Change_save[0].type&&s.ZP.showToast("Save",!0)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.getRoleAction=(e,t)=>{let i=(0,s._M)(),o={};const a=t.list_layout;for(const s of i)for(const t of a)for(const i of t.list_view)for(const t of i.list_input){let i=t.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=e[s])||void 0===n||null===(r=n[t.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a}}return o},this.getAllRoleAction=()=>(0,N.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((e=>{var t=s.ZP.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",e)||{};void 0===i&&(i={});let o=this.getRoleAction(i,t);this.setState({role_action:o})})),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callAPI=(e,t)=>{this.state.isLoading||this.setState({isLoading:!0});var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return i[0].input=Object.assign(i[0].input,t),(0,N.Yr)(i,{}).then((t=>s.ZP.foGetData("data",t)||{[e]:[]})).finally((e=>{this.setState({isLoading:!1})}))},this.AddRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.add&&this.state.role_action.save){let e=this.state.role_name_copying_selected,t=this.state.role_name_adding_input;""!==e&&""!==t&&this.callAPI("O9_Roles_User_Add_and_remove_add",{roleid:e,new_name:t}).then((i=>{let o=i.O9_Roles_User_Add_and_remove_add;1===o[0].type?this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((i=>{let o=i.O9_Roles_Add_and_Remove_Role_Name,a=[{roleid:0,rolename:"All"}],n=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((e=>{a=a.concat(e.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:a})})),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((e=>{n=e.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:n})})),this.setState({O9_Roles_Add_and_Remove_Role_Name:o,isAdd_add_and_remove:!1,addAndRemove_btnAddClick:!1,role_name_adding_input:"",addAndRemove_btnSaveClick:!0});let r=-1;for(const e of o)e.rolename===t&&(r=e.roleid);var l=[{txcode:"bo-create-roleJWEBUI",input:{roleID:r,roleName:t,roleCopy:e}}];return(0,N.Yr)(l,{}).then((e=>{s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(o[0].message,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.onSearch=(e,t)=>{this.setState({[t]:e.target.value})},this.abs_Click_next=()=>{this.onClickAssignLeftToRightArray()},this.abs_Click_next_all=()=>{this.onClickAssignLeftToRightAll()},this.abs_Click_previous=()=>{this.onClickAssignRightToLeftArray()},this.abs_Click_previous_all=()=>{this.onClickAssignRightToLeftAll()},this.onClickAssignLeftToRightAll=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter((t=>0===e.filter((e=>e.user_code===t.data[1].dataItem.value.user_code)).length)).map((e=>e.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:i,data:t}).then((e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:t}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_left.dataFull.Header.data[1],a=0;this.stateData.column3.table_left_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_left_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignRightToLeftAll=()=>{let e=this.stateData.column3.table_right_data.map((e=>e.data[1].dataItem.value)),t=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:e}).then((e=>{let i=e.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then((e=>{let i=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:i}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(i[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let i=this.stateData.column3.table_right.dataFull.Header.data[1],o=0;this.stateData.column3.table_right_data.forEach((()=>{!0===i.data.value&&(this.stateData.column3.table_right_data[o].data[1].value=!1),o++})),i.data.value=!1},this.onClickAssignLeftToRightArray=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter((t=>!0===t.data[1].value&&0===e.filter((e=>e.user_code===t.data[1].dataItem.value.user_code)).length)).map((e=>e.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_left=!0,""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:i,data:t}).then((e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:t}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_left.dataFull.Header.data[1],a=0;this.stateData.column3.table_left_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_left_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignLeftRow=e=>{this.callAPI("user_profile_user_in_role",e.value).then((e=>{var t;let i=(null===e||void 0===e||null===(t=e.user_profile_user_in_role)||void 0===t?void 0:t.data)||[];this.setState({table_user_profile_user_in_role:i})}))},this.onClickAssignLeftToRight=e=>{let t=this.state.column3_role_right_select.roleid,i=this.state.O9_Roles_User_assignment_table_right;for(let o=0;o<i.length;o++){if(i[o].user_code===e.user_code)return}""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:t,data:[{usrid:e.usrid}]}).then((e=>{let i=e.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then((e=>{let i=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:i}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i[0].message,!1)}))},this.onClickAssignRightToLeft=e=>{let t=this.refs.ref_assignment_list_role_name_right.value;""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:[{usrid:e.usrid}]}).then((e=>{let i=e.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then((e=>{let i=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:i}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i[0].message,!1)}))},this.onClickAssignRightToLeftArray=e=>{let t=this.stateData.column3.table_right_data.filter((e=>!0===e.data[1].value)).map((e=>e.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-i,data:t}).then((e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:t}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_right.dataFull.Header.data[1],a=0;this.stateData.column3.table_right_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_right_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onChangeUserAgm=(e,t)=>{switch(e.type){case"left":if(e.id===this.state.column3_role_right_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then((t=>{let i=this.state.O9_RolesUser_assignment_Role_Name_Left.filter((t=>t.roleid===e.id)),o=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_left:o,column3_role_left_select:i[0]})}));break;case"right":if(e.id===this.state.column3_role_left_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then((t=>{let i=this.state.O9_RolesUser_assignment_Role_Name_Right.filter((t=>t.roleid===e.id)),o=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:o,column3_role_right_select:i[0]})}))}},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return t.length>16&&(t=t.slice(t.length-16,t.length)),(0,ye.Nx)(t,2)},this.getValueCurrency=e=>void 0===e||null===e||""===e?"":Number(e.replace(/,/g,"")),this.saveInvokeTable=()=>{},this.onClickMenuInvokeLimit=e=>{let t=e.dataFull.dataItem;this.callAPI("O9_Roles_InvokeLimit_Table",t).then((e=>{void 0===e&&(e={});let i=e.O9_Roles_InvokeLimit_Table;this.setState({O9_Roles_Invoke_limit_menu_select:t,Invoke_role_selected:t.roleid},(()=>{this.reloadTableInvokeLimit(i)}))}))},this.reloadTableInvokeLimit=e=>{if(e){let t=e.currency||[],i=e.data;for(const e of t)for(let t=0;t<i.length;t++){const o=i[t];o[e]=this.convertCurrency(o[e]),o.index_row=t}this.setState({O9_Roles_InvokeLimit_Table:i,invoke_limit_header:this.getTableHeader(t),invoke_limit_currency:t})}},this.onClickMenuApproveLimit=e=>{e=e.dataFull.dataItem,this.callAPI("O9_Roles_ApproveLimit_Table",e).then((t=>{if(t){let i=t.O9_Roles_ApproveLimit_Table,o=i.currency,a=i.data;for(const e of o)for(let t=0;t<a.length;t++){const i=a[t];i[e]=this.convertCurrency(i[e]),i.index_row=t}this.setState({O9_Roles_ApproveLimit_Table:a,O9_Roles_Approve_limit_menu_select:e,Approve_role_selected:e.roleid,approve_limit_header:this.getTableHeader(o)})}}))},this.onClickTreeMenuInvokeApprove=(e,t)=>{t=t.dataItem;let i=this.state.menu_invoke_aprrove;t.isOpen=!t.isOpen;let o=[],a=[];this.callAPI("O9_Roles_InvokeApprove_Table_header",t).then((e=>{o=[{cmdid:"0",caption:"Role Name"},{cmdid:"0",caption:"Self Invoke"}],o=o.concat(e.O9_Roles_InvokeApprove_Table_header),o=o.filter((e=>null!==e.cmdid)),this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then((e=>{a=e.O9_Roles_InvokeApprove_Table_body,this.setState({menu_invoke_aprrove:i,O9_Roles_InvokeApprove_Table_body:a,O9_Roles_InvokeApprove_Table_header:o,menu_invoke_aprrove_select:t})}))}))},this.removeRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.delete){let e=this.state.role_name_copying_selected;""!==e&&this.callAPI("O9_Roles_User_Add_and_remove_delete",{roleid:e}).then((t=>{let i=t.O9_Roles_User_Add_and_remove_delete;if(1===i[0].type){this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((e=>{let t=e.O9_Roles_Add_and_Remove_Role_Name,i=t[0],o=[{roleid:0,rolename:"All"}],a=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((e=>{o=o.concat(e.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:o})})),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((e=>{a=e.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:a})})),this.setState({O9_Roles_Add_and_Remove_Role_Name:t,isAdd_add_and_remove:!1,isDelete_add_and_remove:!1,delete_err:"",role_name_copying_selected:i.roleid,column2_role_select:i})})),s.ZP.showToast("Save",!0);var o=[{txcode:"bo-delete-roleJWEBUI",input:{roleID:e}}];return(0,N.Yr)(o,{}).then((e=>{}))}s.ZP.showToast(t.O9_Roles_User_Add_and_remove_delete[0].message,!1),this.setState({delete_err:i[0].message||""})}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},Ae=(0,_.Iq)("jwebui_roleProfile"),this.key_form="BO_015003003",this.data_key_form={BO_015003003:{title:"ADM-Roles Profile",col_id:"column1"},BO_015003008:{title:"ADM-Invoke Limit",col_id:"column4"},BO_015003009:{title:"ADM-Approve Limit",col_id:"column5"}},this.state={menu_parent_select:"ADM - Roles Profile",menu_select:this.data_key_form[this.key_form].col_id,"column3.role_choose_right":"","column3.role_choose_left":"","column2.role_name_copying":"",column3_role_left_select:0,role_name_adding_input:"",role_name_copying_selected:"",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,menu_invoke_aprrove:[],O9_Roles_InvokeApprove_Table_header:[],O9_Roles_InvokeApprove_Table_body:[],menu_invoke_aprrove_select:{},O9_Roles_Add_and_Remove_Role_Name:[],O9_Roles_Add_and_Remove_Role_Name_select:"",O9_Roles_User_assignment_table_left:[],O9_Roles_User_assignment_table_right:[],O9_RolesUser_assignment_Role_Name_Left:[],O9_RolesUser_assignment_Role_Name_Right:[],user_assignment_select:"",O9_Roles_Invoke_limit_menu:[],O9_Roles_Invoke_limit_menu_select:{},O9_Roles_Approve_limit_menu:[],O9_Roles_Approve_limit_menu_select:{},O9_Roles_InvokeLimit_Table:[],O9_Roles_ApproveLimit_Table:[],table_user_profile_user_in_role:[],invoke_limit_header:[],approve_limit_header:[],Col3_Assignment_Search:{},invoke_limit_search_value:{},approve_limit_search_value:{}},this.menu_form=[{title:"Roles Profile",child:["Invoke - Aprrove","Add - Remove","User Assignment"]},{title:"Invoke Limit",child:[]},{title:"Approve Limit",child:[]}],this.user_profile=s.ZP.context_get("user_acc"),this.stateData={form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],abs_select:(e,t)=>{this.setState({menu_select:t})}},column1:{tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},title_table_up:"OPEARTION",table_up:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_up_data:[],table_up_config:[],title_table_down:"VERIFICATION",table_down:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_down_data:[],table_down_config:[]},column4:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchInvokeLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}]},column5:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchApproveLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]},column2:{role_name_adding:{dataFull:{config:{default:{title:"Role Name (for adding)",type:"text",class:"col-sm-5",code_form_component:"role_name_adding"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:e=>{this.CheckAddRoleName(e)}},listButton:[{dataFull:{config:{default:{title:"Add",icon:"add_circle_outline"},cmd:{}}},abs_Click:()=>{this.setState({addAndRemove_btnAddClick:!0})}},{dataFull:{config:{default:{title:"Delete",icon:"highlight_off"},cmd:{}}},abs_Click:this.removeRoleName},{dataFull:{config:{default:{title:"Save",type:"primary",icon:"check_circle_outline"},cmd:{}}},abs_Click:this.AddRoleName}],role_name_copying:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Role Name (for copying or deleting)",type:"text",class:"col-sm-5",code_form_component:"role_name_copying"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:[],input_value:"123",search_value:""},abs_Change:this.abs_role_name_copying_select,abs_search:e=>{this.onSearch(e,"column2.role_name_copying")}}},column3:{table_in_role:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"User Code",config:{width:"",isFrozen:!1}},{title:"User Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_in_role_data:[{data:[{data:"2"},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_in_role_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_left},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_left_data:[{data:[{data:"2"},{value:!1,abs_Click:this.abs_Ckeck},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_right},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_right_data:[{data:[],config:{value:!0}}],table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.getAllRoleAction(),await this.callAPI("O9_Roles_InvokeApprove_Menu").then((e=>{let{O9_Roles_InvokeApprove_Menu:t}=e||[];this.setState({menu_invoke_aprrove:t})}));let e=[],t=[{roleid:0,rolename:"All"}],i=[],o=[],a=[];await this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((t=>{e=t.O9_Roles_Add_and_Remove_Role_Name})),await this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((e=>{t=t.concat(e.O9_RolesUser_assignment_Role_Name_Left)})),await this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((e=>i=e.O9_RolesUser_assignment_Role_Name_Right)),t.length>0&&await this.callAPI("O9_Roles_User_assignment_table",{roleid:0}).then((e=>{o=e.O9_Roles_User_assignment_table})),i.length>0&&await this.callAPI("O9_Roles_User_assignment_table",i[0]).then((e=>{a=e.O9_Roles_User_assignment_table})),this.setState({role_left:t[0],column3_role_right_select:i[0],column3_role_left_select:t[0],column2_role_select:e[0],O9_Roles_Add_and_Remove_Role_Name:e,O9_RolesUser_assignment_Role_Name_Left:t,O9_RolesUser_assignment_Role_Name_Right:i,O9_Roles_User_assignment_table_left:o,O9_Roles_User_assignment_table_right:a,O9_Roles_Invoke_limit_menu:e,O9_Roles_Approve_limit_menu:e,isLoading:!1},(()=>{}))}render(){const e=(0,_.RP)("uFormLoading");return(0,c.jsxs)(o.Fragment,{children:[this.state.isLoading?(0,c.jsx)(e,{}):null,(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(Ae,{stateData:this.stateData})})]})}convertCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e||0===e||(e=""),e=String(e);let t=e.replace(/,/g,"");return(0,ye.Nx)(t,2)}reloadTableWithMenuInvokeApprove(e){let t=this.state.menu_invoke_aprrove_select,i=[];this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then((t=>{i=t.O9_Roles_InvokeApprove_Table_body,this.setState({O9_Roles_InvokeApprove_Table_body:i,isLoading:!!e})}))}}const ke=De;let Oe;class we extends o.Component{constructor(e){super(e),this.handleSelectTabID=e=>{this.setState({menu_select:e})},this.handleSelectRoleTabID=e=>{this.setState({menu_role_select:e})},this.handelClearSearch=()=>{},this.getRoleAction=(e,t)=>{let i=(0,s._M)(),o={};const a=t.list_layout;for(const s of i)for(const t of a)for(const i of t.list_view)for(const t of i.list_input){let i=t.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=e[s])||void 0===n||null===(r=n[t.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a}}return o},this.getAllRoleAction=()=>(0,N.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((e=>{var t=s.ZP.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",e)||{};void 0===i&&(i={});let o=this.getRoleAction(i,t);this.setState({role_action:o})})),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callAPI=(e,t)=>{this.state.isLoading||this.setState({isLoading:!0});var i=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return i[0].input=Object.assign(i[0].input,t),(0,N.Yr)(i,{}).then((t=>{let i;return i=s.ZP.foGetData("data",t)?s.ZP.foGetData("data",t):{error_data:s.ZP.foGetData("infoError",t)||[[{info:"Action error!"}]],hasError:!0},i.hasError&&s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info),i||{[e]:[]}})).finally((e=>{this.setState({isLoading:!1})}))},this.handelChangeSearch=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",{role_user:a}=this.state;a.search_value[t]=o,this.setState({role_user:a},(()=>{this.onSearchAdmin("role_user",-1!==t.indexOf("TBL")?"left":"right")}))},this.handelChangeSearchWorkflow=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",{role_workflow:a}=this.state;a.search_value[t]=o,this.setState({role_workflow:a},(()=>{this.onSearchAdmin("role_workflow",-1!==t.indexOf("TBL")?"left":"right")}))},this.onSearchSelect=(e,t,i)=>{switch(t){case"role_user":let{role_user:t}=this.state;switch(i){case"left":t.list_item_left_search=e.target.value,this.setState({role_user:t});break;case"right":t.list_item_right_search=e.target.value,this.setState({role_user:t})}break;case"role_workflow":let{role_workflow:o}=this.state;switch(i){case"left":o.list_item_left_search=e.target.value,this.setState({role_workflow:o});break;case"right":o.list_item_right_search=e.target.value,this.setState({role_workflow:o})}}},this.handleInputRoleViewChange=(e,t)=>{let{role_view:i}=this.state;i[t]=e.target.value,this.setState({role_view:i})},this.onModifyViewRole=()=>{let{role_view:e}=this.state;e.btn_save=!1,e.btn_modify=!0,e.role_name_disable=!1,this.setState({role_view:e})},this.onSaveViewRole=()=>{let{role_view:e}=this.state;e.btn_save=!0,e.btn_modify=!1,e.role_name_disable=!0,this.setState({role_view:e},(()=>{this.callAPI("ncbs_role_update",{ncbs_role:e}).then((t=>{t&&t.ncbs_role&&"COMPLETED"===t.ncbs_role.status?s.ZP.showToast("Save",!0):(e.btn_save=!1,e.btn_modify=!0,e.role_name_disable=!1,this.setState({role_view:e}))}))}))},this.handleInputRoleAddChange=(e,t)=>{let{role_add:i}=this.state;i[t]=e.target.value,"role_code"===t&&(i[t]=i[t].toUpperCase()),this.setState({role_add:i})},this.onSaveAddRole=()=>{let{role_add:e}=this.state;e.btn_save=!0,e.role_code_disable=!0,e.role_name_disable=!0,this.setState({role_add:e},(()=>{this.callAPI("ncbs_role_add",{ncbs_role_add:e}).then((t=>{t&&t.ncbs_role_add&&"COMPLETED"===t.ncbs_role_add.status&&s.ZP.showToast("Save",!0),e.btn_save=!1,e.role_code_disable=!1,e.role_name_disable=!1,this.setState({role_add:e})}))}))},this.onSearch=(e,t)=>{this.page_index=1;let i={paging:{pagingIndex:this.page_index,recordItem:this.state.role.table_search.record_item}},{role:o}=this.state;o.table_search.paging_index=1,this.setState({role:o},(()=>{this.callAPI("ncbs_role_search",{search_text:this.state.role.search_text,table_search:i}).then((e=>{if(e&&e.ncbs_role_search){let t=e.ncbs_role_search;o.table_search.result_total=t.total_items,o.table_search.paging_index=1,this.page_index=1,o.table_search.data=this.getDataTableSearch(t.results),this.setState({role:o})}}))}))},this.pageIndexChangeRoleAdminSearch=(e,t,i)=>{switch(t){case"role_user":let{role_user:t}=this.state;switch(i){case"left":this.page_role_user_left_index=e,t.table_left.paging_index=e,this.setState({role_user:t},(()=>{let e={paging:{pagingIndex:this.page_role_user_left_index,recordItem:100},user_code:t.search_value.TBL_USER_CODE,user_name:t.search_value.TBL_USER_NAME};"all"===t.item_select_left?this.callAPI("ncbs_role_get_user",{ncbs_user_search:{user_code:t.search_value.TBL_USER_CODE,user_name:t.search_value.TBL_USER_NAME},table_search:e}).then((e=>{t.table_left.result_total=e.ncbs_user_search.total_items,t.table_left.data=e.ncbs_user_search.results,this.setState({role_user:t})})):this.callAPI("ncbs_role_get_user_role",{role_code:t.item_select_left,user_code:t.search_value.TBL_USER_CODE,user_name:t.search_value.TBL_USER_NAME,table_search:e}).then((e=>{t.table_left.result_total=e.ncbs_role_get_user_role.total_items,t.table_left.data=e.ncbs_role_get_user_role.results||[],this.setState({role_user:t})}))}));break;case"right":this.page_role_user_right_index=e,t.table_right.paging_index=e,this.setState({role_user:t},(()=>{let e={paging:{pagingIndex:this.page_role_user_right_index,recordItem:100}};this.callAPI("ncbs_role_get_user_role",{role_code:t.item_select_right,user_code:t.search_value.TBR_USER_CODE,user_name:t.search_value.TBR_USER_NAME,table_search:e}).then((e=>{t.table_right.result_total=e.ncbs_role_get_user_role.total_items,t.table_right.data=e.ncbs_role_get_user_role.results||[],this.setState({role_user:t})}))}))}break;case"role_workflow":let{role_workflow:o}=this.state;switch(i){case"left":this.page_role_workflow_left_index=e,o.table_left.paging_index=e,this.setState({role_workflow:o},(()=>{let e={paging:{pagingIndex:this.page_role_workflow_left_index,recordItem:100}};"all"===o.item_select_left?this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{workflow_id:o.search_value.TBL_WORKFLOW_ID,workflow_name:o.search_value.TBL_WORKFLOW_NAME},table_search:e}).then((e=>{o.table_left.result_total=e.ncbs_role_get_workflow.total_items,o.table_left.data=e.ncbs_role_get_workflow.results,this.setState({role_workflow:o})})):this.callAPI("ncbs_role_get_workflow_role",{role_code:o.item_select_left,workflow_id:o.search_value.TBL_WORKFLOW_ID,workflow_name:o.search_value.TBL_WORKFLOW_NAME,table_search:e}).then((e=>{o.table_left.result_total=e.ncbs_role_get_workflow_role.total_items,o.table_left.data=e.ncbs_role_get_workflow_role.results||[],this.setState({role_workflow:o})}))}));break;case"right":this.page_role_workflow_right_index=e,o.table_right.paging_index=e,this.setState({role_workflow:o},(()=>{let e={paging:{pagingIndex:this.page_role_workflow_right_index,recordItem:100}};this.callAPI("ncbs_role_get_workflow_role",{role_code:o.item_select_right,workflow_id:o.search_value.TBR_WORKFLOW_ID,workflow_name:o.search_value.TBR_WORKFLOW_NAME,table_search:e}).then((e=>{o.table_right.result_total=e.ncbs_role_get_workflow_role.total_items,o.table_right.data=e.ncbs_role_get_workflow_role.results||[],this.setState({role_workflow:o})}))}))}}},this.onSearchAdmin=(e,t)=>{switch(e){case"role_user":let{role_user:e}=this.state;switch(t){case"left":this.setState({role_user:e},(()=>{let t={paging:{pagingIndex:this.page_role_user_left_index,recordItem:100}};"all"===e.item_select_left?this.callAPI("ncbs_role_get_user",{ncbs_user_search:{user_code:e.search_value.TBL_USER_CODE,user_name:e.search_value.TBL_USER_NAME},table_search:t}).then((t=>{e.table_left.result_total=t.ncbs_user_search.total_items,e.table_left.data=t.ncbs_user_search.results,this.setState({role_user:e})})):this.callAPI("ncbs_role_get_user_role",{role_code:e.item_select_left,user_code:e.search_value.TBL_USER_CODE,user_name:e.search_value.TBL_USER_NAME,table_search:t}).then((t=>{e.table_left.result_total=t.ncbs_role_get_user_role.total_items,e.table_left.data=t.ncbs_role_get_user_role.results||[],this.setState({role_user:e})}))}));break;case"right":this.setState({role_user:e},(()=>{let t={paging:{pagingIndex:this.page_role_user_right_index,recordItem:100}};this.callAPI("ncbs_role_get_user_role",{role_code:e.item_select_right,user_code:e.search_value.TBR_USER_CODE,user_name:e.search_value.TBR_USER_NAME,table_search:t}).then((t=>{e.table_right.result_total=t.ncbs_role_get_user_role.total_items,e.table_right.data=t.ncbs_role_get_user_role.results||[],this.setState({role_user:e})}))}))}break;case"role_workflow":let{role_workflow:i}=this.state;switch(t){case"left":this.setState({role_workflow:i},(()=>{let e={paging:{pagingIndex:this.page_role_workflow_left_index,recordItem:100}};"all"===i.item_select_left?this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{workflow_id:i.search_value.TBL_WORKFLOW_ID,workflow_name:i.search_value.TBL_WORKFLOW_NAME},table_search:e}).then((e=>{i.table_left.result_total=e.ncbs_role_get_workflow.total_items,i.table_left.data=e.ncbs_role_get_workflow.results,this.setState({role_workflow:i})})):this.callAPI("ncbs_role_get_workflow_role",{role_code:i.item_select_left,workflow_id:i.search_value.TBL_WORKFLOW_ID,workflow_name:i.search_value.TBL_WORKFLOW_NAME,table_search:e}).then((e=>{i.table_left.result_total=e.ncbs_role_get_workflow_role.total_items,i.table_left.data=e.ncbs_role_get_workflow_role.results||[],this.setState({role_workflow:i})}))}));break;case"right":this.setState({role_workflow:i},(()=>{let e={paging:{pagingIndex:this.page_role_workflow_right_index,recordItem:100}};this.callAPI("ncbs_role_get_workflow_role",{role_code:i.item_select_right,workflow_id:i.search_value.TBR_WORKFLOW_ID,workflow_name:i.search_value.TBR_WORKFLOW_NAME,table_search:e}).then((e=>{i.table_right.result_total=e.ncbs_role_get_workflow_role.total_items,i.table_right.data=e.ncbs_role_get_workflow_role.results||[],this.setState({role_workflow:i})}))}))}}},this.pageRecordChangeRoleSearch=e=>{this.page_index=1;let{role:t}=this.state;t.table_search.record_item=this.record[e],t.table_search.paging_index=1,this.setState({role:t},(()=>{let e={paging:{pagingIndex:this.page_index,recordItem:this.state.role.table_search.record_item}};this.callAPI("ncbs_role_search",{search_text:this.state.role.search_text,table_search:e}).then((e=>{if(e&&e.ncbs_role_search){let i=e.ncbs_role_search;t.table_search.result_total=i.total_items,t.table_search.data=this.getDataTableSearch(i.results),this.setState({role:t})}}))}))},this.pageIndexChangeRoleSearch=e=>{this.page_index=e;let{role:t}=this.state;t.table_search.paging_index=e,this.setState({role:t},(()=>{let e={paging:{pagingIndex:this.page_index,recordItem:this.state.role.table_search.record_item}};this.callAPI("ncbs_role_search",{search_text:this.state.role.search_text,table_search:e}).then((e=>{if(e&&e.ncbs_role_search){let i=e.ncbs_role_search;t.table_search.result_total=i.total_items,t.table_search.data=this.getDataTableSearch(i.results),this.setState({role:t})}}))}))},this.removeItemTable=e=>{let t={title:s.ZP.getLang("sysConfirmDelTitle"),content:s.ZP.getLang("sysConfirmDelContent")};s.ZP.confirmInfo(t,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],void 0,(t=>{t&&this.callAPI("ncbs_role_delete",{ncbs_role_search:e}).then((e=>{e&&"COMPLETED"===e.ncbs_role_search.status&&(s.ZP.showToast("Delete",!0),this.onSearch())}))}))},this.handleCheckTable=e=>{let{role_user:t}=this.state;switch(e.type){case"left":for(let i=0;i<t.table_left.data.length;i++){if(t.table_left.data[i].user_code===e.value.user_code){t.table_left.data[i].isCheck=!t.table_left.data[i].isCheck,!0===t.table_left.data[i].isCheck?t.number_item_check_left++:t.number_item_check_left--;break}}break;case"right":for(let i=0;i<t.table_right.data.length;i++){if(t.table_right.data[i].user_code===e.value.user_code){t.table_right.data[i].isCheck=!t.table_right.data[i].isCheck,!0===t.table_right.data[i].isCheck?t.number_item_check_right++:t.number_item_check_right--;break}}}this.setState({role_user:t})},this.handleCheckTableWorkflow=e=>{let{role_workflow:t}=this.state;switch(e.type){case"left":for(let i=0;i<t.table_left.data.length;i++){if(t.table_left.data[i].workflow_id===e.value.workflow_id){t.table_left.data[i].isCheck=!t.table_left.data[i].isCheck,!0===t.table_left.data[i].isCheck?t.number_item_check_left++:t.number_item_check_left--;break}}break;case"right":for(let i=0;i<t.table_right.data.length;i++){if(t.table_right.data[i].workflow_id===e.value.workflow_id){t.table_right.data[i].isCheck=!t.table_right.data[i].isCheck,!0===t.table_right.data[i].isCheck?t.number_item_check_right++:t.number_item_check_right--;break}}}this.setState({role_workflow:t})},this.viewItem=e=>{let{role_view:t}=this.state;t.role_code=e.role_code,t.role_name=e.role_name,t.btn_modify=!1,this.setState({menu_role_select:"role_view",role_view:t})},this.handleRoleSearch=e=>{let{role:t}=this.state;t.search_text=e.target.value,this.setState({role:t})},this.getListItemSelect=e=>{let t=[];for(let i=0;i<e.length;i++){const o=e[i];o.isCheck&&t.push(o)}return t},this.abs_Click_next=()=>{let{role_user:e}=this.state,t=[],i=this.getListItemSelect(e.table_left.data);i.length>0&&(t=this.getDataRoleUserAdd(i,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_add_user",{data_array:t}).then((e=>{e&&e.ncbs_role_add_user&&"COMPLETED"===e.ncbs_role_add_user.status&&(s.ZP.showToast("Add Role",!0),this.resetTableRoleUser())})):s.ZP.showToast("Add Role",!1)},this.abs_Click_next_all=()=>{let{role_user:e}=this.state,t=[];e.table_left.data.length>0&&(t=this.getDataRoleUserAdd(e.table_left.data,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_add_user",{data_array:t}).then((e=>{e&&e.ncbs_role_add_user&&"COMPLETED"===e.ncbs_role_add_user.status&&(s.ZP.showToast("Add Role",!0),this.resetTableRoleUser())})):s.ZP.showToast("Add Role",!1)},this.abs_Click_previous=()=>{let{role_user:e}=this.state,t=[],i=this.getListItemSelect(e.table_right.data);i.length>0&&(t=this.getDataRoleUserAdd(i,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_delete_user",{data_array:t}).then((e=>{e&&e.ncbs_role_delete_user&&"COMPLETED"===e.ncbs_role_delete_user.status&&(s.ZP.showToast("Delete Role",!0),this.resetTableRoleUser())})):s.ZP.showToast("Delete Role",!1)},this.abs_Click_previous_all=()=>{let{role_user:e}=this.state,t=[];e.table_right.data.length>0&&(t=this.getDataRoleUserAdd(e.table_right.data,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_delete_user",{data_array:t}).then((e=>{e&&e.ncbs_role_delete_user&&"COMPLETED"===e.ncbs_role_delete_user.status&&(s.ZP.showToast("Delete Role",!0),this.resetTableRoleUser())})):s.ZP.showToast("Delete Role",!1)},this.abs_Click_next_workflow=()=>{let{role_workflow:e}=this.state,t=[],i=this.getListItemSelect(e.table_left.data);i.length>0&&(t=this.getDataRoleWorkflowAdd(i,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_add_workflow",{data_array:t}).then((e=>{e&&e.ncbs_role_add_workflow&&"COMPLETED"===e.ncbs_role_add_workflow.status&&(s.ZP.showToast("Add Workflow",!0),this.resetTableRoleWorkflow())})):s.ZP.showToast("Add Workflow",!1)},this.abs_Click_next_all_workflow=()=>{let{role_workflow:e}=this.state,t=[];e.table_left.data.length>0&&(t=this.getDataRoleWorkflowAdd(e.table_left.data,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_add_workflow",{data_array:t}).then((e=>{e&&e.ncbs_role_add_workflow&&"COMPLETED"===e.ncbs_role_add_workflow.status&&(s.ZP.showToast("Add Workflow",!0),this.resetTableRoleWorkflow())})):s.ZP.showToast("Add Workflow",!1)},this.abs_Click_previous_workflow=()=>{let{role_workflow:e}=this.state,t=[],i=this.getListItemSelect(e.table_right.data);i.length>0&&(t=this.getDataRoleWorkflowAdd(i,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_delete_workflow",{data_array:t}).then((e=>{e&&e.ncbs_role_delete_workflow&&"COMPLETED"===e.ncbs_role_delete_workflow.status&&(s.ZP.showToast("Delete Workflow",!0),this.resetTableRoleWorkflow())})):s.ZP.showToast("Delete Workflow",!1)},this.abs_Click_previous_all_workflow=()=>{let{role_workflow:e}=this.state,t=[];e.table_right.data.length>0&&(t=this.getDataRoleWorkflowAdd(e.table_right.data,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_delete_workflow",{data_array:t}).then((e=>{e&&e.ncbs_role_delete_workflow&&"COMPLETED"===e.ncbs_role_delete_workflow.status&&(s.ZP.showToast("Delete Workflow",!0),this.resetTableRoleWorkflow())})):s.ZP.showToast("Delete Workflow",!1)},this.onChangeUserAgm=(e,t)=>{let{role_user:i}=this.state;switch(e.type){case"left":if(e.role_code===i.item_select_left)break;i.item_select_left=e.role_code,this.page_role_user_left_index=1;let t={paging:{pagingIndex:this.page_role_user_left_index,recordItem:100}};i.table_left.page_index=1,this.setState({role_user:i},(()=>{"all"===i.item_select_left?this.callAPI("ncbs_role_get_user",{ncbs_user_search:{search_text:""},table_search:t}).then((e=>{i.table_left.result_total=e.ncbs_user_search.total_items,i.table_left.data=e.ncbs_user_search.results||[],i.number_item_check_left=0,i.table_left.data.length>0?i.btn_next_all_disable=!1:i.btn_next_all_disable=!0,this.setState({role_user:i})})):this.callAPI("ncbs_role_get_user_role",{role_code:e.role_code,table_search:t}).then((e=>{i.table_left.result_total=e.ncbs_role_get_user_role.total_items,i.table_left.data=e.ncbs_role_get_user_role.results||[],i.table_left.data.length>0?i.btn_next_all_disable=!1:i.btn_next_all_disable=!0,i.number_item_check_left=0,this.setState({role_user:i})}))}));break;case"right":if(e.role_code===i.item_select_right)break;let o={paging:{pagingIndex:this.page_role_user_right_index,recordItem:100}};this.page_role_user_right_index=1,i.table_right.page_index=1,i.item_select_right=e.role_code,this.setState({role_user:i},(()=>{this.callAPI("ncbs_role_get_user_role",{role_code:e.role_code,table_search:o}).then((e=>{i.table_right.result_total=e.ncbs_role_get_user_role.total_items,i.table_right.data=e.ncbs_role_get_user_role.results||[],i.number_item_check_right=0,i.table_right.data.length>0?i.btn_preview_all_disable=!1:i.btn_preview_all_disable=!0,this.setState({role_user:i})}))}))}},this.onChangeWorkflowAgm=(e,t)=>{let{role_workflow:i}=this.state;switch(e.type){case"left":if(e.role_code===i.item_select_left)break;i.item_select_left=e.role_code,this.page_role_workflow_left_index=1;let t={paging:{pagingIndex:this.page_role_workflow_left_index,recordItem:100}};i.table_left.page_index=1,this.setState({role_workflow:i},(()=>{"all"===i.item_select_left?this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{search_text:""},table_search:t}).then((e=>{i.table_left.result_total=e.ncbs_role_get_workflow.total_items,i.table_left.data=e.ncbs_role_get_workflow.results||[],i.number_item_check_left=0,i.table_left.data.length>0?i.btn_next_all_disable=!1:i.btn_next_all_disable=!0,this.setState({role_workflow:i})})):this.callAPI("ncbs_role_get_workflow_role",{role_code:e.role_code,table_search:t}).then((e=>{i.table_left.result_total=e.ncbs_role_get_workflow_role.total_items,i.table_left.data=e.ncbs_role_get_workflow_role.results||[],i.number_item_check_left=0,i.table_left.data.length>0?i.btn_next_all_disable=!1:i.btn_next_all_disable=!0,this.setState({role_workflow:i})}))}));break;case"right":if(e.role_code===i.item_select_right)break;let o={paging:{pagingIndex:this.page_role_workflow_right_index,recordItem:100}};this.page_role_workflow_right_index=1,i.table_right.page_index=1,i.item_select_right=e.role_code,this.setState({role_workflow:i},(()=>{this.callAPI("ncbs_role_get_workflow_role",{role_code:e.role_code,table_search:o}).then((e=>{i.table_right.result_total=e.ncbs_role_get_workflow_role.total_items,i.table_right.data=e.ncbs_role_get_workflow_role.results||[],i.number_item_check_right=0,i.table_right.data.length>0?i.btn_preview_all_disable=!1:i.btn_preview_all_disable=!0,this.setState({role_workflow:i})}))}))}},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return t.length>16&&(t=t.slice(t.length-16,t.length)),(0,ye.Nx)(t,2)},this.getValueCurrency=e=>void 0===e||null===e||""===e?"":Number(e.replace(/,/g,"")),this.saveInvokeTable=()=>{},Oe=(0,_.Iq)("ncbs_role_management"),this.key_form="ncbs_role_management",this.data_key_form={ncbs_role_management:{title:"Role Management",col_id:"column1"}},this.page_index=0,this.page_role_user_left_index=0,this.page_role_user_right_index=0,this.page_role_workflow_left_index=0,this.page_role_workflow_right_index=0,this.data_tab_global=[{id:"column1",title:"Role",isShow:!0},{id:"column2",title:"Role-User"},{id:"column3",title:"Role-Workflow"}],this.data_tab_column1=[{id:"role_search",title:"Search",isShow:!0},{id:"role_add",title:"Add"},{id:"role_view",title:"View"}],this.data_role_user_logic=[],this.state={menu_parent_select:"Role Management",menu_select:this.data_key_form[this.key_form].col_id,menu_role_select:"role_search",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,role:{search_text:"",table_search:{paging_index:1,result_total:0,data:[],record_item:5}},role_add:{role_code:"",role_name:"",btn_save:!1,role_code_disable:!1,role_name_disable:!1},role_view:{role_code:"",role_name:"",btn_modify:!0,btn_save:!0,role_name_disable:!0},role_user:{list_item_left:[],list_item_left_search:"",item_select_left:"all",table_left:{data:[],paging_index:1,result_total:0},table_right:{data:[],paging_index:1,result_total:0},search_value:{TBR_USER_CODE:"",TBR_USER_NAME:"",TBL_USER_CODE:"",TBL_USER_NAME:""},list_item_right:[],list_item_right_search:"",item_select_right:"",number_item_check_left:0,number_item_check_right:0,btn_next_disable:!0,btn_preview_disable:!0,btn_next_all_disable:!0,btn_preview_all_disable:!0},role_workflow:{list_item_left:[],list_item_left_search:"",item_select_left:"all",table_left:{data:[],paging_index:1,result_total:0},table_right:{data:[],paging_index:1,result_total:0},search_value:{TBR_WORKFLOW_ID:"",TBR_WORKFLOW_NAME:"",TBL_WORKFLOW_ID:"",TBL_WORKFLOW_NAME:""},list_item_right:[],list_item_right_search:"",item_select_right:"",number_item_check_left:0,number_item_check_right:0,btn_next_disable:!0,btn_preview_disable:!0,btn_next_all_disable:!1,btn_preview_all_disable:!1}},this.menu_form=[{title:"Role Management",child:["Role","Role-User","Role-Workflow"]}],this.user_profile=s.ZP.context_get("user_acc"),this.record=[5,10,20,50],this.record_10=[100]}getRecordPageConfig(e){return this.record.map((t=>({number:t,selected:e===t})))}getRecordPage_10Config(e){return this.record_10.map((t=>({number:t,selected:e===t})))}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.setState({isLoading:!1})}async getDataRoleUser(){let{role_user:e}=this.state;this.page_role_user_left_index=this.page_role_user_right_index=1,e.list_item_left=[{role_code:"all",role_name:"All"}],e.list_item_right=[];e.item_select_left="all",await this.callAPI("ncbs_role_search",{search_text:"",table_search:{paging:{pagingIndex:1,recordItem:100}}}).then((t=>{t&&!t.hasError&&(e.list_item_left=e.list_item_left.concat(t.ncbs_role_search.results),e.list_item_right=t.ncbs_role_search.results,e.item_select_right=t.ncbs_role_search.results[0].role_code)}));let t={paging:{pagingIndex:1,recordItem:100}};e.list_item_right.length>0&&await this.callAPI("ncbs_role_get_user_role",{role_code:e.item_select_right,table_search:t}).then((t=>{t&&!t.hasError&&(e.table_right.result_total=t.ncbs_role_get_user_role.total_items,e.table_right.paging_index=1,e.table_right.data=t.ncbs_role_get_user_role.results||[],e.table_right.data.length>0?e.btn_preview_all_disable=!1:e.btn_preview_all_disable=!0)})),e.list_item_left.length>0&&await this.callAPI("ncbs_role_get_user",{ncbs_user_search:{search_text:""},table_search:t}).then((t=>{t&&!t.hasError&&(e.table_left.result_total=t.ncbs_user_search.total_items,e.table_left.paging_index=1,e.table_left.data=t.ncbs_user_search.results,e.table_left.data.length>0?e.btn_next_all_disable=!1:e.btn_next_all_disable=!0)})),this.setState({isLoading:!1,role_user:e})}async getDataRoleWorkflow(){let{role_workflow:e}=this.state;this.page_role_workflow_left_index=this.page_role_workflow_right_index=1,e.list_item_left=[{role_code:"all",role_name:"All"}],e.list_item_right=[];e.item_select_left="all",await this.callAPI("ncbs_role_search",{search_text:"",table_search:{paging:{pagingIndex:1,recordItem:100}}}).then((t=>{t&&!t.hasError&&(e.list_item_left=e.list_item_left.concat(t.ncbs_role_search.results),e.list_item_right=t.ncbs_role_search.results,e.item_select_right=t.ncbs_role_search.results[0].role_code)}));let t={paging:{pagingIndex:1,recordItem:100}};e.list_item_right.length>0&&await this.callAPI("ncbs_role_get_workflow_role",{role_code:e.item_select_right,table_search:t}).then((t=>{t&&!t.hasError&&t&&t.ncbs_role_get_workflow_role&&(e.table_right.result_total=t.ncbs_role_get_workflow_role.total_items,e.table_right.paging_index=1,e.table_right.data=t.ncbs_role_get_workflow_role.results||[],e.table_right.data.length>0?e.btn_preview_all_disable=!1:e.btn_preview_all_disable=!0)})),e.list_item_left.length>0&&await this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{search_text:""},table_search:t}).then((t=>{t&&!t.hasError&&(e.table_left.result_total=t.ncbs_role_get_workflow.total_items,e.table_left.paging_index=1,e.table_left.data=t.ncbs_role_get_workflow.results,e.table_left.data.length>0?e.btn_next_all_disable=!1:e.btn_next_all_disable=!0)})),this.setState({isLoading:!1,role_workflow:e})}getDataForm(){return{form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:this.getDataTab(this.data_tab_global,this.state.menu_select),abs_select:(e,t)=>{this.setState({menu_select:t},(()=>{"column2"===t?this.getDataRoleUser():"column3"===t&&this.getDataRoleWorkflow()}))}},role_search:{search_text:{dataFull:{config:{default:{title:"Search",type:"text",class:"col-sm-4 ",code_form_component:"search_text"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},mode:{isSearch:!0},value:this.state.role.search_text,abs_Change:this.handleRoleSearch,abs_KeyUp:this.enterRoleSearch}},search_button:{dataFull:{config:{default:{title:"Search",icon:"fa-search",type:"primary"}},abs_Click:this.onSearch}},table_search:{dataFull:{Header:{data:[{title:"",config:{width:"50px",isFrozen:!1}},{title:"Role Code",config:{width:"",isFrozen:!1}},{title:"Role Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role.table_search.result_total,paging_index:this.state.role.table_search.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPageConfig(this.state.role.table_search.record_item),abs_PagingActive:e=>{this.pageIndexChangeRoleSearch(e)},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_search_config:[{type:"uTableColumnButtonHover",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_search_data:this.state.role.table_search.data},role_add:{role_code:{dataFull:{config:{default:{title:"Role Code",type:"text",class:"col-sm-6 offset-sm-6-right",code_form_component:"role_code"},cmd:{disable:this.state.role_add.role_code_disable,visible:!0,error:{message:"",type:""}}},value:this.state.role_add.role_code,abs_Change:this.handleInputRoleAddChange}},role_name:{dataFull:{config:{default:{title:"Role name",type:"text",class:"col-sm-6 offset-sm-6-right",code_form_component:"role_name"},cmd:{disable:this.state.role_add.role_name_disable,visible:!0,error:{message:"",type:""}}},value:this.state.role_add.role_name,abs_Change:this.handleInputRoleAddChange}},save_button:{dataFull:{config:{default:{title:"Save",icon:"fa-save",type:"primary"},cmd:{disable:this.state.role_add.btn_save}},abs_Click:this.onSaveAddRole}}},role_view:{role_code:{dataFull:{config:{default:{title:"Role Code",type:"text",class:"col-sm-6 offset-sm-6-right",code_form_component:"role_code"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:this.state.role_view.role_code,abs_Change:this.handleInputRoleViewChange}},role_name:{dataFull:{config:{default:{title:"Role Name",type:"text",class:"col-sm-6 offset-sm-6-right",code_form_component:"role_name"},cmd:{disable:this.state.role_view.role_name_disable,visible:!0,error:{message:"",type:""}}},value:this.state.role_view.role_name,abs_Change:this.handleInputRoleViewChange}},save_button:{dataFull:{config:{default:{title:"Save",icon:"fa-save",type:"primary"},cmd:{disable:this.state.role_view.btn_save}},abs_Click:this.onSaveViewRole}},modify_button:{dataFull:{config:{default:{title:"Modify",icon:"fa-pencil-square-o",type:""},cmd:{disable:this.state.role_view.btn_modify}},abs_Click:this.onModifyViewRole}}},column1:{tab:{data:this.getDataTab(this.data_tab_column1,this.state.menu_role_select),abs_select:(e,t)=>{this.setState({menu_role_select:t})}}},column2:{user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"role_choose_left"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:this.getListData(this.state.role_user.list_item_left,this.state.role_user.item_select_left,this.state.role_user.list_item_left_search,"left"),search_value:this.state.role_user.list_item_left_search},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearchSelect(e,"role_user","left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:this.getListData(this.state.role_user.list_item_right,this.state.role_user.item_select_right,this.state.role_user.list_item_right_search,"right"),search_value:this.state.role_user.list_item_right_search},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearchSelect(e,"role_user","right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{disable:this.state.role_user.btn_preview_disable}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{disable:this.state.role_user.btn_preview_all_disable}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{disable:this.state.role_user.btn_next_all_disable}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{disable:this.state.role_user.btn_next_disable}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1},value_search:this.state.role_user.search_value.TBL_USER_CODE},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1},value_search:this.state.role_user.search_value.TBL_USER_NAME}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role_user.table_left.result_total,paging_index:this.state.role_user.table_left.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPage_10Config(this.record_10[0]),abs_PagingActive:e=>{this.pageIndexChangeRoleAdminSearch(e,"role_user","left")},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_left_data:this.getDataTableRoleUser(this.state.role_user.table_left.data,100*(this.state.role_user.table_left.paging_index-1),"left"),table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1},value_search:this.state.role_user.search_value.TBR_USER_CODE},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1},value_search:this.state.role_user.search_value.TBR_USER_NAME}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role_user.table_right.result_total,paging_index:this.state.role_user.table_right.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPage_10Config(this.record_10[0]),abs_PagingActive:e=>{this.pageIndexChangeRoleAdminSearch(e,"role_user","right")},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_right_data:this.getDataTableRoleUser(this.state.role_user.table_right.data,100*(this.state.role_user.table_right.paging_index-1),"right"),table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]},column3:{user_assignment:{title:"Workflow assignment"},user_in_role:{title:"Workflow in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select workflow group",type:"text",class:"col-md-12",code_form_component:"role_choose_left"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:this.getListData(this.state.role_workflow.list_item_left,this.state.role_workflow.item_select_left,this.state.role_workflow.list_item_left_search,"left"),search_value:this.state.role_workflow.list_item_left_search},abs_Change:this.onChangeWorkflowAgm,abs_search:e=>{this.onSearchSelect(e,"role_workflow","left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:this.getListData(this.state.role_workflow.list_item_right,this.state.role_workflow.item_select_right,this.state.role_workflow.list_item_right_search,"right"),search_value:this.state.role_workflow.list_item_right_search},abs_Change:this.onChangeWorkflowAgm,abs_search:e=>{this.onSearchSelect(e,"role_workflow","right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{disable:this.state.role_workflow.btn_preview_disable}}},abs_Click:this.abs_Click_previous_workflow},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{disable:this.state.role_workflow.btn_preview_all_disable}}},abs_Click:this.abs_Click_previous_all_workflow},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{disable:this.state.role_workflow.btn_next_all_disable}}},abs_Click:this.abs_Click_next_all_workflow},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{disable:this.state.role_workflow.btn_next_disable}}},abs_Click:this.abs_Click_next_workflow},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"Workflow ID",id:"TBL_WORKFLOW_ID",config:{width:"",isFrozen:!1},value_search:this.state.role_workflow.search_value.TBL_WORKFLOW_ID},{title:"Workflow Name",id:"TBL_WORKFLOW_NAME",config:{width:"",isFrozen:!1},value_search:this.state.role_workflow.search_value.TBL_WORKFLOW_NAME}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearchWorkflow,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role_workflow.table_left.result_total,paging_index:this.state.role_workflow.table_left.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPage_10Config(this.record_10[0]),abs_PagingActive:e=>{this.pageIndexChangeRoleAdminSearch(e,"role_workflow","left")},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_left_data:this.getDataTableRoleWorkflow(this.state.role_workflow.table_left.data,100*(this.state.role_workflow.table_left.paging_index-1),"left"),table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearchWorkflow,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"Workflow code",id:"TBR_WORKFLOW_ID",config:{width:"",isFrozen:!1},value_search:this.state.role_workflow.search_value.TBR_WORKFLOW_ID},{title:"Work Name",id:"TBR_WORKFLOW_NAME",config:{width:"",isFrozen:!1},value_search:this.state.role_workflow.search_value.TBR_WORKFLOW_NAME}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role_workflow.table_right.result_total,paging_index:this.state.role_workflow.table_right.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPage_10Config(this.record_10[0]),abs_PagingActive:e=>{this.pageIndexChangeRoleAdminSearch(e,"role_workflow","right")},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_right_data:this.getDataTableRoleWorkflow(this.state.role_workflow.table_right.data,100*(this.state.role_workflow.table_right.paging_index-1),"right"),table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}UNSAFE_componentWillUpdate(e,t){let{role_user:i}=this.state;t.role_user.number_item_check_left>0?i.btn_next_disable=!1:i.btn_next_disable=!0,t.role_user.number_item_check_right>0?i.btn_preview_disable=!1:i.btn_preview_disable=!0,this.state.role_user.btn_next_disable===i.btn_next_disable&&this.state.role_user.btn_preview_disable===i.btn_preview_disable||this.setState({role_user:i});let{role_workflow:o}=this.state;t.role_workflow.number_item_check_left>0?o.btn_next_disable=!1:o.btn_next_disable=!0,t.role_workflow.number_item_check_right>0?o.btn_preview_disable=!1:o.btn_preview_disable=!0,this.state.role_workflow.btn_next_disable===o.btn_next_disable&&this.state.role_workflow.btn_preview_disable===o.btn_preview_disable||this.setState({role_workflow:o})}getListData(e,t,i,o){let a=e.filter((e=>(e.role_name||"").toLowerCase().includes(i.toLowerCase()))),s=[],n=!1;for(let r=0;r<a.length;r++){const e=a[r];let i=!1;e.role_code===t&&(i=!0,n=!0),s.push({title:e.role_name,value:(0,u.Z)((0,u.Z)({},e),{},{type:o}),selected:i}),r!==a.length-1||n||(s[0].selected=!0)}return s}getDataTab(e,t){return e.map((e=>(e.id===t?e.isShow=!0:e.isShow=!1,e)))}render(){const e=(0,_.RP)("uFormLoading");return(0,c.jsxs)(o.Fragment,{children:[this.state.isLoading?(0,c.jsx)(e,{}):null,(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(Oe,{stateData:this.getDataForm()})})]})}getDataTableSearch(e){return e.map((e=>{let t=[];return t.push({icon_item:"fa-eye",title:"View",dataItem:e,abs_Click:this.viewItem}),t.push({icon_item:"fa-trash-o",title:"Delete",dataItem:e,abs_Click:this.removeItemTable}),{data:[{dataFull:{icon:"three-dot"},data:t},{data:e.role_code},{data:e.role_name}],dataItem:e}}))}getDataTableRoleUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return e.map(((e,o)=>({data:[{data:t+o+1},{value:e.isCheck||!1,abs_Click:this.handleCheckTable,dataItem:{value:e,index:o,type:i}},{data:e.user_code},{data:e.user_name}],config:{value:!1}})))}getDataTableRoleWorkflow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return e.map(((e,o)=>({data:[{data:t+o+1},{value:e.isCheck||!1,abs_Click:this.handleCheckTableWorkflow,dataItem:{value:e,index:o,type:i}},{data:e.workflow_id},{data:e.name?e.name:e.workflow_name}],config:{value:!1}})))}getDataRoleUserAdd(e,t){return e.map((e=>({user_code:e.user_code,role_code:t})))}async resetTableRoleUser(){let{role_user:e}=this.state,t={paging:{pagingIndex:1,recordItem:100}};await this.callAPI("ncbs_role_get_user_role",{role_code:e.item_select_right,table_search:t}).then((t=>{e.table_right.result_total=t.ncbs_role_get_user_role.total_items,e.table_right.paging_index=1,e.table_right.data=t.ncbs_role_get_user_role.results||[],e.number_item_check_right=0,e.table_right.data.length>0?e.btn_preview_all_disable=!1:e.btn_preview_all_disable=!0})),"all"===e.item_select_left?await this.callAPI("ncbs_role_get_user",{ncbs_user_search:{search_text:""},table_search:t}).then((t=>{e.table_left.result_total=t.ncbs_user_search.total_items,e.table_left.data=t.ncbs_user_search.results||[],e.number_item_check_left=0,e.table_left.data.length>0?e.btn_next_all_disable=!1:e.btn_next_all_disable=!0})):await this.callAPI("ncbs_role_get_user_role",{role_code:e.item_select_left,table_search:t}).then((t=>{e.table_left.result_total=t.ncbs_role_get_user_role.total_items,e.table_left.data=t.ncbs_role_get_user_role.results||[],e.number_item_check_left=0,e.table_left.data.length>0?e.btn_next_all_disable=!1:e.btn_next_all_disable=!0})),this.setState({isLoading:!1,role_user:e})}getDataRoleWorkflowAdd(e,t){return e.map((e=>({workflow_id:e.workflow_id,role_code:t})))}async resetTableRoleWorkflow(){let{role_workflow:e}=this.state,t={paging:{pagingIndex:1,recordItem:100}};await this.callAPI("ncbs_role_get_workflow_role",{role_code:e.item_select_right,table_search:t}).then((t=>{e.table_right.result_total=t.ncbs_role_get_workflow_role.total_items,e.table_right.paging_index=1,e.table_right.data=t.ncbs_role_get_workflow_role.results||[],e.number_item_check_right=0,e.table_right.data.length>0?e.btn_preview_all_disable=!1:e.btn_preview_all_disable=!0})),"all"===e.item_select_left?await this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{search_text:""},table_search:t}).then((t=>{e.table_left.result_total=t.ncbs_role_get_workflow.total_items,e.table_left.data=t.ncbs_role_get_workflow.results||[],e.number_item_check_left=0,e.table_left.data.length>0?e.btn_next_all_disable=!1:e.btn_next_all_disable=!0})):await this.callAPI("ncbs_role_get_workflow_role",{role_code:e.item_select_left,table_search:t}).then((t=>{e.table_left.result_total=t.ncbs_role_get_workflow_role.total_items,e.table_left.data=t.ncbs_role_get_workflow_role.results||[],e.number_item_check_left=0,e.table_left.data.length>0?e.btn_next_all_disable=!1:e.btn_next_all_disable=!0})),this.setState({isLoading:!1,role_workflow:e})}convertCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e||0===e||(e=""),e=String(e);let t=e.replace(/,/g,"");return(0,ye.Nx)(t,2)}}const Ce=we;var xe=i(2200);class Se extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)"true"===o[a]&&(o[a]=!0),"false"===o[a]&&(o[a]=!1);this.setState({CMD:o})},this.set=e=>{this.dataGlobal={data:e,total:e.length};let t={data:this.dataGlobal.data,total:this.dataGlobal.total},i=[],o=0;void 0!==t.total&&(o=t.total),void 0!==t.data&&(i=t.data),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:i,total_record:o})},this.getData=()=>({data:this.state.dataFilter}),this.getAdvanced=(e,t)=>this.getData(),this.getHeaderConfig=function(){let e=[];return!0===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&e.push({title:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),e=e.concat(t.state.columns.map((e=>{var i,o;return{title:(null===(i=t.state.lang)||void 0===i||null===(o=i[t.state.lang_select])||void 0===o?void 0:o[e.title])||e.title,id:e.code,config:{width:"",isFrozen:!1},value_search:t.state.columnSearchValue[e.code]}}))),e},this.handelClearSearch=()=>{let e=this.state.columnSearchValue;for(const a in e)e[a]="";let t=this.dataGlobal.data,i=t,o=t.length;this.setState({data:i,dataFilter:t,total_record:o,columnSearchValue:e})},this.getCaptionLang=(e,t,i)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${t}_${i}`]&&(this.CACHE_CDLIST[`${t}_${i}`]=s.ZP.data_cdList(t,i,!0));let o={};for(const s of this.CACHE_CDLIST[`${t}_${i}`]){let e=s.c_cdlist.mcaption||{},t=s.c_cdlist.caption||"";o[s.c_cdlist.cdid]=s.c_cdlist={mcaption:e,caption:t}}const a=o[e]||{};let n=(null===a||void 0===a?void 0:a.mcaption)||{},r=(null===a||void 0===a?void 0:a.caption)||"";return n[s.ZP.getLangKey()]||r},this.handelChangeSearch=(e,t)=>{var i;let o=this.state.columnSearchValue;o[t]=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"";let a=this.state.dataFilter.filter((e=>{let t=!0;for(const a in o){let s=e[a];const n=this.cols_config[a];if("columnMask"===n.inputtype){var i;let e=n.config.mask;(e.includes("DD")&&e.includes("MM")&&e.includes("YY")||!0===(null===(i=n.config)||void 0===i?void 0:i.isDate))&&(void 0!==n.data_type&&"string"===n.data_type&&(s=Y.cI(s,"YYYY-MM-DDTHH:mm:ss.SSS[Z]")),s=Y.FW(s,e))}if("ColumnCdlist"===n.inputtype){let{cdgrp:e,cdname:t}=n.config;s=this.getCaptionLang(s,e,t)}!1===String(s).toLowerCase().includes(o[a].toLowerCase())&&(t=!1)}return t})),s=a,n=a.length;this.setState({data:s,total_record:n,columnSearchValue:o})},this.handleChange=e=>{let{index_row:t,code_col:i,value_change:o}=e,a=i.split("."),s=[];s=this.state.data;let n=this.state.dataFilter;s[t][a[0]]!==o&&(s[t][a[0]]=o,n[e.dataItem.index_row][a[0]]=o,this.setState({data:s,dataFilter:n,column_search:{}},(()=>{this.props.callChange(s[t])})))},this.dataGlobal={data:this.props.data,total:this.props.data.length};let i=0;void 0!==this.dataGlobal.total&&(i=this.dataGlobal.total);let o=[];void 0!==this.dataGlobal.data&&(o=this.dataGlobal.data),this.state={dataFilter:this.dataGlobal.data,data:o,total_record:i,selectedRecordIndex:0,STT:!1,hasCheck:!1,columns:void 0===this.props.columns?[]:this.props.columns,CMD:{},columnSearchValue:{}},this.cols_config={};for(const a of this.state.columns)this.cols_config[a.code]=a}componentDidUpdate(e){if(e.data!==this.props.data){this.dataGlobal={data:this.props.data,total:this.props.data.length};let e={data:this.dataGlobal.data,total:this.dataGlobal.total},t=[],i=0;void 0!==e.total&&(i=e.total),void 0!==e.data&&(t=e.data),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:t,total_record:i})}}render(){var e,t,i;let o=this.getHeaderConfig();const a=(0,_.RP)("uTable"),n=(0,_.RP)("uTableBodyRow");return"false"===String(this.state.CMD.visible)?null:(0,c.jsx)(a,{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:o,config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},dataEmpty:{isShow:!(null!==(e=this.state)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{maxHeight:!0,modeTitle:"center",isFrozenHeader:!1,isResize:"true"===String(null===(i=this.props.mode)||void 0===i?void 0:i.isResize)}}},children:this.state.data.map(((e,t)=>(0,c.jsx)(n,{children:this.state.columns.map(((i,o)=>{var a,s;let n=xe.Z[i.inputtype];return void 0===n&&(n=xe.Z.ColumnDefault),(0,c.jsx)(n,{tableContext:this,title_parent:i.title,rowData:e,code_col:i.code,index_row:t,title:(null===(a=this.state.lang)||void 0===a||null===(s=a[this.state.lang_select])||void 0===s?void 0:s[i.title])||i.title,config:i.config,data:e[i.code],value:e,dataItem:e,abs_TableChange:this.handleChange},o)}))},t)))})}}const Me=Se;let Pe;class Te extends o.Component{constructor(e){var t;super(e),t=this,this.changeKeyLanguage=e=>{let t={form_btn_close:s.ZP.getLang("form_close_title"),form_btn_add:s.ZP.getLang("form_add_title")};if(void 0!==e)return t;this.setState({languages:t})},this.closeForm=()=>{s.ZP.removeForm(this.key_form)},this.handleSelectTabID=e=>{this.setState({menu_select:e})},this.handelSearchInvokeLimit=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",a=this.state.invoke_limit_search_value;a[t]=o,this.setState({invoke_limit_search_value:a})},this.handelSearchApproveLimit=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",a=this.state.approve_limit_search_value;a[t]=o,this.setState({approve_limit_search_value:a})},this.handelChangeSearch=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",a=this.state.Col3_Assignment_Search;switch(a[t]=o,t){case"TBL_USER_CODE":this.stateData.column3.table_left.dataFull.Header.data[2].value_search=o;break;case"TBL_USER_NAME":this.stateData.column3.table_left.dataFull.Header.data[3].value_search=o;break;case"TBR_USER_CODE":this.stateData.column3.table_right.dataFull.Header.data[2].value_search=o;break;case"TBR_USER_NAME":this.stateData.column3.table_right.dataFull.Header.data[3].value_search=o}this.setState({Col3_Assignment_Search:a})},this.handelClearSearch=()=>{},this.getTableHeader=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return t.push({title:"Group",code:"module"}),t.push({title:"Caption",code:"tranname"}),e.forEach((e=>{t.push({title:e,code:e})})),t},this.abs_role_name_copying_select=(e,t,i)=>{this.setState({role_name_copying_selected:e.id,column2_role_select:e})},this.abs_Ckeck_invoke_approve_verification=(e,t)=>{this.callAPI("O9_Roles_Invoke_approve_Table_Change_save_approve",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then((e=>{let t=e.O9_Roles_Invoke_approve_Table_Change_save_approve;this.reloadTableWithMenuInvokeApprove(),1===t[0].type?s.ZP.showToast("Save",!0):s.ZP.showToast("Save",!1)}))},this.abs_Ckeck_invoke_approve_operation=(e,t)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){this.setState({isLoading:!0});let t=[];t.push({role_id:e.role_id,command_id:e.command_id,command_id_detail:"A",invoke:1===e.invoke?0:1,approve:1===e.approve?0:1}),t.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_RIGHT",api_data:{list_user_right:t}}).then((e=>{e&&!e.hasError?this.setState({isLoading:!1},(()=>{s.ZP.showToast("Save",!0),this.reloadTableWithMenuInvokeApprove(!1)})):s.ZP.showToast(e.error_data[0].info,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.UNSAFE_componentWillUpdate=(e,t)=>{var i,o,a,s,n,r,l,d,h,u,p,_,f,g,m,v,b,y,A,D,k,O,w,C,x,S,M,P;let T=t.role_action||{};this.stateData.tab.data=this.stateData.tab.data.map((e=>(e.isShow=e.id===t.menu_select,e))),this.stateData.form.dataFull.cmd.isLoading!==t.isLoading&&(this.stateData.form.dataFull.cmd.isLoading=t.isLoading),this.stateData.column3.table_in_role_data=t.table_user_profile_user_in_role.map((e=>({config:{value:!1},data:[{data:e.role_name},{data:e.user_code},{data:e.user_name+"("+e.login_name+")"}]}))),this.stateData.column1.tree_data.tree_data=null===(i=t.menu_invoke_aprrove)||void 0===i?void 0:i.map((e=>{let t=e;return{title:t.command_name,parent_id:t.parent_id,is_open:!1,DOM_elm:null,id:t.command_id,dataItem:t,abs_click:this.onClickTreeMenuInvokeApprove}})),this.stateData.column1.table_up.dataFull.Header.data=t.O9_Roles_InvokeApprove_Table_header.map(((e,t)=>({title:e.caption,config:{width:"",isFrozen:0===t}})));let I=t.O9_Roles_InvokeApprove_Table_header;this.stateData.column1.table_up_config=I.map(((e,t)=>0===t?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!0}}:{type:"uTableColumnCheckbox",config:{cmd:{disable:!1===T.save}}}));let N=t.O9_Roles_InvokeApprove_Table_body;this.stateData.column1.table_up_data=[];for(let c=0;c<N.length;c++){let e=I.length-1,t=[],i=[];for(let o=0;o<e;o++)0===o&&(t.push({data:N[c+o].role_name}),i.push({data:N[c+o].role_name})),t.push({value:1===N[c+o].invoke,dataItem:N[c+o],abs_Click:this.abs_Ckeck_invoke_approve_operation}),i.push({value:1===N[c+o].approve,dataItem:N[c+o],abs_Click:this.abs_Ckeck_invoke_approve_verification});this.stateData.column1.table_up_data.push(t),c=c+e-1}if(this.stateData.column2.role_name_adding.dataFull.config.cmd.disable=!0!==t.addAndRemove_btnAddClick,this.stateData.column2.listButton[2].dataFull.config.cmd.disable=!0===t.addAndRemove_btnSaveClick,this.stateData.column2.role_name_copying.dataFull.search_value=t["column2.role_name_copying"],this.stateData.column2.listButton[0].dataFull.config.cmd.visible=!1!==T.save,this.stateData.column2.listButton[2].dataFull.config.cmd.visible=!1!==T.save,this.stateData.column2.listButton[1].dataFull.config.cmd.visible=!1!==T.delete,this.stateData.column3.next.dataFull.config.cmd.disable=!1===T.save||0===t.number_item_check_left,this.stateData.column3.next_all.dataFull.config.cmd.disable=!1===T.save,this.stateData.column3.preview.dataFull.config.cmd.disable=!1===T.save||0===t.number_item_check_right,this.stateData.column3.preview_all.dataFull.config.cmd.disable=!1===T.save,!t.role_name_copying_selected&&t.O9_Roles_Add_and_Remove_Role_Name.length>0)this.setState({role_name_copying_selected:t.O9_Roles_Add_and_Remove_Role_Name[0].id});else{var F;this.stateData.column2.role_name_copying.dataFull.input_value=null===(F=t.column2_role_select)||void 0===F?void 0:F.role_name;let e=t.O9_Roles_Add_and_Remove_Role_Name.filter((e=>(e.role_name||"").toLowerCase().includes(t["column2.role_name_copying"].toLowerCase())));this.stateData.column2.role_name_copying.dataFull.data=e.map(((e,i)=>{let o=!1;return e.id===t.role_name_copying_selected&&(o=!0),{title:e.role_name,value:e,selected:o}}))}this.stateData.column2.role_name_adding.dataFull.value=t.role_name_adding_input;let L=this.unCheck_user_assign_table_left,E=this.unCheck_user_assign_table_right;!0===this.unCheck_user_assign_table_left&&(this.unCheck_user_assign_table_left=!1),!0===this.unCheck_user_assign_table_right&&(this.unCheck_user_assign_table_right=!1),this.stateData.column3.table_left_data=null===(o=t.O9_Roles_User_assignment_table_left)||void 0===o?void 0:o.filter((e=>{var i,o;return(null===(i=e.user_code)||void 0===i?void 0:i.toString().includes(t.Col3_Assignment_Search.TBL_USER_CODE||""))&&(null===(o=e.user_name)||void 0===o?void 0:o.toString().includes(t.Col3_Assignment_Search.TBL_USER_NAME||""))})).map(((e,t)=>{var i,o,a;return{data:[{data:t+1},{value:!0!==L&&((null===(i=this.stateData.column3.table_left_data[t])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_left,dataItem:{value:e,index:t}},{data:e.user_code},{data:e.user_name+"("+e.login_name+")"}],config:{value:!1}}})),this.stateData.column3.table_right_data=t.O9_Roles_User_assignment_table_right.filter((e=>e.user_code.includes(t.Col3_Assignment_Search.TBR_USER_CODE||"")&&e.user_name.includes(t.Col3_Assignment_Search.TBR_USER_NAME||""))).map(((e,t)=>{var i,o,a;return{data:[{data:t+1},{value:!0!==E&&((null===(i=this.stateData.column3.table_right_data[t])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_right,dataItem:{value:e,index:t}},{data:e.user_code},{data:e.user_name+"("+e.login_name+")"}],config:{value:!1}}})),this.stateData.column3.role_choose_left.dataFull.data=[],this.stateData.column3.role_choose_left.dataFull.search_value=t["column3.role_choose_left"],this.stateData.column3.role_choose_left.dataFull.input_value=null===(a=t.column3_role_left_select)||void 0===a?void 0:a.role_name,t.O9_RolesUser_assignment_Role_Name_Left.filter((e=>null!==e.role_name&&e.role_name.toLowerCase().includes(t["column3.role_choose_left"].toLowerCase()))).forEach(((e,i)=>{let o=!1;(t.column3_role_left_select.id===e.id||0===i&&void 0===t.column3_role_left_select.id)&&(o=!0),this.stateData.column3.role_choose_left.dataFull.data.push({title:e.role_name,value:{id:e.id,item:e,type:"left"},selected:o})})),this.stateData.column3.role_choose_right.dataFull.search_value=t["column3.role_choose_right"],this.stateData.column3.role_choose_right.dataFull.input_value=null===(s=t.column3_role_right_select)||void 0===s?void 0:s.role_name;let j=t.O9_RolesUser_assignment_Role_Name_Right.filter((e=>null!==e.role_name&&e.role_name.toLowerCase().includes(t["column3.role_choose_right"].toLowerCase())));this.stateData.column3.role_choose_right.dataFull.data=j.map(((e,i)=>{let o=!1;return(t.column3_role_right_select.id===e.id||0===i&&void 0===t.column3_role_right_select.id)&&(o=!0),{title:e.role_name,value:{id:e.id,item:e,type:"right"},selected:o}})),this.stateData.column4.listItem=t.O9_Roles_Invoke_limit_menu.map((e=>{let i=!1;return t.Invoke_role_selected===e.id&&(i=!0),{dataFull:{title:e.role_name,dataItem:e,selected:i},abs_Click:this.onClickMenuInvokeLimit}})),this.stateData.column4.table.dataFull.Header.data=t.invoke_limit_header.map((e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.invoke_limit_search_value[e.code]||""}))),this.stateData.column4.table_config=t.invoke_limit_header.map(((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===T.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),t.invoke_limit_header.length>0&&(this.stateData.column4.DOM_elm=(0,c.jsx)(Me,{ref:e=>{this.ref_table=e},data:t.O9_Roles_InvokeLimit_Table,columns:[{code:null===(n=t.invoke_limit_header)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.code,title:null===(l=t.invoke_limit_header)||void 0===l||null===(d=l[0])||void 0===d?void 0:d.title,inputtype:"ColumnString",config:{}},{code:null===(h=t.invoke_limit_header)||void 0===h||null===(u=h[1])||void 0===u?void 0:u.code,title:null===(p=t.invoke_limit_header)||void 0===p||null===(_=p[1])||void 0===_?void 0:_.title,inputtype:"ColumnString",config:{}},{code:null===(f=t.invoke_limit_header)||void 0===f||null===(g=f[2])||void 0===g?void 0:g.code,title:null===(m=t.invoke_limit_header)||void 0===m||null===(v=m[2])||void 0===v?void 0:v.title,inputtype:!1===T.save?"ColumnString":"columnInputEdit",config:{columnEditType:"currency",format:"#,###.00",decimal_length:2}}],callChange:this.abs_save_invoke_table})),this.ref_table&&this.ref_table.set(t.O9_Roles_InvokeLimit_Table),this.stateData.column5.listItem=t.O9_Roles_Invoke_limit_menu.map((e=>{let i=!1;return t.Approve_role_selected===e.id&&(i=!0),{dataFull:{title:e.role_name,dataItem:e,selected:i},abs_Click:this.onClickMenuApproveLimit}})),t.approve_limit_header.length>0&&(this.stateData.column5.DOM_elm=(0,c.jsx)(Me,{ref:e=>{this.ref_table_approve=e},data:t.O9_Roles_ApproveLimit_Table,columns:[{code:null===(b=t.approve_limit_header)||void 0===b||null===(y=b[0])||void 0===y?void 0:y.code,title:null===(A=t.approve_limit_header)||void 0===A||null===(D=A[0])||void 0===D?void 0:D.title,inputtype:"ColumnString",config:{}},{code:null===(k=t.approve_limit_header)||void 0===k||null===(O=k[1])||void 0===O?void 0:O.code,title:null===(w=t.approve_limit_header)||void 0===w||null===(C=w[1])||void 0===C?void 0:C.title,inputtype:"ColumnString",config:{}},{code:null===(x=t.approve_limit_header)||void 0===x||null===(S=x[2])||void 0===S?void 0:S.code,title:null===(M=t.approve_limit_header)||void 0===M||null===(P=M[2])||void 0===P?void 0:P.title,inputtype:!1===T.save?"ColumnString":"columnInputEdit",config:{columnEditType:"currency",format:"#,###.00",decimal_length:2}}],callChange:this.abs_save_approve_table})),this.ref_table_approve&&this.ref_table_approve.set(t.O9_Roles_ApproveLimit_Table)},this.CheckAddRoleName=e=>{let t=e.target.value,i=!1;for(const o of this.stateData.column2.role_name_copying.dataFull.data)if(o.title===t||""===t){i=!0;break}""===t&&(i=!0),this.setState({addAndRemove_btnSaveClick:i,role_name_adding_input:t})},this.abs_Check_role_profile_user_assign_left=e=>{let{number_item_check_left:t}=this.state;this.onClickAssignLeftRow(e);let i=this.stateData.column3.table_left_data[e.index].data[1];i.value=!i.value,!0===i.value?t++:t--,this.setState({autoReload:!0,number_item_check_left:t})},this.abs_Check_role_profile_user_assign_right=e=>{let{number_item_check_right:t}=this.state,i=this.stateData.column3.table_right_data[e.index].data[1];i.value=!i.value,!0===i.value?t++:t--,this.setState({autoReload:!0,number_item_check_right:t})},this.abs_CheckAll_left=()=>{let e=this.stateData.column3.table_left.dataFull.Header.data[1],t=0;this.stateData.column3.table_left_data.forEach((()=>{!0===e.data.value?this.stateData.column3.table_left_data[t].data[1].value=!1:this.stateData.column3.table_left_data[t].data[1].value=!0,t++})),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_CheckAll_right=()=>{let e=this.stateData.column3.table_right.dataFull.Header.data[1],t=0;this.stateData.column3.table_right_data.forEach((()=>{!0===e.data.value?this.stateData.column3.table_right_data[t].data[1].value=!1:this.stateData.column3.table_right_data[t].data[1].value=!0,t++})),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_change_approve_table=(e,t,i,o)=>{let a=e.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_ApproveLimit_Table;let l=r[t.row_idx][t.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let e=l.lastIndexOf(".");c=n.substring(0,e)+"."+n.substring(e,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[t.row_idx][t.header.code]=d,this.setState({O9_Roles_ApproveLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_change_invoke_table=(e,t,i,o)=>{let a=e.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_InvokeLimit_Table;let l=r[t.row_idx][t.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let e=l.lastIndexOf(".");c=n.substring(0,e)+"."+n.substring(e,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[t.row_idx][t.header.code]=d,this.setState({O9_Roles_InvokeLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_submit_invoke_table=(e,t,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_InvokeLimit_Table,i=[];i.push({role_id:this.state.Invoke_role_selected,command_id:e.row_data.cmdid,currency_code:e.header.code,limit_type:"I",u_limit:""!==this.getValueCurrency(t[e.row_idx][e.header.code])?this.getValueCurrency(t[e.row_idx][e.header.code]):null}),i.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_LIMIT",api_data:{list_user_limit:i}}).then((i=>{i&&!i.hasError?this.setState({isLoading:!1},(()=>{let i=[];i.push({role_id:this.state.Invoke_role_selected,command_id:e.row_data.cmdid,command_id_detail:"I",invoke:""!==this.getValueCurrency(t[e.row_idx][e.header.code])?1:0,approve:1}),i.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_RIGHT",api_data:{list_user_right:i}}).then((e=>{e.hasError?s.ZP.showToast(e.error_data[0].info,!1):s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i.error_data[0].info,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.abs_save_invoke_table=e=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let t=this.state.invoke_limit_header[2].code,i=[];i.push({role_id:this.state.Invoke_role_selected,command_id:e.cmdid,currency_code:t,limit_type:"I",u_limit:""!==e[t]&&void 0!==e[t]&&null!==e[t]?e[t]:null}),i.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_LIMIT",api_data:{list_user_limit:i}}).then((i=>{i&&!i.hasError?this.setState({isLoading:!1},(()=>{let i=[];i.push({role_id:this.state.Invoke_role_selected,command_id:e.cmdid,command_id_detail:"I",invoke:""!==e[t]&&void 0!==e[t]&&null!==e[t]?1:0,approve:1}),i.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_RIGHT",api_data:{list_user_right:i}}).then((e=>{e.hasError?s.ZP.showToast(e.error_data[0].info,!1):s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i.error_data[0].info,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.abs_submit_approve_table=(e,t,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_ApproveLimit_Table,i=[];i.push({role_id:this.state.Approve_role_selected,command_id:e.row_data.cmdid,currency_code:e.header.code,limit_type:"A",u_limit:""!==this.getValueCurrency(t[e.row_idx][e.header.code])?this.getValueCurrency(t[e.row_idx][e.header.code]):null}),i.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_LIMIT",api_data:{list_user_limit:i}}).then((e=>{e&&!e.hasError?this.setState({isLoading:!1},(()=>{s.ZP.showToast("Save",!0)})):s.ZP.showToast(e.error_data[0].info,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.abs_save_approve_table=(e,t,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let t=this.state.approve_limit_header[2].code,i=[];i.push({role_id:this.state.Approve_role_selected,command_id:e.cmdid,currency_code:t,limit_type:"A",u_limit:""!==e[t]&&void 0!==e[t]&&null!==e[t]?e[t]:null}),i.length>0&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_UPDATE_LIST_USER_LIMIT",api_data:{list_user_limit:i}}).then((e=>{e&&!e.hasError?this.setState({isLoading:!1},(()=>{s.ZP.showToast("Save",!0)})):s.ZP.showToast(e.error_data[0].info,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.getRoleAction=(e,t)=>{let i=(0,s._M)(),o={};const a=t.list_layout;for(const s of i)for(const t of a)for(const i of t.list_view)for(const t of i.list_input){let i=t.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=e[s])||void 0===n||null===(r=n[t.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a}}return o},this.getAllRoleAction=()=>(0,N.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((e=>{var t=s.ZP.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",e)||{};void 0===i&&(i={});let o=this.getRoleAction(i,t);this.setState({role_action:o})})),this.getMenuTreeTemplate=()=>this.DATA_MENU.map((e=>({title:e.command_name||"#ERROR",parent_id:e.parent_id,is_open:!1,DOM_elm:null,id:e.command_id,dataItem:{menu:e},abs_click:this.abs_select_item_menu}))),this.findListAuthorzieForms=e=>{let t="";for(let i=0;i<this.DATA_MENU.length;i++){const o=this.DATA_MENU[i].group_menu;void 0!==o.group_menu_function_code&&o.group_menu_function_code===e&&void 0!==o.group_menu_list_authorize_form&&(t=o.group_menu_list_authorize_form)}return t},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.convertDataUser=e=>{let t=[];for(let i=0;i<e.length;i++){const o=e[i];void 0!==o.usr_code&&(o.user_code=o.usr_code),void 0!==o.usr_name&&(o.user_name=o.usr_name),void 0!==o.usr_id&&(o.user_id=o.usr_id),void 0!==o.user_code?o.user_code=o.user_code:void 0!==o.id&&(o.user_id=o.id),t.push(o)}return t},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e,app:"ncbsCbs"}}];return a[0].input=Object.assign(a[0].input,i),(0,N.Yr)(a,{}).then((e=>{var t;return(t=s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0}).hasError&&s.ZP.showToast((s.ZP.isDebug()&&t.error_data[0].code?t.error_data[0].code+": ":"")+t.error_data[0].info,!1),t})).finally((e=>{t.setState({isLoading:!1})}))},this.AddRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.add&&this.state.role_action.save){let e=this.state.role_name_copying_selected,t=this.state.role_name_adding_input;""!==e&&""!==t&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_INSERT_USER_ROLE",api_data:{role_name:t,role_template_id:e,user_role_status:"N"}}).then((e=>{if(e&&!e.hasError){let e=[{id:0,role_name:"All"}],t=[],i=[];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_SIMPLE_SEARCH_USER_ROLE",api_data:{page_size:0,page_index:0,search_text:""}}).then((o=>{i=o.items||[],e=e.concat(o.items||[]),t=o.items||[];this.state.role_name_adding_input;this.setState({O9_Roles_Add_and_Remove_Role_Name:i,isAdd_add_and_remove:!1,addAndRemove_btnAddClick:!1,role_name_adding_input:"",addAndRemove_btnSaveClick:!0,O9_RolesUser_assignment_Role_Name_Left:e,O9_RolesUser_assignment_Role_Name_Right:t,O9_Roles_Invoke_limit_menu:i,O9_Roles_Approve_limit_menu:i}),s.ZP.showToast("Save",!0)}))}else s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.onSearch=(e,t)=>{this.setState({[t]:e.target.value})},this.abs_Click_next=()=>{this.onClickAssignLeftToRightArray()},this.abs_Click_next_all=()=>{this.onClickAssignLeftToRightAll()},this.abs_Click_previous=()=>{this.onClickAssignRightToLeftArray()},this.abs_Click_previous_all=()=>{this.onClickAssignRightToLeftAll()},this.onClickAssignLeftToRightAll=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter((t=>0===e.filter((e=>e.user_code===t.data[1].dataItem.value.user_code)).length)).map((e=>e.data[1].dataItem.value)),i=this.state.column3_role_right_select.id,o=this.converDataApiAddUserRole(t,i);""!==i&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_INSERT_LIST_ROLE_OF_USER",api_data:{list_role_of_user:o}}).then((e=>{e&&!e.hasError?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:i,user_code:null}}).then((e=>{let t=e.items||[];t=this.convertDataUser(t),this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:t,app:this.state.app_select}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1,number_item_check_left:0}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e.error_data[0].info,!1,!1),this.setState({jwebuiAutoReload:!0,number_item_check_left:0}))}));let a=this.stateData.column3.table_left.dataFull.Header.data[1],n=0;this.stateData.column3.table_left_data.forEach((()=>{!0===a.data.value&&(this.stateData.column3.table_left_data[n].data[1].value=!1),n++})),a.data.value=!1},this.onClickAssignRightToLeftAll=()=>{let e=this.stateData.column3.table_right_data.map((e=>e.data[1].dataItem.value)),t=this.state.column3_role_right_select.id;this.unCheck_user_assign_table_right=!0;let i=this.converDataApiAddUserRole(e,t);""!==t&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_DELETE_LIST_ROLE_OF_USER",api_data:{list_role_of_user:i}}).then((e=>{e&&!e.hasError?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:t,user_code:null}}).then((e=>{let i=e.items||[];i=this.convertDataUser(i),this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:i,app:this.state.app_select}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1,number_item_check_right:0}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e.error_data[0].info,!1,!1),this.setState({jwebuiAutoReload:!0,number_item_check_right:0}))}));let o=this.stateData.column3.table_right.dataFull.Header.data[1],a=0;this.stateData.column3.table_right_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_right_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignLeftToRightArray=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter((t=>!0===t.data[1].value&&0===e.filter((e=>e.user_code===t.data[1].dataItem.value.user_code)).length)).map((e=>e.data[1].dataItem.value)),i=this.state.column3_role_right_select.id;this.unCheck_user_assign_table_left=!0;let o=this.converDataApiAddUserRole(t,i);""!==i&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_INSERT_LIST_ROLE_OF_USER",api_data:{list_role_of_user:o}}).then((e=>{e&&!e.hasError?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:i,user_code:null}}).then((e=>{let t=e.items||[];t=this.convertDataUser(t),this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:t,app:this.state.app_select}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1,number_item_check_left:0}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e.error_data[0].info,!1,!1),this.setState({jwebuiAutoReload:!0,number_item_check_left:0}))}));let a=this.stateData.column3.table_left.dataFull.Header.data[1],n=0;this.stateData.column3.table_left_data.forEach((()=>{!0===a.data.value&&(this.stateData.column3.table_left_data[n].data[1].value=!1),n++})),a.data.value=!1},this.onClickAssignLeftRow=e=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:null,user_code:e.value.user_code}}).then((e=>{let t=(null===e||void 0===e?void 0:e.items)||[];t=this.convertDataUser(t),this.setState({table_user_profile_user_in_role:t})}))},this.onClickAssignRightToLeftArray=e=>{let t=this.stateData.column3.table_right_data.filter((e=>!0===e.data[1].value)).map((e=>e.data[1].dataItem.value)),i=this.state.column3_role_right_select.id;this.unCheck_user_assign_table_right=!0;let o=this.converDataApiAddUserRole(t,i);""!==i&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_DELETE_LIST_ROLE_OF_USER",api_data:{list_role_of_user:o}}).then((e=>{e&&!e.hasError?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:i,user_code:null}}).then((e=>{let t=e.items||[];t=this.convertDataUser(t),this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:t,app:this.state.app_select}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1,number_item_check_right:0}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(e.error_data[0].info,!1,!1),this.setState({jwebuiAutoReload:!0,number_item_check_right:0}))}));let a=this.stateData.column3.table_right.dataFull.Header.data[1],n=0;this.stateData.column3.table_right_data.forEach((()=>{!0===a.data.value&&(this.stateData.column3.table_right_data[n].data[1].value=!1),n++})),a.data.value=!1},this.onChangeUserAgm=(e,t)=>{switch(e.type){case"left":if(e.id===this.state.column3_role_right_select.id)break;0===e.id?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_LOOKUP_USER_ACCOUNT",api_data:{user_code:"",user_name:"",login_name:"",branch_name:"",department_name:"",user_account_status:"N",is_online:"",email:"",page_index:0,page_size:0},number_of_step:1}).then((t=>{let i=t.items||[];i=this.convertDataUser(i);let o=this.state.O9_RolesUser_assignment_Role_Name_Left.filter((t=>t.id===e.id));this.setState({O9_Roles_User_assignment_table_left:i,column3_role_left_select:o[0]})})):this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:e.id,user_code:null}}).then((t=>{let i=t.items||[],o=this.state.O9_RolesUser_assignment_Role_Name_Left.filter((t=>t.id===e.id));i=this.convertDataUser(i),this.setState({O9_Roles_User_assignment_table_left:i,column3_role_left_select:o[0]})}));break;case"right":if(e.id===this.state.column3_role_left_select.roleid)break;this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:e.id,user_code:null}}).then((t=>{let i=t.items||[],o=this.state.O9_RolesUser_assignment_Role_Name_Right.filter((t=>t.id===e.id));i=this.convertDataUser(i),this.setState({O9_Roles_User_assignment_table_right:i,column3_role_right_select:o[0]})}))}},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return t.length>16&&(t=t.slice(t.length-16,t.length)),(0,ye.Nx)(t,2)},this.getValueCurrency=e=>void 0===e||null===e||""===e?"":Number(e.replace(/,/g,"")),this.saveInvokeTable=()=>{},this.onClickMenuInvokeLimit=e=>{let t=e.dataFull.dataItem;this.callAPI("O9_Roles_InvokeLimit_Table",t).then((e=>{void 0===e&&(e={}),e&&!e.hasError?this.setState({O9_Roles_Invoke_limit_menu_select:t,Invoke_role_selected:t.id},(()=>{this.reloadTableInvokeLimit(e)})):(s.ZP.showToast(e.error_data[0].info,!1,!1),this.setState({jwebuiAutoReload:!0}))}))},this.reloadTableInvokeLimit=e=>{if(e){let t=e.currency||[],i=e.data;for(const e of t)for(let t=0;t<i.length;t++){const o=i[t];o[e]=this.convertCurrency(o[e]),o.index_row=t}this.setState({O9_Roles_InvokeLimit_Table:i,invoke_limit_header:this.getTableHeader(t),invoke_limit_currency:t})}},this.onClickMenuApproveLimit=e=>{e=e.dataFull.dataItem,this.callAPI("O9_Roles_ApproveLimit_Table",e).then((t=>{if(t&&!t.hasError){let i=t,o=i.currency,a=i.data;for(const e of o)for(let t=0;t<a.length;t++){const i=a[t];i[e]=this.convertCurrency(i[e]),i.index_row=t}this.setState({O9_Roles_ApproveLimit_Table:a,O9_Roles_Approve_limit_menu_select:e,Approve_role_selected:e.id,approve_limit_header:this.getTableHeader(o)})}else s.ZP.showToast(t.error_data[0].info,!1,!1),this.setState({jwebuiAutoReload:!0})}))},this.onClickTreeMenuInvokeApprove=(e,t)=>{(t=t.dataItem).isOpen=!t.isOpen;let i=this.state.menu_invoke_aprrove,o=[{cmdid:"0",caption:"Role Name"},{cmdid:"0",caption:"Self Invoke"}],a=[];this.loadInvokeApproveTable(t).then((e=>{void 0!==e.operation_header&&(o=o.concat(e.operation_header)),void 0!==e.operation_body&&(a=e.operation_body),this.setState({menu_invoke_aprrove:i,O9_Roles_InvokeApprove_Table_body:a,O9_Roles_InvokeApprove_Table_header:o,menu_invoke_aprrove_select:t})}))},this.removeRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.delete){let e=this.state.role_name_copying_selected;""!==e&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_DELETE_USER_ROLE",api_data:{id:e}}).then((e=>{if(e&&!e.hasError){let e=[{id:0,role_name:"All"}],t=[],i=[];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_SIMPLE_SEARCH_USER_ROLE",api_data:{page_size:0,page_index:0,search_text:""}}).then((o=>{i=o.items||[],e=e.concat(o.items||[]);let a=i[0];t=o.items||[];let n=this.state.role_name_copying_selected;this.setState({O9_Roles_Add_and_Remove_Role_Name:i,isAdd_add_and_remove:!1,isDelete_add_and_remove:!1,delete_err:"",role_name_copying_selected:a.roleid,column2_role_select:a,O9_RolesUser_assignment_Role_Name_Left:e,O9_RolesUser_assignment_Role_Name_Right:t,O9_Roles_Invoke_limit_menu:i,O9_Roles_Approve_limit_menu:i}),s.ZP.showToast("Save",!0);var r=[{txcode:"bo-delete-roleJWEBUI",input:{roleID:n,app:this.state.app_select}}];return(0,N.Yr)(r,{}).then((e=>{}))}))}else s.ZP.showToast(e.error_data[0].info,!1),this.setState({delete_err:e.error_data[0].info||""})}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))};let i=this.changeKeyLanguage("start");Pe=(0,_.Iq)("system_roleProfile"),this.key_form="BO_015003003",this.list_app=this.props.list_app.filter((e=>"A"===e.list_appliaction.status&&"designForm"!==e.list_appliaction.list_appliaction_id)).sort(((e,t)=>e.list_appliaction.list_appliaction_order-t.list_appliaction.list_appliaction_order)),this.data_key_form={BO_015003003:{title:"ADM-Roles Profile",col_id:"column1"},BO_015003008:{title:"ADM-Invoke Limit",col_id:"column4"},BO_015003009:{title:"ADM-Approve Limit",col_id:"column5"}},this.state={app_select:this.list_app[0].list_appliaction.list_appliaction_id,menu_parent_select:"ADM - Roles Profile",menu_select:this.data_key_form[this.key_form].col_id,number_item_check_left:0,number_item_check_right:0,"column3.role_choose_right":"","column3.role_choose_left":"","column2.role_name_copying":"",column3_role_left_select:0,role_name_adding_input:"",role_name_copying_selected:"",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,menu_invoke_aprrove:[],O9_Roles_InvokeApprove_Table_header:[],O9_Roles_InvokeApprove_Table_body:[],menu_invoke_aprrove_select:{},O9_Roles_Add_and_Remove_Role_Name:[],O9_Roles_Add_and_Remove_Role_Name_select:"",O9_Roles_User_assignment_table_left:[],O9_Roles_User_assignment_table_right:[],O9_RolesUser_assignment_Role_Name_Left:[],O9_RolesUser_assignment_Role_Name_Right:[],user_assignment_select:"",O9_Roles_Invoke_limit_menu:[],O9_Roles_Invoke_limit_menu_select:{},O9_Roles_Approve_limit_menu:[],O9_Roles_Approve_limit_menu_select:{},O9_Roles_InvokeLimit_Table:[],O9_Roles_ApproveLimit_Table:[],table_user_profile_user_in_role:[],invoke_limit_header:[],approve_limit_header:[],Col3_Assignment_Search:{},languages:i,invoke_limit_search_value:{},approve_limit_search_value:{}},this.menu_form=[{title:"Roles Profile",child:["Invoke - Aprrove","Add - Remove","User Assignment"]},{title:"Invoke Limit",child:[]},{title:"Approve Limit",child:[]}],this.user_profile=s.ZP.context_get("user_acc"),this.stateData={form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},title_button:{close_button:i.form_btn_close,add_form:i.form_btn_add},cmd:{visibility:"",isLoading:!1},abs_Close:this.closeForm,abs_AddMenuBar:this.addMenu}},list_app:{data:this.list_app.map((e=>({id:e.list_appliaction.list_appliaction_id,title:e.list_appliaction.list_appliaction_name}))),abs_select:async(e,t)=>{if(t!==this.state.app_select){this.setState({isLoading:!0});var i=[{txcode:"#sys:bo-load-groupMenu-forApp",input:{app:t}}];await(0,N.Yr)(i,{}).then((e=>{let i=s.ZP.foGetData("data",e)||[];this.stateData.tab.data="ncbsCbs"!==t?[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0}]:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],this.setState({menu_invoke_aprrove:i,isLoading:!1,app_select:t,menu_select:this.data_key_form[this.key_form].col_id})}))}}},tab:{data:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],abs_select:(e,t)=>{this.setState({menu_select:t})}},column1:{tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},title_table_up:"OPEARTION",table_up:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1,maxHeight:!0}}}},table_up_data:[],table_up_config:[],title_table_down:"",table_down:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_down_data:[],table_down_config:[]},column4:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchInvokeLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}]},column5:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchApproveLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]},column2:{role_name_adding:{dataFull:{config:{default:{title:"Role Name (for adding)",type:"text",class:"col-sm-5",code_form_component:"role_name_adding"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:e=>{this.CheckAddRoleName(e)}},listButton:[{dataFull:{config:{default:{title:"Add",icon:"add_circle_outline"},cmd:{}}},abs_Click:()=>{this.setState({addAndRemove_btnAddClick:!0})}},{dataFull:{config:{default:{title:"Delete",icon:"highlight_off"},cmd:{}}},abs_Click:this.removeRoleName},{dataFull:{config:{default:{title:"Save",type:"primary",icon:"check_circle_outline"},cmd:{}}},abs_Click:this.AddRoleName}],role_name_copying:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Role Name (for copying or deleting)",type:"text",class:"col-sm-5",code_form_component:"role_name_copying"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:[],input_value:"123",search_value:""},abs_Change:this.abs_role_name_copying_select,abs_search:e=>{this.onSearch(e,"column2.role_name_copying")}}},column3:{table_in_role:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"User Code",config:{width:"",isFrozen:!1}},{title:"User Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_in_role_data:[{data:[{data:"2"},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_in_role_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{disable:!0}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{disable:!0}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{disable:!0}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{disable:!0}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_left},config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_left_data:[{data:[{data:"2"},{value:!1,abs_Click:this.abs_Ckeck},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_right},config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_right_data:[{data:[],config:{value:!0}}],table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}getListRoleForm(e){let t=[];if("0"===e.cmdiddt){let i=e.list_component_codeHidden.split(";");for(let o=0;o<i.length;o++){const a=i[o];""!==a&&a.includes("_")&&3===a.split("_").length&&t.push({role_id:e.role_id,command_id:a,command_id_detail:"A",invoke:1===e.invoke?0:1,approve:1===e.approve?0:1})}}else{let i=e.cmdiddt.split(";");for(let o=0;o<i.length;o++){const a=i[o];""!==a&&a.includes("_")&&3===a.split("_").length&&t.push({role_id:e.roleid,command_id:a,command_id_detail:"0",invoke:1===e.invoke?0:1,approve:1===e.approve?0:1})}}return t}onCallForm(e,t,i){if(!e)return;this.setState({isLoading:!0});let o=!1,a=this.findListAuthorzieForms(e);""===a?(o=!0,a=this.findListAuthorzieForms(i),""===a?a=i+a:""!==i&&(a=i+";"+a)):a=e+";"+a;let n=this.state.menu_invoke_aprrove.filter((t=>t.group_menu.group_menu_parent===e)),r=n;for(;r.length>0;){let e=[];for(let t=0;t<r.length;t++){const i=r[t];let o=this.state.menu_invoke_aprrove.filter((e=>e.group_menu.group_menu_parent===i.group_menu.group_menu_id));o.length>0&&(e=e.concat(o))}r=e,r.length>0&&(n=n.concat(r))}if(n.length>0)for(let s=0;s<n.length;s++){const e=n[s].group_menu;let t=this.findListAuthorzieForms(e.group_menu_function_code),i=e.group_menu_function_code;""===i?i=t:""!==t&&(i+=";"+t),a+=""!==a?";"+i:i}(0,N.Yr)([{txcode:"#sys:bo-load-list-authorize-forms",input:{list_authorize_forms:a,app:this.state.app_select}}],{infoA:{key_form:this.key_form}}).then((a=>{let r=[],l=s.ZP.foGetData("list_authorize_forms",a)||[],c=this.stateData.column1.tree_data.tree_data;for(let s of c)if(s.dataItem.group_menu_id===e){let a=[];if(l.length>0)for(let t=0;t<l.length;t++){let i=l[t],o=i.form_design_detail,s=i.form_role_task||{};r.push(s),void 0===o&&(o={info:{form_code:e,form_name:o.info.title},list_layout:[]}),a=a.concat(this.getListButton(o))}let s=[{cmdid:"0",caption:"Role Name"}],c=this.convertListButton(a,this.convertMenuChild(n),!0===o?i:e);s=0===n.length?s.concat(c):s.concat(c.slice(0,1));let d=[],h=this.state.O9_RolesUser_assignment_Role_Name_Right;for(let e=0;e<h.length;e++){const i=h[e];for(let e=0;e<s.length;e++){const o=s[e];let a={approve:0,cmdiddt:o.cmdid,invoke:0,parentid:t,roleid:i.id,role_name:i.role_name,menu_child:o.menu_child,list_component_codeHidden:o.list_component};for(let e=0;e<r.length;e++){const t=r[e];if(t[i.id]&&t[i.id][o.cmdid]&&t[i.id][o.cmdid].component&&t[i.id][o.cmdid].component.install){a.approve=!0===t[i.id][o.cmdid].component.install?1:0,a.invoke=!0===t[i.id][o.cmdid].component.install?1:0;break}if(t[i.id]&&t[i.id][o.form_id]&&t[i.id][o.form_id].form&&t[i.id][o.form_id].form.accept&&!0===t[i.id][o.form_id].form.accept){a.approve=!0===t[i.id][o.form_id].form.accept?1:0,a.invoke=!0===t[i.id][o.form_id].form.accept?1:0;break}if(n.length>0){let o=this.convertMenuChild(n);if(o[e]&&t[i.id]&&t[i.id][o[e].form_id]&&t[i.id][o[e].form_id].form&&t[i.id][o[e].form_id].form.accept&&!0===t[i.id][o[e].form_id].form.accept){a.approve=!0===t[i.id][o[e].form_id].form.accept?1:0,a.invoke=!0===t[i.id][o[e].form_id].form.accept?1:0;break}}}d.push(a)}}this.setState({O9_Roles_InvokeApprove_Table_header:s,O9_Roles_InvokeApprove_Table_body:d},(()=>{setTimeout((()=>{this.setState({isLoading:!1})}),500)}))}}),(e=>{}))}convertMenuChild(e){if(e.length>0){let t=[];for(let i=0;i<e.length;i++){const o=e[i];o.group_menu&&o.group_menu.group_menu_module_form&&t.push({cmdid:o.group_menu.group_menu_module_form,form_id:o.group_menu.group_menu_function_code})}return t}return e}convertListButton(e,t,i){let o=[{caption:"Self Invoke",menu_child:t,cmdid:"0",form_id:i}],a="";if(e.length>0)for(let s=0;s<e.length;s++){let t=e[s].default;-1===a.indexOf(t.codeHidden)&&(a+=";"+t.codeHidden,o.push({caption:t.name,menu_child:[],cmdid:t.codeHidden}))}return o[0].list_component=a,o}getListButton(e){let t=[];if(e&&e.list_layout&&e.list_layout.length>0)for(let i=0;i<e.list_layout.length;i++){const o=e.list_layout[i];if(o&&o.list_view&&o.list_view.length>0)for(let e=0;e<o.list_view.length;e++){const i=o.list_view[e];if(i&&i.list_input&&i.list_input.length>0)for(let e=0;e<i.list_input.length;e++){const o=i.list_input[e];o&&"cButton"===o.inputtype&&t.push(o)}}}return t}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.getAllRoleAction();var e=[{txcode:"#sys:bo-load-groupMenu-forApp",input:{app:this.state.app_select}}];await(0,N.Yr)(e,{}).then((e=>{let t=s.ZP.foGetData("data",e)||[];this.setState({menu_invoke_aprrove:t,isLoading:!1})}));let t=[],i=[{id:0,role_name:"All"}],o=[],a=[],n=[];await this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_SIMPLE_SEARCH_USER_ROLE",api_data:{page_size:0,page_index:0,search_text:""}}).then((e=>{t=e.items||[],i=i.concat(e.items||[]),o=e.items||[]})),i.length>0&&await this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_LOOKUP_USER_ACCOUNT",api_data:{user_code:"",user_name:"",login_name:"",branch_name:"",department_name:"",user_account_status:"N",is_online:"",email:"",page_index:0,page_size:0},number_of_step:1}).then((e=>{a=e.items||[],a=this.convertDataUser(a)})),o.length>0&&await this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:o[0].id,user_code:null}}).then((e=>{n=e.items||[],n=this.convertDataUser(n)})),this.setState({role_left:i[0],column3_role_right_select:o[0],column3_role_left_select:i[0],column2_role_select:t[0],O9_Roles_Add_and_Remove_Role_Name:t,O9_RolesUser_assignment_Role_Name_Left:i,O9_RolesUser_assignment_Role_Name_Right:o,O9_Roles_User_assignment_table_left:a,O9_Roles_User_assignment_table_right:n,O9_Roles_Invoke_limit_menu:t,O9_Roles_Approve_limit_menu:t,isLoading:!1},(()=>{}))}render(){return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(Pe,{stateData:this.stateData})})})}converDataApiAddUserRole(e,t){let i=[];for(let o=0;o<e.length;o++){let a={role_id:t,user_code:e[o].user_code};i.push(a)}return i}convertCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e||0===e||(e=""),e=String(e);let t=e.replace(/,/g,"");return(0,ye.Nx)(t,2)}loadInvokeApproveTable(e){var t=[{txcode:"bo-get-table-header",input:{command_id:e.command_id,app_select:this.state.app_select}}];return(0,N.Yr)(t,{}).then((e=>s.ZP.foGetData("data",e)||[]))}reloadTableWithMenuInvokeApprove(e){let t=this.state.menu_invoke_aprrove_select;this.loadInvokeApproveTable(t).then((t=>{void 0!==t.operation_body&&this.setState({O9_Roles_InvokeApprove_Table_body:t.operation_body,isLoading:!!e})}))}}const Ie=Te;class Ne extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);for(let a in o)"true"===o[a]&&(o[a]=!0),"false"===o[a]&&(o[a]=!1);this.setState({CMD:o})},this.set=e=>{this.dataGlobal={data:e,total:e.length};let t={data:this.dataGlobal.data,total:this.dataGlobal.total},i=[],o=0;void 0!==t.total&&(o=t.total),void 0!==t.data&&(i=t.data),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:i,total_record:o})},this.getData=()=>({data:this.state.dataFilter}),this.getAdvanced=(e,t)=>this.getData(),this.getHeaderConfig=function(){let e=[];return!0===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&e.push({title:"",config:{width:"40px",isFrozen:!1,isMoveColumn:!1,isResize:!1}}),e=e.concat(t.state.columns.map((e=>{var i,o;return{title:(null===(i=t.state.lang)||void 0===i||null===(o=i[t.state.lang_select])||void 0===o?void 0:o[e.title])||e.title,id:e.code,config:{width:"",isFrozen:!1},value_search:t.state.columnSearchValue[e.code]}}))),e},this.handelClearSearch=()=>{let e=this.state.columnSearchValue;for(const a in e)e[a]="";let t=this.dataGlobal.data,i=t,o=t.length;this.setState({data:i,dataFilter:t,total_record:o,columnSearchValue:e})},this.getCaptionLang=(e,t,i)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${t}_${i}`]&&(this.CACHE_CDLIST[`${t}_${i}`]=s.ZP.data_cdList(t,i,!0));let o={};for(const s of this.CACHE_CDLIST[`${t}_${i}`]){let e=s.c_cdlist.mcaption||{},t=s.c_cdlist.caption||"";o[s.c_cdlist.cdid]=s.c_cdlist={mcaption:e,caption:t}}const a=o[e]||{};let n=(null===a||void 0===a?void 0:a.mcaption)||{},r=(null===a||void 0===a?void 0:a.caption)||"";return n[s.ZP.getLangKey()]||r},this.handelChangeSearch=(e,t)=>{var i;let o=this.state.columnSearchValue;o[t]=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"";let a=this.state.dataFilter.filter((e=>{let t=!0;for(const a in o){let s=e[a];const n=this.cols_config[a];if("columnMask"===n.inputtype){var i;let e=n.config.mask;(e.includes("DD")&&e.includes("MM")&&e.includes("YY")||!0===(null===(i=n.config)||void 0===i?void 0:i.isDate))&&(void 0!==n.data_type&&"string"===n.data_type&&(s=Y.cI(s,"YYYY-MM-DDTHH:mm:ss.SSS[Z]")),s=Y.FW(s,e))}if("ColumnCdlist"===n.inputtype){let{cdgrp:e,cdname:t}=n.config;s=this.getCaptionLang(s,e,t)}!1===String(s).toLowerCase().includes(o[a].toLowerCase())&&(t=!1)}return t})),s=a,n=a.length;this.setState({data:s,total_record:n,columnSearchValue:o})},this.handleChange=e=>{let{index_row:t,code_col:i,value_change:o}=e,a=i.split("."),s=[];s=this.state.data;let n=this.state.dataFilter;s[t][a[0]]!==o&&(s[t][a[0]]=o,n[e.dataItem.index_row][a[0]]=o,this.setState({data:s,dataFilter:n,column_search:{}},(()=>{this.props.callChange(s[t],o,e.dataItem)})))},this.dataGlobal={data:this.props.data,total:this.props.data.length};let i=0;void 0!==this.dataGlobal.total&&(i=this.dataGlobal.total);let o=[];void 0!==this.dataGlobal.data&&(o=this.dataGlobal.data),this.state={dataFilter:this.dataGlobal.data,data:o,total_record:i,selectedRecordIndex:0,STT:!1,hasCheck:!1,columns:void 0===this.props.columns?[]:this.props.columns,CMD:{},columnSearchValue:{}},this.cols_config={};for(const a of this.state.columns)this.cols_config[a.code]=a}componentDidUpdate(e){if(e.data!==this.props.data){this.dataGlobal={data:this.props.data,total:this.props.data.length};let e={data:this.dataGlobal.data,total:this.dataGlobal.total},t=[],i=0;void 0!==e.total&&(i=e.total),void 0!==e.data&&(t=e.data),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:t,total_record:i})}}render(){var e,t,i;let o=this.getHeaderConfig();const a=(0,_.RP)("uTable"),n=(0,_.RP)("uTableBodyRow");return"false"===String(this.state.CMD.visible)?null:(0,c.jsx)(a,{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:o,config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},dataEmpty:{isShow:!(null!==(e=this.state)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.length),title:s.ZP.getLang("header_searchNoResult")},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{maxHeight:!0,modeTitle:"center",isFrozenHeader:!1,isResize:"true"===String(null===(i=this.props.mode)||void 0===i?void 0:i.isResize)}}},children:this.state.data.map(((e,t)=>(0,c.jsx)(n,{children:this.state.columns.map(((i,o)=>{var a,s,n,r;let l=xe.Z[i.inputtype];return void 0===l&&(l=xe.Z.ColumnDefault),"ColumnInputEditHistory"===i.inputtype?(0,c.jsx)(l,{tableContext:this,title_parent:i.title,rowData:e,code_col:i.code,index_row:t,title:(null===(a=this.state.lang)||void 0===a||null===(s=a[this.state.lang_select])||void 0===s?void 0:s[i.title])||i.title,config:i.config,data:e[i.code],value:e,dataItem:e.dataItem[i.code],before_value:e[i.code+"_before_value"],abs_ClickHistory:this.props.abs_ClickHistory,abs_TableChange:this.handleChange,cmd:{disabled:this.props.CMD.disable,isShowHistory:this.props.CMD.isShowHistory}},o):(0,c.jsx)(l,{tableContext:this,title_parent:i.title,rowData:e,code_col:i.code,index_row:t,title:(null===(n=this.state.lang)||void 0===n||null===(r=n[this.state.lang_select])||void 0===r?void 0:r[i.title])||i.title,config:i.config,data:e[i.code],value:e,dataItem:e,abs_TableChange:this.handleChange},o)}))},t)))})}}const Fe=Ne;let Le=8;const Ee={book_rate:"BK rate",transfer_bid_rate:"TB rate",transfer_ask_rate:"TA rate",cash_ask_rate:"CA rate",cash_bid_big_rate:"CB rate",cs_rate:"CS rate",in_rate:"IN rate",jp_rate:"JP rate",medium_bill_rate:"CM rate"},je=["book_rate","cash_bid_small_rate","transfer_bid_rate","transfer_ask_rate","cash_ask_rate","cash_bid_big_rate","medium_bill_rate"],Ze={book_rate:"Reference rate",short_id:"Short ID",transfer_bid_rate:"Buying Transfer Rate",transfer_ask_rate:"Selling Transfer Rate",cash_ask_rate:"Selling Counter Rate",cash_bid_big_rate:"Buying Counter Rate",cash_bid_small_rate:"Policy Rate"};class Re extends o.Component{constructor(e){var t,i;super(e),t=this,this.getTableHeader=()=>"KTB"===this.TABLE_TYPE?this.getTableHeaderKTB():this.getTableHeaderDefault(),this.getTableConfig=()=>"KTB"===this.TABLE_TYPE?this.getTableConfigKTB():this.getTableConfigDefault(),this.closeForm=()=>{s.ZP.removeForm(this.key_form)},this.onClickViewModify=async()=>{this.getAllRoleAndAction().then((()=>{let{role_action:e}=this.state;e.view_modify?(this.stateData.approve.dataFull.config.cmd.disable=!1,this.stateData.reject.dataFull.config.cmd.disable=!1,this.resetDataTable(),this.setState({isShowHistory:!0})):s.ZP.showToast("View_Modify: #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.onClickModify=()=>{this.setState({modify:!this.state.modify}),this.disable=!this.disable},this.getConfigButtonModify=(e,t)=>{let i=(null===t||void 0===t?void 0:t.role_action)||{};return{dataFull:{config:{default:{title:e,type:"",class:"",icon:"fa-pencil-square-o"},cmd:{disable:!this.disable,visible:!1!==i.modify}},dataItem:{test:"321"}},abs_Click:this.onClickModify}},this.getValueEdit=e=>e?e.base_currency_rate+" "+s.ZP.getLang("foreignExchangeRate_lang_by")+" "+e.user_name:"",this.getStatusEdit=(e,t)=>{if(!0===e){if(!0===this.isModifyLocal&&!0===t)return this.disable}else if(!1===this.isModifyLocal||!0===t)return this.disable;return!0},this.onChangeItemTable=(e,t,i,o)=>{let a=e.target,{selectionStart:s,value:n}=a,r=[],l="-1",c=t.type;t.isLocal?(r=this.state.O9_foreign_exchange_rate_local_table,l=this.O9_foreign_exchange_rate_local_table_logic[i][c]):(r=this.state.O9_foreign_exchange_rate_table,l=this.O9_foreign_exchange_rate_table_logic[i][c]);let d=r[i][c],h=d,u=n;if(h.includes(".")&&!n.includes(".")){let e=h.lastIndexOf(".");u=n.substring(0,e)+"."+n.substring(e,n.length),"."===u&&(u="")}let p=d,_=n.lastIndexOf(".");var f;n.indexOf(".")!==n.lastIndexOf(".")?_=p.length-Le:(p=this.onChangeCurrency(u),p?(_=s-((null===n||void 0===n?void 0:n.length)-(null===(f=p)||void 0===f?void 0:f.length)),1===s?_=1:s>n.lastIndexOf(".")&&(_+=1)):(p="0.00000000",_=1));r[i][c]=p;let{editedItems:g}=this.state,m={currency_code:r[i].currency_code,exchange_rate_type:this.getexchange_rate_type(c),base_currency_rate:p,branch_code_fx:t.isLocal?this.branch_user_code:this.HO_branch_code};l!==p?g=this.pushEditedItem(m):l===p&&(g=this.removeEditedItem(m)),t.isLocal?this.setState({O9_foreign_exchange_rate_local_table:r}):this.setState({O9_foreign_exchange_rate_table:r}),this.setState({editedItems:g},(()=>{setTimeout((()=>{a.setSelectionRange(_,_)}),50)}))},this.handleOpenConfirm=(e,t,i)=>{this.getAllRoleAndAction().then((()=>{let{role_action:t}=this.state;if(t.view_modify){var i;let t={title:s.ZP.getLang("sysConfirmApproveRejectTitle"),message_save:s.ZP.getLang("sysConfirmApproveRejectMessage"),content:[{list_component:[{component_name:s.ZP.getLang("foreignExchangeRate_approve_reject_item_title").replace("@{param1}",null===(i=e.data_change)||void 0===i?void 0:i.user_name).replace("@{param2}",this.getTypeItem(e.type)).replace("@{param3}",e.currency_code),message:{title_before:e.before_value,title_status:s.ZP.getLang("foreignExchangeRate_lang_to"),title_after:e.after_value}}]}]};s.ZP.compareInfo(t,[{name:"sysConfirmReject",icon:"",color:"info",val:!1},{name:"sysConfirmApprove",color:"primary",icon:"",val:!0}],void 0,(t=>{this.stateData.form.cmd.isLoading=!0,!0===t?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_APR",api_data:{data_modify:[{currency_code:e.data_change.currency_code,exchange_rate_type:e.data_change.exchange_rate_type,branch_code_fx:e.data_change.branch_code}]}}).then((e=>{if(e&&!e.hasError)s.ZP.showToast("Approve",!0),this.resetDataTable();else if(void 0!==e.error_data){var t="";e.error_data.map((e=>t+="#"+e.key+": "+(s.ZP.isDebug()&&e.code?e.code+": ":"")+e.info)),s.ZP.showToast(t,!1)}else s.ZP.showToast("Approve",!1)})):!1===t&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_REJECT",api_data:{data_modify:[{currency_code:e.data_change.currency_code,exchange_rate_type:e.data_change.exchange_rate_type,branch_code_fx:e.data_change.branch_code}]}}).then((e=>{if(e&&!e.hasError)s.ZP.showToast("Reject",!0),this.resetDataTable();else if(void 0!==e.error_data){var t="";e.error_data.map((e=>t+="#"+e.key+": "+(s.ZP.isDebug()&&e.code?e.code+": ":"")+e.info)),s.ZP.showToast(t,!1)}else s.ZP.showToast("Reject",!1)})),this.stateData.form.cmd.isLoading=!1,this.setState({isUpdate:!0}),setTimeout((()=>{this.setState({isUpdate:!1})}),1e3)}))}else s.ZP.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.resetDataTable=()=>{if("KTB"===this.TABLE_TYPE)this.resetDataTableKTB();else this.resetDataTableDefault()},this.onClickApproveAll=()=>{this.getAllRoleAndAction().then((()=>{let{role_action:e}=this.state;if(e.view_modify||e.approve){let e={title:s.ZP.getLang("sysConfirmApprove"),content:s.ZP.getLang("sysConfirmApproveAllContent")};s.ZP.confirmInfo(e,[{name:"sysConfirmCancel",icon:"",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"",val:!0}],void 0,(e=>{if(!0===e){this.stateData.form.cmd.isLoading=!0;let e=this.state.table_HO_modify.concat(this.state.table_local_modify);this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_APR",api_data:{data_modify:e}}).then((e=>{if(e&&!e.hasError)s.ZP.showToast("Approve",!0),this.resetDataTable();else if(void 0!==e.error_data){var t="";e.error_data.map((e=>t+="#"+e.key+": "+(s.ZP.isDebug()&&e.code?e.code+": ":"")+e.info)),s.ZP.showToast(t,!1)}else s.ZP.showToast("Approve",!1)}))}}))}else s.ZP.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.onClickRejectAll=()=>{this.getAllRoleAndAction().then((()=>{let{role_action:e}=this.state;if(e.view_modify||e.reject){let e={title:s.ZP.getLang("sysConfirmReject"),content:s.ZP.getLang("sysConfirmRejectAllContent")};s.ZP.confirmInfo(e,[{name:"sysConfirmCancel",icon:"",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"",val:!0}],void 0,(e=>{if(!0===e){this.stateData.form.cmd.isLoading=!0;let e=this.state.table_HO_modify.concat(this.state.table_local_modify);this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_REJECT",api_data:{data_modify:e}}).then((e=>{if(e&&!e.hasError)s.ZP.showToast("Reject",!0),this.resetDataTable();else if(void 0!==e.error_data){var t="";e.error_data.map((e=>t+="#"+e.key+": "+(s.ZP.isDebug()&&e.code?e.code+": ":"")+e.info)),s.ZP.showToast(t,!1)}else s.ZP.showToast("Reject",!1)}))}}))}else s.ZP.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.pushEditedItem=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.state.editedItems,o=0;for(;o<i.length&&(i[o].currency_code!==e.currency_code||i[o].exchange_rate_type!==e.exchange_rate_type);o++);return o==i.length?i.push(e):i[o]=e,i},this.removeEditedItem=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.state.editedItems,o=0;for(;o<i.length;o++)i[o].currency_code===e.currency_code&&i[o].exchange_rate_type===e.exchange_rate_type&&i.splice(o,1);return i},this.getRoleAction=(e,t)=>{let i=(0,s._M)(),o={};const a=t.list_layout;for(const s of i)for(const t of a)for(const i of t.list_view)for(const t of i.list_input){let i=t.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=e[s])||void 0===n||null===(r=n[t.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a,void 0!==t.default.codeHidden&&(o[i+"_codeHidden"]=t.default.codeHidden)}}return o},this.componentDidMount=()=>{this.getAllRoleAndAction().then((()=>{this.getbranch_codeHO()})),s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key)},this.getAllRoleAndAction=()=>(0,N.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((e=>{var t=s.ZP.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",e)||{};void 0===i&&(i={});let o=this.getRoleAction(i,t);this.setState({role_action:o})})),this.getbranch_codeHO=()=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_GET_HOST_BRANCH_ID",number_of_step:1}).then((e=>{e&&(this.HO_branch_code=e.branch_code_ho,null!==this.HO_branch_code&&""!==this.HO_branch_code&&this.resetDataTable())}))},this.changeKeyLanguage=e=>{let t={title_:s.ZP.getLang("foreignExchangeRate_title"),des_:s.ZP.getLang("foreignExchangeRate_des"),btn_save:s.ZP.getLang("foreignExchangeRate_btnSave"),btn_modifiy:s.ZP.getLang("foreignExchangeRate_btnModify"),tab_base:s.ZP.getLang("foreignExchangeRate_tabBase"),tab_local:s.ZP.getLang("foreignExchangeRate_tabLocal"),currency_code:s.ZP.getLang("foreignExchangeRate_currencyCode"),currency_shortID:s.ZP.getLang("foreignExchangeRate_currencyShortID"),rate:s.ZP.getLang("foreignExchangeRate_rate"),last_update:s.ZP.getLang("foreignExchangeRate_lastUpdate"),last_update_local:s.ZP.getLang("foreignExchangeRate_lastUpdateLocal"),form_btn_close:s.ZP.getLang("form_close_title"),form_btn_add:s.ZP.getLang("form_add_title")};if(void 0!==e)return t;let i=this.state.infoA;i.title=s.ZP.getLang("foreignExchangeRate_title"),i.des=s.ZP.getLang("foreignExchangeRate_des"),i.lang_form.vi=s.ZP.getLang("foreignExchangeRate_title"),i.lang_form.en=s.ZP.getLang("foreignExchangeRate_title"),this.setState({languages:t,infoA:i})},this.abs_changeItemTable=(e,t,i)=>{let o=[],a="-1",s=i.type,n=i.index_row;i.isLocal?(o=this.state.O9_foreign_exchange_rate_local_table,a=this.O9_foreign_exchange_rate_local_table_logic[n][s]):(o=this.state.O9_foreign_exchange_rate_table,a=this.O9_foreign_exchange_rate_table_logic[n][s]),o[n]=e;let{editedItems:r}=this.state,l={currency_code:e.currency_code,exchange_rate_type:this.getexchange_rate_type(s),base_currency_rate:t,branch_code_fx:i.isLocal?this.branch_user_code:this.HO_branch_code};a!==this.convertCurrency(t)?r=this.pushEditedItem(l):a===this.convertCurrency(t)&&(r=this.removeEditedItem(l)),i.isLocal?this.setState({O9_foreign_exchange_rate_local_table:o}):this.setState({O9_foreign_exchange_rate_table:o}),this.setState({editedItems:r})},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a,n=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return n[0].input=Object.assign(n[0].input,i),(0,N.Yr)(n,{}).then((e=>a=s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1},(()=>{if(a.hasError){var e="";a.error_data.map((t=>e+=(s.ZP.isDebug()&&t.code?t.code+": ":"")+t.info)),s.ZP.showToast(e,!1)}}))}))},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return(0,ye.Nx)(t,Le)},this.getValueCurrency=e=>{let t=e.split(".");return void 0===t[0]&&(t[0]="0"),void 0===t[1]&&(t[1]="0"),t[0]=t[0].replace(/[^\d]/gm,""),t[1]=t[1].replace(/[^\d]/gm,""),Number(t[0]+"."+t[1])},this.getValueCurrencyNumber=e=>void 0===e||null===e||""===e?"":Number(e.toString().replace(/,/g,"")),this.onClickSave=()=>{this.getAllRoleAndAction().then((()=>{let{role_action:e}=this.state;if(e.modify){let e=this.state.editedItems;for(let t of e)t.base_currency_rate=this.getValueCurrencyNumber(t.base_currency_rate);this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_MDF",api_data:{data_modify:e}}).then((e=>{if(e&&!e.hasError)s.ZP.showToast("Save",!0),this.resetDataTable(),this.setState({editedItems:[]}),this.setState({is_disable:!0,isUpdate:!0,modify:!1}),this.disable=!0,setTimeout((()=>{this.setState({isUpdate:!1})}),1e3);else{let t="Save : ";void 0!==e.error_data&&e.error_data.map((e=>t+="#"+e.key+": "+(s.ZP.isDebug()&&e.code?e.code+": ":"")+e.info)),s.ZP.showToast(t,!1)}}))}else s.ZP.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})};let o=this.changeKeyLanguage("start");this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT");let a=s.ZP.getParameterSystem("015003011_DECIMAL_NUMBER");a&&(Le=Number(a)),this.formRender=(0,_.Iq)("O9_ForeignExchangeRate"),this.key_form="BO_015003011",this.disable=!0,this.isModifyLocal=!1,void 0!==s.ZP.getParameterSystem("FX_RATE_MODIFY_LOCAL")&&(this.isModifyLocal=s.ZP.getParameterSystem("FX_RATE_MODIFY_LOCAL")),this.TABLE_TYPE="",void 0!==s.ZP.getParameterSystem("FX_RATE_TABLE_TYPE")&&(this.TABLE_TYPE=s.ZP.getParameterSystem("FX_RATE_TABLE_TYPE")),this.branch_user_code=(null===(i=s.ZP.context_get("user_acc"))||void 0===i?void 0:i.branch_code)||-1,this.HO_branch_code=null,this.O9_foreign_exchange_rate_table_logic=[],this.O9_foreign_exchange_rate_local_table_logic=[],this.stateData={local_tab_DOM_elm:(0,c.jsx)(Fe,{ref:e=>{this.ref_table_local=e},data:[],columns:this.getColumnConfig(),CMD:{disable:!0,isShowHistory:!1},callChange:this.abs_changeItemTable,abs_ClickHistory:this.handleOpenConfirm}),HO_tab_DOM_elm:(0,c.jsx)(Fe,{ref:e=>{this.ref_table=e},data:[],columns:this.getColumnConfig(),CMD:{disable:!0,isShowHistory:!1},callChange:this.abs_changeItemTable,abs_ClickHistory:this.handleOpenConfirm}),form:{config:{default:{title:o.title_,title_sub:""}},title_button:{close_button:o.form_btn_close,add_form:o.form_btn_add},cmd:{visibility:"",isLoading:!0},abs_Close:this.closeForm,abs_AddMenuBar:this.addMenu},save_rate:{dataFull:{config:{default:{title:o.btn_save,type:"submit",class:"",icon:"save"},cmd:{disable:!0}},dataItem:{test:"123"}},abs_Click:this.onClickSave},view_modify:{dataFull:{config:{default:{title:"View modify",type:"",class:"",icon:""},cmd:{disable:!1,visible:!1}},dataItem:{test:"123"}},abs_Click:this.onClickViewModify},approve:{dataFull:{config:{default:{title:"Approve (ALL)",type:"",class:"",icon:""},cmd:{disable:!0,visible:!1}},dataItem:{test:"123"}},abs_Click:this.onClickApproveAll},reject:{dataFull:{config:{default:{title:"Reject (All)",type:"",class:"",icon:""},cmd:{disable:!0,visible:!1}},dataItem:{test:"123"}},abs_Click:this.onClickRejectAll},modify_rate:this.getConfigButtonModify(o.btn_modifiy),dateTimeUpdate:{title:o.last_update,date:""},last_update_local:{title:o.last_update_local,date:""},tab:[{title:o.tab_base,id:"1"},{title:o.tab_local,id:"2"}],table:{dataFull:{Header:{data:this.getTableHeader(),config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}},table_config:this.getTableConfig(),table_local:{dataFull:{Header:{data:this.getTableHeader(),config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}},table_local_config:this.getTableConfig(),table_data:this.getConfigTableData([]),table_local_data:[]},this.state={isShowHistory:!1,visibility:"",languages:o,tab_active:1,is_disable:!0,modify:!1,infoA:{lang_form:{vi:s.ZP.getLang("foreignExchangeRate_title"),en:s.ZP.getLang("foreignExchangeRate_title")},title:s.ZP.getLang("foreignExchangeRate_title"),des:s.ZP.getLang("foreignExchangeRate_title"),openOne:"true",form_code:this.key_form,ofModal:!1},O9_foreign_exchange_rate_table:[],table_HO_modify:[],table_local_modify:[],O9_foreign_exchange_rate_local_table:[],last_update:"",isUpdate:!1,last_update_local:"",editedItems:[],isLoadingDefault:!1}}getTableConfigDefault(){return[{type:"uTableColumnDefault",config:{mode:"left"}},{type:"uTableColumnDefault",config:{mode:"right"}},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"}]}getTableConfigKTB(){return[{type:"uTableColumnDefault",config:{mode:"left"}},{type:"uTableColumnDefault",config:{mode:"right"}},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"}]}getTableHeaderDefault(){return[{title:"Currency code",config:{width:"",isFrozen:!1}},{title:"Short ID",config:{width:"",isFrozen:!1}},{title:"BK rate",config:{width:"",isFrozen:!1}},{title:"TB rate",config:{width:"",isFrozen:!1}},{title:"TA rate",config:{width:"",isFrozen:!1}},{title:"CA rate",config:{width:"",isFrozen:!1}},{title:"CB rate",config:{width:"",isFrozen:!1}},{title:"CS rate",config:{width:"",isFrozen:!1}},{title:"IN rate\t",config:{width:"",isFrozen:!1}},{title:"JP rate",config:{width:"",isFrozen:!1}},{title:"CM rate",config:{width:"",isFrozen:!1}}]}getTableHeaderKTB(){return[{title:"Currency code",config:{width:"",isFrozen:!1}},{title:Ze.short_id,config:{width:"",isFrozen:!1}},{title:Ze.book_rate,config:{width:"",isFrozen:!1}},{title:Ze.transfer_bid_rate,config:{width:"",isFrozen:!1}},{title:Ze.transfer_ask_rate,config:{width:"",isFrozen:!1}},{title:Ze.cash_bid_small_rate,config:{width:"",isFrozen:!1}},{title:Ze.cash_bid_big_rate,config:{width:"",isFrozen:!1}},{title:Ze.cash_ask_rate,config:{width:"",isFrozen:!1}}]}getConfigTableData(e,t,i,o){return e.map(((e,a)=>this.getEachDataRowConfig(e,a,t,i,o)))}getEachDataRowConfig(e,t,i,o,a){var s,n,r,l,c,d,h,u,p,_,f,g,m,v,b;return"KTB"===this.TABLE_TYPE?[{data:e.currency_code},{data:e.short_id},{data:e.book_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.book_rate_modify,type:"book_rate",currency_code:e.currency_code,before_value:e.book_rate,after_value:null===(s=e.book_rate_modify)||void 0===s?void 0:s.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.book_rate_modify)}},{data:e.transfer_bid_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.transfer_bid_rate_modify,type:"transfer_bid_rate",currency_code:e.currency_code,before_value:e.transfer_bid_rate,after_value:null===(n=e.transfer_bid_rate_modify)||void 0===n?void 0:n.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.transfer_bid_rate_modify)}},{data:e.transfer_ask_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.transfer_ask_rate_modify,type:"transfer_ask_rate",currency_code:e.currency_code,before_value:e.transfer_ask_rate,after_value:null===(r=e.transfer_ask_rate_modify)||void 0===r?void 0:r.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.transfer_ask_rate_modify)}},{data:e.cash_bid_small_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.cash_bid_small_rate_modify,type:"cash_bid_small_rate",currency_code:e.currency_code,before_value:e.cash_bid_small_rate,after_value:null===(l=e.cash_bid_small_rate_modify)||void 0===l?void 0:l.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.cash_bid_small_rate_modify)}},{data:e.cash_bid_big_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.cash_bid_big_rate_modify,type:"cash_bid_big_rate",currency_code:e.currency_code,before_value:e.cash_bid_big_rate,after_value:null===(c=e.cash_bid_big_rate_modify)||void 0===c?void 0:c.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.cash_bid_big_rate_modify)}},{data:e.cash_ask_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.cash_ask_rate_modify,type:"cash_ask_rate",currency_code:e.currency_code,before_value:e.cash_ask_rate,after_value:null===(d=e.cash_ask_rate_modify)||void 0===d?void 0:d.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.cash_ask_rate_modify)}}]:[{data:e.currency_code},{data:e.short_id},{data:e.book_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.book_rate_modify,type:"book_rate",currency_code:e.currency_code,before_value:e.book_rate,after_value:null===(h=e.book_rate_modify)||void 0===h?void 0:h.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.book_rate_modify)}},{data:e.transfer_bid_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.transfer_bid_rate_modify,type:"transfer_bid_rate",currency_code:e.currency_code,before_value:e.transfer_bid_rate,after_value:null===(u=e.transfer_bid_rate_modify)||void 0===u?void 0:u.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.transfer_bid_rate_modify)}},{data:e.transfer_ask_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.transfer_ask_rate_modify,type:"transfer_ask_rate",currency_code:e.currency_code,before_value:e.transfer_ask_rate,after_value:null===(p=e.transfer_ask_rate_modify)||void 0===p?void 0:p.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.transfer_ask_rate_modify)}},{data:e.cash_bid_big_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.cash_bid_big_rate_modify,type:"cash_bid_big_rate",currency_code:e.currency_code,before_value:e.cash_bid_big_rate,after_value:null===(_=e.cash_bid_big_rate_modify)||void 0===_?void 0:_.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.cash_bid_big_rate_modify)}},{data:e.cash_ask_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.cash_ask_rate_modify,type:"cash_ask_rate",currency_code:e.currency_code,before_value:e.cash_ask_rate,after_value:null===(f=e.cash_ask_rate_modify)||void 0===f?void 0:f.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.cash_ask_rate_modify)}},{data:e.cs_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.cs_rate_modify,type:"cs_rate",currency_code:e.currency_code,before_value:e.cs_rate,after_value:null===(g=e.cs_rate_modify)||void 0===g?void 0:g.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.cs_rate_modify)}},{data:e.in_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.in_rate_modify,type:"in_rate",currency_code:e.currency_code,before_value:e.in_rate,after_value:null===(m=e.in_rate_modify)||void 0===m?void 0:m.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.in_rate_modify)}},{data:e.jp_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.jp_rate_modify,type:"jp_rate",currency_code:e.currency_code,before_value:e.jp_rate,after_value:null===(v=e.jp_rate_modify)||void 0===v?void 0:v.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.jp_rate_modify)}},{data:e.medium_bill_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(o,a)},dataItem:{isLocal:o,data_change:e.medium_bill_rate_modify,type:"medium_bill_rate",currency_code:e.currency_code,before_value:e.medium_bill_rate,after_value:null===(b=e.medium_bill_rate_modify)||void 0===b?void 0:b.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:i,before_value:this.getValueEdit(e.medium_bill_rate_modify)}}]}getTypeItem(e){return"KTB"===this.TABLE_TYPE?Ze[e]:Ee[e]}resetDataTableDefault(){let e=[],t=[],i=[];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_VIEW"}).then((o=>{if(o){i=o.data_modify||[];let a=["book_rate","transfer_bid_rate","transfer_ask_rate","cash_ask_rate","cash_bid_big_rate","cm_rate","cs_rate","in_rate","jp_rate","medium_bill_rate"],s=[],n=[],r=[],l=[];for(const e of i)if(!1===this.isModifyLocal||!0===this.isModifyLocal&&this.HO_branch_code===this.branch_user_code){if(e.branch_code===this.HO_branch_code){let t={currency_code:e.currency_code,exchange_rate_type:e.exchange_rate_type,branch_code_fx:e.branch_code};s.push(t),r.push(e)}}else if(this.isModifyLocal&&this.HO_branch_code!==this.branch_user_code&&e.branch_code===this.branch_user_code){let t={currency_code:e.currency_code,exchange_rate_type:e.exchange_rate_type,branch_code_fx:e.branch_code};n.push(t),l.push(e)}this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.HO_branch_code}}).then((t=>{if(t){e=t.fx_rate_data||[];for(const t of e){for(const e of a)t[e]=this.convertCurrency(t[e]);if(this.HO_branch_code===this.branch_user_code||!1===this.isModifyLocal)for(const e of r)e.currency_code===t.currency_code&&(e.base_currency_rate=this.convertCurrency(e.base_currency_rate),t[this.getCodeFormType(e.exchange_rate_type)+"_modify"]=e)}this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e)),this.setState({O9_foreign_exchange_rate_table:e})}})),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.branch_user_code}}).then((e=>{if(e){t=e.fx_rate_data||[];for(const e of t){for(const t of a)e[t]=this.convertCurrency(e[t]);if(this.isModifyLocal&&this.HO_branch_code!==this.branch_user_code)for(const t of l)t.currency_code===e.currency_code&&(t.base_currency_rate=this.convertCurrency(t.base_currency_rate),e[this.getCodeFormType(t.exchange_rate_type)+"_modify"]=t)}this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t)),this.setState({O9_foreign_exchange_rate_local_table:t})}})),this.setState({table_HO_modify:s,table_local_modify:n}),this.stateData.form.cmd.isLoading=!1,this.setState({isUpdate:!0}),setTimeout((()=>{this.setState({isUpdate:!1})}),1e3)}else{let i=["book_rate","transfer_bid_rate","transfer_ask_rate","cash_ask_rate","cash_bid_big_rate","cm_rate","cs_rate","in_rate","jp_rate","medium_bill_rate"];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.HO_branch_code}}).then((t=>{if(t){e=t.fx_rate_data||[];for(const t of e)for(const e of i)t[e]=this.convertCurrency(t[e]);this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e)),this.setState({O9_foreign_exchange_rate_table:e})}})),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.branch_user_code}}).then((e=>{if(e){t=e.fx_rate_data||[];for(const e of t)for(const t of i)e[t]=this.convertCurrency(e[t]);this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t)),this.setState({O9_foreign_exchange_rate_local_table:t})}})),this.setState({isUpdate:!0}),setTimeout((()=>{this.setState({isUpdate:!1})}),1e3)}}))}resetDataTableKTB(){let e=[],t=[],i=[],{role_action:o}=this.state;o.view_modify?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_VIEW"}).then((o=>{if(o){i=o.data_modify||[];let a=[],s=[],n=[],r=[];for(const e of i)if(!1===this.isModifyLocal||!0===this.isModifyLocal&&this.HO_branch_code===this.branch_user_code){if(e.branch_code===this.HO_branch_code){let t={currency_code:e.currency_code,exchange_rate_type:e.exchange_rate_type,branch_code_fx:e.branch_code};a.push(t),n.push(e)}}else if(this.isModifyLocal&&this.HO_branch_code!==this.branch_user_code&&e.branch_code===this.branch_user_code){let t={currency_code:e.currency_code,exchange_rate_type:e.exchange_rate_type,branch_code_fx:e.branch_code};s.push(t),r.push(e)}this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.HO_branch_code}}).then((t=>{if(t){this.setState({isLoading:!0}),e=t.fx_rate_data||[];for(const t of e){for(const e of je)t[e]=this.convertCurrency(t[e]);if(this.HO_branch_code===this.branch_user_code||!1===this.isModifyLocal)for(const e of n)e.currency_code===t.currency_code&&(e.base_currency_rate=this.convertCurrency(e.base_currency_rate),t[this.getCodeFormType(e.exchange_rate_type)+"_modify"]=e)}this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e));let i="Invalid date"===(0,Y.jl)(t.last_update_date,this.dateFormat)?"":(0,Y.jl)(t.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_table:e,isLoading:!1,last_update:i})}})),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.branch_user_code}}).then((e=>{if(e){this.setState({isLoading:!0}),t=e.fx_rate_data||[];for(const e of t){for(const t of je)e[t]=this.convertCurrency(e[t]);if(this.isModifyLocal&&this.HO_branch_code!==this.branch_user_code)for(const t of r)t.currency_code===e.currency_code&&(t.base_currency_rate=this.convertCurrency(t.base_currency_rate),e[this.getCodeFormType(t.exchange_rate_type)+"_modify"]=t)}this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t));let i="Invalid date"===(0,Y.jl)(e.last_update_date,this.dateFormat)?"":(0,Y.jl)(e.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_local_table:t,isLoading:!1,last_update_local:i})}})),this.setState({isLoading:!0},(()=>{this.setState({table_HO_modify:a,table_local_modify:s},(()=>{this.setState({isLoading:!1})}))})),this.setState({isUpdate:!0}),setTimeout((()=>{this.setState({isUpdate:!1})}),1e3)}else this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.HO_branch_code}}).then((t=>{if(t){this.setState({isLoading:!0}),e=t.fx_rate_data||[];for(const t of e)for(const e of je)t[e]=this.convertCurrency(t[e]);this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e));let i="Invalid date"===(0,Y.jl)(t.last_update_date,this.dateFormat)?"":(0,Y.jl)(t.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_table:e,last_update:i,isLoading:!1})}})),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.branch_user_code}}).then((e=>{if(e){this.setState({isLoading:!0}),t=e.fx_rate_data||[];for(const e of t)for(const t of je)e[t]=this.convertCurrency(e[t]);this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t));let i="Invalid date"===(0,Y.jl)(e.last_update_date,this.dateFormat)?"":(0,Y.jl)(e.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_local_table:t,last_update_local:i,isLoading:!1})}})),this.setState({isUpdate:!0}),setTimeout((()=>{this.setState({isUpdate:!1})}),1e3)})):(this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.HO_branch_code}}).then((t=>{if(t){this.setState({isLoading:!0}),e=t.fx_rate_data||[];for(const t of e)for(const e of je)t[e]=this.convertCurrency(t[e]);this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e));let i="Invalid date"===(0,Y.jl)(t.last_update_date,this.dateFormat)?"":(0,Y.jl)(t.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_table:e,last_update:i,isLoading:!1})}})),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_code_fx:this.branch_user_code}}).then((e=>{if(e){this.setState({isLoading:!0}),t=e.fx_rate_data||[];for(const e of t)for(const t of je)e[t]=this.convertCurrency(e[t]);this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t));let i="Invalid date"===(0,Y.jl)(e.last_update_date,this.dateFormat)?"":(0,Y.jl)(e.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_local_table:t,last_update_local:i,isLoading:!1})}})),this.setState({isUpdate:!0}),setTimeout((()=>{this.setState({isUpdate:!1})}),1e3))}getexchange_rate_type(e){let t="";switch(e){case"book_rate":t="BK";break;case"cash_ask_rate":t="CA";break;case"cash_bid_small_rate":t="SB";break;case"cash_bid_big_rate":t="CB";break;case"cs_rate":t="CS";break;case"in_rate":t="IN";break;case"jp_rate":t="JP";break;case"transfer_ask_rate":t="TA";break;case"transfer_bid_rate":t="TB";break;case"medium_bill_rate":t="CM"}return t}getCodeFormType(e){let t="";switch(e){case"BK":t="book_rate";break;case"CA":t="cash_ask_rate";break;case"SB":t="cash_bid_small_rate";break;case"CB":t="cash_bid_big_rate";break;case"CS":t="cs_rate";break;case"IN":t="in_rate";break;case"JP":t="jp_rate";break;case"TA":t="transfer_ask_rate";break;case"TB":t="transfer_bid_rate";break;case"CM":t="medium_bill_rate"}return t}getColumnConfig(){return this.TABLE_TYPE,this.getColumnConfigKTB()}getColumnConfigKTB(){return[{code:"currency_code",title:"Currency code",inputtype:"ColumnString",config:{}},{code:"short_id",title:Ze.short_id,inputtype:"ColumnString",config:{}},{code:"book_rate",title:Ze.book_rate,inputtype:"ColumnInputEditHistory",config:{columnEditType:"currency",format:"#,###.00",decimal_length:8}},{code:"transfer_bid_rate",title:Ze.transfer_bid_rate,inputtype:"ColumnInputEditHistory",config:{columnEditType:"currency",format:"#,###.00",decimal_length:8}},{code:"transfer_ask_rate",title:Ze.transfer_ask_rate,inputtype:"ColumnInputEditHistory",config:{columnEditType:"currency",format:"#,###.00",decimal_length:8}},{code:"cash_bid_small_rate",title:Ze.cash_bid_small_rate,inputtype:"ColumnInputEditHistory",config:{columnEditType:"currency",format:"#,###.00",decimal_length:8}},{code:"cash_bid_big_rate",title:Ze.cash_bid_big_rate,inputtype:"ColumnInputEditHistory",config:{columnEditType:"currency",format:"#,###.00",decimal_length:8}},{code:"cash_ask_rate",title:Ze.cash_ask_rate,inputtype:"ColumnInputEditHistory",config:{columnEditType:"currency",format:"#,###.00",decimal_length:8}}]}getDataTableDom(e,t){return e.map(((e,i)=>{e.dataItem||(e.dataItem={});for(const a in e){var o;if("currency_code"!==a&&"short_id"!==a&&-1===a.indexOf("_modify")&&-1===a.indexOf("_before_value"))e.dataItem[a]={isLocal:t,index_row:i,data_change:e[a+"_modify"],type:a,currency_code:e.currency_code,before_value:e[a],after_value:null===(o=e[a+"_modify"])||void 0===o?void 0:o.base_currency_rate},e[a+"_before_value"]=this.getValueEdit(e[a+"_modify"])}return e}))}UNSAFE_componentWillUpdate(e,t){var i;let o=t.role_action||{};this.stateData.table.dataFull.dataEmpty={isShow:!(null!==(i=t.O9_foreign_exchange_rate_table)&&void 0!==i&&i.length),title:s.ZP.getLang("header_searchNoResult")},(!1===this.isModifyLocal||!0===this.isModifyLocal&&this.branch_user_code===this.HO_branch_code||0===this.state.O9_foreign_exchange_rate_table.length&&t.O9_foreign_exchange_rate_table.length>0)&&(this.stateData.table_data=this.getConfigTableData(t.O9_foreign_exchange_rate_table,t.isShowHistory,!1,this.HO_branch_code===this.branch_user_code),this.stateData.HO_tab_DOM_elm=(0,c.jsx)(Fe,{ref:e=>{this.ref_table=e},data:this.getDataTableDom(t.O9_foreign_exchange_rate_table,!1),columns:this.getColumnConfig(),CMD:{disable:this.getStatusEdit(!1,this.HO_branch_code===this.branch_user_code),isShowHistory:t.isShowHistory},callChange:this.abs_changeItemTable,abs_ClickHistory:this.handleOpenConfirm}),this.ref_table&&this.ref_table.set(t.O9_foreign_exchange_rate_table)),(!0===this.isModifyLocal&&this.branch_user_code!==this.HO_branch_code||0===this.state.O9_foreign_exchange_rate_local_table.length&&t.O9_foreign_exchange_rate_local_table.length>0)&&(this.stateData.table_local_data=this.getConfigTableData(t.O9_foreign_exchange_rate_local_table,t.isShowHistory,!0,this.HO_branch_code!==this.branch_user_code),this.stateData.local_tab_DOM_elm=(0,c.jsx)(Fe,{ref:e=>{this.ref_table_local=e},data:this.getDataTableDom(t.O9_foreign_exchange_rate_local_table,!0),columns:this.getColumnConfig(),CMD:{disable:this.getStatusEdit(!0,this.HO_branch_code!==this.branch_user_code),isShowHistory:t.isShowHistory},callChange:this.abs_changeItemTable,abs_ClickHistory:this.handleOpenConfirm}),this.ref_table_local&&this.ref_table_local.set(t.O9_foreign_exchange_rate_local_table)),this.stateData.modify_rate=this.getConfigButtonModify(this.state.languages.btn_modifiy,t),this.stateData.save_rate.dataFull.config.cmd.disable=this.disable,this.stateData.save_rate.dataFull.config.cmd.visible=!1!==o.save,this.stateData.view_modify.dataFull.config.cmd.visible=!1!==o.view_modify,this.stateData.approve.dataFull.config.cmd.visible=!1!==o.view_modify,this.stateData.reject.dataFull.config.cmd.visible=!1!==o.view_modify,this.stateData.view_modify.dataFull.config.cmd.disable=t.table_HO_modify.length+t.table_local_modify.length===0,this.stateData.approve.dataFull.config.cmd.disable=!(t.table_HO_modify.length+t.table_local_modify.length>0&&t.isShowHistory),this.stateData.reject.dataFull.config.cmd.disable=!(t.table_HO_modify.length+t.table_local_modify.length>0&&t.isShowHistory),this.state.last_update!==t.last_update&&(this.stateData.dateTimeUpdate.date=t.last_update),this.state.last_update_local!==t.last_update_local&&(this.stateData.last_update_local.date=t.last_update_local),this.stateData.form.config.default.title=this.state.languages.title_,this.stateData.save_rate.dataFull.config.default.title=this.state.languages.btn_save,this.stateData.tab[0].title=this.state.languages.tab_base,this.stateData.tab[1].title=this.state.languages.tab_local,t.isLoading!==this.stateData.form.cmd.isLoading&&(this.stateData.form.cmd.isLoading=t.isLoading)}convertCurrency(e){if(void 0===e||null===e||""===e)return"";let t=Number(e);return Number.isNaN(t)?"":(0,ye.Nx)(t,Le)}render(){const e=this.formRender;return"none"===this.state.visibility?null:(0,c.jsx)("div",{children:(0,c.jsx)(e,{stateData:this.stateData})})}}const Qe=Re;let ze;class Ue extends o.Component{constructor(e){var t;super(e),this.changeKeyLanguage=e=>{let t={title_:s.ZP.getLang("importDataFiles_title"),des_:s.ZP.getLang("importDataFiles_des"),date_from:s.ZP.getLang("importDataFiles_dateFrom"),date_to:s.ZP.getLang("importDataFiles_dateTo"),file_id:s.ZP.getLang("importDataFiles_id"),date:s.ZP.getLang("importDataFiles_date"),user_id:s.ZP.getLang("importDataFiles_userID"),file_name:s.ZP.getLang("importDataFiles_fileName"),status:s.ZP.getLang("importDataFiles_status"),processed:s.ZP.getLang("importDataFiles_processed"),size:s.ZP.getLang("importDataFiles_size"),lines:s.ZP.getLang("importDataFiles_lines"),messages:s.ZP.getLang("importDataFiles_messages"),file_type:s.ZP.getLang("importDataFiles_fileType"),btn_delete:s.ZP.getLang("importDataFiles_btnDelete"),btn_save:s.ZP.getLang("importDataFiles_btnSave"),btn_import:s.ZP.getLang("importDataFiles_btnImport"),btn_refresh:s.ZP.getLang("importDataFiles_btnRefresh"),tab_info:s.ZP.getLang("importDataFiles_tabInfo"),tab_import:s.ZP.getLang("importDataFiles_tabImport"),file_info:s.ZP.getLang("importDataFiles_fileInfo")};if(void 0!==e)return t;let i=this.state.infoA;i.title=s.ZP.getLang("importDataFiles_title"),i.des=s.ZP.getLang("importDataFiles_des"),i.lang_form.vi=s.ZP.getLang("importDataFiles_title"),i.lang_form.en=s.ZP.getLang("importDataFiles_title"),this.setState({languages:t,infoA:i})},this.UNSAFE_componentWillUpdate=(e,t)=>{var i;this.stateData.dateFrom.dataFull.value=t.dateFrom,this.stateData.dateTo.dataFull.value=t.dateTo,t.file_selected.length>0&&(this.stateData.valueDataFile={data:!0===t.save_click?{status:{title:"Status",value:"Imported"},file_name:{title:"File Name",value:t.file_selected[0].name},file_size:{title:"File Size",value:t.file_selected[0].size},url:t.file_selected[0].name}:{status:{title:"Status",value:""},file_name:{title:"File Name",value:t.file_selected[0].name},file_size:{title:"File Size",value:t.file_selected[0].size},url:t.file_selected[0].name}}),t.O9_admin_import_file_table!==this.state.O9_admin_import_file_table&&(this.stateData.table_data_fileimport=t.O9_admin_import_file_table.map((e=>[{type:"uTableColumnDefault",dataFull:{title_parent:"Full Name",data:this.convertCurrency(e.servertime),config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:(0,Y.FW)(e.idate,this.dateFormat),config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:e.lgname,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:e.name,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnAction",dataFull:{data:-1===e.status?{title:"Error",type:"danger"}:{title:"Success",type:"success"},config:{isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:e.isprocessed,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:this.convertCurrency(e.filesize),config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:e.lineinput,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnHtmlDanger",dataFull:{title_parent:"Email",data:e.msg?e.msg.replace(/\n/gm,"<br/>"):e.msg,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:e.filetype,config:{mode:"left",isFrozen:!1}}}]))),this.stateData.table_fileimport.dataFull.dataEmpty={isShow:!(null!==(i=t.O9_admin_import_file_table)&&void 0!==i&&i.length),title:s.ZP.getLang("header_searchNoResult")}},this.callAPI=(e,t)=>{var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return i[0].input=Object.assign(i[0].input,t),(0,N.Yr)(i,{}).then((e=>s.ZP.foGetData("data",e)))},this.toBase64=e=>new Promise(((t,i)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=()=>t(o.result),o.onerror=e=>i(e)})),this.abs_btn_refresh=()=>{let e=(0,Y.FW)(this.LogicDate_from.get(),this.dateFormat),t=(0,Y.FW)(this.LogicDate_to.get(),this.dateFormat);this.callAPI("O9_admin_import_file_table",{datefrom:e,dateto:t}).then((e=>{e&&this.setState({O9_admin_import_file_table:e.O9_admin_import_file_table||[]})}))},this.abs_btn_import=e=>{var t;let i=e.target.files,o=this.state.file_selected;i.length>0&&(o=i),this.stateData.btnImport.dataFull.config.default.att_content=null!==(t=o)&&void 0!==t&&t.length?"":"No file choose",this.setState({file_selected:o,save_click:!1})},this.abs_date_from=e=>{this.stateData.dateFrom.dataFull=this.LogicDate_from.getDataFullLogic(),this.setState({dateFrom:this.stateData.dateFrom.dataFull.value})},this.abs_date_to=e=>{this.stateData.dateTo.dataFull=this.LogicDate_to.getDataFullLogic(),this.setState({dateTo:this.stateData.dateTo.dataFull.value})},this.abs_btn_save=async()=>{let e=this.state.file_selected;e.length>0&&(0,N.bq)(e[0],void 0,{infoA:this.state.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((e=>{e&&7===e.status?this.callAPI("O9_admin_import_file_save",{filename:e.name}).then((e=>{s.ZP.showToast("Import",!0)})):s.ZP.showToast("Import",!1),setTimeout((()=>{let e=(0,Y.FW)(this.state.dateFrom,this.dateFormat),t=(0,Y.FW)(this.state.dateTo,this.dateFormat);this.callAPI("O9_admin_import_file_table",{datefrom:e,dateto:t}).then((e=>{e&&this.setState({O9_admin_import_file_table:e.O9_admin_import_file_table||[]})}))}),1e3)}),(e=>{})),this.setState({save_click:!0})},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},ze=(0,_.Iq)("O9_ImportDataFile");let i=this.changeKeyLanguage("start");this.user_info=s.ZP.context_get("user_acc"),this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT"),this.LogicDate_from=new me({abs_update:this.abs_date_from,name:"From",code:"from",mask_format:"DD/MM/YYYY",mask_mode:"date",class:"col-md-6"}),this.LogicDate_to=new me({abs_update:this.abs_date_to,name:"To",code:"To",mask_format:"DD/MM/YYYY",mask_mode:"date",class:"col-md-6"}),this.key_form="015001005",this.state={visibility:"",working_date_long:this.user_info.workingdate,data:this.props.data||[],languages:i,dateFrom:(0,Y.FW)(this.user_info.workingdate,this.dateFormat),dateTo:(0,Y.FW)(this.user_info.workingdate,this.dateFormat),tab_active:1,infoA:{lang_form:{vi:s.ZP.getLang("importDataFiles_title"),en:s.ZP.getLang("importDataFiles_title")},title:s.ZP.getLang("importDataFiles_title"),des:"Data files management",openOne:"true",form_code:this.key_form,ofModal:!1},save_click:!1,file_selected:[],O9_admin_import_file_table:[]},this.stateData={form:{title:s.ZP.getLang("importDataFiles_title")},table_fileimport:{dataFull:{Header:{data:[{title:"File ID",config:{width:"",isFrozen:!1}},{title:"Date",config:{width:"",isFrozen:!1}},{title:"User ID",config:{width:"",isFrozen:!1}},{title:"File name",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Processed",config:{width:"",isFrozen:!1}},{title:"Size",config:{width:"",isFrozen:!1}},{title:"Lines",config:{width:"",isFrozen:!1}},{title:"Messages",config:{width:"",isFrozen:!1}},{title:"File type",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1},height:"300px"}}},table_data_fileimport:[],delete:{dataFull:{config:{default:{title:"Delete",type:"submit",class:"",icon:"delete"},cmd:{visible:!1}}},abs_Click:this.abs_Click},tab_importdata:[{title:"General information",id:"1"},{title:"Import files",id:"2"}],dateFrom:{dataFull:this.LogicDate_from.getDataFullLogic()},dateTo:{dataFull:this.LogicDate_to.getDataFullLogic()},save:{dataFull:{config:{default:{title:"Save",type:"default",class:"",icon:"save"}}},abs_Click:this.abs_btn_save},refresh:{dataFull:{config:{default:{title:"Refresh",type:"submit",class:"",icon:"delete"}}},abs_Click:this.abs_btn_refresh},uPagination:{number_show:2,result_total:500,mode:{noJumpPage:!0},paging_record:[{number:5,selected:!0},{number:10},{number:15},{number:50}]},importFile:{dataFull:{config:{default:{title:"Save",type:"default",class:"col-md-2",icon:"save"}}}},valueDataFile:{data:{status:{title:"Status",value:""},file_name:{title:"File Name",value:"YEN"},file_size:{title:"File Size",value:"6202 Bytes"},url:""}},uForm:{dataFull:{config:{default:{title:"",title_sub:""}},cmd:{visibility:""}}},btnImport:{dataFull:{config:{default:{att_content:null!==(t=this.state.file_selected)&&void 0!==t&&t.length?"":"No file choose",title:"Import File"}},abs_Change:this.abs_btn_import}}}}convertCurrency(e){if(void 0===e||null===e||""===e)return"";let t=Number(e);return Number.isNaN(t)?"":t.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}render(){return(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(ze,{stateData:this.stateData,dataFull:this.state})})}componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.LogicDate_from.set(this.user_info.workingdate),this.LogicDate_to.set(this.user_info.workingdate),this.callAPI("O9_admin_import_file_table").then((e=>{e&&this.setState({O9_admin_import_file_table:e.O9_admin_import_file_table||[]})}))}}const Be=Ue;class Ye extends o.Component{constructor(e){super(e),this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT"),this.MediaDetail=(0,_.Iq)("O9_FormMediaDetail"),this.accountNumberFormat=s.ZP.getParameterSystem("MEDIA_ACCOUNT_NUMBER"),this.MediaConfig=this.getDefaultConfig(e.data),this.state={}}UNSAFE_componentWillUpdate(e){this.MediaConfig=""}render(){const e=this.MediaDetail,t=this.getDefaultConfig(this.props.data);return(0,c.jsx)(e,(0,u.Z)({},t))}getModalTitle(){let{customerType:e}=this.props.data;switch(e){case"C":return"Customer Information";case"G":return"Group Information";case"L":return"Signature Viewer";default:return""}}getRefTypeData(e){return[{title:"Single customer",value:"C"},{title:"Group of customer",value:"G"},{title:"Customer linkage",value:"L"}].map(((t,i)=>(0,u.Z)((0,u.Z)({},t),{},{selected:t.value===e})))}getBusinessData(e){return this.props.businessLineTypeData.map(((t,i)=>(0,u.Z)((0,u.Z)({},t),{},{selected:t.value===e})))}getComponentsInformation(e,t){switch(e){case"C":return[{key:"Customer Code",value:t.data1},{key:"Full Name",value:t.data2},{key:"DOB",value:t.data3?(0,Y.X2)(new Date(t.data3).getTime(),this.dateFormat):t.data3},{key:"Identification",value:t.data4}];case"G":return[{key:"Group Code",value:t.data1},{key:"Group Name",value:t.data2},{key:"Group Type",value:t.data3},{key:"Description",value:t.data4}];case"L":return[{key:"Linkage Code",value:t.data1},{key:"Master Code",value:t.data3},{key:"Master Name",value:t.data2},{key:"Description",value:t.data4}];default:return s.ZP.isDebug()&&console.log('Get Components information !== "C", "G" and "L"'),[]}}getDefaultConfig(e){if(void 0!==e)return{modal:{title:this.getModalTitle(),visibility:!0,abs_Close:this.props.closeModal},data_info:{valueModal:{dataFull:{data:e.info?this.getComponentsInformation(e.customerType,e.info):[]}}},stateData:e.media.map((e=>({img_form:{title:e.media_name,link:this.isImage(e.media_data)?`data:image/png;base64,${e.media_data}`:"../rs/global/img/file_icon.svg",content:this.isImage(e.media_data)?"":e.media_data,file_type:e.media_type},code:{dataFull:{config:{default:{title:"Code",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.customer_code}},reference_type:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Reference type",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!1,error:{message:"",type:""}}},data:this.getRefTypeData(e.reference_type)}},infor2:{dataFull:{config:{default:{title:"Customer name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.infor2}},infor1:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:this.getBusinessData(e.infor1)}},expireDate:{dataFull:{config:{default:{placeholder:this.dateFormat,title:"Expire date",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:e.expire_date?(0,Y.X2)(new Date(e.expire_date).getTime(),this.dateFormat):null}},other:{dataFull:{config:{default:{title:"Account number",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:(0,Y.Ui)(e.other,this.accountNumberFormat)}}})))}}isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(i){}return t}}const He=Ye,Ve={a:/[a-zA-Z]/,9:/\d/,h:/\d/,H:/\d/,m:/\d/,s:/\d/,"*":/./,_:/[a-zA-Z\d]/,L:/[a-zA-Z\d]/,".":/./,0:/\d/,z:/[a-zA-Z]/,Z:/[a-zA-Z ]/,A:/[A-Za-z0-9\\_]/},We={"#":"_"},Ge={0:{status:!0,reg_remove:/[^\d/]/g},L:{status:!0,reg_remove:/[^a-zA-Z\d]/g},z:{status:!0,reg_remove:/[^a-zA-Z]/g},Z:{status:!0,reg_remove:/[^a-zA-Z ]/g},".":{status:!0,reg_remove:""},A:{status:!0,reg_remove:/[^A-Za-z0-9\\_]/g}},Je={"-":".{100}",EMAIL:".{100}",EMAIL_MULTI:".{500}"},qe=e=>We[e],Ke=e=>Ve[e],Xe=e=>{let t=e[0];return Ge[t]},$e=e=>{var t,i;if(!e)return!1;let o=e[0];if(!0!==(null===(t=Ge[o])||void 0===t?void 0:t.status))return!1;let a=!0;for(const s of e)e[0]!==s&&(a=!1);return!0===(null===(i=Xe(o))||void 0===i?void 0:i.status)&&a},et=(e,t)=>{let i=[];const o=/(\\.|.)/g;let a;for(;null!==(a=o.exec(e));){a.index===o.lastIndex&&o.lastIndex++;const e=a[0],s=1===e.length?"regex":"const";let n={type:s,key:e};"regex"===s?Ke(e)?"date"===t&&/[^/:]/.test(e)?(n.reg=Ke("9"),n.value=e):(n.reg=Ke(e),n.value="_"):"date"===t&&/[^/:]/.test(e)?(n.reg=Ke("9"),n.value=e):qe(e)?(n.value=qe(e),n.type="static"):(n.value=e,n.type="const"):n.value=e[1],i.push(n)}return i},tt=(e,t)=>{let i="";for(const o of e)i+="date"===t?o.key:o.value;return i},it=(e,t)=>{let i="";for(const o of e)i+=o.key.includes("\\")?o.value:o.key;return i},ot=(e,t,i,o,a,s)=>{if(!e||!t||!i)return"";let n="";if(!e)return"";switch(i){case"default":for(const o in t){let i=e[o];if("regex"===t[o].type){if(!1===t[o].reg.test(i))return"";n+=i}else"static"===t[o].type&&(n+=i)}break;case"date":let i=tt(t);if("string"===o)n=a&&""!==a?(0,Y.Al)(e,i,a,s):(0,Y.w5)(e,i,s);else n=(0,Y.w5)(e,i,s);break;default:n=e}return n||0===n?n:""},at=(e,t,i,o,a)=>{if(!e&&0!==e||!t||!i)return"";let s="";const n=it(t);switch(i){case"default":let i=0;for(const a in t)if("regex"===t[a].type)if($e(n))s+=e[i]||"",i++;else{if(e[i]&&t[a].reg.test(e[i]))s+=e[i];else{if("OPTIMISTIC"!==o)return"";s+=t[a].value}i++}else"static"===t[a].type?(s+=t[a].value,t[a].value===e[i]&&i++):s+=t[a].value;break;case"date":let r=tt(t);s=(0,Y.sx)(e,r,a);break;default:s=e}return s||""},st=(e,t,i,o,a,s,n)=>{let r=ot(e,t,i,a,s,n);return null!==o&&void 0!==o&&o.length?at(r,o,i):r},nt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,n=e;return null!==o&&void 0!==o&&o.length&&(n=ot(e,o,i,s)),at(n,t,i,a,s)},rt=(e,t,i)=>{e=e?new Date(e):window.moment.utc().toDate();const o=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));return{mounth_data:ct(o.getMonth()+1),year_data:dt(t,i),day_data:lt(),day_of_mounth_data:ut(o.getTime()),date_view:e}},lt=()=>["SUN","MON","TUE","WED","THU","FRI","SAT"].map(((e,t)=>({title:e,type:"gray"}))),ct=e=>{e||(e=window.moment.utc().toDate().getMonth()+1);return["January","February","March","April","May","June","July","August","September","October","November","December"].map(((t,i)=>({title:t,selected:e-1===i})))},dt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1900,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2100,i=[];if(e<=t)for(let o=e;o<=t;o++)i.push(o);return i},ht=e=>{let t=window.moment.utc(e).toDate().getMonth()+1,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];(e=>e%400===0||e%100!==0&&e%4===0)(window.moment.utc(e).toDate().getFullYear())&&i[2]++;let o=[];for(let a=1;a<=i[t];a++)o.push(a);return o},ut=(e,t)=>{e||(e=Date.parse(window.moment.utc().toDate()));let i=window.moment.utc(e).toDate(),o=window.moment.utc((0,J.X7)(e,{M:-1})).toDate(),a=window.moment.utc((0,J.X7)(e,{M:1})).toDate(),s=Date.parse(o),n=Date.parse(a),r=ht(s),l=ht(e),c=ht(n),d=window.moment.utc([i.getFullYear(),i.getMonth(),1]).toDate(),h=window.moment.utc([i.getFullYear(),i.getMonth(),l.length]).toDate(),u=r.slice(r.length-d.getDay(),r.length),p=c.slice(0,6-h.getDay()),_=u.map((e=>{let t=String(e),a="gray",n=window.moment.utc(new Date(s).setDate(e)).valueOf();return e===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()&&(a="primary"),{title:t,type:a,value:n}})),f=l.map((t=>{let o=String(t),a="",s=window.moment.utc(new Date(e).setDate(t)).valueOf();return t===i.getDate()&&(a="primary"),{title:o,type:a,value:s}})),g=p.map((e=>{let t=String(e),o="gray",s=window.moment.utc(new Date(n).setDate(e)).valueOf();return e===i.getDate()&&a.getMonth()===i.getMonth()&&a.getFullYear()===i.getFullYear()&&(o="primary"),{title:t,type:o,value:s}})),m=_.concat(f);return m=m.concat(g),m};class pt extends o.Component{constructor(e){super(e),this.BuildPropsDefault=e=>{const{name:t,code:i,mask_format:o,abs_Blur:a,CMD:s,value:n,mask_mode_time:r}=e,l=e.mask_mode||"default",c=e.data_default||"",d=e.request||!1;return{default:{name:t,code:i,class:e.class||""},config:{data_default:c,mask_format:o,mask_data_format:"",value_type:"all",mask_mode:l,mask_mode_time:r},validate:{request:d},value:n,lang:{},CMD:s}},this.getComponentContructor=(e,t)=>{let i=this.buildPropsSmooth(t);return{props_smooth:i,state_smooth:this.buildStateSmooth(i)}},this.buildPropsSmooth=e=>{let t=s.ZP.cloneJson(e);t.config=e.config;let i=(e=>{let t=/\${([^}]+)}/gm.exec(e);if(null!==t)try{let i=s.ZP.context_get(t[1])||"";e=e.replace(t[0],i)}catch(i){}return e})(t.config.data_default);var o;return i=((e,t)=>{let i=e,o=/libDate_cal\((.*),(.*)\)/gm.exec(i);if(null!==o)try{i=(0,J.X7)((0,Y.xY)(o[1]),JSON.parse(o[2]))}catch(n){}let a=/JF_DATE\.([^(]+)\(([^)]*)\)/gm.exec(i);if(null!==a)try{e=s.ZP.persist_convertCondition(e);let t=a[1],o=a[2].split(",");i=J.ZP[t].apply(null,o)}catch(n){}return i})(i),void 0!==i&&null!==i||(i=""),t.config.data_default=i,t.config.mask_format=(o=t.config.mask_format,Je[o]||o),t.config.mask_format=(e=>{for(const t in Ve){let i,o=new RegExp(`\\${t}{(\\d+)}`,"g");for(;null!==(i=o.exec(e));){i.index===o.lastIndex&&o.lastIndex++;let a="";for(let e=0;e<Number(i[1]);e++)a+=t;e=e.replace(i[0],a)}}return e})(t.config.mask_format),t},this.buildStateSmooth=e=>{const t=e.config;let i=et(t.mask_format,t.mask_mode),o=et(t.mask_data_format,t.mask_mode),a=tt(i,t.mask_mode),n=t.mask_mode,r={status:!1,reg_remove:""};if($e(t.mask_format)){let e=Xe(t.mask_format);void 0!==e&&(r.status=e.status,r.reg_remove=e.reg_remove)}const l=a,c=Date.parse(new Date);let d={mounth_data:ct(),year_data:dt(),day_data:lt(),day_of_mounth_data:ut(c,c),date_view:c},h=nt(e.value,i,n,o);return"date"===n&&Number(e.value)&&(h=nt(Number(e.value),i,n,[])),{value_type:t.value_type||"all",error_input:!1,lang_select:s.ZP.getLangKey(),component_title:e.default.name||"",CMD:e.CMD,value:e.value,mask_value:h,date_selected_cache:0,date_picker:rt(e.value),mask_mode:n,mask_format:l,mask_regs:i,mask_regs_to:o,mask_placeholder:a,mask_mode_time:t.mask_mode_time||"",free_style:r,date_picker:d}},this.getInfoErrror=()=>{var e;const{help_mess:t}=this.state;return t?{info:this.getErrorLang(this.state.help_mess),key:(null===(e=this.state.lang)||void 0===e?void 0:e[this.props_smooth.default.name])||this.props_smooth.default.name,infoComponent:this.props_smooth.default}:""},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props_smooth.infoView,default:this.props_smooth.default,layout:this.props_smooth.infoLayout,block:e.block}},this.getDataOOP=(e,t)=>this.data_select,this.getAdvanced=(e,t)=>this.maskInputGet(),this.setAdvanced=(e,t)=>{if(e.codeHidden){if(e.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(void 0!==this.props_smooth.config.data_view)var i="";void 0!==this.props_smooth.config.data_value&&(i=s.ZP.getOOP(this.data_select,this.props_smooth.config.data_value.trim())+""),this.maskInputSet(i,"enter_tab")}}else e.list_component&&(null!==t&&void 0!==t||(t=""),this.maskInputSet(t,"on_change"))},this.get=()=>this.maskInputGet(),this.getValue=()=>this.state.mask_value,this.set=e=>{this.maskInputSet(e,"on_change")},this.reload=(e,t)=>{const i=this.props_smooth.config;this.data_select={},this.maskInputSet(i.data_default)},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.maskInputSet=(e,t,i,o)=>{const{mask_regs:a,mask_regs_to:s,mask_mode:n}=this.state;let r={end_pos:0,start_pos:0,help_mess:"",mask_value:"",value:e},l=nt(e,a,n,s);"date"===n&&(r.date_picker=rt(e),Number(e)&&(l=nt(Number(e),a,n,[]))),r.mask_value=l,r=Object.assign(r,o),this.setState(r,(()=>{this.props.abs_update&&this.props.abs_update(this.state)}))},this.maskInputGet=()=>{const{mask_regs:e,mask_regs_to:t,mask_value:i,mask_mode:o}=this.state;let a="";return this.state.free_style.status?i:(a=st(i,e,o,"date"===o?[]:t),a)},this.maskInputClear=()=>{this.data_select={},this.setState({end_pos:0,start_pos:0,value:"",mask_value:"",help_mess:""},(()=>{}))},this.maskInputValidate=()=>{const{mask_value:e,mask_mode:t,value:i}=this.state;let o="",a=this.maskInputGet();return o=e&&!this.maskInputGet()||"date"===t&&!this.isDateValid(i)?"jMaskInput_WrongFormat":function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[{title:"@VALUE",value:arguments.length>1?arguments[1]:void 0},{title:"@NOW",value:Date.parse(new Date)},{title:"@YEAR",value:31536e6.toString()},{title:"@MOUNTH",value:2592e6.toString()},{title:"@DAY",value:864e5.toString()},{title:"@HOURS",value:36e5.toString()},{title:"@MINUTE",value:6e4.toString()},{title:"@SECONDS",value:1e3.toString()}];for(const i of e){let{content:e,mess:o}=i;for(const i of t)e=e.replace(new RegExp(i.title,"g"),i.value);if(!1===s.ZP.checkDynamicConditionNoData(e))return o}return""}(this.props_smooth.validate.conditions,a),o},this.abs_calendar_changeMonth=e=>{const t=this.maskInputGet()||Date.parse(new Date),i=(0,J.X7)(t,{M:e});this.maskInputSet(i)},this.abs_calendar_submit=e=>{let t=this.state.date_picker.day_of_mounth_data[e].value;this.maskInputSet(t)},this.abs_calendar_chooseYear=e=>{const t=this.maskInputGet()||Date.parse(new Date),i=new Date(t).setFullYear(e);this.maskInputSet(i)},this.abs_calendar_changeYear=e=>{},this.abs_calendar_chooseMonth=e=>{const t=e,i=this.maskInputGet()||Date.parse(new Date),o=new Date(i).setMonth(t);this.maskInputSet(o)},this.abs_calendar_openCalendar=()=>{let e=this.maskInputGet();e&&this.maskInputSet(e,"","",{date_selected_cache:e})},this.abs_calendar_KeyUp=e=>{const t=this.maskInputGet()||Date.parse(new Date);let i,o=this.state.date_selected_cache;switch(e.key){case"ArrowLeft":i=(0,J.X7)(t,{d:-1}),this.maskInputSet(i);break;case"ArrowRight":i=(0,J.X7)(t,{d:1}),this.maskInputSet(i);break;case"ArrowUp":i=(0,J.X7)(t,{d:-7}),this.maskInputSet(i);break;case"ArrowDown":i=(0,J.X7)(t,{d:7}),this.maskInputSet(i);break;case"Enter":i=t,this.maskInputSet(i),this.ref_maskinput.current.abs_CloseCalendar();break;case"Escape":Number(o)!==Number(this.maskInputGet())?this.maskInputSet(o):this.ref_maskinput.current.abs_CloseCalendar()}},this.abs_calendar_today=()=>{const e=Date.parse(new Date);this.maskInputSet(e)},this.onEventKey=e=>{if("Delete"===e.key)this.maskInputClear();this.state.mask_mode},this.onClick=e=>{},this.onBlur=()=>{let e=this.maskInputValidate();void 0!==this.props.abs_Blur&&this.props.abs_Blur(),e&&this.maskInputSet("")},this.setLastPost=e=>{let t=e.target;this.state.start_pos=t.selectionStart,this.state.end_pos=t.selectionEnd},this.setPos=(e,t)=>{e.selectionStart=t,e.selectionEnd=t},this.onChangeMaskInput=e=>{let{start_pos:t,mask_value:i,mask_regs:o,mask_placeholder:a,mask_mode:s,mask_regs_to:n,mask_mode_time:r}=this.state;const l=e.target;let c=l.selectionStart,d=l.value||"";const h=this.state.free_style;if(h.status)return d=d.replace(h.reg_remove,""),d=d.slice(0,o.length),void this.setState({mask_value:d});let u=d.slice(t,c)||"",p=0,_="",f=d.slice(0,c);for(let m=c;m<a.length;m++)m<c+(a.length-d.length)?f+=a[m]:f+=i[m]||a[m];i=f;for(const m in o){const e=o[m];"regex"===e.type||"const"===e.type&&e.value===u[p]?t<=m&&p<u.length?("const"===e.type&&e.value===u[p]||e.reg.test(u[p])?_+=u[p]||e.value:(_+=e.value,c--),p++):_+=i[m]||a[m]:(_+=e.value,t<=m&&p<u.length&&c++)}_===a&&(_="");let g=it(this.state.mask_regs);this.setState({mask_value:_,value:"date"===s?(0,Y.w5)(_,g,r):st(_,o,s,n)},(()=>{this.setPos(l,c),this.props.abs_update&&this.props.abs_update(this.state)}))},this.getErrorLang=e=>{switch(e){case"validateNumMin":return s.ZP.getLang(e).replace("{count}",this.state.validate.min);case"validateNumMax":return s.ZP.getLang(e).replace("{count}",this.state.validate.max);default:return s.ZP.getLang(e)}},this.getDataFullLogic=()=>(0,u.Z)((0,u.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChangeMaskInput,abs_Blur:this.onBlur,abs_Click:this.onClick,abs_KeyDown:this.setLastPost,abs_KeyUp:this.onEventKey,abs_MouseUp:this.setLastPost}),this.setCMD=(e,t)=>{const{CMD:i}=this.state;let o=Object.assign(s.ZP.cloneJson(i),t);if(i.disabled!==o.disabled||i.visible!==o.visible||i.block!==o.block){let e=this.state;e.CMD=o,this.setState(e)}},this.prop_default=this.BuildPropsDefault(e),this.propertyConstructor={},this.data_debug={},this.app_debug=[],this.state={is_lookup:!1,is_error:!1,is_clicked:!1,help_mess:"",lang_select:"",title:"",CMD:this.props.CMD,end_pos:-1,start_pos:0,_type:"",value:"",mask_value:"",mask_format:"",mask_placeholder:"",mask_mode:"default",mask_regs:[],mask_regs_to:[],mask_mode_time:"",free_style:{status:!1,reg_remove:""},date_picker:{mounth_data:[],year_data:[],day_data:[],day_of_mounth_data:[],date_view:Date.parse(new Date)},date_selected_cache:0},this.ref_maskinput=o.createRef();const t=this.getComponentContructor({},this.prop_default);this.state=Object.assign(this.state,t.state_smooth),this.props_smooth=t.props_smooth}UNSAFE_componentWillUpdate(e,t){e.CMD.disabled!==this.state.CMD.disabled&&this.setCMD(void 0,e.CMD),e.value===this.state.value||Number.isNaN(e.value)||this.maskInputSet(e.value)}isDateValid(e){return!isNaN(new Date(e))}getConfigTemplate(){const{date_picker:e}=this.state;return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{subTitle_isShow:"date"===this.state.mask_mode,subTitle:`(${this.state.mask_placeholder})`,placeholder:this.state.CMD.disabled+""==="true"?" ":it(this.state.mask_regs,this.props_smooth.config.mask_mode),title:this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.props_smooth.validate.request,icon:""},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:!0,error:{message:this.state.help_mess,type:""}},mode:{textAlign:"left",letterSpacing:"M"}},valueTitleHover:"true"!==String(this.state.CMD.disabled)?"":this.state.mask_value,value:this.state.mask_value,cmd:{isLock:!1},calendar_data:{value_current:"",today:{title:"Today"},config:{days_title:e.day_data},list_months:e.mounth_data,list_years:{value:new Date(e.date_view).getFullYear()||"",data:e.year_data},list_days:e.day_of_mounth_data},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_today:this.abs_calendar_today,abs_calendar_KeyUp:this.abs_calendar_KeyUp}}render(){let e=this.state.mask_mode;const t=(0,_.RP)("date"===e?"uDate":"uInput");return(0,c.jsx)(t,{dataFull:(0,u.Z)((0,u.Z)({},this.getConfigTemplate()),{},{abs_Change:this.onChangeMaskInput,abs_Blur:this.onBlur,abs_Click:this.onClick,abs_KeyDown:this.setLastPost,abs_KeyUp:this.onEventKey,abs_MouseUp:this.setLastPost}),ref:this.ref_maskinput})}}const _t=pt;class ft extends o.Component{constructor(e){var t,i;super(e),t=this,this.changeValueMask=(e,t,i)=>{switch(e){case"import_tab":let{tab_import:e}=this.state;e[t].value=i,this.setState({tab_import:e});break;case"view_tab":let{tab_view:o}=this.state;o[t].value=i,this.setState({tab_view:o});break;case"advanced_search_tab":let{tab_search:a}=this.state;a.advanced_search[t].value=i,this.setState({tab_search:a})}},this.absViewModifyExpire=e=>{let{tab_view:t}=this.state,i=this.logicViewModifyExpiredDate.getDataFullLogic();t.expire_date.value=i.value,this.setState({tab_view:t})},this.absViewModifyAccountNumber=e=>{let{tab_view:t}=this.state,i=this.logicViewModifyAccountNumber.getDataFullLogic();t.other.value=i.value,this.setState({tab_view:t})},this.absImportExpire=e=>{let{tab_import:t}=this.state,i=this.logicImportExpiredDate.getDataFullLogic();t.expire_date.value=i.value,this.setState({tab_import:t})},this.absImportCode=e=>{let{tab_import:t}=this.state,i=this.logicImportCode.getDataFullLogic();t.customer_code.value=i.value,this.setState({tab_import:t})},this.absImportAccountNumber=e=>{let{tab_import:t}=this.state,i=this.logicImportAccountNumber.getDataFullLogic();t.other.value=i.value,this.setState({tab_import:t})},this.closeForm=()=>{s.ZP.removeForm(this.key_form)},this.getDefaultPropsTemplate=function(){var e,i,o;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!==(e=t.state)&&void 0!==e&&e.role_action&&(a=t.state.role_action);let{languages:s}=t.state;return{stateData:{form:{title:"CTM-Customer media files",title_button:{close_button:s.form_btn_close,add_form:s.form_btn_add},cmd:{isLoading:t.state.isLoading},abs_Close:t.closeForm,abs_AddMenuBar:t.addMenu},noti_system:"System support view for image (png, img..) and pdf only",tab_search:{search:{placeholder:"Search text",value:t.state.tab_search.search_text.value,abs_Change:t.changeValueSearch,abs_search:t.onSearch,cmd:{visible:!1!==a.search}},btn_search:{dataFull:{config:{default:{title:"Search",icon:"fa-search",type:"primary"},cmd:{visible:!1!==a.search}},abs_Click:t.onSearch}},table_config:t.getTableConfig(),table_header:t.getHeaderConfig(),table_data:t.getDataTableConfig(t.state.tab_search.table_search.data),advanced_search:{title:"Advanced search",class:"col-xl-10 col-lg-10 col-md-11 col-sm-12 offset-xl-2-right offset-lg-2-right offset-md-1-right",cmd:{visible:a["advanced search"]},customer_code:(0,c.jsx)(_t,{abs_update:e=>{t.changeValueMask("advanced_search_tab","customer_code",e.value)},name:"Code",code:"code",mask_format:t.customerCdFormat,mask_mode:"default",class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",CMD:{},value:t.state.tab_search.advanced_search.customer_code.value}),account_number:(0,c.jsx)(_t,{abs_update:e=>{t.changeValueMask("advanced_search_tab","account_number",e.value)},name:"Account Number",code:"other",mask_format:t.accountNumberFormat,mask_mode:"default",class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",CMD:{},value:t.state.tab_search.advanced_search.account_number.value}),business_line:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",code_form_component:"business_line"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:t.getListDataSelect(t.businessLineAdvancedTypeData,t.state.tab_search.advanced_search.business_line.value||(null===(i=t.businessLineAdvancedTypeData[0])||void 0===i?void 0:i.value)),abs_Change:t.onChangeValueSelect}},customer_name:{dataFull:{config:{default:{title:"Customer Name",type:"text",class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",code_form_component:"customer_name"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:t.state.tab_search.advanced_search.customer_name.value,abs_Change:t.onInputChangeValue}},media_name:{dataFull:{config:{default:{title:"Media Name",type:"text",class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",code_form_component:"media_name"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:t.state.tab_search.advanced_search.media_name.value,abs_Change:t.onInputChangeValue}},status:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Status",type:"text",class:"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right",code_form_component:"status"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:t.getListDataSelect(t.statusData,t.state.tab_search.advanced_search.status.value||t.statusData[0].value),abs_Change:t.onChangeValueSelect}},open_date_from:(0,c.jsx)(_t,{abs_update:e=>{t.changeValueMask("advanced_search_tab","open_date_from",e.value)},name:"Open date from",code:"open_date_from",mask_format:t.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-sm-6 col-12",CMD:{},value:t.state.tab_search.advanced_search.open_date_from.value}),open_date_to:(0,c.jsx)(_t,{abs_update:e=>{t.changeValueMask("advanced_search_tab","open_date_to",e.value)},name:"Open date to",code:"open_date_to",mask_format:t.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-sm-6 col-12",CMD:{},value:t.state.tab_search.advanced_search.open_date_to.value}),last_date_from:(0,c.jsx)(_t,{abs_update:e=>{t.changeValueMask("advanced_search_tab","last_date_from",e.value)},name:"Last date from",code:"last_date_from",mask_format:t.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-sm-6 col-12",CMD:{},value:t.state.tab_search.advanced_search.last_date_from.value}),last_date_to:(0,c.jsx)(_t,{abs_update:e=>{t.changeValueMask("advanced_search_tab","last_date_to",e.value)},name:"Last date to",code:"last_date_to",mask_format:t.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-sm-6 col-12",CMD:{},value:t.state.tab_search.advanced_search.last_date_to.value}),expire_date_from:(0,c.jsx)(_t,{abs_update:e=>{t.changeValueMask("advanced_search_tab","expire_date_from",e.value)},name:"Expire date from",code:"expire_date_from",mask_format:t.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-sm-6 col-12",CMD:{},value:t.state.tab_search.advanced_search.expire_date_from.value}),expire_date_to:(0,c.jsx)(_t,{abs_update:e=>{t.changeValueMask("advanced_search_tab","expire_date_to",e.value)},name:"Expire date to",code:"expire_date_to",mask_format:t.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-sm-6 col-12",CMD:{},value:t.state.tab_search.advanced_search.expire_date_to.value}),btn_search:{dataFull:{config:{default:{title:"Search",icon:"fa-search",type:"primary"}},abs_Click:t.onSearchAdvanced}}}},tab:{data:t.getTabDataConfig(),abs_select:t.clickTabHandler},tab_import:(0,u.Z)((0,u.Z)({},t.getImportDataFileConfig()),{},{para_import:{note_import:"File name must only have alphanumeric characters and no spaces",isImported:t.state.tab_import.isImported}}),tab_view:{para_view:{isHasData:t.state.tab_view.isHasData},img_form:{link:t.getImageTemplate(t.state.tab_view.data_view.media_data),content:t.state.tab_view.data_view.media_data,title:t.state.tab_view.data_view.media_title,file_type:t.state.tab_view.data_view.media_type},code:{dataFull:{config:{default:{title:"Code",type:"text",class:"col-md-12",code_form_component:"code"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:(0,Y.Ui)(t.state.tab_view.customer_code.value,t.customerCdFormat)},abs_Change:t.onInputChangeValue,abs_Blur:t.onBlurGetInfoCustomer},reference_type:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Reference Type",type:"text",class:"col-md-12",code_form_component:"reference_type"},cmd:{disable:!0,visible:!1,error:{message:"",type:""}}},data:t.getReferenceTypeData(t.state.tab_view.reference_type.value||t.referenceTypeData[0].value)},abs_Change:t.onChangeValueSelect},infor1:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-md-12",code_form_component:"infor1"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:t.getBusinessLineTypeData(t.state.tab_view.infor1.value||(null===(o=t.businessLineTypeData[0])||void 0===o?void 0:o.value))},abs_Change:t.onChangeValueSelect},infor2:{dataFull:{config:{default:{title:"Customer Name",type:"text",class:"col-md-12",code_form_component:"infor2"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:t.state.tab_view.infor2.value},abs_Change:t.onInputChangeValue},expireDate:{dataFull:t.logicViewModifyExpiredDate.getDataFullLogic()},expireDate_DOM:(0,c.jsx)(_t,{abs_update:e=>{t.changeValueMask("view_tab","expire_date",e.value)},name:"Expire Date",code:"expireDate",mask_format:t.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-md-12",CMD:t.state.tab_view.expire_date.CMD,value:t.state.tab_view.expire_date.value}),other:{dataFull:t.logicViewModifyAccountNumber.getDataFullLogic()},other_DOM:(0,c.jsx)(_t,{abs_update:e=>{t.changeValueMask("view_tab","other",e.value)},name:"Account Number",code:"other",mask_format:t.accountNumberFormat,mask_mode:"default",class:"col-md-12",CMD:t.state.tab_view.other.CMD,value:t.state.tab_view.other.value}),getInfo:{dataFull:{config:{default:{title:"Get information",type:"default",class:""}},dataItem:{tab_select:"tab_view"}},abs_Click:t.onClickGetInfo},printVoucher:{dataFull:{config:{default:{title:"Print",type:"default",class:""},cmd:{disable:!1,visible:!1}}},abs_Click:t.printVoucher},approveBtn:{dataFull:{config:{default:{title:"Approve",type:"default",class:""},cmd:{disable:!1===t.state.isApprove?"N"!==t.state.tab_view.data_view.media_status:t.state.isApprove,visible:a.approve}}},abs_Click:t.onClickApproved},modify:{dataFull:{config:{default:{title:"Modify",type:"default",class:""},cmd:{disable:t.state.isClickModify,visible:a.modify}}},abs_Click:t.onClickModify},saveForm:{dataFull:{config:{default:{title:"Save",type:"primary",class:""},cmd:{disable:!t.state.isClickModify,visible:a.modify}}},abs_Click:t.onClickSave}}}}},this.getTabDataConfig=function(e){var i;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[];return void 0!==(null===(i=t.state)||void 0===i?void 0:i.role_action)&&(o=t.state.role_action),!1===o.search&&!1===o["advanced search"]||a.push({title:"Search",id:t.tabIds.search}),o.import&&a.push({title:"Import",id:t.tabIds.import}),!1!==o.view&&a.push({title:"View - Modify",id:t.tabIds.viewModify}),t.state.tab_active&&void 0===e&&(e=t.state.tab_active),void 0===e&&(e=a[0].id),a.map((t=>(0,u.Z)((0,u.Z)({},t),{},{isShow:t.id===e})))},this.pageRecordChangeRoleSearch=e=>{let{tab_search:t}=this.state;t.table_search.page_size=this.record[e],t.table_search.paging_index=1,this.search_page_index=1;let i=(0,Y.FT)(t.advanced_search.open_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),o=(0,Y.FT)(t.advanced_search.open_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),a=(0,Y.FT)(t.advanced_search.last_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),n=(0,Y.FT)(t.advanced_search.last_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),r=(0,Y.FT)(t.advanced_search.expire_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),l=(0,Y.FT)(t.advanced_search.expire_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]");this.setState({tab_search:t},(()=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:t.isSearchAdvanced?"SQL_ADSEARCH_MEDIA":"SQL_SEARCH_MEDIA",api_data:{search_text:t.search_text.value,customer_code:t.advanced_search.customer_code.value,account_number:t.advanced_search.account_number.value,business_line:t.advanced_search.business_line.value,customer_name:t.advanced_search.customer_name.value,media_name:t.advanced_search.media_name.value,status:t.advanced_search.status.value,open_date_from:"Invalid date"===i||""===i?null:i,open_date_to:"Invalid date"===o||""===o?null:o,last_date_from:"Invalid date"===a||""===a?null:a,last_date_to:"Invalid date"===n||""===n?null:n,expire_date_from:"Invalid date"===r||""===r?null:r,expire_date_to:"Invalid date"===l||""===l?null:l,page_size:this.state.tab_search.table_search.page_size,page_index:this.search_page_index-1}}).then((e=>{let i=[];e&&(i=e.items||[]);for(let t of i){var o,a,n;t.media_status=(null===(o=this.OWN_CDLIST.STS[t.media_status])||void 0===o?void 0:o.caption)||t.media_status,t.reference_type=(null===(a=this.OWN_CDLIST.TYPE[t.reference_type])||void 0===a?void 0:a.caption)||t.reference_type,t.infor1=(null===(n=this.OWN_CDLIST.CATEGORIES[t.infor1])||void 0===n?void 0:n.caption)||t.infor1}t.table_search.data=i,t.table_search.result_total=(null===e||void 0===e?void 0:e.total_count)||0,this.setState({tab_search:t},(()=>{0===i.length&&s.ZP.showToast("Data not found")}))}))}))},this.pageChangeRoleSearch=e=>{this.search_page_index=e;let{tab_search:t}=this.state;t.table_search.paging_index=e;let i=this.state.tab_search.search_text.value,o=(0,Y.FT)(t.advanced_search.open_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),a=(0,Y.FT)(t.advanced_search.open_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),n=(0,Y.FT)(t.advanced_search.last_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),r=(0,Y.FT)(t.advanced_search.last_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),l=(0,Y.FT)(t.advanced_search.expire_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),c=(0,Y.FT)(t.advanced_search.expire_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]");this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:t.isSearchAdvanced?"SQL_ADSEARCH_MEDIA":"SQL_SEARCH_MEDIA",api_data:{search_text:i,customer_code:t.advanced_search.customer_code.value,account_number:t.advanced_search.account_number.value,business_line:t.advanced_search.business_line.value,customer_name:t.advanced_search.customer_name.value,media_name:t.advanced_search.media_name.value,status:t.advanced_search.status.value,open_date_from:"Invalid date"===o||""===o?null:o,open_date_to:"Invalid date"===a||""===a?null:a,last_date_from:"Invalid date"===n||""===n?null:n,last_date_to:"Invalid date"===r||""===r?null:r,expire_date_from:"Invalid date"===l||""===l?null:l,expire_date_to:"Invalid date"===c||""===c?null:c,page_size:this.state.tab_search.table_search.page_size,page_index:this.search_page_index-1}}).then((e=>{let i=[];e&&(i=e.items||[]);for(let t of i){var o,a,n;t.media_status=(null===(o=this.OWN_CDLIST.STS[t.media_status])||void 0===o?void 0:o.caption)||t.media_status,t.reference_type=(null===(a=this.OWN_CDLIST.TYPE[t.reference_type])||void 0===a?void 0:a.caption)||t.reference_type,t.infor1=(null===(n=this.OWN_CDLIST.CATEGORIES[t.infor1])||void 0===n?void 0:n.caption)||t.infor1}t.table_search.result_total=(null===e||void 0===e?void 0:e.total_count)||0,t.table_search.data=i,this.setState({tab_search:t},(()=>{0===i.length&&s.ZP.showToast("Data not found")}))}))},this.changeValueSearch=e=>{let{tab_search:t}=this.state;t.search_text.value=e.target.value,this.setState({tab_search:t})},this.onSearch=()=>{let{tab_search:e}=this.state,t=e.search_text.value;this.search_page_index=1,this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_SEARCH_MEDIA",api_data:{search_text:t,page_size:e.table_search.page_size,page_index:this.search_page_index-1}}).then((t=>{let i=[];if(t.hasError)s.ZP.showToast(t.error_data[0].info,!1);else{i=t.items;for(let e of i){var o,a,n;e.media_status=(null===(o=this.OWN_CDLIST.STS[e.media_status])||void 0===o?void 0:o.caption)||e.media_status,e.reference_type=(null===(a=this.OWN_CDLIST.TYPE[e.reference_type])||void 0===a?void 0:a.caption)||e.reference_type,e.infor1=(null===(n=this.OWN_CDLIST.CATEGORIES[e.infor1])||void 0===n?void 0:n.caption)||e.infor1}e.table_search.data=i,e.table_search.result_total=(null===t||void 0===t?void 0:t.total_count)||0,e.table_search.paging_index=1,e.isSearchAdvanced=!1,this.setState({tab_search:e},(()=>{0===i.length&&s.ZP.showToast("Data not found")}))}}))},this.onSearchAdvanced=()=>{let{tab_search:e}=this.state;this.search_page_index=1;let t=(0,Y.FT)(e.advanced_search.open_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),i=(0,Y.FT)(e.advanced_search.open_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),o=(0,Y.FT)(e.advanced_search.last_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),a=(0,Y.FT)(e.advanced_search.last_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),n=(0,Y.FT)(e.advanced_search.expire_date_from.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),r=(0,Y.FT)(e.advanced_search.expire_date_to.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]");this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_ADSEARCH_MEDIA",api_data:{customer_code:e.advanced_search.customer_code.value,account_number:e.advanced_search.account_number.value,business_line:e.advanced_search.business_line.value,customer_name:e.advanced_search.customer_name.value,media_name:e.advanced_search.media_name.value,status:e.advanced_search.status.value,open_date_from:"Invalid date"===t||""===t?null:t,open_date_to:"Invalid date"===i||""===i?null:i,last_date_from:"Invalid date"===o||""===o?null:o,last_date_to:"Invalid date"===a||""===a?null:a,expire_date_from:"Invalid date"===n||""===n?null:n,expire_date_to:"Invalid date"===r||""===r?null:r,page_size:e.table_search.page_size,page_index:this.search_page_index-1}}).then((t=>{let i=[];if(t.hasError)s.ZP.showToast(t.error_data[0].info,!1);else{i=t.items;for(let e of i){var o,a,n;e.media_status=(null===(o=this.OWN_CDLIST.STS[e.media_status])||void 0===o?void 0:o.caption)||e.media_status,e.reference_type=(null===(a=this.OWN_CDLIST.TYPE[e.reference_type])||void 0===a?void 0:a.caption)||e.reference_type,e.infor1=(null===(n=this.OWN_CDLIST.CATEGORIES[e.infor1])||void 0===n?void 0:n.caption)||e.infor1}e.table_search.data=i,e.table_search.result_total=(null===t||void 0===t?void 0:t.total_count)||0,e.table_search.paging_index=1,e.isSearchAdvanced=!0,this.setState({tab_search:e},(()=>{0===i.length&&s.ZP.showToast("Data not found")}))}}))},this.changeKeyLanguage=e=>{let t={title_:s.ZP.getLang("customerMediaFiles_title"),des_:s.ZP.getLang("customerMediaFiles_des"),btn_search:s.ZP.getLang("customerMediaFiles_btnSearch"),btn_view:s.ZP.getLang("customerMediaFiles_btnView"),btn_modify:s.ZP.getLang("customerMediaFiles_btnModify"),btn_delete:s.ZP.getLang("customerMediaFiles_btnDelete"),btn_save:s.ZP.getLang("customerMediaFiles_btnSave"),btn_import:s.ZP.getLang("customerMediaFiles_btnImport"),btn_approve:s.ZP.getLang("customerMediaFiles_btnApprove"),customer_code:s.ZP.getLang("customerMediaFiles_ctmCode"),customer_type:s.ZP.getLang("customerMediaFiles_ctmType"),media_name:s.ZP.getLang("customerMediaFiles_mediaName"),status:s.ZP.getLang("customerMediaFiles_status"),media_type:s.ZP.getLang("customerMediaFiles_mediaType"),open_date:s.ZP.getLang("customerMediaFiles_openDate"),last_date:s.ZP.getLang("customerMediaFiles_lastDate"),expire_date:s.ZP.getLang("customerMediaFiles_expireDate"),other:s.ZP.getLang("customerMediaFiles_accountNumber"),code:s.ZP.getLang("customerMediaFiles_code"),reference_type:s.ZP.getLang("customerMediaFiles_refType"),get_info:s.ZP.getLang("customerMediaFiles_getInfo"),customer_info:s.ZP.getLang("customerMediaFiles_ctmInfo"),full_name:s.ZP.getLang("customerMediaFiles_fullName"),DOB:s.ZP.getLang("customerMediaFiles_DOB"),address:s.ZP.getLang("customerMediaFiles_address"),identification:s.ZP.getLang("customerMediaFiles_identification"),form_btn_close:s.ZP.getLang("form_close_title"),form_btn_add:s.ZP.getLang("form_add_title")};if(void 0!==e)return t;let i=this.state.infoA;i.title=s.ZP.getLang("customerMediaFiles_title"),i.des=s.ZP.getLang("customerMediaFiles_des"),i.lang_form.vi=s.ZP.getLang("customerMediaFiles_title"),i.lang_form.en=s.ZP.getLang("customerMediaFiles_title"),this.setState({languages:t,infoA:i})},this.abs_autoCallBackData=()=>{this.setState({record_index:this.state.record_index+5})},this.pushNotification=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i={},o=s.ZP.getLang(e);i={class_:!0===t?"success":"error",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}},s.ZP.pushNotify("notifyToast",i,{}),s.ZP.pushNotify("notifyDefault",i,{}),s.ZP.callAllScreenListen()},this.handleImageChange=e=>{e.preventDefault();let t=new FileReader,i=e.target.files[0];t.onloadend=()=>{let{tab_import:e}=this.state;e.data_import.file=i,e.data_import.fileName=i.name,e.data_import.fileType=i.type,e.data_import.img=t.result,e.isImported=!0,e.data_import.att_content="",e.data_import.link_img="img"===this.getFileType(i.type,i.name)?t.result:"../rs/global/img/file_icon.svg",e.data_import.content_img="img"===this.getFileType(i.type,i.name)?"":t.result.split(",")[1],e.data_import.file_type=this.getFileType(i.type,i.name),e.data_import.title_img=i.name,this.setState({tab_import:e})};let o=s.ZP.getParameterSystem("MEDIA_UPLOAD_MAX_SIZE")||5;void 0!==i&&null!==i&&i.size/1024/1024<o&&t.readAsDataURL(i)},this.clickTabHandler=(e,t)=>{this.setState({tab_active:t})},this.onClickApproved=(e,t)=>{let{tab_view:i}=this.state;void 0!==i.data_view.id&&"N"===i.data_view.media_status&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_APPROVE_MEDIA",api_data:{id:i.data_view.id}}).then((e=>{e&&!e.hasError?(s.ZP.showToast("Approve ",!0),this.setState({isApprove:!0})):s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1)}))},this.onClickModify=()=>{let{tab_view:e}=this.state;e.expire_date.CMD.disabled=!1,e.other.CMD.disabled=!1,this.setState({isClickModify:!0,isApprove:!0,tab_view:e},(()=>{}))},this.onClickSave=()=>{if(void 0!==this.state.tab_view.isHasData){let{tab_view:e}=this.state,t=(0,Y.FT)(e.expire_date.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),i={media_id:e.data_view.id,expire_date:"Invalid date"===t||""===t?null:t,other:e.other.value,infor1:e.infor1.value,infor2:e.infor2.value};this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_UPDATE_MEDIA",api_data:(0,u.Z)({},i)}).then((e=>{if(e&&!e.hasError){let{tab_view:e}=this.state;e.expire_date.CMD.disabled=!0,e.other.CMD.disabled=!0,s.ZP.showToast("Save",!0),this.setState({isClickModify:!1,isApprove:!1,tab_view:e},(()=>{}))}else s.ZP.showToast("Save",!1)}))}},this.onInputChangeValue=(e,t)=>{let i=e.target.value;if(this.state.tab_active===this.tabIds.import){let{tab_import:o}=this.state;if("code"===t&&(i=i.replace(/\D/g,""),i=i.substring(0,this.customerCdFormat.length),i===o[t].value||""===i))return!1;o[t].value=e.target.value,this.setState({tab_import:o})}else if(this.state.tab_active===this.tabIds.viewModify){let{tab_view:e}=this.state;e[t].value=i,this.setState({tab_view:e})}else{let{tab_search:e}=this.state;e.advanced_search[t].value=i,this.setState({tab_search:e})}},this.onChangeValueSelect=(e,t,i)=>{if(this.state.tab_active===this.tabIds.import){let{tab_import:t}=this.state;t[i].value=e,this.setState({tab_import:t})}else if(this.state.tab_active===this.tabIds.viewModify){let{tab_view:t}=this.state;t[i].value=e,this.setState({tab_view:t})}else{let{tab_search:t}=this.state;t.advanced_search[i].value=e,this.setState({tab_search:t})}},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;t.setState({isLoading:!0});var n=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e,number_of_step:a}}];return n[0].input=Object.assign(n[0].input,i),(0,N.Yr)(n,{}).then((e=>s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1})}))},this.onBlurGetInfoCustomer=(e,t)=>{let i={};if("tab_import"===this.state.tab_active){i={customer_code:this.state.tab_import.customer_code.value};let e=this.state.tab_import;this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CTM_GET_INFO_RULEFUNC",api_data:(0,u.Z)({},i)},"data_api",1).then((t=>{void 0===t||t.hasError||(e.infor1.value=t.categories,e.infor2.value=t.fullname),this.setState({tab_import:e})}))}},this.onClickGetInfo=(e,t)=>{let i={};i="tab_import"===t.tab_select?{customer_code:this.state.tab_import.customer_code.value,other:this.state.tab_import.other.value,reference_type:this.state.tab_import.reference_type.value}:{customer_code:this.state.tab_view.customer_code.value,other:this.state.tab_view.other.value,reference_type:this.state.tab_view.reference_type.value},this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_GETINFO_MEDIA",api_data:(0,u.Z)({page_size:0,page_index:0},i)}).then((e=>{if(void 0!==e&&void 0!==e.items){let t={};t={media:[...e.items],customerType:i.reference_type}||{},this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_GETINFO2_MEDIA",api_data:(0,u.Z)({},i)}).then((e=>{void 0===e||e.hasError||(t.info=e),this.setState({O9_media_get_information:t,openModal:!0})}))}}))},this.onSaveImportFile=()=>{let{tab_import:e}=this.state;const t="Import file";if(e.isImported&&""!==e.customer_code.value){let i=(0,Y.FT)(e.expire_date.value,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),o={customer_code:e.customer_code.value.replace(/-/g,""),open_date:this.user_info.working_date,expire_date:"Invalid date"===i||""===i?"":i,media_name:e.data_import.fileName,media_type:this.getFileType(e.data_import.fileType,e.data_import.fileName),reference_type:e.reference_type.value,other:e.other.value.replace(/-/g,""),last_update_date:this.user_info.working_date,media_status:"N",infor1:e.infor1.value,infor2:e.infor2.value};e.btn_save.disable=!0,this.setState({tab_import:e});let a={infoA:{form_code:this.key_form},componentConfigDefault:{codeHidden:this.state.role_action.save_codeHidden}};(0,N.bq)(e.data_import.file,e.data_import.fileName,a).then((i=>{this.callAPI("media_file_import_save",o).then((i=>{e.btn_save.disable=!1,i.hasError?s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1):(s.ZP.showToast(t,!0),e.isImported=!1,e.customer_code.value="",e.reference_type.value="C",e.expire_date.value="",e.other.value="",e.data_import={att_content:"No file choose"}),this.setState({tab_import:e})})).catch((e=>{s.ZP.isDebug()&&console.log("err",e),s.ZP.showToast(t,!1)}))}),(e=>{e.statusCode&&e.statusText?s.ZP.showToast(e.statusCode+":"+e.statusText+"#"+t,!1):s.ZP.showToast(t,!1)}))}else s.ZP.showToast(t,!1)},this.removeItemTable=e=>{let t={title:s.ZP.getLang("sysConfirmDelTitle"),content:s.ZP.getLang("sysConfirmDelContent")};s.ZP.confirmInfo(t,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],void 0,(t=>{t&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_DELETE_MEDIA",api_data:{id:e.id}}).then((e=>{e?(s.ZP.showToast("Delete",!0),this.onSearch()):s.ZP.showToast("Delete",!1)}))}))},this.pageIndexChange=e=>{this.setState({page_index:e})},this.pageRecordChange=e=>{this.setState({record_index:this.record[e],page_index:1})},this.getInfoMedia=e=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_VIEW_MEDIA",api_data:{id:e.id}}).then((e=>{if(e){let t=e,{tab_view:i}=this.state;i.data_view.id=t.id,i.customer_code.value=t.customer_code,i.reference_type.value=t.reference_type,i.expire_date.value=(0,Y.xY)(t.expire_date+"Z"),i.expire_date.CMD.disabled=!0,i.other.value=t.other,i.other.CMD.disabled=!0,i.other.value=t.other,i.data_view.media_type=t.media_type,i.data_view.media_status=t.media_status,i.data_view.media_data=t.media_data,i.data_view.media_title=t.media_name,i.infor1.value=t.infor1,i.infor2.value=t.infor2,i.isHasData=!0,this.setState({tab_active:this.tabIds.viewModify,tab_view:i,isClickModify:!1,isApprove:!1})}}))},this.closeModal=()=>{this.setState({openModal:!1})},this.printVoucher=()=>{},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.getRoleAction=(e,t)=>{let i=(0,s._M)(),o={};const a=t.list_layout;for(const s of i)for(const t of a)for(const i of t.list_view)for(const t of i.list_input){let i=t.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=e[s])||void 0===n||null===(r=n[t.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a,void 0!==t.default.codeHidden&&(o[i+"_codeHidden"]=t.default.codeHidden)}}return o};let o=this.changeKeyLanguage("start");this.dateFormat=s.ZP.getParameterSystem("DATE_FORMAT"),this.customerCdFormat=s.ZP.getParameterSystem("MASK_CUSTOMERCD"),this.customerCdFormat=s.ZP.getParameterSystem("MASK_CUSTOMERCD"),this.accountNumberFormat=s.ZP.getParameterSystem("MEDIA_ACCOUNT_NUMBER"),this.key_form="BO_003005",this.MediaFileForm=(0,_.Iq)("Ncbs_FormMedia"),this.branch_user_id=(null===(i=s.ZP.context_get("user_acc"))||void 0===i?void 0:i.branchid)||-1,this.search_page_index=1,this.record=[5,10,15,20,50],this.tabIds={search:"tab_search",import:"tab_import",viewModify:"tab_view"},this.prefixImage="data:image/png;base64,",this.referenceTypeData=[{title:"Single customer",value:"C"}],this.businessLineTypeData=[],this.businessLineAdvancedTypeData=[{title:"All",value:""}],this.statusData=[{title:"All",value:""},{title:"New",value:"N"},{title:"Approved",value:"A"}],this.user_info=s.ZP.context_get("user_acc"),this.logicViewModifyExpiredDate=new me({abs_update:this.absViewModifyExpire,name:"Expire Date",code:"expireDate",mask_format:this.dateFormat,mask_mode:"date",class:"col-md-12"}),this.logicImportExpiredDate=new me({abs_update:this.absImportExpire,name:"Expire Date",code:"expireDate",mask_format:this.dateFormat,mask_mode:"date",class:"col-md-12"}),this.logicImportCode=new me({abs_update:this.absImportCode,abs_Blur:this.onBlurGetInfoCustomer,name:"Code",code:"code",mask_format:this.customerCdFormat,mask_mode:"default",value_type:"number",class:"col-md-12"}),this.logicImportAccountNumber=new me({abs_update:this.absImportAccountNumber,name:"Account Number",code:"other",mask_format:this.accountNumberFormat,mask_mode:"default",value_type:"number",class:"col-md-12"}),this.logicViewModifyAccountNumber=new me({abs_update:this.absViewModifyAccountNumber,name:"Account Number",code:"other",mask_format:this.accountNumberFormat,mask_mode:"default",class:"col-md-12",value_type:"number"}),this.state={isLoading:!1,isApprove:!1,openModal:!1,visibility:"",data:this.props.data||[],languages:o,tab_active:this.tabIds.search,file:"",infoA:{lang_form:{vi:s.ZP.getLang("customerMediaFiles_title"),en:s.ZP.getLang("customerMediaFiles_title")},title:"CTM-Customer media files",des:"CTM-Customer media files",openOne:"true",form_code:this.key_form,ofModal:!1},O9_media_get_information:void 0,page_index:1,record_index:this.record[0],isClickModify:!1,tab_search:{search_text:{value:""},table_search:{paging_index:1,result_total:0,data:[],page_size:5},isSearchAdvanced:!1,advanced_search:{customer_code:{value:""},account_number:{value:""},business_line:{value:""},customer_name:{value:""},media_name:{value:""},status:{value:""},open_date_from:{value:""},open_date_to:{value:""},last_date_from:{value:""},last_date_to:{value:""},expire_date_from:{value:""},expire_date_to:{value:""}}},tab_import:{isImported:!1,data_import:{att_content:"No file choose"},customer_code:{value:"",CMD:{disabled:!1}},other:{value:"",CMD:{disabled:!1}},reference_type:{value:"C"},expire_date:{value:"",CMD:{disabled:!1}},infor1:{value:"XX"},infor2:{value:""},btn_save:{disable:!1}},tab_view:{data_view:{att_content:"No file choose"},customer_code:{value:""},other:{value:"",CMD:{disabled:!0}},reference_type:{value:"C"},infor1:{value:"XX"},infor2:{value:""},expire_date:{value:"",CMD:{disabled:!0}}}},this.isDisableSaveButton=!1}getImportDataFileConfig(){var e;let t="";return t=void 0!==s.ZP.getParameterSystem("MEDIA_UPLOAD_FILE_TYPE")?s.ZP.getParameterSystem("MEDIA_UPLOAD_FILE_TYPE"):".jpg, .jpeg, .gif, .bmp, .png, .pdf, .doc, .docx, .xls, .xlsx, .txt, .text, .mp3, .wav, .avi",{file:{dataFull:{config:{default:{title:"Choose file or drop file in here",att_content:this.state.tab_import.data_import.att_content,accept:t}},abs_Change:this.handleImageChange},handleImageChange:this.handleImageChange},img_form:{link:this.state.tab_import.data_import.link_img,title:this.state.tab_import.data_import.title_img,content:this.state.tab_import.data_import.content_img,file_type:this.state.tab_import.data_import.file_type},code:{dataFull:this.logicImportCode.getDataFullLogic()},code_DOM:(0,c.jsx)(_t,{abs_update:e=>{this.changeValueMask("import_tab","customer_code",e.value)},abs_Blur:this.onBlurGetInfoCustomer,name:"Code",code:"code",mask_format:this.customerCdFormat,mask_mode:"default",class:"col-md-12",CMD:this.state.tab_import.customer_code.CMD,value:this.state.tab_import.customer_code.value}),reference_type:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Reference Type",type:"text",class:"col-md-12",code_form_component:"reference_type"},cmd:{disable:!0,visible:!1,error:{message:"",type:""}}},data:this.getReferenceTypeData(this.state.tab_import.reference_type.value||this.referenceTypeData[0].value)},abs_Change:this.onChangeValueSelect},infor1:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Business line",type:"text",class:"col-md-12",code_form_component:"infor1"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:this.getBusinessLineTypeData(this.state.tab_import.infor1.value||(null===(e=this.businessLineTypeData[0])||void 0===e?void 0:e.value))},abs_Change:this.onChangeValueSelect},infor2:{dataFull:{config:{default:{title:"Customer Name",type:"text",class:"col-md-12",code_form_component:"infor2"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:this.state.tab_import.infor2.value},abs_Change:this.onInputChangeValue},expireDate_DOM:(0,c.jsx)(_t,{abs_update:e=>{this.changeValueMask("import_tab","expire_date",e.value)},name:"Expire Date",code:"expireDate",mask_format:this.dateFormat,mask_mode_time:"utc",mask_mode:"date",class:"col-md-12",CMD:this.state.tab_import.expire_date.CMD,value:this.state.tab_import.expire_date.value}),expireDate:{dataFull:this.logicImportExpiredDate.getDataFullLogic()},other:{dataFull:this.logicImportAccountNumber.getDataFullLogic()},other_DOM:(0,c.jsx)(_t,{abs_update:e=>{this.changeValueMask("import_tab","other",e.value)},name:"Account Number",code:"other",mask_format:this.accountNumberFormat,mask_mode:"default",class:"col-md-12",CMD:this.state.tab_import.other.CMD,value:this.state.tab_import.other.value}),getInfo:{dataFull:{config:{default:{title:"Get information",type:"default",class:""}},dataItem:{tab_select:"tab_import"}},abs_Click:this.onClickGetInfo},saveForm:{dataFull:{config:{default:{title:"Save",type:"submit",class:""},cmd:{disable:this.state.tab_import.btn_save.disable}}},abs_Click:this.onSaveImportFile}}}getReferenceTypeData(e){return this.referenceTypeData.map(((t,i)=>(0,u.Z)((0,u.Z)({},t),{},{selected:t.value===e})))}getBusinessLineTypeData(e){return this.businessLineTypeData.map(((t,i)=>(0,u.Z)((0,u.Z)({},t),{},{selected:t.value===e})))}getListDataSelect(e,t){return e.map(((e,i)=>(0,u.Z)((0,u.Z)({},e),{},{selected:e.value===t})))}getTableConfig(){return[{type:"uTableColumnButtonHover"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}getHeaderConfig(){return{dataFull:{Header:{data:[{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"Customer code",config:{width:"",isFrozen:!1}},{title:"Account Number",config:{width:"",isFrozen:!1}},{title:"Business line",config:{width:"",isFrozen:!1}},{title:"Customer name",config:{width:"",isFrozen:!1}},{title:"Media name",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Media type",config:{width:"",isFrozen:!1}},{title:"Open date",config:{width:"",isFrozen:!1}},{title:"Last date",config:{width:"",isFrozen:!1}},{title:"Expire date",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}},uPagination:{number_show:0,result_total:this.state.tab_search.table_search.result_total,paging_index:this.state.tab_search.table_search.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPageConfig(this.state.tab_search.table_search.page_size),abs_PagingActive:e=>{this.pageChangeRoleSearch(e)},abs_setRecordActive:this.pageRecordChangeRoleSearch}}}}getDataTableConfig(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=(null===(e=this.state)||void 0===e?void 0:e.role_action)||{};return t.map((e=>{let t=[];return i["get information"]&&t.push({icon_item:"fa-eye",title:"View",dataItem:e,abs_Click:this.getInfoMedia}),i.delete&&t.push({icon_item:"fa-trash-o",title:"Delete",dataItem:e,abs_Click:this.removeItemTable}),0===t.length&&t.push({icon_item:"more_horiz",title:""}),{data:[{dataFull:{icon:"three-dot"},data:t},{data:(0,Y.Ui)(e.customer_code,this.customerCdFormat),tooltip_copy:{icon:"copy",title:s.ZP.getLang("btn_copy")},abs_Copy:()=>{s.ZP.copyToClipboard(e.customer_code)}},{data:(0,Y.Ui)(e.other,this.accountNumberFormat)},{data:e.infor1},{data:e.infor2},{data:e.media_name},{data:e.media_status},{data:e.media_type},{data:e.open_date?(0,Y.X2)(new Date(e.open_date).getTime(),this.dateFormat):e.open_date},{data:e.last_update_date?(0,Y.X2)(new Date(e.last_update_date).getTime(),this.dateFormat):e.last_update_date},{data:e.expire_date?(0,Y.X2)(new Date(e.expire_date).getTime(),this.dateFormat):e.expire_date}],dataItem:e}}))}getImageTemplate(e){return void 0!==e&&null!==e&&this.isImage(e)?`${this.prefixImage}${e}`:"../rs/global/img/file_icon.svg"}getRecordPageConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return this.record.map((t=>({number:t,selected:e===t})))}getDataPaging(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=[],a=parseInt(t)*(i-1),s=a+parseInt(t)-1;for(let n=a;n<=s;n++)void 0!==e[n]&&o.push(e[n]);return o}getFileType(e,t){if("application/pdf"===e)return"pdf";if("text/plain"===e)return"text";if(/image.*/.test(e))return"img";let i=t.split(".");return"xlsx"===i[i.length-1]||"xls"===i[i.length-1]?"excel":i[i.length-1]}isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(i){}return t}render(){const e=this.MediaFileForm;return(0,c.jsx)(o.Fragment,{children:(0,c.jsxs)("div",{style:{display:this.state.visibility},children:[this.state.openModal&&(0,c.jsx)(He,{data:this.state.O9_media_get_information,businessLineTypeData:this.businessLineTypeData,closeModal:this.closeModal}),(0,c.jsx)(e,(0,u.Z)({},this.getDefaultPropsTemplate()))]})})}componentDidMount(){this.setState({isLoading:!0});(0,N.Yr)([{txcode:"bo-get-cdlistMediaFile",input:{}}],{}).then((e=>{let t=s.ZP.foGetData("data",e);this.OWN_CDLIST={STS:{},TYPE:{},CATEGORIES:{}};for(const i of t)"MEDIASTS"===i.cdname?this.OWN_CDLIST.STS[i.cdid]=i:"CTMTYPE"===i.cdname?(this.OWN_CDLIST.TYPE[i.cdid]=i,this.referenceTypeData.push({title:i.caption,value:i.cdid})):"CATEGORIES"===i.cdname&&(this.OWN_CDLIST.CATEGORIES[i.cdid]=i,this.businessLineTypeData.push({title:i.caption,value:i.cdid}),"XX"!==i.cdid&&this.businessLineAdvancedTypeData.push({title:i.caption,value:i.cdid}));(0,N.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((e=>{var t=s.ZP.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",e)||{};void 0===i&&(i={});let o=this.getRoleAction(i,t);this.setState({isLoading:!1,role_action:o},(()=>{}))}))})),s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key)}}const gt=ft;let mt;class vt extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.getDataBranch=()=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CSH_CASHFLOW_GETINFO",number_of_step:1,api_data:{user_code_cash_flow:this.user_profile.user_code}}).then((e=>{if(e&&!e.hasError){let t=[];t=e.branchs.filter((e=>e.branch_code===this.user_profile.branch_code)),this.setState({branchs:t})}else this.setState({branchs:[]})}))},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a,n=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return n[0].input=Object.assign(n[0].input,i),(0,N.Yr)(n,{}).then((e=>a=s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).catch((e=>{console.log(e)})).finally((e=>{t.setState({isLoading:!1},(()=>{if(a&&a.hasError){var e="";a.error_data.map((t=>e+=(s.ZP.isDebug()&&t.code?t.code+": ":"")+t.info)),s.ZP.showToast(e,!1)}}))}))},this.closeForm=()=>{s.ZP.removeForm(this.key_form)},this.clickLevel1=(e,t)=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CSH_CASHFLOW_BRANCH",api_data:{branch_code:t.dataItem.id},number_of_step:1}).then((e=>{let t=[];e&&!e.hasError&&(t=e.branch_cash_data),this.setState({table:t})}))},this.clickLevel2=(e,t)=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CSH_CASHFLOW_DEPARTMENT",number_of_step:1,api_data:{department_code:t.dataItem.id}}).then((e=>{let t=[];e&&!e.hasError&&(t=e.department_cash_data),this.setState({table:t})}))},this.clickLevel3=(e,t)=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CSH_CASHFLOW_USER",number_of_step:1,api_data:{user_code_cash_flow:t.dataItem.id}}).then((e=>{let t=[];e&&!e.hasError&&(t=e.user_cash_data),this.setState({table:t})}))},mt=(0,_.Iq)("O9_CashFlow"),this.key_form="BO_011001",this.stateData=this.getDataForm(),this.state={visibility:"",data:this.props.data,infoA:{title:s.ZP.getLang("011001_title"),des:s.ZP.getLang("011001_title"),openOne:"true",ofModal:!1},isLoading:!1,branchs:[],table:[]},this.user_profile=s.ZP.context_get("user_acc")}componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.getDataBranch()}convertCurrency(e){let t=Number(e);return Number.isNaN(t)?e:e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}getDataForm(){var e;return{form:{dataFull:{config:{default:{title:s.ZP.getLang("011001_title")}},title_button:{close_button:s.ZP.getLang("form_close_title"),add_form:s.ZP.getLang("form_add_title")},cmd:{visibility:"",isLoading:(null===(e=this.state)||void 0===e?void 0:e.isLoading)||!1},abs_Close:this.closeForm,abs_AddMenuBar:this.addMenu}},tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},table:{dataFull:{Header:{data:[{title:"Currency",config:{width:"",isFrozen:!1}},{title:"Opening balance",config:{width:"",isFrozen:!1}},{title:"Internal In",config:{width:"",isFrozen:!1}},{title:"Customer deposit",config:{width:"",isFrozen:!1}},{title:"Total In",config:{width:"",isFrozen:!1}},{title:"Internal Out",config:{width:"",isFrozen:!1}},{title:"Customer withdrawal",config:{width:"",isFrozen:!1}},{title:"Total out",config:{width:"",isFrozen:!1}},{title:"Closing balance",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]}}getTreeData(e){let t=[];return e.forEach((e=>{let i={title:`${e.branch_code} - ${e.branch_name}`,parent_id:"0",is_open:!1,DOM_elm:null,tree_id:e.branch_code+"lv1",id:e.branch_code+"lv1",dataItem:{id:e.branch_code},abs_click:this.clickLevel1};t.push(i),e.departments&&e.departments.forEach((i=>{let o={title:`${i.department_code} - ${i.department_name}`,parent_id:e.branch_code+"lv1",is_open:!1,DOM_elm:null,tree_id:i.department_code+"lv2",id:i.department_code+"lv2",dataItem:{id:i.department_code},abs_click:this.clickLevel2};t.push(o),i.cashier_accounts&&i.cashier_accounts.forEach((e=>{let o={title:`${e.user_code} - ${e.login_name}`,parent_id:i.department_code+"lv2",is_open:!1,DOM_elm:null,id:e.user_code+"lv3",tree_id:e.user_code+"lv3",dataItem:{id:e.user_code,user_code:e.user_code},abs_click:this.clickLevel3};t.push(o)}))}))})),t}getTableData(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>[{data:e.currency},{data:this.convertCurrency(e.opening_balance)},{data:this.convertCurrency(e.internal_in)},{data:this.convertCurrency(e.customer_deposit)},{data:this.convertCurrency(e.total_in)},{data:this.convertCurrency(e.internal_out)},{data:this.convertCurrency(e.customer_withdrawal)},{data:this.convertCurrency(e.total_out)},{data:this.convertCurrency(e.closing_balance)}]))}UNSAFE_componentWillUpdate(e,t){this.stateData.tree_data.tree_data=this.getTreeData(t.branchs),this.stateData.table_data=this.getTableData(t.table),this.stateData.form.dataFull.cmd.isLoading=t.isLoading}render(){return(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(mt,{stateData:this.stateData})})}}const bt=vt;let yt;class At extends o.Component{constructor(e){super(e),this.handleSelectTabID=e=>{this.setState({menu_select:e})},this.handelSearchInvokeLimit=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",a=this.state.invoke_limit_search_value;a[t]=o,this.setState({invoke_limit_search_value:a})},this.handelSearchApproveLimit=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",a=this.state.approve_limit_search_value;a[t]=o,this.setState({approve_limit_search_value:a})},this.handelChangeSearch=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",a=this.state.Col3_Assignment_Search;switch(a[t]=o,t){case"TBL_USER_CODE":this.stateData.column3.table_left.dataFull.Header.data[2].value_search=o;break;case"TBL_USER_NAME":this.stateData.column3.table_left.dataFull.Header.data[3].value_search=o;break;case"TBR_USER_CODE":this.stateData.column3.table_right.dataFull.Header.data[2].value_search=o;break;case"TBR_USER_NAME":this.stateData.column3.table_right.dataFull.Header.data[3].value_search=o}this.setState({Col3_Assignment_Search:a})},this.handelClearSearch=()=>{},this.getTableHeader=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return t.push({title:"Group",code:"module"}),t.push({title:"Caption",code:"tranname"}),e.forEach((e=>{t.push({title:e,code:e})})),t},this.abs_role_name_copying_select=(e,t,i)=>{this.setState({role_name_copying_selected:e.roleid,column2_role_select:e})},this.abs_Ckeck_invoke_approve_verification=(e,t)=>{this.callAPI("O9_Roles_Invoke_approve_Table_Change_save_approve",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then((e=>{let t=e.O9_Roles_Invoke_approve_Table_Change_save_approve;this.reloadTableWithMenuInvokeApprove(),1===t[0].type?s.ZP.showToast("Save",!0):s.ZP.showToast("Save",!1)}))},this.abs_Ckeck_invoke_approve_operation=(e,t)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let i=this.state.menu_invoke_aprrove.filter((t=>t.parentid===e.parentid));this.callAPI("O9_Roles_Invoke_approve_Table_Change_save",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then((o=>{let a=o.O9_Roles_Invoke_approve_Table_Change_save;if(this.reloadTableWithMenuInvokeApprove(!0),1===a[0].type){var n=[{txcode:"bo-update-roleBO-JWEBUI",input:{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0,menu_child:i}}];return(0,N.Yr)(n,{}).then((e=>{s.ZP.showToast("Save",!0),this.setState({isLoading:!1})}))}s.ZP.showToast(a[0].message,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.UNSAFE_componentWillUpdate=(e,t)=>{var i,o,a;let n=t.role_action||{};this.stateData.tab.data=this.stateData.tab.data.map((e=>(e.isShow=e.id===t.menu_select,e))),this.stateData.column3.table_in_role_data=t.table_user_profile_user_in_role.map((e=>({config:{value:!1},data:[{data:e.rolename},{data:e.user_code},{data:e.usrname}]}))),this.stateData.column1.tree_data.tree_data=null===(i=t.menu_invoke_aprrove)||void 0===i?void 0:i.map((e=>({title:e.caption,parent_id:e.parentid,is_open:!1,DOM_elm:null,id:e.cmdid,dataItem:e,abs_click:this.onClickTreeMenuInvokeApprove}))),this.stateData.column1.table_up.dataFull.Header.data=t.O9_Roles_InvokeApprove_Table_header.map((e=>({title:e.caption,config:{width:"",isFrozen:!1}}))),this.stateData.column1.table_down.dataFull.Header.data=s.ZP.cloneJson(this.stateData.column1.table_up.dataFull.Header.data),this.stateData.column1.table_down.dataFull.Header.data[1]&&(this.stateData.column1.table_down.dataFull.Header.data[1].title="Self Approve");let r=t.O9_Roles_InvokeApprove_Table_header;this.stateData.column1.table_up_config=r.map(((e,t)=>0===t?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:"uTableColumnCheckbox",config:{cmd:{disable:!1===n.save}}})),this.stateData.column1.table_down_config=this.stateData.column1.table_up_config;let l=t.O9_Roles_InvokeApprove_Table_body;this.stateData.column1.table_up_data=[],this.stateData.column1.table_down_data=[];for(let s=0;s<l.length;s++){let e=r.length-1,t=[],i=[];for(let o=0;o<e;o++)0===o&&(t.push({data:l[s+o].rolename}),i.push({data:l[s+o].rolename})),t.push({value:1===l[s+o].invoke,dataItem:l[s+o],abs_Click:this.abs_Ckeck_invoke_approve_operation}),i.push({value:1===l[s+o].approve,dataItem:l[s+o],abs_Click:this.abs_Ckeck_invoke_approve_verification});this.stateData.column1.table_up_data.push(t),this.stateData.column1.table_down_data.push(i),s=s+e-1}if(this.stateData.column2.role_name_adding.dataFull.config.cmd.disable=!0!==t.addAndRemove_btnAddClick,this.stateData.column2.listButton[2].dataFull.config.cmd.disable=!0===t.addAndRemove_btnSaveClick,this.stateData.column2.role_name_copying.dataFull.search_value=t["column2.role_name_copying"],this.stateData.column2.listButton[0].dataFull.config.cmd.visible=!1!==n.save,this.stateData.column2.listButton[2].dataFull.config.cmd.visible=!1!==n.save,this.stateData.column2.listButton[1].dataFull.config.cmd.visible=!1!==n.delete,this.stateData.column3.next.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.next_all.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.preview.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.preview_all.dataFull.config.cmd.disable=!1===n.save,!t.role_name_copying_selected&&t.O9_Roles_Add_and_Remove_Role_Name.length>0)this.setState({role_name_copying_selected:t.O9_Roles_Add_and_Remove_Role_Name[0].roleid});else{var c;this.stateData.column2.role_name_copying.dataFull.input_value=null===(c=t.column2_role_select)||void 0===c?void 0:c.rolename;let e=t.O9_Roles_Add_and_Remove_Role_Name.filter((e=>(e.rolename||"").toLowerCase().includes(t["column2.role_name_copying"].toLowerCase())));this.stateData.column2.role_name_copying.dataFull.data=e.map(((e,i)=>{let o=!1;return e.roleid===t.role_name_copying_selected&&(o=!0),{title:e.rolename,value:e,selected:o}}))}this.stateData.column2.role_name_adding.dataFull.value=t.role_name_adding_input;let d=this.unCheck_user_assign_table_left,h=this.unCheck_user_assign_table_right;!0===this.unCheck_user_assign_table_left&&(this.unCheck_user_assign_table_left=!1),!0===this.unCheck_user_assign_table_right&&(this.unCheck_user_assign_table_right=!1),this.stateData.column3.table_left_data=t.O9_Roles_User_assignment_table_left.filter((e=>e.user_code.includes(t.Col3_Assignment_Search.TBL_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBL_USER_NAME||""))).map(((e,t)=>{var i,o,a;return{data:[{data:t+1},{value:!0!==d&&((null===(i=this.stateData.column3.table_left_data[t])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_left,dataItem:{value:e,index:t}},{data:e.user_code},{data:e.usrname}],config:{value:!1}}})),this.stateData.column3.table_right_data=t.O9_Roles_User_assignment_table_right.filter((e=>e.user_code.includes(t.Col3_Assignment_Search.TBR_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBR_USER_NAME||""))).map(((e,t)=>{var i,o,a;return{data:[{data:t+1},{value:!0!==h&&((null===(i=this.stateData.column3.table_right_data[t])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_right,dataItem:{value:e,index:t}},{data:e.user_code},{data:e.usrname}],config:{value:!1}}})),this.stateData.column3.role_choose_left.dataFull.data=[],this.stateData.column3.role_choose_left.dataFull.search_value=t["column3.role_choose_left"],this.stateData.column3.role_choose_left.dataFull.input_value=null===(o=t.column3_role_left_select)||void 0===o?void 0:o.rolename,t.O9_RolesUser_assignment_Role_Name_Left.filter((e=>null!==e.rolename&&e.rolename.toLowerCase().includes(t["column3.role_choose_left"].toLowerCase()))).forEach(((e,i)=>{let o=!1;(t.column3_role_left_select.roleid===e.roleid||0===i&&void 0===t.column3_role_left_select.roleid)&&(o=!0),this.stateData.column3.role_choose_left.dataFull.data.push({title:e.rolename,value:{id:e.roleid,item:e,type:"left"},selected:o})})),this.stateData.column3.role_choose_right.dataFull.search_value=t["column3.role_choose_right"],this.stateData.column3.role_choose_right.dataFull.input_value=null===(a=t.column3_role_right_select)||void 0===a?void 0:a.rolename;let u=t.O9_RolesUser_assignment_Role_Name_Right.filter((e=>null!==e.rolename&&e.rolename.toLowerCase().includes(t["column3.role_choose_right"].toLowerCase())));this.stateData.column3.role_choose_right.dataFull.data=u.map(((e,i)=>{let o=!1;return(t.column3_role_right_select.roleid===e.roleid||0===i&&void 0===t.column3_role_right_select.roleid)&&(o=!0),{title:e.rolename,value:{id:e.roleid,item:e,type:"right"},selected:o}})),this.stateData.column4.listItem=t.O9_Roles_Invoke_limit_menu.map((e=>{let i=!1;return t.Invoke_role_selected===e.roleid&&(i=!0),{dataFull:{title:e.rolename,dataItem:e,selected:i},abs_Click:this.onClickMenuInvokeLimit}})),this.stateData.column4.table.dataFull.Header.data=t.invoke_limit_header.map((e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.invoke_limit_search_value[e.code]||""}))),this.stateData.column4.table_config=t.invoke_limit_header.map(((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===n.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),this.stateData.column4.table_data=t.O9_Roles_InvokeLimit_Table.filter((e=>{let i=!0;for(const o in t.invoke_limit_search_value){let a=t.invoke_limit_search_value[o];e[o].toLowerCase().includes(a.toLowerCase())||(i=!1)}return i})).map(((e,i)=>t.invoke_limit_header.map(((t,o)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:i,index_col:o,abs_Change:this.abs_change_invoke_table,abs_Submit:this.abs_submit_invoke_table}))))),this.stateData.column5.listItem=t.O9_Roles_Invoke_limit_menu.map((e=>{let i=!1;return t.Approve_role_selected===e.roleid&&(i=!0),{dataFull:{title:e.rolename,dataItem:e,selected:i},abs_Click:this.onClickMenuApproveLimit}})),this.stateData.column5.table.dataFull.Header.data=t.approve_limit_header.map((e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.approve_limit_search_value[e.code]||""}))),this.stateData.column5.table_config=t.approve_limit_header.map(((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===n.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),this.stateData.column5.table_data=t.O9_Roles_ApproveLimit_Table.filter((e=>{let i=!0;for(const o in t.approve_limit_search_value){let a=t.approve_limit_search_value[o];e[o].toLowerCase().includes(a.toLowerCase())||(i=!1)}return i})).map(((e,i)=>t.approve_limit_header.map(((t,o)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:i,index_col:o,abs_Change:this.abs_change_approve_table,abs_Submit:this.abs_submit_approve_table})))))},this.CheckAddRoleName=e=>{let t=e.target.value,i=!1;for(const o of this.stateData.column2.role_name_copying.dataFull.data)if(o.title===t||""===t){i=!0;break}""===t&&(i=!0),this.setState({addAndRemove_btnSaveClick:i,role_name_adding_input:t})},this.abs_Check_role_profile_user_assign_left=e=>{this.onClickAssignLeftRow(e);let t=this.stateData.column3.table_left_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_Check_role_profile_user_assign_right=e=>{let t=this.stateData.column3.table_right_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_CheckAll_left=()=>{let e=this.stateData.column3.table_left.dataFull.Header.data[1],t=0;this.stateData.column3.table_left_data.forEach((()=>{!0===e.data.value?this.stateData.column3.table_left_data[t].data[1].value=!1:this.stateData.column3.table_left_data[t].data[1].value=!0,t++})),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_CheckAll_right=()=>{let e=this.stateData.column3.table_right.dataFull.Header.data[1],t=0;this.stateData.column3.table_right_data.forEach((()=>{!0===e.data.value?this.stateData.column3.table_right_data[t].data[1].value=!1:this.stateData.column3.table_right_data[t].data[1].value=!0,t++})),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_change_approve_table=(e,t,i,o)=>{let a=e.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_ApproveLimit_Table;let l=r[t.row_idx][t.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let e=l.lastIndexOf(".");c=n.substring(0,e)+"."+n.substring(e,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[t.row_idx][t.header.code]=d,this.setState({O9_Roles_ApproveLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_change_invoke_table=(e,t,i,o)=>{let a=e.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_InvokeLimit_Table;let l=r[t.row_idx][t.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let e=l.lastIndexOf(".");c=n.substring(0,e)+"."+n.substring(e,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[t.row_idx][t.header.code]=d,this.setState({O9_Roles_InvokeLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_submit_invoke_table=(e,t,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_InvokeLimit_Table;this.callAPI("O9_Roles_InvokeLimit_Table_Change_save",{roleid:this.state.Invoke_role_selected,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then((i=>{if(1===i.O9_Roles_InvokeLimit_Table_Change_save[0].type){s.ZP.showToast("Save",!0);var o=[{txcode:"bo-update-roleFOJWEBUI",input:{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,cmdid:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code]),list_currency:this.state.invoke_limit_currency,list_ccr:t[e.row_idx]}}];return(0,N.Yr)(o,{}).then((e=>{}))}s.ZP.showToast("Save",!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.abs_submit_approve_table=(e,t,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_ApproveLimit_Table;this.callAPI("O9_Roles_ApproveLimit_Table_Change_save",{roleid:this.state.O9_Roles_Approve_limit_menu_select.roleid,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then((e=>{1===e.O9_Roles_ApproveLimit_Table_Change_save[0].type&&s.ZP.showToast("Save",!0)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.getRoleAction=(e,t)=>{let i=(0,s._M)(),o={};const a=t.list_layout;for(const s of i)for(const t of a)for(const i of t.list_view)for(const t of i.list_input){let i=t.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=e[s])||void 0===n||null===(r=n[t.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a}}return o},this.getAllRoleAction=()=>(0,N.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((e=>{var t=s.ZP.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",e)||{};void 0===i&&(i={});let o=this.getRoleAction(i,t);this.setState({role_action:o})})),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callAPI=(e,t)=>{this.state.isLoading||this.setState({isLoading:!0});var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return i[0].input=Object.assign(i[0].input,t),(0,N.Yr)(i,{}).then((t=>s.ZP.foGetData("data",t)||{[e]:[]})).finally((e=>{this.setState({isLoading:!1})}))},this.AddRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.add&&this.state.role_action.save){let e=this.state.role_name_copying_selected,t=this.state.role_name_adding_input;""!==e&&""!==t&&this.callAPI("O9_Roles_User_Add_and_remove_add",{roleid:e,new_name:t}).then((i=>{let o=i.O9_Roles_User_Add_and_remove_add;1===o[0].type?this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((i=>{let o=i.O9_Roles_Add_and_Remove_Role_Name,a=[{roleid:0,rolename:"All"}],n=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((e=>{a=a.concat(e.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:a})})),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((e=>{n=e.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:n})})),this.setState({O9_Roles_Add_and_Remove_Role_Name:o,isAdd_add_and_remove:!1,addAndRemove_btnAddClick:!1,role_name_adding_input:"",addAndRemove_btnSaveClick:!0});let r=-1;for(const e of o)e.rolename===t&&(r=e.roleid);var l=[{txcode:"bo-create-roleJWEBUI",input:{roleID:r,roleName:t,roleCopy:e}}];return(0,N.Yr)(l,{}).then((e=>{s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(o[0].message,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.onSearch=(e,t)=>{this.setState({[t]:e.target.value})},this.abs_Click_next=()=>{this.onClickAssignLeftToRightArray()},this.abs_Click_next_all=()=>{this.onClickAssignLeftToRightAll()},this.abs_Click_previous=()=>{this.onClickAssignRightToLeftArray()},this.abs_Click_previous_all=()=>{this.onClickAssignRightToLeftAll()},this.onClickAssignLeftToRightAll=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter((t=>0===e.filter((e=>e.user_code===t.data[1].dataItem.value.user_code)).length)).map((e=>e.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:i,data:t}).then((e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:t}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_left.dataFull.Header.data[1],a=0;this.stateData.column3.table_left_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_left_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignRightToLeftAll=()=>{let e=this.stateData.column3.table_right_data.map((e=>e.data[1].dataItem.value)),t=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:e}).then((e=>{let i=e.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then((e=>{let i=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:i}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(i[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let i=this.stateData.column3.table_right.dataFull.Header.data[1],o=0;this.stateData.column3.table_right_data.forEach((()=>{!0===i.data.value&&(this.stateData.column3.table_right_data[o].data[1].value=!1),o++})),i.data.value=!1},this.onClickAssignLeftToRightArray=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter((t=>!0===t.data[1].value&&0===e.filter((e=>e.user_code===t.data[1].dataItem.value.user_code)).length)).map((e=>e.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_left=!0,""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:i,data:t}).then((e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:t}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_left.dataFull.Header.data[1],a=0;this.stateData.column3.table_left_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_left_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignLeftRow=e=>{this.callAPI("user_profile_user_in_role",e.value).then((e=>{var t;let i=(null===e||void 0===e||null===(t=e.user_profile_user_in_role)||void 0===t?void 0:t.data)||[];this.setState({table_user_profile_user_in_role:i})}))},this.onClickAssignLeftToRight=e=>{let t=this.state.column3_role_right_select.roleid,i=this.state.O9_Roles_User_assignment_table_right;for(let o=0;o<i.length;o++){if(i[o].user_code===e.user_code)return}""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:t,data:[{usrid:e.usrid}]}).then((e=>{let i=e.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then((e=>{let i=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:i}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i[0].message,!1)}))},this.onClickAssignRightToLeft=e=>{let t=this.refs.ref_assignment_list_role_name_right.value;""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:[{usrid:e.usrid}]}).then((e=>{let i=e.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then((e=>{let i=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:i}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i[0].message,!1)}))},this.onClickAssignRightToLeftArray=e=>{let t=this.stateData.column3.table_right_data.filter((e=>!0===e.data[1].value)).map((e=>e.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-i,data:t}).then((e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:t}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_right.dataFull.Header.data[1],a=0;this.stateData.column3.table_right_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_right_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onChangeUserAgm=(e,t)=>{switch(e.type){case"left":if(e.id===this.state.column3_role_right_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then((t=>{let i=this.state.O9_RolesUser_assignment_Role_Name_Left.filter((t=>t.roleid===e.id)),o=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_left:o,column3_role_left_select:i[0]})}));break;case"right":if(e.id===this.state.column3_role_left_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then((t=>{let i=this.state.O9_RolesUser_assignment_Role_Name_Right.filter((t=>t.roleid===e.id)),o=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:o,column3_role_right_select:i[0]})}))}},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return t.length>16&&(t=t.slice(t.length-16,t.length)),(0,ye.Nx)(t,2)},this.getValueCurrency=e=>void 0===e||null===e||""===e?"":Number(e.replace(/,/g,"")),this.saveInvokeTable=()=>{},this.onClickMenuInvokeLimit=e=>{let t=e.dataFull.dataItem;this.callAPI("O9_Roles_InvokeLimit_Table",t).then((e=>{void 0===e&&(e={});let i=e.O9_Roles_InvokeLimit_Table;this.setState({O9_Roles_Invoke_limit_menu_select:t,Invoke_role_selected:t.roleid},(()=>{this.reloadTableInvokeLimit(i)}))}))},this.reloadTableInvokeLimit=e=>{if(e){let t=e.currency||[],i=e.data;for(const e of t)for(let t=0;t<i.length;t++){const o=i[t];o[e]=this.convertCurrency(o[e]),o.index_row=t}this.setState({O9_Roles_InvokeLimit_Table:i,invoke_limit_header:this.getTableHeader(t),invoke_limit_currency:t})}},this.onClickMenuApproveLimit=e=>{e=e.dataFull.dataItem,this.callAPI("O9_Roles_ApproveLimit_Table",e).then((t=>{if(t){let i=t.O9_Roles_ApproveLimit_Table,o=i.currency,a=i.data;for(const e of o)for(let t=0;t<a.length;t++){const i=a[t];i[e]=this.convertCurrency(i[e]),i.index_row=t}this.setState({O9_Roles_ApproveLimit_Table:a,O9_Roles_Approve_limit_menu_select:e,Approve_role_selected:e.roleid,approve_limit_header:this.getTableHeader(o)})}}))},this.onClickTreeMenuInvokeApprove=(e,t)=>{t=t.dataItem;let i=this.state.menu_invoke_aprrove;t.isOpen=!t.isOpen;let o=[],a=[];this.callAPI("O9_Roles_InvokeApprove_Table_header",t).then((e=>{o=[{cmdid:"0",caption:"Role Name"},{cmdid:"0",caption:"Self Invoke"}],o=o.concat(e.O9_Roles_InvokeApprove_Table_header),o=o.filter((e=>null!==e.cmdid)),this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then((e=>{a=e.O9_Roles_InvokeApprove_Table_body,this.setState({menu_invoke_aprrove:i,O9_Roles_InvokeApprove_Table_body:a,O9_Roles_InvokeApprove_Table_header:o,menu_invoke_aprrove_select:t})}))}))},this.removeRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.delete){let e=this.state.role_name_copying_selected;""!==e&&this.callAPI("O9_Roles_User_Add_and_remove_delete",{roleid:e}).then((t=>{let i=t.O9_Roles_User_Add_and_remove_delete;if(1===i[0].type){this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((e=>{let t=e.O9_Roles_Add_and_Remove_Role_Name,i=t[0],o=[{roleid:0,rolename:"All"}],a=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((e=>{o=o.concat(e.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:o})})),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((e=>{a=e.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:a})})),this.setState({O9_Roles_Add_and_Remove_Role_Name:t,isAdd_add_and_remove:!1,isDelete_add_and_remove:!1,delete_err:"",role_name_copying_selected:i.roleid,column2_role_select:i})})),s.ZP.showToast("Save",!0);var o=[{txcode:"bo-delete-roleJWEBUI",input:{roleID:e}}];return(0,N.Yr)(o,{}).then((e=>{}))}s.ZP.showToast(t.O9_Roles_User_Add_and_remove_delete[0].message,!1),this.setState({delete_err:i[0].message||""})}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},yt=(0,_.Iq)("jwebui_roleProfile"),this.key_form="BO_015003009",this.data_key_form={BO_015003003:{title:"ADM-Roles Profile",col_id:"column1"},BO_015003008:{title:"ADM-Invoke Limit",col_id:"column4"},BO_015003009:{title:"ADM-Approve Limit",col_id:"column5"}},this.state={menu_parent_select:"ADM - Roles Profile",menu_select:this.data_key_form[this.key_form].col_id,"column3.role_choose_right":"","column3.role_choose_left":"","column2.role_name_copying":"",column3_role_left_select:0,role_name_adding_input:"",role_name_copying_selected:"",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,menu_invoke_aprrove:[],O9_Roles_InvokeApprove_Table_header:[],O9_Roles_InvokeApprove_Table_body:[],menu_invoke_aprrove_select:{},O9_Roles_Add_and_Remove_Role_Name:[],O9_Roles_Add_and_Remove_Role_Name_select:"",O9_Roles_User_assignment_table_left:[],O9_Roles_User_assignment_table_right:[],O9_RolesUser_assignment_Role_Name_Left:[],O9_RolesUser_assignment_Role_Name_Right:[],user_assignment_select:"",O9_Roles_Invoke_limit_menu:[],O9_Roles_Invoke_limit_menu_select:{},O9_Roles_Approve_limit_menu:[],O9_Roles_Approve_limit_menu_select:{},O9_Roles_InvokeLimit_Table:[],O9_Roles_ApproveLimit_Table:[],table_user_profile_user_in_role:[],invoke_limit_header:[],approve_limit_header:[],Col3_Assignment_Search:{},invoke_limit_search_value:{},approve_limit_search_value:{}},this.menu_form=[{title:"Roles Profile",child:["Invoke - Aprrove","Add - Remove","User Assignment"]},{title:"Invoke Limit",child:[]},{title:"Approve Limit",child:[]}],this.user_profile=s.ZP.context_get("user_acc"),this.stateData={form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],abs_select:(e,t)=>{this.setState({menu_select:t})}},column1:{tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},title_table_up:"OPEARTION",table_up:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_up_data:[],table_up_config:[],title_table_down:"VERIFICATION",table_down:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_down_data:[],table_down_config:[]},column4:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchInvokeLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}]},column5:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchApproveLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]},column2:{role_name_adding:{dataFull:{config:{default:{title:"Role Name (for adding)",type:"text",class:"col-sm-5",code_form_component:"role_name_adding"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:e=>{this.CheckAddRoleName(e)}},listButton:[{dataFull:{config:{default:{title:"Add",icon:"add_circle_outline"},cmd:{}}},abs_Click:()=>{this.setState({addAndRemove_btnAddClick:!0})}},{dataFull:{config:{default:{title:"Delete",icon:"highlight_off"},cmd:{}}},abs_Click:this.removeRoleName},{dataFull:{config:{default:{title:"Save",type:"primary",icon:"check_circle_outline"},cmd:{}}},abs_Click:this.AddRoleName}],role_name_copying:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Role Name (for copying or deleting)",type:"text",class:"col-sm-5",code_form_component:"role_name_copying"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:[],input_value:"123",search_value:""},abs_Change:this.abs_role_name_copying_select,abs_search:e=>{this.onSearch(e,"column2.role_name_copying")}}},column3:{table_in_role:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"User Code",config:{width:"",isFrozen:!1}},{title:"User Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_in_role_data:[{data:[{data:"2"},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_in_role_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_left},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_left_data:[{data:[{data:"2"},{value:!1,abs_Click:this.abs_Ckeck},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_right},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_right_data:[{data:[],config:{value:!0}}],table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.getAllRoleAction(),await this.callAPI("O9_Roles_InvokeApprove_Menu").then((e=>{let{O9_Roles_InvokeApprove_Menu:t}=e||[];this.setState({menu_invoke_aprrove:t})}));let e=[],t=[{roleid:0,rolename:"All"}],i=[],o=[],a=[];await this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((t=>{e=t.O9_Roles_Add_and_Remove_Role_Name})),await this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((e=>{t=t.concat(e.O9_RolesUser_assignment_Role_Name_Left)})),await this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((e=>i=e.O9_RolesUser_assignment_Role_Name_Right)),t.length>0&&await this.callAPI("O9_Roles_User_assignment_table",{roleid:0}).then((e=>{o=e.O9_Roles_User_assignment_table})),i.length>0&&await this.callAPI("O9_Roles_User_assignment_table",i[0]).then((e=>{a=e.O9_Roles_User_assignment_table})),this.setState({role_left:t[0],column3_role_right_select:i[0],column3_role_left_select:t[0],column2_role_select:e[0],O9_Roles_Add_and_Remove_Role_Name:e,O9_RolesUser_assignment_Role_Name_Left:t,O9_RolesUser_assignment_Role_Name_Right:i,O9_Roles_User_assignment_table_left:o,O9_Roles_User_assignment_table_right:a,O9_Roles_Invoke_limit_menu:e,O9_Roles_Approve_limit_menu:e,isLoading:!1},(()=>{}))}render(){const e=(0,_.RP)("uFormLoading");return(0,c.jsxs)(o.Fragment,{children:[this.state.isLoading?(0,c.jsx)(e,{}):null,(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(yt,{stateData:this.stateData})})]})}convertCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e||0===e||(e=""),e=String(e);let t=e.replace(/,/g,"");return(0,ye.Nx)(t,2)}reloadTableWithMenuInvokeApprove(e){let t=this.state.menu_invoke_aprrove_select,i=[];this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then((t=>{i=t.O9_Roles_InvokeApprove_Table_body,this.setState({O9_Roles_InvokeApprove_Table_body:i,isLoading:!!e})}))}}const Dt=At;let kt;class Ot extends o.Component{constructor(e){super(e),this.handleSelectTabID=e=>{this.setState({menu_select:e})},this.handelSearchInvokeLimit=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",a=this.state.invoke_limit_search_value;a[t]=o,this.setState({invoke_limit_search_value:a})},this.handelSearchApproveLimit=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",a=this.state.approve_limit_search_value;a[t]=o,this.setState({approve_limit_search_value:a})},this.handelChangeSearch=(e,t)=>{var i;let o=(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)||"",a=this.state.Col3_Assignment_Search;switch(a[t]=o,t){case"TBL_USER_CODE":this.stateData.column3.table_left.dataFull.Header.data[2].value_search=o;break;case"TBL_USER_NAME":this.stateData.column3.table_left.dataFull.Header.data[3].value_search=o;break;case"TBR_USER_CODE":this.stateData.column3.table_right.dataFull.Header.data[2].value_search=o;break;case"TBR_USER_NAME":this.stateData.column3.table_right.dataFull.Header.data[3].value_search=o}this.setState({Col3_Assignment_Search:a})},this.handelClearSearch=()=>{},this.getTableHeader=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return t.push({title:"Group",code:"module"}),t.push({title:"Caption",code:"tranname"}),e.forEach((e=>{t.push({title:e,code:e})})),t},this.abs_role_name_copying_select=(e,t,i)=>{this.setState({role_name_copying_selected:e.roleid,column2_role_select:e})},this.abs_Ckeck_invoke_approve_verification=(e,t)=>{this.callAPI("O9_Roles_Invoke_approve_Table_Change_save_approve",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then((e=>{let t=e.O9_Roles_Invoke_approve_Table_Change_save_approve;this.reloadTableWithMenuInvokeApprove(),1===t[0].type?s.ZP.showToast("Save",!0):s.ZP.showToast("Save",!1)}))},this.abs_Ckeck_invoke_approve_operation=(e,t)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let i=this.state.menu_invoke_aprrove.filter((t=>t.parentid===e.parentid));this.callAPI("O9_Roles_Invoke_approve_Table_Change_save",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then((o=>{let a=o.O9_Roles_Invoke_approve_Table_Change_save;if(this.reloadTableWithMenuInvokeApprove(!0),1===a[0].type){var n=[{txcode:"bo-update-roleBO-JWEBUI",input:{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0,menu_child:i}}];return(0,N.Yr)(n,{}).then((e=>{s.ZP.showToast("Save",!0),this.setState({isLoading:!1})}))}s.ZP.showToast(a[0].message,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.UNSAFE_componentWillUpdate=(e,t)=>{var i,o,a;let n=t.role_action||{};this.stateData.tab.data=this.stateData.tab.data.map((e=>(e.isShow=e.id===t.menu_select,e))),this.stateData.column3.table_in_role_data=t.table_user_profile_user_in_role.map((e=>({config:{value:!1},data:[{data:e.rolename},{data:e.user_code},{data:e.usrname}]}))),this.stateData.column1.tree_data.tree_data=null===(i=t.menu_invoke_aprrove)||void 0===i?void 0:i.map((e=>({title:e.caption,parent_id:e.parentid,is_open:!1,DOM_elm:null,id:e.cmdid,dataItem:e,abs_click:this.onClickTreeMenuInvokeApprove}))),this.stateData.column1.table_up.dataFull.Header.data=t.O9_Roles_InvokeApprove_Table_header.map((e=>({title:e.caption,config:{width:"",isFrozen:!1}}))),this.stateData.column1.table_down.dataFull.Header.data=s.ZP.cloneJson(this.stateData.column1.table_up.dataFull.Header.data),this.stateData.column1.table_down.dataFull.Header.data[1]&&(this.stateData.column1.table_down.dataFull.Header.data[1].title="Self Approve");let r=t.O9_Roles_InvokeApprove_Table_header;this.stateData.column1.table_up_config=r.map(((e,t)=>0===t?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:"uTableColumnCheckbox",config:{cmd:{disable:!1===n.save}}})),this.stateData.column1.table_down_config=this.stateData.column1.table_up_config;let l=t.O9_Roles_InvokeApprove_Table_body;this.stateData.column1.table_up_data=[],this.stateData.column1.table_down_data=[];for(let s=0;s<l.length;s++){let e=r.length-1,t=[],i=[];for(let o=0;o<e;o++)0===o&&(t.push({data:l[s+o].rolename}),i.push({data:l[s+o].rolename})),t.push({value:1===l[s+o].invoke,dataItem:l[s+o],abs_Click:this.abs_Ckeck_invoke_approve_operation}),i.push({value:1===l[s+o].approve,dataItem:l[s+o],abs_Click:this.abs_Ckeck_invoke_approve_verification});this.stateData.column1.table_up_data.push(t),this.stateData.column1.table_down_data.push(i),s=s+e-1}if(this.stateData.column2.role_name_adding.dataFull.config.cmd.disable=!0!==t.addAndRemove_btnAddClick,this.stateData.column2.listButton[2].dataFull.config.cmd.disable=!0===t.addAndRemove_btnSaveClick,this.stateData.column2.role_name_copying.dataFull.search_value=t["column2.role_name_copying"],this.stateData.column2.listButton[0].dataFull.config.cmd.visible=!1!==n.save,this.stateData.column2.listButton[2].dataFull.config.cmd.visible=!1!==n.save,this.stateData.column2.listButton[1].dataFull.config.cmd.visible=!1!==n.delete,this.stateData.column3.next.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.next_all.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.preview.dataFull.config.cmd.disable=!1===n.save,this.stateData.column3.preview_all.dataFull.config.cmd.disable=!1===n.save,!t.role_name_copying_selected&&t.O9_Roles_Add_and_Remove_Role_Name.length>0)this.setState({role_name_copying_selected:t.O9_Roles_Add_and_Remove_Role_Name[0].roleid});else{var c;this.stateData.column2.role_name_copying.dataFull.input_value=null===(c=t.column2_role_select)||void 0===c?void 0:c.rolename;let e=t.O9_Roles_Add_and_Remove_Role_Name.filter((e=>(e.rolename||"").toLowerCase().includes(t["column2.role_name_copying"].toLowerCase())));this.stateData.column2.role_name_copying.dataFull.data=e.map(((e,i)=>{let o=!1;return e.roleid===t.role_name_copying_selected&&(o=!0),{title:e.rolename,value:e,selected:o}}))}this.stateData.column2.role_name_adding.dataFull.value=t.role_name_adding_input;let d=this.unCheck_user_assign_table_left,h=this.unCheck_user_assign_table_right;!0===this.unCheck_user_assign_table_left&&(this.unCheck_user_assign_table_left=!1),!0===this.unCheck_user_assign_table_right&&(this.unCheck_user_assign_table_right=!1),this.stateData.column3.table_left_data=t.O9_Roles_User_assignment_table_left.filter((e=>e.user_code.includes(t.Col3_Assignment_Search.TBL_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBL_USER_NAME||""))).map(((e,t)=>{var i,o,a;return{data:[{data:t+1},{value:!0!==d&&((null===(i=this.stateData.column3.table_left_data[t])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_left,dataItem:{value:e,index:t}},{data:e.user_code},{data:e.usrname}],config:{value:!1}}})),this.stateData.column3.table_right_data=t.O9_Roles_User_assignment_table_right.filter((e=>e.user_code.includes(t.Col3_Assignment_Search.TBR_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBR_USER_NAME||""))).map(((e,t)=>{var i,o,a;return{data:[{data:t+1},{value:!0!==h&&((null===(i=this.stateData.column3.table_right_data[t])||void 0===i||null===(o=i.data)||void 0===o||null===(a=o[1])||void 0===a?void 0:a.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_right,dataItem:{value:e,index:t}},{data:e.user_code},{data:e.usrname}],config:{value:!1}}})),this.stateData.column3.role_choose_left.dataFull.data=[],this.stateData.column3.role_choose_left.dataFull.search_value=t["column3.role_choose_left"],this.stateData.column3.role_choose_left.dataFull.input_value=null===(o=t.column3_role_left_select)||void 0===o?void 0:o.rolename,t.O9_RolesUser_assignment_Role_Name_Left.filter((e=>null!==e.rolename&&e.rolename.toLowerCase().includes(t["column3.role_choose_left"].toLowerCase()))).forEach(((e,i)=>{let o=!1;(t.column3_role_left_select.roleid===e.roleid||0===i&&void 0===t.column3_role_left_select.roleid)&&(o=!0),this.stateData.column3.role_choose_left.dataFull.data.push({title:e.rolename,value:{id:e.roleid,item:e,type:"left"},selected:o})})),this.stateData.column3.role_choose_right.dataFull.search_value=t["column3.role_choose_right"],this.stateData.column3.role_choose_right.dataFull.input_value=null===(a=t.column3_role_right_select)||void 0===a?void 0:a.rolename;let u=t.O9_RolesUser_assignment_Role_Name_Right.filter((e=>null!==e.rolename&&e.rolename.toLowerCase().includes(t["column3.role_choose_right"].toLowerCase())));this.stateData.column3.role_choose_right.dataFull.data=u.map(((e,i)=>{let o=!1;return(t.column3_role_right_select.roleid===e.roleid||0===i&&void 0===t.column3_role_right_select.roleid)&&(o=!0),{title:e.rolename,value:{id:e.roleid,item:e,type:"right"},selected:o}})),this.stateData.column4.listItem=t.O9_Roles_Invoke_limit_menu.map((e=>{let i=!1;return t.Invoke_role_selected===e.roleid&&(i=!0),{dataFull:{title:e.rolename,dataItem:e,selected:i},abs_Click:this.onClickMenuInvokeLimit}})),this.stateData.column4.table.dataFull.Header.data=t.invoke_limit_header.map((e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.invoke_limit_search_value[e.code]||""}))),this.stateData.column4.table_config=t.invoke_limit_header.map(((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===n.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),this.stateData.column4.table_data=t.O9_Roles_InvokeLimit_Table.filter((e=>{let i=!0;for(const o in t.invoke_limit_search_value){let a=t.invoke_limit_search_value[o];e[o].toLowerCase().includes(a.toLowerCase())||(i=!1)}return i})).map(((e,i)=>t.invoke_limit_header.map(((t,o)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:i,index_col:o,abs_Change:this.abs_change_invoke_table,abs_Submit:this.abs_submit_invoke_table}))))),this.stateData.column5.listItem=t.O9_Roles_Invoke_limit_menu.map((e=>{let i=!1;return t.Approve_role_selected===e.roleid&&(i=!0),{dataFull:{title:e.rolename,dataItem:e,selected:i},abs_Click:this.onClickMenuApproveLimit}})),this.stateData.column5.table.dataFull.Header.data=t.approve_limit_header.map((e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.approve_limit_search_value[e.code]||""}))),this.stateData.column5.table_config=t.approve_limit_header.map(((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===n.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}})),this.stateData.column5.table_data=t.O9_Roles_ApproveLimit_Table.filter((e=>{let i=!0;for(const o in t.approve_limit_search_value){let a=t.approve_limit_search_value[o];e[o].toLowerCase().includes(a.toLowerCase())||(i=!1)}return i})).map(((e,i)=>t.approve_limit_header.map(((t,o)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:i,index_col:o,abs_Change:this.abs_change_approve_table,abs_Submit:this.abs_submit_approve_table})))))},this.CheckAddRoleName=e=>{let t=e.target.value,i=!1;for(const o of this.stateData.column2.role_name_copying.dataFull.data)if(o.title===t||""===t){i=!0;break}""===t&&(i=!0),this.setState({addAndRemove_btnSaveClick:i,role_name_adding_input:t})},this.abs_Check_role_profile_user_assign_left=e=>{this.onClickAssignLeftRow(e);let t=this.stateData.column3.table_left_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_Check_role_profile_user_assign_right=e=>{let t=this.stateData.column3.table_right_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_CheckAll_left=()=>{let e=this.stateData.column3.table_left.dataFull.Header.data[1],t=0;this.stateData.column3.table_left_data.forEach((()=>{!0===e.data.value?this.stateData.column3.table_left_data[t].data[1].value=!1:this.stateData.column3.table_left_data[t].data[1].value=!0,t++})),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_CheckAll_right=()=>{let e=this.stateData.column3.table_right.dataFull.Header.data[1],t=0;this.stateData.column3.table_right_data.forEach((()=>{!0===e.data.value?this.stateData.column3.table_right_data[t].data[1].value=!1:this.stateData.column3.table_right_data[t].data[1].value=!0,t++})),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_change_approve_table=(e,t,i,o)=>{let a=e.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_ApproveLimit_Table;let l=r[t.row_idx][t.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let e=l.lastIndexOf(".");c=n.substring(0,e)+"."+n.substring(e,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[t.row_idx][t.header.code]=d,this.setState({O9_Roles_ApproveLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_change_invoke_table=(e,t,i,o)=>{let a=e.target,{selectionStart:s,value:n}=a,r=this.state.O9_Roles_InvokeLimit_Table;let l=r[t.row_idx][t.header.code],c=n;if(l||(l="0.00"),l.includes(".")&&!n.includes(".")){let e=l.lastIndexOf(".");c=n.substring(0,e)+"."+n.substring(e,n.length),"."===c&&(c="")}let d=l;d=d.replace("-","");let h=n.lastIndexOf(".");var u;void 0!==d&&void 0!==n&&(n.indexOf(".")!==n.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(n.length-(null===(u=d)||void 0===u?void 0:u.length)),1===s?h=1:s>n.lastIndexOf(".")&&(h+=1)));r[t.row_idx][t.header.code]=d,this.setState({O9_Roles_InvokeLimit_Table:r},(()=>{setTimeout((()=>{a.setSelectionRange(h,h)}),50)}))},this.abs_submit_invoke_table=(e,t,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_InvokeLimit_Table;this.callAPI("O9_Roles_InvokeLimit_Table_Change_save",{roleid:this.state.Invoke_role_selected,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then((i=>{if(1===i.O9_Roles_InvokeLimit_Table_Change_save[0].type){s.ZP.showToast("Save",!0);var o=[{txcode:"bo-update-roleFOJWEBUI",input:{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,cmdid:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code]),list_currency:this.state.invoke_limit_currency,list_ccr:t[e.row_idx]}}];return(0,N.Yr)(o,{}).then((e=>{}))}s.ZP.showToast("Save",!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.abs_submit_approve_table=(e,t,i)=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_ApproveLimit_Table;this.callAPI("O9_Roles_ApproveLimit_Table_Change_save",{roleid:this.state.O9_Roles_Approve_limit_menu_select.roleid,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then((e=>{1===e.O9_Roles_ApproveLimit_Table_Change_save[0].type&&s.ZP.showToast("Save",!0)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")}))},this.getRoleAction=(e,t)=>{let i=(0,s._M)(),o={};const a=t.list_layout;for(const s of i)for(const t of a)for(const i of t.list_view)for(const t of i.list_input){let i=t.default.name.toLowerCase();if(!0!==o[i]){var n,r,l;let a=null===(n=e[s])||void 0===n||null===(r=n[t.default.codeHidden])||void 0===r||null===(l=r.component)||void 0===l?void 0:l.install;o[i]=a}}return o},this.getAllRoleAction=()=>(0,N.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then((e=>{var t=s.ZP.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var i=s.ZP.foGetData("loadRoleTask",e)||{};void 0===i&&(i={});let o=this.getRoleAction(i,t);this.setState({role_action:o})})),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callAPI=(e,t)=>{this.state.isLoading||this.setState({isLoading:!0});var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return i[0].input=Object.assign(i[0].input,t),(0,N.Yr)(i,{}).then((t=>s.ZP.foGetData("data",t)||{[e]:[]})).finally((e=>{this.setState({isLoading:!1})}))},this.AddRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.add&&this.state.role_action.save){let e=this.state.role_name_copying_selected,t=this.state.role_name_adding_input;""!==e&&""!==t&&this.callAPI("O9_Roles_User_Add_and_remove_add",{roleid:e,new_name:t}).then((i=>{let o=i.O9_Roles_User_Add_and_remove_add;1===o[0].type?this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((i=>{let o=i.O9_Roles_Add_and_Remove_Role_Name,a=[{roleid:0,rolename:"All"}],n=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((e=>{a=a.concat(e.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:a})})),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((e=>{n=e.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:n})})),this.setState({O9_Roles_Add_and_Remove_Role_Name:o,isAdd_add_and_remove:!1,addAndRemove_btnAddClick:!1,role_name_adding_input:"",addAndRemove_btnSaveClick:!0});let r=-1;for(const e of o)e.rolename===t&&(r=e.roleid);var l=[{txcode:"bo-create-roleJWEBUI",input:{roleID:r,roleName:t,roleCopy:e}}];return(0,N.Yr)(l,{}).then((e=>{s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(o[0].message,!1)}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},this.onSearch=(e,t)=>{this.setState({[t]:e.target.value})},this.abs_Click_next=()=>{this.onClickAssignLeftToRightArray()},this.abs_Click_next_all=()=>{this.onClickAssignLeftToRightAll()},this.abs_Click_previous=()=>{this.onClickAssignRightToLeftArray()},this.abs_Click_previous_all=()=>{this.onClickAssignRightToLeftAll()},this.onClickAssignLeftToRightAll=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter((t=>0===e.filter((e=>e.user_code===t.data[1].dataItem.value.user_code)).length)).map((e=>e.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:i,data:t}).then((e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:t}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_left.dataFull.Header.data[1],a=0;this.stateData.column3.table_left_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_left_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignRightToLeftAll=()=>{let e=this.stateData.column3.table_right_data.map((e=>e.data[1].dataItem.value)),t=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:e}).then((e=>{let i=e.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then((e=>{let i=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:i}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(i[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let i=this.stateData.column3.table_right.dataFull.Header.data[1],o=0;this.stateData.column3.table_right_data.forEach((()=>{!0===i.data.value&&(this.stateData.column3.table_right_data[o].data[1].value=!1),o++})),i.data.value=!1},this.onClickAssignLeftToRightArray=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter((t=>!0===t.data[1].value&&0===e.filter((e=>e.user_code===t.data[1].dataItem.value.user_code)).length)).map((e=>e.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_left=!0,""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:i,data:t}).then((e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:t}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_left.dataFull.Header.data[1],a=0;this.stateData.column3.table_left_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_left_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onClickAssignLeftRow=e=>{this.callAPI("user_profile_user_in_role",e.value).then((e=>{var t;let i=(null===e||void 0===e||null===(t=e.user_profile_user_in_role)||void 0===t?void 0:t.data)||[];this.setState({table_user_profile_user_in_role:i})}))},this.onClickAssignLeftToRight=e=>{let t=this.state.column3_role_right_select.roleid,i=this.state.O9_Roles_User_assignment_table_right;for(let o=0;o<i.length;o++){if(i[o].user_code===e.user_code)return}""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:t,data:[{usrid:e.usrid}]}).then((e=>{let i=e.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then((e=>{let i=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:i}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i[0].message,!1)}))},this.onClickAssignRightToLeft=e=>{let t=this.refs.ref_assignment_list_role_name_right.value;""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:[{usrid:e.usrid}]}).then((e=>{let i=e.O9_Roles_User_Assignment_left_to_right;1===i[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then((e=>{let i=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:i}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):s.ZP.showToast(i[0].message,!1)}))},this.onClickAssignRightToLeftArray=e=>{let t=this.stateData.column3.table_right_data.filter((e=>!0===e.data[1].value)).map((e=>e.data[1].dataItem.value)),i=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==i&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-i,data:t}).then((e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:i}).then((e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var o=[{txcode:"bo-update-roleUserJwebui",input:{role_id:i,role_user_all:t}}];return(0,N.Yr)(o,{}).then((e=>{this.setState({isLoading:!1}),s.ZP.showToast("Save",!0)}))})):(s.ZP.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))}));let o=this.stateData.column3.table_right.dataFull.Header.data[1],a=0;this.stateData.column3.table_right_data.forEach((()=>{!0===o.data.value&&(this.stateData.column3.table_right_data[a].data[1].value=!1),a++})),o.data.value=!1},this.onChangeUserAgm=(e,t)=>{switch(e.type){case"left":if(e.id===this.state.column3_role_right_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then((t=>{let i=this.state.O9_RolesUser_assignment_Role_Name_Left.filter((t=>t.roleid===e.id)),o=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_left:o,column3_role_left_select:i[0]})}));break;case"right":if(e.id===this.state.column3_role_left_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then((t=>{let i=this.state.O9_RolesUser_assignment_Role_Name_Right.filter((t=>t.roleid===e.id)),o=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:o,column3_role_right_select:i[0]})}))}},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return t.length>16&&(t=t.slice(t.length-16,t.length)),(0,ye.Nx)(t,2)},this.getValueCurrency=e=>void 0===e||null===e||""===e?"":Number(e.replace(/,/g,"")),this.saveInvokeTable=()=>{},this.onClickMenuInvokeLimit=e=>{let t=e.dataFull.dataItem;this.callAPI("O9_Roles_InvokeLimit_Table",t).then((e=>{void 0===e&&(e={});let i=e.O9_Roles_InvokeLimit_Table;this.setState({O9_Roles_Invoke_limit_menu_select:t,Invoke_role_selected:t.roleid},(()=>{this.reloadTableInvokeLimit(i)}))}))},this.reloadTableInvokeLimit=e=>{if(e){let t=e.currency||[],i=e.data;for(const e of t)for(let t=0;t<i.length;t++){const o=i[t];o[e]=this.convertCurrency(o[e]),o.index_row=t}this.setState({O9_Roles_InvokeLimit_Table:i,invoke_limit_header:this.getTableHeader(t),invoke_limit_currency:t})}},this.onClickMenuApproveLimit=e=>{e=e.dataFull.dataItem,this.callAPI("O9_Roles_ApproveLimit_Table",e).then((t=>{if(t){let i=t.O9_Roles_ApproveLimit_Table,o=i.currency,a=i.data;for(const e of o)for(let t=0;t<a.length;t++){const i=a[t];i[e]=this.convertCurrency(i[e]),i.index_row=t}this.setState({O9_Roles_ApproveLimit_Table:a,O9_Roles_Approve_limit_menu_select:e,Approve_role_selected:e.roleid,approve_limit_header:this.getTableHeader(o)})}}))},this.onClickTreeMenuInvokeApprove=(e,t)=>{t=t.dataItem;let i=this.state.menu_invoke_aprrove;t.isOpen=!t.isOpen;let o=[],a=[];this.callAPI("O9_Roles_InvokeApprove_Table_header",t).then((e=>{o=[{cmdid:"0",caption:"Role Name"},{cmdid:"0",caption:"Self Invoke"}],o=o.concat(e.O9_Roles_InvokeApprove_Table_header),o=o.filter((e=>null!==e.cmdid)),this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then((e=>{a=e.O9_Roles_InvokeApprove_Table_body,this.setState({menu_invoke_aprrove:i,O9_Roles_InvokeApprove_Table_body:a,O9_Roles_InvokeApprove_Table_header:o,menu_invoke_aprrove_select:t})}))}))},this.removeRoleName=()=>{this.getAllRoleAction().then((()=>{if(this.state.role_action.delete){let e=this.state.role_name_copying_selected;""!==e&&this.callAPI("O9_Roles_User_Add_and_remove_delete",{roleid:e}).then((t=>{let i=t.O9_Roles_User_Add_and_remove_delete;if(1===i[0].type){this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((e=>{let t=e.O9_Roles_Add_and_Remove_Role_Name,i=t[0],o=[{roleid:0,rolename:"All"}],a=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((e=>{o=o.concat(e.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:o})})),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((e=>{a=e.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:a})})),this.setState({O9_Roles_Add_and_Remove_Role_Name:t,isAdd_add_and_remove:!1,isDelete_add_and_remove:!1,delete_err:"",role_name_copying_selected:i.roleid,column2_role_select:i})})),s.ZP.showToast("Save",!0);var o=[{txcode:"bo-delete-roleJWEBUI",input:{roleID:e}}];return(0,N.Yr)(o,{}).then((e=>{}))}s.ZP.showToast(t.O9_Roles_User_Add_and_remove_delete[0].message,!1),this.setState({delete_err:i[0].message||""})}))}else s.ZP.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)}))},kt=(0,_.Iq)("jwebui_roleProfile"),this.key_form="BO_015003008",this.data_key_form={BO_015003003:{title:"ADM-Roles Profile",col_id:"column1"},BO_015003008:{title:"ADM-Invoke Limit",col_id:"column4"},BO_015003009:{title:"ADM-Approve Limit",col_id:"column5"}},this.state={menu_parent_select:"ADM - Roles Profile",menu_select:this.data_key_form[this.key_form].col_id,"column3.role_choose_right":"","column3.role_choose_left":"","column2.role_name_copying":"",column3_role_left_select:0,role_name_adding_input:"",role_name_copying_selected:"",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,menu_invoke_aprrove:[],O9_Roles_InvokeApprove_Table_header:[],O9_Roles_InvokeApprove_Table_body:[],menu_invoke_aprrove_select:{},O9_Roles_Add_and_Remove_Role_Name:[],O9_Roles_Add_and_Remove_Role_Name_select:"",O9_Roles_User_assignment_table_left:[],O9_Roles_User_assignment_table_right:[],O9_RolesUser_assignment_Role_Name_Left:[],O9_RolesUser_assignment_Role_Name_Right:[],user_assignment_select:"",O9_Roles_Invoke_limit_menu:[],O9_Roles_Invoke_limit_menu_select:{},O9_Roles_Approve_limit_menu:[],O9_Roles_Approve_limit_menu_select:{},O9_Roles_InvokeLimit_Table:[],O9_Roles_ApproveLimit_Table:[],table_user_profile_user_in_role:[],invoke_limit_header:[],approve_limit_header:[],Col3_Assignment_Search:{},invoke_limit_search_value:{},approve_limit_search_value:{}},this.menu_form=[{title:"Roles Profile",child:["Invoke - Aprrove","Add - Remove","User Assignment"]},{title:"Invoke Limit",child:[]},{title:"Approve Limit",child:[]}],this.user_profile=s.ZP.context_get("user_acc"),this.stateData={form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],abs_select:(e,t)=>{this.setState({menu_select:t})}},column1:{tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},title_table_up:"OPEARTION",table_up:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_up_data:[],table_up_config:[],title_table_down:"VERIFICATION",table_down:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_down_data:[],table_down_config:[]},column4:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchInvokeLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}]},column5:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchApproveLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]},column2:{role_name_adding:{dataFull:{config:{default:{title:"Role Name (for adding)",type:"text",class:"col-sm-5",code_form_component:"role_name_adding"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:e=>{this.CheckAddRoleName(e)}},listButton:[{dataFull:{config:{default:{title:"Add",icon:"add_circle_outline"},cmd:{}}},abs_Click:()=>{this.setState({addAndRemove_btnAddClick:!0})}},{dataFull:{config:{default:{title:"Delete",icon:"highlight_off"},cmd:{}}},abs_Click:this.removeRoleName},{dataFull:{config:{default:{title:"Save",type:"primary",icon:"check_circle_outline"},cmd:{}}},abs_Click:this.AddRoleName}],role_name_copying:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Role Name (for copying or deleting)",type:"text",class:"col-sm-5",code_form_component:"role_name_copying"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:[],input_value:"123",search_value:""},abs_Change:this.abs_role_name_copying_select,abs_search:e=>{this.onSearch(e,"column2.role_name_copying")}}},column3:{table_in_role:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"User Code",config:{width:"",isFrozen:!1}},{title:"User Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_in_role_data:[{data:[{data:"2"},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_in_role_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_left},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_left_data:[{data:[{data:"2"},{value:!1,abs_Click:this.abs_Ckeck},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_right},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:s.ZP.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_right_data:[{data:[],config:{value:!0}}],table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.getAllRoleAction(),await this.callAPI("O9_Roles_InvokeApprove_Menu").then((e=>{let{O9_Roles_InvokeApprove_Menu:t}=e||[];this.setState({menu_invoke_aprrove:t})}));let e=[],t=[{roleid:0,rolename:"All"}],i=[],o=[],a=[];await this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then((t=>{e=t.O9_Roles_Add_and_Remove_Role_Name})),await this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then((e=>{t=t.concat(e.O9_RolesUser_assignment_Role_Name_Left)})),await this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then((e=>i=e.O9_RolesUser_assignment_Role_Name_Right)),t.length>0&&await this.callAPI("O9_Roles_User_assignment_table",{roleid:0}).then((e=>{o=e.O9_Roles_User_assignment_table})),i.length>0&&await this.callAPI("O9_Roles_User_assignment_table",i[0]).then((e=>{a=e.O9_Roles_User_assignment_table})),this.setState({role_left:t[0],column3_role_right_select:i[0],column3_role_left_select:t[0],column2_role_select:e[0],O9_Roles_Add_and_Remove_Role_Name:e,O9_RolesUser_assignment_Role_Name_Left:t,O9_RolesUser_assignment_Role_Name_Right:i,O9_Roles_User_assignment_table_left:o,O9_Roles_User_assignment_table_right:a,O9_Roles_Invoke_limit_menu:e,O9_Roles_Approve_limit_menu:e,isLoading:!1},(()=>{}))}render(){const e=(0,_.RP)("uFormLoading");return(0,c.jsxs)(o.Fragment,{children:[this.state.isLoading?(0,c.jsx)(e,{}):null,(0,c.jsx)("div",{style:{display:this.state.visibility},children:(0,c.jsx)(kt,{stateData:this.stateData})})]})}convertCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e||0===e||(e=""),e=String(e);let t=e.replace(/,/g,"");return(0,ye.Nx)(t,2)}reloadTableWithMenuInvokeApprove(e){let t=this.state.menu_invoke_aprrove_select,i=[];this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then((t=>{i=t.O9_Roles_InvokeApprove_Table_body,this.setState({O9_Roles_InvokeApprove_Table_body:i,isLoading:!!e})}))}}const wt=Ot,Ct=e=>{switch(e.form_code){case"myProfile":return l.ZP.quickPost([{txcode:"#sys:bo-load-myProfile",input:{}}],{}),!0;case"BO_015003011":return function(){var e=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Qe,{mapping_key:e},e)},e))}(),!0;case"016002":return function(){var e=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(be,{mapping_key:e},e)},e))}(),!0;case"BO_015003003":return function(){var e=s.ZP.autoID();"ncbsCbs"===(0,s.Py)()||"ncbsAdmin"===(0,s.Py)()||"shwebank"===(0,s.Py)()?(0,N.Yr)([{txcode:"#sys:bo-load-allApp"}],{}).then((t=>{let i=s.ZP.foGetData("list_appliaction",t);s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Ie,{list_app:i,mapping_key:e},e)},e))})):s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(ke,{mapping_key:e},e)},e))}(),!0;case"ncbs_role_management":return function(){var e=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Ce,{mapping_key:e},e)},e))}(),!0;case"015001005":return function(){var e=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Be,{mapping_key:e},e)},e))}(),!0;case"BO_003005":return function(){let e=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(gt,{mapping_key:e},e)},e))}(),!0;case"BO_011001":return function(){let e=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(bt,{mapping_key:e},e)},e))}(),!0;case"BO_015003009":return function(){var e=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Dt,{mapping_key:e},e)},e))}(),!0;case"BO_015003008":return function(){var e=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(wt,{mapping_key:e},e)},e))}(),!0;case"mangerFeedback":return l.ZP.quickPost([{txcode:"#sys:bo-feedback-loadData",input:{}}],{}),!0}return!1};var xt=i(4324);let St={designform:"Design Form",dev:"Developer",o9:"Optimize 9",sys:"System"};class Mt extends o.Component{constructor(e){super(e),this.loadDataToState=()=>{let e=this.createListApp(this.allListApp),t=this.createListLangOfApp(this.lang_system_),i=[],o={};return this.allListApp.forEach((e=>{i.push({id:e.app,title:St[e.app]});const t={title:e.app,btn_save:{dataFull:{config:{default:{title:"Save",type:"primary",class:"",icon:""}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.test3}},table_list_forms:{title:"LIST FORMS",table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table:{dataFull:{Header:{data:[{title:"Form structure",config:{width:"",isFrozen:!1}},{title:"English",config:{width:"",isFrozen:!1}},{title:"Ti\u1ebfng vi\u1ec7t",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:[{data:[{data:"Form"},{data:" Admin User Profile "},{data:" Qu\u1ea3n tr\u1ecb ng\u01b0\u1eddi d\xf9ng"}],config:{value:!1}},{data:[{data:"-- Layout"},{data:"Profile  "},{data:"H\u1ed3 s\u01a1"}],config:{value:!1}},{data:[{data:"---- View"},{data:"Button"},{data:"N\xfat b\u1ea5m"}],config:{value:!1}},{data:[{data:"------- Component"},{data:"Text input"},{data:"\xd4 nh\u1eadp li\u1ec7u"}],config:{value:!1}}]},table_list_lang:{title:"LIST LANG",table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table:{Header:{data:this.getHeaderTableLangDetailConfig(this.lang_system_),config:{mode:{hasSearch:!1}}}},table_data:{data:this.getDataTableLangDetailConfig(this.lang_arr,this.lang_system_)}}};o[e.app]=t})),{form:{dataFull:{config:{default:{title:"Lang Manager Global"}},cmd:{visibility:""}}},form_add:{code:{dataFull:{config:{default:{title:"Code lang",class:"col-md-4 ",required:!0,placeholder:"Code lang",code_form_component:"code"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},name:{dataFull:{config:{default:{title:"Name lang",class:"col-md-4 ",required:!1,placeholder:"Name lang",code_form_component:"name"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},image:{dataFull:{config:{default:{title:"Image",class:"col-md-4 ",required:!1,placeholder:"Image",code_form_component:"image"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},of_app:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No Result",title:"Of App",class:"col-md-4",required:!1,code_form_component:"of_app"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:e,search_value:"",abs_Change:this.onChangeValueSelect_formAdd,abs_search:this.search}},lang_copy:{dataFull:{config:{default:{search:{placeholder:"Lang copy"},data_status:"No Result",title:"Lang copy",class:"col-md-4",required:!1,code_form_component:"lang_copy"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:t,search_value:"",abs_Change:this.onChangeValueSelect_formAdd,abs_search:this.search}},btn_add:{dataFull:{config:{default:{title:"Add",type:"primary",class:"",icon:"",code_form_component:"btn_add"}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.test3}}},tab:{data:i,abs_select:this.test},list_app:o}},this.createListLangOfApp=e=>{let t=[];return e.forEach((e=>{t.push({title:e.view,value:e.key,selected:e.selected})})),t},this.createListApp=e=>{let t=[];return e.forEach((e=>{t.push({title:St[e.app],value:e.app}),t[0].selected=!0})),t},this.createListFormTable=e=>(this.allListForms.forEach((e=>{})),[]),this.onChangeValue_formAdd=(e,t)=>{let{stateData:i}=this.state;i.form_add[t].dataFull.value=e.target.value,this.setState({stateData:i})},this.onChangeValueSelect_formAdd=(e,t,i)=>{let{stateData:o}=this.state;if(i){for(const t of o.form_add[i].dataFull.data)t.selected=t.value===e;this.setState({stateData:o})}},this.table_input_change=(e,t,i,o)=>{let a=e.target.value;if(0!==o||0===o&&a.length<=2){let e=this.state.stateData;e.table_lang_data.data[i].all_column[o].data=a,e.table_lang_data.data[i].all_column[o].isUpdate=!1,this.updateLanguageSystem(i,this.mappingIndexToKeyLanguage[o.toString()],a),this.setState({stateData:e})}},this.table_input_change_detail=(e,t,i,o)=>{let a=e.target.value,s=this.state.stateData;if(s.table_lang_detail_data.data[i].all_column[o].data=a,s.table_lang_detail_data.data[i].all_column[o].isUpdate=!1,o>1){let e=this.logicState.lang_system[o-2].key;this.logicState.data[i].lang[e]=a}else this.logicState.data[i].key=a;this.setState({stateData:s})},this.clickAddLangButtonHandler=()=>{let e=prompt(this.logicState.languages.alert,"");if(null!=e&&"yes"===e){this.logicState.lang_system.push({key:"",view:"",img:""});let{stateData:e}=this.state;e.table_lang_data.data=this.getDataTableLangConfig(this.logicState.lang_system),this.setState({stateData:e})}},this.clickAddLangDetailHandler=()=>{let e=prompt(this.logicState.languages.alert,"");if(null!=e&&"yes"===e){let e={key:"",lang:{}};this.logicState.data.push(e);let{stateData:t}=this.state,i=this.getEachRowDataLangDetailConfig(e,t.table_lang_detail_data.data.length,this.logicState.lang_system);t.table_lang_detail_data.data.push(i),this.setState({stateData:t})}},this.changeKeyLanguage=e=>{let t={note:s.ZP.getLang("note"),title_detail:s.ZP.getLang("langApplication_titleDetail"),title_:s.ZP.getLang("langApplication_title"),des_:s.ZP.getLang("langApplication_des"),lang_code:s.ZP.getLang("langApplication_code"),lang_name:s.ZP.getLang("langApplication_name"),lang_img:s.ZP.getLang("langApplication_img"),lowercase:s.ZP.getLang("langApplication_lowercase"),btn_save:s.ZP.getLang("langApplication_btnSave"),btn_add:s.ZP.getLang("langApplication_btnAdd"),btn_save_detail:s.ZP.getLang("langApplication_btnSaveDetail"),btn_add_detail:s.ZP.getLang("langApplication_btnAddDetail"),alert:s.ZP.getLang("langApplication_alert")};if(void 0!==e)return t;let i=this.logicState.infoA;i.title=s.ZP.getLang("langApplication_title"),i.des=s.ZP.getLang("langApplication_des"),i.lang_form.vi=s.ZP.getLang("langApplication_title"),i.lang_form.en=s.ZP.getLang("langApplication_title"),this.logicState.languages=t,this.logicState.infoA=i,this.changeLanguageTemplate(t)},this.saveLangSystem=()=>{let e=s.ZP.getConfigUserDefault("");if(void 0!==e){e.list_lang_config=this.logicState.lang_system,l.ZP.quickPost([{txcode:"#sys:bo-save-langList",input:{content:e}}],{});let{stateData:t}=this.state;t.table_lang_data.data=this.getDataTableLangConfig(this.logicState.lang_system,!0),t.table_lang_detail_header.Header.data=this.getHeaderTableLangDetailConfig(this.logicState.lang_system),t.table_lang_detail_data.data=this.getDataTableLangDetailConfig(this.logicState.data,this.logicState.lang_system),this.setState({stateData:t})}},this.saveLangDetail=()=>{let e=this.logicState.data,t=this.logicState.lang_system,i={};for(let s=0;s<t.length;s++)i[t[s].key]={};for(let s=0;s<e.length;s++)if(void 0!==e[s].lang&&void 0!==e[s].key){let t=e[s].lang,o=e[s].key.trim();for(let e in t)i[e][o]=t[e].trim()}let o=[];for(let s in i)o[o.length]={key:s,content:i[s]};l.ZP.quickPost([{txcode:"#sys:bo-save-langDetail",input:{lang_detail:o}}],{});let{stateData:a}=this.state;a.table_lang_detail_data.data=this.getDataTableLangDetailConfig(this.logicState.data,this.logicState.lang_system,!0),this.setState({stateData:a})},this.getInfoA=()=>this.logicState.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.key_form="langManagerGlobal",this.DESIGNFORM_CODE_DATABASE="designForm",this.lang_system_=s.ZP.getConfigUserDefault("list_lang_config"),this.LangManagerGlobalForm=(0,_.Iq)("langManagerGlobal"),this.allListForms=[],this.allListApp=[];let t=this.props.list_lang_data,i=[];for(let a in t){let e=t[a];for(let t in e){let o=e[t],s=this.checkHasKey(i,t);if(-1!==s){let e=i[s];e.lang[a]=o,i[s]=e}else{let e={key:t,lang:{}};e.lang[a]=o,i[i.length]=e}}}i.sort((function(e,t){return e.key===t.key?0:e.key>t.key?1:-1}));let o=this.changeKeyLanguage("start");this.mappingIndexToKeyLanguage={0:"key",1:"view",2:"img"},this.lang=t,this.languages_=o,this.lang_arr=i,this.logicState={data:i,lang_system:this.lang_system_,infoA:{lang_form:{vi:s.ZP.getLang("langApplication_title"),en:s.ZP.getLang("langApplication_title")},title:"Global language management",des:"Qu\u1ea3n l\xfd t\u1ea5t c\u1ea3 ng\xf4n ng\u1eef thu\u1ed9c \u1ee9ng d\u1ee5ng, ng\xf4n ng\u1eef \u0111\xe3 t\u1ea1o kh\xf4ng \u0111\u01b0\u1ee3c x\xf3a!",openOne:"true",form_code:this.key_form,ofModal:!1},check_screen_width:void 0,languages:o},this.state={isReload:!1,visibility:"",stateData:{}}}getDataTableLangConfig(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((t=>({all_column:[{data:t.key,isUpdate:e,dataItem:{},abs_Change:this.table_input_change},{data:t.view,isUpdate:e,dataItem:{},abs_Change:this.table_input_change},{data:t.img||"",isUpdate:e,dataItem:{},abs_Change:this.table_input_change}]})))}getDataTableLangDetailConfig(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(((i,o)=>this.getEachRowDataLangDetailConfig(i,o,e,t)))}getEachRowDataLangDetailConfig(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,a=[{data:t+1,config:{mode:"center"}},{data:e.key,isUpdate:o,dataItem:{},abs_Change:this.table_input_change_detail}];return i.forEach((t=>{a.push({data:void 0!==e.lang[t.key]?e.lang[t.key]:"",isUpdate:o,dataItem:{},abs_Change:this.table_input_change_detail})})),{all_column:a}}getHeaderTableLangDetailConfig(){let e=[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"Key",config:{width:"",isFrozen:!1}}];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>{e.push({title:t.view,config:{width:"",isFrozen:!1}})})),e}updateLanguageSystem(e,t,i){this.logicState.lang_system[e][t]=i}changeLanguageTemplate(e){let{stateData:t}=this.state;t.form.config.default.title=e.title_,t.form.config.default.title_sub=e.des_,t.layout.dataFull.config.title=e.title_detail,t.save_lang.dataFull.config.default.title=e.btn_save,t.add_lang.dataFull.config.default.title=e.btn_add,t.save_detail.dataFull.config.default.title=e.btn_save_detail,t.add_detail.dataFull.config.default.title=e.btn_add_detail,t.table_lang_header.Header.data[0].title=`${e.lang_code} ${e.lowercase}`,t.table_lang_header.Header.data[1].title=e.lang_name,t.table_lang_header.Header.data[2].title=e.lang_img,this.setState({stateData:t})}checkHasKey(e,t){for(let i=0;i<e.length;i++)if(void 0!==e[i].key&&e[i].key===t)return i;return-1}render(){if("none"===this.state.visibility)return null;const e=this.LangManagerGlobalForm;return(0,c.jsx)(e,{stateData:this.state.stateData})}componentDidMount(){let{stateData:e}=this.state;s.ZP.addAppAuto(this.key_form,this,this.logicState.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.allListForms=this.props.list_forms.map((e=>e[this.DESIGNFORM_CODE_DATABASE])),this.allListApp=this.props.list_app,e=this.loadDataToState(),this.setState({stateData:e})}}const Pt=Mt;let Tt={designform:"Design Form",dev:"Developer",o9:"Optimize 9",sys:"System"};class It extends o.Component{constructor(e){super(e),this.loadDataToState=()=>{let e=this.createListApp(this.allListApp),t=this.createListLangOfApp(this.lang_system_),i=[],o={};return this.allListApp.forEach((e=>{i.push({id:e.app,title:Tt[e.app]});const t={title:e.app,btn_save:{dataFull:{config:{default:{title:"Save",type:"primary",class:"",icon:""}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.test3}},table_list_forms:{title:"LIST FORMS",table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table:{dataFull:{Header:{data:[{title:"Form structure",config:{width:"",isFrozen:!1}},{title:"English",config:{width:"",isFrozen:!1}},{title:"Ti\u1ebfng vi\u1ec7t",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:[{data:[{data:"Form"},{data:" Admin User Profile "},{data:" Qu\u1ea3n tr\u1ecb ng\u01b0\u1eddi d\xf9ng"}],config:{value:!1}},{data:[{data:"-- Layout"},{data:"Profile  "},{data:"H\u1ed3 s\u01a1"}],config:{value:!1}},{data:[{data:"---- View"},{data:"Button"},{data:"N\xfat b\u1ea5m"}],config:{value:!1}},{data:[{data:"------- Component"},{data:"Text input"},{data:"\xd4 nh\u1eadp li\u1ec7u"}],config:{value:!1}}]},table_list_lang:{title:"LIST LANG",table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table:{Header:{data:this.getHeaderTableLangDetailConfig(this.lang_system_),config:{mode:{hasSearch:!1}}}},table_data:{data:this.getDataTableLangDetailConfig(this.lang_arr,this.lang_system_)}}};o[e.app]=t})),{form:{dataFull:{config:{default:{title:"Lang Manager Global"}},cmd:{visibility:""}}},form_add:{code:{dataFull:{config:{default:{title:"Code lang",class:"col-md-4 ",required:!0,placeholder:"Code lang",code_form_component:"code"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},name:{dataFull:{config:{default:{title:"Name lang",class:"col-md-4 ",required:!1,placeholder:"Name lang",code_form_component:"name"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},image:{dataFull:{config:{default:{title:"Image",class:"col-md-4 ",required:!1,placeholder:"Image",code_form_component:"image"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},of_app:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No Result",title:"Of App",class:"col-md-4",required:!1,code_form_component:"of_app"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:e,search_value:"",abs_Change:this.onChangeValueSelect_formAdd,abs_search:this.search}},lang_copy:{dataFull:{config:{default:{search:{placeholder:"Lang copy"},data_status:"No Result",title:"Lang copy",class:"col-md-4",required:!1,code_form_component:"lang_copy"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:t,search_value:"",abs_Change:this.onChangeValueSelect_formAdd,abs_search:this.search}},btn_add:{dataFull:{config:{default:{title:"Add",type:"primary",class:"",icon:"",code_form_component:"btn_add"}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.test3}}},tab:{data:i,abs_select:this.test},list_app:o}},this.abs_change=(e,t,i)=>{let o,a=this.state.data_select,s=this.state.input_value;for(let r=0;r<a.length;r++)void 0===a[r].selected&&(a[r].selected=!1),a[r].value===e&&(a[r].selected=!a[r].selected,a[r].selected&&(o=a[r]));for(let r=0;r<s.length;r++){var n;(null===(n=s[r])||void 0===n?void 0:n.value)===e&&s.splice(r,1)}s.push(o),this.setState({input_value:s,data_select:a})},this.click=e=>{},this.table_input_change_detail=(e,t,i,o)=>{let a=this.state.stateData;a.table_search_rows[i][o].data=e.target.value,this.setState({stateData:a})},this.table_select_change_detail=(e,t,i,o,a,s)=>{let{stateData:n}=this.state,r=n.table_search_rows[i][o].data.filter((e=>!0===e.selected));r.length>0&&(r[0].selected=!1);let l=n.table_search_rows[i][o].data.filter(((e,t)=>t===s));l.length>0&&(l[0].selected=!0,n.table_search_rows[i][o].value=l[0].title,this.setState({stateData:n}))},this.abs_calendar_changeMonth=e=>{},this.abs_calendar_submit=e=>{},this.abs_calendar_chooseYear=e=>{},this.abs_calendar_changeYear=e=>{},this.abs_calendar_chooseMonth=e=>{},this.abs_calendar_openCalendar=()=>{},this.abs_calendar_changeDay=e=>{},this.abs_calendar_reset=()=>{},this.onChangeValueSelect_formAdd=(e,t,i)=>{let{stateData:o}=this.state;if(i){for(const t of o.form_add[i].dataFull.data)t.selected=t.value===e;this.setState({stateData:o})}},this.getInfoA=()=>this.logicState.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.key_form="activity",this.DESIGNFORM_CODE_DATABASE="designForm",this.ActivityForm=(0,_.Iq)("activity"),this.logicState={infoA:{lang_form:{vi:s.ZP.getLang("langApplication_title"),en:s.ZP.getLang("langApplication_title")},title:"User activity",des:"",openOne:"true",form_code:this.key_form,ofModal:!1},check_screen_width:void 0},this.state={isReload:!1,visibility:"",stateData:{title:{date_from_to:"to"},form:{dataFull:{config:{default:{title:"User Activity Monitoring"}},cmd:{visibility:""}}},app_code:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No Result",title:"App code",class:"col-md-4",required:!0},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},data:[{title:"New",value:"123"},{title:"New acc",value:"1234"},{title:"New aa",value:"12345"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New aaaa",value:"122",selected:!0}],search_value:"",abs_Change:this.abs_change,abs_search:this.search,input_value:[{title:"New aaaa",value:"new_Aa"}]}},user_select:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No Result",title:"User",class:"col-md-4",required:!1},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},data:[{title:"New",value:"123"},{title:"New acc",value:"1234"},{title:"New aa",value:"12345"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New aaaa",value:"122",selected:!0}],search_value:"",abs_Change:this.abs_change,abs_search:this.search,input_value:[{title:"New aaaa",value:"new_Aa"}]}},date_form:{dataFull:{config:{default:{subTitle_isShow:!0,subTitle:"(dd/mm/yyyy)",title:"Date,time",class:"col-sm-3 ",required:!0},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{textAlign:"right"}},value:"20/11/2020",timepicker:{hour:"00",time:"00",title:"(24 hours)"},calendar_data:{value_current:"123",today:{title:"Today"},config:{days_title:[{title:"SUN",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"SAT",type:"gray"}]},list_months:[{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September",selected:!0},{title:"September"},{title:"September"}],list_years:{value:2020,data:[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025]},list_days:[{title:"30",type:"gray"},{title:"31",type:"gray"},{title:"1"},{title:"2"},{title:"3"},{title:"4"},{title:"5"},{title:"6"},{title:"7",type:"primary"},{title:"8"},{title:"9"},{title:"10"},{title:"11"},{title:"12"},{title:"13",isDisable:!0},{title:"14"},{title:"15"},{title:"16",isDisable:!0},{title:"17",isDisable:!0},{title:"18",isDisable:!0},{title:"19"},{title:"20",isDisable:!0},{title:"21"},{title:"22"},{title:"23"},{title:"24"},{title:"25"},{title:"26"},{title:"27"},{title:"28"},{title:"29"},{title:"30"},{title:"1",type:"gray"},{title:"2",type:"gray"},{title:"3",type:"gray"}]},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_changeDay:this.abs_calendar_changeDay,abs_calendar_reset:this.abs_calendar_reset,abs_calendar_today:this.abs_calendar_today}},date_to:{dataFull:{config:{default:{subTitle_isShow:!0,subTitle:"(dd/mm/yyyy)",title:"date, time",class:"col-sm-3 ",required:!0},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{textAlign:"right"}},timepicker:{hour:"00",time:"00",title:"(24 hours)"},value:"20/11/2020",calendar_data:{value_current:"123",today:{title:"Today"},config:{days_title:[{title:"SUN",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"SAT",type:"gray"}]},list_months:[{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September",selected:!0},{title:"September"},{title:"September"}],list_years:{value:2020,data:[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025]},list_days:[{title:"30",type:"gray"},{title:"31",type:"gray"},{title:"1"},{title:"2"},{title:"3"},{title:"4"},{title:"5"},{title:"6"},{title:"7",type:"primary"},{title:"8"},{title:"9"},{title:"10"},{title:"11"},{title:"12"},{title:"13",isDisable:!0},{title:"14"},{title:"15"},{title:"16",isDisable:!0},{title:"17",isDisable:!0},{title:"18",isDisable:!0},{title:"19"},{title:"20",isDisable:!0},{title:"21"},{title:"22"},{title:"23"},{title:"24"},{title:"25"},{title:"26"},{title:"27"},{title:"28"},{title:"29"},{title:"30"},{title:"1",type:"gray"},{title:"2",type:"gray"},{title:"3",type:"gray"}]},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_changeDay:this.abs_calendar_changeDay,abs_calendar_reset:this.abs_calendar_reset,abs_calendar_today:this.abs_calendar_today}},btn_search:{dataFull:{config:{default:{title:"Search",type:"primary",icon:"search"}},abs_Click:this.abs_Click}},btn_export:{dataFull:{config:{default:{title:"Export",type:"primary",icon:"open_in_new"}},abs_Click:this.abs_Click}},table_activity:{header:this.getConfigTableSearch(),data:this.getConfigTableSearchRows(),config_row:this.getConfigTableSearchRowsCofig()}}}}getConfigTableSearch(){return{dataFull:{Header:{data:[{title:"Date Time",id:"dt",sort_active:"up",config:{width:""}},{title:"User Code",id:"uc",sort_active:"",config:{width:"",isFrozen:!1}},{title:"Activity",id:"act",sort_active:"",config:{width:"",isFrozen:!1}},{title:"ActionGroup",sort_active:"",id:"ag",config:{width:"",isFrozen:!1}},{title:"Section",sort_active:"",id:"st",config:{width:"",isFrozen:!1}},{title:"App info",sort_active:"",id:"ai",config:{width:"300px",isFrozen:!1}}],config:{mode:{hasSearch:!0,isSort:!0,isFrozenHeader:!0}}},uPagination:{abs_PagingActive:this.pagingActive,abs_setRecordActive:this.abs_setRecordActive,result_total:10,paging_index:1,paging_record:[{number:5,selected:!0},{number:10}]},abs_search:this.search_table,abs_SortUp:this.sort_up,abs_SortDown:this.sort_down}}}getConfigTableSearchRows(){return[[{data:"20-10-2020 09:50:03"},{data:{header:{dataFull:{Header:{data:[{title:"Code",config:{width:""}},{title:"Full Name",config:{width:"",isFrozen:!1}}],config:{}}}},data:[{data:"ac01"},{data:"Le Minh Thanh"}],config_row:[{type:"uTableColumnDefault"},{type:"uTableColumnDefault"}]}},{data:"Login"},{data:"Login/Logout"},{data:{header:{dataFull:{Header:{data:[{title:"Token",config:{width:""}},{title:"IP",config:{width:"",isFrozen:!1}},{title:"WS",config:{width:"",isFrozen:!1}}],config:{}}}},data:[{data:"7b593f7a-bd59-47f3-a263-cf4cd232883c"},{data:"192.168.12.30"},{data:"Chrome- 86.0.4240.193"}],config_row:[{type:"uTableColumnDefault"},{type:"uTableColumnDefault"},{type:"uTableColumnDefault"}]}},{data:{header:{dataFull:{Header:{data:[{title:"App code",config:{width:""}},{title:"API",config:{width:"",isFrozen:!1}},{title:"Request",config:{width:"",isFrozen:!1}},{title:"Response",config:{width:"",isFrozen:!1}}],config:{}}}},data:[{data:"CMS2.0"},{data:"192.168.12.30:8080/api/o9/ctm-create/"},{data:{title:"Copy",icon:"copy",dataItem:{abs:"123"},abs_Click:this.click}},{data:{title:"Copy",icon:"copy",dataItem:{abs:"123"},abs_Click:this.click}}],config_row:[{type:"uTableColumnDefault"},{type:"uTableColumnDefault"},{type:"uTableColumnLink"},{type:"uTableColumnLink"}]}}]]}getConfigTableSearchRowsCofig(){return[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnTable"},{type:"uTableColumnDefault"},{type:"uTableColumnDefault"},{type:"uTableColumnTable"},{type:"uTableColumnTable"}]}render(){if("none"===this.state.visibility)return null;const e=this.ActivityForm;return(0,c.jsx)(e,{stateData:this.state.stateData})}componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.logicState.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key)}}const Nt=It;class Ft extends o.Component{constructor(e){super(e),this.key_form="test_123987654",this.stateHidden={infoA:{lang_form:{vi:s.ZP.getLang("test_123987654_title"),en:s.ZP.getLang("test_123987654_title")},title:s.ZP.getLang("test_123987654_title"),des:"Form test!",openOne:"true",ofModal:!1},visibility:!1,user_info:{}},this.state={}}componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.stateHidden.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key)}render(){const e=(0,_.Iq)("jwebui_404");return console.log("loadTest_123987654===list_form_ne====",this.props.list_form_ne),console.log("loadTest_123987654===list_app_ne====",this.props.list_app_ne),(0,c.jsx)("div",{children:(0,c.jsx)(e,{stateData:{form:{cmd:{visible:!0},title:"The webpage you are looking for is not here!"},btn_home:{dataFull:{config:{default:{title:"GO TO HOMEPAGE hehe",type:"",class:""}},abs_Click:this.abs_Click}}}})})}}const Lt=Ft;function Et(){return Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Et.apply(this,arguments)}class jt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let o=[];return this.decompose(0,e,o,2),i.length&&i.decompose(0,i.length,o,3),this.decompose(t,this.length,o,1),Rt.from(o,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,i=[];return this.decompose(e,t,i,0),Rt.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),o=new Ut(this),a=new Ut(e);for(let s=t,n=t;;){if(o.next(s),a.next(s),s=0,o.lineBreak!=a.lineBreak||o.done!=a.done||o.value!=a.value)return!1;if(n+=o.value.length,o.done||n>=i)return!0}}iter(){return new Ut(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)}iterRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return new Bt(this,e,t)}iterLines(e,t){let i;if(null==e)i=this.iter();else{null==t&&(t=this.lines+1);let o=this.line(e).from;i=this.iterRange(o,Math.max(o,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Yt(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new Zt(e):Rt.from(Zt.split(e,[])):jt.empty}}class Zt extends jt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){let t=-1;for(let i of e)t+=i.length+1;return t}(e);super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,o){for(let a=0;;a++){let s=this.text[a],n=o+s.length;if((t?i:n)>=e)return new Ht(o,n,i,s);o=n+1,i++}}decompose(e,t,i,o){let a=e<=0&&t>=this.length?this:new Zt(zt(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&o){let e=i.pop(),t=Qt(a.text,e.text.slice(),0,a.length);if(t.length<=32)i.push(new Zt(t,e.length+a.length));else{let e=t.length>>1;i.push(new Zt(t.slice(0,e)),new Zt(t.slice(e)))}}else i.push(a)}replace(e,t,i){if(!(i instanceof Zt))return super.replace(e,t,i);let o=Qt(this.text,Qt(i.text,zt(this.text,0,e)),t),a=this.length+i.length-(t-e);return o.length<=32?new Zt(o,a):Rt.from(Zt.split(o,[]),a)}sliceString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",o="";for(let a=0,s=0;a<=t&&s<this.text.length;s++){let n=this.text[s],r=a+n.length;a>e&&s&&(o+=i),e<r&&t>a&&(o+=n.slice(Math.max(0,e-a),t-a)),a=r+1}return o}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],o=-1;for(let a of e)i.push(a),o+=a.length+1,32==i.length&&(t.push(new Zt(i,o)),i=[],o=-1);return o>-1&&t.push(new Zt(i,o)),t}}class Rt extends jt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,o){for(let a=0;;a++){let s=this.children[a],n=o+s.length,r=i+s.lines-1;if((t?r:n)>=e)return s.lineInner(e,t,i,o);o=n+1,i=r+1}}decompose(e,t,i,o){for(let a=0,s=0;s<=t&&a<this.children.length;a++){let n=this.children[a],r=s+n.length;if(e<=r&&t>=s){let a=o&((s<=e?1:0)|(r>=t?2:0));s>=e&&r<=t&&!a?i.push(n):n.decompose(e-s,t-s,i,a)}s=r+1}}replace(e,t,i){if(i.lines<this.lines)for(let o=0,a=0;o<this.children.length;o++){let s=this.children[o],n=a+s.length;if(e>=a&&t<=n){let r=s.replace(e-a,t-a,i),l=this.lines-s.lines+r.lines;if(r.lines<l>>4&&r.lines>l>>6){let a=this.children.slice();return a[o]=r,new Rt(a,this.length-(t-e)+i.length)}return super.replace(a,n,r)}a=n+1}return super.replace(e,t,i)}sliceString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",o="";for(let a=0,s=0;a<this.children.length&&s<=t;a++){let n=this.children[a],r=s+n.length;s>e&&a&&(o+=i),e<r&&t>s&&(o+=n.sliceString(e-s,t-s,i)),s=r+1}return o}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Rt))return 0;let i=0,[o,a,s,n]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;o+=t,a+=t){if(o==s||a==n)return i;let r=this.children[o],l=e.children[a];if(r!=l)return i+r.scanIdentical(l,t);i+=r.length+1}}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.reduce(((e,t)=>e+t.length+1),-1),i=0;for(let u of e)i+=u.lines;if(i<32){let i=[];for(let t of e)t.flatten(i);return new Zt(i,t)}let o=Math.max(32,i>>5),a=o<<1,s=o>>1,n=[],r=0,l=-1,c=[];function d(e){let t;if(e.lines>a&&e instanceof Rt)for(let i of e.children)d(i);else e.lines>s&&(r>s||!r)?(h(),n.push(e)):e instanceof Zt&&r&&(t=c[c.length-1])instanceof Zt&&e.lines+t.lines<=32?(r+=e.lines,l+=e.length+1,c[c.length-1]=new Zt(t.text.concat(e.text),t.length+1+e.length)):(r+e.lines>o&&h(),r+=e.lines,l+=e.length+1,c.push(e))}function h(){0!=r&&(n.push(1==c.length?c[0]:Rt.from(c,l)),l=-1,r=c.length=0)}for(let u of e)d(u);return h(),1==n.length?n[0]:new Rt(n,t)}}function Qt(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e9;for(let a=0,s=0,n=!0;s<e.length&&a<=o;s++){let r=e[s],l=a+r.length;l>=i&&(l>o&&(r=r.slice(0,o-a)),a<i&&(r=r.slice(i-a)),n?(t[t.length-1]+=r,n=!1):t.push(r)),a=l+1}return t}function zt(e,t,i){return Qt(e,[""],t,i)}jt.empty=new Zt([""],0);class Ut{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Zt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,o=this.nodes[i],a=this.offsets[i],s=a>>1,n=o instanceof Zt?o.text.length:o.children.length;if(s==(t>0?n:0)){if(0==i)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&a)==(t>0?0:1)){if(this.offsets[i]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(o instanceof Zt){let a=o.text[s+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=0==e?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=o.children[s+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Zt?a.text.length:a.children.length)<<1))}}}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Bt{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Ut(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:o}=this.cursor.next(e);return this.pos+=(o.length+e)*t,this.value=o.length<=i?o:t<0?o.slice(o.length-i):o.slice(0,i),this.done=!this.value,this}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class Yt{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,{done:t,lineBreak:i,value:o}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(jt.prototype[Symbol.iterator]=function(){return this.iter()},Ut.prototype[Symbol.iterator]=Bt.prototype[Symbol.iterator]=Yt.prototype[Symbol.iterator]=function(){return this});class Ht{constructor(e,t,i,o){this.from=e,this.to=t,this.number=i,this.text=o}get length(){return this.to-this.from}}let Vt="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let bv=1;bv<Vt.length;bv++)Vt[bv]+=Vt[bv-1];function Wt(e){for(let t=1;t<Vt.length;t+=2)if(Vt[t]>e)return Vt[t-1]<=e;return!1}function Gt(e){return e>=127462&&e<=127487}const Jt=8205;function qt(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?Kt:Xt)(e,t,!(arguments.length>3&&void 0!==arguments[3])||arguments[3])}function Kt(e,t,i){if(t==e.length)return t;t&&$t(e.charCodeAt(t))&&ei(e.charCodeAt(t-1))&&t--;let o=ti(e,t);for(t+=oi(o);t<e.length;){let a=ti(e,t);if(o==Jt||a==Jt||i&&Wt(a))t+=oi(a),o=a;else{if(!Gt(a))break;{let i=0,o=t-2;for(;o>=0&&Gt(ti(e,o));)i++,o-=2;if(i%2==0)break;t+=2}}}return t}function Xt(e,t,i){for(;t>0;){let o=Kt(e,t-2,i);if(o<t)return o;t--}return 0}function $t(e){return e>=56320&&e<57344}function ei(e){return e>=55296&&e<56320}function ti(e,t){let i=e.charCodeAt(t);if(!ei(i)||t+1==e.length)return i;let o=e.charCodeAt(t+1);return $t(o)?o-56320+(i-55296<<10)+65536:i}function ii(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function oi(e){return e<65536?1:2}const ai=/\r\n?|\n/;var si=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(si||(si={}));class ni{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,o=0;t<this.sections.length;){let a=this.sections[t++],s=this.sections[t++];s<0?(e(i,o,a),o+=a):o+=s,i+=a}}iterChangedRanges(e){di(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?e.push(i,o):e.push(o,i)}return new ni(e)}composeDesc(e){return this.empty?e:e.empty?this:ui(this,e)}mapDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:hi(this,e,t)}mapPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:si.Simple,o=0,a=0;for(let s=0;s<this.sections.length;){let n=this.sections[s++],r=this.sections[s++],l=o+n;if(r<0){if(l>e)return a+(e-o);a+=n}else{if(i!=si.Simple&&l>=e&&(i==si.TrackDel&&o<e&&l>e||i==si.TrackBefore&&o<e||i==si.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!n)return e==o||t<0?a:a+r;a+=r}o=l}if(e>o)throw new RangeError(`Position ${e} is out of range for changeset of length ${o}`);return a}touchesRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;for(let i=0,o=0;i<this.sections.length&&o<=t;){let a=o+this.sections[i++];if(this.sections[i++]>=0&&o<=t&&a>=e)return!(o<e&&a>t)||"cover";o=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];e+=(e?" ":"")+i+(o>=0?":"+o:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ni(e)}static create(e){return new ni(e)}}class ri extends ni{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return di(this,((t,i,o,a,s)=>e=e.replace(o,o+(i-t),s)),!1),e}mapDesc(e){return hi(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],!0)}invert(e){let t=this.sections.slice(),i=[];for(let o=0,a=0;o<t.length;o+=2){let s=t[o],n=t[o+1];if(n>=0){t[o]=n,t[o+1]=s;let r=o>>1;for(;i.length<r;)i.push(jt.empty);i.push(s?e.slice(a,a+s):jt.empty)}a+=s}return new ri(t,i)}compose(e){return this.empty?e:e.empty?this:ui(this,e,!0)}map(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:hi(this,e,t,!0)}iterChanges(e){di(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}get desc(){return ni.create(this.sections)}filter(e){let t=[],i=[],o=[],a=new pi(this);e:for(let s=0,n=0;;){let r=s==e.length?1e9:e[s++];for(;n<r||n==r&&0==a.len;){if(a.done)break e;let e=Math.min(a.len,r-n);li(o,e,-1);let s=-1==a.ins?-1:0==a.off?a.ins:0;li(t,e,s),s>0&&ci(i,t,a.text),a.forward(e),n+=e}let l=e[s++];for(;n<l;){if(a.done)break e;let e=Math.min(a.len,l-n);li(t,e,-1),li(o,e,-1==a.ins?-1:0==a.off?a.ins:0),a.forward(e),n+=e}}return{changes:new ri(t,i),filtered:ni.create(o)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],o=this.sections[t+1];o<0?e.push(i):0==o?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let o=[],a=[],s=0,n=null;function r(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&!o.length)return;s<t&&li(o,t-s,-1);let e=new ri(o,a);n=n?n.compose(e.map(n)):e,o=[],a=[],s=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof ri){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);r(),n=n?n.compose(l.map(n)):l}else{let{from:e,to:n=e,insert:c}=l;if(e>n||e<0||n>t)throw new RangeError(`Invalid change range ${e} to ${n} (in doc of length ${t})`);let d=c?"string"==typeof c?jt.of(c.split(i||ai)):c:jt.empty,h=d.length;if(e==n&&0==h)return;e<s&&r(),e>s&&li(o,e-s,-1),li(o,n-e,h),ci(a,o,d),s=n}}(e),r(!n),n}static empty(e){return new ri(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let o=0;o<e.length;o++){let a=e[o];if("number"==typeof a)t.push(a,-1);else{if(!Array.isArray(a)||"number"!=typeof a[0]||a.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==a.length)t.push(a[0],0);else{for(;i.length<o;)i.push(jt.empty);i[o]=jt.of(a.slice(1)),t.push(a[0],i[o].length)}}}return new ri(t,i)}static createSet(e,t){return new ri(e,t)}}function li(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0==t&&i<=0)return;let a=e.length-2;a>=0&&i<=0&&i==e[a+1]?e[a]+=t:0==t&&0==e[a]?e[a+1]+=i:o?(e[a]+=t,e[a+1]+=i):e.push(t,i)}function ci(e,t,i){if(0==i.length)return;let o=t.length-2>>1;if(o<e.length)e[e.length-1]=e[e.length-1].append(i);else{for(;e.length<o;)e.push(jt.empty);e.push(i)}}function di(e,t,i){let o=e.inserted;for(let a=0,s=0,n=0;n<e.sections.length;){let r=e.sections[n++],l=e.sections[n++];if(l<0)a+=r,s+=r;else{let c=a,d=s,h=jt.empty;for(;c+=r,d+=l,l&&o&&(h=h.append(o[n-2>>1])),!(i||n==e.sections.length||e.sections[n+1]<0);)r=e.sections[n++],l=e.sections[n++];t(a,c,s,d,h),a=c,s=d}}}function hi(e,t,i){let o=[],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?[]:null,s=new pi(e),n=new pi(t);for(let r=-1;;)if(-1==s.ins&&-1==n.ins){let e=Math.min(s.len,n.len);li(o,e,-1),s.forward(e),n.forward(e)}else if(n.ins>=0&&(s.ins<0||r==s.i||0==s.off&&(n.len<s.len||n.len==s.len&&!i))){let e=n.len;for(li(o,n.ins,-1);e;){let t=Math.min(s.len,e);s.ins>=0&&r<s.i&&s.len<=t&&(li(o,0,s.ins),a&&ci(a,o,s.text),r=s.i),s.forward(t),e-=t}n.next()}else{if(!(s.ins>=0)){if(s.done&&n.done)return a?ri.createSet(o,a):ni.create(o);throw new Error("Mismatched change set lengths")}{let e=0,t=s.len;for(;t;)if(-1==n.ins){let i=Math.min(t,n.len);e+=i,t-=i,n.forward(i)}else{if(!(0==n.ins&&n.len<t))break;t-=n.len,n.next()}li(o,e,r<s.i?s.ins:0),a&&r<s.i&&ci(a,o,s.text),r=s.i,s.forward(s.len-t)}}}function ui(e,t){let i=[],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?[]:null,a=new pi(e),s=new pi(t);for(let n=!1;;){if(a.done&&s.done)return o?ri.createSet(i,o):ni.create(i);if(0==a.ins)li(i,a.len,0,n),a.next();else if(0!=s.len||s.done){if(a.done||s.done)throw new Error("Mismatched change set lengths");{let e=Math.min(a.len2,s.len),t=i.length;if(-1==a.ins){let t=-1==s.ins?-1:s.off?0:s.ins;li(i,e,t,n),o&&t&&ci(o,i,s.text)}else-1==s.ins?(li(i,a.off?0:a.len,e,n),o&&ci(o,i,a.textBit(e))):(li(i,a.off?0:a.len,s.off?0:s.ins,n),o&&!s.off&&ci(o,i,s.text));n=(a.ins>e||s.ins>=0&&s.len>e)&&(n||i.length>t),a.forward2(e),s.forward(e)}}else li(i,0,s.ins,n),o&&ci(o,i,s.text),s.next()}}class pi{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?jt.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?jt.empty:t[i].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class _i{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e){let t,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.empty?t=i=e.mapPos(this.from,o):(t=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),t==this.from&&i==this.to?this:new _i(t,i,this.flags)}extend(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e<=this.anchor&&t>=this.anchor)return fi.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return fi.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return fi.range(e.anchor,e.head)}static create(e,t,i){return new _i(e,t,i)}}class fi{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.empty?this:fi.create(this.ranges.map((i=>i.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new fi([this.main],0)}addRange(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return fi.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainIndex,i=this.ranges.slice();return i[t]=e,fi.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new fi(e.ranges.map((e=>_i.fromJSON(e))),e.main)}static single(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new fi([fi.range(e,t)],0)}static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==e.length)throw new RangeError("A selection needs at least one range");for(let i=0,o=0;o<e.length;o++){let a=e[o];if(a.empty?a.from<=i:a.from<i)return fi.normalized(e.slice(),t);i=a.to}return new fi(e,t)}static cursor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return _i.create(e,e,(0==t?0:t<0?4:8)|(null==i?3:Math.min(2,i))|(null!==o&&void 0!==o?o:33554431)<<5)}static range(e,t,i,o){let a=(null!==i&&void 0!==i?i:33554431)<<5|(null==o?3:Math.min(2,o));return t<e?_i.create(t,e,24|a):_i.create(e,t,(t>e?4:0)|a)}static normalized(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(i);for(let o=1;o<e.length;o++){let i=e[o],a=e[o-1];if(i.empty?i.from<=a.to:i.from<a.to){let s=a.from,n=Math.max(i.to,a.to);o<=t&&t--,e.splice(--o,2,i.anchor>i.head?fi.range(n,s):fi.range(s,n))}}return new fi(e,t)}}function gi(e,t){for(let i of e.ranges)if(i.to>t)throw new RangeError("Selection points outside of document")}let mi=0;class vi{constructor(e,t,i,o,a){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=o,this.id=mi++,this.default=e([]),this.extensions="function"==typeof a?a(this):a}static define(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new vi(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:bi),!!e.static,e.enables)}of(e){return new yi([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new yi(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new yi(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(i=>t(i.field(e))))}}function bi(e,t){return e==t||e.length==t.length&&e.every(((e,i)=>e===t[i]))}class yi{constructor(e,t,i,o){this.dependencies=e,this.facet=t,this.type=i,this.value=o,this.id=mi++}dynamicSlot(e){var t;let i=this.value,o=this.facet.compareInput,a=this.id,s=e[a]>>1,n=2==this.type,r=!1,l=!1,c=[];for(let d of this.dependencies)"doc"==d?r=!0:"selection"==d?l=!0:0==(1&(null!==(t=e[d.id])&&void 0!==t?t:1))&&c.push(e[d.id]);return{create:e=>(e.values[s]=i(e),1),update(e,t){if(r&&t.docChanged||l&&(t.docChanged||t.selection)||Di(e,c)){let t=i(e);if(n?!Ai(t,e.values[s],o):!o(t,e.values[s]))return e.values[s]=t,1}return 0},reconfigure:(e,t)=>{let r,l=t.config.address[a];if(null!=l){let a=ji(t,l);if(this.dependencies.every((i=>i instanceof vi?t.facet(i)===e.facet(i):!(i instanceof wi)||t.field(i,!1)==e.field(i,!1)))||(n?Ai(r=i(e),a,o):o(r=i(e),a)))return e.values[s]=a,0}else r=i(e);return e.values[s]=r,1}}}}function Ai(e,t,i){if(e.length!=t.length)return!1;for(let o=0;o<e.length;o++)if(!i(e[o],t[o]))return!1;return!0}function Di(e,t){let i=!1;for(let o of t)1&Ei(e,o)&&(i=!0);return i}function ki(e,t,i){let o=i.map((t=>e[t.id])),a=i.map((e=>e.type)),s=o.filter((e=>!(1&e))),n=e[t.id]>>1;function r(e){let i=[];for(let t=0;t<o.length;t++){let s=ji(e,o[t]);if(2==a[t])for(let e of s)i.push(e);else i.push(s)}return t.combine(i)}return{create(e){for(let t of o)Ei(e,t);return e.values[n]=r(e),1},update(e,i){if(!Di(e,s))return 0;let o=r(e);return t.compare(o,e.values[n])?0:(e.values[n]=o,1)},reconfigure(e,a){let s=Di(e,o),l=a.config.facets[t.id],c=a.facet(t);if(l&&!s&&bi(i,l))return e.values[n]=c,0;let d=r(e);return t.compare(d,c)?(e.values[n]=c,0):(e.values[n]=d,1)}}}const Oi=vi.define({static:!0});class wi{constructor(e,t,i,o,a){this.id=e,this.createF=t,this.updateF=i,this.compareF=o,this.spec=a,this.provides=void 0}static define(e){let t=new wi(mi++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Oi).find((e=>e.field==this));return((null===t||void 0===t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,i)=>{let o=e.values[t],a=this.updateF(o,i);return this.compareF(o,a)?0:(e.values[t]=a,1)},reconfigure:(e,i)=>null!=i.config.address[this.id]?(e.values[t]=i.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,Oi.of({field:this,create:e})]}get extension(){return this}}const Ci=4,xi=3,Si=2,Mi=1;function Pi(e){return t=>new Ii(t,e)}const Ti={highest:Pi(0),high:Pi(Mi),default:Pi(Si),low:Pi(xi),lowest:Pi(Ci)};class Ii{constructor(e,t){this.inner=e,this.prec=t}}class Ni{of(e){return new Fi(this,e)}reconfigure(e){return Ni.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Fi{constructor(e,t){this.compartment=e,this.inner=t}}class Li{constructor(e,t,i,o,a,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=o,this.staticValues=a,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let o=[],a=Object.create(null),s=new Map;for(let h of function(e,t,i){let o=[[],[],[],[],[]],a=new Map;function s(e,n){let r=a.get(e);if(null!=r){if(r<=n)return;let t=o[r].indexOf(e);t>-1&&o[r].splice(t,1),e instanceof Fi&&i.delete(e.compartment)}if(a.set(e,n),Array.isArray(e))for(let t of e)s(t,n);else if(e instanceof Fi){if(i.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let o=t.get(e.compartment)||e.inner;i.set(e.compartment,o),s(o,n)}else if(e instanceof Ii)s(e.inner,e.prec);else if(e instanceof wi)o[n].push(e),e.provides&&s(e.provides,n);else if(e instanceof yi)o[n].push(e),e.facet.extensions&&s(e.facet.extensions,Si);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(t,n)}}return s(e,Si),o.reduce(((e,t)=>e.concat(t)))}(e,t,s))h instanceof wi?o.push(h):(a[h.facet.id]||(a[h.facet.id]=[])).push(h);let n=Object.create(null),r=[],l=[];for(let h of o)n[h.id]=l.length<<1,l.push((e=>h.slot(e)));let c=null===i||void 0===i?void 0:i.config.facets;for(let h in a){let e=a[h],t=e[0].facet,o=c&&c[h]||[];if(e.every((e=>0==e.type)))if(n[t.id]=r.length<<1|1,bi(o,e))r.push(i.facet(t));else{let o=t.combine(e.map((e=>e.value)));r.push(i&&t.compare(o,i.facet(t))?i.facet(t):o)}else{for(let t of e)0==t.type?(n[t.id]=r.length<<1|1,r.push(t.value)):(n[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));n[t.id]=l.length<<1,l.push((i=>ki(i,t,e)))}}let d=l.map((e=>e(n)));return new Li(e,s,d,n,r,a)}}function Ei(e,t){if(1&t)return 2;let i=t>>1,o=e.status[i];if(4==o)throw new Error("Cyclic dependency between fields and/or facets");if(2&o)return o;e.status[i]=4;let a=e.computeSlot(e,e.config.dynamicSlots[i]);return e.status[i]=2|a}function ji(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const Zi=vi.define(),Ri=vi.define({combine:e=>e.some((e=>e)),static:!0}),Qi=vi.define({combine:e=>e.length?e[0]:void 0,static:!0}),zi=vi.define(),Ui=vi.define(),Bi=vi.define(),Yi=vi.define({combine:e=>!!e.length&&e[0]});class Hi{constructor(e,t){this.type=e,this.value=t}static define(){return new Vi}}class Vi{of(e){return new Hi(this,e)}}class Wi{constructor(e){this.map=e}of(e){return new Gi(this,e)}}class Gi{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new Gi(this.type,t)}is(e){return this.type==e}static define(){return new Wi((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let o of e){let e=o.map(t);e&&i.push(e)}return i}}Gi.reconfigure=Gi.define(),Gi.appendConfig=Gi.define();class Ji{constructor(e,t,i,o,a,s){this.startState=e,this.changes=t,this.selection=i,this.effects=o,this.annotations=a,this.scrollIntoView=s,this._doc=null,this._state=null,i&&gi(i,t.newLength),a.some((e=>e.type==Ji.time))||(this.annotations=a.concat(Ji.time.of(Date.now())))}static create(e,t,i,o,a,s){return new Ji(e,t,i,o,a,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ji.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function qi(e,t){let i=[];for(let o=0,a=0;;){let s,n;if(o<e.length&&(a==t.length||t[a]>=e[o]))s=e[o++],n=e[o++];else{if(!(a<t.length))return i;s=t[a++],n=t[a++]}!i.length||i[i.length-1]<s?i.push(s,n):i[i.length-1]<n&&(i[i.length-1]=n)}}function Ki(e,t,i){var o;let a,s,n;return i?(a=t.changes,s=ri.empty(t.changes.length),n=e.changes.compose(t.changes)):(a=t.changes.map(e.changes),s=e.changes.mapDesc(t.changes,!0),n=e.changes.compose(a)),{changes:n,selection:t.selection?t.selection.map(s):null===(o=e.selection)||void 0===o?void 0:o.map(a),effects:Gi.mapEffects(e.effects,a).concat(Gi.mapEffects(t.effects,s)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function Xi(e,t,i){let o=t.selection,a=to(t.annotations);return t.userEvent&&(a=a.concat(Ji.userEvent.of(t.userEvent))),{changes:t.changes instanceof ri?t.changes:ri.of(t.changes||[],i,e.facet(Qi)),selection:o&&(o instanceof fi?o:fi.single(o.anchor,o.head)),effects:to(t.effects),annotations:a,scrollIntoView:!!t.scrollIntoView}}function $i(e,t,i){let o=Xi(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(i=!1);for(let s=1;s<t.length;s++){!1===t[s].filter&&(i=!1);let a=!!t[s].sequential;o=Ki(o,Xi(e,t[s],a?o.changes.newLength:e.doc.length),a)}let a=Ji.create(e,o.changes,o.selection,o.effects,o.annotations,o.scrollIntoView);return function(e){let t=e.startState,i=t.facet(Bi),o=e;for(let a=i.length-1;a>=0;a--){let s=i[a](e);s&&Object.keys(s).length&&(o=Ki(o,Xi(t,s,e.changes.newLength),!0))}return o==e?e:Ji.create(t,e.changes,e.selection,o.effects,o.annotations,o.scrollIntoView)}(i?function(e){let t=e.startState,i=!0;for(let a of t.facet(zi)){let t=a(e);if(!1===t){i=!1;break}Array.isArray(t)&&(i=!0===i?t:qi(i,t))}if(!0!==i){let o,a;if(!1===i)a=e.changes.invertedDesc,o=ri.empty(t.doc.length);else{let t=e.changes.filter(i);o=t.changes,a=t.filtered.mapDesc(t.changes).invertedDesc}e=Ji.create(t,o,e.selection&&e.selection.map(a),Gi.mapEffects(e.effects,a),e.annotations,e.scrollIntoView)}let o=t.facet(Ui);for(let a=o.length-1;a>=0;a--){let i=o[a](e);e=i instanceof Ji?i:Array.isArray(i)&&1==i.length&&i[0]instanceof Ji?i[0]:$i(t,to(i),!1)}return e}(a):a)}Ji.time=Hi.define(),Ji.userEvent=Hi.define(),Ji.addToHistory=Hi.define(),Ji.remote=Hi.define();const eo=[];function to(e){return null==e?eo:Array.isArray(e)?e:[e]}var io=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(io||(io={}));const oo=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ao;try{ao=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(vv){}function so(e){return t=>{if(!/\S/.test(t))return io.Space;if(function(e){if(ao)return ao.test(e);for(let t=0;t<e.length;t++){let i=e[t];if(/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||oo.test(i)))return!0}return!1}(t))return io.Word;for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return io.Word;return io.Other}}class no{constructor(e,t,i,o,a,s){this.config=e,this.doc=t,this.selection=i,this.values=o,this.status=e.statusTemplate.slice(),this.computeSlot=a,s&&(s._state=this);for(let n=0;n<this.config.dynamicSlots.length;n++)Ei(this,n<<1);this.computeSlot=null}field(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.config.address[e.id];if(null!=i)return Ei(this,i),ji(this,i);if(t)throw new RangeError("Field is not present in this state")}update(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return $i(this,t,!0)}applyTransaction(e){let t,i=this.config,{base:o,compartments:a}=i;for(let s of e.effects)s.is(Ni.reconfigure)?(i&&(a=new Map,i.compartments.forEach(((e,t)=>a.set(t,e))),i=null),a.set(s.value.compartment,s.value.extension)):s.is(Gi.reconfigure)?(i=null,o=s.value):s.is(Gi.appendConfig)&&(i=null,o=to(o).concat(s.value));if(i)t=e.startState.values.slice();else{i=Li.resolve(o,a,this),t=new no(i,this.doc,this.selection,i.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values}new no(i,e.newDoc,e.newSelection,t,((t,i)=>i.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:fi.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),o=this.changes(i.changes),a=[i.range],s=to(i.effects);for(let n=1;n<t.ranges.length;n++){let i=e(t.ranges[n]),r=this.changes(i.changes),l=r.map(o);for(let e=0;e<n;e++)a[e]=a[e].map(l);let c=o.mapDesc(r,!0);a.push(i.range.map(c)),o=o.compose(l),s=Gi.mapEffects(s,l).concat(Gi.mapEffects(to(i.effects),c))}return{changes:o,selection:fi.create(a,t.mainIndex),effects:s}}changes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e instanceof ri?e:ri.of(e,this.doc.length,this.facet(no.lineSeparator))}toText(e){return jt.of(e.split(this.facet(no.lineSeparator)||ai))}sliceDoc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.doc.length;return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(Ei(this,t),ji(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let o=e[i];o instanceof wi&&null!=this.config.address[o.id]&&(t[i]=o.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(i)for(let a in i)if(Object.prototype.hasOwnProperty.call(e,a)){let t=i[a],s=e[a];o.push(t.init((e=>t.spec.fromJSON(s,e))))}return no.create({doc:e.doc,selection:fi.fromJSON(e.selection),extensions:t.extensions?o.concat([t.extensions]):o})}static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Li.resolve(e.extensions||[],new Map),i=e.doc instanceof jt?e.doc:jt.of((e.doc||"").split(t.staticFacet(no.lineSeparator)||ai)),o=e.selection?e.selection instanceof fi?e.selection:fi.single(e.selection.anchor,e.selection.head):fi.single(0);return gi(o,i.length),t.staticFacet(Ri)||(o=o.asSingle()),new no(t,i,o,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(no.tabSize)}get lineBreak(){return this.facet(no.lineSeparator)||"\n"}get readOnly(){return this.facet(Yi)}phrase(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];for(let a of this.facet(no.phrases))if(Object.prototype.hasOwnProperty.call(a,e)){e=a[e];break}return i.length&&(e=e.replace(/\$(\$|\d*)/g,((e,t)=>{if("$"==t)return"$";let o=+(t||1);return!o||o>i.length?e:i[o-1]}))),e}languageDataAt(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=[];for(let a of this.facet(Zi))for(let s of a(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&o.push(s[e]);return o}charCategorizer(e){return so(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:o}=this.doc.lineAt(e),a=this.charCategorizer(e),s=e-i,n=e-i;for(;s>0;){let e=qt(t,s,!1);if(a(t.slice(e,s))!=io.Word)break;s=e}for(;n<o;){let e=qt(t,n);if(a(t.slice(n,e))!=io.Word)break;n=e}return s==n?null:fi.range(s+i,n+i)}}function ro(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={};for(let a of e)for(let e of Object.keys(a)){let t=a[e],s=o[e];if(void 0===s)o[e]=t;else if(s===t||void 0===t);else{if(!Object.hasOwnProperty.call(i,e))throw new Error("Config merge conflict for field "+e);o[e]=i[e](s,t)}}for(let a in t)void 0===o[a]&&(o[a]=t[a]);return o}no.allowMultipleSelections=Ri,no.tabSize=vi.define({combine:e=>e.length?e[0]:4}),no.lineSeparator=Qi,no.readOnly=Yi,no.phrases=vi.define({compare(e,t){let i=Object.keys(e),o=Object.keys(t);return i.length==o.length&&i.every((i=>e[i]==t[i]))}}),no.languageData=Zi,no.changeFilter=zi,no.transactionFilter=Ui,no.transactionExtender=Bi,Ni.reconfigure=Gi.define();class lo{eq(e){return this==e}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return co.create(e,t,this)}}lo.prototype.startSide=lo.prototype.endSide=0,lo.prototype.point=!1,lo.prototype.mapMode=si.TrackDel;class co{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new co(e,t,i)}}function ho(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class uo{constructor(e,t,i,o){this.from=e,this.to=t,this.value=i,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=i?this.to:this.from;for(let s=o,n=a.length;;){if(s==n)return s;let o=s+n>>1,r=a[o]-e||(i?this.value[o].endSide:this.value[o].startSide)-t;if(o==s)return r>=0?s:n;r>=0?n=o:s=o+1}}between(e,t,i,o){for(let a=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,a);a<s;a++)if(!1===o(this.from[a]+e,this.to[a]+e,this.value[a]))return!1}map(e,t){let i=[],o=[],a=[],s=-1,n=-1;for(let r=0;r<this.value.length;r++){let l,c,d=this.value[r],h=this.from[r]+e,u=this.to[r]+e;if(h==u){let e=t.mapPos(h,d.startSide,d.mapMode);if(null==e)continue;if(l=c=e,d.startSide!=d.endSide&&(c=t.mapPos(h,d.endSide),c<l))continue}else if(l=t.mapPos(h,d.startSide),c=t.mapPos(u,d.endSide),l>c||l==c&&d.startSide>0&&d.endSide<=0)continue;(c-l||d.endSide-d.startSide)<0||(s<0&&(s=l),d.point&&(n=Math.max(n,c-l)),i.push(d),o.push(l-s),a.push(c-s))}return{mapped:i.length?new uo(o,a,i,n):null,pos:s}}}class po{constructor(e,t,i,o){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=o}static create(e,t,i,o){return new po(e,t,i,o)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:o=0,filterTo:a=this.length}=e,s=e.filter;if(0==t.length&&!s)return this;if(i&&(t=t.slice().sort(ho)),this.isEmpty)return t.length?po.of(t):this;let n=new go(this,null,-1).goto(0),r=0,l=[],c=new _o;for(;n.value||r<t.length;)if(r<t.length&&(n.from-t[r].from||n.startSide-t[r].value.startSide)>=0){let e=t[r++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==n.rangeIndex&&n.chunkIndex<this.chunk.length&&(r==t.length||this.chunkEnd(n.chunkIndex)<t[r].from)&&(!s||o>this.chunkEnd(n.chunkIndex)||a<this.chunkPos[n.chunkIndex])&&c.addChunk(this.chunkPos[n.chunkIndex],this.chunk[n.chunkIndex])?n.nextChunk():((!s||o>n.to||a<n.from||s(n.from,n.to,n.value))&&(c.addInner(n.from,n.to,n.value)||l.push(co.create(n.from,n.to,n.value))),n.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?po.empty:this.nextLayer.update({add:l,filter:s,filterFrom:o,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],o=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],n=this.chunk[s],r=e.touchesRange(a,a+n.length);if(!1===r)o=Math.max(o,n.maxPoint),t.push(n),i.push(e.mapPos(a));else if(!0===r){let{mapped:s,pos:r}=n.map(a,e);s&&(o=Math.max(o,s.maxPoint),t.push(s),i.push(r))}}let a=this.nextLayer.map(e);return 0==t.length?a:new po(i,t,a||po.empty,o)}between(e,t,i){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],s=this.chunk[o];if(t>=a&&e<=a+s.length&&!1===s.between(a,e-a,t-a,i))return}this.nextLayer.between(e,t,i)}}iter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return mo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return mo.from(e).goto(t)}static compare(e,t,i,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=a)),n=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=a)),r=fo(s,n,i),l=new bo(s,r,a),c=new bo(n,r,a);i.iterGaps(((e,t,i)=>yo(l,e,c,t,i,o))),i.empty&&0==i.length&&yo(l,0,c,0,0,o)}static eq(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0;null==o&&(o=999999999);let a=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),s=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(a.length!=s.length)return!1;if(!a.length)return!0;let n=fo(a,s),r=new bo(a,n,0).goto(i),l=new bo(s,n,0).goto(i);for(;;){if(r.to!=l.to||!Ao(r.active,l.active)||r.point&&(!l.point||!r.point.eq(l.point)))return!1;if(r.to>o)return!0;r.next(),l.next()}}static spans(e,t,i,o){let a=new bo(e,null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1).goto(t),s=t,n=a.openStart;for(;;){let e=Math.min(a.to,i);if(a.point){let i=a.activeForPoint(a.to),r=a.pointFrom<t?i.length+1:Math.min(i.length,n);o.point(s,e,a.point,i,r,a.pointRank),n=Math.min(a.openEnd(e),i.length)}else e>s&&(o.span(s,e,a.active,n),n=a.openEnd(e));if(a.to>i)return n+(a.point&&a.to>i?1:0);s=a.to,a.next()}}static of(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=new _o;for(let o of e instanceof co?[e]:t?function(e){if(e.length>1)for(let t=e[0],i=1;i<e.length;i++){let o=e[i];if(ho(t,o)>0)return e.slice().sort(ho);t=o}return e}(e):e)i.add(o.from,o.to,o.value);return i.finish()}}po.empty=new po([],[],null,-1),po.empty.nextLayer=po.empty;class _o{finishChunk(e){this.chunks.push(new uo(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new _o)).add(e,t,i)}addInner(e,t,i){let o=e-this.lastTo||i.startSide-this.last.endSide;if(o<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(o<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(po.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=po.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function fo(e,t,i){let o=new Map;for(let s of e)for(let e=0;e<s.chunk.length;e++)s.chunk[e].maxPoint<=0&&o.set(s.chunk[e],s.chunkPos[e]);let a=new Set;for(let s of t)for(let e=0;e<s.chunk.length;e++){let t=o.get(s.chunk[e]);null==t||(i?i.mapPos(t):t)!=s.chunkPos[e]||(null===i||void 0===i?void 0:i.touchesRange(t,t+s.chunk[e].length))||a.add(s.chunk[e])}return a}class go{constructor(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.layer=e,this.skip=t,this.minPoint=i,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class mo{constructor(e){this.heap=e}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=[];for(let a=0;a<e.length;a++)for(let s=e[a];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&o.push(new go(s,t,i,a));return 1==o.length?o[0]:new mo(o)}get startSide(){return this.value?this.value.startSide:0}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)vo(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)vo(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),vo(this.heap,0)}}}function vo(e,t){for(let i=e[t];;){let o=1+(t<<1);if(o>=e.length)break;let a=e[o];if(o+1<e.length&&a.compare(e[o+1])>=0&&(a=e[o+1],o++),i.compare(a)<0)break;e[o]=i,e[t]=a,t=o}}class bo{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=mo.from(e,t,i)}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Do(this.active,e),Do(this.activeTo,e),Do(this.activeRank,e),this.minActive=Oo(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:o,rank:a}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=a;)t++;ko(this.active,t,i),ko(this.activeTo,t,o),ko(this.activeRank,t,a),e&&ko(e,t,this.cursor.from),this.minActive=Oo(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),i&&Do(i,o)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(i),this.cursor.next()}}}if(i){this.openStart=0;for(let t=i.length-1;t>=0&&i[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function yo(e,t,i,o,a,s){e.goto(t),i.goto(o);let n=o+a,r=o,l=o-t;for(;;){let t=e.to+l-i.to||e.endSide-i.endSide,o=t<0?e.to+l:i.to,a=Math.min(o,n);if(e.point||i.point?e.point&&i.point&&(e.point==i.point||e.point.eq(i.point))&&Ao(e.activeForPoint(e.to),i.activeForPoint(i.to))||s.comparePoint(r,a,e.point,i.point):a>r&&!Ao(e.active,i.active)&&s.compareRange(r,a,e.active,i.active),o>n)break;r=o,t<=0&&e.next(),t>=0&&i.next()}}function Ao(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=t[i]&&!e[i].eq(t[i]))return!1;return!0}function Do(e,t){for(let i=t,o=e.length-1;i<o;i++)e[i]=e[i+1];e.pop()}function ko(e,t,i){for(let o=e.length-1;o>=t;o--)e[o+1]=e[o];e[t]=i}function Oo(e,t){let i=-1,o=1e9;for(let a=0;a<t.length;a++)(t[a]-o||e[a].endSide-e[i].endSide)<0&&(i=a,o=t[a]);return i}function wo(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,o=0;for(let a=0;a<i;)9==e.charCodeAt(a)?(o+=t-o%t,a++):(o++,a=qt(e,a));return o}function Co(e,t,i,o){for(let a=0,s=0;;){if(s>=t)return a;if(a==e.length)break;s+=9==e.charCodeAt(a)?i-s%i:1,a=qt(e,a)}return!0===o?-1:e.length}const xo="undefined"==typeof Symbol?"__\u037c":Symbol.for("\u037c"),So="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Mo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Po{constructor(e,t){this.rules=[];let{finish:i}=t||{};function o(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function a(e,t,s,n){let r=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return s.push(e[0]+";");for(let i in t){let n=t[i];if(/&/.test(i))a(i.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),n,s);else if(n&&"object"==typeof n){if(!l)throw new RangeError("The value of a property ("+i+") should be a primitive value.");a(o(i),n,r,c)}else null!=n&&r.push(i.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+n+";")}(r.length||c)&&s.push((!i||l||n?e:e.map(i)).join(", ")+" {"+r.join(" ")+"}")}for(let s in e)a(o(s),e[s],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=Mo[xo]||1;return Mo[xo]=e+1,"\u037c"+e.toString(36)}static mount(e,t){(e[So]||new Io(e)).mount(Array.isArray(t)?t:[t])}}let To=new Map;class Io{constructor(e){let t=e.ownerDocument||e,i=t.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let o=To.get(t);if(o)return e.adoptedStyleSheets=[o.sheet,...e.adoptedStyleSheets],e[So]=o;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],To.set(t,this)}else{this.styleTag=t.createElement("style");let i=e.head||e;i.insertBefore(this.styleTag,i.firstChild)}this.modules=[],e[So]=this}mount(e){let t=this.sheet,i=0,o=0;for(let a=0;a<e.length;a++){let s=e[a],n=this.modules.indexOf(s);if(n<o&&n>-1&&(this.modules.splice(n,1),o--,n=-1),-1==n){if(this.modules.splice(o++,0,s),t)for(let e=0;e<s.rules.length;e++)t.insertRule(s.rules[e],i++)}else{for(;o<n;)i+=this.modules[o++].rules.length;i+=s.rules.length,o++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}for(var No={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Fo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Lo="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Eo="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),jo=0;jo<10;jo++)No[48+jo]=No[96+jo]=String(jo);for(jo=1;jo<=24;jo++)No[jo+111]="F"+jo;for(jo=65;jo<=90;jo++)No[jo]=String.fromCharCode(jo+32),Fo[jo]=String.fromCharCode(jo);for(var Zo in No)Fo.hasOwnProperty(Zo)||(Fo[Zo]=No[Zo]);function Ro(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function Qo(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function zo(e,t){if(!t.anchorNode)return!1;try{return Qo(e,t.anchorNode)}catch(vv){return!1}}function Uo(e){return 3==e.nodeType?$o(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function Bo(e,t,i,o){return!!i&&(Ho(e,t,i,o,-1)||Ho(e,t,i,o,1))}function Yo(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function Ho(e,t,i,o,a){for(;;){if(e==i&&t==o)return!0;if(t==(a<0?0:Vo(e))){if("DIV"==e.nodeName)return!1;let i=e.parentNode;if(!i||1!=i.nodeType)return!1;t=Yo(e)+(a<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(a<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=a<0?Vo(e):0}}}function Vo(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Wo(e,t){let i=t?e.left:e.right;return{left:i,right:i,top:e.top,bottom:e.bottom}}function Go(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class Jo{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Vo(t):0),i,Math.min(e.focusOffset,i?Vo(i):0))}set(e,t,i,o){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=o}}let qo,Ko=null;function Xo(e){if(e.setActive)return e.setActive();if(Ko)return e.focus(Ko);let t=[];for(let i=e;i&&(t.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(e.focus(null==Ko?{get preventScroll(){return Ko={preventScroll:!0},!0}}:void 0),!Ko){Ko=!1;for(let e=0;e<t.length;){let i=t[e++],o=t[e++],a=t[e++];i.scrollTop!=o&&(i.scrollTop=o),i.scrollLeft!=a&&(i.scrollLeft=a)}}}function $o(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=qo||(qo=document.createRange());return o.setEnd(e,i),o.setStart(e,t),o}function ea(e,t,i){let o={key:t,code:t,keyCode:i,which:i,cancelable:!0},a=new KeyboardEvent("keydown",o);a.synthetic=!0,e.dispatchEvent(a);let s=new KeyboardEvent("keyup",o);return s.synthetic=!0,e.dispatchEvent(s),a.defaultPrevented||s.defaultPrevented}function ta(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}class ia{constructor(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.node=e,this.offset=t,this.precise=i}static before(e,t){return new ia(e.parentNode,Yo(e),t)}static after(e,t){return new ia(e.parentNode,Yo(e)+1,t)}}const oa=[];class aa{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.dirty){let i,o=this.dom,a=null;for(let s of this.children){if(s.dirty){if(!s.dom&&(i=a?a.nextSibling:o.firstChild)){let e=aa.get(i);(!e||!e.parent&&e.canReuseDOM(s))&&s.reuseDOM(i)}s.sync(e,t),s.dirty=0}if(i=a?a.nextSibling:o.firstChild,t&&!t.written&&t.node==o&&i!=s.dom&&(t.written=!0),s.dom.parentNode==o)for(;i&&i!=s.dom;)i=sa(i);else o.insertBefore(s.dom,i);a=s.dom}for(i=a?a.nextSibling:o.firstChild,i&&t&&t.node==o&&(t.written=!0);i;)i=sa(i)}else if(1&this.dirty)for(let i of this.children)i.dirty&&(i.sync(e,t),i.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let o=0==Vo(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==o&&t.firstChild!=t.lastChild&&(o=e==t.firstChild?-1:1),e=t}i=o<0?e:e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!aa.get(i);)i=i.nextSibling;if(!i)return this.length;for(let o=0,a=0;;o++){let e=this.children[o];if(e.dom==i)return a;a+=e.length+e.breakAfter}}domBoundsAround(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=-1,a=-1,s=-1,n=-1;for(let r=0,l=i,c=i;r<this.children.length;r++){let i=this.children[r],d=l+i.length;if(l<e&&d>t)return i.domBoundsAround(e,t,l);if(d>=e&&-1==o&&(o=r,a=l),l>t&&i.dom.parentNode==this.dom){s=r,n=c;break}c=d,l=d+i.breakAfter}return{from:a,to:n<0?i+this.length:n,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oa;this.markDirty();for(let o=e;o<t;o++){let e=this.children[o];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...i);for(let o=0;o<i.length;o++)i[o].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length;return new na(this.children,e,this.children.length)}childPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,o,a,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function sa(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}aa.prototype.breakAfter=0;class na{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function ra(e,t,i,o,a,s,n,r,l){let{children:c}=e,d=c.length?c[t]:null,h=s.length?s[s.length-1]:null,u=h?h.breakAfter:n;if(!(t==o&&d&&!n&&!u&&s.length<2&&d.merge(i,a,s.length?h:null,0==i,r,l))){if(o<c.length){let e=c[o];e&&a<e.length?(t==o&&(e=e.split(a),a=0),!u&&h&&e.merge(0,a,h,!0,0,l)?s[s.length-1]=e:(a&&e.merge(0,a,null,!1,0,l),s.push(e))):(null===e||void 0===e?void 0:e.breakAfter)&&(h?h.breakAfter=1:n=1),o++}for(d&&(d.breakAfter=n,i>0&&(!n&&s.length&&d.merge(i,d.length,s[0],!1,r,0)?d.breakAfter=s.shift().breakAfter:(i<d.length||d.children.length&&0==d.children[d.children.length-1].length)&&d.merge(i,d.length,null,!1,r,0),t++));t<o&&s.length;)if(c[o-1].become(s[s.length-1]))o--,s.pop(),l=s.length?0:r;else{if(!c[t].become(s[0]))break;t++,s.shift(),r=s.length?0:l}!s.length&&t&&o<c.length&&!c[t-1].breakAfter&&c[o].merge(0,0,c[t-1],!1,r,l)&&t--,(t<o||s.length)&&e.replaceChildren(t,o,s)}}function la(e,t,i,o,a,s){let n=e.childCursor(),{i:r,off:l}=n.findPos(i,1),{i:c,off:d}=n.findPos(t,-1),h=t-i;for(let u of o)h+=u.length;e.length+=h,ra(e,c,d,r,l,o,0,a,s)}let ca="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},da="undefined"!=typeof document?document:{documentElement:{style:{}}};const ha=/Edge\/(\d+)/.exec(ca.userAgent),ua=/MSIE \d/.test(ca.userAgent),pa=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ca.userAgent),_a=!!(ua||pa||ha),fa=!_a&&/gecko\/(\d+)/i.test(ca.userAgent),ga=!_a&&/Chrome\/(\d+)/.exec(ca.userAgent),ma="webkitFontSmoothing"in da.documentElement.style,va=!_a&&/Apple Computer/.test(ca.vendor),ba=va&&(/Mobile\/\w+/.test(ca.userAgent)||ca.maxTouchPoints>2);var ya={mac:ba||/Mac/.test(ca.platform),windows:/Win/.test(ca.platform),linux:/Linux|X11/.test(ca.platform),ie:_a,ie_version:ua?da.documentMode||6:pa?+pa[1]:ha?+ha[1]:0,gecko:fa,gecko_version:fa?+(/Firefox\/(\d+)/.exec(ca.userAgent)||[0,0])[1]:0,chrome:!!ga,chrome_version:ga?+ga[1]:0,ios:ba,android:/Android\b/.test(ca.userAgent),webkit:ma,safari:va,webkit_version:ma?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=da.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Aa extends aa{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,i){return(!i||i instanceof Aa&&!(this.length-(t-e)+i.length>256))&&(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Aa(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new ia(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return ka(this.dom,e,t)}}class Da extends aa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(),this.mark=e,this.children=t,this.length=i;for(let o of t)o.setParent(this)}setAttrs(e){if(ta(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,t){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,o,a,s){return(!i||!(!(i instanceof Da&&i.mark.eq(this.mark))||e&&a<=0||t<this.length&&s<=0))&&(la(this,e,t,i?i.children:[],a-1,s-1),this.markDirty(),!0)}split(e){let t=[],i=0,o=-1,a=0;for(let n of this.children){let s=i+n.length;s>e&&t.push(i<e?n.split(e-i):n),o<0&&i>=e&&(o=a),i=s,a++}let s=this.length-e;return this.length=e,o>-1&&(this.children.length=o,this.markDirty()),new Da(this.mark,t,s)}domAtPos(e){return Ta(this,e)}coordsAt(e,t){return Na(this,e,t)}}function ka(e,t,i){let o=e.nodeValue.length;t>o&&(t=o);let a=t,s=t,n=0;0==t&&i<0||t==o&&i>=0?ya.chrome||ya.gecko||(t?(a--,n=1):s<o&&(s++,n=-1)):i<0?a--:s<o&&s++;let r=$o(e,a,s).getClientRects();if(!r.length)return null;let l=r[(n?n<0:i>=0)?0:r.length-1];return ya.safari&&!n&&0==l.width&&(l=Array.prototype.find.call(r,(e=>e.width))||l),n?Wo(l,n<0):l||null}class Oa extends aa{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||Oa)(e,t,i)}split(e){let t=Oa.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,o,a,s){return!(i&&(!(i instanceof Oa&&this.widget.compare(i.widget))||e>0&&a<=0||t<this.length&&s<=0))&&(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Oa&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return jt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,o=this.posAtStart;return i?i.slice(o,o+this.length):jt.empty}domAtPos(e){return(this.length?0==e:this.side>0)?ia.before(this.dom):ia.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let o=this.dom.getClientRects(),a=null;if(!o.length)return null;let s=this.side?this.side<0:e>0;for(let n=s?o.length-1:0;a=o[n],!(e>0?0==n:n==o.length-1||a.top<a.bottom);n+=s?-1:1);return Wo(a,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class wa extends Oa{domAtPos(e){let{topView:t,text:i}=this.widget;return t?Ca(e,0,t,i,this.length-t.length,((e,t)=>e.domAtPos(t)),((e,t)=>new ia(e,Math.min(t,e.nodeValue.length)))):new ia(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:o}=this.widget;return i?Sa(e,t,i,o,this.length-i.length):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:o}=this.widget;return i?Ca(e,t,i,o,this.length-i.length,((e,t,i)=>e.coordsAt(t,i)),((e,t,i)=>ka(e,t,i))):ka(o,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function Ca(e,t,i,o,a,s,n){if(i instanceof Da){for(let r=i.dom.firstChild;r;r=r.nextSibling){let i=aa.get(r);if(i){let l=Qo(r,o),c=i.length+(l?a:0);if(e<c||e==c&&i.getSide()<=0)return l?Ca(e,t,i,o,a,s,n):s(i,e,t);e-=c}else{let i=xa(e,t,r,n);if("number"!=typeof i)return i;e=i}}return s(i,i.length,-1)}return i.dom==o?n(o,e,t):s(i,e,t)}function xa(e,t,i,o){if(3==i.nodeType){let a=i.nodeValue.length;if(e<=a)return o(i,e,t);e-=a}else if(1==i.nodeType&&"false"!=i.contentEditable)for(let a=i.firstChild;a;a=a.nextSibling){let i=xa(e,t,a,o);if("number"!=typeof i)return i;e=i}return e}function Sa(e,t,i,o,a){if(i instanceof Da){let s=0;for(let n=i.dom.firstChild;n;n=n.nextSibling){let i=aa.get(n);if(i){let r=Qo(n,o);if(Qo(n,e))return s+(r?Sa(e,t,i,o,a):i.localPosFromDOM(e,t));s+=i.length+(r?a:0)}else{let i=Ma(e,t,n);if(null!=i.result)return s+i.result;s+=i.size}}}else if(i.dom==o)return Math.min(t,o.nodeValue.length);return i.localPosFromDOM(e,t)}function Ma(e,t,i){if(3==i.nodeType)return e==i?{result:t}:{size:i.nodeValue.length};if(1!=i.nodeType||"false"==i.contentEditable)return i.contains(e)?{result:0}:{size:0};{let o=0;for(let a=i.firstChild,s=0;;a=a.nextSibling,s++){if(e==i&&s==t)return{result:o};if(!a)return{size:o};let n=Ma(e,t,a);if(null!=n.result)return{result:t+n.result};o+=n.size}}}class Pa extends aa{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Pa&&e.side==this.side}split(){return new Pa(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ia.before(this.dom):ia.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return jt.empty}get isHidden(){return!0}}function Ta(e,t){let i=e.dom,{children:o}=e,a=0;for(let s=0;a<o.length;a++){let e=o[a],n=s+e.length;if(!(n==s&&e.getSide()<=0)){if(t>s&&t<n&&e.dom.parentNode==i)return e.domAtPos(t-s);if(t<=s)break;s=n}}for(let s=a;s>0;s--){let e=o[s-1];if(e.dom.parentNode==i)return e.domAtPos(e.length)}for(let s=a;s<o.length;s++){let e=o[s];if(e.dom.parentNode==i)return e.domAtPos(0)}return new ia(i,0)}function Ia(e,t,i){let o,{children:a}=e;i>0&&t instanceof Da&&a.length&&(o=a[a.length-1])instanceof Da&&o.mark.eq(t.mark)?Ia(o,t.children[0],i-1):(a.push(t),t.setParent(e)),e.length+=t.length}function Na(e,t,i){let o=null,a=-1,s=null,n=-1;!function e(t,r){for(let l=0,c=0;l<t.children.length&&c<=r;l++){let d=t.children[l],h=c+d.length;h>=r&&(d.children.length?e(d,r-c):(!s||s.isHidden&&i>0)&&(h>r||c==h&&d.getSide()>0)?(s=d,n=r-c):(c<r||c==h&&d.getSide()<0&&!d.isHidden)&&(o=d,a=r-c)),c=h}}(e,t);let r=(i<0?o:s)||o||s;return r?r.coordsAt(Math.max(0,r==o?a:n),i):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let i=Uo(t);return i[i.length-1]||null}(e)}function Fa(e,t){for(let i in e)"class"==i&&t.class?t.class+=" "+e.class:"style"==i&&t.style?t.style+=";"+e.style:t[i]=e[i];return t}function La(e,t){if(e==t)return!0;if(!e||!t)return!1;let i=Object.keys(e),o=Object.keys(t);if(i.length!=o.length)return!1;for(let a of i)if(-1==o.indexOf(a)||e[a]!==t[a])return!1;return!0}function Ea(e,t,i){let o=null;if(t)for(let a in t)i&&a in i||e.removeAttribute(o=a);if(i)for(let a in i)t&&t[a]==i[a]||e.setAttribute(o=a,i[a]);return!!o}Aa.prototype.children=Oa.prototype.children=Pa.prototype.children=oa;class ja{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get customView(){return null}get isHidden(){return!1}destroy(e){}}var Za=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(Za||(Za={}));class Ra extends lo{constructor(e,t,i,o){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=o}get heightRelevant(){return!1}static mark(e){return new Qa(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Ua(e,t,t,i,e.widget||null,!1)}static replace(e){let t,i,o=!!e.block;if(e.isBlockGap)t=-5e8,i=4e8;else{let{start:a,end:s}=Ba(e,o);t=(a?o?-3e8:-1:5e8)-1,i=1+(s?o?2e8:1:-6e8)}return new Ua(e,t,i,o,e.widget||null,!0)}static line(e){return new za(e)}static set(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return po.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Ra.none=po.empty;class Qa extends Ra{constructor(e){let{start:t,end:i}=Ba(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Qa&&this.tagName==e.tagName&&this.class==e.class&&La(this.attrs,e.attrs)}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Qa.prototype.point=!1;class za extends Ra{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof za&&this.spec.class==e.spec.class&&La(this.spec.attributes,e.spec.attributes)}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}za.prototype.mapMode=si.TrackBefore,za.prototype.point=!0;class Ua extends Ra{constructor(e,t,i,o,a,s){super(t,i,a,e),this.block=o,this.isReplace=s,this.mapMode=o?t<=0?si.TrackBefore:si.TrackAfter:si.TrackDel}get type(){return this.startSide<this.endSide?Za.WidgetRange:this.startSide<=0?Za.WidgetBefore:Za.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ua&&(t=this.widget,i=e.widget,t==i||!!(t&&i&&t.compare(i)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,i}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function Ba(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{inclusiveStart:i,inclusiveEnd:o}=e;return null==i&&(i=e.inclusive),null==o&&(o=e.inclusive),{start:null!==i&&void 0!==i?i:t,end:null!==o&&void 0!==o?o:t}}function Ya(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=i.length-1;a>=0&&i[a]+o>=e?i[a]=Math.max(i[a],t):i.push(e,t)}Ua.prototype.point=!0;class Ha extends aa{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,o,a,s){if(i){if(!(i instanceof Ha))return!1;this.dom||i.transferDOM(this)}return o&&this.setDeco(i?i.attrs:null),la(this,e,t,i?i.children:[],a,s),!0}split(e){let t=new Ha;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:i,off:o}=this.childPos(e);o&&(t.append(this.children[i].split(o),0),this.children[i].merge(o,this.children[i].length,null,!1,0,0),i++);for(let a=i;a<this.children.length;a++)t.append(this.children[a],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){La(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Ia(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Fa(t,this.attrs||{})),i&&(this.attrs=Fa({class:i},this.attrs||{}))}domAtPos(e){return Ta(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e,t){var i;this.dom?4&this.dirty&&(ta(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Ea(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let o=this.dom.lastChild;for(;o&&aa.get(o)instanceof Da;)o=o.lastChild;if(!o||!this.length||"BR"!=o.nodeName&&0==(null===(i=aa.get(o))||void 0===i?void 0:i.isEditable)&&(!ya.ios||!this.children.some((e=>e instanceof Aa)))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let i of this.children){if(!(i instanceof Aa)||/[^ -~]/.test(i.text))return null;let o=Uo(i.dom);if(1!=o.length)return null;t+=o[0].width,e=o[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let i=Na(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=i.bottom-i.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let o=(t-e.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}get type(){return Za.Text}static find(e,t){for(let i=0,o=0;i<e.children.length;i++){let a=e.children[i],s=o+a.length;if(s>=t){if(a instanceof Ha)return a;if(s>t)break}o=s+a.breakAfter}return null}}class Va extends aa{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,o,a,s){return!(i&&(!(i instanceof Va&&this.widget.compare(i.widget))||e>0&&a<=0||t<this.length&&s<=0))&&(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?ia.before(this.dom):ia.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Va(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return oa}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):jt.empty}domBoundsAround(){return null}become(e){return e instanceof Va&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Wa{constructor(e,t,i,o){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Va&&e.type==Za.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ha),this.atCursorPos=!0),this.curLine}flushBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.bufferMarks;this.pendingBuffer&&(this.curLine.append(Ga(new Pa(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:i,done:o}=this.cursor.next(this.skip);if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(i){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let o=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Ga(new Aa(this.text.slice(this.textOff,this.textOff+o)),t),i),this.atCursorPos=!0,this.textOff+=o,e-=o,i=0}}span(e,t,i,o){this.buildText(t-e,i,o),this.pos=t,this.openStart<0&&(this.openStart=o)}point(e,t,i,o,a,s){if(this.disallowBlockEffectsFor[s]&&i instanceof Ua){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let n=t-e;if(i instanceof Ua)if(i.block){let{type:e}=i;e!=Za.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Va(i.widget||new Ja("div"),n,e))}else{let s=Oa.create(i.widget||new Ja("span"),n,n?0:i.startSide),r=this.atCursorPos&&!s.isEditable&&a<=o.length&&(e<t||i.startSide>0),l=!s.isEditable&&(e<t||a>o.length||i.startSide<=0),c=this.getLine();2!=this.pendingBuffer||r||s.isEditable||(this.pendingBuffer=0),this.flushBuffer(o),r&&(c.append(Ga(new Pa(1),o),a),a=o.length+Math.max(0,a-o.length)),c.append(Ga(s,o),a),this.atCursorPos=l,this.pendingBuffer=l?e<t||a>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);n&&(this.textOff+n<=this.text.length?this.textOff+=n:(this.skip+=n-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=a)}static build(e,t,i,o,a){let s=new Wa(e,t,i,a);return s.openEnd=po.spans(o,t,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function Ga(e,t){for(let i of t)e=new Da(i,[e],e.length);return e}class Ja extends ja{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const qa=vi.define(),Ka=vi.define(),Xa=vi.define(),$a=vi.define(),es=vi.define(),ts=vi.define(),is=vi.define(),os=vi.define({combine:e=>e.some((e=>e))}),as=vi.define({combine:e=>e.some((e=>e))});class ss{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;this.range=e,this.y=t,this.x=i,this.yMargin=o,this.xMargin=a}map(e){return e.empty?this:new ss(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const ns=Gi.define({map:(e,t)=>e.map(t)});function rs(e,t,i){let o=e.facet($a);o.length?o[0](t):window.onerror?window.onerror(String(t),i,void 0,void 0,t):i?console.error(i+":",t):console.error(t)}const ls=vi.define({combine:e=>!e.length||e[0]});let cs=0;const ds=vi.define();class hs{constructor(e,t,i,o){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=o(this)}static define(e,t){const{eventHandlers:i,provide:o,decorations:a}=t||{};return new hs(cs++,e,i,(e=>{let t=[ds.of(e)];return a&&t.push(fs.of((t=>{let i=t.plugin(e);return i?a(i):Ra.none}))),o&&t.push(o(e)),t}))}static fromClass(e,t){return hs.define((t=>new e(t)),t)}}class us{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(rs(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(vv){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){rs(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(i){rs(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ps=vi.define(),_s=vi.define(),fs=vi.define(),gs=vi.define(),ms=vi.define();function vs(e){let t=0,i=0,o=0,a=0;for(let s of e.state.facet(ms)){let n=s(e);n&&(null!=n.left&&(t=Math.max(t,n.left)),null!=n.right&&(i=Math.max(i,n.right)),null!=n.top&&(o=Math.max(o,n.top)),null!=n.bottom&&(a=Math.max(a,n.bottom)))}return{left:t,right:i,top:o,bottom:a}}const bs=vi.define();class ys{constructor(e,t,i,o){this.fromA=e,this.toA=t,this.fromB=i,this.toB=o}join(e){return new ys(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let o=e[t-1];if(!(o.fromA>i.toA)){if(o.toA<i.fromA)break;i=i.join(o),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(0==t.length)return e;let i=[];for(let o=0,a=0,s=0,n=0;;o++){let r=o==e.length?null:e[o],l=s-n,c=r?r.fromB:1e9;for(;a<t.length&&t[a]<c;){let e=t[a],o=t[a+1],s=Math.max(n,e),r=Math.min(c,o);if(s<=r&&new ys(s+l,r+l,s,r).addToSet(i),o>c)break;a+=2}if(!r)return i;new ys(r.fromA,r.toA,r.fromB,r.toB).addToSet(i),s=r.toA,n=r.toB}}}class As{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=ri.empty(this.startState.doc.length);for(let a of i)this.changes=this.changes.compose(a.changes);let o=[];this.changes.iterChangedRanges(((e,t,i,a)=>o.push(new ys(e,t,i,a)))),this.changedRanges=o}static create(e,t,i){return new As(e,t,i)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var Ds=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Ds||(Ds={}));const ks=Ds.LTR,Os=Ds.RTL;function ws(e){let t=[];for(let i=0;i<e.length;i++)t.push(1<<+e[i]);return t}const Cs=ws("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),xs=ws("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ss=Object.create(null),Ms=[];for(let bv of["()","[]","{}"]){let e=bv.charCodeAt(0),t=bv.charCodeAt(1);Ss[e]=t,Ss[t]=-e}const Ps=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ts{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?Os:ks}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,o){let a=-1;for(let s=0;s<e.length;s++){let n=e[s];if(n.from<=t&&n.to>=t){if(n.level==i)return s;(a<0||(0!=o?o<0?n.from<t:n.to>t:e[a].level>n.level))&&(a=s)}}if(a<0)throw new RangeError("Index out of range");return a}}const Is=[];function Ns(e,t){let i=e.length,o=t==ks?1:2,a=t==ks?2:1;if(!e||1==o&&!Ps.test(e))return Fs(i);for(let r=0,l=o,c=o;r<i;r++){let t=(s=e.charCodeAt(r))<=247?Cs[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?xs[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8203?256:64336<=s&&s<=65023?4:8204==s?256:1;512==t?t=l:8==t&&4==c&&(t=16),Is[r]=4==t?2:t,7&t&&(c=t),l=t}var s;for(let r=0,l=o,c=o;r<i;r++){let e=Is[r];if(128==e)r<i-1&&l==Is[r+1]&&24&l?e=Is[r]=l:Is[r]=256;else if(64==e){let e=r+1;for(;e<i&&64==Is[e];)e++;let t=r&&8==l||e<i&&8==Is[e]?1==c?1:8:256;for(let i=r;i<e;i++)Is[i]=t;r=e-1}else 8==e&&1==c&&(Is[r]=1);l=e,7&e&&(c=e)}for(let r,l,c,d=0,h=0,u=0;d<i;d++)if(l=Ss[r=e.charCodeAt(d)])if(l<0){for(let e=h-3;e>=0;e-=3)if(Ms[e+1]==-l){let t=Ms[e+2],i=2&t?o:4&t?1&t?a:o:0;i&&(Is[d]=Is[Ms[e]]=i),h=e;break}}else{if(189==Ms.length)break;Ms[h++]=d,Ms[h++]=r,Ms[h++]=u}else if(2==(c=Is[d])||1==c){let e=c==o;u=e?0:1;for(let t=h-3;t>=0;t-=3){let i=Ms[t+2];if(2&i)break;if(e)Ms[t+2]|=2;else{if(4&i)break;Ms[t+2]|=4}}}for(let r=0;r<i;r++)if(256==Is[r]){let e=r+1;for(;e<i&&256==Is[e];)e++;let t=1==(r?Is[r-1]:o),a=t==(1==(e<i?Is[e]:o))?t?1:2:o;for(let i=r;i<e;i++)Is[i]=a;r=e-1}let n=[];if(1==o)for(let r=0;r<i;){let e=r,t=1!=Is[r++];for(;r<i&&t==(1!=Is[r]);)r++;if(t)for(let i=r;i>e;){let t=i,o=2!=Is[--i];for(;i>e&&o==(2!=Is[i-1]);)i--;n.push(new Ts(i,t,o?2:1))}else n.push(new Ts(e,r,0))}else for(let r=0;r<i;){let e=r,t=2==Is[r++];for(;r<i&&t==(2==Is[r]);)r++;n.push(new Ts(e,r,t?1:2))}return n}function Fs(e){return[new Ts(0,e,0)]}let Ls="";function Es(e,t,i,o,a){var s;let n=o.head-e.from,r=-1;if(0==n){if(!a||!e.length)return null;t[0].level!=i&&(n=t[0].side(!1,i),r=0)}else if(n==e.length){if(a)return null;let e=t[t.length-1];e.level!=i&&(n=e.side(!0,i),r=t.length-1)}r<0&&(r=Ts.find(t,n,null!==(s=o.bidiLevel)&&void 0!==s?s:-1,o.assoc));let l=t[r];n==l.side(a,i)&&(l=t[r+=a?1:-1],n=l.side(!a,i));let c=a==(l.dir==i),d=qt(e.text,n,c);if(Ls=e.text.slice(Math.min(n,d),Math.max(n,d)),d!=l.side(a,i))return fi.cursor(d+e.from,c?-1:1,l.level);let h=r==(a?t.length-1:0)?null:t[r+(a?1:-1)];return h||l.level==i?h&&h.level<l.level?fi.cursor(h.side(!a,i)+e.from,a?1:-1,h.level):fi.cursor(d+e.from,a?-1:1,l.level):fi.cursor(a?e.to:e.from,a?-1:1,i)}const js="\uffff";class Zs{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(no.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=js}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let o=e;;){this.findPointBefore(i,o);let e=this.text.length;this.readNode(o);let a=o.nextSibling;if(a==t)break;let s=aa.get(o),n=aa.get(a);(s&&n?s.breakAfter:(s?s.breakAfter:Rs(o))||Rs(a)&&("BR"!=o.nodeName||o.cmIgnore)&&this.text.length>e)&&this.lineBreak(),o=a}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let a,s=-1,n=1;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),n=this.lineSeparator.length):(a=o.exec(t))&&(s=a.index,n=a[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),n>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=n-1);i=s+n}}readNode(e){if(e.cmIgnore)return;let t=aa.get(e),i=t&&t.overrideDOMText;if(null!=i){this.findPointInside(e,i.length);for(let e=i.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(3==e.nodeType?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function Rs(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class Qs{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class zs extends aa{constructor(e){super(),this.view=e,this.compositionDeco=Ra.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ha],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ys(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((e=>{let{fromA:t,toA:i}=e;return i<this.minWidthFrom||t>this.minWidthTo}))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Ra.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){let i=Bs(e);if(!i)return Ra.none;let{from:o,to:a,node:s,text:n}=i,r=t.mapPos(o,1),l=Math.max(r,t.mapPos(a,-1)),{state:c}=e,d=new Zs([],c);3==s.nodeType?d.readTextNode(s):d.readRange(s.firstChild,null);let{text:h}=d;if(h.indexOf(js)>-1)return Ra.none;if(l-r<h.length)if(c.doc.sliceString(r,Math.min(c.doc.length,r+h.length))==h)l=r+h.length;else{if(c.doc.sliceString(Math.max(0,l-h.length),l)!=h)return Ra.none;r=l-h.length}else if(c.doc.sliceString(r,l)!=h)return Ra.none;let u=aa.get(s);u instanceof wa?u=u.widget.topView:u&&(u.parent=null);return Ra.set(Ra.replace({widget:new Ys(s,n,u),inclusive:!0}).range(r,l))}(this.view,e.changes)),(ya.ie||ya.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=function(e,t,i){let o=new Vs;return po.compare(e,t,i,o),o.changes}(this.decorations,this.updateDeco(),e.changes);return t=ys.extendWithRanges(t,i),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=ya.chrome||ya.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.dirty=0,e&&(e.written||i.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Va&&a.widget instanceof Us&&o.push(a.dom);i.updateGaps(o)}updateChildren(e,t){let i=this.childCursor(t);for(let o=e.length-1;;o--){let t=o>=0?e[o]:null;if(!t)break;let{fromA:a,toA:s,fromB:n,toB:r}=t,{content:l,breakAtStart:c,openStart:d,openEnd:h}=Wa.build(this.view.state.doc,n,r,this.decorations,this.dynamicDecorationMap),{i:u,off:p}=i.findPos(s,1),{i:_,off:f}=i.findPos(a,-1);ra(this,_,f,u,p,l,c,d,h)}}updateSelection(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let t=this.view.root.activeElement,i=t==this.dom,o=!i&&zo(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t));if(!(i||e||o))return;let a=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,n=this.domAtPos(s.anchor),r=s.empty?n:this.domAtPos(s.head);if(ya.gecko&&s.empty&&!this.compositionDeco.size&&(1==(l=n).node.nodeType&&l.node.firstChild&&(0==l.offset||"false"==l.node.childNodes[l.offset-1].contentEditable)&&(l.offset==l.node.childNodes.length||"false"==l.node.childNodes[l.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore((()=>n.node.insertBefore(e,n.node.childNodes[n.offset]||null))),n=r=new ia(e,0),a=!0}var l;let c=this.view.observer.selectionRange;!a&&c.focusNode&&Bo(n.node,n.offset,c.anchorNode,c.anchorOffset)&&Bo(r.node,r.offset,c.focusNode,c.focusOffset)||(this.view.observer.ignore((()=>{ya.android&&ya.chrome&&this.dom.contains(c.focusNode)&&function(e,t){for(let i=e;i&&i!=t;i=i.assignedSlot||i.parentNode)if(1==i.nodeType&&"false"==i.contentEditable)return!0;return!1}(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=Ro(this.view.root);if(e)if(s.empty){if(ya.gecko){let e=(i=n.node,a=n.offset,1!=i.nodeType?0:(a&&"false"==i.childNodes[a-1].contentEditable?1:0)|(a<i.childNodes.length&&"false"==i.childNodes[a].contentEditable?2:0));if(e&&3!=e){let t=Hs(n.node,n.offset,1==e?1:-1);t&&(n=new ia(t,1==e?0:t.nodeValue.length))}}e.collapse(n.node,n.offset),null!=s.bidiLevel&&null!=c.cursorBidiLevel&&(c.cursorBidiLevel=s.bidiLevel)}else if(e.extend){e.collapse(n.node,n.offset);try{e.extend(r.node,r.offset)}catch(vv){}}else{let t=document.createRange();s.anchor>s.head&&([n,r]=[r,n]),t.setEnd(r.node,r.offset),t.setStart(n.node,n.offset),e.removeAllRanges(),e.addRange(t)}else;var i,a;o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),t&&t.focus())})),this.view.observer.setSelectionRange(n,r)),this.impreciseAnchor=n.precise?null:new ia(c.anchorNode,c.anchorOffset),this.impreciseHead=r.precise?null:new ia(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,i=Ro(e.root),{anchorNode:o,anchorOffset:a}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=Ha.find(this,t.head);if(!s)return;let n=s.posAtStart;if(t.head==n||t.head==n+s.length)return;let r=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!r||!l||r.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc);i.collapse(c.node,c.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&i.collapse(o,a)}nearest(e){for(let t=e;t;){let e=aa.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(i<e.length||e instanceof Ha)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,o=this.children.length-1;;o--){let a=this.children[o],s=i-a.breakAfter-a.length;if(e>s||e==s&&a.type!=Za.WidgetBefore&&a.type!=Za.WidgetAfter&&(!o||2==t||this.children[o-1].breakAfter||this.children[o-1].type==Za.WidgetBefore&&t>-2))return a.coordsAt(e-s,t);i=s}}measureVisibleLineHeights(e){let t=[],{from:i,to:o}=e,a=this.view.contentDOM.clientWidth,s=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,n=-1,r=this.view.textDirection==Ds.LTR;for(let l=0,c=0;c<this.children.length;c++){let e=this.children[c],d=l+e.length;if(d>o)break;if(l>=i){let i=e.dom.getBoundingClientRect();if(t.push(i.height),s){let t=e.dom.lastChild,o=t?Uo(t):[];if(o.length){let e=o[o.length-1],t=r?e.right-i.left:i.right-e.left;t>n&&(n=t,this.minWidth=a,this.minWidthFrom=l,this.minWidthTo=d)}}}l=d+e.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?Ds.RTL:Ds.LTR}measureTextSize(){for(let a of this.children)if(a instanceof Ha){let e=a.measureTextSize();if(e)return e}let e,t,i,o=document.createElement("div");return o.className="cm-line",o.style.width="99999px",o.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(o);let a=Uo(o.firstChild)[0];e=o.getBoundingClientRect().height,t=a?a.width/27:7,i=a?a.height:e,o.remove()})),{lineHeight:e,charWidth:t,textHeight:i}}childCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length,t=this.children.length;return t&&(e-=this.children[--t].length),new na(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,o=0;;o++){let a=o==t.viewports.length?null:t.viewports[o],s=a?a.from-1:this.length;if(s>i){let o=t.lineBlockAt(s).bottom-t.lineBlockAt(i).top;e.push(Ra.replace({widget:new Us(o),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!a)break;i=a.to+1}return Ra.set(e)}updateDeco(){let e=this.view.state.facet(fs).map(((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e));for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:i}=e,o=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1);if(!o)return;!i.empty&&(t=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(o={left:Math.min(o.left,t.left),top:Math.min(o.top,t.top),right:Math.max(o.right,t.right),bottom:Math.max(o.bottom,t.bottom)});let a=vs(this.view),s={left:o.left-a.left,top:o.top-a.top,right:o.right+a.right,bottom:o.bottom+a.bottom};!function(e,t,i,o,a,s,n,r){let l=e.ownerDocument,c=l.defaultView||window;for(let d=e;d;)if(1==d.nodeType){let e,h=d==l.body;if(h)e=Go(c);else{if(d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let t=d.getBoundingClientRect();e={left:t.left,right:t.left+d.clientWidth,top:t.top,bottom:t.top+d.clientHeight}}let u=0,p=0;if("nearest"==a)t.top<e.top?(p=-(e.top-t.top+n),i>0&&t.bottom>e.bottom+p&&(p=t.bottom-e.bottom+p+n)):t.bottom>e.bottom&&(p=t.bottom-e.bottom+n,i<0&&t.top-p<e.top&&(p=-(e.top+p-t.top+n)));else{let o=t.bottom-t.top,s=e.bottom-e.top;p=("center"==a&&o<=s?t.top+o/2-s/2:"start"==a||"center"==a&&i<0?t.top-n:t.bottom-s+n)-e.top}if("nearest"==o?t.left<e.left?(u=-(e.left-t.left+s),i>0&&t.right>e.right+u&&(u=t.right-e.right+u+s)):t.right>e.right&&(u=t.right-e.right+s,i<0&&t.left<e.left+u&&(u=-(e.left+u-t.left+s))):u=("center"==o?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==o==r?t.left-s:t.right-(e.right-e.left)+s)-e.left,u||p)if(h)c.scrollBy(u,p);else{let e=0,i=0;if(p){let e=d.scrollTop;d.scrollTop+=p,i=d.scrollTop-e}if(u){let t=d.scrollLeft;d.scrollLeft+=u,e=d.scrollLeft-t}t={left:t.left-e,top:t.top-i,right:t.right-e,bottom:t.bottom-i},e&&Math.abs(e-u)<1&&(o="nearest"),i&&Math.abs(i-p)<1&&(a="nearest")}if(h)break;d=d.assignedSlot||d.parentNode}else{if(11!=d.nodeType)break;d=d.host}}(this.view.scrollDOM,s,i.head<i.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Ds.LTR)}}class Us extends ja{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Bs(e){let t=e.observer.selectionRange,i=t.focusNode&&Hs(t.focusNode,t.focusOffset,0);if(!i)return null;let o=e.docView.nearest(i);if(!o)return null;if(o instanceof Ha){let e=i;for(;e.parentNode!=o.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!aa.get(t);)t=t.previousSibling;let a=t?aa.get(t).posAtEnd:o.posAtStart;return{from:a,to:a,node:e,text:i}}{for(;;){let{parent:e}=o;if(!e)return null;if(e instanceof Ha)break;o=e}let e=o.posAtStart;return{from:e,to:e+o.length,node:o.dom,text:i}}}class Ys extends ja{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return wa}}function Hs(e,t,i){if(i<=0)for(let o=e,a=t;;){if(3==o.nodeType)return o;if(!(1==o.nodeType&&a>0))break;o=o.childNodes[a-1],a=Vo(o)}if(i>=0)for(let o=e,a=t;;){if(3==o.nodeType)return o;if(!(1==o.nodeType&&a<o.childNodes.length&&i>=0))break;o=o.childNodes[a],a=0}return null}class Vs{constructor(){this.changes=[]}compareRange(e,t){Ya(e,t,this.changes)}comparePoint(e,t){Ya(e,t,this.changes)}}function Ws(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Gs(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function Js(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function qs(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Ks(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function Xs(e,t,i){let o,a,s,n,r,l,c,d,h=!1;for(let p=e.firstChild;p;p=p.nextSibling){let e=Uo(p);for(let u=0;u<e.length;u++){let _=e[u];a&&Js(a,_)&&(_=qs(Ks(_,a.bottom),a.top));let f=Ws(t,_),g=Gs(i,_);if(0==f&&0==g)return 3==p.nodeType?$s(p,t,i):Xs(p,t,i);if(!o||n>g||n==g&&s>f){o=p,a=_,s=f,n=g;let r=g?i<_.top?-1:1:f?t<_.left?-1:1:0;h=!r||(r>0?u<e.length-1:u>0)}0==f?i>_.bottom&&(!c||c.bottom<_.bottom)?(r=p,c=_):i<_.top&&(!d||d.top>_.top)&&(l=p,d=_):c&&Js(c,_)?c=Ks(c,_.bottom):d&&Js(d,_)&&(d=qs(d,_.top))}}if(c&&c.bottom>=i?(o=r,a=c):d&&d.top<=i&&(o=l,a=d),!o)return{node:e,offset:0};let u=Math.max(a.left,Math.min(a.right,t));return 3==o.nodeType?$s(o,u,i):h&&"false"!=o.contentEditable?Xs(o,u,i):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,o)+(t>=(a.left+a.right)/2?1:0)}}function $s(e,t,i){let o=e.nodeValue.length,a=-1,s=1e9,n=0;for(let r=0;r<o;r++){let o=$o(e,r,r+1).getClientRects();for(let l=0;l<o.length;l++){let c=o[l];if(c.top==c.bottom)continue;n||(n=t-c.left);let d=(c.top>i?c.top-i:i-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&d<s){let i=t>=(c.left+c.right)/2,o=i;if(ya.chrome||ya.gecko){$o(e,r).getBoundingClientRect().left==c.right&&(o=!i)}if(d<=0)return{node:e,offset:r+(o?1:0)};a=r+(o?1:0),s=d}}}return{node:e,offset:a>-1?a:n>0?e.nodeValue.length:0}}function en(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;var a,s;let n,r=e.contentDOM.getBoundingClientRect(),l=r.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,{x:d,y:h}=t,u=h-l;if(u<0)return 0;if(u>c)return e.state.doc.length;for(let y=e.defaultLineHeight/2,A=!1;n=e.elementAtHeight(u),n.type!=Za.Text;)for(;u=o>0?n.bottom+y:n.top-y,!(u>=0&&u<=c);){if(A)return i?null:0;A=!0,o=-o}h=l+u;let p=n.from;if(p<e.viewport.from)return 0==e.viewport.from?0:i?null:tn(e,r,n,d,h);if(p>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:i?null:tn(e,r,n,d,h);let _=e.dom.ownerDocument,f=e.root.elementFromPoint?e.root:_,g=f.elementFromPoint(d,h);g&&!e.contentDOM.contains(g)&&(g=null),g||(d=Math.max(r.left+1,Math.min(r.right-1,d)),g=f.elementFromPoint(d,h),g&&!e.contentDOM.contains(g)&&(g=null));let m,v=-1;if(g&&0!=(null===(a=e.docView.nearest(g))||void 0===a?void 0:a.isEditable))if(_.caretPositionFromPoint){let e=_.caretPositionFromPoint(d,h);e&&({offsetNode:m,offset:v}=e)}else if(_.caretRangeFromPoint){let t=_.caretRangeFromPoint(d,h);t&&(({startContainer:m,startOffset:v}=t),(!e.contentDOM.contains(m)||ya.safari&&function(e,t,i){let o;if(3!=e.nodeType||t!=(o=e.nodeValue.length))return!1;for(let a=e.nextSibling;a;a=a.nextSibling)if(1!=a.nodeType||"BR"!=a.nodeName)return!1;return $o(e,o-1,o).getBoundingClientRect().left>i}(m,v,d)||ya.chrome&&function(e,t,i){if(0!=t)return!1;for(let a=e;;){let e=a.parentNode;if(!e||1!=e.nodeType||e.firstChild!=a)return!1;if(e.classList.contains("cm-line"))break;a=e}let o=1==e.nodeType?e.getBoundingClientRect():$o(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return i-o.left>5}(m,v,d))&&(m=void 0))}if(!m||!e.docView.dom.contains(m)){let t=Ha.find(e.docView,p);if(!t)return u>n.top+n.height/2?n.to:n.from;({node:m,offset:v}=Xs(t.dom,d,h))}let b=e.docView.nearest(m);if(!b)return null;if(b.isWidget&&1==(null===(s=b.dom)||void 0===s?void 0:s.nodeType)){let e=b.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?b.posAtStart:b.posAtEnd}return b.localPosFromDOM(m,v)+b.posAtStart}function tn(e,t,i,o,a){let s=Math.round((o-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&i.height>1.5*e.defaultLineHeight){s+=Math.floor((a-i.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength}let n=e.state.sliceDoc(i.from,i.to);return i.from+Co(n,s,e.state.tabSize)}function on(e,t){let i=e.lineBlockAt(t);if(Array.isArray(i.type))for(let o of i.type)if(o.to>t||o.to==t&&(o.to==i.to||o.type==Za.Text))return o;return i}function an(e,t,i,o){let a=e.state.doc.lineAt(t.head),s=e.bidiSpans(a),n=e.textDirectionAt(a.from);for(let r=t,l=null;;){let t=Es(a,s,n,r,i),c=Ls;if(!t){if(a.number==(i?e.state.doc.lines:1))return r;c="\n",a=e.state.doc.line(a.number+(i?1:-1)),s=e.bidiSpans(a),t=fi.cursor(i?a.from:a.to)}if(l){if(!l(c))return r}else{if(!o)return t;l=o(c)}r=t}}function sn(e,t,i){for(;;){let o=0;for(let a of e)a.between(t-1,t+1,((e,a,s)=>{if(t>e&&t<a){let s=o||i||(t-e<a-t?-1:1);t=s<0?e:a,o=s}}));if(!o)return t}}function nn(e,t,i){let o=sn(e.state.facet(gs).map((t=>t(e))),i.from,t.head>i.from?-1:1);return o==i.from?i:fi.cursor(o,o<i.from?1:-1)}class rn{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let t=(t,i)=>{this.ignoreDuringComposition(i)||"keydown"==i.type&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(i.type,e,i)?i.preventDefault():t(e,i))};for(let i in _n){let o=_n[i];e.contentDOM.addEventListener(i,(i=>{pn(e,i)&&t(o,i)}),fn[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",(i=>{if(i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&(t(_n.mousedown,i),!i.defaultPrevented&&2==i.button)){let t=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout((()=>e.contentDOM.style.minHeight=t),200)}})),e.scrollDOM.addEventListener("drop",(i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(_n.drop,i)})),ya.chrome&&102==ya.chrome_version&&e.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=e.hasFocus,ya.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let o;this.customHandlers=[];for(let a of t)if(o=null===(i=a.update(e).spec)||void 0===i?void 0:i.domEventHandlers){this.customHandlers.push({plugin:a.value,handlers:o});for(let t in o)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(i=>{pn(e,i)&&this.runCustomHandlers(t,e,i)&&i.preventDefault()})))}}runCustomHandlers(e,t,i){for(let a of this.customHandlers){let s=a.handlers[e];if(s)try{if(s.call(a.plugin,i,t)||i.defaultPrevented)return!0}catch(o){rs(t.state,o)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let o of this.customHandlers){let a=o.handlers.scroll;if(a)try{a.call(o.plugin,t,e)}catch(i){rs(e.state,i)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(27!=t.keyCode&&dn.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0),ya.android&&ya.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return!(!ya.ios||t.synthetic||t.altKey||t.metaKey||!((i=ln.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||cn.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey))&&(this.pendingIOSKey=i||t,setTimeout((()=>this.flushIOSKey(e)),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,ea(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(ya.safari&&!ya.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const ln=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],cn="dthko",dn=[16,17,18,20,91,92,224,225];function hn(e){return.7*Math.max(0,e)+8}class un{constructor(e,t,i,o){this.view=e,this.style=i,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=function(e){let t=e.ownerDocument;for(let i=e.parentNode;i&&i!=t.body;)if(1==i.nodeType){if(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)return i;i=i.assignedSlot||i.parentNode}else{if(11!=i.nodeType)break;i=i.host}return null}(e.contentDOM),this.atoms=e.state.facet(gs).map((t=>t(e)));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(no.allowMultipleSelections)&&function(e,t){let i=e.state.facet(qa);return i.length?i[0](t):ya.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){let i=e.state.facet(Ka);return i.length?i[0](t):ya.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:i}=e.state.selection;if(i.empty)return!1;let o=Ro(e.root);if(!o||0==o.rangeCount)return!0;let a=o.getRangeAt(0).getClientRects();for(let s=0;s<a.length;s++){let e=a[s];if(e.left<=t.clientX&&e.right>=t.clientX&&e.top<=t.clientY&&e.bottom>=t.clientY)return!0}return!1}(e,t)||1!=xn(t))&&null}start(e){!1===this.dragging&&(e.preventDefault(),this.select(e))}move(e){var t;if(0==e.buttons)return this.destroy();if(!1!==this.dragging)return;this.select(this.lastEvent=e);let i=0,o=0,a=(null===(t=this.scrollParent)||void 0===t?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},s=vs(this.view);e.clientX-s.left<=a.left+6?i=-hn(a.left-e.clientX):e.clientX+s.right>=a.right-6&&(i=hn(e.clientX-a.right)),e.clientY-s.top<=a.top+6?o=-hn(a.top-e.clientY):e.clientY+s.bottom>=a.bottom-6&&(o=hn(e.clientY-a.bottom)),this.setScrollSpeed(i,o)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let o=e.ranges[i],a=null;if(o.empty){let e=sn(this.atoms,o.from,0);e!=o.from&&(a=fi.cursor(e,-1))}else{let e=sn(this.atoms,o.from,-1),t=sn(this.atoms,o.to,1);e==o.from&&t==o.to||(a=fi.range(o.from==o.anchor?e:t,o.from==o.head?e:t))}a&&(t||(t=e.ranges.slice()),t[i]=a)}return t?fi.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));!this.mustSelect&&i.eq(t.state.selection)&&i.main.assoc==t.state.selection.main.assoc||this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function pn(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let i,o=t.target;o!=e.contentDOM;o=o.parentNode)if(!o||11==o.nodeType||(i=aa.get(o))&&i.ignoreEvent(t))return!1;return!0}const _n=Object.create(null),fn=Object.create(null),gn=ya.ie&&ya.ie_version<15||ya.ios&&ya.webkit_version<604;function mn(e,t){let i,{state:o}=e,a=1,s=o.toText(t),n=s.lines==o.selection.ranges.length;if(null!=Mn&&o.selection.ranges.every((e=>e.empty))&&Mn==s.toString()){let e=-1;i=o.changeByRange((i=>{let r=o.doc.lineAt(i.from);if(r.from==e)return{range:i};e=r.from;let l=o.toText((n?s.line(a++).text:t)+o.lineBreak);return{changes:{from:r.from,insert:l},range:fi.cursor(i.from+l.length)}}))}else i=n?o.changeByRange((e=>{let t=s.line(a++);return{changes:{from:e.from,to:e.to,insert:t.text},range:fi.cursor(e.from+t.length)}})):o.replaceSelection(s);e.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}function vn(e,t,i,o){if(1==o)return fi.cursor(t,i);if(2==o)return function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=e.charCategorizer(t),a=e.doc.lineAt(t),s=t-a.from;if(0==a.length)return fi.cursor(t);0==s?i=1:s==a.length&&(i=-1);let n=s,r=s;i<0?n=qt(a.text,s,!1):r=qt(a.text,s);let l=o(a.text.slice(n,r));for(;n>0;){let e=qt(a.text,n,!1);if(o(a.text.slice(e,n))!=l)break;n=e}for(;r<a.length;){let e=qt(a.text,r);if(o(a.text.slice(r,e))!=l)break;r=e}return fi.range(n+a.from,r+a.from)}(e.state,t,i);{let i=Ha.find(e.docView,t),o=e.state.doc.lineAt(i?i.posAtEnd:t),a=i?i.posAtStart:o.from,s=i?i.posAtEnd:o.to;return s<e.state.doc.length&&s==o.to&&s++,fi.range(a,s)}}_n.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),27==t.keyCode&&(e.inputState.lastEscPress=Date.now())},_n.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},_n.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},fn.touchstart=fn.touchmove={passive:!0},_n.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return;let i=null;for(let o of e.state.facet(Xa))if(i=o(e,t),i)break;if(i||0!=t.button||(i=function(e,t){let i=Dn(e,t),o=xn(t),a=e.state.selection;return{update(e){e.docChanged&&(i.pos=e.changes.mapPos(i.pos),a=a.map(e.changes))},get(t,s,n){let r,l=Dn(e,t),c=vn(e,l.pos,l.bias,o);if(i.pos!=l.pos&&!s){let t=vn(e,i.pos,i.bias,o),a=Math.min(t.from,c.from),s=Math.max(t.to,c.to);c=a<c.from?fi.range(a,s):fi.range(s,a)}return s?a.replaceRange(a.main.extend(c.from,c.to)):n&&1==o&&a.ranges.length>1&&(r=function(e,t){for(let i=0;i<e.ranges.length;i++){let{from:o,to:a}=e.ranges[i];if(o<=t&&a>=t)return fi.create(e.ranges.slice(0,i).concat(e.ranges.slice(i+1)),e.mainIndex==i?0:e.mainIndex-(e.mainIndex>i?1:0))}return null}(a,l.pos))?r:n?a.addRange(c):fi.create([c])}}}(e,t)),i){let o=e.root.activeElement!=e.contentDOM;e.inputState.startMouseSelection(new un(e,t,i,o)),o&&e.observer.ignore((()=>Xo(e.contentDOM))),e.inputState.mouseSelection&&e.inputState.mouseSelection.start(t)}};let bn=(e,t)=>e>=t.top&&e<=t.bottom,yn=(e,t,i)=>bn(t,i)&&e>=i.left&&e<=i.right;function An(e,t,i,o){let a=Ha.find(e.docView,t);if(!a)return 1;let s=t-a.posAtStart;if(0==s)return 1;if(s==a.length)return-1;let n=a.coordsAt(s,-1);if(n&&yn(i,o,n))return-1;let r=a.coordsAt(s,1);return r&&yn(i,o,r)?1:n&&bn(o,n)?-1:1}function Dn(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:i,bias:An(e,i,t.clientX,t.clientY)}}const kn=ya.ie&&ya.ie_version<=11;let On=null,wn=0,Cn=0;function xn(e){if(!kn)return e.detail;let t=On,i=Cn;return On=e,Cn=Date.now(),wn=!t||i>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(wn+1)%3:1}function Sn(e,t,i,o){if(!i)return;let a=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:s}=e.inputState,n=o&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,r={from:a,insert:i},l=e.state.changes(n?[n,r]:r);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(a,-1),head:l.mapPos(a,1)},userEvent:n?"move.drop":"input.drop"})}_n.dragstart=(e,t)=>{let{selection:{main:i}}=e.state,{mouseSelection:o}=e.inputState;o&&(o.dragging=i),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(i.from,i.to)),t.dataTransfer.effectAllowed="copyMove")},_n.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let i=t.dataTransfer.files;if(i&&i.length){t.preventDefault();let o=Array(i.length),a=0,s=()=>{++a==i.length&&Sn(e,t,o.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<i.length;e++){let t=new FileReader;t.onerror=s,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(o[e]=t.result),s()},t.readAsText(i[e])}}else Sn(e,t,t.dataTransfer.getData("Text"),!0)},_n.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let i=gn?null:t.clipboardData;i?(mn(e,i.getData("text/plain")||i.getData("text/uri-text")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((()=>{e.focus(),i.remove(),mn(e,i.value)}),50)}(e)};let Mn=null;_n.copy=_n.cut=(e,t)=>{let{text:i,ranges:o,linewise:a}=function(e){let t=[],i=[],o=!1;for(let a of e.selection.ranges)a.empty||(t.push(e.sliceDoc(a.from,a.to)),i.push(a));if(!t.length){let a=-1;for(let{from:o}of e.selection.ranges){let s=e.doc.lineAt(o);s.number>a&&(t.push(s.text),i.push({from:s.from,to:Math.min(e.doc.length,s.to+1)})),a=s.number}o=!0}return{text:t.join(e.lineBreak),ranges:i,linewise:o}}(e.state);if(!i&&!a)return;Mn=a?i:null;let s=gn?null:t.clipboardData;s?(t.preventDefault(),s.clearData(),s.setData("text/plain",i)):function(e,t){let i=e.dom.parentNode;if(!i)return;let o=i.appendChild(document.createElement("textarea"));o.style.cssText="position: fixed; left: -10000px; top: 10px",o.value=t,o.focus(),o.selectionEnd=t.length,o.selectionStart=0,setTimeout((()=>{o.remove(),e.focus()}),50)}(e,i),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:o,scrollIntoView:!0,userEvent:"delete.cut"})};const Pn=Hi.define();function Tn(e,t){let i=[];for(let o of e.facet(is)){let a=o(e,t);a&&i.push(a)}return i?e.update({effects:i,annotations:Pn.of(!0)}):null}function In(e){setTimeout((()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let i=Tn(e.state,t);i?e.dispatch(i):e.update([])}}),10)}_n.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),In(e)},_n.blur=e=>{e.observer.clearSelectionRange(),In(e)},_n.compositionstart=_n.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0)},_n.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,ya.chrome&&ya.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then((()=>e.observer.flush())):setTimeout((()=>{e.inputState.composing<0&&e.docView.compositionDeco.size&&e.update([])}),50)},_n.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},_n.beforeinput=(e,t)=>{var i;let o;if(ya.chrome&&ya.android&&(o=ln.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(o.key,o.keyCode),"Backspace"==o.key||"Delete"==o.key)){let t=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var i;((null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};const Nn=["pre-wrap","normal","pre-line","break-spaces"];class Fn{constructor(e){this.lineWrapping=e,this.doc=jt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Nn.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let o=e[i];o<0?i++:this.heightSamples[Math.floor(10*o)]||(t=!0,this.heightSamples[Math.floor(10*o)]=!0)}return t}refresh(e,t,i,o,a,s){let n=Nn.indexOf(e)>-1,r=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=n;if(this.lineWrapping=n,this.lineHeight=t,this.charWidth=i,this.textHeight=o,this.lineLength=a,r){this.heightSamples={};for(let e=0;e<s.length;e++){let t=s[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return r}}class Ln{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class En{constructor(e,t,i,o,a){this.from=e,this.length=t,this.top=i,this.height=o,this._content=a}get type(){return"number"==typeof this._content?Za.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ua?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new En(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var jn=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(jn||(jn={}));const Zn=.001;class Rn{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this.length=e,this.height=t,this.flags=i}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Zn&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Rn.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,o){let a=this,s=i.doc;for(let n=o.length-1;n>=0;n--){let{fromA:r,toA:l,fromB:c,toB:d}=o[n],h=a.lineAt(r,jn.ByPosNoHeight,i.setDoc(t),0,0),u=h.to>=l?h:a.lineAt(l,jn.ByPosNoHeight,i,0,0);for(d+=u.to-l,l=u.to;n>0&&h.from<=o[n-1].toA;)r=o[n-1].fromA,c=o[n-1].fromB,n--,r<h.from&&(h=a.lineAt(r,jn.ByPosNoHeight,i,0,0));c+=h.from-r,r=h.from;let p=Hn.build(i.setDoc(s),e,c,d);a=a.replace(r,l,p)}return a.updateHeight(i,0)}static empty(){return new zn(0,0)}static of(e){if(1==e.length)return e[0];let t=0,i=e.length,o=0,a=0;for(;;)if(t==i)if(o>2*a){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,o-=a.size}else{if(!(a>2*o))break;{let t=e[i];t.break?e.splice(i,1,t.left,null,t.right):e.splice(i,1,t.left,t.right),i+=2+t.break,a-=t.size}}else if(o<a){let i=e[t++];i&&(o+=i.size)}else{let t=e[--i];t&&(a+=t.size)}let s=0;return null==e[t-1]?(s=1,t--):null==e[t]&&(s=1,i++),new Bn(Rn.of(e.slice(0,t)),s,Rn.of(e.slice(i)))}}Rn.prototype.size=1;class Qn extends Rn{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,o){return new En(o,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,o,a){return this.blockAt(0,i,o,a)}forEachLine(e,t,i,o,a,s){e<=a+this.length&&t>=a&&s(this.blockAt(0,i,o,a))}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>3?arguments[3]:void 0;return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class zn extends Qn{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,o){return new En(o,this.length,i,this.height,this.breaks)}replace(e,t,i){let o=i[0];return 1==i.length&&(o instanceof zn||o instanceof Un&&4&o.flags)&&Math.abs(this.length-o.length)<10?(o instanceof Un?o=new zn(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):Rn.of(i)}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return o&&o.from<=t&&o.more?this.setHeight(e,o.heights[o.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Un extends Rn{constructor(e){super(e,0)}heightMetrics(e,t){let i,o=e.doc.lineAt(t).number,a=e.doc.lineAt(t+this.length).number,s=a-o+1,n=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*s);i=t/s,this.length>s+1&&(n=(this.height-t)/(this.length-s-1))}else i=this.height/s;return{firstLine:o,lastLine:a,perLine:i,perChar:n}}blockAt(e,t,i,o){let{firstLine:a,lastLine:s,perLine:n,perChar:r}=this.heightMetrics(t,o);if(t.lineWrapping){let a=o+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),s=t.doc.lineAt(a),l=n+s.length*r,c=Math.max(i,e-l/2);return new En(s.from,s.length,c,l,0)}{let o=Math.max(0,Math.min(s-a,Math.floor((e-i)/n))),{from:r,length:l}=t.doc.line(a+o);return new En(r,l,i+n*o,n,0)}}lineAt(e,t,i,o,a){if(t==jn.ByHeight)return this.blockAt(e,i,o,a);if(t==jn.ByPosNoHeight){let{from:t,to:o}=i.doc.lineAt(e);return new En(t,o-t,0,0,0)}let{firstLine:s,perLine:n,perChar:r}=this.heightMetrics(i,a),l=i.doc.lineAt(e),c=n+l.length*r,d=l.number-s,h=o+n*d+r*(l.from-a-d);return new En(l.from,l.length,Math.max(o,Math.min(h,o+this.height-c)),c,0)}forEachLine(e,t,i,o,a,s){e=Math.max(e,a),t=Math.min(t,a+this.length);let{firstLine:n,perLine:r,perChar:l}=this.heightMetrics(i,a);for(let c=e,d=o;c<=t;){let t=i.doc.lineAt(c);if(c==e){let i=t.number-n;d+=r*i+l*(e-a-i)}let o=r+l*t.length;s(new En(t.from,t.length,d,o,0)),d+=o,c=t.to+1}}replace(e,t,i){let o=this.length-t;if(o>0){let e=i[i.length-1];e instanceof Un?i[i.length-1]=new Un(e.length+o):i.push(null,new Un(o-1))}if(e>0){let t=i[0];t instanceof Un?i[0]=new Un(e+t.length):i.unshift(new Un(e-1),null)}return Rn.of(i)}decomposeLeft(e,t){t.push(new Un(e-1),null)}decomposeRight(e,t){t.push(null,new Un(this.length-e-1))}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=t+this.length;if(o&&o.from<=t+this.length&&o.more){let i=[],s=Math.max(t,o.from),n=-1;for(o.from>t&&i.push(new Un(o.from-t-1).updateHeight(e,t));s<=a&&o.more;){let t=e.doc.lineAt(s).length;i.length&&i.push(null);let a=o.heights[o.index++];-1==n?n=a:Math.abs(a-n)>=Zn&&(n=-2);let r=new zn(t,a);r.outdated=!1,i.push(r),s+=t+1}s<=a&&i.push(null,new Un(a-s).updateHeight(e,s));let r=Rn.of(i);return(n<0||Math.abs(r.height-this.height)>=Zn||Math.abs(n-this.heightMetrics(e,t).perLine)>=Zn)&&(e.heightChanged=!0),r}return(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Bn extends Rn{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return 1&this.flags}blockAt(e,t,i,o){let a=i+this.left.height;return e<a?this.left.blockAt(e,t,i,o):this.right.blockAt(e,t,a,o+this.left.length+this.break)}lineAt(e,t,i,o,a){let s=o+this.left.height,n=a+this.left.length+this.break,r=t==jn.ByHeight?e<s:e<n,l=r?this.left.lineAt(e,t,i,o,a):this.right.lineAt(e,t,i,s,n);if(this.break||(r?l.to<n:l.from>n))return l;let c=t==jn.ByPosNoHeight?jn.ByPosNoHeight:jn.ByPos;return r?l.join(this.right.lineAt(n,c,i,s,n)):this.left.lineAt(n,c,i,o,a).join(l)}forEachLine(e,t,i,o,a,s){let n=o+this.left.height,r=a+this.left.length+this.break;if(this.break)e<r&&this.left.forEachLine(e,t,i,o,a,s),t>=r&&this.right.forEachLine(e,t,i,n,r,s);else{let l=this.lineAt(r,jn.ByPos,i,o,a);e<l.from&&this.left.forEachLine(e,l.from-1,i,o,a,s),l.to>=e&&l.from<=t&&s(l),t>l.to&&this.right.forEachLine(l.to+1,t,i,n,r,s)}}replace(e,t,i){let o=this.left.length+this.break;if(t<o)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-o,t-o,i));let a=[];e>0&&this.decomposeLeft(e,a);let s=a.length;for(let n of i)a.push(n);if(e>0&&Yn(a,s-1),t<this.length){let e=a.length;this.decomposeRight(t,a),Yn(a,e)}return Rn.of(a)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,o=i+this.break;if(e>=o)return this.right.decomposeRight(e-o,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<o&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Rn.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,{left:a,right:s}=this,n=t+a.length+this.break,r=null;return o&&o.from<=t+a.length&&o.more?r=a=a.updateHeight(e,t,i,o):a.updateHeight(e,t,i),o&&o.from<=n+s.length&&o.more?r=s=s.updateHeight(e,n,i,o):s.updateHeight(e,n,i),r?this.balanced(a,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Yn(e,t){let i,o;null==e[t]&&(i=e[t-1])instanceof Un&&(o=e[t+1])instanceof Un&&e.splice(t-1,3,new Un(i.length+1+o.length))}class Hn{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof zn?i.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new zn(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let o=i.widget?i.widget.estimatedHeight:0,a=i.widget?i.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new Qn(s,o,i)):(s||a||o>=5)&&this.addLineDeco(o,a,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new zn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Un(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof zn)return e;let t=new zn(0,-1);return this.nodes.push(t),t}addBlock(e){var t;this.enterLine();let i=null===(t=e.deco)||void 0===t?void 0:t.type;i!=Za.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i!=Za.WidgetBefore&&(this.covering=e)}addLineDeco(e,t,i){let o=this.ensureLine();o.length+=i,o.collapsed+=i,o.widgetHeight=Math.max(o.widgetHeight,e),o.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof zn||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new zn(0,-1));let i=e;for(let o of this.nodes)o instanceof zn&&o.updateHeight(this.oracle,i),i+=o?o.length:1;return this.nodes}static build(e,t,i,o){let a=new Hn(i,e);return po.spans(t,i,o,a,0),a.finish(i)}}class Vn{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,o){(e<t||i&&i.heightRelevant||o&&o.heightRelevant)&&Ya(e,t,this.changes,5)}}function Wn(e,t){let i=e.getBoundingClientRect(),o=e.ownerDocument,a=o.defaultView||window,s=Math.max(0,i.left),n=Math.min(a.innerWidth,i.right),r=Math.max(0,i.top),l=Math.min(a.innerHeight,i.bottom);for(let c=e.parentNode;c&&c!=o.body;)if(1==c.nodeType){let t=c,i=window.getComputedStyle(t);if((t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&"visible"!=i.overflow){let i=t.getBoundingClientRect();s=Math.max(s,i.left),n=Math.min(n,i.right),r=Math.max(r,i.top),l=c==e.parentNode?i.bottom:Math.min(l,i.bottom)}c="absolute"==i.position||"fixed"==i.position?t.offsetParent:t.parentNode}else{if(11!=c.nodeType)break;c=c.host}return{left:s-i.left,right:Math.max(s,n)-i.left,top:r-(i.top+t),bottom:Math.max(r,l)-(i.top+t)}}function Gn(e,t){let i=e.getBoundingClientRect();return{left:0,right:i.right-i.left,top:t,bottom:i.bottom-(i.top+t)}}class Jn{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let o=e[i],a=t[i];if(o.from!=a.from||o.to!=a.to||o.size!=a.size)return!1}return!0}draw(e){return Ra.replace({widget:new qn(this.size,e)}).range(this.from,this.to)}}class qn extends ja{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Kn{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=ir,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ds.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(_s).some((e=>"function"!=typeof e&&"cm-lineWrapping"==e.class));this.heightOracle=new Fn(t),this.stateDeco=e.facet(fs).filter((e=>"function"!=typeof e)),this.heightMap=Rn.empty().applyChanges(this.stateDeco,jt.empty,this.heightOracle.setDoc(e.doc),[new ys(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ra.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let o=i?t.head:t.anchor;if(!e.some((e=>{let{from:t,to:i}=e;return o>=t&&o<=i}))){let{from:t,to:i}=this.lineBlockAt(o);e.push(new Xn(t,i))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?ir:new or(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:ar(e,this.scaler))}))}update(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(fs).filter((e=>"function"!=typeof e));let o=e.changedRanges,a=ys.extendWithRanges(o,function(e,t,i){let o=new Vn;return po.compare(e,t,i,o,0),o.changes}(i,this.stateDeco,e?e.changes:ri.empty(this.state.doc.length))),s=this.heightMap.height,n=this.scrolledToBottom?null:this.lineBlockAtHeight(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=s&&(e.flags|=2),n?(this.scrollAnchorPos=e.changes.mapPos(n.from,-1),this.scrollAnchorHeight=n.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let r=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<r.from||t.range.head>r.to)||!this.viewportIsAppropriate(r))&&(r=this.getViewport(0,t));let l=!e.changes.empty||2&e.flags||r.from!=this.viewport.from||r.to!=this.viewport.to;this.viewport=r,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(as)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),o=this.heightOracle,a=i.whiteSpace;this.defaultTextDirection="rtl"==i.direction?Ds.RTL:Ds.LTR;let s=this.heightOracle.mustRefreshForWrapping(a),n=t.getBoundingClientRect(),r=s||this.mustMeasureContent||this.contentDOMHeight!=n.height;this.contentDOMHeight=n.height,this.mustMeasureContent=!1;let l=0,c=0,d=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;this.paddingTop==d&&this.paddingBottom==h||(this.paddingTop=d,this.paddingBottom=h,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(r=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=this.scrollTop>e.scrollDOM.scrollHeight-e.scrollDOM.clientHeight-4;let u=(this.printing?Gn:Wn)(t,this.paddingTop),p=u.top-this.pixelViewport.top,_=u.bottom-this.pixelViewport.bottom;this.pixelViewport=u;let f=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(f!=this.inView&&(this.inView=f,f&&(r=!0)),!this.inView&&!this.scrollTarget)return 0;let g=n.width;if(this.contentDOMWidth==g&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=n.width,this.editorHeight=e.scrollDOM.clientHeight,l|=8),r){let t=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(t)&&(s=!0),s||o.lineWrapping&&Math.abs(g-this.contentDOMWidth)>o.charWidth){let{lineHeight:i,charWidth:n,textHeight:r}=e.docView.measureTextSize();s=i>0&&o.refresh(a,i,n,r,g/n,t),s&&(e.docView.minWidth=0,l|=8)}p>0&&_>0?c=Math.max(p,_):p<0&&_<0&&(c=Math.min(p,_)),o.heightChanged=!1;for(let i of this.viewports){let a=i.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(i);this.heightMap=(s?Rn.empty().applyChanges(this.stateDeco,jt.empty,this.heightOracle,[new ys(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,s,new Ln(i.from,a))}o.heightChanged&&(l|=2)}let m=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return m&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(2&l||m)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),o=this.heightMap,a=this.heightOracle,{visibleTop:s,visibleBottom:n}=this,r=new Xn(o.lineAt(s-1e3*i,jn.ByHeight,a,0,0).from,o.lineAt(n+1e3*(1-i),jn.ByHeight,a,0,0).to);if(t){let{head:e}=t.range;if(e<r.from||e>r.to){let i,s=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),n=o.lineAt(e,jn.ByPos,a,0,0);i="center"==t.y?(n.top+n.bottom)/2-s/2:"start"==t.y||"nearest"==t.y&&e<r.from?n.top:n.bottom-s,r=new Xn(o.lineAt(i-500,jn.ByHeight,a,0,0).from,o.lineAt(i+s+500,jn.ByHeight,a,0,0).to)}}return r}mapViewport(e,t){let i=t.mapPos(e.from,-1),o=t.mapPos(e.to,1);return new Xn(this.heightMap.lineAt(i,jn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,jn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate(e){let{from:t,to:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.inView)return!0;let{top:a}=this.heightMap.lineAt(t,jn.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(i,jn.ByPos,this.heightOracle,0,0),{visibleTop:n,visibleBottom:r}=this;return(0==t||a<=n-Math.max(10,Math.min(-o,250)))&&(i==this.state.doc.length||s>=r+Math.max(10,Math.min(o,250)))&&a>n-2e3&&s<r+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let o of e)t.touchesRange(o.from,o.to)||i.push(new Jn(t.mapPos(o.from),t.mapPos(o.to),o.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,o=i?1e4:2e3,a=o>>1,s=o<<1;if(this.defaultTextDirection!=Ds.LTR&&!i)return[];let n=[],r=(o,s,l,c)=>{if(s-o<a)return;let d=this.state.selection.main,h=[d.from];d.empty||h.push(d.to);for(let e of h)if(e>o&&e<s)return r(o,e-10,l,c),void r(e+10,s,l,c);let u=function(e,t){for(let i of e)if(t(i))return i;return}(e,(e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-o)<a&&Math.abs(e.to-s)<a&&!h.some((t=>e.from<t&&e.to>t))));if(!u){if(s<l.to&&t&&i&&t.visibleRanges.some((e=>e.from<=s&&e.to>=s))){let e=t.moveToLineBoundary(fi.cursor(s),!1,!0).head;e>o&&(s=e)}u=new Jn(o,s,this.gapSize(l,o,s,c))}n.push(u)};for(let l of this.viewportLines){if(l.length<s)continue;let e=$n(l.from,l.to,this.stateDeco);if(e.total<s)continue;let t,a,n=this.scrollTarget?this.scrollTarget.range.head:null;if(i){let i,s,r=o/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=n){let t=tr(e,n),o=((this.visibleBottom-this.visibleTop)/2+r)/l.height;i=t-o,s=t+o}else i=(this.visibleTop-l.top-r)/l.height,s=(this.visibleBottom-l.top+r)/l.height;t=er(e,i),a=er(e,s)}else{let i,s,r=e.total*this.heightOracle.charWidth,l=o*this.heightOracle.charWidth;if(null!=n){let t=tr(e,n),o=((this.pixelViewport.right-this.pixelViewport.left)/2+l)/r;i=t-o,s=t+o}else i=(this.pixelViewport.left-l)/r,s=(this.pixelViewport.right+l)/r;t=er(e,i),a=er(e,s)}t>l.from&&r(l.from,t,l,e),a<l.to&&r(a,l.to,l,e)}return n}gapSize(e,t,i,o){let a=tr(o,i)-tr(o,t);return this.heightOracle.lineWrapping?e.height*a:o.total*this.heightOracle.charWidth*a}updateLineGaps(e){Jn.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ra.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];po.spans(e,this.viewport.from,this.viewport.to,{span(e,i){t.push({from:e,to:i})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,i)=>e.from!=t[i].from||e.to!=t[i].to));return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||ar(this.heightMap.lineAt(e,jn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return ar(this.heightMap.lineAt(this.scaler.fromDOM(e),jn.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return ar(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Xn{constructor(e,t){this.from=e,this.to=t}}function $n(e,t,i){let o=[],a=e,s=0;return po.spans(i,e,t,{span(){},point(e,t){e>a&&(o.push({from:a,to:e}),s+=e-a),a=t}},20),a<t&&(o.push({from:a,to:t}),s+=t-a),{total:s,ranges:o}}function er(e,t){let{total:i,ranges:o}=e;if(t<=0)return o[0].from;if(t>=1)return o[o.length-1].to;let a=Math.floor(i*t);for(let s=0;;s++){let{from:e,to:t}=o[s],i=t-e;if(a<=i)return e+a;a-=i}}function tr(e,t){let i=0;for(let{from:o,to:a}of e.ranges){if(t<=a){i+=t-o;break}i+=a-o}return i/e.total}const ir={toDOM:e=>e,fromDOM:e=>e,scale:1};class or{constructor(e,t,i){let o=0,a=0,s=0;this.viewports=i.map((i=>{let{from:a,to:s}=i,n=t.lineAt(a,jn.ByPos,e,0,0).top,r=t.lineAt(s,jn.ByPos,e,0,0).bottom;return o+=r-n,{from:a,to:s,top:n,bottom:r,domTop:0,domBottom:0}})),this.scale=(7e6-o)/(t.height-o);for(let n of this.viewports)n.domTop=s+(n.top-a)*this.scale,s=n.domBottom=n.domTop+(n.bottom-n.top),a=n.bottom}toDOM(e){for(let t=0,i=0,o=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.top)return o+(e-i)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);i=a.bottom,o=a.domBottom}}fromDOM(e){for(let t=0,i=0,o=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.domTop)return i+(e-o)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);i=a.bottom,o=a.domBottom}}}function ar(e,t){if(1==t.scale)return e;let i=t.toDOM(e.top),o=t.toDOM(e.bottom);return new En(e.from,e.length,i,o-i,Array.isArray(e._content)?e._content.map((e=>ar(e,t))):e._content)}const sr=vi.define({combine:e=>e.join(" ")}),nr=vi.define({combine:e=>e.indexOf(!0)>-1}),rr=Po.newName(),lr=Po.newName(),cr=Po.newName(),dr={"&light":"."+lr,"&dark":"."+cr};function hr(e,t,i){return new Po(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!i||!i[t])throw new RangeError(`Unsupported selector: ${t}`);return i[t]})):e+" "+t})}const ur=hr("."+rr,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},dr);class pr{constructor(e,t,i,o){this.typeOver=o,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let t=a||s?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:i,anchorOffset:o,focusNode:a,focusOffset:s}=e.observer.selectionRange;i&&(t.push(new Qs(i,o)),a==i&&s==o||t.push(new Qs(a,s)));return t}(e),i=new Zs(t,e.state);i.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=i.text,this.newSel=function(e,t){if(0==e.length)return null;let i=e[0].pos,o=2==e.length?e[1].pos:i;return i>-1&&o>-1?fi.single(i+t,o+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,i=a&&a.node==t.focusNode&&a.offset==t.focusOffset||!Qo(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),o=s&&s.node==t.anchorNode&&s.offset==t.anchorOffset||!Qo(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);this.newSel=fi.single(o,i)}}}function _r(e,t){let i,{newSel:o}=t,a=e.state.selection.main,s=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:o,to:n}=t.bounds,r=a.from,l=null;(8===s||ya.android&&t.text.length<n-o)&&(r=a.to,l="end");let c=function(e,t,i,o){let a=Math.min(e.length,t.length),s=0;for(;s<a&&e.charCodeAt(s)==t.charCodeAt(s);)s++;if(s==a&&e.length==t.length)return null;let n=e.length,r=t.length;for(;n>0&&r>0&&e.charCodeAt(n-1)==t.charCodeAt(r-1);)n--,r--;if("end"==o){i-=n+Math.max(0,s-Math.min(n,r))-s}if(n<s&&e.length<t.length){s-=i<=s&&i>=n?s-i:0,r=s+(r-n),n=s}else if(r<s){s-=i<=s&&i>=r?s-i:0,n=s+(n-r),r=s}return{from:s,toA:n,toB:r}}(e.state.doc.sliceString(o,n,js),t.text,r-o,l);c&&(ya.chrome&&13==s&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==js+js&&c.toB--,i={from:o+c.from,to:o+c.toA,insert:jt.of(t.text.slice(c.from,c.toB).split(js))})}else o&&(!e.hasFocus&&e.state.facet(ls)||o.main.eq(a))&&(o=null);if(!i&&!o)return!1;if(!i&&t.typeOver&&!a.empty&&o&&o.main.empty?i={from:a.from,to:a.to,insert:e.state.doc.slice(a.from,a.to)}:i&&i.from>=a.from&&i.to<=a.to&&(i.from!=a.from||i.to!=a.to)&&a.to-a.from-(i.to-i.from)<=4?i={from:a.from,to:a.to,insert:e.state.doc.slice(a.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,a.to))}:(ya.mac||ya.android)&&i&&i.from==i.to&&i.from==a.head-1&&/^\. ?$/.test(i.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(o&&2==i.insert.length&&(o=fi.single(o.main.anchor-1,o.main.head-1)),i={from:a.from,to:a.to,insert:jt.of([" "])}):ya.chrome&&i&&i.from==i.to&&i.from==a.head&&"\n "==i.insert.toString()&&e.lineWrapping&&(o&&(o=fi.single(o.main.anchor-1,o.main.head-1)),i={from:a.from,to:a.to,insert:jt.of([" "])}),i){let t=e.state;if(ya.ios&&e.inputState.flushIOSKey(e))return!0;if(ya.android&&(i.from==a.from&&i.to==a.to&&1==i.insert.length&&2==i.insert.lines&&ea(e.contentDOM,"Enter",13)||(i.from==a.from-1&&i.to==a.to&&0==i.insert.length||8==s&&i.insert.length<i.to-i.from)&&ea(e.contentDOM,"Backspace",8)||i.from==a.from&&i.to==a.to+1&&0==i.insert.length&&ea(e.contentDOM,"Delete",46)))return!0;let n,r=i.insert.toString();if(e.state.facet(ts).some((t=>t(e,i.from,i.to,r))))return!0;if(e.inputState.composing>=0&&e.inputState.composing++,i.from>=a.from&&i.to<=a.to&&i.to-i.from>=(a.to-a.from)/3&&(!o||o.main.empty&&o.main.from==i.from+i.insert.length)&&e.inputState.composing<0){let o=a.from<i.from?t.sliceDoc(a.from,i.from):"",s=a.to>i.to?t.sliceDoc(i.to,a.to):"";n=t.replaceSelection(e.state.toText(o+i.insert.sliceString(0,void 0,e.state.lineBreak)+s))}else{let s=t.changes(i),r=o&&o.main.to<=s.newLength?o.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&i.to<=a.to&&i.to>=a.to-10){let o=e.state.sliceDoc(i.from,i.to),l=Bs(e)||e.state.doc.lineAt(a.head),c=a.to-i.to,d=a.to-a.from;n=t.changeByRange((n=>{if(n.from==a.from&&n.to==a.to)return{changes:s,range:r||n.map(s)};let h=n.to-c,u=h-o.length;if(n.to-n.from!=d||e.state.sliceDoc(u,h)!=o||l&&n.to>=l.from&&n.from<=l.to)return{range:n};let p=t.changes({from:u,to:h,insert:i.insert}),_=n.to-a.to;return{changes:p,range:r?fi.range(Math.max(0,r.anchor+_),Math.max(0,r.head+_)):n.map(p)}}))}else n={changes:s,selection:r&&t.selection.replaceRange(r)}}let l="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,l+=".compose",e.inputState.compositionFirstChange&&(l+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(n,{scrollIntoView:!0,userEvent:l}),!0}if(o&&!o.main.eq(a)){let t=!1,i="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),i=e.inputState.lastSelectionOrigin),e.dispatch({selection:o,scrollIntoView:t,userEvent:i}),!0}return!1}const fr={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},gr=ya.ie&&ya.ie_version<=11;class mr{constructor(e){this.view=e,this.active=!1,this.selectionRange=new Jo,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(ya.ie&&ya.ie_version<=11||ya.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),gr&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver((()=>this.view.requestMeasure())),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,i)=>t!=e[i])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,o=this.selectionRange;if(i.state.facet(ls)?i.root.activeElement!=this.dom:!zo(i.dom,o))return;let a=o.anchorNode&&i.docView.nearest(o.anchorNode);a&&a.ignoreEvent(e)?t||(this.selectionChanged=!1):(ya.ie&&ya.ie_version<=11||ya.android&&ya.chrome)&&!i.state.selection.main.empty&&o.focusNode&&Bo(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=ya.safari&&11==e.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e){let t=null;function i(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",i,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",i,!0),!t)return null;let o=t.startContainer,a=t.startOffset,s=t.endContainer,n=t.endOffset,r=e.docView.domAtPos(e.state.selection.main.anchor);Bo(r.node,r.offset,s,n)&&([o,a,s,n]=[s,n,o,a]);return{anchorNode:o,anchorOffset:a,focusNode:s,focusOffset:n}}(this.view)||Ro(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=zo(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let i=t.focusNode,o=t.focusOffset;if(!i||t.anchorNode!=i||t.anchorOffset!=o)return!1;for(o=Math.min(o,Vo(i));;)if(o){if(1!=i.nodeType)return!1;let e=i.childNodes[o-1];"false"==e.contentEditable?o--:(i=e,o=Vo(i))}else{if(i==e)return!0;o=Yo(i),i=i.parentNode}}(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(1==i.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else{if(11!=i.nodeType)break;i=i.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,fr),gr&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),gr&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;if(e){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&ea(this.dom,e.key,e.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(i=this.delayedAndroidKey)||void 0===i?void 0:i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,o=!1;for(let a of e){let e=this.readMutation(a);e&&(e.typeOver&&(o=!0),-1==t?({from:t,to:i}=e):(t=Math.min(e.from,t),i=Math.max(e.to,i)))}return{from:t,to:i,typeOver:o}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),o=this.selectionChanged&&zo(this.dom,this.selectionRange);return e<0&&!o?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new pr(this.view,e,t,i))}flush(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let i=this.view.state,o=_r(this.view,t);return this.view.state==i&&this.view.update([]),o}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let i=vr(t,e.previousSibling||e.target.previousSibling,-1),o=vr(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:o?t.posBefore(o):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i,o;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(i=this.resizeScroll)||void 0===i||i.disconnect(),null===(o=this.resizeContent)||void 0===o||o.disconnect();for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function vr(e,t,i){for(;t;){let o=aa.get(t);if(o&&o.parent==e)return o;let a=t.parentNode;t=a!=e.dom?a:i>0?t.nextSibling:t.previousSibling}return null}class br{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new Kn(e.state||no.create(e)),this.plugins=this.state.facet(ds).map((e=>new us(e)));for(let t of this.plugins)t.update(this);this.observer=new mr(this),this.inputState=new rn(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new zs(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(){let e=1==arguments.length&&(arguments.length<=0?void 0:arguments[0])instanceof Ji?arguments.length<=0?void 0:arguments[0]:this.state.update(...arguments);this._dispatch(e,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,i=!1,o=!1,a=this.state;for(let h of e){if(h.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=h.state}if(this.destroyed)return void(this.viewState.state=a);let s=this.hasFocus,n=0,r=null;e.some((e=>e.annotation(Pn)))?(this.inputState.notifiedFocused=s,n=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,r=Tn(a,s),r||(n=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(c=null)):this.observer.clear(),a.facet(no.phrases)!=this.state.facet(no.phrases))return this.setState(a);t=As.create(this,a,e),t.flags|=n;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(d&&(d=d.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;d=new ss(e.empty?e:fi.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(ns)&&(d=e.value)}this.viewState.update(t,d),this.bidiCache=Dr.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),i=this.docView.update(t),this.state.facet(bs)!=this.styleModules&&this.mountStyles(),o=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(sr)!=t.state.facet(sr)&&(this.viewState.mustMeasureContent=!0),(i||o||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let h of this.state.facet(es))h(t);(r||c)&&Promise.resolve().then((()=>{r&&this.state==r.startState&&this.dispatch(r),c&&!_r(this,c)&&l.force&&ea(this.contentDOM,l.key,l.keyCode)}))}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new Kn(e),this.plugins=e.facet(ds).map((e=>new us(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new zs(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ds),i=e.state.facet(ds);if(t!=i){let o=[];for(let a of i){let i=t.indexOf(a);if(i<0)o.push(new us(a));else{let t=this.plugins[i];t.mustUpdate=e,o.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=o,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let o of this.plugins)o.mustUpdate=e;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this)}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,{scrollTop:o}=i,{scrollAnchorPos:a,scrollAnchorHeight:s}=this.viewState;if(this.viewState.scrollAnchorHeight=-1,s<0||o!=this.viewState.scrollTop)if(o>i.scrollHeight-i.clientHeight-4)a=-1,s=this.viewState.heightMap.height;else{let e=this.viewState.lineBlockAtHeight(o);a=e.from,s=e.top}try{for(let e=0;;e++){this.updateState=1;let r=this.viewport,l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];4&l||([this.measureRequests,c]=[c,this.measureRequests]);let d=c.map((e=>{try{return e.read(this)}catch(t){return rs(this.state,t),Ar}})),h=As.create(this,this.state,[]),u=!1,p=!1;h.flags|=l,t?t.flags|=l:t=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),u=this.docView.update(h));for(let e=0;e<c.length;e++)if(d[e]!=Ar)try{let t=c[e];t.write&&t.write(d[e],this)}catch(n){rs(this.state,n)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,p=!0;else if(s>-1){let e=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-s;(e>1||e<-1)&&(i.scrollTop=o+e,p=!0)}if(u&&this.docView.updateSelection(!0),this.viewport.from==r.from&&this.viewport.to==r.to&&!p&&0==this.measureRequests.length)break;s=-1}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let r of this.state.facet(es))r(t)}get themeClasses(){return rr+" "+(this.state.facet(nr)?cr:lr)+" "+this.state.facet(sr)}updateAttrs(){let e=kr(this,ps,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ls)?"true":"false",class:"cm-content",style:`${ya.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),kr(this,_s,t);let i=this.observer.ignore((()=>{let i=Ea(this.contentDOM,this.contentAttrs,t),o=Ea(this.dom,this.editorAttrs,e);return i||o}));return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let e of i.effects)if(e.is(br.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(bs),Po.mount(this.root,this.styleModules.concat(ur).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return nn(this,e,an(this,e,t,i))}moveByGroup(e,t){return nn(this,e,an(this,e,t,(t=>function(e,t,i){let o=e.state.charCategorizer(t),a=o(i);return e=>{let t=o(e);return a==io.Space&&(a=t),a==t}}(this,e.head,t))))}moveToLineBoundary(e,t){return function(e,t,i,o){let a=on(e,t.head),s=o&&a.type==Za.Text&&(e.lineWrapping||a.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>a.from?t.head-1:t.head):null;if(s){let t=e.dom.getBoundingClientRect(),o=e.textDirectionAt(a.from),n=e.posAtCoords({x:i==(o==Ds.LTR)?t.right-1:t.left+1,y:(s.top+s.bottom)/2});if(null!=n)return fi.cursor(n,i?-1:1)}return fi.cursor(i?a.to:a.from,i?-1:1)}(this,e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}moveVertically(e,t,i){return nn(this,e,function(e,t,i,o){let a=t.head,s=i?1:-1;if(a==(i?e.state.doc.length:0))return fi.cursor(a,t.assoc);let n,r=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(a),d=e.documentTop;if(c)null==r&&(r=c.left-l.left),n=s<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(a);null==r&&(r=Math.min(l.right-l.left,e.defaultCharacterWidth*(a-t.from))),n=(s<0?t.top:t.bottom)+d}let h=l.left+r,u=null!==o&&void 0!==o?o:e.defaultLineHeight>>1;for(let p=0;;p+=10){let i=n+(u+p)*s,o=en(e,{x:h,y:i},!1,s);if(i<l.top||i>l.bottom||(s<0?o<a:o>a))return fi.cursor(o,t.assoc,void 0,r)}}(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.posFromDOM(e,t)}posAtCoords(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.readMeasured(),en(this,e,t)}coordsAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let o=this.state.doc.lineAt(e),a=this.bidiSpans(o);return Wo(i,a[Ts.find(a,e-o.from,-1,t)].dir==Ds.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(os)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>yr)return Fs(e.length);let t=this.textDirectionAt(e.from);for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t)return o.order;let i=Ns(e.text,t);return this.bidiCache.push(new Dr(e.from,e.to,t,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ya.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Xo(this.contentDOM),this.docView.updateSelection()}))}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ns.of(new ss("number"==typeof e?fi.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return hs.define((()=>({})),{eventHandlers:e})}static theme(e,t){let i=Po.newName(),o=[sr.of(i),bs.of(hr(`.${i}`,e))];return t&&t.dark&&o.push(nr.of(!0)),o}static baseTheme(e){return Ti.lowest(bs.of(hr("."+rr,e,dr)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),o=i&&aa.get(i)||aa.get(e);return(null===(t=null===o||void 0===o?void 0:o.rootView)||void 0===t?void 0:t.view)||null}}br.styleModule=bs,br.inputHandler=ts,br.focusChangeEffect=is,br.perLineTextDirection=os,br.exceptionSink=$a,br.updateListener=es,br.editable=ls,br.mouseSelectionStyle=Xa,br.dragMovesSelection=Ka,br.clickAddsSelectionRange=qa,br.decorations=fs,br.atomicRanges=gs,br.scrollMargins=ms,br.darkTheme=nr,br.contentAttributes=_s,br.editorAttributes=ps,br.lineWrapping=br.contentAttributes.of({class:"cm-lineWrapping"}),br.announce=Gi.define();const yr=4096,Ar={};class Dr{constructor(e,t,i,o){this.from=e,this.to=t,this.dir=i,this.order=o}static update(e,t){if(t.empty)return e;let i=[],o=e.length?e[e.length-1].dir:Ds.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let s=e[a];s.dir!=o||t.touchesRange(s.from,s.to)||i.push(new Dr(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.order))}return i}}function kr(e,t,i){for(let o=e.state.facet(t),a=o.length-1;a>=0;a--){let t=o[a],s="function"==typeof t?t(e):t;s&&Fa(s,i)}return i}const Or=ya.mac?"mac":ya.windows?"win":ya.linux?"linux":"key";function wr(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==i&&t.shiftKey&&(e="Shift-"+e),e}const Cr=Ti.default(br.domEventHandlers({keydown:(e,t)=>Ir(Mr(t.state),e,t,"editor")})),xr=vi.define({enables:Cr}),Sr=new WeakMap;function Mr(e){let t=e.facet(xr),i=Sr.get(t);return i||Sr.set(t,i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or,i=Object.create(null),o=Object.create(null),a=(e,t)=>{let i=o[e];if(null==i)o[e]=t;else if(i!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},s=(e,o,s,n)=>{var r,l;let c=i[e]||(i[e]=Object.create(null)),d=o.split(/ (?!$)/).map((e=>function(e,t){const i=e.split(/-(?!$)/);let o,a,s,n,r=i[i.length-1];"Space"==r&&(r=" ");for(let l=0;l<i.length-1;++l){const e=i[l];if(/^(cmd|meta|m)$/i.test(e))n=!0;else if(/^a(lt)?$/i.test(e))o=!0;else if(/^(c|ctrl|control)$/i.test(e))a=!0;else if(/^s(hift)?$/i.test(e))s=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);"mac"==t?n=!0:a=!0}}return o&&(r="Alt-"+r),a&&(r="Ctrl-"+r),n&&(r="Meta-"+r),s&&(r="Shift-"+r),r}(e,t)));for(let t=1;t<d.length;t++){let i=d.slice(0,t).join(" ");a(i,!0),c[i]||(c[i]={preventDefault:!0,run:[t=>{let o=Pr={view:t,prefix:i,scope:e};return setTimeout((()=>{Pr==o&&(Pr=null)}),Tr),!0}]})}let h=d.join(" ");a(h,!1);let u=c[h]||(c[h]={preventDefault:!1,run:(null===(l=null===(r=c._any)||void 0===r?void 0:r.run)||void 0===l?void 0:l.slice())||[]});s&&u.run.push(s),n&&(u.preventDefault=!0)};for(let n of e){let e=n.scope?n.scope.split(" "):["editor"];if(n.any)for(let t of e){let e=i[t]||(i[t]=Object.create(null));e._any||(e._any={preventDefault:!1,run:[]});for(let t in e)e[t].run.push(n.any)}let o=n[t]||n.key;if(o)for(let t of e)s(t,o,n.run,n.preventDefault),n.shift&&s(t,"Shift-"+o,n.shift,n.preventDefault)}return i}(t.reduce(((e,t)=>e.concat(t)),[]))),i}let Pr=null;const Tr=4e3;function Ir(e,t,i,o){let a=function(e){var t=!(Lo&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Eo&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?Fo:No)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),s=oi(ti(a,0))==a.length&&" "!=a,n="",r=!1;Pr&&Pr.view==i&&Pr.scope==o&&(n=Pr.prefix+" ",(r=dn.indexOf(t.keyCode)<0)&&(Pr=null));let l,c,d=new Set,h=e=>{if(e){for(let o of e.run)if(!d.has(o)&&(d.add(o),o(i,t)))return!0;e.preventDefault&&(r=!0)}return!1},u=e[o];if(u){if(h(u[n+wr(a,t,!s)]))return!0;if(s&&(t.altKey||t.metaKey||t.ctrlKey)&&!(ya.windows&&t.ctrlKey&&t.altKey)&&(l=No[t.keyCode])&&l!=a){if(h(u[n+wr(l,t,!0)]))return!0;if(t.shiftKey&&(c=Fo[t.keyCode])!=a&&c!=l&&h(u[n+wr(c,t,!1)]))return!0}else if(s&&t.shiftKey&&h(u[n+wr(a,t,!0)]))return!0;if(h(u._any))return!0}return r}class Nr{constructor(e,t,i,o,a){this.className=e,this.left=t,this.top=i,this.width=o,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let o=e.coordsAtPos(i.head,i.assoc||1);if(!o)return[];let a=Fr(e);return[new Nr(t,o.left-a.left,o.top-a.top,null,o.bottom-o.top)]}return function(e,t,i){if(i.to<=e.viewport.from||i.from>=e.viewport.to)return[];let o=Math.max(i.from,e.viewport.from),a=Math.min(i.to,e.viewport.to),s=e.textDirection==Ds.LTR,n=e.contentDOM,r=n.getBoundingClientRect(),l=Fr(e),c=n.querySelector(".cm-line"),d=c&&window.getComputedStyle(c),h=r.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),u=r.right-(d?parseInt(d.paddingRight):0),p=on(e,o),_=on(e,a),f=p.type==Za.Text?p:null,g=_.type==Za.Text?_:null;f&&(e.lineWrapping||p.widgetLineBreaks)&&(f=Lr(e,o,f));g&&(e.lineWrapping||_.widgetLineBreaks)&&(g=Lr(e,a,g));if(f&&g&&f.from==g.from)return v(b(i.from,i.to,f));{let t=f?b(i.from,null,f):y(p,!1),o=g?b(null,i.to,g):y(_,!0),a=[];return(f||p).to<(g||_).from-(f&&g?1:0)||p.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<o.top?a.push(m(h,t.bottom,u,o.top)):t.bottom<o.top&&e.elementAtHeight((t.bottom+o.top)/2).type==Za.Text&&(t.bottom=o.top=(t.bottom+o.top)/2),v(t).concat(a).concat(v(o))}function m(e,i,o,a){return new Nr(t,e-l.left,i-l.top-.01,o-e,a-i+.01)}function v(e){let{top:t,bottom:i,horizontal:o}=e,a=[];for(let s=0;s<o.length;s+=2)a.push(m(o[s],t,o[s+1],i));return a}function b(t,i,o){let a=1e9,n=-1e9,r=[];function l(t,i,l,c,d){let p=e.coordsAtPos(t,t==o.to?-2:2),_=e.coordsAtPos(l,l==o.from?2:-2);p&&_&&(a=Math.min(p.top,_.top,a),n=Math.max(p.bottom,_.bottom,n),d==Ds.LTR?r.push(s&&i?h:p.left,s&&c?u:_.right):r.push(!s&&c?h:_.left,!s&&i?u:p.right))}let c=null!==t&&void 0!==t?t:o.from,d=null!==i&&void 0!==i?i:o.to;for(let s of e.visibleRanges)if(s.to>c&&s.from<d)for(let o=Math.max(s.from,c),a=Math.min(s.to,d);;){let s=e.state.doc.lineAt(o);for(let n of e.bidiSpans(s)){let e=n.from+s.from,r=n.to+s.from;if(e>=a)break;r>o&&l(Math.max(e,o),null==t&&e<=c,Math.min(r,a),null==i&&r>=d,n.dir)}if(o=s.to+1,o>=a)break}return 0==r.length&&l(c,null==t,d,null==i,e.textDirection),{top:a,bottom:n,horizontal:r}}function y(e,t){let i=r.top+(t?e.top:e.bottom);return{top:i,bottom:i,horizontal:[]}}}(e,t,i)}}function Fr(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Ds.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function Lr(e,t,i){let o=fi.cursor(t);return{from:Math.max(i.from,e.moveToLineBoundary(o,!1,!0).from),to:Math.min(i.to,e.moveToLineBoundary(o,!0,!0).from),type:Za.Text}}class Er{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(jr)!=e.state.facet(jr)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(jr);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some(((e,t)=>{return i=e,o=this.drawn[t],!(i.constructor==o.constructor&&i.eq(o));var i,o}))){let t=this.dom.firstChild,i=0;for(let o of e)o.update&&t&&o.constructor&&this.drawn[i].constructor&&o.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(o.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const jr=vi.define();function Zr(e){return[hs.define((t=>new Er(t,e))),jr.of(e)]}const Rr=!ya.ios,Qr=vi.define({combine:e=>ro(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function zr(e){return e.startState.facet(Qr)!=e.state.facet(Qr)}const Ur=Zr({above:!0,markers(e){let{state:t}=e,i=t.facet(Qr),o=[];for(let a of t.selection.ranges){let s=a==t.selection.main;if(a.empty?!s||Rr:i.drawRangeCursor){let t=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",i=a.empty?a:fi.cursor(a.head,a.head>a.anchor?-1:1);for(let a of Nr.forRange(e,t,i))o.push(a)}}return o},update(e,t){e.transactions.some((e=>e.selection))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let i=zr(e);return i&&Br(e.state,t),e.docChanged||e.selectionSet||i},mount(e,t){Br(t.state,e)},class:"cm-cursorLayer"});function Br(e,t){t.style.animationDuration=e.facet(Qr).cursorBlinkRate+"ms"}const Yr=Zr({above:!1,markers:e=>e.state.selection.ranges.map((t=>t.empty?[]:Nr.forRange(e,"cm-selectionBackground",t))).reduce(((e,t)=>e.concat(t))),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||zr(e),class:"cm-selectionLayer"}),Hr={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Rr&&(Hr[".cm-line"].caretColor="transparent !important");const Vr=Ti.highest(br.theme(Hr)),Wr=Gi.define({map:(e,t)=>null==e?null:t.mapPos(e)}),Gr=wi.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(Wr)?t.value:e),e))}),Jr=hs.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let i=e.state.field(Gr);null==i?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(Gr)!=i||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(Gr),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;let i=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+this.view.scrollDOM.scrollLeft,top:t.top-i.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(Gr)!=e&&this.view.dispatch({effects:Wr.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function qr(e,t,i,o,a){t.lastIndex=0;for(let s,n=e.iterRange(i,o),r=i;!n.next().done;r+=n.value.length)if(!n.lineBreak)for(;s=t.exec(n.value);)a(r+s.index,s)}class Kr{constructor(e){const{regexp:t,decoration:i,decorate:o,boundary:a,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,o)this.addMatch=(e,t,i,a)=>o(a,i,i+e[0].length,e,t);else if("function"==typeof i)this.addMatch=(e,t,o,a)=>{let s=i(e,t,o);s&&a(o,o+e[0].length,s)};else{if(!i)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,o,a)=>a(o,o+e[0].length,i)}this.boundary=a,this.maxLength=s}createDeco(e){let t=new _o,i=t.add.bind(t);for(let{from:o,to:a}of function(e,t){let i=e.visibleRanges;if(1==i.length&&i[0].from==e.viewport.from&&i[0].to==e.viewport.to)return i;let o=[];for(let{from:a,to:s}of i)a=Math.max(e.state.doc.lineAt(a).from,a-t),s=Math.min(e.state.doc.lineAt(s).to,s+t),o.length&&o[o.length-1].to>=a?o[o.length-1].to=s:o.push({from:a,to:s});return o}(e,this.maxLength))qr(e.state.doc,this.regexp,o,a,((t,o)=>this.addMatch(o,e,t,i)));return t.finish()}updateDeco(e,t){let i=1e9,o=-1;return e.docChanged&&e.changes.iterChanges(((t,a,s,n)=>{n>e.view.viewport.from&&s<e.view.viewport.to&&(i=Math.min(s,i),o=Math.max(n,o))})),e.viewportChanged||o-i>1e3?this.createDeco(e.view):o>-1?this.updateRange(e.view,t.map(e.changes),i,o):t}updateRange(e,t,i,o){for(let a of e.visibleRanges){let s=Math.max(a.from,i),n=Math.min(a.to,o);if(n>s){let i=e.state.doc.lineAt(s),o=i.to<n?e.state.doc.lineAt(n):i,r=Math.max(a.from,i.from),l=Math.min(a.to,o.to);if(this.boundary){for(;s>i.from;s--)if(this.boundary.test(i.text[s-1-i.from])){r=s;break}for(;n<o.to;n++)if(this.boundary.test(o.text[n-o.from])){l=n;break}}let c,d=[],h=(e,t,i)=>d.push(i.range(e,t));if(i==o)for(this.regexp.lastIndex=r-i.from;(c=this.regexp.exec(i.text))&&c.index<l-i.from;)this.addMatch(c,e,c.index+i.from,h);else qr(e.state.doc,this.regexp,r,l,((t,i)=>this.addMatch(i,e,t,h)));t=t.update({filterFrom:r,filterTo:l,filter:(e,t)=>e<r||t>l,add:d})}}return t}}const Xr=null!=/x/.unicode?"gu":"g",$r=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]",Xr),el={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let tl=null;const il=vi.define({combine(e){let t=ro(e,{render:null,specialChars:$r,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==tl&&"undefined"!=typeof document&&document.body){let t=document.body.style;tl=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return tl||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,Xr)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Xr)),t}});let ol=null;class al extends ja{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"\u2022":10==e?"\u2424":String.fromCharCode(9216+e)}(this.code),i=e.state.phrase("Control character")+" "+(el[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,i,t);if(o)return o;let a=document.createElement("span");return a.textContent=t,a.title=i,a.setAttribute("aria-label",i),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class sl extends ja{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const nl=Ra.line({class:"cm-activeLine"}),rl=hs.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,i=[];for(let o of e.state.selection.ranges){let a=e.lineBlockAt(o.head);a.from>t&&(i.push(nl.range(a.from)),t=a.from)}return Ra.set(i)}},{decorations:e=>e.decorations});class ll extends ja{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?Uo(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),o=Wo(t[0],"rtl"!=i.direction),a=parseInt(i.lineHeight);return o.bottom-o.top>1.5*a?{left:o.left,right:o.right,top:o.top,bottom:o.top+a}:o}ignoreEvent(){return!1}}const cl=2e3;function dl(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),o=e.state.doc.lineAt(i),a=i-o.from,s=a>cl?-1:a==o.length?function(e,t){let i=e.coordsAtPos(e.viewport.from);return i?Math.round(Math.abs((i.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):wo(o.text,e.state.tabSize,i-o.from);return{line:o.number,col:s,off:a}}function hl(e,t){let i=dl(e,t),o=e.state.selection;return i?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(i.line).from),a=e.state.doc.lineAt(t);i={line:a.number,col:i.col,off:Math.min(i.off,a.length)},o=o.map(e.changes)}},get(t,a,s){let n=dl(e,t);if(!n)return o;let r=function(e,t,i){let o=Math.min(t.line,i.line),a=Math.max(t.line,i.line),s=[];if(t.off>cl||i.off>cl||t.col<0||i.col<0){let n=Math.min(t.off,i.off),r=Math.max(t.off,i.off);for(let t=o;t<=a;t++){let i=e.doc.line(t);i.length<=r&&s.push(fi.range(i.from+n,i.to+r))}}else{let n=Math.min(t.col,i.col),r=Math.max(t.col,i.col);for(let t=o;t<=a;t++){let i=e.doc.line(t),o=Co(i.text,n,e.tabSize,!0);if(o<0)s.push(fi.cursor(i.to));else{let t=Co(i.text,r,e.tabSize);s.push(fi.range(i.from+o,i.from+t))}}}return s}(e.state,i,n);return r.length?s?fi.create(r.concat(o.ranges)):fi.create(r):o}}:null}const ul={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},pl={style:"cursor: crosshair"};const _l="-10000px";class fl{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(i)}update(e){var t;let i=e.state.facet(this.facet),o=i.filter((e=>e));if(i===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let a=[];for(let s=0;s<o.length;s++){let t=o[s],i=-1;if(t){for(let e=0;e<this.tooltips.length;e++){let o=this.tooltips[e];o&&o.create==t.create&&(i=e)}if(i<0)a[s]=this.createTooltipView(t);else{let t=a[s]=this.tooltipViews[i];t.update&&t.update(e)}}}for(let s of this.tooltipViews)a.indexOf(s)<0&&(s.dom.remove(),null===(t=s.destroy)||void 0===t||t.call(s));return this.input=i,this.tooltips=o,this.tooltipViews=a,!0}}function gl(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const ml=vi.define({combine:e=>{var t,i,o;return{position:ya.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(i=e.find((e=>e.parent)))||void 0===i?void 0:i.parent)||null,tooltipSpace:(null===(o=e.find((e=>e.tooltipSpace)))||void 0===o?void 0:o.tooltipSpace)||gl}}}),vl=new WeakMap,bl=hs.fromClass(class{constructor(e){this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(ml);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new fl(e,Dl,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let i=t||e.geometryChanged,o=e.state.facet(ml);if(o.position!=this.position){this.position=o.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;i=!0}if(o.parent!=this.parent){this.parent&&this.container.remove(),this.parent=o.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=_l,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),null===(e=i.destroy)||void 0===e||e.call(i);null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((e=>{let{dom:t}=e;return t.getBoundingClientRect()})),space:this.view.state.facet(ml).tooltipSpace(this.view)}}writeMeasure(e){var t;let{editor:i,space:o}=e,a=[];for(let s=0;s<this.manager.tooltips.length;s++){let n=this.manager.tooltips[s],r=this.manager.tooltipViews[s],{dom:l}=r,c=e.pos[s],d=e.size[s];if(!c||c.bottom<=Math.max(i.top,o.top)||c.top>=Math.min(i.bottom,o.bottom)||c.right<Math.max(i.left,o.left)-.1||c.left>Math.min(i.right,o.right)+.1){l.style.top=_l;continue}let h=n.arrow?r.dom.querySelector(".cm-tooltip-arrow"):null,u=h?7:0,p=d.right-d.left,_=null!==(t=vl.get(r))&&void 0!==t?t:d.bottom-d.top,f=r.offset||Al,g=this.view.textDirection==Ds.LTR,m=d.width>o.right-o.left?g?o.left:o.right-d.width:g?Math.min(c.left-(h?14:0)+f.x,o.right-p):Math.max(o.left,c.left-p+(h?14:0)-f.x),v=!!n.above;!n.strictSide&&(v?c.top-(d.bottom-d.top)-f.y<o.top:c.bottom+(d.bottom-d.top)+f.y>o.bottom)&&v==o.bottom-c.bottom>c.top-o.top&&(v=!v);let b=(v?c.top-o.top:o.bottom-c.bottom)-u;if(b<_&&!1!==r.resize){if(b<this.view.defaultLineHeight){l.style.top=_l;continue}vl.set(r,_),l.style.height=(_=b)+"px"}else l.style.height&&(l.style.height="");let y=v?c.top-_-u-f.y:c.bottom+u+f.y,A=m+p;if(!0!==r.overlap)for(let e of a)e.left<A&&e.right>m&&e.top<y+_&&e.bottom>y&&(y=v?e.top-_-2-u:e.bottom+u+2);"absolute"==this.position?(l.style.top=y-e.parent.top+"px",l.style.left=m-e.parent.left+"px"):(l.style.top=y+"px",l.style.left=m+"px"),h&&(h.style.left=c.left+(g?f.x:-f.x)-(m+14-7)+"px"),!0!==r.overlap&&a.push({left:m,top:y,right:A,bottom:y+_}),l.classList.toggle("cm-tooltip-above",v),l.classList.toggle("cm-tooltip-below",!v),r.positioned&&r.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=_l}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),yl=br.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Al={x:0,y:0},Dl=vi.define({enables:[bl,yl]}),kl=vi.define();class Ol{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new fl(e,kl,(e=>this.createHostedView(e)))}static create(e){return new Ol(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}}const wl=Dl.compute([kl],(e=>{let t=e.facet(kl).filter((e=>e));return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.filter((e=>null!=e.end)).map((e=>e.end))),create:Ol.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class Cl{constructor(e,t,i,o,a){this.view=e,this.source=t,this.field=i,this.setHover=o,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let i=this.view.coordsAtPos(t);if(null==i||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let o=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find((e=>e.from<=t&&e.to>=t)),a=o&&o.dir==Ds.RTL?-1:1,s=this.source(this.view,t,e.x<i.left?-a:a);if(null===s||void 0===s?void 0:s.then){let e=this.pending={pos:t};s.then((t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))}),(e=>rs(this.view.state,e,"hover tooltip")))}else s&&this.view.dispatch({effects:this.setHover.of(s)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!xl(this.lastMove.target)||this.pending){let{pos:o}=i||this.pending,a=null!==(t=null===i||void 0===i?void 0:i.end)&&void 0!==t?t:o;(o==a?this.view.posAtCoords(this.lastMove)==o:function(e,t,i,o,a,s){let n=document.createRange(),r=e.domAtPos(t),l=e.domAtPos(i);n.setEnd(l.node,l.offset),n.setStart(r.node,r.offset);let c=n.getClientRects();n.detach();for(let d=0;d<c.length;d++){let e=c[d];if(Math.max(e.top-a,a-e.bottom,e.left-o,o-e.right)<=s)return!0}return!1}(this.view,o,a,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!xl(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function xl(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}function Sl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Gi.define(),o=wi.define({create:()=>null,update(e,o){if(e&&(t.hideOnChange&&(o.docChanged||o.selection)||t.hideOn&&t.hideOn(o,e)))return null;if(e&&o.docChanged){let t=o.changes.mapPos(e.pos,-1,si.TrackDel);if(null==t)return null;let i=Object.assign(Object.create(null),e);i.pos=t,null!=e.end&&(i.end=o.changes.mapPos(e.end)),e=i}for(let t of o.effects)t.is(i)&&(e=t.value),t.is(Pl)&&(e=null);return e},provide:e=>kl.from(e)});return[o,hs.define((a=>new Cl(a,e,o,i,t.hoverTime||300))),wl]}function Ml(e,t){let i=e.plugin(bl);if(!i)return null;let o=i.manager.tooltips.indexOf(t);return o<0?null:i.manager.tooltipViews[o]}const Pl=Gi.define();const Tl=vi.define({combine(e){let t,i;for(let o of e)t=t||o.topContainer,i=i||o.bottomContainer;return{topContainer:t,bottomContainer:i}}});function Il(e,t){let i=e.plugin(Nl),o=i?i.specs.indexOf(t):-1;return o>-1?i.panels[o]:null}const Nl=hs.fromClass(class{constructor(e){this.input=e.state.facet(El),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(Tl);this.top=new Fl(e,!0,t.topContainer),this.bottom=new Fl(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(e){let t=e.state.facet(Tl);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Fl(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Fl(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=e.state.facet(El);if(i!=this.input){let t=i.filter((e=>e)),o=[],a=[],s=[],n=[];for(let i of t){let t,r=this.specs.indexOf(i);r<0?(t=i(e.view),n.push(t)):(t=this.panels[r],t.update&&t.update(e)),o.push(t),(t.top?a:s).push(t)}this.specs=t,this.panels=o,this.top.sync(a),this.bottom.sync(s);for(let e of n)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let o of this.panels)o.update&&o.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>br.scrollMargins.of((t=>{let i=t.plugin(e);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}}))});class Fl{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Ll(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Ll(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Ll(e){let t=e.nextSibling;return e.remove(),t}const El=vi.define({enables:Nl});class jl extends lo{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}jl.prototype.elementClass="",jl.prototype.toDOM=void 0,jl.prototype.mapMode=si.TrackBefore,jl.prototype.startSide=jl.prototype.endSide=-1,jl.prototype.point=!0;const Zl=vi.define(),Rl={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>po.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ql=vi.define();function zl(e){return[Bl(),Ql.of(Object.assign(Object.assign({},Rl),e))]}const Ul=vi.define({combine:e=>e.some((e=>e))});function Bl(e){let t=[Yl];return e&&!1===e.fixed&&t.push(Ul.of(!0)),t}const Yl=hs.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(Ql).map((t=>new Gl(e,t)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!e.state.facet(Ul),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,i=e.view.viewport,o=Math.min(t.to,i.to)-Math.max(t.from,i.from);this.syncGutters(o<.8*(i.to-i.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Ul)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let i=po.iter(this.view.state.facet(Zl),this.view.viewport.from),o=[],a=this.gutters.map((e=>new Wl(e,this.view.viewport,-this.view.documentPadding.top)));for(let s of this.view.viewportLineBlocks)if(o.length&&(o=[]),Array.isArray(s.type)){let e=!0;for(let t of s.type)if(t.type==Za.Text&&e){Vl(i,o,t.from);for(let e of a)e.line(this.view,t,o);e=!1}else if(t.widget)for(let e of a)e.widget(this.view,t)}else if(s.type==Za.Text){Vl(i,o,s.from);for(let e of a)e.line(this.view,s,o)}for(let s of a)s.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(Ql),i=e.state.facet(Ql),o=e.docChanged||e.heightChanged||e.viewportChanged||!po.eq(e.startState.facet(Zl),e.state.facet(Zl),e.view.viewport.from,e.view.viewport.to);if(t==i)for(let a of this.gutters)a.update(e)&&(o=!0);else{o=!0;let a=[];for(let o of i){let i=t.indexOf(o);i<0?a.push(new Gl(this.view,o)):(this.gutters[i].update(e),a.push(this.gutters[i]))}for(let e of this.gutters)e.dom.remove(),a.indexOf(e)<0&&e.destroy();for(let e of a)this.dom.appendChild(e.dom);this.gutters=a}return o}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>br.scrollMargins.of((t=>{let i=t.plugin(e);return i&&0!=i.gutters.length&&i.fixed?t.textDirection==Ds.LTR?{left:i.dom.offsetWidth}:{right:i.dom.offsetWidth}:null}))});function Hl(e){return Array.isArray(e)?e:[e]}function Vl(e,t,i){for(;e.value&&e.from<=i;)e.from==i&&t.push(e.value),e.next()}class Wl{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=po.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:o}=this,a=t.top-this.height;if(this.i==o.elements.length){let s=new Jl(e,t.height,a,i);o.elements.push(s),o.dom.appendChild(s.dom)}else o.elements[this.i].update(e,t.height,a,i);this.height=t.bottom,this.i++}line(e,t,i){let o=[];Vl(this.cursor,o,t.from),i.length&&(o=o.concat(i));let a=this.gutter.config.lineMarker(e,t,o);a&&o.unshift(a);let s=this.gutter;(0!=o.length||s.config.renderEmptyElements)&&this.addElement(e,t,o)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t);i&&this.addElement(e,t,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Gl{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,(o=>{let a,s=o.target;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let e=s.getBoundingClientRect();a=(e.top+e.bottom)/2}else a=o.clientY;let n=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[i](e,n,o)&&o.preventDefault()}));this.markers=Hl(t.markers(e)),t.initialSpacer&&(this.spacer=new Jl(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Hl(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let i=e.view.viewport;return!po.eq(this.markers,t,i.from,i.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class Jl{constructor(e,t,i,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,o)}update(e,t,i,o){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].compare(t[i]))return!1;return!0}(this.markers,o)||this.setMarkers(e,o)}setMarkers(e,t){let i="cm-gutterElement",o=this.dom.firstChild;for(let a=0,s=0;;){let n=s,r=a<t.length?t[a++]:null,l=!1;if(r){let e=r.elementClass;e&&(i+=" "+e);for(let t=s;t<this.markers.length;t++)if(this.markers[t].compare(r)){n=t,l=!0;break}}else n=this.markers.length;for(;s<n;){let e=this.markers[s++];if(e.toDOM){e.destroy(o);let t=o.nextSibling;o.remove(),o=t}}if(!r)break;r.toDOM&&(l?o=o.nextSibling:this.dom.insertBefore(r.toDOM(e),o)),l&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}const ql=vi.define(),Kl=vi.define({combine:e=>ro(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let o in t){let e=i[o],a=t[o];i[o]=e?(t,i,o)=>e(t,i,o)||a(t,i,o):a}return i}})});class Xl extends jl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function $l(e,t){return e.state.facet(Kl).formatNumber(t,e.state)}const ec=Ql.compute([Kl],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(ql),lineMarker:(e,t,i)=>i.some((e=>e.toDOM))?null:new Xl($l(e,e.state.doc.lineAt(t.from).number)),widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Kl)!=e.state.facet(Kl),initialSpacer:e=>new Xl($l(e,tc(e.state.doc.lines))),updateSpacer(e,t){let i=$l(t.view,tc(t.view.state.doc.lines));return i==e.number?e:new Xl(i)},domEventHandlers:e.facet(Kl).domEventHandlers})));function tc(e){let t=9;for(;t<e;)t=10*t+9;return t}const ic=new class extends jl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},oc=Zl.compute(["selection"],(e=>{let t=[],i=-1;for(let o of e.selection.ranges){let a=e.doc.lineAt(o.head).from;a>i&&(i=a,t.push(ic.range(a)))}return po.of(t)}));const ac=1024;let sc=0;class nc{constructor(e,t){this.from=e,this.to=t}}class rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=sc++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=cc.match(e)),t=>{let i=e(t);return void 0===i?null:[this,i]}}}rc.closedBy=new rc({deserialize:e=>e.split(" ")}),rc.openedBy=new rc({deserialize:e=>e.split(" ")}),rc.group=new rc({deserialize:e=>e.split(" ")}),rc.contextHash=new rc({perNode:!0}),rc.lookAhead=new rc({perNode:!0}),rc.mounted=new rc({perNode:!0});const lc=Object.create(null);class cc{constructor(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=i,this.flags=o}static define(e){let t=e.props&&e.props.length?Object.create(null):lc,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),o=new cc(e.name||"",t,e.id,i);if(e.props)for(let a of e.props)if(Array.isArray(a)||(a=a(o)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[a[0].id]=a[1]}return o}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(rc.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let o of i.split(" "))t[o]=e[i];return e=>{for(let i=e.prop(rc.group),o=-1;o<(i?i.length:0);o++){let a=t[o<0?e.name:i[o]];if(a)return a}}}}cc.none=new cc("",Object.create(null),0,8);class dc{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(){let e=[];for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];for(let a of this.types){let t=null;for(let e of i){let i=e(a);i&&(t||(t=Object.assign({},a.props)),t[i[0].id]=i[1])}e.push(t?new cc(a.name,t,a.id,a.flags):a)}return new dc(e)}}const hc=new WeakMap,uc=new WeakMap;var pc;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(pc||(pc={}));class _c{constructor(e,t,i,o,a){if(this.type=e,this.children=t,this.positions=i,this.length=o,this.props=null,a&&a.length){this.props=Object.create(null);for(let[e,t]of a)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(rc.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let e=i.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new wc(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=hc.get(this)||this.topNode,o=new wc(i);return o.moveTo(e,t),hc.set(this,o._tree),o}get topNode(){return new yc(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=bc(hc.get(this)||this.topNode,e,t,!1);return hc.set(this,i),i}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=bc(uc.get(this)||this.topNode,e,t,!0);return uc.set(this,i),i}iterate(e){let{enter:t,leave:i,from:o=0,to:a=this.length}=e,s=e.mode||0,n=(s&pc.IncludeAnonymous)>0;for(let r=this.cursor(s|pc.IncludeAnonymous);;){let e=!1;if(r.from<=a&&r.to>=o&&(!n&&r.type.isAnonymous||!1!==t(r))){if(r.firstChild())continue;e=!0}for(;e&&i&&(n||!r.type.isAnonymous)&&i(r),!r.nextSibling();){if(!r.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:Mc(cc.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,i)=>new _c(this.type,e,t,i,this.propValues)),e.makeTree||((e,t,i)=>new _c(cc.none,e,t,i)))}static build(e){return function(e){var t;let{buffer:i,nodeSet:o,maxBufferLength:a=ac,reused:s=[],minRepeatType:n=o.types.length}=e,r=Array.isArray(i)?new fc(i,i.length):i,l=o.types,c=0,d=0;function h(e,t,i,m,v){let{id:b,start:y,end:A,size:D}=r,k=d;for(;D<0;){if(r.next(),-1==D){let t=s[b];return i.push(t),void m.push(y-e)}if(-3==D)return void(c=b);if(-4==D)return void(d=b);throw new RangeError(`Unrecognized record size: ${D}`)}let O,w,C=l[b],x=y-e;if(A-y<=a&&(w=f(r.pos-t,v))){let t=new Uint16Array(w.size-w.skip),i=r.pos-w.size,a=t.length;for(;r.pos>i;)a=g(w.start,t,a);O=new gc(t,A-w.start,o),x=w.start-e}else{let e=r.pos-D;r.next();let t=[],i=[],o=b>=n?b:-1,s=0,l=A;for(;r.pos>e;)o>=0&&r.id==o&&r.size>=0?(r.end<=l-a&&(p(t,i,y,s,r.end,l,o,k),s=t.length,l=r.end),r.next()):h(y,e,t,i,o);if(o>=0&&s>0&&s<t.length&&p(t,i,y,s,y,l,o,k),t.reverse(),i.reverse(),o>-1&&s>0){let e=u(C);O=Mc(C,t,i,0,t.length,0,A-y,e,e)}else O=_(C,t,i,A-y,k-A)}i.push(O),m.push(x)}function u(e){return(t,i,o)=>{let a,s,n=0,r=t.length-1;if(r>=0&&(a=t[r])instanceof _c){if(!r&&a.type==e&&a.length==o)return a;(s=a.prop(rc.lookAhead))&&(n=i[r]+a.length+s)}return _(e,t,i,o,n)}}function p(e,t,i,a,s,n,r,l){let c=[],d=[];for(;e.length>a;)c.push(e.pop()),d.push(t.pop()+i-s);e.push(_(o.types[r],c,d,n-s,l-n)),t.push(s-i)}function _(e,t,i,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(c){let e=[rc.contextHash,c];s=s?[e].concat(s):[e]}if(a>25){let e=[rc.lookAhead,a];s=s?[e].concat(s):[e]}return new _c(e,t,i,o,s)}function f(e,t){let i=r.fork(),o=0,s=0,l=0,c=i.end-a,d={size:0,start:0,skip:0};e:for(let a=i.pos-e;i.pos>a;){let e=i.size;if(i.id==t&&e>=0){d.size=o,d.start=s,d.skip=l,l+=4,o+=4,i.next();continue}let r=i.pos-e;if(e<0||r<a||i.start<c)break;let h=i.id>=n?4:0,u=i.start;for(i.next();i.pos>r;){if(i.size<0){if(-3!=i.size)break e;h+=4}else i.id>=n&&(h+=4);i.next()}s=u,o+=e,l+=h}return(t<0||o==e)&&(d.size=o,d.start=s,d.skip=l),d.size>4?d:void 0}function g(e,t,i){let{id:o,start:a,end:s,size:l}=r;if(r.next(),l>=0&&o<n){let n=i;if(l>4){let o=r.pos-(l-4);for(;r.pos>o;)i=g(e,t,i)}t[--i]=n,t[--i]=s-e,t[--i]=a-e,t[--i]=o}else-3==l?c=o:-4==l&&(d=o);return i}let m=[],v=[];for(;r.pos>0;)h(e.start||0,e.bufferStart||0,m,v,-1);let b=null!==(t=e.length)&&void 0!==t?t:m.length?v[0]+m[0].length:0;return new _c(l[e.topID],m.reverse(),v.reverse(),b)}(e)}}_c.empty=new _c(cc.none,[],[],0);class fc{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new fc(this.buffer,this.index)}}class gc{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return cc.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],o=this.set.types[t],a=o.name;if(/\W/.test(a)&&!o.isError&&(a=JSON.stringify(a)),i==(e+=4))return a;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return a+"("+s.join(",")+")"}findChild(e,t,i,o,a){let{buffer:s}=this,n=-1;for(let r=e;r!=t&&!(mc(a,o,s[r+1],s[r+2])&&(n=r,i>0));r=s[r+3]);return n}slice(e,t,i){let o=this.buffer,a=new Uint16Array(t-e),s=0;for(let n=e,r=0;n<t;){a[r++]=o[n++],a[r++]=o[n++]-i;let t=a[r++]=o[n++]-i;a[r++]=o[n++]-e,s=Math.max(s,t)}return new gc(a,s,this.set)}}function mc(e,t,i,o){switch(e){case-2:return i<t;case-1:return o>=t&&i<t;case 0:return i<t&&o>t;case 1:return i<=t&&o>t;case 2:return o>t;case 4:return!0}}function vc(e,t){let i=e.childBefore(t);for(;i;){let t=i.lastChild;if(!t||t.to!=i.to)break;t.type.isError&&t.from==t.to?(e=i,i=t.prevSibling):i=t}return e}function bc(e,t,i,o){for(var a;e.from==e.to||(i<1?e.from>=t:e.from>t)||(i>-1?e.to<=t:e.to<t);){let t=!o&&e instanceof yc&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=o?0:pc.IgnoreOverlays;if(o)for(let n=e,r=n.parent;r;n=r,r=n.parent)n instanceof yc&&n.index<0&&(null===(a=r.enter(t,i,s))||void 0===a?void 0:a.from)!=n.from&&(e=r);for(;;){let o=e.enter(t,i,s);if(!o)return e;e=o}}class yc{constructor(e,t,i,o){this._tree=e,this.from=t,this.index=i,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:n,positions:r}=s._tree,l=t>0?n.length:-1;e!=l;e+=t){let l=n[e],c=r[e]+s.from;if(mc(o,i,c,c+l.length))if(l instanceof gc){if(a&pc.ExcludeBuffers)continue;let n=l.findChild(0,l.buffer.length,t,i-c,o);if(n>-1)return new Oc(new kc(s,l,e,c),null,n)}else if(a&pc.IncludeAnonymous||!l.type.isAnonymous||Cc(l)){let n;if(!(a&pc.IgnoreMounts)&&l.props&&(n=l.prop(rc.mounted))&&!n.overlay)return new yc(n.tree,c,e,s);let r=new yc(l,c,e,s);return a&pc.IncludeAnonymous||!r.type.isAnonymous?r:r.nextChild(t<0?l.children.length-1:0,t,i,o)}}if(a&pc.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(o&pc.IgnoreOverlays)&&(i=this._tree.prop(rc.mounted))&&i.overlay){let o=e-this.from;for(let{from:e,to:a}of i.overlay)if((t>0?e<=o:e<o)&&(t<0?a>=o:a>o))return new yc(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,o)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(){return new wc(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}get tree(){return this._tree}toTree(){return this._tree}resolve(e){return bc(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return bc(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}enterUnfinishedNodesBefore(e){return vc(this,e)}getChild(e){let t=Ac(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return Ac(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Dc(this,e)}}function Ac(e,t,i,o){let a=e.cursor(),s=[];if(!a.firstChild())return s;if(null!=i)for(;!a.type.is(i);)if(!a.nextSibling())return s;for(;;){if(null!=o&&a.type.is(o))return s;if(a.type.is(t)&&s.push(a.node),!a.nextSibling())return null==o?s:[]}}function Dc(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let o=e.parent;i>=0;o=o.parent){if(!o)return!1;if(!o.type.isAnonymous){if(t[i]&&t[i]!=o.name)return!1;i--}}return!0}class kc{constructor(e,t,i,o){this.parent=e,this.buffer=t,this.index=i,this.start=o}}class Oc{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],e,t-this.context.start,i);return a<0?null:new Oc(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&pc.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Oc(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Oc(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Oc(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(){return new wc(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,o=this.index+4,a=i.buffer[this.index+3];if(a>o){let s=i.buffer[this.index+1];e.push(i.slice(o,a,s)),t.push(0)}return new _c(this.type,e,t,this.to-this.from)}resolve(e){return bc(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return bc(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}enterUnfinishedNodesBefore(e){return vc(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e){let t=Ac(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return Ac(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}get node(){return this}matchContext(e){return Dc(this,e)}}class wc{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof yc)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:i,buffer:o}=this.buffer;return this.type=t||o.set.types[o.buffer[e]],this.from=i+o.buffer[e+1],this.to=i+o.buffer[e+2],!0}yield(e){return!!e&&(e instanceof yc?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:o}=this.buffer,a=o.findChild(this.index+4,o.buffer[this.index+3],e,t-this.buffer.start,i);return!(a<0)&&(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(i&pc.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&pc.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&pc.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let e=i<0?0:this.stack[i]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(e)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:o}=this;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(o.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:i}=o)}else({index:t,_parent:i}=this._tree);for(;i;({index:t,_parent:i}=i))if(t>-1)for(let o=t+e,a=e<0?-1:i._tree.children.length;o!=a;o+=e){let e=i._tree.children[o];if(this.mode&pc.IncludeAnonymous||e instanceof gc||!e.type.isAnonymous||Cc(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let o=this.index,a=this.stack.length;a>=0;){for(let s=e;s;s=s._parent)if(s.index==o){if(o==this.index)return s;t=s,i=a+1;break e}o=this.stack[--a]}for(let o=i;o<this.stack.length;o++)t=new Oc(this.buffer,t,this.stack[o]);return this.bufferNode=new Oc(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let o=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){i++;continue}this.type.isAnonymous||(o=!0)}for(;o&&t&&t(this),o=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,o=!0}}}matchContext(e){if(!this.buffer)return Dc(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let o=e.length-1,a=this.stack.length-1;o>=0;a--){if(a<0)return Dc(this.node,e,o);let s=i[t.buffer[this.stack[a]]];if(!s.isAnonymous){if(e[o]&&e[o]!=s.name)return!1;o--}}return!0}}function Cc(e){return e.children.some((e=>e instanceof gc||!e.type.isAnonymous||Cc(e)))}const xc=new WeakMap;function Sc(e,t){if(!e.isAnonymous||t instanceof gc||t.type!=e)return 1;let i=xc.get(t);if(null==i){i=1;for(let o of t.children){if(o.type!=e||!(o instanceof _c)){i=1;break}i+=Sc(e,o)}xc.set(t,i)}return i}function Mc(e,t,i,o,a,s,n,r,l){let c=0;for(let p=o;p<a;p++)c+=Sc(e,t[p]);let d=Math.ceil(1.5*c/8),h=[],u=[];return function t(i,o,a,n,r){for(let c=a;c<n;){let a=c,p=o[c],_=Sc(e,i[c]);for(c++;c<n;c++){let t=Sc(e,i[c]);if(_+t>=d)break;_+=t}if(c==a+1){if(_>d){let e=i[a];t(e.children,e.positions,0,e.children.length,o[a]+r);continue}h.push(i[a])}else{let t=o[c-1]+i[c-1].length-p;h.push(Mc(e,i,o,a,c,p,t,null,l))}u.push(p+r-s)}}(t,i,o,a,0),(r||l)(h,u,n)}class Pc{constructor(e,t,i,o){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=e,this.to=t,this.tree=i,this.offset=o,this.open=(a?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[new Pc(0,e.length,e,0,!1,i)];for(let a of t)a.to>e.length&&o.push(a);return o}static applyChanges(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!t.length)return e;let o=[],a=1,s=e.length?e[0]:null;for(let n=0,r=0,l=0;;n++){let c=n<t.length?t[n]:null,d=c?c.fromA:1e9;if(d-r>=i)for(;s&&s.from<d;){let t=s;if(r>=t.from||d<=t.to||l){let e=Math.max(t.from,r)-l,i=Math.min(t.to,d)-l;t=e>=i?null:new Pc(e,i,t.tree,t.offset+l,n>0,!!c)}if(t&&o.push(t),s.to>d)break;s=a<e.length?e[a++]:null}if(!c)break;r=c.toA,l=c.toA-c.toB}return o}}class Tc{startParse(e,t,i){return"string"==typeof e&&(e=new Ic(e)),i=i?i.length?i.map((e=>new nc(e.from,e.to))):[new nc(0,0)]:[new nc(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let o=this.startParse(e,t,i);for(;;){let e=o.advance();if(e)return e}}}class Ic{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new rc({perNode:!0});let Nc=0;class Fc{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=Nc++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new Fc([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new Ec;return t=>t.modified.indexOf(e)>-1?t:Ec.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let Lc=0;class Ec{constructor(){this.instances=[],this.id=Lc++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find((i=>{return i.base==e&&(o=t,a=i.modified,o.length==a.length&&o.every(((e,t)=>e==a[t])));var o,a}));if(i)return i;let o=[],a=new Fc(o,e,t);for(let n of t)n.instances.push(a);let s=function(e){let t=[[]];for(let i=0;i<e.length;i++)for(let o=0,a=t.length;o<a;o++)t.push(t[o].concat(e[i]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let n of e.set)if(!n.modified.length)for(let e of s)o.push(Ec.get(n,e));return a}}function jc(e){let t=Object.create(null);for(let i in e){let o=e[i];Array.isArray(o)||(o=[o]);for(let e of i.split(" "))if(e){let i=[],a=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){a=1;break}let o=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!o)throw new RangeError("Invalid path: "+e);if(i.push("*"==o[0]?"":'"'==o[0][0]?JSON.parse(o[0]):o[0]),t+=o[0].length,t==e.length)break;let n=e[t++];if(t==e.length&&"!"==n){a=0;break}if("/"!=n)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let n=i.length-1,r=i[n];if(!r)throw new RangeError("Invalid path: "+e);let l=new Rc(o,a,n>0?i.slice(0,n):null);t[r]=l.sort(t[r])}}return Zc.add(t)}const Zc=new rc;class Rc{constructor(e,t,i,o){this.tags=e,this.mode=t,this.context=i,this.next=o}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function Qc(e,t){let i=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)i[e.id]=s.class;else i[s.tag.id]=s.class;let{scope:o,all:a=null}=t||{};return{style:e=>{let t=a;for(let o of e)for(let e of o.set){let o=i[e.id];if(o){t=t?t+" "+o:o;break}}return t},scope:o}}function zc(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,s=new Uc(o,Array.isArray(t)?t:[t],i);s.highlightRange(e.cursor(),o,a,"",s.highlighters),s.flush(a)}Rc.empty=new Rc([],2,null);class Uc{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,o,a){let{type:s,from:n,to:r}=e;if(n>=i||r<=t)return;s.isTop&&(a=this.highlighters.filter((e=>!e.scope||e.scope(s))));let l=o,c=function(e){let t=e.type.prop(Zc);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||Rc.empty,d=function(e,t){let i=null;for(let o of e){let e=o.style(t);e&&(i=i?i+" "+e:e)}return i}(a,c.tags);if(d&&(l&&(l+=" "),l+=d,1==c.mode&&(o+=(o?" ":"")+d)),this.startSpan(Math.max(t,n),l),c.opaque)return;let h=e.tree&&e.tree.prop(rc.mounted);if(h&&h.overlay){let s=e.node.enter(h.overlay[0].from+n,1),c=this.highlighters.filter((e=>!e.scope||e.scope(h.tree.type))),d=e.firstChild();for(let u=0,p=n;;u++){let _=u<h.overlay.length?h.overlay[u]:null,f=_?_.from+n:r,g=Math.max(t,p),m=Math.min(i,f);if(g<m&&d)for(;e.from<m&&(this.highlightRange(e,g,m,o,a),this.startSpan(Math.min(m,e.to),l),!(e.to>=f)&&e.nextSibling()););if(!_||f>i)break;p=_.to+n,p>t&&(this.highlightRange(s.cursor(),Math.max(t,_.from+n),Math.min(i,p),"",c),this.startSpan(Math.min(i,p),l))}d&&e.parent()}else if(e.firstChild()){h&&(o="");do{if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,o,a),this.startSpan(Math.min(i,e.to),l)}}while(e.nextSibling());e.parent()}}}const Bc=Fc.define,Yc=Bc(),Hc=Bc(),Vc=Bc(Hc),Wc=Bc(Hc),Gc=Bc(),Jc=Bc(Gc),qc=Bc(Gc),Kc=Bc(),Xc=Bc(Kc),$c=Bc(),ed=Bc(),td=Bc(),id=Bc(td),od=Bc(),ad={comment:Yc,lineComment:Bc(Yc),blockComment:Bc(Yc),docComment:Bc(Yc),name:Hc,variableName:Bc(Hc),typeName:Vc,tagName:Bc(Vc),propertyName:Wc,attributeName:Bc(Wc),className:Bc(Hc),labelName:Bc(Hc),namespace:Bc(Hc),macroName:Bc(Hc),literal:Gc,string:Jc,docString:Bc(Jc),character:Bc(Jc),attributeValue:Bc(Jc),number:qc,integer:Bc(qc),float:Bc(qc),bool:Bc(Gc),regexp:Bc(Gc),escape:Bc(Gc),color:Bc(Gc),url:Bc(Gc),keyword:$c,self:Bc($c),null:Bc($c),atom:Bc($c),unit:Bc($c),modifier:Bc($c),operatorKeyword:Bc($c),controlKeyword:Bc($c),definitionKeyword:Bc($c),moduleKeyword:Bc($c),operator:ed,derefOperator:Bc(ed),arithmeticOperator:Bc(ed),logicOperator:Bc(ed),bitwiseOperator:Bc(ed),compareOperator:Bc(ed),updateOperator:Bc(ed),definitionOperator:Bc(ed),typeOperator:Bc(ed),controlOperator:Bc(ed),punctuation:td,separator:Bc(td),bracket:id,angleBracket:Bc(id),squareBracket:Bc(id),paren:Bc(id),brace:Bc(id),content:Kc,heading:Xc,heading1:Bc(Xc),heading2:Bc(Xc),heading3:Bc(Xc),heading4:Bc(Xc),heading5:Bc(Xc),heading6:Bc(Xc),contentSeparator:Bc(Kc),list:Bc(Kc),quote:Bc(Kc),emphasis:Bc(Kc),strong:Bc(Kc),link:Bc(Kc),monospace:Bc(Kc),strikethrough:Bc(Kc),inserted:Bc(),deleted:Bc(),changed:Bc(),invalid:Bc(),meta:od,documentMeta:Bc(od),annotation:Bc(od),processingInstruction:Bc(od),definition:Fc.defineModifier(),constant:Fc.defineModifier(),function:Fc.defineModifier(),standard:Fc.defineModifier(),local:Fc.defineModifier(),special:Fc.defineModifier()};Qc([{tag:ad.link,class:"tok-link"},{tag:ad.heading,class:"tok-heading"},{tag:ad.emphasis,class:"tok-emphasis"},{tag:ad.strong,class:"tok-strong"},{tag:ad.keyword,class:"tok-keyword"},{tag:ad.atom,class:"tok-atom"},{tag:ad.bool,class:"tok-bool"},{tag:ad.url,class:"tok-url"},{tag:ad.labelName,class:"tok-labelName"},{tag:ad.inserted,class:"tok-inserted"},{tag:ad.deleted,class:"tok-deleted"},{tag:ad.literal,class:"tok-literal"},{tag:ad.string,class:"tok-string"},{tag:ad.number,class:"tok-number"},{tag:[ad.regexp,ad.escape,ad.special(ad.string)],class:"tok-string2"},{tag:ad.variableName,class:"tok-variableName"},{tag:ad.local(ad.variableName),class:"tok-variableName tok-local"},{tag:ad.definition(ad.variableName),class:"tok-variableName tok-definition"},{tag:ad.special(ad.variableName),class:"tok-variableName2"},{tag:ad.definition(ad.propertyName),class:"tok-propertyName tok-definition"},{tag:ad.typeName,class:"tok-typeName"},{tag:ad.namespace,class:"tok-namespace"},{tag:ad.className,class:"tok-className"},{tag:ad.macroName,class:"tok-macroName"},{tag:ad.propertyName,class:"tok-propertyName"},{tag:ad.operator,class:"tok-operator"},{tag:ad.comment,class:"tok-comment"},{tag:ad.meta,class:"tok-meta"},{tag:ad.invalid,class:"tok-invalid"},{tag:ad.punctuation,class:"tok-punctuation"}]);var sd;const nd=new rc;function rd(e){return vi.define({combine:e?t=>t.concat(e):void 0})}const ld=new rc;class cd{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=e,this.name=o,no.prototype.hasOwnProperty("tree")||Object.defineProperty(no.prototype,"tree",{get(){return ud(this)}}),this.parser=t,this.extension=[Ad.of(this),no.languageData.of(((e,t,i)=>{let o=dd(e,t,i),a=o.type.prop(nd);if(!a)return[];let s=e.facet(a),n=o.type.prop(ld);if(n){let a=o.resolve(t-o.from,i);for(let t of n)if(t.test(a,e)){let i=e.facet(t.facet);return"replace"==t.type?i:i.concat(s)}}return s}))].concat(i)}isActiveAt(e,t){return dd(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop(nd)==this.data}findRegions(e){let t=e.facet(Ad);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],o=(e,t)=>{if(e.prop(nd)==this.data)return void i.push({from:t,to:t+e.length});let a=e.prop(rc.mounted);if(a){if(a.tree.prop(nd)==this.data){if(a.overlay)for(let e of a.overlay)i.push({from:e.from+t,to:e.to+t});else i.push({from:t,to:t+e.length});return}if(a.overlay){let e=i.length;if(o(a.tree,a.overlay[0].from+t),i.length>e)return}}for(let i=0;i<e.children.length;i++){let a=e.children[i];a instanceof _c&&o(a,e.positions[i]+t)}};return o(ud(e),0),i}get allowsNesting(){return!0}}function dd(e,t,i){let o=e.facet(Ad),a=ud(e).topNode;if(!o||o.allowsNesting)for(let s=a;s;s=s.enter(t,i,pc.ExcludeBuffers))s.type.isTop&&(a=s);return a}cd.setState=Gi.define();class hd extends cd{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=rd(e.languageData);return new hd(t,e.parser.configure({props:[nd.add((e=>e.isTop?t:void 0))]}),e.name)}configure(e,t){return new hd(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ud(e){let t=e.field(cd.state,!1);return t?t.tree:_c.empty}class pd{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let _d=null;class fd{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,n=arguments.length>6?arguments[6]:void 0,r=arguments.length>7?arguments[7]:void 0;this.parser=e,this.state=t,this.fragments=i,this.tree=o,this.treeLen=a,this.viewport=s,this.skipped=n,this.scheduleOn=r,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new fd(e,t,[],_c.empty,0,i,[],null)}startParse(){return this.parser.startParse(new pd(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=_c.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var i;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let o=this.parse.advance();if(o){if(this.fragments=this.withoutTempSkipped(Pc.addTree(o,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(i=this.parse.stoppedAt)&&void 0!==i?i:this.state.doc.length,this.tree=o,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Pc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=_d;_d=this;try{return e()}finally{_d=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=gd(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:o,treeLen:a,viewport:s,skipped:n}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,i,o,a)=>t.push({fromA:e,toA:i,fromB:o,toB:a}))),i=Pc.applyChanges(i,t),o=_c.empty,a=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){n=[];for(let t of this.skipped){let i=e.mapPos(t.from,1),o=e.mapPos(t.to,-1);i<o&&n.push({from:i,to:o})}}}return new fd(this.parser,t,i,o,a,s,n,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:t,to:o}=this.skipped[i];t<e.to&&o>e.from&&(this.fragments=gd(this.fragments,t,o),this.skipped.splice(i--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Tc{createParse(t,i,o){let a=o[0].from,s=o[o.length-1].to;return{parsedPos:a,advance(){let t=_d;if(t){for(let e of o)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new _c(cc.none,[],[],s-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return _d}}function gd(e,t,i){return Pc.applyChanges(e,[{fromA:t,toA:i,fromB:t,toB:i}])}class md{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new md(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=fd.create(e.facet(Ad).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new md(i)}}cd.state=wi.define({create:md.init,update(e,t){for(let i of t.effects)if(i.is(cd.setState))return i.value;return t.startState.facet(Ad)!=t.state.facet(Ad)?md.init(t.state):e.apply(t)}});let vd=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(vd=e=>{let t=-1,i=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(i):cancelIdleCallback(t)});const bd="undefined"!=typeof navigator&&(null===(sd=navigator.scheduling)||void 0===sd?void 0:sd.isInputPending)?()=>navigator.scheduling.isInputPending():null,yd=hs.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(cd.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(cd.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=vd(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:o}}=this.view,a=i.field(cd.state);if(a.tree==a.context.tree&&a.context.isDone(o+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!bd?Math.max(25,e.timeRemaining()-5):1e9),n=a.context.treeLen<o&&i.doc.length>o+1e3,r=a.context.work((()=>bd&&bd()||Date.now()>s),o+(n?0:1e5));this.chunkBudget-=Date.now()-t,(r||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:cd.setState.of(new md(a.context))})),this.chunkBudget>0&&(!r||n)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>rs(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ad=vi.define({combine:e=>e.length?e[0]:null,enables:e=>[cd.state,yd,br.contentAttributes.compute([e],(t=>{let i=t.facet(e);return i&&i.name?{"data-language":i.name}:{}}))]});class Dd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.language=e,this.support=t,this.extension=[e,t]}}const kd=vi.define(),Od=vi.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function wd(e){let t=e.facet(Od);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function Cd(e,t){let i="",o=e.tabSize,a=e.facet(Od)[0];if("\t"==a){for(;t>=o;)i+="\t",t-=o;a=" "}for(let s=0;s<t;s++)i+=a;return i}function xd(e,t){e instanceof no&&(e=new Sd(e));for(let o of e.state.facet(kd)){let i=o(e,t);if(void 0!==i)return i}let i=ud(e.state);return i?function(e,t,i){return Td(t.resolveInner(i).enterUnfinishedNodesBefore(i),i,e)}(e,i,t):null}class Sd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.state=e,this.options=t,this.unit=wd(e)}lineAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.state.doc.lineAt(e),{simulateBreak:o,simulateDoubleBreak:a}=this.options;return null!=o&&o>=i.from&&o<=i.to?a&&o==e?{text:"",from:e}:(t<0?o<e:o<=e)?{text:i.text.slice(o-i.from),from:o}:{text:i.text.slice(0,o-i.from),from:i.from}:i}textAfterPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:o}=this.lineAt(e,t);return i.slice(e-o,Math.min(i.length,e+100-o))}column(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{text:i,from:o}=this.lineAt(e,t),a=this.countColumn(i,e-o),s=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return s>-1&&(a+=s-this.countColumn(i,i.search(/\S|$/))),a}countColumn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return wo(e,this.state.tabSize,t)}lineIndent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{text:i,from:o}=this.lineAt(e,t),a=this.options.overrideIndentation;if(a){let e=a(o);if(e>-1)return e}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Md=new rc;function Pd(e){let t=e.type.prop(Md);if(t)return t;let i,o=e.firstChild;if(o&&(i=o.type.prop(rc.closedBy))){let t=e.lastChild,o=t&&i.indexOf(t.name)>-1;return e=>Ed(e,!0,1,void 0,o&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?Id:null}function Td(e,t,i){for(;e;e=e.parent){let o=Pd(e);if(o)return o(Nd.create(i,t,e))}return null}function Id(){return 0}class Nd extends Sd{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new Nd(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Fd(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){let e=this.node.parent;return e?Td(e,this.pos,this.base):0}}function Fd(e,t){for(let i=t;i;i=i.parent)if(e==i)return!0;return!1}function Ld(e){let{closing:t,align:i=!0,units:o=1}=e;return e=>Ed(e,i,o,t)}function Ed(e,t,i,o,a){let s=e.textAfter,n=s.match(/^\s*/)[0].length,r=o&&s.slice(n,n+o.length)==o||a==e.pos+n,l=t?function(e){let t=e.node,i=t.childAfter(t.from),o=t.lastChild;if(!i)return null;let a=e.options.simulateBreak,s=e.state.doc.lineAt(i.from),n=null==a||a<=s.from?s.to:Math.min(s.to,a);for(let r=i.to;;){let e=t.childAfter(r);if(!e||e==o)return null;if(!e.type.isSkipped)return e.from<n?i:null;r=e.to}}(e):null;return l?r?e.column(l.from):e.column(l.to):e.baseIndent+(r?0:e.unit*i)}function jd(){let{except:e,units:t=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i=>{let o=e&&e.test(i.textAfter);return i.baseIndent+(o?0:t*i.unit)}}const Zd=vi.define(),Rd=new rc;function Qd(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function zd(e,t,i){for(let o of e.facet(Zd)){let a=o(e,t,i);if(a)return a}return function(e,t,i){let o=ud(e);if(o.length<i)return null;let a=null;for(let s=o.resolveInner(i,1);s;s=s.parent){if(s.to<=i||s.from>i)continue;if(a&&s.from<t)break;let n=s.type.prop(Rd);if(n&&(s.to<o.length-50||o.length==e.doc.length||!Qd(s))){let o=n(s,e);o&&o.from<=i&&o.from>=t&&o.to>i&&(a=o)}}return a}(e,t,i)}function Ud(e,t){let i=t.mapPos(e.from,1),o=t.mapPos(e.to,-1);return i>=o?void 0:{from:i,to:o}}const Bd=Gi.define({map:Ud}),Yd=Gi.define({map:Ud});function Hd(e){let t=[];for(let{head:i}of e.state.selection.ranges)t.some((e=>e.from<=i&&e.to>=i))||t.push(e.lineBlockAt(i));return t}const Vd=wi.define({create:()=>Ra.none,update(e,t){e=e.map(t.changes);for(let i of t.effects)i.is(Bd)&&!Gd(e,i.value.from,i.value.to)?e=e.update({add:[th.range(i.value.from,i.value.to)]}):i.is(Yd)&&(e=e.update({filter:(e,t)=>i.value.from!=e||i.value.to!=t,filterFrom:i.value.from,filterTo:i.value.to}));if(t.selection){let i=!1,{head:o}=t.selection.main;e.between(o,o,((e,t)=>{e<o&&t>o&&(i=!0)})),i&&(e=e.update({filterFrom:o,filterTo:o,filter:(e,t)=>t<=o||e>=o}))}return e},provide:e=>br.decorations.from(e),toJSON(e,t){let i=[];return e.between(0,t.doc.length,((e,t)=>{i.push(e,t)})),i},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let i=0;i<e.length;){let o=e[i++],a=e[i++];if("number"!=typeof o||"number"!=typeof a)throw new RangeError("Invalid JSON for fold state");t.push(th.range(o,a))}return Ra.set(t,!0)}});function Wd(e,t,i){var o;let a=null;return null===(o=e.field(Vd,!1))||void 0===o||o.between(t,i,((e,t)=>{(!a||a.from>e)&&(a={from:e,to:t})})),a}function Gd(e,t,i){let o=!1;return e.between(t,t,((e,a)=>{e==t&&a==i&&(o=!0)})),o}function Jd(e,t){return e.field(Vd,!1)?t:t.concat(Gi.appendConfig.of(eh()))}function qd(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e.state.doc.lineAt(t.from).number,a=e.state.doc.lineAt(t.to).number;return br.announce.of(`${e.state.phrase(i?"Folded lines":"Unfolded lines")} ${o} ${e.state.phrase("to")} ${a}.`)}const Kd=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of Hd(e)){let i=zd(e.state,t.from,t.to);if(i)return e.dispatch({effects:Jd(e.state,[Bd.of(i),qd(e,i)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(Vd,!1))return!1;let t=[];for(let i of Hd(e)){let o=Wd(e.state,i.from,i.to);o&&t.push(Yd.of(o),qd(e,o,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,i=[];for(let o=0;o<t.doc.length;){let a=e.lineBlockAt(o),s=zd(t,a.from,a.to);s&&i.push(Bd.of(s)),o=(s?e.lineBlockAt(s.to):a).to+1}return i.length&&e.dispatch({effects:Jd(e.state,i)}),!!i.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(Vd,!1);if(!t||!t.size)return!1;let i=[];return t.between(0,e.state.doc.length,((e,t)=>{i.push(Yd.of({from:e,to:t}))})),e.dispatch({effects:i}),!0}}],Xd={placeholderDOM:null,placeholderText:"\u2026"},$d=vi.define({combine:e=>ro(e,Xd)});function eh(e){let t=[Vd,ah];return e&&t.push($d.of(e)),t}const th=Ra.replace({widget:new class extends ja{toDOM(e){let{state:t}=e,i=t.facet($d),o=t=>{let i=e.lineBlockAt(e.posAtDOM(t.target)),o=Wd(e.state,i.from,i.to);o&&e.dispatch({effects:Yd.of(o)}),t.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(e,o);let a=document.createElement("span");return a.textContent=i.placeholderText,a.setAttribute("aria-label",t.phrase("folded code")),a.title=t.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=o,a}}}),ih={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class oh extends jl{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}const ah=br.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class sh{constructor(e,t){let i;function o(e){let t=Po.newName();return(i||(i=Object.create(null)))["."+t]=e,t}this.specs=e;const a="string"==typeof t.all?t.all:t.all?o(t.all):void 0,s=t.scope;this.scope=s instanceof cd?e=>e.prop(nd)==s.data:s?e=>e==s:void 0,this.style=Qc(e.map((e=>({tag:e.tag,class:e.class||o(Object.assign({},e,{tag:null}))}))),{all:a}).style,this.module=i?new Po(i):null,this.themeType=t.themeType}static define(e,t){return new sh(e,t||{})}}const nh=vi.define(),rh=vi.define({combine:e=>e.length?[e[0]]:null});function lh(e){let t=e.facet(nh);return t.length?t:e.facet(rh)}function ch(e,t){let i,o=[hh];return e instanceof sh&&(e.module&&o.push(br.styleModule.of(e.module)),i=e.themeType),(null===t||void 0===t?void 0:t.fallback)?o.push(rh.of(e)):i?o.push(nh.computeN([br.darkTheme],(t=>t.facet(br.darkTheme)==("dark"==i)?[e]:[]))):o.push(nh.of(e)),o}class dh{constructor(e){this.markCache=Object.create(null),this.tree=ud(e.state),this.decorations=this.buildDeco(e,lh(e.state))}update(e){let t=ud(e.state),i=lh(e.state),o=i!=lh(e.startState);t.length<e.view.viewport.to&&!o&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||o)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return Ra.none;let i=new _o;for(let{from:o,to:a}of e.visibleRanges)zc(this.tree,t,((e,t,o)=>{i.add(e,t,this.markCache[o]||(this.markCache[o]=Ra.mark({class:o})))}),o,a);return i.finish()}}const hh=Ti.high(hs.fromClass(dh,{decorations:e=>e.decorations})),uh=sh.define([{tag:ad.meta,color:"#404740"},{tag:ad.link,textDecoration:"underline"},{tag:ad.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.keyword,color:"#708"},{tag:[ad.atom,ad.bool,ad.url,ad.contentSeparator,ad.labelName],color:"#219"},{tag:[ad.literal,ad.inserted],color:"#164"},{tag:[ad.string,ad.deleted],color:"#a11"},{tag:[ad.regexp,ad.escape,ad.special(ad.string)],color:"#e40"},{tag:ad.definition(ad.variableName),color:"#00f"},{tag:ad.local(ad.variableName),color:"#30a"},{tag:[ad.typeName,ad.namespace],color:"#085"},{tag:ad.className,color:"#167"},{tag:[ad.special(ad.variableName),ad.macroName],color:"#256"},{tag:ad.definition(ad.propertyName),color:"#00c"},{tag:ad.comment,color:"#940"},{tag:ad.invalid,color:"#f00"}]),ph=br.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),_h=1e4,fh="()[]{}",gh=vi.define({combine:e=>ro(e,{afterCursor:!0,brackets:fh,maxScanDistance:_h,renderMatch:bh})}),mh=Ra.mark({class:"cm-matchingBracket"}),vh=Ra.mark({class:"cm-nonmatchingBracket"});function bh(e){let t=[],i=e.matched?mh:vh;return t.push(i.range(e.start.from,e.start.to)),e.end&&t.push(i.range(e.end.from,e.end.to)),t}const yh=wi.define({create:()=>Ra.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let i=[],o=t.state.facet(gh);for(let a of t.state.selection.ranges){if(!a.empty)continue;let e=wh(t.state,a.head,-1,o)||a.head>0&&wh(t.state,a.head-1,1,o)||o.afterCursor&&(wh(t.state,a.head,1,o)||a.head<t.state.doc.length&&wh(t.state,a.head+1,-1,o));e&&(i=i.concat(o.renderMatch(e,t.state)))}return Ra.set(i,!0)},provide:e=>br.decorations.from(e)}),Ah=[yh,ph];const Dh=new rc;function kh(e,t,i){let o=e.prop(t<0?rc.openedBy:rc.closedBy);if(o)return o;if(1==e.name.length){let o=i.indexOf(e.name);if(o>-1&&o%2==(t<0?1:0))return[i[o+t]]}return null}function Oh(e){let t=e.type.prop(Dh);return t?t(e.node):e}function wh(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=o.maxScanDistance||_h,s=o.brackets||fh,n=ud(e),r=n.resolveInner(t,i);for(let l=r;l;l=l.parent){let o=kh(l.type,i,s);if(o&&l.from<l.to){let a=Oh(l);if(a&&(i>0?t>=a.from&&t<a.to:t>a.from&&t<=a.to))return Ch(e,t,i,l,a,o,s)}}return function(e,t,i,o,a,s,n){let r=i<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=n.indexOf(r);if(l<0||l%2==0!=i>0)return null;let c={from:i<0?t-1:t,to:i>0?t+1:t},d=e.doc.iterRange(t,i>0?e.doc.length:0),h=0;for(let u=0;!d.next().done&&u<=s;){let e=d.value;i<0&&(u+=e.length);let s=t+u*i;for(let t=i>0?0:e.length-1,r=i>0?e.length:-1;t!=r;t+=i){let r=n.indexOf(e[t]);if(!(r<0||o.resolveInner(s+t,1).type!=a))if(r%2==0==i>0)h++;else{if(1==h)return{start:c,end:{from:s+t,to:s+t+1},matched:r>>1==l>>1};h--}}i>0&&(u+=e.length)}return d.done?{start:c,matched:!1}:null}(e,t,i,n,r.type,a,s)}function Ch(e,t,i,o,a,s,n){let r=o.parent,l={from:a.from,to:a.to},c=0,d=null===r||void 0===r?void 0:r.cursor();if(d&&(i<0?d.childBefore(o.from):d.childAfter(o.to)))do{if(i<0?d.to<=o.from:d.from>=o.to){if(0==c&&s.indexOf(d.type.name)>-1&&d.from<d.to){let e=Oh(d);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(kh(d.type,i,n))c++;else if(kh(d.type,-i,n)){if(0==c){let e=Oh(d);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}}while(i<0?d.prevSibling():d.nextSibling());return{start:l,matched:!1}}const xh=Object.create(null),Sh=[cc.none],Mh=[],Ph=Object.create(null);for(let[bv,yv]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Ph[bv]=Ih(xh,yv);function Th(e,t){Mh.indexOf(e)>-1||(Mh.push(e),console.warn(t))}function Ih(e,t){let i=null;for(let s of t.split(".")){let t=e[s]||ad[s];t?"function"==typeof t?i?i=t(i):Th(s,`Modifier ${s} used at start of tag`):i?Th(s,`Tag ${s} used as modifier`):i=t:Th(s,`Unknown highlighting tag ${s}`)}if(!i)return 0;let o=t.replace(/ /g,"_"),a=cc.define({id:Sh.length,name:o,props:[jc({[o]:i})]});return Sh.push(a),a.id}function Nh(e,t){return i=>{let{state:o,dispatch:a}=i;if(o.readOnly)return!1;let s=e(t,o);return!!s&&(a(o.update(s)),!0)}}const Fh=Nh(Qh,0),Lh=Nh(Rh,0),Eh=Nh(((e,t)=>Rh(e,t,function(e){let t=[];for(let i of e.selection.ranges){let o=e.doc.lineAt(i.from),a=i.to<=o.to?o:e.doc.lineAt(i.to),s=t.length-1;s>=0&&t[s].to>o.from?t[s].to=a.to:t.push({from:o.from+/^\s*/.exec(o.text)[0].length,to:a.to})}return t}(t))),0);function jh(e,t){let i=e.languageDataAt("commentTokens",t);return i.length?i[0]:{}}const Zh=50;function Rh(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,o=i.map((e=>jh(t,e.from).block));if(!o.every((e=>e)))return null;let a=i.map(((e,i)=>function(e,t,i,o){let a,s,{open:n,close:r}=t,l=e.sliceDoc(i-Zh,i),c=e.sliceDoc(o,o+Zh),d=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(c)[0].length,u=l.length-d;if(l.slice(u-n.length,u)==n&&c.slice(h,h+r.length)==r)return{open:{pos:i-d,margin:d&&1},close:{pos:o+h,margin:h&&1}};o-i<=2*Zh?a=s=e.sliceDoc(i,o):(a=e.sliceDoc(i,i+Zh),s=e.sliceDoc(o-Zh,o));let p=/^\s*/.exec(a)[0].length,_=/\s*$/.exec(s)[0].length,f=s.length-_-r.length;return a.slice(p,p+n.length)==n&&s.slice(f,f+r.length)==r?{open:{pos:i+p+n.length,margin:/\s/.test(a.charAt(p+n.length))?1:0},close:{pos:o-_-r.length,margin:/\s/.test(s.charAt(f-1))?1:0}}:null}(t,o[i],e.from,e.to)));if(2!=e&&!a.every((e=>e)))return{changes:t.changes(i.map(((e,t)=>a[t]?[]:[{from:e.from,insert:o[t].open+" "},{from:e.to,insert:" "+o[t].close}])))};if(1!=e&&a.some((e=>e))){let e=[];for(let t,i=0;i<a.length;i++)if(t=a[i]){let a=o[i],{open:s,close:n}=t;e.push({from:s.pos-a.open.length,to:s.pos+s.margin},{from:n.pos-n.margin,to:n.pos+a.close.length})}return{changes:e}}return null}function Qh(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,o=[],a=-1;for(let{from:s,to:n}of i){let e=o.length,i=1e9,r=jh(t,s).line;if(r){for(let e=s;e<=n;){let l=t.doc.lineAt(e);if(l.from>a&&(s==n||n>l.from)){a=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,s=l.text.slice(e,e+r.length)==r?e:-1;e<l.text.length&&e<i&&(i=e),o.push({line:l,comment:s,token:r,indent:e,empty:t,single:!1})}e=l.to+1}if(i<1e9)for(let t=e;t<o.length;t++)o[t].indent<o[t].line.text.length&&(o[t].indent=i);o.length==e+1&&(o[e].single=!0)}}if(2!=e&&o.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:a,indent:s,empty:n,single:r}of o)!r&&n||e.push({from:t.from+s,insert:a+" "});let i=t.changes(e);return{changes:i,selection:t.selection.map(i,1)}}if(1!=e&&o.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:i,token:a}of o)if(i>=0){let o=t.from+i,s=o+a.length;" "==t.text[s-t.from]&&s++,e.push({from:o,to:s})}return{changes:e}}return null}const zh=Hi.define(),Uh=Hi.define(),Bh=vi.define(),Yh=vi.define({combine:e=>ro(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,o)=>e(i,o)||t(i,o)})});const Hh=wi.define({create:()=>ru.empty,update(e,t){let i=t.state.facet(Yh),o=t.annotation(zh);if(o){let a=t.docChanged?fi.single(function(e){let t=0;return e.iterChangedRanges(((e,i)=>t=i)),t}(t.changes)):void 0,s=Kh.fromTransaction(t,a),n=o.side,r=0==n?e.undone:e.done;return r=s?Xh(r,r.length,i.minDepth,s):iu(r,t.startState.selection),new ru(0==n?o.rest:r,0==n?r:o.rest)}let a=t.annotation(Uh);if("full"!=a&&"before"!=a||(e=e.isolate()),!1===t.annotation(Ji.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let s=Kh.fromTransaction(t),n=t.annotation(Ji.time),r=t.annotation(Ji.userEvent);return s?e=e.addChanges(s,n,r,i,t):t.selection&&(e=e.addSelection(t.startState.selection,n,r,i.newGroupDelay)),"full"!=a&&"after"!=a||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new ru(e.done.map(Kh.fromJSON),e.undone.map(Kh.fromJSON))});function Vh(e,t){return function(i){let{state:o,dispatch:a}=i;if(!t&&o.readOnly)return!1;let s=o.field(Hh,!1);if(!s)return!1;let n=s.pop(e,o,t);return!!n&&(a(n),!0)}}const Wh=Vh(0,!1),Gh=Vh(1,!1),Jh=Vh(0,!0),qh=Vh(1,!0);class Kh{constructor(e,t,i,o,a){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=o,this.selectionsAfter=a}setSelAfter(e){return new Kh(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(i=this.startSelection)||void 0===i?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new Kh(e.changes&&ri.fromJSON(e.changes),[],e.mapped&&ni.fromJSON(e.mapped),e.startSelection&&fi.fromJSON(e.startSelection),e.selectionsAfter.map(fi.fromJSON))}static fromTransaction(e,t){let i=eu;for(let o of e.startState.facet(Bh)){let t=o(e);t.length&&(i=i.concat(t))}return!i.length&&e.changes.empty?null:new Kh(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,eu)}static selection(e){return new Kh(void 0,eu,void 0,void 0,e)}}function Xh(e,t,i,o){let a=t+1>i+20?t-i-1:0,s=e.slice(a,t);return s.push(o),s}function $h(e,t){return e.length?t.length?e.concat(t):e:t}const eu=[],tu=200;function iu(e,t){if(e.length){let i=e[e.length-1],o=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-tu));return o.length&&o[o.length-1].eq(t)?e:(o.push(t),Xh(e,e.length-1,1e9,i.setSelAfter(o)))}return[Kh.selection([t])]}function ou(e){let t=e[e.length-1],i=e.slice();return i[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),i}function au(e,t){if(!e.length)return e;let i=e.length,o=eu;for(;i;){let a=su(e[i-1],t,o);if(a.changes&&!a.changes.empty||a.effects.length){let t=e.slice(0,i);return t[i-1]=a,t}t=a.mapped,i--,o=a.selectionsAfter}return o.length?[Kh.selection(o)]:eu}function su(e,t,i){let o=$h(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):eu,i);if(!e.changes)return Kh.selection(o);let a=e.changes.map(t),s=t.mapDesc(e.changes,!0),n=e.mapped?e.mapped.composeDesc(s):s;return new Kh(a,Gi.mapEffects(e.effects,t),n,e.startSelection.map(s),o)}const nu=/^(input\.type|delete)($|\.)/;class ru{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=o}isolate(){return this.prevTime?new ru(this.done,this.undone):this}addChanges(e,t,i,o,a){let s=this.done,n=s[s.length-1];return s=n&&n.changes&&!n.changes.empty&&e.changes&&(!i||nu.test(i))&&(!n.selectionsAfter.length&&t-this.prevTime<o.newGroupDelay&&o.joinToEvent(a,function(e,t){let i=[],o=!1;return e.iterChangedRanges(((e,t)=>i.push(e,t))),t.iterChangedRanges(((e,t,a,s)=>{for(let n=0;n<i.length;){let e=i[n++],t=i[n++];s>=e&&a<=t&&(o=!0)}})),o}(n.changes,e.changes))||"input.type.compose"==i)?Xh(s,s.length-1,o.minDepth,new Kh(e.changes.compose(n.changes),$h(e.effects,n.effects),n.mapped,n.startSelection,eu)):Xh(s,s.length,o.minDepth,e),new ru(s,eu,t,i)}addSelection(e,t,i,o){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:eu;return a.length>0&&t-this.prevTime<o&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&(s=a[a.length-1],n=e,s.ranges.length==n.ranges.length&&0===s.ranges.filter(((e,t)=>e.empty!=n.ranges[t].empty)).length)?this:new ru(iu(this.done,e),this.undone,t,i);var s,n}addMapping(e){return new ru(au(this.done,e),au(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let o=0==e?this.done:this.undone;if(0==o.length)return null;let a=o[o.length-1];if(i&&a.selectionsAfter.length)return t.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:zh.of({side:e,rest:ou(o)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let i=1==o.length?eu:o.slice(0,o.length-1);return a.mapped&&(i=au(i,a.mapped)),t.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:zh.of({side:e,rest:i}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}ru.empty=new ru(eu,eu);const lu=[{key:"Mod-z",run:Wh,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Gh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Gh,preventDefault:!0},{key:"Mod-u",run:Jh,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:qh,preventDefault:!0}];function cu(e,t){return fi.create(e.ranges.map(t),e.mainIndex)}function du(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function hu(e,t){let{state:i,dispatch:o}=e,a=cu(i.selection,t);return!a.eq(i.selection)&&(o(du(i,a)),!0)}function uu(e,t){return fi.cursor(t?e.to:e.from)}function pu(e,t){return hu(e,(i=>i.empty?e.moveByChar(i,t):uu(i,t)))}function _u(e){return e.textDirectionAt(e.state.selection.main.head)==Ds.LTR}const fu=e=>pu(e,!_u(e)),gu=e=>pu(e,_u(e));function mu(e,t){return hu(e,(i=>i.empty?e.moveByGroup(i,t):uu(i,t)))}function vu(e,t,i){if(t.type.prop(i))return!0;let o=t.to-t.from;return o&&(o>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function bu(e,t,i){let o,a,s=ud(e).resolveInner(t.head),n=i?rc.closedBy:rc.openedBy;for(let r=t.head;;){let t=i?s.childAfter(r):s.childBefore(r);if(!t)break;vu(e,t,n)?s=t:r=i?t.to:t.from}return a=s.type.prop(n)&&(o=i?wh(e,s.from,1):wh(e,s.to,-1))&&o.matched?i?o.end.to:o.end.from:i?s.to:s.from,fi.cursor(a,i?-1:1)}function yu(e,t){return hu(e,(i=>{if(!i.empty)return uu(i,t);let o=e.moveVertically(i,t);return o.head!=i.head?o:e.moveToLineBoundary(i,t)}))}const Au=e=>yu(e,!1),Du=e=>yu(e,!0);function ku(e){let t,i=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,o=0,a=0;if(i){for(let t of e.state.facet(br.scrollMargins)){let i=t(e);(null===i||void 0===i?void 0:i.top)&&(o=Math.max(null===i||void 0===i?void 0:i.top,o)),(null===i||void 0===i?void 0:i.bottom)&&(a=Math.max(null===i||void 0===i?void 0:i.bottom,a))}t=e.scrollDOM.clientHeight-o-a}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:o,marginBottom:a,selfScroll:i,height:Math.max(e.defaultLineHeight,t-5)}}function Ou(e,t){let i,o=ku(e),{state:a}=e,s=cu(a.selection,(i=>i.empty?e.moveVertically(i,t,o.height):uu(i,t)));if(s.eq(a.selection))return!1;if(o.selfScroll){let t=e.coordsAtPos(a.selection.main.head),n=e.scrollDOM.getBoundingClientRect(),r=n.top+o.marginTop,l=n.bottom-o.marginBottom;t&&t.top>r&&t.bottom<l&&(i=br.scrollIntoView(s.main.head,{y:"start",yMargin:t.top-r}))}return e.dispatch(du(a,s),{effects:i}),!0}const wu=e=>Ou(e,!1),Cu=e=>Ou(e,!0);function xu(e,t,i){let o=e.lineBlockAt(t.head),a=e.moveToLineBoundary(t,i);if(a.head==t.head&&a.head!=(i?o.to:o.from)&&(a=e.moveToLineBoundary(t,i,!1)),!i&&a.head==o.from&&o.length){let i=/^\s*/.exec(e.state.sliceDoc(o.from,Math.min(o.from+100,o.to)))[0].length;i&&t.head!=o.from+i&&(a=fi.cursor(o.from+i))}return a}function Su(e,t,i){let o=!1,a=cu(e.selection,(t=>{let a=wh(e,t.head,-1)||wh(e,t.head,1)||t.head>0&&wh(e,t.head-1,1)||t.head<e.doc.length&&wh(e,t.head+1,-1);if(!a||!a.end)return t;o=!0;let s=a.start.from==t.head?a.end.to:a.end.from;return i?fi.range(t.anchor,s):fi.cursor(s)}));return!!o&&(t(du(e,a)),!0)}function Mu(e,t){let i=cu(e.state.selection,(e=>{let i=t(e);return fi.range(e.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)}));return!i.eq(e.state.selection)&&(e.dispatch(du(e.state,i)),!0)}function Pu(e,t){return Mu(e,(i=>e.moveByChar(i,t)))}const Tu=e=>Pu(e,!_u(e)),Iu=e=>Pu(e,_u(e));function Nu(e,t){return Mu(e,(i=>e.moveByGroup(i,t)))}function Fu(e,t){return Mu(e,(i=>e.moveVertically(i,t)))}const Lu=e=>Fu(e,!1),Eu=e=>Fu(e,!0);function ju(e,t){return Mu(e,(i=>e.moveVertically(i,t,ku(e).height)))}const Zu=e=>ju(e,!1),Ru=e=>ju(e,!0),Qu=e=>{let{state:t,dispatch:i}=e;return i(du(t,{anchor:0})),!0},zu=e=>{let{state:t,dispatch:i}=e;return i(du(t,{anchor:t.doc.length})),!0},Uu=e=>{let{state:t,dispatch:i}=e;return i(du(t,{anchor:t.selection.main.anchor,head:0})),!0},Bu=e=>{let{state:t,dispatch:i}=e;return i(du(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0};function Yu(e,t){if(e.state.readOnly)return!1;let i="delete.selection",{state:o}=e,a=o.changeByRange((o=>{let{from:a,to:s}=o;if(a==s){let o=t(a);o<a?(i="delete.backward",o=Hu(e,o,!1)):o>a&&(i="delete.forward",o=Hu(e,o,!0)),a=Math.min(a,o),s=Math.max(s,o)}else a=Hu(e,a,!1),s=Hu(e,s,!0);return a==s?{range:o}:{changes:{from:a,to:s},range:fi.cursor(a)}}));return!a.changes.empty&&(e.dispatch(o.update(a,{scrollIntoView:!0,userEvent:i,effects:"delete.selection"==i?br.announce.of(o.phrase("Selection deleted")):void 0})),!0)}function Hu(e,t,i){if(e instanceof br)for(let o of e.state.facet(br.atomicRanges).map((t=>t(e))))o.between(t,t,((e,o)=>{e<t&&o>t&&(t=i?o:e)}));return t}const Vu=(e,t)=>Yu(e,(i=>{let o,a,{state:s}=e,n=s.doc.lineAt(i);if(!t&&i>n.from&&i<n.from+200&&!/[^ \t]/.test(o=n.text.slice(0,i-n.from))){if("\t"==o[o.length-1])return i-1;let e=wo(o,s.tabSize)%wd(s)||wd(s);for(let t=0;t<e&&" "==o[o.length-1-t];t++)i--;a=i}else a=qt(n.text,i-n.from,t,t)+n.from,a==i&&n.number!=(t?s.doc.lines:1)&&(a+=t?1:-1);return a})),Wu=e=>Vu(e,!1),Gu=e=>Vu(e,!0),Ju=(e,t)=>Yu(e,(i=>{let o=i,{state:a}=e,s=a.doc.lineAt(o),n=a.charCategorizer(o);for(let e=null;;){if(o==(t?s.to:s.from)){o==i&&s.number!=(t?a.doc.lines:1)&&(o+=t?1:-1);break}let r=qt(s.text,o-s.from,t)+s.from,l=s.text.slice(Math.min(o,r)-s.from,Math.max(o,r)-s.from),c=n(l);if(null!=e&&c!=e)break;" "==l&&o==i||(e=c),o=r}return o})),qu=e=>Ju(e,!1),Ku=e=>Yu(e,(t=>{let i=e.lineBlockAt(t).to;return t<i?i:Math.min(e.state.doc.length,t+1)}));function Xu(e){let t=[],i=-1;for(let o of e.selection.ranges){let a=e.doc.lineAt(o.from),s=e.doc.lineAt(o.to);if(o.empty||o.to!=s.from||(s=e.doc.lineAt(o.to-1)),i>=a.number){let e=t[t.length-1];e.to=s.to,e.ranges.push(o)}else t.push({from:a.from,to:s.to,ranges:[o]});i=s.number+1}return t}function $u(e,t,i){if(e.readOnly)return!1;let o=[],a=[];for(let s of Xu(e)){if(i?s.to==e.doc.length:0==s.from)continue;let t=e.doc.lineAt(i?s.to+1:s.from-1),n=t.length+1;if(i){o.push({from:s.to,to:t.to},{from:s.from,insert:t.text+e.lineBreak});for(let t of s.ranges)a.push(fi.range(Math.min(e.doc.length,t.anchor+n),Math.min(e.doc.length,t.head+n)))}else{o.push({from:t.from,to:s.from},{from:s.to,insert:e.lineBreak+t.text});for(let e of s.ranges)a.push(fi.range(e.anchor-n,e.head-n))}}return!!o.length&&(t(e.update({changes:o,scrollIntoView:!0,selection:fi.create(a,e.selection.mainIndex),userEvent:"move.line"})),!0)}function ep(e,t,i){if(e.readOnly)return!1;let o=[];for(let a of Xu(e))i?o.push({from:a.from,insert:e.doc.slice(a.from,a.to)+e.lineBreak}):o.push({from:a.to,insert:e.lineBreak+e.doc.slice(a.from,a.to)});return t(e.update({changes:o,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const tp=ip(!1);function ip(e){return t=>{let{state:i,dispatch:o}=t;if(i.readOnly)return!1;let a=i.changeByRange((t=>{let{from:o,to:a}=t,s=i.doc.lineAt(o),n=!e&&o==a&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let i,o=ud(e).resolveInner(t),a=o.childBefore(t),s=o.childAfter(t);return a&&s&&a.to<=t&&s.from>=t&&(i=a.type.prop(rc.closedBy))&&i.indexOf(s.name)>-1&&e.doc.lineAt(a.to).from==e.doc.lineAt(s.from).from?{from:a.to,to:s.from}:null}(i,o);e&&(o=a=(a<=s.to?s:i.doc.lineAt(a)).to);let r=new Sd(i,{simulateBreak:o,simulateDoubleBreak:!!n}),l=xd(r,o);for(null==l&&(l=/^\s*/.exec(i.doc.lineAt(o).text)[0].length);a<s.to&&/\s/.test(s.text[a-s.from]);)a++;n?({from:o,to:a}=n):o>s.from&&o<s.from+100&&!/\S/.test(s.text.slice(0,o))&&(o=s.from);let c=["",Cd(i,l)];return n&&c.push(Cd(i,r.lineIndent(s.from,-1))),{changes:{from:o,to:a,insert:jt.of(c)},range:fi.cursor(o+1+c[1].length)}}));return o(i.update(a,{scrollIntoView:!0,userEvent:"input"})),!0}}function op(e,t){let i=-1;return e.changeByRange((o=>{let a=[];for(let n=o.from;n<=o.to;){let s=e.doc.lineAt(n);s.number>i&&(o.empty||o.to>s.from)&&(t(s,a,o),i=s.number),n=s.to+1}let s=e.changes(a);return{changes:a,range:fi.range(s.mapPos(o.anchor,1),s.mapPos(o.head,1))}}))}const ap=e=>{let{state:t,dispatch:i}=e;return!t.readOnly&&(i(t.update(op(t,((e,i)=>{i.push({from:e.from,insert:t.facet(Od)})})),{userEvent:"input.indent"})),!0)},sp=e=>{let{state:t,dispatch:i}=e;return!t.readOnly&&(i(t.update(op(t,((e,i)=>{let o=/^\s*/.exec(e.text)[0];if(!o)return;let a=wo(o,t.tabSize),s=0,n=Cd(t,Math.max(0,a-wd(t)));for(;s<o.length&&s<n.length&&o.charCodeAt(s)==n.charCodeAt(s);)s++;i.push({from:e.from+s,to:e.from+o.length,insert:n.slice(s)})})),{userEvent:"delete.dedent"})),!0)},np=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>hu(e,(t=>bu(e.state,t,!_u(e)))),shift:e=>Mu(e,(t=>bu(e.state,t,!_u(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>hu(e,(t=>bu(e.state,t,_u(e)))),shift:e=>Mu(e,(t=>bu(e.state,t,_u(e))))},{key:"Alt-ArrowUp",run:e=>{let{state:t,dispatch:i}=e;return $u(t,i,!1)}},{key:"Shift-Alt-ArrowUp",run:e=>{let{state:t,dispatch:i}=e;return ep(t,i,!1)}},{key:"Alt-ArrowDown",run:e=>{let{state:t,dispatch:i}=e;return $u(t,i,!0)}},{key:"Shift-Alt-ArrowDown",run:e=>{let{state:t,dispatch:i}=e;return ep(t,i,!0)}},{key:"Escape",run:e=>{let{state:t,dispatch:i}=e,o=t.selection,a=null;return o.ranges.length>1?a=fi.create([o.main]):o.main.empty||(a=fi.create([fi.cursor(o.main.head)])),!!a&&(i(du(t,a)),!0)}},{key:"Mod-Enter",run:ip(!0)},{key:"Alt-l",mac:"Ctrl-l",run:e=>{let{state:t,dispatch:i}=e,o=Xu(t).map((e=>{let{from:i,to:o}=e;return fi.range(i,Math.min(o+1,t.doc.length))}));return i(t.update({selection:fi.create(o),userEvent:"select"})),!0}},{key:"Mod-i",run:e=>{let{state:t,dispatch:i}=e,o=cu(t.selection,(e=>{var i;let o=ud(t).resolveInner(e.head,1);for(;!(o.from<e.from&&o.to>=e.to||o.to>e.to&&o.from<=e.from)&&(null===(i=o.parent)||void 0===i?void 0:i.parent);)o=o.parent;return fi.range(o.to,o.from)}));return i(du(t,o)),!0},preventDefault:!0},{key:"Mod-[",run:sp},{key:"Mod-]",run:ap},{key:"Mod-Alt-\\",run:e=>{let{state:t,dispatch:i}=e;if(t.readOnly)return!1;let o=Object.create(null),a=new Sd(t,{overrideIndentation:e=>{let t=o[e];return null==t?-1:t}}),s=op(t,((e,i,s)=>{let n=xd(a,e.from);if(null==n)return;/\S/.test(e.text)||(n=0);let r=/^\s*/.exec(e.text)[0],l=Cd(t,n);(r!=l||s.from<e.from+r.length)&&(o[e.from]=n,i.push({from:e.from,to:e.from+r.length,insert:l}))}));return s.changes.empty||i(t.update(s,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,i=t.changes(Xu(t).map((e=>{let{from:i,to:o}=e;return i>0?i--:o<t.doc.length&&o++,{from:i,to:o}}))),o=cu(t.selection,(t=>e.moveVertically(t,!0))).map(i);return e.dispatch({changes:i,selection:o,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:e=>{let{state:t,dispatch:i}=e;return Su(t,i,!1)}},{key:"Mod-/",run:e=>{let{state:t}=e,i=t.doc.lineAt(t.selection.main.from),o=jh(e.state,i.from);return o.line?Fh(e):!!o.block&&Eh(e)}},{key:"Alt-A",run:Lh}].concat([{key:"ArrowLeft",run:fu,shift:Tu,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>mu(e,!_u(e)),shift:e=>Nu(e,!_u(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>hu(e,(t=>xu(e,t,!_u(e)))),shift:e=>Mu(e,(t=>xu(e,t,!_u(e)))),preventDefault:!0},{key:"ArrowRight",run:gu,shift:Iu,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>mu(e,_u(e)),shift:e=>Nu(e,_u(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>hu(e,(t=>xu(e,t,_u(e)))),shift:e=>Mu(e,(t=>xu(e,t,_u(e)))),preventDefault:!0},{key:"ArrowUp",run:Au,shift:Lu,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Qu,shift:Uu},{mac:"Ctrl-ArrowUp",run:wu,shift:Zu},{key:"ArrowDown",run:Du,shift:Eu,preventDefault:!0},{mac:"Cmd-ArrowDown",run:zu,shift:Bu},{mac:"Ctrl-ArrowDown",run:Cu,shift:Ru},{key:"PageUp",run:wu,shift:Zu},{key:"PageDown",run:Cu,shift:Ru},{key:"Home",run:e=>hu(e,(t=>xu(e,t,!1))),shift:e=>Mu(e,(t=>xu(e,t,!1))),preventDefault:!0},{key:"Mod-Home",run:Qu,shift:Uu},{key:"End",run:e=>hu(e,(t=>xu(e,t,!0))),shift:e=>Mu(e,(t=>xu(e,t,!0))),preventDefault:!0},{key:"Mod-End",run:zu,shift:Bu},{key:"Enter",run:tp},{key:"Mod-a",run:e=>{let{state:t,dispatch:i}=e;return i(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0}},{key:"Backspace",run:Wu,shift:Wu},{key:"Delete",run:Gu},{key:"Mod-Backspace",mac:"Alt-Backspace",run:qu},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Ju(e,!0)},{mac:"Mod-Backspace",run:e=>Yu(e,(t=>{let i=e.lineBlockAt(t).from;return t>i?i:Math.max(0,t-1)}))},{mac:"Mod-Delete",run:Ku}].concat([{key:"Ctrl-b",run:fu,shift:Tu,preventDefault:!0},{key:"Ctrl-f",run:gu,shift:Iu},{key:"Ctrl-p",run:Au,shift:Lu},{key:"Ctrl-n",run:Du,shift:Eu},{key:"Ctrl-a",run:e=>hu(e,(t=>fi.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>Mu(e,(t=>fi.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>hu(e,(t=>fi.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>Mu(e,(t=>fi.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:Gu},{key:"Ctrl-h",run:Wu},{key:"Ctrl-k",run:Ku},{key:"Ctrl-Alt-h",run:qu},{key:"Ctrl-o",run:e=>{let{state:t,dispatch:i}=e;if(t.readOnly)return!1;let o=t.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:jt.of(["",""])},range:fi.cursor(e.from)})));return i(t.update(o,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:e=>{let{state:t,dispatch:i}=e;if(t.readOnly)return!1;let o=t.changeByRange((e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let i=e.from,o=t.doc.lineAt(i),a=i==o.from?i-1:qt(o.text,i-o.from,!1)+o.from,s=i==o.to?i+1:qt(o.text,i-o.from,!0)+o.from;return{changes:{from:a,to:s,insert:t.doc.slice(i,s).append(t.doc.slice(a,i))},range:fi.cursor(s)}}));return!o.changes.empty&&(i(t.update(o,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:Cu}].map((e=>({mac:e.key,run:e.run,shift:e.shift}))))),rp={key:"Tab",run:ap,shift:sp};function lp(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,i=arguments[1];if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i)){for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)){var a=i[o];"string"==typeof a?e.setAttribute(o,a):null!=a&&(e[o]=a)}t++}for(;t<arguments.length;t++)cp(e,arguments[t]);return e}function cp(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var i=0;i<t.length;i++)cp(e,t[i])}}const dp="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class hp{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,o),this.bufferStart=i,this.normalize=a?e=>a(dp(e)):dp,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ti(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=ii(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=oi(e);let o=this.normalize(t);for(let a=0,s=i;;a++){let e=o.charCodeAt(a),n=this.match(e,s);if(n)return this.value=n,this;if(a==o.length-1)break;s==i&&a<t.length&&t.charCodeAt(a)==e&&s++}}}match(e,t){let i=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],s=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?i={from:this.matches[o+1],to:t+1}:(this.matches[o]++,s=!0)),s||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?i={from:t,to:t+1}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}"undefined"!=typeof Symbol&&(hp.prototype[Symbol.iterator]=function(){return this});const up={from:-1,to:-1,match:/.*/.exec("")},pp="gm"+(null==/x/.unicode?"":"u");class _p{constructor(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length;if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=up,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new mp(e,t,i,o,a);this.re=new RegExp(t,pp+((null===i||void 0===i?void 0:i.ignoreCase)?"i":"")),this.test=null===i||void 0===i?void 0:i.test,this.iter=e.iter();let s=e.lineAt(o);this.curLineStart=s.from,this.matchPos=vp(e,o),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,o=i+t[0].length;if(this.matchPos=vp(this.text,o+(i==o?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<o||i>this.value.to)&&(!this.test||this.test(i,o,t)))return this.value={from:i,to:o,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const fp=new WeakMap;class gp{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let o=fp.get(e);if(!o||o.from>=i||o.to<=t){let o=new gp(t,e.sliceString(t,i));return fp.set(e,o),o}if(o.from==t&&o.to==i)return o;let{text:a,from:s}=o;return s>t&&(a=e.sliceString(t,s)+a,s=t),o.to<i&&(a+=e.sliceString(o.to,i)),fp.set(e,new gp(s,a)),new gp(t,a.slice(t-s,i-s))}}class mp{constructor(e,t,i,o,a){this.text=e,this.to=a,this.done=!1,this.value=up,this.matchPos=vp(e,o),this.re=new RegExp(t,pp+((null===i||void 0===i?void 0:i.ignoreCase)?"i":"")),this.test=null===i||void 0===i?void 0:i.test,this.flat=gp.get(e,o,this.chunkEnd(o+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,i=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,i,t)))return this.value={from:e,to:i,match:t},this.matchPos=vp(this.text,i+(e==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=gp.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function vp(e,t){if(t>=e.length)return t;let i,o=e.lineAt(t);for(;t<o.to&&(i=o.text.charCodeAt(t-o.from))>=56320&&i<57344;)t++;return t}function bp(e){let t=lp("input",{class:"cm-textfield",name:"line"});function i(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!i)return;let{state:o}=e,a=o.doc.lineAt(o.selection.main.head),[,s,n,r,l]=i,c=r?+r.slice(1):0,d=n?+n:a.number;if(n&&l){let e=d/100;s&&(e=e*("-"==s?-1:1)+a.number/o.doc.lines),d=Math.round(o.doc.lines*e)}else n&&s&&(d=d*("-"==s?-1:1)+a.number);let h=o.doc.line(Math.max(1,Math.min(o.doc.lines,d)));e.dispatch({effects:yp.of(!1),selection:fi.cursor(h.from+Math.max(0,Math.min(c,h.length))),scrollIntoView:!0}),e.focus()}return{dom:lp("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:yp.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),i())},onsubmit:e=>{e.preventDefault(),i()}},lp("label",e.state.phrase("Go to line"),": ",t)," ",lp("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(_p.prototype[Symbol.iterator]=mp.prototype[Symbol.iterator]=function(){return this});const yp=Gi.define(),Ap=wi.define({create:()=>!0,update(e,t){for(let i of t.effects)i.is(yp)&&(e=i.value);return e},provide:e=>El.from(e,(e=>e?bp:null))}),Dp=br.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),kp={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Op=vi.define({combine:e=>ro(e,kp,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});const wp=Ra.mark({class:"cm-selectionMatch"}),Cp=Ra.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function xp(e,t,i,o){return(0==i||e(t.sliceDoc(i-1,i))!=io.Word)&&(o==t.doc.length||e(t.sliceDoc(o,o+1))!=io.Word)}const Sp=hs.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(Op),{state:i}=e,o=i.selection;if(o.ranges.length>1)return Ra.none;let a,s=o.main,n=null;if(s.empty){if(!t.highlightWordAroundCursor)return Ra.none;let e=i.wordAt(s.head);if(!e)return Ra.none;n=i.charCategorizer(s.head),a=i.sliceDoc(e.from,e.to)}else{let e=s.to-s.from;if(e<t.minSelectionLength||e>200)return Ra.none;if(t.wholeWords){if(a=i.sliceDoc(s.from,s.to),n=i.charCategorizer(s.head),!xp(n,i,s.from,s.to)||!function(e,t,i,o){return e(t.sliceDoc(i,i+1))==io.Word&&e(t.sliceDoc(o-1,o))==io.Word}(n,i,s.from,s.to))return Ra.none}else if(a=i.sliceDoc(s.from,s.to).trim(),!a)return Ra.none}let r=[];for(let l of e.visibleRanges){let e=new hp(i.doc,a,l.from,l.to);for(;!e.next().done;){let{from:o,to:a}=e.value;if((!n||xp(n,i,o,a))&&(s.empty&&o<=s.from&&a>=s.to?r.push(Cp.range(o,a)):(o>=s.to||a<=s.from)&&r.push(wp.range(o,a)),r.length>t.maxMatches))return Ra.none}}return Ra.set(r)}},{decorations:e=>e.decorations}),Mp=br.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const Pp=vi.define({combine:e=>ro(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new s_(e),scrollToMatch:e=>br.scrollIntoView(e)})});class Tp{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,pp),!0}catch(sd){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Zp(this):new Fp(this)}getCursor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,o=e.doc?e:no.create({doc:e});return null==i&&(i=o.doc.length),this.regexp?Lp(this,o,t,i):Np(this,o,t,i)}}class Ip{constructor(e){this.spec=e}}function Np(e,t,i,o){return new hp(t.doc,e.unquoted,i,o,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?function(e,t){return(i,o,a,s)=>((s>i||s+a.length<o)&&(s=Math.max(0,i-2),a=e.sliceString(s,Math.min(e.length,o+2))),(t(Ep(a,i-s))!=io.Word||t(jp(a,i-s))!=io.Word)&&(t(jp(a,o-s))!=io.Word||t(Ep(a,o-s))!=io.Word))}(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}class Fp extends Ip{constructor(e){super(e)}nextMatch(e,t,i){let o=Np(this.spec,e,i,e.doc.length).nextOverlapping();return o.done&&(o=Np(this.spec,e,0,t).nextOverlapping()),o.done?null:o.value}prevMatchInRange(e,t,i){for(let o=i;;){let i=Math.max(t,o-1e4-this.spec.unquoted.length),a=Np(this.spec,e,i,o),s=null;for(;!a.nextOverlapping().done;)s=a.value;if(s)return s;if(i==t)return null;o-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Np(this.spec,e,0,e.doc.length),o=[];for(;!i.next().done;){if(o.length>=t)return null;o.push(i.value)}return o}highlight(e,t,i,o){let a=Np(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}}function Lp(e,t,i,o){return new _p(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(a=t.charCategorizer(t.selection.main.head),(e,t,i)=>!i[0].length||(a(Ep(i.input,i.index))!=io.Word||a(jp(i.input,i.index))!=io.Word)&&(a(jp(i.input,i.index+i[0].length))!=io.Word||a(Ep(i.input,i.index+i[0].length))!=io.Word)):void 0},i,o);var a}function Ep(e,t){return e.slice(qt(e,t,!1),t)}function jp(e,t){return e.slice(t,qt(e,t))}class Zp extends Ip{nextMatch(e,t,i){let o=Lp(this.spec,e,i,e.doc.length).next();return o.done&&(o=Lp(this.spec,e,0,t).next()),o.done?null:o.value}prevMatchInRange(e,t,i){for(let o=1;;o++){let a=Math.max(t,i-1e4*o),s=Lp(this.spec,e,a,i),n=null;for(;!s.next().done;)n=s.value;if(n&&(a==t||n.from>a+10))return n;if(a==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,((t,i)=>"$"==i?"$":"&"==i?e.match[0]:"0"!=i&&+i<e.match.length?e.match[i]:t)))}matchAll(e,t){let i=Lp(this.spec,e,0,e.doc.length),o=[];for(;!i.next().done;){if(o.length>=t)return null;o.push(i.value)}return o}highlight(e,t,i,o){let a=Lp(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}}const Rp=Gi.define(),Qp=Gi.define(),zp=wi.define({create:e=>new Up($p(e).create(),null),update(e,t){for(let i of t.effects)i.is(Rp)?e=new Up(i.value.create(),e.panel):i.is(Qp)&&(e=new Up(e.query,i.value?Xp:null));return e},provide:e=>El.from(e,(e=>e.panel))});class Up{constructor(e,t){this.query=e,this.panel=t}}const Bp=Ra.mark({class:"cm-searchMatch"}),Yp=Ra.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Hp=hs.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(zp))}update(e){let t=e.state.field(zp);(t!=e.startState.field(zp)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight(e){let{query:t,panel:i}=e;if(!i||!t.spec.valid)return Ra.none;let{view:o}=this,a=new _o;for(let s=0,n=o.visibleRanges,r=n.length;s<r;s++){let{from:e,to:i}=n[s];for(;s<r-1&&i>n[s+1].from-500;)i=n[++s].to;t.highlight(o.state,e,i,((e,t)=>{let i=o.state.selection.ranges.some((i=>i.from==e&&i.to==t));a.add(e,t,i?Yp:Bp)}))}return a.finish()}},{decorations:e=>e.decorations});function Vp(e){return t=>{let i=t.state.field(zp,!1);return i&&i.query.spec.valid?e(t,i):i_(t)}}const Wp=Vp(((e,t)=>{let{query:i}=t,{to:o}=e.state.selection.main,a=i.nextMatch(e.state,o,o);if(!a)return!1;let s=fi.single(a.from,a.to),n=e.state.facet(Pp);return e.dispatch({selection:s,effects:[c_(e,a),n.scrollToMatch(s.main,e)],userEvent:"select.search"}),t_(e),!0})),Gp=Vp(((e,t)=>{let{query:i}=t,{state:o}=e,{from:a}=o.selection.main,s=i.prevMatch(o,a,a);if(!s)return!1;let n=fi.single(s.from,s.to),r=e.state.facet(Pp);return e.dispatch({selection:n,effects:[c_(e,s),r.scrollToMatch(n.main,e)],userEvent:"select.search"}),t_(e),!0})),Jp=Vp(((e,t)=>{let{query:i}=t,o=i.matchAll(e.state,1e3);return!(!o||!o.length)&&(e.dispatch({selection:fi.create(o.map((e=>fi.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),qp=Vp(((e,t)=>{let{query:i}=t,{state:o}=e,{from:a,to:s}=o.selection.main;if(o.readOnly)return!1;let n=i.nextMatch(o,a,a);if(!n)return!1;let r,l,c=[],d=[];if(n.from==a&&n.to==s&&(l=o.toText(i.getReplacement(n)),c.push({from:n.from,to:n.to,insert:l}),n=i.nextMatch(o,n.from,n.to),d.push(br.announce.of(o.phrase("replaced match on line $",o.doc.lineAt(a).number)+"."))),n){let t=0==c.length||c[0].from>=n.to?0:n.to-n.from-l.length;r=fi.single(n.from-t,n.to-t),d.push(c_(e,n)),d.push(o.facet(Pp).scrollToMatch(r.main,e))}return e.dispatch({changes:c,selection:r,effects:d,userEvent:"input.replace"}),!0})),Kp=Vp(((e,t)=>{let{query:i}=t;if(e.state.readOnly)return!1;let o=i.matchAll(e.state,1e9).map((e=>{let{from:t,to:o}=e;return{from:t,to:o,insert:i.getReplacement(e)}}));if(!o.length)return!1;let a=e.state.phrase("replaced $ matches",o.length)+".";return e.dispatch({changes:o,effects:br.announce.of(a),userEvent:"input.replace.all"}),!0}));function Xp(e){return e.state.facet(Pp).createPanel(e)}function $p(e,t){var i,o,a,s,n;let r=e.selection.main,l=r.empty||r.to>r.from+100?"":e.sliceDoc(r.from,r.to);if(t&&!l)return t;let c=e.facet(Pp);return new Tp({search:(null!==(i=null===t||void 0===t?void 0:t.literal)&&void 0!==i?i:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(o=null===t||void 0===t?void 0:t.caseSensitive)&&void 0!==o?o:c.caseSensitive,literal:null!==(a=null===t||void 0===t?void 0:t.literal)&&void 0!==a?a:c.literal,regexp:null!==(s=null===t||void 0===t?void 0:t.regexp)&&void 0!==s?s:c.regexp,wholeWord:null!==(n=null===t||void 0===t?void 0:t.wholeWord)&&void 0!==n?n:c.wholeWord})}function e_(e){let t=Il(e,Xp);return t&&t.dom.querySelector("[main-field]")}function t_(e){let t=e_(e);t&&t==e.root.activeElement&&t.select()}const i_=e=>{let t=e.state.field(zp,!1);if(t&&t.panel){let i=e_(e);if(i&&i!=e.root.activeElement){let o=$p(e.state,t.query.spec);o.valid&&e.dispatch({effects:Rp.of(o)}),i.focus(),i.select()}}else e.dispatch({effects:[Qp.of(!0),t?Rp.of($p(e.state,t.query.spec)):Gi.appendConfig.of(h_)]});return!0},o_=e=>{let t=e.state.field(zp,!1);if(!t||!t.panel)return!1;let i=Il(e,Xp);return i&&i.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:Qp.of(!1)}),!0},a_=[{key:"Mod-f",run:i_,scope:"editor search-panel"},{key:"F3",run:Wp,shift:Gp,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Wp,shift:Gp,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:o_,scope:"editor search-panel"},{key:"Mod-Shift-l",run:e=>{let{state:t,dispatch:i}=e,o=t.selection;if(o.ranges.length>1||o.main.empty)return!1;let{from:a,to:s}=o.main,n=[],r=0;for(let l=new hp(t.doc,t.sliceDoc(a,s));!l.next().done;){if(n.length>1e3)return!1;l.value.from==a&&(r=n.length),n.push(fi.range(l.value.from,l.value.to))}return i(t.update({selection:fi.create(n,r),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:e=>{let t=Il(e,bp);if(!t){let i=[yp.of(!0)];null==e.state.field(Ap,!1)&&i.push(Gi.appendConfig.of([Ap,Dp])),e.dispatch({effects:i}),t=Il(e,bp)}return t&&t.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:e=>{let{state:t,dispatch:i}=e,{ranges:o}=t.selection;if(o.some((e=>e.from===e.to)))return(e=>{let{state:t,dispatch:i}=e,{selection:o}=t,a=fi.create(o.ranges.map((e=>t.wordAt(e.head)||fi.cursor(e.head))),o.mainIndex);return!a.eq(o)&&(i(t.update({selection:a})),!0)})({state:t,dispatch:i});let a=t.sliceDoc(o[0].from,o[0].to);if(t.selection.ranges.some((e=>t.sliceDoc(e.from,e.to)!=a)))return!1;let s=function(e,t){let{main:i,ranges:o}=e.selection,a=e.wordAt(i.head),s=a&&a.from==i.from&&a.to==i.to;for(let n=!1,r=new hp(e.doc,t,o[o.length-1].to);;){if(r.next(),!r.done){if(n&&o.some((e=>e.from==r.value.from)))continue;if(s){let t=e.wordAt(r.value.from);if(!t||t.from!=r.value.from||t.to!=r.value.to)continue}return r.value}if(n)return null;r=new hp(e.doc,t,0,Math.max(0,o[o.length-1].from-1)),n=!0}}(t,a);return!!s&&(i(t.update({selection:t.selection.addRange(fi.range(s.from,s.to),!1),effects:br.scrollIntoView(s.to)})),!0)},preventDefault:!0}];class s_{constructor(e){this.view=e;let t=this.query=e.state.field(zp).query.spec;function i(e,t,i){return lp("button",{class:"cm-button",name:e,onclick:t,type:"button"},i)}this.commit=this.commit.bind(this),this.searchField=lp("input",{value:t.search,placeholder:n_(e,"Find"),"aria-label":n_(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=lp("input",{value:t.replace,placeholder:n_(e,"Replace"),"aria-label":n_(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=lp("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=lp("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=lp("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=lp("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,i("next",(()=>Wp(e)),[n_(e,"next")]),i("prev",(()=>Gp(e)),[n_(e,"previous")]),i("select",(()=>Jp(e)),[n_(e,"all")]),lp("label",null,[this.caseField,n_(e,"match case")]),lp("label",null,[this.reField,n_(e,"regexp")]),lp("label",null,[this.wordField,n_(e,"by word")]),...e.state.readOnly?[]:[lp("br"),this.replaceField,i("replace",(()=>qp(e)),[n_(e,"replace")]),i("replaceAll",(()=>Kp(e)),[n_(e,"replace all")])],lp("button",{name:"close",onclick:()=>o_(e),"aria-label":n_(e,"close"),type:"button"},["\xd7"])])}commit(){let e=new Tp({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Rp.of(e)}))}keydown(e){var t,i,o;t=this.view,i=e,o="search-panel",Ir(Mr(t.state),i,t,o)?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Gp:Wp)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),qp(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(Rp)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Pp).top}}function n_(e,t){return e.state.phrase(t)}const r_=30,l_=/[\s\.,:;?!]/;function c_(e,t){let{from:i,to:o}=t,a=e.state.doc.lineAt(i),s=e.state.doc.lineAt(o).to,n=Math.max(a.from,i-r_),r=Math.min(s,o+r_),l=e.state.sliceDoc(n,r);if(n!=a.from)for(let c=0;c<r_;c++)if(!l_.test(l[c+1])&&l_.test(l[c])){l=l.slice(c);break}if(r!=s)for(let c=l.length-1;c>l.length-r_;c--)if(!l_.test(l[c-1])&&l_.test(l[c])){l=l.slice(0,c);break}return br.announce.of(`${e.state.phrase("current match")}. ${l} ${e.state.phrase("on line")} ${a.number}.`)}const d_=br.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),h_=[zp,Ti.lowest(Hp),d_];class u_{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=ud(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),o=t.text.slice(i-t.from,this.pos-t.from),a=o.search(m_(e,!1));return a<0?null:{from:i+a,to:this.pos,text:o.slice(a)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function p_(e){let t=Object.keys(e).join(""),i=/\w/.test(t);return i&&(t=t.replace(/\w/g,"")),`[${i?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function __(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[i,o]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),i=Object.create(null);for(let{label:a}of e){t[a[0]]=!0;for(let e=1;e<a.length;e++)i[a[e]]=!0}let o=p_(t)+p_(i)+"*$";return[new RegExp("^"+o),new RegExp(o)]}(t);return e=>{let a=e.matchBefore(o);return a||e.explicit?{from:a?a.from:e.pos,options:t,validFor:i}:null}}class f_{constructor(e,t,i,o){this.completion=e,this.source=t,this.match=i,this.score=o}}function g_(e){return e.selection.main.from}function m_(e,t){var i;let{source:o}=e,a=t&&"^"!=o[0],s="$"!=o[o.length-1];return a||s?new RegExp(`${a?"^":""}(?:${o})${s?"$":""}`,null!==(i=e.flags)&&void 0!==i?i:e.ignoreCase?"i":""):e}const v_=Hi.define();const b_=new WeakMap;function y_(e){if(!Array.isArray(e))return e;let t=b_.get(e);return t||b_.set(e,t=__(e)),t}const A_=Gi.define(),D_=Gi.define();class k_{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=ti(e,t),o=oi(i);this.chars.push(i);let a=e.slice(t,t+o),s=a.toUpperCase();this.folded.push(ti(s==a?a.toLowerCase():s,0)),t+=o}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[-100];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:o,precise:a,byWord:s}=this;if(1==t.length){let o=ti(e,0),a=oi(o),s=a==e.length?0:-100;if(o==t[0]);else{if(o!=i[0])return null;s+=-200}return[s,0,a]}let n=e.indexOf(this.pattern);if(0==n)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let r=t.length,l=0;if(n<0){for(let a=0,s=Math.min(e.length,200);a<s&&l<r;){let s=ti(e,a);s!=t[l]&&s!=i[l]||(o[l++]=a),a+=oi(s)}if(l<r)return null}let c=0,d=0,h=!1,u=0,p=-1,_=-1,f=/[a-z]/.test(e),g=!0;for(let m=0,v=Math.min(e.length,200),b=0;m<v&&d<r;){let o=ti(e,m);n<0&&(c<r&&o==t[c]&&(a[c++]=m),u<r&&(o==t[u]||o==i[u]?(0==u&&(p=m),_=m+1,u++):u=0));let l,v=o<255?o>=48&&o<=57||o>=97&&o<=122?2:o>=65&&o<=90?1:0:(l=ii(o))!=l.toLowerCase()?1:l!=l.toUpperCase()?2:0;(!m||1==v&&f||0==b&&0!=v)&&(t[d]==o||i[d]==o&&(h=!0)?s[d++]=m:s.length&&(g=!1)),b=v,m+=oi(o)}return d==r&&0==s[0]&&g?this.result((h?-200:0)-100,s,e):u==r&&0==p?[-200-e.length+(_==e.length?0:-100),0,_]:n>-1?[-700-e.length,n,n+this.pattern.length]:u==r?[-900-e.length,p,_]:d==r?this.result((h?-200:0)-100-700+(g?0:-1100),s,e):2==t.length?null:this.result((o[0]?-700:0)-200-1100,o,e)}result(e,t,i){let o=[e-i.length],a=1;for(let s of t){let e=s+(this.astral?oi(ti(i,s)):1);a>1&&o[a-1]==s?o[a-1]=e:(o[a++]=s,o[a++]=e)}return o}}const O_=vi.define({combine:e=>ro(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:C_,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>w_(e(i),t(i)),optionClass:(e,t)=>i=>w_(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})});function w_(e,t){return e?t?e+" "+t:e:t}function C_(e,t,i,o,a){let s,n,r=e.textDirection==Ds.RTL,l=r,c=!1,d="top",h=t.left-a.left,u=a.right-t.right,p=o.right-o.left,_=o.bottom-o.top;if(l&&h<Math.min(p,u)?l=!1:!l&&u<Math.min(p,h)&&(l=!0),p<=(l?h:u))s=Math.max(a.top,Math.min(i.top,a.bottom-_))-t.top,n=Math.min(400,l?h:u);else{c=!0,n=Math.min(400,(r?t.right:a.right-t.left)-30);let e=a.bottom-t.bottom;e>=_||e>t.top?s=i.bottom-t.top:(d="bottom",s=t.bottom-i.top)}return{style:`${d}: ${s}px; max-width: ${n}px`,class:"cm-completionInfo-"+(c?r?"left-narrow":"right-narrow":l?"left":"right")}}function x_(e,t,i){if(e<=i)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/i);return{from:e*i,to:(e+1)*i}}let o=Math.floor((e-t)/i);return{from:e-(o+1)*i,to:e-o*i}}class S_{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let o=e.state.field(t),{options:a,selected:s}=o.open,n=e.state.facet(O_);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,i){let o=document.createElement("span");o.className="cm-completionLabel";let{label:a}=e,s=0;for(let n=1;n<i.length;){let e=i[n++],t=i[n++];e>s&&o.appendChild(document.createTextNode(a.slice(s,e)));let r=o.appendChild(document.createElement("span"));r.appendChild(document.createTextNode(a.slice(e,t))),r.className="cm-completionMatchedText",s=t}return s<a.length&&o.appendChild(document.createTextNode(a.slice(s))),o},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(n),this.optionClass=n.optionClass,this.tooltipClass=n.tooltipClass,this.range=x_(a.length,s,n.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",(t=>{for(let i,o=t.target;o&&o!=this.dom;o=o.parentNode)if("LI"==o.nodeName&&(i=/-(\d+)$/.exec(o.id))&&+i[1]<a.length)return this.applyCompletion(e,a[+i[1]]),void t.preventDefault()})),this.dom.addEventListener("focusout",(t=>{let i=e.state.field(this.stateField,!1);i&&i.tooltip&&e.state.facet(O_).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:D_.of(null)})})),this.list=this.dom.appendChild(this.createListBox(a,o.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}mount(){this.updateSel()}update(e){var t,i,o;let a=e.state.field(this.stateField),s=e.startState.field(this.stateField);this.updateTooltipClass(e.state),a!=s&&(this.updateSel(),(null===(t=a.open)||void 0===t?void 0:t.disabled)!=(null===(i=s.open)||void 0===i?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(null===(o=a.open)||void 0===o?void 0:o.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=x_(t.options.length,t.selected,this.view.state.facet(O_).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:o}=i;if(!o)return;let a="string"===typeof o?document.createTextNode(o):o(i);if(!a)return;"then"in a?a.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,i)})).catch((e=>rs(this.view.state,e,"completion info"))):this.addInfoPane(a,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",null!=e.nodeType)i.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:o}=e;i.appendChild(t),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,o=this.range.from;i;i=i.nextSibling,o++)"LI"==i.nodeName&&i.id?o==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected"):o--;return t&&function(e,t){let i=e.getBoundingClientRect(),o=t.getBoundingClientRect();o.top<i.top?e.scrollTop-=i.top-o.top:o.bottom>i.bottom&&(e.scrollTop+=o.bottom-i.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),a=this.space;if(!a){let e=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:e.innerWidth,bottom:e.innerHeight}}return o.top>Math.min(a.bottom,t.bottom)-10||o.bottom<Math.max(a.top,t.top)+10?null:this.view.state.facet(O_).positionInfo(this.view,t,o,i,a)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const o=document.createElement("ul");o.id=t,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let s=i.from;s<i.to;s++){let{completion:n,match:r}=e[s],{section:l}=n;if(l){let e="string"==typeof l?l:l.name;if(e!=a&&(s>i.from||0==i.from))if(a=e,"string"!=typeof l&&l.header)o.appendChild(l.header(l));else{o.appendChild(document.createElement("completion-section")).textContent=e}}const c=o.appendChild(document.createElement("li"));c.id=t+"-"+s,c.setAttribute("role","option");let d=this.optionClass(n);d&&(c.className=d);for(let e of this.optionContent){let t=e(n,this.view.state,r);t&&c.appendChild(t)}}return i.from&&o.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function M_(e,t){return i=>new S_(i,e,t)}function P_(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class T_{constructor(e,t,i,o,a,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=o,this.selected=a,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new T_(this.options,F_(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,o,a){let s=function(e,t){let i=[],o=null,a=e=>{i.push(e);let{section:t}=e.completion;if(t){o||(o=[]);let e="string"==typeof t?t:t.name;o.some((t=>t.name==e))||o.push("string"==typeof t?{name:e}:t)}};for(let l of e)if(l.hasResult())if(!1===l.result.filter){let e=l.result.getMatch;for(let t of l.result.options){let o=[1e9-i.length];if(e)for(let i of e(t))o.push(i);a(new f_(t,l.source,o,o[0]))}}else{let e,i=new k_(t.sliceDoc(l.from,l.to));for(let t of l.result.options)(e=i.match(t.label))&&a(new f_(t,l.source,e,e[0]+(t.boost||0)))}if(o){let e=Object.create(null),t=0,a=(e,t)=>{var i,o;return(null!==(i=e.rank)&&void 0!==i?i:1e9)-(null!==(o=t.rank)&&void 0!==o?o:1e9)||(e.name<t.name?-1:1)};for(let i of o.sort(a))t-=1e5,e[i.name]=t;for(let o of i){let{section:t}=o.completion;t&&(o.score+=e["string"==typeof t?t:t.name])}}let s=[],n=null,r=t.facet(O_).compareCompletions;for(let l of i.sort(((e,t)=>t.score-e.score||r(e.completion,t.completion))))!n||n.label!=l.completion.label||n.detail!=l.completion.detail||null!=n.type&&null!=l.completion.type&&n.type!=l.completion.type||n.apply!=l.completion.apply?s.push(l):P_(l.completion)>P_(n)&&(s[s.length-1]=l),n=l.completion;return s}(e,t);if(!s.length)return o&&e.some((e=>1==e.state))?new T_(o.options,o.attrs,o.tooltip,o.timestamp,o.selected,!0):null;let n=t.facet(O_).selectOnOpen?0:-1;if(o&&o.selected!=n&&-1!=o.selected){let e=o.options[o.selected].completion;for(let t=0;t<s.length;t++)if(s[t].completion==e){n=t;break}}return new T_(s,F_(i,n),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:M_(z_,U_),above:a.aboveCursor},o?o.timestamp:Date.now(),n,!1)}map(e){return new T_(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class I_{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new I_(L_,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,i=t.facet(O_),o=(i.override||t.languageDataAt("autocomplete",g_(t)).map(y_)).map((t=>(this.active.find((e=>e.source==t))||new j_(t,this.active.some((e=>0!=e.state))?1:0)).update(e,i)));o.length==this.active.length&&o.every(((e,t)=>e==this.active[t]))&&(o=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let i=0,o=0;;){for(;i<e.length&&!e[i].hasResult;)i++;for(;o<t.length&&!t[o].hasResult;)o++;let a=i==e.length,s=o==t.length;if(a||s)return a==s;if(e[i++].result!=t[o++].result)return!1}}(o,this.active)?a=T_.build(o,t,this.id,a,i):a&&a.disabled&&!o.some((e=>1==e.state))&&(a=null),!a&&o.every((e=>1!=e.state))&&o.some((e=>e.hasResult()))&&(o=o.map((e=>e.hasResult()?new j_(e.source,0):e)));for(let s of e.effects)s.is(Q_)&&(a=a&&a.setSelected(s.value,this.id));return o==this.active&&a==this.open?this:new I_(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:N_}}const N_={"aria-autocomplete":"list"};function F_(e,t){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(i["aria-activedescendant"]=e+"-"+t),i}const L_=[];function E_(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class j_{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=E_(e),o=this;i?o=o.handleUserEvent(e,i,t):e.docChanged?o=o.handleChange(e):e.selection&&0!=o.state&&(o=new j_(o.source,0));for(let a of e.effects)if(a.is(A_))o=new j_(o.source,1,a.value?g_(e.state):-1);else if(a.is(D_))o=new j_(o.source,0);else if(a.is(R_))for(let e of a.value)e.source==o.source&&(o=e);return o}handleUserEvent(e,t,i){return"delete"!=t&&i.activateOnTyping?new j_(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(g_(e.startState))?new j_(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new j_(this.source,this.state,e.mapPos(this.explicitPos))}}class Z_ extends j_{constructor(e,t,i,o,a){super(e,2,t),this.result=i,this.from=o,this.to=a}hasResult(){return!0}handleUserEvent(e,t,i){var o;let a=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),n=g_(e.state);if((this.explicitPos<0?n<=a:n<this.from)||n>s||"delete"==t&&g_(e.startState)==this.from)return new j_(this.source,"input"==t&&i.activateOnTyping?1:0);let r,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,i,o){if(!e)return!1;let a=t.sliceDoc(i,o);return"function"==typeof e?e(a,i,o,t):m_(e,!0).test(a)}(this.result.validFor,e.state,a,s)?new Z_(this.source,l,this.result,a,s):this.result.update&&(r=this.result.update(this.result,a,s,new u_(e.state,n,l>=0)))?new Z_(this.source,l,r,r.from,null!==(o=r.to)&&void 0!==o?o:g_(e.state)):new j_(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new j_(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Z_(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const R_=Gi.define({map:(e,t)=>e.map((e=>e.map(t)))}),Q_=Gi.define(),z_=wi.define({create:()=>I_.start(),update:(e,t)=>e.update(t),provide:e=>[Dl.from(e,(e=>e.tooltip)),br.contentAttributes.from(e,(e=>e.attrs))]});function U_(e,t){const i=t.completion.apply||t.completion.label;let o=e.state.field(z_).active.find((e=>e.source==t.source));return o instanceof Z_&&("string"==typeof i?e.dispatch(Object.assign(Object.assign({},function(e,t,i,o){let{main:a}=e.selection,s=i-a.from,n=o-a.from;return Object.assign(Object.assign({},e.changeByRange((r=>r!=a&&i!=o&&e.sliceDoc(r.from+s,r.from+n)!=e.sliceDoc(i,o)?{range:r}:{changes:{from:r.from+s,to:o==a.from?r.to:r.from+n,insert:t},range:fi.cursor(r.from+s+t.length)}))),{userEvent:"input.complete"})}(e.state,i,o.from,o.to)),{annotations:v_.of(t.completion)})):i(e,t.completion,o.from,o.to),!0)}function B_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"option";return i=>{let o=i.state.field(z_,!1);if(!o||!o.open||o.open.disabled||Date.now()-o.open.timestamp<i.state.facet(O_).interactionDelay)return!1;let a,s=1;"page"==t&&(a=Ml(i,o.open.tooltip))&&(s=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:n}=o.open.options,r=o.open.selected>-1?o.open.selected+s*(e?1:-1):e?0:n-1;return r<0?r="page"==t?0:n-1:r>=n&&(r="page"==t?n-1:0),i.dispatch({effects:Q_.of(r)}),!0}}class Y_{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const H_=hs.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(z_).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(z_);if(!e.selectionSet&&!e.docChanged&&e.startState.field(z_)==t)return;let i=e.transactions.some((e=>(e.selection||e.docChanged)&&!E_(e)));for(let a=0;a<this.running.length;a++){let t=this.running[a];if(i||t.updates.length+e.transactions.length>50&&Date.now()-t.time>1e3){for(let e of t.context.abortListeners)try{e()}catch(o){rs(this.view.state,o)}t.context.abortListeners=null,this.running.splice(a--,1)}else t.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let a of e.transactions)"input"==E_(a)?this.composing=2:2==this.composing&&a.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(z_);for(let i of t.active)1!=i.state||this.running.some((e=>e.active.source==i.source))||this.startQuery(i)}startQuery(e){let{state:t}=this.view,i=g_(t),o=new u_(t,i,e.explicitPos==i),a=new Y_(e,o);this.running.push(a),Promise.resolve(e.source(o)).then((e=>{a.context.aborted||(a.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:D_.of(null)}),rs(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],i=this.view.state.facet(O_);for(let o=0;o<this.running.length;o++){let a=this.running[o];if(void 0===a.done)continue;if(this.running.splice(o--,1),a.done){let o=new Z_(a.active.source,a.active.explicitPos,a.done,a.done.from,null!==(e=a.done.to)&&void 0!==e?e:g_(a.updates.length?a.updates[0].startState:this.view.state));for(let e of a.updates)o=o.update(e,i);if(o.hasResult()){t.push(o);continue}}let s=this.view.state.field(z_).active.find((e=>e.source==a.active.source));if(s&&1==s.state)if(null==a.done){let e=new j_(a.active.source,0);for(let t of a.updates)e=e.update(t,i);1!=e.state&&t.push(e)}else this.startQuery(s)}t.length&&this.view.dispatch({effects:R_.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(z_,!1);if(t&&t.tooltip&&this.view.state.facet(O_).closeOnBlur){let i=t.open&&Ml(this.view,t.open.tooltip);i&&i.dom.contains(e.relatedTarget)||this.view.dispatch({effects:D_.of(null)})}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:A_.of(!1)})),20),this.composing=0}}}),V_=br.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\ud835\udc65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\ud835\udc36'"}},".cm-completionIcon-type":{"&:after":{content:"'\ud835\udc61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\ud83d\udd11\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});const W_={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},G_=Gi.define({map(e,t){let i=t.mapPos(e,-1,si.TrackAfter);return null==i?void 0:i}}),J_=new class extends lo{};J_.startSide=1,J_.endSide=-1;const q_=wi.define({create:()=>po.empty,update(e,t){if(t.selection){let i=t.state.doc.lineAt(t.selection.main.head).from,o=t.startState.doc.lineAt(t.startState.selection.main.head).from;i!=t.changes.mapPos(o,-1)&&(e=po.empty)}e=e.map(t.changes);for(let i of t.effects)i.is(G_)&&(e=e.update({add:[J_.range(i.value,i.value+1)]}));return e}});const K_="()[]{}<>";function X_(e){for(let t=0;t<K_.length;t+=2)if(K_.charCodeAt(t)==e)return K_.charAt(t+1);return ii(e<128?e:e+1)}function $_(e,t){return e.languageDataAt("closeBrackets",t)[0]||W_}const ef="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),tf=br.inputHandler.of(((e,t,i,o)=>{if((ef?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let a=e.state.selection.main;if(o.length>2||2==o.length&&1==oi(ti(o,0))||t!=a.from||i!=a.to)return!1;let s=function(e,t){let i=$_(e,e.selection.main.head),o=i.brackets||W_.brackets;for(let a of o){let s=X_(ti(a,0));if(t==a)return s==a?lf(e,a,o.indexOf(a+a+a)>-1,i):nf(e,a,s,i.before||W_.before);if(t==s&&af(e,e.selection.main.from))return rf(e,a,s)}return null}(e.state,o);return!!s&&(e.dispatch(s),!0)})),of=[{key:"Backspace",run:e=>{let{state:t,dispatch:i}=e;if(t.readOnly)return!1;let o=$_(t,t.selection.main.head).brackets||W_.brackets,a=null,s=t.changeByRange((e=>{if(e.empty){let i=function(e,t){let i=e.sliceString(t-2,t);return oi(ti(i,0))==i.length?i:i.slice(1)}(t.doc,e.head);for(let a of o)if(a==i&&sf(t.doc,e.head)==X_(ti(a,0)))return{changes:{from:e.head-a.length,to:e.head+a.length},range:fi.cursor(e.head-a.length)}}return{range:a=e}}));return a||i(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!a}}];function af(e,t){let i=!1;return e.field(q_).between(0,e.doc.length,(e=>{e==t&&(i=!0)})),i}function sf(e,t){let i=e.sliceString(t,t+2);return i.slice(0,oi(ti(i,0)))}function nf(e,t,i,o){let a=null,s=e.changeByRange((s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:i,from:s.to}],effects:G_.of(s.to+t.length),range:fi.range(s.anchor+t.length,s.head+t.length)};let n=sf(e.doc,s.head);return!n||/\s/.test(n)||o.indexOf(n)>-1?{changes:{insert:t+i,from:s.head},effects:G_.of(s.head+t.length),range:fi.cursor(s.head+t.length)}:{range:a=s}}));return a?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function rf(e,t,i){let o=null,a=e.changeByRange((t=>t.empty&&sf(e.doc,t.head)==i?{changes:{from:t.head,to:t.head+i.length,insert:i},range:fi.cursor(t.head+i.length)}:o={range:t}));return o?null:e.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function lf(e,t,i,o){let a=o.stringPrefixes||W_.stringPrefixes,s=null,n=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:t,from:o.to}],effects:G_.of(o.to+t.length),range:fi.range(o.anchor+t.length,o.head+t.length)};let n,r=o.head,l=sf(e.doc,r);if(l==t){if(cf(e,r))return{changes:{insert:t+t,from:r},effects:G_.of(r+t.length),range:fi.cursor(r+t.length)};if(af(e,r)){let o=i&&e.sliceDoc(r,r+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:r,to:r+o.length,insert:o},range:fi.cursor(r+o.length)}}}else{if(i&&e.sliceDoc(r-2*t.length,r)==t+t&&(n=df(e,r-2*t.length,a))>-1&&cf(e,n))return{changes:{insert:t+t+t+t,from:r},effects:G_.of(r+t.length),range:fi.cursor(r+t.length)};if(e.charCategorizer(r)(l)!=io.Word&&df(e,r,a)>-1&&!function(e,t,i,o){let a=ud(e).resolveInner(t,-1),s=o.reduce(((e,t)=>Math.max(e,t.length)),0);for(let n=0;n<5;n++){let n=e.sliceDoc(a.from,Math.min(a.to,a.from+i.length+s)),r=n.indexOf(i);if(!r||r>-1&&o.indexOf(n.slice(0,r))>-1){let t=a.firstChild;for(;t&&t.from==a.from&&t.to-t.from>i.length+r;){if(e.sliceDoc(t.to-i.length,t.to)==i)return!1;t=t.firstChild}return!0}let l=a.to==t&&a.parent;if(!l)break;a=l}return!1}(e,r,t,a))return{changes:{insert:t+t,from:r},effects:G_.of(r+t.length),range:fi.cursor(r+t.length)}}return{range:s=o}}));return s?null:e.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function cf(e,t){let i=ud(e).resolveInner(t+1);return i.parent&&i.from==t}function df(e,t,i){let o=e.charCategorizer(t);if(o(e.sliceDoc(t-1,t))!=io.Word)return t;for(let a of i){let i=t-a.length;if(e.sliceDoc(i,t)==a&&o(e.sliceDoc(i-1,i))!=io.Word)return i}return-1}const hf=[{key:"Ctrl-Space",run:e=>!!e.state.field(z_,!1)&&(e.dispatch({effects:A_.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(z_,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:D_.of(null)}),!0)}},{key:"ArrowDown",run:B_(!0)},{key:"ArrowUp",run:B_(!1)},{key:"PageDown",run:B_(!0,"page")},{key:"PageUp",run:B_(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(z_,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<e.state.facet(O_).interactionDelay)&&(!!t.open.disabled||U_(e,t.open.options[t.open.selected]))}}],uf=Ti.highest(xr.computeN([O_],(e=>e.facet(O_).defaultKeymap?[hf]:[])));class pf{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class _f{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let o=e,a=i.facet(xf).markerFilter;a&&(o=a(o));let s=Ra.set(o.map((e=>e.from==e.to||e.from==e.to-1&&i.doc.lineAt(e.from).to==e.from?Ra.widget({widget:new Pf(e),diagnostic:e}).range(e.from):Ra.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to))),!0);return new _f(s,t,ff(s))}}function ff(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=null;return e.between(i,1e9,((e,i,a)=>{let{spec:s}=a;if(!t||s.diagnostic==t)return o=new pf(e,i,s.diagnostic),!1})),o}function gf(e,t){let i=e.startState.doc.lineAt(t.pos);return!(!e.effects.some((e=>e.is(vf)))&&!e.changes.touchesRange(i.from,i.to))}function mf(e,t){return e.field(Af,!1)?t:t.concat(Gi.appendConfig.of(Ef))}const vf=Gi.define(),bf=Gi.define(),yf=Gi.define(),Af=wi.define({create:()=>new _f(Ra.none,null,null),update(e,t){if(t.docChanged){let i=e.diagnostics.map(t.changes),o=null;if(e.selected){let a=t.changes.mapPos(e.selected.from,1);o=ff(i,e.selected.diagnostic,a)||ff(i,null,a)}e=new _f(i,e.panel,o)}for(let i of t.effects)i.is(vf)?e=_f.init(i.value,e.panel,t.state):i.is(bf)?e=new _f(e.diagnostics,i.value?If.open:null,e.selected):i.is(yf)&&(e=new _f(e.diagnostics,e.panel,i.value));return e},provide:e=>[El.from(e,(e=>e.panel)),br.decorations.from(e,(e=>e.diagnostics))]});const Df=Ra.mark({class:"cm-lintRange cm-lintRange-active"});function kf(e,t,i){let{diagnostics:o}=e.state.field(Af),a=[],s=2e8,n=0;o.between(t-(i<0?1:0),t+(i>0?1:0),((e,o,r)=>{let{spec:l}=r;t>=e&&t<=o&&(e==o||(t>e||i>0)&&(t<o||i<0))&&(a.push(l.diagnostic),s=Math.min(e,s),n=Math.max(o,n))}));let r=e.state.facet(xf).tooltipFilter;return r&&(a=r(a)),a.length?{pos:s,end:n,above:e.state.doc.lineAt(s).to<n,create:()=>({dom:Of(e,a)})}:null}function Of(e,t){return lp("ul",{class:"cm-tooltip-lint"},t.map((t=>Mf(e,t,!1))))}const wf=e=>{let t=e.state.field(Af,!1);return!(!t||!t.panel)&&(e.dispatch({effects:bf.of(!1)}),!0)},Cf=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(Af,!1);t&&t.panel||e.dispatch({effects:mf(e.state,[bf.of(!0)])});let i=Il(e,If.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(Af,!1);if(!t)return!1;let i=e.state.selection.main,o=t.diagnostics.iter(i.to+1);return!(!o.value&&(o=t.diagnostics.iter(0),!o.value||o.from==i.from&&o.to==i.to))&&(e.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0}),!0)}}],xf=vi.define({combine:e=>Object.assign({sources:e.map((e=>e.source))},ro(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))});function Sf(e){let t=[];if(e)e:for(let{name:i}of e){for(let e=0;e<i.length;e++){let o=i[e];if(/[a-zA-Z]/.test(o)&&!t.some((e=>e.toLowerCase()==o.toLowerCase()))){t.push(o);continue e}}t.push("")}return t}function Mf(e,t,i){var o;let a=i?Sf(t.actions):[];return lp("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},lp("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),null===(o=t.actions)||void 0===o?void 0:o.map(((i,o)=>{let s=!1,n=o=>{if(o.preventDefault(),s)return;s=!0;let a=ff(e.state.field(Af).diagnostics,t);a&&i.apply(e,a.from,a.to)},{name:r}=i,l=a[o]?r.indexOf(a[o]):-1,c=l<0?r:[r.slice(0,l),lp("u",r.slice(l,l+1)),r.slice(l+1)];return lp("button",{type:"button",class:"cm-diagnosticAction",onclick:n,onmousedown:n,"aria-label":` Action: ${r}${l<0?"":` (access key "${a[o]})"`}.`},c)})),t.source&&lp("div",{class:"cm-diagnosticSource"},t.source))}class Pf extends ja{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return lp("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Tf{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Mf(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class If{constructor(e){this.view=e,this.items=[];this.list=lp("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)wf(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:i}=this.items[this.selectedIndex],o=Sf(i.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==t.keyCode){let t=ff(this.view.state.field(Af).diagnostics,i);t&&i.actions[a].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=lp("div",{class:"cm-panel-lint"},this.list,lp("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>wf(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(Af).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Af),i=0,o=!1,a=null;for(e.between(0,this.view.state.doc.length,((e,s,n)=>{let r,{spec:l}=n,c=-1;for(let t=i;t<this.items.length;t++)if(this.items[t].diagnostic==l.diagnostic){c=t;break}c<0?(r=new Tf(this.view,l.diagnostic),this.items.splice(i,0,r),o=!0):(r=this.items[c],c>i&&(this.items.splice(i,c-i),o=!0)),t&&r.diagnostic==t.diagnostic?r.dom.hasAttribute("aria-selected")||(r.dom.setAttribute("aria-selected","true"),a=r):r.dom.hasAttribute("aria-selected")&&r.dom.removeAttribute("aria-selected"),i++}));i<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();0==this.items.length&&(this.items.push(new Tf(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:e=>{let{sel:t,panel:i}=e;t.top<i.top?this.list.scrollTop-=i.top-t.top:t.bottom>i.bottom&&(this.list.scrollTop+=t.bottom-i.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=ff(this.view.state.field(Af).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:yf.of(t)})}static open(e){return new If(e)}}function Nf(e){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${arguments.length>1&&void 0!==arguments[1]?arguments[1]:'viewBox="0 0 40 40"'}>${encodeURIComponent(e)}</svg>')`}function Ff(e){return Nf(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Lf=br.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ff("#d11")},".cm-lintRange-warning":{backgroundImage:Ff("orange")},".cm-lintRange-info":{backgroundImage:Ff("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});const Ef=[Af,br.decorations.compute([Af],(e=>{let{selected:t,panel:i}=e.field(Af);return t&&i&&t.from!=t.to?Ra.set([Df.range(t.from,t.to)]):Ra.none})),Sl(kf,{hideOn:gf}),Lf];var jf=function(e){void 0===e&&(e={});var t=[];!1!==e.closeBracketsKeymap&&(t=t.concat(of)),!1!==e.defaultKeymap&&(t=t.concat(np)),!1!==e.searchKeymap&&(t=t.concat(a_)),!1!==e.historyKeymap&&(t=t.concat(lu)),!1!==e.foldKeymap&&(t=t.concat(Kd)),!1!==e.completionKeymap&&(t=t.concat(hf)),!1!==e.lintKeymap&&(t=t.concat(Cf));var i=[];return!1!==e.lineNumbers&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Kl.of(e),Bl(),ec]}()),!1!==e.highlightActiveLineGutter&&i.push(oc),!1!==e.highlightSpecialChars&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[il.of(e),ol||(ol=hs.fromClass(class{constructor(e){this.view=e,this.decorations=Ra.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(il)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new Kr({regexp:e.specialChars,decoration:(t,i,o)=>{let{doc:a}=i.state,s=ti(t[0],0);if(9==s){let e=a.lineAt(o),t=i.state.tabSize,s=wo(e.text,t,o-e.from);return Ra.replace({widget:new sl((t-s%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Ra.replace({widget:new al(e,s)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(il);e.startState.facet(il)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}()),!1!==e.history&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Hh,Yh.of(e),br.domEventHandlers({beforeinput(e,t){let i="historyUndo"==e.inputType?Wh:"historyRedo"==e.inputType?Gh:null;return!!i&&(e.preventDefault(),i(t))}})]}()),!1!==e.foldGutter&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(Object.assign({},ih),e),i=new oh(t,!0),o=new oh(t,!1),a=hs.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(Ad)!=e.state.facet(Ad)||e.startState.field(Vd,!1)!=e.state.field(Vd,!1)||ud(e.startState)!=ud(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new _o;for(let a of e.viewportLineBlocks){let s=Wd(e.state,a.from,a.to)?o:zd(e.state,a.from,a.to)?i:null;s&&t.add(a.from,a.from,s)}return t.finish()}}),{domEventHandlers:s}=t;return[a,zl({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(a))||void 0===t?void 0:t.markers)||po.empty},initialSpacer:()=>new oh(t,!1),domEventHandlers:Object.assign(Object.assign({},s),{click:(e,t,i)=>{if(s.click&&s.click(e,t,i))return!0;let o=Wd(e.state,t.from,t.to);if(o)return e.dispatch({effects:Yd.of(o)}),!0;let a=zd(e.state,t.from,t.to);return!!a&&(e.dispatch({effects:Bd.of(a)}),!0)}})}),eh()]}()),!1!==e.drawSelection&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Qr.of(e),Ur,Yr,Vr,as.of(!0)]}()),!1!==e.dropCursor&&i.push([Gr,Jr]),!1!==e.allowMultipleSelections&&i.push(no.allowMultipleSelections.of(!0)),!1!==e.indentOnInput&&i.push(no.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let i=e.newDoc,{head:o}=e.newSelection.main,a=i.lineAt(o);if(o>a.from+200)return e;let s=i.sliceString(a.from,o);if(!t.some((e=>e.test(s))))return e;let{state:n}=e,r=-1,l=[];for(let{head:c}of n.selection.ranges){let e=n.doc.lineAt(c);if(e.from==r)continue;r=e.from;let t=xd(n,e.from);if(null==t)continue;let i=/^\s*/.exec(e.text)[0],o=Cd(n,t);i!=o&&l.push({from:e.from,to:e.from+i.length,insert:o})}return l.length?[e,{changes:l,sequential:!0}]:e}))),!1!==e.syntaxHighlighting&&i.push(ch(uh,{fallback:!0})),!1!==e.bracketMatching&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[gh.of(e),Ah]}()),!1!==e.closeBrackets&&i.push([tf,q_]),!1!==e.autocompletion&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[z_,O_.of(e),H_,uf,V_]}()),!1!==e.rectangularSelection&&i.push(function(e){let t=(null===e||void 0===e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return br.mouseSelectionStyle.of(((e,i)=>t(i)?hl(e,i):null))}()),!1!==e.crosshairCursor&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,i]=ul[e.key||"Alt"],o=hs.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventHandlers:{keydown(e){this.set(e.keyCode==t||i(e))},keyup(e){e.keyCode!=t&&i(e)||this.set(!1)},mousemove(e){this.set(i(e))}}});return[o,br.contentAttributes.of((e=>{var t;return(null===(t=e.plugin(o))||void 0===t?void 0:t.isDown)?pl:null}))]}()),!1!==e.highlightActiveLine&&i.push(rl),!1!==e.highlightSelectionMatches&&i.push(function(e){let t=[Mp,Sp];return e&&t.push(Op.of(e)),t}()),e.tabSize&&"number"===typeof e.tabSize&&i.push(Od.of(" ".repeat(e.tabSize))),i.concat([xr.of(t.flat())]).filter(Boolean)};const Zf="#e5c07b",Rf="#e06c75",Qf="#56b6c2",zf="#ffffff",Uf="#abb2bf",Bf="#7d8799",Yf="#61afef",Hf="#98c379",Vf="#d19a66",Wf="#c678dd",Gf="#21252b",Jf="#2c313a",qf="#282c34",Kf="#353a42",Xf="#3E4451",$f="#528bff",eg=[br.theme({"&":{color:Uf,backgroundColor:qf},".cm-content":{caretColor:$f},".cm-cursor, .cm-dropCursor":{borderLeftColor:$f},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Xf},".cm-panels":{backgroundColor:Gf,color:Uf},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:qf,color:Bf,border:"none"},".cm-activeLineGutter":{backgroundColor:Jf},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Kf},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Kf,borderBottomColor:Kf},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Jf,color:Uf}}},{dark:!0}),ch(sh.define([{tag:ad.keyword,color:Wf},{tag:[ad.name,ad.deleted,ad.character,ad.propertyName,ad.macroName],color:Rf},{tag:[ad.function(ad.variableName),ad.labelName],color:Yf},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:Vf},{tag:[ad.definition(ad.name),ad.separator],color:Uf},{tag:[ad.typeName,ad.className,ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:Zf},{tag:[ad.operator,ad.operatorKeyword,ad.url,ad.escape,ad.regexp,ad.link,ad.special(ad.string)],color:Qf},{tag:[ad.meta,ad.comment],color:Bf},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.link,color:Bf,textDecoration:"underline"},{tag:ad.heading,fontWeight:"bold",color:Rf},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:Vf},{tag:[ad.processingInstruction,ad.string,ad.inserted],color:Hf},{tag:ad.invalid,color:zf}]))];var tg=br.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),ig=function(e){void 0===e&&(e={});var{indentWithTab:t=!0,editable:i=!0,readOnly:o=!1,theme:a="light",placeholder:s="",basicSetup:n=!0}=e,r=[];switch(t&&r.unshift(xr.of([rp])),n&&("boolean"===typeof n?r.unshift(jf()):r.unshift(jf(n))),s&&r.unshift(function(e){return hs.fromClass(class{constructor(t){this.view=t,this.placeholder=Ra.set([Ra.widget({widget:new ll(e),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?Ra.none:this.placeholder}},{decorations:e=>e.decorations})}(s)),a){case"light":r.push(tg);break;case"dark":r.push(eg);break;case"none":break;default:r.push(a)}return!1===i&&r.push(br.editable.of(!1)),o&&r.push(no.readOnly.of(!0)),[...r]},og=Hi.define();var ag=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],sg=(0,o.forwardRef)(((e,t)=>{var{className:i,value:a="",selection:s,extensions:n=[],onChange:r,onStatistics:l,onCreateEditor:d,onUpdate:h,autoFocus:u,theme:p="light",height:_,minHeight:f,maxHeight:g,width:m,minWidth:v,maxWidth:b,basicSetup:y,placeholder:A,indentWithTab:D,editable:k,readOnly:O,root:w,initialState:C}=e,x=function(e,t){if(null==e)return{};var i,o,a={},s=Object.keys(e);for(o=0;o<s.length;o++)i=s[o],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,ag),S=(0,o.useRef)(null),{state:M,view:P,container:T}=function(e){var{value:t,selection:i,onChange:a,onStatistics:s,onCreateEditor:n,onUpdate:r,extensions:l=[],autoFocus:c,theme:d="light",height:h="",minHeight:u="",maxHeight:p="",placeholder:_="",width:f="",minWidth:g="",maxWidth:m="",editable:v=!0,readOnly:b=!1,indentWithTab:y=!0,basicSetup:A=!0,root:D,initialState:k}=e,[O,w]=(0,o.useState)(),[C,x]=(0,o.useState)(),[S,M]=(0,o.useState)(),P=br.theme({"&":{height:h,minHeight:u,maxHeight:p,width:f,minWidth:g,maxWidth:m},"& .cm-scroller":{height:"100% !important"}}),T=br.updateListener.of((e=>{if(e.docChanged&&"function"===typeof a&&!e.transactions.some((e=>e.annotation(og)))){var t=e.state.doc.toString();a(t,e)}s&&s((e=>({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map((t=>e.state.sliceDoc(t.from,t.to))),selectedText:e.state.selection.ranges.some((e=>!e.empty))}))(e))})),I=[T,P,...ig({theme:d,editable:v,readOnly:b,placeholder:_,indentWithTab:y,basicSetup:A})];return r&&"function"===typeof r&&I.push(br.updateListener.of(r)),I=I.concat(l),(0,o.useEffect)((()=>{if(O&&!S){var e={doc:t,selection:i,extensions:I},o=k?no.fromJSON(k.json,e,k.fields):no.create(e);if(M(o),!C){var a=new br({state:o,parent:O,root:D});x(a),n&&n(a,o)}}return()=>{C&&(M(void 0),x(void 0))}}),[O,S]),(0,o.useEffect)((()=>w(e.container)),[e.container]),(0,o.useEffect)((()=>()=>{C&&(C.destroy(),x(void 0))}),[C]),(0,o.useEffect)((()=>{c&&C&&C.focus()}),[c,C]),(0,o.useEffect)((()=>{C&&C.dispatch({effects:Gi.reconfigure.of(I)})}),[d,l,h,u,p,f,g,m,_,v,b,y,A,a,r]),(0,o.useEffect)((()=>{if(void 0!==t){var e=C?C.state.doc.toString():"";C&&t!==e&&C.dispatch({changes:{from:0,to:e.length,insert:t||""},annotations:[og.of(!0)]})}}),[t,C]),{state:S,setState:M,view:C,setView:x,container:O,setContainer:w}}({container:S.current,root:w,value:a,autoFocus:u,theme:p,height:_,minHeight:f,maxHeight:g,width:m,minWidth:v,maxWidth:b,basicSetup:y,placeholder:A,indentWithTab:D,editable:k,readOnly:O,selection:s,onChange:r,onStatistics:l,onCreateEditor:d,onUpdate:h,extensions:n,initialState:C});if((0,o.useImperativeHandle)(t,(()=>({editor:S.current,state:M,view:P})),[S,T,M,P]),"string"!==typeof a)throw new Error("value must be typeof string but got "+typeof a);var I="string"===typeof p?"cm-theme-"+p:"cm-theme";return(0,c.jsx)("div",Et({ref:S,className:I+(i?" "+i:"")},x))}));sg.displayName="CodeMirror";const ng=sg;class rg{constructor(e,t,i,o,a,s,n,r,l){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,d=arguments.length>10?arguments[10]:void 0;this.p=e,this.stack=t,this.state=i,this.reducePos=o,this.pos=a,this.score=s,this.buffer=n,this.bufferBase=r,this.curContext=l,this.lookAhead=c,this.parent=d}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e.parser.context;return new rg(e,[],t,i,i,0,[],0,o?new lg(o,o.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,o=65535&e,{parser:a}=this.p,s=a.dynamicPrecedence(o);if(s&&(this.score+=s),0==i)return this.pushState(a.getGoto(this.state,o,!0),this.reducePos),o<a.minRepeatTerm&&this.storeNode(o,this.reducePos,this.reducePos,4,!0),void this.reduceContext(o,this.reducePos);let n=this.stack.length-3*(i-1)-(262144&e?6:0),r=n?this.stack[n-2]:this.p.ranges[0].from,l=this.reducePos-r;l>=2e3&&!(null===(t=this.p.parser.nodeSet.types[o])||void 0===t?void 0:t.isAnonymous)&&(r==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=r,this.p.lastBigReductionSize=l));let c=n?this.stack[n-1]:0,d=this.bufferBase+this.buffer.length-c;if(o<a.minRepeatTerm||131072&e){let e=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(o,r,e,d+4,!0)}if(262144&e)this.state=this.stack[n];else{let e=this.stack[n-3];this.state=a.getGoto(e,o,!0)}for(;this.stack.length>n;)this.stack.pop();this.reduceContext(o,r)}storeNode(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,o=this.buffer.length;if(0==o&&e.parent&&(o=e.bufferBase-e.parent.bufferBase,e=e.parent),o>0&&0==e.buffer[o-4]&&e.buffer[o-1]>-1){if(t==i)return;if(e.buffer[o-2]>=t)return void(e.buffer[o-2]=i)}}if(a&&this.pos!=i){let a=this.buffer.length;if(a>0&&0!=this.buffer[a-4])for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,o>4&&(o-=4);this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=i,this.buffer[a+3]=o}else this.buffer.push(e,t,i,o)}shift(e,t,i){let o=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let a=e,{parser:s}=this.p;(i>this.pos||t<=s.maxNode)&&(this.pos=i,s.stateFlag(a,1)||(this.reducePos=i)),this.pushState(a,o),this.shiftContext(t,o),t<=s.maxNode&&this.buffer.push(t,o,i,4)}else this.pos=i,this.shiftContext(t,o),t<=this.p.parser.maxNode&&this.buffer.push(t,o,i,4)}apply(e,t,i){65536&e?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let o=this.pos;this.reducePos=this.pos=o+e.length,this.pushState(t,o),this.buffer.push(i,o,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),o=e.bufferBase+t;for(;e&&o==e.bufferBase;)e=e.parent;return new rg(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,o,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new dg(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==i)return!1;if(0==(65536&i))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let o,a=0;a<t.length;a+=2)(o=t[a+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[a],o);if(this.stack.length<120)for(let e=0;i.length<8&&e<t.length;e+=2){let o=t[e+1];i.some(((e,t)=>1&t&&e==o))||i.push(t[e],o)}t=i}let i=[];for(let o=0;o<t.length&&i.length<4;o+=2){let e=t[o+1];if(e==this.state)continue;let a=this.split();a.pushState(e,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[o],this.pos),a.score-=200,i.push(a)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(0==(65536&t))return!1;if(!e.validAction(this.state,t)){let i=t>>19,o=65535&t,a=this.stack.length-3*i;if(a<0||e.getGoto(this.stack[a],o,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(o,a)=>{if(!t.includes(o))return t.push(o),e.allActions(o,(t=>{if(393216&t);else if(65536&t){let i=(t>>19)-a;if(i>1){let o=65535&t,a=this.stack.length-3*i;if(a>=0&&e.getGoto(this.stack[a],o,!1)>=0)return i<<19|65536|o}}else{let e=i(t,a+1);if(null!=e)return e}}))};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new lg(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class lg{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var cg;!function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth",e[e.MinBigReduction=2e3]="MinBigReduction"}(cg||(cg={}));class dg{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,i=e>>19;0==i?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(i-1);let o=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=o}}class hg{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.bufferBase+e.buffer.length;return new hg(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new hg(this.stack,this.pos,this.index)}}function ug(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uint16Array;if("string"!=typeof e)return e;let i=null;for(let o=0,a=0;o<e.length;){let s=0;for(;;){let t=e.charCodeAt(o++),i=!1;if(126==t){s=65535;break}t>=92&&t--,t>=34&&t--;let a=t-32;if(a>=46&&(a-=46,i=!0),s+=a,i)break;s*=46}i?i[a++]=s:i=new t(s)}return i}class pg{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const _g=new pg;class fg{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=_g,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,o=this.rangeIndex,a=this.pos+e;for(;a<i.from;){if(!o)return null;let e=this.ranges[--o];a-=i.from-e.to,i=e}for(;t<0?a>i.to:a>=i.to;){if(o==this.ranges.length-1)return null;let e=this.ranges[++o];a+=e.from-i.to,i=e}return a}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,i,o=this.chunkOff+e;if(o>=0&&o<this.chunk.length)t=this.pos+e,i=this.chunk.charCodeAt(o);else{let o=this.resolveOffset(e,1);if(null==o)return-1;if(t=o,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,o=this.range;for(;o.to<=t;)o=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-t)),i=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),i}acceptToken(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t?this.resolveOffset(t,-1):this.pos;if(null==i||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=_g,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let o of this.ranges){if(o.from>=t)break;o.to>e&&(i+=this.input.read(Math.max(o.from,e),Math.min(o.to,t)))}return i}}class gg{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;mg(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}gg.prototype.contextual=gg.prototype.fallback=gg.prototype.extend=!1;gg.prototype.fallback=gg.prototype.extend=!1;function mg(e,t,i,o,a,s){let n=0,r=1<<o,{dialect:l}=i.p.parser;e:for(;0!=(r&e[n]);){let i=e[n+1];for(let h=n+3;h<i;h+=2)if((e[h+1]&r)>0){let i=e[h];if(l.allows(i)&&(-1==t.token.value||t.token.value==i||bg(i,t.token.value,a,s))){t.acceptToken(i);break}}let o=t.next,c=0,d=e[n+2];if(!(t.next<0&&d>c&&65535==e[i+3*d-3]&&65535==e[i+3*d-3])){for(;c<d;){let a=c+d>>1,s=i+a+(a<<1),r=e[s],l=e[s+1]||65536;if(o<r)d=a;else{if(!(o>=l)){n=e[s+2],t.advance();continue e}c=a+1}}break}n=e[i+3*d-1]}}function vg(e,t,i){for(let o,a=t;65535!=(o=e[a]);a++)if(o==i)return a-t;return-1}function bg(e,t,i,o){let a=vg(i,o,t);return a<0||vg(i,o,e)<a}const yg="undefined"!=typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&/\bparse\b/.test({NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.LOG);let Ag=null;var Dg,kg;function Og(e,t,i){let o=e.cursor(pc.IncludeAnonymous);for(o.moveTo(t);;)if(!(i<0?o.childBefore(t):o.childAfter(t)))for(;;){if((i<0?o.to<t:o.from>t)&&!o.type.isError)return i<0?Math.max(0,Math.min(o.to-1,t-25)):Math.min(e.length,Math.max(o.from+1,t+25));if(i<0?o.prevSibling():o.nextSibling())break;if(!o.parent())return i<0?0:e.length}}!function(e){e[e.Margin=25]="Margin"}(Dg||(Dg={}));class wg{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Og(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Og(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],o=this.index[t];if(o==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=i.children[o],s=this.start[t]+i.positions[o];if(s>e)return this.nextStart=s,null;if(a instanceof _c){if(s==e){if(s<this.safeFrom)return null;let e=s+a.length;if(e<=this.safeTo){let t=a.prop(rc.lookAhead);if(!t||e+t<this.fragment.to)return a}}this.index[t]++,s+a.length>=Math.max(this.safeFrom,e)&&(this.trees.push(a),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+a.length}}}class Cg{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new pg))}getActions(e){let t=0,i=null,{parser:o}=e.p,{tokenizers:a}=o,s=o.stateSlot(e.state,3),n=e.curContext?e.curContext.hash:0,r=0;for(let l=0;l<a.length;l++){if(0==(1<<l&s))continue;let o=a[l],c=this.tokens[l];if((!i||o.fallback)&&((o.contextual||c.start!=e.pos||c.mask!=s||c.context!=n)&&(this.updateCachedToken(c,o,e),c.mask=s,c.context=n),c.lookAhead>c.end+25&&(r=Math.max(c.lookAhead,r)),0!=c.value)){let a=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!o.extend&&(i=c,t>a))break}}for(;this.actions.length>t;)this.actions.pop();return r&&e.setLookAhead(r),i||e.pos!=this.stream.end||(i=new pg,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new pg,{pos:i,p:o}=e;return t.start=i,t.end=Math.min(i+1,o.stream.end),t.value=i==o.stream.end?o.parser.eofTerm:0,t}updateCachedToken(e,t,i){let o=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(o,e),i),e.value>-1){let{parser:t}=i.p;for(let o=0;o<t.specialized.length;o++)if(t.specialized[o]==e.value){let a=t.specializers[o](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){0==(1&a)?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(o+1)}putAction(e,t,i,o){for(let a=0;a<o;a+=3)if(this.actions[a]==e)return o;return this.actions[o++]=e,this.actions[o++]=t,this.actions[o++]=i,o}addActions(e,t,i,o){let{state:a}=e,{parser:s}=e.p,{data:n}=s;for(let r=0;r<2;r++)for(let e=s.stateSlot(a,r?2:1);;e+=3){if(65535==n[e]){if(1!=n[e+1]){0==o&&2==n[e+1]&&(o=this.putAction(Tg(n,e+2),t,i,o));break}e=Tg(n,e+2)}n[e]==t&&(o=this.putAction(Tg(n,e+1),t,i,o))}return o}}!function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo",e[e.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",e[e.MaxStackCount=12]="MaxStackCount"}(kg||(kg={}));class xg{constructor(e,t,i,o){this.parser=e,this.input=t,this.ranges=o,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new fg(t,o),this.tokens=new Cg(e,this.stream),this.topTerm=e.top[1];let{from:a}=o[0];this.stacks=[rg.start(this,e.top[0],a)],this.fragments=i.length&&this.stream.end-a>4*e.bufferLength?new wg(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,i=this.stacks,o=this.minStackPos,a=this.stacks=[];if(this.bigReductionCount>300&&1==i.length){let[e]=i;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<i.length;s++){let n=i[s];for(;;){if(this.tokens.mainToken=null,n.pos>o)a.push(n);else{if(this.advanceStack(n,a,i))continue;{e||(e=[],t=[]),e.push(n);let i=this.tokens.getMainToken(n);t.push(i.value,i.end)}}break}}if(!a.length){let t=e&&function(e){let t=null;for(let i of e){let e=i.p.stoppedAt;(i.pos==i.p.stream.end||null!=e&&i.pos>e)&&i.p.parser.stateFlag(i.state,2)&&(!t||t.score<i.score)&&(t=i)}return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw yg&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+o);this.recovering||(this.recovering=5)}if(this.recovering&&e){let i=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,a);if(i)return this.stackToTree(i.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(a.length>e)for(a.sort(((e,t)=>t.score-e.score));a.length>e;)a.pop();a.some((e=>e.reducePos>o))&&this.recovering--}else if(a.length>1){e:for(let e=0;e<a.length-1;e++){let t=a[e];for(let i=e+1;i<a.length;i++){let o=a[i];if(t.sameState(o)||t.buffer.length>500&&o.buffer.length>500){if(!((t.score-o.score||t.buffer.length-o.buffer.length)>0)){a.splice(e--,1);continue e}a.splice(i--,1)}}}a.length>12&&a.splice(12,a.length-12)}this.minStackPos=a[0].pos;for(let s=1;s<a.length;s++)a[s].pos<this.minStackPos&&(this.minStackPos=a[s].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let o=e.pos,{parser:a}=this,s=yg?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&o>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,i=t?e.curContext.hash:0;for(let n=this.fragments.nodeAt(o);n;){let o=this.parser.nodeSet.types[n.type.id]==n.type?a.getGoto(e.state,n.type.id):-1;if(o>-1&&n.length&&(!t||(n.prop(rc.contextHash)||0)==i))return e.useNode(n,o),yg&&console.log(s+this.stackID(e)+` (via reuse of ${a.getName(n.type.id)})`),!0;if(!(n instanceof _c)||0==n.children.length||n.positions[0]>0)break;let r=n.children[0];if(!(r instanceof _c&&0==n.positions[0]))break;n=r}}let n=a.stateSlot(e.state,4);if(n>0)return e.reduce(n),yg&&console.log(s+this.stackID(e)+` (via always-reduce ${a.getName(65535&n)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let r=this.tokens.getActions(e);for(let l=0;l<r.length;){let n=r[l++],c=r[l++],d=r[l++],h=l==r.length||!i,u=h?e:e.split();if(u.apply(n,c,d),yg&&console.log(s+this.stackID(u)+` (via ${0==(65536&n)?"shift":`reduce of ${a.getName(65535&n)}`} for ${a.getName(c)} @ ${o}${u==e?"":", split"})`),h)return!0;u.pos>o?t.push(u):i.push(u)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Sg(e,t),!0}}runRecovery(e,t,i){let o=null,a=!1;for(let s=0;s<e.length;s++){let n=e[s],r=t[s<<1],l=t[1+(s<<1)],c=yg?this.stackID(n)+" -> ":"";if(n.deadEnd){if(a)continue;if(a=!0,n.restart(),yg&&console.log(c+this.stackID(n)+" (restarted)"),this.advanceFully(n,i))continue}let d=n.split(),h=c;for(let e=0;d.forceReduce()&&e<10;e++){if(yg&&console.log(h+this.stackID(d)+" (via force-reduce)"),this.advanceFully(d,i))break;yg&&(h=this.stackID(d)+" -> ")}for(let e of n.recoverByInsert(r))yg&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,i);this.stream.end>n.pos?(l==n.pos&&(l++,r=0),n.recoverByDelete(r,l),yg&&console.log(c+this.stackID(n)+` (via recover-delete ${this.parser.getName(r)})`),Sg(n,i)):(!o||o.score<n.score)&&(o=n)}return o}stackToTree(e){return e.close(),_c.build({buffer:hg.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Ag||(Ag=new WeakMap)).get(e);return t||Ag.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Sg(e,t){for(let i=0;i<t.length;i++){let o=t[i];if(o.pos==e.pos&&o.sameState(e))return void(t[i].score<e.score&&(t[i]=e))}t.push(e)}class Mg{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||0==this.disabled[e]}}class Pg extends Tc{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let n=0;n<e.repeatNodeCount;n++)t.push("");let i=Object.keys(e.topRules).map((t=>e.topRules[t][1])),o=[];for(let n=0;n<t.length;n++)o.push([]);function a(e,t,i){o[e].push([t,t.deserialize(String(i))])}if(e.nodeProps)for(let n of e.nodeProps){let e=n[0];"string"==typeof e&&(e=rc[e]);for(let t=1;t<n.length;){let i=n[t++];if(i>=0)a(i,e,n[t++]);else{let o=n[t+-i];for(let s=-i;s>0;s--)a(n[t++],e,o);t++}}}this.nodeSet=new dc(t.map(((t,a)=>cc.define({name:a>=this.minRepeatTerm?void 0:t,id:a,props:o[a],top:i.indexOf(a)>-1,error:0==a,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=ac;let s=ug(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let n=0;n<this.specializerSpecs.length;n++)this.specialized[n]=this.specializerSpecs[n].term;this.specializers=this.specializerSpecs.map(Ig),this.states=ug(e.states,Uint32Array),this.data=ug(e.stateData),this.goto=ug(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new gg(s,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let o=new xg(this,e,t,i);for(let a of this.wrappers)o=a(o,e,t,i);return o}getGoto(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.goto;if(t>=o[0])return-1;for(let a=o[t+1];;){let t=o[a++],s=1&t,n=o[a++];if(s&&i)return n;for(let i=a+(t>>1);a<i;a++)if(o[a]==e)return n;if(s)return-1}}hasAction(e,t){let i=this.data;for(let o=0;o<2;o++)for(let a,s=this.stateSlot(e,o?2:1);;s+=3){if(65535==(a=i[s])){if(1!=i[s+1]){if(2==i[s+1])return Tg(i,s+2);break}a=i[s=Tg(i,s+2)]}if(a==t||0==a)return Tg(i,s+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,(e=>e==t||null))}allActions(e,t){let i=this.stateSlot(e,4),o=i?t(i):void 0;for(let a=this.stateSlot(e,1);null==o;a+=3){if(65535==this.data[a]){if(1!=this.data[a+1])break;a=Tg(this.data,a+2)}o=t(Tg(this.data,a+1))}return o}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=Tg(this.data,i+2)}if(0==(1&this.data[i+2])){let e=this.data[i+1];t.some(((t,i)=>1&i&&t==e))||t.push(this.data[i],e)}}return t}configure(e){let t=Object.assign(Object.create(Pg.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let i=e.tokenizers.find((e=>e.from==t));return i?i.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((i,o)=>{let a=e.specializers.find((e=>e.from==i.external));if(!a)return i;let s=Object.assign(Object.assign({},i),{external:a.to});return t.specializers[o]=Ig(s),s}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map((()=>!1));if(e)for(let a of e.split(" ")){let e=t.indexOf(a);e>=0&&(i[e]=!0)}let o=null;for(let a=0;a<t.length;a++)if(!i[a])for(let e,i=this.dialects[t[a]];65535!=(e=this.data[i++]);)(o||(o=new Uint8Array(this.maxTerm+1)))[e]=1;return new Mg(e,i,o)}static deserialize(e){return new Pg(e)}}function Tg(e,t){return e[t]|e[t+1]<<16}function Ig(e){if(e.external){let t=e.extend?1:0;return(i,o)=>e.external(i,o)<<1|t}return e.get}const Ng=jc({null:ad.null,instanceof:ad.operatorKeyword,this:ad.self,"new super assert open to with void":ad.keyword,"class interface extends implements enum var":ad.definitionKeyword,"module package import":ad.moduleKeyword,"switch while for if else case default do break continue return try catch finally throw":ad.controlKeyword,"requires exports opens uses provides public private protected static transitive abstract final strictfp synchronized native transient volatile throws":ad.modifier,IntegerLiteral:ad.integer,FloatingPointLiteral:ad.float,"StringLiteral TextBlock":ad.string,CharacterLiteral:ad.character,LineComment:ad.lineComment,BlockComment:ad.blockComment,BooleanLiteral:ad.bool,PrimitiveType:ad.standard(ad.typeName),TypeName:ad.typeName,Identifier:ad.variableName,"MethodName/Identifier":ad.function(ad.variableName),Definition:ad.definition(ad.variableName),ArithOp:ad.arithmeticOperator,LogicOp:ad.logicOperator,BitOp:ad.bitwiseOperator,CompareOp:ad.compareOperator,AssignOp:ad.definitionOperator,UpdateOp:ad.updateOperator,Asterisk:ad.punctuation,Label:ad.labelName,"( )":ad.paren,"[ ]":ad.squareBracket,"{ }":ad.brace,".":ad.derefOperator,", ;":ad.separator}),Fg={__proto__:null,true:34,false:34,null:42,void:46,byte:48,short:48,int:48,long:48,char:48,float:48,double:48,boolean:48,extends:62,super:64,class:76,this:78,new:84,public:100,protected:102,private:104,abstract:106,static:108,final:110,strictfp:112,default:114,synchronized:116,native:118,transient:120,volatile:122,throws:150,implements:160,interface:166,enum:176,instanceof:236,open:265,module:267,requires:272,transitive:274,exports:276,to:278,opens:280,uses:282,provides:284,with:286,package:290,import:294,if:306,else:308,while:312,for:316,var:323,assert:330,switch:334,case:340,do:344,break:348,continue:352,return:356,throw:362,try:366,catch:370,finally:378},Lg=Pg.deserialize({version:14,states:"#!hQ]QPOOO&tQQO'#H[O(xQQO'#CbOOQO'#Cb'#CbO)PQPO'#CaO)XOSO'#CpOOQO'#Ha'#HaOOQO'#Cu'#CuO*tQPO'#D_O+_QQO'#HkOOQO'#Hk'#HkO-sQQO'#HfO-zQQO'#HfOOQO'#Hf'#HfOOQO'#He'#HeO0OQPO'#DUO0]QPO'#GlO3TQPO'#D_O3[QPO'#DzO)PQPO'#E[O3}QPO'#E[OOQO'#DV'#DVO5]QQO'#H_O7dQQO'#EeO7kQPO'#EdO7pQPO'#EfOOQO'#H`'#H`O5sQQO'#H`O8sQQO'#FgO8zQPO'#EwO9PQPO'#E|O9PQPO'#FOOOQO'#H_'#H_OOQO'#HW'#HWOOQO'#Gf'#GfOOQO'#HV'#HVO:aQPO'#FhOOQO'#HU'#HUOOQO'#Ge'#GeQ]QPOOOOQO'#Hq'#HqO:fQPO'#HqO:kQPO'#D{O:kQPO'#EVO:kQPO'#EQO:sQPO'#HnO;UQQO'#EfO)PQPO'#C`O;^QPO'#C`O)PQPO'#FbO;cQPO'#FdO;nQPO'#FjO;nQPO'#FmO:kQPO'#FrO;sQPO'#FoO9PQPO'#FvO;nQPO'#FxO]QPO'#F}O;xQPO'#GPO<TQPO'#GRO<`QPO'#GTO;nQPO'#GVO9PQPO'#GWO<gQPO'#GYOOQO'#H['#H[O=WQQO,58{OOQO'#HY'#HYOOOO'#Gg'#GgO>yOSO,59[OOQO,59[,59[OOQO'#Hg'#HgO?jQPO,59eO@lQPO,59yOOQO-E:d-E:dO)PQPO,58zOA`QPO,58zO)PQPO,5;|OAeQPO'#DQOAjQPO'#DQOOQO'#Gi'#GiOBjQQO,59jOOQO'#Dm'#DmODRQPO'#HsOD]QPO'#DlODkQPO'#HrODsQPO,5<^ODxQPO,59^OEcQPO'#CxOOQO,59c,59cOEjQPO,59bOGrQQO'#H[OJVQQO'#CbOJmQPO'#D_OKrQQO'#HkOLSQQO,59pOLZQPO'#DvOLiQPO'#HzOLqQPO,5:`OLvQPO,5:`OM^QPO,5;mOMiQPO'#IROMtQPO,5;dOMyQPO,5=WOOQO-E:j-E:jOOQO,5:f,5:fO! aQPO,5:fO! hQPO,5:vO! mQPO,5<^O)PQPO,5:vO:kQPO,5:gO:kQPO,5:qO:kQPO,5:lO:kQPO,5<^O!!^QPO,59qO9PQPO,5:}O!!eQPO,5;QO9PQPO,59TO!!sQPO'#DXOOQO,5;O,5;OOOQO'#El'#ElOOQO'#En'#EnO9PQPO,5;UO9PQPO,5;UO9PQPO,5;UO9PQPO,5;UO9PQPO,5;UO9PQPO,5;UO9PQPO,5;eOOQO,5;h,5;hOOQO,5<R,5<RO!!zQPO,5;aO!#]QPO,5;cO!!zQPO'#CyO!#dQQO'#HkO!#rQQO,5;jO]QPO,5<SOOQO-E:c-E:cOOQO,5>],5>]O!%SQPO,5:gO!%bQPO,5:qO!%jQPO,5:lO!%uQPO,5>YOLZQPO,5>YO! {QPO,59UO!&QQQO,58zO!&YQQO,5;|O!&bQQO,5<OO)PQPO,5<OO9PQPO'#DUO]QPO,5<UO]QPO,5<XO!&jQPO'#FqO]QPO,5<ZO]QPO,5<`O!&zQQO,5<bO!'UQPO,5<dO!'ZQPO,5<iOOQO'#Fi'#FiOOQO,5<k,5<kO!'`QPO,5<kOOQO,5<m,5<mO!'eQPO,5<mO!'jQQO,5<oOOQO,5<o,5<oO<jQPO,5<qO!'qQQO,5<rO!'xQPO'#GcO!)OQPO,5<tO<jQPO,5<|O)PQPO,58}O!,|QPO'#ChOOQO1G.k1G.kOOOO-E:e-E:eOOQO1G.v1G.vO!-WQPO,59jO!&QQQO1G.fO)PQPO1G.fO!-eQQO1G1hOOQO,59l,59lO!-mQPO,59lOOQO-E:g-E:gO!-rQPO,5>_O!.ZQPO,5:WO:kQPO'#GnO!.bQPO,5>^OOQO1G1x1G1xOOQO1G.x1G.xO!.{QPO'#CyO!/kQPO'#HkO!/uQPO'#CzO!0TQPO'#HjO!0]QPO,59dOOQO1G.|1G.|OEjQPO1G.|O!0sQPO,59eO!1QQQO'#H[O!1cQQO'#CbOOQO,5:b,5:bO:kQPO,5:cOOQO,5:a,5:aO!1tQQO,5:aOOQO1G/[1G/[O!1yQPO,5:bO!2[QPO'#GqO!2oQPO,5>fOOQO1G/z1G/zO!2wQPO'#DvO!3YQPO'#D_O!3aQPO1G/zO!!zQPO'#GoO!3fQPO1G1XO9PQPO1G1XO:kQPO'#GwO!3nQPO,5>mOOQO1G1O1G1OOOQO1G0Q1G0QO!3vQPO'#E]OOQO1G0b1G0bO!4gQPO1G1xO! hQPO1G0bO!%SQPO1G0RO!%bQPO1G0]O!%jQPO1G0WOOQO1G/]1G/]O!4lQQO1G.pO7kQPO1G0jO)PQPO1G0jO:sQPO'#HnO!6`QQO1G.pOOQO1G.p1G.pO!6eQQO1G0iOOQO1G0l1G0lO!6lQPO1G0lO!6wQQO1G.oO!7_QQO'#HoO!7lQPO,59sO!8{QQO1G0pO!:dQQO1G0pO!;rQQO1G0pO!<PQQO1G0pO!=UQQO1G0pO!=lQQO1G0pO!=vQQO1G1PO!=}QQO'#HkOOQO1G0{1G0{O!?QQQO1G0}OOQO1G0}1G0}OOQO1G1n1G1nO! pQPO'#DqO!ARQPO'#D[O!!zQPO'#D|O!!zQPO'#D}OOQO1G0R1G0RO!AYQPO1G0RO!A_QPO1G0RO!AgQPO1G0RO!ArQPO'#EXOOQO1G0]1G0]O!BVQPO1G0]O!B[QPO'#ETO!!zQPO'#ESOOQO1G0W1G0WO!CUQPO1G0WO!CZQPO1G0WO!CcQPO'#EhO!CjQPO'#EhOOQO'#Gv'#GvO!CrQQO1G0mO!EcQQO1G3tO7kQPO1G3tO!GbQPO'#FWOOQO1G.f1G.fOOQO1G1h1G1hO!GiQPO1G1jOOQO1G1j1G1jO!GtQQO1G1jO!G|QPO1G1pOOQO1G1s1G1sO)aQPO'#D_O+_QQO,5<aO!KtQPO,5<aO!LVQPO,5<]O!L^QPO,5<]OOQO1G1u1G1uOOQO1G1z1G1zOOQO1G1|1G1|O9PQPO1G1|O#!QQPO'#FzOOQO1G2O1G2OO;nQPO1G2TOOQO1G2V1G2VOOQO1G2X1G2XOOQO1G2Z1G2ZOOQO1G2]1G2]OOQO1G2^1G2^O#!XQQO'#H[O##SQQO'#CbO+_QQO'#HkO##}QQOOO#$kQQO'#EeO#$YQQO'#H`OLZQPO'#GdO#$rQPO,5<}OOQO'#HO'#HOO#$zQPO1G2`O#(xQPO'#G[O<jQPO'#G`OOQO1G2`1G2`O#(}QPO1G2hOOQO1G.i1G.iO#.SQQO'#EeO#.dQQO'#H^O#.tQPO'#FSOOQO'#H^'#H^O#/OQPO'#H^O#/mQPO'#IUO#/uQPO,59SOOQO7+$Q7+$QO!&QQQO7+$QOOQO7+'S7+'SOOQO1G/W1G/WO#/zQPO'#DoO#0UQQO'#HtOOQO'#Ht'#HtOOQO1G/r1G/rOOQO,5=Y,5=YOOQO-E:l-E:lO#0fQWO,58{O#0mQPO,59fOOQO,59f,59fO!!zQPO'#HmOD}QPO'#GhO#0{QPO,5>UOOQO1G/O1G/OOOQO7+$h7+$hOOQO1G/{1G/{O#1TQQO1G/{OOQO1G/}1G/}O#1YQPO1G/{OOQO1G/|1G/|O:kQPO1G/}OOQO,5=],5=]OOQO-E:o-E:oOOQO7+%f7+%fOOQO,5=Z,5=ZOOQO-E:m-E:mO9PQPO7+&sOOQO7+&s7+&sOOQO,5=c,5=cOOQO-E:u-E:uO#1_QPO'#EUO#1mQPO'#EUOOQO'#Gu'#GuO#2UQPO,5:wOOQO,5:w,5:wOOQO7+'d7+'dOOQO7+%|7+%|OOQO7+%m7+%mO!AYQPO7+%mO!A_QPO7+%mO!AgQPO7+%mOOQO7+%w7+%wO!BVQPO7+%wOOQO7+%r7+%rO!CUQPO7+%rO!CZQPO7+%rOOQO7+&U7+&UOOQO'#Ee'#EeO7kQPO7+&UO7kQPO,5>YO#2uQPO7+$[OOQO7+&T7+&TOOQO7+&W7+&WO9PQPO'#GjO#3TQPO,5>ZOOQO1G/_1G/_O9PQPO7+&kO#3`QQO,59eO#4cQPO'#DrO! pQPO'#DrO#4nQPO'#HwO#4vQPO,5:]O#5aQQO'#HgO#5|QQO'#CuO! mQPO'#HvO#6lQPO'#DpO#6vQPO'#HvO#7XQPO'#DpO#7aQPO'#IPO#7fQPO'#E`OOQO'#Hp'#HpOOQO'#Gk'#GkO#7nQPO,59vOOQO,59v,59vO#7uQPO'#HqOOQO,5:h,5:hO#9]QPO'#H|OOQO'#EP'#EPOOQO,5:i,5:iO#9hQPO'#EYO:kQPO'#EYO#9yQPO'#H}O#:UQPO,5:sO! mQPO'#HvO!!zQPO'#HvO#:^QPO'#DpOOQO'#Gs'#GsO#:eQPO,5:oOOQO,5:o,5:oOOQO,5:n,5:nOOQO,5;S,5;SO#;_QQO,5;SO#;fQPO,5;SOOQO-E:t-E:tOOQO7+&X7+&XOOQO7+)`7+)`O#;mQQO7+)`OOQO'#Gz'#GzO#=ZQPO,5;rOOQO,5;r,5;rO#=bQPO'#FXO)PQPO'#FXO)PQPO'#FXO)PQPO'#FXO#=pQPO7+'UO#=uQPO7+'UOOQO7+'U7+'UO]QPO7+'[O#>QQPO1G1{O! mQPO1G1{O#>`QQO1G1wO!!sQPO1G1wO#>gQPO1G1wO#>nQQO7+'hOOQO'#G}'#G}O#>uQPO,5<fOOQO,5<f,5<fO#>|QPO'#HqO9PQPO'#F{O#?UQPO7+'oO#?ZQPO,5=OO! mQPO,5=OO#?`QPO1G2iO#@iQPO1G2iOOQO1G2i1G2iOOQO-E:|-E:|OOQO7+'z7+'zO!2[QPO'#G^O<jQPO,5<vOOQO,5<z,5<zO#@qQPO7+(SOOQO7+(S7+(SO#DoQPO,59TO#DvQPO'#ITO#EOQPO,5;nO)PQPO'#GyO#ETQPO,5>pOOQO1G.n1G.nOOQO<<Gl<<GlO#E]QPO'#HuO#EeQPO,5:ZOOQO1G/Q1G/QOOQO,5>X,5>XOOQO,5=S,5=SOOQO-E:f-E:fO#EjQPO7+%gOOQO7+%g7+%gOOQO7+%i7+%iOOQO<<J_<<J_O#FQQPO'#H[O#FXQPO'#CbO#F`QPO,5:pO#FeQPO,5:xO#1_QPO,5:pOOQO-E:s-E:sOOQO1G0c1G0cOOQO<<IX<<IXO!AYQPO<<IXO!A_QPO<<IXOOQO<<Ic<<IcOOQO<<I^<<I^O!CUQPO<<I^OOQO<<Ip<<IpO#FjQQO<<GvO7kQPO<<IpO)PQPO<<IpOOQO<<Gv<<GvO#H^QQO,5=UOOQO-E:h-E:hO#HkQQO<<JVOOQO,5:^,5:^O!!zQPO'#DsO#IRQPO,5:^O! pQPO'#GpO#I^QPO,5>cOOQO1G/w1G/wO#IfQPO'#HsO#ImQPO,59xO#IrQPO,5>bO! mQPO,59xO#I}QPO,5:[O#7fQPO,5:zO! mQPO,5>bO!!zQPO,5>bO#7aQPO,5>kOOQO,5:[,5:[OLvQPO'#DtOOQO,5>k,5>kO#JVQPO'#EaOOQO,5:z,5:zO#MWQPO,5:zO!!zQPO'#DxOOQO-E:i-E:iOOQO1G/b1G/bOOQO,5:y,5:yO!!zQPO'#GrO#M]QPO,5>hOOQO,5:t,5:tO#MhQPO,5:tO#MvQPO,5:tO#NXQPO'#GtO#NoQPO,5>iO#NzQPO'#EZOOQO1G0_1G0_O$ RQPO1G0_O! mQPO,5:pOOQO-E:q-E:qOOQO1G0Z1G0ZOOQO1G0n1G0nO$ WQQO1G0nOOQO<<Lz<<LzOOQO-E:x-E:xOOQO1G1^1G1^O$ _QQO,5;sOOQO'#G{'#G{O#=bQPO,5;sOOQO'#IV'#IVO$ gQQO,5;sO$ xQQO,5;sOOQO<<Jp<<JpO$!QQPO<<JpOOQO<<Jv<<JvO9PQPO7+'gO$!VQPO7+'gO!!sQPO7+'cO$!eQPO7+'cO$!jQQO7+'cOOQO<<KS<<KSOOQO-E:{-E:{OOQO1G2Q1G2QOOQO,5<g,5<gO$!qQQO,5<gOOQO<<KZ<<KZO9PQPO1G2jO$!xQPO1G2jOOQO,5=l,5=lOOQO7+(T7+(TO$!}QPO7+(TOOQO-E;O-E;OO$$lQWO'#HfO$$WQWO'#HfO$$sQPO'#G_O:kQPO,5<xOLZQPO,5<xOOQO1G2b1G2bOOQO<<Kn<<KnO$%UQQO1G.oOOQO1G1Z1G1ZO$%`QPO'#GxO$%mQPO,5>oOOQO1G1Y1G1YO$%uQPO'#FTOOQO,5=e,5=eOOQO-E:w-E:wO$%zQPO'#GmO$&XQPO,5>aOOQO1G/u1G/uOOQO<<IR<<IROOQO1G0[1G0[O$&aQPO1G0dO$&fQPO1G0[O$&kQPO1G0dOOQOAN>sAN>sO!AYQPOAN>sOOQOAN>xAN>xOOQOAN?[AN?[O7kQPOAN?[O$&pQPO,5:_OOQO1G/x1G/xOOQO,5=[,5=[OOQO-E:n-E:nO$&{QPO,5>eOOQO1G/d1G/dOOQO1G3|1G3|O$'^QPO1G/dOOQO1G/v1G/vOOQO1G0f1G0fO#MWQPO1G0fO#7aQPO'#HyO$'cQPO1G3|O! mQPO1G3|OOQO1G4V1G4VOK^QPO'#DvOJmQPO'#D_OOQO,5:{,5:{O$'nQPO,5:{O$'nQPO,5:{O$'uQQO'#H_O$'|QQO'#H`O$(WQQO'#EbO$(cQPO'#EbOOQO,5:d,5:dOOQO,5=^,5=^OOQO-E:p-E:pOOQO1G0`1G0`O$(kQPO1G0`OOQO,5=`,5=`OOQO-E:r-E:rO$(yQPO,5:uOOQO7+%y7+%yOOQO7+&Y7+&YOOQO1G1_1G1_O$)QQQO1G1_OOQO-E:y-E:yO$)YQQO'#IWO$)TQPO1G1_O$ mQPO1G1_O)PQPO1G1_OOQOAN@[AN@[O$)eQQO<<KRO9PQPO<<KRO$)lQPO<<J}OOQO<<J}<<J}O!!sQPO<<J}OOQO1G2R1G2RO$)qQQO7+(UO9PQPO7+(UOOQO<<Ko<<KoP!'xQPO'#HQOLZQPO'#HPO$){QPO,5<yO$*WQPO1G2dO:kQPO1G2dOOQO,5=d,5=dOOQO-E:v-E:vO#DoQPO,5;oOOQO,5=X,5=XOOQO-E:k-E:kO$*]QPO7+&OOOQO7+%v7+%vO$*kQPO7+&OOOQOG24_G24_OOQOG24vG24vO$*pQPO1G/yO$*{QPO1G4POOQO7+%O7+%OOOQO7+&Q7+&QOOQO7+)h7+)hO$+^QPO7+)hO!0bQPO,5:aOOQO1G0g1G0gO$+iQPO1G0gO$+pQPO,59qO$,UQPO,5:|O7kQPO,5:|OOQO7+%z7+%zOOQO7+&y7+&yO)PQPO'#G|O$,ZQPO,5>rO$,cQPO7+&yO$,hQQO'#IXOOQOAN@mAN@mO$,sQQOAN@mOOQOAN@iAN@iO$,zQPOAN@iO$-PQQO<<KpO$-ZQPO,5=kOOQO-E:}-E:}OOQO7+(O7+(OO$-lQPO7+(OO$-qQPO<<IjOOQO<<Ij<<IjO#DoQPO<<IjO$-qQPO<<IjOOQO<<MS<<MSOOQO7+&R7+&RO$.PQPO1G0jO$.[QQO1G0hOOQO1G0h1G0hO$.dQPO1G0hO$.iQQO,5=hOOQO-E:z-E:zOOQO<<Je<<JeO$.tQPO,5>sOOQOG26XG26XOOQOG26TG26TOOQO<<Kj<<KjOOQOAN?UAN?UO#DoQPOAN?UO$.|QPOAN?UO$/RQPOAN?UO7kQPO7+&SO$/aQPO7+&SOOQO7+&S7+&SO$/fQPOG24pOOQOG24pG24pO#DoQPOG24pO$/kQPO<<InOOQO<<In<<InOOQOLD*[LD*[O$/pQPOLD*[OOQOAN?YAN?YOOQO!$'Mv!$'MvO)PQPO'#CaO$/uQQO'#H[O$0YQQO'#CbO!!zQPO'#Cy",stateData:"$0u~OPOSQOS%wOS~OZ_O_UO`UOaUObUOcUOeUOg]Oh]Op!OOvzOwjOz}O}bO!PuO!SxO!TxO!UxO!VxO!WxO!XxO!YxO!ZyO![!_O!]xO!^xO!_xO!u|O!z{O#eoO#qnO#soO#toO#x!QO#y!PO$V!RO$X!SO$_!TO$b!UO$d!WO$g!VO$k!XO$m!YO$r!ZO$t![O$v!]O$x!^O${!`O$}!aO%{SO%}QO&PPO&VTO&rcO~OWiXW&OXZ&OXuiXu&OX!P&OX!b&OX#]&OX#_&OX#a&OX#c&OX#d&OX#e&OX#f&OX#g&OX#h&OX#j&OX#n&OX#q&OX%{iX%}iX&PiX&[&OX&]iX&]&OX&l&OX&tiX&t&OX&v!aX~O#o$]X~P$wOWUXW&ZXZUXuUXu&ZX!PUX!bUX#]UX#_UX#aUX#cUX#dUX#eUX#fUX#gUX#hUX#jUX#nUX#qUX%{&ZX%}&ZX&P&ZX&[UX&]UX&]&ZX&lUX&tUX&t&ZX&v!aX~O#o$]X~P&{O%}RO&P!bO~O&U!gO&W!eO~Og]Oh]O!SxO!TxO!UxO!VxO!WxO!XxO!YxO!ZyO!]xO!^xO!_xO%{SO%}!hO&PVOg!RXh!RX$g!RX%}!RX&P!RX~O#x!mO#y!lO$V!nOv!RX!u!RX!z!RX&r!RX~P)aOW!xOu!oO%{SO%}!sO&P!sO&t&_X~OW!{Ou&YX%{&YX%}&YX&P&YX&t&YXY&YXw&YX&l&YX&o&YXZ&YXq&YX&[&YX!P&YX#_&YX#a&YX#c&YX#d&YX#e&YX#f&YX#g&YX#h&YX#j&YX#n&YX#q&YX}&YX!r&YX#o&YXs&YX|&YX~O&]!yO~P+sO&]&YX~P+sOZ_O_UO`UOaUObUOcUOeUOg]Oh]Op!OOwjOz}O!SxO!TxO!UxO!VxO!WxO!XxO!YxO!ZyO!]xO!^xO!_xO#eoO#qnO#soO#toO%{SO&VTO~O%}!}O&P!|OY&nP~P.RO%{SOg%`Xh%`Xv%`X!S%`X!T%`X!U%`X!V%`X!W%`X!X%`X!Y%`X!Z%`X!]%`X!^%`X!_%`X!u%`X!z%`X$g%`X%}%`X&P%`X&r%`X&]%`X~O!SxO!TxO!UxO!VxO!WxO!XxO!YxO!ZyO!]xO!^xO!_xOg!RXh!RXv!RX!u!RX!z!RX%}!RX&P!RX&r!RX&]!RX~O$g!RX~P1sO|#[O~P]Og]Oh]Ov#aO!u#cO!z#bO%}!hO&PVO&r#`O~O$g#dO~P3cOu#fO&t#gO!P&RX#_&RX#a&RX#c&RX#d&RX#e&RX#f&RX#g&RX#h&RX#j&RX#n&RX#q&RX&[&RX&]&RX&l&RX~OW#eOY&RX#o&RXs&RXq&RX|&RX~P4UO!b#hO#]#hOW&SXu&SX!P&SX#_&SX#a&SX#c&SX#d&SX#e&SX#f&SX#g&SX#h&SX#j&SX#n&SX#q&SX&[&SX&]&SX&l&SX&t&SXY&SX#o&SXs&SXq&SX|&SX~OZ#XX~P5sOZ#iO~O&t#gO~O#_#mO#a#nO#c#oO#d#oO#e#pO#f#qO#g#rO#h#rO#j#vO#n#sO#q#tO&[#kO&]#kO&l#lO~O!P#uO~P7uO&v#wO~OZ_O_UO`UOaUObUOcUOeUOg]Oh]Op!OOwjOz}O#eoO#qnO#soO#toO%{SO%}0iO&P0hO&VTO~O#o#{O~O![#}O~O%}!sO&P!sO~Og]Oh]O%}!hO&PVO&]!yO~OW$TO&t#gO~O#y!lO~O!W$XO%}RO&P!bO~OZ$YO~OZ$]O~O!P$dO%}$cO&P$cO~O!P$fO%}$cO&P$cO~O!P$iO~P9POZ$lO}bO~OW$oOZ$pOgTahTa%{Ta%}Ta&PTa~OvTa!STa!TTa!UTa!VTa!WTa!XTa!YTa!ZTa!]Ta!^Ta!_Ta!uTa!zTa#xTa#yTa$VTa$gTa&rTauTaYTa&]TaqTa|Ta!PTa~P<oO&U$sO&W!eO~Ou!oO%{SOqma&[maYma&lma!Pma~O&tma}ma!rma~P?RO!SxO!TxO!UxO!VxO!WxO!XxO!YxO!ZyO!]xO!^xO!_xO~Og!Rah!Rav!Ra!u!Ra!z!Ra$g!Ra%}!Ra&P!Ra&r!Ra&]!Ra~P?wO#y$vO~Os$xO~Ou$yO%{SO~Ou!oO%{ra%}ra&Pra&traYrawra&lra&ora!Pra&[raqra~OWra#_ra#ara#cra#dra#era#fra#gra#hra#jra#nra#qra&]ra#orasra|ra~PArOu!oO%{SOq&gX!P&gX!b&gX~OY&gX#o&gX~PCpO!b$|Oq!`X!P!`XY!`X~Oq$}O!P&fX~O!P%PO~Ov%QO~Og]Oh]O%{0gO%}!hO&PVO&`%TO~O&[&^P~PD}O%{SO%}!hO&PVO~OWiXW&OXY&OXZ&OXuiXu&OX!b&OX#]&OX#_&OX#a&OX#c&OX#d&OX#e&OX#f&OX#g&OX#h&OX#j&OX#n&OX#q&OX%{iX%}iX&PiX&[&OX&]iX&]&OX&l&OX&tiX&t&OX&v!aX~OYiXY!aXq!aXwiX&liX&oiX~PEuOWUXW&ZXYUXZUXuUXu&ZX!bUX#]UX#_UX#aUX#cUX#dUX#eUX#fUX#gUX#hUX#jUX#nUX#qUX%{&ZX%}&ZX&P&ZX&[UX&]UX&]&ZX&lUX&tUX&t&ZX&v!aX~OY!aXY&ZXq!aXw&ZX&l&ZX&o&ZX~PHYOg]Oh]O%{SO%}!hO&PVOg!RXh!RX%}!RX&P!RX~P?wOu!oOw%_O%{SO%}%[O&P%ZO&o%^O~OW!xOY&_X&l&_X&t&_X~PK^OY%aO~P7uOg]Oh]O%}!hO&PVO~Oq%cOY&nX~OY%eO~Og]Oh]O%{SO%}!hO&PVOY&nP~P?wOY%kO&l%iO&t#gO~Oq%lO&v#wOY&uX~OY%nO~O%{SOg%`ah%`av%`a!S%`a!T%`a!U%`a!V%`a!W%`a!X%`a!Y%`a!Z%`a!]%`a!^%`a!_%`a!u%`a!z%`a$g%`a%}%`a&P%`a&r%`a&]%`a~O|%oO~P]O}%pO~Ou!oO%{SO%}!sO&P!sO~Op%|Ow%}O%}RO&P!bO&]!yO~Oz%{O~P! {Oz&PO%}RO&P!bO&]!yO~OY&cP~P9POg]Oh]O%{SO%}!hO&PVO~O}bO~P9POW!xOu!oO%{SO&t&_X~O#q#tO!P#ra#_#ra#a#ra#c#ra#d#ra#e#ra#f#ra#g#ra#h#ra#j#ra#n#ra&[#ra&]#ra&l#raY#ra#o#ras#raq#ra|#ra~Oo&dO}&cO!r&eO&]&bO~O}&jO!r&eO~Oo&nO}&mO&]&bO~OZ#iOu&rO%{SO~OW$oO}&xO~OW$oO!P&zO~OW&{O!P&|O~O$g!VO%}0iO&P0hO!P&cP~P.RO!P'XO#o'YO~P7uO}'ZO~O$b']O~O!P'^O~O!P'_O~O!P'`O~P7uO!P'bO~P7uOZ$YO_UO`UOaUObUOcUOeUOg]Oh]Op!OOwjOz}O%{SO%}'dO&P'cO&VTO~P?wO%P'mO%T'nOZ$|a_$|a`$|aa$|ab$|ac$|ae$|ag$|ah$|ap$|av$|aw$|az$|a}$|a!P$|a!S$|a!T$|a!U$|a!V$|a!W$|a!X$|a!Y$|a!Z$|a![$|a!]$|a!^$|a!_$|a!u$|a!z$|a#e$|a#q$|a#s$|a#t$|a#x$|a#y$|a$V$|a$X$|a$_$|a$b$|a$d$|a$g$|a$k$|a$m$|a$r$|a$t$|a$v$|a$x$|a${$|a$}$|a%u$|a%{$|a%}$|a&P$|a&V$|a&r$|a|$|a$`$|a$p$|a~O}'tOY&xP~P9PO}ra!rra&|ra~PArOW$oO!P'{O~Os'|O~Ou!oO%{SOq&ga!P&ga!b&gaY&ga#o&ga~O}'}O~P9POq$}O!P&fa~Og]Oh]O%{0gO%}!hO&PVO~O&`(UO~P!.jOu!oO%{SOq&_X&[&_XY&_X&l&_X!P&_X~O}&_X!r&_X~P!/SOo(WOp(WOqnX&[nX~Oq(XO&[&^X~O&[(ZO~Ou!oOw(]O%{SO%}RO&P!bO~OYma&lma&tma~P!0bOW&OXY!aXq!aXu!aX%{!aX~OWUXY!aXq!aXu!aX%{!aX~OW(`O~Ou!oO%{SO%}!sO&P!sO&o(bO~Og]Oh]O%{SO%}!hO&PVO~P?wOq%cOY&na~Ou!oO%{SO%}!sO&P!sO&o%^O~O%{SO~P1sOY(eO~OY(hO&l%iO~Oq%lOY&ua~Og]Oh]OvzO|(pO!u|O%{SO%}!hO&PVO&rcO~P?wO!P(qO~OW^iZ#XXu^i!P^i!b^i#]^i#_^i#a^i#c^i#d^i#e^i#f^i#g^i#h^i#j^i#n^i#q^i&[^i&]^i&l^i&t^iY^i#o^is^iq^i|^i~OW)QO~Os)RO~P7uOz)SO%}RO&P!bO~O!P]iY]i#o]is]iq]i|]i~P7uOq)TOY&cX!P&cX~P7uOY)VO~O#q#tO!P#^i#_#^i#a#^i#c#^i#d#^i#e#^i#f#^i#j#^i#n#^i&[#^i&]#^i&l#^iY#^i#o#^is#^iq#^i|#^i~O#g#rO#h#rO~P!7qO#_#mO#f#qO#g#rO#h#rO#j#vO#q#tO&[#kO&]#kO!P#^i#a#^i#c#^i#d#^i#n#^i&l#^iY#^i#o#^is#^iq#^i|#^i~O#e#pO~P!9VO#_#mO#f#qO#g#rO#h#rO#j#vO#q#tO&[#kO&]#kO!P#^i#c#^i#d#^i#n#^iY#^i#o#^is#^iq#^i|#^i~O#a#nO#e#pO&l#lO~P!:kO#e#^i~P!9VO#q#tO!P#^i#a#^i#c#^i#d#^i#e#^i#f#^i#n#^i&l#^iY#^i#o#^is#^iq#^i|#^i~O#_#mO#g#rO#h#rO#j#vO&[#kO&]#kO~P!<WO#g#^i#h#^i~P!7qO#o)WO~P7uO#_&_X#a&_X#c&_X#d&_X#e&_X#f&_X#g&_X#h&_X#j&_X#n&_X#q&_X&]&_X#o&_Xs&_X|&_X~P!/SO!P#kiY#ki#o#kis#kiq#ki|#ki~P7uOg]Oh]OvzO}bO!P)fO!SxO!TxO!UxO!VxO!W)jO!XxO!YxO!ZyO!]xO!^xO!_xO!u|O!z{O%{SO%})^O&P)_O&]&bO&rcO~O|)iO~P!?hO}&cO~O}&cO!r&eO~Oo&dO}&cO!r&eO~O%{SO%}!sO&P!sO|&qP!P&qP~P?wO}&jO~Og]Oh]OvzO|)xO!P)vO!u|O!z{O%{SO%}!hO&PVO&]&bO&rcO~P?wO}&mO~Oo&nO}&mO~Os)zO~P9POu)|O%{SO~Ou&rO}'}O%{SOW#Zi!P#Zi#_#Zi#a#Zi#c#Zi#d#Zi#e#Zi#f#Zi#g#Zi#h#Zi#j#Zi#n#Zi#q#Zi&[#Zi&]#Zi&l#Zi&t#ZiY#Zi#o#Zis#Ziq#Zi|#Zi~O}&cOW&biu&bi!P&bi#_&bi#a&bi#c&bi#d&bi#e&bi#f&bi#g&bi#h&bi#j&bi#n&bi#q&bi&[&bi&]&bi&l&bi&t&biY&bi#o&bis&biq&bi|&bi~O#|*UO$O*VO$Q*VO$R*WO$S*XO~O|*TO~P!GPO$Y*YO%}RO&P!bO~OW*ZO!P*[O~O$`*]OZ$^i_$^i`$^ia$^ib$^ic$^ie$^ig$^ih$^ip$^iv$^iw$^iz$^i}$^i!P$^i!S$^i!T$^i!U$^i!V$^i!W$^i!X$^i!Y$^i!Z$^i![$^i!]$^i!^$^i!_$^i!u$^i!z$^i#e$^i#q$^i#s$^i#t$^i#x$^i#y$^i$V$^i$X$^i$_$^i$b$^i$d$^i$g$^i$k$^i$m$^i$r$^i$t$^i$v$^i$x$^i${$^i$}$^i%u$^i%{$^i%}$^i&P$^i&V$^i&r$^i|$^i$p$^i~Og]Oh]O$g#dO%}!hO&PVO~O!P*aO~P9PO!P*bO~OZ_O_UO`UOaUObUOcUOeUOg]Oh]Op!OOvzOwjOz}O}bO!PuO!SxO!TxO!UxO!VxO!WxO!XxO!YxO!Z*gO![!_O!]xO!^xO!_xO!u|O!z{O#eoO#qnO#soO#toO#x!QO#y!PO$V!RO$X!SO$_!TO$b!UO$d!WO$g!VO$k!XO$m!YO$p*hO$r!ZO$t![O$v!]O$x!^O${!`O$}!aO%{SO%}QO&PPO&VTO&rcO~O|*fO~P!LcOWiXW&OXY&OXZ&OXuiXu&OX!P&OX%{iX%}iX&PiX&]iX&tiX&t&OX~OWUXW&ZXYUXZUXuUXu&ZX!PUX%{&ZX%}&ZX&P&ZX&]&ZX&tUX&t&ZX~OW#eOu#fO&t#gO~OW&SXY%WXu&SX!P%WX&t&SX~OZ#XX~P#$YOY*nO!P*lO~O%P'mO%T'nOZ$|i_$|i`$|ia$|ib$|ic$|ie$|ig$|ih$|ip$|iv$|iw$|iz$|i}$|i!P$|i!S$|i!T$|i!U$|i!V$|i!W$|i!X$|i!Y$|i!Z$|i![$|i!]$|i!^$|i!_$|i!u$|i!z$|i#e$|i#q$|i#s$|i#t$|i#x$|i#y$|i$V$|i$X$|i$_$|i$b$|i$d$|i$g$|i$k$|i$m$|i$r$|i$t$|i$v$|i$x$|i${$|i$}$|i%u$|i%{$|i%}$|i&P$|i&V$|i&r$|i|$|i$`$|i$p$|i~OZ*qO~O%P'mO%T'nOZ%Ui_%Ui`%Uia%Uib%Uic%Uie%Uig%Uih%Uip%Uiv%Uiw%Uiz%Ui}%Ui!P%Ui!S%Ui!T%Ui!U%Ui!V%Ui!W%Ui!X%Ui!Y%Ui!Z%Ui![%Ui!]%Ui!^%Ui!_%Ui!u%Ui!z%Ui#e%Ui#q%Ui#s%Ui#t%Ui#x%Ui#y%Ui$V%Ui$X%Ui$_%Ui$b%Ui$d%Ui$g%Ui$k%Ui$m%Ui$r%Ui$t%Ui$v%Ui$x%Ui${%Ui$}%Ui%u%Ui%{%Ui%}%Ui&P%Ui&V%Ui&r%Ui|%Ui$`%Ui$p%Ui~OW&SXu&SX#_&SX#a&SX#c&SX#d&SX#e&SX#f&SX#g&SX#h&SX#j&SX#n&SX#q&SX&[&SX&]&SX&l&SX&t&SX~O!b*vO#]#hOY&SXZ#XX~P#,{OY&QXq&QX|&QX!P&QX~P7uO}'tO|&wP~P9POY&QXg%YXh%YX%{%YX%}%YX&P%YXq&QX|&QX!P&QX~Oq*yOY&xX~OY*{O~O}'}O|&iP~P9POq&hX!P&hX|&hXY&hX~P7uO&`Ta~P<oOo(WOp(WOqna&[na~Oq(XO&[&^a~OW+TO~Ow+UO~Ou!oO%{SO%}+YO&P+XO~Og]Oh]Ov#aO!u#cO%}!hO&PVO&r#`O~Og]Oh]OvzO|+_O!u|O%{SO%}!hO&PVO&rcO~P?wOw+jO%}RO&P!bO&]!yO~Oq)TOY&ca!P&ca~O#_ma#ama#cma#dma#ema#fma#gma#hma#jma#nma#qma&]ma#omasma|ma~P?ROo+oOq!fX&[!fX~Oq+qO&[&kX~O&[+sO~OW&ZXu&ZX%{&ZX%}&ZX&P&ZX&]&ZX~OZ!aX~P#4{OWiXuiX%{iX%}iX&PiX&]iX~OZ!aX~P#5hOg]Oh]Ov#aO!u#cO!z#bO&]&bO&r#`O~O%})^O&P)_O~P#6TOg]Oh]O%{SO%})^O&P)_O~O}bO!P+}O~OZ,OO~O},QO!m,TO~O|,VO~P!?hO}bOg&eXh&eXv&eX!S&eX!T&eX!U&eX!V&eX!W&eX!X&eX!Y&eX!Z&eX!]&eX!^&eX!_&eX!u&eX!z&eX%{&eX%}&eX&P&eX&]&eX&r&eX~Oq,XO}&pX!P&pX~OZ#iO}&cOq!|X|!|X!P!|X~Oq,^O|&qX!P&qX~O|,aO!P,`O~O&]&bO~P3cOg]Oh]OvzO|,eO!P)vO!u|O!z{O%{SO%}!hO&PVO&]&bO&rcO~P?wOs,fO~P7uOs,fO~P9PO}&cOW&bqu&bq!P&bq#_&bq#a&bq#c&bq#d&bq#e&bq#f&bq#g&bq#h&bq#j&bq#n&bq#q&bq&[&bq&]&bq&l&bq&t&bqY&bq#o&bqs&bqq&bq|&bq~O|,jO~P!GPO!W,nO#},nO%}RO&P!bO~O!P,qO~O$Y,rO%}RO&P!bO~O!b$|O#o,tOq!`X!P!`X~O!P,vO~P7uO!P,vO~P9PO!P,yO~P7uO|,{O~P!LcO![#}O#o,|O~O!P-OO~O!b-PO~OY-SOZ$YO_UO`UOaUObUOcUOeUOg]Oh]Op!OOwjOz}O%{SO%}'dO&P'cO&VTO~P?wOY-SO!P-TO~O%P'mO%T'nOZ%Uq_%Uq`%Uqa%Uqb%Uqc%Uqe%Uqg%Uqh%Uqp%Uqv%Uqw%Uqz%Uq}%Uq!P%Uq!S%Uq!T%Uq!U%Uq!V%Uq!W%Uq!X%Uq!Y%Uq!Z%Uq![%Uq!]%Uq!^%Uq!_%Uq!u%Uq!z%Uq#e%Uq#q%Uq#s%Uq#t%Uq#x%Uq#y%Uq$V%Uq$X%Uq$_%Uq$b%Uq$d%Uq$g%Uq$k%Uq$m%Uq$r%Uq$t%Uq$v%Uq$x%Uq${%Uq$}%Uq%u%Uq%{%Uq%}%Uq&P%Uq&V%Uq&r%Uq|%Uq$`%Uq$p%Uq~O}'tO~P9POq-`O|&wX~O|-bO~Oq*yOY&xa~Oq-fO|&iX~O|-hO~Ow-iO~Oq!aXu!aX!P!aX!b!aX%{!aX~OZ&OX~P#EoOZUX~P#EoO!P-jO~OZ-kO~OW^yZ#XXu^y!P^y!b^y#]^y#_^y#a^y#c^y#d^y#e^y#f^y#g^y#h^y#j^y#n^y#q^y&[^y&]^y&l^y&t^yY^y#o^ys^yq^y|^y~OY%^aq%^a!P%^a~P7uO!P#myY#my#o#mys#myq#my|#my~P7uOo+oOq!fa&[!fa~Oq+qO&[&ka~OZ,OO~PCpO!P-xO~O!m,TO}&ja!P&ja~O}bO!P-{O~OZ_O_UO`UOaUObUOcUOeUOg]Oh]Op.ZOvzOw.YOz}O|.UO}bO!PuO![!_O!u|O!z{O#eoO#qnO#soO#toO#x!QO#y!PO$V!RO$X!SO$_!TO$b!UO$d!WO$g!VO$k!XO$m!YO$r!ZO$t![O$v!]O$x!^O${!`O$}!aO%{SO%}QO&PPO&VTO&]!yO&rcO~P?wO},QO~Oq,XO}&pa!P&pa~O}&cOq!|a|!|a!P!|a~OZ#iO}&cOq!|a|!|a!P!|a~O%{SO%}!sO&P!sOq%hX|%hX!P%hX~P?wOq,^O|&qa!P&qa~O|!}X~P!?hO|.eO~Os.fO~P7uOW$oO!P.gO~OW$oO$P.lO%}RO&P!bO!P&zP~OW$oO$T.mO~O!P.nO~O!b$|O#o.pOq!`X!P!`X~OY.rO~O!P.sO~P7uO#o.tO~P7uO!b.vO~OY.wOZ$YO_UO`UOaUObUOcUOeUOg]Oh]Op!OOwjOz}O%{SO%}'dO&P'cO&VTO~P?wOW!{Ou&YX%{&YX%}&YX&P&YX&|&YX~O&]!yO~P$$WOu!oO%{SO&|.yO%}%RX&P%RX~OY&QXq&QX~P7uO}'tOq%lX|%lX~P9POq-`O|&wa~O!b/PO~O}'}Oq%aX|%aX~P9POq-fO|&ia~OY/SO~O!P/TO~OZ/UO~O&l%iOq!ga&[!ga~Ou!oO%{SO}&ma!P&ma!m&ma~O!P/ZO~O!m,TO}&ji!P&ji~O|/`O~P]OW/bO~P4UOZ#iO!P&SX~P#,{OW$TOZ#iO&t#gO~Op/dOw/dO~O}&cOq!|i|!|i!P!|i~O|!}a~P!?hOW$oO!P/fO~OW$oOq/gO!P&zX~OY/kO~P7uOY/mO~OY%Wq!P%Wq~P7uO&|.yO%}%Ra&P%Ra~OY/rO~Ou!oO!P/uO!Z/vO%{SO~OY/wO~O&l%iOq!gi&[!gi~Ou!oO%{SO}&mi!P&mi!m&mi~O!m,TO}&jq!P&jq~O|/yO~P]Op/{Ow%}Oz%{O%}RO&P!bO&]!yO~O!P/|O~Oq/gO!P&za~O!P0QO~OW$oOq/gO!P&{X~OY0SO~P7uOY0TO~OY%Wy!P%Wy~P7uOu!oO%{SO%}%sa&P%sa&|%sa~OY0UO~Ou!oO!P0VO!Z0WO%{SO~Op0ZO%}RO&P!bO~OW)QOZ#iO~O!P0]O~OW$oOq%pa!P%pa~Oq/gO!P&{a~O!P0_O~Ou!oO!P0_O!Z0`O%{SO~O!P0bO~O!P0cO~O!P0eO~O!P0fO~O#o&OXY&OXs&OXq&OX|&OX~P$wO#oUXYUXsUXqUX|UX~P&{O`Q_P#f&Vc~",goto:"#(V&|PPPP&}'b*q-tP'bPP.Y.^/rPPPPP1^P2vPP4`7P9j<T<m>bPPP>hP@|PPPAv2vPCoPPDjPEaEgPPPPPPPPPPPPFpGXPJ_JgJqKZKaKgMVMZMZMcPMrNx! k! uP!![NxP!!b!!l!!{!#TP!#r!#|!$SNx!$V!$]EaEa!$a!$k!$n2v!&Y2v2v!(RP.^P!(VP!(vPPPPPP.^P.^!)d.^PP.^P.^PP.^!*x!+SPP!+Y!+cPPPPPPPP&}P&}PP!+g!+g!+z!+gPP!+gP!+gP!,e!,hP!+g!-O!+gP!+gP!-R!-UP!+gP!+gP!+gP!+gP!+g!+gP!+gP!-YP!-`!-c!-iP!+g!-u!-x!.Q!.d!2a!2g!2m!3s!3y!4T!5X!5_!5e!5o!5u!5{!6R!6X!6_!6e!6k!6q!6w!6}!7T!7Z!7e!7k!7u!7{PPP!8R!+g!8vP!<XP!=]P!?n!@U!CQ2vPPP!Dn!HY!JwPP!Mb!MeP# n# t##b##q##w#$w#%a#&[#&e#&h#&tP#&w#'TP#'[#'cP#'fP#'oP#'r#'u#'x#'|#(SssObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/a'kqOWX_`bnow!X!Z!^!`!i!p!t!y!{#O#P#U#Y#]#_#f#h#i#m#n#o#p#q#r#s#v#w#x#y#{$R$Y$Z$[$]$^$_$l$p${$|%R%S%X%Y%b%c%f%g%i%k%p&]&b&c&d&e&j&m&n&r&s&u'Q'R'T'Y'Z'e't'}(W(X(h(l(o)T)W)X)Z)`)b)h)s)t)w)|*]*_*a*b*e*h*k*l*q*v+]+o+q+t+w+z+{,O,Q,T,X,^,`,c,t,v-P-T-X-`-f-w.Q.S.T.V.W.d.p.s.v.x/P/S/Y/_/a/p/t/v/w0W0Y0`0j#rgO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`t!dS!P!R!S!l!n$X$v*U*V*W*X,m,o.l.m/g0gQ#^cS%`#P.SQ%s#`U%x#e$T/bQ&P#gW'g$l*l-T.xU'q$o&{*ZQ'r$pS(^%Y/_U(}%z+i/zQ)S&QQ+[(lQ+g)QQ-c*yR-m+]u!dS!P!R!S!l!n$X$v*U*V*W*X,m,o.l.m/g0gT$q!c(T#upO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`#tkO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`X'h$l*l-T.x#}UO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$l$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*l*v,Q,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`#}jO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$l$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*l*v,Q,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`%tZOW_bdnow}!X!Z!^!`!y#O#R#U#]#f#h#i#m#n#o#p#q#r#s#v#w#x#{$S$Y$Z$[$]$^$_$l$p$|%R%c%i%k%p%{&c&d&e&m&n&r'Q'S'T'Y'Z'i't'}(W(X(h(m(o)T)W)a)b)h)t)u)w)|*]*a*b*e*h*l*v+o+{,O,Q,T,X,`,t,v-P-T-`-f.T.V.W.d.p.s.v.x/P/a/v0W0`0jQ%W!{Q([%XV-V*q-Z.y%tZOW_bdnow}!X!Z!^!`!y#O#R#U#]#f#h#i#m#n#o#p#q#r#s#v#w#x#{$S$Y$Z$[$]$^$_$l$p$|%R%c%i%k%p%{&c&d&e&m&n&r'Q'S'T'Y'Z'i't'}(W(X(h(m(o)T)W)a)b)h)t)u)w)|*]*a*b*e*h*l*v+o+{,O,Q,T,X,`,t,v-P-T-`-f.T.V.W.d.p.s.v.x/P/a/v0W0`0jV-V*q-Z.y%t[OW_bdnow}!X!Z!^!`!y#O#R#U#]#f#h#i#m#n#o#p#q#r#s#v#w#x#{$S$Y$Z$[$]$^$_$l$p$|%R%c%i%k%p%{&c&d&e&m&n&r'Q'S'T'Y'Z'i't'}(W(X(h(m(o)T)W)a)b)h)t)u)w)|*]*a*b*e*h*l*v+o+{,O,Q,T,X,`,t,v-P-T-`-f.T.V.W.d.p.s.v.x/P/a/v0W0`0jV-W*q-Z.yS!zZ-VS$S}%{S%z#e$TQ&Q#gQ+i)QQ.[,QR/z/b$eYO_bnow!X!Z!^!`!y#]#f#h#i#m#n#o#p#q#r#s#v#w#{$Y$Z$[$]$^$_$l$p$|%i%k&d&e&n&r'T'Y'Z't'}(W(X(h)T)W)|*]*a*b*e*h*l*v+o,Q,T,X,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`Q%U!yR+R(X%u^OW_bdnow!X!Z!^!`!y#O#R#U#]#f#h#i#m#n#o#p#q#r#s#v#w#x#{$Y$Z$[$]$^$_$l$p$|%R%c%i%k%p&c&d&e&m&n&r'Q'S'T'Y'Z'i't'}(W(X(h(m(o)T)W)a)b)h)t)u)w)|*]*a*b*e*h*l*q*v+o+{,O,Q,T,X,`,t,v-P-T-Z-`-f.T.V.W.d.p.s.v.x.y/P/a/v0W0`0j!o!qX!i!r!t#P#_#y$t${%S%Y%b%f&]'R'e(l)X)`)s*_*k+]+t+w+z,c-X-w.Q.S/S/Y/_/p/t/w0Y#|jO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$l$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*l*v,Q,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`Q$Z!TQ$[!UQ$a!YQ$j!_R*i']Q#jhS&v$R)PQ(|%yQ*Q&wQ+f)OQ,[)oQ-q+hQ.a,]Q/W-rS/c.Y.ZQ/}/dQ0[/{R0a0ZQ&f$OW(s%t&g&h&iQ*P&vU+`(t(u(vQ,Z)oQ,h*QS-n+a+bS.`,[,]Q/V-oR/e.aX)f&c)h,`.drdObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aW#R_#U%c,OQ'S$]W'i$l*l-T.xS(m%p(oW)a&c)h,`.dS)p&j,^S)u&m)wR-Z*qh!vX!V#_#d'R(l)`)s*_+]+w,cQ(R$}Q(_%^R+V(b#rmObnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`v!tX!V#P#_#d$}%^%b%f'R'e(b(l*_*k+]-Y.S.|Q#W_Q$OzQ$P{Q$Q|Q%t#aQ%u#bQ%v#cQ(j%lS)Y&b+qY)d&c)a)h,`.dS)o&j,^Q+p)ZW+t)`)s+w,cQ+|)bQ,])pT.O+z.QU(P$|'}-fR*O&uW)f&c)h,`.dT)v&m)wQ&i$OQ&q$QQ(v%tQ({%vY)b&c)a)h,`.dV)t&m)u)wQ)[&bR-u+qQ+n)YR-t+p#tmO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`Q,P)dS-w+t.OR.R+|T#U_,OU#S_#U,OR(c%cQ,S)eQ-y+vQ-}+yQ/].PR/x/^ruObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aQ$m!aQ&`#wQ'a$jQ'p$nW)f&c)h,`.dQ*s'nQ+})cQ,W)jQ-[*rR-{+xrsObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aS(n%p(oW)f&c)h,`.dT)v&m)wQ&h$OS(u%t&iR+b(vQ&g$OQ&l$PU(t%t&h&iQ(x%uS+a(u(vR-o+bQ)n&eR)y&nQ&p$QS(z%v&qR+e({Q&o$QU(y%v&p&qS+d(z({R-p+eS(n%p(oT)v&m)wrsObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aW)f&c)h,`.dT)v&m)wQ&k$PS(w%u&lR+c(xQ)q&jR.b,^R,b)rQ%q#^R(r%sT(n%p(oQ,R)eS-|+y,SR/[-}R.W,QWj$l*l-T.x#ukO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`#|hO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$l$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*l*v,Q,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`U%y#e$T/bS)O%z/zQ+h)QR-r+iT&t$R&u!]#ml#Q$`$h$k&O&R&S&V&W&X&Y&[&_'s(O){*`*c+k+m,g,x,}-^.o.u/l/o!V#nl#Q$`$h$k&O&R&S&W&[&_'s(O){*`*c+k+m,g,x,}-^.o.u/l/o#umO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,Q,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`a'u$p't*v-`/P/v0W0`Q'w$pR-d*yQ&y$UQ'y$uR*|'zT*R&x*SsuObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/artObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aQ$e![R$g!]R$^!WruObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aR'T$]R$_!WR'[$aT*d'Z*eX'k$m'l'p*tR*r'mQ-Y*qR.|-ZQ'o$mQ*p'lQ*u'pR-]*tR$n!aQ'j$lV-R*l-T.xQwOQ#]bW#|w#].V/aQ.V,QR/a.WrWObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/al!kW!p#O#Y#x%R%X%g&s'Q)Z+{.T0j!j!pX!i!t#P#_#y${%S%Y%b%f&]'R'e(l)X)`)s*_*k+]+t+w+z,c-X-w.Q.S/S/Y/_/p/t/w0YQ#O_Q#Y`#^#xno!X!^!`#f#h#i#m#n#o#p#q#r#s#w$Y$p$|%i%k&d&e&n&r'T'Y't'}(W(h)T)W)|*a*b*h*v+o,T,X,t,v-P-`-f.p.s.v/P/v0W0`S%R!y(XQ%X!{j%g#U%c%p&c&j&m(o)h)w*q,^,`.dS&s$R&uY'Q$]$l*l-T.xS)Z&b+qS+{)b)tQ.T,OR0j#vQ!fTR$r!fQ(Y%UR+S(Y^!rX#P#y&]'R'e)Xx$t!i#_%S%Y%b%f(l)`)s*_*k+]+w+z,c-X.Q.S/_/p[$z!r$t${/Y/t0YS${!t+tQ/Y-wQ/t/SR0Y/wQ)U&SR+l)UQ)h&cS,U)h.dR.d,`!laO_bw!Z#U#]#{$Z$[$]$^$_$l%c%p&c&j&m'Z(o)h)w*]*e*l*q,O,Q,^,`-T.V.W.d.x/aY!jW#O%g'Q.TT#Za!jQ-g*}R/R-gQ%O!vR(S%OQ%j#VS(g%j/XR/X-sQ+r)[R-v+rQ%d#SR(d%dQ,Y)lR._,YQ)w&mR,d)wQ,_)qR.c,_Q(o%pR+^(oQ&u$RR)}&uQ%m#WR(k%mQ-a*wR/O-aQ*z'wR-e*zQ*S&xR,i*SQ,m*UR.i,mQ/h.jS0P/h0RR0R/jQ*e'ZR,z*eQ'l$mS*o'l*tR*t'pQ.z-XR/q.zQ*m'jR-U*m`vObw#],Q.V.W/aQ$b!ZQ&a#{Q'O$ZQ'P$[Q'V$^Q'W$_S*d'Z*eR,s*]'YrOWX_`bnow!X!Z!^!`!i!p!t!y!{#O#P#U#Y#]#_#f#h#i#m#n#o#p#q#r#s#v#w#x#y#{$R$Y$Z$[$]$^$_$l${$|%R%S%X%Y%b%c%f%g%i%k%p&]&b&c&d&e&j&m&n&r&s&u'Q'R'T'Y'Z'e'}(W(X(h(l(o)T)W)X)Z)`)b)h)s)t)w)|*]*_*a*b*e*h*k*l*q+]+o+q+t+w+z+{,O,Q,T,X,^,`,c,t,v-P-T-X-f-w.Q.S.T.V.W.d.p.s.v.x/S/Y/_/a/p/t/w0Y0ja'v$p't*v-`/P/v0W0`Q!cSQ$U!PQ$V!RQ$W!SQ$u!lQ$w!nQ&}$XQ'z$vQ(T0gS,k*U*WQ,o*VQ,p*XQ.h,mS.j,o.lQ/j.mR0O/g%oROS_bcnow!P!R!S!X!Z!^!`!l!n#P#]#`#e#f#g#h#i#m#n#o#p#q#r#s#w#{$T$X$Y$Z$[$]$^$_$l$o$p$v$|%Y%k%z&Q&r&{'T'Y'Z't'}(h(l)Q)T)W)|*U*V*W*X*Z*]*a*b*e*h*l*v*y+]+i,Q,m,o,t,v-P-T-`-f.S.V.W.l.m.p.s.v.x/P/_/a/b/g/v/z0W0`0gQ'x$pQ*w'tS-_*v/PQ.}-`Q0X/vQ0^0WR0d0`rlObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aS#Q_$YQ#tnQ#zoQ$`!XQ$h!^Q$k!`Q&O#fQ&R#hY&S#i$]*a,v.sQ&U#mQ&V#nQ&W#oQ&X#pQ&Y#qQ&Z#rQ&[#sQ&_#w^'s$p't-`/P/v0W0`U(O$|'}-fQ(i%kQ){&rQ*`'TQ*c'YQ+W(hQ+k)TQ+m)WQ,g)|Q,x*bQ,}*hQ-^*vQ.o,tQ.u-PQ/l.pR/o.v#rfO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*v,t,v-P-`-f.V.W.p.s.v/P/a/v0W0`W'f$l*l-T.xR.X,QrXObw!Z#]#{$Z$[$^$_'Z*]*e,Q.V.W/aW!iW#x%R'QQ#P_Q#_d!|#yno!X!^!`#f#h#i#m#n#o#p#q#r#s#w$Y$p$|%k&r'T'Y't'}(h)T)W)|*a*b*h*v,t,v-P-`-f.p.s.v/P/v0W0`d%S!y%i&d&e&n(W(X+o,T,XQ%Y#OQ%b#RS%f#U%cQ&]#vQ'R$]W'e$l*l-T.xS(l%p(oQ)X0jW)`&c)h,`.dS)s&m)wQ*_'SQ*k'iQ+](mQ+w)aS+z)b)tQ,c)uS-X*q-ZQ.Q+{Q.S,OQ/_.TR/p.y%t^OW_bdnow!X!Z!^!`!y#O#R#U#]#f#h#i#m#n#o#p#q#r#s#v#w#x#{$Y$Z$[$]$^$_$l$p$|%R%c%i%k%p&c&d&e&m&n&r'Q'S'T'Y'Z'i't'}(W(X(h(m(o)T)W)a)b)h)t)u)w)|*]*a*b*e*h*l*q*v+o+{,O,Q,T,X,`,t,v-P-T-Z-`-f.T.V.W.d.p.s.v.x.y/P/a/v0W0`0jQ$R}Q&w$SR)P%{&PVOW_bdnow}!X!Z!^!`!y!{#O#R#U#]#f#h#i#m#n#o#p#q#r#s#v#w#x#{$S$Y$Z$[$]$^$_$l$p$|%R%X%c%i%k%p%{&c&d&e&m&n&r'Q'S'T'Y'Z'i't'}(W(X(h(m(o)T)W)a)b)h)t)u)w)|*]*a*b*e*h*l*q*v+o+{,O,Q,T,X,`,t,v-P-T-Z-`-f.T.V.W.d.p.s.v.x.y/P/a/v0W0`0jR%V!y#ziObnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$l$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*l*v,Q,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`Q#V_Q%U!yQ&^#vQ(f%iQ)k&dU)l&e&n,TQ+Q(WQ+R(XQ-s+oR.^,XQ(V%TR+P(U#|eO_bnow!X!Z!^!`#]#f#h#i#m#n#o#p#q#r#s#w#{$Y$Z$[$]$^$_$l$p$|%k&r'T'Y'Z't'}(h)T)W)|*]*a*b*e*h*l*v,Q,t,v-P-T-`-f.V.W.p.s.v.x/P/a/v0W0`T%w#e/bQ&T#iQ'U$]Q,w*aQ.q,vR/n.sX)g&c)h,`.d!{`OW_abw!Z!j#O#U#]#{$Z$[$]$^$_$l%c%g%p&c&j&m'Q'Z(o)h)w*]*e*l*q,O,Q,^,`-T.T.V.W.d.x/aU!wX!V'RU%r#_#d*_S+Z(l)sQ+u)`S-l+],cR-z+wj!uX!V#_#d$}%^(b(l)`)s+]+w,cU%]#P%f.SQ(a%bQ*^'RQ*j'eQ,u*_Q-Q*kQ.{-YR/s.|Q(Q$|Q*}'}R/Q-fR+O'}[)c&c&m)h)w,`.dT+x)a)uR)]&bW+v)`)s+w,cQ.P+zR/^.QS#T_,OR%h#US)m&e&nR.],TR)r&jW)e&c)h,`.dR+y)aR#X_R*x'tR'x$pT,l*U,mQ.k,oR/i.lR/i.m",nodeNames:"\u26a0 LineComment BlockComment Program ModuleDeclaration MarkerAnnotation Identifier ScopedIdentifier . Annotation ) ( AnnotationArgumentList AssignmentExpression FieldAccess IntegerLiteral FloatingPointLiteral BooleanLiteral CharacterLiteral StringLiteral TextBlock null ClassLiteral void PrimitiveType TypeName ScopedTypeName GenericType TypeArguments AnnotatedType Wildcard extends super , ArrayType ] Dimension [ class this ParenthesizedExpression ObjectCreationExpression new ArgumentList } { ClassBody ; FieldDeclaration Modifiers public protected private abstract static final strictfp default synchronized native transient volatile VariableDeclarator Definition AssignOp ArrayInitializer MethodDeclaration TypeParameters TypeParameter TypeBound FormalParameters ReceiverParameter FormalParameter SpreadParameter Throws throws Block ClassDeclaration Superclass SuperInterfaces implements InterfaceTypeList InterfaceDeclaration interface ExtendsInterfaces InterfaceBody ConstantDeclaration EnumDeclaration enum EnumBody EnumConstant EnumBodyDeclarations AnnotationTypeDeclaration AnnotationTypeBody AnnotationTypeElementDeclaration StaticInitializer ConstructorDeclaration ConstructorBody ExplicitConstructorInvocation ArrayAccess MethodInvocation MethodName MethodReference ArrayCreationExpression Dimension AssignOp BinaryExpression CompareOp CompareOp LogicOp BitOp BitOp LogicOp ArithOp ArithOp ArithOp BitOp InstanceofExpression instanceof LambdaExpression InferredParameters TernaryExpression LogicOp : UpdateExpression UpdateOp UnaryExpression LogicOp BitOp CastExpression ElementValueArrayInitializer ElementValuePair open module ModuleBody ModuleDirective requires transitive exports to opens uses provides with PackageDeclaration package ImportDeclaration import Asterisk ExpressionStatement LabeledStatement Label IfStatement if else WhileStatement while ForStatement for ForSpec LocalVariableDeclaration var EnhancedForStatement ForSpec AssertStatement assert SwitchStatement switch SwitchBlock SwitchLabel case DoStatement do BreakStatement break ContinueStatement continue ReturnStatement return SynchronizedStatement ThrowStatement throw TryStatement try CatchClause catch CatchFormalParameter CatchType FinallyClause finally TryWithResourcesStatement ResourceSpecification Resource",maxTerm:274,nodeProps:[["group",-26,4,47,76,77,82,87,92,144,146,149,150,152,155,157,160,162,164,166,171,173,175,177,179,180,182,190,"Statement",-25,6,13,14,15,16,17,18,19,20,21,22,39,40,41,99,100,102,103,106,117,119,121,124,126,129,"Expression",-7,23,24,25,26,27,29,34,"Type"],["openedBy",10,"(",44,"{"],["closedBy",11,")",45,"}"]],propSources:[Ng],skippedNodes:[0,1,2],repeatNodeCount:28,tokenData:"#$`_R!_OX%QXY'fYZ)bZ^'f^p%Qpq'fqr*|rs,^st%Qtu4euv5qvw7Rwx8ixy@zyzAhz{BU{|Bz|}Db}!OEO!O!PFi!P!Q! c!Q!R!,X!R![!0P![!]!>a!]!^!?q!^!_!@_!_!`!Ax!`!a!Bl!a!b!DY!b!c!Dx!c!}!Kt!}#O!MQ#O#P%Q#P#Q!Mn#Q#R!N[#R#S4e#S#T%Q#T#o4e#o#p# O#p#q# l#q#r##U#r#s##r#s#y%Q#y#z'f#z$f%Q$f$g'f$g#BY%Q#BY#BZ'f#BZ$IS%Q$IS$I_'f$I_$I|%Q$I|$JO'f$JO$JT%Q$JT$JU'f$JU$KV%Q$KV$KW'f$KW&FU%Q&FU&FV'f&FV;'S%Q;'S;=`&s<%lO%QS%VV&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QS%qO&WSS%tVOY&ZYZ%lZr&Zrs&ys;'S&Z;'S;=`'`<%lO&ZS&^VOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QS&vP;=`<%l%QS&|UOY&ZYZ%lZr&Zs;'S&Z;'S;=`'`<%lO&ZS'cP;=`<%l&Z_'mk&WS%wZOX%QXY'fYZ)bZ^'f^p%Qpq'fqr%Qrs%qs#y%Q#y#z'f#z$f%Q$f$g'f$g#BY%Q#BY#BZ'f#BZ$IS%Q$IS$I_'f$I_$I|%Q$I|$JO'f$JO$JT%Q$JT$JU'f$JU$KV%Q$KV$KW'f$KW&FU%Q&FU&FV'f&FV;'S%Q;'S;=`&s<%lO%Q_)iY&WS%wZX^*Xpq*X#y#z*X$f$g*X#BY#BZ*X$IS$I_*X$I|$JO*X$JT$JU*X$KV$KW*X&FU&FV*XZ*^Y%wZX^*Xpq*X#y#z*X$f$g*X#BY#BZ*X$IS$I_*X$I|$JO*X$JT$JU*X$KV$KW*X&FU&FV*XV+TX#sP&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`+p!`;'S%Q;'S;=`&s<%lO%QU+wV#_Q&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT,aXOY,|YZ%lZr,|rs3Ys#O,|#O#P2d#P;'S,|;'S;=`3S<%lO,|T-PXOY-lYZ%lZr-lrs.^s#O-l#O#P.x#P;'S-l;'S;=`2|<%lO-lT-qX&WSOY-lYZ%lZr-lrs.^s#O-l#O#P.x#P;'S-l;'S;=`2|<%lO-lT.cVcPOY&ZYZ%lZr&Zrs&ys;'S&Z;'S;=`'`<%lO&ZT.}V&WSOY-lYZ/dZr-lrs1]s;'S-l;'S;=`2|<%lO-lT/iW&WSOY0RZr0Rrs0ns#O0R#O#P0s#P;'S0R;'S;=`1V<%lO0RP0UWOY0RZr0Rrs0ns#O0R#O#P0s#P;'S0R;'S;=`1V<%lO0RP0sOcPP0vTOY0RYZ0RZ;'S0R;'S;=`1V<%lO0RP1YP;=`<%l0RT1`XOY,|YZ%lZr,|rs1{s#O,|#O#P2d#P;'S,|;'S;=`3S<%lO,|T2QUcPOY&ZYZ%lZr&Zs;'S&Z;'S;=`'`<%lO&ZT2gVOY-lYZ/dZr-lrs1]s;'S-l;'S;=`2|<%lO-lT3PP;=`<%l-lT3VP;=`<%l,|T3_VcPOY&ZYZ%lZr&Zrs3ts;'S&Z;'S;=`'`<%lO&ZT3yR&USXY4SYZ4`pq4SP4VRXY4SYZ4`pq4SP4eO&VP_4la%}Z&WSOY%QYZ%lZr%Qrs%qst%Qtu4eu!Q%Q!Q![4e![!c%Q!c!}4e!}#R%Q#R#S4e#S#T%Q#T#o4e#o;'S%Q;'S;=`&s<%lO%QU5xX#gQ&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QU6lV#]Q&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QV7YZ&lR&WSOY%QYZ%lZr%Qrs%qsv%Qvw7{w!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QU8SV#aQ&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT8nZ&WSOY9aYZ%lZr9ars:Xsw9awx%Qx#O9a#O#P<a#P;'S9a;'S;=`>t<%lO9aT9fZ&WSOY9aYZ%lZr9ars:Xsw9awx;sx#O9a#O#P<a#P;'S9a;'S;=`>t<%lO9aT:[ZOY:}YZ%lZr:}rs>zsw:}wx?px#O:}#O#P@[#P;'S:};'S;=`@t<%lO:}T;QZOY9aYZ%lZr9ars:Xsw9awx;sx#O9a#O#P<a#P;'S9a;'S;=`>t<%lO9aT;zVbP&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT<fV&WSOY9aYZ<{Zr9ars:Xs;'S9a;'S;=`>t<%lO9aT=QW&WSOY=jZw=jwx>Vx#O=j#O#P>[#P;'S=j;'S;=`>n<%lO=jP=mWOY=jZw=jwx>Vx#O=j#O#P>[#P;'S=j;'S;=`>n<%lO=jP>[ObPP>_TOY=jYZ=jZ;'S=j;'S;=`>n<%lO=jP>qP;=`<%l=jT>wP;=`<%l9aT>}ZOY:}YZ%lZr:}rs=jsw:}wx?px#O:}#O#P@[#P;'S:};'S;=`@t<%lO:}T?uVbPOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT@_VOY9aYZ<{Zr9ars:Xs;'S9a;'S;=`>t<%lO9aT@wP;=`<%l:}_ARVZZ&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QVAoVYR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QVB_X$YP&WS#fQOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QVCRZ#eR&WSOY%QYZ%lZr%Qrs%qs{%Q{|Ct|!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QVC{V#qR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QVDiVqR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QVEV[#eR&WSOY%QYZ%lZr%Qrs%qs}%Q}!OCt!O!_%Q!_!`6e!`!aE{!a;'S%Q;'S;=`&s<%lO%QVFSV&vR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_FpZWY&WSOY%QYZ%lZr%Qrs%qs!O%Q!O!PGc!P!Q%Q!Q![Hq![;'S%Q;'S;=`&s<%lO%QVGhX&WSOY%QYZ%lZr%Qrs%qs!O%Q!O!PHT!P;'S%Q;'S;=`&s<%lO%QVH[V&oR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QTHxc&WS`POY%QYZ%lZr%Qrs%qs!Q%Q!Q![Hq![!f%Q!f!gJT!g!hJq!h!iJT!i#R%Q#R#SNk#S#W%Q#W#XJT#X#YJq#Y#ZJT#Z;'S%Q;'S;=`&s<%lO%QTJ[V&WS`POY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QTJv]&WSOY%QYZ%lZr%Qrs%qs{%Q{|Ko|}%Q}!OKo!O!Q%Q!Q![La![;'S%Q;'S;=`&s<%lO%QTKtX&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![La![;'S%Q;'S;=`&s<%lO%QTLhc&WS`POY%QYZ%lZr%Qrs%qs!Q%Q!Q![La![!f%Q!f!gJT!g!h%Q!h!iJT!i#R%Q#R#SMs#S#W%Q#W#XJT#X#Y%Q#Y#ZJT#Z;'S%Q;'S;=`&s<%lO%QTMxZ&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![La![#R%Q#R#SMs#S;'S%Q;'S;=`&s<%lO%QTNpZ&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![Hq![#R%Q#R#SNk#S;'S%Q;'S;=`&s<%lO%Q_! j]&WS#fQOY%QYZ%lZr%Qrs%qsz%Qz{!!c{!P%Q!P!Q!)U!Q!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%Q_!!hX&WSOY!!cYZ!#TZr!!crs!$psz!!cz{!&O{;'S!!c;'S;=`!'d<%lO!!c_!#YT&WSOz!#iz{!#{{;'S!#i;'S;=`!$j<%lO!#iZ!#lTOz!#iz{!#{{;'S!#i;'S;=`!$j<%lO!#iZ!$OVOz!#iz{!#{{!P!#i!P!Q!$e!Q;'S!#i;'S;=`!$j<%lO!#iZ!$jOQZZ!$mP;=`<%l!#i_!$sXOY!%`YZ!#TZr!%`rs!'jsz!%`z{!(Y{;'S!%`;'S;=`!)O<%lO!%`_!%cXOY!!cYZ!#TZr!!crs!$psz!!cz{!&O{;'S!!c;'S;=`!'d<%lO!!c_!&TZ&WSOY!!cYZ!#TZr!!crs!$psz!!cz{!&O{!P!!c!P!Q!&v!Q;'S!!c;'S;=`!'d<%lO!!c_!&}V&WSQZOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_!'gP;=`<%l!!c_!'mXOY!%`YZ!#TZr!%`rs!#isz!%`z{!(Y{;'S!%`;'S;=`!)O<%lO!%`_!(]ZOY!!cYZ!#TZr!!crs!$psz!!cz{!&O{!P!!c!P!Q!&v!Q;'S!!c;'S;=`!'d<%lO!!c_!)RP;=`<%l!%`_!)]V&WSPZOY!)UYZ%lZr!)Urs!)rs;'S!)U;'S;=`!*x<%lO!)U_!)wVPZOY!*^YZ%lZr!*^rs!+Os;'S!*^;'S;=`!,R<%lO!*^_!*cVPZOY!)UYZ%lZr!)Urs!)rs;'S!)U;'S;=`!*x<%lO!)U_!*{P;=`<%l!)U_!+TVPZOY!*^YZ%lZr!*^rs!+js;'S!*^;'S;=`!,R<%lO!*^Z!+oSPZOY!+jZ;'S!+j;'S;=`!+{<%lO!+jZ!,OP;=`<%l!+j_!,UP;=`<%l!*^T!,`u&WS_POY%QYZ%lZr%Qrs%qs!O%Q!O!P!.s!P!Q%Q!Q![!0P![!d%Q!d!e!3Z!e!f%Q!f!gJT!g!hJq!h!iJT!i!n%Q!n!o!1u!o!q%Q!q!r!5X!r!z%Q!z!{!7P!{#R%Q#R#S!2c#S#U%Q#U#V!3Z#V#W%Q#W#XJT#X#YJq#Y#ZJT#Z#`%Q#`#a!1u#a#c%Q#c#d!5X#d#l%Q#l#m!7P#m;'S%Q;'S;=`&s<%lO%QT!.za&WS`POY%QYZ%lZr%Qrs%qs!Q%Q!Q![Hq![!f%Q!f!gJT!g!hJq!h!iJT!i#W%Q#W#XJT#X#YJq#Y#ZJT#Z;'S%Q;'S;=`&s<%lO%QT!0Wi&WS_POY%QYZ%lZr%Qrs%qs!O%Q!O!P!.s!P!Q%Q!Q![!0P![!f%Q!f!gJT!g!hJq!h!iJT!i!n%Q!n!o!1u!o#R%Q#R#S!2c#S#W%Q#W#XJT#X#YJq#Y#ZJT#Z#`%Q#`#a!1u#a;'S%Q;'S;=`&s<%lO%QT!1|V&WS_POY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT!2hZ&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!0P![#R%Q#R#S!2c#S;'S%Q;'S;=`&s<%lO%QT!3`Y&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q!R!4O!R!S!4O!S;'S%Q;'S;=`&s<%lO%QT!4V`&WS_POY%QYZ%lZr%Qrs%qs!Q%Q!Q!R!4O!R!S!4O!S!n%Q!n!o!1u!o#R%Q#R#S!3Z#S#`%Q#`#a!1u#a;'S%Q;'S;=`&s<%lO%QT!5^X&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q!Y!5y!Y;'S%Q;'S;=`&s<%lO%QT!6Q_&WS_POY%QYZ%lZr%Qrs%qs!Q%Q!Q!Y!5y!Y!n%Q!n!o!1u!o#R%Q#R#S!5X#S#`%Q#`#a!1u#a;'S%Q;'S;=`&s<%lO%QT!7U_&WSOY%QYZ%lZr%Qrs%qs!O%Q!O!P!8T!P!Q%Q!Q![!:c![!c%Q!c!i!:c!i#T%Q#T#Z!:c#Z;'S%Q;'S;=`&s<%lO%QT!8Y]&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!9R![!c%Q!c!i!9R!i#T%Q#T#Z!9R#Z;'S%Q;'S;=`&s<%lO%QT!9Wc&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!9R![!c%Q!c!i!9R!i!r%Q!r!sJq!s#R%Q#R#S!8T#S#T%Q#T#Z!9R#Z#d%Q#d#eJq#e;'S%Q;'S;=`&s<%lO%QT!:ji&WS_POY%QYZ%lZr%Qrs%qs!O%Q!O!P!<X!P!Q%Q!Q![!:c![!c%Q!c!i!:c!i!n%Q!n!o!1u!o!r%Q!r!sJq!s#R%Q#R#S!=c#S#T%Q#T#Z!:c#Z#`%Q#`#a!1u#a#d%Q#d#eJq#e;'S%Q;'S;=`&s<%lO%QT!<^a&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!9R![!c%Q!c!i!9R!i!r%Q!r!sJq!s#T%Q#T#Z!9R#Z#d%Q#d#eJq#e;'S%Q;'S;=`&s<%lO%QT!=h]&WSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!:c![!c%Q!c!i!:c!i#T%Q#T#Z!:c#Z;'S%Q;'S;=`&s<%lO%QV!>hX#oR&WSOY%QYZ%lZr%Qrs%qs![%Q![!]!?T!];'S%Q;'S;=`&s<%lO%QV!?[V&tR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QV!?xV!PR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_!@fY&]Z&WSOY%QYZ%lZr%Qrs%qs!^%Q!^!_!AU!_!`+p!`;'S%Q;'S;=`&s<%lO%QU!A]X#hQ&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QV!BPX!bR&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`+p!`;'S%Q;'S;=`&s<%lO%QV!BsY&[R&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`+p!`!a!Cc!a;'S%Q;'S;=`&s<%lO%QU!CjY#hQ&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`!a!AU!a;'S%Q;'S;=`&s<%lO%Q_!DcV&`X#nQ&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_!EPX%{Z&WSOY%QYZ%lZr%Qrs%qs#]%Q#]#^!El#^;'S%Q;'S;=`&s<%lO%QV!EqX&WSOY%QYZ%lZr%Qrs%qs#b%Q#b#c!F^#c;'S%Q;'S;=`&s<%lO%QV!FcX&WSOY%QYZ%lZr%Qrs%qs#h%Q#h#i!GO#i;'S%Q;'S;=`&s<%lO%QV!GTX&WSOY%QYZ%lZr%Qrs%qs#X%Q#X#Y!Gp#Y;'S%Q;'S;=`&s<%lO%QV!GuX&WSOY%QYZ%lZr%Qrs%qs#f%Q#f#g!Hb#g;'S%Q;'S;=`&s<%lO%QV!HgX&WSOY%QYZ%lZr%Qrs%qs#Y%Q#Y#Z!IS#Z;'S%Q;'S;=`&s<%lO%QV!IXX&WSOY%QYZ%lZr%Qrs%qs#T%Q#T#U!It#U;'S%Q;'S;=`&s<%lO%QV!IyX&WSOY%QYZ%lZr%Qrs%qs#V%Q#V#W!Jf#W;'S%Q;'S;=`&s<%lO%QV!JkX&WSOY%QYZ%lZr%Qrs%qs#X%Q#X#Y!KW#Y;'S%Q;'S;=`&s<%lO%QV!K_V&rR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_!K{a&PZ&WSOY%QYZ%lZr%Qrs%qst%Qtu!Ktu!Q%Q!Q![!Kt![!c%Q!c!}!Kt!}#R%Q#R#S!Kt#S#T%Q#T#o!Kt#o;'S%Q;'S;=`&s<%lO%Q_!MXVuZ&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QV!MuVsR&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QU!NcX#cQ&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QV# VV}R&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_# uZ&|X#cQ&WSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`#p%Q#p#q#!h#q;'S%Q;'S;=`&s<%lO%QU#!oV#dQ&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QV##]V|R&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT##yV#tP&WSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q",tokenizers:[0,1,2,3],topRules:{Program:[0,3]},dynamicPrecedences:{27:1,230:-1,241:-1},specialized:[{term:229,get:e=>Fg[e]||-1}],tokenPrec:7067}),Eg=hd.define({name:"java",parser:Lg.configure({props:[Md.add({IfStatement:jd({except:/^\s*({|else\b)/}),TryStatement:jd({except:/^\s*({|catch|finally)\b/}),LabeledStatement:e=>e.baseIndent,SwitchBlock:e=>{let t=e.textAfter,i=/^\s*\}/.test(t),o=/^\s*(case|default)\b/.test(t);return e.baseIndent+(i?0:o?1:2)*e.unit},Block:Ld({closing:"}"}),BlockComment:()=>null,Statement:jd({except:/^{/})}),Rd.add({"Block SwitchBlock ClassBody ElementValueArrayInitializer ModuleBody EnumBody ConstructorBody InterfaceBody ArrayInitializer":function(e){let t=e.firstChild,i=e.lastChild;return t&&t.to<i.from?{from:t.to,to:i.type.isError?e.to:i.from}:null},BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\})$/}});function jg(){return new Dd(Eg)}var Zg;const Rg=Sl(((e,t,i)=>{let{from:o,to:a,text:s}=e.state.doc.lineAt(t),n=t,r=t;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===t&&i<0||r===t&&i>0)return null;let l=Qg(e.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(e){let t=document.createElement("div");t.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",t.appendChild(i),t.appendChild(o)),t.appendChild(a),{dom:t}}}:void 0})),Qg=e=>{for(let t=0;t<Zg.length;t++){let i=Zg[t];if(i.value===e||i.value===e+"()")return i}};class zg extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.getListMethodChild=(e,t)=>{let i=[];for(let o=0;o<e.length;o++){let a={title:e[o].caption,value:e[o].code_id,selected:"AF"!==t||0===o,data:[]};"AF"===t&&0===o&&this.setState({module_code:e[o].code_id});for(let t=0;t<this.evaluation.length;t++)this.evaluation[t].type===e[o].code_id&&a.data.push(this.evaluation[t]);i.push(a)}return i},this.handleChooseMethod=e=>{let t=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=e.method;this.setState({value_code:i+a+o,last_pos:t+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:t+(-1!==a.indexOf("()")?a.length-1:a.length),head:t+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),1)}))},this.abs_OpenMethodSystem=e=>{let{all_method_data:t}=this.state;for(let i=0;i<t.support_method.length;i++)t.support_method[i].selected=t.support_method[i].value===e.value;this.setState({all_method_data:t})},this.abs_OpenMethod=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)if(i[e][o].value===t.value){i[e][o].selected=!i[e][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)i[e][o].selected=i[e][o].value===t;this.setState({all_method_data:i,module_code:t})},this.abs_Change=e=>{this.setState({data_code:e})},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,i),(0,N.Yr)(a,{}).then((e=>s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1})}))},this.onChange=e=>{this.setState({value_code:e})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluation",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(Zg=e.items.map(((e,t)=>({title:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],value:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],caption:e.caption,example:e.example,method:e.item,type:e.type}))),this.evaluation=JSON.parse(JSON.stringify(Zg)),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async e=>{if(e.hasError)s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1);else{this.all_method_data.support_method=e.items.map(((e,t)=>({title:e.caption,value:e.code_id,selected:"AF"===e.code_id,mode:"AF"===e.code_id})));for(let t=0;t<e.items.length;t++)await this.callAPI("get_list_method_child",{code_name:e.items[t].code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map(((e,t)=>({title:e.caption,value:e.code_id})));this.list_parent_tree=this.list_parent_tree.concat(o),this.all_method_data[e.items[t].code_id]=this.getListMethodChild(i.items,e.items[t].code_id)}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}));this.setState({all_method_data:this.all_method_data,list_parent_tree:this.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1)}))}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),e.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{let e;switch(this.state.module_code){case"DE":e="DPT";break;case"CE":e="CRD"}await this.callAPI("test_method",{module_code:e,expression:this.state.value_code,number_of_step:1}).then((e=>{if(e.hasError)s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);t.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),t.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}}}})}render(){const e=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(e,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:"dark",extensions:[jg(),Rg],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const Ug=zg;var Bg;const Yg=Sl(((e,t,i)=>{let{from:o,to:a,text:s}=e.state.doc.lineAt(t),n=t,r=t;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===t&&i<0||r===t&&i>0)return null;let l=Hg(e.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(e){let t=document.createElement("div");t.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",t.appendChild(i),t.appendChild(o)),t.appendChild(a),{dom:t}}}:void 0})),Hg=e=>{for(let t=0;t<Bg.length;t++){let i=Bg[t];if(i.value===e||i.value===e+"()")return i}};class Vg extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callGetListMetodChild=async e=>{let t={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(e.map((async e=>{await this.callAPI("get_list_method_child",{code_index_from:"AF"===e.code_id?1:null,code_index_to:"AF"===e.code_id?1:null,code_name:e.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((e=>({title:e.caption,value:e.code_id})));t.list_parent_tree=t.list_parent_tree.concat(o),t.all_method_data[e.code_id]=this.getListMethodChild(i.items,e.code_id)}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}))),new Promise((e=>{e(t)}))},this.getListMethodChild=(e,t)=>{let i=[];for(let o=0;o<e.length;o++){let a={title:e[o].caption,value:e[o].code_id,selected:"AF"!==t||0===o,data:[]};"AF"===t&&0===o&&this.setState({module_code:e[o].code_id});for(let t=0;t<this.evaluation.length;t++)this.evaluation[t].type===e[o].code_id&&a.data.push(this.evaluation[t]);i.push(a)}return i},this.handleChooseMethod=e=>{let t=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=e.method;this.setState({value_code:i+a+o,last_pos:t+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:t+(-1!==a.indexOf("()")?a.length-1:a.length),head:t+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=e=>{let{all_method_data:t}=this.state;for(let i=0;i<t.support_method.length;i++)t.support_method[i].selected=t.support_method[i].value===e.value;this.setState({all_method_data:t})},this.abs_OpenMethod=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)if(i[e][o].value===t.value){i[e][o].selected=!i[e][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)i[e][o].selected=i[e][o].value===t;this.setState({all_method_data:i,module_code:t})},this.abs_Change=e=>{this.setState({data_code:e})},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,i),(0,N.Yr)(a,{}).then((e=>s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1})}))},this.onChange=e=>{this.setState({value_code:e})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluation",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"DPT_IFC_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(Bg=e.items.map(((e,t)=>({title:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],value:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],caption:e.caption,example:e.example,method:e.item,type:e.type}))),this.evaluation=JSON.parse(JSON.stringify(Bg)))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(this.all_method_data.support_method=e.items.map(((e,t)=>({title:e.caption,value:e.code_id,selected:"AF"===e.code_id,mode:"AF"===e.code_id}))),this.callGetListMetodChild(e.items).then((e=>{this.setState({all_method_data:e.all_method_data,list_parent_tree:e.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),e.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{let e;switch(this.state.module_code){case"DE":e="DPT";break;case"CE":e="CRD"}await this.callAPI("test_method",{workflow_id:"DPT_IFC_EXPRESSION_TEST",module_code:e,expression:this.state.value_code,number_of_step:1}).then((e=>{if(e.hasError)s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);t.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),t.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}}}})}render(){const e=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(e,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:"dark",extensions:[jg(),Yg],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const Wg=Vg;var Gg;const Jg=Sl(((e,t,i)=>{let{from:o,to:a,text:s}=e.state.doc.lineAt(t),n=t,r=t;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===t&&i<0||r===t&&i>0)return null;let l=qg(e.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(e){let t=document.createElement("div");t.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",t.appendChild(i),t.appendChild(o)),t.appendChild(a),{dom:t}}}:void 0})),qg=e=>{for(let t=0;t<Gg.length;t++){let i=Gg[t];if(i.value===e||i.value===e+"()")return i}};class Kg extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callGetListMetodChild=async e=>{let t={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(e.map((async e=>{await this.callAPI("get_list_method_child",{code_index_from:"AF"===e.code_id?6:null,code_index_to:"AF"===e.code_id?6:null,code_name:e.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((e=>({title:e.caption,value:e.code_id})));t.list_parent_tree=t.list_parent_tree.concat(o),t.all_method_data[e.code_id]=this.getListMethodChild(i.items,e.code_id)}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}))),new Promise((e=>{e(t)}))},this.getListMethodChild=(e,t)=>{let i=[];for(let o=0;o<e.length;o++){let a={title:e[o].caption,value:e[o].code_id,selected:"AF"!==t||0===o,data:[]};"AF"===t&&0===o&&this.setState({module_code:e[o].code_id});for(let t=0;t<this.evaluation.length;t++)this.evaluation[t].type===e[o].code_id&&a.data.push(this.evaluation[t]);i.push(a)}return i},this.handleChooseMethod=e=>{let t=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=e.method;this.setState({value_code:i+a+o,last_pos:t+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:t+(-1!==a.indexOf("()")?a.length-1:a.length),head:t+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=e=>{let{all_method_data:t}=this.state;for(let i=0;i<t.support_method.length;i++)t.support_method[i].selected=t.support_method[i].value===e.value;this.setState({all_method_data:t})},this.abs_OpenMethod=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)if(i[e][o].value===t.value){i[e][o].selected=!i[e][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)i[e][o].selected=i[e][o].value===t;this.setState({all_method_data:i,module_code:t})},this.abs_Change=e=>{this.setState({data_code:e})},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,i),(0,N.Yr)(a,{}).then((e=>s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1})}))},this.onChange=e=>{this.setState({value_code:e})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluation",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"TRD_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(Gg=e.items.map(((e,t)=>({title:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],value:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],caption:e.caption,example:e.example,method:e.item,type:e.type}))),this.evaluation=JSON.parse(JSON.stringify(Gg)))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(this.all_method_data.support_method=e.items.map(((e,t)=>({title:e.caption,value:e.code_id,selected:"AF"===e.code_id,mode:"AF"===e.code_id}))),this.callGetListMetodChild(e.items).then((e=>{this.setState({all_method_data:e.all_method_data,list_parent_tree:e.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),e.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{let e;switch(this.state.module_code){case"DE":e="DPT";break;case"CE":e="CRD"}await this.callAPI("test_method",{workflow_id:"TRD_EXPRESSION_TEST",module_code:e,expression:this.state.value_code,number_of_step:1}).then((e=>{if(e.hasError)s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);t.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),t.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}}}})}render(){const e=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(e,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:"dark",extensions:[jg(),Jg],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const Xg=Kg;var $g;const em=Sl(((e,t,i)=>{let{from:o,to:a,text:s}=e.state.doc.lineAt(t),n=t,r=t;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===t&&i<0||r===t&&i>0)return null;let l=tm(e.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(e){let t=document.createElement("div");t.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",t.appendChild(i),t.appendChild(o)),t.appendChild(a),{dom:t}}}:void 0})),tm=e=>{for(let t=0;t<$g.length;t++){let i=$g[t];if(i.value===e||i.value===e+"()")return i}};class im extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callGetListMetodChild=async e=>{let t={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(e.map((async e=>{await this.callAPI("get_list_method_child",{code_index_from:"AF"===e.code_id?2:null,code_index_to:"AF"===e.code_id?2:null,code_name:e.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((e=>({title:e.caption,value:e.code_id})));t.list_parent_tree=t.list_parent_tree.concat(o),t.all_method_data[e.code_id]=this.getListMethodChild(i.items,e.code_id)}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}))),new Promise((e=>{e(t)}))},this.getListMethodChild=(e,t)=>{let i=[];for(let o=0;o<e.length;o++){let a={title:e[o].caption,value:e[o].code_id,selected:"AF"!==t||0===o,data:[]};"AF"===t&&0===o&&this.setState({module_code:e[o].code_id});for(let t=0;t<this.evaluation.length;t++)this.evaluation[t].type===e[o].code_id&&a.data.push(this.evaluation[t]);i.push(a)}return i},this.handleChooseMethod=e=>{let t=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=e.method;this.setState({value_code:i+a+o,last_pos:t+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:t+(-1!==a.indexOf("()")?a.length-1:a.length),head:t+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=e=>{let{all_method_data:t}=this.state;for(let i=0;i<t.support_method.length;i++)t.support_method[i].selected=t.support_method[i].value===e.value;this.setState({all_method_data:t})},this.abs_OpenMethod=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)if(i[e][o].value===t.value){i[e][o].selected=!i[e][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)i[e][o].selected=i[e][o].value===t;this.setState({all_method_data:i,module_code:t})},this.abs_Change=e=>{this.setState({data_code:e})},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,i),(0,N.Yr)(a,{}).then((e=>s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1})}))},this.onChange=e=>{this.setState({value_code:e})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluation",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"CRD_IFC_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):($g=e.items.map(((e,t)=>({title:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],value:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],caption:e.caption,example:e.example,method:e.item,type:e.type}))),this.evaluation=JSON.parse(JSON.stringify($g)))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(this.all_method_data.support_method=e.items.map(((e,t)=>({title:e.caption,value:e.code_id,selected:"AF"===e.code_id,mode:"AF"===e.code_id}))),this.callGetListMetodChild(e.items).then((e=>{this.setState({all_method_data:e.all_method_data,list_parent_tree:e.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),e.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{let e;switch(this.state.module_code){case"DE":e="DPT";break;case"CE":e="CRD"}await this.callAPI("test_method",{workflow_id:"CRD_IFC_EXPRESSION_TEST",module_code:e,expression:this.state.value_code,number_of_step:1}).then((e=>{if(e.hasError)s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);t.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),t.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}}}})}render(){const e=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(e,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:"dark",extensions:[jg(),em],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const om=im;var am;const sm=Sl(((e,t,i)=>{let{from:o,to:a,text:s}=e.state.doc.lineAt(t),n=t,r=t;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===t&&i<0||r===t&&i>0)return null;let l=nm(e.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(e){let t=document.createElement("div");t.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",t.appendChild(i),t.appendChild(o)),t.appendChild(a),{dom:t}}}:void 0})),nm=e=>{for(let t=0;t<am.length;t++){let i=am[t];if(i.value===e||i.value===e+"()")return i}};class rm extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callGetListMetodChild=async e=>{let t={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(e.map((async e=>{await this.callAPI("get_list_method_child",{code_index_from:"AF"===e.code_id?5:null,code_index_to:"AF"===e.code_id?5:null,code_name:e.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((e=>({title:e.caption,value:e.code_id})));t.list_parent_tree=t.list_parent_tree.concat(o),t.all_method_data[e.code_id]=this.getListMethodChild(i.items,e.code_id)}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}))),new Promise((e=>{e(t)}))},this.getListMethodChild=(e,t)=>{let i=[];for(let o=0;o<e.length;o++){let a={title:e[o].caption,value:e[o].code_id,selected:"AF"!==t||0===o,data:[]};"AF"===t&&0===o&&this.setState({module_code:e[o].code_id});for(let t=0;t<this.evaluation.length;t++)this.evaluation[t].type===e[o].code_id&&a.data.push(this.evaluation[t]);i.push(a)}return i},this.handleChooseMethod=e=>{let t=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=e.method;this.setState({value_code:i+a+o,last_pos:t+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:t+(-1!==a.indexOf("()")?a.length-1:a.length),head:t+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=e=>{let{all_method_data:t}=this.state;for(let i=0;i<t.support_method.length;i++)t.support_method[i].selected=t.support_method[i].value===e.value;this.setState({all_method_data:t})},this.abs_OpenMethod=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)if(i[e][o].value===t.value){i[e][o].selected=!i[e][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)i[e][o].selected=i[e][o].value===t;this.setState({all_method_data:i,module_code:t})},this.abs_Change=e=>{this.setState({data_code:e})},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,i),(0,N.Yr)(a,{}).then((e=>s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1})}))},this.onChange=e=>{this.setState({value_code:e})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluation",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"PMT_IFC_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(am=e.items.map(((e,t)=>({title:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],value:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],caption:e.caption,example:e.example,method:e.item,type:e.type}))),this.evaluation=JSON.parse(JSON.stringify(am)))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(this.all_method_data.support_method=e.items.map(((e,t)=>({title:e.caption,value:e.code_id,selected:"AF"===e.code_id,mode:"AF"===e.code_id}))),this.callGetListMetodChild(e.items).then((e=>{this.setState({all_method_data:e.all_method_data,list_parent_tree:e.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),e.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{let e;switch(this.state.module_code){case"DE":e="DPT";break;case"CE":e="CRD"}await this.callAPI("test_method",{workflow_id:"PMT_IFC_EXPRESSION_TEST",module_code:e,expression:this.state.value_code,number_of_step:1}).then((e=>{if(e.hasError)s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);t.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),t.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}}}})}render(){const e=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(e,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:"dark",extensions:[jg(),sm],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const lm=rm;var cm=e=>{var{theme:t,settings:i={},styles:o=[]}=e,a={".cm-gutters":{}},s={};i.background&&(s.backgroundColor=i.background),i.foreground&&(s.color=i.foreground),(i.background||i.foreground)&&(a["&"]=s),i.fontFamily&&(a["&.cm-editor .cm-scroller"]={fontFamily:i.fontFamily}),i.gutterBackground&&(a[".cm-gutters"].backgroundColor=i.gutterBackground),i.gutterForeground&&(a[".cm-gutters"].color=i.gutterForeground),i.gutterBorder&&(a[".cm-gutters"].borderRightColor=i.gutterBorder),i.caret&&(a[".cm-content"]={caretColor:i.caret},a[".cm-cursor, .cm-dropCursor"]={borderLeftColor:i.caret});var n={};return i.gutterActiveForeground&&(n.color=i.gutterActiveForeground),i.lineHighlight&&(a[".cm-activeLine"]={backgroundColor:i.lineHighlight},n.backgroundColor=i.lineHighlight),a[".cm-activeLineGutter"]=n,i.selection&&(a["&.cm-focused .cm-selectionBackground, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={backgroundColor:i.selection}),i.selectionMatch&&(a["& .cm-selectionMatch"]={backgroundColor:i.selectionMatch}),[br.theme(a,{dark:"dark"===t}),ch(sh.define(o))]};var dm={background:"#0f0f0f",foreground:"#defdef",caret:"#00FF00",selection:"#515151",selectionMatch:"#515151",gutterBackground:"#555",gutterForeground:"#FFFFFF",lineHighlight:"#314151"},hm=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},dm,i),styles:[{tag:ad.keyword,color:"darkgoldenrod",fontWeight:"bold"},{tag:ad.atom,color:"#77F"},{tag:ad.comment,color:"#7a7b7c",fontStyle:"italic"},{tag:ad.number,color:"violet"},{tag:ad.definition(ad.variableName),color:"#fffabc"},{tag:ad.variableName,color:"#abcdef"},{tag:ad.function(ad.variableName),color:"#fffabc"},{tag:ad.typeName,color:"#FFDD44"},{tag:ad.tagName,color:"#def"},{tag:ad.string,color:"#2b4"},{tag:ad.meta,color:"#C9F"},{tag:ad.bracket,color:"#8a8a8a"},{tag:ad.attributeName,color:"#DDFF00"},{tag:ad.heading,color:"aquamarine",fontWeight:"bold"},{tag:ad.link,color:"blueviolet",fontWeight:"bold"},...o]})})(),{background:"#282b2e",foreground:"#a9b7c6",caret:"#00FF00",selection:"#343739",selectionMatch:"#343739",lineHighlight:"#343739"}),um=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},hm,i),styles:[{tag:[ad.keyword,ad.deleted,ad.className],color:"#cc7832"},{tag:[ad.number,ad.literal,ad.derefOperator],color:"#6897bb"},{tag:[ad.link,ad.variableName],color:"#629755"},{tag:[ad.comment,ad.quote],color:"grey"},{tag:[ad.meta,ad.documentMeta],color:"#bbb529"},{tag:[ad.string,ad.propertyName,ad.attributeValue],color:"#6a8759"},{tag:[ad.heading,ad.typeName],color:"#ffc66d"},{tag:[ad.attributeName],color:"#a9b7c6"},{tag:[ad.emphasis],fontStyle:"italic"},...o]})})(),{background:"#272C35",foreground:"#9d9b97",caret:"#797977",selection:"#ffffff30",selectionMatch:"#2B323D",gutterBackground:"#272C35",gutterForeground:"#465063",gutterBorder:"transparent",lineHighlight:"#2B323D"}),pm=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},um,i),styles:[{tag:[ad.function(ad.variableName),ad.function(ad.propertyName),ad.url,ad.processingInstruction],color:"hsl(207, 82%, 66%)"},{tag:[ad.tagName,ad.heading],color:"#e06c75"},{tag:ad.comment,color:"#54636D"},{tag:[ad.propertyName],color:"hsl(220, 14%, 71%)"},{tag:[ad.attributeName,ad.number],color:"hsl( 29, 54%, 61%)"},{tag:ad.className,color:"hsl( 39, 67%, 69%)"},{tag:ad.keyword,color:"hsl(286, 60%, 67%)"},{tag:[ad.string,ad.regexp,ad.special(ad.propertyName)],color:"#98c379"},...o]})})(),{background:"#21202e",foreground:"#edecee",caret:"#a277ff",selection:"#3d375e7f",selectionMatch:"#3d375e7f",gutterBackground:"#21202e",gutterForeground:"#edecee",gutterBorder:"transparent",lineHighlight:"#a394f033"}),_m=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},pm,i),styles:[{tag:ad.keyword,color:"#a277ff"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName],color:"#edecee"},{tag:[ad.propertyName],color:"#ffca85"},{tag:[ad.processingInstruction,ad.string,ad.inserted,ad.special(ad.string)],color:"#61ffca"},{tag:[ad.function(ad.variableName),ad.labelName],color:"#ffca85"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#61ffca"},{tag:[ad.definition(ad.name),ad.separator],color:"#edecee"},{tag:[ad.className],color:"#82e2ff"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#61ffca"},{tag:[ad.typeName],color:"#82e2ff"},{tag:[ad.operator,ad.operatorKeyword],color:"#a277ff"},{tag:[ad.url,ad.escape,ad.regexp,ad.link],color:"#61ffca"},{tag:[ad.meta,ad.comment],color:"#6d6d6d"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.link,textDecoration:"underline"},{tag:ad.heading,fontWeight:"bold",color:"#a277ff"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#edecee"},{tag:ad.invalid,color:"#ff6767"},{tag:ad.strikethrough,textDecoration:"line-through"},...o]})})(),{background:"#FFFFFF",foreground:"#000000",caret:"#FBAC52",selection:"#FFD420",selectionMatch:"#FFD420",gutterBackground:"#f5f5f5",gutterForeground:"#4D4D4C",gutterBorder:"transparent",lineHighlight:"#00000012"}),fm=((e=>{var{theme:t="light",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},_m,i),styles:[{tag:[ad.meta,ad.comment],color:"#804000"},{tag:[ad.keyword,ad.strong],color:"#0000FF"},{tag:[ad.number],color:"#FF0080"},{tag:[ad.string],color:"#FF0080"},{tag:[ad.variableName],color:"#006600"},{tag:[ad.escape],color:"#33CC33"},{tag:[ad.tagName],color:"#1C02FF"},{tag:[ad.heading],color:"#0C07FF"},{tag:[ad.quote],color:"#000000"},{tag:[ad.list],color:"#B90690"},{tag:[ad.documentMeta],color:"#888888"},{tag:[ad.function(ad.variableName)],color:"#0000A2"},{tag:[ad.definition(ad.typeName),ad.typeName],color:"#6D79DE"},...o]})})(),{background:"#28211c",foreground:"#9d9b97",caret:"#797977",selection:"#36312e",selectionMatch:"#4f382b",gutterBackground:"#28211c",gutterForeground:"#666666",lineHighlight:"rgba(255, 255, 255, 0.1)"}),gm=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},fm,i),styles:[{tag:[ad.atom,ad.number,ad.link,ad.bool],color:"#9b859d"},{tag:ad.comment,color:"#937121"},{tag:[ad.keyword,ad.tagName],color:"#cf6a4c"},{tag:ad.string,color:"#f9ee98"},{tag:ad.bracket,color:"#9d9b97"},{tag:[ad.variableName],color:"#5ea6ea"},{tag:ad.definition(ad.variableName),color:"#cf7d34"},{tag:[ad.function(ad.variableName),ad.className],color:"#cf7d34"},{tag:[ad.propertyName,ad.attributeName],color:"#54be0d"},...o]})})(),{background:"#2B2B2B",foreground:"#f8f8f2",caret:"#FFFFFF",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"rgba(255, 255, 255, 0.1)",gutterForeground:"#999",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"}),mm=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},gm,i),styles:[{tag:[ad.atom,ad.number],color:"#bd93f9"},{tag:[ad.comment],color:"#61A151"},{tag:[ad.string],color:"#6A8759"},{tag:[ad.variableName,ad.operator],color:"#A9B7C6"},{tag:[ad.meta,ad.className],color:"#A9B7C6"},{tag:[ad.propertyName],color:"#FFC66D"},{tag:[ad.keyword],color:"#CC7832"},{tag:[ad.tagName],color:"#ff79c6"},{tag:[ad.typeName],color:"#ffb86c"},...o]})})(),{background:"#282a36",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"#282a36",gutterForeground:"#6D8A88",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"}),vm=(e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};return cm({theme:t,settings:Et({},mm,i),styles:[{tag:ad.comment,color:"#6272a4"},{tag:ad.string,color:"#f1fa8c"},{tag:ad.atom,color:"#bd93f9"},{tag:ad.meta,color:"#f8f8f2"},{tag:[ad.keyword,ad.operator,ad.tagName],color:"#ff79c6"},{tag:[ad.function(ad.propertyName),ad.propertyName],color:"#66d9ef"},{tag:[ad.definition(ad.variableName),ad.function(ad.variableName),ad.className,ad.attributeName],color:"#50fa7b"},{tag:ad.atom,color:"#bd93f9"},...o]})})(),bm={background:"#faf8f5",foreground:"#b29762",caret:"#93abdc",selection:"#e3dcce",selectionMatch:"#e3dcce",gutterBackground:"#faf8f5",gutterForeground:"#cdc4b1",gutterBorder:"transparent",lineHighlight:"#EFEFEF"},ym=((e=>{var{theme:t="light",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},bm,i),styles:[{tag:[ad.comment,ad.bracket],color:"#b6ad9a"},{tag:[ad.atom,ad.number,ad.keyword,ad.link,ad.attributeName,ad.quote],color:"#063289"},{tag:[ad.emphasis,ad.heading,ad.tagName,ad.propertyName,ad.variableName],color:"#2d2006"},{tag:[ad.typeName,ad.url,ad.string],color:"#896724"},{tag:[ad.operator,ad.string],color:"#1659df"},{tag:[ad.propertyName],color:"#b29762"},{tag:[ad.unit,ad.punctuation],color:"#063289"},...o]})})(),{background:"#2a2734",foreground:"#6c6783",caret:"#ffad5c",selection:"rgba(255, 255, 255, 0.1)",gutterBackground:"#2a2734",gutterForeground:"#545167",lineHighlight:"#36334280"}),Am=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},ym,i),styles:[{tag:[ad.comment,ad.bracket],color:"#6c6783"},{tag:[ad.atom,ad.number,ad.keyword,ad.link,ad.attributeName,ad.quote],color:"#ffcc99"},{tag:[ad.emphasis,ad.heading,ad.tagName,ad.propertyName,ad.className,ad.variableName],color:"#eeebff"},{tag:[ad.typeName,ad.url],color:"#7a63ee"},{tag:ad.operator,color:"#ffad5c"},{tag:ad.string,color:"#ffb870"},{tag:[ad.propertyName],color:"#9a86fd"},{tag:[ad.unit,ad.punctuation],color:"#e09142"},...o]})})(),{background:"#fff",foreground:"#000",caret:"#FFFFFF",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#f7f7f7",gutterForeground:"#999",lineHighlight:"#e8f2ff",gutterBorder:"transparent"}),Dm=((e=>{var{theme:t="light",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Am,i),styles:[{tag:[ad.comment],color:"#3F7F5F"},{tag:[ad.documentMeta],color:"#FF1717"},{tag:ad.keyword,color:"#7F0055",fontWeight:"bold"},{tag:ad.atom,color:"#00f"},{tag:ad.number,color:"#164"},{tag:ad.propertyName,color:"#164"},{tag:[ad.variableName,ad.definition(ad.variableName)],color:"#0000C0"},{tag:ad.function(ad.variableName),color:"#0000C0"},{tag:ad.string,color:"#2A00FF"},{tag:ad.operator,color:"black"},{tag:ad.tagName,color:"#170"},{tag:ad.attributeName,color:"#00c"},{tag:ad.link,color:"#219"},...o]})})(),{background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"}),km=((e=>{var{theme:t="light",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Dm,i),styles:[{tag:[ad.standard(ad.tagName),ad.tagName],color:"#116329"},{tag:[ad.comment,ad.bracket],color:"#6a737d"},{tag:[ad.className,ad.propertyName],color:"#6f42c1"},{tag:[ad.variableName,ad.attributeName,ad.number,ad.operator],color:"#005cc5"},{tag:[ad.keyword,ad.typeName,ad.typeOperator,ad.typeName],color:"#d73a49"},{tag:[ad.string,ad.meta,ad.regexp],color:"#032f62"},{tag:[ad.name,ad.quote],color:"#22863a"},{tag:[ad.heading],color:"#24292e",fontWeight:"bold"},{tag:[ad.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[ad.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#e36209"},{tag:[ad.url,ad.escape,ad.regexp,ad.link],color:"#032f62"},{tag:ad.link,textDecoration:"underline"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.invalid,color:"#cb2431"},...o]})})(),{background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"}),Om=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},km,i),styles:[{tag:[ad.standard(ad.tagName),ad.tagName],color:"#7ee787"},{tag:[ad.comment,ad.bracket],color:"#8b949e"},{tag:[ad.className,ad.propertyName],color:"#d2a8ff"},{tag:[ad.variableName,ad.attributeName,ad.number,ad.operator],color:"#79c0ff"},{tag:[ad.keyword,ad.typeName,ad.typeOperator,ad.typeName],color:"#ff7b72"},{tag:[ad.string,ad.meta,ad.regexp],color:"#a5d6ff"},{tag:[ad.name,ad.quote],color:"#7ee787"},{tag:[ad.heading],color:"#d2a8ff",fontWeight:"bold"},{tag:[ad.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[ad.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#ffab70"},{tag:ad.link,textDecoration:"underline"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.invalid,color:"#f97583"},...o]})})(),{background:"#282828",foreground:"#ebdbb2",caret:"#ebdbb2",selection:"#bdae93",selectionMatch:"#bdae93",lineHighlight:"#3c3836",gutterBackground:"#282828",gutterForeground:"#7c6f64"}),wm=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Om,i),styles:[{tag:ad.keyword,color:"#fb4934"},{tag:[ad.name,ad.deleted,ad.character,ad.propertyName,ad.macroName],color:"#8ec07c"},{tag:[ad.variableName],color:"#83a598"},{tag:[ad.function(ad.variableName)],color:"#b8bb26",fontStyle:"bold"},{tag:[ad.labelName],color:"#ebdbb2"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#d3869b"},{tag:[ad.definition(ad.name),ad.separator],color:"#ebdbb2"},{tag:[ad.brace],color:"#ebdbb2"},{tag:[ad.annotation],color:"#fb4934d"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#d3869b"},{tag:[ad.typeName,ad.className],color:"#fabd2f"},{tag:[ad.operator,ad.operatorKeyword],color:"#fb4934"},{tag:[ad.tagName],color:"#8ec07c",fontStyle:"bold"},{tag:[ad.squareBracket],color:"#fe8019"},{tag:[ad.angleBracket],color:"#83a598"},{tag:[ad.attributeName],color:"#8ec07c"},{tag:[ad.regexp],color:"#8ec07c"},{tag:[ad.quote],color:"#928374"},{tag:[ad.string],color:"#ebdbb2"},{tag:ad.link,color:"#a89984",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ad.url,ad.escape,ad.special(ad.string)],color:"#d3869b"},{tag:[ad.meta],color:"#fabd2f"},{tag:[ad.comment],color:"#928374",fontStyle:"italic"},{tag:ad.strong,fontWeight:"bold",color:"#fe8019"},{tag:ad.emphasis,fontStyle:"italic",color:"#b8bb26"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.heading,fontWeight:"bold",color:"#b8bb26"},{tag:[ad.heading1,ad.heading2],fontWeight:"bold",color:"#b8bb26"},{tag:[ad.heading3,ad.heading4],fontWeight:"bold",color:"#fabd2f"},{tag:[ad.heading5,ad.heading6],color:"#fabd2f"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#d3869b"},{tag:[ad.processingInstruction,ad.inserted],color:"#83a598"},{tag:[ad.contentSeparator],color:"#fb4934"},{tag:ad.invalid,color:"#fe8019",borderBottom:"1px dotted #fb4934d"},...o]})})(),{background:"#fbf1c7",foreground:"#3c3836",caret:"#af3a03",selection:"#ebdbb2",selectionMatch:"#bdae93",lineHighlight:"#ebdbb2",gutterBackground:"#ebdbb2",gutterForeground:"#665c54",gutterBorder:"transparent"}),Cm=((e=>{var{theme:t="light",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},wm,i),styles:[{tag:ad.keyword,color:"#9d0006"},{tag:[ad.name,ad.deleted,ad.character,ad.propertyName,ad.macroName],color:"#427b58"},{tag:[ad.variableName],color:"#076678"},{tag:[ad.function(ad.variableName)],color:"#79740e",fontStyle:"bold"},{tag:[ad.labelName],color:"#3c3836"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#8f3f71"},{tag:[ad.definition(ad.name),ad.separator],color:"#3c3836"},{tag:[ad.brace],color:"#3c3836"},{tag:[ad.annotation],color:"#9d0006"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#8f3f71"},{tag:[ad.typeName,ad.className],color:"#b57614"},{tag:[ad.operator,ad.operatorKeyword],color:"#9d0006"},{tag:[ad.tagName],color:"#427b58",fontStyle:"bold"},{tag:[ad.squareBracket],color:"#af3a03"},{tag:[ad.angleBracket],color:"#076678"},{tag:[ad.attributeName],color:"#427b58"},{tag:[ad.regexp],color:"#427b58"},{tag:[ad.quote],color:"#928374"},{tag:[ad.string],color:"#3c3836"},{tag:ad.link,color:"#7c6f64",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ad.url,ad.escape,ad.special(ad.string)],color:"#8f3f71"},{tag:[ad.meta],color:"#b57614"},{tag:[ad.comment],color:"#928374",fontStyle:"italic"},{tag:ad.strong,fontWeight:"bold",color:"#af3a03"},{tag:ad.emphasis,fontStyle:"italic",color:"#79740e"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.heading,fontWeight:"bold",color:"#79740e"},{tag:[ad.heading1,ad.heading2],fontWeight:"bold",color:"#79740e"},{tag:[ad.heading3,ad.heading4],fontWeight:"bold",color:"#b57614"},{tag:[ad.heading5,ad.heading6],color:"#b57614"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#8f3f71"},{tag:[ad.processingInstruction,ad.inserted],color:"#076678"},{tag:[ad.contentSeparator],color:"#9d0006"},{tag:ad.invalid,color:"#af3a03",borderBottom:"1px dotted #9d0006"},...o]})})(),{background:"#2e3235",foreground:"#bdbdbd",caret:"#a0a4ae",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#2e3235",gutterForeground:"#999",gutterActiveForeground:"#4f5b66",lineHighlight:"#545b61"}),xm=e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};return cm({theme:t,settings:Et({},Cm,i),styles:[{tag:ad.keyword,color:"#cf6edf"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName],color:"#56c8d8"},{tag:[ad.propertyName],color:"#facf4e"},{tag:[ad.variableName],color:"#bdbdbd"},{tag:[ad.function(ad.variableName)],color:"#56c8d8"},{tag:[ad.labelName],color:"#cf6edf"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#facf4e"},{tag:[ad.definition(ad.name),ad.separator],color:"#fa5788"},{tag:[ad.brace],color:"#cf6edf"},{tag:[ad.annotation],color:"#ff5f52"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#ffad42"},{tag:[ad.typeName,ad.className],color:"#ffad42"},{tag:[ad.operator,ad.operatorKeyword],color:"#7186f0"},{tag:[ad.tagName],color:"#99d066"},{tag:[ad.squareBracket],color:"#ff5f52"},{tag:[ad.angleBracket],color:"#606f7a"},{tag:[ad.attributeName],color:"#bdbdbd"},{tag:[ad.regexp],color:"#ff5f52"},{tag:[ad.quote],color:"#6abf69"},{tag:[ad.string],color:"#99d066"},{tag:ad.link,color:"#56c8d8",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ad.url,ad.escape,ad.special(ad.string)],color:"#facf4e"},{tag:[ad.meta],color:"#707d8b"},{tag:[ad.comment],color:"#707d8b",fontStyle:"italic"},{tag:ad.monospace,color:"#bdbdbd"},{tag:ad.strong,fontWeight:"bold",color:"#ff5f52"},{tag:ad.emphasis,fontStyle:"italic",color:"#99d066"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.heading,fontWeight:"bold",color:"#facf4e"},{tag:ad.heading1,fontWeight:"bold",color:"#facf4e"},{tag:[ad.heading2,ad.heading3,ad.heading4],fontWeight:"bold",color:"#facf4e"},{tag:[ad.heading5,ad.heading6],color:"#facf4e"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#56c8d8"},{tag:[ad.processingInstruction,ad.inserted],color:"#ff5f52"},{tag:[ad.contentSeparator],color:"#56c8d8"},{tag:ad.invalid,color:"#606f7a",borderBottom:"1px dotted #ff5f52"},...o]})},Sm=(xm(),xm(),{background:"#FAFAFA",foreground:"#90A4AE",caret:"#272727",selection:"#80CBC440",selectionMatch:"#FAFAFA",gutterBackground:"#FAFAFA",gutterForeground:"#90A4AE",gutterBorder:"transparent",lineHighlight:"#CCD7DA50"}),Mm=((e=>{var{theme:t="light",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Sm,i),styles:[{tag:ad.keyword,color:"#39ADB5"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName],color:"#90A4AE"},{tag:[ad.propertyName],color:"#6182B8"},{tag:[ad.processingInstruction,ad.string,ad.inserted,ad.special(ad.string)],color:"#91B859"},{tag:[ad.function(ad.variableName),ad.labelName],color:"#6182B8"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#39ADB5"},{tag:[ad.definition(ad.name),ad.separator],color:"#90A4AE"},{tag:[ad.className],color:"#E2931D"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#F76D47"},{tag:[ad.typeName],color:"#E2931D",fontStyle:"#E2931D"},{tag:[ad.operator,ad.operatorKeyword],color:"#39ADB5"},{tag:[ad.url,ad.escape,ad.regexp,ad.link],color:"#91B859"},{tag:[ad.meta,ad.comment],color:"#90A4AE"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.link,textDecoration:"underline"},{tag:ad.heading,fontWeight:"bold",color:"#39ADB5"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#90A4AE"},{tag:ad.invalid,color:"#E5393570"},{tag:ad.strikethrough,textDecoration:"line-through"},...o]})})(),{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",selectionMatch:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"}),Pm=((e=>{var{theme:t="light",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Mm,i),styles:[{tag:ad.comment,color:"#9995b7"},{tag:ad.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[ad.definitionKeyword,ad.modifier],color:"#ff5792"},{tag:[ad.className,ad.tagName,ad.definition(ad.typeName)],color:"#0094f0"},{tag:[ad.number,ad.bool,ad.null,ad.special(ad.brace)],color:"#5842ff"},{tag:[ad.definition(ad.propertyName),ad.function(ad.variableName)],color:"#0095a8"},{tag:ad.typeName,color:"#b3694d"},{tag:[ad.propertyName,ad.variableName],color:"#fa8900"},{tag:ad.operator,color:"#ff5792"},{tag:ad.self,color:"#e64100"},{tag:[ad.string,ad.regexp],color:"#00b368"},{tag:[ad.paren,ad.bracket],color:"#0431fa"},{tag:ad.labelName,color:"#00bdd6"},{tag:ad.attributeName,color:"#e64100"},{tag:ad.angleBracket,color:"#9995b7"},...o]})})(),{background:"#2e3440",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#3b4252",selectionMatch:"#e5e9f0",gutterBackground:"#2e3440",gutterForeground:"#4c566a",gutterActiveForeground:"#d8dee9",lineHighlight:"#4c566a"}),Tm=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Pm,i),styles:[{tag:ad.keyword,color:"#5e81ac"},{tag:[ad.name,ad.deleted,ad.character,ad.propertyName,ad.macroName],color:"#88c0d0"},{tag:[ad.variableName],color:"#8fbcbb"},{tag:[ad.function(ad.variableName)],color:"#8fbcbb"},{tag:[ad.labelName],color:"#81a1c1"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#5e81ac"},{tag:[ad.definition(ad.name),ad.separator],color:"#a3be8c"},{tag:[ad.brace],color:"#8fbcbb"},{tag:[ad.annotation],color:"#d30102"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#b48ead"},{tag:[ad.typeName,ad.className],color:"#ebcb8b"},{tag:[ad.operator,ad.operatorKeyword],color:"#a3be8c"},{tag:[ad.tagName],color:"#b48ead"},{tag:[ad.squareBracket],color:"#bf616a"},{tag:[ad.angleBracket],color:"#d08770"},{tag:[ad.attributeName],color:"#ebcb8b"},{tag:[ad.regexp],color:"#5e81ac"},{tag:[ad.quote],color:"#b48ead"},{tag:[ad.string],color:"#a3be8c"},{tag:ad.link,color:"#a3be8c",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ad.url,ad.escape,ad.special(ad.string)],color:"#8fbcbb"},{tag:[ad.meta],color:"#88c0d0"},{tag:[ad.monospace],color:"#d8dee9",fontStyle:"italic"},{tag:[ad.comment],color:"#4c566a",fontStyle:"italic"},{tag:ad.strong,fontWeight:"bold",color:"#5e81ac"},{tag:ad.emphasis,fontStyle:"italic",color:"#5e81ac"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.heading,fontWeight:"bold",color:"#5e81ac"},{tag:ad.special(ad.heading1),fontWeight:"bold",color:"#5e81ac"},{tag:ad.heading1,fontWeight:"bold",color:"#5e81ac"},{tag:[ad.heading2,ad.heading3,ad.heading4],fontWeight:"bold",color:"#5e81ac"},{tag:[ad.heading5,ad.heading6],color:"#5e81ac"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#d08770"},{tag:[ad.processingInstruction,ad.inserted],color:"#8fbcbb"},{tag:[ad.contentSeparator],color:"#ebcb8b"},{tag:ad.invalid,color:"#434c5e",borderBottom:"1px dotted #d30102"},...o]})})(),{background:"#272822",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#49483E",selectionMatch:"#49483E",gutterBackground:"#272822",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"}),Im=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Tm,i),styles:[{tag:[ad.comment,ad.documentMeta],color:"#8292a2"},{tag:[ad.number,ad.bool,ad.null,ad.atom],color:"#ae81ff"},{tag:[ad.attributeValue,ad.className,ad.name],color:"#e6db74"},{tag:[ad.propertyName,ad.attributeName],color:"#a6e22e"},{tag:[ad.variableName],color:"#9effff"},{tag:[ad.squareBracket],color:"#bababa"},{tag:[ad.string,ad.special(ad.brace)],color:"#e6db74"},{tag:[ad.regexp,ad.className,ad.typeName,ad.definition(ad.typeName)],color:"#66d9ef"},{tag:[ad.definition(ad.variableName),ad.definition(ad.propertyName),ad.function(ad.variableName)],color:"#fd971f"},{tag:[ad.keyword,ad.definitionKeyword,ad.modifier,ad.tagName,ad.angleBracket],color:"#f92672"},...o]})})(),{background:"#fdf6e3",foreground:"#657b83",caret:"#586e75",selection:"#dfd9c8",selectionMatch:"#dfd9c8",gutterBackground:"#00000010",gutterForeground:"#657b83",lineHighlight:"#dfd9c8"}),Nm=((e=>{var{theme:t="light",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Im,i),styles:[{tag:ad.keyword,color:"#859900"},{tag:[ad.name,ad.deleted,ad.character,ad.propertyName,ad.macroName],color:"#2aa198"},{tag:[ad.variableName],color:"#268bd2"},{tag:[ad.function(ad.variableName)],color:"#268bd2"},{tag:[ad.labelName],color:"#d33682"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#b58900"},{tag:[ad.definition(ad.name),ad.separator],color:"#2aa198"},{tag:[ad.brace],color:"#d33682"},{tag:[ad.annotation],color:"#d30102"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#d33682"},{tag:[ad.typeName,ad.className],color:"#cb4b16"},{tag:[ad.operator,ad.operatorKeyword],color:"#6c71c4"},{tag:[ad.tagName],color:"#268bd2"},{tag:[ad.squareBracket],color:"#dc322f"},{tag:[ad.angleBracket],color:"#073642"},{tag:[ad.attributeName],color:"#93a1a1"},{tag:[ad.regexp],color:"#d30102"},{tag:[ad.quote],color:"#859900"},{tag:[ad.string],color:"#b58900"},{tag:ad.link,color:"#2aa198",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ad.url,ad.escape,ad.special(ad.string)],color:"#b58900"},{tag:[ad.meta],color:"#dc322f"},{tag:[ad.comment],color:"#586e75",fontStyle:"italic"},{tag:ad.strong,fontWeight:"bold",color:"#586e75"},{tag:ad.emphasis,fontStyle:"italic",color:"#859900"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.heading,fontWeight:"bold",color:"#b58900"},{tag:ad.heading1,fontWeight:"bold",color:"#002b36"},{tag:[ad.heading2,ad.heading3,ad.heading4],fontWeight:"bold",color:"#002b36"},{tag:[ad.heading5,ad.heading6],color:"#002b36"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#d33682"},{tag:[ad.processingInstruction,ad.inserted,ad.contentSeparator],color:"#dc322f"},{tag:[ad.contentSeparator],color:"#b58900"},{tag:ad.invalid,color:"#073642",borderBottom:"1px dotted #dc322f"},...o]})})(),{background:"#002b36",foreground:"#93a1a1",caret:"#839496",selection:"#173541",selectionMatch:"#aafe661a",gutterBackground:"#00252f",gutterForeground:"#839496",lineHighlight:"#173541"}),Fm=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Nm,i),styles:[{tag:ad.keyword,color:"#859900"},{tag:[ad.name,ad.deleted,ad.character,ad.propertyName,ad.macroName],color:"#2aa198"},{tag:[ad.variableName],color:"#93a1a1"},{tag:[ad.function(ad.variableName)],color:"#268bd2"},{tag:[ad.labelName],color:"#d33682"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#b58900"},{tag:[ad.definition(ad.name),ad.separator],color:"#2aa198"},{tag:[ad.brace],color:"#d33682"},{tag:[ad.annotation],color:"#d30102"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#d33682"},{tag:[ad.typeName,ad.className],color:"#cb4b16"},{tag:[ad.operator,ad.operatorKeyword],color:"#6c71c4"},{tag:[ad.tagName],color:"#268bd2"},{tag:[ad.squareBracket],color:"#dc322f"},{tag:[ad.angleBracket],color:"#586e75"},{tag:[ad.attributeName],color:"#93a1a1"},{tag:[ad.regexp],color:"#d30102"},{tag:[ad.quote],color:"#859900"},{tag:[ad.string],color:"#b58900"},{tag:ad.link,color:"#2aa198",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ad.url,ad.escape,ad.special(ad.string)],color:"#b58900"},{tag:[ad.meta],color:"#dc322f"},{tag:[ad.comment],color:"#586e75",fontStyle:"italic"},{tag:ad.strong,fontWeight:"bold",color:"#eee8d5"},{tag:ad.emphasis,fontStyle:"italic",color:"#859900"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:ad.heading,fontWeight:"bold",color:"#b58900"},{tag:ad.heading1,fontWeight:"bold",color:"#fdf6e3"},{tag:[ad.heading2,ad.heading3,ad.heading4],fontWeight:"bold",color:"#eee8d5"},{tag:[ad.heading5,ad.heading6],color:"#eee8d5"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#d33682"},{tag:[ad.processingInstruction,ad.inserted,ad.contentSeparator],color:"#dc322f"},{tag:[ad.contentSeparator],color:"#b58900"},{tag:ad.invalid,color:"#586e75",borderBottom:"1px dotted #dc322f"},...o]})})(),{background:"#303841",foreground:"#FFFFFF",caret:"#FBAC52",selection:"#4C5964",selectionMatch:"#3A546E",gutterBackground:"#303841",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"});!function(e){var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Fm,i),styles:[{tag:[ad.meta,ad.comment],color:"#A2A9B5"},{tag:[ad.attributeName,ad.keyword],color:"#B78FBA"},{tag:ad.function(ad.variableName),color:"#5AB0B0"},{tag:[ad.string,ad.regexp,ad.attributeValue],color:"#99C592"},{tag:ad.operator,color:"#f47954"},{tag:[ad.tagName,ad.modifier],color:"#E35F63"},{tag:[ad.number,ad.definition(ad.tagName),ad.className,ad.definition(ad.variableName)],color:"#fbac52"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#E35F63"},{tag:ad.variableName,color:"#539ac4"},{tag:[ad.propertyName,ad.typeName],color:"#629ccd"},{tag:ad.propertyName,color:"#36b7b5"},...o]})}();var Lm={background:"#1a1b26",foreground:"#787c99",caret:"#c0caf5",selection:"#515c7e40",selectionMatch:"#16161e",gutterBackground:"#1a1b26",gutterForeground:"#787c99",gutterBorder:"transparent",lineHighlight:"#1e202e"},Em=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Lm,i),styles:[{tag:ad.keyword,color:"#bb9af7"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName],color:"#c0caf5"},{tag:[ad.propertyName],color:"#7aa2f7"},{tag:[ad.processingInstruction,ad.string,ad.inserted,ad.special(ad.string)],color:"#9ece6a"},{tag:[ad.function(ad.variableName),ad.labelName],color:"#7aa2f7"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#bb9af7"},{tag:[ad.definition(ad.name),ad.separator],color:"#c0caf5"},{tag:[ad.className],color:"#c0caf5"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#ff9e64"},{tag:[ad.typeName],color:"#0db9d7"},{tag:[ad.operator,ad.operatorKeyword],color:"#bb9af7"},{tag:[ad.url,ad.escape,ad.regexp,ad.link],color:"#b4f9f8"},{tag:[ad.meta,ad.comment],color:"#444b6a"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.link,textDecoration:"underline"},{tag:ad.heading,fontWeight:"bold",color:"#89ddff"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#c0caf5"},{tag:ad.invalid,color:"#ff5370"},{tag:ad.strikethrough,textDecoration:"line-through"},...o]})})(),{background:"#24283b",foreground:"#7982a9",caret:"#c0caf5",selection:"#6f7bb630",selectionMatch:"#1f2335",gutterBackground:"#24283b",gutterForeground:"#7982a9",gutterBorder:"transparent",lineHighlight:"#292e42"}),jm=((e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Em,i),styles:[{tag:ad.keyword,color:"#bb9af7"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName],color:"#c0caf5"},{tag:[ad.propertyName],color:"#7aa2f7"},{tag:[ad.processingInstruction,ad.string,ad.inserted,ad.special(ad.string)],color:"#9ece6a"},{tag:[ad.function(ad.variableName),ad.labelName],color:"#7aa2f7"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#bb9af7"},{tag:[ad.definition(ad.name),ad.separator],color:"#c0caf5"},{tag:[ad.className],color:"#c0caf5"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#ff9e64"},{tag:[ad.typeName],color:"#2ac3de",fontStyle:"#2ac3de"},{tag:[ad.operator,ad.operatorKeyword],color:"#bb9af7"},{tag:[ad.url,ad.escape,ad.regexp,ad.link],color:"#b4f9f8"},{tag:[ad.meta,ad.comment],color:"#565f89"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.link,textDecoration:"underline"},{tag:ad.heading,fontWeight:"bold",color:"#89ddff"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#c0caf5"},{tag:ad.invalid,color:"#ff5370"},{tag:ad.strikethrough,textDecoration:"line-through"},...o]})})(),{background:"#e1e2e7",foreground:"#3760bf",caret:"#3760bf",selection:"#99a7df",selectionMatch:"#99a7df",gutterBackground:"#e1e2e7",gutterForeground:"#3760bf",gutterBorder:"transparent",lineHighlight:"#5f5faf11"}),Zm=((e=>{var{theme:t="light",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},jm,i),styles:[{tag:ad.keyword,color:"#007197"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName],color:"#3760bf"},{tag:[ad.propertyName],color:"#3760bf"},{tag:[ad.processingInstruction,ad.string,ad.inserted,ad.special(ad.string)],color:"#587539"},{tag:[ad.function(ad.variableName),ad.labelName],color:"#3760bf"},{tag:[ad.color,ad.constant(ad.name),ad.standard(ad.name)],color:"#3760bf"},{tag:[ad.definition(ad.name),ad.separator],color:"#3760bf"},{tag:[ad.className],color:"#3760bf"},{tag:[ad.number,ad.changed,ad.annotation,ad.modifier,ad.self,ad.namespace],color:"#b15c00"},{tag:[ad.typeName],color:"#007197",fontStyle:"#007197"},{tag:[ad.operator,ad.operatorKeyword],color:"#007197"},{tag:[ad.url,ad.escape,ad.regexp,ad.link],color:"#587539"},{tag:[ad.meta,ad.comment],color:"#848cb5"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.link,textDecoration:"underline"},{tag:ad.heading,fontWeight:"bold",color:"#b15c00"},{tag:[ad.atom,ad.bool,ad.special(ad.variableName)],color:"#3760bf"},{tag:ad.invalid,color:"#f52a65"},{tag:ad.strikethrough,textDecoration:"line-through"},...o]})})(),{background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'});!function(e){var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Zm,i),styles:[{tag:[ad.keyword,ad.operatorKeyword,ad.modifier,ad.color,ad.constant(ad.name),ad.standard(ad.name),ad.standard(ad.tagName),ad.special(ad.brace),ad.atom,ad.bool,ad.special(ad.variableName)],color:"#569cd6"},{tag:[ad.controlKeyword,ad.moduleKeyword],color:"#c586c0"},{tag:[ad.name,ad.deleted,ad.character,ad.macroName,ad.propertyName,ad.variableName,ad.labelName,ad.definition(ad.name)],color:"#9cdcfe"},{tag:ad.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[ad.typeName,ad.className,ad.tagName,ad.number,ad.changed,ad.annotation,ad.self,ad.namespace],color:"#4ec9b0"},{tag:[ad.function(ad.variableName),ad.function(ad.propertyName)],color:"#dcdcaa"},{tag:[ad.number],color:"#b5cea8"},{tag:[ad.operator,ad.punctuation,ad.separator,ad.url,ad.escape,ad.regexp],color:"#d4d4d4"},{tag:[ad.regexp],color:"#d16969"},{tag:[ad.special(ad.string),ad.processingInstruction,ad.string,ad.inserted],color:"#ce9178"},{tag:[ad.angleBracket],color:"#808080"},{tag:ad.strong,fontWeight:"bold"},{tag:ad.emphasis,fontStyle:"italic"},{tag:ad.strikethrough,textDecoration:"line-through"},{tag:[ad.meta,ad.comment],color:"#6a9955"},{tag:ad.link,color:"#6a9955",textDecoration:"underline"},{tag:ad.invalid,color:"#ff0000"},...o]})}();var Rm={background:"#fff",foreground:"#3D3D3D",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#AFAFAF",lineHighlight:"#EDF4FF"};!function(e){var{theme:t="light",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},Rm,i),styles:[{tag:[ad.comment,ad.quote],color:"#707F8D"},{tag:[ad.typeName,ad.typeOperator],color:"#aa0d91"},{tag:[ad.keyword],color:"#aa0d91",fontWeight:"bold"},{tag:[ad.string,ad.meta],color:"#D23423"},{tag:[ad.name],color:"#032f62"},{tag:[ad.typeName],color:"#522BB2"},{tag:[ad.variableName],color:"#23575C"},{tag:[ad.definition(ad.variableName)],color:"#327A9E"},{tag:[ad.regexp,ad.link],color:"#0e0eff"},...o]})}();var Qm,zm={background:"#292A30",foreground:"#CECFD0",caret:"#fff",selection:"#727377",selectionMatch:"#727377",lineHighlight:"#2F3239"};(e=>{var{theme:t="dark",settings:i={},styles:o=[]}=e||{};cm({theme:t,settings:Et({},zm,i),styles:[{tag:[ad.comment,ad.quote],color:"#7F8C98"},{tag:[ad.keyword],color:"#FF7AB2",fontWeight:"bold"},{tag:[ad.string,ad.meta],color:"#FF8170"},{tag:[ad.typeName],color:"#DABAFF"},{tag:[ad.definition(ad.variableName)],color:"#6BDFFF"},{tag:[ad.name],color:"#6BAA9F"},{tag:[ad.variableName],color:"#ACF2E4"},{tag:[ad.regexp,ad.link],color:"#FF8170"},...o]})})();const Um=Sl(((e,t,i)=>{let{from:o,to:a,text:s}=e.state.doc.lineAt(t),n=t,r=t;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===t&&i<0||r===t&&i>0)return null;let l=Bm(e.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(e){let t=document.createElement("div");t.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",t.appendChild(i),t.appendChild(o)),t.appendChild(a),{dom:t}}}:void 0})),Bm=e=>{for(let t=0;t<Qm.length;t++){let i=Qm[t];if(i.value===e||i.value===e+"()")return i}};class Ym extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.getListMethodChild=(e,t)=>{let i=[];for(let o=0;o<e.length;o++){let a={title:e[o].caption,value:e[o].code_id,selected:"AF"!==t||0===o,data:[]};"AF"===t&&0===o&&this.setState({module_code:e[o].code_id});for(let t=0;t<this.evaluation.length;t++)this.evaluation[t].type===e[o].code_id&&a.data.push(this.evaluation[t]);i.push(a)}return i},this.handleChooseMethod=e=>{let t=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=e.method;this.setState({value_code:i+a+o,last_pos:t+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:t+(-1!==a.indexOf("()")?a.length-1:a.length),head:t+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),1)}))},this.abs_OpenMethodSystem=e=>{let{all_method_data:t}=this.state;for(let i=0;i<t.support_method.length;i++)t.support_method[i].selected=t.support_method[i].value===e.value;this.setState({all_method_data:t})},this.abs_OpenMethod=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)if(i[e][o].value===t.value){i[e][o].selected=!i[e][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)i[e][o].selected=i[e][o].value===t;this.setState({all_method_data:i,module_code:t})},this.abs_Change=e=>{this.setState({data_code:e})},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,i),(0,N.Yr)(a,{}).then((e=>s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1})}))},this.onChange=e=>{this.setState({value_code:e})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluationAutoFee",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(Qm=e.items.map(((e,t)=>({title:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],value:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],caption:e.caption,example:e.example,method:e.item,type:e.type}))),this.evaluation=JSON.parse(JSON.stringify(Qm)),await this.callAPI("get_list_method_parent",{number_of_step:1}).then((async e=>{if(e.hasError)s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1);else{this.all_method_data.support_method=e.items.map(((e,t)=>({title:e.caption,value:e.code_id,selected:"AF"===e.code_id,mode:"AF"===e.code_id})));for(let t=0;t<e.items.length;t++)await this.callAPI("get_list_method_child_AutoFee",{code_name:e.items[t].code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map(((e,t)=>({title:e.caption,value:e.code_id})));this.list_parent_tree=this.list_parent_tree.concat(o),this.all_method_data[e.items[t].code_id]=this.getListMethodChild(i.items,e.items[t].code_id)}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}));this.setState({all_method_data:this.all_method_data,list_parent_tree:this.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1)}))}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),e.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{await this.callAPI("test_method_autoFee",{expression:this.state.value_code,number_of_step:1}).then((e=>{if(e.hasError)s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);t.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),t.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}}}})}render(){const e=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(e,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:vm,extensions:[jg(),Um],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const Hm=Ym;var Vm;const Wm=Sl(((e,t,i)=>{let{from:o,to:a,text:s}=e.state.doc.lineAt(t),n=t,r=t;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===t&&i<0||r===t&&i>0)return null;let l=Gm(e.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(e){let t=document.createElement("div");t.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",t.appendChild(i),t.appendChild(o)),t.appendChild(a),{dom:t}}}:void 0})),Gm=e=>{for(let t=0;t<Vm.length;t++){let i=Vm[t];if(i.value===e||i.value===e+"()")return i}};class Jm extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callGetListMetodChild=async e=>{let t={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(e.map((async e=>{await this.callAPI("get_list_method_child_AutoFee",{code_index_from:"AF"===e.code_id?3:null,code_index_to:"AF"===e.code_id?3:null,code_name:e.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((e=>({title:e.caption,value:e.code_id})));t.list_parent_tree=t.list_parent_tree.concat(o),t.all_method_data[e.code_id]=this.getListMethodChild(i.items,e.code_id)}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}))),new Promise((e=>{e(t)}))},this.getListMethodChild=(e,t)=>{let i=[];for(let o=0;o<e.length;o++){let a={title:e[o].caption,value:e[o].code_id,selected:"AF"!==t||0===o,data:[]};"AF"===t&&0===o&&this.setState({module_code:e[o].code_id});for(let t=0;t<this.evaluation.length;t++)this.evaluation[t].type===e[o].code_id&&a.data.push(this.evaluation[t]);i.push(a)}return i},this.handleChooseMethod=e=>{let t=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=e.method;this.setState({value_code:i+a+o,last_pos:t+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:t+(-1!==a.indexOf("()")?a.length-1:a.length),head:t+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=e=>{let{all_method_data:t}=this.state;for(let i=0;i<t.support_method.length;i++)t.support_method[i].selected=t.support_method[i].value===e.value;this.setState({all_method_data:t})},this.abs_OpenMethod=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)if(i[e][o].value===t.value){i[e][o].selected=!i[e][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)i[e][o].selected=i[e][o].value===t;this.setState({all_method_data:i,module_code:t})},this.abs_Change=e=>{this.setState({data_code:e})},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,i),(0,N.Yr)(a,{}).then((e=>s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1})}))},this.onChange=e=>{this.setState({value_code:e})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluationAutoFee",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"DPT_IFC_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(Vm=e.items.map(((e,t)=>({title:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],value:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],caption:e.caption,example:e.example,method:e.item,type:e.type}))),this.evaluation=JSON.parse(JSON.stringify(Vm)))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),await this.callAPI("get_list_method_parent_autoFee",{number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(this.all_method_data.support_method=e.items.map(((e,t)=>({title:e.caption,value:e.code_id,selected:"AF"===e.code_id,mode:"AF"===e.code_id}))),this.callGetListMetodChild(e.items).then((e=>{this.setState({all_method_data:e.all_method_data,list_parent_tree:e.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),e.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{await this.callAPI("test_method_autoFee",{workflow_id:"DPT_IFC_EXPRESSION_TEST_AUTOFEE",expression:this.state.value_code,number_of_step:1}).then((e=>{if(e.hasError)s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);t.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),t.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}}}})}render(){const e=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(e,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:vm,extensions:[jg(),Wm],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const qm=Jm;var Km;const Xm=Sl(((e,t,i)=>{let{from:o,to:a,text:s}=e.state.doc.lineAt(t),n=t,r=t;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===t&&i<0||r===t&&i>0)return null;let l=$m(e.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(e){let t=document.createElement("div");t.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",t.appendChild(i),t.appendChild(o)),t.appendChild(a),{dom:t}}}:void 0})),$m=e=>{for(let t=0;t<Km.length;t++){let i=Km[t];if(i.value===e||i.value===e+"()")return i}};class ev extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callGetListMetodChild=async e=>{let t={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(e.map((async e=>{await this.callAPI("get_list_method_child_AutoFee",{code_index_from:"AF"===e.code_id?3:null,code_index_to:"AF"===e.code_id?3:null,code_name:e.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((e=>({title:e.caption,value:e.code_id})));t.list_parent_tree=t.list_parent_tree.concat(o),t.all_method_data[e.code_id]=this.getListMethodChild(i.items,e.code_id)}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}))),new Promise((e=>{e(t)}))},this.getListMethodChild=(e,t)=>{let i=[];for(let o=0;o<e.length;o++){let a={title:e[o].caption,value:e[o].code_id,selected:"AF"!==t||0===o,data:[]};"AF"===t&&0===o&&this.setState({module_code:e[o].code_id});for(let t=0;t<this.evaluation.length;t++)this.evaluation[t].type===e[o].code_id&&a.data.push(this.evaluation[t]);i.push(a)}return i},this.handleChooseMethod=e=>{let t=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=e.method;this.setState({value_code:i+a+o,last_pos:t+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:t+(-1!==a.indexOf("()")?a.length-1:a.length),head:t+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=e=>{let{all_method_data:t}=this.state;for(let i=0;i<t.support_method.length;i++)t.support_method[i].selected=t.support_method[i].value===e.value;this.setState({all_method_data:t})},this.abs_OpenMethod=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)if(i[e][o].value===t.value){i[e][o].selected=!i[e][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)i[e][o].selected=i[e][o].value===t;this.setState({all_method_data:i,module_code:t})},this.abs_Change=e=>{this.setState({data_code:e})},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,i),(0,N.Yr)(a,{}).then((e=>s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1})}))},this.onChange=e=>{this.setState({value_code:e})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluationAutoFee",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"TRD_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(Km=e.items.map(((e,t)=>({title:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],value:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],caption:e.caption,example:e.example,method:e.item,type:e.type}))),this.evaluation=JSON.parse(JSON.stringify(Km)))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),await this.callAPI("get_list_method_parent_autoFee",{number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(this.all_method_data.support_method=e.items.map(((e,t)=>({title:e.caption,value:e.code_id,selected:"AF"===e.code_id,mode:"AF"===e.code_id}))),this.callGetListMetodChild(e.items).then((e=>{this.setState({all_method_data:e.all_method_data,list_parent_tree:e.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),e.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{await this.callAPI("test_method_autoFee",{workflow_id:"TRD_EXPRESSION_TEST_AUTOFEE",expression:this.state.value_code,number_of_step:1}).then((e=>{if(e.hasError)s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);t.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),t.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}}}})}render(){const e=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(e,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:vm,extensions:[jg(),Xm],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const tv=ev;var iv;const ov=Sl(((e,t,i)=>{let{from:o,to:a,text:s}=e.state.doc.lineAt(t),n=t,r=t;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===t&&i<0||r===t&&i>0)return null;let l=av(e.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(e){let t=document.createElement("div");t.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",t.appendChild(i),t.appendChild(o)),t.appendChild(a),{dom:t}}}:void 0})),av=e=>{for(let t=0;t<iv.length;t++){let i=iv[t];if(i.value===e||i.value===e+"()")return i}};class sv extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callGetListMetodChild=async e=>{let t={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(e.map((async e=>{await this.callAPI("get_list_method_child_AutoFee",{code_index_from:"AF"===e.code_id?3:null,code_index_to:"AF"===e.code_id?3:null,code_name:e.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((e=>({title:e.caption,value:e.code_id})));t.list_parent_tree=t.list_parent_tree.concat(o),t.all_method_data[e.code_id]=this.getListMethodChild(i.items,e.code_id)}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}))),new Promise((e=>{e(t)}))},this.getListMethodChild=(e,t)=>{let i=[];for(let o=0;o<e.length;o++){let a={title:e[o].caption,value:e[o].code_id,selected:"AF"!==t||0===o,data:[]};"AF"===t&&0===o&&this.setState({module_code:e[o].code_id});for(let t=0;t<this.evaluation.length;t++)this.evaluation[t].type===e[o].code_id&&a.data.push(this.evaluation[t]);i.push(a)}return i},this.handleChooseMethod=e=>{let t=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=e.method;this.setState({value_code:i+a+o,last_pos:t+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:t+(-1!==a.indexOf("()")?a.length-1:a.length),head:t+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=e=>{let{all_method_data:t}=this.state;for(let i=0;i<t.support_method.length;i++)t.support_method[i].selected=t.support_method[i].value===e.value;this.setState({all_method_data:t})},this.abs_OpenMethod=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)if(i[e][o].value===t.value){i[e][o].selected=!i[e][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)i[e][o].selected=i[e][o].value===t;this.setState({all_method_data:i,module_code:t})},this.abs_Change=e=>{this.setState({data_code:e})},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,i),(0,N.Yr)(a,{}).then((e=>s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1})}))},this.onChange=e=>{this.setState({value_code:e})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluationAutoFee",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"CRD_IFC_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(iv=e.items.map(((e,t)=>({title:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],value:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],caption:e.caption,example:e.example,method:e.item,type:e.type}))),this.evaluation=JSON.parse(JSON.stringify(iv)))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),await this.callAPI("get_list_method_parent_autoFee",{number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(this.all_method_data.support_method=e.items.map(((e,t)=>({title:e.caption,value:e.code_id,selected:"AF"===e.code_id,mode:"AF"===e.code_id}))),this.callGetListMetodChild(e.items).then((e=>{this.setState({all_method_data:e.all_method_data,list_parent_tree:e.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),e.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{await this.callAPI("test_method_autoFee",{workflow_id:"CRD_IFC_EXPRESSION_TEST_AUTOFEE",expression:this.state.value_code,number_of_step:1}).then((e=>{if(e.hasError)s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);t.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),t.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}}}})}render(){const e=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(e,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:vm,extensions:[jg(),ov],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const nv=sv;var rv;const lv=Sl(((e,t,i)=>{let{from:o,to:a,text:s}=e.state.doc.lineAt(t),n=t,r=t;for(;n>o&&/\w/.test(s[n-o-1]);)n--;for(;r<a&&/\w/.test(s[r-o]);)r++;if(n===t&&i<0||r===t&&i>0)return null;let l=cv(e.state.doc.slice(n,r).text[0]);return l?{pos:n,end:r,above:!0,create(e){let t=document.createElement("div");t.className="malibu-codemirror-tooltip";let i=document.createElement("div");i.className="malibu-codemirror-tooltip-title",i.textContent=l.title;let o=document.createElement("div");o.className="malibu-codemirror-tooltip-desc",o.textContent=l.caption;let a=document.createElement("div");return a.textContent=l.example,-1===l.method.indexOf("()")&&(a.className="malibu-codemirror-tooltip-example",t.appendChild(i),t.appendChild(o)),t.appendChild(a),{dom:t}}}:void 0})),cv=e=>{for(let t=0;t<rv.length;t++){let i=rv[t];if(i.value===e||i.value===e+"()")return i}};class dv extends o.Component{constructor(e){var t;super(e),t=this,this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callGetListMetodChild=async e=>{let t={list_parent_tree:this.list_parent_tree,all_method_data:this.all_method_data};return await Promise.all(e.map((async e=>{await this.callAPI("get_list_method_child_AutoFee",{code_index_from:"AF"===e.code_id?3:null,code_index_to:"AF"===e.code_id?3:null,code_name:e.code_id,number_of_step:1}).then((i=>{if(i.hasError)s.ZP.showToast((s.ZP.isDebug()&&i.error_data[0].code?i.error_data[0].code+": ":"")+i.error_data[0].info,!1,!1);else{let o=i.items.map((e=>({title:e.caption,value:e.code_id})));t.list_parent_tree=t.list_parent_tree.concat(o),t.all_method_data[e.code_id]=this.getListMethodChild(i.items,e.code_id)}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}))),new Promise((e=>{e(t)}))},this.getListMethodChild=(e,t)=>{let i=[];for(let o=0;o<e.length;o++){let a={title:e[o].caption,value:e[o].code_id,selected:"AF"!==t||0===o,data:[]};"AF"===t&&0===o&&this.setState({module_code:e[o].code_id});for(let t=0;t<this.evaluation.length;t++)this.evaluation[t].type===e[o].code_id&&a.data.push(this.evaluation[t]);i.push(a)}return i},this.handleChooseMethod=e=>{let t=this.codemirrorRef.current.view.state.selection.ranges[0].from,i=this.state.value_code.substring(0,this.codemirrorRef.current.view.state.selection.ranges[0].from),o=this.state.value_code.substring(this.codemirrorRef.current.view.state.selection.ranges[0].to,this.state.value_code.length),a=e.method;this.setState({value_code:i+a+o,last_pos:t+(-1!==a.indexOf("()")?a.length-1:a.length)},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:t+(-1!==a.indexOf("()")?a.length-1:a.length),head:t+(-1!==a.indexOf("()")?a.length-1:a.length)}})}),100)}))},this.abs_OpenMethodSystem=e=>{let{all_method_data:t}=this.state;for(let i=0;i<t.support_method.length;i++)t.support_method[i].selected=t.support_method[i].value===e.value;this.setState({all_method_data:t})},this.abs_OpenMethod=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)if(i[e][o].value===t.value){i[e][o].selected=!i[e][o].selected;break}this.setState({all_method_data:i})},this.abs_ChooseEntity=(e,t)=>{let{all_method_data:i}=this.state;for(let o=0;o<i[e].length;o++)i[e][o].selected=i[e][o].value===t;this.setState({all_method_data:i,module_code:t})},this.abs_Change=e=>{this.setState({data_code:e})},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,i),(0,N.Yr)(a,{}).then((e=>s.ZP.foGetData(o,e)?s.ZP.foGetData(o,e):{error_data:s.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1})}))},this.onChange=e=>{this.setState({value_code:e})},this.FormEvaluation=(0,_.Iq)("formEvaluation"),this.key_form="formEvaluationAutoFee",this.codemirrorRef=o.createRef(),this.evaluation=[],this.list_parent_tree=[],this.all_method_data={},this.state={all_method_data:{},list_parent_tree:[],visibility:"",isLoading:!1,value_code:this.props.data_select.value_component,last_pos:0,infoA:{lang_form:{vi:s.ZP.getLang("formEvaluation_title"),en:s.ZP.getLang("formEvaluation_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!0},show_toast:"snackbar",check_msg:!1}}async componentDidMount(){s.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.ZP.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("get_all_active_method",{workflow_id:"PMT_IFC_EVALUATION_GETALL_ACTIVE",number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(rv=e.items.map(((e,t)=>({title:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],value:-1===e.item.indexOf(".")?e.item:e.item.split(".")[1],caption:e.caption,example:e.example,method:e.item,type:e.type}))),this.evaluation=JSON.parse(JSON.stringify(rv)))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),await this.callAPI("get_list_method_parent_autoFee",{number_of_step:1}).then((async e=>{e.hasError?s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1):(this.all_method_data.support_method=e.items.map(((e,t)=>({title:e.caption,value:e.code_id,selected:"AF"===e.code_id,mode:"AF"===e.code_id}))),this.callGetListMetodChild(e.items).then((e=>{this.setState({all_method_data:e.all_method_data,list_parent_tree:e.list_parent_tree},(()=>{setTimeout((()=>{this.codemirrorRef.current.view.focus(),this.codemirrorRef.current.view.dispatch({selection:{anchor:this.state.value_code.length,head:this.state.value_code.length}})}),1e3)}))})))})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)})),void 0!==this.props.set_call_form_back&&void 0!==this.props.infoA_parent&&setTimeout((()=>{var e=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),e.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})}),s.ZP.getTimeAddComponent())}getDataForm(){return(0,u.Z)((0,u.Z)({cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"},form:{dataFull:{config:{default:{title:""}},cmd:{visibility:"",isLoading:this.state.isLoading}}},component_config:{title:this.props.data_select.title_component,data:this.state.data_code,abs_Change:this.abs_Change},abs_ChooseMethod:this.handleChooseMethod,abs_OpenMethodSystem:this.abs_OpenMethodSystem,abs_OpenMethod:this.abs_OpenMethod,abs_ChooseEntity:this.abs_ChooseEntity},this.state.all_method_data),{},{list_parent_tree:this.state.list_parent_tree,btn_cancel:{dataFull:{config:{default:{title:"Cancel",type:"primary",class:"col-sm-2"}},abs_Click:()=>{void 0!==this.props.infoA_parent&&s.ZP.getFormAppAuto(this.props.infoA_parent.key_form).callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}}},btn_accept:{dataFull:{config:{default:{title:"Accept",type:"primary",class:"col-sm-2"},cmd:{disable:this.props.data_select.cmd_component.disabled+""==="true"}},abs_Click:async()=>{await this.callAPI("test_method_autoFee",{workflow_id:"PMT_IFC_EXPRESSION_TEST_AUTOFEE",expression:this.state.value_code,number_of_step:1}).then((e=>{if(e.hasError)s.ZP.showToast((s.ZP.isDebug()&&e.error_data[0].code?e.error_data[0].code+": ":"")+e.error_data[0].info,!1,!1);else if(void 0!==this.props.infoA_parent){var t=s.ZP.getFormAppAuto(this.props.infoA_parent.key_form);t.callDirFromSupport("setAdvanced",{list_component:this.props.infoA_parent.componentParent.code},this.state.value_code),t.callDirFromSupport("modalToggle",{codeHidden:this.props.infoA_parent.componentParent.codeHidden},{isClose:!0})}})).catch((e=>{s.ZP.isDebug()&&console.log("err",e)}))}}}})}render(){const e=this.FormEvaluation;return(0,c.jsx)(o.Fragment,{children:(0,c.jsx)(e,{stateData:(0,u.Z)({},this.getDataForm()),children:(0,c.jsx)(ng,{id:"CodeMirror",value:this.state.value_code,height:"100%",width:"100%",theme:vm,extensions:[jg(),lv],readOnly:this.props.data_select.cmd_component.disabled+""==="true"?"nocursor":"",onChange:this.onChange,ref:this.codemirrorRef})})})}}const hv=dv,uv=(e,t,a,n,r)=>{if(null!=e.form_code&&!s.ZP.openForm(e.form_code)){if(Ct(e))return;switch(e.form_code){case"designForm":l.ZP.quickPost([{txcode:"#sys:bo-load-designForm",input:{}}],{});break;case"paraServer":l.ZP.quickPost([{txcode:"#sys:bo-load-allParaServer",input:{}}],{});break;case"flow_bo":l.ZP.quickPost([{txcode:"#sys:bo-load-allTxBo",input:{}}],{});break;case"flow_fo":l.ZP.quickPost([{txcode:"#sys:bo-load-allTxFo",input:{}}],{});break;case"designDataBase":!function(){var e=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(h,{data:(0,s.Wc)(),mapping_key:e},e))}();break;case"roleMatrix":l.ZP.quickPost([{txcode:"#sys:bo-load-allRoleSystem",input:{para_data:"role_system"}}],{});break;case"roleUser":l.ZP.quickPost([{txcode:"#sys:bo-load-roleUser",input:{}}],{});break;case"roleBo":l.ZP.quickPost([{txcode:"#sys:bo-load-roleBo",input:{}}],{});break;case"myDevice":l.ZP.quickPost([{txcode:"#sys:bo-load-device",input:{user_id:(0,s.CO)()}}],{});break;case"systemLicense":!function(){var e=s.ZP.autoID();let t=s.ZP.context_get("user_acc");t.user_portal&&t.user_portal.license;let a=o.lazy((()=>i.e(2754).then(i.bind(i,2754))));s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(a,{mapping_key:e,data:t.user_portal.licence},e)},e))}();break;case"langApplication":!function(){for(var e=s.ZP.getConfigUserDefault("list_lang_config"),t="",i=0;i<e.length;i++)t+=""===t?e[i].key:";"+e[i].key;l.ZP.quickPost([{txcode:"#sys:bo-load-langAll",input:{lang_data:t}}],{})}();break;case"eLearning":(0,N.Yr)([{txcode:"#sys:bo-load-eLearning",input:{}}],{}).then((e=>{var t=s.ZP.foGetData("temple_elearning",e),i=s.ZP.foGetData("data",e),o=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(xt.default,{temple_elearning:t,data:i,mapping_key:o},o))}),(e=>{}));break;case"langManagerGlobal":!function(){for(var e=s.ZP.getConfigUserDefault("list_lang_config"),t="",i=0;i<e.length;i++)t+=""===t?e[i].key:";"+e[i].key;(0,N.Yr)([{txcode:"#designform:bo-designForm-getAll"},{txcode:"#sys:bo-load-langAll",input:{lang_data:t}}],{}).then((t=>{let i=s.ZP.foGetData("list_form",t),a=s.ZP.foGetData("list_app",t),n={};e.forEach((e=>{n[e.key]=s.ZP.foGetData(`lang_data_${e.key}`,t)}));var r=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Pt,{list_lang_data:n,list_forms:i,list_app:a,mapping_key:r},r)},r))}),(e=>{}))}();break;case"activity":(0,N.Yr)([{txcode:"#designform:bo-designForm-getAll"}],{}).then((e=>{let t=s.ZP.foGetData("list_form",e),i=s.ZP.foGetData("list_app",e);var a=s.ZP.autoID();s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Nt,{list_forms:t,list_app:i,mapping_key:a},a)},a))}),(e=>{}));break;case"test_123987654":!function(){var e=s.ZP.autoID();(0,N.Yr)([{txcode:"#designform:bo-designForm-getAll"}],{}).then((t=>{let i=s.ZP.foGetData("list_form",t),a=s.ZP.foGetData("list_app",t);s.ZP.newForm((0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)("div",{}),children:(0,c.jsx)(Lt,{list_form_ne:i,list_app_ne:a,mapping_key:e})},e))}))}();break;default:const d=(0,s.R3)(e.form_code);if(void 0===d)(0,N.Yr)([{txcode:"#sys:bo-load-formId",input:{form_id:e.form_code}}],t,!0).then((i=>{var o=s.ZP.foGetData("form_design_detail",i),l=s.ZP.foGetData("loadRoleTask",i);if(void 0!==l?(0,s._d)(e.form_code,l):(0,s._d)(e.form_code,{}),null!=o){(0,s.bn)(e.form_code,o);const i=(0,s.R3)(e.form_code),l=mv(e);let c={data_form:"",learnapi_form:"",learnsql_form:"",bo_data_form:"",lazy_load:(0,s.VU)(e.form_code)};void 0!==l.data&&(c.data_form=l.data),void 0!==l.learnapi&&(c.learnapi_form=l.learnapi),void 0!==l.learnsql&&(c.learnsql_form=l.learnsql),void 0!==l.bodata&&(c.bo_data_form=l.bodata),fv(c,e.form_code,i,l,void 0,t,a,n,r)}}),(e=>{}));else{const i=mv(e);let o={data_form:"",learnapi_form:"",learnsql_form:"",bo_data_form:"",lazy_load:(0,s.VU)(e.form_code)};void 0!==i.data&&(o.data_form=i.data),void 0!==i.learnapi&&(o.learnapi_form=i.learnapi),void 0!==i.learnsql&&(o.learnsql_form=i.learnsql),void 0!==i.bodata&&(o.bo_data_form=i.bodata),fv(o,e.form_code,d,i,void 0,t,a,n,r)}}}},pv=(e,t,i,o,n,r)=>{switch(void 0===i&&(i={}),e){case"form_evaluation":case"form_evaluation_DPT":case"form_evaluation_CRD":case"form_evaluation_PMT":case"form_evaluation_TRD":case"form_evaluationAutoFee":case"form_evaluationAutoFee_DPT":case"form_evaluationAutoFee_CRD":case"form_evaluationAutoFee_PMT":case"form_evaluationAutoFee_TRD":_v(e,t,i,o,n,r);break;default:var l=(0,s.R3)(e);if(void 0===l)(0,N.Yr)([{txcode:"#sys:bo-load-formRole",input:{form_id:e}},{txcode:"#sys:bo-load-formId",input:{form_id:e}}],{}).then((l=>{var d=s.ZP.foGetData("form_design_detail",l),h=s.ZP.foGetData("loadRoleTask",l);if(void 0!==h&&(0,s._d)(e,h),void 0!==d){(0,s.bn)(e,d);const l=(0,s.R3)(e),h=(0,s.x1)(e);let u={data_form:"",learnapi_form:"",learnsql_form:"",bo_data_form:"",lazy_load:(0,s.VU)(e)};void 0!==h.data&&(u.data_form=h.data),void 0!==h.learnapi&&(u.learnapi_form=h.learnapi),void 0!==h.learnsql&&(u.learnsql_form=h.learnsql),void 0!==h.bodata&&(u.bo_data_form=h.bodata),""===u.data_form&&""===u.learnapi_form&&""===u.learnsql_form&&""===u.bo_data_form&&"{}"===JSON.stringify(u.lazy_load)?void 0===t?a.render((0,c.jsx)(B,{form_code:e,data_select:r,conf:l,infoA:h},(0,s.cb)()),t):a.render((0,c.jsx)(B,{form_code:e,infoA_parent:i,ofModal:!0,set_call_form_back:n,componentConfigDefault:o,conf:l,data_select:r,infoA:h},(0,s.cb)()),t):fv(u,e,l,h,t,i,o,n,r)}}),(e=>{}));else{const d=(0,s.x1)(e);let h={data_form:"",learnapi_form:"",learnsql_form:"",bo_data_form:"",lazy_load:(0,s.VU)(e)};void 0!==d.data&&(h.data_form=d.data),void 0!==d.learnapi&&(h.learnapi_form=d.learnapi),void 0!==d.learnsql&&(h.learnsql_form=d.learnsql),void 0!==d.bodata&&(h.bo_data_form=d.bodata),""===h.data_form&&""===h.learnapi_form&&""===h.learnsql_form&&""===h.bo_data_form&&"{}"===JSON.stringify(h.lazy_load)?void 0===t?a.render((0,c.jsx)(B,{form_code:e,conf:l,infoA:d},(0,s.cb)()),t):a.render((0,c.jsx)(B,{form_code:e,infoA_parent:i,ofModal:!0,set_call_form_back:n,componentConfigDefault:o,conf:l,infoA:d},(0,s.cb)()),t):fv(h,e,l,d,t,i,o,n,r)}}},_v=(e,t,i,n,r,l)=>{var d=s.ZP.autoID();switch(e){case"form_evaluation":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(Ug,{mapping_key:d,data_select:l,form_code:e,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),t);break;case"form_evaluation_DPT":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(Wg,{mapping_key:d,data_select:l,form_code:e,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),t);break;case"form_evaluation_CRD":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(om,{mapping_key:d,data_select:l,form_code:e,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),t);break;case"form_evaluation_PMT":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(lm,{mapping_key:d,data_select:l,form_code:e,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),t);break;case"form_evaluation_TRD":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(Xg,{mapping_key:d,data_select:l,form_code:e,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),t);break;case"form_evaluationAutoFee":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(Hm,{mapping_key:d,data_select:l,form_code:e,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),t);break;case"form_evaluationAutoFee_DPT":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(qm,{mapping_key:d,data_select:l,form_code:e,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),t);break;case"form_evaluationAutoFee_CRD":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(nv,{mapping_key:d,data_select:l,form_code:e,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),t);break;case"form_evaluationAutoFee_PMT":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(hv,{mapping_key:d,data_select:l,form_code:e,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),t);break;case"form_evaluationAutoFee_TRD":a.render((0,c.jsx)(o.Suspense,{fallback:(0,_.wz)(),children:(0,c.jsx)(tv,{mapping_key:d,data_select:l,form_code:e,infoA_parent:i,ofModal:!0,set_call_form_back:r,componentConfigDefault:n},d)},d),t)}};function fv(e,t,i,o,n,r,l,d,h){var u=[];void 0!==e.data_form&&(u=e.data_form.split(";"));for(var p={},_=0;_<u.length;_++)void 0===p[u[_]]&&""!==u[_]&&(p[u[_]]=u[_]);var f="";for(var g in p)s.ZP.checkHasData(g)||(""===f?f=g:f+=";"+g);var m="";if(""!==e.learnapi_form){var v=[];void 0!==e.learnapi_form&&(v=e.learnapi_form.split(";"));for(var b={},y=0;y<v.length;y++)""!==v[y].trim()&&(b[v[y].trim()]="one");for(var A in b)m+=""===m?A:";"+A}var D="";if(""!==e.learnsql_form){var k=[];void 0!==e.learnsql_form&&(k=e.learnsql_form.split(";"));for(var O={},w=0;w<k.length;w++)""!==k[w].trim()&&(O[k[w].trim()]="one");for(var C in O)D+=""===D?C:";"+C}if(void 0===e.bo_data_form&&(e.bo_data_form=""),void 0===e.lazy_load&&(e.lazy_load={}),e.data_form=f,e.learnapi_form=m,e.learnsql_form=D,""===e.data_form&&""===e.learnsql_form&&""===e.learnapi_form&&""===e.bo_data_form&&"{}"===JSON.stringify(e.lazy_load)){var x=s.ZP.autoID();void 0===n?s.ZP.newForm((0,c.jsx)(B,{mapping_key:x,data_select:h,form_code:t,conf:i,infoA:o,set_call_form_back:d,infoA_parent:r,componentConfigDefault:l,ofModal:!1},x)):a.render((0,c.jsx)(B,{mapping_key:x,data_select:h,form_code:t,set_call_form_back:d,infoA_parent:r,componentConfigDefault:l,ofModal:!0,conf:i,infoA:o},x),n)}else""===e.bo_data_form?gv(t,i,o,n,r,l,d,h,e):(0,N.Yr)([{txcode:e.bo_data_form,input:{}}],r,!0).then((a=>{gv(t,i,o,n,r,l,d,h,e)}),(e=>{}))}function gv(e,t,i,o,n,r,l,d,h){void 0!==h&&(""===h.data_form&&delete h.data_form,""===h.learnapi_form&&delete h.learnapi_form,""===h.learnsql_form&&delete h.learnsql_form,""===h.bo_data_form&&delete h.bo_data_form,void 0!==h.lazy_load&&(0===h.lazy_load.c_cdlist.length&&delete h.lazy_load.c_cdlist,0===Object.keys(h.lazy_load).length&&delete h.lazy_load)),(0,N.Yr)([{txcode:"#sys:bo-load-data",input:{table_code:h.data_form,request_data:h,data_select:d}},{txcode:"#sys:bo-load-dataLazy",input:{request_data:h}}],n,!0).then((h=>{let u=s.ZP.foGetData("data_select_result",h);if(void 0===d&&(d={}),void 0!==u)for(var p in u)d[p]=u[p];var _=s.ZP.autoID();void 0===o?s.ZP.newForm((0,c.jsx)(B,{mapping_key:_,form_error:h.form_error,data_select:d,form_code:e,conf:t,infoA:i,set_call_form_back:l,infoA_parent:n,componentConfigDefault:r,ofModal:!1},_)):a.render((0,c.jsx)(B,{mapping_key:_,form_error:h.form_error,data_select:d,set_call_form_back:l,form_code:e,infoA_parent:n,componentConfigDefault:r,ofModal:!0,conf:t,infoA:i},_),o);var f=s.ZP.getParameterSystem("SHOW_GETINFO_ERROR");if(void 0!==f&&f&&void 0!==h){let e=s.ZP.foGetData("infoError",h);void 0!==e&&s.ZP.showToast((s.ZP.isDebug()&&e[0].code?e[0].code+": ":"")+e[0].info,!1)}}),(e=>{}))}const mv=e=>null!=e.form_code?(0,s.x1)(e.form_code):[]},3745:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>s});var o=i(5842),a=i(1896);class s{static quickPost(e,t){(0,a.Yr)(e,t).then((e=>{}),(e=>{}))}static fo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};e=o.ZP.convertFoOfApp_fo_arr(e);for(let a=0;a<e.length;a++){let t=e[a];if(void 0!==t.txcode){if(!o.ZP.BlackList_check("tx_fo",t.txcode))return;let s=e[a];void 0!==s.txcode&&void 0===o.ZP.getTxFo(t.txcode)&&(i[s.txcode]=s.txcode)}}let s="";for(let o in i)""===s?s=o:s+=";"+o;i=o.ZP.convertFoOfApp_fo_check(i),""===s?this.runTx(e,t):(0,a.Yr)([{txcode:"#sys:bo-load-txFo",input:{list_tx:s}}],t).then((a=>{if(void 0!==a.fo&&a.fo.length>0&&void 0!==a.fo[0].input){let e=a.fo[0].input;if(void 0!==e.txClient)for(let t=0;t<e.txClient.length;t++)void 0!==e.txClient[t].txcode&&void 0!==e.txClient[t].actions&&(delete i[e.txClient[t].txcode],-1===a.fo[0].txcode.indexOf(e.txClient[t].txcode)?o.ZP.addTxFo(e.txClient[t].txcode,e.txClient[t]):o.ZP.addTxFo(a.fo[0].txcode,e.txClient[t]))}let s="";for(let e in i)o.ZP.BlackList_add("tx_fo",e),s+=""===s?e:";"+e;""!==s?o.ZP.AppException("#libClient001",s,"system"):this.runTx(e,t)}),(e=>{}))}static createContext(e,t,i,o){return{infoA:t,infoA_parent:i,componentConfigDefault:o,data:e}}static runActionWithContext(e,t,i,a,s){if(void 0!==i&&void 0!==s){let n=this.createContext(t,i,a,s),r=i.key_form+s.codeHidden;o.ZP.addTxFo(r,{input:{},actions:e,status:"A",txtype:"bo",txcode:r,txname:""}),this.runTx([{txcode:r,input:{}}],n)}}static runFoWithContext(e,t,i,o,a){if(void 0!==i&&void 0!==a){let s={infoA:i,infoA_parent:o,componentConfigDefault:a,data:t};this.fo(e,s)}}static checkFo(e){if(void 0!==e){let t=o.ZP.convertFoOfApp_fo_arr_no_app(e);for(let e=0;e<t.length;e++){let i=t[e];if(void 0!==i.txcode&&!o.ZP.checkSystemModeLock_bo_fo(i.txcode,void 0))return!1}}return!0}static runTx(e,t,i){if(!this.checkFo(e))return;let a=0,s=!0;void 0!==i&&s&&(a=i.fo_arr_step,e=i.fo_arr,t=i.context);for(let l=a;l<e.length;l++){let a=e[l];if(void 0!==a.txcode){let c={};void 0!==a.input&&(c=a.input);let d=o.ZP.getTxFo(a.txcode);if(void 0!==d&&d.actions){let h=d.actions,u={},p=[],_=0;void 0!==i&&s&&(u=i.input_fo,_=i.fo_step,p=i.list_bo_new);for(let d=_;d<h.length;d++)if(void 0!==h[d].function){let _=h[d].function.split(".");if(_.length>=2){let f,g={};if(void 0!==i&&s&&(f=i.val_select,g=i.input_action),void 0===f){let i=null;try{i=new(o.ZP.txBasic_get()[_[0].trim()])(t,a.input,g,d,l,u,p,e)}catch(r){o.ZP.AppException("#libClient003",_[0].trim(),"system")}if(null===i||void 0===i)return;if(i.hasOwnProperty(_[1].trim()))if(void 0!==h[d].para){let e=h[d].para,t=o.ZP.supportReplaceFo(o.ZP.cloneJson(c),{});for(let i=0;i<e.length;i++){let o=e[i];o.length>0&&"@"===o.substring(0,1)&&(e[i]=n(o.substring(1,o.length),t))}f=i[_[1].trim()].apply(i,Array.prototype.slice.call(e,0))}else f=i[_[1].trim()]();else o.ZP.BlackList_check("function",h[d].function)&&(o.ZP.BlackList_add("function",h[d].function),o.ZP.AppException("#libClient002",h[d].function,"system"));g=i.getInputAction()}if(void 0!==f){if("systemStop"===f)return;f=f.toString()}else f="_default_";if(void 0!==g)for(let e in g)u[e]=g[e];if(void 0!==h[d].request){if(void 0!==f&&void 0!==h[d].request[f]&&void 0!==h[d].request[f].cmd){if("stop"===h[d].request[f].cmd)return}this.buildBoFormAction(p,h[d].request,f,g,void 0,c)}}s=!1}void 0!==d.request&&this.buildBoFormAction(p,void 0,void 0,u,d.request,c),void 0!==p&&p.length>0&&this.quickPost(p,t)}}}}static buildBoFormAction(e,t,i,o,a,s){let n;if(void 0===a?(void 0!==i&&void 0!==t[i]&&(n=t[i]),void 0===n&&void 0!==t._default_&&(n=t._default_)):n=a,void 0!==n&&void 0!==n.bo&&n.bo.length>0)for(let r=0;r<n.bo.length;r++){let t=n.bo[r];if(void 0!==t.txcode&&""!==t.txcode.trim()){let i={};for(let e in o)i[e]=o[e];if(void 0!==t.input){let e=t.input;e=this.loopRepaceData(e,s);for(let o in t.input)i[o]=t.input[o]}e[e.length]={txcode:t.txcode,input:i}}}}static loopRepaceData(e,t){if(void 0!==e&&void 0!==t)for(let i in e)switch(Object.prototype.toString.call(e[i])){case"[object String]":let o=e[i];o.length>0&&"@"===o.substring(0,1)&&(e[i]=r(o.substring(1,o.length),t));break;case"[object Number]":case"[object Boolean]":default:break;case"[object Array]":if(e[i].length>0)for(let a=0;a<e[i].length;a++)e[i][a]=this.loopRepaceData(e[i][a],t);break;case"[object Object]":e[i]=this.loopRepaceData(e[i],t)}return e}}const n=(e,t)=>{if(!e.includes("."))return t[e];{let i=e.split(".");if(i.length>1){let e=t;for(let t=0;t<i.length;t++){if(void 0===e[i[t]])return;e=e[i[t]]}return e}}},r=(e,t)=>t[e]},1372:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{QH:()=>checkConditions});const checkConditions=(data,condition)=>{if(""!==condition.trim())try{return eval("let wf="+JSON.stringify(data)+";"+condition)}catch(_unused){return!1}return!0},checkConditionsNoContext=condition=>{if(""!==condition.trim())try{return eval(condition)}catch(_unused2){return!1}return!0};class libConditions{}},84:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var o=i(5842);class a{static analyticsTable(e){if(void 0!==e)for(var t in e){var i=(0,o.Ot)(t);if(void 0!==i){if(null!=i.detail)for(var a=i.detail,s=0;s<a.length;s++){var n=a[s];void 0!==n.code&&void 0!==n.datapk&&void 0!==n.autoseq&&void 0!==n.type&&(void 0!==e[t][n.code]?n.autoseq:"true"===n.datapk&&("object"!==typeof e[t]&&(e[t]={}),e[t][n.code]=o.ZP.autoID()),void 0!==n.fileid&&"true"===n.fileid&&(e[t].AFGHkeyIndexWJ=e[t][n.code]))}void 0===e[t].AFGHkeyUserCreateWJ&&(e[t].AFGHkeyUserCreateWJ=o.ZP.context_get("user_jwebui.user_id")),void 0!==e[t].AFGHkeyIndexWJ&&""!==e[t].AFGHkeyIndexWJ||(e[t].AFGHkeyIndexWJ=o.ZP.autoID()),e[t].AFGHkeyTime=o.ZP.getLongTime(),void 0===e[t].AFGHkeyWorkFlow&&(e[t].AFGHkeyWorkFlow="")}}return e}}},4200:(e,t,i)=>{"use strict";i.d(t,{Qv:()=>s,X7:()=>r,ZP:()=>l,ji:()=>a,p6:()=>n});var o=i(5842);function a(e,t){if(void 0!==t&&void 0!==e){if("dd/mm/yyyy"===t.trim())return function(e){let t=e.split("/");if(t.length>=3){let e=new Date(`${t[2]}/${t[1]}/${t[0]}`);if(void 0!==e&&null!=e)return e.getTime()}return null}(e)}return null}function s(e,t){if(void 0!==e&&void 0!==t){let i=new Date(e),o=t.trim();if(null!=i&&"ISOString"===o)return i.toISOString()}return null}function n(e,t){return window.moment(e).format(t)}function r(e,t,i,a){if(""===e)return"";if(Number(e))e=Number(e);else{var s,n;let t=o.ZP.getParameterSystem("TIMEZONE")||"+0700";e=Number(a?null===(s=window.moment.utc(e))||void 0===s?void 0:s.valueOf():null===(n=window.moment(e,i))||void 0===n?void 0:n.utcOffset(t).toDate().getTime())}var r=window.moment(e);for(const o in t)if(t.hasOwnProperty(o)){const e=t[o];r=window.moment(r.add(e,o))}return r.valueOf()}class l{}l.getFullYear=e=>new Date(Number(e)).getFullYear()},6633:(e,t,i)=>{"use strict";i.d(t,{AH:()=>d,Al:()=>l,FT:()=>m,FW:()=>g,Nx:()=>v,Ui:()=>b,X2:()=>f,cI:()=>r,ec:()=>s,jl:()=>_,ng:()=>c,sx:()=>u,w5:()=>n,xY:()=>p});var o=i(5842);function a(e){return/\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d/.test(e)}function s(e,t,i){var s,n,r,l;let c=o.ZP.getParameterSystem("TIMEZONE")||"+0700";if(void 0===e||null===e||""===e||0===e)return 0;Number(e)||e.endsWith("Z")||(e+=(a(e)?"":" ")+c);let d="MM/DD/YYYY HH:mm:ss";-1!==o.ZP.getMyDevice().browser.indexOf("Chrome")&&(d="MM/DD/YYYY HH:mm:ss.SSS");let h=null===(s=window.moment(e,t))||void 0===s?void 0:s.format(d);var u,p,_,f;0===t.indexOf("DD")&&void 0!==e&&null!==e&&(h=(null===(u=e)||void 0===u?void 0:u.substring(3,6))+(null===(p=e)||void 0===p?void 0:p.substring(0,3))+(null===(_=e)||void 0===_?void 0:_.substring(6,null===(f=e)||void 0===f?void 0:f.length)));switch(i){case"utc":return null===(n=window.moment.utc(e,t))||void 0===n?void 0:n.toDate().getTime();case"time_zone_user":return null===(r=window.moment(h+(a(h)?"":" ")+c))||void 0===r?void 0:r.utcOffset(c).valueOf();default:return null===(l=window.moment(h+(a(h)?"":" ")+c))||void 0===l?void 0:l.valueOf()}}function n(e,t,i){var s,n,r,l;let c=o.ZP.getParameterSystem("TIMEZONE")||"+0700",d=h(null===(s=o.ZP.context_get("user_acc"))||void 0===s?void 0:s.time_zone);if(void 0==e||null===e||""===e)return"";let u,p="MM/DD/YYYY HH:mm:ss";switch(-1!==o.ZP.getMyDevice().browser.indexOf("Chrome")&&(p="MM/DD/YYYY HH:mm:ss.SSS"),i){case"utc":e+="Z",u=null===(n=window.moment.utc(e,t))||void 0===n?void 0:n.valueOf();break;case"time_zone_user":e+=(a(e)?"":" ")+d;let i=null===(r=window.moment(e,t))||void 0===r?void 0:r.format(p);u=new Date(i+(a(i)?"":" ")+d).getTime();break;default:e+=(a(e)?"":" ")+c;let o=null===(l=window.moment(e,t))||void 0===l?void 0:l.format(p);u=new Date(o+(a(o)?"":" ")+c).getTime()}return u}function r(e,t){var i;return null===(i=window.moment.utc(e,t))||void 0===i?void 0:i.toDate().getTime()}function l(e,t,i,a){var s,n;let r=o.ZP.getParameterSystem("TIMEZONE")||"+0700",l=null===(s=window.moment(e,t))||void 0===s?void 0:s.utcOffset(r).toDate().getTime();var c,d;return e.endsWith("Z")?(l=null===(c=window.moment.utc(e,t))||void 0===c?void 0:c.utcOffset(r).toDate().getTime(),null===(d=window.moment.utc(l))||void 0===d?void 0:d.format(i)):null===(n=window.moment(l))||void 0===n?void 0:n.format(i)}function c(e,t,i){var a,s;h(null===(a=o.ZP.context_get("user_acc"))||void 0===a?void 0:a.time_zone);if(void 0==e||null===e||""===e)return"";e.includes(":")||(e+=" 00:00:00");let n="MM/DD/YYYY HH:mm:ss";return-1!==o.ZP.getMyDevice().browser.indexOf("Chrome")&&"MM/DD/YYYY HH:mm:ss.SSS",e+="Z",null===(s=window.moment.utc(e,t))||void 0===s?void 0:s.valueOf()}function d(e,t,i){let a=o.ZP.getParameterSystem("TIMEZONE")||"+0700";var s;return null!==e&&void 0!==e?null===(s=window.moment(e))||void 0===s?void 0:s.utcOffset(a).format(t):""}function h(e){let t="",i=!1,o=(e%1).toFixed(2),a=e-o;(o<0||a<0)&&(i=!0,o=-o,a=-a);let s=60*o;return t+=s,s<10&&(t="0"+t),t=a+t,a<10&&(t="0"+t),(i?"-":"+")+t}function u(e,t,i){var a,s,n;let r=o.ZP.getParameterSystem("TIMEZONE")||"+0700",l=h(o.ZP.context_get("user_acc").time_zone);if(null===e||void 0===e||""===e)return"";switch(i){case"utc":return null===(a=window.moment.utc(e))||void 0===a?void 0:a.format(t);case"time_zone_user":return null===(s=window.moment(e))||void 0===s?void 0:s.utcOffset(l).format(t);default:return null===(n=window.moment(e))||void 0===n?void 0:n.utcOffset(r).format(t)}}function p(e){if(void 0===e||null===e||""===e)return"";if(0===e)return 0;return Number(e)||e.endsWith("Z")||(e.includes(":")||(e+=" 00:00:00"),e+=(a(e)?"":" ")+o.ZP.getParameterSystem("TIMEZONE")||"+0700"),new Date(e).getTime()}function _(e,t){var i;return null!==e&&void 0!==e?null===(i=window.moment.utc(e))||void 0===i?void 0:i.format(t):""}function f(e,t){var i,o;return null!==e&&void 0!==e?arguments.length>2&&void 0!==arguments[2]&&arguments[2]?null===(i=window.moment.utc(e))||void 0===i?void 0:i.format(t):null===(o=window.moment(e))||void 0===o?void 0:o.format(t):""}function g(e,t,i){let s=o.ZP.getParameterSystem("TIMEZONE")||"+0700";var n;return null!==e&&void 0!==e?(Number(e)||e.endsWith("Z")||(e+=(a(e)?"":" ")+s),null===(n=window.moment(Number(new Date(e).getTime())))||void 0===n?void 0:n.utcOffset(s).format(t)):""}function m(e,t){var i;return null!==e&&void 0!==e&&""!==e?null===(i=window.moment.utc(Number(e)))||void 0===i?void 0:i.format(t):""}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".";if(Number.isNaN(e)||void 0===e||null===e||""===e)return;let a=e=e.toString(),s="",n=e.lastIndexOf(o);-1!==n&&(a=e.substring(0,n),a=a.replace(/^-0+/,""),a=a.replace(/^0+/,""),s=e.substring(n,e.length),""===a&&(a="0")),a=a.replace(/\D/g,""),s=s.replace(/\D/g,"");let r=`${a}.${Number(`0.${s}`).toFixed(t).split(".")[1]||""}`;a=r.split(".")[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`),e.includes("-")&&(a="-"+a),s=r.split(".")[1];let l=`${a}${o}${s}`;return""===s&&(l=a),""!==l?l:void 0}function b(e,t){if(!e||!t)return"";let i="",o=0;for(let a=0;a<t.length;a++)"-"===t[a]?i+="-":o<e.length?i+=e[o++]:i+=t[a];return i}},7904:(e,t,i)=>{"use strict";i.d(t,{Ft:()=>v,JF:()=>y,R2:()=>m,ZP:()=>p,fe:()=>b,h1:()=>A,yw:()=>g});var o=i(3745),a=i(5842),s={ctrlKey:{Period:{fo:[{txcode:"#sys:fo-keyboard-openDebug",input:{}}],context:{}},117:{fo:[{txcode:"fo-open-latestTransaction",input:{}}],context:{}}},altKey_ctrlKey:{},altKey:{},shiftKey:{Slash:{fo:[{txcode:"#sys:fo-open-modal-keyboard",input:{}}],context:{}}},shiftKey_altKey:{},shiftKey_ctrlKey:{},shiftKey_altKey_ctrlKey:{},metaKey_shiftKey_altKey_ctrlKey:{},metaKey_shiftKey_altKey:{},metaKey_shiftKey_ctrlKey:{},metaKey_altKey_ctrlKey:{},metaKey_altKey:{},metaKey_ctrlKey:{},metaKey_shiftKey:{},metaKey:{}},n=!1,r=[],l=[],c=0,d={metaKey:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,code:"",keyCode:-1},h={},u=["cm-content","jsoneditor-field","jsoneditor-value","public-DraftEditor-content"];class p{static startKeyboard(e){document.addEventListener("keyup",_),document.addEventListener("keydown",f)}}function _(e){n||"textarea"===document.activeElement.localName||"input"===document.activeElement.localName||Array.from(document.activeElement.classList).some((e=>u.indexOf(e)>=0))||(16===e.keyCode?c++:c=0,-1!==a.ZP.getMyDevice().osVersion.toLocaleLowerCase().replace(" ","").indexOf("macos")&&!0===d.metaKey&&"Meta"===e.key?(d.metaKey&&d.shiftKey&&d.altKey&&d.ctrlKey&&16!==d.keyCode&&91!==d.keyCode&&93!==d.keyCode&&18!==d.keyCode&&17!==d.keyCode?D("metaKey_shiftKey_altKey_ctrlKey",d.code):d.shiftKey&&d.altKey&&d.ctrlKey&&16!==e.keyCode&&18!==e.keyCode&&17!==e.keyCode?D("shiftKey_altKey_ctrlKey",e.code):d.metaKey&&d.shiftKey&&d.altKey&&16!==d.keyCode&&18!==d.keyCode&&91!==d.keyCode&&93!==d.keyCode?D("metaKey_shiftKey_altKey",d.code):d.metaKey&&d.ctrlKey&&d.shiftKey&&17!==d.keyCode&&16!==d.keyCode&&91!==d.keyCode&&93!==d.keyCode?D("metaKey_shiftKey_ctrlKey",d.code):d.metaKey&&d.ctrlKey&&d.altKey&&17!==d.keyCode&&18!==d.keyCode&&91!==d.keyCode&&93!==d.keyCode?D("metaKey_altKey_ctrlKey",d.code):d.shiftKey&&d.metaKey&&16!==d.keyCode&&91!==d.keyCode&&93!==d.keyCode?D("metaKey_shiftKey",d.code):d.ctrlKey&&17!==d.keyCode&&d.metaKey&&91!==d.keyCode&&93!==d.keyCode?D("metaKey_ctrlKey",d.code):d.altKey&&18!==d.keyCode&&d.metaKey&&91!==d.keyCode&&93!==d.keyCode?D("metaKey_altKey",d.code):d.metaKey&&91!==d.keyCode&&93!==d.keyCode&&D("metaKey",d.code),d={metaKey:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,code:"",keyCode:-1}):e.metaKey&&e.shiftKey&&e.altKey&&e.ctrlKey&&16!==e.keyCode&&91!==e.keyCode&&93!==e.keyCode&&18!==e.keyCode&&17!==e.keyCode?D("metaKey_shiftKey_altKey_ctrlKey",e.code):e.shiftKey&&e.altKey&&e.ctrlKey&&16!==e.keyCode&&18!==e.keyCode&&17!==e.keyCode?D("shiftKey_altKey_ctrlKey",e.code):e.metaKey&&e.shiftKey&&e.altKey&&16!==e.keyCode&&18!==e.keyCode&&91!==e.keyCode&&93!==e.keyCode?D("metaKey_shiftKey_altKey",e.code):e.metaKey&&e.ctrlKey&&e.shiftKey&&17!==e.keyCode&&16!==e.keyCode&&91!==e.keyCode&&93!==e.keyCode?D("metaKey_shiftKey_ctrlKey",e.code):e.metaKey&&e.ctrlKey&&e.altKey&&17!==e.keyCode&&18!==e.keyCode&&91!==e.keyCode&&93!==e.keyCode?D("metaKey_altKey_ctrlKey",e.code):e.ctrlKey&&e.altKey&&17!==e.keyCode&&18!==e.keyCode?D("altKey_ctrlKey",e.code):e.ctrlKey&&e.shiftKey&&17!==e.keyCode&&16!==e.keyCode?D("shiftKey_ctrlKey",e.code):e.shiftKey&&e.altKey&&16!==e.keyCode&&18!==e.keyCode?D("shiftKey_altKey",e.code):e.shiftKey&&e.metaKey&&16!==e.keyCode&&91!==e.keyCode&&93!==e.keyCode?D("metaKey_shiftKey",e.code):e.ctrlKey&&17!==e.keyCode&&e.metaKey&&91!==e.keyCode&&93!==e.keyCode?D("metaKey_ctrlKey",e.code):e.altKey&&18!==e.keyCode&&e.metaKey&&91!==e.keyCode&&93!==e.keyCode?D("metaKey_altKey",e.code):e.ctrlKey&&17!==e.keyCode?191===e.keyCode?a.ZP.callFocusSearchGlobal():D("ctrlKey",e.code):e.altKey&&18!==e.keyCode?D("altKey",e.code):e.shiftKey&&16!==e.keyCode?49===e.keyCode||50===e.keyCode||51===e.keyCode||52===e.keyCode||53===e.keyCode||54===e.keyCode||55===e.keyCode||56===e.keyCode||57===e.keyCode?(e.preventDefault(),a.ZP.callOpenFormIndex(e.keyCode-49)):D("shiftKey",e.code):e.metaKey&&91!==e.keyCode&&93!==e.keyCode?D("metaKey",e.code):2===c?D("double",e.keyCode):113===e.keyCode||115===e.keyCode||117===e.keyCode||118===e.keyCode||119===e.keyCode||120===e.keyCode?D("",e.code):122===e.keyCode&&(e.preventDefault(),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()))}function f(e){n||"textarea"===document.activeElement.localName||"input"===document.activeElement.localName||Array.from(document.activeElement.classList).some((e=>u.indexOf(e)>=0))||-1!==a.ZP.getMyDevice().osVersion.toLocaleLowerCase().replace(" ","").indexOf("macos")&&!0===e.metaKey&&91!==e.keyCode&&93!==e.keyCode&&16!==e.keyCode&&17!==e.keyCode&&18!==e.keyCode&&d.code!==e.code&&(d.metaKey=e.metaKey,d.altKey=e.altKey,d.shiftKey=e.shiftKey,d.ctrlKey=e.ctrlKey,d.code=e.code,d.keyCode=e.keyCode)}function g(e){r=e,s={ctrlKey:{Period:{fo:[{txcode:"#sys:fo-keyboard-openDebug",input:{}}],context:{}},117:{fo:[{txcode:"fo-open-latestTransaction",input:{}}],context:{}}},altKey_ctrlKey:{},altKey:{},shiftKey:{Slash:{fo:[{txcode:"#sys:fo-open-modal-keyboard",input:{}}],context:{}}},shiftKey_altKey:{},shiftKey_ctrlKey:{},shiftKey_altKey_ctrlKey:{},metaKey_shiftKey_altKey_ctrlKey:{},metaKey_shiftKey_altKey:{},metaKey_shiftKey_ctrlKey:{},metaKey_altKey_ctrlKey:{},metaKey_altKey:{},metaKey_ctrlKey:{},metaKey_shiftKey:{},metaKey:{}},e.forEach((e=>{if(e.form_code&&(h[e.form_code]=e.keystrokes),"sys"!==e.app){let t=e.keystrokes.split("+"),i="",o="";for(let e=0;e<t.length;e++){const a=t[e];switch(a){case"metaKey":o+="metaKey_";break;case"shiftKey":o+="shiftKey_";break;case"altKey":o+="altKey_";break;case"ctrlKey":o+="ctrlKey_";break;default:i+=a}}o=o.substring(0,o.length-1),""!==o?(s[o][i]={fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:e.form_code}}],context:{}},-1!==i.indexOf("Numpad")?s[o][i.replace("Numpad","Digit")]={fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:e.form_code}}],context:{}}:-1!==i.indexOf("Digit")&&(s[o][i.replace("Digit","Numpad")]={fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:e.form_code}}],context:{}})):(s[i]={fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:e.form_code}}],context:{}},-1!==i.indexOf("Numpad")?s[i.replace("Numpad","Digit")]={fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:e.form_code}}],context:{}}:-1!==i.indexOf("Digit")&&(s[i.replace("Digit","Numpad")]={fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:e.form_code}}],context:{}}))}})),a.ZP.callReBuildMenu()}function m(){return r}function v(e){l=e}function b(){return h}function y(){return l}function A(e){return n=e}function D(e,t){void 0!==s&&(""!==e?void 0!==s[e]&&void 0!==s[e][t]&&void 0!==s[e][t].fo&&o.ZP.fo(s[e][t].fo,{context:s[e][t].context}):void 0!==s[t]&&void 0!==s[t].fo&&o.ZP.fo(s[t].fo,{context:s[t].context}))}},9676:(e,t,i)=>{"use strict";i.d(t,{Iq:()=>n,RP:()=>s,hr:()=>r,sX:()=>c,wz:()=>l});var o=i(7313),a=i(6417);function s(e){return window.obManagerTemplate_libManagerTemplate.managerTemplate_getComponent(e)}function n(e){return window.obManagerTemplate_libManagerTemplate.managerTemplate_getForm(e)}function r(e){return window.obManagerTemplate_libManagerTemplate.managerTemplate_getCard(e)}function l(){let e=window.obManagerTemplate_libManagerTemplate.managerTemplate_getComponent("uFormBeginLoading");return(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(e,{})})}function c(e){return window.obManagerTemplate_libManagerTemplate.managerTemplate_changeSkin(e)}},5760:(e,t,i)=>{"use strict";i.d(t,{O:()=>s,t:()=>n});var o=i(5842),a=!0;const s=()=>{window.addEventListener("online",(()=>{a=!0,(0,o.zF)(!1,{}),document.body.classList.remove("isOffline")})),window.addEventListener("offline",(()=>{a=!1,(0,o.zF)(!0,{title:"#MsgSystem_client_offline",btn:"",list_fo:"",list_fo_start:"",color:"warning"}),document.body.classList.add("isOffline")}))},n=()=>a},9425:(e,t,i)=>{"use strict";function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",s=arguments.length>4?arguments[4]:void 0;if(o||"."===i||(o="."),void 0===e||null===e||""===e)return"";let n=e=e.toString(),r="",l=e.lastIndexOf(o);if(-1!==l&&(n=e.substring(0,l),n=n.replace(/^-0+/,""),n=n.replace(/^0+/,""),r=e.substring(l,e.length),""===n&&(n="0")),n=n.replace(/\D/g,""),r=r.replace(/\D/g,""),!1===s&&(r=String(r).substring(0,t)),""===r)for(let a=0;a<t;a++)r+="0";let c=a(`0.${r}`,t).toFixed(t),d=`${Number(n)+Number(c.split(".")[0])}.${c.split(".")[1]||""}`;n=d.split(".")[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`),e.includes("-")&&(n="-"+n),r=d.split(".")[1];let h=`${n}${o}${r}`;return""===r&&(h=n),""===h?"":h}i.d(t,{Nx:()=>o,XG:()=>s});const a=(e,t)=>{if((""+e).includes("e")){var i=(""+e).split("e"),o="";return+i[1]+t>0&&(o="+"),+(Math.round(+i[0]+"e"+o+(+i[1]+t))+"e-"+t)}return+(Math.round(e+"e+"+t)+"e-"+t)};function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",o=e+"";if(t){let e=new RegExp("\\"+t,"g");o=o.replace(e,"")}if(i){let e=new RegExp("\\"+i,"g");o=o.replace(e,".")}let a=Number(o);if(!Number.isNaN(a)&&""!==e)return a}},1896:(e,t,i)=>{"use strict";i.d(t,{BH:()=>d,OU:()=>u,SQ:()=>h,Yr:()=>l,bq:()=>c});var o=i(2633),a=i(5842),s=i(3745),n=i(516),r=i(3702);function l(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(((n,r)=>{let l=new o.Z,c="",d="",h="",u="";void 0!==t&&(void 0!==t.infoA&&(void 0!==t.infoA.title&&(d=t.infoA.title),void 0!==t.infoA.form_code&&(c=t.infoA.form_code)),void 0!==t.componentConfigDefault?(void 0!==t.componentConfigDefault.name&&(u=t.componentConfigDefault.name),void 0===t.componentConfigDefault.code&&void 0===t.componentConfigDefault.codeHidden||(h=t.componentConfigDefault.codeHidden)):void 0!==t.debug_info&&(void 0!==t.debug_info.from_action_code&&(h=t.debug_info.from_action_code),void 0!==t.debug_info.from_action_name&&(u=t.debug_info.from_action_name))),void 0!==t.infoA_parent&&void 0!==t.infoA_parent.form_code&&(c="",h="");let p="";p=void 0!==t.key_feedback?t.key_feedback:a.ZP.autoUui_key_feedback(),l.setBo(e,p);let _=a.ZP.getOncePacked();0!==_?(_++,a.ZP.setOncePacked(_)):_=0,l.setMoreInfo({from_action_code:h,from_action_name:u,form_code:c,form_name:d,oncepacked:_,oncepacked_id:a.ZP.autoID()});let f={Accept:"*/*","Content-Type":"application/json-patch+json"};for(const e in l.getInfo())f[e]=l.getInfo()[e];let g=l.getForTxCode(c,h),m=new Date,v={key_feedback:p,data:g,time:m,status:"G\u1eedi",form_code:c,form_name:d,from_action_code:h,from_action_name:u};a.ZP.isDebug()&&(0,a.U6)(v),a.ZP.isAssistant()&&a.ZP.assistant_add(v),h&&a.ZP.getLoadingCacheComponent(h)||(i&&void 0!==t&&void 0!==t.infoA_parent&&t.infoA_parent.key_form&&a.ZP.setLoadingForm("START",t.infoA_parent.key_form),a.ZP.setLoadingCache("START",h,""),fetch(l.info.u+"/Post",{method:"POST",body:JSON.stringify(g),headers:f}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.text()})).then((e=>{if(void 0===(e=JSON.parse(e)))return;let o=new Date;(0,a.ln)(JSON.stringify(e).length,m.getTime(),o.getTime());let r={key_feedback:p,data:e,time:o,status:"Nh\u1eadn",form_code:c,form_name:d,from_action_code:h,from_action_name:u};a.ZP.setLoadingCache("END",h,""),i&&void 0!==t&&void 0!==t.infoA_parent&&t.infoA_parent.key_form&&a.ZP.setLoadingForm("END",t.infoA_parent.key_form),a.ZP.isDebug()&&(0,a.U6)(r),a.ZP.isAssistant()&&a.ZP.assistant_add(r),s.ZP.fo(e.fo,t),n(e)})).catch((()=>{i&&a.ZP.setLoadingForm("END",t.infoA_parent.key_form),a.ZP.setLoadingCache("END",h,""),window.isShowErrorNetwork||window.showLoadingError("Something wrong while connect with service CMS! Please try again later"),r(e)})))}))}function c(e,t,i){return new Promise(((s,n)=>{let r=new o.Z,l=new FormData,c="",d="";void 0!==i&&(void 0!==i.infoA&&void 0!==i.infoA.form_code&&(c=i.infoA.form_code),void 0!==i.componentConfigDefault?void 0!==i.componentConfigDefault.codeHidden&&(d=i.componentConfigDefault.codeHidden):void 0!==i.debug_info&&void 0!==i.debug_info.from_action_code&&(d=i.debug_info.from_action_code));let h={from_action_code:d,form_code:c};r.setMoreInfo(h);let u={};for(const e in r.getInfo())u[e]=r.getInfo()[e];l.append("username",a.ZP.context_get("user_jwebui.user_id")),void 0===t&&(t=""),l.append("new_name_file",t),void 0!==i&&void 0!==i.infoA&&void 0!==i.infoA.key_form&&a.ZP.setLoadingForm("START",i.infoA.key_form),l.append("attachment",e),console.log("formData===",e),fetch(r.info.u+"/UploadFile",{method:"POST",body:l,headers:u}).then((e=>{let t;switch(void 0!==i&&void 0!==i.infoA&&void 0!==i.infoA.key_form&&a.ZP.setLoadingForm("END",i.infoA.key_form),e.status){case 200:return e.json();case 401:throw t={statusCode:401,statusText:"ERR_UNAUTHORIZED"},t;case 403:throw t={statusCode:403,statusText:"ERR_FORBIDDEN"},t;case 400:throw t={statusCode:400,statusText:"ERR_BAD_REQUEST"},t;default:throw new Error("Something went wrong")}})).then((e=>{s(e)})).catch((e=>{n(e)}))}))}function d(e,t){return new Promise(((i,s)=>{let n=new o.Z,r=new FormData,l={from_action_code:"",form_code:""};n.setMoreInfo(l);let c={};for(const e in n.getInfo())c[e]=n.getInfo()[e];r.append("file",e),console.log("formData===",r);var d=new XMLHttpRequest;d.open("POST",n.info.u+"/UploadFileZipNeptune",!0);let h=a.ZP.getFormAppAuto(t.key_form);d.onload=function(){if(200===d.status){let e=JSON.parse(JSON.parse(d.response));a.ZP.showToast(e.description||"Upload","error"!==e.status.toLowerCase(),!1)}else a.ZP.showToast(function(e){switch(e){case 401:return"401: ERR_UNAUTHORIZED";case 403:return"403: ERR_FORBIDDEN";case 400:return"400: ERR_BAD_REQUEST";default:return"Something went wrong"}}(d.status),!1,!1),console.error("Upload error:",d.status);void 0!==h&&h.hasOwnProperty("setLoadingAction")&&h.setLoadingAction(!1)},d.onerror=function(){a.ZP.showToast("Upload",!1),void 0!==h&&h.hasOwnProperty("setLoadingAction")&&h.setLoadingAction(!1),console.error("Request failed")},d.send(r)}))}function h(e){return new Promise(((t,i)=>{let a=new o.Z,s={from_action_code:"",form_code:""};a.setMoreInfo(s);let n={};for(const e in a.getInfo())n[e]=a.getInfo()[e];try{var l=new XMLHttpRequest;l.open("GET",a.info.u.replace("/api/Webchannel","/api/cache/get-by-key/")+e),l.setRequestHeader("Authorization","Bearer ");try{l.send()}catch(c){}l.onload=function(){if(200===l.status)try{let e=JSON.parse(l.response);if(null!==e.data){let i=JSON.parse(e.data);Array.isArray(i)?t(JSON.parse(e.data)):t([i])}else i(e.description)}catch(c){i(l.response)}else switch(l.status){case 401:throw r.Z={statusCode:401,statusText:"ERR_UNAUTHORIZED"},r.Z;case 403:throw r.Z={statusCode:403,statusText:"ERR_FORBIDDEN"},r.Z;case 400:throw r.Z={statusCode:400,statusText:"ERR_BAD_REQUEST"},r.Z}i(l.response)},l.onerror=function(e){i(e)}}catch(c){}}))}function u(e,t,i){return new Promise(((s,r)=>{let l=new o.Z,c=new FormData,d="",h="";void 0!==i&&(void 0!==i.infoA&&void 0!==i.infoA.form_code&&(d=i.infoA.form_code),void 0!==i.componentConfigDefault?void 0!==i.componentConfigDefault.codeHidden&&(h=i.componentConfigDefault.codeHidden):void 0!==i.debug_info&&void 0!==i.debug_info.from_action_code&&(h=i.debug_info.from_action_code));let u={from_action_code:h,form_code:d};l.setMoreInfo(u),c.append("username",a.ZP.context_get("user_jwebui.user_id")),void 0===t&&(t=""),c.append("new_name_file",(0,n.v9)(JSON.stringify(t))),c.append("attachment",e),c.append("info",(0,n.v9)(JSON.stringify(l.getInfo()))),fetch(l.info.u+"/upload-to-server",{method:"POST",body:c}).then((e=>{let t;switch(e.status){case 200:return e.json();case 401:throw t={statusCode:401,statusText:"ERR_UNAUTHORIZED"},t;case 403:throw t={statusCode:403,statusText:"ERR_FORBIDDEN"},t;case 400:throw t={statusCode:400,statusText:"ERR_BAD_REQUEST"},t;default:throw new Error("Something went wrong")}})).then((e=>{s(e)})).catch((e=>{r(e)}))}))}},1203:(e,t,i)=>{"use strict";i.d(t,{MK:()=>r,Qf:()=>n,xd:()=>l});var o=i(1896),a=(i(3745),i(5842)),s="";function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,n={};i||(i={}),s||(s={}),n=Object.assign(n,s),n=Object.assign(n,i);let r=[];e.split(",").forEach((e=>{void 0===a.ZP.template_getFromStore(e)&&r.push(e)})),(0,o.Yr)([{txcode:"#sys:bo-load-templePrint",input:Object.assign(n,{templates:r.join(",")})}],{}).then((e=>{let i=a.ZP.foGetData("list_templates",e),o=a.ZP.foGetData("ob_data",e);void 0!==i&&i.forEach((e=>{a.ZP.template_addToStore(e.code,e)})),t(o)}),(e=>{}))}function r(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s={};t||(t={}),i||(i={}),s=Object.assign(s,i),s=Object.assign(s,t),(0,o.Yr)([{txcode:"#sys:bo-create-data-passbook",input:s}],{}).then((t=>{let i=a.ZP.foGetData("ref_id",t);e(i)}),(e=>{}))}function l(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"false";""===s&&a.ZP.getParameterSystem("VOUCHER_URL")&&(s=a.ZP.getParameterSystem("VOUCHER_URL"));var o=["height="+window.screen.height,"width="+window.screen.width,"fullscreen=yes","resizable=yes","scrollbars=yes","toolbar=yes","menubar=yes","location=yes","top=0","left=0"].join(",");for(let r=0;r<e.length;r++){const l=e[r];var n="?"+a.ZP.encodeQueryData({report_code:l.split("&")[0],token:(0,a.VN)(),ref_id:t,order:l.split("&")[1],is_reversed:i});let c=window.open("","_blank",o);c&&c.document&&(c.document.write("<html><head>"),c.document.write('</head><body onload="goToReportURL()">'),c.document.write("<script>function goToReportURL(){ window.location.replace('"+s+n+"')}<\/script>"),c.document.write("</body></html>"),c.document.close(),c.focus())}}},5764:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var o=i(5842);function a(e,t){var i={};i.key=t.key.trim();var o=e.split(t.key);return o.length>=2?(i.old=o[0].trim(),i.new=o[1].trim()):i.old=o[0].trim(),i}function s(e,t,i){var o={};for(var a in e)if(void 0!==e[a]){var s=e[a];if(void 0!==s)if(",*,"===t)for(var n in s)void 0!==s[n]&&(void 0===o[a]&&(o[a]={}),o[a][n]=s[n]);else if(t.includes(" as ")){if(i.length>0)for(var r=0;r<i.length;r++){var l=i[r];if(l.split(" as ").length>0)if("all"===l.split(" as ")[1]){if(a===l.split(" as ")[0])for(var c in s)o[c]=s[c]}else for(var d in s)l.includes(a+"."+d+" ")&&(o[l.split(" as ")[1]]=s[d])}}else for(var h in s)void 0!==s[h]&&t.includes(","+a+"."+h+",")&&(void 0===o[a]&&(o[a]={}),o[a][h]=s[h])}return o}class n{static AnalyticsQuery(e,t,i){var n={total:0,data:[]};if(void 0!==e&&""!==e.trim()){var r=o.ZP.jsonParser(e);if(void 0!==r){if(void 0!==r.data&&void 0!==r.select){let e=r.data,a=[];for(let t=0;t<e.length;t++){var l={data:[],table:e[t].table,alert:e[t].alert,join_column:e[t].join_column};let i=o.ZP.getData(e[t].table);if(void 0!==l.alert){for(let e=0;e<i.length;e++){let t={};t[l.alert]=i[e][l.table],l.data.push(t)}l.table=l.alert}else l.data=i;if(void 0!==e[t].data_add)if(void 0!==e[t].data_add.length)for(let a=0;a<e[t].data_add.length;a++)void 0!==e[t].data_add[a][l.table]&&void 0!==e[t].data_add[a][l.table][l.join_column]?l.data.push(e[t].data_add[a]):o.ZP.log(e[t].data_add[a],"Error AnalyticsQuery data_add "+l.table);else void 0!==e[t].data_add[l.table]&&void 0!==e[t].data_add[l.table][l.join_column]?l.data.push(e[t].data_add):o.ZP.log(e[t].data_add,"Error AnalyticsQuery data_add "+l.table);a.push(l)}var c=[];c=a.length>1?function(e,t){const i=t.data.reduce(((e,i)=>e.set(i[t.table][t.join_column],i)),new Map);return e.data.map((o=>{let a=i.get(o[e.table][e.join_column]);if(void 0!==a){let e={};return e=o,e[t.table]=a[t.table],e}}))}(a[0],a[1]):a[0];let s=[],d="";void 0!==r.where&&(d=r.where);for(let t=0;t<c.length;t++)if(void 0!==c[t]){let e=c[t];if(o.ZP.checkDynamicCondition(e,d)){let t={};for(let i=0;i<r.select.length;i++){let o=r.select[i];void 0!==o.alert_table&&void 0!==o.alert_column?(void 0===t[o.alert_table]&&(t[o.alert_table]={}),void 0!==e[o.table]&&(t[o.alert_table][o.alert_column]=e[o.table][o.column])):(void 0===t[o.table]&&(t[o.table]={}),void 0!==e[o.table]&&(t[o.table][o.column]=e[o.table][o.column]))}s.push(t)}}void 0!==r.sort&&r.sort.length>0&&s.sort(((e,t)=>{let i=0;for(let o=0;o<r.sort.length;o++){let a=r.sort[o];if(void 0!==e[a.table]&&void 0!==t[a.table]&&void 0!==e[a.table][a.column]&&void 0!==t[a.table][a.column])switch(a.type){case"string":i="ascending"===a.sort?i||e[a.table][a.column].localeCompare(t[a.table][a.column]):i||t[a.table][a.column].localeCompare(e[a.table][a.column]);break;case"number":i="ascending"===a.sort?i||e[a.table][a.column]-t[a.table][a.column]:i||t[a.table][a.column]-e[a.table][a.column]}}return i})),n.total=s.length,t+i>s.length?n.data=s.slice(t,s.length):n.data=s.slice(t,t+i)}}else{var d=function(e){var t={},i=e.split(" from ");if(i.length>=2){var o=i[0].trim().replace("\\s+"," ");if(t.col=o,""!==o){var s=i[1].trim();if(s.includes(" where ")||s.includes(" orderby ")||s.includes(" limitby ")||s.includes(" groupby ")){var n=function(e){var t=[];if(-1!==e.indexOf(" where ")){var i={};i.index=e.indexOf(" where "),i.key=" where ",t[t.length]=i}if(-1!==e.indexOf(" orderby ")){var o={};o.index=e.indexOf(" orderby "),o.key=" orderby ",t[t.length]=o}if(-1!==e.indexOf(" groupby ")){var a={};a.index=e.indexOf(" groupby "),a.key=" groupby ",t[t.length]=a}if(-1!==e.indexOf(" limitby ")){var s={};s.index=e.indexOf(" limitby "),s.key=" limitby ",t[t.length]=s}return t.sort((function(e,t){return e.index-t.index})),t}(s),r=a(s,n[0]);t.table=r.old,s=r.new;var l=r.key;if(n.length>=2){var c=a(s,n[1]);t[l]=c.old,s=c.new;var d=c.key;if(n.length>=3){var h=a(s,n[2]);t[d]=h.old,s=h.new;var u=h.key;if(n.length>=4){var p=a(s,n[3]);t[u]=p.old,t[p.key]=p.new}else t[u]=s}else t[d]=s}else t[l]=s}else t.table=s}}return void 0!==t.col&&void 0!==t.table?t:null}(e=e.substring(6).trim())||"",h=[];null!==d&&void 0!==d.table&&(h=function(e){for(var t=[],i=e.split(","),o=0;o<i.length;o++){var a=i[o],s={},n=a.trim();if(n.includes(" ")){var r=n.split(" ",2);s.table=r[0].trim(),s.alert=r[1].trim()}else s.table=a.trim(),s.alert=a.trim();t[t.length]=s}return t}(d.table)),null!==h&&void 0!==h||(h=[]);var u=[],p="";void 0!==d.col&&(p=d.col);var _=","+p+",",f=p.split(",");if(h.length>1);else if(1===h.length&&void 0!==h[0].alert){var g=o.ZP.getData(h[0].table);if(void 0!==g)for(var m=0;m<g.length;m++){var v={};v[h[0].alert]=g[m][h[0].table],u.push(v)}}if(void 0!==d.where&&(u=u.filter((e=>o.ZP.checkDynamicCondition(e,d.where)))),void 0!==d.orderby&&d.orderby.includes(".")){var b=d.orderby.split(".");if(b.length>0){var y=b[0],A=b[1];u.sort(((e,t)=>void 0!==e[y]&&void 0!==t[y]&&void 0!==e[y][A]&&void 0!==t[y][A]?e[y][A]-t[y][A]:0))}}void 0!==u&&u.length>0&&(n.total=u.length,t+i>u.length?n.data=u.slice(t,u.length):n.data=u.slice(t,t+i));for(var D=0;D<n.data.length;D++)n.data[D]=s(n.data[D],_,f)}}return n}}},516:(e,t,i)=>{"use strict";i.d(t,{OP:()=>s,v9:()=>a});var o=i(5842);function a(e){return function(e){var t=new window.JSEncrypt({default_key_size:2048});t.setPublicKey(o.ZP.rsa_getPublicKey());var i=245,a="",s=e;for(;s.length>0;){for(var n="",r=0,l=0;s.length>l;){var c=s.charCodeAt(l);if(c<128?r++:r+=c>127&&c<2048?2:3,r>=i)break;n+=s[l],l++}s=s.substring(l,s.length);let e="";e=t.encrypt(n),a+=""===a?e:"@@@"+e}return a}(e)}function s(e,t){if(function(e){if(""===e||void 0===e||null===e||""===e.trim())return!1;try{return btoa(atob(e))===e}catch(t){return!1}}(e)){const i=window.atob(e),o=new ArrayBuffer(i.length),a=new Uint8Array(o);for(let e=0;e<i.length;e++)a[e]=i.charCodeAt(e);const s=new Blob([a],{type:n(t)});return console.log("blob",s),s}return""}function n(e){switch(e){case"pdf":default:return"application/pdf";case"txt":case"json":case"text":case"docx":case"doc":return"text/plain";case"mp4":return"video/mp4";case"mp3":return"audio/mp3";case"xlsx":return""}}},1350:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var o=i(5842),a="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDB7MQCeFvDYGwAV6a6E0Q7N8Ptqq58CxXEcJufjDIcDtML7cs7KBqDA4SYtzkI/4HFUeqcQbWFyjd10nxxilOWX2/f+TK/Zdf9MNZoBHIEeqZ9WtG6+d2p4y3cSFg9B4vJZDlPLozPzXnmhblQCSQ8K7+p14EovD0wEOmFxTEVqQIDAQAB",s="MIICXAIBAAKBgQDB7MQCeFvDYGwAV6a6E0Q7N8Ptqq58CxXEcJufjDIcDtML7cs7KBqDA4SYtzkI/4HFUeqcQbWFyjd10nxxilOWX2/f+TK/Zdf9MNZoBHIEeqZ9WtG6+d2p4y3cSFg9B4vJZDlPLozPzXnmhblQCSQ8K7+p14EovD0wEOmFxTEVqQIDAQABAoGAF6F0WSC1fd9YCcqkhHQokla/R0zPKkpngqJ+NDjvOkAMM53sb+75HBHnrHxXNON9ur+6qQPQzNbRX0gg5e0HNktohLe1EixiEPG7CNaKgWx11nEWN6kRY0ffS+rc2aU6IN5r6pXF1//tw9pI7bJOvZwtwM5jeN2xe3UgnfQK+aECQQDhkjLfyATEU2XHvkrdMCuzLqs0pccLStLDVsyQJ424mli1dMeMGr+4vQEpvS4UR1lDLhYV1njfcT3maoeFnLIVAkEA3BW0yRdSqJAGZS8cp3BD4TNiXzXdxaLr2zi2BXwg6acx9py/fHo2XP/23D+USwP/WEXD1gumBBYWPdsGDIQ+RQJAZ3IroJLTFNIGQDcVkCByOgcx/r/z60rSI0EgKQ/qn3kxK241wRvXRrpu2RxoEGa0Gen9uOAVqKr/Lzc1lWHKDQJAJvEASASEb6bsOsMXQtkuaY55/Xa+gtXM/cEPE/FesXkP8h7SEuhc7h+sQlRNnOhcKfZOLHVrLpXp4Y/7hgNwMQJBAJL0REs/tE+/Wi9QvaH5B0EVbE6W59tq8PrX0JU7NSbXRhjIfgxDtcAOvJ37HguePsmSWQKh3lUGe79J02U0Ufk=";class n{static buildStoreHtml5_for_login(e,t,i,a,s,n){return encodeURIComponent(r(JSON.stringify({session_id_portal:a,session_id_app:i,device:o.ZP.getMyDevice(),app_code:e,configTemplate:t,token:n})))}static buildStoreHtml5_for_app(e){let t={};if(null!=e.searchParams.get("s")){t=JSON.parse(function(e){var t=new window.JSEncrypt({default_key_size:1024});t.setPrivateKey(s);var i=172,o="",a=e;for(;a.length>0;){var n=a.substring(0,i);a=a.substring(i),o+=t.decrypt(n)}return o}(e.searchParams.get("s")))}let i=window.location.hostname;return"www."===i.substr(0,4)&&(i=i.replace("www.","")),t.domain=i,t}}const r=e=>{var t=new window.JSEncrypt({default_key_size:1024});t.setPublicKey(a);for(var i="",o=e;o.length>0;){for(var s="",n=0,r=0;o.length>r;){var l=o.charCodeAt(r);if(l<128?n++:n+=l>127&&l<2048?2:3,n>=117)break;s+=o[r],r++}o=o.substring(r,o.length),i+=t.encrypt(s)}return i}},5842:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$5:()=>setAPPIcon,$z:()=>setMsgSystem,C9:()=>getReactTxt,CO:()=>getUserIDFind,Ez:()=>setUserIDFind,If:()=>getLangKey,LP:()=>getToken,Ot:()=>getDataBaseTable,PI:()=>getAllForm,Py:()=>getKey_APP,Qi:()=>setRoleOfUser,R3:()=>getForm,ST:()=>buildRoleOfForm,TS:()=>getStatusToken,T_:()=>setUserConfig,Tf:()=>setRoleCache,U6:()=>formChatBox_addDebug,VN:()=>getUserID,VQ:()=>getLang,VU:()=>form_getCDList,Wc:()=>getDataBase,Yh:()=>setLibDefault,ZP:()=>Application,ZU:()=>formChatBox_set,ZX:()=>getKey_D,_M:()=>getRoleOfUser,_N:()=>protocol_set,_d:()=>addRole,a4:()=>setUserConfigDefault,bn:()=>addForm,bp:()=>formChatBox_open,cb:()=>autoId,ch:()=>getWebSV,gD:()=>setRole,hP:()=>isMobile_set,iO:()=>setForm,iQ:()=>setStatusToken,ks:()=>setRoleApprove,ln:()=>calculatorBandwidth,n2:()=>formChatBox_setCopyToClipboard,o4:()=>setToken,t_:()=>port_set,tx:()=>getAPPIcon,uB:()=>lazyLoad,uC:()=>setUserID,v0:()=>hostname_set,x1:()=>getFormInfo,yN:()=>context_set,zF:()=>sendMsgSystem,zM:()=>setDataBase});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7313),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1168),_libQuery__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5764),_libClient__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3745),_libPost__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1896),_tx_coreTx__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(8209),_tx_basicTxCode__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2256),_libStoreHtml5__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1350),_libDatabaseSmart__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(84),_libNetwork__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5760),_libKeyboard__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(7904),array_move__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4419),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(6417),cache={user:{roles:[],role_cache:{},role_approve:{},config_of_user:{},config_of_user_default:{},session_id:"",token:"",portal_token:"",status_token:"I",user_id:0,my_device:{my_ip:"",screen:"",browser:"",browserVersion:"",browserMajorVersion:"",mobile:"",os:"",osVersion:"",cookies:""},user_profile:{}},config:{form_config:{},role_function:{},role_right:{},fo:{"#sys:fo-sys-showError":{id:49,input:{},actions:[{name:"Hi\u1ec3n th\u1ecb l\u1ed7i",function:"system.showError",type:"javascript",status:"A",para:[]}],request:{},status:null,txtype:null,txcode:"#sys:fo-sys-showError",version:1,updateTime:0x8dac88b139b9380,txname:"Th\xf4ng b\xe1o l\u1ed7i t\u1eeb server (Kh\xf4ng x\xf3a)",name:"",hasRole:"",isOld:!1,order:1,app:"sys"},"#sys:fo-form-clear":{id:45,input:{},actions:[{name:"X\xf3a tr\u1eafng d\u1eef li\u1ec7u form",function:"formAPI.clearForm",type:"javascript",status:"A",para:[]}],request:{},status:null,txtype:null,txcode:"#sys:fo-form-clear",version:1,updateTime:0x8dac88b139b9380,txname:"X\xf3a tr\u1eafng",name:"",hasRole:"",isOld:!1,order:1,app:"sys"}},fo_black_list:{tx_fo:{},function:{}},parameter_system:{},location:{hostname:"",protocol:"",port:""},isMobile:!1},app_config:{},data_schema:{},data:{},constData:{},form:{auto_form:{},list_auto_form:[],opening_forms:[],selected_form:{},last_open_form:{},shared_form_data:{},time_add_component:300,button_watting_action:5e3,mapping_dom_react:{}},lib_defaults:[],screens:[],websocket:{connectStatus:"Close",webSocket:null},notification:{},trace:[],protect:{key:"",bitwise:0,time_refresh:3e5,oncePacked:0},chat:{data_chat:[]},master_data:{},system_mode:{pin:!1,isLock:!1,reloginCount:0,reloginUserCount:0,safe:{fo:";fo-load-txFo;fo-protect-start;fo-load-bigData;fo-load-screen;fo-container;fo-scheduleJob-extendToken;",bo:";bo-load-txFo;"},mode:{lock:{fo:";fo-goto-pageLogin;fo-protect-key;",bo:";bo-relogin-login;bo-relogin-loginPin;bo-relogin-lockToken;"}}},rsa:{position_default:121,algorithm:{1:{drop:[1],id:"1",cross:{group:3,run:["02","10"],max:4},tag:{val:"AGhuk",start:100},crack:"aOiO"}},algorithm_response:{1:{translation:[4,5]}},privateKey:"",publicKey:"",count_change:0,max_use:30,template:{}},context:{time:0,user_jwebui:{},user_acc:{}},contextweb:{},store_html5:{},statusDebug:!1,assistant:{isRun:!0,dataAssistantSupport:[],max_data:20},scheduleJob:{job_run:{},job_config:{}},template_config:{},template_html:{},template_report:{},loading_cache:{component:{},form:{}},response_file:{file_name:"",file_name_exist:!1,buffer_data:"",buffer_status:!1}};let reconnectAttempts=0;const maxReconnectAttempts=5,reconnectDelay=1e3;var obj_component_render_config=void 0,obj_component_render_role=void 0,obj_component_render_property=void 0,obj_component_render_validate=void 0,obj_component_render_lang=void 0,modal_confirm=void 0,modal_compare=void 0,modal_keyboard=void 0,modal_keyboard_config=void 0,modal_dynamic_fromFromCode=void 0,form_relogin=void 0,form_relogin_timeout=void 0,form_chat=void 0,form_WChatBox=void 0,elearning_render_markdown=void 0,code_basicTxCode=_tx_basicTxCode__WEBPACK_IMPORTED_MODULE_5__.Z,list_jcontext=[],copyToClipboard=null,var_MsgSystem=null;const setMsgSystem=e=>{var_MsgSystem=e},sendMsgSystem=(e,t)=>{var_MsgSystem&&(document.body.classList.contains("hasMessageSystem")||document.body.classList.add("hasMessageSystem"),var_MsgSystem.activeMsg(e,t),Application.callAllScreenListen())},setDataBase=e=>{cache.data_schema=e},getDataBase=()=>({all_id_button:[]}),context_set=e=>{cache.context=e},getDataBaseTable=e=>{if(void 0!==cache.data_schema.all_id_button)for(var t=0;t<cache.data_schema.all_id_button.length;t++)if(cache.data_schema.all_id_button[t].type===e)return cache.data_schema.all_id_button[t]},setLibDefault=e=>{cache.lib_defaults=e},getLibDefault=e=>{for(var t=0;t<cache.lib_defaults.length;t++){var i=cache.lib_defaults[t];if(null!=i.code&&i.code===e)return i}},readFlowFunctionClientStep=(e,t,i)=>{for(var o=0;o<t.length;o++)if(null!=t[o].sourceId&&t[o].sourceId===e&&null!=t[o].targetId)for(var a=0;a<i.length;a++)if(null!=i[a].action_code&&i[a].action_code===t[o].targetId)return i[a]},getAllLibDefault=()=>cache.lib_defaults,setUserConfig=e=>{cache.user.config_of_user=e},getUserConfig=()=>cache.user.config_of_user,setUserConfigDefault=e=>{cache.user.config_of_user_default=e},getUserConfigDefault=()=>cache.user.config_of_user_default,getAllAppAuto=()=>cache.form.auto_form,getForm=e=>{if(null!=cache.config.form_config[e]&&null!=cache.config.form_config[e].list_layout)return cache.config.form_config[e].list_layout},form_getCDList=(e,t,i)=>{if("BO_015001001_Search"===e)return{c_cdlist:[]};if(null!=cache.config.form_config[e]&&null!=cache.config.form_config[e].list_layout){let t=cache.config.form_config[e].list_layout,i=[];for(let e=0;e<t.length;e++){let c=t[e].list_view;if(void 0!==c)for(let e=0;e<c.length;e++){let t=c[e].list_input;if(void 0!==t)for(let e=0;e<t.length;e++){let c=t[e];switch(c.inputtype){case"cTextInput":default:break;case"jSelect":if(void 0!==c.config&&void 0!==c.config.cdlist&&"cdlist"===c.config.data_mode&&void 0!==c.config.cdlist.cdgrp&&void 0!==c.config.cdlist.cdname){0===Application.data_cdList(c.config.cdlist.cdgrp,c.config.cdlist.cdname).length&&i.push({dbcoffee_create:!1,dbcoffee_col1:c.config.cdlist.cdgrp,dbcoffee_col2:c.config.cdlist.cdname})}break;case"cTableDefault":let e=Application.jsonParser(c.config.columns)||[];for(const s of e)if("ColumnCdlist"===s.inputtype||"ColumnSelectEdit"===s.inputtype){var o,a;const e=(null===(o=s.config)||void 0===o?void 0:o.cdgrp)||"",t=(null===(a=s.config)||void 0===a?void 0:a.cdname)||"";0===Application.data_cdList(e,t).length&&i.push({dbcoffee_create:!1,dbcoffee_col1:e,dbcoffee_col2:t})}break;case"jTableForm":let t=Application.jsonParser(c.config.columns)||[];for(const o of t)if("ColumnCdlist"===o.inputtype||"ColumnSelectEdit"===o.inputtype){var s,n;const e=(null===(s=o.config)||void 0===s?void 0:s.cdgrp)||"",t=(null===(n=o.config)||void 0===n?void 0:n.cdname)||"";0===Application.data_cdList(e,t).length&&i.push({dbcoffee_create:!1,dbcoffee_col1:e,dbcoffee_col2:t})}break;case"jTableSearch":let d=Application.jsonParser(c.config.columns)||[];for(const o of d)if("ColumnCdlist"===o.inputtype||"ColumnSelectEdit"===o.inputtype){var r,l;const e=(null===(r=o.config)||void 0===r?void 0:r.cdgrp)||"",t=(null===(l=o.config)||void 0===l?void 0:l.cdname)||"";0===Application.data_cdList(e,t).length&&i.push({dbcoffee_create:!1,dbcoffee_col1:e,dbcoffee_col2:t})}}}}}let c=[];return c=i,{c_cdlist:c}}return{}},getReactTxt=e=>{if(null!=cache.config.form_config[e]&&null!=cache.config.form_config[e].react_txt)return cache.config.form_config[e].react_txt},getFormInfo=e=>null!=cache.config.form_config[e]&&null!=cache.config.form_config[e].info?cache.config.form_config[e].info:{},getAllForm=()=>cache.config.form_config,addForm=(e,t)=>{cache.config.form_config[e]=t},setForm=e=>{cache.config.form_config=e},setRoleOfUser=e=>{null!==e&&(cache.user.roles=e)},getRoleOfUser=()=>cache.user.roles,setRoleCache=e=>{null!==e&&(cache.user.role_cache=e)},setRoleApprove=e=>{null!==e&&(cache.user.role_approve=e)},setUserID=e=>{null!==e&&(cache.user.session_id=e)},setToken=e=>{null!==e&&(cache.user.token=e)},setUserIDFind=e=>{null!==e&&(cache.user.user_id=e)},setPortalToken=e=>{null!==e&&(cache.user.portal_token=e)},getPortalToken=()=>cache.user.portal_token,setStatusToken=e=>{null!==e&&(cache.user.status_token=e)},getStatusToken=()=>cache.user.status_token,getUserID=()=>cache.user.session_id,getToken=()=>cache.user.token,getUserIDFind=()=>cache.user.user_id,buildRoleOfForm=e=>{for(var t=getRole(e),i={},o=0;o<cache.user.roles.length;o++)if(void 0!==t[cache.user.roles[o]]){var a=t[cache.user.roles[o]];for(var s in a)if(void 0===i[s])i[s]=a[s];else{var n=i[s];if(void 0!==a[s].role)for(var r in a[s].role)!0===a[s].role[r]&&void 0!==n.role&&(n.role[r]=!0);for(var l in a[s])void 0!==a[s][l]&&!0===a[s][l].install&&(n[l]=a[s][l]);i[s]=n}}cache.config.role_right[e]=i},addRole=(e,t)=>{cache.config.role_function[e]=null!=t?t:{}},setRole=e=>{cache.config.role_function=null!=e?e:{}},getRole=e=>void 0!==cache.config.role_function[e]?cache.config.role_function[e]:{},getKey_D=()=>cache.app_config.domain,getKey_APP=()=>cache.app_config.para.app_id,getAPPIcon=()=>cache.app_config.app_icon,setAPPIcon=e=>{cache.app_config.app_icon=e},getWebSV=()=>cache.app_config.server.web,getLangKey=()=>cache.app_config.para.language,getLang=e=>Application.isDebug()&&e?`(${e})`:null!=cache.app_config&&void 0!==cache.app_config.lang_data[cache.app_config.para.language]&&null!=cache.app_config.lang_data[cache.app_config.para.language]&&void 0!==cache.app_config.lang_data[cache.app_config.para.language][e]?cache.app_config.lang_data[cache.app_config.para.language][e]:""!==e?"#"+e:"",autoId=()=>{for(var e=""+(new Date).getTime()+(Math.floor(6e6*Math.random())+1),t="",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",o=0;o<e.length;o++){var a=Number(e[o]);if(0<=a&&a<=2&&e.length>o+1){var s=10*a+Number(e[o+1]);if(s>0&&s<52){t+=i[s],o++;continue}}t+=e[o]}return t},buildBitwiseFromProtect=()=>{var e=cache.protect.key;if(void 0!==e){for(var t=e.codePointAt(0),i=1;i<e.length;i++)t^=e.codePointAt(i);cache.protect.bitwise=t}},formChatBox_set=e=>{form_WChatBox=e},formChatBox_open=e=>{void 0!==form_WChatBox&&form_WChatBox.open(e)},formChatBox_addDebug=e=>{void 0!==form_WChatBox&&form_WChatBox.addDebug(e)},formChatBox_setCopyToClipboard=e=>{copyToClipboard=e},createStringID=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1),lazyLoad=e=>{let t=!1;for(let i in e){void 0===cache.data[i]&&(cache.data[i]=[]),"c_cdlist"===i&&(t=!0);let o=e[i];for(let e=0;e<o.length;e++){let a=o[e][i],s=!1;for(let e=0;e<cache.data[i].length;e++)if(t){let t=cache.data[i][e][i];if(void 0!==a.id&&void 0!==t.id&&a.id===t.id){t=a,s=!0;break}}else{let t=cache.data[i][e][i];if(void 0!==a.AFGHkeyIndexWJ&&void 0!==t.AFGHkeyIndexWJ&&a.AFGHkeyIndexWJ===t.AFGHkeyIndexWJ){t=a,s=!0;break}}s||cache.data[i].unshift(o[e])}}t&&Application.data_buildCdListQuick(cache.data.c_cdlist)},calculatorBandwidth=(e,t,i)=>{},hostname_set=e=>{cache.config.location.hostname=e},hostname_get=()=>cache.config.location.hostname,protocol_set=e=>{cache.config.location.protocol=e},protocol_get=()=>cache.config.location.protocol,port_set=e=>{cache.config.location.port=e},port_get=()=>cache.config.location.port,isMobile_set=e=>{cache.config.isMobile=e},isMobile_get=()=>cache.config.isMobile;class Application{constructor(){this.convertConfigWithContext=e=>{let t=e,i=Application.getlistCodeContext(e);for(const o of i){let e=Application.context_get(o.code)||"";t=t.replace(o.key,e),"number"===typeof e&&(t=Number(t))}return t}}static readHTML5RSA(){var e=new URL(window.location.href);cache.store_html5=_libStoreHtml5__WEBPACK_IMPORTED_MODULE_6__.Z.buildStoreHtml5_for_app(e)}static isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(i){}return t}static start(e){cache.app_config=e;var t="",i="";void 0!==cache.store_html5.token&&(t=cache.store_html5.token),void 0!==cache.store_html5.session_id_app&&(i=cache.store_html5.session_id_app),cache.app_config.para.app_id=cache.store_html5.app_code,void 0!==cache.store_html5.session_id_portal&&cache.store_html5.session_id_portal,void 0!==t&&null!=t&&""!==(t=t.trim())&&setToken(t),void 0!==i&&null!=i&&""!==(i=i.trim())&&setUserID(i),cache.app_config.domain=hostname_get(),cache.app_config.server.web=cache.app_config.server.web.replace("#",hostname_get()),cache.app_config.server.socket=cache.app_config.server.socket.replace("#",hostname_get()),(0,_libPost__WEBPACK_IMPORTED_MODULE_4__.Yr)([{txcode:"#sys:bo-protected-checkParameter",input:{}}],{}).then((e=>{void 0!==Application.foGetData("read_info_client",e)?(Application.setMyDevice(Application.foGetData("read_info_client",e)),Application.start_step2()):_libClient__WEBPACK_IMPORTED_MODULE_3__.ZP.fo([{txcode:"#sys:fo-goto-pageLogin",input:{}}],{})}),(e=>{}))}static start_step2(){(0,_libNetwork__WEBPACK_IMPORTED_MODULE_8__.O)(),window.addEventListener("fullscreenchange",(()=>{document.fullscreenElement?document.body.classList.contains("fullScreen")||document.body.classList.add("fullScreen"):document.body.classList.contains("fullScreen")&&document.body.classList.remove("fullScreen")})),Application.compareMyDevice()?Application.loadFoDefault():_libClient__WEBPACK_IMPORTED_MODULE_3__.ZP.fo([{txcode:"#sys:fo-goto-pageLogin",input:{line:"start_step2"}}],{})}static template_getConfigTemplate(){let e=window.obManagerTemplate_libManagerTemplate.managerTemplate_getDevie();return cache.store_html5.configTemplate[e]}static compareMyDevice(){let e=Application.getMyDevice(),t=cache.store_html5;if(void 0!==t.device){for(let i in t.device){if(void 0===e[i]||void 0===t.device[i])return!1;if(t.device[i]!==e[i])return!1}return!0}return!1}static encodeQueryData(e){const t=[];for(let i in e)t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")}static loadFoDefault(){""!==cache.app_config.fo_load?(0,_libPost__WEBPACK_IMPORTED_MODULE_4__.Yr)([{txcode:"#sys:bo-load-txFo",input:{list_tx:cache.app_config.fo_load}},{txcode:"#sys:bo-load-dyjs",input:{key_map:"start",key_position:""}},{txcode:"#sys:bo-load-allAppRoleOfUser",input:{key_map:"start",key_position:""}}],{}).then((e=>{var t=Application.foGetData("txClient",e);if(void 0!==t)for(var i=0;i<t.length;i++)Application.addTxFo(t[i].txcode,t[i]);_libKeyboard__WEBPACK_IMPORTED_MODULE_9__.ZP.startKeyboard(),Application.webSocketConnect()}),(e=>{})):(0,_libPost__WEBPACK_IMPORTED_MODULE_4__.Yr)([{txcode:"#sys:bo-load-dyjs",input:{key_map:"start",key_position:""}},{txcode:"#sys:bo-load-allAppRoleOfUser",input:{key_map:"start",key_position:""}}],{}).then((e=>{Application.webSocketConnect()}),(e=>{}))}static getMyDevice(){return cache.user.my_device}static showToast(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={},a=e;switch(t){case!0:i&&(a+=" successfully"),o={class_:"success",icon:"fa fa-check",title:a,time:(new Date).getTime()+"",description:a,data:{},action:{}};break;case!1:i&&(a+=" error"),o={class_:"error",icon:"fa fa-check",title:a,time:(new Date).getTime()+"",description:a,data:{},action:{}};break;case"fail":o={class_:"error",icon:"fa fa-check",title:a,time:(new Date).getTime()+"",description:a,data:{},action:{}};break;case void 0:i&&(a+=""),o={class_:"warning",icon:"fa fa-exclamation",title:a,time:(new Date).getTime()+"",description:a,data:{},action:{}}}Application.pushNotify("notifyToast",o,{}),Application.pushNotify("notifyDefault",o,{}),Application.callAllScreenListen()}static setMyDevice(e){void 0===cache.user.my_device&&(cache.user.my_device={});for(let t in e)cache.user.my_device[t]=e[t]}static checkIsPublic(){return!0}static getUrlLogin(){let e="";return e=Application.checkIsPublic()?isMobile_get()?window.location.origin+window.location.pathname+"?isMobile=true&app=login&cordovaProtocol="+protocol_get()+"&cordovaDomain="+hostname_get()+"&cordovaPort="+port_get()+"&b="+cache.app_config.para.app_id:"//"+cache.app_config.domain+cache.app_config.public.port+"/login?b="+cache.app_config.para.app_id:"//"+cache.app_config.domain+cache.app_config.dev.login_port+"/login?b="+cache.app_config.para.app_id,e}static getUrlLogin_ver2(){let e="";return e=Application.checkIsPublic()?isMobile_get()?window.location.origin+window.location.pathname+"?isMobile=true&app=login&cordovaProtocol="+protocol_get()+"&cordovaDomain="+hostname_get()+"&cordovaPort="+port_get():"//"+cache.app_config.domain+cache.app_config.public.port+"/login":"//"+cache.app_config.domain+cache.app_config.dev.login_port+"/login",e}static checkIsMobi(){return void 0!==cache.app_config.isMobi&&cache.app_config.isMobi}static gotoApp(e,t,i,o,a){let s="";return Application.checkIsPublic()?isMobile_get()?(console.log("is mobile ne"),s=window.location.origin+window.location.pathname+"?isMobile=true&app=app&cordovaProtocol="+protocol_get()+"&cordovaDomain="+hostname_get()+"&cordovaPort="+port_get()+"&s="+_libStoreHtml5__WEBPACK_IMPORTED_MODULE_6__.Z.buildStoreHtml5_for_login(e,t,i,o,a)):(console.log("k phai mobile"),s="//"+cache.app_config.domain+cache.app_config.public.port+"/app?s="+_libStoreHtml5__WEBPACK_IMPORTED_MODULE_6__.Z.buildStoreHtml5_for_login(e,t,i,o,a)):s="//"+cache.app_config.domain+cache.app_config.dev.app+"/?s="+_libStoreHtml5__WEBPACK_IMPORTED_MODULE_6__.Z.buildStoreHtml5_for_login(e,t,i,o,a),s}static setSessionTemp(e){void 0!==e&&(cache.user.session_id=e)}static getUserCode(){return cache.user.user_id}static loadParameterSystem(e){void 0===cache.config.parameter_system&&(cache.config.parameter_system={});for(var t=0;t<e.length;t++)void 0!==e[t].code&&(cache.config.parameter_system[e[t].code]=e[t]);let i=Application.getParameterSystem("button_watting_action");void 0!==i&&(cache.form.button_watting_action=i)}static getSessionFromStore(){return cache.user.session_id}static clearSessionStorage(){return localStorage.removeItem("session_id_"+cache.app_config.para.app_id)}static parameterSystem_start(){var e=Application.getParameterSystem("reloginCount");void 0!==e&&(cache.system_mode.reloginCount=e);var t=Application.getParameterSystem("reloginTimer");void 0!==t&&(window.addEventListener("mousemove",(()=>{Application.relogin_ResetTimer(t)})),window.addEventListener("keyup",(()=>{Application.relogin_ResetTimer(t)}))),"L"===getStatusToken()&&Application.relogin_lockScreen()}static relogin_up_loginFalse(){void 0===cache.system_mode.reloginUserCount&&(cache.system_mode.reloginUserCount=0),cache.system_mode.reloginUserCount++}static relogin_checkOverLoadLoginFalse(){return void 0!==cache.system_mode.reloginCount&&void 0!==cache.system_mode.reloginUserCount&&0!==cache.system_mode.reloginCount&&cache.system_mode.reloginUserCount>=cache.system_mode.reloginCount}static relogin_maxLoginFalse(){return cache.system_mode.reloginCount}static relogin_checkHasPinCode(){return void 0!==cache.system_mode.pin&&cache.system_mode.pin}static relogin_setHasPinCode(){cache.system_mode.pin=!0}static relogin_loginFalseCurrent(){return cache.system_mode.reloginUserCount}static relogin_resetCount(){cache.system_mode.reloginUserCount=0}static relogin_ResetTimer(e){void 0!==form_relogin_timeout&&clearTimeout(form_relogin_timeout),form_relogin_timeout=setTimeout((()=>{Application.relogin_getStatus()||Application.relogin_lockScreen()}),1e3*e*60)}static getParameterSystem(e){if(void 0===cache.config.parameter_system&&(cache.config.parameter_system={}),void 0!==cache.config.parameter_system[e]){var t=cache.config.parameter_system[e];if(void 0!==t.value&&void 0!==t.data_type)switch(t.data_type){case"s":return t.value;case"b":return"true"===t.value;case"n":return Number(t.value);default:return}}}static checkSystemModeLock_bo_fo(e,t){if(void 0!==e)return!!cache.system_mode.safe.fo.includes(";"+e+";")||(!cache.system_mode.isLock||!!cache.system_mode.mode.lock.fo.includes(";"+e+";"))}static jcontextAdd(e){list_jcontext.push(e)}static jcontextGetAll(){return list_jcontext}static setFormChat(e){form_chat=e}static getDataChatTemp(){return cache.chat.data_chat}static addDataChatTemp(e){cache.chat.data_chat[cache.chat.data_chat.length]=e}static addDataChatNew(e){for(var t=0;t<cache.chat.data_chat.length;t++)if(cache.chat.data_chat[t].id===e.id)return;if(cache.chat.data_chat[cache.chat.data_chat.length]=e,void 0!==form_chat)form_chat.hasOwnProperty("showChat")&&form_chat.showChat(e);else{const e=new Date;var i={icon:"fa-info-circle",color:"success",title:Application.getLang("systemTitle"),time:e.getTime()+"",description:Application.getLang("hasChat"),data:{},action:{}};Application.pushNotify("notifyToast",i,{}),Application.callAllScreenListen()}}static setStatusChat(e){if(void 0!==e.statusSend)for(var t=0;t<cache.chat.data_chat.length;t++)if(cache.chat.data_chat[t].id===e.data_chat.id)return cache.chat.data_chat[t].status=e.statusSend,void(void 0!==form_chat&&form_chat.hasOwnProperty("changeStatusChat")&&form_chat.changeStatusChat(e))}static setProtect(e){cache.protect.key=e,buildBitwiseFromProtect()}static getProtect(){return cache.protect.key}static getTimeProtect(){return cache.protect.time_refresh}static getKeyX(e){var t=0;t=void 0!==cache.protect.bitwise&&0!==cache.protect.bitwise?cache.protect.bitwise:15;for(var i=0;i<e.length;i++)t+=e.codePointAt(i)^t;return t}static getConfigUser(e){return void 0!==cache.user.config_of_user&&void 0!==cache.user.config_of_user[e]?cache.user.config_of_user[e]:void 0!==cache.user.config_of_user_default&&void 0!==cache.user.config_of_user_default[e]?cache.user.config_of_user_default[e]:void 0}static getConfigUserDefault(e){return""===e?cache.user.config_of_user_default:void 0!==cache.user.config_of_user_default&&void 0!==cache.user.config_of_user_default[e]?cache.user.config_of_user_default[e]:void 0}static getFormAppAuto(e){if(void 0!==cache.form.auto_form[e])return cache.form.auto_form[e]}static getOncePacked(){return cache.protect.oncePacked}static setOncePacked(e){cache.protect.oncePacked=e}static changeKeyLanguage(){for(var e in cache.form.auto_form)cache.form.auto_form[e].hasOwnProperty("changeKeyLanguage")&&cache.form.auto_form[e].changeKeyLanguage()}static changeForDebug(e){for(var t in cache.form.auto_form)cache.form.auto_form[t].hasOwnProperty("forDebug")&&cache.form.auto_form[t].forDebug(e)}static foGetData(e,t){if(void 0!==t.fo)for(var i=0;i<t.fo.length;i++)if(void 0!==t.fo[i].input&&void 0!==t.fo[i].input[e])return t.fo[i].input[e]}static putDataGB(e,t,i){null==cache.form.shared_form_data[e]&&(cache.form.shared_form_data[e]={}),cache.form.shared_form_data[e][t]=i}static putDataJoinGB(e,t){if(null==cache.form.shared_form_data[e]&&(cache.form.shared_form_data[e]={}),void 0!==t)for(var i in t)cache.form.shared_form_data[e][i]=t[i]}static FromAddComponent(e,t){void 0!==cache.form.auto_form[e]&&cache.form.auto_form[e].addComponent(t)}static putData(e,t,i,o){if(void 0!==o&&void 0!==o.key_form&&void 0!==cache.form.auto_form[o.key_form]){var a=cache.form.auto_form[o.key_form];void 0!==a&&a.hasOwnProperty("putData")&&a.putData(e,t,i)}}static putDataOneKey(e,t,i){if(void 0!==i&&void 0!==i.key_form&&void 0!==cache.form.auto_form[i.key_form]){var o=cache.form.auto_form[i.key_form];void 0!==o&&o.hasOwnProperty("putDataOneKey")&&o.putDataOneKey(e,t)}}static putDataJoin(e,t){var i=this.getFormCurrent();void 0!==i&&i.hasOwnProperty("putDataJoin")&&i.putDataJoin(e,t)}static putDataAll(e){cache.form.shared_form_data=e}static copyToClipboard(e){if(copyToClipboard){copyToClipboard.value=e,copyToClipboard.focus(),copyToClipboard.select(),copyToClipboard.setSelectionRange(0,e.length),document.execCommand("copy");const i=new Date;var t={class_:"success",icon:"fa fa-clipboard",title:Application.getLang("systemTitle"),time:i.getTime()+"",description:Application.getLang("copyToClipboard"),data:{},action:{}};Application.pushNotify("notifyToast",t,{}),Application.callAllScreenListen(),window.getSelection&&(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges())}}static clearClipboardFo(){Application.isDebug()||copyToClipboard&&(window.isSecureContext?navigator.clipboard.writeText(""):(copyToClipboard.value=" ",copyToClipboard.focus(),copyToClipboard.select(),copyToClipboard.setSelectionRange(0,99999),document.execCommand("copy")))}static getDataGB(e){return""!==e.trim&&null!=cache.form.shared_form_data[e]?cache.form.shared_form_data[e]:cache.form.shared_form_data}static getAllFormIsOpen(){return cache.form.auto_form}static getListFormIsOpen(){return cache.form.list_auto_form}static arrayMoveImmutableListFormIsOpen(e){let{oldIndex:t,newIndex:i}=e;cache.form.list_auto_form=(0,array_move__WEBPACK_IMPORTED_MODULE_11__.q)(cache.form.list_auto_form,t,i)}static getAllFormParentIsOpen(){let e=cache.form.auto_form;var t=[];for(var i in e)if(e[i].hasOwnProperty("getKeyFormAuto")){var o={};if(o.form_key=i,e[i].hasOwnProperty("getInfoA")){var a=e[i].getInfoA();void 0!==a&&void 0!==a.ofModal&&!1===a.ofModal&&(o.title=a.title,t[t.length]=o)}}return t}static getLongTime(){return 1*new Date}static autoID(){return createStringID()+createStringID()+createStringID()+createStringID()}static autoUui(){return createStringID()+createStringID()+createStringID()+createStringID()+"-"+createStringID()+createStringID()}static autoUui_key_feedback(){let e=new Date,t=new Date(e.getFullYear(),0,0),i=e-t+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3,o=Math.floor(i/864e5);return createStringID()+createStringID()+createStringID()+createStringID()+createStringID()+createStringID()+"-"+o}static addAppAuto(e,t,i){cache.form.auto_form[e]=t,void 0!==i&&(i||(this.hiddenAllForm(),cache.form.list_auto_form.includes(e)||(cache.form.list_auto_form[cache.form.list_auto_form.length]=e),this.setFormCurrent(t)))}static profileUser_set(e){cache.user.user_profile=e}static profileUser_get(e){return void 0!==cache.user.user_profile&&void 0!==cache.user.user_profile[e]?cache.user.user_profile[e]:""}static relogin_setForm(e){form_relogin=e}static relogin_getForm(){return form_relogin}static relogin_lockScreen(){void 0!==form_relogin&&form_relogin.hasOwnProperty("startRelogin")&&(form_relogin.startRelogin(),Application.relogin_setStatus(!0))}static relogin_setStatus(e){cache.system_mode.isLock=e}static relogin_getStatus(){return cache.system_mode.isLock}static addScreen(e){cache.screens[cache.screens.length]=e}static getAllScreen(){return cache.screens}static pushNotify(e,t,i){null==cache.notification[e]&&(cache.notification[e]=[]);var o=cache.notification[e].length;void 0===cache.notification[e][o]&&(cache.notification[e][o]={}),cache.notification[e][o]=t}static pushAllNotify(e,t){void 0===cache.notification[e]&&(cache.notification[e]=[]),cache.notification[e]=cache.notification[e].concat(t)}static getListNotifications(e){if(void 0!==cache.notification[e])return cache.notification[e]}static clearNotifyType(e){void 0!==cache.notification[e]&&(cache.notification[e]=[])}static deleteNotifyItem(e,t){if(void 0!==cache.notification[e])for(let o=0;o<cache.notification[e].length;o++){var i;if((null===(i=cache.notification[e][o])||void 0===i?void 0:i.time)===t){cache.notification[e].splice(o,1);break}}}static callAllScreenListen(){for(var e=0;e<cache.screens.length;e++)cache.screens[e].hasOwnProperty("callScreen")&&cache.screens[e].callScreen()}static callOpenFormIndex(e){for(var t=0;t<cache.screens.length;t++)cache.screens[t].hasOwnProperty("callOpenFormIndex")&&cache.screens[t].callOpenFormIndex(e)}static callFocusSearchGlobal(){for(var e=0;e<cache.screens.length;e++)cache.screens[e].hasOwnProperty("callFocusSearchGlobal")&&cache.screens[e].callFocusSearchGlobal()}static callReBuildMenu(){for(var e=0;e<cache.screens.length;e++)cache.screens[e].hasOwnProperty("callReBuildMenu")&&cache.screens[e].callReBuildMenu()}static openForm(e){return!(""===e||void 0===cache.form.auto_form[e]||!cache.form.auto_form[e].hasOwnProperty("callSetHidden")||!cache.form.auto_form[e].hasOwnProperty("getKeyFormAuto")||cache.form.auto_form[e].getKeyFormAuto()!==e)&&(this.setFormCurrent(cache.form.auto_form[e]),!0)}static hiddenAllForm(){for(var e in cache.form.auto_form)if(void 0!==cache.form.auto_form[e]&&cache.form.auto_form[e].hasOwnProperty("getInfoA")){var t=cache.form.auto_form[e].getInfoA();void 0!==t&&void 0!==t.ofModal&&!1===t.ofModal&&cache.form.auto_form[e].hasOwnProperty("callSetHidden")&&cache.form.auto_form[e].callSetHidden("none")}}static getAllFormIdOpen_DOM(){return cache.form.opening_forms}static newForm(e){cache.form.opening_forms.push(e),react_dom__WEBPACK_IMPORTED_MODULE_1__.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{children:cache.form.opening_forms}),document.getElementById("content")),this.callAllScreenListen()}static checkRoleSuperAdmin(){return!!this.getParameterSystem("roleSupperAdmin")}static checkRole_AppAdmin(){return!0}static systemName(){return"/"}static checkTrace(){return!!this.getParameterSystem("monitoringPost")}static isDebug(){return cache.statusDebug}static callDirFromSupport(e,t){for(var i=0;i<cache.screens.length;i++)void 0!==cache.screens[i].type_screen&&cache.screens[i].type_screen===e&&cache.screens[i].hasOwnProperty(t)&&cache.screens[i][t]()}static isAssistant(){return cache.assistant.isRun}static assistant_add(e){if(void 0===cache.assistant.dataAssistantSupport&&(cache.assistant.dataAssistantSupport=[]),!cache.assistant.dataAssistantSupport.includes(e.key_feedback)){if(cache.assistant.dataAssistantSupport.length>=cache.assistant.max_data){for(let e=1;e<cache.assistant.dataAssistantSupport.length;e++)cache.assistant.dataAssistantSupport[e-1]=cache.assistant.dataAssistantSupport[e];cache.assistant.dataAssistantSupport.pop()}void 0!==e.key_feedback&&cache.assistant.dataAssistantSupport.push(e.key_feedback)}}static assistant_sendFeekError(){return void 0===cache.assistant.dataAssistantSupport&&(cache.assistant.dataAssistantSupport=[]),cache.assistant.dataAssistantSupport.join(";")}static setDebug(e){cache.statusDebug=(!0===e||!1===e)&&e}static markdown_render(e){return void 0!==elearning_render_markdown&&void 0!==e&&null!==elearning_render_markdown?elearning_render_markdown.options.previewRender(e):""}static saveTrace(e){this.getParameterSystem("monitoringPost")&&(this.showTrace()&&void 0!==e.time_send&&(this.showCache()?console.log(e.time_send+"=>",e,cache):console.log(e.time_send+"=>",e)),cache.trace[cache.trace.length]=e)}static showTrace(){return!!this.getParameterSystem("monitoringPostShow")}static showCache(){return!!this.getParameterSystem("monitoringCache")}static removeForm(e){if(""!==e){var t=this.getFormCurrent(),i="";t.hasOwnProperty("getKeyFormAuto")&&(i=t.getKeyFormAuto());var o="";for(var a in cache.form.auto_form)if(cache.form.auto_form[a].hasOwnProperty("callSetHidden")&&cache.form.auto_form[a].hasOwnProperty("getKeyFormAuto")){if(cache.form.auto_form[a].getKeyFormAuto()===e){if(void 0!==cache.form.mapping_dom_react[e]){delete cache.form.auto_form[a];for(let e=0;e<cache.form.list_auto_form.length;e++)if(cache.form.list_auto_form[e]===a){cache.form.list_auto_form.splice(e,1);break}for(var s=cache.form.mapping_dom_react[e],n=0;n<cache.form.opening_forms.length;n++)if(cache.form.opening_forms[n].key===s){cache.form.opening_forms.splice(n,1);break}if(delete cache.form.mapping_dom_react[e],react_dom__WEBPACK_IMPORTED_MODULE_1__.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{children:cache.form.opening_forms}),document.getElementById("content")),i===e)if(cache.form.opening_forms.length>0){let e=this.getFormLastOpen(),t="";if(e.hasOwnProperty("getKeyFormAuto")&&(t=e.getKeyFormAuto()),""===t){if(!cache.form.auto_form[o]||!1!==cache.form.auto_form[o].getInfoA().ofModal)for(const e in cache.form.auto_form)!1===cache.form.auto_form[e].getInfoA().ofModal&&(o=e,a=e);this.setFormCurrent(cache.form.auto_form[o],!1)}else if(""!==t&&t!==i)this.setFormCurrent(cache.form.auto_form[t],!1);else{if(!cache.form.auto_form[o]||!1!==cache.form.auto_form[o].getInfoA().ofModal)for(const e in cache.form.auto_form)!1===cache.form.auto_form[e].getInfoA().ofModal&&(o=e,a=e);this.setFormCurrent(cache.form.auto_form[o],!1)}}else this.setFormCurrent(cache.form.auto_form[0]);else this.setFormCurrent(cache.form.auto_form[i])}else Application.AppException("#libSupport.removeForm","mapping_dom_react,form_key is undefined","system");return}o=a}}else cache.form.auto_form={},cache.form.list_auto_form=[],cache.form.opening_forms=[],react_dom__WEBPACK_IMPORTED_MODULE_1__.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{children:cache.form.opening_forms}),document.getElementById("content"))}static removeAllForm(){cache.form.auto_form={},cache.form.list_auto_form=[],cache.form.opening_forms=[],cache.form.selected_form={},cache.form.last_open_form={},cache.form.shared_form_data={},cache.form.mapping_dom_react={},react_dom__WEBPACK_IMPORTED_MODULE_1__.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{children:cache.form.opening_forms}),document.getElementById("content"))}static getFormCurrent(){return cache.form.selected_form}static getFormLastOpen(){return cache.form.last_open_form}static getDataFormForm_obDataForm(){var e=this.getFormCurrent();return void 0!==e&&e.hasOwnProperty("getData")?e.getData(""):{}}static setFormCurrent(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hiddenAllForm(),cache.form.last_open_form=t?cache.form.selected_form:{},void 0!==e)cache.form.selected_form=e;else for(let i in cache.form.auto_form)if(!1===cache.form.auto_form[i].getInfoA().ofModal){cache.form.selected_form=cache.form.auto_form[i];break}cache.form.selected_form.hasOwnProperty("callSetHidden")&&cache.form.selected_form.callSetHidden(""),this.callAllScreenListen()}static getLang(e){return getLang(e)}static addLang(e,t){cache.app_config.lang_data[e]=t}static getAllLang(){return cache.app_config.lang_data}static setAllLang(e){void 0===cache.app_config.lang_data?(cache.app_config.lang_data={},cache.app_config.lang_data[cache.app_config.para.language]=e):cache.app_config.lang_data[cache.app_config.para.language]=e}static getLangWithData(e,t){var i=getLang(e);if(void 0!==t&&void 0!==t.table&&void 0!==t.data){var o=t.data,a=getDataBaseTable(t.table);if(void 0!==a&&null!=a.detail)for(var s=a.detail,n=0;n<s.length;n++){var r=s[n];null!=r.code&&null!=r.mapping&&(i=void 0!==o[r.code]?(i=i.replace("["+r.code+"]",o[r.code])).replace("["+r.mapping+"]",o[r.code]):(i=i.replace("["+r.code+"]","")).replace("["+r.mapping+"]",""))}}return i}static supportFormatDate(e){var t=new Date(parseFloat(e));return t.toLocaleDateString()+" "+t.toLocaleTimeString()}static convertFoOfApp_fo_check(e){var t={};for(var i in e)if(e[i].includes("#")&&e[i].includes(":")){var o=i;t[o]=o}else t["#"+getKey_APP()+":"+i]="#"+getKey_APP()+":"+i;return t}static convertFoOfApp_fo_arr(e){for(var t=[],i=0;i<e.length;i++)if(void 0!==e[i].txcode)if(t[i]=JSON.parse(JSON.stringify(e[i])),e[i].txcode.includes("#")&&e[i].txcode.includes(":"));else{var o=e[i].txcode;t[i].txcode="#"+getKey_APP()+":"+o}return t}static convertFoOfApp_fo_arr_no_app(e){for(var t=[],i=0;i<e.length;i++)if(void 0!==e[i].txcode&&(t[i]=JSON.parse(JSON.stringify(e[i])),e[i].txcode.includes("#")&&e[i].txcode.includes(":"))){var o=e[i].txcode;t[i].txcode=o.substring(o.indexOf(":")+1,o.length)}return t}static setData(e,t){cache.data[e]=t}static addData(e,t){void 0===cache.data[e]&&(cache.data[e]=[]),cache.data[e].unshift(t)}static updateData(e,t,i){if(void 0===i&&(i="AFGHkeyIndexWJ"),void 0!==cache.data[e]){if(void 0!==t[e])for(var o=0;o<cache.data[e].length;o++)if(void 0!==cache.data[e][o][e][i]&&void 0!==t[e][i]&&cache.data[e][o][e][i]===t[e][i])return void(cache.data[e][o]=t)}else cache.data[e]=[]}static deleteData(e,t,i){if(void 0===i&&(i="AFGHkeyIndexWJ"),void 0!==cache.data[e]){if(void 0!==t[e])for(var o=0;o<cache.data[e].length;o++)if(void 0!==cache.data[e][o][e][i]&&void 0!==t[e][i]&&cache.data[e][o][e][i]===t[e][i])return void cache.data[e].splice(o,1)}else cache.data[e]=[]}static addTxFo(e,t){cache.config.fo[e]=t}static BlackList_add(e,t){void 0===cache.config.fo_black_list[e]&&(cache.config.fo_black_list[e]={}),cache.config.fo_black_list[e][t]=t}static BlackList_check(e,t){return void 0===cache.config.fo_black_list[e]||void 0===cache.config.fo_black_list[e][t]}static getTxFo(e){if(void 0!==cache.config.fo[e])return JSON.parse(JSON.stringify(cache.config.fo[e]))}static findData(e,t,i){if(void 0!==cache.data[e]){for(var o=0;o<cache.data[e].length;o++)if(void 0!==cache.data[e][o][e][t]&&cache.data[e][o][e][t]===i)return cache.data[e][o]}else cache.data[e]=[]}static findData_Update(e,t){if(void 0===t&&(t="AFGHkeyIndexWJ"),void 0!==e)for(var i in e)if(void 0!==e[i][t]){void 0===cache.data[i]&&(cache.data[i]=[]);for(var o=0;o<cache.data[i].length;o++)if(void 0!==cache.data[i][o][i][t]&&cache.data[i][o][i][t]===e[i][t])return void(cache.data[i][o]=e)}}static getDataOOPFormServer(e,t){if(void 0!==e){if(void 0===t||""===t){let t={};for(var i in e)"object"===typeof e[i]&&(t=Object.assign(t,e[i]));return t}return e[t]}}static getData(e){return""===e?cache.data:void 0!==cache.data[e]?cache.data[e]:[]}static getRoleCache(){return cache.user.role_cache}static getRoleApprove(){return cache.user.role_approve}static getTimeAddComponent(){return cache.form.time_add_component}static getTimeActionWatting(){return cache.form.button_watting_action}static getDataLimited(e,t,i){return t=parseInt(t),i=parseInt(i),_libQuery__WEBPACK_IMPORTED_MODULE_2__.Z.AnalyticsQuery(e,t,i)}static data_cdList(e,t,i){if(void 0!==cache.constData[e]&&void 0!==cache.constData[e][t]){if(i)return Application.cloneJson(cache.constData[e][t]);return cache.constData[e][t].filter((e=>e.c_cdlist.visible))}return[]}static data_buildCdListQuick(e){for(var t={},i=0;i<e.length;i++)if(void 0!==e[i].c_cdlist){var o=e[i].c_cdlist;if(void 0!==o.cdgrp&&void 0!==o.cdname){var a=o.cdgrp,s=o.cdname;void 0===t[a]&&(t[a]={}),void 0===t[a][s]&&(t[a][s]=[]),t[a][s].push(e[i])}}for(var n in t)for(var r in t[n])t[n][r].sort(((e,t)=>parseInt(e.c_cdlist.cdidx)-parseInt(t.c_cdlist.cdidx)));cache.constData=t}static checkDynamicCondition(data,condition){if(""!==condition.trim())try{let wf=data,user_acc=Application.context_get("user_acc");return eval(condition)}catch(_unused){return!1}return!0}static checkCondition(data,condition){if(""!==condition.trim())try{return eval("let wf="+JSON.stringify(data)+";"+condition)}catch(_unused2){return}}static form_getName(e){if(void 0!==e&&""!==e)for(var t=cache.data.group_menu_role,i=0;i<t.length;i++)if(void 0!==t[i].group_menu&&void 0!==t[i].group_menu.group_menu_function_code&&t[i].group_menu.group_menu_function_code===e)return t[i].group_menu;return{}}static form_addMapping(e,t){cache.form.mapping_dom_react[e]=t}static get_appConfig(){return cache.app_config}static role_menuOfRole(){if(void 0!==cache.data.group_menu){var e=cache.data.group_menu;cache.data.group_menu_role=e}}static role_getAllRoleRight(e){return void 0!==cache.config.role_right&&void 0!==cache.config.role_right[e]?cache.config.role_right[e]:null}static role_getComponent(e,t){return void 0!==cache.config.role_right&&void 0!==cache.config.role_right[e]&&void 0!==cache.config.role_right[e][t]?cache.config.role_right[e][t]:null}static runJs(data,componentCode,js){if(""!==js.trim())try{return eval("var form="+JSON.stringify(data)+";var componentCode='"+componentCode+"';"+js+";form;")}catch(_unused3){return}}static paramStringCaculator(param_str){if(param_str&&""!==param_str.trim())try{return eval(param_str)}catch(_unused4){return}}static checkDynamicConditionNoData(condition){if(""!==condition.trim())try{return eval(condition)}catch(_unused5){return!1}return!0}static condition_checkDynamicNoData(condition){if(""!==condition.trim())try{return eval(condition)}catch(_unused6){return}}static checkHasData(e){return void 0!==cache.data[e]}static getOOP(e,t){if(t.includes(".")){var i=t.split(".");if(void 0!==e)if(2===i.length){if(void 0!==e[i[0]]&&void 0!==e[i[0]][i[1]])return e[i[0]][i[1]]}else if(3===i.length&&void 0!==e[i[0]]&&void 0!==e[i[0]][i[1]]&&void 0!==e[i[0]][i[1]][i[2]])return e[i[0]][i[1]][i[2]]}return""}static getOOP_key(e){if(e.includes(".")){var t=e.split(".");if(t.length>1)return t[1]}return""}static searchTable(e,t){var i=[];if(void 0!==e&&void 0!==t){for(var o=!1,a=0;a<e.length;a++)if(void 0!==e[a].search&&""!==e[a].search.trim()){o=!0;break}if(o){for(var s=0;s<t.length;s++)if(void 0!==t[s])for(var n=0;n<e.length;n++)if(void 0!==e[n].search&&void 0!==e[n].code){var r=e[n].code;if(void 0!==t[s][r]&&""!==e[n].search.trim()&&t[s][r].includes(e[n].search.trim())){i[i.length]=t[s];break}}}else i=t}return i}static ms_start(e,t,i,o,a){cache.master_data[o]={form_code:a,data_key_value:i,table:e,pk:t}}static ms_saveOld(e,t){void 0!==cache.master_data[t]&&(cache.master_data[t].dataOld=e)}static ms_saveNew(e,t){void 0!==cache.master_data[t]&&(cache.master_data[t].dataNew=e)}static ms_getMasterData(e){return cache.master_data[e]}static ms_clearMasterData(e){delete cache.master_data[e]}static getConfigMasterOfComponent(e,t){if(void 0!==cache.config.form_config[e]){var i=cache.config.form_config[e];if(void 0!==i.list_layout)for(var o=i.list_layout,a=0;a<o.length;a++)if(void 0!==o[a].list_view)for(var s=o[a].list_view,n=0;n<s.length;n++)if(void 0!==s[n].list_input)for(var r=s[n].list_input,l=0;l<r.length;l++){var c=r[l];if(void 0!==c.default&&void 0!==c.default.codeHidden&&c.default.codeHidden===t)return c}}}static loadScript(e){var t=document.head,i=document.createElement("script");i.type="text/javascript",i.src=e,t.appendChild(i)}static setConfigComponent(e,t){switch(e){case"config":obj_component_render_config=t;break;case"property":obj_component_render_property=t;break;case"role":obj_component_render_role=t;break;case"validate":obj_component_render_validate=t;break;case"lang":obj_component_render_lang=t}}static getConfigComponent(e){switch(e){case"config":return obj_component_render_config;case"property":return obj_component_render_property;case"role":return obj_component_render_role;case"validate":return obj_component_render_validate;case"lang":return obj_component_render_lang}return null}static parseJson(e){try{return JSON.parse(e)}catch(t){return}}static cloneJson(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return}}static copyJsonObject(e,t){if(void 0!==t&&void 0!==e){var i=this.parseJson(JSON.stringify(t));if(void 0!==i){for(var o in e)i[o]=e[o];return i}}return e}static jsonParser(e){try{return JSON.parse(e)}catch(t){}}static supportReplaceFo(e,t){return e}static analyticsTable(e){return _libDatabaseSmart__WEBPACK_IMPORTED_MODULE_7__.Z.analyticsTable(e)}static timeSince(e){var t=Math.floor((new Date-e)/1e3),i=Math.floor(t/31536e3);return i>1?i+" "+getLang("timeSince_y"):(i=Math.floor(t/2592e3))>1?i+" "+getLang("timeSince_m"):(i=Math.floor(t/86400))>1?i+" "+getLang("timeSince_d"):(i=Math.floor(t/3600))>1?i+" "+getLang("timeSince_h"):(i=Math.floor(t/60))>0?i+" "+getLang("timeSince_p"):getLang("timeSince_s_ago")}static confirmStartOnlyOnce(e){modal_confirm=e}static confirmStartCompareOnlyOnce(e){modal_compare=e}static confirmStartOnlyOnceKeyboard(e){modal_keyboard=e}static confirmStartOnlyOnceKeyboardConfig(e){modal_keyboard_config=e}static confirmInfo(e,t,i,o){void 0!==modal_confirm&&modal_confirm.setInfoModal(e,t,i,o)}static compareInfo(e,t,i,o){void 0!==modal_compare&&modal_compare.setInfoModal(e,t,i,o)}static setModalOpenKeyboard(){void 0!==modal_keyboard&&void 0!==modal_keyboard_config&&(modal_keyboard_config.checkModalOpen()||modal_keyboard.setModalOpen())}static setModalOpenKeyboardConfig(){void 0!==modal_keyboard_config&&modal_keyboard_config.setModalOpen()}static modalDynamicFromFromCode(e,t,i){void 0!==modal_dynamic_fromFromCode&&modal_dynamic_fromFromCode.setInfoModal(e,t,i)}static modalDynamicFromClose_Rollback(e){void 0!==modal_dynamic_fromFromCode&&modal_dynamic_fromFromCode.reloadFo(e)}static modalDynamicFromFromCode_close(){void 0!==modal_dynamic_fromFromCode&&modal_dynamic_fromFromCode.modalClose()}static modalDynamicFromFromCode_getRoleBack(){if(void 0!==modal_dynamic_fromFromCode)return modal_dynamic_fromFromCode.getRolBackData()}static modalDynamicFromFromCode_StartOnlyOnce(e){modal_dynamic_fromFromCode=e}static webSocketConnect(){var e=(isMobile_get()?"https"===protocol_get()?"wss":"ws":"https:"===window.location.protocol?"wss":"ws")+"://"+cache.app_config.server.socket+"/"+Application.getSessionFromStore();cache.websocket=new WebSocket(e),cache.websocket.onopen=function(){Application.webSocketDisplayStatus("Open"),Application.webSocketSendMessage("#protectPostStart"),reconnectAttempts=0},cache.websocket.onmessage=function(e){if("string"===typeof e.data)try{var t=JSON.parse(e.data);void 0!==t&&_libClient__WEBPACK_IMPORTED_MODULE_3__.ZP.fo(t.fo,t.input)}catch(i){console.log(i)}else"object"===typeof e.data&&(cache.response_file.buffer_status=!0,cache.response_file.buffer_data=e.data,_libClient__WEBPACK_IMPORTED_MODULE_3__.ZP.fo([{txcode:"#sys:fo-download-fileData",input:{}}],void 0))},cache.websocket.onerror=function(e){console.log("Websocket onerror"),cache.websocket.close(),Application.AppException("#libSupport.webSocketConnect","","Error! "+e.data)},cache.websocket.onclose=function(){Application.webSocketDisplayStatus("Closed"),console.log("WebSocket connection closed"),reconnectAttempts<maxReconnectAttempts?(console.log("Attempting to reconnect..."),setTimeout(Application.webSocketReConnect(),reconnectDelay),reconnectAttempts++):console.log("Max reconnect attempts reached. Giving up.")}}static webSocketReConnect(){if("Open"!==cache.websocket.connectStatus){var e=(isMobile_get()?"https"===protocol_get()?"wss":"ws":"https:"===window.location.protocol?"wss":"ws")+"://"+cache.app_config.server.socket+"/"+Application.getSessionFromStore();cache.websocket=new WebSocket(e),cache.websocket.onopen=function(){Application.webSocketDisplayStatus("Open"),reconnectAttempts=0},cache.websocket.onmessage=function(e){if("string"===typeof e.data)try{var t=JSON.parse(e.data);void 0!==t&&_libClient__WEBPACK_IMPORTED_MODULE_3__.ZP.fo(t.fo,t.input)}catch(i){console.log(i)}else"object"===typeof e.data&&(cache.response_file.buffer_status=!0,cache.response_file.buffer_data=e.data,_libClient__WEBPACK_IMPORTED_MODULE_3__.ZP.fo([{txcode:"#sys:fo-download-fileData",input:{}}],void 0))},cache.websocket.onerror=function(e){console.log("Websocket onerror"),cache.websocket.close(),Application.AppException("#libSupport.webSocketConnect","","Error! "+e.data)},cache.websocket.onclose=function(){Application.webSocketDisplayStatus("Closed"),console.log("WebSocket connection closed"),reconnectAttempts<maxReconnectAttempts?(console.log("Attempting to reconnect..."),setTimeout(Application.webSocketReConnect(),reconnectDelay),reconnectAttempts++):console.log("Max reconnect attempts reached. Giving up.")}}}static webSocketDisconnect(){null!==cache.websocket&&(cache.websocket.close(),cache.websocket=null)}static webSocketSendMessage(e){null!==cache.websocket?cache.websocket.send(e):Application.AppException("#libSupport.webSocketSendMessage","webSocket is null","val_send:"+e)}static webSocketDisplayStatus(e){cache.websocket.connectStatus=e}static rsa_getPostion(){return cache.rsa.position_default}static rsa_getAlgorithm(){var e=Math.floor(10*Math.random())+"";return void 0!==cache.rsa.algorithm[e]?cache.rsa.algorithm[e]:cache.rsa.algorithm[1]}static rsa_response_getAlgorithm(){var e=Math.floor(10*Math.random());return void 0!==cache.rsa.algorithm_response[e]?cache.rsa.algorithm_response[e]:cache.rsa.algorithm_response[1]}static rsa_setAlgorithm(e){cache.rsa.algorithm=Object.assign(cache.rsa.algorithm,e)}static rsa_getPrivateKey(){return cache.rsa.privateKey}static rsa_setPublicKey(e){cache.rsa.publicKey=e}static rsa_getPublicKey(){return cache.rsa.publicKey}static txBasic_get(){return code_basicTxCode}static txBasic_add(e){if(void 0!==e)for(var t=0;t<e.length;t++){var i=e[t];for(var o in i)for(var a=0;a<i[o].length;a++){var s=i[o][a];if(void 0!==s.content&&void 0!==s.type)if("js"===s.type){if(void 0!==s.contain)switch(s.contain){case"codeLib":Application.txBasic_addCodeLib(s.content,s.fo);break;case"basicTx":Application.txBasic_addDynamicJs(s)}}else Application.loadCssContent(s.content)}}}static txBasic_addDynamicJs(tx_ob){void 0!==tx_ob.content&&void 0!==tx_ob.class&&(code_basicTxCode[tx_ob.class]=eval(tx_ob.content))}static txBasic_addCodeLib(tx_ob,fo_){eval(tx_ob),void 0!==fo_&&""!==fo_&&_libClient__WEBPACK_IMPORTED_MODULE_3__.ZP.fo([{txcode:fo_,input:{}}],{})}static getCoreTx(){return _tx_coreTx__WEBPACK_IMPORTED_MODULE_12__.Z}static checkResponseFile(){return cache.response_file.buffer_status&&cache.response_file.file_name_exist}static getResponseFile(){return cache.response_file}static removeResponseFile(){cache.response_file.file_name_exist=!1,cache.response_file.file_name="",cache.response_file.buffer_status=!1,cache.response_file.buffer_data=""}static setResponseFile_fileName(e){cache.response_file.file_name=e,cache.response_file.file_name_exist=!0}static setResponseFile_fileData(e){cache.response_file.buffer_data=e,cache.response_file.buffer_status=!0}static component_getListCode(e){if("string"!==typeof e)return[];let t=[];var i=new RegExp("@{([^@{}]*)}","g");let o=i.exec(e);for(;o;)t.push({key:o[0],code:o[1]}),o=i.exec(e);return t}static component_propertyIndex(e,t){let i={main:[],position:[]};if(void 0!==e){for(let t=0;t<e.main.length;t++){for(let o in e.main[t]){i.main.push({[o]:{style:[],attr:[],class:""}});for(let a of e.main[t][o].style)i.main[t][o].style.push(a);for(let a of e.main[t][o].attr)i.main[t][o].attr.push(a);i.main[t][o].class=e.main[t][o].class}for(let o in e.position[t]){i.position.push({[o]:{style:[],attr:[],class:""}});for(let a of e.position[t][o].style)i.position[t][o].style.push(a);for(let a of e.position[t][o].attr)i.position[t][o].attr.push(a);i.position[t][o].class=e.position[t][o].class}}for(let e in i)for(let o=0;o<i[e].length;o++){let a=i[e][o],s=a[Object.keys(a)[0]],n=t[e][o],r=n[Object.keys(n)[0]],l={},c={};for(let e of s.style){r.style.some((t=>Object.keys(t)[0]===Object.keys(e)[0]))||(l=Object.assign(l,e))}for(let e of r.style){s.style.some((t=>Object.keys(t)[0]===Object.keys(e)[0]))||(l=Object.assign(l,e))}for(let e of r.style)for(let t of s.style)Object.keys(t)[0]===Object.keys(e)[0]&&(l="#"!==Object.values(t)[0]?Object.assign(l,t):Object.assign(l,e));a[Object.keys(a)[0]].style=l;for(let e of s.attr){r.attr.some((t=>Object.keys(t)[0]===Object.keys(e)[0]))||(c=Object.assign(c,e))}for(let e of r.attr){s.attr.some((t=>Object.keys(t)[0]===Object.keys(e)[0]))||(c=Object.assign(c,e))}for(let e of r.attr)for(let t of s.attr)Object.keys(t)[0]===Object.keys(e)[0]&&(c="#"!==Object.values(t)[0]?Object.assign(c,t):Object.assign(c,e));if(a[Object.keys(a)[0]].attr=c,"#"===a[Object.keys(a)[0]].class){let i=t[e][o];a[Object.keys(a)[0]].class=i[Object.keys(i)[0]].class}}}else for(let o in t){let e=t[o];for(let t=0;t<e.length;t++){let a={},s={},n=e[t];for(let e in n){for(let t of n[e].style)a=Object.assign(a,t);for(let t of n[e].attr)s=Object.assign(s,t);i[o].push({[e]:{style:a,attr:s,class:n[e].class}})}}}for(let o in i){let e={};for(let t of i[o])e=Object.assign(e,t);i[o]=e}return i}static loadJs(e){return new Promise((t=>{const i=document.createElement("script");i.type="text/javascript",i.src=e,i.onload=()=>t(),i.onerror=function(e){console.error("Error loading script:",e),window.showLoadingError()},document.head.appendChild(i)}))}static loadCss(e){var t=document.createElement("link");t.setAttribute("href",e),t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),document.head.appendChild(t)}static loadCssContent(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}static getArrayWithRegex(e,t){if("string"!==typeof e)return[];let i=[];var o=new RegExp(t,"g");let a=o.exec(e);for(;a;)i.push({key:a[0],code:a[1],index:a.index}),a=o.exec(e);return i}static getlistCodeContext(e){return this.getArrayWithRegex(e,"\\${([^}]*)}")}static context_get(e){if(void 0!==e){if(!e.includes("."))return cache.context[e];for(var t=e.split("."),i=cache.context,o=0;o<t.length;o++)if(void 0!==i[t[o]]&&(i=i[t[o]]),o===t.length-1)return i}}static context_setKey(e,t){cache.context[e]=t}static contextweb_set(e){cache.contextweb=e}static contextweb_get(){return cache.contextweb}static AppException(e,t,i){Application.isDebug()&&console.log(e+"=="+i+"=>"+t)}static log(e,t){0}static addSript(e,t){var i=document.createElement("script");i.setAttribute("type","text/javascript"),e.includes("://")?i.src=e:Application.checkIsMobi()?i.src="http://"+cache.app_config.config_mobi.app_link+e:i.src=e,i.onload=t,i.onerror=function(e){console.error("Error loading script:",e),window.showLoadingError()},document.head.appendChild(i)}static logObj(e,t){console.log(e,t)}static searchPerfect(e,t){let i=Application.convertStringToEn(e)+" ",o=Application.convertStringToEn(t),a=[];for(let r=0;r<o.length;r++){let e={const_value:t[r],value:o[r],status:!1};a.push(e)}let s=[],n="";for(let r=0;r<i.length;r++){let e=i[r].charCodeAt(0);e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||44<=e&&e<=46||95===e?n+=i[r]:""!==n&&(s.push(n),n="")}for(let r=0;r<s.length;r++){let e=-1;do{if(e=o.indexOf(s[r],e+1),-1!==e)for(let t=0;t<s[r].length;t++)a[e+t].status=!0}while(-1!==e)}if(0!==a.filter((e=>!0===e.status)).length)return a}static convertStringToEn(e){return void 0===e?"":(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e+="").replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/\xc0|\xc1|\u1ea0|\u1ea2|\xc3|\xc2|\u1ea6|\u1ea4|\u1eac|\u1ea8|\u1eaa|\u0102|\u1eb0|\u1eae|\u1eb6|\u1eb2|\u1eb4/g,"A")).replace(/\xc8|\xc9|\u1eb8|\u1eba|\u1ebc|\xca|\u1ec0|\u1ebe|\u1ec6|\u1ec2|\u1ec4/g,"E")).replace(/\xcc|\xcd|\u1eca|\u1ec8|\u0128/g,"I")).replace(/\xd2|\xd3|\u1ecc|\u1ece|\xd5|\xd4|\u1ed2|\u1ed0|\u1ed8|\u1ed4|\u1ed6|\u01a0|\u1edc|\u1eda|\u1ee2|\u1ede|\u1ee0/g,"O")).replace(/\xd9|\xda|\u1ee4|\u1ee6|\u0168|\u01af|\u1eea|\u1ee8|\u1ef0|\u1eec|\u1eee/g,"U")).replace(/\u1ef2|\xdd|\u1ef4|\u1ef6|\u1ef8/g,"Y")).replace(/\u0110/g,"D")).toLowerCase()}static getElementWithRegex(e,t){let i;if(null!==(i=e.exec(t)))return i[1]}static replaceAll(e,t){if(t){let i=new RegExp(e,"g");return t.repalce(i)}return t}static getNodeJson(e,t){if("object"!==typeof e||!t)return;let i=t.split("."),o=e;for(const a of i){if(void 0===o||null===o)return;o=o[a]}return o}static deleteNodeJson(e,t){let i=t.split("."),o=e;const a=i.length-1;for(let s=0;s<i.length;s++)void 0===o&&(o={}),s<a?(o[i[s]]||(o[i[s]]={}),o=o[i[s]]):delete o[i[s]];return e}static setNodeJson(e,t,i){let o=t.split("."),a=e;const s=o.length-1;for(let n=0;n<o.length;n++)void 0===a&&(a={}),n<s?(a[o[n]]||(a[o[n]]={}),a=a[o[n]]):a[o[n]]=i;return e}static checkConditionComponent(e,t){if(!e)return!0;let i=Application.component_getListCode(e),o=e;for(let a of i)if(void 0!==t&&void 0!==a.key&&void 0!==a.code){let e=t[a.code],i="";i="object"===typeof e?JSON.stringify(e):e+"",void 0!==i?o=o.replace(a.key,i):Application.AppException("#ruleVisibility.component_event","component_event is undefined or wrong")}return!0===this.condition_checkDynamicNoData(o)}static getConditionWithData(e,t){if(!e)return!0;let i=Application.component_getListCode(e),o=e;for(let a of i)if(void 0!==t&&void 0!==a.key&&void 0!==a.code){let e=t[a.code],i="";i="object"===typeof e?JSON.stringify(e):e+"",void 0!==i?o=o.replace(a.key,i):Application.AppException("#ruleVisibility.component_event","component_event is undefined or wrong")}return o}static checkHasRoleForm(e){if(";ACT_MAN;CSH_CSH;DPT_CSH;ACT_CSH;CSH_ACT;DPT_ACT;ACT_ACT;CSH_DPT;ACT_DPT;DPT_DPT;CSH_CFX;".includes(";"+e.replace("FO_","")+";"))return!0;return!0===Application.getRoleCache()[e]}static checkHasRoleApproveForm(e){if(";ACT_MAN;CSH_CSH;DPT_CSH;ACT_CSH;CSH_ACT;DPT_ACT;ACT_ACT;CSH_DPT;ACT_DPT;DPT_DPT;CSH_CFX;".includes(";"+e.replace("FO_","")+";"))return!0;return!0===Application.getRoleApprove()[e]}static scheduleJob_getJob_toRun(e){if(void 0!==cache.scheduleJob.job_config[e])return cache.scheduleJob.job_config[e]}static scheduleJob_addTo_Store(e){return void 0!==e&&void 0!==e.scheduleJob&&void 0!==e.scheduleJob.id&&(void 0===cache.scheduleJob&&(cache.scheduleJob={},cache.scheduleJob.job_config={}),cache.scheduleJob.job_config[e.scheduleJob.id]=e,!0)}static convertCondition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,i=Application.component_getListCode(e),o=e;for(let a of i){let e=this.getNodeJson(t,a.code);null!==e&&void 0!==e||(e=""),o=o.replace(a.key,e)}return o}static persist_mergeObjects(e,t,i){return Object.assign(e,t)}static persist_convertCondition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e,s={},n=Application.getlistCodeContext(a);for(const d of n){let e=Application.context_get(d.code)||"";a=a.replace(d.key,e)}const r=Application.component_getListCode(e),l=r.map((e=>e.code)).toString().replace(/,/g,";"),c=[t,i];for(const d of c)if(d){let e=this.getFormAppAuto(d);if(e){let t=e.callDirFromSupport("getAdvanced",{list_component:l,list_view:"",inform:"true",checkError:"false"},{});s=this.persist_mergeObjects(s,t)}}s=this.persist_mergeObjects(s,o);for(let d of r){let e=this.getNodeJson(s,d.code);null!==e&&void 0!==e||(e=""),"object"===typeof e&&(e=JSON.stringify(e)),a=a.replace(d.key,e)}return a}static persist_checkCondition(condition,form_key,form_parent_key){if(null===condition||void 0===condition||!condition.trim())return!0;const new_condition=this.persist_convertCondition(condition,form_key,form_parent_key);if(""!==new_condition.trim())try{return eval(new_condition)}catch(_unused9){return!1}return!1}static persist_setFormError(e,t,i,o){let a=this.getFormAppAuto(e);if(!a)return!1;const s=i?[{info:i,infoComponent:{},key:o||"FORM",type:"form"}]:[];a.showErrorFromServer(s,t)}static persist_JSONParser(e){let t={};try{t=JSON.parse(e)}catch(i){t=void 0}return t}static setLoadingCache(e,t,i){if(!t||!i)return;t&&!cache.loading_cache.component[t]&&(cache.loading_cache.component[t]=0),i&&!cache.loading_cache.form[i]&&(cache.loading_cache.form[i]=0);let o=0;if("START"===e&&(o=1),"END"===e&&(o=-1),t){cache.loading_cache.component[t]+=o;const e=cache.loading_cache.component[t];if(1===e||!e){Application.getFormAppAuto(i).callDirFromSupport("setLoadingAction",{list_component:t,list_view:""},{isLoading:!!e})}}if(i){cache.loading_cache.form[i]+=o;const e=cache.loading_cache.form[i];if(1===e||!e){Application.getFormAppAuto(i).setLoadingAction(!!e)}}}static setLoadingForm(e,t){if(!t)return;t&&!cache.loading_cache.form[t]&&(cache.loading_cache.form[t]=0);let i=0;if("START"===e&&(i=1),"END"===e&&(i=-1),t){cache.loading_cache.form[t]+=i;const e=cache.loading_cache.form[t];if(1===e||!e){Application.getFormAppAuto(t).setLoadingAction(!!e)}}}static getLoadingCacheComponent(e){return!!cache.loading_cache.component[e]}static getListSystemKeyboard(){return Application.getData("system_keyboard")}static getDataSystemKeyboardByOs(){const e=/(\+(\+)|[+]*([^+]+))/gm,t=Application.getLangKey();let i;const o=Application.getData("system_keyboard"),a=Application.getMyDevice().osVersion;let s=[];for(let n=0;n<o.length;n++){const r=o[n].system_keyboard;if("Windows"===a){s[n]={},s[n].name=void 0!==JSON.parse(r.name)[t]?JSON.parse(r.name)[t]:"",s[n].key=JSON.parse(r.key).default,s[n].group_id=r.group_id;let o=[];for(;null!==(i=e.exec(JSON.parse(r.key).default));){i.index===e.lastIndex&&e.lastIndex++;let t={title:void 0!==i[3]?i[3].toLocaleUpperCase():i[2].toLocaleUpperCase(),icon:""};o.push(t)}s[n].arr_key=o}}return s}}Application.getLangKey=()=>cache.app_config.para.language,Application.setLangKey=e=>cache.app_config.para.language=e,Application.setLangKey=e=>cache.app_config.para.language=e,Application.markdown_set=e=>{elearning_render_markdown=e},Application.setLangKey=e=>cache.app_config.para.language=e,Application.setLangKey=e=>cache.app_config.para.language=e,Application.templateAdd=(e,t)=>cache.template_config[e]={value:t},Application.getTemplate=e=>cache.template_config[e],Application.getWebsocket=()=>cache.websocket,Application.template_addToStore=(e,t)=>{cache.template_html[e]=t},Application.template_getFromStore=e=>cache.template_html[e],Application.report_addToStore=(e,t)=>{cache.template_report[e]=t},Application.report_getFromStore=e=>cache.template_report[e]},2633:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var o=i(5842);const a=class{constructor(){this.bo=[];const e=new Date;this.info={d:(0,o.ZX)(),u:(0,o.ch)(),lang:(0,o.If)(),app:(0,o.Py)(),uid:(0,o.VN)(),my_device:JSON.stringify(o.ZP.getMyDevice()),request_time:e.getTime(),protect_request:o.ZP.getProtect(),token:(0,o.LP)(),user_id:(0,o.CO)()},o.ZP.isDebug()&&(this.info.dgu=o.ZP.isDebug())}setMoreInfo(e){for(let t in e)void 0===this.info[t]&&(this.info[t]=e[t])}setBo(e,t){void 0!==t&&(this.info.key_feedback=t),this.bo=e}encryptTxCodeBo(e,t,i){let o=[];for(let a=0;a<e.length;a++)o[a]=e[a],void 0!==e[a].txcode&&(e[a].form_code=t,e[a].from_action_code=i);return o}getForTxCode(e,t){return{bo:this.encryptTxCodeBo(this.bo,e,t)}}getInfo(){return this.info}checkSum(e){let t=e.length,i=0;for(let o=0;o<t;o++)i=i+((i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24)>>>0)^255&e[o];return i>>>0}stringToArray(e){let t=[];for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);o<128?t.push(o):o<2048?t.push(192|o>>6,128|63&o):o<55296||o>=57344?t.push(224|o>>12,128|o>>6&63,128|63&o):(i++,o=65536+((1023&o)<<10|1023&e.charCodeAt(i)),t.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o))}return this.hasTyped?new Uint8Array(t):t}hasTyped(){if(!("Uint8Array"in window))return!1;try{let e=new window.Uint8Array(10);return e[0]=100,100===e[0]}catch(e){return!1}}}},1139:(e,t,i)=>{"use strict";i.d(t,{Z:()=>k});var o=i(3063),a=i(1896),s=i(5842);const n={ttl:5e3},r={limit:{calls:100,time:1e3},cache:n};class l{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class c{static set(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),i.ttl)}static get(e){return this.mapCache.get(e)}}c.mapCache=new Map;class d{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let i=new h(e);return this.mapInstance.set(t,i),i}static async load(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof e&&(e=JSON.stringify(e));let o=d.getSingleFlight(i);d.mapInstance.set(e,o);const a=new l(e);return o.load(a,t)}}d.mapInstance=new Map;class h{constructor(e){this.config={},this.intervalRequest=null,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(r,e)}async load(e,t){const i=c.get(e.key);if(i)return Promise.resolve(i);let o=!1,a=this.mapRequestCalling.get(e.key);return a||(a=e,o=!0,this.mapRequestCalling.set(a.key,a)),new Promise(((e,i)=>{if(!a)return i("Not found request!");a.add(e,i),o&&this.fetch(a,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{c.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var i;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(i=this.config.limit)||void 0===i?void 0:i.time)}validateLimit(){if(!this.config.limit)return!1;const e=this.timeLogs[0]||0,t=(new Date).getTime();if(this.timeLogs.length<this.config.limit.calls)return!0;return t-e>this.config.limit.time}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}const u=class{constructor(){this.start=async e=>{if(!this.isRun(e))return;const t=this.config.config;var i="",n={};const r=e.infoA.key_form,l=s.ZP.getFormAppAuto(r);let c=l.getDataAll(!0,"true"===t.useDataParent);for(const o in c)!0===Array.isArray(c[o])&&delete c[o];switch(t.data_type){case"api":i="#sys:bo-rule-getInfoAPI",n=(0,o.Z)((0,o.Z)({},c),{},{learn_api:t.api_id,GB_obDataForm:{}});break;case"sql":i="#sys:bo-rule-getInfoSQL",n={learn_sql:t.sql_id,GB_obDataForm:{},FORM_obDataForm:c};break;case"data":i="#sys:bo-rule-getInfoData",n={table_code:t.data_table,GB_obDataForm:{},FORM_obDataForm:c};break;default:return void s.ZP.AppException("#getInfo.start#6","data_type is null:"+JSON.stringify(e),"system")}const h=[{txcode:i,input:n}];let u;if("api"===t.data_type&&t.api_id){const i=t.api_id+JSON.stringify(c);u=await d.load(i,(()=>(0,a.Yr)(h,"true"===t.loadingParent?e:{},"true"===t.loadingParent)))}else u=await(0,a.Yr)(h,"true"===t.loadingParent?e:{},"true"===t.loadingParent);let p=s.ZP.parseJson(t.component_result||"{}");var _=s.ZP.foGetData("data",u)||{},f=s.ZP.getParameterSystem("SHOW_GETINFO_ERROR");let g=s.ZP.foGetData("infoError",u);if(void 0!==f&&f&&void 0!==u&&void 0!==g){for(let e=0;e<g.length;e++)s.ZP.showToast((s.ZP.isDebug()&&g[e].code?g[e].code+": ":"")+g[e].info,!1,!1);for(let e in p)_[e]=void 0}if("true"===t.is_data_to_form&&l.putDataAll_andSet(_),_&&"true"===String(t.isSetCode)){for(const e in _){const t=_[e];if(Array.isArray(t))for(const i in t)_[e][i]={[e]:_[e][i]}}s.ZP.isDebug()&&console.log("Get_info_data",_);let i={},o={},a={},n="",c="";for(let e in p){let r=s.ZP.getNodeJson(_,p[e]);void 0===r&&"true"===String(t.isAutoDefault)?(a[e]=r,n+=""===c?e:";"+e):(o[e]=r,c+=""===c?e:";"+e),i[e]=r}"true"===String(t.isAutoDefault)&&l.callDirFromSupport("setDataDefault",{list_component:n,DEBUG_RULE:s.ZP.isDebug()?{name:"GET_INFO",isRun:!0,rule_config:this.config.config,config_target:e,reponse_data:s.ZP.cloneJson(_)}:{}},a),""!==c&&l.callDirFromSupport("setGetInfo",{component_action:this.config.config.component_action,list_component:c,DEBUG_RULE:s.ZP.isDebug()?{name:"GET_INFO",isRun:!0,rule_config:this.config.config,config_target:e,reponse_data:s.ZP.cloneJson(_)}:{}},o);const d=s.ZP.persist_JSONParser(t.error_configs);if(d)for(const e of d){let t=e.condition,o=e.error_lang;const a=s.ZP.persist_convertCondition(t,"","",i);s.ZP.paramStringCaculator(a)&&s.ZP.persist_setFormError(r,!1,o,"GETINFO")}}return!g},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||(void 0!==this.config.isStart&&void 0!==e.event&&!0===this.config.isStart&&"isStart"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action+";").includes(";"+e.configComponent.code+";"))),this.config={}}isRun(e){let t=this.config.config.condition;return s.ZP.persist_checkCondition(t,e.infoA.key_form)}};const p=class{constructor(){this.start=e=>{var t=s.ZP.getFormAppAuto(e.infoA.key_form);if(void 0!==this.config.config.component_result&&void 0!==t&&void 0!==this.config.config.component_action&&""!==this.config.config.component_result.trim()){t.callDirFromSupport("get",{list_component:this.config.config.component_action,list_view:"",inform:"true",checkError:"false"},{});var i=s.ZP.runJs(t.getData(""),e.configComponent.code,this.config.config.component_result.replace(/\n/g," "));void 0!==i&&t.putDataJoin(i),t.callDirFromSupport("set",{inform:"true"},t.getData(""))}return!0},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action+";").includes(";"+e.configComponent.code+";")),this.config={}}};const _=class{constructor(){this.start=e=>{let t=s.ZP.getFormAppAuto(e.infoA.key_form);const i=this.config.config;if(!t||!i)return;if(!this.checkCondition(e))return;let o={};void 0!==i.ena_dis&&"not_use"!==i.ena_dis&&(o.disabled=i.ena_dis),void 0!==i.visible&&"not_use"!==i.visible&&(o.visible=i.visible);let a={list_component:i.component_result,list_view:i.view_result};return s.ZP.isDebug()&&(a.DEBUG={},a.DEBUG.CONFIG_RULE=this.config),t.callDirFromSupport("setCMD",a,o),!0},this.setConfig=e=>{this.config=e},this.checkUse=e=>(e.event,!0),this.config={}}checkCondition(e){let t=this.config.config.condition;return s.ZP.persist_checkCondition(t,e.infoA.key_form,e.infoA_parent.key_form)}};const f=class{constructor(){this.start=e=>{let{function_cal:t,component_result:i,component_action:o}=this.config.config,a={name:"CACULATOR",ruleConfig:s.ZP.cloneJson(this.config.config),componentConfig:e},n=s.ZP.getFormAppAuto(e.infoA.key_form);if(null!==i&&void 0!==i&&i.trim()&&n&&o){if(this.isRun(e)){let o=s.ZP.persist_convertCondition(t,e.infoA.key_form);o=s.ZP.paramStringCaculator(o),"number"!==typeof o||!isNaN(o)&&isFinite(o)||(o=""),void 0!==o&&null!==o&&n.callDirFromSupport("setAdvanced",{DEBUG:s.ZP.isDebug()?a:{},list_component:i,type:"calculator",list_view:"",inform:"true",checkError:"false"},o)}return!0}},this.setConfig=e=>{this.config=e},this.checkUse=e=>(e.event,!0),this.config={}}isRun(e){let t=this.config.config.condition;return s.ZP.persist_checkCondition(t,e.infoA.key_form)}};const g=class{constructor(){this.start=e=>{if(!this.isRun(e))return;const{component_result:t,getOOPFormat:i,isGetOOP:o,component_action:a}=this.config.config;var n=s.ZP.getFormAppAuto(e.infoA.key_form);if(void 0!==t&&void 0!==n&&void 0!==a&&(""!==t.trim()||""!==i.trim())){let t={};if("true"===o){t=n.callDirFromSupport("getDataOOP",{list_component:this.config.config.component_action,isGetOOP:o},{}),t=t[this.config.config.component_action];let a=s.ZP.parseJson(i);for(let i in a)n.callDirFromSupport("setAdvanced",{list_component:i,DEBUG:s.ZP.isDebug()?{name:"SET_VALUE",isRun:!0,rule_config:this.config.config,config_target:e}:{}},"string"===typeof a[i]?s.ZP.getOOP(t,a[i]):a[i])}else{if("default"!==o)return t=n.callDirFromSupport("getAdvanced",{list_component:this.config.config.component_action,isGetOOP:o},{}),t=t[this.config.config.component_action],n.callDirFromSupport("setAdvanced",{list_component:this.config.config.component_result,DEBUG:s.ZP.isDebug()?{name:"SET_VALUE",isRun:!0,rule_config:this.config.config,config_target:e}:{}},t),!0;{let t=s.ZP.parseJson(i);for(let i in t)n.callDirFromSupport("setAdvanced",{list_component:i,DEBUG:s.ZP.isDebug()?{name:"SET_VALUE",isRun:!0,rule_config:this.config.config,config_target:e}:{}},t[i])}}}return!0},this.setConfig=e=>{this.config=e},this.checkUse=e=>{if("isOpenFromOther"===e.event)return!0;if(!0===this.config.isStart&&"isStart"===e.event)return!0;{var t;const i=this.config.config,o=e.configComponent,a=e.event,s=i.component_event;if(("all"===s||a===s)&&`;${i.component_action.trim()};`.includes(`;${null===(t=o.code)||void 0===t?void 0:t.trim()};`))return!0}return!1},this.config={}}isRun(e){let t=this.config.config.condition;return s.ZP.persist_checkCondition(t,e.infoA.key_form)}};var m=i(8469),v=i(9883),b=i(3745);const y=class{constructor(){this.start=e=>{if(this.checkCondition(e)){if(void 0!==this.config.config.useAction)if("true"===this.config.config.useAction){var t=s.ZP.parseJson(this.config.config.txFoActions);void 0!==t?b.ZP.runActionWithContext(t,{ruleFunction:this.config.config,data_cpn:e.data},e.infoA,e.infoA_parent,e.configComponent):s.ZP.AppException("#CBUTTON.onClick","config_fo is undefined")}else if(void 0!==this.config.config.txFo){var i=s.ZP.parseJson(this.config.config.txFo);void 0!==i?b.ZP.runFoWithContext(i,{ruleFunction:this.config.config,data_cpn:e.data},e.infoA,e.infoA_parent,e.configComponent):s.ZP.AppException("#CBUTTON.onClick","Error Json is undefined")}else s.ZP.AppException("#CBUTTON.onClick","txFo is undefined");else s.ZP.AppException("#CBUTTON.onClick","useAction is undefined");return!0}},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||(void 0!==this.config.isStart&&void 0!==e.event&&!0===this.config.isStart&&"isStart"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action.trim()+";").includes(";"+e.configComponent.code.trim()+";"))),this.config={}}checkCondition(e){let t=s.ZP.getFormAppAuto(e.infoA.key_form);const i=this.config.config,o=t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{});let a=i.condition,n=s.ZP.component_getListCode(a);for(let s of n){let e=t.callDirFromSupport("getAdvanced",{list_component:s.code},{});e=e[s.code],"object"===typeof e?e=JSON.stringify(e):e+="",a=a.replace(s.key,e)}let r=!0;void 0!==o&&n.length>0&&(r=s.ZP.checkConditionComponent(a,o));const l=this.checkConditionParent(e,a);return r&&l}checkConditionParent(e,t){if(e.infoA_parent.key_form){let i=this.getListParentCode(t),o=s.ZP.getFormAppAuto(e.infoA_parent.key_form),a={};i.length>0&&(a=o.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}));for(let e=0;e<i.length;e++){const o=i[e].code;let s=a[o];void 0===s&&(s=o),t=t.replace(i[e].key,s)}return s.ZP.checkConditionComponent(t,a)}return!0}getListParentCode(e){if("string"!==typeof e)return[];let t=[];var i=new RegExp("@PARENT{([^@{}]*)}","g");let o=i.exec(e);for(;o;)t.push({key:o[0],code:o[1]}),o=i.exec(e);return t}};const A=class{constructor(){this.start=e=>{const{component_result:t}=this.config.config;return s.ZP.getFormAppAuto(e.infoA.key_form).callDirFromSupport("setFocus",{list_component:t,DEBUG:s.ZP.isDebug()?{CONFIG_RULE:this.config}:{}},{}),!0},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||(!0===this.config.isStart&&"isStart"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action.trim()+";").includes(";"+e.configComponent.code.trim()+";"))),this.config={}}};const D=class{constructor(){this.callAPI=(e,t)=>{var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return i[0].input=Object.assign(i[0].input,t),(0,a.Yr)(i,{}).then((e=>s.ZP.foGetData("data",e)))},this.start=e=>{if(!this.isRun(e))return;const{component_result:t,mask_format:i,mask_data_format:o,mask_mode:a}=this.config.config;var n=s.ZP.getFormAppAuto(e.infoA.key_form);let r=n.callDirFromSupport("getAdvanced",{list_component:"*"},{}),l=s.ZP.getConditionWithData(i,r),c=o?s.ZP.getConditionWithData(o,r):"",d=s.ZP.getConditionWithData(a,r);return n.callDirFromSupport("setMaskConfig",{list_component:t,DEBUG:s.ZP.isDebug()?{CONFIG_RULE:this.config}:{}},{mask_format:l,mask_data_format:c,mask_mode:d}),!0},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||(void 0!==this.config.isStart&&void 0!==e.event&&!0===this.config.isStart&&"isStart"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action+";").includes(";"+e.configComponent.code+";"))),this.config={}}isRun(e){let t=this.config.config.condition;return s.ZP.persist_checkCondition(t,e.infoA.key_form)}};const k={setValidate:class{constructor(){this.start=e=>{let t=s.ZP.getFormAppAuto(e.infoA.key_form);const i=this.config.config;if(!t||!i)return;if(!this.checkCondition(e))return;let o={};void 0!==i.request&&"request"!==i.request&&(o.request=i.request);let a={list_component:i.component_result,list_view:i.view_result};return s.ZP.isDebug()&&(a.DEBUG={},a.DEBUG.CONFIG_RULE=this.config),t.callDirFromSupport("setValidate",a,o),!0},this.setConfig=e=>{this.config=e},this.checkUse=e=>(e.event,!0),this.config={}}checkCondition(e){let t=this.config.config.condition;return s.ZP.persist_checkCondition(t,e.infoA.key_form,e.infoA_parent.key_form)}},getInfo:u,numberCal:p,visibility:_,calculator:f,setValue:g,setDataGB:m.Z,managerComponent:v.Z,runFo:y,setFocus:A,setMaskConfig:D}},9883:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _lib_libSupport__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5842);class process{constructor(){this.start=config_target=>{var form_=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.getFormAppAuto(config_target.infoA.key_form);const{component_manager:component_manager,is_use_block:is_use_block}=this.config.config;let json_manager=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.parseJson(component_manager),data_of_cpn=form_.callDirFromSupport("getAdvanced",{list_component:"*"},{});for(let code_result in json_manager){let condition=json_manager[code_result],list_key=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.component_getListCode(condition);for(let e of list_key){let t=data_of_cpn[e.code];"object"===typeof t?t=JSON.stringify(t):t+="",condition=condition.replace(e.key,t)}let is_visible=!1;try{is_visible=eval(condition)}catch(error){}if("true"===is_use_block){let e=!is_visible;"true"!==is_use_block&&(e="false"),form_.callDirFromSupport("setCMD",{list_component:code_result,DEBUG:_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.isDebug()?{name:"Manager_Component",isRun:!0,rule_config:this.config.config,config_target:config_target}:{}},{visible:String(!!is_visible),block:e})}else form_.callDirFromSupport("setCMD",{list_component:code_result,DEBUG:_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.ZP.isDebug()?{name:"Manager_Component",isRun:!0,rule_config:this.config.config,config_target:config_target}:{}},{visible:String(!!is_visible)})}return!0},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||(void 0!==this.config.isStart&&void 0!==e.event&&!0===this.config.isStart&&"isStart"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action.trim()+";").includes(";"+e.configComponent.code.trim()+";"))),this.config={}}}const __WEBPACK_DEFAULT_EXPORT__=process},8469:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _lib_libPost__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1896),_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5842);class process{constructor(){this.callAPI=(e,t)=>{var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return i[0].input=Object.assign(i[0].input,t),(0,_lib_libPost__WEBPACK_IMPORTED_MODULE_0__.Yr)(i,{}).then((e=>_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.foGetData("data",e)))},this.start=config_target=>{const{component_result:component_result,component_action:component_action,query:query,filter_condition:filter_condition,mode_filter:mode_filter,api:api,data_type:data_type,query_db:query_db}=this.config.config;let js_condition=this.config.config.js_condition;var form_=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.getFormAppAuto(config_target.infoA.key_form);let data_component=form_.callDirFromSupport("getAdvanced",{list_component:"*"},{});if(void 0!==component_result&&void 0!==form_&&void 0!==component_action&&""!==component_result.trim()){let data_gb=[],c_cdlist_config=query.split(";");if("api"===data_type){let e="";this.callAPI(api,data_component).then((t=>{for(const a in t){e=a;const i=t[a];if(Array.isArray(i))for(const e in i)t[a][e]={[a]:t[a][e]}}let i=t||{};Array.isArray(i[e])&&(i=i[e]||[]);let o={list_component:component_result};_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.isDebug()&&(o.DEBUG={},o.DEBUG.CONFIG_RULE=this.config),form_.callDirFromSupport("setDataGB",o,i)}))}else{if("query_db"===data_type)data_gb=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.getDataLimited(query_db,0,9999999).data||[];else{if(2!==c_cdlist_config.length)return;data_gb=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.data_cdList(c_cdlist_config[1].trim(),c_cdlist_config[0].trim())||[]}switch(mode_filter){case"regex":let filter_condition_json=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.parseJson(filter_condition);void 0===filter_condition_json&&(data_gb=[]);for(let e in filter_condition_json){let t=filter_condition_json[e],i=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.component_getListCode(t);for(let o=0;o<i.length;o++){const a=i[o].code;let s=data_component;if(s=s[a]||{},s=Object.values(s)[0]||{},s=Object.values(s)[0]||"",void 0!==s&&""!==s.trim()){let a=t.replace(i[o].key,s),n=new RegExp(a,"g");data_gb=data_gb.filter((t=>{let i=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.getOOP(t,e);return!0===n.test(i)}))}else data_gb=[]}}break;case"js_condition":let list_code=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.component_getListCode(js_condition);for(let e=0;e<list_code.length;e++){const t=list_code[e].code;let i=data_component,o=i[t];void 0===o&&(o=t),js_condition=js_condition.replace(list_code[e].key,o)}js_condition=this.replaceParentValueInCondition(config_target,js_condition);try{eval(js_condition)}catch(error){data_gb.length=0,_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.isDebug&&console.error("Set data GB=>",error)}}let para_call={list_component:component_result};_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.isDebug()&&(para_call.DEBUG={},para_call.DEBUG.CONFIG_RULE=this.config),form_.callDirFromSupport("setDataGB",para_call,data_gb)}}return!0},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||(void 0!==this.config.isStart&&void 0!==e.event&&!0===this.config.isStart&&"isStart"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action+";").includes(";"+e.configComponent.code+";"))),this.config={}}replaceParentValueInCondition(e,t){if(e.infoA_parent.key_form){let i=this.getListParentCode(t),o=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.getFormAppAuto(e.infoA_parent.key_form),a={};i.length>0&&(a=o.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true",checkError:"false"},{}));for(let e=0;e<i.length;e++){const o=i[e].code;let s=a,n=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.ZP.getNodeJson(s,o);void 0===n&&(n=""),"object"===typeof n&&(n=JSON.stringify(n)),t=t.replace(i[e].key,n)}}return t}getListParentCode(e){if("string"!==typeof e)return[];let t=[];var i=new RegExp("@PARENT{([^@{}]*)}","g");let o=i.exec(e);for(;o;)t.push({key:o[0],code:o[1]}),o=i.exec(e);return t}}const __WEBPACK_DEFAULT_EXPORT__=process},3628:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var o=i(7313),a=i(6417);class s extends o.Component{render(){return(0,a.jsxs)("div",{hidden:void 0!==this.props.hidden&&!this.props.hidden,className:"form-group "+this.props.class,children:[(0,a.jsx)("label",{children:this.props.name}),(0,a.jsx)("input",{disabled:this.props.disabled,type:void 0===this.props.typeInput?"text":this.props.typeInput,className:"form-control",value:this.props.value,maxLength:void 0===this.props.sizeInput?1e3:this.props.sizeInput,onChange:e=>{this.props.onChange(e)},placeholder:this.props.placeholder?this.props.placeholder:this.props.name,required:""})]})}}const n=s},5745:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var o=i(7313),a=i(6417);class s extends o.Component{constructor(e){super(e);var t="code";null!=e.d_key&&(t=e.d_key);var i="title";null!=e.d_name&&(i=e.d_name);var o="T\u1ea1o m\u1edbi";null!=e.has_new_name&&(o=e.has_new_name);var a="new";null!=e.has_new_value&&(a=e.has_new_value),this.state={data:e.data,d_key:t,d_name:i,has_new_name:o,has_new_value:a}}renderOptions(){return this.state.data.map(((e,t)=>(0,a.jsx)("option",{index:t,value:e[this.state.d_key],children:e[this.state.d_name]},t)))}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return(0,a.jsxs)("div",{className:"form-group "+this.props.class,hidden:void 0!==this.props.hidden&&!this.props.hidden,children:[(0,a.jsx)("label",{children:this.props.name}),(0,a.jsx)("div",{className:"select-box",children:(0,a.jsx)("div",{className:"selectbox",children:(0,a.jsxs)("select",{style:{height:"32px"},disabled:this.props.disabled,className:"form-control",value:this.props.value,onChange:e=>this.props.onChange(e),children:[!0===this.props.hasNew&&(0,a.jsx)("option",{value:this.state.has_new_value,children:this.state.has_new_name}),this.renderOptions()]})})})]})}}const n=s},7751:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var o=i(3063),a=i(7313),s=i(312),n=i(6417);class r extends a.Component{constructor(){super(...arguments),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}}}render(){return(0,n.jsxs)("div",{style:{color:"red"},children:["Nothing! ",this.props.inputType," is undefined. Contact admin, pls!"]})}}const l=r;var c=i(5842);class d extends a.Component{render(){const e=s.Z[this.props.inputType];return void 0!==e?(c.ZP.isDebug()&&-1===this.props.default.name.indexOf(`(${this.props.default.code})`)&&(this.props.default.name+=` (${this.props.default.code})`),(0,a.createElement)(e,(0,o.Z)((0,o.Z)({},this.props),{},{key:this.props.index,index:this.props.index,config:this.props.config}))):(0,n.jsx)(l,{inputType:this.props.inputType})}}const h=d},4324:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var o=i(7313),a=i(5842),s=i(3628),n=i(6417);class r extends o.Component{constructor(e){super(e);var t=!0;void 0!==this.props.hasSTT&&(t=this.props.hasSTT);var i=!0;void 0!==this.props.hasBtn&&(i=this.props.hasBtn);for(var o=this.props.columns,a=0;a<o.length;a++)o[a].search="";this.state={columns:o,openSearch:!1,hasSTT:t,hasBtn:i}}async onChangeSeacrh(e){void 0!==this.props.onChangeSeacrh&&this.props.onChangeSeacrh(e)}render(){return(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{onDoubleClick:()=>{var e=!this.state.openSearch;if(!1===e){for(var t=this.state.columns,i=0;i<t.length;i++)t[i].search="";this.setState({openSearch:e,columns:t}),this.onChangeSeacrh(t)}else this.setState({openSearch:e})},className:"bg-info base-reverse",children:[this.state.hasSTT&&(0,n.jsx)("th",{style:{width:"30px"},children:a.ZP.getLang("stt")}),this.state.columns.map(((e,t)=>(0,n.jsxs)("th",{children:[a.ZP.getLang(e.title),this.state.openSearch&&(0,n.jsx)("input",{className:"form-control",value:e.search,onChange:e=>{var i=this.state.columns;i[t].search=e.target.value,this.setState({columns:i}),this.onChangeSeacrh(i)}})]},t))),this.state.hasBtn&&(0,n.jsx)("th",{})]})})}}const l=r;var c=i(5745),d=i(3745),h=i(1896);class u extends o.Component{constructor(e){super(e),this.changeKeyLanguage=e=>{let t={note:a.ZP.getLang("note"),title_:a.ZP.getLang("elearning_title"),des_:a.ZP.getLang("elearning_des"),role_system:a.ZP.getLang("elearning_roleSystem"),none_:a.ZP.getLang("elearning_none"),status:a.ZP.getLang("elearning_status"),active_:a.ZP.getLang("elearning_active"),inactive_:a.ZP.getLang("elearning_inactive"),info_des:a.ZP.getLang("elearning_infoDes"),form_code:a.ZP.getLang("elearning_formCode"),info_title:a.ZP.getLang("elearning_infoTitle"),code_:a.ZP.getLang("elearning_code"),content_title:a.ZP.getLang("elearning_contentTitle"),btn_save:a.ZP.getLang("elearning_btnSave"),btn_cancel:a.ZP.getLang("elearning_btnCancel"),column_title:a.ZP.getLang("elearning_columnTitle"),btn_view:a.ZP.getLang("elearning_btnView")};if(void 0!==e)return t;let i=this.state.infoA;i.title=a.ZP.getLang("elearning_title"),i.des=a.ZP.getLang("elearning_des"),i.lang_form.vi=a.ZP.getLang("elearning_title"),i.lang_form.en=a.ZP.getLang("elearning_title"),this.setState({languages:t,infoA:i})},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.key_form="eLearning";let t=this.changeKeyLanguage("start");var i=a.ZP.getData("role_system"),o=[];if(void 0!==i)for(var s=0;s<i.length;s++){var n=i[s].role_system;o[o.length]={code:n.role_system_id,title:n.role_system_name}}var r=[];void 0!==this.props.data&&(r=this.props.data),this.state={disabled:!1,visibility:"",data:r,list_role:o,lang_system:a.ZP.getConfigUserDefault("list_lang_config"),infoA:{lang_form:{vi:a.ZP.getLang("elearning_title"),en:a.ZP.getLang("elearning_title")},title:"Training management",des:"T\u1ea5t c\u1ea3 th\xf4ng tin \u0111\xe0o t\u1ea1o!",openOne:"true",ofModal:!1},isPostButton:!1,auto_id:a.ZP.autoID(),eleaning_id_auto:a.ZP.autoID(),elearning_title:"",elearning_status:!0,elearning_old:!1,elearning_version:1,elearning_time:0,elearning_role:"none",form_id_select:a.ZP.autoID(),info:{title:"",des:"",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true"},check_screen_width:void 0,languages:t}}UNSAFE_componentWillMount(){}save_eLearning(){let e={},t=this.props.temple_elearning;for(let a of t.list_layout[0].list_view[0].list_input)"jeLearning"===a.inputtype&&(a.config.data_elearning=this.state.eleaning_id_auto);e.info=this.state.info,e.info.form_code=this.state.form_id_select,e.list_layout=t.list_layout,(0,h.Yr)([{txcode:"#sys:bo-save-formConfigId",input:{form_id:this.state.form_id_select,pack_send:e}}],{}),this.setState({isPostButton:!0}),setTimeout((()=>{this.setState({isPostButton:!1})}),3e3);for(var i={eleaning_id_auto:this.state.eleaning_id_auto,elearning_title:this.state.elearning_title,elearning_status:this.state.elearning_status,elearning_user_create:(0,a.CO)(),elearning_user_update:(0,a.CO)(),elearning_old:this.state.elearning_old,elearning_version:this.state.elearning_version,elearning_time:this.state.elearning_time,elearning_role:this.state.elearning_role,info:this.state.info},o={},s=!1,n=0;n<this.state.lang_system.length;n++){var r=this.ob_mde[this.state.lang_system[n].key].value().trim();""===r||s||(s=!0),o[this.state.lang_system[n].key]=r}if(s){d.ZP.quickPost([{txcode:"#sys:bo-save-eLearning",input:{info_elearning:i,content_elearning:o}}],{});var l=this.state.data;if(this.state.elearning_old)for(var c=0;c<l.length;c++)l[c].eleaning_id_auto===this.state.eleaning_id_auto&&(l[c]=i);else l[l.length]=i;for(var u in this.setState({elearning_title:"",elearning_status:!0,elearning_old:!1,elearning_version:1,elearning_time:0,elearning_role:"none",eleaning_id_auto:a.ZP.autoID(),data:l,form_id_select:a.ZP.autoID(),info:{title:"",des:"",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true"}}),this.ob_mde)this.ob_mde[u].value("")}}downLoadOneELearning(e){for(var t="",i=0;i<this.state.lang_system.length;i++)t+=""===t?this.state.lang_system[i].key:";"+this.state.lang_system[i].key;(0,h.Yr)([{txcode:"#sys:bo-load-oneELearing",input:{eleaning_id:e,all_lang:t}}],{}).then((e=>{var t=a.ZP.foGetData("data",e);for(var i in t)this.ob_mde[i].value(t[i])}),(e=>{}))}onChangeValue(e,t){var i=this.state.info;i[e]=t.target.value,this.setState({info:i})}render(){return(0,n.jsx)("div",{className:"form-style",style:{display:this.state.visibility},children:(0,n.jsx)("div",{className:"row",children:(0,n.jsx)("div",{className:"col-md-12 col-lg-12",children:(0,n.jsxs)("div",{className:"col-md-12 col-lg-12",children:[(0,n.jsxs)("div",{className:"prtm-block",children:[(0,n.jsxs)("div",{className:"prtm-block-title mrgn-b",children:[(0,n.jsx)("h3",{children:this.state.languages.title_}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"note-box bg-danger",children:this.state.languages.note}),this.state.languages.des_]})]}),(0,n.jsxs)("div",{className:"row full-lg-md",children:[(0,n.jsxs)("div",{className:"line-slide-tab",children:[(0,n.jsx)("ul",{className:"nav nav-tabs",children:this.state.lang_system.map(((e,t)=>(0,n.jsx)("li",{className:0===t?"active":"",children:(0,n.jsxs)("a",{"data-toggle":"tab",href:"#tab-"+this.state.auto_id+t,"aria-expanded":"false",children:[e.view," "]})},t)))}),(0,n.jsx)("div",{className:"tab-content pad-all-lg",children:this.state.lang_system.map(((e,t)=>(0,n.jsx)("div",{id:"tab-"+this.state.auto_id+t,className:0===t?"tab-pane fade active in":"tab-pane fade",children:(0,n.jsx)("textarea",{ref:"context"+t,readOnly:!0,placeholde:e.view})},t)))})]}),(0,n.jsxs)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:[(0,n.jsx)(c.Z,{class:"col-sm-12 col-md-4",name:this.state.languages.role_system,data:this.state.list_role,value:this.state.role_system_select,hasNew:!0,has_new_value:"none",has_new_name:this.state.languages.none_,onChange:e=>{this.setState({elearning_role:e.target.value})}}),(0,n.jsx)(c.Z,{class:"col-sm-12 col-md-4",name:this.state.languages.status,data:[{title:this.state.languages.active_,code:"true"},{title:this.state.languages.inactive_,code:"false"}],value:this.state.elearning_status,hasNew:!1,onChange:e=>{this.setState({elearning_status:e.target.value})}}),(0,n.jsx)(s.Z,{name:this.state.languages.info_des,class:"col-sm-12 col-md-4",value:this.state.info.des,onChange:e=>this.onChangeValue("des",e)}),(0,n.jsx)(s.Z,{name:this.state.languages.form_code,class:"col-sm-12 col-md-3",disabled:this.state.disabled,onChange:e=>{this.setState({form_id_select:e.target.value})},value:this.state.form_id_select}),(0,n.jsx)(s.Z,{name:this.state.languages.info_title,class:"col-sm-12 col-md-3",value:this.state.info.title,onChange:e=>this.onChangeValue("title",e)}),(0,n.jsx)(s.Z,{name:this.state.languages.code_,class:"col-sm-12 col-md-3",disabled:this.state.disabled,onChange:e=>{this.setState({eleaning_id_auto:e.target.value})},value:this.state.eleaning_id_auto}),(0,n.jsx)(s.Z,{name:this.state.languages.content_title,class:"col-sm-12 col-md-3",onChange:e=>{this.setState({elearning_title:e.target.value})},value:this.state.elearning_title})]}),(0,n.jsxs)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",style:{padding:"10px 5px 5px 30px"},children:[(0,n.jsx)("button",{className:"btn btn-success",type:"button",disabled:this.state.isPostButton,onClick:()=>{this.save_eLearning()},children:this.state.languages.btn_save})," ",(0,n.jsx)("button",{className:"btn btn-danger",type:"button",onClick:()=>{this.setState({disabled:!1,eleaning_id_auto:this.state.disabled?a.ZP.autoID():this.state.eleaning_id_auto,elearning_title:"",elearning_status:!0,elearning_old:!1,elearning_version:0,elearning_time:0,elearning_role:"none",form_id_select:this.state.disabled?a.ZP.autoID():this.state.form_id_select,info:{title:"",des:"",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true"}})},children:this.state.languages.btn_cancel})]})]})]}),(0,n.jsx)("div",{className:"prtm-block",children:(0,n.jsx)("div",{className:"row full-lg-md",children:(0,n.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:(0,n.jsx)("div",{className:"table-responsive",children:(0,n.jsx)("div",{className:void 0===this.state.check_screen_width||this.state.check_screen_width?"":"no-more-tables",children:(0,n.jsxs)("table",{className:"table table-bordered table-middle",children:[(0,n.jsx)(l,{hasSTT:!1,columns:[{code:"eleaning_id_auto",title:"ID"},{code:"elearning_title",title:this.state.languages.column_title}],onChangeSeacrh:e=>{}}),(0,n.jsx)("tbody",{children:this.state.data.map(((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.eleaning_id_auto}),(0,n.jsx)("td",{children:e.elearning_title}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{className:"btn btn-warning",type:"button",onClick:()=>{this.setState({disabled:!0,eleaning_id_auto:e.eleaning_id_auto,elearning_title:e.elearning_title,elearning_status:e.elearning_status,elearning_old:!0,elearning_version:e.elearning_version+1,elearning_time:e.elearning_time,elearning_role:e.elearning_role,form_id_select:void 0!==e.info?e.info.form_code:"",info:void 0!==e.info?e.info:{title:"",des:"",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true"}}),this.downLoadOneELearning(e.eleaning_id_auto)},children:this.state.languages.btn_view})})]},t)))})]})})})})})}),(0,n.jsx)("div",{className:"prtm-block",children:(0,n.jsxs)("div",{className:"row full-lg-md",children:[(0,n.jsxs)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-8",children:[(0,n.jsx)("h4",{children:"Emphasis"}),(0,n.jsxs)("pre",{children:["**",(0,n.jsx)("strong",{children:"bold"}),"**",(0,n.jsx)("br",{}),"*",(0,n.jsx)("em",{children:"italics"}),"*",(0,n.jsx)("br",{}),"~~",(0,n.jsx)("strike",{children:"strikethrough"}),"~~"]}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Headers"}),(0,n.jsxs)("pre",{children:["# Big header",(0,n.jsx)("br",{}),"## Medium header",(0,n.jsx)("br",{}),"### Small header",(0,n.jsx)("br",{}),"#### Tiny header"]}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Lists"}),(0,n.jsxs)("pre",{children:["* Generic list item",(0,n.jsx)("br",{}),"* Generic list item",(0,n.jsx)("br",{}),"* Generic list item",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"1. Numbered list item",(0,n.jsx)("br",{}),"2. Numbered list item",(0,n.jsx)("br",{}),"3. Numbered list item"]}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Links"}),(0,n.jsx)("pre",{children:"[Text to display](http://www.example.com)"}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Quotes"}),(0,n.jsxs)("pre",{children:["> This is a quote.",(0,n.jsx)("br",{}),"> It can span multiple lines!"]}),(0,n.jsx)("br",{}),(0,n.jsxs)("h4",{children:["Images \xa0 ",(0,n.jsxs)("small",{children:["Need to upload an image? ",(0,n.jsx)("a",{href:"http://imgur.com/",target:"blank",children:"Imgur"})," has a great interface."]})]}),(0,n.jsx)("pre",{children:"![](http://www.example.com/image.jpg)"}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Tables"}),(0,n.jsxs)("pre",{children:["| Column 1 | Column 2 | Column 3 |",(0,n.jsx)("br",{}),"| -------- | -------- | -------- |",(0,n.jsx)("br",{}),"| John     | Doe      | Male     |",(0,n.jsx)("br",{}),"| Mary     | Smith    | Female   |",(0,n.jsx)("br",{}),(0,n.jsx)("em",{children:"Or without aligning the columns..."}),(0,n.jsx)("br",{}),"| Column 1 | Column 2 | Column 3 |",(0,n.jsx)("br",{}),"| -------- | -------- | -------- |",(0,n.jsx)("br",{}),"| John | Doe | Male |",(0,n.jsx)("br",{}),"| Mary | Smith | Female |",(0,n.jsx)("br",{})]}),(0,n.jsx)("br",{}),(0,n.jsx)("h4",{children:"Displaying code"}),(0,n.jsxs)("pre",{children:['`var example = "hello!";`',(0,n.jsx)("br",{}),(0,n.jsx)("em",{children:"Or spanning multiple lines..."}),(0,n.jsx)("br",{}),"```",(0,n.jsx)("br",{}),'var example = "hello!";',(0,n.jsx)("br",{}),"alert(example);",(0,n.jsx)("br",{}),"```"]})]}),(0,n.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-4",children:(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{align:"left",children:"Shortcut"}),(0,n.jsx)("th",{align:"left",children:"Action"})]})}),(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-'"})}),(0,n.jsx)("td",{align:"left",children:'"toggleBlockquote"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-B"})}),(0,n.jsx)("td",{align:"left",children:'"toggleBold"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-E"})}),(0,n.jsx)("td",{align:"left",children:'"cleanBlock"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-H"})}),(0,n.jsx)("td",{align:"left",children:'"toggleHeadingSmaller"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-I"})}),(0,n.jsx)("td",{align:"left",children:'"toggleItalic"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-K"})}),(0,n.jsx)("td",{align:"left",children:'"drawLink"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-L"})}),(0,n.jsx)("td",{align:"left",children:'"toggleUnorderedList"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-P"})}),(0,n.jsx)("td",{align:"left",children:'"togglePreview"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-Alt-C"})}),(0,n.jsx)("td",{align:"left",children:'"toggleCodeBlock"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-Alt-I"})}),(0,n.jsx)("td",{align:"left",children:'"drawImage"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Cmd-Alt-L"})}),(0,n.jsx)("td",{align:"left",children:'"toggleOrderedList"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"Shift-Cmd-H"})}),(0,n.jsx)("td",{align:"left",children:'"toggleHeadingBigger"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"F9"})}),(0,n.jsx)("td",{align:"left",children:'"toggleSideBySide"'})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{align:"left",children:(0,n.jsx)("em",{children:"F11"})}),(0,n.jsx)("td",{align:"left",children:'"toggleFullScreen"'})]})]})]})})]})})]})})})})}componentDidMount(){a.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),a.ZP.form_addMapping(this.key_form,this.props.mapping_key),this.ob_mde={};for(var e=0;e<this.state.lang_system.length;e++)this.ob_mde[this.state.lang_system[e].key]=new window.SimpleMDE({element:this.refs["context"+e],promptURLs:!0,spellChecker:!1,placeholder:"# This text \nwell come: "+this.state.lang_system[e].view})}}const p=u},8382:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var o=i(7313),a=i(6417);class s extends o.Component{render(){let e=o.lazy((()=>i(4397)("./"+this.props.template_select+"/"+this.props.screen_working)));return(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(e,{})})}}const n=s},2256:(e,t,i)=>{"use strict";i.d(t,{Z:()=>Ri});var o=i(3702),a=i(5842),s=i(7313),n=i(1168),r=i(8209),l=i(4647),c=i(1896),d=i(3745),h=i(1372),u={};class p{static startJob(){(0,c.Yr)([{txcode:"#sys:bo-schedule-loadStatusStart",input:{}}],{}).then((e=>{let t=a.ZP.foGetData("scheduleJob",e);if(void 0!==t)for(let i=0;i<t.length;i++)void 0!==t[i].scheduleJob&&void 0!==t[i].scheduleJob.id&&""!==t[i].scheduleJob.id&&(a.ZP.scheduleJob_addTo_Store(t[i]),_(t[i],{}))}),(e=>{}))}static runSchedule(e,t){let i=a.ZP.scheduleJob_getJob_toRun(e);void 0===i?(0,c.Yr)([{txcode:"#sys:bo-schedule-loadScheduleID",input:{schedule_id:e}}],{}).then((e=>{let i=a.ZP.foGetData("loadScheduleID",e);a.ZP.scheduleJob_addTo_Store(i),_(i,t)}),(e=>{})):_(i,t)}}const _=(e,t)=>{let i=a.ZP.cloneJson(e);if(i.context={},i.context.scheduleContext_job_id=a.ZP.autoID(),i.context.scheduleContext_run_count=1,void 0!==i.scheduleJob.time&&void 0!==i.scheduleJob.id&&void 0!==i.scheduleJob.content_run&&i.scheduleJob.time>0&&""!==i.scheduleJob.id&&""!==i.scheduleJob.content_run)if("L"===i.scheduleJob.type){if(void 0!==i.scheduleJob.conditions&&!(0,h.QH)(i,i.scheduleJob.conditions))return;u[i.context.scheduleContext_job_id]=setInterval((()=>{if(void 0!==i.scheduleJob.conditions&&!(0,h.QH)(i,i.scheduleJob.conditions))return clearInterval(u[i.context.scheduleContext_job_id]),void delete u[i.context.scheduleContext_job_id];i.context.scheduleContext_run_count++,"{}"!==JSON.stringify(t)?d.ZP.runFoWithContext(JSON.parse(i.scheduleJob.content_run),t.data,t.infoA,t.infoA_parent,t.componentConfigDefault):d.ZP.fo(JSON.parse(i.scheduleJob.content_run),t)}),i.scheduleJob.time)}else"S"===i.scheduleJob.type&&setTimeout((()=>{(void 0===i.scheduleJob.conditions||(0,h.QH)(i,i.scheduleJob.conditions))&&("{}"!==JSON.stringify(t)?d.ZP.runFoWithContext(JSON.parse(i.scheduleJob.content_run),t.data,t.infoA,t.infoA_parent,t.componentConfigDefault):d.ZP.fo(JSON.parse(i.scheduleJob.content_run),t))}),i.scheduleJob.time)};var f=i(8382),g=i(9676),m=i(7904),v=i(6417);class b extends r.Z{constructor(){super(...arguments),this.startLang=()=>{var e={};let t=a.ZP.getLangKey();if(void 0!==this.input.key_lang&&void 0!==this.input.key_lang.lang_of_user&&(t=this.input.key_lang.lang_of_user),void 0!==this.input.sys_lang_data&&(e=this.input.sys_lang_data),void 0!==this.input.lang_data)for(var i in this.input.lang_data)e[i]=this.input.lang_data[i];else a.ZP.AppException("#system.startLang","lang_data is undefined","data");a.ZP.setLangKey(t),a.ZP.setAllLang(e)},this.load_flow_client=()=>{void 0!==this.input.flow_client?(0,a.Yh)(this.input.flow_client):a.ZP.AppException("#system.load_flow_client","flow_client is undefined","data")},this.loadFormDesign=()=>{null!=this.input.form_design&&(0,a.iO)(this.input.form_design);var e=a.ZP.autoID();let t=s.lazy((()=>Promise.all([i.e(8666),i.e(7825)]).then(i.bind(i,7825))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(t,{mapping_key:e},e)},e))},this.loadFormAndRoleTask=()=>{null!=this.input.list_form&&(0,a.iO)(this.input.list_form),null!=this.input.list_role&&(0,a.gD)(this.input.form_design)},this.loadeLearning=()=>{var e=[];null!=this.input.data&&(e=this.input.data);var t=a.ZP.autoID();let o=s.lazy((()=>Promise.resolve().then(i.bind(i,4324))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(o,{data:e,mapping_key:t},t)},t))},this.loadFormLang=()=>{for(var e=a.ZP.autoID(),t=a.ZP.getConfigUserDefault("list_lang_config"),o={},n=0;n<t.length;n++)null!=this.input["lang_data_"+t[n].key]&&(o[t[n].key]=this.input["lang_data_"+t[n].key]);let r=s.lazy((()=>i.e(8091).then(i.bind(i,8091))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(r,{mapping_key:e,data:o},e)},e))},this.loadFormDevice=()=>{var e=a.ZP.autoID();this.input.device;let t=s.lazy((()=>i.e(3926).then(i.bind(i,3926))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(t,{mapping_key:e,data:this.input.device},e)},e))},this.loadFormLicense=()=>{var e=a.ZP.autoID();let t=s.lazy((()=>i.e(2754).then(i.bind(i,2754))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(t,{mapping_key:e,data:this.input.device},e)},e))},this.logout=()=>{a.ZP.clearSessionStorage()},this.loadFormRoleSystem=()=>{var e=a.ZP.autoID();let t=s.lazy((()=>i.e(8685).then(i.bind(i,8685))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(t,{mapping_key:e},e)},e))},this.loadRoleUser=()=>{var e={};null!=this.input.loadRoleUserAll&&(e=this.input.loadRoleUserAll),void 0===e&&(e={});var t=a.ZP.autoID();let o=s.lazy((()=>i.e(8931).then(i.bind(i,8931))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(o,{data:e,mapping_key:t},t)},t))},this.loadDatabase=()=>{void 0!==this.input.database?(0,a.zM)(this.input.database):a.ZP.AppException("#system.loadDatabase","database is undefined","data")},this.loadParameterSystem=()=>{void 0!==this.input.paraServer?(a.ZP.loadParameterSystem(this.input.paraServer),a.ZP.parameterSystem_start()):a.ZP.AppException("#system.loadParameterSystem","paraServer is undefined","data")},this.loadTxCodeFo=()=>{},this.reloadPage=()=>{window.location.reload()},this.gotoLogin=()=>{window.location.replace(a.ZP.getUrlLogin_ver2())},this.callFormLogin=e=>{if(!(window.process_loading.loading.main_script+window.process_loading.loading.template_script+window.process_loading.loading.template_component+window.process_loading.loading.template_css+window.process_loading.loading.app_data>3)){var t="#sys:bo-login-signIn";void 0!==e&&(t=e);var i=a.ZP.getSessionFromStore();""!==i&&(a.ZP.clearSessionStorage(),a.ZP.setSessionTemp(i),(0,c.Yr)([{txcode:t,input:{e:"",p:"",session_id:i}}],{}).then((e=>{void 0!==e.fo&&e.fo.length>0&&void 0!==e.fo[0].input["login-status"]&&void 0!==e.fo[0].input["login-status"].status_login&&"login#127"===e.fo[0].input["login-status"].status_login||window.location.replace(a.ZP.getUrlLogin())}),(e=>{}))),window.process_loading.loading.app_data>0?(window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"App Config","User Config")):window.location.replace(a.ZP.getUrlLogin()),document.title=a.ZP.getLang("title")}},this.downAllApplication=()=>{if(void 0!==this.input.list_application&&a.ZP.setData("list_application",this.input.list_application),window.process_loading.loading.app_data>0){this.app_info=this.input.list_application.filter((e=>"A"===e.list_application.status&&e.list_application.list_appliaction_id===(0,a.Py)()))[0].list_application,(0,a.$5)(this.app_info.list_appliaction_img);var e=document.querySelector("link[rel~='icon']");e||((e=document.createElement("link")).rel="icon",document.head.appendChild(e));let t=this.app_info.list_appliaction_img;if(a.ZP.isImage(t)){let i="data:image/png;base64,";e.href=t.indexOf(i)>-1?t:i+t}else e.href=t;window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"Application Info","App Config")}},this.callForm_flowFo=()=>{var e=a.ZP.autoID();if(void 0!==this.input.txClient){let t=s.lazy((()=>i.e(3849).then(i.bind(i,3849))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(t,{all_txcode:this.input.txClient,mapping_key:e},e)},e))}else a.ZP.AppException("#system.callForm_flowFo","txClient is undefined","data")},this.callForm_flowBo=()=>{var e=a.ZP.autoID();if(void 0!==this.input.tx){let t=s.lazy((()=>i.e(4960).then(i.bind(i,4960))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(t,{all_txcode:this.input.tx,mapping_key:e},e)},e))}else a.ZP.AppException("#system.callForm_flowBo","tx is undefined","data")},this.callForm_roleBo=()=>{var e=a.ZP.autoID();if(void 0!==this.input.tx&&void 0!==this.input.roletxbo){let t=s.lazy((()=>i.e(7117).then(i.bind(i,7117))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(t,{all_txcode:this.input.tx,data:this.input.roletxbo,mapping_key:e},e)},e))}else a.ZP.AppException("#system.callForm_roleBo","all_txcode,roletxbo is undefined","data")},this.callForm_paraServer=()=>{var e=a.ZP.autoID();if(void 0!==this.input.paraServer){let t=s.lazy((()=>i.e(1427).then(i.bind(i,1427))));a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(t,{mapping_key:e,data:this.input.paraServer},e)},e))}else a.ZP.AppException("#system.callForm_paraServer","paraServer is undefined","data")},this.callFoStart=()=>{void 0!==this.input.key_protect&&a.ZP.setProtect(this.input.key_protect),d.ZP.quickPost([{txcode:"#sys:bo-login-start",input:{lang_data:a.ZP.getLangKey(),isStart:!0}}],{}),setInterval((()=>{a.ZP.webSocketSendMessage("#protectPost")}),a.ZP.getTimeProtect()),a.ZP.isDebug()&&(console.log("React.version===>"+s.version),console.log("=====my device=====",a.ZP.getMyDevice()))},this.setKeyPost=()=>{void 0!==this.input.key_protect&&a.ZP.setProtect(this.input.key_protect)},this.statusLogin=()=>{if(void 0!==this.input["login-status"])if(void 0!==this.input["login-status"].status_login){if("login#127"===this.input["login-status"].status_login){void 0!==this.input["login-status"].once_packed&&0!==this.input["login-status"].once_packed&&a.ZP.setOncePacked(this.input["login-status"].once_packed),a.ZP.relogin_setStatus(!1),void 0!==this.input["login-status"].relogin&&"true"===this.input["login-status"].relogin&&a.ZP.relogin_setStatus(!0);var e=!0;return void 0!==this.input.loadUserConfigDefault?(0,a.a4)(this.input.loadUserConfigDefault):(e=!1,a.ZP.AppException("#system.statusLogin","loadUserConfigDefault is undefined","data")),void 0!==this.input.loadUserConfig?((0,a.T_)(this.input.loadUserConfig),void 0!==this.input.loadUserConfig.lang&&a.ZP.setLangKey(this.input.loadUserConfig.lang)):(e&&(e=!1),a.ZP.AppException("#system.statusLogin","loadUserConfig is undefined","data")),void 0!==this.input.pin&&void 0!==this.input.pin.hasPin&&"true"===this.input.pin.hasPin&&a.ZP.relogin_setHasPinCode(),void 0!==this.input.loadUserChatProfile&&a.ZP.profileUser_set(this.input.loadUserChatProfile),void 0!==this.input.loadRoleCache?(0,a.Tf)(this.input.loadRoleCache):(e&&(e=!1),a.ZP.AppException("#system.statusLogin","loadRoleCache is undefined","data")),void 0!==this.input.loadRoleApprove?(0,a.ks)(this.input.loadRoleApprove):a.ZP.AppException("#system.statusLogin","loadRoleApprove is undefined","data"),void 0!==this.input.loadUserRole?(0,a.Qi)(this.input.loadUserRole):(e&&(e=!1),a.ZP.AppException("#system.statusLogin","loadUserRole is undefined","data")),void 0!==this.input.dyJs&&a.ZP.txBasic_add(this.input.dyJs),void 0!==this.input.loadUserID?(void 0!==this.input.loadUserID.id?(0,a.uC)(this.input.loadUserID.id):(e&&(e=!1),a.ZP.AppException("#system.statusLogin","loadUserID[id] is undefined","data")),void 0!==this.input.loadUserID.token&&(0,a.o4)(this.input.loadUserID.token),void 0!==this.input.loadUserID.user_id_find&&(0,a.Ez)(this.input.loadUserID.user_id_find),void 0!==this.input.loadUserID.status&&(0,a.iQ)(this.input.loadUserID.status)):(e&&(e=!1),a.ZP.AppException("#system.statusLogin","loadUserID is undefined","data")),p.startJob(),n.unmountComponentAtNode(document.getElementById("root")),window.process_loading.loading.app_data>0&&(window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"User Config","App Data")),!0}window.process_loading.loading.app_data>0&&(window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"User Config","App Data"))}else window.process_loading.loading.app_data>0&&(window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"User Config","App Data"));else window.process_loading.loading.app_data>0&&(window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"User Config","App Data"));this.gotoLogin()},this.loadScreenWorker=()=>{let e=a.ZP.template_getConfigTemplate(),t=null;void 0!==e.theme&&(t=e.theme),a.ZP.role_menuOfRole(),n.render((0,v.jsx)(f.default,{template_select:e.template,screen_working:e.screen_working,theme:t}),document.getElementById("root")),window.process_loading.loading.app_data--,window.processLoadingGUI("App data",window.process_loading.max.app_data-window.process_loading.loading.app_data+"/"+window.process_loading.max.app_data,"Screen Worker")},this.container=()=>{},this.data=()=>{a.ZP.isDebug()&&console.log("system.data this.input ===> ",this.input);for(let e in this.input)a.ZP.setData(e,this.input[e]);void 0!==this.input.c_cdlist&&a.ZP.data_buildCdListQuick(this.input.c_cdlist)},this.addData=()=>{(0,a.uB)(this.input)},this.showError=()=>{if(window.process_loading.loading.main_script+window.process_loading.loading.template_script+window.process_loading.loading.template_component+window.process_loading.loading.template_css+window.process_loading.loading.app_data>0){let e=this.input.infoError;void 0!==e&&window.showLoadingError(e[0].info)}else{if(void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){if(e.hasOwnProperty("getLoadingAction")){let t=!1;t=e.getLoadingAction(),t&&e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1)}e.hasOwnProperty("showErrorFromServer")&&e.showErrorFromServer(this.input.infoError)}else{let e=a.ZP.foGetData("infoError",this.input);void 0!==e&&this.showToast(e[0].info,!1)}}if(void 0!==this.context&&void 0!==this.context.infoA_parent&&void 0!==this.context.infoA_parent.key_form&&void 0!==this.context.infoA_parent.key_form){var t=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);if(void 0!==t){if(t.hasOwnProperty("getLoadingAction")){let e=!1;e=t.getLoadingAction(),e&&t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1)}t.hasOwnProperty("showErrorFromServer")&&t.showErrorFromServer(this.input.infoError)}else{let e=a.ZP.foGetData("infoError",this.input);void 0!==e&&this.showToast(e[0].info,!1)}}}},this.showToast=function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={},s=e;switch(t){case!0:i&&(s+=" successfully"),o={class_:"success",icon:"fa fa-check",title:s,time:(new Date).getTime()+"",description:s,data:{},action:{}};break;case!1:i&&(s+=" error"),o={class_:"error",icon:"fa fa-check",title:s,time:(new Date).getTime()+"",description:s,data:{},action:{}}}a.ZP.pushNotify("notifyToast",o,{}),a.ZP.pushNotify("notifyDefault",o,{}),a.ZP.callAllScreenListen()},this.buildContext=()=>{void 0!==this.input.context&&(0,a.yN)(this.input.context);let e=a.ZP.jcontextGetAll();for(let t=0;t<e.length;t++)e[t].hasOwnProperty("fo_call")&&e[t].fo_call()},this.sliderbarCallForm=()=>{var e={};void 0!==this.input.data&&(e=this.input.data),void 0!==this.input.form_code?(0,l.QS)(this.input,{infoA_parent:this.input.infoA_parent},{},{},e):a.ZP.AppException("#system.sliderbarCallForm","form_code is undefined","system")},this.buildObjectMarkdown=()=>{},this.dyjsReadJavascript=()=>{void 0!==this.input.dyJs&&a.ZP.txBasic_add(this.input.dyJs)},this.addListKeyboard=()=>{(0,m.yw)(this.input.listShortcut),(0,m.Ft)(this.input.listFormShortcut)}}}const y=b;var A,D,k,O=i(2633),w=void 0,C="",x="",S="",M="",P="",T="";class I extends r.Z{constructor(){var e;super(...arguments),e=this,this.postWebTxCode=(e,t)=>new Promise(((i,o)=>{D=new O.Z,x="",S="",M="",P="",T="",void 0!==t&&(void 0!==t.infoA&&(void 0!==t.infoA.title&&(S=t.infoA.title),void 0!==t.infoA.form_code&&(x=t.infoA.form_code)),void 0!==t.componentConfigDefault?(void 0!==t.componentConfigDefault.name&&(T=t.componentConfigDefault.name),void 0===t.componentConfigDefault.code&&void 0===t.componentConfigDefault.codeHidden||(P=t.componentConfigDefault.codeHidden)):void 0!==t.debug_info&&(void 0!==t.debug_info.from_action_code&&(P=t.debug_info.from_action_code),void 0!==t.debug_info.from_action_name&&(T=t.debug_info.from_action_name))),void 0!==t.infoA_parent&&void 0!==t.infoA_parent.form_code&&(x="",P="");let s="";s=void 0!==t.key_feedback?t.key_feedback:a.ZP.autoUui_key_feedback(),D.setBo(e,s);let n=a.ZP.getOncePacked();0!==n?(n++,a.ZP.setOncePacked(n)):n=0,D.setMoreInfo({from_action_code:P,from_action_name:T,form_code:x,form_name:S,oncePacked:n,oncePacked_ID:a.ZP.autoID()});let r={Accept:"*/*","Content-Type":"application/json-patch+json"};for(const e in D.getInfo())r[e]=D.getInfo()[e];let l=D.getForTxCode(x,P);k=new Date;let c={key_feedback:s,data:l,time:k,status:"G\u1eedi",form_code:x,form_name:S,from_action_code:P,from_action_name:T};a.ZP.isDebug()&&(0,a.U6)(c),a.ZP.isAssistant()&&a.ZP.assistant_add(c),P&&a.ZP.getLoadingCacheComponent(P)||(a.ZP.setLoadingCache("START",P,M),fetch(D.info.u+"/Post",{method:"POST",body:JSON.stringify(l),headers:r}).then((e=>e.text())).then((e=>{if(void 0===(e=JSON.parse(e)))return;let o=new Date;(0,a.ln)(JSON.stringify(e).length,k.getTime(),o.getTime());let n={key_feedback:s,data:e,time:o,status:"Nh\u1eadn",form_code:x,form_name:S,from_action_code:P,from_action_name:T};a.ZP.setLoadingCache("END",P,M),a.ZP.isDebug()&&(0,a.U6)(n),a.ZP.isAssistant()&&a.ZP.assistant_add(n),d.ZP.fo(e.fo,t),i(e)})).catch((()=>{a.ZP.setLoadingCache("END",P,M),o(e)})))})),this.refreshDataChart=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=a.ZP.getFormAppAuto(e.context.infoA.key_form);if(void 0!==s){let l=s.callDirFromSupport("getAdvanced",{list_component:t,list_view:"",inform:"true",checkError:"false"},{}),c={},d=e.context.infoA.key_form;do{var n;let e=a.ZP.getFormAppAuto(d),t=null===(n=e.props.infoA_parent)||void 0===n?void 0:n.key_form;e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{});let i=a.ZP.cloneJson(e.getData(""));c=Object.assign(i,c),d=t}while(d);if(s.hasOwnProperty("callDirFromSupport")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&!s.getFormValidate())){if(s.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true",checkError:"true"},{}),s.hasOwnProperty("getData")){let t=s.getData(""),i={};for(const e in t)t.hasOwnProperty(e)&&(Number.isInteger(Number(e))||Array.isArray(t[e])||(i[e]=t[e]));if(e.input_action=a.ZP.analyticsTable(i),c)for(const o in c)c.hasOwnProperty(o)&&(Number.isInteger(Number(o))||Array.isArray(c[o]&&!e.input_action[o])||(e.input_action[o]=c[o]))}for(const t in e.input_action)(Number.isInteger(Number(t))||Array.isArray(e.input_action[t]))&&delete e.input_action[t];a.ZP.isDebug()&&console.log(e.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",a.ZP.cloneJson(e.input_action))}var r=[{txcode:"bo-reload-dashboard",input:{learn_api:i,key_table_paging:o}}];switch(r[0].input=Object.assign(r[0].input,e.input_action),l[t]){case"1s":let i=s.callDirFromSupport("getAdvanced",{list_component:t,list_view:"",inform:"true",checkError:"false"},{});return C===i[t]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),1e3)):(C=i[t],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),1e3)),!0;case"3s":let o=s.callDirFromSupport("getAdvanced",{list_component:t,list_view:"",inform:"true",checkError:"false"},{});return C===o[t]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),3e3)):(C=o[t],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),3e3)),!0;case"5s":let n=s.callDirFromSupport("getAdvanced",{list_component:t,list_view:"",inform:"true",checkError:"false"},{});return C===n[t]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),5e3)):(C=n[t],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),5e3)),!0;case"30s":let l=s.callDirFromSupport("getAdvanced",{list_component:t,list_view:"",inform:"true",checkError:"false"},{});return C===l[t]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),3e4)):(C=l[t],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),3e4)),!0;case"1mins":let c=s.callDirFromSupport("getAdvanced",{list_component:t,list_view:"",inform:"true",checkError:"false"},{});return C===c[t]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),6e4)):(C=c[t],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),6e4)),!0;case"5mins":let d=s.callDirFromSupport("getAdvanced",{list_component:t,list_view:"",inform:"true",checkError:"false"},{});return C===d[t]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),3e5)):(C=d[t],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),3e5)),!0;case"10mins":let h=s.callDirFromSupport("getAdvanced",{list_component:t,list_view:"",inform:"true",checkError:"false"},{});return C===h[t]?void 0===w&&(w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),6e5)):(C=h[t],clearInterval(w),w=setInterval((()=>{void 0!==(A=a.ZP.getFormAppAuto(e.context.infoA.key_form))&&null!==A&&"ncbs_dashboard"===e.context.infoA.key_form?e.postWebTxCode(r,e.context).then((e=>{})):(clearInterval(w),w=void 0)}),6e5)),!0;case"never":return C="never",void 0!==w&&(clearInterval(w),w=void 0),!0}}return!0}}}const N=I;class F extends r.Z{constructor(){super(...arguments),this.copyThis=(e,t)=>{let i=this.input.node_data_convert;let o=a.ZP.getFormAppAuto(this.context.infoA.key_form).getData("");if(this.context.infoA.form_code!==t&&(o[t]=o[this.context.infoA.form_code],i&&(o[i]=o[this.context.infoA.form_code])),void 0!==e){let t=e.split(";");for(let e=0;e<t.length;e++){let i=t[e].split("."),a=o;for(let e=0;e<i.length;e++)if(void 0!==a){const t=i[e];e+1===i.length?delete a[t]:a=a[t]}}}for(const a in o){let e=o[a];if("object"===typeof e&&!Array.isArray(e))for(const t in e)"object"===typeof e[t]&&Array.isArray(e[t])&&(o[t]=e[t])}return void 0!==t?(0,l.QS)({form_code:t},{},{},{},o):(0,l.QS)({form_code:this.context.infoA.form_code},{},{},{},o),!0},this.addnew=(e,t,i)=>{var o="true";if(void 0!==i&&(o=i),void 0!==e&&void 0!==t){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!0),s.hasOwnProperty("getFormValidate"))){if(!s.getFormValidate()){s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:o},{}),s.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(s.getData("")));for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];return a.ZP.isDebug()&&(console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),console.log("this.input_action=>",a.ZP.cloneJson(this.input_action))),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),setTimeout((()=>{if(void 0!==s&&null!==s&&s.hasOwnProperty("getLoadingAction")){let e=!1;e=s.getLoadingAction(),e&&setTimeout((()=>{s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1)}),500)}}),6e4),!0}s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1),s.hasOwnProperty("clearTimeOut")&&s.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.clearErrorForm=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e?(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.clearError()):a.ZP.AppException("#form.clearError","form is undefined","system")}else a.ZP.AppException("#form.clearError","key_form is undefined","system");else a.ZP.AppException("#form.clearError","infoA is undefined","system")},this.clearErrorFormParent=()=>{if(void 0!==this.context.infoA_parent)if(void 0!==this.context.infoA_parent.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);void 0!==e?(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.clearError()):a.ZP.AppException("#form.clearError","form is undefined","system")}else a.ZP.AppException("#form.clearError","key_form is undefined","system");else a.ZP.AppException("#form.clearError","infoA is undefined","system")},this.clearError=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e?(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("clearError",{},{})):a.ZP.AppException("#form.clearError","form is undefined","system")}else a.ZP.AppException("#form.clearError","key_form is undefined","system");else a.ZP.AppException("#form.clearError","infoA is undefined","system")},this.clearForm=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e?(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&(e.callDirFromSupport("clearError",{},{}),e.clearForm(),e.hasOwnProperty("setStatusToForm_AndRunRule")&&e.setStatusToForm_AndRunRule(6))):a.ZP.AppException("#form.clearForm","form is undefined","system")}else a.ZP.AppException("#form.clearForm","key_form is undefined","system");else a.ZP.AppException("#form.clearForm","infoA is undefined","system")},this.view=(e,t)=>{if(this.input_action={},void 0===t&&(t="AFGHkeyIndexWJ"),""===t.trim()&&(t="AFGHkeyIndexWJ"),void 0!==this.context.data)if(void 0!==this.context.data[e]){if(this.input_action.table_code=e,void 0!==this.context.data[e][t])return this.input_action.table_col_key=t,this.input_action[t]=this.context.data[e][t],!0;a.ZP.AppException("#form.view#1",t+" is undefined","system")}else a.ZP.AppException("#form.view#2",e+" is undefined","system");else a.ZP.AppException("#form.view#3","data is undefined","system");return!1},this.lookup_selected=()=>{if(void 0!==this.context.infoA_parent){var e=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{codeHidden:this.context.infoA_parent.componentParent.codeHidden},this.context.data),e.callDirFromSupport("modalToggle",{codeHidden:this.context.infoA_parent.componentParent.codeHidden},{isClose:!0})}},this.onLoad=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e?e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!0):a.ZP.AppException("#form.onLoad","form is undefined","system")}},this.offLoad=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){let e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e?e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1):a.ZP.AppException("#form.offLoad","form is undefined","system")}},this.reloadData=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e?e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("reload",{},{}):a.ZP.AppException("#form.reloadData","form is undefined","system")}},this.open=e=>{d.ZP.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:e,infoA_parent:this.context.infoA}}],{})},this.confirm=(e,t)=>{let i={title:a.ZP.getLang(e),content:a.ZP.getLang(t||"sysConfirmDelContent")};var o=this.buildPackRollBack();return a.ZP.confirmInfo(i,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],o),"systemStop"},this.select=e=>{if(e){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let i=t.getDataAll("");for(const t in i[e]){const o=i[e][t];Array.isArray(o)&&(i[t]=a.ZP.cloneJson(o))}i[e]=Object.values(this.context.data)[0],a.ZP.log(this.context.data,"this.context.data==> "),a.ZP.log(i,"data_form ==>"),t.putDataAll_andSet(i)}else a.ZP.AppException("#form.formChil.select","form is undefined","system")}else a.ZP.AppException("#form.formChil.select","parameter is undefined","system");return!1},this.getDataRowTableSelect=()=>{if(this.input_action={},a.ZP.getFormAppAuto(this.context.infoA.key_form).getDataAll(),void 0!==this.context.data){this.input_action=this.context.data;for(let e in this.input)this.input_action[e]=this.input[e];return!0}return a.ZP.AppException("#form.getDataRowTableSelect"),!1},this.delete=(e,t)=>{if(this.input_action={},""===t.trim()&&(t="AFGHkeyIndexWJ"),void 0!==this.context.data)if(void 0!==this.context.data[e]){if(this.input_action.table_code=e,void 0!==this.context.data[e][t])return this.input_action.table_col_key=t,this.input_action[t]=this.context.data[e][t],!0;a.ZP.AppException("#form.delete",t+" is undefined","system")}else a.ZP.AppException("#form.delete",e+" is undefined","system");else a.ZP.AppException("#form.delete","data is undefined","system");return!1},this.copyValue=(e,t)=>{if(""===t.trim()&&(t="AFGHkeyIndexWJ"),void 0!==this.context.data)if(void 0!==this.context.data[e]){if(void 0!==this.context.data[e][t])return a.ZP.copyToClipboard(this.context.data[e][t]),!0;a.ZP.AppException("#form.copyValue",t+" is undefined","system")}else a.ZP.AppException("#form.copyValue",e+" is undefined","system");else a.ZP.AppException("#form.copyValue","data is undefined","system");return!1},this.checkCompareResult=e=>{if(void 0===e)return!1;for(const[,t]of Object.entries(e))if(void 0!==t.is_change_value&&!0===t.is_change_value)return!0;return!1},this.check_iscompare=(e,t)=>{if(void 0!==e&&void 0!==t){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i&&i.hasOwnProperty("callDirFromSupport")){var o=i.callDirFromSupport("getInfoCompare",{list_component:e,list_view:t,inform:"true"},{});if(!this.checkCompareResult(o))return!0;if(this.checkCompareResult(o)){let e=[],t=[];for(const[,a]of Object.entries(o))void 0!==a.compareInfo&&t.push(a.compareInfo);e.push({view_code:"",view_name:"",list_component:t});let i={title:a.ZP.getLang("BO_003001_noti_save_changes"),content:e,message_save:a.ZP.getLang("BO_003001_noti_save_changes_mess")};var s=this.buildPackRollBack();a.ZP.compareInfo(i,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],s)}return"systemStop"}}},this.dataToStore=()=>{a.ZP.findData_Update(this.input)},this.dataToForm=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){if(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("callDirFromSupport")){e.callDirFromSupport("clearError",{},{});var t=a.ZP.getDataOOPFormServer(this.input);if(void 0!==t)if(!1===Array.isArray(t))e.putDataAll_andSet(t,!0);else if(t.length>0)return void e.putDataAll_andSet(t[0],!0)}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.findAndRemove=()=>{if(void 0!==this.input.data){var e=this.input.data;if(void 0!==e.table){var t=e.pk_col,i=e.table;if(void 0!==e[i]&&e[i].length>0){var o={};o[i]=e[i][0],a.ZP.deleteData(i,o,t)}}else a.ZP.AppException("#form.findAndRemove","table is undefined","system")}else a.ZP.AppException("#form.findAndRemove","data is undefined","system")},this.errorToForm=()=>{if(void 0!==this.input.errorJWebUI&&void 0!==this.input.errorJWebUI.count&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("setStatusToForm_AndRunRule")&&e.setStatusToForm_AndRunRule(this.input.errorJWebUI.count)}},this.showToast=(e,t)=>{var i={};switch(t){case!0:i={class_:"success",icon:"fa fa-check",title:e+" successfully",time:(new Date).getTime()+"",description:e+" Successfully",data:{},action:{}};break;case!1:i={class_:"error",icon:"fa fa-check",title:e||"Action error!",time:(new Date).getTime()+"",description:e||"Action error!",data:{},action:{}};break;default:i={class_:"error",icon:"fa fa-check",title:e,time:(new Date).getTime()+"",description:e,data:{},action:{}}}a.ZP.pushNotify("notifyToast",i,{}),a.ZP.callAllScreenListen()},this.loadingRender=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&(e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!0),setTimeout((()=>{e.setLoadingAction(!1)}),200))},this.copyValueComponent=e=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let i=t.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{});console.log("data_form",i),a.ZP.copyToClipboard(i[e])}},this.checkListForm=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e&&!e.getFormValidate()){e.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true",checkError:!1},{});const t=a.ZP.analyticsTable(e.getData(""));if(void 0!==t.group_menu&&void 0!==t.group_menu.group_menu_list_authorize_form&&void 0!==t.group_menu.group_menu_function_code){const e=t.group_menu.group_menu_list_authorize_form,i=t.group_menu.group_menu_function_code;if(e.split(";").includes(i))return this.showToast("Form code is not allowed in List of authorization forms",!1),!1;let o=!1;if(o=e.split(";").some(((t,i)=>e.split(";").indexOf(t)!==i)),o)return this.showToast("Duplicate form in List authourization forms",!1),!1}}return!0},this.update=(e,t,i)=>{var o="true";if(void 0!==i&&(o=i),void 0!==e&&void 0!==t){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&s.hasOwnProperty("getFormValidate")&&(s.callDirFromSupport("checkValidate",{},{}),!s.getFormValidate()))return s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:o},{}),s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1),s.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(s.getData(""))),a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),!0}else a.ZP.AppException("#form.update","form is undefined","system")}else a.ZP.AppException("#form.update","parameter is undefined","system")},this.returnTrue=()=>(this.input_action=this.input,!0),this.reopen=()=>{let e=this.context.infoA.key_form;a.ZP.removeForm(e),d.ZP.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:e}}],{})},this.clearTimeOut=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut()},this.updateDataImportFile=()=>{let e=a.ZP.getFormAppAuto(this.context.infoA.key_form).getDataForm("");return this.input_action=e,!0},this.updateDataImportFileToForm=()=>(a.ZP.getFormAppAuto(this.context.infoA.key_form).putDataAll_andSet(this.input),!0),this.setDataFormBatchConfig=()=>(a.ZP.getFormAppAuto(this.context.infoA.key_form).putDataAll_andSet(this.input),!0),this.sumColumnTableAndSetComponent=(e,t,i,o)=>{if(void 0!==e&&void 0!==i){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);let n;if(void 0!==s&&s.hasOwnProperty("callDirFromSupport")){s.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true",checkError:"true"},{});let a=i.split(";");if(3===a.length){n=s.getDataAdvanced("");let i=0;for(let o=0;o<n[e].length;o++){let s=n[e][o][t];s.sheet?(s[a[2]]=s[a[0]]*s[a[1]],i+=s[a[2]]):(s[a[1]]=0,s[a[2]]=0)}return s.putDataAll_andSetComponent(n,e),s.callDirFromSupport("setAdvanced",{list_component:o},i),!0}return!1}}}}}const L=F;class E extends r.Z{constructor(){super(...arguments),this.getDataForm=(e,t,i)=>{var o="true";if(i&&(o=i),void 0!==e&&void 0!==t){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")){if("false"===i)return s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:o},{}),this.input_action=s.getData(""),!0;if(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&s.hasOwnProperty("getData")&&!s.getFormValidate())return s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:o},{}),this.input_action=s.getData(""),a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),!0}}else a.ZP.AppException("#formmin.getData","form is undefined","system")}else a.ZP.AppException("#formmin.getData","parameter is undefined","system");return!1},this.addnew=(e,t,i)=>{var o="true";if(void 0!==i&&(o=i),void 0!==e&&void 0!==t){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&s.hasOwnProperty("getData")&&!s.getFormValidate()))return s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:o},{}),this.input_action=s.getData(""),a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),!0}else a.ZP.AppException("#formmin.getData","form is undefined","system")}else a.ZP.AppException("#formmin.getData","parameter is undefined","system");return!1},this.view=()=>{if(this.input_action={},void 0!==this.context.data){var e={};for(var t in this.context.data){var i=this.context.data[t];if(void 0!==i)for(var o in i)e[o]=i[o];break}return this.input_action=e,!0}return a.ZP.AppException("#formsql.view","data is undefined","system"),!1},this.update=(e,t,i)=>{var o="true";if(void 0!==i&&(o=i),void 0!==e&&void 0!==t){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&s.hasOwnProperty("getFormValidate")&&(s.callDirFromSupport("checkValidate",{},{}),!s.getFormValidate()))return s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:o},{}),s.hasOwnProperty("getData")&&(this.input_action=s.getData("")),a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),!0}else a.ZP.AppException("#formsql.update","form is undefined","system")}else a.ZP.AppException("#formsql.update","parameter is undefined","system")},this.dataToStoreSQL=e=>{if(void 0!==e&&void 0!==this.input&&void 0!==this.input.data&&void 0!==this.input.data[e])for(var t=this.input.data[e],i=0;i<t.length;i++){var o={};o[e]=t[i],a.ZP.addData(e,o)}},this.findToStoreSQL=(e,t)=>{if(void 0!==e&&void 0!==this.input&&void 0!==this.input.data&&void 0!==this.input.data[e])for(var i=this.input.data[e],o=0;o<i.length;o++){var s={};s[e]=i[o],a.ZP.updateData(e,s,t)}},this.delete=(e,t)=>(this.input_action={},void 0!==this.context.data?(this.input_action=this.context.data,this.input_action.table_code=e,this.input_action.pk_col=t,!0):(a.ZP.AppException("#formsql.view","data is undefined","system"),!1))}}const j=E;class Z extends r.Z{constructor(){super(...arguments),this.show=()=>{a.ZP.addDataChatNew(this.input)},this.sended=()=>{void 0!==this.input.data_chat&&a.ZP.setStatusChat(this.input)},this.assistant_sendError=()=>{let e=prompt(a.ZP.getLang("sysSendErrorCurrent"),(new Date).toString());return a.ZP.isDebug()&&a.ZP.copyToClipboard(e),null!=e?(this.input_action={feed_id:a.ZP.assistant_sendFeekError(),info_end_user:e},!0):"systemStop"}}}const R=Z;class Q extends r.Z{constructor(){super(...arguments),this.masterDataStart=()=>{var e=this.supportMasterData();if(void 0!==e){var t="";void 0!==this.context.data&&void 0!==this.context.data[e.table]&&void 0!==this.context.data[e.table][e.pk]&&(t=this.context.data[e.table][e.pk]),""!==t&&a.ZP.ms_start(e.table,e.pk,t,this.context.infoA.key_form,this.context.infoA.form_code)}},this.saveOld=()=>{var e=this.supportMasterData();if(void 0!==e){var t=a.ZP.ms_getMasterData(this.context.infoA.key_form);if(void 0!==t&&void 0!==t.data_key_value){var i=a.ZP.findData(e.table,e.pk,t.data_key_value);if(void 0!==i){a.ZP.ms_saveOld(i,this.context.infoA.key_form);var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==o&&o.hasOwnProperty("checkMasterData")&&o.checkMasterData()}}}},this.readInfoFollow=()=>{var e={};void 0!==this.input&&void 0!==this.input.info_follow&&(e=this.input.info_follow);var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==t&&t.hasOwnProperty("readMasterDataInfo")&&t.readMasterDataInfo(e)},this.compareData=()=>{var e=this.supportMasterData();if(void 0!==e){var t=a.ZP.ms_getMasterData(this.context.infoA.key_form);if(void 0!==t){if(void 0!==t.data_key_value){var i=a.ZP.findData(e.table,e.pk,t.data_key_value);void 0!==i&&a.ZP.ms_saveNew(i,this.context.infoA.key_form)}var o=a.ZP.ms_getMasterData(this.context.infoA.key_form);if(void 0!==o&&void 0!==o.dataOld&&void 0!==o.dataNew){var s=o.dataOld[e.table],n=o.dataNew[e.table],r={old:{},new:{}};if(void 0!==s&&void 0!==n){var l=!1;for(var c in n)"AFGHTimeWJ"!==c&&"AFGHkeyTime"!==c&&(void 0!==s[c]?n[c]!==s[c]&&(r.old[c]=s[c],r.new[c]=n[c],l||(l=!0)):(r.old[c]=null,r.new[c]=n[c],l||(l=!0)));var d={};return d[e.table]=n,l&&(this.input_action={table:e.table,pk:e.pk,data_key_value:t.data_key_value,dataCompare:r,form_code:this.context.infoA.form_code,dataNew:{table:e.table,data:n},fo_reopen:[{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:this.context.infoA.form_code,data:d,table:e.table}}]}),a.ZP.ms_clearMasterData(this.context.infoA.key_form),l}}}}}}supportMasterData(){if(void 0!==this.context.infoA){var e=a.ZP.getConfigMasterOfComponent(this.context.infoA.form_code,this.context.componentConfigDefault.codeHidden);if(void 0!==e&&void 0!==e.config&&void 0!==e.config.isMasterData&&void 0!==e.config.privateKeyTableMasterData&&void 0!==e.config.tableMasterData&&"true"===e.config.isMasterData&&""!==e.config.privateKeyTableMasterData&&""!==e.config.tableMasterData)return{pk:e.config.privateKeyTableMasterData,table:e.config.tableMasterData}}}}const z=Q,U="full_name",B="status",Y="language_default",H="avatar",V="lock_screen_image",W="current_password",G="new_password",J="confirm_new_password",q="current_PIN",K="new_PIN",X="repeat_PIN",$="full_name",ee="login_name",te="status",ie="lang",oe="avatar",ae="lock_screen_image";class se{constructor(e){this.setPassword=e=>(this.rebuildPassword(e),this.pwd_display),this.getPasswordDecode=()=>this.decodePassword(this.pwd_encode),this.getPasswordDisplay=()=>this.pwd_display,this.props=e,this.pwd_encode="",this.pwd_display=""}rebuildPassword(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=String(e);let t=0,i=this.decodePassword(this.pwd_encode),o="";for(const a of e)"\u2022"===a?(o+=i[t]||"",t++):o+=a;this.pwd_encode=this.encodePassword(o),this.pwd_display=e.replace(/./g,"\u2022")}encodePassword(e){let t="";for(let i of e){let e=i.charCodeAt(0);t+=String.fromCharCode(2*e)}return t}decodePassword(e){let t="";for(let i of e){let e=i.charCodeAt(0);t+=String.fromCharCode(e/2)}return t}}class ne extends s.Component{constructor(e){var t,i,o;super(e),t=this,this.onChangeInputUserMap=(e,t)=>{let i=e.target.value,{stateData:o,userMap:a}=this.state,s=t.split(".");3===s.length&&(o.user_map.data[s[0]][s[2]].value=i,a[s[1]][s[2]]=i,this.setState({stateData:o,userMap:a}))},this.onSaveUserMap=e=>{let{userMap:t}=this.state;(0,c.Yr)([{txcode:"#sys:bo-save-userMap",input:t}],{}).then((e=>{let t=a.ZP.foGetData("info",e);t&&("saveUserMapOk"===t.saveUserMap?this.pushNotification(t.saveUserMap,!0):this.pushNotification(t.saveUserMap,!1))}))},this.changeKeyLanguage=e=>{let t={note:a.ZP.getLang("note"),full_name:a.ZP.getLang("myProfile_fullName"),avatar:a.ZP.getLang("myProfile_avatar"),bgre_login:a.ZP.getLang("myProfile_bgreLogin"),profile_app:a.ZP.getLang("myProfile_profileApp"),status:a.ZP.getLang("myProfile_status"),check_password:a.ZP.getLang("myProfile_checkPassword"),old_password:a.ZP.getLang("myProfile_oldPassword"),new_password:a.ZP.getLang("myProfile_newPassword"),new_password_again:a.ZP.getLang("myProfile_newPasswordAgain"),pin_present:a.ZP.getLang("myProfile_pinPresent"),new_pin:a.ZP.getLang("myProfile_newPin"),new_pin_again:a.ZP.getLang("myProfile_newPinAgain"),title_:a.ZP.getLang("myProfile_title"),des_:a.ZP.getLang("myProfile_des"),btn_save:a.ZP.getLang("btn_save"),btn_clear:a.ZP.getLang("btn_clear"),btn_update:a.ZP.getLang("myProfile_btnUpdate"),btn_submit:a.ZP.getLang("myProfile_btnSubmit"),msg_old_pass:a.ZP.getLang("myProfile_msgOldPass"),msg_new_pass:a.ZP.getLang("myProfile_msgNewPass"),msg_new_pass_emtry:a.ZP.getLang("myProfile_msgNewPassEmtry"),msg_old_pin:a.ZP.getLang("myProfile_msgOldPIN"),msg_new_pin:a.ZP.getLang("myProfile_msgNewPIN"),msg_new_pin_emtry:a.ZP.getLang("myProfile_msgNewPINEmtry"),hub:a.ZP.getLang("myProfile_tabHub"),o9:a.ZP.getLang("myProfile_tabO9"),username:a.ZP.getLang("myProfile_username"),password:a.ZP.getLang("myProfile_password"),tabUserInfo:a.ZP.getLang("myProfile_tabUserInfo"),tabPassword:a.ZP.getLang("myProfile_tabPassword"),tabPIN:a.ZP.getLang("myProfile_tabPIN"),tabUserMap:a.ZP.getLang("myProfile_tabUserMap"),myProfile_twoPINNotEqual:a.ZP.getLang("myProfile_twoPINNotEqual"),myProfile_newPINRequire:a.ZP.getLang("myProfile_newPINRequire"),myProfile_curPINRequire:a.ZP.getLang("myProfile_curPINRequire"),myProfile_confirmPINRequire:a.ZP.getLang("myProfile_confirmPINRequire"),myProfile_currentPassRequire:a.ZP.getLang("myProfile_currentPassRequire"),myProfile_repeatPassRequire:a.ZP.getLang("myProfile_repeatPassRequire"),myProfile_newPassRequire:a.ZP.getLang("myProfile_newPassRequire"),myProfile_twoPassNotEqual:a.ZP.getLang("myProfile_twoPassNotEqual"),changePassInvalidOldPass:a.ZP.getLang("changePassInvalidOldPass"),background_app:a.ZP.getLang("myProfile_backgroundApp"),form_btn_close:a.ZP.getLang("form_close_title"),form_btn_add:a.ZP.getLang("form_add_title")};if(void 0!==e)return t;let i=this.state.infoA;i.title=a.ZP.getLang("myProfile_title"),i.des=a.ZP.getLang("myProfile_des"),i.lang_form.vi=a.ZP.getLang("myProfile_title"),i.lang_form.en=a.ZP.getLang("myProfile_title"),this.setState({languages:t,infoA:i}),this.changeLanguageTemplate(t)},this.btnUpdateClickHandler=(e,t)=>{this.callAPI("my_profile_update",{api_data:{user_name:this.getValueInput($),avatar:this.getValueInput(H).split(",")[1]}}).then((e=>{if(e&&!e.hasError){let{user_acc:e}=this.state;e.user_name=this.getValueInput($),e.avatar=this.getValueInput(H).split(",")[1],a.ZP.context_setKey("user_acc",e),this.pushNotification("Update Profile",!0)}else this.pushNotification("Update Profile",!1)}))},this.callAPI=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var s=[{txcode:"#ncbsCbs:bo-rule-getInfoAPI",input:{learn_api:e,app:"ncbsCbs"}}];return s[0].input=Object.assign(s[0].input,i),(0,c.Yr)(s,{}).then((e=>a.ZP.foGetData(o,e)?a.ZP.foGetData(o,e):{error_data:a.ZP.foGetData("infoError",e),hasError:!0})).finally((e=>{t.setState({isLoading:!1})}))},this.pushNotification=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i={},o=a.ZP.getLang(e);i={class_:!0===t?"success":"error",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}},a.ZP.pushNotify("notifyToast",i,{}),a.ZP.pushNotify("notifyDefault",i,{}),a.ZP.callAllScreenListen()},this.btnSavePassClickHandler=(e,t)=>{let i=this.OBJ_LOGIC_PASSWORD[W].getPasswordDecode(this.getValueInput(W)),o=this.OBJ_LOGIC_PASSWORD[G].getPasswordDecode(this.getValueInput(G)),s=this.OBJ_LOGIC_PASSWORD[J].getPasswordDecode(this.getValueInput(J));if(this.isValidPassword(i,o,s)){let e=[{txcode:"#sys:bo-change-password",input:{token_webui:(0,a.VN)(),current_pass:i,new_pass:o,confirm_new_pass:s}}];(0,c.Yr)(e,{}).then((e=>{const t=a.ZP.foGetData("data",e)||{};var i={error_data:a.ZP.foGetData("infoError",e),hasError:!0};if(i.hasError)this.pushNotification(i.error_data[0].info,"error");else{var o,s;let e=t.info;var n;if(null!==(o=t.api_info)&&void 0!==o&&o.data.e)e=null===(n=t.api_info)||void 0===n?void 0:n.data.e;let i=(null===(s=t.api_info)||void 0===s?void 0:s.data.t)||t.type;i?(this.btnClearClickHandler(),this.pushNotification(e,i)):(this.setErrorInput(W,e),this.pushNotification(e,"error"))}}))}},this.btnClearClickHandler=()=>{let{stateData:e}=this.state,{current_password:t,new_password:i,confirm_new_password:o}=this.state.stateData;t.dataFull.value="",t.dataFull.config.cmd.error.message="",i.dataFull.value="",i.dataFull.config.cmd.error.message="",o.dataFull.value="",o.dataFull.config.cmd.error.message="",this.setState({stateData:e})},this.btnSavePINClickHandler=e=>{let{stateData:t}=this.state,i=this.OBJ_LOGIC_PASSWORD[q].getPasswordDecode(this.getValueInput(q)),o=this.OBJ_LOGIC_PASSWORD[K].getPasswordDecode(this.getValueInput(K)),s=this.OBJ_LOGIC_PASSWORD[X].getPasswordDecode(this.getValueInput(X));this.isValidPIN(i,o,s)&&(0,c.Yr)([{txcode:"#sys:bo-change-PIN",input:{pin_old:i,pin_new_1:o,pin_new_2:s}}],{}).then((e=>{let i=a.ZP.foGetData("info",e);if(void 0!==i&&void 0!==i.savePin)switch(i.savePin){case"savePinOk":t.current_PIN.dataFull.config.cmd.visible=!0,t.current_PIN.dataFull.value="",t.new_PIN.dataFull.value="",t.repeat_PIN.dataFull.value="",this.pushNotification(i.savePin,!0),this.setState({stateData:t});break;case"savePinFalse":this.pushNotification(i.savePin,!1);break;case"incorrectPIN":this.pushNotification(i.savePin,!1),this.setErrorInput(q,i.savePin)}}),(e=>{console.log("error",e)})).catch((e=>{console.log("error catch",e)}))},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.onChangeValue=(e,t)=>{let{stateData:i}=this.state;i[t].dataFull.value=e.target.value,this.setState({stateData:i})},this.onChangeValuePassword=(e,t)=>{let{stateData:i}=this.state;this.OBJ_LOGIC_PASSWORD[t].setPassword(e.target.value),i[t].dataFull.value=this.OBJ_LOGIC_PASSWORD[t].getPasswordDisplay(e.target.value),this.setState({stateData:i})},this.closeForm=()=>{a.ZP.removeForm(this.key_form)},this.onChangeValueSelect=(e,t,i)=>{let{stateData:o}=this.state;if(void 0!==o[i]){let e=[],a=[];e=o[i].dataFull.data.filter((e=>e.selected)),a=o[i].dataFull.data.filter(((e,i)=>i===t)),e.length>0&&(e[0].selected=!1),a.length>0&&(a[0].selected=!0),this.setState({stateData:o})}},this.key_form="myProfile",this.notificationTimeOut=5e3,this.formRender=(0,g.Iq)("jwebui_myProfile"),this.LOGIC_PASSWORD_oldpwd=new se,this.LOGIC_PASSWORD_newpwd=new se,this.LOGIC_PASSWORD_confirm_newpwd=new se,this.LOGIC_PASSWORD_oldPIN=new se,this.LOGIC_PASSWORD_newPIN=new se,this.LOGIC_PASSWORD_confirmNewPIN=new se,this.OBJ_LOGIC_PASSWORD={},this.LANGS=a.ZP.getConfigUser("list_lang_config"),this.list_lang_datafull=[];for(const a of this.LANGS)this.list_lang_datafull.push({title:a.view,value:a.key});let s={};void 0!==this.props.profile.chat&&(s=this.props.profile.chat),this.prefixImage="data:image/png;base64,";let n={};void 0!==this.props.profile.profile_app&&(n=this.props.profile.profile_app);let r=a.ZP.context_get("user_acc"),l=e.profile.user_map||{},d=this.changeKeyLanguage("start");this.uploadfile_avatar={},this.state={userMap:l,user_acc:r,chat:s,visibility:"",data_lang:a.ZP.getConfigUser("list_lang_config"),profile_app:n,check_password:"",infoA:{lang_form:{vi:a.ZP.getLang("myProfile_title"),en:a.ZP.getLang("myProfile_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!1},languages:d,show_toast:"snackbar",check_msg:!1,stateData:{form:{dataFull:{config:{default:{title:d.title_,title_sub:d.des_,icon:"person"}},title_button:{close_button:d.form_btn_close,add_form:d.form_btn_add},mode:{form_min:!1},list_button_on_header:[],cmd:{visibility:"",isLoading:!1,isFavorite:!1},abs_Close:this.closeForm,abs_AddMenuBar:this.addMenu}},tab:{data:(null!==(i=Object.keys(e.profile.user_map))&&void 0!==i&&i.length,[{title:d.tabUserInfo},{title:d.tabPassword}])},save_PIN:{dataFull:{config:{default:{title:d.btn_save,type:"primary",class:""}}},abs_Click:this.btnSavePINClickHandler},full_name:{dataFull:{config:{default:{title:d.full_name,type:"text",class:"col-md-12",code_form_component:U},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:r.user_name},abs_Change:this.onChangeValue},status:{dataFull:{config:{default:{title:d.status,type:"text",class:"col-md-12",code_form_component:B},cmd:{disable:!1,visible:!1,error:{message:"",type:""}}},value:n[te]||""},abs_Change:this.onChangeValue},language_default:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:d.profile_app,type:"text",class:"col-md-12",code_form_component:Y},cmd:{disable:!1,visible:!1,error:{message:"",type:""}}},data:this.getConfigSelectItem(this.list_lang_datafull,n.lang)},abs_Change:this.onChangeValueSelect},avatar:{dataFull:{config:{default:{title:d.avatar,type:"",class:"col-md-12",icon:"",accept:"image/png, image/jpeg",hasUpload:!0,att_content:r[oe]?"":"No file choose"},cmd:{disable:!1,isLoading:!1}},abs_Change:e=>{if(e.preventDefault(),void 0!==e.target.files)if(e.target.files.length>0){let t=new FileReader,i=e.target.files[0];if("img"===this.getFileType(i.type,i.name)){t.onloadend=()=>{let{stateData:e}=this.state;e.avatar.dataFull.value=t.result,this.setState({stateData:e})};let o=10;void 0!==i&&null!==i&&i.size/1024/1024<o&&t.readAsDataURL(i),(0,c.bq)(e.target.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((e=>{this.uploadfile_avatar=e;let{stateData:i}=this.state;i.avatar.dataFull.config.default.att_content=t.name,this.setState({stateData:i})}),(e=>{e.statusCode&&e.statusText?a.ZP.showToast(e.statusCode+":"+e.statusText+"#",!1):a.ZP.showToast(a.ZP.getLang("FileTypeError"),!1)}))}else a.ZP.showToast(a.ZP.getLang("FileTypeError"),!1)}else a.ZP.showToast(a.ZP.getLang("FileTypeError"),!1)},value:this.isImage(r[oe])?this.prefixImage+r[oe]:""}},lock_screen_image:{dataFull:{config:{default:{title:d.bgre_login,type:"text",class:"col-md-12",code_form_component:V},cmd:{disable:!1,visible:!1,error:{message:"",type:""}}},value:n[ae]},abs_Change:this.onChangeValue},background_app:{dataFull:{config:{default:{title:d.background_app,type:"",class:"col-md-12",icon:"",accept:"image/png,image/jpeg",hasUpload:!0,att_content:"No file choose"},cmd:{disable:!1,isLoading:!1}},abs_Change:e=>{if(e.preventDefault(),void 0!==e.target.files)if(e.target.files.length>0)if(this.checkFileTypeAccept(e.target.files[0].type)){let t=new FileReader,i=e.target.files[0];t.onloadend=()=>{};let o=10;void 0!==i&&null!==i&&i.size/1024/1024<o&&t.readAsDataURL(i),(0,c.OU)(e.target.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then((e=>{this.uploadfile_result=e;let{stateData:t}=this.state;t.background_app.dataFull.value="../rs/global/img/"+e.name,this.setState({stateData:t})}),(e=>{e.statusCode&&e.statusText?a.ZP.showToast(e.statusCode+":"+e.statusText+"#",!1):a.ZP.showToast(a.ZP.getLang("FileUploadError"),!1)}))}else a.ZP.showToast(a.ZP.getLang("FileTypeError"),!1);else a.ZP.showToast(a.ZP.getLang("FileTypeError"),!1)},value:n.background_app}},update:{dataFull:{config:{default:{title:d.btn_update,type:"primary",class:""},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}}},abs_Click:this.btnUpdateClickHandler},current_password:{dataFull:{config:{default:{title:d.old_password,type:"text",class:"col-md-12",code_form_component:W,required:!0},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},new_password:{dataFull:{config:{default:{title:d.new_password,type:"text",class:"col-md-12",code_form_component:G,required:!0},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},confirm_new_password:{dataFull:{config:{default:{title:d.new_password_again,type:"text",class:"col-md-12",code_form_component:J,required:!0},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},save:{dataFull:{config:{default:{title:d.btn_save,type:"primary",class:""}}},abs_Click:this.btnSavePassClickHandler},clear:{dataFull:{config:{default:{title:d.btn_clear,type:"",class:""}}},abs_Click:this.btnClearClickHandler},current_PIN:{dataFull:{config:{default:{title:d.pin_present,type:"text",class:"col-md-12",code_form_component:q,required:!0},cmd:{disable:!1,visible:!0===(null===(o=this.props.profile)||void 0===o?void 0:o.isHasPin),error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},new_PIN:{dataFull:{config:{default:{title:d.new_pin,required:!0,type:"text",class:"col-md-12",code_form_component:K},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},repeat_PIN:{dataFull:{config:{default:{title:d.new_pin_again,type:"text",class:"col-md-12",code_form_component:X,required:!0},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},user_map:this.getConfigUserMap(e.profile.user_map,d),button_user_map:{dataFull:{config:{default:{title:d.btn_save,type:"primary",class:""}}},abs_Click:this.onSaveUserMap}}},this.OBJ_LOGIC_PASSWORD[W]=this.LOGIC_PASSWORD_oldpwd,this.OBJ_LOGIC_PASSWORD[G]=this.LOGIC_PASSWORD_newpwd,this.OBJ_LOGIC_PASSWORD[J]=this.LOGIC_PASSWORD_confirm_newpwd,this.OBJ_LOGIC_PASSWORD[q]=this.LOGIC_PASSWORD_oldPIN,this.OBJ_LOGIC_PASSWORD[K]=this.LOGIC_PASSWORD_newPIN,this.OBJ_LOGIC_PASSWORD[X]=this.LOGIC_PASSWORD_confirmNewPIN}checkFileTypeAccept(e){return"image/png,image/jpeg".split(",").map((function(e){return new RegExp(e.replace("*","[^\\/,]+"))})).some((t=>t.test(e)))}getFileType(e,t){if("application/pdf"===e)return"pdf";if("text/plain"===e)return"text";if(/image.*/.test(e))return"img";let i=t.split(".");return"xlsx"===i[i.length-1]||"xls"===i[i.length-1]?"excel":i[i.length-1]}isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(i){}return t}getConfigSelectItem(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((t=>({title:t.title,value:t.value,selected:t.value===e})))}getConfigUserMap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{data:Object.keys(e).map(((i,o)=>{var a;return{title:(null===(a=e[i])||void 0===a?void 0:a.app_name)||t[i]||i,id:o,username:{title:t.username,value:e[i].username,code_form_component:`${o}.${i}.username`,cmd:{error:{message:"",type:""}},abs_Change:this.onChangeInputUserMap},password:{title:t.password,value:e[i].password,code_form_component:`${o}.${i}.password`,cmd:{error:{message:"",type:""}},abs_Change:this.onChangeInputUserMap}}}))}}changeLanguageTemplate(e){let{stateData:t}=this.state;t.form.dataFull.config.default.title=e.title_,t.form.dataFull.config.default.title_sub=e.des_,t.form.dataFull.title_button.close_button=e.form_btn_close,t.form.dataFull.title_button.add_form=e.form_btn_add,t.full_name.dataFull.config.default.title=e.full_name,t.status.dataFull.config.default.title=e.status,t.language_default.dataFull.config.default.title=e.profile_app,t.avatar.dataFull.config.default.title=e.avatar,t.lock_screen_image.dataFull.config.default.title=e.bgre_login,t.update.dataFull.config.default.title=e.btn_update,t.current_password.dataFull.config.default.title=e.old_password,t.new_password.dataFull.config.default.title=e.new_password,t.confirm_new_password.dataFull.config.default.title=e.new_password_again,t.save.dataFull.config.default.title=e.btn_save,t.clear.dataFull.config.default.title=e.btn_clear,t.current_PIN.dataFull.config.default.title=e.pin_present,t.new_PIN.dataFull.config.default.title=e.new_pin,t.repeat_PIN.dataFull.config.default.title=e.new_pin_again,t.save_PIN.dataFull.config.default.title=e.btn_save,t.tab.data[0].title=e.tabUserInfo,t.tab.data[1].title=e.tabPassword,t.tab.data[2].title=e.tabPIN,t.tab.data.length>3&&(t.tab.data[3].title=e.tabUserMap),Object.keys(this.props.profile.user_map).forEach(((i,o)=>{t.user_map.data[o].title=e[i]||i,t.user_map.data[o].username.title=e.username,t.user_map.data[o].password.title=e.password})),t.button_user_map.dataFull.config.default.title=e.btn_save,t.current_password.dataFull.config.cmd.error.message=e[t.current_password.dataFull.config.cmd.error.titleLang],t.new_password.dataFull.config.cmd.error.message=e[t.new_password.dataFull.config.cmd.error.titleLang],t.confirm_new_password.dataFull.config.cmd.error.message=e[t.confirm_new_password.dataFull.config.cmd.error.titleLang],t.current_PIN.dataFull.config.cmd.error.message=e[t.current_PIN.dataFull.config.cmd.error.titleLang],t.new_PIN.dataFull.config.cmd.error.message=e[t.new_PIN.dataFull.config.cmd.error.titleLang],t.repeat_PIN.dataFull.config.cmd.error.message=e[t.repeat_PIN.dataFull.config.cmd.error.titleLang],this.setState({stateData:t})}getConfigTemplate(){}isValidPassword(e,t,i){let o=!1;return""===e?this.setErrorInput(W,"myProfile_currentPassRequire"):this.clearErrorInput(W),""===t?this.setErrorInput(G,"myProfile_newPassRequire"):this.clearErrorInput(G),""===i?this.setErrorInput(J,"myProfile_repeatPassRequire"):this.clearErrorInput(J),""!==e&&""!==t&&""!==i&&(t!==i?(this.setErrorInput(G," "),this.setErrorInput(J,"myProfile_twoPassNotEqual")):o=!0),o}isValidPIN(e,t,i){let o=!1;return""===e&&!0===this.props.profile.isHasPin?this.setErrorInput(q,"myProfile_curPINRequire"):this.clearErrorInput(q),""===t?this.setErrorInput(K,"myProfile_newPINRequire"):this.clearErrorInput(K),""===i?this.setErrorInput(X,"myProfile_confirmPINRequire"):this.clearErrorInput(X),""===e&&this.props.profile.isHasPin||""===i||""===t||(i!==t?(this.setErrorInput(K," "),this.setErrorInput(X,"myProfile_twoPINNotEqual")):""===e&&!0===this.props.profile.isHasPin?this.setErrorInput(q,"myProfile_curPINRequire"):(this.clearErrorInput(q),o=!0)),o}getProfileAppData(){var e;let{profile_app:t}=this.state;return t[ee]=this.getValueInput(U),t[te]=this.getValueInput(B),t[ie]=null===(e=this.getValueDropdown(Y)[0])||void 0===e?void 0:e.value,t[oe]=this.getValueInput(H),t[ae]=this.getValueInput(V),t.background_app=this.getValueInput("background_app"),t}render(){const e=this.formRender;return(0,v.jsx)("div",{style:{display:this.state.visibility},children:(0,v.jsx)(e,{stateData:this.state.stateData})})}componentDidMount(){a.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),a.ZP.form_addMapping(this.key_form,this.props.mapping_key)}getValueInput(e){return this.state.stateData[e].dataFull.value}getValueDropdown(e){return this.state.stateData[e].dataFull.data.filter((e=>void 0!==e.selected&&!0===e.selected))}setErrorInput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{stateData:i}=this.state;i[e].dataFull.config.cmd.error.message=this.state.languages[t],i[e].dataFull.config.cmd.error.titleLang=t,this.setState({stateData:i})}clearErrorInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{stateData:t}=this.state;t[e].dataFull.config.cmd.error.message="",t[e].dataFull.config.cmd.error.titleLang="",this.setState({stateData:t})}}const re=ne;class le extends s.Component{constructor(e){super(e),this.getTXName=e=>{let t=e.type,i=e.trace,o="";var a;if("request"===t)o=(null===i||void 0===i||null===(a=i[0])||void 0===a?void 0:a.txcode)||"--";else if("response"===t){var s,n,r;o=(null===i||void 0===i||null===(s=i.ob_all_fo)||void 0===s||null===(n=s.fo)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.txcode)||"--"}let l=["bo-load-txFo","fo-container","fo-msg-toast","-load-"];for(const c of l)o.includes(c)&&(o="---");return o},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.key_form="mangerFeedback";let t=this.props.feedback;for(let i=0;i<t.length;i++)if(void 0!==t[i].feedback.feed_id){t[i].feedback.feed_id_data=[];let e=t[i].feedback.feed_id.split(";");for(let o=0;o<e.length;o++)t[i].feedback.feed_id_data.push({feed_id:e[o]})}this.key_feedback_color={aa:"#ffffff"},this.state={visibility:"",data:t,infoA:{title:"Qu\u1ea3n tr\u1ecb ph\u1ea3n h\u1ed3i ng\u01b0\u1eddi d\xf9ng",des:"\u0110\u01a1n gi\u1ea3n h\xf3a d\u1eef li\u1ec7u y\xeau c\u1ea7u h\u1ed7 tr\u1ee3 l\u1ed7i c\u1ee7a ng\u01b0\u1eddi d\xf9ng, n\u1ebfu IT c\xf3 trong tay d\u1eef li\u1ec7u ng\u01b0\u1eddi d\xf9ng \u0111\xe3 thao t\xe1c!",openOne:"true",ofModal:!1},icon_copy:"fa-clone",icon_default:"fa-clipboard",index_select_copy:"aa"}}fortmatDateOfFeedback(e){let t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"->"+t.getMilliseconds()}createRamdomColor_keyFeedback(e){if(void 0===this.key_feedback_color[e]){var t=this.createRandomColor();let i=JSON.stringify(this.key_feedback_color);for(;i.includes(t);)t=this.createRandomColor();this.key_feedback_color[e]=t}return this.key_feedback_color[e]}createRandomColor(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}renderTableDetailFeedId(e,t){return void 0!==e.feed_detail&&e.feed_detail.map(((e,i)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:e.form_name}),(0,v.jsx)("td",{children:e.from_action_name}),(0,v.jsxs)("td",{style:{backgroundColor:this.createRamdomColor_keyFeedback(e.key_feedback),color:"#ffffff"},children:[(0,v.jsx)("i",{className:"fa "+("request"===e.type?"fa-paper-plane":"fa-download"),"aria-hidden":"true"}),"\xa0",e.type,"\xa0",this.getTXName(e)]}),(0,v.jsxs)("td",{children:[(0,v.jsx)("button",{style:{color:"#83c76d",cursor:"pointer"},onClick:o=>{a.ZP.copyToClipboard(JSON.stringify(e.trace));let s=t+"-"+i;this.setState({index_select_copy:s})},children:(this.state.index_select_copy,"copy")}),"\xa0",(0,v.jsx)("button",{style:{color:"#83c76d",cursor:"pointer"},onClick:o=>{a.ZP.copyToClipboard(e.key_feedback);let s=t+"-"+i;this.setState({index_select_copy:s})},children:this.state.index_select_copy===t+"-"+i?"copy":"key"})]}),(0,v.jsx)("td",{children:this.fortmatDateOfFeedback(e.time)})]},i)))}render(){const e=(0,g.RP)("uForm");return(0,v.jsxs)(e,{dataFull:{config:{default:{title:"Feedback Managerment"}},cmd:{visibility:"block"===this.state.visibility}},children:[(0,v.jsx)("div",{className:"form-style",style:{display:this.state.visibility},children:(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:(0,v.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:(0,v.jsxs)("div",{className:"prtm-block",children:[(0,v.jsxs)("div",{className:"prtm-block-title mrgn-b",children:[(0,v.jsx)("h3",{children:this.state.infoA.title}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{className:"note-box bg-danger",children:"Note !"}),this.state.infoA.des]})]}),(0,v.jsx)("div",{className:"row full-lg-md",children:(0,v.jsx)("div",{style:{marginBottom:20},children:(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsxs)("table",{className:"table table-bordered table-middle jwebui-table-email-myDevice",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{className:"bg-info base-reverse",children:[(0,v.jsx)("th",{children:"\u1ee8ng d\u1ee5ng"}),(0,v.jsx)("th",{children:"Ng\xe0y l\u01b0u"}),(0,v.jsx)("th",{children:"Ng\u01b0\u1eddi d\xf9ng \xfd ki\u1ebfn"}),(0,v.jsx)("th",{children:"Danh s\xe1ch m\xe3 g\xf3i tin"}),(0,v.jsx)("th",{})]})}),(0,v.jsx)("tbody",{children:this.state.data.map(((e,t)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:e.feedback.app}),(0,v.jsx)("td",{children:e.feedback.dayOfYear}),(0,v.jsx)("td",{children:e.feedback.info_end_user}),(0,v.jsx)("td",{children:(0,v.jsxs)("table",{className:"table table-bordered table-middle jwebui-table-email-myDevice",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{className:"bg-info base-reverse",children:[(0,v.jsx)("th",{children:"Form name"}),(0,v.jsx)("th",{children:"Action"}),(0,v.jsx)("th",{children:"Status"}),(0,v.jsx)("th",{}),(0,v.jsx)("th",{children:"Time"})]})}),(0,v.jsx)("tbody",{children:e.feedback.feed_id_data.map(((e,t)=>this.renderTableDetailFeedId(e,t)))})]},t)}),(0,v.jsxs)("td",{children:[(0,v.jsx)("button",{className:"btn btn-danger",type:"button",onClick:e=>{},children:"X\xf3a"}),(0,v.jsx)("button",{className:"btn btn-danger",type:"button",onClick:i=>{(0,c.Yr)([{txcode:"#sys:bo-feedback-loadFeedbackDetail",input:{feedback:e.feedback}}],{}).then((i=>{if(void 0!==i.fo&&i.fo.length>0&&void 0!==i.fo[0].input&&void 0!==i.fo[0].input.feedback){let o=i.fo[0].input.feedback;if(void 0!==e.feedback.feed_id_data){let i=e.feedback.feed_id_data;for(let e=0;e<i.length;e++)if(void 0!==o[i[e].feed_id]){let t=o[i[e].feed_id];i[e].feed_detail=[];for(let o=0;o<t.length;o++)for(let a in t[o]){let s=t[o][a];i[e].feed_detail.push(s)}}let a=this.state.data,s=e;s.feedback.feed_id_data=i,a[t]=s,this.setState({data:a})}}}),(e=>{}))},children:"T\u1ea3i chi ti\u1ebft"})]})]},t)))})]})})})})]})})})})})," "]})}componentDidMount(){a.ZP.addAppAuto(this.key_form,this,this.state.infoA.ofModal),a.ZP.form_addMapping(this.key_form,this.props.mapping_key)}}const ce=le;class de extends r.Z{constructor(){super(...arguments),this.loadFormMyProfile=()=>{var e=a.ZP.autoID(),t={};console.log(this.input),void 0!==this.input.profile&&(t=this.input.profile),a.ZP.newForm((0,v.jsx)(s.Suspense,{fallback:(0,g.wz)(),children:(0,v.jsx)(re,{mapping_key:e,profile:t},e)},e))},this.loadMangerFeedback=()=>{var e=a.ZP.autoID(),t={};void 0!==this.input.feedback&&(t=this.input.feedback),a.ZP.newForm((0,v.jsx)(ce,{mapping_key:e,feedback:t},e))}}}const he=de;class ue extends r.Z{constructor(){super(...arguments),this.developer=()=>{},this.setOOPThis=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.callDirFromSupport("setDataOOP",{codeHidden:this.context.componentConfigDefault.codeHidden},this.input.account)}}}const pe=ue;class _e extends r.Z{constructor(){var e;super(...arguments),e=this,this.confirm=(e,t)=>{var i;const{infoA:o,componentConfigDefault:s}=this.context;let n;a.ZP.getFormAppAuto(o.key_form).props.conf.forEach((e=>{if(n)return;e.list_view.forEach((e=>{if(n)return;e.list_input.forEach((e=>{if(!n&&("cTableDefault"===e.inputtype||"jTableSearch"===e.inputtype||"jTableForm"===e.inputtype))if(t){if(e.default.code!==t)return;{let t=a.ZP.parseJson(e.config.columns);n=t[0]}}else{let t=a.ZP.parseJson(e.config.columns);n=t[0]}}))}))}));let r=s.name||s.code,l=(null===o||void 0===o||null===(i=o.lang_form)||void 0===i?void 0:i[a.ZP.getLangKey()])||o.title||o.des,c=l.indexOf("-"),d=l.lastIndexOf("-");d===c&&(d=l.length),l=l.substring(c+1,d);let h=a.ZP.getLang("sysConfirmContent");h=h.replace("@button_action",a.ZP.getLang(r.toLowerCase())),h=h.replace("@table",l),h=h.replace("@col",n.title),h=h.replace("@val",a.ZP.getOOP(this.context.data,n.code));let u={title:e?a.ZP.getLang(e):a.ZP.getLang(r),content:h};var p=this.buildPackRollBack();return a.ZP.confirmInfo(u,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"warning",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0,keyboard:{enter:!0}}],p),"systemStop"},this.confirmDelete=(e,t)=>{const{infoA:i,componentConfigDefault:o}=this.context;let s;a.ZP.getFormAppAuto(i.key_form).props.conf.forEach((e=>{if(s)return;e.list_view.forEach((e=>{if(s)return;e.list_input.forEach((e=>{if(!s&&("cTableDefault"===e.inputtype||"jTableSearch"===e.inputtype||"jTableForm"===e.inputtype))if(t){if(e.default.code!==t)return;{let t=a.ZP.parseJson(e.config.columns);s=t[0]}}else{let t=a.ZP.parseJson(e.config.columns);s=t[0]}}))}))}));let n=o.name||o.code,r=a.ZP.getLang("sysConfirmContent");r=r.replace("@button_action",a.ZP.getLang(n.toLowerCase())),r=r.replace("@table","item"),r=r.replace("@col",s.title),r=r.replace("@val",""),r=r.replace("?","");let l={title:e?a.ZP.getLang(e):a.ZP.getLang(n),content:r,main_content:a.ZP.getOOP(this.context.data,s.code)};var c=this.buildPackRollBack();return a.ZP.confirmInfo(l,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"warning",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0,keyboard:{enter:!0}}],c),"systemStop"},this.addnew=(e,t,i)=>{let o,s=this.context.infoA_parent;if(s&&s.key_form){let e=a.ZP.getFormAppAuto(s.key_form);e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(o=a.ZP.analyticsTable(e.getData("")))}var n="true";if(void 0!==i&&(n=i),void 0!==e&&void 0!==t){var r=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==r){if(r.hasOwnProperty("callDirFromSupport")&&(r.callDirFromSupport("checkValidate",{},{}),r.hasOwnProperty("getFormValidate"))){if(!r.getFormValidate()){var l;r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!0),r.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:n},{}),r.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(r.getData("")),o&&(this.input_action=Object.assign(o,this.input_action)));for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];if(null!==this&&void 0!==this&&null!==(l=this.context)&&void 0!==l&&l.data&&"object"===typeof this.context.data){let e=a.ZP.cloneJson(this.context.data);this.input_action=Object.assign(e,this.input_action)}return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!r.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),setTimeout((()=>{if(void 0!==r&&null!==r&&r.hasOwnProperty("getLoadingAction")){let e=!1;e=r.getLoadingAction(),e&&setTimeout((()=>{r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1)}),500)}}),6e4),!0}r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1),r.hasOwnProperty("clearTimeOut")&&r.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewNoValidate=(e,t,i)=>{let o={},s=this.context.infoA_parent;for(;s&&s.key_form;){let e=a.ZP.getFormAppAuto(s.key_form);e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1,isCallFromFormChild:!0},{}),e.hasOwnProperty("getData")&&(o=Object.assign(a.ZP.analyticsTable(e.getData("")),o)),s=e.state.infoA_parent&&e.state.infoA_parent.key_form?e.state.infoA_parent:void 0}var n="true";if(void 0!==i&&(n=i),void 0!==e&&void 0!==t){var r=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==r){if(r.hasOwnProperty("callDirFromSupport")){var l;r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!0),r.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:n},{}),r.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(r.getData("")),o&&(this.input_action=Object.assign(o,this.input_action)));for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];if(null!==this&&void 0!==this&&null!==(l=this.context)&&void 0!==l&&l.data&&"object"===typeof this.context.data){let e=a.ZP.cloneJson(this.context.data);this.input_action=Object.assign(e,this.input_action)}return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!r.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),setTimeout((()=>{if(void 0!==r&&null!==r&&r.hasOwnProperty("getLoadingAction")){let e=!1;e=r.getLoadingAction(),e&&setTimeout((()=>{r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1)}),500)}}),6e4),!0}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewChild=(e,t,i)=>{let o=this.context.infoA_parent;var s="true";if(void 0!==i&&(s=i),void 0!==e&&void 0!==t){var n=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==n){if(n.setFormValidateFromFunctionClient(!1),n.hasOwnProperty("callDirFromSupport")&&(n.callDirFromSupport("checkValidate",{},{}),n.hasOwnProperty("getFormValidate"))){if(!n.getFormValidate()){var r;n.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:s},{}),n.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(n.getData("")),o&&(this.input_action=Object.assign(o,this.input_action)));for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];if(null!==this&&void 0!==this&&null!==(r=this.context)&&void 0!==r&&r.data&&"object"===typeof this.context.data){let e=a.ZP.cloneJson(this.context.data);this.input_action=Object.assign(e,this.input_action)}return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!n.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),setTimeout((()=>{if(void 0!==n&&null!==n&&n.hasOwnProperty("getLoadingAction")){let e=!1;e=n.getLoadingAction(),e&&setTimeout((()=>{n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1)}),500)}}),6e4),!0}n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1),n.hasOwnProperty("clearTimeOut")&&n.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewChildNoValidate=(e,t,i)=>{let o=this.context.infoA_parent;var s="true";if(void 0!==i&&(s=i),void 0!==e&&void 0!==t){var n=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==n){if(n.setFormValidateFromFunctionClient(!1),n.hasOwnProperty("callDirFromSupport")){var r;n.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:s},{}),n.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(n.getData("")),o&&(this.input_action=Object.assign(o,this.input_action)));for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];if(null!==this&&void 0!==this&&null!==(r=this.context)&&void 0!==r&&r.data&&"object"===typeof this.context.data){let e=a.ZP.cloneJson(this.context.data);this.input_action=Object.assign(e,this.input_action)}return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!n.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),setTimeout((()=>{if(void 0!==n&&null!==n&&n.hasOwnProperty("getLoadingAction")){let e=!1;e=n.getLoadingAction(),e&&setTimeout((()=>{n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1)}),500)}}),6e4),!0}n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1),n.hasOwnProperty("clearTimeOut")&&n.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system");return!1},this.addnewParent=(e,t,i)=>{let o,s=this.context.infoA_parent;if(s&&s.key_form){let e=a.ZP.getFormAppAuto(s.key_form);e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(o=a.ZP.analyticsTable(e.getData("")))}var n="true";if(void 0!==i&&(n=i),void 0!==e&&void 0!==t){var r=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==r){if(r.hasOwnProperty("callDirFromSupport")&&(r.callDirFromSupport("checkValidate",{},{}),r.hasOwnProperty("getFormValidate"))){if(!r.getFormValidate()){var l;r.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:n},{}),r.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(r.getData("")),o&&(this.input_action=Object.assign(o,this.input_action)));for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];if(null!==this&&void 0!==this&&null!==(l=this.context)&&void 0!==l&&l.data&&"object"===typeof this.context.data){let e=a.ZP.cloneJson(this.context.data);this.input_action=Object.assign(e,this.input_action)}return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!r.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),setTimeout((()=>{if(void 0!==r&&null!==r&&r.hasOwnProperty("getLoadingAction")){let e=!1;e=r.getLoadingAction(),e&&setTimeout((()=>{r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1)}),500)}}),6e4),!0}r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1),r.hasOwnProperty("clearTimeOut")&&r.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewSearch=(e,t,i)=>{let o={},s=this.context.infoA.key_form;do{var n;let e=a.ZP.getFormAppAuto(s),t=null===(n=e.props.infoA_parent)||void 0===n?void 0:n.key_form;e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{});let i=a.ZP.cloneJson(e.getData(""));o=Object.assign(i,o),s=t}while(s);var r="true";if(void 0!==i&&(r=i),void 0!==e&&void 0!==t){var l=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==l){if(l.hasOwnProperty("callDirFromSupport")&&(l.callDirFromSupport("checkValidate",{},{}),l.hasOwnProperty("getFormValidate"))){if(!l.getFormValidate()){if(l.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:r},{}),l.hasOwnProperty("getData")){let e=l.getData(""),t={};for(const i in e)e.hasOwnProperty(i)&&(Number.isInteger(Number(i))||Array.isArray(e[i])||(t[i]=e[i]));if(this.input_action=a.ZP.analyticsTable(t),o)for(const i in o)o.hasOwnProperty(i)&&(Number.isInteger(Number(i))||Array.isArray(o[i]&&!this.input_action[i])||(this.input_action[i]=o[i]))}for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!l.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),setTimeout((()=>{if(void 0!==l&&null!==l&&l.hasOwnProperty("getLoadingAction")){let e=!1;e=l.getLoadingAction(),e&&setTimeout((()=>{l.hasOwnProperty("setLoadingAction")&&l.setLoadingAction(!1)}),500)}}),6e4),!0}l.hasOwnProperty("setLoadingAction")&&l.setLoadingAction(!1),l.hasOwnProperty("clearTimeOut")&&l.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewSearchAdvanced=(e,t,i)=>{let o={},s=this.context.infoA.key_form;do{var n;let e=a.ZP.getFormAppAuto(s),t=null===(n=e.props.infoA_parent)||void 0===n?void 0:n.key_form;e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{});let i=a.ZP.cloneJson(e.getData(""));o=Object.assign(i,o),s=t}while(s);var r="true";if(void 0!==i&&(r=i),void 0!==e&&void 0!==t){var l=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==l){if(l.hasOwnProperty("callDirFromSupport")&&(l.callDirFromSupport("checkValidate",{},{}),l.hasOwnProperty("getFormValidate"))){if(!l.getFormValidate()){if(l.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:r},{}),l.hasOwnProperty("getData")){let e=l.getData(""),t={};for(const i in e)e.hasOwnProperty(i)&&(Number.isInteger(Number(i))||Array.isArray(e[i])||(t[i]=e[i]));if(this.input_action=a.ZP.analyticsTable(t),o)for(const i in o)o.hasOwnProperty(i)&&(Number.isInteger(Number(i))||Array.isArray(o[i]&&!this.input_action[i])||(this.input_action[i]=o[i]))}for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!l.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),setTimeout((()=>{if(void 0!==l&&null!==l&&l.hasOwnProperty("getLoadingAction")){let e=!1;e=l.getLoadingAction(),e&&setTimeout((()=>{l.hasOwnProperty("setLoadingAction")&&l.setLoadingAction(!1)}),500)}}),6e4),!0}l.hasOwnProperty("setLoadingAction")&&l.setLoadingAction(!1),l.hasOwnProperty("clearTimeOut")&&l.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewLookup=(e,t,i)=>{let o={};var s="true";if(void 0!==i&&(s=i),void 0!==e&&void 0!==t){var n=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==n){if(n.hasOwnProperty("callDirFromSupport")&&(n.callDirFromSupport("checkValidate",{},{}),n.hasOwnProperty("getFormValidate"))){if(!n.getFormValidate()){if(n.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:s},{}),n.hasOwnProperty("getData")){let e=n.getData(""),t={};for(const i in e)e.hasOwnProperty(i)&&(Number.isInteger(Number(i))||Array.isArray(e[i])||(t[i]=e[i]));if(this.input_action=a.ZP.analyticsTable(t),o)for(const i in o)o.hasOwnProperty(i)&&(Number.isInteger(Number(i))||Array.isArray(o[i]&&!this.input_action[i])||(this.input_action[i]=o[i]))}for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!n.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),!0}n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1),n.hasOwnProperty("clearTimeOut")&&n.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.clearError=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e?(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("clearError",{},{})):a.ZP.AppException("#form.clearError","form is undefined","system")}else a.ZP.AppException("#form.clearError","key_form is undefined","system");else a.ZP.AppException("#form.clearError","infoA is undefined","system")},this.clearForm=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e?(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&(e.callDirFromSupport("clearError",{},{}),await e.clearForm(),e.hasOwnProperty("setStatusToForm_AndRunRule")&&(e.setStatusToForm_AndRunRule(6),e.setStatusToForm_AndRunRule(0)))):a.ZP.AppException("#form.clearForm","form is undefined","system")}else a.ZP.AppException("#form.clearForm","key_form is undefined","system");else a.ZP.AppException("#form.clearForm","infoA is undefined","system")},this.view=e=>{if(void 0!==this.input[e])setTimeout((()=>((0,l.QS)({form_code:this.input.form_key},{infoA_parent:this.context.infoA},{},{},this.input[e]),!0)),2);else{const t=this.context.infoA.key_form;a.ZP.persist_setFormError(t,!1,`Not found '${e}' in data response!`,"JWEBUI DEV")}},this.reloadData=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){let e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e?e.hasOwnProperty("reload")&&e.reload():a.ZP.AppException("#form.reloadData","form is undefined","system")}},this.reloadDataTable=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"search_result;table_name;table";if(void 0!==e.context.infoA&&void 0!==e.context.infoA.key_form){let i=a.ZP.getFormAppAuto(e.context.infoA.key_form);void 0!==i?i.hasOwnProperty("reloadComponent")&&i.reloadComponent(t):a.ZP.AppException("#form.reloadComponent","form is undefined","system")}},this.reloadDataParent=()=>{var e,t,i,o;null!==(e=this.context)&&void 0!==e&&null!==(t=e.infoA_parent)&&void 0!==t&&t.key_form&&a.ZP.getFormAppAuto(null===(i=this.context)||void 0===i||null===(o=i.infoA_parent)||void 0===o?void 0:o.key_form).reload()},this.setDataInform=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e?(e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut(),e.putDataAll_andSet(this.input),document.getElementById("content").scrollTo(0,0)):a.ZP.AppException("#form.reloadData","form is undefined","system")}},this.setDataInFormParentModal=()=>{let e=a.ZP.modalDynamicFromFromCode_getRoleBack();if(void 0!==e.context.infoA&&void 0!==e.context.infoA.key_form){var t=a.ZP.getFormAppAuto(e.context.infoA.key_form);void 0!==t?(t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1),t.hasOwnProperty("clearTimeOut")&&t.clearTimeOut(),t.putDataAll_andSet(this.input)):a.ZP.AppException("#form.setDataInFormParentModal","form is undefined","system")}},this.addDataSelected=(e,t)=>void 0!==e&&""!==e.trim()&&(void 0!==this.context.data&&void 0!==this.context.data[e]&&(this.input_action={},this.input_action.table_code=e,this.input_action.table_col_key=t,this.input_action[e]=this.context.data[e],a.ZP.log("this.input_action",this.input_action),!0)),this.addSelected=()=>(this.input_action=this.context.data,!0),this.getDataView=function(){var t=a.ZP.getFormAppAuto(e.context.infoA.key_form);let i={};if(void 0!==t){let e=t.getData();for(const t in e)e.hasOwnProperty(t)&&(Number.isInteger(Number(t))||Array.isArray(e[t])||(i[t]=a.ZP.cloneJson(e[t])))}return e.input_action=Object.assign(i,e.context.data),!0},this.getDataViewAndSet=(e,t,i)=>{var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);let s={};if(void 0!==o){let i=o.getData();for(const e in i)i.hasOwnProperty(e)&&(Number.isInteger(Number(e))||Array.isArray(i[e])||(s[e]=a.ZP.cloneJson(i[e])));o.callDirFromSupport("setAdvanced",{list_component:e},a.ZP.getNodeJson(Object.assign(s,this.context.data),t)),o.getDataAll()}return!0},this.delete=function(){return e.input_action=e.context.data,!0},this.getDataRowTable=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);return void 0!==e&&e.setLoadingAction(!0),this.input_action=this.context.data.data_cpn,this.input_action.rown_data&&(this.input_action=this.input_action.rown_data),setTimeout((()=>{if(void 0!==e&&null!==e&&e.hasOwnProperty("getLoadingAction")){let t=!1;t=e.getLoadingAction(),t&&setTimeout((()=>{e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1)}),500)}}),6e4),!0},this.dataToStore=()=>{a.ZP.findData_Update(this.input)},this.dataToFormAML=async()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&(e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut(),e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&e.putDataAll_andSet(this.input))}},this.dataToForm=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){let e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){if(e.setLoadingAction(!0),e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")){let t="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(t=this.input.config_table.learn_api_data);let i=a.ZP.getDataOOPFormServer(this.input,t),o=i[this.context.infoA.key_form];for(const e in o){const t=o[e];if(Array.isArray(t)){let o=[];for(let i=0;i<t.length;i++){const a=t[i];"object"===typeof a[e]?o.push(a):o.push({[e]:a})}i[e]=o}}let s=a.ZP.cloneJson(i),n=e.getData(),r={};for(const e in n)if("object"===typeof n[e]&&!Array.isArray(!n[e])){null===n[e]?null===i[e]?r[e]=null:r[e]=i[e]:r[e]=Object.assign(a.ZP.cloneJson(n[e]),a.ZP.cloneJson(i[e]||{}));for(const t in n[e]){const i=n[e][t];Array.isArray(i)&&(n[t]=a.ZP.cloneJson(i))}}for(const e in s)if("object"===typeof s[e]&&!Array.isArray(!s[e])&&!Number(e)&&"0"!==e)for(const t in s[e])Array.isArray(!s[e][t])||(n[e]||(n[e]={}),n[e][t]=s[e][t]);for(const e in this.input)-1===e.indexOf("_paging")&&"errorJWebUI"!==e||(n[e]=this.input[e]);e.putDataAll_andSet(n),e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut()}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.dataTableToForm=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"search_result;table_name;table";if(void 0!==e.context.infoA)if(void 0!==e.context.infoA.key_form){let i=a.ZP.getFormAppAuto(e.context.infoA.key_form);if(void 0!==i){if(i.setLoadingAction(!0),i.hasOwnProperty("setFormValidateFromFunctionClient")&&i.setFormValidateFromFunctionClient(!1),i.hasOwnProperty("callDirFromSupport")){let o="";void 0!==e.input.config_table&&void 0!==e.input.config_table.learn_api_data&&(o=e.input.config_table.learn_api_data);let s=a.ZP.getDataOOPFormServer(e.input,o),n=s[e.context.infoA.key_form];for(const e in n){const t=n[e];if(Array.isArray(t)){let i=[];for(let o=0;o<t.length;o++){const a=t[o];"object"===typeof a[e]?i.push(a):i.push({[e]:a})}s[e]=i}}let r=a.ZP.cloneJson(s),l=i.getData(),c={};for(const e in l)if("object"===typeof l[e]&&!Array.isArray(!l[e])){null===l[e]?null===s[e]?c[e]=null:c[e]=s[e]:c[e]=Object.assign(a.ZP.cloneJson(l[e]),a.ZP.cloneJson(s[e]||{}));for(const t in l[e]){const i=l[e][t];Array.isArray(i)&&(l[t]=a.ZP.cloneJson(i))}}for(const e in r)if("object"===typeof r[e]&&!Array.isArray(!r[e])&&!Number(e)&&"0"!==e)for(const t in r[e])Array.isArray(!r[e][t])||(l[e]||(l[e]={}),l[e][t]=r[e][t]);for(const t in e.input)-1===t.indexOf("_paging")&&"errorJWebUI"!==t||(l[t]=e.input[t]);i.putDataAll_andSetComponent(l,t),i.hasOwnProperty("setLoadingAction")&&i.setLoadingAction(!1),i.hasOwnProperty("clearTimeOut")&&i.clearTimeOut()}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.dataToComponent=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){let e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){if(e.setLoadingAction(!0),e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")){let t="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(t=this.input.config_table.learn_api_data);let i=a.ZP.getDataOOPFormServer(this.input,t),o=i[this.context.infoA.key_form];for(const e in o){const t=o[e];if(Array.isArray(t)){let o=[];for(let i=0;i<t.length;i++){const a=t[i];"object"===typeof a[e]?o.push(a):o.push({[e]:a})}i[e]=o}}let s=a.ZP.cloneJson(i),n=e.getData(),r={};for(const e in n)if("object"===typeof n[e]&&!Array.isArray(!n[e])){null===n[e]?null===i[e]?r[e]=null:r[e]=i[e]:r[e]=Object.assign(a.ZP.cloneJson(n[e]),a.ZP.cloneJson(i[e]||{}));for(const t in n[e]){const i=n[e][t];Array.isArray(i)&&(n[t]=a.ZP.cloneJson(i))}}for(const e in s)if("object"===typeof s[e]&&!Array.isArray(!s[e])&&!Number(e)&&"0"!==e)for(const t in s[e])Array.isArray(!s[e][t])||(n[e]||(n[e]={}),n[e][t]=s[e][t]);for(const e in this.input)-1!==e.indexOf("_paging")&&(n[e]=this.input[e]);e.putDataAll_andSetComponent(n,this.input.component_result),e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut()}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.dataToFormNew=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){if(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut(),e.hasOwnProperty("callDirFromSupport")){let i="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(i=this.input.config_table.learn_api_data);var t=a.ZP.getDataOOPFormServer(this.input,i);let o=t[this.context.infoA.key_form];for(const e in o){const i=o[e];if(Array.isArray(i)){let o=[];for(let t=0;t<i.length;t++){const a=i[t];"object"===typeof a[e]?o.push(a):o.push({[e]:a})}t[e]=o}}let s=a.ZP.cloneJson(t),n=e.getData(),r={};for(const e in n)if("object"===typeof n[e]&&!Array.isArray(!n[e])){null===n[e]?null===t[e]?r[e]=null:r[e]=t[e]:r[e]=Object.assign(a.ZP.cloneJson(n[e]),a.ZP.cloneJson(t[e]||{}));for(const t in n[e]){const i=n[e][t];Array.isArray(i)&&(n[t]=a.ZP.cloneJson(i))}}for(const e in s)if("object"!==typeof s[e]||Array.isArray(!s[e])){if("total_items"===e||"search_advanced"===e){let t=!0;for(const i in this.input)if(void 0!==this.input[i]&&"object"===typeof this.input[i]&&void 0!==this.input[i][e]&&this.input[i][e]===s[e]){void 0===n[i]&&(n[i]={}),n[i][e]=s[e],t=!1;break}t&&(n.table_paging[e]=s[e])}}else{void 0!==n[e]&&Array.isArray(n[e])&&(n[e]=[]);for(const t in s[e])Array.isArray(!s[e][t])||(n[e]||(n[e]={}),n[e][t]=s[e][t])}e.putDataAll_andSet(n)}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.dataToFormParent=async()=>{if(void 0!==this.context.infoA_parent)if(void 0!==this.context.infoA_parent.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);if(void 0!==e){if(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut(),e.hasOwnProperty("callDirFromSupport")){let i="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(i=this.input.config_table.learn_api_data);let o="";void 0!==this.input.table_reload&&(o=this.input.table_reload);var t=a.ZP.getDataOOPFormServer(this.input,i);o&&a.ZP.setData(o,t[o]);let s=t[this.context.infoA.key_form];for(const e in s){const i=s[e];if(Array.isArray(i)){let o=[];for(let t=0;t<i.length;t++){const a=i[t];"object"===typeof a[e]?o.push(a):o.push({[e]:a})}t[e]=o}}let n=a.ZP.cloneJson(t),r=e.getData(),l={};for(const e in r)if("object"===typeof r[e]&&!Array.isArray(!r[e])){null===r[e]?null===t[e]?l[e]=null:l[e]=t[e]:l[e]=Object.assign(a.ZP.cloneJson(r[e]),a.ZP.cloneJson(t[e]||{}));for(const t in r[e]){const i=r[e][t];Array.isArray(i)&&(r[t]=a.ZP.cloneJson(i))}}for(const e in n)if("object"!==typeof n[e]||Array.isArray(!n[e])){if("total_items"===e||"search_advanced"===e){let t=!0;for(const i in this.input)if(void 0!==this.input[i]&&"object"===typeof this.input[i]&&void 0!==this.input[i][e]&&this.input[i][e]===n[e]){void 0===r[i]&&(r[i]={}),r[i][e]=n[e],t=!1;break}t&&(r.table_paging[e]=n[e])}}else for(const t in n[e])Array.isArray(!n[e][t])||(r[e]||(r[e]={}),r[e][t]=n[e][t]);e.putDataAll_andSet(r)}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.dataToFormParentTable=async()=>{if(void 0!==this.context.infoA_parent)if(void 0!==this.context.infoA_parent.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);if(void 0!==e){if(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut(),e.hasOwnProperty("callDirFromSupport")){let i="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(i=this.input.config_table.learn_api_data);let o="";void 0!==this.input.table_reload&&(o=this.input.table_reload);var t=a.ZP.getDataOOPFormServer(this.input,i);o&&a.ZP.setData(o,t[o]);let s=t[this.context.infoA_parent.key_form];for(const e in s){const i=s[e];if(Array.isArray(i)){let o=[];for(let t=0;t<i.length;t++){const a=i[t];"object"===typeof a[e]?o.push(a):o.push({[e]:a})}t[e]=o}}let n=a.ZP.cloneJson(this.input),r=e.getData();for(const e in r)if("object"===typeof r[e]&&!Array.isArray(!r[e]))for(const t in r[e]){const i=r[e][t];Array.isArray(i)&&(r[t]=a.ZP.cloneJson(i))}for(const e in n)if("object"!==typeof n[e]||Array.isArray(n[e])){if("object"===typeof n[e]&&Array.isArray(n[e]))r[e]=n[e];else if("total_items"===e||"search_advanced"===e){let t=!0;for(const i in this.input)if(void 0!==this.input[i]&&"object"===typeof this.input[i]&&void 0!==this.input[i][e]&&this.input[i][e]===n[e]){void 0===r[i]&&(r[i]={}),r[i][e]=n[e],t=!1;break}t&&(r.table_paging[e]=n[e])}}else for(const t in n[e])Array.isArray(!n[e][t])||(r[e]||(r[e]={}),r[e][t]=n[e][t]);e.putDataAll_andSet(r)}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.dataToFormTable=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){if(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut(),e.hasOwnProperty("callDirFromSupport")){let i="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(i=this.input.config_table.learn_api_data);let o="";void 0!==this.input.table_reload&&(o=this.input.table_reload);var t=a.ZP.getDataOOPFormServer(this.input,i);o&&a.ZP.setData(o,t[o]);let s=t[this.context.infoA.key_form];for(const e in s){const i=s[e];if(Array.isArray(i)){let o=[];for(let t=0;t<i.length;t++){const a=i[t];"object"===typeof a[e]?o.push(a):o.push({[e]:a})}t[e]=o}}let n=a.ZP.cloneJson(this.input),r=e.getData();for(const e in r)if("object"===typeof r[e]&&!Array.isArray(!r[e]))for(const t in r[e]){const i=r[e][t];Array.isArray(i)&&(r[t]=a.ZP.cloneJson(i))}for(const e in n)if("object"!==typeof n[e]||Array.isArray(n[e])){if("object"===typeof n[e]&&Array.isArray(n[e]))r[e]=n[e];else if("total_items"===e||"search_advanced"===e){let t=!0;for(const i in this.input)if(void 0!==this.input[i]&&"object"===typeof this.input[i]&&void 0!==this.input[i][e]&&this.input[i][e]===n[e]){void 0===r[i]&&(r[i]={}),r[i][e]=n[e],t=!1;break}t&&(r.table_paging[e]=n[e])}}else for(const t in n[e])Array.isArray(!n[e][t])||(r[e]||(r[e]={}),r[e][t]=n[e][t]);e.putDataAll_andSet(r)}}else a.ZP.AppException("#form.dataToForm","form is undefined","system")}else a.ZP.AppException("#form.dataToForm","key_form is undefined","system");else a.ZP.AppException("#form.dataToForm","infoA is undefined","system")},this.findAndRemove=()=>{if(void 0!==this.input.data){var e=this.input.data;if(void 0!==e.table){var t=e.pk_col,i=e.table;if(void 0!==e[i]&&e[i].length>0){var o={};o[i]=e[i][0],a.ZP.deleteData(i,o,t)}}else a.ZP.AppException("#form.findAndRemove","table is undefined","system")}else a.ZP.AppException("#form.findAndRemove","data is undefined","system")},this.update=(e,t,i)=>{var o="true";if(void 0!==i&&(o=i),void 0!==e&&void 0!==t){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&s.hasOwnProperty("getFormValidate")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1),s.hasOwnProperty("clearTimeOut")&&s.clearTimeOut(),!s.getFormValidate()))return s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:o},{}),s.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(s.getData(""))),a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),!0}else a.ZP.AppException("#form.update","form is undefined","system")}else a.ZP.AppException("#form.update","parameter is undefined","system")},this.addErrorAPI=()=>{},this.callAPI=(e,t)=>{var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return i[0].input=Object.assign(i[0].input,t),(0,c.Yr)(i,{}).then((e=>a.ZP.foGetData("data",e)))},this.collectData=(e,t,i)=>{let o,s=this.context.infoA_parent;if(s&&s.key_form){let e=a.ZP.getFormAppAuto(s.key_form);e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(o=a.ZP.analyticsTable(e.getData("")))}if(void 0!==e&&void 0!==t){var n=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==n&&(this.input_action=a.ZP.analyticsTable(n.getData("")))}return o&&(this.input_action=Object.assign(o,this.input_action)),!0}}}const fe=_e;class ge extends r.Z{constructor(){var e;super(...arguments),e=this,this.addNew=(e,t,i)=>{if(e&&t){var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){let i=o.getDataAll(""),s=i[e]||{},n=a.ZP.getNodeJson(i,t)||[];if(void 0===s.AFGHkeyIndexWJ)s.AFGHkeyIndexWJ=a.ZP.autoID(),n.push({[e]:s}),i=a.ZP.setNodeJson(i,t,n),o.putDataAll_andSet(i),o.reload();else{for(let t=0;t<n.length;t++){n[t][e].AFGHkeyIndexWJ===s.AFGHkeyIndexWJ&&(n[t]={[e]:s})}o.putDataAll_andSet(i),o.reload()}return!0}a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.add=(e,t,i)=>{if(e&&t){let r=t.split(".");const l=r[r.length-1];var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){var s;let r=o.getDataAll(""),c=a.ZP.cloneJson(r[e])||{};a.ZP.deleteNodeJson(c,(null===(s=t.split("."))||void 0===s?void 0:s[1])||t);let d=a.ZP.getNodeJson(r,t)||[];if(i){if(""===c[i]||null===c[i]||void 0===c[i])return;for(const e of d){let o=e;var n;if(1===Object.keys(o).length&&"object"===typeof Object.values(o)[0])o=a.ZP.getNodeJson(e,(null===(n=t.split("."))||void 0===n?void 0:n[1])||t);if(o[t]&&(o=o[t]),o[i]===c[i]){let e=o;void 0===e.AFGHkeyIndexWJ&&(e.AFGHkeyIndexWJ=a.ZP.autoID()),c.AFGHkeyIndexWJ=e.AFGHkeyIndexWJ;break}}}if(void 0===c.AFGHkeyIndexWJ)c.AFGHkeyIndexWJ=a.ZP.autoID(),d.push({[l]:a.ZP.cloneJson(c)}),r=a.ZP.setNodeJson(r,t,d),o.putDataAll_andSet(r),o.reload();else{for(let e=0;e<d.length;e++){const t=d[e];let i=t;1===Object.keys(i).length&&"object"===typeof Object.values(i)[0]&&(i=Object.values(t)[0]),i.AFGHkeyIndexWJ===c.AFGHkeyIndexWJ&&(d[e]={[l]:a.ZP.cloneJson(c)})}o.putDataAll_andSet(r),o.reload()}return!0}a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.clear=(e,t)=>{if(e){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){let o=i.getData("");if(t)for(const i in o[e])-1===t.indexOf(i)&&(o[e][i]=void 0);else o[e]={};i.putDataAll_andSet(o,!0),i.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{}),i.reload()}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.reloadAndClear=(e,t)=>{if(e){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){let o=i.getData("");if(t)for(const i in o[e])-1===t.indexOf(i)&&(o[e][i]=void 0);else o[e]={};i.reload(),i.putDataAll_andSet(o,!0),i.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{})}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.getDataTableAndReload=(e,t)=>{if(e){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){let o=i.getDataAll("");o[t]=o[e][t],i.putDataAll_andSet(o,!0),i.putData(e,"AFGHkeyIndexWJ",void 0),i.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{}),i.reload()}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.getDataFormComponentFormParentAndSet=(e,t)=>{if(e&&t){var i=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);if(void 0!==i){let s=i.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{}),n=e.split(";"),r=t.split(";"),l={};for(let e=0;e<n.length;e++)l[r[e]]=s[n[e]];var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==o&&o.callDirFromSupport("setGetInfo",{list_component:t},l)}}return!1},this.clearOnly=(e,t)=>{if(e){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==i?(i.putData(e,"AFGHkeyIndexWJ",void 0),i.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{}),i.reload()):a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.clearParent=(e,t)=>{if(e){var i=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);if(void 0!==i){let o=i.getData("");if(t)for(const i in o[e])-1===t.indexOf(i)&&(o[e][i]=void 0);else o[e]={};i.putDataAll_andSet(o,!0),i.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{}),i.reload()}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.runTxFoComponentParent=(e,t)=>{a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);d.ZP.runFoWithContext(JSON.parse(t),{},this.context.infoA_parent,{},{})},this.select=e=>{if(e){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let i=t.getDataAll("");for(const t in i[e]){const o=i[e][t];Array.isArray(o)&&(i[t]=a.ZP.cloneJson(o))}i[e]=Object.values(this.context.data)[0],a.ZP.log(this.context.data,"this.context.data==> "),a.ZP.log(i,"data_form ==>"),t.putDataAll_andSet(i)}else a.ZP.AppException("#form.formChil.select","form is undefined","system")}else a.ZP.AppException("#form.formChil.select","parameter is undefined","system");return!1},this.selectAndScroll=(e,t)=>{if(e){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){let o=i.getDataAll("");for(const t in o[e]){const i=o[e][t];Array.isArray(i)&&(o[t]=a.ZP.cloneJson(i))}if(o[e]=Object.values(this.context.data)[0],t){let i=t.split(";");for(let t=0;t<i.length;t++){const a=i[t];o[e][a]=""}}a.ZP.log(this.context.data,"this.context.data==> "),a.ZP.log(o,"data_form ==>"),i.putDataAll_andSet(o),document.getElementById("content").scrollTo(0,0)}else a.ZP.AppException("#form.formChil.select","form is undefined","system")}else a.ZP.AppException("#form.formChil.select","parameter is undefined","system");return!1},this.scrollTop=()=>(document.getElementById("content").scrollTo(0,0),!0),this.delete=async e=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let i=t.getDataAll("");for(const e in i)if("object"===typeof i[e]&&!Array.isArray(!i[e]))for(const t in i[e])Array.isArray(i[e][t])&&(i[t]=i[e][t]);if(e.includes(".")){let t=e.split(".");i[t[0]][t[1]]=i[t[0]][t[1]].filter((e=>{let t=e;1===Object.keys(e).length&&"object"===typeof Object.values(e)[0]&&(t=Object.values(e)[0]);let i=Object.values(this.context.data)[0];return!this.compareJson(t,i)}))}else i[e]=i[e].filter((e=>{let t=Object.values(e)[0],i=Object.values(this.context.data)[0];return!this.compareJson(t,i)}));await t.putDataAll_andSet(i),t.reload(),t.hasOwnProperty("setStatusToForm_AndRunRule")&&t.setStatusToForm_AndRunRule(0)}},this.deleteNotAwait=e=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let i=t.getDataAll(!0,!0);for(const e in i)if("object"===typeof i[e]&&!Array.isArray(!i[e]))for(const t in i[e])Array.isArray(i[e][t])&&(i[t]=i[e][t]);if(e.includes(".")){let t=e.split(".");i[t[0]][t[1]]=i[t[0]][t[1]].filter((e=>{let t=e;1===Object.keys(e).length&&"object"===typeof Object.values(e)[0]&&(t=Object.values(e)[0]);let i=Object.values(this.context.data)[0];return!this.compareJson(t,i)}))}else i[e]=i[e].filter((e=>{let t=Object.values(e)[0],i=Object.values(this.context.data)[0];return!this.compareJson(t,i)}));t.putDataAll_andSet(i),t.reload(),t.hasOwnProperty("setStatusToForm_AndRunRule")&&t.setStatusToForm_AndRunRule(0)}},this.moveDataArray=(e,t,i,o)=>{var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){let n=s.getDataAll(""),r=n[e]||[],l=n[t]||[];if(Array.isArray(r)&&Array.isArray(l)){if(r=r.filter((e=>!this.compareJson(Object.values(e)[0],Object.values(this.context.data)[0]))),0===l.length)l.push({[t]:Object.values(this.context.data)[0]});else{let e=Object.values(this.context.data)[0];const i=Object.values(l[0])[0];for(const t in e)void 0===(null===i||void 0===i?void 0:i[t])&&delete e[t];l.push({[t]:e})}if(n[e]=r,i){let e=[],s={};for(const n of l){const r=a.ZP.getOOP(n,t+"."+i);s[r]||(s[r]=!0,o&&delete n[t][o],e.push(n))}l=e}n[t]=l,s.putDataAll_andSet(n)}}},this.moveAllDataArray=(e,t,i,o)=>{var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){let n=s.getData(""),r=n[e]||[],l=n[t]||[];if(Array.isArray(r)&&Array.isArray(l)){for(const e of r)if(0===l.length)l.push({[t]:Object.values(e)[0]});else{let i=Object.values(e)[0];const o=Object.values(l[0])[0];for(const e in i)void 0===(null===o||void 0===o?void 0:o[e])&&delete i[e];l.push({[t]:i})}if(i){let e=[],s={};for(const n of l){const r=a.ZP.getOOP(n,t+"."+i);s[r]||(s[r]=!0,o&&delete n[t][o],e.push(n))}l=e}n[t]=l,n[e].length=0,s.putDataAll_andSet(n)}}},this.onClickButtonAdd=e=>{if(e){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let i=t.getDataAll("");i[e]={},t.putDataAll_andSet(i,!0),t.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{})}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.onClickButtonApplyValidate=async(e,t,i,o)=>{let s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(!s)return!1;if(s.hasOwnProperty("callDirFromSupport")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&s.getFormValidate()))return!1;let n=s.getDataAll(!0,!0);for(const a in n)if("object"===typeof n[a]&&!Array.isArray(!n[a]))for(const e in n[a])Array.isArray(n[a][e])&&(n[e]=n[a][e]);let r=n[e]||{};delete r[t];let l=n[t]||[];if(i)for(const a of l)if(a[t][i]===r[i]){r.AFGHkeyIndexWJ=a[t].AFGHkeyIndexWJ;break}if(void 0===r.AFGHkeyIndexWJ)r.AFGHkeyIndexWJ=a.ZP.autoID(),l.push({[t]:a.ZP.cloneJson(r)}),n[t]=a.ZP.cloneJson(l);else{for(let e=0;e<l.length;e++){const i=l[e];if(Object.values(i)[0].AFGHkeyIndexWJ===r.AFGHkeyIndexWJ){l[e][t]=a.ZP.cloneJson(r);break}}n[t]=l}await s.putDataAll_andSet(n),void 0!==o&&s.hasOwnProperty("setStatusToForm_AndRunRule")&&s.setStatusToForm_AndRunRule(Number(o))},this.onClickButtonApply=async(e,t,i,o)=>{let s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(!s)return!1;let n=s.getDataAll(!0,!0);for(const a in n)if("object"===typeof n[a]&&!Array.isArray(!n[a]))for(const e in n[a])Array.isArray(n[a][e])&&(n[e]=n[a][e]);let r=n[e]||{};delete r[t];let l=n[t]||[];if(i)for(const a of l)if(a[t][i]===r[i]){r.AFGHkeyIndexWJ=a[t].AFGHkeyIndexWJ;break}if(void 0===r.AFGHkeyIndexWJ)r.AFGHkeyIndexWJ=a.ZP.autoID(),l.push({[t]:a.ZP.cloneJson(r)}),n[t]=a.ZP.cloneJson(l);else{for(let e=0;e<l.length;e++){const i=l[e];if(Object.values(i)[0].AFGHkeyIndexWJ===r.AFGHkeyIndexWJ){l[e][t]=a.ZP.cloneJson(r);break}}n[t]=l}await s.putDataAll_andSet(n),void 0!==o&&s.hasOwnProperty("setStatusToForm_AndRunRule")&&s.setStatusToForm_AndRunRule(Number(o))},this.onClickButtonApplyNotUpdateItem=async(e,t,i,o)=>{let s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(!s)return!1;let n=s.getDataAll(!0,!0);for(const a in n)if("object"===typeof n[a]&&!Array.isArray(!n[a]))for(const e in n[a])Array.isArray(n[a][e])&&(n[e]=n[a][e]);let r=n[e]||{};delete r[t];let l=n[t]||[],c=!1;if(i&&(void 0===r.AFGHkeyIndexWJ||""===r.AFGHkeyIndexWJ||null===r.AFGHkeyIndexWJ))for(const a of l)if(a[t][i]===r[i]){r.AFGHkeyIndexWJ=a[t].AFGHkeyIndexWJ,c=!0;break}if(void 0===r.AFGHkeyIndexWJ)r.AFGHkeyIndexWJ=a.ZP.autoID(),l.push({[t]:a.ZP.cloneJson(r)}),n[t]=a.ZP.cloneJson(l);else{if(!c)for(let e=0;e<l.length;e++){const i=l[e];if(Object.values(i)[0].AFGHkeyIndexWJ===r.AFGHkeyIndexWJ){l[e][t]=a.ZP.cloneJson(r);break}}n[t]=l,n[e].AFGHkeyIndexWJ=void 0}await s.putDataAll_andSet(n),void 0!==o&&s.hasOwnProperty("setStatusToForm_AndRunRule")&&s.setStatusToForm_AndRunRule(Number(o))},this.callRuleInOtherFormChild=function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on_change";if(e.context.infoA_parent){let s=a.ZP.getFormAppAuto(e.context.infoA_parent.key_form);if(s){let n=s.callDirFromSupport("getKeyForm",{list_component:t,list_view:"",inform:"true",checkError:"false"},{}),r=a.ZP.getFormAppAuto(n[t]);if(!r)return!1;r.runRuleFunction({code:i},{},e.context.infoA_parent,o)}}},this.onClickButtonRemove=e=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let i=t.getDataAll("");for(const e in i)if("object"===typeof i[e]&&!Array.isArray(!i[e]))for(const t in i[e])Array.isArray(i[e][t])&&(i[t]=i[e][t]);i[e]=i[e].filter((e=>Object.values(e)[0].AFGHkeyIndexWJ!==Object.values(this.context.data)[0].AFGHkeyIndexWJ)),t.putDataAll_andSet(i)}},this.onClickButtonModify=e=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let i=t.getDataAll("");for(const e in i)if("object"===typeof i[e]&&!Array.isArray(!i[e]))for(const t in i[e])Array.isArray(i[e][t])&&(i[t]=i[e][t]);let o=Object.values(this.context.data)[0];i[e]=o,t.putDataAll_andSet(i)}}}compareJson(e,t){for(const i in e)if(void 0!==e[i]&&String(e[i])!==String(t[i]))return!1;return!0}}const me=ge;class ve extends r.Z{constructor(){super(...arguments),this.call=()=>{}}}const be=ve;class ye extends r.Z{constructor(){super(...arguments),this.addMsgSystem=()=>{void 0!==this.input.listMsgSystem&&this.input.listMsgSystem.length>0&&void 0!==this.input.listMsgSystem[0].MsgSystem&&(0,a.zF)(!0,this.input.listMsgSystem[0].MsgSystem)}}}const Ae=ye;var De=i(7210),ke=i(1203);class Oe extends r.Z{constructor(){super(...arguments),this.windowPrint=(e,t)=>{var i=window.open("",a.ZP.autoID(),"height=650,width=1000");let o='\x3c!-- Button Event --\x3e<div class="event-button div-no-print"><div class="malibu-list-button-div"><div class="malibu-list-button">\n        <div style="display:none" class="voucher-button" id="print_mode" onclick="getColor(\'print_mode\');hiddenText()">Print mode</div>\n        <div style="display:none" class="voucher-button" id="view_mode" onclick="getColor(\'view_mode\');viewText()">View mode</div>\n        <div style="display:none" class="voucher-button" id="print" onclick="getColor(\'print\');print()">Print</div></div>\n       </div> <div class="voucher-guide-div"><div class="voucher-guide"><div style="padding-right:5px">Use</div> <span class="voucher-guide-button">Ctrl</span> <span class="voucher-guide-button">P</span> <div style="padding-left:5px;padding-right:5px">(or</div><span class="voucher-guide-button"><img src=\'@{iconCtrl_macOS}\' style="width:14px;height:14px"/></span> <span class="voucher-guide-button">P</span> <div style="padding-left:5px">for macOS)</div> <div style="padding-left:5px">to print voucher</div></div></div></div>';o=o.replace("@{iconCtrl_macOS}","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADrSURBVHgBnVKLDYJADD2MA7ABbAAj3Ca6gW4CbsAmsAE4ATgBblBf4ZU0GBNik5e7/l+bBhHJgVZWGYEy7ERtQM8Yjc2DSzLHDKQuKWVBcbFt2D5rUE09usRIW019aXDGfwAiHQXjLy4541vAVuHVUSbjb1SOyLztgXNo14bOO/XIv9AXbX6lGpIkeePpHL0Bto5FbdzJbCqn8KecjSqHtkWUrpMtLCOjYWHI5cxyXEbNSfSDKjnwYHWt2gAv6wRcdQfAE7hpVzuAnpQr6tF4yvcBtKr4k2sdlf3J2SjbvarDH3kvv498dA3yDwrUrlg4T/oiAAAAAElFTkSuQmCC");return i&&i.document&&(i.document.write("<html><head><style>"),i.document.write(e+"body{margin:unset !important}.voucher-button:hover{background:#F0F0F0;border:1.5px solid#E3E4E5;}.voucher-button.button-active:hover{background:#06429B;border:1px solid transparent;}.voucher-button.button-active{background:#0052CC;color:#FFFFFF;border:1px solid transparent;}.voucher-button{padding:10px;background:#FFFFFF;margin-left:8px;color:#0052CC;border:1.5px solid#E3E4E5;border-radius:3px;width:fit-content;cursor:pointer;opacity:0.96;font-family:Arial,Helvetica,sans-serif;}.malibu-list-button{display:flex;margin-left:auto;margin-right:0px;width:fit-content;}.voucher-guide-div{width:21cm;margin:5px auto;background:#F3F9FF;border-radius:3px;display:flex;align-items:center;height:42px;}.voucher-guide{padding:0px 16px;font-weight:500;font-size:14px;line-height:16px;color:#494F59;display:flex;align-items:center;}.voucher-guide{padding:0px 16px;font-weight:500;font-size:14px;line-height:16px;color:#494F59;display:flex;align-items:center;}.voucher-guide-button{height:26px;left:0px;top:0px;background:#1283DA;border-radius:3px;font-weight:500;font-size:14px;line-height:16px;color:#FFFFFF;display:flex;align-items:center;padding:0px 8px;margin:0px 2px;}.malibu-list-button-div{width:21cm;margin:0px auto;}.event-button{width:calc(100%);background:unset!important;z-index:100}.voucher{padding-top:50px!important}.page-A1,.page-A11,.page-A15,.page-A2,.page-A201,.page-A202,.page-A203,.page-A203,.page-A204,.page-A205,.page-A3,.page-A7,.page-A8{border-radius:3px;box-shadow:0px 0px 10px rgba(0,0,0,0.25);}@media print{.event-button{display:none}.div-no-print{display:none}.voucher{padding-top:unset!important}}"),i.document.write("</style></head><body>"),i.document.write(o),i.document.write('<div id="voucher" class="voucher">'),i.document.write(t),i.document.write("</div>"),i.document.write("<script>"),i.document.write('getColor(\'print_mode\');function getColor(id){var x=document.getElementsByClassName("voucher-button");for(i=0;i<x.length;i++){x[i].classList.remove("button-active")};document.getElementById(id).classList.add("button-active")};function print(){var style_=document.styleSheets[0].cssRules;var str="";for(var i=0;i<style_.length;i++){if(str.indexOf(style_[i].cssText)==-1){str+=style_[i].cssText;}};str=str.replace("body { width: 600px; }","");str=str.replace(".embrace { margin-bottom: 15px; float: left; font-size: 13px; box-shadow: grey 3px 3px 5px; max-height: 842px; max-width: 595px; }","");var contents=document.getElementById("voucher").innerHTML;var frame1=document.createElement(\'iframe\');frame1.name="frame1";frame1.style.position="absolute";frame1.style.top="-1000000px";document.body.appendChild(frame1);var frameDoc=frame1.contentWindow?frame1.contentWindow:frame1.contentDocument.document?frame1.contentDocument.document:frame1.contentDocument;frameDoc.document.open();frameDoc.document.write(\'<html><head><style type="text/css">\');frameDoc.document.write(str);frameDoc.document.write(".div-no-print{opacity: 0}");frameDoc.document.write(\'</style></head><body>\');frameDoc.document.write(contents);frameDoc.document.write(\'</body></html>\');frameDoc.document.close();setTimeout(function(){window.frames["frame1"].focus();window.frames["frame1"].print();document.body.removeChild(frame1);},200);return false;};function viewText(){var height=document.getElementsByClassName("div-no-print");for(var i=0;i<height.length;i++){height[i].style.opacity=null;}};function hiddenText(){var height=document.getElementsByClassName("div-no-print");for(var i=0;i<height.length;i++){height[i].style.opacity=0;}};var beforePrint=function(){console.log(\'Functionality to run before printing.\');};var afterPrint=function(){console.log(\'Functionality to run after printing\');};window.onload=function(){if(window.matchMedia){var mediaQueryList=window.matchMedia(\'print\');mediaQueryList.addListener(function(mql){if(mql.matches){beforePrint();}else{afterPrint();}});};};window.onbeforeprint=beforePrint;window.onafterprint=afterPrint;'),i.document.write("<\/script>"),i.document.write("</body></html>"),i.document.close(),i.focus()),!0},this.printTemplate=()=>{let e=this.context.ob_data||{},t=a.ZP.getFormAppAuto(this.context.infoA.key_form),{template_code:i,template_condition:o}=this.input,s={};if(!0===this.input.is_get_new&&t.hasOwnProperty("getDataAll")&&(s=t.getDataAll(),e=Object.assign(e,s)),!1!==this.input.is_get&&(s=t.getData(),e=Object.assign(e,s)),!0===this.input.is_get_table&&t.hasOwnProperty("getDataAll"))for(const n in s)if("object"===typeof s[n]&&!Array.isArray(!s[n]))for(const t in s[n]){const i=s[n][t];Array.isArray(i)&&(e[t]=a.ZP.cloneJson(i),s[t]=a.ZP.cloneJson(i))}if(this.input.queries&&this.input.queries.split(";").forEach((t=>{if(t){var i;let o=(null===(i=a.ZP.getDataLimited(t,0,9999999))||void 0===i?void 0:i.data)||[];if(o.length>0){let t=Object.keys(o[0])[0];e[t]=o}}})),i=a.ZP.convertCondition(i,e),o=a.ZP.convertCondition(o,e),"A5"===i||"A5F"===i){let t=e[this.context.infoA.form_code].frline,i=e.dataset;if(t&&parseInt(t)>0){t=parseInt(t);for(let e=1;e<t;e++)i.unshift({dataset:{balance:" ",credit:" ",debit:" "}})}let o=e[this.context.infoA.form_code].pbline;o=!o||parseInt(o)<=0?22:parseInt(o);let a=e[this.context.infoA.form_code].pgprint;a=!a||parseInt(a)<=0?1:parseInt(a),e.dataset=i.slice(o*(a-1),o*a);let s=e[this.context.infoA.form_code].pgbtfrom;if(s&&parseInt(s)>0){s=parseInt(s);let t=[],i=[];e.dataset_top=[],e.dataset_bottom=[],t=e.dataset.slice(0,s-1),i=e.dataset.slice(s-1,e.dataset.length);for(const o of t)e.dataset_top.push({dataset_top:o.dataset});for(const o of i)e.dataset_bottom.push({dataset_bottom:o.dataset})}}this.context.ob_data=e,a.ZP.isDebug()&&(console.log("===================DEBUG TEMPLATE====================="),console.log("data template: ",a.ZP.cloneJson(e)),console.log("template_code: ",i),console.log("condition: ",o),console.log("-------------------DEBUG TEMPLATE--------------------"));return ke.Qf(i,(e=>{this.context.ob_data=Object.assign(this.context.ob_data,e);let t=[],o="",s="",n="",r=i.split(";");for(let i of r){let e=a.ZP.template_getFromStore(i);void 0!==e&&t.push(e)}for(let i of t)void 0!==i.code&&(n=this.getTemplate(i),o+=n.voucher,s+=n.style);return this.windowPrint(s,o)}),this.input,s),!0},this.printTemplateNCBS=()=>{let e=this.context.ob_data||{},t=a.ZP.getFormAppAuto(this.context.infoA.key_form),{template_code:i,template_condition:o}=this.input,s={};if(!0===this.input.is_get_new&&t.hasOwnProperty("getDataAll")&&(s=t.getDataAll(),e=Object.assign(e,s)),!1!==this.input.is_get&&(s=t.getData(),e=Object.assign(e,s)),!0===this.input.is_get_table&&t.hasOwnProperty("getDataAll"))for(const r in s)if("object"===typeof s[r]&&!Array.isArray(!s[r]))for(const t in s[r]){const i=s[r][t];Array.isArray(i)&&(e[t]=a.ZP.cloneJson(i),s[t]=a.ZP.cloneJson(i))}this.input.queries&&this.input.queries.split(";").forEach((t=>{if(t){var i;let o=(null===(i=a.ZP.getDataLimited(t,0,9999999))||void 0===i?void 0:i.data)||[];if(o.length>0){let t=Object.keys(o[0])[0];e[t]=o}}})),i=a.ZP.convertCondition(i,e),o=a.ZP.convertCondition(o,e);let n=e[this.context.infoA.form_code].deposit_sub_type;if("A4"===i)switch(n){case"S1":case"S4":case"S5":case"S6":i="A4SA";break;case"S3":i="A4SB";break;case"S2":i="A4SC";break;case"T1":case"T2":case"T3":case"T4":case"T5":case"T6":i="A4T"}else if("A5"===i)switch(n){case"S3":case"S4":case"S5":case"S6":i="A5SA";break;case"S2":i="A5SB";break;case"S1":i="A5SC";break;case"T1":case"T2":case"T3":case"T4":case"T5":case"T6":i="A5T"}this.context.ob_data=e,a.ZP.isDebug()&&(console.log("===================DEBUG TEMPLATE====================="),console.log("data template: ",a.ZP.cloneJson(e)),console.log("template_code: ",i),console.log("condition: ",o),console.log("-------------------DEBUG TEMPLATE--------------------"));return ke.MK(i,(e=>{ke.xd((i+"&999").split(","),e)}),this.input,s),!0},this.printMultiTemplate=()=>{let e=this.context.ob_data||{},t=a.ZP.getFormAppAuto(this.context.infoA.key_form),{template_code:i,template_condition:o}=this.input,s={};if(!0===this.input.is_get_new&&t.hasOwnProperty("getDataAll")&&(s=t.getDataAll(),e=Object.assign(e,s)),!1!==this.input.is_get&&(s=t.getData(),e=Object.assign(e,s)),!0===this.input.is_get_table&&t.hasOwnProperty("getDataAll"))for(const r in s)if("object"===typeof s[r]&&!Array.isArray(!s[r]))for(const t in s[r]){const i=s[r][t];Array.isArray(i)&&(e[t]=a.ZP.cloneJson(i),s[t]=a.ZP.cloneJson(i))}if(this.input.queries&&this.input.queries.split(";").forEach((t=>{if(t){var i;let o=(null===(i=a.ZP.getDataLimited(t,0,9999999))||void 0===i?void 0:i.data)||[];if(o.length>0){let t=Object.keys(o[0])[0];e[t]=o}}})),i=a.ZP.convertCondition(i,e),o=a.ZP.convertCondition(o,e),"A5"===i||"A5F"===i){let t=e[this.context.infoA.form_code].frline,i=e.dataset;if(t&&parseInt(t)>0){t=parseInt(t);for(let e=1;e<t;e++)i.unshift({dataset:{balance:" ",credit:" ",debit:" "}})}let o=e[this.context.infoA.form_code].pbline;o=!o||parseInt(o)<=0?22:parseInt(o);let a=e[this.context.infoA.form_code].pgprint;a=!a||parseInt(a)<=0?1:parseInt(a),e.dataset=i.slice(o*(a-1),o*a);let s=e[this.context.infoA.form_code].pgbtfrom;if(s&&parseInt(s)>0){s=parseInt(s);let t=[],i=[];e.dataset_top=[],e.dataset_bottom=[],t=e.dataset.slice(0,s-1),i=e.dataset.slice(s-1,e.dataset.length);for(const o of t)e.dataset_top.push({dataset_top:o.dataset});for(const o of i)e.dataset_bottom.push({dataset_bottom:o.dataset})}}this.context.ob_data=e,a.ZP.isDebug()&&(console.log("===================DEBUG TEMPLATE====================="),console.log("data template: ",a.ZP.cloneJson(e)),console.log("template_code: ",i),console.log("condition: ",o),console.log("-------------------DEBUG TEMPLATE--------------------"));let n=i.split(";");for(let r of n){const e=e=>{this.context.ob_data=Object.assign(this.context.ob_data,e);let t=[],i="",o="",s="",n=a.ZP.template_getFromStore(r);void 0!==n&&t.push(n);for(let a of t)void 0!==a.code&&(s=this.getTemplate(a),i+=s.voucher,o+=s.style);return this.windowPrint(o,i)};ke.Qf(r,e,this.input,s)}return!0},this.printVoucher=()=>{let e="",t="",i="",o=this.context,a=o.node_print.split(",").filter((e=>-1!==e.indexOf("A7"))),s=!1;for(let n=0;n<o.templates.length;n++){const r=o.templates[n];if(s=!0,void 0!==r.code)if(0!==a.length)for(let s of a)if(-1!==s.indexOf(r.code)){let a=o.ob_data.vouchers[n].tags.transaction_body.from_serial,s=o.ob_data.vouchers[n].tags.transaction_body.to_serial,l=1,c=0,d=0;void 0!==a&&void 0!==s&&(c=parseInt(a.replace(/[^0-9]+/,"")),d=parseInt(s.replace(/[^0-9]+/,"")),l=d-c+1);let h=c,u=a.replace(/[^0-9]+/,""),p="";for(let _=0;_<l;_++)p=u.substring(0,u.length-h.toString().length)+h,i=this.getTemplate(r,p,o.ob_data.vouchers[n].tags),e+=i.voucher,t+=i.style,h++;this.windowPrint(t,e)}else i=this.getTemplate(r,o.ob_data.vouchers[n].tags.transaction_body.to_serial,o.ob_data.vouchers[n].tags),this.windowPrint(i.style,i.voucher);else{o.ob_data.vouchers[n].code===r.code&&(i=this.getTemplate(r,void 0,o.ob_data.vouchers[n].tags),this.windowPrint(i.style,i.voucher))}}return s||this.windowPrint(t,e),!0},this.printReport=e=>{let t="",i="",o="",s=a.ZP.getFormAppAuto(this.context.infoA.key_form),n=[];this.context.data.list_template_code.forEach((e=>{let t=a.ZP.template_getFromStore(e);void 0!==t&&n.push(t)})),void 0!==s&&s.hasOwnProperty("getDataAll")&&(this.context.ob_data=s.getDataAll(),this.context.templates=n),e.split(";").forEach((e=>{var t;let i=(null===(t=a.ZP.getDataLimited(e,0,9999999))||void 0===t?void 0:t.data)||[];if(i.length>0){let e=Object.keys(i[0])[0];this.context.ob_data[e]=i}}));let r=this.context;for(let a of r.templates)void 0!==a.code&&(o=this.getTemplate(a),t+=o.voucher,i+=o.style);return this.windowPrint(i,t),!0},this.getTemplate=(e,t,i)=>{a.ZP.isDebug()&&console.log("Data voucher",i);let o="",s="",n=void 0!==t?e.html_code.replace(/sys-auto-sernum/g,t):e.html_code,r=e.status;if(void 0!==r&&("A"===r||""===r||null===r)&&void 0!==n){let t=(new DOMParser).parseFromString(n,"text/html");for(let e of t.all[2].sheet.cssRules)-1===s.indexOf(e.cssText)&&(s+=e.cssText);if(-1===n.indexOf("jwebui_list_data")){o=this.setDataByParam(t.body.innerHTML,i,e.code)}else{let a=t.body.getElementsByClassName("jwebui_list_data"),s=t.body.innerHTML,n=[];for(let e=0;e<a.length;e++){let t=a[e].getAttribute("jwebui-list-data"),i=a[e].getAttribute("jwebui-data");n.push({param:"jwebui_list_data_"+e,template:a[e].outerHTML,list_data:t,data:i})}for(let e=0;e<a.length;e++)s=s.replace(a[e].outerHTML,"jwebui_list_data_"+e);if(n.length>0)for(let t=0;t<n.length;t++)if("true"===n[t].list_data){let o=this.renderDataList(n[t].template,n[t].data,i,e.code);s=s.replace(n[t].param,o)}else s=s.replace(n[t].param,"");s=this.setDataByParam(s,i,e.code),o=s}}return{voucher:o,style:s}},this.setDataByParam=(e,t,i)=>{var o=new De.Z;let s=e,n=a.ZP.component_getListCode(e);o.environmentVariables(this.context.ob_data),o.environmentVariableVoucher(t,i);for(let a of n){let e=this.getValueByParam(a.code,t);if(void 0!==e&&null!==e&&"null"!==e&&"undefined"!==e||(e=""),void 0!==e)if("string"===typeof e)s=s.replace(a.key,e.replace(/[\u00A0-\u9999<>\\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"})));else{let e="<div></div>";s=s.replace(a.key,e)}}let r=(new DOMParser).parseFromString(s,"text/html"),l=r.body.getElementsByClassName("jwebui-data-format");for(let c of l)if(c.hasAttribute("jwebui-function")&&o.hasOwnProperty(c.getAttribute("jwebui-function"))){let e=c.attributes,t={};for(let i=0;i<e.length;){let o=e[i];-1!==o.name.indexOf("jwebui")&&"jwebui-function"!==o.name?(t=a.ZP.copyJsonObject(t,JSON.parse(JSON.stringify({[o.name.substr(7)]:o.value}))),c.removeAttribute(o.name)):i++}c.innerHTML=o[c.getAttribute("jwebui-function")](t,c.innerText.trim()),"checkRender"===c.getAttribute("jwebui-function")&&""!==c.innerHTML&&c.classList.add(t.class),c.removeAttribute("jwebui-function")}return r.body.outerHTML},this.getValueByParam=(e,t)=>{if("sys-branch"===e)return a.ZP.context_get("user_acc.branch_name");if(void 0!==t&&0!==t.length){if(-1===e.indexOf("."))return void 0!==t[e]?0!==t[e].length?t[e]:"":{code:e};{let i=e.split(".");if(void 0!==t[i[0]]&&void 0!==t[i[0]][i[1]]){let e=""+t[i[0]][i[1]];return 0!==e.length?e:""}return{code:e}}}},this.renderDataList=(e,t,i,o)=>{var s=new De.Z;s.environmentVariables(this.context.ob_data),s.environmentDataList(i),s.environmentVariableVoucher(i,o);let n=a.ZP.getNodeJson(i,t);if(0===t.length||void 0===n){return"<div></div>"}let r=n,l=e,c=(new DOMParser).parseFromString(l,"text/html").body.getElementsByClassName("jwebui_list_data");for(let b of c)if(b.hasAttribute("jwebui-function")&&s.hasOwnProperty(b.getAttribute("jwebui-function"))){let e=b.attributes,t={};for(let o=0;o<e.length;){let i=e[o];-1!==i.name.indexOf("jwebui")&&"jwebui-function"!==i.name?(t=a.ZP.copyJsonObject(t,JSON.parse(JSON.stringify({[i.name.substr(7)]:i.value}))),b.removeAttribute(i.name)):o++}let i=b.innerText.trim();r=s[b.getAttribute("jwebui-function")](t,i)}let d="",h=t.split("."),u=h[h.length-1],p=a.ZP.component_getListCode(e);for(let b=0;b<r.length;b++){let t=e;for(let e of p){var _,f,g;let i=null===(_=r)||void 0===_||null===(f=_[b])||void 0===f||null===(g=f[u])||void 0===g?void 0:g[e.code];var m,v;if(void 0===i||null===i)i=null===(m=r)||void 0===m||null===(v=m[b])||void 0===v?void 0:v[e.code];if(void 0!==i&&null!==i||(i=""),void 0===i){let i="<div></div>";t=t.replace(e.key,i)}else t=t.replace(e.key,""!==i&&null!==i&&void 0!==i?i.toString().replace(/[\u00A0-\u9999<>\\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"})):"")}let i=(new DOMParser).parseFromString(t,"text/html"),o=i.body.getElementsByClassName("jwebui_list_data");for(let e of o)if(e.hasAttribute("jwebui-function")&&s.hasOwnProperty(e.getAttribute("jwebui-function"))){let t=e.attributes,i={};for(let s=0;s<t.length;){let o=t[s];-1!==o.name.indexOf("jwebui")&&"jwebui-function"!==o.name?(i=a.ZP.copyJsonObject(i,JSON.parse(JSON.stringify({[o.name.substr(7)]:o.value}))),e.removeAttribute(o.name)):s++}let o=e.innerText.trim();s[e.getAttribute("jwebui-function")](i,o),e.removeAttribute("jwebui-function")}d+=i.body.getElementsByClassName("jwebui_list_data")[0].outerHTML}return d}}}const we=Oe;class Ce extends r.Z{constructor(){super(...arguments),this.gotoSearch=()=>{a.ZP.callDirFromSupport("globalSearch","openSearch");const e=new Date;var t={class_:"success",icon:"fa fa-search",title:a.ZP.getLang("systemTitle"),time:e.getTime()+"",description:a.ZP.getLang("systemStartSearch"),data:{},action:{}};a.ZP.pushNotify("notifyToast",t,{}),a.ZP.callAllScreenListen()},this.gotoOpenForm=e=>{let t=new Date,i={class_:"error",icon:"fa fa-check",title:a.ZP.getLang("systemNotHaveRole"),time:t.getTime()+"",description:a.ZP.getLang("systemNotHaveRole"),data:{},action:{}};a.ZP.checkHasRoleForm(e)&&(d.ZP.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:e}}],this.input),i={class_:"warning",icon:"fa fa-folder-open",title:a.ZP.getLang("systemTitle"),time:t.getTime()+"",description:a.ZP.getLang("systemStartOpenForm"),data:{},action:{}}),a.ZP.pushNotify("notifyToast",i,{}),a.ZP.callAllScreenListen()},this.gotoDebug=()=>{let e=!a.ZP.isDebug(),t="",i="";e?(t="langKeyboardDebugOpen",i="success",(0,a.bp)({open_chat:!0,mode_chat:"debug"})):(t="langKeyboardDebugClose",i="warning",(0,a.bp)({open_chat:!1,mode_chat:"debug"}));const o=new Date;var s={class_:i,icon:"fa fa-check",title:a.ZP.getLang("systemTitle"),time:o.getTime()+"",description:a.ZP.getLang(t),data:{},action:{}};a.ZP.pushNotify("notifyToast",s,{}),a.ZP.callAllScreenListen(),a.ZP.setDebug(e),a.ZP.changeForDebug(e)},this.gotoAssistantCMD=()=>{console.log("=========gotoAssistant============")},this.gotoAssistantVoice=()=>{console.log("=========gotoAssistant============")},this.openFormKeyboardConfig=()=>(a.ZP.setModalOpenKeyboardConfig(),!0),this.openFormKeyboard=()=>(a.ZP.setModalOpenKeyboard(),!0)}}const xe=Ce;class Se extends r.Z{constructor(){var e;super(...arguments),e=this,this.openLatestTransaction=()=>{let e,t="fof_transaction_journal";if(void 0!==this.input[t]){let i=a.ZP.cloneJson(this.input[t][t]),o=void 0!==i.transaction_code?i.transaction_code:i.workflowid,s="FO_"+o;";CSH_CSH;DPT_CSH;ACT_CSH;CSH_ACT;DPT_ACT;ACT_ACT;CSH_DPT;ACT_DPT;DPT_DPT;".includes(";"+o+";")?(s="BO_013003",e="BO_013003"):";ACT_MAN;".includes(";"+o+";")?(s="act_internal_transaction",e="BO_012003"):";CSH_CFX;".includes(";"+o+";")&&(s="BO_013004",e="BO_013004");let n=i;if(void 0!==n.transaction_body){for(const e in n.transaction_body)void 0===n[e]&&(n[e]=n.transaction_body[e]);delete n.transaction_body}let r={[s]:n};if(Array.isArray(r[s].fee_data)){let e=[];for(const t in r[s].fee_data){const i=r[s].fee_data[t];i.ifc_base_amount=i.ifc_amount+i.round_amount,i.currency_code=i.currency_fee_code,e.push({fee_data:i})}r.fee_data=e}if(Array.isArray(r[s].list_account_linkage)){let e=[];for(const t in r[s].list_account_linkage){const i=r[s].list_account_linkage[t];e.push({list_account_linkage:i})}r.list_account_linkage=e}if(Array.isArray(r[s].gl_info)){let e=[];for(const t in r[s].gl_info){const i=r[s].gl_info[t];e.push({gl_info:i})}r.gl_info=e}if(Array.isArray(r[s].posting_data)&&"act_internal_transaction"===s){let e=[];for(const t in r[s].posting_data){const i=r[s].posting_data[t];e.push({table_child:i})}r.form={},r.form.table_child=e}if(Array.isArray(r[s].items)&&"BO_013004"===s){let e=[];for(const t in r[s].items){const i=r[s].items[t];e.push({items:i})}r.items=e}if(Array.isArray(r[s].cash_denom_list)){let e=[];for(const t in r[s].cash_denom_list){const i=r[s].cash_denom_list[t];e.push({cash_denom_list:i})}r.cash_denom_list=e}return e&&"BO_013003"===e&&(r.O9_F2_ACT_ACT=r[s]),(0,l.QS)({form_code:e||s},{},{},{},r),!0}},this.calculatorTableExchangeList=(e,t,i,o)=>{if(void 0!==e&&void 0!==i){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);let n;if(void 0!==s&&s.hasOwnProperty("callDirFromSupport")){if(s.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true",checkError:"true"},{}),3===i.split(";").length){n=s.getDataAdvanced("");let i=0,a=0;for(let o=0;o<n[e].length;o++){let s=n[e][o][t];s.sheet?(s.amount=s.face_value*s.sheet,i+=s.amount,a+=s.exchange_amount):(s.sheet=0,s.amount=0,s.exchange_amount=0)}return s.putDataAll_andSetComponent(n,e),s.callDirFromSupport("setAdvanced",{list_component:o},i),!0}return!1}}},this.viewFormF8=e=>{let t;if(void 0!==this.input[e]){let i=a.ZP.cloneJson(this.input[e][e]),o=void 0!==i.transaction_code?i.transaction_code:i.workflowid,s="FO_"+o;";CSH_CSH;DPT_CSH;ACT_CSH;CSH_ACT;DPT_ACT;ACT_ACT;CSH_DPT;ACT_DPT;DPT_DPT;".includes(";"+o+";")?(s="BO_013003",t="BO_013003"):";ACT_MAN;".includes(";"+o+";")?(s="act_internal_transaction",t="BO_012003"):";CSH_CFX;".includes(";"+o+";")&&(s="BO_013004",t="BO_013004");let n=i;if(void 0!==n.transaction_body){for(const e in n.transaction_body)void 0===n[e]&&(n[e]=n.transaction_body[e]);delete n.transaction_body}let r={[s]:n};if(Array.isArray(r[s].fee_data)){let e=[];for(const t in r[s].fee_data){const i=r[s].fee_data[t];i.ifc_base_amount=i.ifc_amount+i.round_amount,i.currency_code=i.currency_fee_code,e.push({fee_data:i})}r.fee_data=e}if(Array.isArray(r[s].list_account_linkage)){let e=[];for(const t in r[s].list_account_linkage){const i=r[s].list_account_linkage[t];i.ifc_base_amount=i.ifc_amount+i.round_amount,i.value_typect="Percentage",e.push({list_account_linkage:i})}r.list_account_linkage=e}if(Array.isArray(r[s].gl_info)){let e=[];for(const t in r[s].gl_info){const i=r[s].gl_info[t];e.push({gl_info:i})}r.gl_info=e}if(Array.isArray(r[s].items)&&"BO_013004"===s){let e=[];for(const t in r[s].items){const i=r[s].items[t];e.push({items:i})}r.items=e}if(Array.isArray(r[s].posting_data)&&"act_internal_transaction"===s){let e=[];for(const t in r[s].posting_data){const i=r[s].posting_data[t];e.push({table_child:i})}r.form={},r.form.table_child=e}if(Array.isArray(r[s].cash_denom_list)){let e=[];for(const t in r[s].cash_denom_list){const i=r[s].cash_denom_list[t];e.push({cash_denom_list:i})}r.cash_denom_list=e}return t&&"BO_013003"===t&&(r.O9_F2_ACT_ACT=r[s]),r.form_status="open_from_form_other",(0,l.QS)({form_code:t||s},{},{},{},r),!0}},this.setAmountCSH_CFX=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let t=e.getDataAll("").items||[],i=0,o=0;for(let e=0;e<t.length;e++){const a=t[e].items;i+=a.amount,o+=a.exchange_amount}a.ZP.getFormAppAuto(this.context.infoA_parent.key_form).callDirFromSupport("setGetInfo",{list_component:"total_amount;total_exchange_amount",list_view:"",inform:"true",checkError:!1},{total_amount:i,total_exchange_amount:o})}},this.reloadTableCSH_CFX=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){let t=e.getDataAll("");t.BO_013004&&(t.BO_013004.items=[],t.BO_013004.total_amount=0,t.BO_013004.total_exchange_amount=0);const i=e.callDirFromSupport("getKeyForm",{list_component:"items",list_view:"",inform:"true",checkError:"false"},{});let o=a.ZP.getFormAppAuto(i.items);if(!o)return;let s=o.getDataAll("");delete(s.form||{}).items,s.items=[],o.putDataAll_andSet(s),e.putDataAll_andSet(t)}},this.act_internal_transaction_add=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.reload()},this.act_internal_transaction_apply=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){e.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true"},{});let t=e.getData("");const i=t.form;if(i.amount&&""!==i.account_number&&i.account_name&&("ADD"===i.actiontype||"MODIFY"===i.actiontype)){let o=("D"===i.type?i.amount:0).toFixed(2),s=("C"===i.type?i.amount:0).toFixed(2),n={table_child:{posting_side:i.type,gl_account_number:i.account_number,currency:i.currency,debit_amount:o,credit_amount:s,account_name:i.account_name,cost_center:i.cost_center,product_code:i.product_code,inter_company:i.inter_company}};if(void 0===i.AFGHkeyIndexWJ)t.form.table_child.push(a.ZP.cloneJson(n)),t.form.AFGHkeyIndexWJ=void 0;else for(const e in t.form.table_child){if(t.form.table_child[e].table_child.AFGHkeyIndexWJ===i.AFGHkeyIndexWJ){t.form.table_child[e]=n,t.form.AFGHkeyIndexWJ=void 0;break}}e.putDataAll_andSet(t)}}},this.act_internal_transaction_modify=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){e.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true"},{});let t=e.getData(""),i=a.ZP.cloneJson(this.context.data.table_child);t.form.type=i.posting_side,t.form.account_number=i.gl_account_number,t.form.currency=i.currency,t.form.amount="D"===i.posting_side?i.debit_amount:i.credit_amount,t.form.account_name=i.account_name,t.form.AFGHkeyIndexWJ=i.AFGHkeyIndexWJ,t.form.actiontype="MODIFY",t.form.cost_center=i.cost_center,t.form.product_code=i.product_code,t.form.inter_company=i.inter_company,e.putDataAll_andSet(t),e.callDirFromSupport("setCMD",{list_component:"combobox;Account number;Amount;cost_center;product_code;inter_company;btn_apply",list_view:""},{disabled:"false"})}},this.printVoucher=()=>{let e="false",t=this.input.fof_transaction_journal.fof_transaction_journal;null!==this.input.is_reversed&&(e=this.input.is_reversed);let i=this.getValueByParam("vouchers.@index.code");0!==t.length&&void 0!==i&&""!==i&&(0,ke.xd)(i.split(","),t.ref_id,e)},this.getValueByParam=e=>{let t=this.input.fof_transaction_journal.fof_transaction_journal;if(void 0!==t&&0!==t.length){if(-1===e.indexOf("."))return void 0!==t[e]&&0!==t[e].length?t[e]:"";{let i=e.split("."),o="";if(void 0!==t[i[0]]){for(let e=0;e<t[i[0]].length;e++){const a=t[i[0]][e];if(a[i[2]]){let e=a[i[2]]+"&"+a.order;o+=""===o?e:","+e}}return 0!==o.length?o:""}return""}}},this.acceptF2O9=(e,t,i)=>{var o="true";if(void 0!==i&&(o=i),void 0!==e&&void 0!==t){var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&(s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!0),s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate"))){if(!s.getFormValidate()){s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:o},{}),s.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(s.getData(""))),a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),this.input.learn_api="";let i=this.input_action[this.context.infoA.form_code].debit_accounting_type,n=this.input_action[this.context.infoA.form_code].credit_accounting_type;return this.input.learn_api=`O9_F2_${i}_${n}`,setTimeout((()=>{if(void 0!==s&&null!==s&&s.hasOwnProperty("getLoadingAction")){let e=!1;e=s.getLoadingAction(),e&&setTimeout((()=>{s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1)}),500)}}),6e4),!0}s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1),s.hasOwnProperty("clearTimeOut")&&s.clearTimeOut()}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.clearCtrlF2=()=>{a.ZP.removeForm("BO_013003"),d.ZP.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:"BO_013003"}}],{})},this.resetPassUserProfile=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.callDirFromSupport("setAdvanced",{list_component:"isResetPassword"},!0)},this.uncheckLeaderCTM=()=>{var e,t,i,o;if(null!==(e=this.context.data)&&void 0!==e&&null!==(t=e.data_cpn)&&void 0!==t&&null!==(i=t.ctm_customer_group_account_of_group)&&void 0!==i&&i.isleader||"all_left"===(null===(o=this.context.componentConfigDefault)||void 0===o?void 0:o.code)){var s,n;const e=null===(s=this.context)||void 0===s||null===(n=s.infoA_parent)||void 0===n?void 0:n.key_form;var r=a.ZP.getFormAppAuto(e);if(!r)return;r.callDirFromSupport("setAdvanced",{list_component:"group_leader_1"},"")}},this.CTM_GRP_003002_rebuildTable=function(){var t,i;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"customer_group_member_infomation",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ctm_customer_group_account_of_group";const n=null===(t=e.context)||void 0===t||null===(i=t.infoA)||void 0===i?void 0:i.key_form;const r=a.ZP.getFormAppAuto(n).getDataAdvanced().group_leader_1;var l=a.ZP.getFormAppAuto(o);if(l){let e=l.getDataAll(),t=(null===e||void 0===e?void 0:e[s])||[];for(let i of t)i[s].isleader=i[s].customercd===r;l.putDataAll_andSet(e)}},this.checkLeaderCTM=function(){var t,i,o,s,n,r;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"group_leader_1",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ctm_customer_group_account_of_group",d=null===(t=e.context)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.data_cpn,h=null===d||void 0===d||null===(o=d.rown_data)||void 0===o||null===(s=o[c])||void 0===s?void 0:s.customercd;const u=null===(n=e.context)||void 0===n||null===(r=n.infoA_parent)||void 0===r?void 0:r.key_form;var p=a.ZP.getFormAppAuto(u);p&&p.callDirFromSupport("setAdvanced",{list_component:l},h)},this.openAprove=e=>{let t,i=this.context.infoA_parent;if(i&&i.key_form){let e=a.ZP.getFormAppAuto(i.key_form);e.hasOwnProperty("getFormValidate")&&(e.getFormValidate()||(e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(t=a.ZP.analyticsTable(e.getData("")))))}var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){if(o.hasOwnProperty("callDirFromSupport")&&(o.callDirFromSupport("checkValidate",{},{}),o.hasOwnProperty("getFormValidate")&&!o.getFormValidate())){o.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,o.hasOwnProperty("getData")&&(this.context.data=a.ZP.analyticsTable(o.getData("")),t&&(this.context.data=Object.assign(t,this.context.data)));var s=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(e,s)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.modalAppoveLater=()=>{let e=a.ZP.cloneJson(a.ZP.modalDynamicFromFromCode_getRoleBack()),t=a.ZP.getFormAppAuto(e.context.infoA.key_form),i={};return void 0!==t&&(t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError(),i=t.getDataAll()),void 0!==t&&t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!0),setTimeout((()=>{if(void 0!==t&&null!==t&&t.hasOwnProperty("getLoadingAction")){let e=!1;e=t.getLoadingAction(),e&&setTimeout((()=>{t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1)}),500)}}),6e4)),void 0!==e&&void 0!==e.context&&(this.input=e.context.input,this.context.infoA=e.context.infoA,this.input_action=Object.assign(i,e.context.input),this.input_action.user_approve={},this.input_action.user_approve.username=-1),a.ZP.modalDynamicFromFromCode_close(),!0},this.modalAppoveApprove=()=>{},this.CRD_ACC_006002_Payment_schedule_apply=(e,t,i)=>{if(void 0,e&&t){let i=t.split(".");const n=i[i.length-1];var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){var s;o.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true"},{});let i=o.getData(""),r=a.ZP.cloneJson(i[e])||{};a.ZP.deleteNodeJson(r,(null===(s=t.split("."))||void 0===s?void 0:s[1])||t);let l=a.ZP.getNodeJson(i,t)||[];if(void 0===r.AFGHkeyIndexWJ)r.AFGHkeyIndexWJ=a.ZP.autoID(),l.push({[n]:a.ZP.cloneJson(r)}),i=a.ZP.setNodeJson(i,t,l),o.putDataAll_andSet(i),o.reload();else{for(let e=0;e<l.length;e++){const t=l[e];let i=t;1===Object.keys(i).length&&"object"===typeof Object.values(i)[0]&&(i=Object.values(t)[0]),i.AFGHkeyIndexWJ===r.AFGHkeyIndexWJ&&(r.moddt=a.ZP.context_get("user_acc.workingdate"),l[e]={[n]:a.ZP.cloneJson(r)})}o.putDataAll_andSet(i),o.reload()}return!0}a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.modalReject_007021=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&(e.setFormValidateFromFunctionClient(!1),e.clearError(),e.callDirFromSupport("checkValidate",{},{}),!e.getFormValidate())){var t;const i=e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{});let o=a.ZP.context_get("user_acc.loginname");if((null===o||void 0===o?void 0:o.trim())===(null===(t=i.username)||void 0===t?void 0:t.trim()))return a.ZP.persist_setFormError(this.context.infoA.key_form,!0,a.ZP.getLang("007021_reject_invalid_account")),!1;let s=e.getDataAll();return this.input_action=s,!0}return!1},this.BO_015004001_GetLastCalendarDate=()=>{var e,t;let i=a.ZP.getDataLimited("select * from O9_GET_LIST_CALENDAR_YEAR",0,99999).data;if(null===i||void 0===i||!i.length)return;let o=Number(null===(e=i[i.length-1])||void 0===e||null===(t=e.O9_GET_LIST_CALENDAR_YEAR)||void 0===t?void 0:t.cdid),s=new Date(`12/31/${o}`).getTime();a.ZP.getFormAppAuto(this.context.infoA.key_form).callDirFromSupport("setAdvanced",{list_component:"last_date",list_view:"",inform:"true",checkError:"false"},s)},this.BO_015004001_GetLastCalendarDate_ncbs=()=>{var e,t;let i=a.ZP.getDataLimited("select * from O9_GET_LIST_CALENDAR_YEAR",0,99999).data;if(null===i||void 0===i||!i.length)return;let o=Number(null===(e=i[i.length-1])||void 0===e||null===(t=e.O9_GET_LIST_CALENDAR_YEAR)||void 0===t?void 0:t.caption),s=new Date(`12/31/${o}`).getTime();a.ZP.getFormAppAuto(this.context.infoA.key_form).callDirFromSupport("setAdvanced",{list_component:"last_date",list_view:"",inform:"true",checkError:"false"},s)},this.BO_015004001_selectYear=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);let t=e.callDirFromSupport("getAdvanced",{list_component:"select_year",list_view:"",inform:"true",checkError:"false"},{}),i=new Date(`1/1/${t.select_year}`).getTime();e.callDirFromSupport("goToDate",{list_component:"9ec128b2b6b14969",list_view:"",inform:"true",checkError:"false"},i)},this.checkCaution=(e,t)=>{var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);let o=i.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{});i.callDirFromSupport("setCMD",{list_component:t,list_view:"",inform:"true",checkError:"false"},{disabled:o[e]?"false":"true"})}}compareJson(e,t){for(const i in e)if(void 0!==e[i]&&String(e[i])!==String(t[i]))return!1;return!0}}const Me=Se;class Pe extends r.Z{constructor(){super(...arguments),this.loadData=()=>{let e=a.ZP.getFormAppAuto(this.context.infoA.key_form),t={};e&&(t=e.getDataAll(!0),a.ZP.isDebug()&&console.log("data_form calendar",a.ZP.cloneJson(t))),this.input_action=Object.assign(this.input,t),a.ZP.isDebug()&&console.log("input action calendar",a.ZP.cloneJson(this.input_action))},this.setData=()=>{if(void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("set",{list_component:"*",inform:"true",checkError:!1},this.input)}},this.addEventToCalender=()=>{if(void 0!==this.input.calender&&void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("set",{list_component:"*",inform:"true",checkError:!1},this.input.calender)}},this.removeEvent=()=>(this.input_action=this.input,!0)}}const Te=Pe;class Ie extends r.Z{constructor(){super(...arguments),this.loadData=()=>{this.input_action=this.input},this.setData=()=>{if(void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("set",{list_component:"*",inform:"true",checkError:!1},this.input)}}}}const Ne=Ie;class Fe extends r.Z{constructor(){super(...arguments),this.openForm=e=>"systemStop",this.testFee=(e,t)=>{if(void 0!==this.context.data&&void 0!==this.context.data.ruleFunction&&void 0!==this.context.data.ruleFunction.component_result&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==i&&i.hasOwnProperty("callDirFromSupport")&&i.callDirFromSupport("set",{},{table1:{recvalue:e}})}},this.goiFuntion1111=(e,t)=>{if(void 0!==this.context.data&&void 0!==this.context.data.ruleFunction&&void 0!==this.context.data.ruleFunction.component_result&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==i&&i.hasOwnProperty("callDirFromSupport")&&i.callDirFromSupport("set",{},{table1:{recvalue:e}})}}}}const Le=Fe;var Ee={pcsamt:2010,other_currency:"KHR",currency_code:"KHR",currency_fee_code:"KHR",listFeeInfo:[],listIFC:[],tempIFC:null,rules:{CCL_FEE:Qe(),GET_FEE:ze()}};let je={totalfee:0,totalcsh:0,totaldpt:0,totalact:0,totalint:0,totalprn:0,totalper:0,totalflat:0,totalsamt:0,totalramt:0,ttsfper:0};class Ze extends r.Z{constructor(){var e;super(...arguments),e=this,this.autoFeeGetDataForm=()=>{let e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(!e)return!1;let t=e.getDataAll("")[this.context.infoA.form_code];if(t){const i=e.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let o=a.ZP.getFormAppAuto(i.form_fee);if(!o)return!1;let s=o.getDataAll(""),n=JSON.parse(s.data_fee.data_fee),r=JSON.parse(n.list_AUTO_FEE)||[];if(1===r.length){let e=r[0];if(e.value){let i="MMK",o=0,a="",s=e.txcode;if(e.value.includes("|")){let s=e.value.split("|");void 0!==s[0]&&null!==s[0]&&(o=t[s[0]]),void 0!==s[1]&&null!==s[1]&&(i=t[s[1]]),void 0!==s[2]&&null!==s[2]&&(a=t[s[2]]||"")}else o=t[e.value];return this.input_action={AUTO_FEE:{transaction_code:s,balance:o,currency_code:i,region:a}},!0}}else a.ZP.isDebug()&&console.log("getDataAutoFee ===> list auto_fee rulefunc is not equal to 1",r.length)}return!1},this.isRunCCLFee=()=>{let e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(e){if(e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true"},{}).ref_id)return!1}let t=this.context.infoA.form_code;if(t){let e=a.ZP.getFormAppAuto(t);if(e){if(e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true"},{}).ref_id)return!1}}return!0},this.autoFeeCalFee=()=>{let e=this.input.O9_AUTOFEE_POST_GET_IFC_INFO||[],t=a.ZP.getFormAppAuto(this.context.infoA.key_form),i=this.context.infoA.form_code,o=t.getDataAll("");if(t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true"},{}).ref_id)return;o.key_form=i;const s=t.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let n=a.ZP.getFormAppAuto(s.form_fee);if(!n)return!1;let r=n.getDataAll(""),l=JSON.parse(r.data_fee.data_fee),c=JSON.parse(l.list_CCL_FEE)||[],d=[];for(let p of e){var h,u;p.pay_source=(null===(h=r.form_child)||void 0===h?void 0:h.pay_source)||"CSH",p.value_typect=null===(u=r.form_child)||void 0===u?void 0:u.value_typect,p.currency_code=p.currency_fee_code,p.rule_ccl=l.list_CCL_FEE,p.ifc_code=p.ifc_code.toString(),p.AFGHkeyIndexWJ=a.ZP.autoID(),c.forEach((e=>{p.pay_source.toLowerCase()===e.relf.split(";")[0]&&(p.rule_ccl_0=o[i][e.relf.split(";")[2]],p.rule_ccl_1=p.currency_fee_code||p.currency_code)})),d.push({fee_data:p})}return o[i].fee_data=d,this.input_action=a.ZP.analyticsTable(o),!0},this.convertData=e=>{var t;let i=a.ZP.getFormAppAuto(this.context.infoA.key_form),o=this.context.infoA.form_code,s=i.getDataAll("");s.key_form=o;let n=(null===(t=s[o])||void 0===t?void 0:t.fee_data)||[];for(let a=0;a<n.length;a++){const e=n[a].fee_data;if(e.currency_code&&(e.currency_fee_code=e.currency_code),e.rule_ccl){const t=JSON.parse(e.rule_ccl);for(let i=0;i<t.length;i++){const r=t[i];e.pay_source.toLowerCase()===r.relf.split(";")[0]&&(n[a].fee_data.currency_account_code=s[o][r.relf.split(";")[2]],n[a].fee_data.rule_ccl_0=s[o][r.relf.split(";")[2]],n[a].fee_data.rule_ccl_1=e.currency_fee_code)}}}return this.input_action=a.ZP.analyticsTable(s),!0},this.refreshAllFee=async()=>{var e;let t=a.ZP.getFormAppAuto(this.context.infoA.key_form),i=this.input.data||{};i.fee_data=(null===(e=i[this.context.infoA.form_code])||void 0===e?void 0:e.fee_data)||[],await t.putDataAll_andSet(i);const o=t.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let s=a.ZP.getFormAppAuto(o.form_fee);s&&s.callDirFromSupport("runFO",{list_component:"btn_add",list_view:"",inform:"true",checkError:"false"},{action:[{function:"own_O9_fee.FeeCCL",status:"A",para:[]}]})},this.setData=(e,t,i)=>new Promise((o=>{e.putDataAll_andSetComponent(t,i),o(!0)})),this.feeCaculatorDataConvert=async()=>{var e;if(!this.isRunCCLFee())return;let t=a.ZP.getFormAppAuto(this.context.infoA.key_form),i=this.input.data||{};i.fee_data=(null===(e=i[this.context.infoA.form_code])||void 0===e?void 0:e.fee_data)||[],await this.setData(t,i,"form_fee;form_fee(table_fee)").then((()=>{var e;let i=t.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{}),o=a.ZP.getFormAppAuto(i.form_fee);if(!o)return;let s=null===(e=this.context.componentConfigDefault)||void 0===e?void 0:e.code;o.callDirFromSupport("runFO",{list_component:"btn_add",list_view:"",inform:"true",checkError:"false"},{action:[{function:"own_O9_fee.FeeCCL",status:"A",para:[s]}]})}))},this.FeeAdd=(e,t)=>{if(e){let i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){let o=i.getData("");if(t)for(const i in o[e])-1===t.indexOf(i)&&(o[e][i]=void 0);else o[e]={};i.putDataAll_andSet(o,!0),i.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{})}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1},this.FeeApply=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form_child",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fee_data",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ifc_code";const s=e.context.infoA.key_form;let n=a.ZP.getFormAppAuto(s);if(!n)return!1;n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!0);let r=n.getDataAll(""),l=n.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true"},{}),c=r[t]||{};delete c[i];let d=r[i]||[];if(null===l||void 0===l||!l.ifc_code||null===l||void 0===l||!l.ifc_name)return null!==l&&void 0!==l&&l.ifc_code||a.ZP.persist_setFormError(s,!1,"[Interest/fee/charge code] not exist","Fee"),void(n&&n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1));if(o)for(const e of d)if(e[i][o]===c[o]){c.AFGHkeyIndexWJ=e[i].AFGHkeyIndexWJ;break}if(c.rule_ccl=JSON.parse(r.data_fee.data_fee).list_CCL_FEE,void 0===c.AFGHkeyIndexWJ)c.AFGHkeyIndexWJ=a.ZP.autoID(),d.push({[i]:a.ZP.cloneJson(c)}),r[i]=a.ZP.cloneJson(d);else{for(let e=0;e<d.length;e++){const t=d[e];if(Object.values(t)[0].AFGHkeyIndexWJ===c.AFGHkeyIndexWJ){d[e][i]=a.ZP.cloneJson(c);break}}r[i]=d}const h=e.context.infoA_parent.form_code;let u=a.ZP.getFormAppAuto(e.context.infoA_parent.key_form).getDataAll("")||{};u[h]||(u[h]={}),u[h].fee_data=r.fee_data,u.key_form=h;let p=u[h].fee_data;for(let e=0;e<p.length;e++){const t=p[e].fee_data;t.currency_code&&(t.currency_fee_code=t.currency_code);const i=JSON.parse(t.rule_ccl);for(let o=0;o<i.length;o++){const a=i[o];t.pay_source.toLowerCase()===a.relf.split(";")[0]&&(p[e].fee_data.rule_ccl_0=u[h][a.relf.split(";")[2]],p[e].fee_data.rule_ccl_1=t.currency_fee_code)}}return e.input_action=a.ZP.analyticsTable(u),setTimeout((()=>{if(void 0!==n&&null!==n&&n.hasOwnProperty("getLoadingAction")){let e=!1;e=n.getLoadingAction(),e&&setTimeout((()=>{n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1)}),500)}}),6e4),!0},this.convertPaySource=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"method",i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fee_data";const s=e.context.infoA.key_form;let n=a.ZP.getFormAppAuto(s);if(!n)return!1;let r=n.getDataAll(""),l=r[i]||{},c=l[t],d=l[o]||[];for(let e=0;e<d.length;e++)d[e][o].pay_source=c;return r[o]=d,n.putDataAll_andSet(r),!0},this.clearFee=function(){let t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fee_data";const o=e.context.infoA.key_form;let s=a.ZP.getFormAppAuto(o);if(!s)return!1;let n=s.getDataAll("");n[i]=[];let r=s.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{}),l=a.ZP.getFormAppAuto(r.form_fee);if(!l)return;let c=l.getDataAll(""),d=JSON.parse(c.data_fee.data_fee),h=JSON.parse(d.list_GET_FEE)||[];return h&&s&&h.forEach((e=>{n[t][e.relf]=0})),s.putDataAll_andSet(n),!0},this.FeeCCL_FO=async()=>{var e;let t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0===this.input.data&&(this.input.data={}),await t.putDataAll_andSet({fee_data:null===(e=this.input.data[this.context.infoA_parent.form_code])||void 0===e?void 0:e.fee_data}),void 0!==t&&null!==t&&t.hasOwnProperty("getLoadingAction")){let e=!1;e=t.getLoadingAction(),e&&setTimeout((()=>{t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1)}),500)}this.FeeCCL()},this.FeeRemove=e=>{let t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let i=t.getData("");i[e]=i[e].filter((e=>Object.values(e)[0].AFGHkeyIndexWJ!==Object.values(this.context.data)[0].AFGHkeyIndexWJ)),t.putDataAll_andSet(i),this.FeeCCL()}},this.FeeModify=e=>{let t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let i=t.getData(""),o=Object.values(this.context.data)[0];i[e]=o,t.putDataAll_andSet(i)}},this.FeeCCL=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=a.ZP.getFormAppAuto(e.context.infoA.key_form);if(!i)return!1;let o=i.getDataForm(""),s=[];if(Array.isArray(o.fee_data))for(const e of o.fee_data)s.push(e.fee_data);let n=a.ZP.getFormAppAuto(e.context.infoA_parent.key_form).callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}),r=JSON.parse(o.data_fee.data_fee);Ee={listFeeInfo:[],listIFC:s,tempIFC:null,rules:{CCL_FEE:JSON.parse(r.list_CCL_FEE)||[],GET_FEE:JSON.parse(r.list_GET_FEE)||[]},totalFee:{}};for(const e in n)"object"!==typeof n[e]&&(Ee[e]=n[e]);let l=ze(t),c=a.ZP.cloneJson(o[e.context.infoA_parent.key_form]);c||(c=a.ZP.cloneJson(o));for(const e in n)"object"!==typeof n[e]&&n[e]&&(c[e]=n[e]);let d=Qe(t);d.length>0&&(d.forEach((t=>{e.CCL_FEE(t)})),function(){let e=Ee.listIFC;je={totalfee:0,totalcsh:0,totaldpt:0,totalact:0,totalint:0,totalprn:0,totalper:0,totalflat:0,totalsamt:0,totalramt:0,ttsfper:0},e&&(e.forEach((e=>{switch(e.pay_source){case"CSH":je.totalcsh+=e.ifc_base_amount;break;case"DPT":je.totaldpt+=e.ifc_base_amount;break;case"ACT":je.totalact+=e.ifc_base_amount;break;case"INT":je.totalint+=e.ifc_base_amount;break;case"PRN":je.totalprn+=e.ifc_base_amount;break;default:console.log("Error=======")}switch(e.value_type){case"P":je.totalper+=e.ifc_base_amount;break;case"F":je.totalflat+=e.ifc_base_amount;break;default:console.log("Error=======")}1===e.share_fee&&(je.totalsamt+=e.share_amount,je.totalramt+=e.round_amount,"P"===e.value_type&&(je.ttsfper+=e.share_amount))})),je.totalfee=je.totalact+je.totalcsh+je.totaldpt+je.totalint+je.totalprn)}()),l.length>0&&e.GET_FEE(c);let h=[];for(const e of Ee.listIFC)h.push({fee_data:a.ZP.cloneJson(e)});o.fee_data=h,o.FEE=je,i.putDataAll_andSet(o)},this.FeeCCLFromParent=()=>{var e;let t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(!t)return;const i=t.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let o=a.ZP.getFormAppAuto(i.form_fee);if(!o)return;const s=null===(e=this.context.componentConfigDefault)||void 0===e?void 0:e.code;o.callDirFromSupport("runFO",{list_component:"btn_add",list_view:"",inform:"true",checkError:"false"},{action:[{function:"own_O9_fee.FeeCCL",status:"A",para:[s]}]})},this.CCL_FEE=e=>{!e||e.actcdt&&!a.ZP.persist_checkCondition(e.actcdt,this.context.infoA.key_form,this.context.infoA_parent.key_form)||(function(e){let t,i,o=!1;if(e.relf){let a=e.relf.toLowerCase().split(";");if(3===a.length){let s=a[0],n=a[1],r=a[2],l=Ee.listFeeInfo;for(let e=0;e<l.length;e++)if(l[e].pay_source===s){t=l[e],o=!0;break}o||(t={damt:0,dccrcd:"",pay_source:""},l.push(t)),t.pay_source=s,e.value&&(i=Be(e.value)),i?t.damt=i:Ee[n]&&(t.damt=Ee[n]),Ee[a[2]]&&(t.dccrcd=Ee[r])}}}(e),function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Ee.listIFC;if(t&&t.length>0){let{pval:i,famt:o}=e?function(){let e=0,t=0,i=Ee.listIFC;return i.forEach((t=>{switch(t.value_type){case"P":e+=t.ifc_value;break;case"F":e+=t.ifc_base_amount;break;default:console.log("Error=======")}})),{pval:e,famt:t}}():{pval:0,famt:0};t.forEach((t=>{let a=!1;Ee.listFeeInfo.forEach((s=>{if(!a){switch(t.value_type){case"P":t.iscal=!(!t.pay_source||!s.pay_source||t.pay_source.toUpperCase()!==s.pay_source.toUpperCase()),t.damt=function(e,t,i,o,a){let s;s=e.iscal?i?t.damt-o>0?(t.damt-o)/(1+a/100):0:t.damt:0;return s}(t,s,e,o,i);break;case"F":t.iscal=!!s.pay_source,t.damt=t.ifc_value;break;default:console.log("Error=======")}a=t.iscal,t.dccrcd=t.iscal?s.dccrcd:"",t.dbrate=t.iscal?Ye(t):0,t.ccrrate=t.iscal?He(t):0,t.ibrate=t.iscal?Ye(t):0,t.currency_account_code=s.dccrcd,t.currency_code&&(t.currency_fee_code=t.currency_code),t.equivalent_amount=function(e){let t,i=0;if(0!==e.damt&&e.value_type)switch(e.value_type.toUpperCase()){case"P":i=Math.abs(e.damt)*Math.abs(e.ifc_value)/100,i*=e.ccrrate,t=i>0?e.ceiling_value>0&&i>Math.abs(e.ceiling_value)?Math.abs(e.ceiling_value):e.floor_value>0&&i<Math.abs(e.floor_value)?Math.abs(e.floor_value):i:0;break;case"F":t=e.damt;break;default:console.log("Error=======")}else t=0;return t}(t),t.ifc_base_amount=function(e){let t=0;if(0!==e.dbrate)if(0!==e.ccrrate&&(t=e.equivalent_amount/e.ccrrate),e.rounding_rule)switch(e.rounding_rule){case"U":t=function(e,t){let i=Math.pow(10,t);return Math.ceil(e*i)/i}(t,e.rounding_num);break;case"D":t=Ue(t,e.rounding_num);break;case"T":i=t,o=e.rounding_num,t=Ue(Ue(i,o+1),o);break;default:t=t.toFixed(e.rounding_num)}else t=t.toFixed(e.rounding_num);else t=0;var i,o;return Number.parseFloat(t)}(t),t.ifc_amount=function(e){let t=0,i=0;1===e.share_fee?(e.share_rate>=0&&(t=e.ifc_base_amount*e.share_rate/100),i=e.ifc_base_amount-t):(t=0,i=0);return e.ifc_base_amount-i}(t),t.fee_amount=t.ifc_amount}}))})),function(){let e,t=Ee.listIFC;t.forEach((t=>{t.ifccond&&!a.ZP.persist_checkCondition(t.ifccond,this.context.infoA.key_form,this.context.infoA_parent.key_form)||t.valbas&&(t.iscal=!1,t.damt=0,e=Be(t.valbas),e&&(t.iscal=!0,t.damt=e,t.dccrcd=t.currency_account_code,t.dbrate=Ye(t),t.ccrrate=He(t),t.ibrate=Ye(t)))}))}()}}(false))},this.autoClearFee=e=>{if(e){var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let i=t.callDirFromSupport("getAdvanced",{list_component:e,isGetOOP:!1},{});for(const e in i)if(Object.hasOwnProperty.call(i,e)){"object"!==typeof i[e]?i[e]=0:i[e].fee_data=[]}t.callDirFromSupport("setAdvanced",{list_component:e},i),t.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{})}else a.ZP.AppException("#form.formChil","form is undefined","system")}else a.ZP.AppException("#form.formChil","parameter is undefined","system");return!1}}showTotalFee(){let e=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);e&&je&&e.callDirFromSupport("setAdvanced",{list_component:"totalcsh;totaldpt;totalact;totalint;totalprn"},je)}GET_FEE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,i=Ee.rules.GET_FEE,o=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);i&&o&&i.forEach((i=>{var s;if(i.relf&&(!i.actcdt||a.ZP.persist_checkCondition(i.actcdt,this.context.infoA.key_form,null===(s=this.context.infoA_parent)||void 0===s?void 0:s.key_form))){switch(i.value){case"TOTALFEE":t=je.totalfee;break;case"TOTALCSH":t=je.totalcsh;break;case"TOTALDPT":t=je.totaldpt;break;case"TOTALACT":t=je.totalact;break;case"TOTALINT":t=je.totalint;break;case"TOTALPRN":t=je.totalprn;break;case"TOTALFLAT":t=je.totalflat;break;case"TOTALSAMT":t=je.totalsamt;break;case"TOTALRAMT":t=je.totalramt;break;case"TTSFPER":t=je.ttsfper;break;default:Ee[i.relf]=t,e[i.relf]=t,i.value&&(t=Be(i.value,e))}o.callDirFromSupport("setAdvanced",{list_component:i.relf},t),e[i.relf]=t}}))}}const Re=Ze;function Qe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var t,i;return""===e?(null===(t=Ee)||void 0===t||null===(i=t.rules)||void 0===i?void 0:i.CCL_FEE)||[]:Ee&&Ee.rules&&Ee.rules.CCL_FEE?Ee.rules.CCL_FEE.filter((t=>{var i;return t.actf&&(null===(i=t.actf)||void 0===i?void 0:i.includes(e))})):[]}function ze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var t,i;return""===e?(null===(t=Ee)||void 0===t||null===(i=t.rules)||void 0===i?void 0:i.GET_FEE)||[]:Ee&&Ee.rules&&Ee.rules.GET_FEE?Ee.rules.GET_FEE.filter((t=>{var i;return null===(i=t.actf)||void 0===i?void 0:i.includes(e)})):[]}function Ue(e,t){let i=Math.pow(10,t);return Math.floor(e*i)/i}function Be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){let i=a.ZP.component_getListCode(e);for(let o=0;o<i.length;o++){const a=i[o].code;let s=a;void 0!==t[a]&&(s=t[a]),e=isNaN(s)||""===s?e.repeat(i[o].key,s+""):e.replace(i[o].key,s+"")}return a.ZP.paramStringCaculator(e)}return null}function Ye(e){return e.baserate}function He(e){return e.crossrate}class Ve extends r.Z{constructor(){super(...arguments),this.runScheduleJob=e=>{void 0!==e&&p.runSchedule(e,this.context)},this.runExtendToken=()=>!0}}const We=Ve;class Ge extends r.Z{constructor(){var e;super(...arguments),e=this,this.getErrorMess=()=>{let e=a.ZP.modalDynamicFromFromCode_getRoleBack();var t=a.ZP.getFormAppAuto(this.context.infoA.key_form),i=a.ZP.getFormAppAuto(e.context.infoA.key_form);if(void 0!==t&&void 0!==i&&i.hasOwnProperty("getContext_FormOpenModal")){let e=i.getContext_FormOpenModal();if(t.hasOwnProperty("showErrorFromServer")){if(e.list_error[0]){let t=e.list_error[0].info;t.includes("]")&&(t=t.substring(t.indexOf("]")+1,t.length)),e.list_error[0].info=t}t.showErrorFromServer(e.list_error)}}},this.openAproveCondition=e=>{var t,i,o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){let e=o.getData("");e.user_approve&&delete e.user_approve}if(!0!==(null===(t=this.input)||void 0===t||null===(i=t.JWEBUI_O9_approve)||void 0===i?void 0:i.isOpen))return;let s,n=this.context.infoA_parent;if(n&&n.key_form){let e=a.ZP.getFormAppAuto(n.key_form);e.hasOwnProperty("getFormValidate")&&(e.getFormValidate()||(e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(s=a.ZP.analyticsTable(e.getData("")))))}var r=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(e,r);if(void 0!==o){if(o.hasOwnProperty("callDirFromSupport")&&(o.callDirFromSupport("checkValidate",{},{}),o.hasOwnProperty("getFormValidate")&&!o.getFormValidate())){o.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,o.hasOwnProperty("getData")&&(this.context.data=a.ZP.analyticsTable(o.getData("")),s&&(this.context.data=Object.assign(s,this.context.data)));r=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(e,r)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.checkOpenModalWithConditionByTableItem=function(t){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){let s,n=e.context.infoA_parent;if(n&&n.key_form){let e=a.ZP.getFormAppAuto(n.key_form);e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(s=a.ZP.analyticsTable(e.getData("")))}var i=a.ZP.getFormAppAuto(e.context.infoA.key_form);if(void 0!==i){let n=i.getData("");if(n.user_approve&&delete n.user_approve,i.hasOwnProperty("callDirFromSupport")){i.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.context.input=e.input,s&&(e.context.data=Object.assign(s,e.context.data)),e.input_action=Object.assign(e.context.input,e.context.data);var o=e.buildPackRollBack();a.ZP.modalDynamicFromFromCode(t,o)}}return"systemStop"}return!0},this.openAproveDelete=e=>{this.context.input=a.ZP.cloneJson(this.input);var t=this.buildPackRollBack();return a.ZP.modalDynamicFromFromCode(e,t),"systemStop"},this.openCopyModal=e=>{var t=a.ZP.getFormAppAuto(this.context.infoA.key_form);let i={};if(void 0!==t){let e=t.getData();for(const t in e)e.hasOwnProperty(t)&&(Number.isInteger(Number(t))||Array.isArray(e[t])||(i[t]=a.ZP.cloneJson(e[t])))}for(const a in i)i.hasOwnProperty(a)&&this.context.data.hasOwnProperty(a)&&(this.context.data[a]=Object.assign(i[a],this.context.data[a]));this.input_action=Object.assign(i,this.context.data),this.context.input=a.ZP.cloneJson(this.input);var o=this.buildPackRollBack();return a.ZP.modalDynamicFromFromCode(e,o),"systemStop"},this.closeModalDynamicRollback=e=>{a.ZP.modalDynamicFromClose_Rollback(e)},this.openAprove=e=>{let t,i=this.context.infoA_parent;if(i&&i.key_form){let e=a.ZP.getFormAppAuto(i.key_form);e.hasOwnProperty("getFormValidate")&&(e.getFormValidate()||(e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(t=a.ZP.analyticsTable(e.getData("")))))}var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){if(o.hasOwnProperty("callDirFromSupport")&&(o.setFormValidateFromFunctionClient(!1),o.clearError(),o.callDirFromSupport("checkValidate",{},{}),o.hasOwnProperty("getFormValidate")&&!o.getFormValidate())){o.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,o.hasOwnProperty("getData")&&(this.context.data=a.ZP.analyticsTable(o.getData("")),t&&(this.context.data=Object.assign(t,this.context.data)));var s=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(e,s)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.openFormModal=(e,t)=>{let i,o=this.context.infoA_parent;if(o&&o.key_form){let e=a.ZP.getFormAppAuto(o.key_form);e.hasOwnProperty("getFormValidate")&&(e.getFormValidate()||(e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(i=a.ZP.analyticsTable(e.getData("")))))}var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&(s.setFormValidateFromFunctionClient(!1),s.clearError(),s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&!s.getFormValidate())){s.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,s.hasOwnProperty("getData")&&(this.context.data=Object.assign(this.context.data,a.ZP.analyticsTable(s.getData(""))),this.input_action=this.context.data,i&&(this.context.data=Object.assign(i,this.context.data),this.input_action=Object.assign(i,this.context.data)));var n=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(e,n,t)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.openFormModalNotCheckValidate=(e,t)=>{let i,o=this.context.infoA_parent;if(o&&o.key_form){let e=a.ZP.getFormAppAuto(o.key_form);e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(i=a.ZP.analyticsTable(e.getData("")))}var s=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")){s.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,s.hasOwnProperty("getData")&&(this.context.data=Object.assign(this.context.data,a.ZP.analyticsTable(s.getData(""))),this.input_action=this.context.data,i&&(this.context.data=Object.assign(i,this.context.data),this.input_action=Object.assign(i,this.context.data)));var n=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(e,n,t)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.openFormModalDynamicByComponentData=function(t){let i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,l=e.context.infoA_parent;if(l&&l.key_form){let e=a.ZP.getFormAppAuto(l.key_form);e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(i=a.ZP.analyticsTable(e.getData("")))}var c=a.ZP.getFormAppAuto(e.context.infoA.key_form);if(void 0!==c){if(c.hasOwnProperty("callDirFromSupport")){c.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),e.context.input=e.input,c.hasOwnProperty("getData")&&(e.context.data=Object.assign(e.context.data,a.ZP.analyticsTable(c.getData(""))),e.input_action=e.context.data,i&&(e.context.data=Object.assign(i,e.context.data),e.input_action=Object.assign(i,e.context.data))),n||(n={}),e.input_action=Object.assign(e.input_action,n);let l="";if(o)l=a.ZP.getNodeJson(e.context.data,t);else{l=c.callDirFromSupport("getAdvanced",{list_component:t,list_view:"",inform:"true",checkError:"false"},{})[t]}let h=a.ZP.getNodeJson(e.input_action,r);if(h){let t={};t[l]=JSON.parse(h),e.input_action=Object.assign(e.input_action,t)}var d=e.buildPackRollBack();a.ZP.modalDynamicFromFromCode(l,d,s)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.getDataAndSetComponentParent=(e,t)=>{if(t&&e){var i=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){if(i.hasOwnProperty("callDirFromSupport")&&(i.callDirFromSupport("checkValidate",{},{}),i.hasOwnProperty("getFormValidate")&&!i.getFormValidate())){if(i.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true",checkError:!0},{}),!i.hasOwnProperty("getData"))return!1;{let s=i.getData("");var o=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form);let n=a.ZP.getNodeJson(s,e);if("object"===typeof n&&(n=JSON.stringify(n)),void 0!==o)return o.callDirFromSupport("setAdvanced",{list_component:t},n),!0}}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.modelApproveOpen=e=>{let t,i=this.context.infoA_parent;if(i&&i.key_form){let e=a.ZP.getFormAppAuto(i.key_form);e.hasOwnProperty("getFormValidate")&&(e.getFormValidate()||(e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(t=a.ZP.analyticsTable(e.getData("")))))}var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){if(o.hasOwnProperty("callDirFromSupport")&&(o.callDirFromSupport("checkValidate",{},{}),o.hasOwnProperty("getFormValidate")&&!o.getFormValidate())){o.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,o.hasOwnProperty("getData")&&(this.context.data=a.ZP.analyticsTable(o.getData("")),t&&(this.context.data=Object.assign(t,this.context.data)));var s=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(e,s)}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.modalApproveTable=()=>{let e=a.ZP.modalDynamicFromFromCode_getRoleBack();var t=a.ZP.getFormAppAuto(e.context.infoA.key_form);void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError()),void 0!==e&&void 0!==e.context&&(this.input_action=Object.assign(e.context.data,e.context.input),this.input_action=Object.assign(this.input_action,a.ZP.cloneJson(this.input)),this.context.infoA=e.context.infoA,this.context.componentConfigDefault=e.context.componentConfigDefault,this.context.infoA_parent=e.context.infoA_parent);var i=a.ZP.getFormAppAuto(e.context.infoA.key_form);return void 0!==i&&i.hasOwnProperty("setLoadingAction")&&i.setLoadingAction(!0),setTimeout((()=>{if(void 0!==i&&null!==i&&i.hasOwnProperty("getLoadingAction")){let e=!1;e=i.getLoadingAction(),e&&setTimeout((()=>{i.hasOwnProperty("setLoadingAction")&&i.setLoadingAction(!1)}),500)}}),6e4),a.ZP.modalDynamicFromFromCode_close(),!0},this.closeModalAndGetData=()=>{let e=a.ZP.modalDynamicFromFromCode_getRoleBack();var t=a.ZP.getFormAppAuto(e.context.infoA.key_form);return void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError()),void 0!==e&&void 0!==e.context&&(this.input_action=Object.assign(e.context.data,e.context.input),this.input_action=Object.assign(this.input_action,a.ZP.cloneJson(this.input)),this.context.infoA=e.context.infoA,this.context.componentConfigDefault=e.context.componentConfigDefault,this.context.infoA_parent=e.context.infoA_parent,this.context.data=this.input_action),a.ZP.modalDynamicFromFromCode_close(),!0},this.modalCopyTable=()=>{let e=a.ZP.modalDynamicFromFromCode_getRoleBack();var t=a.ZP.getFormAppAuto(e.context.infoA.key_form);return void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError()),void 0!==e&&void 0!==e.context&&(this.input_action=Object.assign(e.input_action,e.context.data),this.input_action=Object.assign(this.input_action,e.context.input),this.input_action=Object.assign(this.input_action,a.ZP.cloneJson(this.input)),this.context.infoA=e.context.infoA,this.context.componentConfigDefault=e.context.componentConfigDefault,this.context.infoA_parent=e.context.infoA_parent),a.ZP.modalDynamicFromFromCode_close(),!0},this.modalAppoveApproveOke=()=>{let e=a.ZP.modalDynamicFromFromCode_getRoleBack();var t=a.ZP.getFormAppAuto(e.context.infoA.key_form);let i={};return void 0!==t&&(t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError(),i=t.getDataAll()),t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!0)),void 0!==e&&void 0!==e.context&&(this.input_action=Object.assign(i,e.context.input),this.input_action=Object.assign(this.input_action,a.ZP.cloneJson(this.input)),this.context.infoA=e.context.infoA,this.context.componentConfigDefault=e.context.componentConfigDefault,this.context.infoA_parent=e.context.infoA_parent),a.ZP.modalDynamicFromFromCode_close(),setTimeout((()=>{if(void 0!==t&&null!==t&&t.hasOwnProperty("getLoadingAction")){let e=!1;e=t.getLoadingAction(),e&&setTimeout((()=>{t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1)}),500)}}),6e4),!0},this.modalAppoveApprove=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){if(e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!0),e.hasOwnProperty("callDirFromSupport")){if(e.setFormValidateFromFunctionClient(!1),e.clearError(),e.callDirFromSupport("checkValidate",{},{}),!e.getFormValidate()){let t=e.getDataAll();return this.input_action=t,!0}e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1)}else e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1);setTimeout((()=>{if(void 0!==e&&null!==e&&e.hasOwnProperty("getLoadingAction")){let t=!1;t=e.getLoadingAction(),t&&setTimeout((()=>{e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1)}),500)}}),6e4)}return!1},this.modalCopyOk=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&(e.setFormValidateFromFunctionClient(!1),e.clearError(),e.callDirFromSupport("checkValidate",{},{}),!e.getFormValidate())){let t=e.getDataAll();return this.input_action=t,!0}return!1},this.modalAppoveLater=()=>{let e=a.ZP.modalDynamicFromFromCode_getRoleBack();void 0!==e&&void 0!==e.context&&(this.input=e.context.input,this.context.infoA=e.context.infoA,this.input_action=Object.assign(e.context.data,e.context.input));var t=a.ZP.getFormAppAuto(e.context.infoA.key_form);return void 0!==t&&t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!0),setTimeout((()=>{if(void 0!==t&&null!==t&&t.hasOwnProperty("getLoadingAction")){let e=!1;e=t.getLoadingAction(),e&&setTimeout((()=>{t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1)}),500)}}),6e4),a.ZP.modalDynamicFromFromCode_close(),!0},this.openForm=e=>{this.context.data={test:"C\xf3 g\u1eedi data l\xean form n\xe8, gi\u1edd nh\u1ea5n g\u1eedi th\xf4i nha aaaaaaa"};var t=this.buildPackRollBack();a.ZP.modalDynamicFromFromCode(e,t)},this.actionForm=()=>{let e=a.ZP.modalDynamicFromFromCode_getRoleBack();void 0!==e&&void 0!==e.context&&e.context.data,a.ZP.modalDynamicFromFromCode_close()},this.closeForm=()=>{a.ZP.modalDynamicFromFromCode_close()},this.modalAppoveApprove_007021=()=>{const e=a.ZP.modalDynamicFromFromCode_getRoleBack().context.infoA.key_form;var t=a.ZP.getFormAppAuto(this.context.infoA.key_form),i=a.ZP.getFormAppAuto(e);if(void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError(),t.callDirFromSupport("checkValidate",{},{}),!t.getFormValidate())){const e=t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}),o=i.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}),s=o.iamt,n=o.raccno,r=e.input_amount;if(e.input_account!==n)return a.ZP.persist_setFormError(this.context.infoA.key_form,!0,a.ZP.getLang("007021_approve_invalid_account")),!1;if(r!==s)return a.ZP.persist_setFormError(this.context.infoA.key_form,!0,a.ZP.getLang("007021_approve_invalid_amount")),!1;let l=t.getDataAll();return this.input_action=l,!0}return!1}}}const Je=Ge;var qe;class Ke extends r.Z{constructor(){super(...arguments),this.loadChartJs=()=>{qe=a.ZP.getFormAppAuto(this.context.infoA.key_form),void 0===window.google?a.ZP.loadJs("/app/gstatic/loader.js").then((e=>{window.google.charts.load("current",{packages:["corechart"]}),window.google.charts.setOnLoadCallback((()=>{this.drawChart(qe)}))}),(e=>{})):this.drawChart(qe)},this.drawChart=e=>{e.callDirFromSupport("drawChart",{list_component:"*",list_view:"code"},{})}}}const Xe=Ke;class $e extends r.Z{constructor(){super(...arguments),this.clear=()=>{a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo()}}}const et=$e;var tt=i(516);class it extends r.Z{constructor(){var e;super(...arguments),e=this,this.setFileName=()=>{void 0!==this.input.file_name&&a.ZP.setResponseFile_fileName(this.input.file_name)},this.setFileNameAndData=async()=>{if(console.log("this.input==",this.input),void 0!==this.input.file_name&&a.ZP.setResponseFile_fileName(this.input.file_name),void 0!==this.input.media_data){const e=this.input.file_name.split(".").pop();console.log("this.fileExtension==",e),a.ZP.setResponseFile_fileData((0,tt.OP)(this.input.media_data,e))}},this.setFileData=()=>{if(console.log("setFileData==",this.input),a.ZP.getResponseFile()){let e=a.ZP.getResponseFile();console.log("rs_file==",e);const t=URL.createObjectURL(e.buffer_data),i=document.createElement("a");i.href=t,i.download=e.file_name,i.setAttribute("hidden",!0),document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(i),a.ZP.removeResponseFile()}},this.downloadFileInOtherTab=async e=>{let t=new O.Z,i="",o="",s="",n="";void 0!==this.context&&(void 0!==this.context.infoA&&(void 0!==this.context.infoA.title&&(o=this.context.infoA.title),void 0!==this.context.infoA.form_code&&(i=this.context.infoA.form_code)),void 0!==this.context.componentConfigDefault?(void 0!==this.context.componentConfigDefault.name&&(n=this.context.componentConfigDefault.name),void 0===this.context.componentConfigDefault.code&&void 0===this.context.componentConfigDefault.codeHidden||(s=this.context.componentConfigDefault.codeHidden)):void 0!==this.context.debug_info&&(void 0!==this.context.debug_info.from_action_code&&(s=this.context.debug_info.from_action_code),void 0!==this.context.debug_info.from_action_name&&(n=this.context.debug_info.from_action_name))),void 0!==this.context.infoA_parent&&void 0!==this.context.infoA_parent.form_code&&(i="",s="");let r="";r=void 0!==this.context.key_feedback?this.context.key_feedback:a.ZP.autoUui_key_feedback();let l=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e,app:"ncbsCbs"},form_code:"",from_action_code:""}],c=this.context.data;if(this.context.infoA.key_form&&0===Object.keys(this.context.data).length&&this.context.data.constructor===Object){var d=a.ZP.getFormAppAuto(this.context.infoA.key_form);void 0!==d&&d.hasOwnProperty("callDirFromSupport")&&(d.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true",checkError:"false"},{}),d.hasOwnProperty("getData")&&(c=Object.assign(c,d.getData(""))))}l[0].input=Object.assign(l[0].input,c),t.setBo(l,r);let h=a.ZP.getOncePacked();0!==h?(h++,a.ZP.setOncePacked(h)):h=0,t.setMoreInfo({from_action_code:s,from_action_name:n,form_code:i,form_name:o,oncepacked:h,oncepacked_id:a.ZP.autoID()});let u={Accept:"*/*","Content-Type":"application/json-patch+json"};for(const a in t.getInfo())u[a]=t.getInfo()[a];let p=t.getForTxCode(i,s),_={method:"POST",body:JSON.stringify(p),headers:u},f=window.open("","_blank");f&&f.document&&(f.document.write('<html><head>     <link rel="icon" href="data:image/x-icon;base64,R0lGODlhEAAQAPEAAAAAAAkKCgAAAAAAACH5BAlkAAIAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAC55QkIiIiIoQQQgghhBBCCCEIgiAIgiAIgiAIgiAIgiAIgiAIQhAEgiAQCAQCgUAgEAgCgYBAIBAIBAKBQCAQCAKBgEAgEAgEAoFAIBAIAoGAQCAQCAQCgUAgEAgCgYBAICAgICAgICAgIBAQEBAQICAgICAgICAgICAgEBAQICAgICAgICAgICAgICAQICAgICAgICAgICAgICAgICAgICAgICAgICAQICAgICAgICAgECAgICAgEBAQEBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQIAAAQIKAAAh+QQJZAACACwAAAAAEAAQAAAC55QkIiIiIoQQQgghhBBCCCEIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAQCAQCgUAgEAgCgYBAIBAIBAKBQCAQCAKBgEAgEAgEAoFAIBAIAoGAQCAQCAQCgUAgEAgCgYBAICAgICAgICAgICAQEBAgICAgICAgICAgICAQEBAQECAgICAgICAgICAgIBAQECAgICAgICAgICAgICAgECAgICAgICAgICAQICAgICAgICAgECAgICAgEBAQEBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQIAAAQIKAAAh+QQJZAACACwAAAAAEAAQAAAC55QkIiIiIoQQQgghhBBCCCEIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAKBgEAgEAgEAoFAIBAIAoGAQCAQCAQCgUAgEAgCgYBAICAgICAgICAgICAQEBAgICAgICAgICAgICAgEBAQICAgICAgICAgICAgEBAQEBAgICAgICAgICAgICAQEBAgICAgICAgICAQICAgIBAgICAgECAgICAgEBAQEBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQIAAAQIKAAA7" type="image/x-icon"/> \n            <title>Downloading...</title>'),f.document.write("<style>.lds-spinner {\n                color: official;\n                display: inline-block;\n                position: relative;\n                width: 80px;\n                height: 80px;\n              }\n              .lds-spinner div {\n                transform-origin: 40px 40px;\n                animation: lds-spinner 1.2s linear infinite;\n              }\n              .lds-spinner div:after {\n                content: \" \";\n                display: block;\n                position: absolute;\n                top: 3px;\n                left: 37px;\n                width: 6px;\n                height: 18px;\n                border-radius: 20%;\n                background: blue;\n              }\n              .lds-spinner div:nth-child(1) {\n                transform: rotate(0deg);\n                animation-delay: -1.1s;\n              }\n              .lds-spinner div:nth-child(2) {\n                transform: rotate(30deg);\n                animation-delay: -1s;\n              }\n              .lds-spinner div:nth-child(3) {\n                transform: rotate(60deg);\n                animation-delay: -0.9s;\n              }\n              .lds-spinner div:nth-child(4) {\n                transform: rotate(90deg);\n                animation-delay: -0.8s;\n              }\n              .lds-spinner div:nth-child(5) {\n                transform: rotate(120deg);\n                animation-delay: -0.7s;\n              }\n              .lds-spinner div:nth-child(6) {\n                transform: rotate(150deg);\n                animation-delay: -0.6s;\n              }\n              .lds-spinner div:nth-child(7) {\n                transform: rotate(180deg);\n                animation-delay: -0.5s;\n              }\n              .lds-spinner div:nth-child(8) {\n                transform: rotate(210deg);\n                animation-delay: -0.4s;\n              }\n              .lds-spinner div:nth-child(9) {\n                transform: rotate(240deg);\n                animation-delay: -0.3s;\n              }\n              .lds-spinner div:nth-child(10) {\n                transform: rotate(270deg);\n                animation-delay: -0.2s;\n              }\n              .lds-spinner div:nth-child(11) {\n                transform: rotate(300deg);\n                animation-delay: -0.1s;\n              }\n              .lds-spinner div:nth-child(12) {\n                transform: rotate(330deg);\n                animation-delay: 0s;\n              }\n              @keyframes lds-spinner {\n                0% {\n                  opacity: 1;\n                }\n                100% {\n                  opacity: 0;\n                }\n              }\n              body{\n                display:flex;\n                align-items:center;\n                height: 100vh;\n                    width: 100vw;\n                    justify-content: center;\n                    margin: unset !important;\n                }\n                .browser {\n                    width: 400px;\n                    min-width: 200px;\n                    min-height: 264px;\n                    background: #fff;\n                    box-shadow: 0 40px 80px 0 rgba(0, 0, 0, 0.25);\n                    border-radius: 3px;\n                    animation: bobble 1.8s ease-in-out infinite;\n                    position: relative;\n                    left: 50%;\n                    margin-left: -200px;\n               }\n                .browser .controls {\n                    width: 100%;\n                    height: 32px;\n                    background: #e8ecef;\n                    border-radius: 3px 3px 0 0;\n                    box-sizing: border-box;\n                    padding: 10px 12px;\n               }\n                .browser .controls i {\n                    height: 12px;\n                    width: 12px;\n                    border-radius: 100%;\n                    display: block;\n                    float: left;\n                    background: #d6dce0;\n                    margin-right: 8px;\n               }\n                .eye {\n                    position: absolute;\n                    left: 34%;\n                    top: 80px;\n                    width: 32px;\n                    height: 32px;\n                    opacity: 1;\n               }\n                .eye + .eye {\n                    right: 34%;\n                    left: auto;\n               }\n                .eye:before, .eye:after {\n                    position: absolute;\n                    left: 15px;\n                    content: ' ';\n                    height: 40px;\n                    width: 3px;\n                    border-radius: 2px;\n                    background-color: #ff5e5b;\n               }\n                .eye:before {\n                    transform: rotate(45deg);\n               }\n                .eye:after {\n                    transform: rotate(-45deg);\n               }\n                .mouth {\n                    position: absolute;\n                    width: 250px;\n                    top: 178px;\n                    left: 50%;\n                    margin-left: -125px;\n                    height: 40px;\n               }\n                .mouth .lips {\n                    position: absolute;\n                    left: 15px;\n                    content: ' ';\n                    height: 40px;\n                    width: 3px;\n                    border-radius: 2px;\n                    background-color: #ff5e5b;\n                    transform: rotate(-54deg);\n               }\n                .mouth .lips:nth-child(odd) {\n                    transform: rotate(54deg);\n               }\n                .mouth .lips:nth-child(n+2) {\n                    margin-left: 31px;\n               }\n                .mouth .lips:nth-child(n+3) {\n                    margin-left: 62px;\n               }\n                .mouth .lips:nth-child(n+4) {\n                    margin-left: 93px;\n               }\n                .mouth .lips:nth-child(n+5) {\n                    margin-left: 124px;\n               }\n                .mouth .lips:nth-child(n+6) {\n                    margin-left: 155px;\n               }\n                .mouth .lips:nth-child(n+7) {\n                    margin-left: 186px;\n               }\n                .mouth .lips:nth-child(n+8) {\n                    margin-left: 217px;\n               }\n                .mouth .lips:nth-child(n+9) {\n                    margin-left: 248px;\n               }\n                @keyframes bobble {\n                    0%, 100% {\n                        margin-top: 40px;\n                        margin-bottom: 48px;\n                        box-shadow: 0 40px 80px rgba(0, 0, 0, 0.24);\n                   }\n                    50% {\n                        margin-top: 54px;\n                        margin-bottom: 34px;\n                        box-shadow: 0 24px 64px rgba(0, 0, 0, 0.40);\n                   }\n               }\n                @media only screen and (min-device-width: 320px) and (max-device-width: 480px) {\n                    .browser {\n                        width: 280px;\n                        margin-left: -140px;\n                   }\n                    .browser .eye {\n                        left: 30%;\n                   }\n                    .browser .eye + .eye {\n                        left: auto;\n                        right: 30%;\n                   }\n               }\n                 #error{\n                   display:none;\n                 }\n                 \n                h1 {\n                    font-size: 24px;\n                    line-height: 40px;\n                    margin: 0 auto 16px;\n                    padding: 0 20px;\n                    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n                    letter-spacing: 0.5px;\n                    font-weight: 600;\n                    max-width: 600px;\n                  text-align:center;\n               }\n              </style>"),f.document.write('</head><body onload="goToReportURL()"><div id="loading" class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div><div id="error">\n        <div class="browser">\n        <div class="controls">\n          <i></i>\n          <i></i>\n          <i></i>\n        </div>\n        \n        <div class="eye"></div>\n        <div class="eye"></div>\n        <div class="mouth">\n          <div class="lips"></div>\n          <div class="lips"></div>\n          <div class="lips"></div>\n          <div class="lips"></div>\n          <div class="lips"></div>\n          <div class="lips"></div>\n          <div class="lips"></div>\n          <div class="lips"></div>\n        </div>\n      </div>\n          <h1 id="error-title">Error</h1>\n          </div>'),f.document.write(`<script>\n            function goToReportURL(){ \n                alert("Your download will take place here!"+"\\n"+\t"Click 'OK' to start your download progress!"); \n                fetch('${t.info.u}/Post' , ${JSON.stringify(_)}).then( (response) => response.text()).then((result) => {\n        try {\n          \n          result = JSON.parse(result);\n          console.log("result",result)\n         let data;\n         if (result["fo"] !== undefined)\n  for (var i = 0; i < result.fo.length; i++)\n      if (result.fo[i]["input"] !== undefined)\n          if (result.fo[i]["input"]["data_api"] !== undefined)\n          data= result.fo[i]["input"]["data_api"];\n          console.log(data);\n          if(data){\n              if(data.error_message !=="" || data.file_content===""){\n                  const loading = document.getElementById("loading");\n                  loading.remove();\n                  document.title="Error";\n                  var link = document.querySelector("link[rel~='icon']");\n                  if (!link) {\n                      link = document.createElement('link');\n                      link.rel = 'icon';\n                      document.head.appendChild(link);\n                  }\n                  link.href = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAOw4AADsOAFxK8o4AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAIABJREFUeJzt3XvUXlV94PFv7iQBAkgCgSAExQSVm6CAgtIIDPVW7ahVx9Hx2mq7ZjmOHbXTcVztuByn1Y7SqR1vY9FptY6tiBdUwPsN5ZKIEFDulwAGSAgJISR554/9PM2bl/fyXM55fvuc/f2stVcClT6/s/c+5/c7+9xAkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkqSZzYoOQGqRucATgdXAk4BjOn/uByzp/LkYWBQVoFSxHcBW4IHOn1uB24EbgPXA9Z2/b44KUFOzAJAGNwc4ETgDeBZwLinRS9rbTcAl49oDseEILACkfs0G1gCvBl4C7B8bjtQ4u4AfAp8FvgBsig2nXBYAUm+OAd4MvBI4PDgWqS22A18G/g64GNgdG44k7XECcAGwExiz2Wy1tWuA15DupZGkMKeTzkiiD4o2W2ntV8AbsBCQNGIHAR8mXaeMPhDabCW3q0k316om3gMgJbNJN/Z9CHhccCySkjHSzYLvAO4NjqV1LAAkOAr4HHBqcBySJncf6bLAhdGBtMmc6ACkYC8GvkZ6gY+kPC0Cfo90ie4y0iU6DckVAJVqAWm5/63RgUjqy+WkYuCW4DgazwJAJdoX+CfgnOhAJA3kfuAFwI+jA2kyCwCV5hDg68BJ0YFIGspW4KWkx3U1AO8BUElWkq4fPiU6EElDmw+8HLiR9BIh9ckCQKVYDXwfODI6EEmVmUP6JscNWAT0zUsAKsEq0pn/YdGBSKrFo8ALgW9EB9IkFgBqO5O/VIZtwNl4Y2DPLADUZquBbwOHRgciaSR+AzwDHxHsyezoAKSarAIuxeQvlWQp8I+kGwQ1A28CVBu57C+V63BgMfDN6EByZwGgtjH5SzoNWAusjw4kZ94DoDbxmr+krvtIx4SN0YHkyhUAtUX3zH95dCCSsrCI9PGgi6IDyZUrAGoDl/0lTWY3cAY+GjgpCwA1nclf0nR+ATwN2BkdSG68BKAmWw18B5f9JU3tEOBW4KroQHLjCoCayjN/Sb26kXTC4CrAOK4AqIlM/pL6cRDpkUA/GDSOKwBqGpO/pEFcCxxHujFQuAKgZvGav6RBLQV+Cvw6OpBcWACoKXzOX9Kw5gBfjA4iF14CUBO47C+pCttJJxGbogORNLPVwAZgrKVNarJ5pKX1pwNvAv4BeJD4/Wq69oZaekJSpdqe/C0A1EaLSEn2BuL3r8nat+vbdElVKCH5WwCozeYBfww8TPx+Nr49Cuxf43ZLGsIq4E7iDxQWANLwTgPuIn5fG9+eX+sWSxpIKWf+FgAqyQpgLfH7W7d9sN7NldSvks78LQBUmsOAO4jf58aAK2veVkl9KO3M3wJAJTqN9Che9H63C9iv5m2V1INSk78FgEr0HuL3uzHglLo3VNL0Slz2twBQyRaTx02Br6p7Q3M3OzoAFa37bn/f8CeVYyvw59FBkE4+JAUo/czfFQCVbDHxbwz8XO1bmTlXABTBM3+pbFuBrwXHsCL498NZAGjUVpNexXlodCCSQl0W/PvFvw3QAkCjtAq4FJO/JFgX/Pv7Bv9+uLnRAagYnvlLGu+m4N93BSA6ABXBM39JE20O/v3iVwBmRQeg1ltFutbnDX+Tcx9UyaKfhCl6/3MFQHUy+UtSpiwAVBeTvyRlzAJAdTD5S1LmLABUNZO/JDWABYCqZPKXpIawAFBVmvh63w3RAUhSFAsAVaGJz/nfA5wdHYQkSU3VxK/63Q08uRN/dCxSydz/pIZqevIng3ikkrn/SQ3UhuRPBjFJJXP/kxqmLcmfDOKSSub+JzVIm5I/GcQmlcz9T2qItiV/MohPKpn7n9QAbUz+ZBCjVDL3PylzbU3+ZBCnVDL3PyljbU7+ZBCrVDL3PylTbU/+ZBCvVDL3PylDJSR/MohZKpn7n5SZUpI/GcQtlcz9T8pIScmfDGKXSub+J2WitORPBvFLJXP/kzJQYvIng22QSub+JwUrNfmTwXZIJXP/kwKVnPzJYFukkrn/SUFKT/5ksD1Sydz/pAAm/yR6m6SSuf9JI2by3yN6u6SSuf9JI2Ty31v0tkklc/+TRsTk/1jR2yeVzP1PGgGT/+Sit1EqmfufVDOT/9Sit1MqmfufVCOT//Sit1UqmfufVBOT/8yit1cqmfufVAOTf2+it1kqmfufVDGTf++it1sqmfufVCGTf3+it10qmfufVBGTf/+it18qmfufVAGT/2Ci+0AqmfufNCST/+Ci+0EqmfufNAST/3Ci+0IqmfufNCCT//Ci+0MqmfufNACTfzWi+0Qqmfuf1CeTf3Wi+0Uqmfuf1AeTf7Wi+0Yqmfuf1COTf/Wi+0cqmfuf1AOTfz2i+0gqmfufNAOTf32i+0kqmfufNA2Tf72i+0oqmfufNAWTf/2i+0sqmfufNAmT/2hE95lUMvc/aQKT/+hE95tUMvc/aRyT/2hF951UMvc/qcPkP3rR/SeVzP1PwuQfJboPpZK5/6l4Jv840f0olcz9T0Uz+ceK7kupZO5/KpbJP150f0olc/9TkUz+eYjuU6lk7n8qjsk/H9H9KpXM/U9FMfnnJbpvpZK5/6kYJv/8RPevVDL3PxXB5J+n6D6WSub+p9Yz+ecrup+lkrn/qdVM/vlaQGw/b69/E6WsRR/rpNqsBjYQP8n7aXd14i7BMmL7emP9myhlLfp4V7TZ0QG02CrgUuDQ6ED6cA9wNrA+OpAROTr49x8M/n1JBZsbHUBLrQa+TbOS/wZgDeUkf4ATgn//oeDfl1QwVwCqZ/JvjucG/74rAJLUEt7w1xyLgS3E9v3nat9KKW/Rx7+ieQmgOp75N8urgH2DY7g++PclSUPybv9mmQ/cSPwYvKruDZUyF70PSkMx+TfPu4gfgzHg5Lo3VMpc9D4oDczk3zzPJL2AJ3ocdgH71bytUu6i90NpIN7w1zyHAXcQPw5jwJU1b6vUBNH7odS3J+KZf9McAawjfhy67S/r3VypEaL3Q6kvS0l3b0dP3H5a6Wf+p5Nfwfa8WrdYaobo/VDq2RLgKuInbT+t5DP/+cC7yeOa//j2KF7/lyB+X5R6soD0nH/0hDX5z2wx8GbyeNRvsnZZfZsuNUr0vlg0XwTUuw8BZ0UH0YdSXvIzHzgAWAmcBPwWaXk9+iU/0/lsdACSNCs6gIb418D/iw5CrbAdWA5sig5EykD0WXjROdCPAc3sCOBj0UGoNb6EyV9SBiwApjcH+EfgoOhA1BoXRAcgSWABMJO3AqdFB6HWuBb4RnQQkgSFX/+YwTLS8/4HRAei1nglfgJYGs97AAK5AjC1/4HJX9X5NfCF6CAkqcsCYHKnA6+JDkKt8j7SB4AkKQtFL39M4xvAudFBqDWuBJ6BBYA0kZcAAhW98VM4kXTAtm9Uhd3AGcCPowORMmQBEMhLAI/1nyl8UqhSn8TkLylDJrq9PYn0qNac6EDUChtJ32K4LzoQKVOuAARyBWBvb8Lkr2qMAW/E5C8pUxYAe8wGXhEdhFrjg8CF0UFI0lSKXv6Y4Bzgm9FBqBUuB84EdkQHImXOSwCBXAHY499EB6BWuBd4GSZ/SZkruvoZZy7pWu3+0YGo0bYAvwVcER2I1BCuAARyBSA5BZO/hrMDeCkmf0kNYQGQnBUdgBptN+nV0d5DIqkxLACSs6IDUGPtIN0/8vnoQCSpH0Vf/+iYB9wP7BsdiBpnC/C7wCXRgUgN5T0AgeZGB5CBJ2LyV//uAZ6P1/wlNZSXAGBVdABqnJ+RPhlt8pfUWBYA6f3/Ui/GgI+Qvu53c3AskjQULwFYAKg3G4HXAxdFByJJVXAFAJ4QHYCythv4OOmrfiZ/Sa3hCgAcGB2AsnU18IfAj6IDkaSquQLgEwB6rBuA15HeEGnyl9RKrgDAftEBKBvXAH8B/D2wMzgWSaqVBYArAKV7GLgQuAC4mPgXk0jSSBT9FqQOD/jl2Qn8APgM8EVgc2w4UrGij79F50BXAFSKm0iv7L0E+BawKTYcSYplAaCm2wE8REroD3Xa7aQb+dYD13f+viUqQEnKkQVAvKKXoCRJMXwMUJKkAlkASJJUIAsASZIKZAEgSVKBLAAkSSqQBYAkSQWyAJAkqUAWAJIkFcgCQJKkAlkASJJUIAsASZIKZAEgSVKBLAAkSSqQBYAkSQWyAJAkqUAWAJIkFcgCQJKkAlkASJJUIAsASZIKZAEgSVKBLAAkSSqQBYAkSQWyAJAkqUBzowOQpIbYDzgROAZY2vl3u4C7gF8C13T+WWoECwBpNGYDJwOrgGXAcmAbcC9wJ/BTYENYdJrKIuBVnXYm0x8zHwS+AnwauAQYqzs4aRizogPIQPRO6hj0by5wFimhrgQeD8wDHiAdhK8Cvkc6K9sdEyKQxvYc4BXA80mJfypjwBWkBPJJ4I7ao4tzIHAecCxp/A4FdgBbScXQT0jjF1kQzQPeCvwpcPAA//3VwDuAS6sMqoU8/irUWHBT744jJceN9Na3dwPvYc9y7Sg9B7iyxzgntkeAvwEeN/Ko6zMLeBlwMSnZ99IPPwNeyehXKo8lFWNV7N+fAvYdbfiN4vFXoZyA+VtBOpDuZLA+3ga8H5g/glj3Af56wDgntntIZ8pN9xzSJY5B++FW4MUjivU8YPMQsU7W1gKHjSj+pvH4q1BOwLy9nOoOyFcBT6kx1oOAH1YUa7ftAt5WY8x1WgCcT3V98QnqPZs+j7T6Usd+fiPpUof25vFXoZyA+XoX6Rp+lf29FVhTQ6xLSWd6dc2Td9QQc532Y8+NcFW2tdRzSWcNaW7Uua9fQVoh0h4efxXKCZind1Bfn1ddBCwF1tUY7xipEHpJhTHXaR/gMurri3VUWwSMIvl324crjLsNPP4qlBMwPy+k+jP/ia2qIqDuM//x7X7g8ApirtunqL8vqloJGGXyHyNd0jm5grjbIuq4220qnBMwLwfS+13+w7Zhi4BRJv9u+79DxDsKL2Z0fTFsETDq5N9t3xwi5rYZdd9PbCqcEzAvf8lo+38bcPYAcY5i2X+ytht46gDxjsI8YD2j7Y9Bi4Co5N8dw+MGiLmNIvp/fFPhnID5OBJ4mNGPQb8rARFn/uPb3/YR6yi9hZj+6LcIiEz+3fb+PuJts8gxGBvB9ilzTsB8/Blx47AVeG4PMUYn/zHSu+dzfIPZL4jrk16LgByS/1inrxQ/DiqcEzAf1xI7FjMVATkk/27L7UayVcT3yVqmf21vLsl/jHQz4JIe+rXtosdBhXMC5uFJxI/FGFNfDjiYfJL/GPD23rt2JN5JfJ+MMXURkFPy77ZTeu7d9ooeg6LNjg5A6jg+OoCORcBF7L0SsJT0UZdcYoT8HgfMpW+OJ43V+CJgDWlMF4VENDVfD6xQFgDKxcroAMZZBHyZVAQsJb3RLpcE15Xba2VzGr/jSV8TPJT0Cd8LyS/5w2i+TSFNadRf2ZKmckR0ABN0i4DbSde3c5Pb9ePcxu9Y4DukuHJM/pC+OyCFsQBQLnZGBzCJReSZ/CF9KTAnOY5frmPXtSE6AJXNSwDKxZboABomt+Th+PVnN+mlSVIYCwDl4v7oABrmlugAJrgvOoCGuQZ4KDoIlc0CQLm4PDqAhsntffKOX3++Eh2AZAGgXPyc9Jy2ZnY1cFt0EBN8PzqABhkDPhMdhGQBoFw8SvqGvGb2xegAJvE9LOB6dTFe/1cGLACUkw9HB9AADwEfjQ5iEg8Cn44OogF2Ae+ODkJS4qso83Il8WOSc/uTwbu2ditJjwNG91HO7QMD9247RY+HCucEzMs5pEekosclx3YlsGDwrh2Jvya+n3JtPyL/8Ru16DFR4ZyA+fkr4sclt3YfcMwwnToii4j/qmOO7Tpg2RD92lbR46LCOQHzsw9wFfFjk0vbCpwxVI+O1tPI78t7kW0dcMhQPdpe0WOjwjkB87QU+AXx4xPdtrL3lwmb4kzS2wGj+y+6XUd+H27KSfT4qHBOwHwtI70xLXqMolpTk39X6UXAemD50L3YbtFjpMI5AfO2DPgl8eM06tb05N9VahFwPXBYBf3XdtHjpMI5AfN3CGXdWNaW5N9VWhFwAyb/XkWPlQrnBGyGFcCviB+vulvbkn9XKUXALcCR1XRZEaLHS4VzAjbHCuDXxI9ZXa2tyb+r7UXArcBRVXVWIaLHTIVzAjbLEcCNxI9b1a3tyb+rrUXAraQ3Iao/0eOmwjkBm+fxwE3Ej11VrZTk39W2IuA24OhKe6gc0WOnwjkBm+lI4Gbix2/YVlry72pLEXA78ISK+6Yk0eOnwjkBm+uJwB3Ej+GgrdTk39X0IuBuYHXlvVKW6DFU4ZyAzXYMcCfx49hvKz35dzW1CLgbeHIN/VGa6HEs2uzoACRJkiJYgTaXlwCaraln/93mJYDhRY+hCucEbKYj8SbAJmt68u82bwIcTvT4qXBOwObxMcBma0vy7zYfAxxc9NipcE7AZvFFQM3WtuTfbb4IaDDR46bCOQGbw1cBN1tbk3+3+Srg/kWPmQrnBGwGPwbUbG1P/t12C34MqB/R46XCOQHz5+eAm62U5N9tfg64d9FjpcI5AfO2DPgl8eM06taWIqC05N9t12MR0IvocVLhnID5WgZcQ/wYRbWmFwGlJv9uWw8sH7oX2y16jFQ4J2CelgK/IH58oltTi4DSk3+3XQccOmRftln0+KhwTsD8HACsJX5scmlbgTOG6tHROpMUc3S/5dLWkua0Hit6bFQ4J2Be5gHfI35ccmv3A6uG6NdRORZ4gPj+yq19hzS3tbfocVHhnIB5+QDxY5JruxpYMHjX1m4fYB3x/ZRre//gXdta0WOiwjkB83ESsJP4Mcm5/enAvVu/9xLfPzm3ncAJg3ZuS0WPiQrnBMzHN4kfj9zbQ8DBg3ZwjZbhdf9e2tcH7eCWih6Pos2ODkDqOB44JzqIBlgMvCU6iEm8FVgUHUQD/CvgqdFBSGABoHy8LDqABnlpdACTcPx6M4s8x08FsgBQLp4fHUCDHE9e75s/EnhydBAN4lxXFiwAlINDgBOjg2iYnC6XnBcdQMOcTHrRlRTKAkA5WElaGlXvjo4OYJycYmmCWfjZYGXAAkA58FWp/cupz3KKpSn8RoDCWQAoB4+LDmAK20hfdcvRsugAxsnxsURIY7ctOogpeAlA4SwAlIMHowOYxDbgRcDpwBXBsUxmU3QA42yODmAS60jfTziP9O6E3OQ0fiqUBYBycHd0ABN0k/+lpPfan0N+RcCG6ADGyW381pG+oLgR+D7wPPIrAnLrMxXIAkA5uDM6gHG2AS8kJf+uB0hnkutCIprcXdEBjJNTLOOTf9f3gd8hr8sBOfWZVCxfRZmHW4gfi62k5DGVA4GfZxDnGOm7Cbl4OvH9MUb67O509yOcCWzJIM5be+nUQkSPhQrnBMzD3xA7DjMl/64cioA7yeuxyVmkmCL7ZKbk35VDEXB+D3GWInIcxkawfcqcEzAP5xE3BluBNX3EupSUcKLi/WgfsY7Kx4jrj7X0d1f9GmI/XHRuH7G2XdQYdJsK5wTMwyzgWkbf/72e+U8UtRKwG3jKAPHW7ThSbKPuj17P/CeKWgm4Du+9Gm/U/T+xqXBOwHy8nNH2fb9n/hNFrAR8doh46/YPjLYv+j3znyhiJcAPAe1tlH0/WVPhnIB5uZjR9Puwyb9rlEXAfcBhFcRclxXA/YymL4ZN/l2jLAK+VkG8bTPq4+3EpsI5AfNyKOkRqTr7vKrk37WU9PhZnTHvIj3KlruXUP+lgHVU+ya9URQBd5LX2xtz4fFXoZyA+TmJ9Ha5Ovq76uTfVfdKwH+sIea6vIP6+qGqM/+J6iwCNuPXLqfi8VehnIB5OoX0trQq+/o+0uth63Ig8L2KY94N/HGNMdfl35NWLarsix9T73cHTgXurTjmu0mf/9XkPP4qlBMwX0eQ3uJWVfI4agQxLwA+QjXL4HfT7EfGzgPuYfh+2A38T1Lf1m0l8NMKYh4Dvku6L0JT8/irUE7AvM0G3kx69/0g/XsP8FZgzojjPhP42YAxP0J6WcxBI465DgcB/4u0TYP0xeXAs0Yc81zgjxh8NeAu4I34uF8vPP4qlBOwGRYArwO+zMzXarcBXyEdhBdGBDvO2cAnmLmA2UVKdv+FvO/0H9ThwHtI2zjT6shdpD4b5P0MVVpImkNfJc2p6WLeClwI/DtGs1LRFh5/A+X0OtEo0ZPAMejfQuCZpEsEhwMHkG60uqPTfkReH36BNM4nAceS7gZfDjxMWqG4E/hJ5+8lOJR0vf1w4BDSeG4gnXFfB1xF/H450SLSSsQKUtxLSB+Jugu4jTTntodF11zR41z08bfoje9wAkpSDI+/gbxGJUlSgSwAJEkqkAWAJEkFsgCQJKlAFgCSJBXIAkCSpAJZAEiSVCALAEmSCmQBIElSgSwAJEkqkAWAJEkFsgCQJKlAFgCSJBXIAkCSpAJZAEiSVCALAEmSCmQBIElSgSwAJEkqkAWAJEkFsgCQJKlAFgCSJBXIAkCSpAJZAEiSVCALAEmSCjQ3OgBJfZsNHDyuLQWWTfh3S4AFnf/tks5/t2iSf9e1GdgNPAJsm+TfbQY2jmv3Ar+Z8O92V7qVkmo1KzqADIwF/75joInmAUcCRwNP6LTu35eTEnxu82aMVARsAG7stJvG/f024NGw6JQrj7+Bit74DiegouwPnAicBBzLnkT/eNq3OreTVAR0C4PrgKuAq4EHA+NSLI+/gYre+A4noEbhQOApwMnj2mq8DwfSqsEV49rPO/9O7efxN1DRG9/hBFTV5gPPAM4CTiOd4R8WGVAD3UVaIfgJ8B3gcmBHZECqhcffQEVvfIcTUMOaC5wAnA2cATybtLyv6jwMXAn8ALik8+f20IhUBY+/gYre+A4noPo1D3gm6Qz/OaSz/IWRARXoYfasDnwH+DHeZNhEHn8DFb3xHU5A9WIxsAZ4GfBC4IDYcDTBVuDbwBeALwObYsNRjzz+Bip64zucgJrK44HzSAn/XNK1feVvF2l14CLgn4BfxYajaXj8DVT0xnc4ATXeicCLgReRbt5T811JWhX4ErA2OBbtzeNvoKI3vsMJqOXAy4HXYtJvu2tJlwn+D3BrcCzy+Buq6I3vcAKWaR/S0v5rSMv8bXvxjqa3G7gM+AzwRdI9BBo9j7+Bit74DidgWU4mJf1XAwcFx6I8PAhcCFwAXEr8MaEk0X1d9PG36I3vcAK231LgzcAbgaNiQ1HmbgY+AXyM9G0D1cvjr0KNBTfV5wTgf5OWd6PH2dastp20InACqlP0OKtwTsB2mU26tv8t0nXe6PG1Nb/9gPT+B+8TqV702BbN5Y/4SeAYVGN/4HXA23CZX/W4C/g48BHg/uBY2sLjr0JZgTbbCuB8YAvxY2kro20hFQHL0LCix1KFcwI203zgvaR3wkePoa3Mtgn4T6RvQ2gw0WNYNJc/4ieBY9C/x5Oe3T4lOhCJ9DGil+FTA4Pw+Buo6I3vcAI2y2rSC1yWRwcijXMzcA5wY3QgDePxN1DRG9/hBGyOFcBPgcOiA5EmcQPpM9H3RQfSIB5/A82ODkDq0TzgnzH5K19PIs3ROdGBSL2wAFBTvBuv+St/ZwJ/EB2E1Iuilz86XILK30HALcB+wXFIvdhEulflnuhAGsDjbyBXANQEb8Pkr+Y4APj96CCkmRRd/XRYgeZtHulM6sDoQKQ+3A6sBHZFB5I5j7+BXAFQ7k7H5K/mOYJ0P4CULQsA5e7c6ACkAT0rOgBpOhYAyt3p0QFIAzo1OgBpOhYAyp0fXFFTHREdgDQdv2+t3B0UHUBLbQV2dP4+H1gcGEtb7RsdgDQdCwDlzsQ0uU3AbcC9nbax035Demqi+8+PANs6f+4GNs/w/3cJaWVwAbCo8+fBnXYIsHTcPy/rtCM7/532tjA6AGk6FgDK3WbKTS53kT4uM1mr633zMxUIUzkYOBp4wiSt1Nc33x0dgDQdCwDl7mbS53/bbBdwK3AtcEWn/YR0Nt8U3RWHyyf5v+0PHA+c3GlPBo4jXXpos1uiA5CmYwGg3F0NPCc6iIrdDHwX+BlwFbCWtEzfVg8CP+i0rkXACcBJwNNJY7xy9KHV6rroAKTpFP0WpA7fRJW3FwEXRgcxpA2k5HcJ8C1SAaDHWg6cAZzdaUfHhjO0U5l8RUR7ePwNVPTGdzgB87aQdC38gOhA+rAR+DpwKelM/5bQaJrrKOAsYA3wPOBxkcH0aQOwgnTjpabm8VehxoKbZvZh4sdppnYj8CHSUrbfg6/eHFIx8FfATcSP90ztvXV0QgtFj1PRrH7iJ4FjMLPDgF+T32NV1wIXAV8Bfkj8XCrJU4AXAC8Enkle+9Em0uWLB6IDaYDofSaneaMAVqDN8F+JH6sxYD3wJ7T/yYQmOZI0JtcTPz/GgLfXu7mtEj1WKpwTsBnmk26oihij+4GP4ncJmuB04G9JZ98Rc+Xr+Ir1fnj8VSgnYHOsAO5gNOOyE/gq8HJgn1FsnCq1D/B7wNdIYzmKOXMT6U2J6p3HX4VyAjbLKuB26huPe4H/Rrlvr2ujw4H3kV6sVNe8uR4//jMIj78K5QRsnqXAxVQ7Dr8A3ohn+222EHgTcA3Vzp3vAoeOcDvaxOOvQjkBm2k28E7SHdeD9v0u0h385+DdwCWZRRrzr5LmwKDzZxvwH/Ca/zA8/iqUE7DZDiQ9c30fvff5/cD5pMsJKtsq0lzo56bB+0mXFA4JiLdtPP4G8qwnfhI4BtWYS3r16rmk18muZM/bAzeRXr+7jvQq3suA7QExKl8LSXPnHNI3Co4hfYVyF+lNlHcDPyXNn+8DD8eE2ToefwMVvfEdTkBJiuHxN5DXriRJKpAFgCSyQJ2MAAAGVElEQVRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkAQA7gn9/fvDvS1KEBcG//0jw74ezAIAtwb+/f/DvS1KEJcG//1Dw74ezAIifBCuDf1+SIhwd/PsPBv9+OAuA+BWAE4N/X5IinBD8+9Enf+EsAOILgDXBvy9JEZ4b/PuuAEQHkIE7g3//BcDi4BgkaZQWA78dHMMdwb8fzgIA1gf//r7AK4JjkKRRehXp2Bfp+uDfD2cBkMckeCcwLzoISRqB+cC7ooMgj2N/KAuAPCbBMcDbooOQpBF4O/FPAEAex34F2x/YDYwFt4eB02reVkmK9ExgO/HH213AfjVvqxpiLfETcgzYABxR87ZKUoTDSDfeRR9nx4Ara97WRvASQHJZdAAdhwJfAVZEByJJFToCuBg4PDqQjlyO+crAi4ivSMe3e4Fn17rFkjQap5NWN6OPq+Pb82rdYjXKEuBR4ifl+LYdeA++I0BSM80H3k0e1/zHt0fx+r8m+C7xE3OytgF4CxYCkpphMfBm4Ebij5+TNZf/9RhvIn5iTte2AJ8Dfh84FViGnxKWFGs+6Vh0KvAHwOdJx6ro4+V07fW19EQDzYoOICNLSGfbC6MDkSTVYjuwHNgUHUgOfApgj83ARdFBSJJq8yVM/v/CAmBvfxcdgCSpNhdEB5ATLwHsbRawDnhqdCCSpEpdCxxHevOrcAVgojHgv0cHIUmq3J9j8t+LKwCPNQe4jvSBHklS8/0aWE36BoA6XAF4rF3AB6KDkCRV5n2Y/B/DFYDJzQF+DpwYHYgkaShXAs/AAuAxXAGY3C7SC3e8XiRJzbUb+CNM/pOyAJja5cCno4OQJA3sk8CPo4PIlZcApncwsB54XHQgkqS+bCTd+HdfdCC5cgVgehuB15IeD5QkNcMY8EZM/tOaEx1AA/yK9J2A06MDkST15IPA+dFB5M5LAL2ZR/pcsEWAJOXtcuBMYEd0ILmzAOjdUaSJtTQ4DknS5O4Fng7cFh1IE3gPQO9uAZ5H+ta1JCkvW4DfxuTfMwuA/vwceDHwSHQgkqR/sQN4KemlP+qRNwH272bSe6V/Fy+hSFK03cCrgS9HB9I0FgCDuabTfgeYGxyLJJVqB/Bvgc9HB9JEnsEOZw3wz8D+0YFIUmEeIi37fyM6kKayABjeycDXgGXRgUhSIe4Bng9cER1Ik3kT4PCuAE4BfhQdiCQV4Gekd7KY/IfkPQDVeBC4gPT6yWfjyookVW2M9Ha/V+Irfithoqrei4BP4QeEJKkqG4HXAxdFB9ImrgBU73rg48BC0hupLLIkaTBjwGdJT1xdFRxL65ic6nUy8FFSISBJ6t3VwB/i/VW18SbAel1BulnlDaSvCkqSpncD8Dq8ubp2rgCMzmzSYyvvBZ4WG4okZeca4C+Avwd2BsdSBAuA0ZsFnAe8lnTD4MLYcCQpzMPAhaSnqC4mXfPXiFgAxFpCepPVq4Ez8LXCktpvJ/AD4DPAF4HNseGUywIgH4tJ9wuc3Wkn4T0aktrhJuCSTvsWsCk2HIEFQM72A1YBTwJWd/6+Ati30w7o/Dk/KkBJxdtBeif/ps6fDwG3k27kW096LPoGYEtUgJIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkaTj/H8iPB+y9JBOFAAAAAElFTkSuQmCC";\n                  const error_title=document.getElementById("error-title");\n                  error_title.innerHTML=data.error_message;\n                  const error_component=document.getElementById("error");\n                  error_component.style.display="block";\n                  setTimeout(() => {\n                      alert(data.error_message)\n                  }, 1000); \n              }\n              else{ \n                  let file_content = data.file_content;\n                  let bstr = atob(file_content), \n                      n = bstr.length, \n                      u8arr = new Uint8Array(n);\n                  while(n--){\n                      u8arr[n] = bstr.charCodeAt(n);\n                  }\n                  const file = new File([u8arr], data.file_name+"."+data.file_format, { type: getFileType(data.file_format) });\n\n                  const url = URL.createObjectURL(file);\n  \n                  const a = document.createElement("a");\n                  a.href = url;\n                  a.download = file.name;\n                  a.click();\n                  URL.revokeObjectURL(url);\n                  const element = document.getElementById("loading");\n                  element.remove();\n              }\n              \n             \n          }\n        } catch (error) {\n          const loading = document.getElementById("loading");\n          loading.remove();\n          document.title="Error";\n          var link = document.querySelector("link[rel~='icon']");\n          if (!link) {\n              link = document.createElement('link');\n              link.rel = 'icon';\n              document.head.appendChild(link);\n          }\n          link.href = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAOw4AADsOAFxK8o4AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAIABJREFUeJzt3XvUXlV94PFv7iQBAkgCgSAExQSVm6CAgtIIDPVW7ahVx9Hx2mq7ZjmOHbXTcVztuByn1Y7SqR1vY9FptY6tiBdUwPsN5ZKIEFDulwAGSAgJISR554/9PM2bl/fyXM55fvuc/f2stVcClT6/s/c+5/c7+9xAkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkqSZzYoOQGqRucATgdXAk4BjOn/uByzp/LkYWBQVoFSxHcBW4IHOn1uB24EbgPXA9Z2/b44KUFOzAJAGNwc4ETgDeBZwLinRS9rbTcAl49oDseEILACkfs0G1gCvBl4C7B8bjtQ4u4AfAp8FvgBsig2nXBYAUm+OAd4MvBI4PDgWqS22A18G/g64GNgdG44k7XECcAGwExiz2Wy1tWuA15DupZGkMKeTzkiiD4o2W2ntV8AbsBCQNGIHAR8mXaeMPhDabCW3q0k316om3gMgJbNJN/Z9CHhccCySkjHSzYLvAO4NjqV1LAAkOAr4HHBqcBySJncf6bLAhdGBtMmc6ACkYC8GvkZ6gY+kPC0Cfo90ie4y0iU6DckVAJVqAWm5/63RgUjqy+WkYuCW4DgazwJAJdoX+CfgnOhAJA3kfuAFwI+jA2kyCwCV5hDg68BJ0YFIGspW4KWkx3U1AO8BUElWkq4fPiU6EElDmw+8HLiR9BIh9ckCQKVYDXwfODI6EEmVmUP6JscNWAT0zUsAKsEq0pn/YdGBSKrFo8ALgW9EB9IkFgBqO5O/VIZtwNl4Y2DPLADUZquBbwOHRgciaSR+AzwDHxHsyezoAKSarAIuxeQvlWQp8I+kGwQ1A28CVBu57C+V63BgMfDN6EByZwGgtjH5SzoNWAusjw4kZ94DoDbxmr+krvtIx4SN0YHkyhUAtUX3zH95dCCSsrCI9PGgi6IDyZUrAGoDl/0lTWY3cAY+GjgpCwA1nclf0nR+ATwN2BkdSG68BKAmWw18B5f9JU3tEOBW4KroQHLjCoCayjN/Sb26kXTC4CrAOK4AqIlM/pL6cRDpkUA/GDSOKwBqGpO/pEFcCxxHujFQuAKgZvGav6RBLQV+Cvw6OpBcWACoKXzOX9Kw5gBfjA4iF14CUBO47C+pCttJJxGbogORNLPVwAZgrKVNarJ5pKX1pwNvAv4BeJD4/Wq69oZaekJSpdqe/C0A1EaLSEn2BuL3r8nat+vbdElVKCH5WwCozeYBfww8TPx+Nr49Cuxf43ZLGsIq4E7iDxQWANLwTgPuIn5fG9+eX+sWSxpIKWf+FgAqyQpgLfH7W7d9sN7NldSvks78LQBUmsOAO4jf58aAK2veVkl9KO3M3wJAJTqN9Che9H63C9iv5m2V1INSk78FgEr0HuL3uzHglLo3VNL0Slz2twBQyRaTx02Br6p7Q3M3OzoAFa37bn/f8CeVYyvw59FBkE4+JAUo/czfFQCVbDHxbwz8XO1bmTlXABTBM3+pbFuBrwXHsCL498NZAGjUVpNexXlodCCSQl0W/PvFvw3QAkCjtAq4FJO/JFgX/Pv7Bv9+uLnRAagYnvlLGu+m4N93BSA6ABXBM39JE20O/v3iVwBmRQeg1ltFutbnDX+Tcx9UyaKfhCl6/3MFQHUy+UtSpiwAVBeTvyRlzAJAdTD5S1LmLABUNZO/JDWABYCqZPKXpIawAFBVmvh63w3RAUhSFAsAVaGJz/nfA5wdHYQkSU3VxK/63Q08uRN/dCxSydz/pIZqevIng3ikkrn/SQ3UhuRPBjFJJXP/kxqmLcmfDOKSSub+JzVIm5I/GcQmlcz9T2qItiV/MohPKpn7n9QAbUz+ZBCjVDL3PylzbU3+ZBCnVDL3PyljbU7+ZBCrVDL3PylTbU/+ZBCvVDL3PylDJSR/MohZKpn7n5SZUpI/GcQtlcz9T8pIScmfDGKXSub+J2WitORPBvFLJXP/kzJQYvIng22QSub+JwUrNfmTwXZIJXP/kwKVnPzJYFukkrn/SUFKT/5ksD1Sydz/pAAm/yR6m6SSuf9JI2by3yN6u6SSuf9JI2Ty31v0tkklc/+TRsTk/1jR2yeVzP1PGgGT/+Sit1EqmfufVDOT/9Sit1MqmfufVCOT//Sit1UqmfufVBOT/8yit1cqmfufVAOTf2+it1kqmfufVDGTf++it1sqmfufVCGTf3+it10qmfufVBGTf/+it18qmfufVAGT/2Ci+0AqmfufNCST/+Ci+0EqmfufNAST/3Ci+0IqmfufNCCT//Ci+0MqmfufNACTfzWi+0Qqmfuf1CeTf3Wi+0Uqmfuf1AeTf7Wi+0Yqmfuf1COTf/Wi+0cqmfuf1AOTfz2i+0gqmfufNAOTf32i+0kqmfufNA2Tf72i+0oqmfufNAWTf/2i+0sqmfufNAmT/2hE95lUMvc/aQKT/+hE95tUMvc/aRyT/2hF951UMvc/qcPkP3rR/SeVzP1PwuQfJboPpZK5/6l4Jv840f0olcz9T0Uz+ceK7kupZO5/KpbJP150f0olc/9TkUz+eYjuU6lk7n8qjsk/H9H9KpXM/U9FMfnnJbpvpZK5/6kYJv/8RPevVDL3PxXB5J+n6D6WSub+p9Yz+ecrup+lkrn/qdVM/vlaQGw/b69/E6WsRR/rpNqsBjYQP8n7aXd14i7BMmL7emP9myhlLfp4V7TZ0QG02CrgUuDQ6ED6cA9wNrA+OpAROTr49x8M/n1JBZsbHUBLrQa+TbOS/wZgDeUkf4ATgn//oeDfl1QwVwCqZ/JvjucG/74rAJLUEt7w1xyLgS3E9v3nat9KKW/Rx7+ieQmgOp75N8urgH2DY7g++PclSUPybv9mmQ/cSPwYvKruDZUyF70PSkMx+TfPu4gfgzHg5Lo3VMpc9D4oDczk3zzPJL2AJ3ocdgH71bytUu6i90NpIN7w1zyHAXcQPw5jwJU1b6vUBNH7odS3J+KZf9McAawjfhy67S/r3VypEaL3Q6kvS0l3b0dP3H5a6Wf+p5Nfwfa8WrdYaobo/VDq2RLgKuInbT+t5DP/+cC7yeOa//j2KF7/lyB+X5R6soD0nH/0hDX5z2wx8GbyeNRvsnZZfZsuNUr0vlg0XwTUuw8BZ0UH0YdSXvIzHzgAWAmcBPwWaXk9+iU/0/lsdACSNCs6gIb418D/iw5CrbAdWA5sig5EykD0WXjROdCPAc3sCOBj0UGoNb6EyV9SBiwApjcH+EfgoOhA1BoXRAcgSWABMJO3AqdFB6HWuBb4RnQQkgSFX/+YwTLS8/4HRAei1nglfgJYGs97AAK5AjC1/4HJX9X5NfCF6CAkqcsCYHKnA6+JDkKt8j7SB4AkKQtFL39M4xvAudFBqDWuBJ6BBYA0kZcAAhW98VM4kXTAtm9Uhd3AGcCPowORMmQBEMhLAI/1nyl8UqhSn8TkLylDJrq9PYn0qNac6EDUChtJ32K4LzoQKVOuAARyBWBvb8Lkr2qMAW/E5C8pUxYAe8wGXhEdhFrjg8CF0UFI0lSKXv6Y4Bzgm9FBqBUuB84EdkQHImXOSwCBXAHY499EB6BWuBd4GSZ/SZkruvoZZy7pWu3+0YGo0bYAvwVcER2I1BCuAARyBSA5BZO/hrMDeCkmf0kNYQGQnBUdgBptN+nV0d5DIqkxLACSs6IDUGPtIN0/8vnoQCSpH0Vf/+iYB9wP7BsdiBpnC/C7wCXRgUgN5T0AgeZGB5CBJ2LyV//uAZ6P1/wlNZSXAGBVdABqnJ+RPhlt8pfUWBYA6f3/Ui/GgI+Qvu53c3AskjQULwFYAKg3G4HXAxdFByJJVXAFAJ4QHYCythv4OOmrfiZ/Sa3hCgAcGB2AsnU18IfAj6IDkaSquQLgEwB6rBuA15HeEGnyl9RKrgDAftEBKBvXAH8B/D2wMzgWSaqVBYArAKV7GLgQuAC4mPgXk0jSSBT9FqQOD/jl2Qn8APgM8EVgc2w4UrGij79F50BXAFSKm0iv7L0E+BawKTYcSYplAaCm2wE8REroD3Xa7aQb+dYD13f+viUqQEnKkQVAvKKXoCRJMXwMUJKkAlkASJJUIAsASZIKZAEgSVKBLAAkSSqQBYAkSQWyAJAkqUAWAJIkFcgCQJKkAlkASJJUIAsASZIKZAEgSVKBLAAkSSqQBYAkSQWyAJAkqUAWAJIkFcgCQJKkAlkASJJUIAsASZIKZAEgSVKBLAAkSSqQBYAkSQWyAJAkqUBzowOQpIbYDzgROAZY2vl3u4C7gF8C13T+WWoECwBpNGYDJwOrgGXAcmAbcC9wJ/BTYENYdJrKIuBVnXYm0x8zHwS+AnwauAQYqzs4aRizogPIQPRO6hj0by5wFimhrgQeD8wDHiAdhK8Cvkc6K9sdEyKQxvYc4BXA80mJfypjwBWkBPJJ4I7ao4tzIHAecCxp/A4FdgBbScXQT0jjF1kQzQPeCvwpcPAA//3VwDuAS6sMqoU8/irUWHBT744jJceN9Na3dwPvYc9y7Sg9B7iyxzgntkeAvwEeN/Ko6zMLeBlwMSnZ99IPPwNeyehXKo8lFWNV7N+fAvYdbfiN4vFXoZyA+VtBOpDuZLA+3ga8H5g/glj3Af56wDgntntIZ8pN9xzSJY5B++FW4MUjivU8YPMQsU7W1gKHjSj+pvH4q1BOwLy9nOoOyFcBT6kx1oOAH1YUa7ftAt5WY8x1WgCcT3V98QnqPZs+j7T6Usd+fiPpUof25vFXoZyA+XoX6Rp+lf29FVhTQ6xLSWd6dc2Td9QQc532Y8+NcFW2tdRzSWcNaW7Uua9fQVoh0h4efxXKCZind1Bfn1ddBCwF1tUY7xipEHpJhTHXaR/gMurri3VUWwSMIvl324crjLsNPP4qlBMwPy+k+jP/ia2qIqDuM//x7X7g8ApirtunqL8vqloJGGXyHyNd0jm5grjbIuq4220qnBMwLwfS+13+w7Zhi4BRJv9u+79DxDsKL2Z0fTFsETDq5N9t3xwi5rYZdd9PbCqcEzAvf8lo+38bcPYAcY5i2X+ytht46gDxjsI8YD2j7Y9Bi4Co5N8dw+MGiLmNIvp/fFPhnID5OBJ4mNGPQb8rARFn/uPb3/YR6yi9hZj+6LcIiEz+3fb+PuJts8gxGBvB9ilzTsB8/Blx47AVeG4PMUYn/zHSu+dzfIPZL4jrk16LgByS/1inrxQ/DiqcEzAf1xI7FjMVATkk/27L7UayVcT3yVqmf21vLsl/jHQz4JIe+rXtosdBhXMC5uFJxI/FGFNfDjiYfJL/GPD23rt2JN5JfJ+MMXURkFPy77ZTeu7d9ooeg6LNjg5A6jg+OoCORcBF7L0SsJT0UZdcYoT8HgfMpW+OJ43V+CJgDWlMF4VENDVfD6xQFgDKxcroAMZZBHyZVAQsJb3RLpcE15Xba2VzGr/jSV8TPJT0Cd8LyS/5w2i+TSFNadRf2ZKmckR0ABN0i4DbSde3c5Pb9ePcxu9Y4DukuHJM/pC+OyCFsQBQLnZGBzCJReSZ/CF9KTAnOY5frmPXtSE6AJXNSwDKxZboABomt+Th+PVnN+mlSVIYCwDl4v7oABrmlugAJrgvOoCGuQZ4KDoIlc0CQLm4PDqAhsntffKOX3++Eh2AZAGgXPyc9Jy2ZnY1cFt0EBN8PzqABhkDPhMdhGQBoFw8SvqGvGb2xegAJvE9LOB6dTFe/1cGLACUkw9HB9AADwEfjQ5iEg8Cn44OogF2Ae+ODkJS4qso83Il8WOSc/uTwbu2ditJjwNG91HO7QMD9247RY+HCucEzMs5pEekosclx3YlsGDwrh2Jvya+n3JtPyL/8Ru16DFR4ZyA+fkr4sclt3YfcMwwnToii4j/qmOO7Tpg2RD92lbR46LCOQHzsw9wFfFjk0vbCpwxVI+O1tPI78t7kW0dcMhQPdpe0WOjwjkB87QU+AXx4xPdtrL3lwmb4kzS2wGj+y+6XUd+H27KSfT4qHBOwHwtI70xLXqMolpTk39X6UXAemD50L3YbtFjpMI5AfO2DPgl8eM06tb05N9VahFwPXBYBf3XdtHjpMI5AfN3CGXdWNaW5N9VWhFwAyb/XkWPlQrnBGyGFcCviB+vulvbkn9XKUXALcCR1XRZEaLHS4VzAjbHCuDXxI9ZXa2tyb+r7UXArcBRVXVWIaLHTIVzAjbLEcCNxI9b1a3tyb+rrUXAraQ3Iao/0eOmwjkBm+fxwE3Ej11VrZTk39W2IuA24OhKe6gc0WOnwjkBm+lI4Gbix2/YVlry72pLEXA78ISK+6Yk0eOnwjkBm+uJwB3Ej+GgrdTk39X0IuBuYHXlvVKW6DFU4ZyAzXYMcCfx49hvKz35dzW1CLgbeHIN/VGa6HEs2uzoACRJkiJYgTaXlwCaraln/93mJYDhRY+hCucEbKYj8SbAJmt68u82bwIcTvT4qXBOwObxMcBma0vy7zYfAxxc9NipcE7AZvFFQM3WtuTfbb4IaDDR46bCOQGbw1cBN1tbk3+3+Srg/kWPmQrnBGwGPwbUbG1P/t12C34MqB/R46XCOQHz5+eAm62U5N9tfg64d9FjpcI5AfO2DPgl8eM06taWIqC05N9t12MR0IvocVLhnID5WgZcQ/wYRbWmFwGlJv9uWw8sH7oX2y16jFQ4J2CelgK/IH58oltTi4DSk3+3XQccOmRftln0+KhwTsD8HACsJX5scmlbgTOG6tHROpMUc3S/5dLWkua0Hit6bFQ4J2Be5gHfI35ccmv3A6uG6NdRORZ4gPj+yq19hzS3tbfocVHhnIB5+QDxY5JruxpYMHjX1m4fYB3x/ZRre//gXdta0WOiwjkB83ESsJP4Mcm5/enAvVu/9xLfPzm3ncAJg3ZuS0WPiQrnBMzHN4kfj9zbQ8DBg3ZwjZbhdf9e2tcH7eCWih6Pos2ODkDqOB44JzqIBlgMvCU6iEm8FVgUHUQD/CvgqdFBSGABoHy8LDqABnlpdACTcPx6M4s8x08FsgBQLp4fHUCDHE9e75s/EnhydBAN4lxXFiwAlINDgBOjg2iYnC6XnBcdQMOcTHrRlRTKAkA5WElaGlXvjo4OYJycYmmCWfjZYGXAAkA58FWp/cupz3KKpSn8RoDCWQAoB4+LDmAK20hfdcvRsugAxsnxsURIY7ctOogpeAlA4SwAlIMHowOYxDbgRcDpwBXBsUxmU3QA42yODmAS60jfTziP9O6E3OQ0fiqUBYBycHd0ABN0k/+lpPfan0N+RcCG6ADGyW381pG+oLgR+D7wPPIrAnLrMxXIAkA5uDM6gHG2AS8kJf+uB0hnkutCIprcXdEBjJNTLOOTf9f3gd8hr8sBOfWZVCxfRZmHW4gfi62k5DGVA4GfZxDnGOm7Cbl4OvH9MUb67O509yOcCWzJIM5be+nUQkSPhQrnBMzD3xA7DjMl/64cioA7yeuxyVmkmCL7ZKbk35VDEXB+D3GWInIcxkawfcqcEzAP5xE3BluBNX3EupSUcKLi/WgfsY7Kx4jrj7X0d1f9GmI/XHRuH7G2XdQYdJsK5wTMwyzgWkbf/72e+U8UtRKwG3jKAPHW7ThSbKPuj17P/CeKWgm4Du+9Gm/U/T+xqXBOwHy8nNH2fb9n/hNFrAR8doh46/YPjLYv+j3znyhiJcAPAe1tlH0/WVPhnIB5uZjR9Puwyb9rlEXAfcBhFcRclxXA/YymL4ZN/l2jLAK+VkG8bTPq4+3EpsI5AfNyKOkRqTr7vKrk37WU9PhZnTHvIj3KlruXUP+lgHVU+ya9URQBd5LX2xtz4fFXoZyA+TmJ9Ha5Ovq76uTfVfdKwH+sIea6vIP6+qGqM/+J6iwCNuPXLqfi8VehnIB5OoX0trQq+/o+0uth63Ig8L2KY94N/HGNMdfl35NWLarsix9T73cHTgXurTjmu0mf/9XkPP4qlBMwX0eQ3uJWVfI4agQxLwA+QjXL4HfT7EfGzgPuYfh+2A38T1Lf1m0l8NMKYh4Dvku6L0JT8/irUE7AvM0G3kx69/0g/XsP8FZgzojjPhP42YAxP0J6WcxBI465DgcB/4u0TYP0xeXAs0Yc81zgjxh8NeAu4I34uF8vPP4qlBOwGRYArwO+zMzXarcBXyEdhBdGBDvO2cAnmLmA2UVKdv+FvO/0H9ThwHtI2zjT6shdpD4b5P0MVVpImkNfJc2p6WLeClwI/DtGs1LRFh5/A+X0OtEo0ZPAMejfQuCZpEsEhwMHkG60uqPTfkReH36BNM4nAceS7gZfDjxMWqG4E/hJ5+8lOJR0vf1w4BDSeG4gnXFfB1xF/H450SLSSsQKUtxLSB+Jugu4jTTntodF11zR41z08bfoje9wAkpSDI+/gbxGJUlSgSwAJEkqkAWAJEkFsgCQJKlAFgCSJBXIAkCSpAJZAEiSVCALAEmSCmQBIElSgSwAJEkqkAWAJEkFsgCQJKlAFgCSJBXIAkCSpAJZAEiSVCALAEmSCmQBIElSgSwAJEkqkAWAJEkFsgCQJKlAFgCSJBXIAkCSpAJZAEiSVCALAEmSCjQ3OgBJfZsNHDyuLQWWTfh3S4AFnf/tks5/t2iSf9e1GdgNPAJsm+TfbQY2jmv3Ar+Z8O92V7qVkmo1KzqADIwF/75joInmAUcCRwNP6LTu35eTEnxu82aMVARsAG7stJvG/f024NGw6JQrj7+Bit74DiegouwPnAicBBzLnkT/eNq3OreTVAR0C4PrgKuAq4EHA+NSLI+/gYre+A4noEbhQOApwMnj2mq8DwfSqsEV49rPO/9O7efxN1DRG9/hBFTV5gPPAM4CTiOd4R8WGVAD3UVaIfgJ8B3gcmBHZECqhcffQEVvfIcTUMOaC5wAnA2cATybtLyv6jwMXAn8ALik8+f20IhUBY+/gYre+A4noPo1D3gm6Qz/OaSz/IWRARXoYfasDnwH+DHeZNhEHn8DFb3xHU5A9WIxsAZ4GfBC4IDYcDTBVuDbwBeALwObYsNRjzz+Bip64zucgJrK44HzSAn/XNK1feVvF2l14CLgn4BfxYajaXj8DVT0xnc4ATXeicCLgReRbt5T811JWhX4ErA2OBbtzeNvoKI3vsMJqOXAy4HXYtJvu2tJlwn+D3BrcCzy+Buq6I3vcAKWaR/S0v5rSMv8bXvxjqa3G7gM+AzwRdI9BBo9j7+Bit74DidgWU4mJf1XAwcFx6I8PAhcCFwAXEr8MaEk0X1d9PG36I3vcAK231LgzcAbgaNiQ1HmbgY+AXyM9G0D1cvjr0KNBTfV5wTgf5OWd6PH2dastp20InACqlP0OKtwTsB2mU26tv8t0nXe6PG1Nb/9gPT+B+8TqV702BbN5Y/4SeAYVGN/4HXA23CZX/W4C/g48BHg/uBY2sLjr0JZgTbbCuB8YAvxY2kro20hFQHL0LCix1KFcwI203zgvaR3wkePoa3Mtgn4T6RvQ2gw0WNYNJc/4ieBY9C/x5Oe3T4lOhCJ9DGil+FTA4Pw+Buo6I3vcAI2y2rSC1yWRwcijXMzcA5wY3QgDePxN1DRG9/hBGyOFcBPgcOiA5EmcQPpM9H3RQfSIB5/A82ODkDq0TzgnzH5K19PIs3ROdGBSL2wAFBTvBuv+St/ZwJ/EB2E1Iuilz86XILK30HALcB+wXFIvdhEulflnuhAGsDjbyBXANQEb8Pkr+Y4APj96CCkmRRd/XRYgeZtHulM6sDoQKQ+3A6sBHZFB5I5j7+BXAFQ7k7H5K/mOYJ0P4CULQsA5e7c6ACkAT0rOgBpOhYAyt3p0QFIAzo1OgBpOhYAyp0fXFFTHREdgDQdv2+t3B0UHUBLbQV2dP4+H1gcGEtb7RsdgDQdCwDlzsQ0uU3AbcC9nbax035Demqi+8+PANs6f+4GNs/w/3cJaWVwAbCo8+fBnXYIsHTcPy/rtCM7/532tjA6AGk6FgDK3WbKTS53kT4uM1mr633zMxUIUzkYOBp4wiSt1Nc33x0dgDQdCwDl7mbS53/bbBdwK3AtcEWn/YR0Nt8U3RWHyyf5v+0PHA+c3GlPBo4jXXpos1uiA5CmYwGg3F0NPCc6iIrdDHwX+BlwFbCWtEzfVg8CP+i0rkXACcBJwNNJY7xy9KHV6rroAKTpFP0WpA7fRJW3FwEXRgcxpA2k5HcJ8C1SAaDHWg6cAZzdaUfHhjO0U5l8RUR7ePwNVPTGdzgB87aQdC38gOhA+rAR+DpwKelM/5bQaJrrKOAsYA3wPOBxkcH0aQOwgnTjpabm8VehxoKbZvZh4sdppnYj8CHSUrbfg6/eHFIx8FfATcSP90ztvXV0QgtFj1PRrH7iJ4FjMLPDgF+T32NV1wIXAV8Bfkj8XCrJU4AXAC8Enkle+9Em0uWLB6IDaYDofSaneaMAVqDN8F+JH6sxYD3wJ7T/yYQmOZI0JtcTPz/GgLfXu7mtEj1WKpwTsBnmk26oihij+4GP4ncJmuB04G9JZ98Rc+Xr+Ir1fnj8VSgnYHOsAO5gNOOyE/gq8HJgn1FsnCq1D/B7wNdIYzmKOXMT6U2J6p3HX4VyAjbLKuB26huPe4H/Rrlvr2ujw4H3kV6sVNe8uR4//jMIj78K5QRsnqXAxVQ7Dr8A3ohn+222EHgTcA3Vzp3vAoeOcDvaxOOvQjkBm2k28E7SHdeD9v0u0h385+DdwCWZRRrzr5LmwKDzZxvwH/Ca/zA8/iqUE7DZDiQ9c30fvff5/cD5pMsJKtsq0lzo56bB+0mXFA4JiLdtPP4G8qwnfhI4BtWYS3r16rmk18muZM/bAzeRXr+7jvQq3suA7QExKl8LSXPnHNI3Co4hfYVyF+lNlHcDPyXNn+8DD8eE2ToefwMVvfEdTkBJiuHxN5DXriRJKpAFgCSyQJ2MAAAGVElEQVRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkASBJUoEsACRJKpAFgCRJBbIAkCSpQBYAkiQVyAJAkqQCWQBIklQgCwBJkgpkAQA7gn9/fvDvS1KEBcG//0jw74ezAIAtwb+/f/DvS1KEJcG//1Dw74ezAIifBCuDf1+SIhwd/PsPBv9+OAuA+BWAE4N/X5IinBD8+9Enf+EsAOILgDXBvy9JEZ4b/PuuAEQHkIE7g3//BcDi4BgkaZQWA78dHMMdwb8fzgIA1gf//r7AK4JjkKRRehXp2Bfp+uDfD2cBkMckeCcwLzoISRqB+cC7ooMgj2N/KAuAPCbBMcDbooOQpBF4O/FPAEAex34F2x/YDYwFt4eB02reVkmK9ExgO/HH213AfjVvqxpiLfETcgzYABxR87ZKUoTDSDfeRR9nx4Ara97WRvASQHJZdAAdhwJfAVZEByJJFToCuBg4PDqQjlyO+crAi4ivSMe3e4Fn17rFkjQap5NWN6OPq+Pb82rdYjXKEuBR4ifl+LYdeA++I0BSM80H3k0e1/zHt0fx+r8m+C7xE3OytgF4CxYCkpphMfBm4Ebij5+TNZf/9RhvIn5iTte2AJ8Dfh84FViGnxKWFGs+6Vh0KvAHwOdJx6ro4+V07fW19EQDzYoOICNLSGfbC6MDkSTVYjuwHNgUHUgOfApgj83ARdFBSJJq8yVM/v/CAmBvfxcdgCSpNhdEB5ATLwHsbRawDnhqdCCSpEpdCxxHevOrcAVgojHgv0cHIUmq3J9j8t+LKwCPNQe4jvSBHklS8/0aWE36BoA6XAF4rF3AB6KDkCRV5n2Y/B/DFYDJzQF+DpwYHYgkaShXAs/AAuAxXAGY3C7SC3e8XiRJzbUb+CNM/pOyAJja5cCno4OQJA3sk8CPo4PIlZcApncwsB54XHQgkqS+bCTd+HdfdCC5cgVgehuB15IeD5QkNcMY8EZM/tOaEx1AA/yK9J2A06MDkST15IPA+dFB5M5LAL2ZR/pcsEWAJOXtcuBMYEd0ILmzAOjdUaSJtTQ4DknS5O4Fng7cFh1IE3gPQO9uAZ5H+ta1JCkvW4DfxuTfMwuA/vwceDHwSHQgkqR/sQN4KemlP+qRNwH272bSe6V/Fy+hSFK03cCrgS9HB9I0FgCDuabTfgeYGxyLJJVqB/Bvgc9HB9JEnsEOZw3wz8D+0YFIUmEeIi37fyM6kKayABjeycDXgGXRgUhSIe4Bng9cER1Ik3kT4PCuAE4BfhQdiCQV4Gekd7KY/IfkPQDVeBC4gPT6yWfjyookVW2M9Ha/V+Irfithoqrei4BP4QeEJKkqG4HXAxdFB9ImrgBU73rg48BC0hupLLIkaTBjwGdJT1xdFRxL65ic6nUy8FFSISBJ6t3VwB/i/VW18SbAel1BulnlDaSvCkqSpncD8Dq8ubp2rgCMzmzSYyvvBZ4WG4okZeca4C+Avwd2BsdSBAuA0ZsFnAe8lnTD4MLYcCQpzMPAhaSnqC4mXfPXiFgAxFpCepPVq4Ez8LXCktpvJ/AD4DPAF4HNseGUywIgH4tJ9wuc3Wkn4T0aktrhJuCSTvsWsCk2HIEFQM72A1YBTwJWd/6+Ati30w7o/Dk/KkBJxdtBeif/ps6fDwG3k27kW096LPoGYEtUgJIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkaTj/H8iPB+y9JBOFAAAAAElFTkSuQmCC";\n          const error_title=document.getElementById("error-title");\n          error_title.innerHTML="Something wrong! Can't download this file";\n          const error_component=document.getElementById("error");\n          error_component.style.display="block";\n          setTimeout(() => {\n              alert("Something wrong! Can't download this file")\n          }, 1000); \n        }\n                })\n                .catch((err) => {\n                    console.log("err",err)\n                });\n            }\n            function getFileType(file_type){\n                switch (file_type) {\n                    case "csv":\n                        return "text/csv";\n                    case "xlsx":\n                        return "";    \n                    case "pdf":\n                        return "application/pdf";\n                    case "zip":\n                        return "application/x-zip-compressed";\n                    default:\n                        return "";\n                }\n            }\n            <\/script></body></html>`),f.document.close(),f.focus())},this.downloadFileZipOtherTab=async()=>{let e=new O.Z,t="",i="",o="",s="";void 0!==this.context&&(void 0!==this.context.infoA&&(void 0!==this.context.infoA.title&&(i=this.context.infoA.title),void 0!==this.context.infoA.form_code&&(t=this.context.infoA.form_code)),void 0!==this.context.componentConfigDefault?(void 0!==this.context.componentConfigDefault.name&&(s=this.context.componentConfigDefault.name),void 0===this.context.componentConfigDefault.code&&void 0===this.context.componentConfigDefault.codeHidden||(o=this.context.componentConfigDefault.codeHidden)):void 0!==this.context.debug_info&&(void 0!==this.context.debug_info.from_action_code&&(o=this.context.debug_info.from_action_code),void 0!==this.context.debug_info.from_action_name&&(s=this.context.debug_info.from_action_name))),void 0!==this.context.infoA_parent&&void 0!==this.context.infoA_parent.form_code&&(t="",o="");let n="";n=void 0!==this.context.key_feedback?this.context.key_feedback:a.ZP.autoUui_key_feedback();let r=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:"neptune_download_workflow_all",app:"ncbsCbs"},form_code:"",from_action_code:""}];r[0].input=Object.assign(r[0].input,this.context.data),e.setBo(r,n);let l=a.ZP.getOncePacked();0!==l?(l++,a.ZP.setOncePacked(l)):l=0,e.setMoreInfo({from_action_code:o,from_action_name:s,form_code:t,form_name:i,oncepacked:l,oncepacked_id:a.ZP.autoID()});let c={Accept:"*/*","Content-Type":"application/json-patch+json"};for(const a in e.getInfo())c[a]=e.getInfo()[a];let d=e.getForTxCode(t,o),h={method:"POST",body:JSON.stringify(d),headers:c},u=window.open("","_blank");u&&u.document&&(u.document.write('<html><head>     <link rel="icon" href="data:image/x-icon;base64,R0lGODlhEAAQAPEAAAAAAAkKCgAAAAAAACH5BAlkAAIAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAC55QkIiIiIoQQQgghhBBCCCEIgiAIgiAIgiAIgiAIgiAIgiAIQhAEgiAQCAQCgUAgEAgCgYBAIBAIBAKBQCAQCAKBgEAgEAgEAoFAIBAIAoGAQCAQCAQCgUAgEAgCgYBAICAgICAgICAgIBAQEBAQICAgICAgICAgICAgEBAQICAgICAgICAgICAgICAQICAgICAgICAgICAgICAgICAgICAgICAgICAQICAgICAgICAgECAgICAgEBAQEBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQIAAAQIKAAAh+QQJZAACACwAAAAAEAAQAAAC55QkIiIiIoQQQgghhBBCCCEIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAQCAQCgUAgEAgCgYBAIBAIBAKBQCAQCAKBgEAgEAgEAoFAIBAIAoGAQCAQCAQCgUAgEAgCgYBAICAgICAgICAgICAQEBAgICAgICAgICAgICAQEBAQECAgICAgICAgICAgIBAQECAgICAgICAgICAgICAgECAgICAgICAgICAQICAgICAgICAgECAgICAgEBAQEBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQIAAAQIKAAAh+QQJZAACACwAAAAAEAAQAAAC55QkIiIiIoQQQgghhBBCCCEIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAKBgEAgEAgEAoFAIBAIAoGAQCAQCAQCgUAgEAgCgYBAICAgICAgICAgICAQEBAgICAgICAgICAgICAgEBAQICAgICAgICAgICAgEBAQEBAgICAgICAgICAgICAQEBAgICAgICAgICAQICAgIBAgICAgECAgICAgEBAQEBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQIAAAQIKAAA7" type="image/x-icon"/> \n            <title>Downloading...</title>'),u.document.write('<style>\n            .lds-spinner {\n                color: official;\n                display: inline-block;\n                position: relative;\n                width: 80px;\n                height: 80px;\n              }\n              .lds-spinner div {\n                transform-origin: 40px 40px;\n                animation: lds-spinner 1.2s linear infinite;\n              }\n              .lds-spinner div:after {\n                content: " ";\n                display: block;\n                position: absolute;\n                top: 3px;\n                left: 37px;\n                width: 6px;\n                height: 18px;\n                border-radius: 20%;\n                background: blue;\n              }\n              .lds-spinner div:nth-child(1) {\n                transform: rotate(0deg);\n                animation-delay: -1.1s;\n              }\n              .lds-spinner div:nth-child(2) {\n                transform: rotate(30deg);\n                animation-delay: -1s;\n              }\n              .lds-spinner div:nth-child(3) {\n                transform: rotate(60deg);\n                animation-delay: -0.9s;\n              }\n              .lds-spinner div:nth-child(4) {\n                transform: rotate(90deg);\n                animation-delay: -0.8s;\n              }\n              .lds-spinner div:nth-child(5) {\n                transform: rotate(120deg);\n                animation-delay: -0.7s;\n              }\n              .lds-spinner div:nth-child(6) {\n                transform: rotate(150deg);\n                animation-delay: -0.6s;\n              }\n              .lds-spinner div:nth-child(7) {\n                transform: rotate(180deg);\n                animation-delay: -0.5s;\n              }\n              .lds-spinner div:nth-child(8) {\n                transform: rotate(210deg);\n                animation-delay: -0.4s;\n              }\n              .lds-spinner div:nth-child(9) {\n                transform: rotate(240deg);\n                animation-delay: -0.3s;\n              }\n              .lds-spinner div:nth-child(10) {\n                transform: rotate(270deg);\n                animation-delay: -0.2s;\n              }\n              .lds-spinner div:nth-child(11) {\n                transform: rotate(300deg);\n                animation-delay: -0.1s;\n              }\n              .lds-spinner div:nth-child(12) {\n                transform: rotate(330deg);\n                animation-delay: 0s;\n              }\n              @keyframes lds-spinner {\n                0% {\n                  opacity: 1;\n                }\n                100% {\n                  opacity: 0;\n                }\n              }\n              body{\n                display:flex;\n                align-items:center;\n                height: 100vh;\n                    width: 100vw;\n                    justify-content: center;\n                    margin: unset !important;\n                }\n              </style>'),u.document.write('</head><body onload="goToReportURL()"><div id="loading" class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>'),u.document.write(`<script>\n            function goToReportURL(){ \n                    alert("Your download will take place here!" + "\\n" + "Click 'OK' to start your download progress!");\n                    fetch('${e.info.u}/Post', ${JSON.stringify(h)}).then((response) => response.text()).then((result) => {\n                        result = JSON.parse(result);\n                        let data;\n                        if (result["fo"] !== undefined)\n                            for (var i = 0; i < result.fo.length; i++)\n                                if (result.fo[i]["input"] !== undefined)\n                                    if (result.fo[i]["input"]["data"] !== undefined)\n                                        data = result.fo[i]["input"]["data"];\n                        if (data) {\n                            let file_content = data.neptune_download_workflow_all.data;\n                            let bstr = atob(file_content),\n                                n = bstr.length,\n                                u8arr = new Uint8Array(n);\n                            while (n--) {\n                                u8arr[n] = bstr.charCodeAt(n);\n                            }\n                            const file = new File([u8arr], 'Neptune-Workflow-${(new Date).toJSON().slice(0,10)}-${(new Date).toJSON().slice(11,19)}.zip', { type: "application/x-zip-compressed" });\n            \n                            const url = URL.createObjectURL(file);\n            \n                            const a = document.createElement("a");\n                            a.href = url;\n                            a.download = file.name;\n                            a.click();\n                            URL.revokeObjectURL(url);\n                            const element = document.getElementById("loading");\n                            element.remove();\n                        }\n                    }).catch((err) => {\n                        console.log("err", err)\n                    });\n            }\n            <\/script>`),u.document.write("</body></html>"),u.document.close(),u.focus())},this.downloadFileFromDataComponent=(e,t,i)=>{var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==o){if(o.hasOwnProperty("callDirFromSupport")){let a=o.callDirFromSupport("getAdvanced",{list_component:e+";"+t,list_view:"*",inform:"true",checkError:!1},{});console.log("data_form",a);let d=a[e],h=(a[t]?a[t]:t)+"."+i;if(d.split(",").length>1){for(var s=d.split(","),n=s[0].match(/:(.*?);/)[1],r=atob(s[s.length-1]),l=r.length,c=new Uint8Array(l);l--;)c[l]=r.charCodeAt(l);const e=File([c],h,{type:n}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=e.name,i.click(),URL.revokeObjectURL(t)}else{let e=atob(d),t=e.length,o=new Uint8Array(t);for(;t--;)o[t]=e.charCodeAt(t);const a=new File([o],h,{type:this.getFileType(i)}),s=URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.download=a.name,n.click(),URL.revokeObjectURL(s)}}}else a.ZP.AppException("#form.getData","form is undefined","system")},this.getDataDownload=(e,t,i,o,s)=>{if(void 0!==e&&void 0!==t){var n=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==n){if(n.hasOwnProperty("callDirFromSupport")&&(n.callDirFromSupport("checkValidate",{},{}),n.hasOwnProperty("getFormValidate")&&!n.getFormValidate())){var r;n.hasOwnProperty("getData")&&(this.input_action=a.ZP.analyticsTable(n.getData("")));let l=n.callDirFromSupport("getAdvanced",{list_component:e,list_view:t,inform:"true",checkError:!1},{});if(void 0!==l[i]&&Array.isArray(l[i]))for(let e=0;e<l[i].length;e++)void 0!==l[i][e]&&void 0!==l[i][e][i]&&void 0!==l[i][e][i][o]&&(void 0===this.input_action[s]?this.input_action[s]=""+l[i][e][i][o]:this.input_action[s]+=","+l[i][e][i][o]);for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];if(null!==this&&void 0!==this&&null!==(r=this.context)&&void 0!==r&&r.data&&"object"===typeof this.context.data){let e=a.ZP.cloneJson(this.context.data);this.input_action=Object.assign(e,this.input_action)}return a.ZP.isDebug()&&console.log(this.context.infoA.title+" return=>"+!n.getFormValidate()+" data=>",a.ZP.cloneJson(this.input_action)),a.ZP.getParameterSystem("clipboardClearForFo")&&a.ZP.clearClipboardFo(),!0}}else a.ZP.AppException("#form.getData","form is undefined","system")}else a.ZP.AppException("#form.getData","parameter is undefined","system");return!1},this.getDataDownloadOne=function(){var t=a.ZP.getFormAppAuto(e.context.infoA.key_form);let i={};if(void 0!==t){let e=t.getData();for(const t in e)e.hasOwnProperty(t)&&(Number.isInteger(Number(t))||Array.isArray(e[t])||(i[t]=a.ZP.cloneJson(e[t])))}return e.input_action=Object.assign(i,e.context.data),!0}}getFileType(e){switch(e){case"csv":return"text/csv";case"xlsx":default:return"";case"pdf":return"application/pdf";case"zip":return"application/x-zip-compressed"}}}const ot=it;class at extends r.Z{constructor(){super(...arguments),this.updateProcess=()=>{},this.onStopProcess=()=>{var e=a.ZP.getFormAppAuto(this.input.form_code);e.callDirFromSupport("setCMD",{list_component:"start"},{disabled:"false"}),e.callDirFromSupport("setCMD",{list_component:"stop"},{disabled:"true"}),e.getDataAll()},this.stopProcessClick=()=>{var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);for(let t in this.input)this.input_action[t]=this.input[t];e.callDirFromSupport("setCMD",{list_component:"start"},{disabled:"false"}),e.callDirFromSupport("setCMD",{list_component:"stop"},{disabled:"true"}),setTimeout((()=>{0}),2e3)},this.refreshTableProcess=()=>{this.input_action={};var e=a.ZP.getFormAppAuto(this.context.infoA.key_form);return void 0!==e&&e.getDataAll(),!0},this.setDataInformJobProcessInterval=()=>{var e=a.ZP.getFormAppAuto(this.input.form_code);void 0!==e?e.putDataAll_andSet(this.input):a.ZP.AppException("#form.reloadData","form is undefined","system")},this.onClickStartProcess=e=>{let t=a.ZP.modalDynamicFromFromCode_getRoleBack();a.ZP.modalDynamicFromFromCode_close();var i=a.ZP.getFormAppAuto(t.context.infoA.key_form),o=a.ZP.getFormAppAuto(this.context.infoA.key_form);i.getDataAll(),this.input_action=o.getDataAll();let s=i.callDirFromSupport("getAdvanced",{list_component:"date_range;date"},""),n=parseInt(s.date_range);isNaN(n)&&(n=1),i.callDirFromSupport("setCMD",{list_component:"start"},{disabled:"true"}),i.callDirFromSupport("setCMD",{list_component:"stop"},{disabled:"false"}),this.input_action.days=n>0?n:1,this.input_action.form_code=t.context.infoA.key_form,this.input_action.working_date=a.ZP.context_get("user_acc").working_date,this.input_action.to_date=s.date;for(let a in this.input)this.input_action[a]=this.input[a];return!0},this.getJobRowCheckBox=()=>{if(this.input_action={},a.ZP.getFormAppAuto(this.context.infoA.key_form).getDataAll(),void 0!==this.context.data){let e=this.context.data,t=[];if(e.length>0)for(let i=0;i<e.length;i++)t.push(e[i].O9_job_process_refesh_table_summary.step_name);this.input_action={step_names:t};for(let i in this.input)this.input_action[i]=this.input[i];return!0}return a.ZP.AppException("#form.getJobRowCheckBox"),!1}}}const st=at,nt="form_status",rt="start_after_hour",lt="start_after_minute",ct="start_after_seconds",dt="steps_summary",ht="o9_admin_sync",ut="START",pt={role_system:0,user_info:1,user_role:2,user_password:3,role_cache_fo:4,role_cache_bo:5,role_cache_jwebui:6,data_cdlist:7,data_country:8,data_currency:9,fo_form:10,fo_menu:11},_t={start_count_down:void 0,get_info:void 0};function ft(e){var t;const i=null===e||void 0===e||null===(t=e.infoA)||void 0===t?void 0:t.key_form;if(i)return a.ZP.getFormAppAuto(i)}function gt(e,t,i){e.callDirFromSupport("setAdvanced",{list_component:t},i)}class mt{static handleStart(e,t){const i=ft(e),o=function(e){return e.callDirFromSupport("getAdvanced",{list_component:"*"},{})}(i);gt(i,nt,ut);const a=o[rt],s=o[lt];let n=1e3*o[ct]+60*s*1e3+60*a*60*1e3;_t.start_count_down=setInterval((()=>{if(n<=0)clearInterval(_t.start_count_down),i.setLoadingAction(!0),t();else{n-=1e3;let e=new Date(n);gt(i,rt,e.getUTCHours()),gt(i,lt,e.getUTCMinutes()),gt(i,ct,e.getUTCSeconds())}}),1e3)}static handleSelectFeature(e,t,i){const o=ft(e),a=o.getDataForm();let s=a[ht][dt]||[];!0===a[ht][t]?(s=s.map((e=>e[dt])),s.push({code:t,name:i,status:"N",process:0,info:""}),s=s.sort(((e,t)=>pt[e.code]>pt[t.code]?1:-1))):s=s.filter((e=>e[dt].code!==t)),a[ht][dt]=s,o.putDataAll_andSet(a)}static updateInfo(e,t,i){const o=ft(e);let a=o.getDataForm(),s=a[ht][dt]||[],n=!0;for(const d in s){var r,l,c;let e=s[d][dt];const o=e.code;e.info=(null===(r=t.info)||void 0===r?void 0:r[o])||"";let a=(null===(l=t.error)||void 0===l?void 0:l[o])||"";e.info+=a,100!==e.process&&(n=!1);const h=(null===(c=t.process)||void 0===c?void 0:c[o])||0;e.process=h,h>=100?e.status="S":(h>0||0===d)&&(e.status="R"),a&&(e.status="F",i())}n?i():o.putDataAll_andSet(a)}static getData(e){return ft(e).getDataForm()}}mt.handleStop=e=>{const t=ft(e);gt(t,nt,"STOP"),t.setLoadingAction(!1),_t.start_count_down&&clearInterval(_t.start_count_down)};class vt{static async callBO(e){let t=[{txcode:e,input:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}];return(0,c.Yr)(t,{}).then((e=>a.ZP.foGetData("data",e)))}static async callFunction(e,t){return t.function_name=e,this.callBO("bo-sync-optimal9",t)}static async getInfo(){return this.callFunction("getInfo",{})}static handleStop(){console.log("Stop sync")}static startSync(e){console.log("Start sync"),this.callFunction("syncAll",e)}static notifyAllUser(){console.log("notifyBeginSync")}static logoutAllUser(){console.log("notifyBeginSync")}}class bt{}bt.getListHTML=(e,t)=>{},bt.saveListForm=(e,t)=>{let i=a.ZP.cloneJson(e),o={},s=Object.keys(i.list_form);for(let a=0;a<10;a++)if(s[e.startIndexBuild+a]){let t=s[e.startIndexBuild+a];o[t]=i.list_form[t]}i.list_form=o,delete i.list_form_data_j,0!==e.startIndexBuild&&delete i.list_menu};const yt=bt;var At=i(3063);const Dt={view_name:0,cpn_name:1,cpn_child_name:2,key_name:4,function:7,is_group:8,cpn_type:9,mask:10,no_modify:11,hidden:12,disable:13,data_default:14,min_value:15,max_value:16,max_length:17,required:18,condition:20,cdlist:21,is_get_api:22,value_type:24,api_main_node:25,api_main_node_chil:26,api_main_addr:27,api_cpn_node:28,api_cpn_addr:29,node_data:30,flow_data:31,list_CCL_FEE:32,list_GET_FEE:33,fee_active_fields:34,ftags:35,list_AUTO_FEE:36,auto_fee_active_fields:37,rulefunc:38,component_code:-1,codeHidden:-1,table_node:-1,api_cpn_id:-1,action_fo:-1,request_url:-1,api_method:-1,action_fo_name:-1,sum_name:-1,mutiform_code:-1},kt={config:{structable:"",structable_read:"",data_default:""},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:""},Ot=()=>(0,At.Z)({},kt),wt={Search:{color:"primary",icon:"fa-search"},Save:{color:"success",icon:"fa-save"},View:{color:"info",icon:"fa-eye"},Delete:{color:"danger",icon:"fa-trash-o"},Import:{color:"primary",icon:"fa-upload"},Add:{color:"primary",icon:"fa-plus"},Accept:{color:"primary",icon:"fa-plus"},Modify:{color:"warning",icon:"fa-pencil-square-o"},Clear:{color:"default",icon:"fa-trash-o"},Copy:{color:"primary",icon:"fa-files-o"}},Ct={default:{name:"errorJWebUI",code:"errorJWebUI_code",codeHidden:"c2a97a17e41cb223",class:"col-sm-12 col-md-12",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"",structable:"errorJWebUI.count",structable_read:"errorJWebUI.count",data_default:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_disabled:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"},xt={info:{title:"O9_FEE",des:"O9_FEE",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"false",url_input:"",form_code:"O9_FEE",ruleStrong:[{code:"visibility",config:{component_event:"on_click",component_action:"btn_add;btn_modify",component_result:"table_fee;ifccd;ifcval;btn_apply",condition:"",visible:"not_use",ena_dis:"false",view_result:"code",list_config:[]},inUse:!0,order:1,isStart:!1},{code:"visibility",config:{component_event:"on_click",component_action:"btn_add;btn_modify",component_result:"btn_add",condition:"",visible:"not_use",ena_dis:"true",view_result:"",list_config:[]},inUse:!0,order:1,isStart:!1},{code:"visibility",config:{component_event:"on_click",component_action:"btn_apply",component_result:"btn_add",condition:"",visible:"not_use",ena_dis:"false",view_result:"",list_config:[]},inUse:!0,order:1,isStart:!0},{code:"visibility",config:{component_event:"on_click",component_action:"btn_apply",component_result:"*;btn_apply",condition:"",visible:"not_use",ena_dis:"true",view_result:"",list_config:[]},inUse:!0,order:1,isStart:!0},{code:"visibility",config:{component_event:"all",component_action:"btn_modify",component_result:"ifccd;ifcval;btn_apply",condition:"",visible:"not_use",ena_dis:"false",view_result:"",list_config:[]},inUse:!0,order:1},{code:"setValue",config:{component_event:"all",component_action:"valtype",component_result:"",isGetOOP:"true",getOOPFormat:'{\n    "valtypect": "c_cdlist.caption"\n}'},inUse:!0,order:2,isStart:!0},{code:"visibility",config:{component_event:"on_change",component_action:"",component_result:"valtype;valtypect;data_fee;paysrc",condition:"",visible:"false",ena_dis:"not_use",view_result:"",list_config:[]},inUse:!0,order:3,isStart:!0}],lang_form:{},mode_form:{mode:"1",col_text:"",col_input:""}},list_layout:[{name:"Fee",des:"",class:"",lang:{en:"Fee",vi:"Fee"},lang_des:{vi:"",en:""},codeHidden:"2016bef2e4e3edbe",inputtype:"cLayout",list_view:[{name:"M?u view",code:"code",codeHidden:"1aee1cb6ec37f32b",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Interest/fee/charge code",code:"ifccd",codeHidden:"a52314186a1a99a5",class:"",condition:"",ofgroup:"ifccd",class_ofgroup:"",role:""},config:{txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',useAction:"true",is_upperCase:"false",action:"",structable:"form_child.ifccd",structable_read:"form_child.ifccd",data_default:"",isLookup:"true",callform:"FO_DPT_CDPifccd",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_password:"false",is_upper:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"},{default:{name:"ifcname",code:"ifcname",codeHidden:"6230b0f3664a3530",class:"",condition:"",ofgroup:"ifccd",class_ofgroup:"",role:""},config:{action:"",structable:"form_child.ifcname",structable_read:"form_child.ifcname",data_default:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:""},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jLabel"},{default:{name:"Payment source",code:"paysrc",codeHidden:"033d396504dd7b26",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.paysrc",structable_read:"form_child.paysrc",cdlist:{query:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='PAYSRC' orderby c_cdlist.cdidx",cdgrp:"IFC",cdname:"PAYSRC"},data_default:"",data_mode:"cdlist",query_data:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='PAYSRC' orderby c_cdlist.cdidx",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:"[]",key_selected:"c_cdlist.cdid",useAction:"true"},role:{disabled:"",visible:"",other:"",other2:""},property:{},validate:{request:!1},lang:{ui:{vi:{"Payment source":"Payment source"},en:{"Payment source":"Payment source"}}},configAVD:{},inputtype:"jSelect"},{default:{name:"Value",code:"ifcval",codeHidden:"399d64cdf7409c9a",class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.ifcval",structable_read:"form_child.ifcval",data_default:"",format:"#,###.00",decimal_length:"5"},role:{visible:"",disabled:""},property:{},validate:{request:!1,min:0,max_length:16},lang:{},configAVD:{},inputtype:"jCurrency"},{default:{name:"Value Type",code:"valtype",codeHidden:"ef35ff134e49edbd",class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.valtype",structable_read:"form_child.valtype",cdlist:{query:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='VALTYPE' orderby c_cdlist.cdidx",cdgrp:"IFC",cdname:"VALTYPE"},data_default:"",data_mode:"cdlist",query_data:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='VALTYPE' orderby c_cdlist.cdidx",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:"[]",key_selected:"c_cdlist.cdid",useAction:"false"},role:{disabled:"",visible:"",other:"",other2:""},property:{},validate:{request:!1},lang:{ui:{vi:{"Value Type":"Value Type"},en:{"Value Type":"Value Type"}}},configAVD:{},inputtype:"jSelect"},{default:{name:"valtypect",code:"valtypect",codeHidden:"19aaddd5d0ee664c",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',useAction:"true",is_upperCase:"false",action:"",structable:"form_child.valtypect",structable_read:"form_child.valtypect",data_default:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_disabled:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"}]},{name:"M?u view",code:"code",codeHidden:"ed54c39ee7144f0b",inputtype:"cView",isTab:"false",class:"col-sm-12",list_input:[{default:{name:"Add",code:"btn_add",codeHidden:"p5685f65655469i59",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"default_save",txFoActions:'[\n    {\n        "function": "own_O9_fee.FeeAdd",\n        "status": "A",\n        "para": [\n            "form_child"\n        ]\n    }\n]',txFo:'[\n    {\n        "txcode": "#sys:fo-clearDataFormChild",\n        "input": {\n            "node_clear": "linkage_detail"\n        }\n    }\n]',useAction:"true",icon:"fa-plus",color:"primary",onTable:"",isMasterData:"false",tableMasterData:"word_typing",privateKeyTableMasterData:"id"},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{default:{name:"Apply",code:"btn_apply",codeHidden:"3261a21a29bfc6f5",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"",txFoActions:"",txFo:'[\n    {\n        "txcode": "fo-convert-dataFee-formchild",\n        "input": {}\n    }\n]',useAction:"false",icon:"fa-floppy-o",color:"success",onTable:"",isMasterData:"false",tableMasterData:"",privateKeyTableMasterData:""},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{default:{name:"",code:"table_fee",codeHidden:"p6d5o69he73n34",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.ifcfees",query_data:"ifcfees",paging_record:"5",columns:'[{ "code": "ifcfees.ifccd", "title": "IFC code",  "inputtype": "ColumnString",  "config": {}   }, { "code": "ifcfees.valtype",     "title": "Value type", "inputtype": "ColumnCdlist", "config": {"cdgrp": "IFC","cdname": "VALTYPE"}    },    {        "code": "ifcfees.ifcval",        "title": "Value",        "inputtype": "columnCurrency",        "config": {            "decimal_length": "5"        }    },    {        "code": "ifcfees.ifcbamt",        "title": "Fee",  "isSum": true,  "sumTitle": "Total Amount",        "inputtype": "columnCurrency",        "config": {            "decimal_length": "2"        }    },    {        "code": "ifcfees.flrval",        "title": "Floor",        "inputtype": "columnCurrency",        "config": {            "decimal_length": "2"        }    },    {        "code": "ifcfees.ceival",        "title": "Ceiling",        "inputtype": "columnCurrency",        "config": {            "decimal_length": "2"        }    },    {        "code": "ifcfees.ccrcd",        "title": "Currency",        "inputtype": "ColumnString",        "config": {}    }]'},role:{},property:{},validate:{},lang:{vi:{"IFC code":"IFC code","Value type":"Value type",Value:"Value",Fee:"Fee",Floor:"Floor",Ceiling:"Ceiling",Currency:"Currency"},en:{"IFC code":"IFC code","Value type":"Value type",Value:"Value",Fee:"Fee",Floor:"Floor",Ceiling:"Ceiling",Currency:"Currency"}},configAVD:{},inputtype:"jTableForm"}]},{name:"M?u view",code:"formchild",codeHidden:"1cacae7586c074d8",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Modify",code:"btn_modify",codeHidden:"p6d988np4t55480",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"default_view",txFoActions:'[\n    {\n        "function": "own_O9_fee.FeeModify",\n        "status": "A",\n        "para": [\n            "form_child"\n        ]\n    }\n]',txFo:'[\n    {\n        "txcode": "#sys:fo-selectDataFormChild",\n        "input": {\n            "node_set": "linkage_detail"\n        }\n    }\n]',useAction:"true",icon:"fa-edit",color:"warning",onTable:"table_fee",isMasterData:"true",tableMasterData:"word_typing",privateKeyTableMasterData:"id"},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{default:{name:"Remove",code:"btn_remove",codeHidden:"sp5555D4c33A84j",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"default_delete",txFoActions:'[\n    {\n        "function": "own_O9_fee.FeeRemove",\n        "status": "A",\n        "para": [\n            "ifcfees"\n        ]\n    }\n]',txFo:"[]",useAction:"true",icon:"fa-trash",color:"danger",onTable:"table_fee",isMasterData:"true",tableMasterData:"word_typing",privateKeyTableMasterData:"id"},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"}]}]}],react_txt:""};var St={error:[]};class Mt{static readComponentCode(e){return e.split(" ").join("")}static exceptionAuto(e,t,i){St.error.push({key:e,content:t,priority:i})}static getParaAPI(e){if("string"!==typeof e)return[];let t=[],i=new RegExp("{([^@{}]*)}","g"),o=i.exec(e);for(;o;)t.push({key:o[0],code:o[1]}),o=i.exec(e);return t}static getParaFunction(e){if("string"!==typeof e)return[];let t=[],i=new RegExp("\\((.*)\\)","g"),o=i.exec(e);for(;o;)t.push({key:o[0],code:o[1]}),o=i.exec(e);return t}}Mt.convertComponentType=e=>{switch(e.cpn_type){case"LBL":e.cpn_type="Label",e.cpn_name=e.api_main_node,e.value_type="Text";break;case"TXT":e.cpn_type="Text box",e.value_type="Text";break;case"CBO":e.cpn_type="Combo box";break;case"MKD":e.cpn_type="Date",e.value_type="Long Date",e.mask="DD/MM/YYYY";break;case"CCY":e.cpn_type="Currency",e.value_type="Number",e.mask=e.fdec+"";break;case"MKN":e.cpn_type="Number",e.value_type="Number",e.mask=e.mask.replace(/#/g,"_");break;case"MKT":e.cpn_type="MaskNumber",e.value_type="Text",e.mask=e.mask.replace(/#/g,"_");break;case"TET":e.cpn_type="Text box",e.value_type="Text",e.mask.length>0&&(e.cpn_type="MaskNumber",e.mask=e.mask.replace(/#/g,"_"));break;case"CHK":e.cpn_type="Check box"}return e},Mt.convertMask=e=>(""===e.mask&&0===e.cpn_type.indexOf("Mask")&&(e.cpn_type="Text box"),e),Mt.convertValuetype=(e,t)=>{let i=e.value_type;switch(i){case"J":e.value_type="Text",t&&null!==t&&void 0!==t&&t.cpn_child_name?e.cpn_type="Mutivalue":e.cpn_type="Text box";break;case"D":e.value_type="Long Date";break;case"C":e.value_type="Text";break;case"N":e.value_type="Number";break;case"L":e.value_type="";break;default:console.error(e,"convertValuetype==>",i)}return e},Mt.convertDefaultFO=e=>{let t=e.data_default||"";switch(t){case"#ADD_MONTHS(O9SYS.O9CORE.GETBUSDATE,12)":e.data_default='libDate_cal(${user_acc.workingdate},{"M":12})';break;case"#ADD_MONTHS(O9SYS.O9CORE.GETBUSDATE,1)":e.data_default='libDate_cal(${user_acc.workingdate},{"M":1})';break;case"#LAST_DAY(O9SYS.O9CORE.GETBUSDATE)":case"#O9CORE.GETBUSDATE":case"@O9BUSDATE":case"#O9SYS.O9CORE.GETBUSDATE":e.data_default="${user_acc.workingdate}";break;case"@CRRUSRCD":e.data_default="${user_acc.usrcode}";break;case"@CRRUSRID":e.data_default="${user_acc.usrid}";break;case"@CRRLGNAME":e.data_default="${user_acc.loginname}";break;case"@CRRBRID":e.data_default="${user_acc.branchid}";break;case"@CRRBRCD":e.data_default="${user_acc.branchcode}";break;default:(t.includes("%")||t.includes("@")||t.includes("#"))&&(console.log("error mask =>",t),"@CRRBCY"!==t&&console.log("row_json error===",e))}return e},Mt.convertRuleFunc=e=>{let t="",i=e.rulefunc;if(e.rulefunc)for(let o=0;o<i.length;o++){""!==t&&(t+="<br>");const e=i[o];t+=`${e.rule}(${JSON.stringify(e)})`}return e.function=t,e},Mt.convertMaxLength=e=>{let t=Number.parseInt(e.max_length);return e.min_value="",t<0?(e.max_length=-t,e.min_value=""):e.min_value=0,e.max_length=e.max_length.toString(),e.min_value=e.min_value.toString(),"descs"===e.key_name&&(e.max_length="250"),"caccount_name2"===e.key_name&&(e.max_length="250"),"account_name"===e.key_name&&(e.max_length="250"),e},Mt.convertOfGroup=e=>(e.mtdata&&"Yes"===e.mtdata&&(e.is_group=e.api_main_node),e.api_main_node&&0===e.api_main_node.indexOf("txb_")&&(e.is_group=e.api_main_node.replace("txb_","")),e),Mt.addComponentHidden=e=>e,Mt.convertFdec=e=>(e.fdec&&!isNaN(e.fdec)&&(e.cpn_type="Currency",e.mask=`#number.${e.fdec}`),e),Mt.convertDataFormFO=e=>{for(let a=0;a<e.length;a++){let s=e[a],n=e[a+1];var t,i,o;if("Button"!==s.cpn_type)null===(t=s)||void 0===t||!t.api_main_node||null===(i=s)||void 0===i||!i.key_name||null!==(o=s)&&void 0!==o&&o.cpn_name||(s.cpn_name=s.api_main_node),s=Mt.convertValuetype(s,n),s=Mt.convertComponentType(s),s=Mt.convertMask(s),s=Mt.convertDefaultFO(s),s=Mt.convertRuleFunc(s),s=Mt.convertMaxLength(s),s=Mt.convertOfGroup(s),s=Mt.convertFdec(s)}return e=Mt.addComponentHidden(e)},Mt.convertHtmlTableToArray=(e,t)=>{let i=e;i=Mt.convertDataFormFO(i);let o=[[t],[],[],[t],[t]],a=Dt;for(const s of i){let e=[];for(const t in a)if(a.hasOwnProperty(t)){const i=a[t];i>=0&&(s.hasOwnProperty(t)?("object"===typeof s[t]&&(s[t]=JSON.stringify(s[t])),e[i]=s[t].toString()):e[i]="")}o.push(e)}for(const s of o)for(let e=0;e<32;e++)s[e]||(s[e]="");return o},Mt.getCodeSmooth=e=>e=(e=(e=e.replace(/[\W]+/g," ")).toLowerCase().trim()).replace(/[\W]+/g,"_"),Mt.removeSpace=e=>e=e.replace(/ /g,""),Mt.convertArrayToJsonCPN=(e,t,i)=>{let o={};for(const a in Dt)if(Dt.hasOwnProperty(a)){const t=Dt[a];let s=e[i][t];o[a]=void 0!==s?s.trim():""}if(o.data_default=Mt.convertDataDefault(o.data_default),o.cpn_type=Mt.removeSpace(o.cpn_type),"Number"===o.cpn_type&&""!==o.mask&&(o.cpn_type="Currency"),o.api_main_node.includes("=")){let e=o.api_main_node.split("=");o.api_main_node=e[0].trim(),o.api_main_node_src=e[1].trim()}if(o.codeHidden=a.ZP.autoID(),""===o.key_name?o.component_code=Mt.getCodeSmooth(o.cpn_name+o.cpn_child_name):o.component_code=Mt.getCodeSmooth(o.key_name),""===o.api_main_node&&""===o.api_main_node_chil?o.table_node=Mt.getCodeSmooth(o.cpn_name+o.cpn_child_name):o.table_node=o.api_main_node+o.api_main_node_chil,""!==o.api_main_addr||""!==o.api_cpn_addr){let i=o.api_main_addr+o.api_cpn_addr,a=i.indexOf(" ");o.api_method=i.substring(0,a).trim(),o.request_url=i.replace(o.api_method,"").trim(),o.api_cpn_id=Mt.getCodeSmooth(e[0][0]+"_"+t+"_"+o.component_code+"_"+o.api_main_addr+o.api_cpn_addr)}return o.action_fo_name=Mt.removeSpace("Action"+o.cpn_type+o.cpn_name+o.cpn_child_name+"FormFO"),o.sum_name=o.cpn_name+o.cpn_child_name,"Mutivalue"===o.cpn_type&&(o.mutiform_code=Mt.getCodeSmooth(e[0][0]+"_"+o.component_code)),"Label"===o.cpn_type&&(o.no_modify="Yes"),o},Mt.convertTableToArrayJson=(e,t)=>{let i=[];for(let o=4;o<e.length;o++){let a=Mt.convertArrayToJsonCPN(e,t,o);i.push(a)}return i},Mt.getComponentWithName=(e,t)=>{for(let i=0;i<e.length;i++){const o=e[i];if(o.cpn_name===t)return o}console.error("Cant not find component --\x3e",t)},Mt.getComponentWithCode=(e,t)=>{for(let i=0;i<e.length;i++){const o=e[i];if(o.component_code===t)return o}console.error("Cant not find component --\x3e",t)},Mt.replaceRequestUrl=(e,t,i)=>{let o=e,a=Mt.getParaAPI(e);for(let s=0;s<a.length;s++){const e=a[s];let n=Mt.getComponentWithName(t,e.code);o=void 0!==n?o.replace(e.key,`@{${i}.${n.table_node}}`):o.replace(e.key,`@{${i}.${e.code}}`)}return o},Mt.buildMappingMainAPI=(e,t)=>{if(""===e.api_main_addr)return{};let i={},o="";for(let a=0;a<e.length;a++){const s=e[a];""!==s.api_main_node?(o=s.api_main_node,"Yes"!==s.no_modify&&!1===s.function.includes("auto create after save successfully")&&(i[o]=Mt.getMapFunction(e,a,o,t))):""!==s.api_main_node_chil&&("string"!==typeof i[o]&&void 0!==i[o]||(i[o]={}),"Yes"!==s.no_modify&&!1===s.function.includes("auto create after save successfully")&&(i[o][s.api_main_node_chil]=Mt.getMapFunction(e,a,o,t)||""))}return i},Mt.getMapFunction=(e,t,i,o)=>{let a=e[t];if(""!==a.cpn_child_name)switch(a.value_type){case"Text":case"Text Date":return`MapS.dataS(${o.table+"."+i+"."+a.api_main_node_chil})`;case"Number":return`MapS.dataN(${o.table+"."+i+"."+a.api_main_node_chil})`;case"Long Date":return`MapS.dateDDMMYYYY(${o.table+"."+i+"."+a.api_main_node_chil})`;default:console.error("Error MAP ====>",a)}else if(""!==a.api_main_node)switch(a.value_type){case"Text":return a.api_main_node_src?`MapS.Text${a.api_main_node_src}`:`MapS.dataS(${o.table+"."+a.api_main_node})`;case"Number":return a.api_main_node_src?`MapS.Number${a.api_main_node_src}`:`MapS.dataN(${o.table+"."+a.api_main_node})`;case"Long Date":return`MapS.dateDDMMYYYY(${o.table+"."+a.api_main_node})`;case"Text Date":return`MapS.dataS(${o.table+"."+a.api_main_node})`;default:return console.error("Error MAP ====>",a),`MapS.Error(data_login.${a.api_main_node})`}},Mt.countComponent=e=>{let t=0;for(let i=0;i<e.length;i++){let o=e[i];for(let e=0;e<o.list_view.length;e++){let i=o.list_view[e];for(let e=0;e<i.list_input.length;e++)t++}}return t},Mt.convertDataDefault=e=>{if(!1===e.includes("#"))return e;switch(e){case"#userbranch":return"${user_acc.branchid}";case"#usercode":return"${user_acc.usrcode}";case"#default_value":return"";default:return console.error("Error Default ====>",e),""}},Mt.convertCode=(e,t)=>{const i=/(\w+)/gm;let o,a=e;for(;null!==(o=i.exec(e));)o.index===i.lastIndex&&i.lastIndex++,t.includes(o[1].trim())&&(a=a.replace(o[1],`@{${o[1].toLocaleLowerCase()}}`));return a},Mt.convertSUBSTRING=e=>{const t=/SUBSTRING\((\w+),(\d+),(\d+)\)=(\w+)/gm;let i;for(;null!==(i=t.exec(e));)i.index===t.lastIndex&&t.lastIndex++,e=`'@{${i[1]}}'.substring(${i[2]},${i[3]})='@{${i[4]}}'`;return e},Mt.convertConditionVBtoJS=(e,t,i)=>{let o=t.split(";");if("string"!==typeof e||""===e)return"";e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/'NULL'/g," null ")).replace(/ AND /g," && ")).replace(/ OR /g," || ")).replace(/ and /g," && ")).replace(/ or /g," || ")).replace(/=/g," === ")).replace(/<>/g," !== ")).replace(/< ===/g," <= ")).replace(/=== >/g," >= ");let s=a.ZP.getArrayWithRegex(e,"(\\w+)");if(void 0!==s&&s.length>0)for(const _ of s){let t=_.key,i=_.code;if(o.includes(i.toLowerCase())){let o=!1,s=a.ZP.getArrayWithRegex(e,"'([^']*)'");for(const e of s){const t=a.ZP.getArrayWithRegex(e.code,"(\\w+)");for(const e of t)e.code.toLocaleLowerCase()===i.toLocaleLowerCase()&&(o=!0)}!1===o&&(e=e.replace(t,`@{${i.toLowerCase()}}`))}else e=!1===isNaN(i)&&""!==i?e.replace(t,i+""):e.replace(t,`${i}`)}let n=a.ZP.getArrayWithRegex(e,"CONTAINS\\(([^)]*)\\)");if(void 0!==n&&n.length>0)for(const a of n){let t=a.key,i=a.code;e=e.replace(t,`${i.split(",")[0].trim()}.split("|").includes('${i.split(",")[1].trim()}')===true`)}let r,l=/(@{[^'}]+})([ ]*===[ ]*null)/gm,c=e;for(;null!==(r=l.exec(e));)r.index===l.lastIndex&&l.lastIndex++,c=c.replace(r[1]+r[2],`!'${r[1]}'`);for(l=/(@{[^'}]+})([ ]*!==[ ]*null)/gm;null!==(r=l.exec(e));)r.index===l.lastIndex&&l.lastIndex++,c=c.replace(r[1]+r[2],`!!'${r[1]}'`);const d=/(@{[^'}]+})([ ]*===[ ]*')/gm;for(;null!==(r=d.exec(e));)r.index===d.lastIndex&&d.lastIndex++,c=c.replace(r[1]+r[2],`'${r[1]}'${r[2]}`);const h=/(@{[^'}]+})([ ]*!==[ ]*')/gm;let u=c;for(;null!==(r=h.exec(c));)r.index===h.lastIndex&&h.lastIndex++,u=u.replace(r[1]+r[2],`'${r[1]}'${r[2]}`);u=Mt.convertSubstring_1(u),u=Mt.convertSubstring_2(u),u=Mt.convertFloor(u);let p=a.ZP.getArrayWithRegex(u,"(@{[^}]+})");for(const a of p)u=u.replace(a.key,a.key.toLowerCase());if((null===i||void 0===i?void 0:i.length)>0){let e=a.ZP.getArrayWithRegex(u,"@{([^}]+)}");u=" "+u+" ";for(const t of e){let o=Mt.getComponentWithCode(i,t.code);void 0===o&&(console.log("string_cd==",e),console.log("data_arr_json==",i),console.log("cd====",t)),void 0!==o&&"Text"===o.value_type&&(u=u.replace(` ${t.key} `,` '${t.key}' `))}}return u=u.replace(/===/g,"=="),u},Mt.convertSubstring_1=e=>{const t=/SUBSTRING\(([^,]+),(\d+),(\d+)\) === (@{\w+})/gm;let i,o=e;for(;null!==(i=t.exec(e));)i.index===t.lastIndex&&t.lastIndex++,o=o.replace(i[0],`'${i[1]}'.substring(${i[2]},${i[3]}) === '${i[4]}'`);return o},Mt.convertSubstring_2=e=>{const t=/SUBSTRING\(([^,]+),(\d+),(\d+)\) === '/gm;let i,o=e;for(;null!==(i=t.exec(e));)i.index===t.lastIndex&&t.lastIndex++,o=o.replace(i[0],`'${i[1]}'.substring(${i[2]},${i[3]}) === '`);return o},Mt.convertFloor=e=>e.replace(/FLOOR/g,"Math.floor");class Pt{}Pt.validateFormName=(e,t)=>{""===e[0][0].trim()&&t.push({row:1,col:"A",content:"Can not blank"})},Pt.validateFormView=(e,t)=>{""===e[4][1].trim()&&""===e[4][2].trim()||t.push({row:4,col:"A",content:'View Name Only"'})},Pt.validCPNName=(e,t,i)=>{""===t[0].trim()&&""===t[1].trim()&&""===t[2].trim()&&t["System"!==Dt.value_type]&&i.push({row:e,col:"A|B|C",content:"Cant not blank all"})},Pt.validCPNType=(e,t,i)=>{""===t[Dt.cpn_type].trim()&&""===t[0]&&t["System"!==Dt.value_type]&&i.push({row:e,col:"",value:"",content:"Cant not determined Component type"})},Pt.validCPNCdlist=(e,t,i)=>{let o=t[Dt.cdlist];if(""===o.trim())return;o=o.replace(/\W+/g," ").trim();let s=o.split(" ");if(2!==s.length)return void i.push({row:e,col:"",value:o,content:"Cant not determined Cdlist"});let n=s[0].trim(),r=s[1].trim();0===a.ZP.data_cdList(r,n).length&&i.push({row:e,col:"",value:o,content:"Don't have data CDLIST"})},Pt.validateDataTable=(e,t)=>{if(void 0===e||0===e.length)return[{form_name:t,row:"",col:"",value:"",content:"Not find data"}];let i=[];Pt.validateFormName(e,i),Pt.validateFormView(e,i);for(let o=4;o<e.length;o++){const t=e[o];Pt.validCPNName(o,t,i),Pt.validCPNType(o,t,i)}return i.forEach((e=>{void 0===e.form_name&&(e.form_name=t)})),i};const Tt=Pt;const It=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot();return n.inputtype="cTextInput",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:this.buildClass(a),condition:"",role:"",ofgroup:a.is_group},n.config={action:"",structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:""},n.validate={request:"Yes"===a.required,min:""===a.min_value?void 0:parseInt(a.min_value),max:""===a.max_length?void 0:parseInt(a.max_length)},"descs"===n.default.component_code&&Number(n.validate.max)<100&&(n.validate.max="100"),n},this.buildClass=e=>{let t=e.max_length;return""===t||(t=parseInt(t)),"col-sm-12 col-md-6"}}};const Nt=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i];let n=Mt.getComponentWithName(e,"Search")||{},r=[{txcode:"#sys:fo-delete-dataAPI",input:{table_code:s.table,table_col_key:"",learn_api:a.api_cpn_id,learn_api_search:n.api_cpn_id}}];return JSON.stringify(r)}}};const Ft=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i];let n=[{txcode:"#sys:fo-search-API",input:{list_component:a.component_code,list_view:"code",table_code:s.table,learn_api:a.api_cpn_id}}];return JSON.stringify(n)}}};const Lt=class{constructor(){this.build=(e,t,i,o)=>{let a="",s=o.Add;void 0!==s&&(a=s.form_code);let n=[{txcode:"#sys:fo-open-form",input:{form_key:a}}];return JSON.stringify(n)}}};const Et=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i];let n="",r=o.View;void 0!==r&&(n=r.form_code);let l=[{txcode:"#sys:fo-view-openForm",input:{table_code:s.table,table_col_key:"",form_key:n,learn_api:a.api_cpn_id}}];return JSON.stringify(l)}}};const jt=class{constructor(){this.build=(e,t,i,o)=>{o.Add;return JSON.stringify([{txcode:"#sys:fo-form-clear",input:{}}])}}};const Zt=class{constructor(){this.build=(e,t,i,o)=>{const a=o[i];let s=[{txcode:"#sys:fo-copy-thisForm",input:{listDelete:this.buildListDelete(e,a)}}];return JSON.stringify(s)},this.buildListDelete=(e,t)=>{let i="";for(const o of e)o.function.includes("auto create after save successfully")&&(i+=t.table+"."+o.api_main_node+";");return i}}};const Rt=class{constructor(){this.build=(e,t,i,o)=>{let a="",s=o.Search;void 0!==s&&(a=s.form_code);let n=[{txcode:"#sys:fo-open-form",input:{form_key:a}}];return JSON.stringify(n)}}};const Qt=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t];let s=[{txcode:"#sys:fo-create-dataAPI",input:{list_component:"*",list_view:"",table_code:o[i].table,learn_api:a.api_cpn_id}}];return JSON.stringify(s)}}};const zt=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t];let s=[{txcode:"#sys:fo-create-dataAPI",input:{list_component:"*",list_view:"",table_code:o[i].table,learn_api:a.api_cpn_id}}];return JSON.stringify(s)}}};const Ut=class{constructor(){this.build=(e,t,i,o)=>{const a=o[i];let s="",n=o.Add;void 0!==n&&(s=n.form_code);let r=[{txcode:"#sys:fo-copy-thisForm",input:{listDelete:this.buildListDelete(e,a),form_code:s}}];return JSON.stringify(r)},this.buildListDelete=(e,t)=>{let i="";for(const o of e)o.function.includes("auto create after save successfully")&&(i+=t.table+"."+o.api_main_node+";");return i}}};const Bt=class{constructor(){this.build=(e,t,i,o)=>{let a="",s=o.Search;void 0!==s&&(a=s.form_code);let n=[{txcode:"#sys:fo-open-form",input:{form_key:a}}];return JSON.stringify(n)}}};const Yt=class{constructor(){this.build=(e,t,i,o)=>{let a="",s=o.Add;void 0!==s&&(a=s.form_code);let n=[{txcode:"#sys:fo-open-form",input:{form_key:a}}];return JSON.stringify(n)}}};const Ht=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t];let s=[{txcode:"#sys:fo-create-dataAPI",input:{list_component:"*",list_view:"",table_code:o[i].table,learn_api:a.api_cpn_id}}];return JSON.stringify(s)}}};const Vt=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t];let s=[{txcode:"fo-create-dataAPI-sanction",input:{list_component:"*",list_view:"",table_code:o[i].table,learn_api:a.api_cpn_id,check_sanction_api:"O9_check_sanction",check_sanction_rules:this.buildCheckSanctionRule(a)}}];return JSON.stringify(s)},this.buildCheckSanctionRule=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(JSON.parse(e.rulefunc)||[]).map((e=>({value:e.value,error:e.error})))}}};const Wt={ActionButtonSearchFormSearch:Ft,ActionButtonDeleteFormSearch:Nt,ActionButtonAddFormSearch:Lt,ActionButtonSearchFormAdd:Rt,ActionButtonCopyFormAdd:Zt,ActionButtonClearFormAdd:jt,ActionButtonSaveFormAdd:Qt,ActionButtonViewFormSearch:Et,ActionButtonAcceptFormAdd:zt,ActionButtonCopyFormView:Ut,ActionButtonSearchFormView:Bt,ActionButtonAddFormView:Yt,ActionButtonSaveFormView:Ht,ActionButtonAcceptFormFO:Vt,ActionButtonClearFormFO:class{constructor(){this.build=(e,t,i,o)=>{o.Add;return JSON.stringify([{txcode:"#sys:fo-form-clear",input:{}}])}}}};const Gt=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot(),r=a.cpn_name+a.cpn_child_name;n.default={name:r,code:a.component_code,codeHidden:a.codeHidden,class:"",condition:"",role:""};let l=wt[r]||{};return n.config={useAction:"false",action:"",structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:"",color:l.color||"",icon:l.icon||"",txFo:this.buidTxFO(e,t,i,o),onTable:this.buildOnTable(e,t,i,o)},n.inputtype="cButton",n.config.onTable&&(n.default.class="",n.default.name=""),n},this.buildOnTable=(e,t,i,o)=>{const a=e[t];let s=Mt.getParaFunction(a.function);if(s.length>0){let t=Mt.getComponentWithName(e,s[0].code);if(void 0!==t)return t.component_code}return""},this.buidTxFO=(e,t,i,o)=>{const a=e[t];if(Wt[a.action_fo_name]){return(new Wt[a.action_fo_name]).build(e,t,i,o)}}}};const Jt=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i].table;return this.component_config=Ot(),this.component_config.inputtype="jTableForm",this.component_config.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-12",condition:"",role:""},this.component_config.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,query_data:`${s}.${a.component_code}`,columns:this.getListCol(e,t+1,s,a)},this.component_config},this.getListCol=(e,t,i,o)=>{let a=[],s=e[t];for(;void 0!==s&&""===s.cpn_name&&""!==s.cpn_child_name;)a.push(this.buildColConfig(e,t,i,o)),s=e[++t];return JSON.stringify(a)},this.buildColConfig=(e,t,i,o)=>{let a=e[t],s={code:o.component_code+"."+a.table_node,title:a.cpn_child_name,inputtype:"ColumnString",config:{}};switch(a.cpn_type){case"TableColMedia":s.inputtype="columnImg";break;case"TableColMask":s.config.mask=a.mask,s.inputtype="columnMask";break;case"Currency":s.inputtype="columnCurrency"}return s}}};const qt=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot();return n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:a.is_group},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,data_type:"edit",mask_format:a.mask,mask_data_format:"",value_type:"all",mask_mode:"default"},n.validate={request:"Yes"===a.required},n.inputtype="jMaskInput",n}}};const Kt=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot();return n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:a.is_group},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,data_type:"edit",mask_format:a.mask,mask_data_format:"",value_type:"number",mask_mode:"default"},n.validate={request:"Yes"===a.required},n.inputtype="jMaskInput",("from_serial"===a.component_code||"to_serial"===a.component_code||a.mask.includes("AA"))&&(n.config.value_type="all",n.config.mask_format=n.config.mask_format.replace(">AA","__"),n.config.mask_format=n.config.mask_format.replace("AA","__")),n}}};const Xt=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot();return n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:a.is_group},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,data_type:"edit",mask_format:a.mask,mask_data_format:"YYYY-MM-DD",value_type:"number",mask_mode:"date"},n.validate={request:"Yes"===a.required},n.inputtype="jMaskInput",n}}};const $t=class{constructor(){this.build=(e,t,i,o)=>""!==e[t].api_cpn_addr?this.buildAPI(e,t,i,o):this.buildCdlist(e,t,i,o),this.buildAccountListO9=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot();return n.inputtype="jSelect",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:a.is_group},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,data_mode:"query",cdlist:{query:"",cdgrp:"",cdname:""},is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",col_format:"@c_cdlist.caption",table_format:"",key_selected:"c_cdlist.cdid",json_data:"[]"},n.validate={request:"Yes"===a.required,min:a.min_value,max:a.max_length},n},this.buildCdlist=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot(),r=a.cdlist;r=r.replace(/\W+/g," "),r=r.trim();let l=r.split(" "),c="",d="";return 2===l.length&&(c=l[1].trim(),d=l[0].trim()),n.inputtype="jSelect",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:""},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,data_mode:""!==a.cdlist?"cdlist":"query",cdlist:{query:`select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='${c}'&&wf.c_cdlist.cdname==='${d}'`,cdgrp:c,cdname:d},is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",col_format:"@c_cdlist.caption",table_format:'[\n                {\n                    "title": "Name",\n                    "code": "c_cdlist.caption"\n                },\n                {\n                    "title": "ID",\n                    "code": "c_cdlist.cdid"\n                }\n            ]',key_selected:"c_cdlist.cdid",json_data:"[]"},n.validate={request:"Yes"===a.required,min:a.min_value,max:a.max_length},n},this.buildAPI=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot();return n.inputtype="jSelect",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:""},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,data_mode:"query",query_data:`select * from ${a.component_code}`,is_multi_select:"false",is_multi_col:"false",get_data_format:`${a.component_code}.cdid`,selected_view_format:`@${a.component_code}.caption`,col_format:`@${a.component_code}.caption`,table_format:"[]",key_selected:`${a.component_code}.cdid`,json_data:"[]"},n.validate={request:"Yes"===a.required,min:a.min_value,max:a.max_length},n}}};const ei=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot();return n.inputtype="jMutiValue",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-12",condition:"",role:""},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:"",callform:a.mutiform_code,is_open:"false",has_default:"false"},n.validate={},n}}};const ti=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot();return n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:a.is_group},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,decimal_length:this.getRounding(a.mask),format:"#,###.00"},n.validate={request:"Yes"===a.required,max:a.max_value,min:a.min_value,max_length:a.max_length},n.inputtype="jCurrency",n},this.getRounding=e=>e.includes("#number")?e.split(".")[1]:e}};const ii=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot();return n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:a.is_group},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,decimal_length:"0",format:"#,###.00"},n.validate={request:"Yes"===a.required,min:a.min_value,max:a.max_value,max_length:a.max_length},n.inputtype="jCurrency",n},this.getRounding=e=>e.includes("#number")?e.split(".")[1]:e}};const oi=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot();return n.inputtype="jCheckbox",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:this.buildClass(a),condition:"",role:""},n.config={structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default},n.validate={request:"Yes"===a.required,min:a.min_value,max:a.max_length},n},this.buildClass=e=>{let t=e.max_length;return""===t?"col-sm-12 col-md-3":(t=parseInt(t),t>=100?"col-sm-12 col-md-6":"col-sm-12 col-md-3")}}};const ai=class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot();return n.inputtype="jLabel",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:this.buildClass(a),condition:"",role:"",ofgroup:a.is_group},n.config={action:"",structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default},n.validate={min:a.min_value,max:a.max_length},n},this.buildClass=e=>"col-sm-12 col-md-3"}};const si={Textbox:It,Button:Gt,Table:Jt,MaskText:qt,Date:Xt,Combobox:$t,Mutivalue:ei,Currency:ti,Number:ii,MaskNumber:Kt,Checkbox:oi,Label:ai,Lookup:class{constructor(){this.build=(e,t,i,o)=>{const a=e[t],s=o[i].table;let n=Ot();return n.inputtype="cTextInput",n.default={name:a.cpn_name+a.cpn_child_name,code:a.component_code,codeHidden:a.codeHidden,class:this.buildClass(a),condition:"",role:"",ofgroup:a.is_group},n.config={action:"",structable:s+"."+a.table_node,structable_read:s+"."+a.table_node,data_default:a.data_default,isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:""},n.validate={request:"Yes"===a.required,min:""===a.min_value?void 0:parseInt(a.min_value),max:""===a.max_length?void 0:parseInt(a.max_length)},n},this.buildClass=e=>{let t=e.max_length;return""===t?"col-sm-12 col-md-3":(t=parseInt(t),t>=100?"col-sm-12 col-md-6":"col-sm-12 col-md-3")}}}};const ni=class{constructor(){this.build=(e,t,i)=>{let o=i.table,a=i.name_input;const s=e[t];let n={},r=Date.now(),l=s.api_cpn_id;if(void 0!==l&&""!==l)return n={learn_api_name:o+" "+s.cpn_child_name+s.cpn_name+" "+a,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+Mt.replaceRequestUrl(s.request_url,e,o),learn_api_data:o,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:s.api_method,learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:this.buildMapping(e,t,i),learn_api_id:l,AFGHkeyIndexWJ:l,AFGHkeyTime:r,AFGHkeyWorkFlow:"",AFGHTimeWJ:r,app_code:"o9_fo",save_to:this.build_save_to(s)},n},this.build_save_to=e=>{switch(e.cpn_type){case"Table":return"form";case"Combobox":return"client"}},this.buildMapping=(e,t,i)=>{if(""===e[t].api_main_addr)return"{}";let o=Mt.buildMappingMainAPI(e,i);return"btn_accept"===e[t].component_code&&(o.approverid="MapS.dataN(user_approve.usrid)"),JSON.stringify(o)}}};const ri=class{constructor(){this.build=(e,t,i)=>{let o=i.table,a=i.name_input;const s=e[t];let n={},r=Date.now(),l=s.api_cpn_id;if(void 0!==l&&""!==l)return n={learn_api_name:o+" "+s.cpn_child_name+s.cpn_name+" "+a,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+Mt.replaceRequestUrl(s.request_url,e,o),learn_api_data:o,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:s.api_method,learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:this.buildMapping(e,t,i),learn_api_id:l,AFGHkeyIndexWJ:l,AFGHkeyTime:r,AFGHkeyWorkFlow:"",AFGHTimeWJ:r,app_code:"o9",save_to:this.build_save_to(s)},n},this.build_save_to=e=>{switch(e.cpn_type){case"Table":return"form";case"Combobox":return"client"}},this.buildMapping=(e,t,i)=>{if(""===e[t].api_main_addr)return"{}";return JSON.stringify(Mt.buildMappingMainAPI(e,i))},this.buildLearnAPIdata=()=>{}}};const li=class{constructor(){this.build=(e,t,i)=>{let o=i.table,a=i.name_input;const s=e[t];let n={},r=Date.now(),l=s.api_cpn_id;if(void 0!==l&&""!==l)return n={learn_api_name:o+" "+a+"-"+s.cpn_child_name+s.cpn_name,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+Mt.replaceRequestUrl(s.request_url,e,o),learn_api_data:this.buildLearnAPIdata(s,o),learn_api_node_data:""!==s.node_data?s.node_data:"data",learn_api_app:"BO",learn_api_method:s.api_method,learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:"",learn_api_id:l,AFGHkeyIndexWJ:l,AFGHkeyTime:r,AFGHkeyWorkFlow:"",AFGHTimeWJ:r,app_code:"o9",save_to:this.build_save_to(s)},n},this.build_save_to=e=>{switch(e.cpn_type){case"Table":return"form";case"Combobox":return"client"}},this.buildLearnAPIdata=(e,t)=>""!==e.api_main_addr||"Button"===e.cpn_type?t:e.component_code}};const ci={POST:ni,PUT:ri,GET:li,DELETE:class{constructor(){this.build=(e,t,i)=>{let o=i.table,a=i.name_input;const s=e[t];let n={},r=Date.now(),l=s.api_cpn_id;if(void 0!==l&&""!==l)return n={learn_api_name:o+" "+s.cpn_child_name+s.cpn_name+" "+a,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+Mt.replaceRequestUrl(s.request_url,e,o),learn_api_data:o,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:s.api_method,learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:"",learn_api_id:l,AFGHkeyIndexWJ:l,AFGHkeyTime:r,AFGHkeyWorkFlow:"",AFGHTimeWJ:r,app_code:"o9",save_to:this.build_save_to(s)},n},this.build_save_to=e=>{switch(e.cpn_type){case"Table":return"form";case"Combobox":return"client"}}}}};const di={AUTO_CLEAR_FEE:class{constructor(){this.build=(e,t,i,o)=>{let a=e[t],s=this.buildCondition(e,t,i,o);return{rule_config:{code:"runFo",config:{component_action:a.component_code,component_event:"enter_tab",txFoActions:'[{"function": "own_O9_fee.autoClearFee","status": "A","para": ["'+s.component_result+'"]}]',useAction:"true",condition:"'@{ref_id}' === \"\"",component_result:""},isStart:!1,inUse:!0,order:1}}},this.buildCondition=(e,t,i,o)=>{let s=Mt.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";return{content:n,component_result:(a.ZP.parseJson(n)||{}).relf+";form_fee;form_fee(table_fee)"}}}},startDisable:class{constructor(){this.build=(e,t)=>({code:"visibility",config:{component_event:"on_change",component_action:"",component_result:this.buildComponentResult(e),condition:"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!0,inUse:!0,order:1}),this.buildComponentResult=e=>{let t="";for(let i=0;i<e.length;i++){const o=e[i];"Yes"!==o.disable&&"Yes"!==o.no_modify||(t+=o.component_code+";")}return t}}},startHidden:class{constructor(){this.build=(e,t)=>({code:"visibility",config:{component_event:"on_change",component_action:"",component_result:this.buildComponentResult(e)+";errorJWebUI_code;ref_id;btn_printVoucher",condition:"",visible:"false",ena_dis:"not_use",view_result:""},isStart:!0,inUse:!0,order:1}),this.buildComponentResult=e=>{let t="";for(let i=0;i<e.length;i++){const o=e[i];"Yes"===o.hidden&&(t+=o.component_code+";")}return t}}},startModify:class{constructor(){this.build=(e,t)=>({code:"visibility",config:{component_event:"on_click",component_action:this.buildComponenAction(e),component_result:this.buildComponentResult(e),condition:"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:1}),this.buildComponentResult=e=>{let t="";for(let i=0;i<e.length;i++){const o=e[i];"Yes"===o.disable&&"Yes"!==o.no_modify&&(t+=o.component_code+";")}return t},this.buildComponenAction=e=>{for(let t=0;t<e.length;t++){const i=e[t];if("Modify"===i.cpn_name)return i.component_code}return""}}},only:class{constructor(){this.build=(e,t,i,o)=>{let a=e[t],s=this.buildCondition(e,t,i,o);return{code:"managerComponent",config:{component_event:"on_change",component_action:s.component_action,is_use_block:"false",component_manager:JSON.stringify({[a.component_code]:s.content})},isStart:!0,inUse:!0,order:1}},this.buildCondition=(e,t,i,o)=>{let s=Mt.getParaFunction(o)||[];if(0===s.length)return{content:o};let n=s[0].code||"",r=n.split("AND"),l="";for(let c of r){let o="",s="";c.includes("#")?(o=c.split("#")[0].trim(),s=c.split("#")[1].trim()):c.includes("=")&&(o=c.split("=")[0].trim(),s=c.split("=")[1].trim());let r=Mt.getComponentWithName(e,o)||{},d=r.component_code||o,h=[],u=s;if(void 0!==r.cdlist&&""!==r.cdlist){let e=r.cdlist.split(",");h=a.ZP.data_cdList(e[1].trim(),e[0].trim());let o=!1;for(let t=0;t<h.length;t++){const e=h[t];e.c_cdlist.caption.toLowerCase()===s.trim().toLowerCase()&&(u=e.c_cdlist.cdid,o=!0)}!1===o&&console.error(i.name_input,"--\x3e",t,"Not Find==>",s)}n=n.replace(o,`'@{${d}}'`),n=n.replace(s,`'${u}'`);let p=r.cdlist||"";p=p.replace(",",";"),l+=d+";"}return n=n.replace(/=/g,"==="),n=n.replace(/#/g,"!=="),n=n.replace(/ AND /g,"&&"),{content:n,component_action:l}}}},auto_create_after_save_successfully:class{constructor(){this.build=(e,t,i,o)=>[this.buildUndisableRule(e,t,i,o),this.buildDisableRule(e,t,i,o)],this.buildUndisableRule=(e,t,i,o)=>{let a=e[t];return{code:"visibility",config:{component_event:"on_change",component_action:a.component_code,component_result:"copy",condition:`'@{${a.component_code}}'!==""`,visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:1}},this.buildDisableRule=(e,t,i,o)=>{let a=e[t];return{code:"visibility",config:{component_event:"on_change",component_action:a.component_code,component_result:"*;clear;save",condition:`'@{${a.component_code}}'!==""`,visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:1}}}},this_is_parent_of:class{constructor(){this.build=(e,t,i,o)=>{let a=this.buildContext(e,t,i,o);return{code:"setDataGB",config:{component_event:"on_change",component_action:a.component_action,component_result:a.component_result,data_type:a.data_type,query:a.query,filter_condition:a.filter_condition},isStart:!0,inUse:!0,order:1}},this.buildContext=(e,t,i,o)=>{let a,s=e[t],n=Mt.getParaFunction(o)[0]||{};n=n.code||"",n=n.trim();for(let l=t;l<e.length;l++){const t=e[l];if(t.sum_name===n){a=t;break}}if(void 0===a)return{};let r=a.cdlist;return r=r.replace(/\W/g," "),r=r.trim(),r=r.replace(" ",";"),{component_action:s.component_code,component_result:a.component_code,data_type:"query",query:r,filter_condition:this.filter_condition(r,s)}},this.filter_condition=(e,t)=>{let i=["DISTRICT","COMMUNE","VILLAGE"];for(const o of i)return e.includes(o)?`{ "c_cdlist.cdid": "^@{${t.component_code}}\\\\w{2,2}$" }`:`{ "c_cdlist.cdid": "^@{${t.component_code}}" }`}}},errorJWebUI:class{constructor(){this.build=(e,t,i,o)=>[this.buildUndisableRule(e,t,i,o),this.buildDisableRule(e,t,i,o)],this.buildUndisableRule=(e,t,i,o)=>({code:"visibility",config:{component_event:"on_change",component_action:"errorJWebUI_code",component_result:"copy",condition:"'@{errorJWebUI_code}'==\"0\"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:1}),this.buildDisableRule=(e,t,i,o)=>({code:"visibility",config:{component_event:"on_change",component_action:"errorJWebUI_code",component_result:"*;clear;save",condition:"'@{errorJWebUI_code}'==\"0\"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:1})}},startClear:class{constructor(){this.build=(e,t)=>({code:"visibility",config:{component_event:"on_click",component_action:this.buildComponenAction(e),component_result:this.buildComponentResult(e)+";btn_accept",condition:"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:1}),this.buildComponentResult=e=>{let t="";for(let i=0;i<e.length;i++){const o=e[i];"Yes"!==o.disable&&(t+=o.component_code+";")}return t},this.buildComponenAction=e=>{for(let t=0;t<e.length;t++){const i=e[t];if("Clear"===i.cpn_name)return i.component_code}return""}}},GET_SIG:class{constructor(){this.build=(e,t,i,o)=>{let a=e[t],s=this.buildCondition(e,t,i,o);const n=a.component_code;let r={default:{name:n+"sign",code:n+"sign",codeHidden:"f9df3c6d3aecec48",class:"",condition:"",ofgroup:a.component_code,class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"",structable:"table.col",structable_read:"",data_default:"",api_id:s.api_config.learn_api_id,api_map_data:s.api_config.learn_api_data},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jSignature"};return{rule_config:{code:"getInfo",config:{component_event:"enter_tab",component_action:a.component_code,component_result:`{"${n}sign":"${s.api_config.learn_api_data}.MEDIA"}`,isSetCode:"true",data_type:"api",api_id:s.api_config.learn_api_id,sql_id:"",data_table:"",exception:"",api_bo:"",sql_bo:"",data_bo:""},inUse:!1,order:1,isStart:!1},api_config:s.api_config,new_component:r}},this.buildCondition=(e,t,i,o)=>{let s=Mt.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};return{api_config:this.buildAPI(r,e,t,i)}},this.buildAPI=(e,t,i,o)=>{const a=e.api,s=Mt.getCodeSmooth(a.split(" ")[1]);let n=this.buildMapping(t,i,o),r=e.data.split(";"),l={};return r.forEach((e=>{n[e]?l[e]=n[e]:l.MDL=e.toUpperCase()})),{learn_api_name:s,learn_api_link:`$API_SERVER$:$API_PORT_DATA$/${a.split(" ")[1]}`,learn_api_data:s,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:a.split(" ")[0],learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(l),learn_api_id:s,AFGHkeyIndexWJ:s,AFGHkeyTime:1577163079652,AFGHkeyWorkFlow:"",AFGHTimeWJ:1577163079974,app_code:"o9"}},this.buildMapping=(e,t,i)=>Mt.buildMappingMainAPI(e,i),this.converMaplogin=e=>{switch(e){case"crrbrid":return"branchid";case"crrbrcd":return"branchcode";case"o9busdate":return"workingdate";case"crrusrid":return"usrid";case"crruser_code":return"usrcode";case"crrlgname":return"loginname";default:console.log("Key error=>",e)}}}},GET_INFO:class{constructor(){this.checkIsStart=(e,t)=>{let i=!1;for(const o of e){o.component_code===t&&"Combobox"===o.cpn_type&&(i=!0)}return i},this.build=(e,t,i,o)=>{let a=e[t],s=this.buildCondition(e,t,i,o),n="'@{ref_id}' === \"\"";return s.condition&&(n+=" && ("+s.condition+")"),{rule_config:{code:"getInfo",config:{component_event:"enter_tab",component_action:a.component_code,component_result:s.component_result,isSetCode:"true",data_type:"api",api_id:s.api_config.learn_api_id,condition:n,isAutoDefault:s.isAutoDefault},isStart:this.checkIsStart(e,a.component_code),isDidStart:this.checkIsStart(e,a.component_code),inUse:!0,order:s.index},api_config:s.api_config}},this.buildCondition=(e,t,i,o)=>{let s=Mt.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};let l=this.buildAPI(r,e,t,i),c=r.relf.split(";"),d={};return c.forEach((e=>{d[e]=l.learn_api_data+"."+e})),{condition:Mt.convertConditionVBtoJS(r.actcdt,r.ftags,e),component_result:JSON.stringify(d),api_config:l,index:r.index,isAutoDefault:"Yes"===r.is_set_default}},this.buildAPI=(e,t,i,o)=>{const a=e.api,s=Mt.getCodeSmooth(a.split(" ")[1]);let n=this.buildMapping(t,i,o),r=e.data.split(";"),l={};r.forEach((e=>{n[e]?l[e]=n[e]:void 0!==this.converMaplogin(e)&&(l[e]=`MapS.context(${this.converMaplogin(e)})`)})),"ifccd"===t[i].key_name&&l.ifccd&&(l.ifccd=l.ifccd.replace(`${o.table}.ifccd`,"form_child.ifccd"));let c=o.form_code+"_"+s;return{learn_api_name:c,learn_api_link:`$API_SERVER$:$API_PORT_DATA$/${a.split(" ")[1]}`,learn_api_data:o.form_code+s,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:a.split(" ")[0],learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(l),learn_api_id:c,AFGHkeyIndexWJ:c,AFGHkeyTime:1577163079652,AFGHkeyWorkFlow:"",AFGHTimeWJ:1577163079974,app_code:"o9"}},this.buildMapping=(e,t,i)=>Mt.buildMappingMainAPI(e,i),this.converMaplogin=e=>{switch(e){case"crrbrid":return"branchid";case"crrbrcd":return"branchcode";case"o9busdate":return"workingdate";case"crrusrid":return"usrid";case"crruser_code":return"usrcode";case"crrlgname":return"loginname";default:console.log("Key error=>",e)}}}},LKP_DATA:class{constructor(){this.build=(e,t,i,o)=>{let s=e[t],n=this.buildContent(e,t,i,o);for(this.lookup_form='{"info":{"title":"@{key_form}_lookup","des":"@{key_form}_lookup","data":"","learnapi":"@{learnapi}","learnsql":"","openOne":"true","node_position":[],"flow_layout":[],"form_code":"@{key_form}","ruleStrong":[{"code":"runFo","config":{"component_action":"search_input","component_result":"","component_event":"enter","txFoActions":"","txFo":"[{\\"txcode\\":\\"#sys:fo-search-API\\",\\"input\\":{\\"list_component\\":\\"*\\",\\"list_view\\":\\"code\\",\\"table_code\\":\\"@{key_form}\\",\\"learn_api\\":\\"@{learnapi}\\"}}]","useAction":"false","condition":""},"inUse":true,"order":1,"isStart":true}],"key_form":"@{key_form}","ofModal":false,"bodata":""},"list_layout":[{"name":"","des":"","class":"","codeHidden":"@{codeHidden}","inputtype":"cLayout","list_view":[{"name":"","code":"code","codeHidden":"@{codeHidden}","inputtype":"cView","isTab":"false","list_input":[{"default":{"name":"Search","code":"search_input","class":"col-xl-9 col-lg-9 col-md-8 col-sm-8","role":"","condition":"","ofgroup":"","class_ofgroup":"col-sm-12 col-md-12","codeHidden":"01df544303b8bc4a"},"config":{"useAction":"true","txFoActions":"[\\n    {\\n        \\"function\\": \\"\\",\\n        \\"status\\": \\"A\\",\\n        \\"para\\": []\\n    }\\n]","txFo":"[\\n    {\\n        \\"txcode\\": \\"\\",\\n        \\"input\\": {}\\n    }\\n]","structable":"lookup.search_input","structable_read":"lookup.search_input","data_default":"","isLookup":"false","is_upperCase":"false","callform":"","callform_detail":"","callform_detail_mode":"modal","data_view":"","data_value":"","is_password":"false","is_upper":"false","action":"","autoWrap":"false","isSearch":"true"},"role":{"visible":"","disabled":""},"property":{},"validate":{"request":false,"min":"","max":"","regex_format":"","validate_html":"true"},"lang":{"vi":"","en":""},"configAVD":{},"inputtype":"cTextInput"},{"config":{"onTable":"","icon":"fa-search","color":"primary","action":"","useAction":"false","txFoActions":"[]","txFo":"[{\\"txcode\\":\\"#sys:fo-search-API\\",\\"input\\":{\\"list_component\\":\\"*\\",\\"list_view\\":\\"code\\",\\"table_code\\":\\"@{key_form}\\",\\"learn_api\\":\\"@{learnapi}\\"}}]","isMasterData":"false","tableMasterData":"","privateKeyTableMasterData":"","isLookup":"","cmd":"","callform":"","uploadfile":{"active":"false","filetype":""}},"role":{"visible":"","disabled":""},"property":{},"validate":{"request":false},"lang":{"vi":"","en":""},"configAVD":{},"inputtype":"cButton","default":{"name":"Search","code":"search_button","class":"","role":"","condition":"","ofgroup":"","class_ofgroup":"col-sm-12 col-md-12","codeHidden":"ed4481f418acd092"}},{"default":{"name":"","code":"view","codeHidden":"@{codeHidden}","class":"","condition":"","ofgroup":"false","class_ofgroup":"col-sm-12col-md-12","role":""},"config":{"action":"","txFoActions":"[{\\"function\\":\\"\\",\\"status\\":\\"A\\",\\"para\\":[]}]","txFo":"[{\\"txcode\\":\\"#sys:fo-lookup-selectData\\",\\"input\\":{}}]","useAction":"false","icon":"fa-hand-o-right","color":"info","onTable":"table_name","isMasterData":"false","tableMasterData":"","privateKeyTableMasterData":""},"role":{"visible":"","disabled":""},"property":{"danger":"","warning":""},"validate":{},"lang":{},"configAVD":{},"inputtype":"cButton"}]},{"name":"Search","code":"code","codeHidden":"@{codeHidden}","inputtype":"cView","isTab":"false","list_input":[{"config":{"structable":"","structable_read":"","query_data":"select * from @{learnapi}","columns":"[{\\"code\\":\\"@{learnapi}.0\\",\\"title\\":\\"Code\\",\\"inputtype\\":\\"ColumnString\\",\\"config\\":{}},{\\"code\\":\\"@{learnapi}.1\\",\\"title\\":\\"Name\\",\\"inputtype\\":\\"ColumnString\\",\\"config\\":{}}]"},"role":{"visible":"","disabled":""},"property":{},"validate":{"request":false},"lang":{},"configAVD":{},"inputtype":"cTableDefault","default":{"name":"","code":"table_name","codeHidden":"@{codeHidden}","class":"col-sm-12col-md-12","condition":"","role":""}}]}]}],"react_txt":""}';!0===this.lookup_form.includes("@{codeHidden}");)this.lookup_form=this.lookup_form.replace("@{codeHidden}",a.ZP.autoID());this.lookup_form=this.lookup_form.replace(/@{key_form}/g,i.form_code+s.component_code),this.lookup_form=this.lookup_form.replace(/@{learnapi}/g,n.API.learn_api_data);let r={isLookup:"true",callform:i.form_code+s.component_code,callform_detail:"",callform_detail_mode:"modal",data_view:n.API.learn_api_data+".1",data_value:n.API.learn_api_data+".0"},l={api_config:n.API,form:JSON.parse(this.lookup_form),cpn_config:r},c=Mt.getParaFunction(o)||[];if(0===c.length)return{};let d=c[0].code||"";let h=(a.ZP.parseJson(d)||{}).relf.split(";");if(h.length>1){let e={};for(let t=1;t<h.length;t++)e[h[t]]=`${n.API.learn_api_data}.${t}`;l.rule_config={code:"setValue",config:{component_event:"enter_tab",component_action:h[0],component_result:"",isGetOOP:"true",getOOPFormat:JSON.stringify(e)},inUse:!0,order:-1}}return l},this.buildContent=(e,t,i,o)=>{let s=Mt.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};return{API:this.buildAPI(r,e,t,i)}},this.convertContent=e=>{e=(e=e.replace(/ AND /g," && ")).replace(/ OR /g," || ");let t=a.ZP.getArrayWithRegex(e,"[\\w]+");for(const i of t)e=e.replace(i.key,`@{${i.key}}`);return e},this.buildAPI=(e,t,i,o)=>{const a=e.api,s=Mt.getCodeSmooth(a.split(" ")[1]);let n=this.buildMapping(t,i,o),r=e.data.split(";"),l={term:"MapS.dataS(lookup.search_input)",page:0};r.forEach((e=>{n[e]?l[e]=n[e]:void 0!==this.converMaplogin(e)&&(l[e]=`MapS.context(${this.converMaplogin(e)})`)}));let c=o.form_code+"_"+s;return{learn_api_name:c,learn_api_link:`$API_SERVER$:$API_PORT_DATA$/${a.split(" ")[1]}`,learn_api_data:c,learn_api_node_data:"data",learn_api_app:"BO",learn_api_method:a.split(" ")[0],learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(l),learn_api_id:c,AFGHkeyIndexWJ:c,AFGHkeyTime:1577163079652,AFGHkeyWorkFlow:"",AFGHTimeWJ:1577163079974,app_code:"o9"}},this.buildMapping=(e,t,i)=>Mt.buildMappingMainAPI(e,i),this.converMaplogin=e=>{switch(e){case"crrbrid":return"branchid";case"crrbrcd":return"branchcode";case"o9busdate":return"workingdate";case"crrusrid":return"usrid";case"crruser_code":return"usrcode";case"crrlgname":return"loginname";default:console.log("Key error=>",e)}}}},VSB_ITEM:class{constructor(){this.build=(e,t,i,o)=>{let a=e[t],s=this.buildContent(e,t,i,o),n="",r="",l="",c="";return void 0!==s&&(n=s.component_result,r=s.filter_context,l=s.cdlist,c=s.index),{rule_config:{code:"setDataGB",config:{component_event:"enter_tab",component_action:a.component_code,component_result:n,data_type:"query",query:l,query_db:"",mode_filter:"js_condition",filter_condition:"",js_condition:r},inUse:!0,order:c,isStart:!0}}},this.buildContent=(e,t,i,o)=>{let s=Mt.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};let l=` data_gb = data_gb.filter(data=>{\n      return (${Mt.convertConditionVBtoJS(r.actcdt,r.ftags,e)}) === true;\n      })`,c=Mt.getComponentWithCode(e,r.relf);if(void 0!==c){let e=c.cdlist.split(",");e=e[0]+";"+e[1];let t=`'@{${r.relf}}'`;for(;l.includes(t);)l=l.replace(t,"data.c_cdlist.cdid");let i=`@{${r.relf}}`;for(;l.includes(i);)l=l.replace(i,"data.c_cdlist.cdid");for(;l.includes("'@{data.c_cdlist.cdid}'");)l=l.replace("'@{data.c_cdlist.cdid}'","data.c_cdlist.cdid");for(;l.includes("'data.c_cdlist.cdid'");)l=l.replace("'data.c_cdlist.cdid'","data.c_cdlist.cdid");return{cdlist:e,component_result:r.relf,index:r.index,condition:"",filter_context:l}}}}},DAB_CTL:class{constructor(){this.build=(e,t,i,o)=>{let a=e[t],s=this.buildContent(e,t,i,o);return{rule_config:[{code:"visibility",config:{component_event:"all",component_action:a.component_code,component_result:s.component_result,condition:s.condition,visible:"not_use",ena_dis:"true",view_result:""},isStart:!0,inUse:!0,order:s.index},{code:"visibility",config:{component_event:"enter_tab",component_action:a.component_code,component_result:s.component_result,condition:`(${s.condition})===false`,visible:"not_use",ena_dis:"false",view_result:""},isStart:!0,inUse:!0,order:s.index}]}},this.buildContent=(e,t,i,o)=>{let s=Mt.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};let l=Mt.convertConditionVBtoJS(r.actcdt,r.ftags,e);return{component_result:r.relf,index:r.index,condition:l}}}},ENB_CTL:class{constructor(){this.build=(e,t,i,o)=>{let a=e[t],s=this.buildContent(e,t,i,o);return{rule_config:{code:"visibility",config:{component_event:"enter_tab",component_action:a.component_code,component_result:s.component_result,condition:s.condition,visible:"not_use",ena_dis:"false",view_result:""},isStart:!0,inUse:!0,order:s.index}}},this.buildContent=(e,t,i,o)=>{let s=Mt.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};let l=Mt.convertConditionVBtoJS(r.actcdt,r.ftags,e);return{component_result:r.relf,index:r.index,condition:l}}}},CCL_NUMB:class{constructor(){this.build=(e,t,i,o)=>{let a=e[t],s=this.buildContent(e,t,i,o);return{rule_config:{code:"calculator",config:{component_event:"enter_tab",component_action:a.component_code,component_result:s.component_result,function_cal:s.function_cal,condition:s.condition},isStart:!1,inUse:!0,order:s.index}}},this.buildContent=(e,t,i,o)=>{let s=Mt.getParaFunction(o)||[];if(0===s.length)return{};let n=s[0].code||"";const r=a.ZP.parseJson(n)||{};return{function_cal:this.convertContent(r.value,r.ftags),condition:Mt.convertConditionVBtoJS(r.actcdt,r.ftags,e),component_result:r.relf,index:r.index}},this.convertContent=(e,t)=>{e=(e=e.replace(/ AND /g," && ")).replace(/ OR /g," || ");let i=a.ZP.getArrayWithRegex(e,"[\\w]+"),o=e;for(const a of i){let e=a.key.toLocaleLowerCase();t.split(";").includes(e)&&(o=o.replace(a.key,`@{${e.toLocaleUpperCase()}}`))}return o=o.toLocaleLowerCase(),o=this.convertROUND(o),o=this.convertIF(o),o},this.convertROUND=e=>{const t=/round\(([^,]+),(\d+)\)/gm;let i;for(;null!==(i=t.exec(e));)i.index===t.lastIndex&&t.lastIndex++,e=`Number(${i[1]}).toFixed(${i[2]})`;return e},this.convertIF=e=>{const t=/if\(([^,]+),([^,]+),([^\)]+)/gm;let i;for(;null!==(i=t.exec(e));)i.index===t.lastIndex&&t.lastIndex++,e=`(${i[1]}?${i[2]}:${i[3]})`;return e}}}};class hi{constructor(e){var t=this;this.buildDefault=()=>{this.name_input="",this.url="",this.form_code="",this.table="",this.data_arr_json=[],this.list_API=[],this.config={info:{title:"",des:"",data:"",learnapi:"",learnsql:"",openOne:"false",node_position:[],flow_layout:[],form_code:"",ruleStrong:[],key_form:"",ofModal:!1,bodata:""},list_layout:[{name:"",des:"",class:"",codeHidden:a.ZP.autoID(),inputtype:"cLayout",list_view:[{name:"",code:"code",codeHidden:a.ZP.autoID(),inputtype:"cView",isTab:"false",list_input:[]}]}],react_txt:""}},this.buildInfoForm=(e,t)=>{this.buildDefault(),this.name_input="muti",this.data_arr_json=t,this.form_code=e.mutiform_code,this.table="muti",this.config.info.title=e.mutiform_code,this.config.info.des=e.mutiform_code,this.config.info.form_code=e.mutiform_code,this.config.info.key_form=e.mutiform_code},this.AutoBuildForm=e=>{const t=this.data_arr_json;0===this.config.list_layout.length&&this.addLayout();for(let i=0;i<t.length;i++)this.addComponent(t,i,e),this.addMutiForm(t,i,this),this.addRule(t,i),this.addAPI(t,i)},this.addMutiForm=(e,t,i)=>{},this.addLayout=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.config.list_layout.push({name:"",des:"",class:e.class||"",codeHidden:a.ZP.autoID(),inputtype:"cLayout",list_view:e.list_view||[]})},this.addView=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.config.list_layout;for(let t=0;t<i.length;t++){let o=i[t];for(let t=0;t<o.list_view.length;t++){let i=o.list_view[t];if(e.view_name===i.name)return}}void 0!==i&&0!==i.length||t.addLayout(),i[i.length-1].list_view.push({name:e.view_name||"",code:e.code||"code",codeHidden:a.ZP.autoID(),inputtype:"cView",isTab:e.isTab||"true",list_input:e.list_input||[]})},this.addRule=(e,t,i)=>{let o=e[t].function;if(""!==o){let a=o.split("<br>");for(let o=0;o<a.length;o++){let s=a[o].split("(")[0];if(s=Mt.getCodeSmooth(s),di[s]){let n=new di[s](e,t,i).build(e,t,i,a[o]);Array.isArray(n)?this.config.info.ruleStrong.concat(n):this.config.info.ruleStrong.push(n)}}}},this.addAPI=(e,t)=>{const i=e[t];if(ci[i.api_method]){let o=(new ci[i.api_method]).build(e,t,this.table,this.name_input);void 0!==o&&this.list_API.push(o)}},this.addComponent=(e,t,i)=>{const o=e[t];"Table"===o.cpn_type&&this.addView({view_name:"Table"});let a=this.config.list_layout.length,s=this.config.list_layout[a-1].list_view.length;if(""!==o.view_name)return void this.addView({view_name:o.view_name});let n=this.buildComponent(e,t,i);void 0!==n&&!1===this.replaceComponent(n)&&this.config.list_layout[a-1].list_view[s-1].list_input.push(n)},this.buildComponent=(e,t,i)=>{const o=e[t];if(""!==o.cpn_child_name&&si[o.cpn_type]){return(new si[o.cpn_type]).build(e,t,"muti",i)}},this.replaceComponent=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.config.list_layout;for(let o=0;o<i.length;o++){let a=i[o];for(let i=0;i<a.list_view.length;i++){let s=a.list_view[i];for(let a=0;a<s.list_input.length;a++){let n=s.list_input[a];if(e.default&&e.default.name===n.default.name&&e.inputtype===n.inputtype&&!0!==n.isReplaced)return void 0!==n.default.class&&(e.default.class=n.default.class),n.validate&&void 0!==n.validate.request&&(e.validate.request=n.validate.request),e.isReplaced=!0,t.config.list_layout[o].list_view[i].list_input[a]=e,!0}}}return!1},this.buildDefault()}}class ui{constructor(e){var t=this;this.buildDefault=()=>{this.name_input="",this.url="",this.form_code="",this.table="",this.data_arr_json=[],this.list_API=[],this.list_form_chil=[],this.config={info:{title:"",des:"",data:"",learnapi:"",learnsql:"",openOne:"false",node_position:[],flow_layout:[],form_code:"",ruleStrong:[],key_form:"",ofModal:!1,bodata:""},list_layout:[],react_txt:""}},this.buildInfoForm=(e,t,i)=>{this.buildDefault();const o=t[i][0][0],a=Mt.getCodeSmooth(o+"_"+i);this.name_input=i,this.data_arr_json=e,this.form_code=a,this.table=Mt.getCodeSmooth(o),this.config.info.title=o+" "+i,this.config.info.des=o+" "+i,this.config.info.form_code=a,this.config.info.key_form=a},this.AutoBuildForm=e=>{const t=this.data_arr_json;0===this.config.list_layout.length&&this.addLayout(),this.addRuleStart(t,this);for(let i=0;i<t.length;i++)""===t[i].cpn_child_name&&(this.addComponent(t,i,e),this.addMutiForm(t,i,this),this.addRule(t,i,this),this.addAPI(t,i));this.config.list_layout[0].list_view[0].list_input.push((0,At.Z)({},Ct))},this.addMutiForm=(e,t,i)=>{let o=e[t];if("Mutivalue"!==o.cpn_type)return;let a=new hi({}),s=[];for(;""!==e[t+1].cpn_child_name&&""===e[t+1].cpn_name;)s.push((0,At.Z)({},e[t+1])),t++;a.buildInfoForm(o,s),a.AutoBuildForm({muti:a}),this.list_form_chil.push(a.config)},this.addLayout=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.config.list_layout.push({name:e.name||t.config.title,des:e.des||t.config.des,class:e.class||"",codeHidden:a.ZP.autoID(),inputtype:"cLayout",list_view:e.list_view||[]})},this.addView=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.config.list_layout;for(let t=0;t<i.length;t++){let o=i[t];for(let t=0;t<o.list_view.length;t++){let i=o.list_view[t];if(e.view_name===i.name)return}}void 0!==i&&0!==i.length||t.addLayout(),i[i.length-1].list_view.push({name:e.view_name||"",code:e.code||"code",codeHidden:a.ZP.autoID(),inputtype:"cView",isTab:e.isTab||"true",list_input:e.list_input||[]})},this.addRuleStart=(e,t)=>{let i=["startDisable","startHidden"];for(let o=0;o<i.length;o++){let a=(new di[i[o]]).build(e,t);Array.isArray(a)?this.config.info.ruleStrong=this.config.info.ruleStrong.concat(a):a&&this.config.info.ruleStrong.push(a)}},this.addRule=(e,t,i)=>{let o=e[t].function;if(""!==o){let a=o.split("<br>");for(let o=0;o<a.length;o++){let s=a[o].split("(")[0];if(s=Mt.getCodeSmooth(s),di[s]){let n=new di[s](e,t,i).build(e,t,i,a[o]);Array.isArray(n)?this.config.info.ruleStrong=this.config.info.ruleStrong.concat(n):this.config.info.ruleStrong.push(n)}}}},this.addAPI=(e,t)=>{const i=e[t];if(ci[i.api_method]){let o=(new ci[i.api_method]).build(e,t,this);void 0!==o&&o.learn_api_id&&this.list_API.push(o),""!==i.api_cpn_addr&&(""===this.config.info.learnapi?this.config.info.learnapi=o.learn_api_id:this.config.info.learnapi+=";"+o.learn_api_id)}},this.addComponent=(e,t,i)=>{const o=e[t];let a=this.config.list_layout.length,s=this.config.list_layout[a-1].list_view.length;if(""!==o.view_name)return void this.addView({view_name:o.view_name});let n=this.buildComponent(e,t,i);void 0!==n&&!1===this.replaceComponent(n)&&this.config.list_layout[a-1].list_view[s-1].list_input.push(n)},this.buildComponent=(e,t,i)=>{const o=e[t];if(o.cpn_name+o.cpn_child_name!==""&&si[o.cpn_type]){return(new si[o.cpn_type]).build(e,t,this.name_input,i)}},this.replaceComponent=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.config.list_layout;for(let o=0;o<i.length;o++){let a=i[o];for(let i=0;i<a.list_view.length;i++){let s=a.list_view[i];for(let a=0;a<s.list_input.length;a++){let n=s.list_input[a];if(e.default&&e.default.name===n.default.name&&e.inputtype===n.inputtype&&!0===n.isReplace)return void 0!==n.default.class&&(e.default.class=n.default.class),n.validate&&void 0!==n.validate.request&&(e.validate.request=n.validate.request),t.config.list_layout[o].list_view[i].list_input[a]=e,!0}}}return!1},this.buildDefault()}}let pi=[];const _i=["TOTALFEE","TOTALCSH","TOTALDPT","TOTALACT","TOTALINT","TOTALPRN","TOTALFLAT","TOTALSAMT","TOTALRAMT","TTSFPER"];class fi extends ui{constructor(e){var t;return pi=e.menu,super(e),t=this,this.buildDefault=()=>{this.name_input="",this.url="",this.form_code="",this.table="",this.data_arr_json=[],this.list_API=[],this.config={info:{mode_form:{mode:"1",col_text:"",col_input:""},title:"",des:"",data:"",learnapi:"",learnsql:"",openOne:"false",node_position:[],flow_layout:[],form_code:"",ruleStrong:[{code:"visibility",config:{component_event:"all",component_action:"ref_id",component_result:"ref_id",condition:"'@{ref_id}'!==\"\"",visible:"true",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:1},{code:"visibility",config:{component_event:"all",component_action:"ref_id",component_result:"*;btn_accept",condition:"'@{ref_id}'!==\"\"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:1},{code:"setValue",config:{component_event:"all",component_action:"btn_accept",component_result:"btn_printVoucher",isGetOOP:"false",getOOPFormat:'{\n    "component_code_1": "col.col_1",\n    "component_code_2": "col.col_2"\n}'},inUse:!0,order:10}],key_form:"",ofModal:!1,bodata:"",responseType:"1"},list_layout:[{name:"",des:"",class:"",codeHidden:a.ZP.autoID(),inputtype:"cLayout",list_view:[{name:"Button",code:"",codeHidden:a.ZP.autoID(),inputtype:"cView",isTab:"false",list_input:[{isReplace:!0,default:{name:"Accept",code:"btn_accept",codeHidden:a.ZP.autoID(),class:"",condition:"",role:""},config:{},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{isReplace:!0,default:{name:"Clear",code:"btn_clear",codeHidden:a.ZP.autoID(),class:"",condition:"",role:""},config:{},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"cButton"}]}]},{name:"",des:"",class:"",codeHidden:a.ZP.autoID(),inputtype:"cLayout",list_view:[]}],react_txt:""},this.fee_context={isUse:!1}},this.addRuleStart=(e,t)=>{let i=["startDisable","startHidden","startClear"];for(let o=0;o<i.length;o++){let a=(new di[i[o]]).build(e,t);Array.isArray(a)?this.config.info.ruleStrong=this.config.info.ruleStrong.concat(a):a&&this.config.info.ruleStrong.push(a)}},this.buildInfoForm=(e,t,i)=>{this.buildDefault();const o=i,a=o;this.name_input=i,this.data_arr_json=e,this.form_code=a,this.table=o;let s=o;for(let n=0;n<pi.length;n++){const e=pi[n];s===`FO_${e.menuid}`&&(s=e.caption)}this.config.info.title=s,this.config.info.des=s,this.config.info.form_code=a,this.config.info.key_form=a},this.addRule=(e,t,i)=>{const o=e[t];let a=o.function;if(""!==a){let s=a.split("<br>");for(let a=0;a<s.length;a++){let n=s[a].split("(")[0];if(di[n]){let r=new di[n](e,t,i).build(e,t,i,s[a]),l=r.rule_config,c=r.api_config,d=r.form,h=r.cpn_config,u=r.new_component;if(l&&("getInfo"===l.code?Array.isArray(l)?this.list_rule_func_getInfor=this.list_rule_func_getInfor.concat(l):this.list_rule_func_getInfor.push(l):Array.isArray(l)?this.config.info.ruleStrong=this.config.info.ruleStrong.concat(l):this.config.info.ruleStrong.push(l)),c&&(Array.isArray(c)?this.list_API=this.list_API.concat(c):this.list_API.push(c)),d&&(Array.isArray(d)?this.list_form_chil=this.list_form_chil.concat(d):this.list_form_chil.push(d)),h){let e=this.config.list_layout.length,t=this.config.list_layout[e-1].list_view.length,i=this.config.list_layout[e-1].list_view[t-1].list_input.length;for(const o in h)if(h.hasOwnProperty(o)){const a=h[o];this.config.list_layout[e-1].list_view[t-1].list_input[i-1].config[o]=a}o.mask?this.config.list_layout[e-1].list_view[t-1].list_input[i-1].inputtype="jMaskInput":this.config.list_layout[e-1].list_view[t-1].list_input[i-1].inputtype="cTextInput"}if(u){let e=this.config.list_layout.length,t=this.config.list_layout[e-1].list_view.length;this.config.list_layout[e-1].list_view[t-1].list_input.push(u)}}}}},this.addView=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.config.list_layout;for(let t=0;t<i.length;t++){let o=i[t];for(let t=0;t<o.list_view.length;t++){let i=o.list_view[t];if(e.view_name===i.name)return}}void 0!==i&&0!==i.length||t.addLayout(),i[i.length-1].list_view.push({name:e.view_name||"",code:e.code||"code",codeHidden:a.ZP.autoID(),inputtype:"cView",class:"col-sm-12 col-md-12",isTab:"fasle",list_input:e.list_input||[]})},this.addComponent=(e,t,i)=>{const o=e[t];let a=this.config.list_layout.length,s=this.config.list_layout[a-1].list_view.length;if(""!==o.view_name)return void this.addView({view_name:o.view_name});let n=this.buildComponent(e,t,i);"ifccd"===o.key_name&&(this.fee_context.isUse=!0,this.fee_context.data_fee=o),void 0!==n&&!1===this.replaceComponent(n)&&(n.inputtype,n.default.class="",this.config.list_layout[a-1].list_view[s-1].list_input.push(n))},this.addFee=()=>{if(!0===this.fee_context.isUse){let e=this.config.list_layout,t=this.config.info.ruleStrong.filter((e=>"ifccd"===e.config.component_action&&"getInfo"===e.code));if(1===t.length){this.config.info.ruleStrong.splice(this.config.info.ruleStrong.indexOf(t[0]),1),t[0].config.is_data_to_form="false",t[0].config.component_event="all";let e=a.ZP.cloneJson(t[0]);e.config.component_event="enter_tab",e.config.component_result="",e.config.api_id="POST_getinfo_fee_ifccd",e.config.condition=" !!'@{ifcname}' ",e.order=Number(e.order)+1,e.config.is_data_to_form="true",t.push(e)}e.forEach((e=>{e.list_view.forEach((e=>{e.list_input.forEach((e=>{if("ifccd"===e.default.code){this.fee_context.cpn=a.ZP.cloneJson(e),e.default={name:"ifcfees",code:"form_fee",codeHidden:a.ZP.autoID(),class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},e.config={action:"",structable:`${this.form_code}.ifcfees`,structable_read:`${this.form_code}.ifcfees`,data_default:"{}",callform:this.form_code+"_O9_FEE",callData:"form_child.ifcfees"},e.inputtype="jSameMain",this.fee_context.cpn.config.structable="form_child.ifccd",this.fee_context.cpn.config.structable_read="form_child.ifccd",this.fee_context.cpn.default.ofgroup="ifccd",this.fee_context.cpn.inputtype="cTextInput";let s=a.ZP.cloneJson(xt);s.info.title=this.form_code+"_O9_FEE",s.info.des=this.form_code+"_O9_FEE",s.info.form_code=this.form_code+"_O9_FEE",s.list_layout[0].list_view[0].list_input[0]=this.fee_context.cpn,s.info.ruleStrong=s.info.ruleStrong.concat(t);let n=[],r=this.fee_context.data_fee.ftags;try{n=JSON.parse(this.fee_context.data_fee.list_CCL_FEE)}catch(i){console.log("error when parsing list cclFees",i)}for(let e of n)e.actcdt=Mt.convertConditionVBtoJS(e.actcdt,r);let l=[];try{l=JSON.parse(this.fee_context.data_fee.list_GET_FEE)}catch(i){console.log("error when parsing list get fee",i)}for(let e of l)e.actcdt=Mt.convertConditionVBtoJS(e.actcdt,r),_i.includes(e.value)||(e.value=Mt.convertConditionVBtoJS(e.value,r));let c=[];try{c=JSON.parse(this.fee_context.data_fee.list_AUTO_FEE);for(let e of c)e.actcdt=Mt.convertConditionVBtoJS(e.actcdt,r),e.value&&(e.value=e.value.toLowerCase())}catch(o){console.log("error when parsing list AUTO_FEE")}s.list_layout[0].list_view[0].list_input.push({default:{name:"data_fee",code:"data_fee",codeHidden:"data_fee",class:"",condition:"",ofgroup:"",class_ofgroup:"",role:""},config:{is_upperCase:"false",action:"",structable:"data_fee.data_fee",structable_read:"data_fee.data_fee",data_default:JSON.stringify({list_CCL_FEE:JSON.stringify(n),list_GET_FEE:JSON.stringify(l),list_AUTO_FEE:JSON.stringify(c)}),isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_password:"false",is_upper:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"}),this.list_form_chil.push(s)}}))}))}));let i=this.fee_context.data_fee.fee_active_fields,o=this.fee_context.data_fee.auto_fee_active_fields;o.split(";").forEach((e=>{if(e)for(;i.includes(e);)i=i.replace(e,"")})),this.config.info.ruleStrong=this.config.info.ruleStrong.concat([{code:"runFo",config:{component_action:i,component_result:"",component_event:"enter_tab",txFoActions:"",txFo:'[\n    {\n        "txcode": "fo-convert-dataFee",\n        "input": {}\n    }\n]',useAction:"false",condition:"'@{ref_id}' === \"\""},inUse:!0,order:98,isStart:!1},{code:"runFo",config:{component_action:o,component_result:"",component_event:"enter_tab",txFoActions:"",txFo:'[\n    {\n        "txcode": "fo-ruleFunc-AutoFee",\n        "input": {"learn_api": "O9_AUTOFEE_POST_GET_IFC_INFO"}\n    }\n]',useAction:"false",condition:""},inUse:!0,order:99,isStart:!1},{code:"managerComponent",config:{component_event:"all",component_action:"ref_id",component_manager:"{\n    \"form_fee;form_fee(ifccd;ifcval;btn_add;btn_apply)\": \" '@{ref_id}' === '' \"\n}",is_use_block:"false"},inUse:!0,order:5,isStart:!0},{code:"visibility",config:{component_event:"all",component_action:"ref_id",component_result:"form_fee;form_fee(table_fee)",condition:"'@{ref_id}'!==\"\"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:5},{code:"visibility",config:{component_event:"all",component_action:"ref_id",component_result:"form_fee;form_fee(table_fee)",condition:"'@{ref_id}'===\"\"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:5}]);for(let a=0;a<this.list_API.length;a++){const e=this.list_API[a];if(e.learn_api_id.includes("_btn_accept_post_api_fo_")){let t=JSON.parse(e.learn_api_mapping);t.ifcfees=`MapS.arrayJson(${e.learn_api_data}.ifcfees|{"sfappl":"MapS.dataN(ifcfees.sfappl)","ifccd":"MapS.dataN(ifcfees.ifccd)","payrate":"MapS.dataN(ifcfees.payrate)","ifcval":"MapS.dataN(ifcfees.ifcval)","ifcamt":"MapS.dataN(ifcfees.ifcamt)","ccrid":"MapS.dataS(ifcfees.ccrid)","flrval":"MapS.dataN(ifcfees.flrval)","ceival":"MapS.dataN(ifcfees.ceival)","srate":"MapS.dataN(ifcfees.srate)","samt":"MapS.dataN(ifcfees.samt)","rrate":"MapS.dataN(ifcfees.rrate)","ramt":"MapS.dataN(ifcfees.ramt)","ccrcd":"MapS.dataS(ifcfees.ccrcd)","paysrc":"MapS.dataS(ifcfees.paysrc)"})`,this.list_API[a].learn_api_mapping=JSON.stringify(t)}}}},this.AutoBuildForm=e=>{const t=this.data_arr_json;0===this.config.list_layout.length&&this.addLayout(),this.list_rule_func_getInfor=[],this.addRuleStart(t,this);for(let a=0;a<t.length;a++)""===t[a].cpn_child_name&&(this.addComponent(t,a,e),this.addMutiForm(t,a,this),this.addRule(t,a,this),this.addAPI(t,a));let i,o;i=new RegExp("{([^}]*)}","gm"),o=new RegExp("{([^}]*)}","gm");for(let a=0;a<this.list_rule_func_getInfor.length;a++){let e=this.list_rule_func_getInfor[a];for(let t=a+1;t<this.list_rule_func_getInfor.length;){let a=this.list_rule_func_getInfor[t];if(e.config.api_id===a.config.api_id&&e.config.condition===a.config.condition){let s,n,r,l;for(;null!==(s=i.exec(e.config.component_result));)s.index===i.lastIndex&&i.lastIndex++,r=s[1];for(;null!==(n=o.exec(a.config.component_result));)n.index===o.lastIndex&&n.lastIndex++,l=n[1];e.config.component_result="{"+r+","+l+"}",e.config.component_action=e.config.component_action+";"+a.config.component_action,this.list_rule_func_getInfor.splice(t,1)}else t++}}this.config.info.ruleStrong=this.config.info.ruleStrong.concat(this.list_rule_func_getInfor),this.addFee(),this.config.list_layout[0].list_view[0].list_input.push((0,At.Z)({},Ct));const s=a.ZP.cloneJson(this.config.list_layout[0].list_view[0]);this.config.list_layout.shift(),this.config.list_layout[0].list_view.push(s),this.config.info.ruleStrong.push({code:"managerComponent",config:{component_event:"on_change",component_action:"postings_debit;postings_credit",component_manager:'{\n    "postings;postings()": "@{postings_debit}.length > 0 || @{postings_credit}.length > 0", \n    "postings_debit": "false",\n    "postings_credit": "false",\n    "dataset": "@{dataset}.length > 0",\n    "ref_id": "\'@{ref_id}\'!== \'\'"\n}',is_use_block:"false"},isStart:!0,inUse:!0,order:1}),this.config.list_layout[this.config.list_layout.length-1].list_view.push({name:"",lang:{},code:"code",class:"col-sm-6 col-md-6",codeHidden:"cbc85eefe8610f4a",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Debit",code:"postings_debit",codeHidden:"6cfe880d0ff85ea2",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:`${this.form_code}.postings_debit`,query_data:`${this.form_code}.postings_debit`,paging_record:"5",columns:'[\n    {\n        "code": "postings_debit.acgrp",\n        "title": "Group",\n        "inputtype": "ColumnNumber",\n        "config": {}\n    },\n    {\n        "code": "postings_debit.bacno",\n        "title": "Account number",\n        "inputtype": "columnMask",\n        "config": {\n            "mask": "$FO_ACNO_POSTING$"\n        }\n    },\n    {\n        "code": "postings_debit.amt",\n        "title": "Amount",\n        "inputtype": "columnCurrency",\n        "config": {\n            "decimal": 2\n        }\n    }\n]'},role:{},property:{},validate:{},lang:{vi:{Group:"Group","Account number":"Account number",Amount:"Amount"},en:{Group:"Group","Account number":"Account number",Amount:"Amount"},lo:{Group:"Group","Account number":"Account number",Amount:"Amount"},km:{Group:"Group","Account number":"Account number",Amount:"Amount"},th:{Group:"Group","Account number":"Account number",Amount:"Amount"},mg:{Group:"Group","Account number":"Account number",Amount:"Amount"},ja:{Group:"Group","Account number":"Account number",Amount:"Amount"},ko:{Group:"Group","Account number":"Account number",Amount:"Amount"}},configAVD:{},inputtype:"jTableForm"},{default:{name:"Print",code:"btn_printVoucher",codeHidden:a.ZP.autoID(),class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{node_data_print:"voucher.@index.code",json_path:this.form_code,auto_print:"true",txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "#sys:fo-print-voucher",\n        "input": {}\n    }\n]',useAction:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jPrintVoucher"}]}),this.config.list_layout[this.config.list_layout.length-1].list_view.push({name:"",lang:{},code:"code",class:"col-sm-6 col-md-6",codeHidden:"7b43df2be7e7b1d1",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Credit",code:"postings_credit",codeHidden:"a1f900b0238b3b6f",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:`${this.form_code}.postings_credit`,query_data:`${this.form_code}.postings_credit`,paging_record:"5",columns:'[\n    {\n        "code": "postings_credit.acgrp",\n        "title": "Group",\n        "inputtype": "ColumnNumber",\n        "config": {}\n    },\n    {\n        "code": "postings_credit.bacno",\n        "title": "Account number",\n        "inputtype": "columnMask",\n        "config": {\n            "mask": "$FO_ACNO_POSTING$"\n        }\n    },\n    {\n        "code": "postings_credit.amt",\n        "title": "Amount",\n        "inputtype": "columnCurrency",\n        "config": {\n            "decimal": 2\n        }\n    }\n]'},role:{},property:{},validate:{},lang:{vi:{Group:"Group","Account number":"Account number",Amount:"Amount"},en:{Group:"Group","Account number":"Account number",Amount:"Amount"},lo:{Group:"Group","Account number":"Account number",Amount:"Amount"},km:{Group:"Group","Account number":"Account number",Amount:"Amount"},th:{Group:"Group","Account number":"Account number",Amount:"Amount"},mg:{Group:"Group","Account number":"Account number",Amount:"Amount"},ja:{Group:"Group","Account number":"Account number",Amount:"Amount"},ko:{Group:"Group","Account number":"Account number",Amount:"Amount"}},configAVD:{},inputtype:"jTableForm"}]});let n=this.form_code+"_posting";this.config.list_layout[this.config.list_layout.length-1].list_view.push({name:"",lang:{},code:"code",class:"col-sm-12 col-md-12",codeHidden:"7b43df2be7e7b1d1",inputtype:"cView",isTab:"false",list_input:[{config:{action:"",structable:this.form_code+".postings",structable_read:this.form_code+".postings",data_default:"{}",callform:n,callData:this.form_code+".postings"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jSameMain",default:{name:"Postings",code:"postings",codeHidden:"cec06953d595ea8a",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""}}]}),this.list_form_chil.push({info:{title:n,des:n,data:"",learnapi:"",learnsql:"",openOne:"false",node_position:[],flow_layout:[],form_code:n,ruleStrong:[],key_form:n,ofModal:!1,bodata:"",responseType:"1"},list_layout:[{name:"Posting",des:"Posting",class:"",codeHidden:"9c9f62eedf51a184",inputtype:"cLayout",list_view:[{name:"",lang:{},code:"code",class:"col-md-6 col-sm-12 ",codeHidden:"cbc85eefe8610f4a",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Debit",code:"postings_debit",codeHidden:"6cfe880d0ff85ea2",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:this.form_code+".postings_debit",query_data:this.form_code+".postings_debit",paging_record:"5",columns:'[\n    {\n        "code": "postings_debit.acgrp",\n        "title": "Group",\n        "inputtype": "ColumnNumber",\n        "config": {}\n    },\n    {\n        "code": "postings_debit.bacno",\n        "title": "Account number",\n        "inputtype": "columnMask",\n        "config": {\n            "mask": "$FO_ACNO_POSTING$"\n        }\n    },\n    {\n        "code": "postings_debit.amt",\n        "title": "Amount",\n        "inputtype": "columnCurrency",\n        "config": {\n            "decimal": 2\n        }\n    }\n]'},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"jTableForm"}]},{name:"",lang:{},code:"code",class:"col-md-6 col-sm-12 ",codeHidden:"7b43df2be7e7b1d1",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Credit",code:"postings_credit",codeHidden:"a1f900b0238b3b6f",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:this.form_code+".postings_credit",query_data:this.form_code+".postings_credit",paging_record:"5",columns:'[\n    {\n        "code": "postings_credit.acgrp",\n        "title": "Group",\n        "inputtype": "ColumnNumber",\n        "config": {}\n    },\n    {\n        "code": "postings_credit.bacno",\n        "title": "Account number",\n        "inputtype": "columnMask",\n        "config": {\n            "mask": "$FO_ACNO_POSTING$"\n        }\n    },\n    {\n        "code": "postings_credit.amt",\n        "title": "Amount",\n        "inputtype": "columnCurrency",\n        "config": {\n            "decimal": 2\n        }\n    }\n]'},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"jTableForm"}]}]}],react_txt:""})},this}}const gi=function(e){return(0,v.jsx)("div",{className:"form-group",children:(0,v.jsx)("div",{className:"row mrgn-all-none",children:e.children})})};class mi extends s.Component{constructor(e){super(e),this.initContextAuto=()=>{this.context_auto={url_version:`${(new Date).getFullYear()}/${(new Date).getMonth()+1}/${(new Date).getDate()}/${(new Date).toString().replace(/:/g,".")}`,menu:{group_menu_lang:{vi:"",en:"",thai:"",lao:"",cam:"",mya:"",han:""},group_menu_name:"",group_menu_order:"1",group_menu_parent:"7cb65792dc18d127",group_menu_function_code:"",group_menu_id:"",AFGHkeyIndexWJ:"e741731311fbdde6",AFGHkeyTime:1575879644845,AFGHkeyWorkFlow:"",AFGHTimeWJ:1575879644942},id:a.ZP.autoID(),name:"",table:"",list_form:{}}},this.setStateLogic=(e,t)=>{this.prevStateLogic=a.ZP.cloneJson(this.state),this.state=Object.assign(this.state,e),t&&t(),this.props.abs_update&&this.props.abs_update()},this.onClickAutoBuild=e=>{this.initContextAuto(),this.context_auto.list_form_data_j=a.ZP.parseJson(this.state.list_form_data),this.setStateLogic({isBlock:!0},(()=>{this.callBackGetHTML()}))},this.onClickClear=()=>{this.initContextAuto(),this.setStateLogic({isAutoSuccess:!1,isSaveSuccess:!1,list_error:[]})},this.callBackSaveListForm=e=>{this.context_auto.startIndexBuild+10>=this.context_auto.lastIndexBuild?e?this.setStateLogic({isBlock:!1,isAutoSuccess:!1,isErrorSave:!1,isSaveSuccess:!0,list_error:[]}):this.setStateLogic({isBlock:!1,isErrorSave:!0,list_error:[]}):(e&&(this.context_auto.startIndexBuild+=10),this.showToast("",e),this.setStateLogic({update:!this.state.update},(()=>{setTimeout((()=>{yt.saveListForm(this.context_auto,this.callBackSaveListForm)}),2e3)})))},this.buildListAuthen=e=>{let t={};for(const i of e)void 0!==i.type&&void 0!==i.isauthen&&"FO"===i.type&&"1"===i.isauthen?t["FO_"+i.menuid]=!0:t["FO_"+i.menuid]=!1;return t},this.buildListMenu=e=>{let t=[];for(const i of e){let e={};if("0"===i.parentid)e={group_menu_lang:{vi:i.lang.vi,en:i.lang.en},group_menu_name:i.lang.en,group_menu_order:i.order.toString(),group_menu_parent:"0",group_menu_status:"A",group_menu_function_code:"",group_menu_visible:"FO"===i.type?"F":"T",group_menu_id:i.menuid,AFGHkeyIndexWJ:i.menuid,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime()};else switch(i.type){case"BO":e=1===i.is_has_child?{group_menu_lang:{vi:i.lang.vi,en:i.lang.en},group_menu_name:i.lang.en,group_menu_order:i.order.toString(),group_menu_parent:i.parentid,group_menu_status:"A",group_menu_function_code:"",group_menu_visible:"T",group_menu_id:i.menuid,AFGHkeyIndexWJ:i.menuid,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime()}:{group_menu_lang:{vi:i.lang.vi,en:i.lang.en},group_menu_name:i.lang.en,group_menu_order:i.order.toString(),group_menu_parent:i.parentid,group_menu_status:"A",group_menu_function_code:"BO_"+i.menuid,group_menu_visible:"T",group_menu_id:"BO_"+i.menuid,AFGHkeyIndexWJ:"BO_"+i.menuid,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime()};break;case"FO":e={group_menu_lang:{vi:i.lang.vi,en:i.lang.en},group_menu_name:i.lang.en,group_menu_order:"1",group_menu_parent:i.parentid,group_menu_status:"A",group_menu_function_code:"FO_"+i.menuid,group_menu_visible:"F",group_menu_id:"FO_"+i.menuid,AFGHkeyIndexWJ:"FO_"+i.menuid,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime()};break;default:console.log("****** Menu type: ",i.type)}t.push(e)}return t},this.callBackGetHTML=e=>{let t=[],i={},o=a.ZP.parseJson(this.state.list_form_data)||{},s=o.menu;this.list_menu_data=a.ZP.cloneJson(s),this.context_auto.list_menu=this.buildListMenu(s),this.list_form_authen=this.buildListAuthen(s);let n=o.forms,r=[],l={};for(const a in n)n.hasOwnProperty(a)&&!1===t.includes(a)&&(l["FO_"+a]=n[a]);for(const a in l){let e=Mt.convertHtmlTableToArray(l[a],a);r=r.concat(Tt.validateDataTable(e,a)),i[a]=e,this.context_auto.list_form[a]=new fi({menu:this.list_menu_data})}r.length>0?this.setStateLogic({list_error:r,isBlock:!1}):(this.context_auto.name="Form FO",this.buildConfigDefaultFormAuto(i),this.AutoBuildListForm(),this.setStateLogic({isAutoSuccess:!0,isBlock:!1}))},this.buildConfigDefaultFormAuto=e=>{let t=this.context_auto.list_form;for(const i in t){let o=t[i],a=e[i],s=Mt.convertTableToArrayJson(a,i);o.buildInfoForm(s,e,i)}},this.AutoBuildListForm=()=>{let e=this.context_auto.list_form;for(const t in e){e[t].AutoBuildForm(e)}},this.getFormSelected=e=>{let t=this.props.data[this.state.formAutoSelected]||{};this.context_auto=t.autoform||{};let i=this.context_auto.list_form;this.setStateLogic({isAutoSuccess:!0,isSaveSuccess:!0,urlAdd:i.Add.url,urlView:i.View.url,urlSearch:i.Search.url})},this.showToast=(e,t)=>{console.log("Show l\u1ed7i",e,t)},this.renderFormCreate=()=>!0===this.state.isAutoSuccess?null:(0,v.jsx)(s.Fragment,{children:(0,v.jsx)("div",{className:"prtm-block",style:{padding:"30px"},children:(0,v.jsxs)("div",{className:"horizontal-form-style",children:[(0,v.jsxs)("div",{className:"prtm-block-title mrgn-b-lg",children:[(0,v.jsx)("h3",{children:"Quick Build Form"}),(0,v.jsx)("p",{children:"Auto build form from google sheet link."})]}),!0===this.state.isSaveSuccess&&(0,v.jsx)("div",{className:"alert alert-success",children:(0,v.jsx)("strong",{children:"Save successfully"})}),(0,v.jsxs)("form",{className:"form-horizontal",children:[this.renderInput(),this.renderListButton()]})]})})}),this.renderListError=()=>0===this.state.list_error.length?null:(0,v.jsx)(s.Fragment,{children:(0,v.jsx)("div",{className:"table-style",children:(0,v.jsxs)("div",{className:"prtm-block pos-relative",children:[(0,v.jsx)("div",{className:"prtm-block-title mrgn-b-lg",children:(0,v.jsx)("div",{className:"caption",children:(0,v.jsx)("h3",{className:"text-capitalize",children:"Error"})})}),(0,v.jsx)("div",{className:"prtm-block-content",children:(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsx)("div",{className:"unseen",children:(0,v.jsxs)("table",{className:"table table-hover table-bordered table-striped",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{className:"bg-danger",children:[(0,v.jsx)("th",{children:"Form Name"}),(0,v.jsx)("th",{children:"Row"}),(0,v.jsx)("th",{children:"Col"}),(0,v.jsx)("th",{children:"Value"}),(0,v.jsx)("th",{children:"Content"})]})}),(0,v.jsx)("tbody",{children:this.renderInfoError()})]})})})})]})})}),this.renderInfoError=()=>this.state.list_error.map(((e,t)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:e.form_name}),(0,v.jsx)("td",{children:e.row}),(0,v.jsx)("td",{children:e.col}),(0,v.jsx)("td",{children:e.value}),(0,v.jsx)("td",{children:e.content})]},t))),this.rederListForm=()=>!1===this.state.isAutoSuccess?null:(0,v.jsx)(s.Fragment,{children:(0,v.jsx)("div",{className:"table-style",children:(0,v.jsxs)("div",{className:"prtm-block pos-relative",children:[(0,v.jsx)("div",{className:"prtm-block-title mrgn-b-lg",children:(0,v.jsx)("div",{className:"caption",children:(0,v.jsx)("h3",{className:"text-capitalize",children:"List Form Auto"})})}),!0===this.state.isErrorSave&&(0,v.jsx)("div",{class:"note note-danger",children:(0,v.jsx)("p",{class:"mrgn-all-none",children:"Save Error,Try Again. "})}),(0,v.jsx)("div",{className:"prtm-block-content",children:(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsx)("div",{className:"unseen",children:(0,v.jsxs)("table",{className:"table table-hover table-bordered table-striped",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{className:"bg-primary",children:[(0,v.jsx)("th",{children:"Form"}),(0,v.jsx)("th",{children:"Form Name"}),(0,v.jsx)("th",{children:"Form Code"}),(0,v.jsx)("th",{children:"Component Amount"}),(0,v.jsx)("th",{children:"API Amount"}),(0,v.jsx)("th",{children:"Form Muti Amount"})]})}),(0,v.jsx)("tbody",{children:this.renderInfoListForm()})]})})})}),(0,v.jsx)("div",{className:"form-group",children:(0,v.jsx)("div",{className:"row mrgn-all-none",children:(0,v.jsxs)("div",{className:"col-sm-10",children:[(0,v.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:e=>this.onClickClear(e),style:{marginLeft:"10px"},children:[" ",(0,v.jsx)("i",{className:"fa fa-trash fa-lg"})," Clear"," "]}),(0,v.jsxs)("button",{type:"button",className:"btn btn-success",onClick:e=>this.onClickSave(e),style:{marginLeft:"10px"},children:[" ",(0,v.jsx)("i",{className:"fa fa-floppy-o fa-lg",style:{marginRight:"10px"}})," ","Save"," "]})]})})})]})})}),this.renderInfoListForm=()=>{let e=[];for(let t in this.context_auto.list_form){let i=this.context_auto.list_form[t],o=i.config;e.push((0,v.jsxs)("tr",{onClick:()=>{this.setStateLogic({form_select:t})},style:t===this.state.form_select?{background:"LightBlue"}:{},children:[(0,v.jsx)("td",{children:t}),(0,v.jsx)("td",{children:o.info.title}),(0,v.jsx)("td",{children:o.info.form_code}),(0,v.jsx)("td",{children:Mt.countComponent(o.list_layout)}),(0,v.jsx)("td",{children:i.list_API.length}),(0,v.jsx)("td",{children:i.list_form_chil.length})]},t))}return e},this.setData=e=>{this.setStateLogic({list_form_data:e},(()=>{this.initContextAuto(),this.context_auto.list_form_data_j=a.ZP.parseJson(this.state.list_form_data),this.setStateLogic({isBlock:!0},(()=>{this.callBackGetHTML()}))}))},this.getData=()=>this,this.renderListButton=()=>(0,v.jsx)(s.Fragment,{children:(0,v.jsx)(gi,{children:(0,v.jsxs)("div",{className:"col-sm-offset-2 col-sm-10",children:[(0,v.jsxs)("label",{htmlFor:"file-upload",className:"custom-file-upload",children:[(0,v.jsx)("i",{className:"fa fa-cloud-upload"})," Custom Upload"]}),(0,v.jsx)("input",{id:"file-upload",type:"file",accept:".json",onChange:e=>{e.preventDefault(),this.setStateLogic({isBlock:!0});const t=new FileReader;t.onload=async e=>{const t=e.target.result;this.setStateLogic({list_form_data:t,isBlock:!1})},t.readAsText(e.target.files[0])}}),(0,v.jsxs)("button",{type:"button",className:"btn btn-primary",style:{marginLeft:"15px"},onClick:e=>this.onClickAutoBuild(e),children:[(0,v.jsx)("i",{className:"fa fa-rocket fa-lg",style:{marginRight:"10px"}})," ","Auto Build"," "]})]})})}),this.key_form="autoBuildForm",this.list_menu_data=[],this.list_form_authen={},this.context_auto={list_menu:[],startIndexBuild:0,lastIndexBuild:0,menu:{group_menu_lang:{vi:"",en:"",thai:"",lao:"",cam:"",mya:"",han:""},group_menu_name:"",group_menu_order:"1",group_menu_parent:"e40394be28bb7ca4",group_menu_function_code:"",group_menu_id:"",AFGHkeyIndexWJ:a.ZP.autoID(),AFGHkeyTime:1575879644845,AFGHkeyWorkFlow:"",AFGHTimeWJ:1575879644942},id:a.ZP.autoID(),name:"",table:"",list_form:{},list_form_data_j:{}},this.state={visibility:"",data:this.props.data,infoA:{title:"Qu\u1ea3n l\xfd autoBuildForm FO",des:"Ki\u1ec3m so\xe1t c\xe1c thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp!",openOne:"true",ofModal:!1},list_error:[],isAutoSuccess:!1,form_select:"",isBlock:!1,isErrorSave:!1,isSaveSuccess:!1,formAutoSelected:0,list_form_data:"",update:!0}}handleUrlChange(e){const t=e.target.value;this.setStateLogic({list_form_data:t})}onClickSave(){this.context_auto.startIndexBuild=0,this.context_auto.lastIndexBuild=Object.keys(this.context_auto.list_form).length,this.setStateLogic({isBlock:!0},(()=>{yt.saveListForm(this.context_auto,this.callBackSaveListForm)}))}render(){return null}renderInput(){return(0,v.jsx)("div",{className:"form-group ",style:{marginBottom:"10px"},children:(0,v.jsxs)("div",{className:"row mrgn-all-none",children:[(0,v.jsx)("label",{className:"col-sm-2 control-label",children:"Data List Form Json"}),(0,v.jsx)("div",{className:"col-sm-10 col-lg-9",children:(0,v.jsx)("textarea",{className:"form-control",onChange:e=>{this.handleUrlChange(e)},value:this.state.list_form_data,placeholder:"Data List Form Json",type:"text"})})]})})}}const vi=mi;class bi{static quickFix(e){return e=this.configMalibule(e)}static configMalibule(e){const t=function(e){let t="MUTI_FORM",i=e.list_layout,o=!1;return i.forEach((i=>{i.list_view.forEach((i=>{i.list_input.forEach((i=>{if("cButton"===i.inputtype){o=!0;const a=JSON.stringify(i.config),s=i.default;"MUTI_FORM"===t&&(s.name.toLowerCase().includes("accept")&&JSON.stringify(e).includes("Passw")&&JSON.stringify(e).includes("User Name")&&(t="APR_FORM"),a.includes("#sys:fo-open-form")&&(t="BO_FORM"),(a.includes("#sys:fo-create-dataAPI")||a.includes("fo-create-dataAPI-sanction"))&&s.name.toLowerCase().includes("accept")&&(t="FO_FORM"),a.includes("#sys:fo-lookup-selectData")&&(t="LKP_FORM"),s.name.toLowerCase().includes("apply")&&(t="SAME_FORM"))}}))}))})),!0===o&&"MUTI_FORM"===t?"BO_FORM":t}(e);return e.list_layout.forEach((i=>{i.list_view.forEach((i=>{let o=i.list_input;o.forEach(((i,a)=>{i=function(e,t,i,o,a,s){switch(e.inputtype){case"cButton":switch(t){case"MUTI_FORM":case"BO_FORM":case"FO_FORM":case"SAME_FORM":case"LKP_FORM":case"APR_FORM":break;default:console.log("Error cButton")}e.default.class="";break;case"cTextInput":switch(t){case"MUTI_FORM":e.default.class=yi(e.default.class,o%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),a.info.form_code.toLowerCase().startsWith("fo_")&&(e.default.class=yi(e.default.class,"col-12"));break;case"BO_FORM":case"SAME_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"LKP_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6");break;case"APR_FORM":e.default.class=yi(e.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error cTextInput")}JSON.stringify(e).toLowerCase().includes("search_text")&&(e.default.class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 malibu-component-max_width");break;case"cTableDefault":case"jTableForm":case"jSameMain":e.default.class="col-12";break;case"jSelect":switch(t){case"MUTI_FORM":e.default.class=yi(e.default.class,o%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),a.info.form_code.toLowerCase().startsWith("fo_")&&(e.default.class=yi(e.default.class,"col-12"));break;case"BO_FORM":case"SAME_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":case"LKP_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":e.default.class=yi(e.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error jSelect")}break;case"jMaskInput":switch(t){case"MUTI_FORM":e.default.class=yi(e.default.class,o%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),a.info.form_code.toLowerCase().startsWith("fo_")&&(e.default.class=yi(e.default.class,"col-12"));break;case"BO_FORM":case"SAME_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":case"LKP_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":e.default.class=yi(e.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error jMaskInput")}break;case"jCheckbox":switch(t){case"MUTI_FORM":e.default.class=yi(e.default.class,o%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),a.info.form_code.toLowerCase().startsWith("fo_")&&(e.default.class=yi(e.default.class,"col-12"));break;case"BO_FORM":case"SAME_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":case"LKP_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":e.default.class=yi(e.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error jCheckbox")}break;case"jMutiValue":switch(t){case"MUTI_FORM":e.default.class="col-12";break;case"BO_FORM":case"SAME_FORM":e.default.class=yi(e.default.class,"col-xl-10 col-lg-10 col-md-11 col-sm-12 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":case"LKP_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;default:console.log("Error jMutiValue")}break;case"jCurrency":if(a.info.form_code.includes("_O9_FEE")&&a.info.title.includes("_O9_FEE")&&JSON.stringify(a).includes("Interest/fee/charge code")){if(["Total Cash","Total deposit","Total accounting","Total Interest","Total principal"].includes(e.default.name)){e.default.class="col-xl-3 col-lg-3 col-md-5 col-sm-6 offset-xl-1-right offset-lg-1-right offset-md-1-right";break}}switch(t){case"MUTI_FORM":e.default.class=yi(e.default.class,o%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),a.info.form_code.toLowerCase().startsWith("fo_")&&(e.default.class=yi(e.default.class,"col-12"));break;case"BO_FORM":case"SAME_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":case"LKP_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":e.default.class=yi(e.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error jCurrency")}break;case"jLabel":switch(t){case"MUTI_FORM":case"BO_FORM":case"FO_FORM":case"SAME_FORM":case"LKP_FORM":e.default.class="col-sm-4 col-12";break;default:console.log("Error jLabel")}break;default:switch(t){case"MUTI_FORM":e.default.class=yi(e.default.class,o%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1");break;case"BO_FORM":case"SAME_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":case"LKP_FORM":e.default.class=yi(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":e.default.class=yi(e.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error")}}if(e.default.ofgroup)if("false"===e.default.ofgroup)e.default.ofgroup="";else if(a.info.form_code.includes("_O9_FEE")&&a.info.title.includes("_O9_FEE")&&JSON.stringify(a).includes("Interest/fee/charge code"))e.default.class_ofgroup="col-xl-12 col-lg-12 col-md-12 col-sm-12","jLabel"===e.inputtype?e.default.class="col-xl-9 col-lg-9 col-md-8 col-sm-7 ":e.default.class="col-xl-3 col-lg-3 col-md-4 col-sm-5 ";else if("FO_FORM"===t)e.default.class_ofgroup="col-xl-12 col-lg-12 col-md-12 col-sm-12",e.default.class="col-xl-3 col-lg-3 col-md-4 col-sm-5 col-12";else{if("MUTI_FORM"===t){let t=0;for(let i=0;i<s.length;i++){const o=s[i];if(o.default.code===e.default.code)break;"jLabel"!==(null===o||void 0===o?void 0:o.inputtype)&&t++}e.default.class_ofgroup=t%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"}else e.default.class_ofgroup="col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right";let i=s[o+1];"jLabel"!==(null===i||void 0===i?void 0:i.inputtype)&&"jLabel"!==(null===e||void 0===e?void 0:e.inputtype)?e.default.class="col-sm-6 col-12":"jLabel"!==(null===e||void 0===e?void 0:e.inputtype)&&(e.default.class="col-sm-8 col-12")}return e}(i,t,o[a-1],a,e,o),i=function(e,t,i,o,a,s){"LKP_FORM"===t&&"cTableDefault"===e.inputtype&&(e.config.paging_mode="MIN");a.info.form_code.endsWith("Search")&&Ai(a)&&(e.config.isLoadDataStart="false");return e}(i,t,o[a-1],0,e),i=function(e,t,i,o,a,s){if("jMutiValue"!==(null===e||void 0===e?void 0:e.inputtype))return e;e.default.name.includes("search")&&(e.config.is_open="true");return e}(i=function(e,t,i,o,a,s){if("cTextInput"!==e.inputtype)return e;Ai(a)&&e.default.code.includes("search")?(e.config.isSearch=!0,e.config.readOnly=!1,e.config.autoWrap=!1):(!e.validate.max||Number(e.validate.max)>50)&&(e.config.autoWrap=!0,e.config.isSearch=!1);return e}(i,0,o[a-1],0,e),0,o[a-1])}))}))})),e}}function yi(e,t){let i=e.replace(/(col[^ ]*|offset[^ ]+)/gm,"");return i=i+" "+t,i}function Ai(e){let t=!1;try{e.list_layout.forEach((e=>{e.list_view.forEach((e=>{e.list_input.forEach((e=>{"cButton"===e.inputtype&&e.default.code.includes("search")&&(t=!0)}))}))}))}catch(i){return!1}return t}const Di={get_info:void 0};class ki extends r.Z{constructor(){super(...arguments),this.loopGetInfo=()=>{Di.get_info=setInterval((async()=>{const e=await vt.getInfo();mt.updateInfo(this.context,e,this.handleStop)}),2e3)},this.handleStart=()=>{vt.notifyAllUser(),mt.handleStart(this.context,(()=>{vt.logoutAllUser();const e=mt.getData(this.context);vt.startSync(e),this.loopGetInfo()}))},this.handleStop=()=>{clearInterval(Di.get_info),mt.handleStop(this.context),vt.handleStop()},this.handleCheckFeature=()=>{const e=this.context.componentConfigDefault,{code:t,name:i}=e;mt.handleSelectFeature(this.context,t,i)},this.addCautionToFO=e=>{let t=a.ZP.cloneJson(e),i={default:{name:a.ZP.getParameterSystem("CAUTION_FO"),code:"check_box_caution",class:"col-sm-12 col-md-12",role:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-1 col-md-1",codeHidden:"1b3677dfcb939dcd"},config:{structable:"",structable_read:"",data_default:"false",action:"",checked_mode:"true_false"},role:{visible:"",disabled:""},property:{danger:"",warning:"true"},validate:{},lang:{vi:"",en:""},configAVD:{},inputtype:"jCheckbox"};return t.info.ruleStrong.push({code:"runFo",inUse:!0,isStart:!0,isStatus:-1,order:1,config:{component_action:"check_box_caution;btn_clear",component_event:"all",txFoActions:'[\n    {\n        "function": "own_O9.checkCaution",\n        "status": "A",\n        "para": ["check_box_caution","btn_accept"]\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',useAction:"true",condition:"",component_result:"btn_accept"},isDidStart:!1,isOpenFromOther:!1}),t.info.ruleStrong.push({code:"calculator",inUse:!0,isStart:!0,isStatus:-1,order:6,config:{component_action:"ref_id",component_result:"check_box_caution",component_event:"all",function_cal:"'@{ref_id}'!==\"\" ? true : false",condition:""},isDidStart:!1,isOpenFromOther:!1}),t.info.ruleStrong.push({code:"visibility",inUse:!0,isStart:!1,isStatus:-1,order:1,config:{component_action:"btn_clear",component_result:"check_box_caution",view_result:"",condition:"",visible:"true",ena_dis:"false",component_event:"on_click",list_config:[]},isDidStart:!1,isOpenFromOther:!1}),t.list_layout[0].list_view[0].list_input.push(i),t},this.handleCheckFunctionFO=async()=>{var e,t;const i=null===(e=this.context)||void 0===e||null===(t=e.infoA)||void 0===t?void 0:t.key_form;if(!i)return;let o=a.ZP.getFormAppAuto(i);o.setLoadingRule(!0);let s=await this.callAPI("O9_ADMIN_SYNC_GET_FO_CONFIG"),n=new vi({});n.setData(JSON.stringify(s.data.data));let r=n.getData().context_auto;this.handleCheckFeature();let l=[],c=[],d=[],h=[];const u=r.list_form||[],p=r.list_menu||[],_=n.getData().list_form_authen;let f=o.callDirFromSupport("getAdvanced",{list_component:"*"},{}).fo_code_filter,g={};for(const a in u){if("*"!==f&&!f.split(";").includes(a.replace("FO_","")))continue;g[a]=!0;const e=u[a],t=e.list_API,i=e.list_form_chil;_[a]&&(e.config=this.addCautionToFO(e.config)),l.push({funtion_code:a.replace("FO_",""),funtion_name:e.config.info.title,api_amount:t.length,form_child_amount:i.length,form_code:a,form_config:bi.quickFix(e.config)});for(const o of i)c.push(bi.quickFix(o));d=d.concat(t)}h=p.filter((e=>g[e.group_menu_function_code]));let m=o.getData();m.form_fo_config=l,m.form_child_configs=c,m.api_fo_config=d,m.menu_fo_config=h,o.putDataAll_andSet(m),o.setLoadingRule(!1)},this.callAPI=(e,t)=>{var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return i[0].input=Object.assign(i[0].input,t),(0,c.Yr)(i,{}).then((t=>a.ZP.foGetData("data",t)||{[e]:[]})).finally((e=>{}))}}}const Oi=ki;class wi extends r.Z{constructor(){super(...arguments),this.changeData=(e,t,i)=>{if(void 0!==e){var o=a.ZP.getFormAppAuto(this.context.infoA.key_form);let i;if(void 0!==o&&o.hasOwnProperty("callDirFromSupport")&&(o.callDirFromSupport("checkValidate",{},{}),o.hasOwnProperty("getFormValidate")&&!o.getFormValidate())){o.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true",checkError:"true"},{}),i=o.getDataAdvanced("");let a=0;for(let o=0;o<i[e].length;o++){let s=i[e][o][t];s.sheet?(s.amount=s.face_value*s.sheet,a+=s.amount):(s.sheet=0,s.amount=0)}return o.putDataAll_andSet(i),o.callDirFromSupport("setAdvanced",{list_component:"denom_cash_balance"},a),!0}}}}}const Ci=wi;class xi extends r.Z{constructor(){super(...arguments),this.applyPrincipal=e=>{var t;let i=a.ZP.getFormAppAuto(this.context.infoA.key_form),o=a.ZP.getFormAppAuto(this.context.infoA_parent.key_form),s=i.callDirFromSupport("getAdvanced",{list_component:"*"},""),n=o.getData(""),r=null===(t=window.moment.utc(s.duedt,"DD/MM/YYYY"))||void 0===t?void 0:t.toDate().getTime(),l=s.amt,c=s.table,d=n.BO_006002.to_date,h=s.dueno,u=a.ZP.context_get("user_acc").working_date,p=!1,_=!0;for(let a=0;a<c.length;a++){const t=c[a][e];if(new Date(t.due_date).getTime()===r&&h!==t.due_number){_=!1;break}}new Date(r).getTime()>new Date(u).getTime()&&new Date(r).getTime()<=new Date(d).getTime()&&0!==l&&_&&(p=!0),i.callDirFromSupport("setCMD",{list_component:"apply",list_view:"",inform:"true",checkError:"false"},{disabled:p?"false":"true"})},this.check_paymentlist_crd_account=(e,t)=>{let i=a.ZP.getFormAppAuto(this.context.infoA.key_form).getDataForm("");if(void 0!==i.BO_006002){if("B"===i.BO_006002.credit_type||"5"===i.BO_006002.credit_status)return!0;let o=i.BO_006002[t],a=i.BO_006002.credit_limit,s=0;if(void 0!==o&&o.forEach((e=>{const i=e[t];s+=parseFloat(i.amount)})),parseFloat(a.toFixed(2))===parseFloat(s.toFixed(2)))return!0;this.showToast(e,!1)}return!1},this.showToast=(e,t)=>{var i={};switch(t){case!0:i={class_:"success",icon:"fa fa-check",title:e+" successfully",time:(new Date).getTime()+"",description:e+" Successfully",data:{},action:{}};break;case!1:i={class_:"error",icon:"fa fa-check",title:e+" error",time:(new Date).getTime()+"",description:e+" error",data:{},action:{}};break;case"error":i={class_:"error",icon:"fa fa-check",title:e,time:(new Date).getTime()+"",description:e,data:{},action:{}}}a.ZP.pushNotify("notifyToast",i,{}),a.ZP.callAllScreenListen()}}}const Si=xi;var Mi,Pi,Ti,Ii,Ni,Fi,Li,Ei="",ji={};class Zi extends r.Z{constructor(){super(...arguments),this.offLoad=()=>{void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form&&(void 0!==(Ti=a.ZP.getFormAppAuto(this.context.infoA.key_form))?Ti.hasOwnProperty("setLoadingAction")&&Ti.setLoadingAction(!1):a.ZP.AppException("#dashboard.offLoad","dashboard is undefined","system"))},this.reloadData=()=>{void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form&&(void 0!==(Mi=a.ZP.getFormAppAuto(this.context.infoA.key_form))?Mi.hasOwnProperty("reload")&&Mi.reload():a.ZP.AppException("#dashboard.reloadData","dashboard is undefined","system"))},this.dataToForm=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form)if(void 0!==(Pi=a.ZP.getFormAppAuto(this.context.infoA.key_form))){if(Pi.setLoadingAction(!0),Pi.hasOwnProperty("setFormValidateFromFunctionClient")&&Pi.setFormValidateFromFunctionClient(!1),Pi.hasOwnProperty("callDirFromSupport")){Ei="",void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(Ei=this.input.config_table.learn_api_data),Ii=a.ZP.getDataOOPFormServer(this.input,Ei),Ni=Ii[this.context.infoA.key_form];for(let e in Ni)if(Array.isArray(Ni[e])){let t=[];for(let i=0;i<Ni[e].length;i++)"object"===typeof Ni[e][i][e]?t.push(Ni[e][i]):t.push({[e]:Ni[e][i]});Ii[e]=t}Fi=a.ZP.cloneJson(Ii),Li=Pi.getData(),ji={};for(const e in Li)if("object"===typeof Li[e]&&!Array.isArray(!Li[e])){null===Li[e]?null===Ii[e]?ji[e]=null:ji[e]=Ii[e]:ji[e]=Object.assign(a.ZP.cloneJson(Li[e]),a.ZP.cloneJson(Ii[e]||{}));for(const t in Li[e])Array.isArray(Li[e][t])&&(Li[t]=a.ZP.cloneJson(Li[e][t]))}for(const e in Fi)if("object"===typeof Fi[e]&&!Array.isArray(!Fi[e])&&!Number(e)&&"0"!==e)for(const t in Fi[e])Array.isArray(!Fi[e][t])||(Li[e]||(Li[e]={}),Li[e][t]=Fi[e][t]);for(const e in this.input)-1!==e.indexOf("_paging")&&(Li[e]=this.input[e]);Pi.putDataAll_andSet(Li),Pi.hasOwnProperty("setLoadingAction")&&Pi.setLoadingAction(!1),Pi.hasOwnProperty("clearTimeOut")&&Pi.clearTimeOut()}}else a.ZP.AppException("#dashboard.dataToForm","dashboard is undefined","system");else a.ZP.AppException("#dashboard.dataToForm","dashboard is undefined","system");else a.ZP.AppException("#dashboard.dataToForm","infoA is undefined","system")}}}const Ri={crd_payment_ncbs:Si,dashboard:Zi,cashDenom:Ci,own_O9_sync:Oi,own_O9_fee:Re,own_O9:Me,own_print:we,own_o9_calender:Ne,system:y,message:o.Z,event:N,form:L,formsql:j,chat:R,masterdata:z,own:he,runFunc:pe,formAPI:fe,formChild:me,support:be,msgSystem:Ae,supportKeyboard:xe,calender:Te,formJoin:Le,schedule:We,formModal:Je,chart:Xe,clipboard:et,downloadFile:ot,jobProcess:st}},8209:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const o=class{constructor(e,t,i,o,a,s,n,r){this.getInputAction=()=>this.input_action,this.getInput=()=>this.input,this.context=void 0===e?{}:e,this.input=void 0===t?{}:t,this.input_action=void 0===i?{}:i,this.fo_step=o,this.fo_arr_step=a,this.input_fo=s,this.list_bo_new=n,this.fo_arr=r}addPackFo(e,t){void 0!==t&&(this.input_action[e]=t)}buildPackRollBack(){return{fo_step:this.fo_step,fo_arr_step:this.fo_arr_step,context:this.context,input_fo:this.input_fo,input_action:this.input_action,list_bo_new:this.list_bo_new,fo_arr:this.fo_arr}}}},3702:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var o=i(1896),a=i(5842),s=i(8209);class n extends s.Z{constructor(){super(...arguments),this.showAlert=()=>{void 0!==this.input.lang?alert(a.ZP.getLang(this.input.lang)):a.ZP.AppException("#message.showAlert","lang is undefined","data")},this.countdownLogout=()=>{let e=10;void 0!==a.ZP.getParameterSystem("system_countdown_logout")&&(e=a.ZP.getParameterSystem("system_countdown_logout"));let t=setInterval((()=>{0===e&&(clearInterval(t),(0,o.Yr)([{txcode:"#sys:bo-projectLogin-listApplication",input:{}}],{}).then((e=>{var t,i;const s=(null===(t=a.ZP.foGetData("list_application",e).find((e=>e.list_application.list_appliaction_id===a.Py)))||void 0===t||null===(i=t.list_application)||void 0===i?void 0:i.list_application_bo_logout)||"#sys:bo-delete-session";(0,o.Yr)([{txcode:s,input:{token_webui:a.ZP.getSessionFromStore()}}],{})}))),(0,a.zF)(!0,{title:a.ZP.getLang("system_countdown_logout")+e,btn:"",list_fo:"",list_fo_start:"",color:"warning"}),e-=1}),1e3)},this.showConsole=()=>{void 0!==this.input.lang?console.log(a.ZP.getLang(this.input.lang)):a.ZP.AppException("#message.showConsole","lang is undefined","data")},this.setExtendToken=()=>{console.log("setExtendToken===",this.input),void 0!==this.input.extend_token&&(0,a.uC)(this.input.extend_token)},this.showToastConfirm=()=>{var e,t;let i="";i=this.input.lang_confirm?a.ZP.getLang(this.input.lang_confirm):this.input.lang?a.ZP.getLang(this.input.lang):null!==(e=this.context.componentConfigDefault)&&void 0!==e&&e.name?a.ZP.getLang(null===(t=this.context.componentConfigDefault)||void 0===t?void 0:t.name):a.ZP.getLang("Action"),i+=" ",this.input.lang_param_replace&&this.input.data_param&&(i=i.replace(this.input.lang_param_replace,this.input.data_param));const o=new Date;let s="",n="";if(this.input.toast_type)if("success"===this.input.toast_type)s="success",n="fa fa-check",i+=a.ZP.getLang("success");else s="error",n="fa fa-bullhorn",i+=a.ZP.getLang("error");else{let e=this.input.lang;switch(e){case"sysActionOk":case"sysActionSaveOk":case"sysGetInfoOk":s="success",n="fa fa-check",i+=a.ZP.getLang("success");break;case"sysActionSaveError":s="error",n="fa fa-exclamation",i+=a.ZP.getLang("error");break;default:String(e).toLowerCase().includes("error")||String(e).toLowerCase().includes("fail")?(s="error",n="fa fa-bullhorn",i+=a.ZP.getLang("error")):(s="success",n="fa fa-bullhorn",i+=a.ZP.getLang("success"))}}var r={class_:s,icon:n,title:a.ZP.getLang("systemTitle"),time:o.getTime()+"",description:i,data:{},action:{}};if(a.ZP.pushNotify("notifyToast",r,{}),a.ZP.pushNotify("notifyDefault",r,{}),void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var l=a.ZP.getFormAppAuto(this.context.infoA.key_form);if(void 0!==l&&l.hasOwnProperty("getLoadingAction")){let e=!1;e=l.getLoadingAction(),e&&setTimeout((()=>{l.hasOwnProperty("setLoadingAction")&&l.setLoadingAction(!1)}),500)}}a.ZP.callAllScreenListen()},this.showToast=()=>{if(void 0!==this.input.JWEBUI_O9_approve&&this.input.JWEBUI_O9_approve.isOpen){if(void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form&&void 0!==(e=a.ZP.getFormAppAuto(this.context.infoA.key_form))&&e.hasOwnProperty("getLoadingAction")){let t=!1;t=e.getLoadingAction(),t&&e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1)}}else if(void 0!==this.input.lang){const i=new Date;let o=this.input.lang,s="",n="";switch(o){case"sysActionOk":case"sysActionSaveOk":case"sysGetInfoOk":s="success",n="fa fa-check";break;case"sysActionSaveError":s="error",n="fa fa-exclamation";break;case"sysActionSearchEmpty":s="warning",n="fa fa-exclamation";break;default:String(o).toLowerCase().includes("error")||String(o).toLowerCase().includes("fail")?(s="error",n="fa fa-bullhorn"):(s="success",n="fa fa-bullhorn")}var e,t={class_:s,icon:n,title:a.ZP.getLang("systemTitle"),time:i.getTime()+"",description:a.ZP.getLang(this.input.lang),data:{},action:{}};if(a.ZP.pushNotify("notifyToast",t,{}),a.ZP.pushNotify("notifyDefault",t,{}),void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form)if(void 0!==(e=a.ZP.getFormAppAuto(this.context.infoA.key_form))&&e.hasOwnProperty("getLoadingAction")){let t=!1;t=e.getLoadingAction(),t&&e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1)}a.ZP.callAllScreenListen()}else a.ZP.AppException("#message.showToast","lang is undefined","data")},this.showNotify=()=>{if(void 0!==this.input&&void 0!==this.input.notifyServer){for(var e=0;e<this.input.notifyServer.length;e++){var t=this.input.notifyServer[e];void 0!==t.type_notify&&void 0!==t.mess&&a.ZP.pushAllNotify(t.type_notify,[t.mess])}a.ZP.callAllScreenListen()}},this.chat=e=>{},this.showMessageModal=(e,t)=>{let i={title:a.ZP.getLang(e),content:a.ZP.getLang(t)};var o=this.buildPackRollBack();return a.ZP.confirmInfo(i,[{name:"message_modal_ok",color:"primary",icon:"fa-floppy-o",val:!0}],o),!0}}}const r=n},1843:e=>{"use strict";var t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(a){return!1}}()?Object.assign:function(e,a){for(var s,n,r=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))i.call(s,c)&&(r[c]=s[c]);if(t){n=t(s);for(var d=0;d<n.length;d++)o.call(s,n[d])&&(r[n[d]]=s[n[d]])}}return r}},534:(e,t,i)=>{"use strict";var o=i(7313),a=i(1843),s=i(2224);function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!o)throw Error(n(227));function r(e,t,i,o,a,s,n,r,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(d){this.onError(d)}}var l=!1,c=null,d=!1,h=null,u={onError:function(e){l=!0,c=e}};function p(e,t,i,o,a,s,n,d,h){l=!1,c=null,r.apply(u,arguments)}var _=null,f=null,g=null;function m(e,t,i){var o=e.type||"unknown-event";e.currentTarget=g(i),function(e,t,i,o,a,s,r,u,_){if(p.apply(this,arguments),l){if(!l)throw Error(n(198));var f=c;l=!1,c=null,d||(d=!0,h=f)}}(o,t,void 0,e),e.currentTarget=null}var v=null,b={};function y(){if(v)for(var e in b){var t=b[e],i=v.indexOf(e);if(!(-1<i))throw Error(n(96,e));if(!D[i]){if(!t.extractEvents)throw Error(n(97,e));for(var o in D[i]=t,i=t.eventTypes){var a=void 0,s=i[o],r=t,l=o;if(k.hasOwnProperty(l))throw Error(n(99,l));k[l]=s;var c=s.phasedRegistrationNames;if(c){for(a in c)c.hasOwnProperty(a)&&A(c[a],r,l);a=!0}else s.registrationName?(A(s.registrationName,r,l),a=!0):a=!1;if(!a)throw Error(n(98,o,e))}}}}function A(e,t,i){if(O[e])throw Error(n(100,e));O[e]=t,w[e]=t.eventTypes[i].dependencies}var D=[],k={},O={},w={};function C(e){var t,i=!1;for(t in e)if(e.hasOwnProperty(t)){var o=e[t];if(!b.hasOwnProperty(t)||b[t]!==o){if(b[t])throw Error(n(102,t));b[t]=o,i=!0}}i&&y()}var x=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),S=null,M=null,P=null;function T(e){if(e=f(e)){if("function"!==typeof S)throw Error(n(280));var t=e.stateNode;t&&(t=_(t),S(e.stateNode,e.type,t))}}function I(e){M?P?P.push(e):P=[e]:M=e}function N(){if(M){var e=M,t=P;if(P=M=null,T(e),t)for(e=0;e<t.length;e++)T(t[e])}}function F(e,t){return e(t)}function L(e,t,i,o,a){return e(t,i,o,a)}function E(){}var j=F,Z=!1,R=!1;function Q(){null===M&&null===P||(E(),N())}function z(e,t,i){if(R)return e(t,i);R=!0;try{return j(e,t,i)}finally{R=!1,Q()}}var U=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B=Object.prototype.hasOwnProperty,Y={},H={};function V(e,t,i,o,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){W[e]=new V(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];W[t]=new V(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){W[e]=new V(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){W[e]=new V(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){W[e]=new V(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){W[e]=new V(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){W[e]=new V(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){W[e]=new V(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){W[e]=new V(e,5,!1,e.toLowerCase(),null,!1)}));var G=/[\-:]([a-z])/g;function J(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(G,J);W[t]=new V(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(G,J);W[t]=new V(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(G,J);W[t]=new V(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){W[e]=new V(e,1,!1,e.toLowerCase(),null,!1)})),W.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){W[e]=new V(e,1,!1,e.toLowerCase(),null,!0)}));var q=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function K(e,t,i,o){var a=W.hasOwnProperty(t)?W[t]:null;(null!==a?0===a.type:!o&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,i,o){if(null===t||"undefined"===typeof t||function(e,t,i,o){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!o&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,o))return!0;if(o)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,a,o)&&(i=null),o||null===a?function(e){return!!B.call(H,e)||!B.call(Y,e)&&(U.test(e)?H[e]=!0:(Y[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):a.mustUseProperty?e[a.propertyName]=null===i?3!==a.type&&"":i:(t=a.attributeName,o=a.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(a=a.type)||4===a&&!0===i?"":""+i,o?e.setAttributeNS(o,t,i):e.setAttribute(t,i))))}q.hasOwnProperty("ReactCurrentDispatcher")||(q.ReactCurrentDispatcher={current:null}),q.hasOwnProperty("ReactCurrentBatchConfig")||(q.ReactCurrentBatchConfig={suspense:null});var X=/^(.*)[\\\/]/,$="function"===typeof Symbol&&Symbol.for,ee=$?Symbol.for("react.element"):60103,te=$?Symbol.for("react.portal"):60106,ie=$?Symbol.for("react.fragment"):60107,oe=$?Symbol.for("react.strict_mode"):60108,ae=$?Symbol.for("react.profiler"):60114,se=$?Symbol.for("react.provider"):60109,ne=$?Symbol.for("react.context"):60110,re=$?Symbol.for("react.concurrent_mode"):60111,le=$?Symbol.for("react.forward_ref"):60112,ce=$?Symbol.for("react.suspense"):60113,de=$?Symbol.for("react.suspense_list"):60120,he=$?Symbol.for("react.memo"):60115,ue=$?Symbol.for("react.lazy"):60116,pe=$?Symbol.for("react.block"):60121,_e="function"===typeof Symbol&&Symbol.iterator;function fe(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=_e&&e[_e]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ie:return"Fragment";case te:return"Portal";case ae:return"Profiler";case oe:return"StrictMode";case ce:return"Suspense";case de:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case ne:return"Context.Consumer";case se:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case pe:return ge(e.render);case ue:if(e=1===e._status?e._result:null)return ge(e)}return null}function me(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var i="";break e;default:var o=e._debugOwner,a=e._debugSource,s=ge(e.type);i=null,o&&(i=ge(o.type)),o=s,s="",a?s=" (at "+a.fileName.replace(X,"")+":"+a.lineNumber+")":i&&(s=" (created by "+i+")"),i="\n    in "+(o||"Unknown")+s}t+=i,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ye(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var a=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){o=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(e){o=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ae(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=be(e)?e.checked?"true":"false":e.value),(e=o)!==i&&(t.setValue(e),!0)}function De(e,t){var i=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function ke(e,t){var i=null==t.defaultValue?"":t.defaultValue,o=null!=t.checked?t.checked:t.defaultChecked;i=ve(null!=t.value?t.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Oe(e,t){null!=(t=t.checked)&&K(e,"checked",t,!1)}function we(e,t){Oe(e,t);var i=ve(t.value),o=t.type;if(null!=i)"number"===o?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===o||"reset"===o)return void e.removeAttribute("value");t.hasOwnProperty("value")?xe(e,t.type,i):t.hasOwnProperty("defaultValue")&&xe(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ce(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!("submit"!==o&&"reset"!==o||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function xe(e,t,i){"number"===t&&e.ownerDocument.activeElement===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}function Se(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return o.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Me(e,t,i,o){if(e=e.options,t){t={};for(var a=0;a<i.length;a++)t["$"+i[a]]=!0;for(i=0;i<e.length;i++)a=t.hasOwnProperty("$"+e[i].value),e[i].selected!==a&&(e[i].selected=a),a&&o&&(e[i].defaultSelected=!0)}else{for(i=""+ve(i),t=null,a=0;a<e.length;a++){if(e[a].value===i)return e[a].selected=!0,void(o&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function Pe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Te(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(n(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(n(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:ve(i)}}function Ie(e,t){var i=ve(t.value),o=ve(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=o&&(e.defaultValue=""+o)}function Ne(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Fe="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Ee(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function je(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ee(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ze,Re,Qe=(Re=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((Ze=Ze||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ze.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,o){MSApp.execUnsafeLocalFunction((function(){return Re(e,t)}))}:Re);function ze(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}function Ue(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Be={animationend:Ue("Animation","AnimationEnd"),animationiteration:Ue("Animation","AnimationIteration"),animationstart:Ue("Animation","AnimationStart"),transitionend:Ue("Transition","TransitionEnd")},Ye={},He={};function Ve(e){if(Ye[e])return Ye[e];if(!Be[e])return e;var t,i=Be[e];for(t in i)if(i.hasOwnProperty(t)&&t in He)return Ye[e]=i[t];return e}x&&(He=document.createElement("div").style,"AnimationEvent"in window||(delete Be.animationend.animation,delete Be.animationiteration.animation,delete Be.animationstart.animation),"TransitionEvent"in window||delete Be.transitionend.transition);var We=Ve("animationend"),Ge=Ve("animationiteration"),Je=Ve("animationstart"),qe=Ve("transitionend"),Ke="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xe=new("function"===typeof WeakMap?WeakMap:Map);function $e(e){var t=Xe.get(e);return void 0===t&&(t=new Map,Xe.set(e,t)),t}function et(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function it(e){if(et(e)!==e)throw Error(n(188))}function ot(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(n(188));return t!==e?null:e}for(var i=e,o=t;;){var a=i.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(o=a.return)){i=o;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===i)return it(a),e;if(s===o)return it(a),t;s=s.sibling}throw Error(n(188))}if(i.return!==o.return)i=a,o=s;else{for(var r=!1,l=a.child;l;){if(l===i){r=!0,i=a,o=s;break}if(l===o){r=!0,o=a,i=s;break}l=l.sibling}if(!r){for(l=s.child;l;){if(l===i){r=!0,i=s,o=a;break}if(l===o){r=!0,o=s,i=a;break}l=l.sibling}if(!r)throw Error(n(189))}}if(i.alternate!==o)throw Error(n(190))}if(3!==i.tag)throw Error(n(188));return i.stateNode.current===i?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function at(e,t){if(null==t)throw Error(n(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function st(e,t,i){Array.isArray(e)?e.forEach(t,i):e&&t.call(i,e)}var nt=null;function rt(e){if(e){var t=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(t))for(var o=0;o<t.length&&!e.isPropagationStopped();o++)m(e,t[o],i[o]);else t&&m(e,t,i);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function lt(e){if(null!==e&&(nt=at(nt,e)),e=nt,nt=null,e){if(st(e,rt),nt)throw Error(n(95));if(d)throw e=h,d=!1,h=null,e}}function ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function dt(e){if(!x)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ht=[];function ut(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ht.length&&ht.push(e)}function pt(e,t,i,o){if(ht.length){var a=ht.pop();return a.topLevelType=e,a.eventSystemFlags=o,a.nativeEvent=t,a.targetInst=i,a}return{topLevelType:e,eventSystemFlags:o,nativeEvent:t,targetInst:i,ancestors:[]}}function _t(e){var t=e.targetInst,i=t;do{if(!i){e.ancestors.push(i);break}var o=i;if(3===o.tag)o=o.stateNode.containerInfo;else{for(;o.return;)o=o.return;o=3!==o.tag?null:o.stateNode.containerInfo}if(!o)break;5!==(t=i.tag)&&6!==t||e.ancestors.push(i),i=Ii(o)}while(i);for(i=0;i<e.ancestors.length;i++){t=e.ancestors[i];var a=ct(e.nativeEvent);o=e.topLevelType;var s=e.nativeEvent,n=e.eventSystemFlags;0===i&&(n|=64);for(var r=null,l=0;l<D.length;l++){var c=D[l];c&&(c=c.extractEvents(o,t,s,a,n))&&(r=at(r,c))}lt(r)}}function ft(e,t,i){if(!i.has(e)){switch(e){case"scroll":Jt(t,"scroll",!0);break;case"focus":case"blur":Jt(t,"focus",!0),Jt(t,"blur",!0),i.set("blur",null),i.set("focus",null);break;case"cancel":case"close":dt(e)&&Jt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ke.indexOf(e)&&Gt(e,t)}i.set(e,null)}}var gt,mt,vt,bt=!1,yt=[],At=null,Dt=null,kt=null,Ot=new Map,wt=new Map,Ct=[],xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),St="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Mt(e,t,i,o,a){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|i,nativeEvent:a,container:o}}function Pt(e,t){switch(e){case"focus":case"blur":At=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wt.delete(t.pointerId)}}function Tt(e,t,i,o,a,s){return null===e||e.nativeEvent!==s?(e=Mt(t,i,o,a,s),null!==t&&(null!==(t=Ni(t))&&mt(t)),e):(e.eventSystemFlags|=o,e)}function It(e){var t=Ii(e.target);if(null!==t){var i=et(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=tt(i)))return e.blockedOn=t,void s.unstable_runWithPriority(e.priority,(function(){vt(i)}))}else if(3===t&&i.stateNode.hydrate)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;var t=$t(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var i=Ni(t);return null!==i&&mt(i),e.blockedOn=t,!1}return!0}function Ft(e,t,i){Nt(e)&&i.delete(t)}function Lt(){for(bt=!1;0<yt.length;){var e=yt[0];if(null!==e.blockedOn){null!==(e=Ni(e.blockedOn))&&gt(e);break}var t=$t(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:yt.shift()}null!==At&&Nt(At)&&(At=null),null!==Dt&&Nt(Dt)&&(Dt=null),null!==kt&&Nt(kt)&&(kt=null),Ot.forEach(Ft),wt.forEach(Ft)}function Et(e,t){e.blockedOn===t&&(e.blockedOn=null,bt||(bt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Lt)))}function jt(e){function t(t){return Et(t,e)}if(0<yt.length){Et(yt[0],e);for(var i=1;i<yt.length;i++){var o=yt[i];o.blockedOn===e&&(o.blockedOn=null)}}for(null!==At&&Et(At,e),null!==Dt&&Et(Dt,e),null!==kt&&Et(kt,e),Ot.forEach(t),wt.forEach(t),i=0;i<Ct.length;i++)(o=Ct[i]).blockedOn===e&&(o.blockedOn=null);for(;0<Ct.length&&null===(i=Ct[0]).blockedOn;)It(i),null===i.blockedOn&&Ct.shift()}var Zt={},Rt=new Map,Qt=new Map,zt=["abort","abort",We,"animationEnd",Ge,"animationIteration",Je,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",qe,"transitionEnd","waiting","waiting"];function Ut(e,t){for(var i=0;i<e.length;i+=2){var o=e[i],a=e[i+1],s="on"+(a[0].toUpperCase()+a.slice(1));s={phasedRegistrationNames:{bubbled:s,captured:s+"Capture"},dependencies:[o],eventPriority:t},Qt.set(o,t),Rt.set(o,s),Zt[a]=s}}Ut("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ut("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ut(zt,2);for(var Bt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Yt=0;Yt<Bt.length;Yt++)Qt.set(Bt[Yt],0);var Ht=s.unstable_UserBlockingPriority,Vt=s.unstable_runWithPriority,Wt=!0;function Gt(e,t){Jt(t,e,!1)}function Jt(e,t,i){var o=Qt.get(t);switch(void 0===o?2:o){case 0:o=qt.bind(null,t,1,e);break;case 1:o=Kt.bind(null,t,1,e);break;default:o=Xt.bind(null,t,1,e)}i?e.addEventListener(t,o,!0):e.addEventListener(t,o,!1)}function qt(e,t,i,o){Z||E();var a=Xt,s=Z;Z=!0;try{L(a,e,t,i,o)}finally{(Z=s)||Q()}}function Kt(e,t,i,o){Vt(Ht,Xt.bind(null,e,t,i,o))}function Xt(e,t,i,o){if(Wt)if(0<yt.length&&-1<xt.indexOf(e))e=Mt(null,e,t,i,o),yt.push(e);else{var a=$t(e,t,i,o);if(null===a)Pt(e,o);else if(-1<xt.indexOf(e))e=Mt(a,e,t,i,o),yt.push(e);else if(!function(e,t,i,o,a){switch(t){case"focus":return At=Tt(At,e,t,i,o,a),!0;case"dragenter":return Dt=Tt(Dt,e,t,i,o,a),!0;case"mouseover":return kt=Tt(kt,e,t,i,o,a),!0;case"pointerover":var s=a.pointerId;return Ot.set(s,Tt(Ot.get(s)||null,e,t,i,o,a)),!0;case"gotpointercapture":return s=a.pointerId,wt.set(s,Tt(wt.get(s)||null,e,t,i,o,a)),!0}return!1}(a,e,t,i,o)){Pt(e,o),e=pt(e,o,null,t);try{z(_t,e)}finally{ut(e)}}}}function $t(e,t,i,o){if(null!==(i=Ii(i=ct(o)))){var a=et(i);if(null===a)i=null;else{var s=a.tag;if(13===s){if(null!==(i=tt(a)))return i;i=null}else if(3===s){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}e=pt(e,o,i,t);try{z(_t,e)}finally{ut(e)}return null}var ei={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ti=["Webkit","ms","Moz","O"];function ii(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||ei.hasOwnProperty(e)&&ei[e]?(""+t).trim():t+"px"}function oi(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var o=0===i.indexOf("--"),a=ii(i,t[i],o);"float"===i&&(i="cssFloat"),o?e.setProperty(i,a):e[i]=a}}Object.keys(ei).forEach((function(e){ti.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ei[t]=ei[e]}))}));var ai=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function si(e,t){if(t){if(ai[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(n(62,""))}}function ni(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ri=Fe;function li(e,t){var i=$e(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=w[t];for(var o=0;o<t.length;o++)ft(t[o],e,i)}function ci(){}function di(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function hi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var i,o=hi(e);for(e=0;o;){if(3===o.nodeType){if(i=e+o.textContent.length,e<=t&&i>=t)return{node:o,offset:t-e};e=i}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=hi(o)}}function pi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function _i(){for(var e=window,t=di();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(o){i=!1}if(!i)break;t=di((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gi="$",mi="/$",vi="$?",bi="$!",yi=null,Ai=null;function Di(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function ki(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Oi="function"===typeof setTimeout?setTimeout:void 0,wi="function"===typeof clearTimeout?clearTimeout:void 0;function Ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function xi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if(i===gi||i===bi||i===vi){if(0===t)return e;t--}else i===mi&&t++}e=e.previousSibling}return null}var Si=Math.random().toString(36).slice(2),Mi="__reactInternalInstance$"+Si,Pi="__reactEventHandlers$"+Si,Ti="__reactContainere$"+Si;function Ii(e){var t=e[Mi];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ti]||i[Mi]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=xi(e);null!==e;){if(i=e[Mi])return i;e=xi(e)}return t}i=(e=i).parentNode}return null}function Ni(e){return!(e=e[Mi]||e[Ti])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Fi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function Li(e){return e[Pi]||null}function Ei(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function ji(e,t){var i=e.stateNode;if(!i)return null;var o=_(i);if(!o)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(n(231,t,typeof i));return i}function Zi(e,t,i){(t=ji(e,i.dispatchConfig.phasedRegistrationNames[t]))&&(i._dispatchListeners=at(i._dispatchListeners,t),i._dispatchInstances=at(i._dispatchInstances,e))}function Ri(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,i=[];t;)i.push(t),t=Ei(t);for(t=i.length;0<t--;)Zi(i[t],"captured",e);for(t=0;t<i.length;t++)Zi(i[t],"bubbled",e)}}function Qi(e,t,i){e&&i&&i.dispatchConfig.registrationName&&(t=ji(e,i.dispatchConfig.registrationName))&&(i._dispatchListeners=at(i._dispatchListeners,t),i._dispatchInstances=at(i._dispatchInstances,e))}function zi(e){e&&e.dispatchConfig.registrationName&&Qi(e._targetInst,null,e)}function Ui(e){st(e,Ri)}var Bi=null,Yi=null,Hi=null;function Vi(){if(Hi)return Hi;var e,t,i=Yi,o=i.length,a="value"in Bi?Bi.value:Bi.textContent,s=a.length;for(e=0;e<o&&i[e]===a[e];e++);var n=o-e;for(t=1;t<=n&&i[o-t]===a[s-t];t++);return Hi=a.slice(e,1<t?1-t:void 0)}function Wi(){return!0}function Gi(){return!1}function Ji(e,t,i,o){for(var a in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=i,e=this.constructor.Interface)e.hasOwnProperty(a)&&((t=e[a])?this[a]=t(i):"target"===a?this.target=o:this[a]=i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Wi:Gi,this.isPropagationStopped=Gi,this}function qi(e,t,i,o){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,e,t,i,o),a}return new this(e,t,i,o)}function Ki(e){if(!(e instanceof this))throw Error(n(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Xi(e){e.eventPool=[],e.getPooled=qi,e.release=Ki}a(Ji.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){this.isPersistent=Wi},isPersistent:Gi,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Gi,this._dispatchInstances=this._dispatchListeners=null}}),Ji.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Ji.extend=function(e){function t(){}function i(){return o.apply(this,arguments)}var o=this;t.prototype=o.prototype;var s=new t;return a(s,i.prototype),i.prototype=s,i.prototype.constructor=i,i.Interface=a({},o.Interface,e),i.extend=o.extend,Xi(i),i},Xi(Ji);var $i=Ji.extend({data:null}),eo=Ji.extend({data:null}),to=[9,13,27,32],io=x&&"CompositionEvent"in window,oo=null;x&&"documentMode"in document&&(oo=document.documentMode);var ao=x&&"TextEvent"in window&&!oo,so=x&&(!io||oo&&8<oo&&11>=oo),no=String.fromCharCode(32),ro={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},lo=!1;function co(e,t){switch(e){case"keyup":return-1!==to.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ho(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var uo=!1;var po={eventTypes:ro,extractEvents:function(e,t,i,o){var a;if(io)e:{switch(e){case"compositionstart":var s=ro.compositionStart;break e;case"compositionend":s=ro.compositionEnd;break e;case"compositionupdate":s=ro.compositionUpdate;break e}s=void 0}else uo?co(e,i)&&(s=ro.compositionEnd):"keydown"===e&&229===i.keyCode&&(s=ro.compositionStart);return s?(so&&"ko"!==i.locale&&(uo||s!==ro.compositionStart?s===ro.compositionEnd&&uo&&(a=Vi()):(Yi="value"in(Bi=o)?Bi.value:Bi.textContent,uo=!0)),s=$i.getPooled(s,t,i,o),a?s.data=a:null!==(a=ho(i))&&(s.data=a),Ui(s),a=s):a=null,(e=ao?function(e,t){switch(e){case"compositionend":return ho(t);case"keypress":return 32!==t.which?null:(lo=!0,no);case"textInput":return(e=t.data)===no&&lo?null:e;default:return null}}(e,i):function(e,t){if(uo)return"compositionend"===e||!io&&co(e,t)?(e=Vi(),Hi=Yi=Bi=null,uo=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return so&&"ko"!==t.locale?null:t.data}}(e,i))?((t=eo.getPooled(ro.beforeInput,t,i,o)).data=e,Ui(t)):t=null,null===a?t:null===t?a:[a,t]}},_o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!_o[e.type]:"textarea"===t}var go={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function mo(e,t,i){return(e=Ji.getPooled(go.change,e,t,i)).type="change",I(i),Ui(e),e}var vo=null,bo=null;function yo(e){lt(e)}function Ao(e){if(Ae(Fi(e)))return e}function Do(e,t){if("change"===e)return t}var ko=!1;function Oo(){vo&&(vo.detachEvent("onpropertychange",wo),bo=vo=null)}function wo(e){if("value"===e.propertyName&&Ao(bo))if(e=mo(bo,e,ct(e)),Z)lt(e);else{Z=!0;try{F(yo,e)}finally{Z=!1,Q()}}}function Co(e,t,i){"focus"===e?(Oo(),bo=i,(vo=t).attachEvent("onpropertychange",wo)):"blur"===e&&Oo()}function xo(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ao(bo)}function So(e,t){if("click"===e)return Ao(t)}function Mo(e,t){if("input"===e||"change"===e)return Ao(t)}x&&(ko=dt("input")&&(!document.documentMode||9<document.documentMode));var Po={eventTypes:go,_isInputEventSupported:ko,extractEvents:function(e,t,i,o){var a=t?Fi(t):window,s=a.nodeName&&a.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===a.type)var n=Do;else if(fo(a))if(ko)n=Mo;else{n=xo;var r=Co}else(s=a.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(n=So);if(n&&(n=n(e,t)))return mo(n,i,o);r&&r(e,a,t),"blur"===e&&(e=a._wrapperState)&&e.controlled&&"number"===a.type&&xe(a,"number",a.value)}},To=Ji.extend({view:null,detail:null}),Io={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function No(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Io[e])&&!!t[e]}function Fo(){return No}var Lo=0,Eo=0,jo=!1,Zo=!1,Ro=To.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Fo,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Lo;return Lo=e.screenX,jo?"mousemove"===e.type?e.screenX-t:0:(jo=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Eo;return Eo=e.screenY,Zo?"mousemove"===e.type?e.screenY-t:0:(Zo=!0,0)}}),Qo=Ro.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),zo={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Uo={eventTypes:zo,extractEvents:function(e,t,i,o,a){var s="mouseover"===e||"pointerover"===e,n="mouseout"===e||"pointerout"===e;if(s&&0===(32&a)&&(i.relatedTarget||i.fromElement)||!n&&!s)return null;(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,n)?(n=t,null!==(t=(t=i.relatedTarget||i.toElement)?Ii(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):n=null;if(n===t)return null;if("mouseout"===e||"mouseover"===e)var r=Ro,l=zo.mouseLeave,c=zo.mouseEnter,d="mouse";else"pointerout"!==e&&"pointerover"!==e||(r=Qo,l=zo.pointerLeave,c=zo.pointerEnter,d="pointer");if(e=null==n?s:Fi(n),s=null==t?s:Fi(t),(l=r.getPooled(l,n,i,o)).type=d+"leave",l.target=e,l.relatedTarget=s,(i=r.getPooled(c,t,i,o)).type=d+"enter",i.target=s,i.relatedTarget=e,d=t,(o=n)&&d)e:{for(c=d,n=0,e=r=o;e;e=Ei(e))n++;for(e=0,t=c;t;t=Ei(t))e++;for(;0<n-e;)r=Ei(r),n--;for(;0<e-n;)c=Ei(c),e--;for(;n--;){if(r===c||r===c.alternate)break e;r=Ei(r),c=Ei(c)}r=null}else r=null;for(c=r,r=[];o&&o!==c&&(null===(n=o.alternate)||n!==c);)r.push(o),o=Ei(o);for(o=[];d&&d!==c&&(null===(n=d.alternate)||n!==c);)o.push(d),d=Ei(d);for(d=0;d<r.length;d++)Qi(r[d],"bubbled",l);for(d=o.length;0<d--;)Qi(o[d],"captured",i);return 0===(64&a)?[l]:[l,i]}};var Bo="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Yo=Object.prototype.hasOwnProperty;function Ho(e,t){if(Bo(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++)if(!Yo.call(t,i[o])||!Bo(e[i[o]],t[i[o]]))return!1;return!0}var Vo=x&&"documentMode"in document&&11>=document.documentMode,Wo={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Go=null,Jo=null,qo=null,Ko=!1;function Xo(e,t){var i=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Ko||null==Go||Go!==di(i)?null:("selectionStart"in(i=Go)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},qo&&Ho(qo,i)?null:(qo=i,(e=Ji.getPooled(Wo.select,Jo,e,t)).type="select",e.target=Go,Ui(e),e))}var $o={eventTypes:Wo,extractEvents:function(e,t,i,o,a,s){if(!(s=!(a=s||(o.window===o?o.document:9===o.nodeType?o:o.ownerDocument)))){e:{a=$e(a),s=w.onSelect;for(var n=0;n<s.length;n++)if(!a.has(s[n])){a=!1;break e}a=!0}s=!a}if(s)return null;switch(a=t?Fi(t):window,e){case"focus":(fo(a)||"true"===a.contentEditable)&&(Go=a,Jo=t,qo=null);break;case"blur":qo=Jo=Go=null;break;case"mousedown":Ko=!0;break;case"contextmenu":case"mouseup":case"dragend":return Ko=!1,Xo(i,o);case"selectionchange":if(Vo)break;case"keydown":case"keyup":return Xo(i,o)}return null}},ea=Ji.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ta=Ji.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ia=To.extend({relatedTarget:null});function oa(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var aa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},na=To.extend({key:function(e){if(e.key){var t=aa[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=oa(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?sa[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Fo,charCode:function(e){return"keypress"===e.type?oa(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?oa(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ra=Ro.extend({dataTransfer:null}),la=To.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Fo}),ca=Ji.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),da=Ro.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ha={eventTypes:Zt,extractEvents:function(e,t,i,o){var a=Rt.get(e);if(!a)return null;switch(e){case"keypress":if(0===oa(i))return null;case"keydown":case"keyup":e=na;break;case"blur":case"focus":e=ia;break;case"click":if(2===i.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Ro;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ra;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=la;break;case We:case Ge:case Je:e=ea;break;case qe:e=ca;break;case"scroll":e=To;break;case"wheel":e=da;break;case"copy":case"cut":case"paste":e=ta;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Qo;break;default:e=Ji}return Ui(t=e.getPooled(a,t,i,o)),t}};if(v)throw Error(n(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),y(),_=Li,f=Ni,g=Fi,C({SimpleEventPlugin:ha,EnterLeaveEventPlugin:Uo,ChangeEventPlugin:Po,SelectEventPlugin:$o,BeforeInputEventPlugin:po});var ua=[],pa=-1;function _a(e){0>pa||(e.current=ua[pa],ua[pa]=null,pa--)}function fa(e,t){pa++,ua[pa]=e.current,e.current=t}var ga={},ma={current:ga},va={current:!1},ba=ga;function ya(e,t){var i=e.type.contextTypes;if(!i)return ga;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in i)s[a]=t[a];return o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Aa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Da(){_a(va),_a(ma)}function ka(e,t,i){if(ma.current!==ga)throw Error(n(168));fa(ma,t),fa(va,i)}function Oa(e,t,i){var o=e.stateNode;if(e=t.childContextTypes,"function"!==typeof o.getChildContext)return i;for(var s in o=o.getChildContext())if(!(s in e))throw Error(n(108,ge(t)||"Unknown",s));return a({},i,{},o)}function wa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ga,ba=ma.current,fa(ma,e),fa(va,va.current),!0}function Ca(e,t,i){var o=e.stateNode;if(!o)throw Error(n(169));i?(e=Oa(e,t,ba),o.__reactInternalMemoizedMergedChildContext=e,_a(va),_a(ma),fa(ma,e)):_a(va),fa(va,i)}var xa=s.unstable_runWithPriority,Sa=s.unstable_scheduleCallback,Ma=s.unstable_cancelCallback,Pa=s.unstable_requestPaint,Ta=s.unstable_now,Ia=s.unstable_getCurrentPriorityLevel,Na=s.unstable_ImmediatePriority,Fa=s.unstable_UserBlockingPriority,La=s.unstable_NormalPriority,Ea=s.unstable_LowPriority,ja=s.unstable_IdlePriority,Za={},Ra=s.unstable_shouldYield,Qa=void 0!==Pa?Pa:function(){},za=null,Ua=null,Ba=!1,Ya=Ta(),Ha=1e4>Ya?Ta:function(){return Ta()-Ya};function Va(){switch(Ia()){case Na:return 99;case Fa:return 98;case La:return 97;case Ea:return 96;case ja:return 95;default:throw Error(n(332))}}function Wa(e){switch(e){case 99:return Na;case 98:return Fa;case 97:return La;case 96:return Ea;case 95:return ja;default:throw Error(n(332))}}function Ga(e,t){return e=Wa(e),xa(e,t)}function Ja(e,t,i){return e=Wa(e),Sa(e,t,i)}function qa(e){return null===za?(za=[e],Ua=Sa(Na,Xa)):za.push(e),Za}function Ka(){if(null!==Ua){var e=Ua;Ua=null,Ma(e)}Xa()}function Xa(){if(!Ba&&null!==za){Ba=!0;var e=0;try{var t=za;Ga(99,(function(){for(;e<t.length;e++){var i=t[e];do{i=i(!0)}while(null!==i)}})),za=null}catch(i){throw null!==za&&(za=za.slice(e+1)),Sa(Na,Ka),i}finally{Ba=!1}}}function $a(e,t,i){return 1073741821-(1+((1073741821-e+t/10)/(i/=10)|0))*i}function es(e,t){if(e&&e.defaultProps)for(var i in t=a({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}var ts={current:null},is=null,os=null,as=null;function ss(){as=os=is=null}function ns(e){var t=ts.current;_a(ts),e.type._context._currentValue=t}function rs(e,t){for(;null!==e;){var i=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==i&&i.childExpirationTime<t&&(i.childExpirationTime=t);else{if(!(null!==i&&i.childExpirationTime<t))break;i.childExpirationTime=t}e=e.return}}function ls(e,t){is=e,as=os=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(En=!0),e.firstContext=null)}function cs(e,t){if(as!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(as=e,t=1073741823),t={context:e,observedBits:t,next:null},null===os){if(null===is)throw Error(n(308));os=t,is.dependencies={expirationTime:0,firstContext:t,responders:null}}else os=os.next=t;return e._currentValue}var ds=!1;function hs(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function us(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function ps(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function _s(e,t){if(null!==(e=e.updateQueue)){var i=(e=e.shared).pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function fs(e,t){var i=e.alternate;null!==i&&us(i,e),null===(i=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=i.next,i.next=t)}function gs(e,t,i,o){var s=e.updateQueue;ds=!1;var n=s.baseQueue,r=s.shared.pending;if(null!==r){if(null!==n){var l=n.next;n.next=r.next,r.next=l}n=r,s.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=r))}if(null!==n){l=n.next;var c=s.baseState,d=0,h=null,u=null,p=null;if(null!==l)for(var _=l;;){if((r=_.expirationTime)<o){var f={expirationTime:_.expirationTime,suspenseConfig:_.suspenseConfig,tag:_.tag,payload:_.payload,callback:_.callback,next:null};null===p?(u=p=f,h=c):p=p.next=f,r>d&&(d=r)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:_.suspenseConfig,tag:_.tag,payload:_.payload,callback:_.callback,next:null}),Dl(r,_.suspenseConfig);e:{var g=e,m=_;switch(r=t,f=i,m.tag){case 1:if("function"===typeof(g=m.payload)){c=g.call(f,c,r);break e}c=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(r="function"===typeof(g=m.payload)?g.call(f,c,r):g)||void 0===r)break e;c=a({},c,r);break e;case 2:ds=!0}}null!==_.callback&&(e.effectTag|=32,null===(r=s.effects)?s.effects=[_]:r.push(_))}if(null===(_=_.next)||_===l){if(null===(r=s.shared.pending))break;_=n.next=r.next,r.next=l,s.baseQueue=n=r,s.shared.pending=null}}null===p?h=c:p.next=u,s.baseState=h,s.baseQueue=p,kl(d),e.expirationTime=d,e.memoizedState=c}}function ms(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var o=e[t],a=o.callback;if(null!==a){if(o.callback=null,o=a,a=i,"function"!==typeof o)throw Error(n(191,o));o.call(a)}}}var vs=q.ReactCurrentBatchConfig,bs=(new o.Component).refs;function ys(e,t,i,o){i=null===(i=i(o,t=e.memoizedState))||void 0===i?t:a({},t,i),e.memoizedState=i,0===e.expirationTime&&(e.updateQueue.baseState=i)}var As={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternalFiber;var o=cl(),a=vs.suspense;(a=ps(o=dl(o,e,a),a)).payload=t,void 0!==i&&null!==i&&(a.callback=i),_s(e,a),hl(e,o)},enqueueReplaceState:function(e,t,i){e=e._reactInternalFiber;var o=cl(),a=vs.suspense;(a=ps(o=dl(o,e,a),a)).tag=1,a.payload=t,void 0!==i&&null!==i&&(a.callback=i),_s(e,a),hl(e,o)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var i=cl(),o=vs.suspense;(o=ps(i=dl(i,e,o),o)).tag=2,void 0!==t&&null!==t&&(o.callback=t),_s(e,o),hl(e,i)}};function Ds(e,t,i,o,a,s,n){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(o,s,n):!t.prototype||!t.prototype.isPureReactComponent||(!Ho(i,o)||!Ho(a,s))}function ks(e,t,i){var o=!1,a=ga,s=t.contextType;return"object"===typeof s&&null!==s?s=cs(s):(a=Aa(t)?ba:ma.current,s=(o=null!==(o=t.contextTypes)&&void 0!==o)?ya(e,a):ga),t=new t(i,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=As,e.stateNode=t,t._reactInternalFiber=e,o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function Os(e,t,i,o){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,o),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&As.enqueueReplaceState(t,t.state,null)}function ws(e,t,i,o){var a=e.stateNode;a.props=i,a.state=e.memoizedState,a.refs=bs,hs(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=cs(s):(s=Aa(t)?ba:ma.current,a.context=ya(e,s)),gs(e,i,a,o),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ys(e,t,s,i),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&As.enqueueReplaceState(a,a.state,null),gs(e,i,a,o),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.effectTag|=4)}var Cs=Array.isArray;function xs(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(n(309));var o=i.stateNode}if(!o)throw Error(n(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;t===bs&&(t=o.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(n(284));if(!i._owner)throw Error(n(290,e))}return e}function Ss(e,t){if("textarea"!==e.type)throw Error(n(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ms(e){function t(t,i){if(e){var o=t.lastEffect;null!==o?(o.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i,i.nextEffect=null,i.effectTag=8}}function i(i,o){if(!e)return null;for(;null!==o;)t(i,o),o=o.sibling;return null}function o(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Bl(e,t)).index=0,e.sibling=null,e}function s(t,i,o){return t.index=o,e?null!==(o=t.alternate)?(o=o.index)<i?(t.effectTag=2,i):o:(t.effectTag=2,i):i}function r(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,i,o){return null===t||6!==t.tag?((t=Vl(i,e.mode,o)).return=e,t):((t=a(t,i)).return=e,t)}function c(e,t,i,o){return null!==t&&t.elementType===i.type?((o=a(t,i.props)).ref=xs(e,t,i),o.return=e,o):((o=Yl(i.type,i.key,i.props,null,e.mode,o)).ref=xs(e,t,i),o.return=e,o)}function d(e,t,i,o){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Wl(i,e.mode,o)).return=e,t):((t=a(t,i.children||[])).return=e,t)}function h(e,t,i,o,s){return null===t||7!==t.tag?((t=Hl(i,e.mode,o,s)).return=e,t):((t=a(t,i)).return=e,t)}function u(e,t,i){if("string"===typeof t||"number"===typeof t)return(t=Vl(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(i=Yl(t.type,t.key,t.props,null,e.mode,i)).ref=xs(e,null,t),i.return=e,i;case te:return(t=Wl(t,e.mode,i)).return=e,t}if(Cs(t)||fe(t))return(t=Hl(t,e.mode,i,null)).return=e,t;Ss(e,t)}return null}function p(e,t,i,o){var a=null!==t?t.key:null;if("string"===typeof i||"number"===typeof i)return null!==a?null:l(e,t,""+i,o);if("object"===typeof i&&null!==i){switch(i.$$typeof){case ee:return i.key===a?i.type===ie?h(e,t,i.props.children,o,a):c(e,t,i,o):null;case te:return i.key===a?d(e,t,i,o):null}if(Cs(i)||fe(i))return null!==a?null:h(e,t,i,o,null);Ss(e,i)}return null}function _(e,t,i,o,a){if("string"===typeof o||"number"===typeof o)return l(t,e=e.get(i)||null,""+o,a);if("object"===typeof o&&null!==o){switch(o.$$typeof){case ee:return e=e.get(null===o.key?i:o.key)||null,o.type===ie?h(t,e,o.props.children,a,o.key):c(t,e,o,a);case te:return d(t,e=e.get(null===o.key?i:o.key)||null,o,a)}if(Cs(o)||fe(o))return h(t,e=e.get(i)||null,o,a,null);Ss(t,o)}return null}function f(a,n,r,l){for(var c=null,d=null,h=n,f=n=0,g=null;null!==h&&f<r.length;f++){h.index>f?(g=h,h=null):g=h.sibling;var m=p(a,h,r[f],l);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(a,h),n=s(m,n,f),null===d?c=m:d.sibling=m,d=m,h=g}if(f===r.length)return i(a,h),c;if(null===h){for(;f<r.length;f++)null!==(h=u(a,r[f],l))&&(n=s(h,n,f),null===d?c=h:d.sibling=h,d=h);return c}for(h=o(a,h);f<r.length;f++)null!==(g=_(h,a,f,r[f],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?f:g.key),n=s(g,n,f),null===d?c=g:d.sibling=g,d=g);return e&&h.forEach((function(e){return t(a,e)})),c}function g(a,r,l,c){var d=fe(l);if("function"!==typeof d)throw Error(n(150));if(null==(l=d.call(l)))throw Error(n(151));for(var h=d=null,f=r,g=r=0,m=null,v=l.next();null!==f&&!v.done;g++,v=l.next()){f.index>g?(m=f,f=null):m=f.sibling;var b=p(a,f,v.value,c);if(null===b){null===f&&(f=m);break}e&&f&&null===b.alternate&&t(a,f),r=s(b,r,g),null===h?d=b:h.sibling=b,h=b,f=m}if(v.done)return i(a,f),d;if(null===f){for(;!v.done;g++,v=l.next())null!==(v=u(a,v.value,c))&&(r=s(v,r,g),null===h?d=v:h.sibling=v,h=v);return d}for(f=o(a,f);!v.done;g++,v=l.next())null!==(v=_(f,a,g,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?g:v.key),r=s(v,r,g),null===h?d=v:h.sibling=v,h=v);return e&&f.forEach((function(e){return t(a,e)})),d}return function(e,o,s,l){var c="object"===typeof s&&null!==s&&s.type===ie&&null===s.key;c&&(s=s.props.children);var d="object"===typeof s&&null!==s;if(d)switch(s.$$typeof){case ee:e:{for(d=s.key,c=o;null!==c;){if(c.key===d){if(7===c.tag){if(s.type===ie){i(e,c.sibling),(o=a(c,s.props.children)).return=e,e=o;break e}}else if(c.elementType===s.type){i(e,c.sibling),(o=a(c,s.props)).ref=xs(e,c,s),o.return=e,e=o;break e}i(e,c);break}t(e,c),c=c.sibling}s.type===ie?((o=Hl(s.props.children,e.mode,l,s.key)).return=e,e=o):((l=Yl(s.type,s.key,s.props,null,e.mode,l)).ref=xs(e,o,s),l.return=e,e=l)}return r(e);case te:e:{for(c=s.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){i(e,o.sibling),(o=a(o,s.children||[])).return=e,e=o;break e}i(e,o);break}t(e,o),o=o.sibling}(o=Wl(s,e.mode,l)).return=e,e=o}return r(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==o&&6===o.tag?(i(e,o.sibling),(o=a(o,s)).return=e,e=o):(i(e,o),(o=Vl(s,e.mode,l)).return=e,e=o),r(e);if(Cs(s))return f(e,o,s,l);if(fe(s))return g(e,o,s,l);if(d&&Ss(e,s),"undefined"===typeof s&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(n(152,e.displayName||e.name||"Component"))}return i(e,o)}}var Ps=Ms(!0),Ts=Ms(!1),Is={},Ns={current:Is},Fs={current:Is},Ls={current:Is};function Es(e){if(e===Is)throw Error(n(174));return e}function js(e,t){switch(fa(Ls,t),fa(Fs,e),fa(Ns,Is),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:je(null,"");break;default:t=je(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_a(Ns),fa(Ns,t)}function Zs(){_a(Ns),_a(Fs),_a(Ls)}function Rs(e){Es(Ls.current);var t=Es(Ns.current),i=je(t,e.type);t!==i&&(fa(Fs,e),fa(Ns,i))}function Qs(e){Fs.current===e&&(_a(Ns),_a(Fs))}var zs={current:0};function Us(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||i.data===vi||i.data===bi))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Bs(e,t){return{responder:e,props:t}}var Ys=q.ReactCurrentDispatcher,Hs=q.ReactCurrentBatchConfig,Vs=0,Ws=null,Gs=null,Js=null,qs=!1;function Ks(){throw Error(n(321))}function Xs(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Bo(e[i],t[i]))return!1;return!0}function $s(e,t,i,o,a,s){if(Vs=s,Ws=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Ys.current=null===e||null===e.memoizedState?kn:On,e=i(o,a),t.expirationTime===Vs){s=0;do{if(t.expirationTime=0,!(25>s))throw Error(n(301));s+=1,Js=Gs=null,t.updateQueue=null,Ys.current=wn,e=i(o,a)}while(t.expirationTime===Vs)}if(Ys.current=Dn,t=null!==Gs&&null!==Gs.next,Vs=0,Js=Gs=Ws=null,qs=!1,t)throw Error(n(300));return e}function en(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Js?Ws.memoizedState=Js=e:Js=Js.next=e,Js}function tn(){if(null===Gs){var e=Ws.alternate;e=null!==e?e.memoizedState:null}else e=Gs.next;var t=null===Js?Ws.memoizedState:Js.next;if(null!==t)Js=t,Gs=e;else{if(null===e)throw Error(n(310));e={memoizedState:(Gs=e).memoizedState,baseState:Gs.baseState,baseQueue:Gs.baseQueue,queue:Gs.queue,next:null},null===Js?Ws.memoizedState=Js=e:Js=Js.next=e}return Js}function on(e,t){return"function"===typeof t?t(e):t}function an(e){var t=tn(),i=t.queue;if(null===i)throw Error(n(311));i.lastRenderedReducer=e;var o=Gs,a=o.baseQueue,s=i.pending;if(null!==s){if(null!==a){var r=a.next;a.next=s.next,s.next=r}o.baseQueue=a=s,i.pending=null}if(null!==a){a=a.next,o=o.baseState;var l=r=s=null,c=a;do{var d=c.expirationTime;if(d<Vs){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(r=l=h,s=o):l=l.next=h,d>Ws.expirationTime&&(Ws.expirationTime=d,kl(d))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),Dl(d,c.suspenseConfig),o=c.eagerReducer===e?c.eagerState:e(o,c.action);c=c.next}while(null!==c&&c!==a);null===l?s=o:l.next=r,Bo(o,t.memoizedState)||(En=!0),t.memoizedState=o,t.baseState=s,t.baseQueue=l,i.lastRenderedState=o}return[t.memoizedState,i.dispatch]}function sn(e){var t=tn(),i=t.queue;if(null===i)throw Error(n(311));i.lastRenderedReducer=e;var o=i.dispatch,a=i.pending,s=t.memoizedState;if(null!==a){i.pending=null;var r=a=a.next;do{s=e(s,r.action),r=r.next}while(r!==a);Bo(s,t.memoizedState)||(En=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),i.lastRenderedState=s}return[s,o]}function nn(e){var t=en();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:on,lastRenderedState:e}).dispatch=An.bind(null,Ws,e),[t.memoizedState,e]}function rn(e,t,i,o){return e={tag:e,create:t,destroy:i,deps:o,next:null},null===(t=Ws.updateQueue)?(t={lastEffect:null},Ws.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function ln(){return tn().memoizedState}function cn(e,t,i,o){var a=en();Ws.effectTag|=e,a.memoizedState=rn(1|t,i,void 0,void 0===o?null:o)}function dn(e,t,i,o){var a=tn();o=void 0===o?null:o;var s=void 0;if(null!==Gs){var n=Gs.memoizedState;if(s=n.destroy,null!==o&&Xs(o,n.deps))return void rn(t,i,s,o)}Ws.effectTag|=e,a.memoizedState=rn(1|t,i,s,o)}function hn(e,t){return cn(516,4,e,t)}function un(e,t){return dn(516,4,e,t)}function pn(e,t){return dn(4,2,e,t)}function _n(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function fn(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,dn(4,2,_n.bind(null,t,e),i)}function gn(){}function mn(e,t){return en().memoizedState=[e,void 0===t?null:t],e}function vn(e,t){var i=tn();t=void 0===t?null:t;var o=i.memoizedState;return null!==o&&null!==t&&Xs(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function bn(e,t){var i=tn();t=void 0===t?null:t;var o=i.memoizedState;return null!==o&&null!==t&&Xs(t,o[1])?o[0]:(e=e(),i.memoizedState=[e,t],e)}function yn(e,t,i){var o=Va();Ga(98>o?98:o,(function(){e(!0)})),Ga(97<o?97:o,(function(){var o=Hs.suspense;Hs.suspense=void 0===t?null:t;try{e(!1),i()}finally{Hs.suspense=o}}))}function An(e,t,i){var o=cl(),a=vs.suspense;a={expirationTime:o=dl(o,e,a),suspenseConfig:a,action:i,eagerReducer:null,eagerState:null,next:null};var s=t.pending;if(null===s?a.next=a:(a.next=s.next,s.next=a),t.pending=a,s=e.alternate,e===Ws||null!==s&&s===Ws)qs=!0,a.expirationTime=Vs,Ws.expirationTime=Vs;else{if(0===e.expirationTime&&(null===s||0===s.expirationTime)&&null!==(s=t.lastRenderedReducer))try{var n=t.lastRenderedState,r=s(n,i);if(a.eagerReducer=s,a.eagerState=r,Bo(r,n))return}catch(l){}hl(e,o)}}var Dn={readContext:cs,useCallback:Ks,useContext:Ks,useEffect:Ks,useImperativeHandle:Ks,useLayoutEffect:Ks,useMemo:Ks,useReducer:Ks,useRef:Ks,useState:Ks,useDebugValue:Ks,useResponder:Ks,useDeferredValue:Ks,useTransition:Ks},kn={readContext:cs,useCallback:mn,useContext:cs,useEffect:hn,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,cn(4,2,_n.bind(null,t,e),i)},useLayoutEffect:function(e,t){return cn(4,2,e,t)},useMemo:function(e,t){var i=en();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var o=en();return t=void 0!==i?i(t):t,o.memoizedState=o.baseState=t,e=(e=o.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=An.bind(null,Ws,e),[o.memoizedState,e]},useRef:function(e){return e={current:e},en().memoizedState=e},useState:nn,useDebugValue:gn,useResponder:Bs,useDeferredValue:function(e,t){var i=nn(e),o=i[0],a=i[1];return hn((function(){var i=Hs.suspense;Hs.suspense=void 0===t?null:t;try{a(e)}finally{Hs.suspense=i}}),[e,t]),o},useTransition:function(e){var t=nn(!1),i=t[0];return t=t[1],[mn(yn.bind(null,t,e),[t,e]),i]}},On={readContext:cs,useCallback:vn,useContext:cs,useEffect:un,useImperativeHandle:fn,useLayoutEffect:pn,useMemo:bn,useReducer:an,useRef:ln,useState:function(){return an(on)},useDebugValue:gn,useResponder:Bs,useDeferredValue:function(e,t){var i=an(on),o=i[0],a=i[1];return un((function(){var i=Hs.suspense;Hs.suspense=void 0===t?null:t;try{a(e)}finally{Hs.suspense=i}}),[e,t]),o},useTransition:function(e){var t=an(on),i=t[0];return t=t[1],[vn(yn.bind(null,t,e),[t,e]),i]}},wn={readContext:cs,useCallback:vn,useContext:cs,useEffect:un,useImperativeHandle:fn,useLayoutEffect:pn,useMemo:bn,useReducer:sn,useRef:ln,useState:function(){return sn(on)},useDebugValue:gn,useResponder:Bs,useDeferredValue:function(e,t){var i=sn(on),o=i[0],a=i[1];return un((function(){var i=Hs.suspense;Hs.suspense=void 0===t?null:t;try{a(e)}finally{Hs.suspense=i}}),[e,t]),o},useTransition:function(e){var t=sn(on),i=t[0];return t=t[1],[vn(yn.bind(null,t,e),[t,e]),i]}},Cn=null,xn=null,Sn=!1;function Mn(e,t){var i=zl(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function Pn(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Tn(e){if(Sn){var t=xn;if(t){var i=t;if(!Pn(e,t)){if(!(t=Ci(i.nextSibling))||!Pn(e,t))return e.effectTag=-1025&e.effectTag|2,Sn=!1,void(Cn=e);Mn(Cn,i)}Cn=e,xn=Ci(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Sn=!1,Cn=e}}function In(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Cn=e}function Nn(e){if(e!==Cn)return!1;if(!Sn)return In(e),Sn=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!ki(t,e.memoizedProps))for(t=xn;t;)Mn(e,t),t=Ci(t.nextSibling);if(In(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if(i===mi){if(0===t){xn=Ci(e.nextSibling);break e}t--}else i!==gi&&i!==bi&&i!==vi||t++}e=e.nextSibling}xn=null}}else xn=Cn?Ci(e.stateNode.nextSibling):null;return!0}function Fn(){xn=Cn=null,Sn=!1}var Ln=q.ReactCurrentOwner,En=!1;function jn(e,t,i,o){t.child=null===e?Ts(t,null,i,o):Ps(t,e.child,i,o)}function Zn(e,t,i,o,a){i=i.render;var s=t.ref;return ls(t,a),o=$s(e,t,i,o,s,a),null===e||En?(t.effectTag|=1,jn(e,t,o,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),tr(e,t,a))}function Rn(e,t,i,o,a,s){if(null===e){var n=i.type;return"function"!==typeof n||Ul(n)||void 0!==n.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Yl(i.type,null,o,null,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,Qn(e,t,n,o,a,s))}return n=e.child,a<s&&(a=n.memoizedProps,(i=null!==(i=i.compare)?i:Ho)(a,o)&&e.ref===t.ref)?tr(e,t,s):(t.effectTag|=1,(e=Bl(n,o)).ref=t.ref,e.return=t,t.child=e)}function Qn(e,t,i,o,a,s){return null!==e&&Ho(e.memoizedProps,o)&&e.ref===t.ref&&(En=!1,a<s)?(t.expirationTime=e.expirationTime,tr(e,t,s)):Un(e,t,i,o,s)}function zn(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.effectTag|=128)}function Un(e,t,i,o,a){var s=Aa(i)?ba:ma.current;return s=ya(t,s),ls(t,a),i=$s(e,t,i,o,s,a),null===e||En?(t.effectTag|=1,jn(e,t,i,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),tr(e,t,a))}function Bn(e,t,i,o,a){if(Aa(i)){var s=!0;wa(t)}else s=!1;if(ls(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ks(t,i,o),ws(t,i,o,a),o=!0;else if(null===e){var n=t.stateNode,r=t.memoizedProps;n.props=r;var l=n.context,c=i.contextType;"object"===typeof c&&null!==c?c=cs(c):c=ya(t,c=Aa(i)?ba:ma.current);var d=i.getDerivedStateFromProps,h="function"===typeof d||"function"===typeof n.getSnapshotBeforeUpdate;h||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(r!==o||l!==c)&&Os(t,n,o,c),ds=!1;var u=t.memoizedState;n.state=u,gs(t,o,n,a),l=t.memoizedState,r!==o||u!==l||va.current||ds?("function"===typeof d&&(ys(t,i,d,o),l=t.memoizedState),(r=ds||Ds(t,i,r,o,u,l,c))?(h||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||("function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"===typeof n.componentDidMount&&(t.effectTag|=4)):("function"===typeof n.componentDidMount&&(t.effectTag|=4),t.memoizedProps=o,t.memoizedState=l),n.props=o,n.state=l,n.context=c,o=r):("function"===typeof n.componentDidMount&&(t.effectTag|=4),o=!1)}else n=t.stateNode,us(e,t),r=t.memoizedProps,n.props=t.type===t.elementType?r:es(t.type,r),l=n.context,"object"===typeof(c=i.contextType)&&null!==c?c=cs(c):c=ya(t,c=Aa(i)?ba:ma.current),(h="function"===typeof(d=i.getDerivedStateFromProps)||"function"===typeof n.getSnapshotBeforeUpdate)||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(r!==o||l!==c)&&Os(t,n,o,c),ds=!1,l=t.memoizedState,n.state=l,gs(t,o,n,a),u=t.memoizedState,r!==o||l!==u||va.current||ds?("function"===typeof d&&(ys(t,i,d,o),u=t.memoizedState),(d=ds||Ds(t,i,r,o,l,u,c))?(h||"function"!==typeof n.UNSAFE_componentWillUpdate&&"function"!==typeof n.componentWillUpdate||("function"===typeof n.componentWillUpdate&&n.componentWillUpdate(o,u,c),"function"===typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(o,u,c)),"function"===typeof n.componentDidUpdate&&(t.effectTag|=4),"function"===typeof n.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof n.componentDidUpdate||r===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof n.getSnapshotBeforeUpdate||r===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=o,t.memoizedState=u),n.props=o,n.state=u,n.context=c,o=d):("function"!==typeof n.componentDidUpdate||r===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof n.getSnapshotBeforeUpdate||r===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),o=!1);return Yn(e,t,i,o,s,a)}function Yn(e,t,i,o,a,s){zn(e,t);var n=0!==(64&t.effectTag);if(!o&&!n)return a&&Ca(t,i,!1),tr(e,t,s);o=t.stateNode,Ln.current=t;var r=n&&"function"!==typeof i.getDerivedStateFromError?null:o.render();return t.effectTag|=1,null!==e&&n?(t.child=Ps(t,e.child,null,s),t.child=Ps(t,null,r,s)):jn(e,t,r,s),t.memoizedState=o.state,a&&Ca(t,i,!0),t.child}function Hn(e){var t=e.stateNode;t.pendingContext?ka(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ka(0,t.context,!1),js(e,t.containerInfo)}var Vn,Wn,Gn,Jn,qn={dehydrated:null,retryTime:0};function Kn(e,t,i){var o,a=t.mode,s=t.pendingProps,n=zs.current,r=!1;if((o=0!==(64&t.effectTag))||(o=0!==(2&n)&&(null===e||null!==e.memoizedState)),o?(r=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===s.fallback||!0===s.unstable_avoidThisFallback||(n|=1),fa(zs,1&n),null===e){if(void 0!==s.fallback&&Tn(t),r){if(r=s.fallback,(s=Hl(null,a,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,s.child=e;null!==e;)e.return=s,e=e.sibling;return(i=Hl(r,a,i,null)).return=t,s.sibling=i,t.memoizedState=qn,t.child=s,i}return a=s.children,t.memoizedState=null,t.child=Ts(t,null,a,i)}if(null!==e.memoizedState){if(a=(e=e.child).sibling,r){if(s=s.fallback,(i=Bl(e,e.pendingProps)).return=t,0===(2&t.mode)&&(r=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(i.child=r;null!==r;)r.return=i,r=r.sibling;return(a=Bl(a,s)).return=t,i.sibling=a,i.childExpirationTime=0,t.memoizedState=qn,t.child=i,a}return i=Ps(t,e.child,s.children,i),t.memoizedState=null,t.child=i}if(e=e.child,r){if(r=s.fallback,(s=Hl(null,a,0,null)).return=t,s.child=e,null!==e&&(e.return=s),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,s.child=e;null!==e;)e.return=s,e=e.sibling;return(i=Hl(r,a,i,null)).return=t,s.sibling=i,i.effectTag|=2,s.childExpirationTime=0,t.memoizedState=qn,t.child=s,i}return t.memoizedState=null,t.child=Ps(t,e,s.children,i)}function Xn(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;null!==i&&i.expirationTime<t&&(i.expirationTime=t),rs(e.return,t)}function $n(e,t,i,o,a,s){var n=e.memoizedState;null===n?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailExpiration:0,tailMode:a,lastEffect:s}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=o,n.tail=i,n.tailExpiration=0,n.tailMode=a,n.lastEffect=s)}function er(e,t,i){var o=t.pendingProps,a=o.revealOrder,s=o.tail;if(jn(e,t,o.children,i),0!==(2&(o=zs.current)))o=1&o|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Xn(e,i);else if(19===e.tag)Xn(e,i);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(fa(zs,o),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(i=t.child,a=null;null!==i;)null!==(e=i.alternate)&&null===Us(e)&&(a=i),i=i.sibling;null===(i=a)?(a=t.child,t.child=null):(a=i.sibling,i.sibling=null),$n(t,!1,a,i,s,t.lastEffect);break;case"backwards":for(i=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Us(e)){t.child=a;break}e=a.sibling,a.sibling=i,i=a,a=e}$n(t,!0,i,null,s,t.lastEffect);break;case"together":$n(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function tr(e,t,i){null!==e&&(t.dependencies=e.dependencies);var o=t.expirationTime;if(0!==o&&kl(o),t.childExpirationTime<i)return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(i=Bl(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Bl(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function ir(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;null!==i;)null!==i.alternate&&(o=i),i=i.sibling;null===o?t||null===e.tail?e.tail=null:e.tail.sibling=null:o.sibling=null}}function or(e,t,i){var o=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Aa(t.type)&&Da(),null;case 3:return Zs(),_a(va),_a(ma),(i=t.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||!Nn(t)||(t.effectTag|=4),Wn(t),null;case 5:Qs(t),i=Es(Ls.current);var s=t.type;if(null!==e&&null!=t.stateNode)Gn(e,t,s,o,i),e.ref!==t.ref&&(t.effectTag|=128);else{if(!o){if(null===t.stateNode)throw Error(n(166));return null}if(e=Es(Ns.current),Nn(t)){o=t.stateNode,s=t.type;var r=t.memoizedProps;switch(o[Mi]=t,o[Pi]=r,s){case"iframe":case"object":case"embed":Gt("load",o);break;case"video":case"audio":for(e=0;e<Ke.length;e++)Gt(Ke[e],o);break;case"source":Gt("error",o);break;case"img":case"image":case"link":Gt("error",o),Gt("load",o);break;case"form":Gt("reset",o),Gt("submit",o);break;case"details":Gt("toggle",o);break;case"input":ke(o,r),Gt("invalid",o),li(i,"onChange");break;case"select":o._wrapperState={wasMultiple:!!r.multiple},Gt("invalid",o),li(i,"onChange");break;case"textarea":Te(o,r),Gt("invalid",o),li(i,"onChange")}for(var l in si(s,r),e=null,r)if(r.hasOwnProperty(l)){var c=r[l];"children"===l?"string"===typeof c?o.textContent!==c&&(e=["children",c]):"number"===typeof c&&o.textContent!==""+c&&(e=["children",""+c]):O.hasOwnProperty(l)&&null!=c&&li(i,l)}switch(s){case"input":ye(o),Ce(o,r,!0);break;case"textarea":ye(o),Ne(o);break;case"select":case"option":break;default:"function"===typeof r.onClick&&(o.onclick=ci)}i=e,t.updateQueue=i,null!==i&&(t.effectTag|=4)}else{switch(l=9===i.nodeType?i:i.ownerDocument,e===ri&&(e=Ee(s)),e===ri?"script"===s?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof o.is?e=l.createElement(s,{is:o.is}):(e=l.createElement(s),"select"===s&&(l=e,o.multiple?l.multiple=!0:o.size&&(l.size=o.size))):e=l.createElementNS(e,s),e[Mi]=t,e[Pi]=o,Vn(e,t,!1,!1),t.stateNode=e,l=ni(s,o),s){case"iframe":case"object":case"embed":Gt("load",e),c=o;break;case"video":case"audio":for(c=0;c<Ke.length;c++)Gt(Ke[c],e);c=o;break;case"source":Gt("error",e),c=o;break;case"img":case"image":case"link":Gt("error",e),Gt("load",e),c=o;break;case"form":Gt("reset",e),Gt("submit",e),c=o;break;case"details":Gt("toggle",e),c=o;break;case"input":ke(e,o),c=De(e,o),Gt("invalid",e),li(i,"onChange");break;case"option":c=Se(e,o);break;case"select":e._wrapperState={wasMultiple:!!o.multiple},c=a({},o,{value:void 0}),Gt("invalid",e),li(i,"onChange");break;case"textarea":Te(e,o),c=Pe(e,o),Gt("invalid",e),li(i,"onChange");break;default:c=o}si(s,c);var d=c;for(r in d)if(d.hasOwnProperty(r)){var h=d[r];"style"===r?oi(e,h):"dangerouslySetInnerHTML"===r?null!=(h=h?h.__html:void 0)&&Qe(e,h):"children"===r?"string"===typeof h?("textarea"!==s||""!==h)&&ze(e,h):"number"===typeof h&&ze(e,""+h):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(O.hasOwnProperty(r)?null!=h&&li(i,r):null!=h&&K(e,r,h,l))}switch(s){case"input":ye(e),Ce(e,o,!1);break;case"textarea":ye(e),Ne(e);break;case"option":null!=o.value&&e.setAttribute("value",""+ve(o.value));break;case"select":e.multiple=!!o.multiple,null!=(i=o.value)?Me(e,!!o.multiple,i,!1):null!=o.defaultValue&&Me(e,!!o.multiple,o.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=ci)}Di(s,o)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Jn(e,t,e.memoizedProps,o);else{if("string"!==typeof o&&null===t.stateNode)throw Error(n(166));i=Es(Ls.current),Es(Ns.current),Nn(t)?(i=t.stateNode,o=t.memoizedProps,i[Mi]=t,i.nodeValue!==o&&(t.effectTag|=4)):((i=(9===i.nodeType?i:i.ownerDocument).createTextNode(o))[Mi]=t,t.stateNode=i)}return null;case 13:return _a(zs),o=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=i,t):(i=null!==o,o=!1,null===e?void 0!==t.memoizedProps.fallback&&Nn(t):(o=null!==(s=e.memoizedState),i||null===s||null!==(s=e.child.sibling)&&(null!==(r=t.firstEffect)?(t.firstEffect=s,s.nextEffect=r):(t.firstEffect=t.lastEffect=s,s.nextEffect=null),s.effectTag=8)),i&&!o&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&zs.current)?Br===Nr&&(Br=Er):(Br!==Nr&&Br!==Er||(Br=jr),0!==Gr&&null!==Qr&&(ql(Qr,Ur),Kl(Qr,Gr)))),(i||o)&&(t.effectTag|=4),null);case 4:return Zs(),Wn(t),null;case 10:return ns(t),null;case 19:if(_a(zs),null===(o=t.memoizedState))return null;if(s=0!==(64&t.effectTag),null===(r=o.rendering)){if(s)ir(o,!1);else if(Br!==Nr||null!==e&&0!==(64&e.effectTag))for(r=t.child;null!==r;){if(null!==(e=Us(r))){for(t.effectTag|=64,ir(o,!1),null!==(s=e.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===o.lastEffect&&(t.firstEffect=null),t.lastEffect=o.lastEffect,o=t.child;null!==o;)r=i,(s=o).effectTag&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(e=s.alternate)?(s.childExpirationTime=0,s.expirationTime=r,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null):(s.childExpirationTime=e.childExpirationTime,s.expirationTime=e.expirationTime,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,r=e.dependencies,s.dependencies=null===r?null:{expirationTime:r.expirationTime,firstContext:r.firstContext,responders:r.responders}),o=o.sibling;return fa(zs,1&zs.current|2),t.child}r=r.sibling}}else{if(!s)if(null!==(e=Us(r))){if(t.effectTag|=64,s=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.effectTag|=4),ir(o,!0),null===o.tail&&"hidden"===o.tailMode&&!r.alternate)return null!==(t=t.lastEffect=o.lastEffect)&&(t.nextEffect=null),null}else 2*Ha()-o.renderingStartTime>o.tailExpiration&&1<i&&(t.effectTag|=64,s=!0,ir(o,!1),t.expirationTime=t.childExpirationTime=i-1);o.isBackwards?(r.sibling=t.child,t.child=r):(null!==(i=o.last)?i.sibling=r:t.child=r,o.last=r)}return null!==o.tail?(0===o.tailExpiration&&(o.tailExpiration=Ha()+500),i=o.tail,o.rendering=i,o.tail=i.sibling,o.lastEffect=t.lastEffect,o.renderingStartTime=Ha(),i.sibling=null,t=zs.current,fa(zs,s?1&t|2:1&t),i):null}throw Error(n(156,t.tag))}function ar(e){switch(e.tag){case 1:Aa(e.type)&&Da();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Zs(),_a(va),_a(ma),0!==(64&(t=e.effectTag)))throw Error(n(285));return e.effectTag=-4097&t|64,e;case 5:return Qs(e),null;case 13:return _a(zs),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return _a(zs),null;case 4:return Zs(),null;case 10:return ns(e),null;default:return null}}function sr(e,t){return{value:e,source:t,stack:me(t)}}Vn=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Wn=function(){},Gn=function(e,t,i,o,s){var n=e.memoizedProps;if(n!==o){var r,l,c=t.stateNode;switch(Es(Ns.current),e=null,i){case"input":n=De(c,n),o=De(c,o),e=[];break;case"option":n=Se(c,n),o=Se(c,o),e=[];break;case"select":n=a({},n,{value:void 0}),o=a({},o,{value:void 0}),e=[];break;case"textarea":n=Pe(c,n),o=Pe(c,o),e=[];break;default:"function"!==typeof n.onClick&&"function"===typeof o.onClick&&(c.onclick=ci)}for(r in si(i,o),i=null,n)if(!o.hasOwnProperty(r)&&n.hasOwnProperty(r)&&null!=n[r])if("style"===r)for(l in c=n[r])c.hasOwnProperty(l)&&(i||(i={}),i[l]="");else"dangerouslySetInnerHTML"!==r&&"children"!==r&&"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(O.hasOwnProperty(r)?e||(e=[]):(e=e||[]).push(r,null));for(r in o){var d=o[r];if(c=null!=n?n[r]:void 0,o.hasOwnProperty(r)&&d!==c&&(null!=d||null!=c))if("style"===r)if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(i||(i={}),i[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(i||(i={}),i[l]=d[l])}else i||(e||(e=[]),e.push(r,i)),i=d;else"dangerouslySetInnerHTML"===r?(d=d?d.__html:void 0,c=c?c.__html:void 0,null!=d&&c!==d&&(e=e||[]).push(r,d)):"children"===r?c===d||"string"!==typeof d&&"number"!==typeof d||(e=e||[]).push(r,""+d):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&(O.hasOwnProperty(r)?(null!=d&&li(s,r),e||c===d||(e=[])):(e=e||[]).push(r,d))}i&&(e=e||[]).push("style",i),s=e,(t.updateQueue=s)&&(t.effectTag|=4)}},Jn=function(e,t,i,o){i!==o&&(t.effectTag|=4)};var nr="function"===typeof WeakSet?WeakSet:Set;function rr(e,t){var i=t.source,o=t.stack;null===o&&null!==i&&(o=me(i)),null!==i&&ge(i.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(a){setTimeout((function(){throw a}))}}function lr(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(i){Ll(e,i)}else t.current=null}function cr(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var i=e.memoizedProps,o=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?i:es(t.type,i),o),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(n(163))}function dr(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&o()}i=i.next}while(i!==t)}}function hr(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var o=i.create;i.destroy=o()}i=i.next}while(i!==t)}}function ur(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:return void hr(3,i);case 1:if(e=i.stateNode,4&i.effectTag)if(null===t)e.componentDidMount();else{var o=i.elementType===i.type?t.memoizedProps:es(i.type,t.memoizedProps);e.componentDidUpdate(o,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=i.updateQueue)&&ms(i,t,e));case 3:if(null!==(t=i.updateQueue)){if(e=null,null!==i.child)switch(i.child.tag){case 5:case 1:e=i.child.stateNode}ms(i,t,e)}return;case 5:return e=i.stateNode,void(null===t&&4&i.effectTag&&Di(i.type,i.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===i.memoizedState&&(i=i.alternate,null!==i&&(i=i.memoizedState,null!==i&&(i=i.dehydrated,null!==i&&jt(i)))))}throw Error(n(163))}function pr(e,t,i){switch("function"===typeof Rl&&Rl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var o=e.next;Ga(97<i?97:i,(function(){var e=o;do{var i=e.destroy;if(void 0!==i){var a=t;try{i()}catch(s){Ll(a,s)}}e=e.next}while(e!==o)}))}break;case 1:lr(t),"function"===typeof(i=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(i){Ll(e,i)}}(t,i);break;case 5:lr(t);break;case 4:br(e,t,i)}}function _r(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&_r(t)}function fr(e){return 5===e.tag||3===e.tag||4===e.tag}function gr(e){e:{for(var t=e.return;null!==t;){if(fr(t)){var i=t;break e}t=t.return}throw Error(n(160))}switch(t=i.stateNode,i.tag){case 5:var o=!1;break;case 3:case 4:t=t.containerInfo,o=!0;break;default:throw Error(n(161))}16&i.effectTag&&(ze(t,""),i.effectTag&=-17);e:t:for(i=e;;){for(;null===i.sibling;){if(null===i.return||fr(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.effectTag)continue t;if(null===i.child||4===i.tag)continue t;i.child.return=i,i=i.child}if(!(2&i.effectTag)){i=i.stateNode;break e}}o?mr(e,i,t):vr(e,i,t)}function mr(e,t,i){var o=e.tag,a=5===o||6===o;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=ci));else if(4!==o&&null!==(e=e.child))for(mr(e,t,i),e=e.sibling;null!==e;)mr(e,t,i),e=e.sibling}function vr(e,t,i){var o=e.tag,a=5===o||6===o;if(a)e=a?e.stateNode:e.stateNode.instance,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==o&&null!==(e=e.child))for(vr(e,t,i),e=e.sibling;null!==e;)vr(e,t,i),e=e.sibling}function br(e,t,i){for(var o,a,s=t,r=!1;;){if(!r){r=s.return;e:for(;;){if(null===r)throw Error(n(160));switch(o=r.stateNode,r.tag){case 5:a=!1;break e;case 3:case 4:o=o.containerInfo,a=!0;break e}r=r.return}r=!0}if(5===s.tag||6===s.tag){e:for(var l=e,c=s,d=i,h=c;;)if(pr(l,h,d),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break e;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}a?(l=o,c=s.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):o.removeChild(s.stateNode)}else if(4===s.tag){if(null!==s.child){o=s.stateNode.containerInfo,a=!0,s.child.return=s,s=s.child;continue}}else if(pr(e,s,i),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(r=!1)}s.sibling.return=s.return,s=s.sibling}}function yr(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void dr(3,t);case 1:case 12:case 17:return;case 5:var i=t.stateNode;if(null!=i){var o=t.memoizedProps,a=null!==e?e.memoizedProps:o;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(i[Pi]=o,"input"===e&&"radio"===o.type&&null!=o.name&&Oe(i,o),ni(e,a),t=ni(e,o),a=0;a<s.length;a+=2){var r=s[a],l=s[a+1];"style"===r?oi(i,l):"dangerouslySetInnerHTML"===r?Qe(i,l):"children"===r?ze(i,l):K(i,r,l,t)}switch(e){case"input":we(i,o);break;case"textarea":Ie(i,o);break;case"select":t=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!o.multiple,null!=(e=o.value)?Me(i,!!o.multiple,e,!1):t!==!!o.multiple&&(null!=o.defaultValue?Me(i,!!o.multiple,o.defaultValue,!0):Me(i,!!o.multiple,o.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(n(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,jt(t.containerInfo)));case 13:if(i=t,null===t.memoizedState?o=!1:(o=!0,i=t.child,qr=Ha()),null!==i)e:for(e=i;;){if(5===e.tag)s=e.stateNode,o?"function"===typeof(s=s.style).setProperty?s.setProperty("display","none","important"):s.display="none":(s=e.stateNode,a=void 0!==(a=e.memoizedProps.style)&&null!==a&&a.hasOwnProperty("display")?a.display:null,s.style.display=ii("display",a));else if(6===e.tag)e.stateNode.nodeValue=o?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(s=e.child.sibling).return=e,e=s;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===i)break;for(;null===e.sibling;){if(null===e.return||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void Ar(t);case 19:return void Ar(t)}throw Error(n(163))}function Ar(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new nr),t.forEach((function(t){var o=jl.bind(null,e,t);i.has(t)||(i.add(t),t.then(o,o))}))}}var Dr="function"===typeof WeakMap?WeakMap:Map;function kr(e,t,i){(i=ps(i,null)).tag=3,i.payload={element:null};var o=t.value;return i.callback=function(){$r||($r=!0,el=o),rr(e,t)},i}function Or(e,t,i){(i=ps(i,null)).tag=3;var o=e.type.getDerivedStateFromError;if("function"===typeof o){var a=t.value;i.payload=function(){return rr(e,t),o(a)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(i.callback=function(){"function"!==typeof o&&(null===tl?tl=new Set([this]):tl.add(this),rr(e,t));var i=t.stack;this.componentDidCatch(t.value,{componentStack:null!==i?i:""})}),i}var wr,Cr=Math.ceil,xr=q.ReactCurrentDispatcher,Sr=q.ReactCurrentOwner,Mr=0,Pr=8,Tr=16,Ir=32,Nr=0,Fr=1,Lr=2,Er=3,jr=4,Zr=5,Rr=Mr,Qr=null,zr=null,Ur=0,Br=Nr,Yr=null,Hr=1073741823,Vr=1073741823,Wr=null,Gr=0,Jr=!1,qr=0,Kr=500,Xr=null,$r=!1,el=null,tl=null,il=!1,ol=null,al=90,sl=null,nl=0,rl=null,ll=0;function cl(){return(Rr&(Tr|Ir))!==Mr?1073741821-(Ha()/10|0):0!==ll?ll:ll=1073741821-(Ha()/10|0)}function dl(e,t,i){if(0===(2&(t=t.mode)))return 1073741823;var o=Va();if(0===(4&t))return 99===o?1073741823:1073741822;if((Rr&Tr)!==Mr)return Ur;if(null!==i)e=$a(e,0|i.timeoutMs||5e3,250);else switch(o){case 99:e=1073741823;break;case 98:e=$a(e,150,100);break;case 97:case 96:e=$a(e,5e3,250);break;case 95:e=2;break;default:throw Error(n(326))}return null!==Qr&&e===Ur&&--e,e}function hl(e,t){if(50<nl)throw nl=0,rl=null,Error(n(185));if(null!==(e=ul(e,t))){var i=Va();1073741823===t?(Rr&Pr)!==Mr&&(Rr&(Tr|Ir))===Mr?gl(e):(_l(e),Rr===Mr&&Ka()):_l(e),(4&Rr)===Mr||98!==i&&99!==i||(null===sl?sl=new Map([[e,t]]):(void 0===(i=sl.get(e))||i>t)&&sl.set(e,t))}}function ul(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;null!==i&&i.expirationTime<t&&(i.expirationTime=t);var o=e.return,a=null;if(null===o&&3===e.tag)a=e.stateNode;else for(;null!==o;){if(i=o.alternate,o.childExpirationTime<t&&(o.childExpirationTime=t),null!==i&&i.childExpirationTime<t&&(i.childExpirationTime=t),null===o.return&&3===o.tag){a=o.stateNode;break}o=o.return}return null!==a&&(Qr===a&&(kl(t),Br===jr&&ql(a,Ur)),Kl(a,t)),a}function pl(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Jl(e,t=e.firstPendingTime))return t;var i=e.lastPingedTime;return 2>=(e=i>(e=e.nextKnownPendingLevel)?i:e)&&t!==e?0:e}function _l(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=qa(gl.bind(null,e));else{var t=pl(e),i=e.callbackNode;if(0===t)null!==i&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var o=cl();if(1073741823===t?o=99:1===t||2===t?o=95:o=0>=(o=10*(1073741821-t)-10*(1073741821-o))?99:250>=o?98:5250>=o?97:95,null!==i){var a=e.callbackPriority;if(e.callbackExpirationTime===t&&a>=o)return;i!==Za&&Ma(i)}e.callbackExpirationTime=t,e.callbackPriority=o,t=1073741823===t?qa(gl.bind(null,e)):Ja(o,fl.bind(null,e),{timeout:10*(1073741821-t)-Ha()}),e.callbackNode=t}}}function fl(e,t){if(ll=0,t)return Xl(e,t=cl()),_l(e),null;var i=pl(e);if(0!==i){if(t=e.callbackNode,(Rr&(Tr|Ir))!==Mr)throw Error(n(327));if(Il(),e===Qr&&i===Ur||bl(e,i),null!==zr){var o=Rr;Rr|=Tr;for(var a=Al();;)try{wl();break}catch(l){yl(e,l)}if(ss(),Rr=o,xr.current=a,Br===Fr)throw t=Yr,bl(e,i),ql(e,i),_l(e),t;if(null===zr)switch(a=e.finishedWork=e.current.alternate,e.finishedExpirationTime=i,o=Br,Qr=null,o){case Nr:case Fr:throw Error(n(345));case Lr:Xl(e,2<i?2:i);break;case Er:if(ql(e,i),i===(o=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Sl(a)),1073741823===Hr&&10<(a=qr+Kr-Ha())){if(Jr){var s=e.lastPingedTime;if(0===s||s>=i){e.lastPingedTime=i,bl(e,i);break}}if(0!==(s=pl(e))&&s!==i)break;if(0!==o&&o!==i){e.lastPingedTime=o;break}e.timeoutHandle=Oi(Ml.bind(null,e),a);break}Ml(e);break;case jr:if(ql(e,i),i===(o=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Sl(a)),Jr&&(0===(a=e.lastPingedTime)||a>=i)){e.lastPingedTime=i,bl(e,i);break}if(0!==(a=pl(e))&&a!==i)break;if(0!==o&&o!==i){e.lastPingedTime=o;break}if(1073741823!==Vr?o=10*(1073741821-Vr)-Ha():1073741823===Hr?o=0:(o=10*(1073741821-Hr)-5e3,0>(o=(a=Ha())-o)&&(o=0),(i=10*(1073741821-i)-a)<(o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Cr(o/1960))-o)&&(o=i)),10<o){e.timeoutHandle=Oi(Ml.bind(null,e),o);break}Ml(e);break;case Zr:if(1073741823!==Hr&&null!==Wr){s=Hr;var r=Wr;if(0>=(o=0|r.busyMinDurationMs)?o=0:(a=0|r.busyDelayMs,o=(s=Ha()-(10*(1073741821-s)-(0|r.timeoutMs||5e3)))<=a?0:a+o-s),10<o){ql(e,i),e.timeoutHandle=Oi(Ml.bind(null,e),o);break}}Ml(e);break;default:throw Error(n(329))}if(_l(e),e.callbackNode===t)return fl.bind(null,e)}}return null}function gl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Rr&(Tr|Ir))!==Mr)throw Error(n(327));if(Il(),e===Qr&&t===Ur||bl(e,t),null!==zr){var i=Rr;Rr|=Tr;for(var o=Al();;)try{Ol();break}catch(a){yl(e,a)}if(ss(),Rr=i,xr.current=o,Br===Fr)throw i=Yr,bl(e,t),ql(e,t),_l(e),i;if(null!==zr)throw Error(n(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Qr=null,Ml(e),_l(e)}return null}function ml(e,t){var i=Rr;Rr|=1;try{return e(t)}finally{(Rr=i)===Mr&&Ka()}}function vl(e,t){var i=Rr;Rr&=-2,Rr|=Pr;try{return e(t)}finally{(Rr=i)===Mr&&Ka()}}function bl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,wi(i)),null!==zr)for(i=zr.return;null!==i;){var o=i;switch(o.tag){case 1:null!==(o=o.type.childContextTypes)&&void 0!==o&&Da();break;case 3:Zs(),_a(va),_a(ma);break;case 5:Qs(o);break;case 4:Zs();break;case 13:case 19:_a(zs);break;case 10:ns(o)}i=i.return}Qr=e,zr=Bl(e.current,null),Ur=t,Br=Nr,Yr=null,Vr=Hr=1073741823,Wr=null,Gr=0,Jr=!1}function yl(e,t){for(;;){try{if(ss(),Ys.current=Dn,qs)for(var i=Ws.memoizedState;null!==i;){var o=i.queue;null!==o&&(o.pending=null),i=i.next}if(Vs=0,Js=Gs=Ws=null,qs=!1,null===zr||null===zr.return)return Br=Fr,Yr=t,zr=null;e:{var a=e,s=zr.return,n=zr,r=t;if(t=Ur,n.effectTag|=2048,n.firstEffect=n.lastEffect=null,null!==r&&"object"===typeof r&&"function"===typeof r.then){var l=r;if(0===(2&n.mode)){var c=n.alternate;c?(n.updateQueue=c.updateQueue,n.memoizedState=c.memoizedState,n.expirationTime=c.expirationTime):(n.updateQueue=null,n.memoizedState=null)}var d=0!==(1&zs.current),h=s;do{var u;if(u=13===h.tag){var p=h.memoizedState;if(null!==p)u=null!==p.dehydrated;else{var _=h.memoizedProps;u=void 0!==_.fallback&&(!0!==_.unstable_avoidThisFallback||!d)}}if(u){var f=h.updateQueue;if(null===f){var g=new Set;g.add(l),h.updateQueue=g}else f.add(l);if(0===(2&h.mode)){if(h.effectTag|=64,n.effectTag&=-2981,1===n.tag)if(null===n.alternate)n.tag=17;else{var m=ps(1073741823,null);m.tag=2,_s(n,m)}n.expirationTime=1073741823;break e}r=void 0,n=t;var v=a.pingCache;if(null===v?(v=a.pingCache=new Dr,r=new Set,v.set(l,r)):void 0===(r=v.get(l))&&(r=new Set,v.set(l,r)),!r.has(n)){r.add(n);var b=El.bind(null,a,l,n);l.then(b,b)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);r=Error((ge(n.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+me(n))}Br!==Zr&&(Br=Lr),r=sr(r,n),h=s;do{switch(h.tag){case 3:l=r,h.effectTag|=4096,h.expirationTime=t,fs(h,kr(h,l,t));break e;case 1:l=r;var y=h.type,A=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof y.getDerivedStateFromError||null!==A&&"function"===typeof A.componentDidCatch&&(null===tl||!tl.has(A)))){h.effectTag|=4096,h.expirationTime=t,fs(h,Or(h,l,t));break e}}h=h.return}while(null!==h)}zr=xl(zr)}catch(D){t=D;continue}break}}function Al(){var e=xr.current;return xr.current=Dn,null===e?Dn:e}function Dl(e,t){e<Hr&&2<e&&(Hr=e),null!==t&&e<Vr&&2<e&&(Vr=e,Wr=t)}function kl(e){e>Gr&&(Gr=e)}function Ol(){for(;null!==zr;)zr=Cl(zr)}function wl(){for(;null!==zr&&!Ra();)zr=Cl(zr)}function Cl(e){var t=wr(e.alternate,e,Ur);return e.memoizedProps=e.pendingProps,null===t&&(t=xl(e)),Sr.current=null,t}function xl(e){zr=e;do{var t=zr.alternate;if(e=zr.return,0===(2048&zr.effectTag)){if(t=or(t,zr,Ur),1===Ur||1!==zr.childExpirationTime){for(var i=0,o=zr.child;null!==o;){var a=o.expirationTime,s=o.childExpirationTime;a>i&&(i=a),s>i&&(i=s),o=o.sibling}zr.childExpirationTime=i}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=zr.firstEffect),null!==zr.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=zr.firstEffect),e.lastEffect=zr.lastEffect),1<zr.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=zr:e.firstEffect=zr,e.lastEffect=zr))}else{if(null!==(t=ar(zr)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=zr.sibling))return t;zr=e}while(null!==zr);return Br===Nr&&(Br=Zr),null}function Sl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Ml(e){var t=Va();return Ga(99,Pl.bind(null,e,t)),null}function Pl(e,t){do{Il()}while(null!==ol);if((Rr&(Tr|Ir))!==Mr)throw Error(n(327));var i=e.finishedWork,o=e.finishedExpirationTime;if(null===i)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,i===e.current)throw Error(n(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var a=Sl(i);if(e.firstPendingTime=a,o<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:o<=e.firstSuspendedTime&&(e.firstSuspendedTime=o-1),o<=e.lastPingedTime&&(e.lastPingedTime=0),o<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Qr&&(zr=Qr=null,Ur=0),1<i.effectTag?null!==i.lastEffect?(i.lastEffect.nextEffect=i,a=i.firstEffect):a=i:a=i.firstEffect,null!==a){var s=Rr;Rr|=Ir,Sr.current=null,yi=Wt;var r=_i();if(fi(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{var c=(l=(l=r.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(c&&0!==c.rangeCount){l=c.anchorNode;var d=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{l.nodeType,h.nodeType}catch(C){l=null;break e}var u=0,p=-1,_=-1,f=0,g=0,m=r,v=null;t:for(;;){for(var b;m!==l||0!==d&&3!==m.nodeType||(p=u+d),m!==h||0!==c&&3!==m.nodeType||(_=u+c),3===m.nodeType&&(u+=m.nodeValue.length),null!==(b=m.firstChild);)v=m,m=b;for(;;){if(m===r)break t;if(v===l&&++f===d&&(p=u),v===h&&++g===c&&(_=u),null!==(b=m.nextSibling))break;v=(m=v).parentNode}m=b}l=-1===p||-1===_?null:{start:p,end:_}}else l=null}l=l||{start:0,end:0}}else l=null;Ai={activeElementDetached:null,focusedElem:r,selectionRange:l},Wt=!1,Xr=a;do{try{Tl()}catch(C){if(null===Xr)throw Error(n(330));Ll(Xr,C),Xr=Xr.nextEffect}}while(null!==Xr);Xr=a;do{try{for(r=e,l=t;null!==Xr;){var y=Xr.effectTag;if(16&y&&ze(Xr.stateNode,""),128&y){var A=Xr.alternate;if(null!==A){var D=A.ref;null!==D&&("function"===typeof D?D(null):D.current=null)}}switch(1038&y){case 2:gr(Xr),Xr.effectTag&=-3;break;case 6:gr(Xr),Xr.effectTag&=-3,yr(Xr.alternate,Xr);break;case 1024:Xr.effectTag&=-1025;break;case 1028:Xr.effectTag&=-1025,yr(Xr.alternate,Xr);break;case 4:yr(Xr.alternate,Xr);break;case 8:br(r,d=Xr,l),_r(d)}Xr=Xr.nextEffect}}catch(C){if(null===Xr)throw Error(n(330));Ll(Xr,C),Xr=Xr.nextEffect}}while(null!==Xr);if(D=Ai,A=_i(),y=D.focusedElem,l=D.selectionRange,A!==y&&y&&y.ownerDocument&&pi(y.ownerDocument.documentElement,y)){null!==l&&fi(y)&&(A=l.start,void 0===(D=l.end)&&(D=A),"selectionStart"in y?(y.selectionStart=A,y.selectionEnd=Math.min(D,y.value.length)):(D=(A=y.ownerDocument||document)&&A.defaultView||window).getSelection&&(D=D.getSelection(),d=y.textContent.length,r=Math.min(l.start,d),l=void 0===l.end?r:Math.min(l.end,d),!D.extend&&r>l&&(d=l,l=r,r=d),d=ui(y,r),h=ui(y,l),d&&h&&(1!==D.rangeCount||D.anchorNode!==d.node||D.anchorOffset!==d.offset||D.focusNode!==h.node||D.focusOffset!==h.offset)&&((A=A.createRange()).setStart(d.node,d.offset),D.removeAllRanges(),r>l?(D.addRange(A),D.extend(h.node,h.offset)):(A.setEnd(h.node,h.offset),D.addRange(A))))),A=[];for(D=y;D=D.parentNode;)1===D.nodeType&&A.push({element:D,left:D.scrollLeft,top:D.scrollTop});for("function"===typeof y.focus&&y.focus(),y=0;y<A.length;y++)(D=A[y]).element.scrollLeft=D.left,D.element.scrollTop=D.top}Wt=!!yi,Ai=yi=null,e.current=i,Xr=a;do{try{for(y=e;null!==Xr;){var k=Xr.effectTag;if(36&k&&ur(y,Xr.alternate,Xr),128&k){A=void 0;var O=Xr.ref;if(null!==O){var w=Xr.stateNode;Xr.tag,A=w,"function"===typeof O?O(A):O.current=A}}Xr=Xr.nextEffect}}catch(C){if(null===Xr)throw Error(n(330));Ll(Xr,C),Xr=Xr.nextEffect}}while(null!==Xr);Xr=null,Qa(),Rr=s}else e.current=i;if(il)il=!1,ol=e,al=t;else for(Xr=a;null!==Xr;)t=Xr.nextEffect,Xr.nextEffect=null,Xr=t;if(0===(t=e.firstPendingTime)&&(tl=null),1073741823===t?e===rl?nl++:(nl=0,rl=e):nl=0,"function"===typeof Zl&&Zl(i.stateNode,o),_l(e),$r)throw $r=!1,e=el,el=null,e;return(Rr&Pr)!==Mr||Ka(),null}function Tl(){for(;null!==Xr;){var e=Xr.effectTag;0!==(256&e)&&cr(Xr.alternate,Xr),0===(512&e)||il||(il=!0,Ja(97,(function(){return Il(),null}))),Xr=Xr.nextEffect}}function Il(){if(90!==al){var e=97<al?97:al;return al=90,Ga(e,Nl)}}function Nl(){if(null===ol)return!1;var e=ol;if(ol=null,(Rr&(Tr|Ir))!==Mr)throw Error(n(331));var t=Rr;for(Rr|=Ir,e=e.current.firstEffect;null!==e;){try{var i=e;if(0!==(512&i.effectTag))switch(i.tag){case 0:case 11:case 15:case 22:dr(5,i),hr(5,i)}}catch(o){if(null===e)throw Error(n(330));Ll(e,o)}i=e.nextEffect,e.nextEffect=null,e=i}return Rr=t,Ka(),!0}function Fl(e,t,i){_s(e,t=kr(e,t=sr(i,t),1073741823)),null!==(e=ul(e,1073741823))&&_l(e)}function Ll(e,t){if(3===e.tag)Fl(e,e,t);else for(var i=e.return;null!==i;){if(3===i.tag){Fl(i,e,t);break}if(1===i.tag){var o=i.stateNode;if("function"===typeof i.type.getDerivedStateFromError||"function"===typeof o.componentDidCatch&&(null===tl||!tl.has(o))){_s(i,e=Or(i,e=sr(t,e),1073741823)),null!==(i=ul(i,1073741823))&&_l(i);break}}i=i.return}}function El(e,t,i){var o=e.pingCache;null!==o&&o.delete(t),Qr===e&&Ur===i?Br===jr||Br===Er&&1073741823===Hr&&Ha()-qr<Kr?bl(e,Ur):Jr=!0:Jl(e,i)&&(0!==(t=e.lastPingedTime)&&t<i||(e.lastPingedTime=i,_l(e)))}function jl(e,t){var i=e.stateNode;null!==i&&i.delete(t),0===(t=0)&&(t=dl(t=cl(),e,null)),null!==(e=ul(e,t))&&_l(e)}wr=function(e,t,i){var o=t.expirationTime;if(null!==e){var a=t.pendingProps;if(e.memoizedProps!==a||va.current)En=!0;else{if(o<i){switch(En=!1,t.tag){case 3:Hn(t),Fn();break;case 5:if(Rs(t),4&t.mode&&1!==i&&a.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:Aa(t.type)&&wa(t);break;case 4:js(t,t.stateNode.containerInfo);break;case 10:o=t.memoizedProps.value,a=t.type._context,fa(ts,a._currentValue),a._currentValue=o;break;case 13:if(null!==t.memoizedState)return 0!==(o=t.child.childExpirationTime)&&o>=i?Kn(e,t,i):(fa(zs,1&zs.current),null!==(t=tr(e,t,i))?t.sibling:null);fa(zs,1&zs.current);break;case 19:if(o=t.childExpirationTime>=i,0!==(64&e.effectTag)){if(o)return er(e,t,i);t.effectTag|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null),fa(zs,zs.current),!o)return null}return tr(e,t,i)}En=!1}}else En=!1;switch(t.expirationTime=0,t.tag){case 2:if(o=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,a=ya(t,ma.current),ls(t,i),a=$s(null,t,o,e,a,i),t.effectTag|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Aa(o)){var s=!0;wa(t)}else s=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,hs(t);var r=o.getDerivedStateFromProps;"function"===typeof r&&ys(t,o,r,e),a.updater=As,t.stateNode=a,a._reactInternalFiber=t,ws(t,o,e,i),t=Yn(null,t,o,!0,s,i)}else t.tag=0,jn(null,t,a,i),t=t.child;return t;case 16:e:{if(a=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(a),1!==a._status)throw a._result;switch(a=a._result,t.type=a,s=t.tag=function(e){if("function"===typeof e)return Ul(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===le)return 11;if(e===he)return 14}return 2}(a),e=es(a,e),s){case 0:t=Un(null,t,a,e,i);break e;case 1:t=Bn(null,t,a,e,i);break e;case 11:t=Zn(null,t,a,e,i);break e;case 14:t=Rn(null,t,a,es(a.type,e),o,i);break e}throw Error(n(306,a,""))}return t;case 0:return o=t.type,a=t.pendingProps,Un(e,t,o,a=t.elementType===o?a:es(o,a),i);case 1:return o=t.type,a=t.pendingProps,Bn(e,t,o,a=t.elementType===o?a:es(o,a),i);case 3:if(Hn(t),o=t.updateQueue,null===e||null===o)throw Error(n(282));if(o=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,us(e,t),gs(t,o,null,i),(o=t.memoizedState.element)===a)Fn(),t=tr(e,t,i);else{if((a=t.stateNode.hydrate)&&(xn=Ci(t.stateNode.containerInfo.firstChild),Cn=t,a=Sn=!0),a)for(i=Ts(t,null,o,i),t.child=i;i;)i.effectTag=-3&i.effectTag|1024,i=i.sibling;else jn(e,t,o,i),Fn();t=t.child}return t;case 5:return Rs(t),null===e&&Tn(t),o=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,r=a.children,ki(o,a)?r=null:null!==s&&ki(o,s)&&(t.effectTag|=16),zn(e,t),4&t.mode&&1!==i&&a.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(jn(e,t,r,i),t=t.child),t;case 6:return null===e&&Tn(t),null;case 13:return Kn(e,t,i);case 4:return js(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=Ps(t,null,o,i):jn(e,t,o,i),t.child;case 11:return o=t.type,a=t.pendingProps,Zn(e,t,o,a=t.elementType===o?a:es(o,a),i);case 7:return jn(e,t,t.pendingProps,i),t.child;case 8:case 12:return jn(e,t,t.pendingProps.children,i),t.child;case 10:e:{o=t.type._context,a=t.pendingProps,r=t.memoizedProps,s=a.value;var l=t.type._context;if(fa(ts,l._currentValue),l._currentValue=s,null!==r)if(l=r.value,0===(s=Bo(l,s)?0:0|("function"===typeof o._calculateChangedBits?o._calculateChangedBits(l,s):1073741823))){if(r.children===a.children&&!va.current){t=tr(e,t,i);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){r=l.child;for(var d=c.firstContext;null!==d;){if(d.context===o&&0!==(d.observedBits&s)){1===l.tag&&((d=ps(i,null)).tag=2,_s(l,d)),l.expirationTime<i&&(l.expirationTime=i),null!==(d=l.alternate)&&d.expirationTime<i&&(d.expirationTime=i),rs(l.return,i),c.expirationTime<i&&(c.expirationTime=i);break}d=d.next}}else r=10===l.tag&&l.type===t.type?null:l.child;if(null!==r)r.return=l;else for(r=l;null!==r;){if(r===t){r=null;break}if(null!==(l=r.sibling)){l.return=r.return,r=l;break}r=r.return}l=r}jn(e,t,a.children,i),t=t.child}return t;case 9:return a=t.type,o=(s=t.pendingProps).children,ls(t,i),o=o(a=cs(a,s.unstable_observedBits)),t.effectTag|=1,jn(e,t,o,i),t.child;case 14:return s=es(a=t.type,t.pendingProps),Rn(e,t,a,s=es(a.type,s),o,i);case 15:return Qn(e,t,t.type,t.pendingProps,o,i);case 17:return o=t.type,a=t.pendingProps,a=t.elementType===o?a:es(o,a),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Aa(o)?(e=!0,wa(t)):e=!1,ls(t,i),ks(t,o,a),ws(t,o,a,i),Yn(null,t,o,!0,e,i);case 19:return er(e,t,i)}throw Error(n(156,t.tag))};var Zl=null,Rl=null;function Ql(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function zl(e,t,i,o){return new Ql(e,t,i,o)}function Ul(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bl(e,t){var i=e.alternate;return null===i?((i=zl(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Yl(e,t,i,o,a,s){var r=2;if(o=e,"function"===typeof e)Ul(e)&&(r=1);else if("string"===typeof e)r=5;else e:switch(e){case ie:return Hl(i.children,a,s,t);case re:r=8,a|=7;break;case oe:r=8,a|=1;break;case ae:return(e=zl(12,i,t,8|a)).elementType=ae,e.type=ae,e.expirationTime=s,e;case ce:return(e=zl(13,i,t,a)).type=ce,e.elementType=ce,e.expirationTime=s,e;case de:return(e=zl(19,i,t,a)).elementType=de,e.expirationTime=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case se:r=10;break e;case ne:r=9;break e;case le:r=11;break e;case he:r=14;break e;case ue:r=16,o=null;break e;case pe:r=22;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=zl(r,i,t,a)).elementType=e,t.type=o,t.expirationTime=s,t}function Hl(e,t,i,o){return(e=zl(7,e,o,t)).expirationTime=i,e}function Vl(e,t,i){return(e=zl(6,e,null,t)).expirationTime=i,e}function Wl(e,t,i){return(t=zl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gl(e,t,i){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Jl(e,t){var i=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==i&&i>=t&&e<=t}function ql(e,t){var i=e.firstSuspendedTime,o=e.lastSuspendedTime;i<t&&(e.firstSuspendedTime=t),(o>t||0===i)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Kl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var i=e.firstSuspendedTime;0!==i&&(t>=i?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Xl(e,t){var i=e.lastExpiredTime;(0===i||i>t)&&(e.lastExpiredTime=t)}function $l(e,t,i,o){var a=t.current,s=cl(),r=vs.suspense;s=dl(s,a,r);e:if(i){t:{if(et(i=i._reactInternalFiber)!==i||1!==i.tag)throw Error(n(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Aa(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(n(171))}if(1===i.tag){var c=i.type;if(Aa(c)){i=Oa(i,c,l);break e}}i=l}else i=ga;return null===t.context?t.context=i:t.pendingContext=i,(t=ps(s,r)).payload={element:e},null!==(o=void 0===o?null:o)&&(t.callback=o),_s(a,t),hl(a,s),s}function ec(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function ic(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function oc(e,t,i){var o=new Gl(e,t,i=null!=i&&!0===i.hydrate),a=zl(3,null,null,2===t?7:1===t?3:0);o.current=a,a.stateNode=o,hs(a),e[Ti]=o.current,i&&0!==t&&function(e,t){var i=$e(t);xt.forEach((function(e){ft(e,t,i)})),St.forEach((function(e){ft(e,t,i)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=o}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function sc(e,t,i,o,a){var s=i._reactRootContainer;if(s){var n=s._internalRoot;if("function"===typeof a){var r=a;a=function(){var e=ec(n);r.call(e)}}$l(t,n,e,a)}else{if(s=i._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new oc(e,0,t?{hydrate:!0}:void 0)}(i,o),n=s._internalRoot,"function"===typeof a){var l=a;a=function(){var e=ec(n);l.call(e)}}vl((function(){$l(t,n,e,a)}))}return ec(n)}function nc(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(n(200));return function(e,t,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==o?null:""+o,children:e,containerInfo:t,implementation:i}}(e,t,null,i)}oc.prototype.render=function(e){$l(e,this._internalRoot,null,null)},oc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;$l(null,e,null,(function(){t[Ti]=null}))},gt=function(e){if(13===e.tag){var t=$a(cl(),150,100);hl(e,t),ic(e,t)}},mt=function(e){13===e.tag&&(hl(e,3),ic(e,3))},vt=function(e){if(13===e.tag){var t=cl();hl(e,t=dl(t,e,null)),ic(e,t)}},S=function(e,t,i){switch(t){case"input":if(we(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var a=Li(o);if(!a)throw Error(n(90));Ae(o),we(o,a)}}}break;case"textarea":Ie(e,i);break;case"select":null!=(t=i.value)&&Me(e,!!i.multiple,t,!1)}},F=ml,L=function(e,t,i,o,a){var s=Rr;Rr|=4;try{return Ga(98,e.bind(null,t,i,o,a))}finally{(Rr=s)===Mr&&Ka()}},E=function(){(Rr&(1|Tr|Ir))===Mr&&(function(){if(null!==sl){var e=sl;sl=null,e.forEach((function(e,t){Xl(t,e),_l(t)})),Ka()}}(),Il())},j=function(e,t){var i=Rr;Rr|=2;try{return e(t)}finally{(Rr=i)===Mr&&Ka()}};var rc={Events:[Ni,Fi,Li,C,k,Ui,function(e){st(e,zi)},I,N,Xt,lt,Il,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var i=t.inject(e);Zl=function(e){try{t.onCommitFiberRoot(i,e,void 0,64===(64&e.current.effectTag))}catch(o){}},Rl=function(e){try{t.onCommitFiberUnmount(i,e)}catch(o){}}}catch(o){}})(a({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ot(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Ii,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rc,t.createPortal=nc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(n(188));throw Error(n(268,Object.keys(e)))}return e=null===(e=ot(t))?null:e.stateNode},t.flushSync=function(e,t){if((Rr&(Tr|Ir))!==Mr)throw Error(n(187));var i=Rr;Rr|=1;try{return Ga(99,e.bind(null,t))}finally{Rr=i,Ka()}},t.hydrate=function(e,t,i){if(!ac(t))throw Error(n(200));return sc(null,e,t,!0,i)},t.render=function(e,t,i){if(!ac(t))throw Error(n(200));return sc(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(n(40));return!!e._reactRootContainer&&(vl((function(){sc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Ti]=null}))})),!0)},t.unstable_batchedUpdates=ml,t.unstable_createPortal=function(e,t){return nc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,i,o){if(!ac(i))throw Error(n(200));if(null==e||void 0===e._reactInternalFiber)throw Error(n(38));return sc(e,t,i,!1,o)},t.version="16.14.0"},1168:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(534)},5918:(e,t,i)=>{"use strict";var o=i(7313),a=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var s=Symbol.for;a=s("react.element"),s("react.fragment")}var n=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,i){var o,s={},c=null,d=null;for(o in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,o)&&!l.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===s[o]&&(s[o]=t[o]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:n.current}}t.jsx=c,t.jsxs=c},306:(e,t,i)=>{"use strict";var o=i(1843),a="function"===typeof Symbol&&Symbol.for,s=a?Symbol.for("react.element"):60103,n=a?Symbol.for("react.portal"):60106,r=a?Symbol.for("react.fragment"):60107,l=a?Symbol.for("react.strict_mode"):60108,c=a?Symbol.for("react.profiler"):60114,d=a?Symbol.for("react.provider"):60109,h=a?Symbol.for("react.context"):60110,u=a?Symbol.for("react.forward_ref"):60112,p=a?Symbol.for("react.suspense"):60113,_=a?Symbol.for("react.memo"):60115,f=a?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function y(e,t,i){this.props=e,this.context=t,this.refs=b,this.updater=i||v}function A(){}function D(e,t,i){this.props=e,this.context=t,this.refs=b,this.updater=i||v}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},A.prototype=y.prototype;var k=D.prototype=new A;k.constructor=D,o(k,y.prototype),k.isPureReactComponent=!0;var O={current:null},w=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,i){var o,a={},n=null,r=null;if(null!=t)for(o in void 0!==t.ref&&(r=t.ref),void 0!==t.key&&(n=""+t.key),t)w.call(t,o)&&!C.hasOwnProperty(o)&&(a[o]=t[o]);var l=arguments.length-2;if(1===l)a.children=i;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===a[o]&&(a[o]=l[o]);return{$$typeof:s,type:e,key:n,ref:r,props:a,_owner:O.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var M=/\/+/g,P=[];function T(e,t,i,o){if(P.length){var a=P.pop();return a.result=e,a.keyPrefix=t,a.func=i,a.context=o,a.count=0,a}return{result:e,keyPrefix:t,func:i,context:o,count:0}}function I(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function N(e,t,i,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var r=!1;if(null===e)r=!0;else switch(a){case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case s:case n:r=!0}}if(r)return i(o,e,""===t?"."+L(e,0):t),1;if(r=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=t+L(a=e[l],l);r+=N(a,c,i,o)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=g&&e[g]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(a=e.next()).done;)r+=N(a=a.value,c=t+L(a,l++),i,o);else if("object"===a)throw i=""+e,Error(m(31,"[object Object]"===i?"object with keys {"+Object.keys(e).join(", ")+"}":i,""));return r}function F(e,t,i){return null==e?0:N(e,"",t,i)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function E(e,t){e.func.call(e.context,t,e.count++)}function j(e,t,i){var o=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?Z(e,o,i,(function(e){return e})):null!=e&&(S(e)&&(e=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,a+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(M,"$&/")+"/")+i)),o.push(e))}function Z(e,t,i,o,a){var s="";null!=i&&(s=(""+i).replace(M,"$&/")+"/"),F(e,j,t=T(t,s,o,a)),I(t)}var R={current:null};function Q(){var e=R.current;if(null===e)throw Error(m(321));return e}var z={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:O,IsSomeRendererActing:{current:!1},assign:o};t.Children={map:function(e,t,i){if(null==e)return e;var o=[];return Z(e,o,null,t,i),o},forEach:function(e,t,i){if(null==e)return e;F(e,E,t=T(null,null,t,i)),I(t)},count:function(e){return F(e,(function(){return null}),null)},toArray:function(e){var t=[];return Z(e,t,null,(function(e){return e})),t},only:function(e){if(!S(e))throw Error(m(143));return e}},t.Component=y,t.Fragment=r,t.Profiler=c,t.PureComponent=D,t.StrictMode=l,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error(m(267,e));var a=o({},e.props),n=e.key,r=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(r=t.ref,l=O.current),void 0!==t.key&&(n=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)w.call(t,d)&&!C.hasOwnProperty(d)&&(a[d]=void 0===t[d]&&void 0!==c?c[d]:t[d])}var d=arguments.length-2;if(1===d)a.children=i;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];a.children=c}return{$$typeof:s,type:e.type,key:n,ref:r,props:a,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:d,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:f,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:_,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return Q().useCallback(e,t)},t.useContext=function(e,t){return Q().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return Q().useEffect(e,t)},t.useImperativeHandle=function(e,t,i){return Q().useImperativeHandle(e,t,i)},t.useLayoutEffect=function(e,t){return Q().useLayoutEffect(e,t)},t.useMemo=function(e,t){return Q().useMemo(e,t)},t.useReducer=function(e,t,i){return Q().useReducer(e,t,i)},t.useRef=function(e){return Q().useRef(e)},t.useState=function(e){return Q().useState(e)},t.version="16.14.0"},7313:(e,t,i)=>{"use strict";e.exports=i(306)},6417:(e,t,i)=>{"use strict";e.exports=i(5918)},3095:(e,t)=>{"use strict";var i,o,a,s,n;if("undefined"===typeof window||"function"!==typeof MessageChannel){var r=null,l=null,c=function e(){if(null!==r)try{var i=t.unstable_now();r(!0,i),r=null}catch(o){throw setTimeout(e,0),o}},d=Date.now();t.unstable_now=function(){return Date.now()-d},i=function(e){null!==r?setTimeout(i,0,e):(r=e,setTimeout(c,0))},o=function(e,t){l=setTimeout(e,t)},a=function(){clearTimeout(l)},s=function(){return!1},n=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,u=window.Date,p=window.setTimeout,_=window.clearTimeout;if("undefined"!==typeof console){var f=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var g=u.now();t.unstable_now=function(){return u.now()-g}}var m=!1,v=null,b=-1,y=5,A=0;s=function(){return t.unstable_now()>=A},n=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):y=0<e?Math.floor(1e3/e):5};var D=new MessageChannel,k=D.port2;D.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();A=e+y;try{v(!0,e)?k.postMessage(null):(m=!1,v=null)}catch(i){throw k.postMessage(null),i}}else m=!1},i=function(e){v=e,m||(m=!0,k.postMessage(null))},o=function(e,i){b=p((function(){e(t.unstable_now())}),i)},a=function(){_(b),b=-1}}function O(e,t){var i=e.length;e.push(t);e:for(;;){var o=i-1>>>1,a=e[o];if(!(void 0!==a&&0<x(a,t)))break e;e[o]=t,e[i]=a,i=o}}function w(e){return void 0===(e=e[0])?null:e}function C(e){var t=e[0];if(void 0!==t){var i=e.pop();if(i!==t){e[0]=i;e:for(var o=0,a=e.length;o<a;){var s=2*(o+1)-1,n=e[s],r=s+1,l=e[r];if(void 0!==n&&0>x(n,i))void 0!==l&&0>x(l,n)?(e[o]=l,e[r]=i,o=r):(e[o]=n,e[s]=i,o=s);else{if(!(void 0!==l&&0>x(l,i)))break e;e[o]=l,e[r]=i,o=r}}}return t}return null}function x(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}var S=[],M=[],P=1,T=null,I=3,N=!1,F=!1,L=!1;function E(e){for(var t=w(M);null!==t;){if(null===t.callback)C(M);else{if(!(t.startTime<=e))break;C(M),t.sortIndex=t.expirationTime,O(S,t)}t=w(M)}}function j(e){if(L=!1,E(e),!F)if(null!==w(S))F=!0,i(Z);else{var t=w(M);null!==t&&o(j,t.startTime-e)}}function Z(e,i){F=!1,L&&(L=!1,a()),N=!0;var n=I;try{for(E(i),T=w(S);null!==T&&(!(T.expirationTime>i)||e&&!s());){var r=T.callback;if(null!==r){T.callback=null,I=T.priorityLevel;var l=r(T.expirationTime<=i);i=t.unstable_now(),"function"===typeof l?T.callback=l:T===w(S)&&C(S),E(i)}else C(S);T=w(S)}if(null!==T)var c=!0;else{var d=w(M);null!==d&&o(j,d.startTime-i),c=!1}return c}finally{T=null,I=n,N=!1}}function R(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Q=n;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){F||N||(F=!0,i(Z))},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return w(S)},t.unstable_next=function(e){switch(I){case 1:case 2:case 3:var t=3;break;default:t=I}var i=I;I=t;try{return e()}finally{I=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=Q,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=I;I=e;try{return t()}finally{I=i}},t.unstable_scheduleCallback=function(e,s,n){var r=t.unstable_now();if("object"===typeof n&&null!==n){var l=n.delay;l="number"===typeof l&&0<l?r+l:r,n="number"===typeof n.timeout?n.timeout:R(e)}else n=R(e),l=r;return e={id:P++,callback:s,priorityLevel:e,startTime:l,expirationTime:n=l+n,sortIndex:-1},l>r?(e.sortIndex=l,O(M,e),null===w(S)&&e===w(M)&&(L?a():L=!0,o(j,l-r))):(e.sortIndex=n,O(S,e),F||N||(F=!0,i(Z))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();E(e);var i=w(S);return i!==T&&null!==T&&null!==i&&null!==i.callback&&i.startTime<=e&&i.expirationTime<T.expirationTime||s()},t.unstable_wrapCallback=function(e){var t=I;return function(){var i=I;I=t;try{return e.apply(this,arguments)}finally{I=i}}}},2224:(e,t,i)=>{"use strict";e.exports=i(3095)},4397:(e,t,i)=>{var o={"./designForm/LogicDesignForm/RuleFunction":[1950,9189,1950,8308],"./designForm/LogicDesignForm/RuleFunction/":[1950,9189,1950,8308],"./designForm/LogicDesignForm/RuleFunction/calculator":[3939,3939],"./designForm/LogicDesignForm/RuleFunction/calculator/":[3939,3939],"./designForm/LogicDesignForm/RuleFunction/calculator/index":[3939,3939],"./designForm/LogicDesignForm/RuleFunction/calculator/index.js":[3939,3939],"./designForm/LogicDesignForm/RuleFunction/constants":[3684,3684],"./designForm/LogicDesignForm/RuleFunction/constants.js":[3684,3684],"./designForm/LogicDesignForm/RuleFunction/get_info":[9189,9189],"./designForm/LogicDesignForm/RuleFunction/get_info/":[9189,9189],"./designForm/LogicDesignForm/RuleFunction/get_info/index":[9189,9189],"./designForm/LogicDesignForm/RuleFunction/get_info/index.js":[9189,9189],"./designForm/LogicDesignForm/RuleFunction/index":[1950,9189,1950,8308],"./designForm/LogicDesignForm/RuleFunction/index.js":[1950,9189,1950,8308],"./designForm/LogicDesignForm/RuleFunction/managerComponent":[4810,4810],"./designForm/LogicDesignForm/RuleFunction/managerComponent/":[4810,4810],"./designForm/LogicDesignForm/RuleFunction/managerComponent/index":[4810,4810],"./designForm/LogicDesignForm/RuleFunction/managerComponent/index.js":[4810,4810],"./designForm/LogicDesignForm/RuleFunction/numberCal":[3059,3059],"./designForm/LogicDesignForm/RuleFunction/numberCal/":[3059,3059],"./designForm/LogicDesignForm/RuleFunction/numberCal/index":[3059,3059],"./designForm/LogicDesignForm/RuleFunction/numberCal/index.js":[3059,3059],"./designForm/LogicDesignForm/RuleFunction/run_fo":[8919,8919],"./designForm/LogicDesignForm/RuleFunction/run_fo/":[8919,8919],"./designForm/LogicDesignForm/RuleFunction/run_fo/index":[8919,8919],"./designForm/LogicDesignForm/RuleFunction/run_fo/index.js":[8919,8919],"./designForm/LogicDesignForm/RuleFunction/setDataGB":[9473,9473],"./designForm/LogicDesignForm/RuleFunction/setDataGB/":[9473,9473],"./designForm/LogicDesignForm/RuleFunction/setDataGB/index":[9473,9473],"./designForm/LogicDesignForm/RuleFunction/setDataGB/index.js":[9473,9473],"./designForm/LogicDesignForm/RuleFunction/setFocus":[1600,1600],"./designForm/LogicDesignForm/RuleFunction/setFocus/":[1600,1600],"./designForm/LogicDesignForm/RuleFunction/setFocus/index":[1600,1600],"./designForm/LogicDesignForm/RuleFunction/setFocus/index.js":[1600,1600],"./designForm/LogicDesignForm/RuleFunction/setMask":[4950,4950],"./designForm/LogicDesignForm/RuleFunction/setMask/":[4950,4950],"./designForm/LogicDesignForm/RuleFunction/setMask/index":[4950,4950],"./designForm/LogicDesignForm/RuleFunction/setMask/index.js":[4950,4950],"./designForm/LogicDesignForm/RuleFunction/setValidate":[4439,4439],"./designForm/LogicDesignForm/RuleFunction/setValidate/":[4439,4439],"./designForm/LogicDesignForm/RuleFunction/setValidate/index":[4439,4439],"./designForm/LogicDesignForm/RuleFunction/setValidate/index.js":[4439,4439],"./designForm/LogicDesignForm/RuleFunction/setValue":[8586,8586],"./designForm/LogicDesignForm/RuleFunction/setValue/":[8586,8586],"./designForm/LogicDesignForm/RuleFunction/setValue/index":[8586,8586],"./designForm/LogicDesignForm/RuleFunction/setValue/index.js":[8586,8586],"./designForm/LogicDesignForm/RuleFunction/visibility":[2233,2233],"./designForm/LogicDesignForm/RuleFunction/visibility/":[2233,2233],"./designForm/LogicDesignForm/RuleFunction/visibility/index":[2233,2233],"./designForm/LogicDesignForm/RuleFunction/visibility/index.js":[2233,2233],"./designForm/LogicDesignForm/component/baseComponent":[9687,9352,3665,7388,2596,7837,2,8051,9687],"./designForm/LogicDesignForm/component/baseComponent.js":[9687,9352,3665,7388,2596,7837,2,8051,9687],"./designForm/LogicDesignForm/component/cButton/config":[6942,6942],"./designForm/LogicDesignForm/component/cButton/config.js":[6942,6942],"./designForm/LogicDesignForm/component/cButton/essence":[8820,8820],"./designForm/LogicDesignForm/component/cButton/essence.js":[8820,8820],"./designForm/LogicDesignForm/component/cButton/lang":[3488,3488],"./designForm/LogicDesignForm/component/cButton/lang.js":[3488,3488],"./designForm/LogicDesignForm/component/cButton/role":[6589,6589],"./designForm/LogicDesignForm/component/cButton/role.js":[6589,6589],"./designForm/LogicDesignForm/component/cButton/validate":[2191,2191],"./designForm/LogicDesignForm/component/cButton/validate.js":[2191,2191],"./designForm/LogicDesignForm/component/cTableDefault/config":[5164,5164],"./designForm/LogicDesignForm/component/cTableDefault/config.js":[5164,5164],"./designForm/LogicDesignForm/component/cTableDefault/essence":[9745,9745],"./designForm/LogicDesignForm/component/cTableDefault/essence.js":[9745,9745],"./designForm/LogicDesignForm/component/cTableDefault/lang":[3430,3430],"./designForm/LogicDesignForm/component/cTableDefault/lang.js":[3430,3430],"./designForm/LogicDesignForm/component/cTableDefault/role":[5744,5744],"./designForm/LogicDesignForm/component/cTableDefault/role.js":[5744,5744],"./designForm/LogicDesignForm/component/cTableDefault/validate":[6806,6806],"./designForm/LogicDesignForm/component/cTableDefault/validate.js":[6806,6806],"./designForm/LogicDesignForm/component/cTextArea/config":[4624,4624],"./designForm/LogicDesignForm/component/cTextArea/config.js":[4624,4624],"./designForm/LogicDesignForm/component/cTextArea/essence":[8885,8885],"./designForm/LogicDesignForm/component/cTextArea/essence.js":[8885,8885],"./designForm/LogicDesignForm/component/cTextArea/lang":[1590,1590],"./designForm/LogicDesignForm/component/cTextArea/lang.js":[1590,1590],"./designForm/LogicDesignForm/component/cTextArea/role":[3438,3438],"./designForm/LogicDesignForm/component/cTextArea/role.js":[3438,3438],"./designForm/LogicDesignForm/component/cTextArea/validate":[8116,8116],"./designForm/LogicDesignForm/component/cTextArea/validate.js":[8116,8116],"./designForm/LogicDesignForm/component/cTextInput/config":[7388,7388],"./designForm/LogicDesignForm/component/cTextInput/config.js":[7388,7388],"./designForm/LogicDesignForm/component/cTextInput/essence":[1531,1531],"./designForm/LogicDesignForm/component/cTextInput/essence.js":[1531,1531],"./designForm/LogicDesignForm/component/cTextInput/lang":[1824,1824],"./designForm/LogicDesignForm/component/cTextInput/lang.js":[1824,1824],"./designForm/LogicDesignForm/component/cTextInput/role":[8383,8383],"./designForm/LogicDesignForm/component/cTextInput/role.js":[8383,8383],"./designForm/LogicDesignForm/component/cTextInput/validate":[7208,7208],"./designForm/LogicDesignForm/component/cTextInput/validate.js":[7208,7208],"./designForm/LogicDesignForm/component/componentDefault":[4932,4932],"./designForm/LogicDesignForm/component/componentDefault.js":[4932,4932],"./designForm/LogicDesignForm/component/component_config":[9122,9352,3665,7388,2596,7837,2,8051,9687,9122],"./designForm/LogicDesignForm/component/component_config.js":[9122,9352,3665,7388,2596,7837,2,8051,9687,9122],"./designForm/LogicDesignForm/component/jAuthentic/config":[3483,3483],"./designForm/LogicDesignForm/component/jAuthentic/config.js":[3483,3483],"./designForm/LogicDesignForm/component/jAuthentic/essence":[9204,9204],"./designForm/LogicDesignForm/component/jAuthentic/essence.js":[9204,9204],"./designForm/LogicDesignForm/component/jAuthentic/lang":[867,867],"./designForm/LogicDesignForm/component/jAuthentic/lang.js":[867,867],"./designForm/LogicDesignForm/component/jAuthentic/role":[7701,7701],"./designForm/LogicDesignForm/component/jAuthentic/role.js":[7701,7701],"./designForm/LogicDesignForm/component/jAuthentic/validate":[215,215],"./designForm/LogicDesignForm/component/jAuthentic/validate.js":[215,215],"./designForm/LogicDesignForm/component/jButtonSignature/config":[5251,5251],"./designForm/LogicDesignForm/component/jButtonSignature/config.js":[5251,5251],"./designForm/LogicDesignForm/component/jButtonSignature/essence":[2801,2801],"./designForm/LogicDesignForm/component/jButtonSignature/essence.js":[2801,2801],"./designForm/LogicDesignForm/component/jButtonSignature/lang":[7733,7733],"./designForm/LogicDesignForm/component/jButtonSignature/lang.js":[7733,7733],"./designForm/LogicDesignForm/component/jButtonSignature/role":[6531,6531],"./designForm/LogicDesignForm/component/jButtonSignature/role.js":[6531,6531],"./designForm/LogicDesignForm/component/jButtonSignature/validate":[5175,5175],"./designForm/LogicDesignForm/component/jButtonSignature/validate.js":[5175,5175],"./designForm/LogicDesignForm/component/jChart/config":[5488,5488],"./designForm/LogicDesignForm/component/jChart/config.js":[5488,5488],"./designForm/LogicDesignForm/component/jChart/essence":[7882,7882],"./designForm/LogicDesignForm/component/jChart/essence.js":[7882,7882],"./designForm/LogicDesignForm/component/jChart/lang":[738,1343],"./designForm/LogicDesignForm/component/jChart/lang.js":[738,1343],"./designForm/LogicDesignForm/component/jChart/role":[1053,1053],"./designForm/LogicDesignForm/component/jChart/role.js":[1053,1053],"./designForm/LogicDesignForm/component/jChart/validate":[5751,5751],"./designForm/LogicDesignForm/component/jChart/validate.js":[5751,5751],"./designForm/LogicDesignForm/component/jCheckbox/config":[8054,8054],"./designForm/LogicDesignForm/component/jCheckbox/config.js":[8054,8054],"./designForm/LogicDesignForm/component/jCheckbox/essence":[7247,7247],"./designForm/LogicDesignForm/component/jCheckbox/essence.js":[7247,7247],"./designForm/LogicDesignForm/component/jCheckbox/lang":[7039,7039],"./designForm/LogicDesignForm/component/jCheckbox/lang.js":[7039,7039],"./designForm/LogicDesignForm/component/jCheckbox/role":[4735,4735],"./designForm/LogicDesignForm/component/jCheckbox/role.js":[4735,4735],"./designForm/LogicDesignForm/component/jCheckbox/validate":[8165,8165],"./designForm/LogicDesignForm/component/jCheckbox/validate.js":[8165,8165],"./designForm/LogicDesignForm/component/jCurrency/config":[3295,3295],"./designForm/LogicDesignForm/component/jCurrency/config.js":[3295,3295],"./designForm/LogicDesignForm/component/jCurrency/essence":[9510,9510],"./designForm/LogicDesignForm/component/jCurrency/essence.js":[9510,9510],"./designForm/LogicDesignForm/component/jCurrency/lang":[6815,6815],"./designForm/LogicDesignForm/component/jCurrency/lang.js":[6815,6815],"./designForm/LogicDesignForm/component/jCurrency/role":[649,649],"./designForm/LogicDesignForm/component/jCurrency/role.js":[649,649],"./designForm/LogicDesignForm/component/jCurrency/validate":[4970,4970],"./designForm/LogicDesignForm/component/jCurrency/validate.js":[4970,4970],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/config":[8003,8003],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/config.js":[8003,8003],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/essence":[2687,2687],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/essence.js":[2687,2687],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/lang":[4912,4912],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/lang.js":[4912,4912],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/role":[8528,8528],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/role.js":[8528,8528],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/validate":[3446,3446],"./designForm/LogicDesignForm/component/jCurrencyLongNumber/validate.js":[3446,3446],"./designForm/LogicDesignForm/component/jFullCalendar/config":[2483,2483],"./designForm/LogicDesignForm/component/jFullCalendar/config.js":[2483,2483],"./designForm/LogicDesignForm/component/jFullCalendar/essence":[341,341],"./designForm/LogicDesignForm/component/jFullCalendar/essence.js":[341,341],"./designForm/LogicDesignForm/component/jFullCalendar/lang":[8482,8482],"./designForm/LogicDesignForm/component/jFullCalendar/lang.js":[8482,8482],"./designForm/LogicDesignForm/component/jFullCalendar/role":[6322,534],"./designForm/LogicDesignForm/component/jFullCalendar/role.js":[6322,534],"./designForm/LogicDesignForm/component/jFullCalendar/validate":[6713,6713],"./designForm/LogicDesignForm/component/jFullCalendar/validate.js":[6713,6713],"./designForm/LogicDesignForm/component/jIframeReport/config":[3909,3909],"./designForm/LogicDesignForm/component/jIframeReport/config.js":[3909,3909],"./designForm/LogicDesignForm/component/jIframeReport/essence":[6013,6013],"./designForm/LogicDesignForm/component/jIframeReport/essence.js":[6013,6013],"./designForm/LogicDesignForm/component/jIframeReport/lang":[1233,1233],"./designForm/LogicDesignForm/component/jIframeReport/lang.js":[1233,1233],"./designForm/LogicDesignForm/component/jIframeReport/role":[1351,1351],"./designForm/LogicDesignForm/component/jIframeReport/role.js":[1351,1351],"./designForm/LogicDesignForm/component/jIframeReport/validate":[820,820],"./designForm/LogicDesignForm/component/jIframeReport/validate.js":[820,820],"./designForm/LogicDesignForm/component/jImage/config":[5672,5672],"./designForm/LogicDesignForm/component/jImage/config.js":[5672,5672],"./designForm/LogicDesignForm/component/jImage/essence":[7930,7930],"./designForm/LogicDesignForm/component/jImage/essence.js":[7930,7930],"./designForm/LogicDesignForm/component/jImage/lang":[9896,9896],"./designForm/LogicDesignForm/component/jImage/lang.js":[9896,9896],"./designForm/LogicDesignForm/component/jImage/role":[9412,9412],"./designForm/LogicDesignForm/component/jImage/role.js":[9412,9412],"./designForm/LogicDesignForm/component/jImage/validate":[4577,4577],"./designForm/LogicDesignForm/component/jImage/validate.js":[4577,4577],"./designForm/LogicDesignForm/component/jLabel/config":[9048,9048],"./designForm/LogicDesignForm/component/jLabel/config.js":[9048,9048],"./designForm/LogicDesignForm/component/jLabel/essence":[5662,5662],"./designForm/LogicDesignForm/component/jLabel/essence.js":[5662,5662],"./designForm/LogicDesignForm/component/jLabel/lang":[5215,5215],"./designForm/LogicDesignForm/component/jLabel/lang.js":[5215,5215],"./designForm/LogicDesignForm/component/jLabel/role":[1245,1245],"./designForm/LogicDesignForm/component/jLabel/role.js":[1245,1245],"./designForm/LogicDesignForm/component/jLabel/validate":[9858,9858],"./designForm/LogicDesignForm/component/jLabel/validate.js":[9858,9858],"./designForm/LogicDesignForm/component/jListActivity/config":[3536,3536],"./designForm/LogicDesignForm/component/jListActivity/config.js":[3536,3536],"./designForm/LogicDesignForm/component/jListActivity/essence":[2564,2564],"./designForm/LogicDesignForm/component/jListActivity/essence.js":[2564,2564],"./designForm/LogicDesignForm/component/jListActivity/lang":[8568,8568],"./designForm/LogicDesignForm/component/jListActivity/lang.js":[8568,8568],"./designForm/LogicDesignForm/component/jListActivity/role":[447,447],"./designForm/LogicDesignForm/component/jListActivity/role.js":[447,447],"./designForm/LogicDesignForm/component/jListActivity/validate":[22,22],"./designForm/LogicDesignForm/component/jListActivity/validate.js":[22,22],"./designForm/LogicDesignForm/component/jListCheckBox/config":[2251,2251],"./designForm/LogicDesignForm/component/jListCheckBox/config.js":[2251,2251],"./designForm/LogicDesignForm/component/jListCheckBox/essence":[8219,8219],"./designForm/LogicDesignForm/component/jListCheckBox/essence.js":[8219,8219],"./designForm/LogicDesignForm/component/jListCheckBox/lang":[1049,1049],"./designForm/LogicDesignForm/component/jListCheckBox/lang.js":[1049,1049],"./designForm/LogicDesignForm/component/jListCheckBox/role":[1034,1034],"./designForm/LogicDesignForm/component/jListCheckBox/role.js":[1034,1034],"./designForm/LogicDesignForm/component/jListCheckBox/validate":[244,244],"./designForm/LogicDesignForm/component/jListCheckBox/validate.js":[244,244],"./designForm/LogicDesignForm/component/jMaskInput/config":[9352,9352],"./designForm/LogicDesignForm/component/jMaskInput/config.js":[9352,9352],"./designForm/LogicDesignForm/component/jMaskInput/essence":[1343,4175],"./designForm/LogicDesignForm/component/jMaskInput/essence.js":[1343,4175],"./designForm/LogicDesignForm/component/jMaskInput/lang":[8572,8572],"./designForm/LogicDesignForm/component/jMaskInput/lang.js":[8572,8572],"./designForm/LogicDesignForm/component/jMaskInput/role":[9579,9579],"./designForm/LogicDesignForm/component/jMaskInput/role.js":[9579,9579],"./designForm/LogicDesignForm/component/jMaskInput/validate":[5866,5866],"./designForm/LogicDesignForm/component/jMaskInput/validate.js":[5866,5866],"./designForm/LogicDesignForm/component/jMaskInputVer2/config":[3665,3665],"./designForm/LogicDesignForm/component/jMaskInputVer2/config.js":[3665,3665],"./designForm/LogicDesignForm/component/jMaskInputVer2/essence":[2837,2837],"./designForm/LogicDesignForm/component/jMaskInputVer2/essence.js":[2837,2837],"./designForm/LogicDesignForm/component/jMaskInputVer2/lang":[2159,2159],"./designForm/LogicDesignForm/component/jMaskInputVer2/lang.js":[2159,2159],"./designForm/LogicDesignForm/component/jMaskInputVer2/role":[7295,7295],"./designForm/LogicDesignForm/component/jMaskInputVer2/role.js":[7295,7295],"./designForm/LogicDesignForm/component/jMaskInputVer2/validate":[6681,6681],"./designForm/LogicDesignForm/component/jMaskInputVer2/validate.js":[6681,6681],"./designForm/LogicDesignForm/component/jMutiValue/config":[3457,3457],"./designForm/LogicDesignForm/component/jMutiValue/config.js":[3457,3457],"./designForm/LogicDesignForm/component/jMutiValue/essence":[2222,2222],"./designForm/LogicDesignForm/component/jMutiValue/essence.js":[2222,2222],"./designForm/LogicDesignForm/component/jMutiValue/lang":[5588,5588],"./designForm/LogicDesignForm/component/jMutiValue/lang.js":[5588,5588],"./designForm/LogicDesignForm/component/jMutiValue/role":[8645,8645],"./designForm/LogicDesignForm/component/jMutiValue/role.js":[8645,8645],"./designForm/LogicDesignForm/component/jMutiValue/validate":[243,243],"./designForm/LogicDesignForm/component/jMutiValue/validate.js":[243,243],"./designForm/LogicDesignForm/component/jPrintVoucher/config":[7915,7915],"./designForm/LogicDesignForm/component/jPrintVoucher/config.js":[7915,7915],"./designForm/LogicDesignForm/component/jPrintVoucher/essence":[7779,7779],"./designForm/LogicDesignForm/component/jPrintVoucher/essence.js":[7779,7779],"./designForm/LogicDesignForm/component/jPrintVoucher/lang":[7059,7059],"./designForm/LogicDesignForm/component/jPrintVoucher/lang.js":[7059,7059],"./designForm/LogicDesignForm/component/jPrintVoucher/role":[1931,1931],"./designForm/LogicDesignForm/component/jPrintVoucher/role.js":[1931,1931],"./designForm/LogicDesignForm/component/jPrintVoucher/validate":[7196,7196],"./designForm/LogicDesignForm/component/jPrintVoucher/validate.js":[7196,7196],"./designForm/LogicDesignForm/component/jProgressBar/config":[6339,6339],"./designForm/LogicDesignForm/component/jProgressBar/config.js":[6339,6339],"./designForm/LogicDesignForm/component/jProgressBar/essence":[2026,6825],"./designForm/LogicDesignForm/component/jProgressBar/essence.js":[2026,6825],"./designForm/LogicDesignForm/component/jProgressBar/lang":[7551,7794],"./designForm/LogicDesignForm/component/jProgressBar/lang.js":[7551,7794],"./designForm/LogicDesignForm/component/jProgressBar/role":[9515,9515],"./designForm/LogicDesignForm/component/jProgressBar/role.js":[9515,9515],"./designForm/LogicDesignForm/component/jProgressBar/validate":[1018,1018],"./designForm/LogicDesignForm/component/jProgressBar/validate.js":[1018,1018],"./designForm/LogicDesignForm/component/jRadioBox/config":[5699,5699],"./designForm/LogicDesignForm/component/jRadioBox/config.js":[5699,5699],"./designForm/LogicDesignForm/component/jRadioBox/essence":[3212,3212],"./designForm/LogicDesignForm/component/jRadioBox/essence.js":[3212,3212],"./designForm/LogicDesignForm/component/jRadioBox/lang":[7526,7526],"./designForm/LogicDesignForm/component/jRadioBox/lang.js":[7526,7526],"./designForm/LogicDesignForm/component/jRadioBox/role":[154,154],"./designForm/LogicDesignForm/component/jRadioBox/role.js":[154,154],"./designForm/LogicDesignForm/component/jRadioBox/validate":[2690,2690],"./designForm/LogicDesignForm/component/jRadioBox/validate.js":[2690,2690],"./designForm/LogicDesignForm/component/jReport/config":[3744,3744],"./designForm/LogicDesignForm/component/jReport/config.js":[3744,3744],"./designForm/LogicDesignForm/component/jReport/essence":[1313,1313],"./designForm/LogicDesignForm/component/jReport/essence.js":[1313,1313],"./designForm/LogicDesignForm/component/jReport/lang":[7750,7750],"./designForm/LogicDesignForm/component/jReport/lang.js":[7750,7750],"./designForm/LogicDesignForm/component/jReport/role":[9304,9304],"./designForm/LogicDesignForm/component/jReport/role.js":[9304,9304],"./designForm/LogicDesignForm/component/jReport/validate":[8801,8801],"./designForm/LogicDesignForm/component/jReport/validate.js":[8801,8801],"./designForm/LogicDesignForm/component/jRichTextEditor/config":[6702,6702],"./designForm/LogicDesignForm/component/jRichTextEditor/config.js":[6702,6702],"./designForm/LogicDesignForm/component/jRichTextEditor/essence":[5172,5172],"./designForm/LogicDesignForm/component/jRichTextEditor/essence.js":[5172,5172],"./designForm/LogicDesignForm/component/jRichTextEditor/lang":[3860,3860],"./designForm/LogicDesignForm/component/jRichTextEditor/lang.js":[3860,3860],"./designForm/LogicDesignForm/component/jRichTextEditor/role":[9971,9971],"./designForm/LogicDesignForm/component/jRichTextEditor/role.js":[9971,9971],"./designForm/LogicDesignForm/component/jRichTextEditor/validate":[70,70],"./designForm/LogicDesignForm/component/jRichTextEditor/validate.js":[70,70],"./designForm/LogicDesignForm/component/jSameMain/config":[4607,4607],"./designForm/LogicDesignForm/component/jSameMain/config.js":[4607,4607],"./designForm/LogicDesignForm/component/jSameMain/essence":[4377,4377],"./designForm/LogicDesignForm/component/jSameMain/essence.js":[4377,4377],"./designForm/LogicDesignForm/component/jSameMain/lang":[3988,3988],"./designForm/LogicDesignForm/component/jSameMain/lang.js":[3988,3988],"./designForm/LogicDesignForm/component/jSameMain/role":[9800,9800],"./designForm/LogicDesignForm/component/jSameMain/role.js":[9800,9800],"./designForm/LogicDesignForm/component/jSameMain/validate":[644,644],"./designForm/LogicDesignForm/component/jSameMain/validate.js":[644,644],"./designForm/LogicDesignForm/component/jSelect/config":[7837,7837],"./designForm/LogicDesignForm/component/jSelect/config.js":[7837,7837],"./designForm/LogicDesignForm/component/jSelect/essence":[5571,5571],"./designForm/LogicDesignForm/component/jSelect/essence.js":[5571,5571],"./designForm/LogicDesignForm/component/jSelect/lang":[6095,6095],"./designForm/LogicDesignForm/component/jSelect/lang.js":[6095,6095],"./designForm/LogicDesignForm/component/jSelect/role":[2594,2594],"./designForm/LogicDesignForm/component/jSelect/role.js":[2594,2594],"./designForm/LogicDesignForm/component/jSelect/validate":[7012,7012],"./designForm/LogicDesignForm/component/jSelect/validate.js":[7012,7012],"./designForm/LogicDesignForm/component/jSelectMulti/config":[2,2],"./designForm/LogicDesignForm/component/jSelectMulti/config.js":[2,2],"./designForm/LogicDesignForm/component/jSelectMulti/essence":[4643,4643],"./designForm/LogicDesignForm/component/jSelectMulti/essence.js":[4643,4643],"./designForm/LogicDesignForm/component/jSelectMulti/lang":[4862,4862],"./designForm/LogicDesignForm/component/jSelectMulti/lang.js":[4862,4862],"./designForm/LogicDesignForm/component/jSelectMulti/role":[376,376],"./designForm/LogicDesignForm/component/jSelectMulti/role.js":[376,376],"./designForm/LogicDesignForm/component/jSelectMulti/validate":[1309,1309],"./designForm/LogicDesignForm/component/jSelectMulti/validate.js":[1309,1309],"./designForm/LogicDesignForm/component/jTabList/config":[2923,2923],"./designForm/LogicDesignForm/component/jTabList/config.js":[2923,2923],"./designForm/LogicDesignForm/component/jTabList/essence":[7484,7484],"./designForm/LogicDesignForm/component/jTabList/essence.js":[7484,7484],"./designForm/LogicDesignForm/component/jTabList/lang":[9230,9230],"./designForm/LogicDesignForm/component/jTabList/lang.js":[9230,9230],"./designForm/LogicDesignForm/component/jTabList/role":[1604,1604],"./designForm/LogicDesignForm/component/jTabList/role.js":[1604,1604],"./designForm/LogicDesignForm/component/jTabList/validate":[1798,1798],"./designForm/LogicDesignForm/component/jTabList/validate.js":[1798,1798],"./designForm/LogicDesignForm/component/jTableDynamic/config":[3422,3422],"./designForm/LogicDesignForm/component/jTableDynamic/config.js":[3422,3422],"./designForm/LogicDesignForm/component/jTableDynamic/essence":[6729,6729],"./designForm/LogicDesignForm/component/jTableDynamic/essence.js":[6729,6729],"./designForm/LogicDesignForm/component/jTableDynamic/lang":[3238,3238],"./designForm/LogicDesignForm/component/jTableDynamic/lang.js":[3238,3238],"./designForm/LogicDesignForm/component/jTableDynamic/role":[2100,2100],"./designForm/LogicDesignForm/component/jTableDynamic/role.js":[2100,2100],"./designForm/LogicDesignForm/component/jTableDynamic/validate":[2385,2385],"./designForm/LogicDesignForm/component/jTableDynamic/validate.js":[2385,2385],"./designForm/LogicDesignForm/component/jTableDynamicSearch/config":[8445,8445],"./designForm/LogicDesignForm/component/jTableDynamicSearch/config.js":[8445,8445],"./designForm/LogicDesignForm/component/jTableDynamicSearch/essence":[7812,7812],"./designForm/LogicDesignForm/component/jTableDynamicSearch/essence.js":[7812,7812],"./designForm/LogicDesignForm/component/jTableDynamicSearch/lang":[9063,9063],"./designForm/LogicDesignForm/component/jTableDynamicSearch/lang.js":[9063,9063],"./designForm/LogicDesignForm/component/jTableDynamicSearch/role":[4546,4546],"./designForm/LogicDesignForm/component/jTableDynamicSearch/role.js":[4546,4546],"./designForm/LogicDesignForm/component/jTableDynamicSearch/validate":[6825,4608],"./designForm/LogicDesignForm/component/jTableDynamicSearch/validate.js":[6825,4608],"./designForm/LogicDesignForm/component/jTableForm/config":[5105,5105],"./designForm/LogicDesignForm/component/jTableForm/config.js":[5105,5105],"./designForm/LogicDesignForm/component/jTableForm/essence":[3960,3960],"./designForm/LogicDesignForm/component/jTableForm/essence.js":[3960,3960],"./designForm/LogicDesignForm/component/jTableForm/lang":[7230,7230],"./designForm/LogicDesignForm/component/jTableForm/lang.js":[7230,7230],"./designForm/LogicDesignForm/component/jTableForm/role":[618,618],"./designForm/LogicDesignForm/component/jTableForm/role.js":[618,618],"./designForm/LogicDesignForm/component/jTableForm/validate":[8602,8602],"./designForm/LogicDesignForm/component/jTableForm/validate.js":[8602,8602],"./designForm/LogicDesignForm/component/jTableSearch/config":[2596,2596],"./designForm/LogicDesignForm/component/jTableSearch/config.js":[2596,2596],"./designForm/LogicDesignForm/component/jTableSearch/essence":[1884,1884],"./designForm/LogicDesignForm/component/jTableSearch/essence.js":[1884,1884],"./designForm/LogicDesignForm/component/jTableSearch/lang":[9987,9987],"./designForm/LogicDesignForm/component/jTableSearch/lang.js":[9987,9987],"./designForm/LogicDesignForm/component/jTableSearch/role":[4820,4820],"./designForm/LogicDesignForm/component/jTableSearch/role.js":[4820,4820],"./designForm/LogicDesignForm/component/jTableSearch/validate":[881,881],"./designForm/LogicDesignForm/component/jTableSearch/validate.js":[881,881],"./designForm/LogicDesignForm/component/jUploadFile/config":[8051,8051,7474],"./designForm/LogicDesignForm/component/jUploadFile/config.js":[8051,8051,7474],"./designForm/LogicDesignForm/component/jUploadFile/essence":[7797,7797],"./designForm/LogicDesignForm/component/jUploadFile/essence.js":[7797,7797],"./designForm/LogicDesignForm/component/jUploadFile/lang":[6115,6115],"./designForm/LogicDesignForm/component/jUploadFile/lang.js":[6115,6115],"./designForm/LogicDesignForm/component/jUploadFile/role":[8486,8486],"./designForm/LogicDesignForm/component/jUploadFile/role.js":[8486,8486],"./designForm/LogicDesignForm/component/jUploadFile/validate":[4001,4001],"./designForm/LogicDesignForm/component/jUploadFile/validate.js":[4001,4001],"./designForm/LogicDesignForm/configLayout":[4804,4804],"./designForm/LogicDesignForm/configLayout.js":[4804,4804],"./designForm/LogicDesignForm/configView":[2582,2582],"./designForm/LogicDesignForm/configView.js":[2582,2582],"./designForm/LogicDesignForm/designTxFo":[8308,2308],"./designForm/LogicDesignForm/designTxFo.js":[8308,2308],"./designForm/LogicDesignForm/form_begin":[194,9352,3665,7388,2596,7837,2,8051,9687,9189,1950,7679,194],"./designForm/LogicDesignForm/form_begin.js":[194,9352,3665,7388,2596,7837,2,8051,9687,9189,1950,7679,194],"./designForm/LogicDesignForm/form_design":[7679,9352,3665,7388,2596,7837,2,8051,9687,9189,1950,7679],"./designForm/LogicDesignForm/form_design.js":[7679,9352,3665,7388,2596,7837,2,8051,9687,9189,1950,7679],"./designForm/LogicDesignForm/form_preview":[5684,5684],"./designForm/LogicDesignForm/form_preview.js":[5684,5684],"./designForm/desktop_designForm":[9233,9352,3665,7388,2596,7837,2,8051,9687,9189,1950,7679,9233],"./designForm/desktop_designForm.js":[9233,9352,3665,7388,2596,7837,2,8051,9687,9189,1950,7679,9233],"./jWebUITemplateControl":[8382],"./jWebUITemplateControl.js":[8382],"./malibu/desktop_cms":[3085,9038,3085],"./malibu/desktop_cms.js":[3085,9038,3085],"./malibu/desktop_hub":[9283,9038,9283],"./malibu/desktop_hub.js":[9283,9038,9283],"./malibu/desktop_ncbs":[9490,9038,9490],"./malibu/desktop_ncbs.js":[9490,9038,9490],"./malibu/desktop_ncbsCbs":[1479,9038,2026],"./malibu/desktop_ncbsCbs.js":[1479,9038,2026],"./malibu/desktop_ncbsLicense":[7048,9038,7048],"./malibu/desktop_ncbsLicense.js":[7048,9038,7048],"./malibu/desktop_o9":[6112,9038,6112],"./malibu/desktop_o9.js":[6112,9038,6112],"./malibu/desktop_shwebank":[8623,9038,8623],"./malibu/desktop_shwebank.js":[8623,9038,8623],"./malibu/desktop_sys":[2431,9038,2431],"./malibu/desktop_sys.js":[2431,9038,2431],"./malibu/desktop_timekeeping":[1991,9038,1991],"./malibu/desktop_timekeeping.js":[1991,9038,1991],"./malibu1/desktop_o9":[9036,9038,9036],"./malibu1/desktop_o9.js":[9036,9038,9036],"./malibu2/desktop_o9":[3079,9038,3079],"./malibu2/desktop_o9.js":[3079,9038,3079],"./perseus/desktop_ncbsCbs":[1791,9038,7551],"./perseus/desktop_ncbsCbs.js":[1791,9038,7551],"./perseus/desktop_o9":[2038,9038,2038],"./perseus/desktop_o9.js":[2038,9038,2038]};function a(e){if(!i.o(o,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],a=t[0];return Promise.all(t.slice(1).map(i.e)).then((()=>i(a)))}a.keys=()=>Object.keys(o),a.id=4397,e.exports=a},3063:(e,t,i)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!==o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}function s(e,t,i){return(t=a(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}i.d(t,{Z:()=>r})},4419:(e,t,i)=>{"use strict";function o(e,t,i){return function(e,t,i){const o=t<0?e.length+t:t;if(o>=0&&o<e.length){const o=i<0?e.length+i:i,[a]=e.splice(t,1);e.splice(o,0,a)}}(e=[...e],t,i),e}i.d(t,{q:()=>o})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](i,i.exports,__webpack_require__),i.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,i)=>(__webpack_require__.f[i](e,t),t)),[])),__webpack_require__.u=e=>"static/js/"+e+"."+{2:"f326255e",22:"fb6a4489",70:"84f6c622",154:"cb283918",194:"c726a743",215:"ca4b6f61",243:"19b48686",244:"802a83bc",341:"b54c2c26",376:"c4b1fd40",447:"58a9362a",534:"c922c12d",618:"828d4ff9",644:"f705c979",649:"9c16c101",820:"d78e5dce",867:"464d81e5",881:"4677b7cc",1018:"83ccdf8a",1034:"1a9eef87",1049:"05eaae9c",1053:"e1f287ff",1233:"e6d838de",1245:"426b4bc4",1309:"d27a5fa1",1313:"32b4d98f",1343:"3eeb9c86",1351:"d3054ded",1427:"310c26ea",1531:"ce7c4b35",1590:"7c320832",1600:"ef0fefb9",1604:"47e3cc0e",1798:"7f775104",1824:"daa59dd7",1884:"01d4244e",1931:"a4786a5d",1950:"aa717e9c",1991:"45dc6e30",2026:"98b77f70",2038:"41116d65",2100:"75159347",2159:"3721d400",2191:"1ad92768",2222:"ece35036",2233:"a114c59d",2251:"20ee783a",2308:"50adde06",2385:"e5959dd0",2431:"3c9b0e2c",2483:"f8347ede",2564:"593f03c0",2582:"999d3e23",2594:"c8f38325",2596:"96554223",2687:"44e08ef7",2690:"5dcb790b",2754:"b8a60962",2801:"00fb0bd6",2837:"db543af8",2923:"ff862b67",3059:"07b9de86",3079:"3b8efa8b",3085:"dacd55af",3212:"3fa9650f",3238:"a08e419d",3295:"1e6172bf",3422:"e26fea39",3430:"733447f6",3438:"b13f1573",3446:"cfb6a1a9",3457:"93db8271",3483:"15fa92fb",3488:"dfdba0ed",3536:"d0b20423",3665:"3b885147",3684:"8cf6d86e",3744:"ef285ff7",3849:"974d711a",3860:"6bdd414b",3909:"830f7d51",3926:"8ffdca72",3939:"fac5ef47",3960:"507735fa",3988:"1cc33b86",4001:"f3285506",4175:"2f7ab5d1",4377:"fbefef8f",4439:"5c481a51",4546:"57fbee2d",4577:"0aaf9832",4607:"d6d8454e",4608:"b17bf3f2",4624:"1ac840ca",4643:"e55e908f",4735:"bca95b41",4804:"18a71dea",4810:"62781715",4820:"05200a7f",4862:"109583f5",4912:"29cb9728",4932:"5baec2fa",4950:"a58f0fac",4960:"4b51ee72",4970:"7f670d42",5105:"fe171c4b",5164:"54fb4b21",5172:"73617093",5175:"f93d3f88",5215:"d9092e3a",5251:"b0ded3dc",5488:"2749affc",5571:"ba7101f7",5588:"68b39b72",5662:"aa681a29",5672:"a4ab5c2c",5684:"917225fc",5699:"16c561ef",5744:"b967dedf",5751:"dc7da8b9",5866:"fa341aac",6013:"97e0e90e",6095:"e752f5bd",6112:"dc604396",6115:"7fe6e1b2",6339:"216d61ed",6531:"07226c2b",6589:"52d5a109",6681:"235e56b5",6702:"9207f9d5",6713:"51905614",6729:"3452bdba",6806:"095e0a6a",6815:"7c9438f2",6825:"f8d38df7",6942:"cab23796",7012:"8d484ae7",7039:"310cbd3d",7048:"c1a759bb",7059:"dfbe61b7",7117:"252bb929",7196:"b96c82ba",7208:"0c5af340",7230:"16b48242",7247:"3d1d4ab1",7295:"7b8a72cc",7388:"99c72797",7474:"c7195a1c",7484:"8013e891",7526:"dff6e3a8",7551:"fc43f806",7679:"58e5560d",7701:"7167047d",7733:"44059f1e",7750:"53f02fb3",7779:"989b66ab",7794:"0ff320df",7797:"a4e89846",7812:"a0b54826",7825:"f8615363",7837:"a483ccaf",7882:"fbe844ad",7915:"57ad8910",7930:"a9536f1c",8003:"46aa2c18",8051:"e35f9a6f",8054:"7117b66f",8091:"3739668d",8116:"c14c3b70",8165:"36135e07",8219:"0bec8b5b",8308:"bb668a37",8383:"e87aceb9",8445:"d7509897",8482:"866691a7",8486:"fd30d761",8528:"1ca2aac2",8568:"1836c19e",8572:"e0d8799b",8586:"d3903f55",8602:"0b6a7dac",8623:"cb7d6d1e",8645:"1b04aba3",8666:"aead6bc9",8685:"ccf59d4d",8801:"9aa7b4ba",8820:"6d6e2b41",8885:"23666033",8919:"58553616",8931:"5f91b814",9036:"dce10f7e",9038:"590d921e",9048:"fe9d59e9",9063:"1e7f64a2",9122:"ffe5f7b0",9189:"5aebbf2a",9204:"9e2cb574",9230:"8775100f",9233:"e1525f9d",9283:"aa2d74eb",9304:"3b55c089",9352:"24eacb75",9412:"59806b77",9473:"21d00e95",9490:"0da74b70",9510:"371da971",9515:"490cba85",9579:"18c97e4a",9687:"46e118ff",9745:"0482e5f7",9800:"0193d85a",9858:"9e2ddeb5",9896:"50e99e7e",9971:"67aa2e42",9987:"a6fc9bcc"}[e]+".chunk.js",__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="stable-app:";__webpack_require__.l=(i,o,a,s)=>{if(e[i])e[i].push(o);else{var n,r;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+a){n=d;break}}n||(r=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.setAttribute("data-webpack",t+a),n.src=i),e[i]=[o];var h=(t,o)=>{n.onerror=n.onload=null,clearTimeout(u);var a=e[i];if(delete e[i],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((e=>e(o))),t)return t(o)},u=setTimeout(h.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=h.bind(null,n.onerror),n.onload=h.bind(null,n.onload),r&&document.head.appendChild(n)}}})(),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/app/",(()=>{var e={179:0};__webpack_require__.f.j=(t,i)=>{var o=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var a=new Promise(((i,a)=>o=e[t]=[i,a]));i.push(o[2]=a);var s=__webpack_require__.p+__webpack_require__.u(t),n=new Error;__webpack_require__.l(s,(i=>{if(__webpack_require__.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;n.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",n.name="ChunkLoadError",n.type=a,n.request=s,o[1](n)}}),"chunk-"+t,t)}};var t=(t,i)=>{var o,a,s=i[0],n=i[1],r=i[2],l=0;if(s.some((t=>0!==e[t]))){for(o in n)__webpack_require__.o(n,o)&&(__webpack_require__.m[o]=n[o]);if(r)r(__webpack_require__)}for(t&&t(i);l<s.length;l++)a=s[l],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0},i=self.webpackChunkstable_app=self.webpackChunkstable_app||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(5842),t=__webpack_require__(7313),i=__webpack_require__(1168),o=__webpack_require__(3063),a={start:{DOM_Html:null,current:0,max_pack:15},header:null};var s=__webpack_require__(6417);class n extends t.Component{constructor(e){let t;super(e),this.abstract_changeDevice=e=>{this.setState({device:e})},this.callBack=()=>{this.setState({class:"fade-in"},(()=>{setTimeout((()=>{this.setState({visible:!1},this.stopAllAnination())}),100)}))},this.flagUnMount=!1,t=void 0===this.props.time_out?1e4:this.props.time_out,this.tree_item="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDggMTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMy4xMTI3OSA3LjY0NDg1QzMuMTEyNzkgNy42NDQ4NSAzLjMwMjA4IDMuNjg1NzQgNy4xODI2MiA0LjE0NTkyWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPHBhdGggZD0iTTIuMDE2NCAzLjg3NzI0QzMuMDg5MDMgMy44NzcyNCAzLjk1ODU4IDMuMDA5MjkgMy45NTg1OCAxLjkzODYyQzMuOTU4NTggMC44Njc5NTQgMy4wODkwMyAwIDIuMDE2NCAwQzAuOTQzNzU5IDAgMC4wNzQyMTg4IDAuODY3OTU0IDAuMDc0MjE4OCAxLjkzODYyQzAuMDc0MjE4OCAzLjAwOTI5IDAuOTQzNzU5IDMuODc3MjQgMi4wMTY0IDMuODc3MjRaIiBmaWxsPSIjNTU1N0U0Ii8+DQo8cGF0aCBkPSJNMi4yNDg0MiA1LjIwMzEySDEuNzAwMlY5LjAzMzcxSDIuMjQ4NDJWNS4yMDMxMloiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",this.state={device:this.props.device,skin_config:"",time_out:t,percent_before:0,percent_after:this.props.dataFull.percent,visible:!0,class:""}}stopAllAnination(){this.flagUnMount=!0,void 0!==this.ob_animationEye&&this.ob_animationEye.pause(),void 0!==this.ob_animationPercent_1&&this.ob_animationPercent_1.pause(),void 0!==this.ob_animationPercent_2&&this.ob_animationPercent_2.pause(),void 0!==this.ob_animationPercent_3&&this.ob_animationPercent_3.pause(),void 0!==this.animationBackground_1&&this.animationBackground_1.pause(),void 0!==this.animationBackground_2&&this.animationBackground_2.pause(),void 0!==this.animationBackground_3&&this.animationBackground_3.pause(),void 0!==this.animationBackground_4&&this.animationBackground_4.pause(),void 0!==this.animationBackground_5&&this.animationBackground_5.pause()}componentDidMount(){this.animationBackground(),this.animationPercent(),setTimeout((()=>{this.flagUnMount||this.animationEye()}),500)}UNSAFE_componentWillUpdate(e){void 0!==e.dataFull&&void 0!==e.dataFull.percent&&this.props.dataFull.percent!==e.dataFull.percent&&this.state.percent_before!==e.dataFull.percent&&(e.dataFull.percent<100?this.setState({percent_before:this.props.dataFull.percent,percent_after:e.dataFull.percent},(()=>{this.animationPercent()})):this.setState({percent_before:100,percent_after:100},(()=>{this.animationPercent(this.callBack)})))}animationBackground(){this.animationBackground_1=window.anime({targets:".malibu-"+this.state.device+"-uLoading-tree",scale:3,loop:!0,duration:3e3,baseFrequency:0,direction:"alternate",easing:"linear"}),this.animationBackground_2=window.anime({targets:".malibu-"+this.state.device+"-uLoading-ground",scale:4,loop:!0,duration:3e3,baseFrequency:0,direction:"alternate",easing:"linear"}),this.animationBackground_3=window.anime({targets:".malibu-"+this.state.device+"-uLoading-sun",translateY:-170,loop:!0,duration:3e3,baseFrequency:0,opacity:[0,1],direction:"alternate",easing:"linear",background:["rgb(255,255,255)","#FF6584"]}),this.animationBackground_4=window.anime({targets:".malibu-"+this.state.device+"-uLoading-music",opacity:[0,1],translateY:-10,delay:window.anime.stagger(300,{grid:[14,5],from:"center"}),loop:!0,direction:"alternate"}),void 0!==this.props.dataFull.speed.title&&(this.animationBackground_5=window.anime({targets:".malibu-"+this.state.device+"-uLoading-rocket",translateY:-10,loop:!0,duration:1e3,baseFrequency:0,direction:"alternate",easing:"linear"}))}animationEye(){if(!this.flagUnMount){let e=window.anime.path(".malibu-"+this.state.device+"-uLoading-path path");this.ob_animationEye=window.anime({targets:".malibu-"+this.state.device+"-uLoading-chiken-eye",translateX:e("x"),translateY:e("y"),rotate:e("angle"),duration:6e3,easing:"linear",loop:!0})}}getColor(){let e="",t=document.getElementsByTagName("body")[0].classList.toString();return t.includes("kbank")?(e="#99ddb9",this.props.dataFull.percent<=100&&(e=this.props.dataFull.percent<=25?"#99ddb9":this.props.dataFull.percent<=50?"#33ba73":this.props.dataFull.percent<=75?"#1ab262":"#00A950")):t.includes("sbilh")?(e="#435FC0",this.props.dataFull.percent<=100&&(e=this.props.dataFull.percent<=25?"#D9DFF2":this.props.dataFull.percent<=50?"#B7C2E7":this.props.dataFull.percent<=75?"#8D9DD9":"#667DCC")):(e="#5557E4",this.props.dataFull.percent<=100&&(e=this.props.dataFull.percent<=25?"#CACBF7":this.props.dataFull.percent<=50?"#A7A8F1":this.props.dataFull.percent<=75?"#8385EC":"#5557E4")),e}animationPercent(e){this.ob_animationPercent_1=window.anime({targets:".malibu-"+this.state.device+"-uLoading-progress",width:[this.state.percent_before+"%",this.state.percent_after+"%"],easing:"easeInOutQuart",background:[this.getColor(),this.getColor()],duration:100,complete:()=>{void 0!==this.props.f_callBack_animationPercent&&this.props.f_callBack_animationPercent()}}),void 0!==e?this.ob_animationPercent_2=window.anime({targets:".number-percent-input",value:[this.state.percent_before,this.state.percent_after],round:1,easing:"easeInOutQuart",duration:20,complete:()=>{setTimeout((()=>{e()}),500)}}):this.ob_animationPercent_3=window.anime({targets:".number-percent-input",value:[this.state.percent_before,this.state.percent_after],round:1,easing:"easeInOutQuart",duration:100})}renderForDevice(){return"desktop"===this.state.device?(0,s.jsxs)("div",{className:"malibu-desktop-uLoading "+this.state.class,children:[(0,s.jsxs)("div",{style:{display:"none"},children:[(0,s.jsx)("i",{className:"material-icons",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-round",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-outlined",style:{visibility:"hidden"},children:"menu"})]}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-header",children:[(0,s.jsxs)("div",{style:{position:"absolute",marginLeft:"320px",zIndex:"3"},children:[(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMzIiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDEzMyAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02Ni4wODI4IDExNy4yNDVDOTUuNjg4NyAxMTcuMjQ1IDExOS42ODkgOTMuMjg5MSAxMTkuNjg5IDYzLjczNzRDMTE5LjY4OSAzNC4xODU4IDk1LjY4ODcgMTAuMjI5NSA2Ni4wODI4IDEwLjIyOTVDMzYuNDc2OSAxMC4yMjk1IDEyLjQ3NjYgMzQuMTg1OCAxMi40NzY2IDYzLjczNzRDMTIuNDc2NiA5My4yODkxIDM2LjQ3NjkgMTE3LjI0NSA2Ni4wODI4IDExNy4yNDVaIiBmaWxsPSIjM0YzRDU2Ii8+CjxwYXRoIGQ9Ik0zMi4zMzQ0IDY4LjAzMjZDMzMuNjY1OCA2Ni40NDE3IDM1LjMzMDkgNjUuMTYyIDM3LjIxMiA2NC4yODM4QzM5LjA5MzIgNjMuNDA1NiA0MS4xNDQ3IDYyLjk1MDUgNDMuMjIxNCA2Mi45NTA1QzQ1LjI5ODEgNjIuOTUwNSA0Ny4zNDk2IDYzLjQwNTYgNDkuMjMwNyA2NC4yODM4QzUxLjExMTkgNjUuMTYyIDUyLjc3NyA2Ni40NDE3IDU0LjEwODQgNjguMDMyNkM1Ni4zODY1IDY1Ljg2MTkgNTcuOTYxIDYzLjA1OTggNTguNjI5MSA1OS45ODc2QzU5LjI5NzIgNTYuOTE1NSA1OS4wMjgyIDUzLjcxNCA1Ny44NTY4IDUwLjc5NThDNTYuNjg1NCA0Ny44Nzc2IDU0LjY2NTIgNDUuMzc2NSA1Mi4wNTY3IDQzLjYxNDhDNDkuNDQ4MiA0MS44NTMxIDQ2LjM3MDkgNDAuOTExNiA0My4yMjE0IDQwLjkxMTZDNDAuMDcxOSA0MC45MTE2IDM2Ljk5NDYgNDEuODUzMSAzNC4zODYxIDQzLjYxNDhDMzEuNzc3NiA0NS4zNzY1IDI5Ljc1NzQgNDcuODc3NiAyOC41ODYgNTAuNzk1OEMyNy40MTQ2IDUzLjcxNCAyNy4xNDU2IDU2LjkxNTUgMjcuODEzNyA1OS45ODc2QzI4LjQ4MTggNjMuMDU5OCAzMC4wNTYzIDY1Ljg2MTkgMzIuMzM0NCA2OC4wMzI2VjY4LjAzMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzQuOTA0IDY4LjAzMjZDNzYuMjM1MyA2Ni40NDE3IDc3LjkwMDQgNjUuMTYxOSA3OS43ODE2IDY0LjI4MzhDODEuNjYyOCA2My40MDU2IDgzLjcxNDIgNjIuOTUwNSA4NS43OTEgNjIuOTUwNUM4Ny44Njc3IDYyLjk1MDUgODkuOTE5MSA2My40MDU2IDkxLjgwMDMgNjQuMjgzOEM5My42ODE1IDY1LjE2MTkgOTUuMzQ2NSA2Ni40NDE3IDk2LjY3NzkgNjguMDMyNkM5OC45NTYgNjUuODYxOSAxMDAuNTMxIDYzLjA1OTggMTAxLjE5OSA1OS45ODc2QzEwMS44NjcgNTYuOTE1NSAxMDEuNTk4IDUzLjcxNCAxMDAuNDI2IDUwLjc5NThDOTkuMjU0OSA0Ny44Nzc2IDk3LjIzNDggNDUuMzc2NSA5NC42MjYzIDQzLjYxNDhDOTIuMDE3OCA0MS44NTMxIDg4Ljk0MDQgNDAuOTExNiA4NS43OTEgNDAuOTExNkM4Mi42NDE1IDQwLjkxMTYgNzkuNTY0MSA0MS44NTMxIDc2Ljk1NTYgNDMuNjE0OEM3NC4zNDcxIDQ1LjM3NjUgNzIuMzI3IDQ3Ljg3NzYgNzEuMTU1NiA1MC43OTU4QzY5Ljk4NDEgNTMuNzE0IDY5LjcxNTEgNTYuOTE1NSA3MC4zODMyIDU5Ljk4NzZDNzEuMDUxMyA2My4wNTk4IDcyLjYyNTkgNjUuODYxOSA3NC45MDQgNjguMDMyNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNy40NTQ4IDgzLjQwOTRDMzAuOTM3OSA4My40MDk0IDMzLjc2MTQgODAuNTkxIDMzLjc2MTQgNzcuMTE0M0MzMy43NjE0IDczLjYzNzcgMzAuOTM3OSA3MC44MTkzIDI3LjQ1NDggNzAuODE5M0MyMy45NzE4IDcwLjgxOTMgMjEuMTQ4MiA3My42Mzc3IDIxLjE0ODIgNzcuMTE0M0MyMS4xNDgyIDgwLjU5MSAyMy45NzE4IDgzLjQwOTQgMjcuNDU0OCA4My40MDk0WiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNOTkuOTgwNyA4My40MDk0QzEwMy40NjQgODMuNDA5NCAxMDYuMjg3IDgwLjU5MSAxMDYuMjg3IDc3LjExNDNDMTA2LjI4NyA3My42Mzc3IDEwMy40NjQgNzAuODE5MyA5OS45ODA3IDcwLjgxOTNDOTYuNDk3NiA3MC44MTkzIDkzLjY3NDEgNzMuNjM3NyA5My42NzQxIDc3LjExNDNDOTMuNjc0MSA4MC41OTEgOTYuNDk3NiA4My40MDk0IDk5Ljk4MDcgODMuNDA5NFoiIGZpbGw9IiNGRjY1ODQiLz4KPHBhdGggZD0iTTYzLjcxNzcgNjQuNTI0MUw1OC45ODc4IDg0Ljk4MzFMNjYuODcxIDc3LjExNDRMNjMuNzE3NyA2NC41MjQxWiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNODguMDIxNiAxNDMuMjEyTDgyLjY1MTYgMTM4LjcxNEw4Mi43NzY3IDE0My4yMTJIODEuMTA4OEw4MC45NzU2IDEzOC40NTZMNzMuNzI1MiAxNDMuMjEySDcwLjY4OTlMODAuOTIxNCAxMzYuNUw4MC41MjUxIDEyMi40MDRMODAuMjI5MSAxMTEuNzU5TDgxLjg5MjggMTExLjcxM0w4Mi4xOTMgMTIyLjQwNEw4Mi41ODkgMTM2LjQ4N0w5MC42MTQ3IDE0My4yMTJIODguMDIxNloiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTYyLjc5MzEgMTQzLjIxMkw1Ny40MjMgMTM4LjcxNEw1Ny41NDgyIDE0My4yMTJINTUuODg0OEw1NS43NTEzIDEzOC40NTZMNDguNTAwOCAxNDMuMjEySDQ1LjQ2NTZMNTUuNjkyOSAxMzYuNUw1NS4yOTY5IDEyMi40MDRMNTUuMDAwOCAxMTEuNzU5TDU2LjY2ODQgMTExLjcxM0w1Ni45Njg3IDEyMi40MDRMNTcuMzYwNSAxMzYuNDg3TDY1LjM4NjUgMTQzLjIxMkg2Mi43OTMxWiIgZmlsbD0iIzNGM0Q1NiIvPgo8cGF0aCBkPSJNNjYuODcxMyA2LjI5NTAxQzY1LjQwMDQgNi4yOTUwMSA2NC4xMDI4IDcuNDM1NDggNjMuMjM1MyA5LjE4NzIzQzYyLjQ3MDYgNi41NTMxMiA2MC44NjQxIDQuNzIxMjcgNTguOTg4IDQuNzIxMjdDNTguODYwNSA0LjczMzkyIDU4LjczNCA0Ljc1NTEzIDU4LjYwOTMgNC43ODQ3NkM1Ny44ODgyIDEuOTcyMzYgNTYuMjEyMSAtMi40Nzk1NWUtMDUgNTQuMjU4IC0yLjQ3OTU1ZS0wNUM1MS42NDU3IC0yLjQ3OTU1ZS0wNSA0OS41MjgxIDMuNTIyOTkgNDkuNTI4MSA3Ljg2ODhDNDkuNTI4MSAxMi4yMTQ2IDUxLjY0NTcgMTUuNzM3NiA1NC4yNTggMTUuNzM3NkM1NC4zODU1IDE1LjcyNSA1NC41MTIxIDE1LjcwMzcgNTQuNjM2NyAxNS42NzQxQzU1LjM1NzkgMTguNDg2NSA1Ny4wMzM5IDIwLjQ1ODkgNTguOTg4IDIwLjQ1ODlDNjAuNDU4OSAyMC40NTg5IDYxLjc1NjUgMTkuMzE4NCA2Mi42MjQgMTcuNTY2N0M2My4zODg3IDIwLjIwMDggNjQuOTk1MSAyMi4wMzI2IDY2Ljg3MTMgMjIuMDMyNkM2OS40ODM2IDIyLjAzMjYgNzEuNjAxMiAxOC41MDk2IDcxLjYwMTIgMTQuMTYzOEM3MS42MDEyIDkuODE4MDEgNjkuNDgzNiA2LjI5NTAxIDY2Ljg3MTMgNi4yOTUwMVoiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTE1Ljc2NjYgODQuMDE0NUMxMy42OTYxIDg0LjAxNDUgMTEuNjQ1OSA4My42MDc0IDkuNzMzMDEgODIuODE2NkM3LjgyMDEyIDgyLjAyNTcgNi4wODIwMyA4MC44NjY1IDQuNjE3OTcgNzkuNDA1MUMzLjE1MzkxIDc3Ljk0MzcgMS45OTI1NiA3Ni4yMDg4IDEuMjAwMjEgNzQuMjk5NEMwLjQwNzg3MiA3Mi4zOTAxIDYuNDI5NWUtMDUgNzAuMzQzNiA2LjQyOTVlLTA1IDY4LjI3NjlMNi40Mjk1ZS0wNSA2MC40MDhDNi40Mjk1ZS0wNSA1Ni4yMzQyIDEuNjYxMTcgNTIuMjMxMyA0LjYxNzk3IDQ5LjI3OTlDNy41NzQ3NyA0Ni4zMjg1IDExLjU4NTEgNDQuNjcwNCAxNS43NjY2IDQ0LjY3MDRWNDQuNjcwNEwxNS43NjY2IDg0LjAxNDVaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMTYuMzk5IDQ0LjY3MDVDMTE4LjQ3IDQ0LjY3MDUgMTIwLjUyIDQ1LjA3NzYgMTIyLjQzMyA0NS44Njg1QzEyNC4zNDYgNDYuNjU5NCAxMjYuMDg0IDQ3LjgxODYgMTI3LjU0OCA0OS4yOEMxMjkuMDEyIDUwLjc0MTMgMTMwLjE3MyA1Mi40NzYyIDEzMC45NjYgNTQuMzg1NkMxMzEuNzU4IDU2LjI5NSAxMzIuMTY2IDU4LjM0MTQgMTMyLjE2NiA2MC40MDgxVjY4LjI3N0MxMzIuMTY2IDcwLjM0MzcgMTMxLjc1OCA3Mi4zOTAxIDEzMC45NjYgNzQuMjk5NUMxMzAuMTczIDc2LjIwODkgMTI5LjAxMiA3Ny45NDM4IDEyNy41NDggNzkuNDA1MUMxMjYuMDg0IDgwLjg2NjUgMTI0LjM0NiA4Mi4wMjU3IDEyMi40MzMgODIuODE2NkMxMjAuNTIgODMuNjA3NSAxMTguNDcgODQuMDE0NiAxMTYuMzk5IDg0LjAxNDZWODQuMDE0NlY0NC42NzA1SDExNi4zOTlaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMjQuNjYxIDYxLjY0NDZIMTIyLjE2QzEyMi4xNiAyOS45Nzc1IDk2LjM0OTIgNC4yMTQyMyA2NC42MjM3IDQuMjE0MjNDMzIuODk4MyA0LjIxNDIzIDcuMDg3NzUgMjkuOTc3NSA3LjA4Nzc1IDYxLjY0NDZINC41ODYxOEM0LjU4NjE4IDI4LjYwMDUgMzEuNTE4OSAxLjcxNzI2IDY0LjYyMzcgMS43MTcyNkM5Ny43Mjg2IDEuNzE3MjYgMTI0LjY2MSAyOC42MDA2IDEyNC42NjEgNjEuNjQ0NloiIGZpbGw9IiM1NTU3RTQiLz4KPC9zdmc+Cg==",alt:"chicken"}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-chiken-eye left"}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-chiken-eye right"}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-path",children:(0,s.jsx)("svg",{width:"12",height:"3",xmlns:"http://www.w3.org/2000/svg",style:{visibility:"hidden"},children:(0,s.jsx)("path",{d:"M 0 2 Q 6 -5 12 2 M 12 2 Q 6 -5 0 2",stroke:"black",fill:"transparent"})})})]}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-ground",style:{position:"absolute",marginLeft:"350px"},children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSI4NyIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDI4NyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yODYuMzUxIDExLjY4Nkw4MS40MDg4IDE0Ljc3MDFMMC4wNTc2MTcyIDAuMzc4MTc0SDEyNy4wNThMMjg2LjM1MSAxMS42ODZaIiBmaWxsPSIjRTZFNkU2Ii8+DQo8L3N2Zz4NCg==",alt:"ground"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-tree one",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-tree two",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-tree three",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-tree four",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-tree five",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-sun"}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-music-list",style:{position:"absolute"},children:[(0,s.jsx)("div",{className:"malibu-desktop-uLoading-music six",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMiAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS42NDU5IDEyLjA5MDVMMTkuNjQ3IDEyLjA4ODJMMTYuODM3MiAxMC45MjAyTDUuMDkzNDUgNi4zNjMzNUw4LjA1NzQ1IDMuNzMxMTJDOC4wNTc0NSAzLjczMTEyIDEwLjAyOSAxLjAwMDU1IDEzLjE3NDEgMi44OTQ0OUwxMi4yNTQzIDEuNTI5OTVDMTIuMjU0MyAxLjUyOTk1IDEwLjUyNTEgLTAuNzU1MTU3IDguMTA0NjUgMS42NjI1NEM4LjEwNDY1IDEuNjYyNTQgNS4xMDk3NiA2LjA2OTU0IDAuNDA1NTE4IDQuOTQ2MTlMMTYuNDcxNCAxMS43MzM2TDE2LjU1NTcgMTEuODA5OUwxNS40NzMxIDE0LjM1NzlDMTUuMzI0OSAxNC41OTEgMTUuMTk4NSAxNC44MzcxIDE1LjA5NTQgMTUuMDkzM0MxNC4zMzcgMTcuMDA0NyAxNS43Njk0IDE4LjkwNTkgMTcuMTIzNCAxOS40NDEyQzE4LjQ3NzUgMTkuOTc2NiAyMC4xOTAxIDE4Ljg2MSAyMC45NDg1IDE2Ljk0OTZDMjEuNjk2NSAxNS4wNjQzIDIwLjk2NTQgMTIuNjY5MiAxOS42NDU5IDEyLjA5MDVaIiBmaWxsPSIjM0YzRDU2Ii8+DQo8L3N2Zz4NCg==",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-music five",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAzMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yOS4yNjg5IDIwLjM2ODFDMjMuNDM2OCAxNy4wMzk3IDI0LjYwMzkgOS43MzU4NCAyNC42MDM5IDkuNzM1ODRDMjQuNDU3MSA0Ljk5MDg5IDIwLjUyOTcgNS42NjI1NiAyMC41Mjk3IDUuNjYyNTZMMTkuMTAwMyA1Ljk4ODE0QzE4LjQzNjMgNS42ODA1MSAxNy43MDUxIDUuNTQ1NTMgMTYuOTc0OCA1LjU5NTc1TDE0LjgwMDUgNS45NjFDMTkuNzUxNiA3LjEyMjE5IDE5LjM0NDggMTEuMjU2NCAxOS4zNDQ4IDExLjI1NjRMMjAuMDM4NCAxNi4wOTAzTDcuMDY1MTUgMTAuODY2NEw4LjU1NDY5IDcuMzYwNjdDOC43NjA1NSA3LjAzNjk2IDguOTM2MTggNi42OTUwNiA5LjA3OTM4IDYuMzM5MjhDMTAuMTMyNyAzLjY4NDUzIDguMTQzMyAxLjA0MzkxIDYuMjYyNTkgMC4zMDA0MkM0LjM4MTg5IC0wLjQ0MzA2NyAyLjAwMzM2IDEuMTA2MyAwLjk1MDAxOCAzLjc2MUMtMC4wODg5Nzk3IDYuMzc5NTIgMC45MjY0MDcgOS43MDYxNSAyLjc1OTExIDEwLjUwOTlMMi43NTc1NiAxMC41MTNMNi42NjAyMiAxMi4xMzUzTDYuNjg5MjcgMTIuMDQzNUwyOS4yNjg5IDIwLjM2ODFaTTIyLjY4MDkgMTEuODc0NkwyMy4wOTgzIDE2LjUxNzVDMjAuNjQ4OCAxMy4yNzE5IDIxLjE0OTUgOS40MTU3OCAyMS4xNDk1IDkuNDE1NzhDMjEuMTE1IDguNTIwMjkgMjAuODEyMyA3LjY1NTY5IDIwLjI4MDYgNi45MzM1OUMyMy4wOTQ0IDguNjE0MzIgMjIuNjgwOSAxMS44NzQ2IDIyLjY4MDkgMTEuODc0NkgyMi42ODA5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-music four",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxNyAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMC4yMjE3IDEzLjMzOUw5LjU5Mjc0IDE0LjgxOTJDOS41MDY2NSAxNC45NTQ2IDkuNDMzMjEgMTUuMDk3NiA5LjM3MzM0IDE1LjI0NjRDOC45MzI3NSAxNi4zNTY3IDkuNzY0ODQgMTcuNDYxMSAxMC41NTE0IDE3Ljc3MjFDMTEuMzM4IDE4LjA4MzEgMTIuMzMyOSAxNy40MzUxIDEyLjc3MzQgMTYuMzI0N0MxMy4yMDggMTUuMjI5NSAxMi43ODMzIDEzLjgzODIgMTIuMDE2OCAxMy41MDJMMTIuMDE3NCAxMy41MDA3TDEwLjM4NTEgMTIuODIyMkw0LjgwMTI2IDEwLjY1NTVMNy45OTE3NCAyLjYxNDYzTDcuNTE4ODggMi40Mjc2OEw0LjMyNzE5IDEwLjQ3MTZMMy42MzY3NSAxMC4yMDM3TDYuODQwODMgMi4xMjgzOUw2LjkyNTI1IDIuMTY0MDVMMTMuNDg4OCA0LjkzNjk4TDEzLjUzNzggNC45ODEyOEwxMi45MDg5IDYuNDYxNDNDMTIuODIyOSA2LjU5NjgyIDEyLjc0OTQgNi43Mzk4MiAxMi42ODk1IDYuODg4NjNDMTIuMjQ4OSA3Ljk5ODk5IDEzLjA4MSA5LjEwMzQyIDEzLjg2NzYgOS40MTQzOUMxNC42NTQyIDkuNzI1MzYgMTUuNjQ5MSA5LjA3NzM0IDE2LjA4OTYgNy45NjY5OEMxNi41MjQyIDYuODcxNzkgMTYuMDk5NSA1LjQ4MDQ0IDE1LjMzMyA1LjE0NDI4TDE1LjMzMzYgNS4xNDI5NEwxMy43MDEzIDQuNDY0NDVMNy4wMzA3OCAxLjY0OTc1TDcuMDMwNSAxLjY0OTYyTDYuODE0MTUgMS41NTgzNEw0LjM0NTQ4IDAuNTE2NjYzTDAuODM5ODQ0IDkuMzUxODVMMTAuMTcyNyAxMy4yOTQ3TDEwLjIyMTcgMTMuMzM5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-music three",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMyAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4yNDYzIDcuMDAyN0wxMS4yNDY5IDcuMDAxNDJMOS42MTQ2MSA2LjMyMjg4TDIuNzkyNTkgMy42NzU4MUw0LjUxNDQxIDIuMTQ2NzNDNC44NTEyNSAxLjY5ODUgNS4zNDg2OCAxLjM5NzYyIDUuOTAyNjQgMS4zMDcwNEM2LjQ1NjYgMS4yMTY0NiA3LjAyNDE5IDEuMzQzMTggNy40ODY3MSAxLjY2MDY5TDYuOTUyMzkgMC44NjgwNEM2Ljk1MjM5IDAuODY4MDQgNS45NDc5MSAtMC40NTkzNyA0LjU0MTgyIDAuOTQ1MDg2QzQuNTQxODIgMC45NDUwODYgMi44MDIwNyAzLjUwNTEzIDAuMDY5MzM1OSAyLjg1MjU2TDkuNDAyMTcgNi43OTU0NUw5LjQ1MTE1IDYuODM5NzVMOC44MjIyNiA4LjMxOTkxQzguNzM2MTQgOC40NTUyOSA4LjY2MjY4IDguNTk4MyA4LjYwMjgxIDguNzQ3MTFDOC4xNjIyNyA5Ljg1NzQzIDguOTk0MzQgMTAuOTYxOSA5Ljc4MDkzIDExLjI3MjhDMTAuNTY3NSAxMS41ODM4IDExLjU2MjMgMTAuOTM1OCAxMi4wMDI5IDkuODI1NDZDMTIuNDM3NSA4LjczMDI2IDEyLjAxMjggNy4zMzg5MiAxMS4yNDYzIDcuMDAyN1oiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-music two",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMyAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4zNzkzIDMuODQ5NzdMMTEuMzc5NyAzLjg0ODg0TDEwLjIwNDUgMy4zNjAyOUw1LjI0NTggMS4yNjc4OEwzLjQ2ODM3IDAuNTE3OTE0TDMuMzMxOTYgMC44NjE2NTZMMC45NDQzMzYgNi44NzkxNUw3LjY2Mzg5IDkuNzE4MDJMNy42OTkxNiA5Ljc0OTkxTDcuMjQ2MzUgMTAuODE1NkM3LjE4NDM3IDEwLjkxMzEgNy4xMzE0OSAxMS4wMTYxIDcuMDg4MzYgMTEuMTIzMkM2Ljc3MTE3IDExLjkyMjYgNy4zNzAyNyAxMi43MTc4IDcuOTM2NjEgMTIuOTQxN0M4LjUwMjk1IDEzLjE2NTYgOS4yMTkyMyAxMi42OTkxIDkuNTM2NDIgMTEuODk5NkM5Ljg0OTMgMTEuMTExMSA5LjU0MzU0IDEwLjEwOTMgOC45OTE2MyA5Ljg2NzI4TDguOTkyMTEgOS44NjYzNEw3LjgxNjg3IDkuMzc3NzlMMy43OTY1MiA3LjgxNzhMNi4wOTM2NiAyLjAyODQyTDUuNzUzMTkgMS44OTM4NEwzLjQ1NTIzIDcuNjg1MzdMMi45NTgxIDcuNDkyNDZMNS4yNjUwNCAxLjY3ODMzTDUuMzI1ODEgMS43MDQwMUwxMC4wNTE1IDMuNzAwNUwxMC4wODY4IDMuNzMyMzlMOS42MzQwMiA0Ljc5ODEzQzkuNTcyMDMgNC44OTU2IDkuNTE5MTQgNC45OTg1NSA5LjQ3NjAzIDUuMTA1NjlDOS4xNTg4IDUuOTA1MTIgOS43NTc5IDYuNzAwMzMgMTAuMzI0MiA2LjkyNDE5QzEwLjg5MDYgNy4xNDgwNiAxMS42MDY5IDYuNjgxNTUgMTEuOTI0MSA1Ljg4MjExQzEyLjIzNjkgNS4wOTM1NiAxMS45MzEyIDQuMDkxODEgMTEuMzc5MyAzLjg0OTc3WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop-uLoading-music one",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDEzIDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMTIuNjM2OSA4LjYyMjg0QzEwLjE5NzYgNy4yMzA3NiAxMC42ODU3IDQuMTc1ODcgMTAuNjg1NyA0LjE3NTg3QzEwLjYyNDMgMi4xOTEzMSA4Ljk4MTY5IDIuNDcyMjEgOC45ODE2OSAyLjQ3MjIxTDguMzgzODYgMi42MDg0MUM4LjEwNjE0IDIuNDc5NzUgNy44MDAzMiAyLjQyMzMgNy40OTQ4NyAyLjQ0NDMxTDYuNTg1NDYgMi41OTcwNUM4LjY1NjI2IDMuMDgyNzEgOC40ODYxMyA0LjgxMTg1IDguNDg2MTMgNC44MTE4NUw4Ljc3NjI1IDYuODMzNjZMMy4zNTAxNiA0LjY0ODcyTDMuOTczMTYgMy4xODI1QzQuMDU5MjYgMy4wNDcxMSA0LjEzMjcyIDIuOTA0MTEgNC4xOTI1OSAyLjc1NTNDNC42MzMxNCAxLjY0NDk0IDMuODAxMDcgMC41NDA1MDYgMy4wMTQ0OCAwLjIyOTU3NkMyLjIyNzg4IC0wLjA4MTQzMTQgMS4yMzMwNiAwLjU2NjYzMSAwLjc5MjQ3NiAxLjY3Njk1QzAuMzU3OTQ2IDIuNzcyMTQgMC43ODI2NDIgNC4xNjM0OCAxLjU0OTE2IDQuNDk5NjNMMS41NDg1MSA0LjUwMDk3TDMuMTgwOCA1LjE3OTQ2TDMuMTkyOTUgNS4xNDEwNEwxMi42MzY5IDguNjIyODRaTTkuODgxNDQgNS4wNzA0MUwxMC4wNTU0IDcuMDA1NjRDOS40NDEwNSA2LjE0NTE1IDkuMTUyNDMgNS4wOTUwMSA5LjI0MDkxIDQuMDQyMDVDOS4yMjY0OSAzLjY2NzUgOS4wOTk5MSAzLjMwNTg3IDguODc3NTEgMy4wMDM4NkM5LjIxOTQgMy4yMjI1IDkuNDk0MTEgMy41MzEyMSA5LjY3MTI3IDMuODk1ODlDOS44NDg0MyA0LjI2MDU4IDkuOTIxMTcgNC42NjcwNSA5Ljg4MTQ0IDUuMDcwNFY1LjA3MDQxWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})})]}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-progress-bar ",children:[(0,s.jsx)("div",{className:"malibu-desktop-uLoading-progress",style:{width:this.state.width}}),(0,s.jsx)("label",{className:"loading",children:this.props.dataFull.title}),(0,s.jsxs)("label",{className:"number-percent",children:[(0,s.jsx)("input",{className:"number-percent-input",readOnly:!0}),"%"]})]}),this.props.dataFull.speed.title?(0,s.jsxs)("div",{className:"row",style:{margin:"auto",marginTop:"150px",width:"fit-content"},children:[(0,s.jsx)("div",{className:"malibu-desktop-uLoading-rocket",children:(0,s.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfOSURBVHgBzZldbBzVFcf/dz722+t1SJOqH2RT6AMVNCsV+hKgS/pQlxRwGqlK3KjY6gMoqZT1S9SqlWyr5akPXktJVLVVsSVwTNUSC5IIPzSZUHho0hajBAWhAAYChJBk1/Z+785czp31rL27M7vrXQf4P/hez71z5zfnnnPuvbMMXwIlYn0hBZ7IoStq5FwG28AR4mARJiEk6nb3MHxBErAS/AME8BhhRAAeuloEhq7IEGUzfe7gS7E9UQ55mKpRu/ZW4T838MVY/wBN/0F6YKRZ31bgbzl4Mws7qRn8LQMvB5x/mAMxtKlG8LcEPBHrj8hgx6kaRodygE/KWGelhvYJP56haqhRP6lnI5mNepYaR2GACO8PcLyalpAyli9yvLmuFl+K7SPX4CNO7fIdd8Hd+1NIX98C5vWVGbIZlC78F4XZ4zBufuo4dpXlOdfWDbwRNPP64e7bB/X7DzQco/DS88jPPu/YbsF/XMD4urhKM0v7njgE5Z7vmfW8wfGf6zreWNRxccGATtO/ySOZbfKddwE0A/p7l23HsdzmgwJ/rmOLN4NW73sAnv4nzPrFBR3/uloy4VerW2XYs8VllkLp3w81dBsd+kMSOlB5UXGGFnL37jbLhSLHqY+KddBW2/R7hUqb+uCPGg2Jnvi0pmCNivbFQulCMrw9qIv9xZgIcSeJYGQbNpr10580zh4C/kJSx70bFIqFB5Gfecapqyb+tAQuYOHN04ZIesww8lFeAvbfZjS9T9rwlUr9/TRv2v9artxHZByJXti4ed2mF59sCi6AJV/hIEcxBi6ZeTmfL+AXPTq+qmJNsnORWuWa24L829BE6Qge3fNklLHi05yzsHWtVNJxGy9ioAVrC/FsulL/pl/CB+nG9212r+QKe2tDI/+eFxXJHnr/MGPyGdQs2dlsDo+3CC2kv33JXGCE7ulunnnvDpX76JcvOfQwxq2aZA/NRmqvl4olbJYN9AabT7klAV0893IZisBF4Dnp4a+plXRYPP9y/VjAfDB+bMYW3AlaKF8orMnalgq0EvLlad+xWTEBrQXHLTHc7pPMHH738oyIFy2e+3fdOAx8tPr/CvSTYXKPd+0ebhgGArk0jm3V0Y5EhvAd+F0lNTpJuEj2b2MV97IkrN0df3Zr1ZhWZdmnbSUyyTZv6y5SKxFomSN/qLhNrQRojvJ25shTddDm/eC7aq+ZFicXGSAXeRoOWlpK48/fKOJODzqWyNFiTyI2XiYULe3OwWhqIhh/drD2ohktBD1sc4PGDf46bYLmvusxwgQ9jBaVNhiuGRK2KvWuVd7G/q+lcYSL0DZs1K5NEfkaVtpjSHKDjSOnxLWZeNLqdCL285aOXwL4rykvTmdd+MvGRXQq4SJW3q6VAib1lZnZuJFRRlYDW6KI/kGzU94LGTemUx6kOcMOTwGb5LVnoNWizdtoT3xqzqldAWfbqNPgmekjE3Yd0i/8uI+/n4vyGyp4oj4PCysfS3vwIoELCeC9gRw6he6OT4006qOAXEP7+5GZ2obE8WjI5fKNMc4GWDgPdkcRsuylvawLhTkOI1WG/m0igHdLK6viXn+uI2sT9HgzaCHH+c+c2PkaFREKXCjdXigBd6VNQCf+z3DovL8K+lFfHr/syqJD6JbiSXGAHjOhZQnuTV0Q5WpJAeA3b1dDiwzSIfRoK5a2VAeeOvnwAI1ivrUdtNDkq25cvlYN/VRPCu2IPsslGYwhgp5Yy311VBIv53Q15LOFnr3gwuQrKytR5PYS/rg9Db+09pX1co5h7BMMBtcILVRl8aUXe6NUhAXwap+2dHVBMq1tafe9BRz4YRa8QIH6DsyyFaUoqP+ZoJm7KYvVL4k2VAVORzMzp0u+leMN51ysrGZ99qJqwgfcHId2ZnH/t8vnSOaiGfoO7QTnmj/wpQVGwBJu0KP9AQ/OPndUQxuqApeZyOmkkoHCjRSMog7F54IS9CKVZ3jlLRWPb89j9315E77q3i30EnOqsF7ICXh2keFCUYHb7YZXMWNEQ5uqAqfIDgu769llS5LLyF0r/jzWn64DtlTKZcF6WGj1IjWXYXidEs0/EhKykmwC+/0rQU2zOYn1ACeX0MoDYkCUKuVvy02cgE3oVB5cfJLq1pNIqBoZ4Oyvr0g4n5XGVFWB4lXhV+qObvNYPvi2o6q04d15clCnh5ovIaxNbmJJ+HpxsT5PC+DSQvk6+1ZmKBh/Zhdt+uOXEEBXMACP1wOlHloYZFKb/tM82lRdHq+kQ7K2JWFRAccUes/gynVOMZC/njJfyuB8PPDoqYlKo8rCcNY8beji6EBV4InjvWGIdEhnQWFtI18kK+eoLJnt4roJTKClpRz0pbxZJ2mBR05VL9W0eXPaUNAnj0G7XWjb4LKsRKxParkPkxZUlYS7rAIuW7oGunx+tf/Nh1xk9Myxwxo6VJWPS5LIKoROX52WwebIOqMSY+buUVi+RDNgWVnn7KE6S5dHisIB+vTU4RGsg6rTIWdzBuNDYDwpF1yad9fMvLieOfkT+j2Hz5v7Cs7P6pBmuh45odkNWLZ2/VGQXnXozNThjvx6tdb9x6sdew+M1fzSpnEyhjZ1tIV1tXWt+TNzI0X79x/kvAKtiQVGmz46gVugdbN49Ge/6mMyPyi+DFD6mdGmOw/ARvoMZ7pw6Vztu/cAAAAASUVORK5CYII=",alt:"rocket"})}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-speed",children:[(0,s.jsx)("label",{children:this.props.dataFull.speed.title}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-speed-number "+(this.props.dataFull.cmd.error.message?"error":""),children:[(0,s.jsx)("div",{style:{margin:"auto"},children:this.props.dataFull.speed.number_speed}),(0,s.jsx)("img",{src:this.props.dataFull.cmd.error.message?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGiSURBVHgB7ZXRTcMwEIbvXPJStciEB6jUVMkG7QZlg44AE5QNygYdATahG8AGrQRSWx7AEhIvSDli5AQ3cWO7ooiHfpIlxz75fOf/LgAH/gPL0+hSDvgL1jwarcOI5Fjy7hA8YeALg2k+bSBOwBMvhyqNcf5NCMNV2LsGD9DVcMnPY8aCe92hQnyk70kihHA5xznCBgsmBmcS3mJt59Q6Raiim9fZpOln0hGrBVhwipBhMLXZNDC4BQesDr+FgjDS15BoBkSP+poUkEuZWFOa1ZtMZawtibPXpxM5eQmjN8reUNtbZHtJ3Xms3lnXJJRCjaTNFfE67N3ALg6lUBDQq8bUNcZzzrm3Q1kGpXTlFGu4Zb+uTIxvaCsDhEwwhEIKZZtNmtJFRzzPyutHJmPVUbZCgH2b3FSfnVXOLi+U+6UBKZQ7ObAqmp9LyTIx/MI27ikfu8naDxaHhfQNJVOxzfrsQO+zGxE2WWtsOcCXuMmON5ReROjSL3dEZH12kPfZIkL1N9gHXO+zekpHsCdIe6aiLCiFq5RRH/YBVcvjwK/xBRbpfbJqi9GHAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgB3ZZLUuMwEIa7pZqZ5eQInhMM3MBZThlqnBMQdiwIBScIuQFVAYodzgWIgQKW+AaEExBuEJYkZTUtB8dvEtuw4d9EVrr6a0ndagF8d+GqhjtD2/jx0zcF4l9F2NBzAmmiiB5nU+mdtdzxKn6WAnevN0yUsgsE5hJPHpAa9K1r52OzAu0P7Yb/i84ZZEM5ObMp9opWnAvcv7MNX9E9Dw2opjFDm3lQ/ALYAiqnuH7UcifxSZG2Ylj3E2BaRnAkKSWAnZvNNv+0oaKIaOADrvO+ufMJsHXSFQIBxRbUgB1vXLVPLXfE2Xq5cKkzPI4IB+9n9wQVFMJifhI5oEAaJ9bFsx4vVugr34QKWgYLbPxZMxwvgKRwLcffGGrCAghGvqMzRGjEjfj6Ouhbl384kB7UgAWuBf7OAtNGpIIAjjfdQ/7argpLKwISTFJRdffuWkHW9i3XCaFVYKToJQNEQaOsoXLiUN7eZpWVoRCjDFAK6UFudBGUt9crC9OaTcHLAI/+8UWL0R9F0LIwIkj0ykTSkJ+fkSG0c/t/yLAHKHHXIuIg8Z020E4r9MAiOVxaiQzPlIV8DbJxDPWle2JmxzJA3b+kwGZNaGEDzi18nUAaqmsOyopbk268pZ4YcXVu7DaDtxA/fkTpbATCXlg6xfGsqHk5gImg1gjmdyMCvRDQqMwz8fvrDeQ/QIleItNVAAAAAElFTkSuQmCC",alt:"icon"})]})]})]}):null,this.props.dataFull.cmd.error.message?(0,s.jsx)("div",{className:"malibu-desktop-uLoading-message-error",children:this.props.dataFull.cmd.error.message}):null]})]}):"desktop_small"===this.state.device?(0,s.jsxs)("div",{className:"malibu-desktop_small-uLoading "+this.state.class,children:[(0,s.jsxs)("div",{style:{display:"none"},children:[(0,s.jsx)("i",{className:"material-icons",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-round",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-outlined",style:{visibility:"hidden"},children:"menu"})]}),(0,s.jsxs)("div",{className:"malibu-desktop_small-uLoading-header",children:[(0,s.jsxs)("div",{style:{position:"absolute",marginLeft:"198px",zIndex:"3"},children:[(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMzIiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDEzMyAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02Ni4wODI4IDExNy4yNDVDOTUuNjg4NyAxMTcuMjQ1IDExOS42ODkgOTMuMjg5MSAxMTkuNjg5IDYzLjczNzRDMTE5LjY4OSAzNC4xODU4IDk1LjY4ODcgMTAuMjI5NSA2Ni4wODI4IDEwLjIyOTVDMzYuNDc2OSAxMC4yMjk1IDEyLjQ3NjYgMzQuMTg1OCAxMi40NzY2IDYzLjczNzRDMTIuNDc2NiA5My4yODkxIDM2LjQ3NjkgMTE3LjI0NSA2Ni4wODI4IDExNy4yNDVaIiBmaWxsPSIjM0YzRDU2Ii8+CjxwYXRoIGQ9Ik0zMi4zMzQ0IDY4LjAzMjZDMzMuNjY1OCA2Ni40NDE3IDM1LjMzMDkgNjUuMTYyIDM3LjIxMiA2NC4yODM4QzM5LjA5MzIgNjMuNDA1NiA0MS4xNDQ3IDYyLjk1MDUgNDMuMjIxNCA2Mi45NTA1QzQ1LjI5ODEgNjIuOTUwNSA0Ny4zNDk2IDYzLjQwNTYgNDkuMjMwNyA2NC4yODM4QzUxLjExMTkgNjUuMTYyIDUyLjc3NyA2Ni40NDE3IDU0LjEwODQgNjguMDMyNkM1Ni4zODY1IDY1Ljg2MTkgNTcuOTYxIDYzLjA1OTggNTguNjI5MSA1OS45ODc2QzU5LjI5NzIgNTYuOTE1NSA1OS4wMjgyIDUzLjcxNCA1Ny44NTY4IDUwLjc5NThDNTYuNjg1NCA0Ny44Nzc2IDU0LjY2NTIgNDUuMzc2NSA1Mi4wNTY3IDQzLjYxNDhDNDkuNDQ4MiA0MS44NTMxIDQ2LjM3MDkgNDAuOTExNiA0My4yMjE0IDQwLjkxMTZDNDAuMDcxOSA0MC45MTE2IDM2Ljk5NDYgNDEuODUzMSAzNC4zODYxIDQzLjYxNDhDMzEuNzc3NiA0NS4zNzY1IDI5Ljc1NzQgNDcuODc3NiAyOC41ODYgNTAuNzk1OEMyNy40MTQ2IDUzLjcxNCAyNy4xNDU2IDU2LjkxNTUgMjcuODEzNyA1OS45ODc2QzI4LjQ4MTggNjMuMDU5OCAzMC4wNTYzIDY1Ljg2MTkgMzIuMzM0NCA2OC4wMzI2VjY4LjAzMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzQuOTA0IDY4LjAzMjZDNzYuMjM1MyA2Ni40NDE3IDc3LjkwMDQgNjUuMTYxOSA3OS43ODE2IDY0LjI4MzhDODEuNjYyOCA2My40MDU2IDgzLjcxNDIgNjIuOTUwNSA4NS43OTEgNjIuOTUwNUM4Ny44Njc3IDYyLjk1MDUgODkuOTE5MSA2My40MDU2IDkxLjgwMDMgNjQuMjgzOEM5My42ODE1IDY1LjE2MTkgOTUuMzQ2NSA2Ni40NDE3IDk2LjY3NzkgNjguMDMyNkM5OC45NTYgNjUuODYxOSAxMDAuNTMxIDYzLjA1OTggMTAxLjE5OSA1OS45ODc2QzEwMS44NjcgNTYuOTE1NSAxMDEuNTk4IDUzLjcxNCAxMDAuNDI2IDUwLjc5NThDOTkuMjU0OSA0Ny44Nzc2IDk3LjIzNDggNDUuMzc2NSA5NC42MjYzIDQzLjYxNDhDOTIuMDE3OCA0MS44NTMxIDg4Ljk0MDQgNDAuOTExNiA4NS43OTEgNDAuOTExNkM4Mi42NDE1IDQwLjkxMTYgNzkuNTY0MSA0MS44NTMxIDc2Ljk1NTYgNDMuNjE0OEM3NC4zNDcxIDQ1LjM3NjUgNzIuMzI3IDQ3Ljg3NzYgNzEuMTU1NiA1MC43OTU4QzY5Ljk4NDEgNTMuNzE0IDY5LjcxNTEgNTYuOTE1NSA3MC4zODMyIDU5Ljk4NzZDNzEuMDUxMyA2My4wNTk4IDcyLjYyNTkgNjUuODYxOSA3NC45MDQgNjguMDMyNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNy40NTQ4IDgzLjQwOTRDMzAuOTM3OSA4My40MDk0IDMzLjc2MTQgODAuNTkxIDMzLjc2MTQgNzcuMTE0M0MzMy43NjE0IDczLjYzNzcgMzAuOTM3OSA3MC44MTkzIDI3LjQ1NDggNzAuODE5M0MyMy45NzE4IDcwLjgxOTMgMjEuMTQ4MiA3My42Mzc3IDIxLjE0ODIgNzcuMTE0M0MyMS4xNDgyIDgwLjU5MSAyMy45NzE4IDgzLjQwOTQgMjcuNDU0OCA4My40MDk0WiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNOTkuOTgwNyA4My40MDk0QzEwMy40NjQgODMuNDA5NCAxMDYuMjg3IDgwLjU5MSAxMDYuMjg3IDc3LjExNDNDMTA2LjI4NyA3My42Mzc3IDEwMy40NjQgNzAuODE5MyA5OS45ODA3IDcwLjgxOTNDOTYuNDk3NiA3MC44MTkzIDkzLjY3NDEgNzMuNjM3NyA5My42NzQxIDc3LjExNDNDOTMuNjc0MSA4MC41OTEgOTYuNDk3NiA4My40MDk0IDk5Ljk4MDcgODMuNDA5NFoiIGZpbGw9IiNGRjY1ODQiLz4KPHBhdGggZD0iTTYzLjcxNzcgNjQuNTI0MUw1OC45ODc4IDg0Ljk4MzFMNjYuODcxIDc3LjExNDRMNjMuNzE3NyA2NC41MjQxWiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNODguMDIxNiAxNDMuMjEyTDgyLjY1MTYgMTM4LjcxNEw4Mi43NzY3IDE0My4yMTJIODEuMTA4OEw4MC45NzU2IDEzOC40NTZMNzMuNzI1MiAxNDMuMjEySDcwLjY4OTlMODAuOTIxNCAxMzYuNUw4MC41MjUxIDEyMi40MDRMODAuMjI5MSAxMTEuNzU5TDgxLjg5MjggMTExLjcxM0w4Mi4xOTMgMTIyLjQwNEw4Mi41ODkgMTM2LjQ4N0w5MC42MTQ3IDE0My4yMTJIODguMDIxNloiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTYyLjc5MzEgMTQzLjIxMkw1Ny40MjMgMTM4LjcxNEw1Ny41NDgyIDE0My4yMTJINTUuODg0OEw1NS43NTEzIDEzOC40NTZMNDguNTAwOCAxNDMuMjEySDQ1LjQ2NTZMNTUuNjkyOSAxMzYuNUw1NS4yOTY5IDEyMi40MDRMNTUuMDAwOCAxMTEuNzU5TDU2LjY2ODQgMTExLjcxM0w1Ni45Njg3IDEyMi40MDRMNTcuMzYwNSAxMzYuNDg3TDY1LjM4NjUgMTQzLjIxMkg2Mi43OTMxWiIgZmlsbD0iIzNGM0Q1NiIvPgo8cGF0aCBkPSJNNjYuODcxMyA2LjI5NTAxQzY1LjQwMDQgNi4yOTUwMSA2NC4xMDI4IDcuNDM1NDggNjMuMjM1MyA5LjE4NzIzQzYyLjQ3MDYgNi41NTMxMiA2MC44NjQxIDQuNzIxMjcgNTguOTg4IDQuNzIxMjdDNTguODYwNSA0LjczMzkyIDU4LjczNCA0Ljc1NTEzIDU4LjYwOTMgNC43ODQ3NkM1Ny44ODgyIDEuOTcyMzYgNTYuMjEyMSAtMi40Nzk1NWUtMDUgNTQuMjU4IC0yLjQ3OTU1ZS0wNUM1MS42NDU3IC0yLjQ3OTU1ZS0wNSA0OS41MjgxIDMuNTIyOTkgNDkuNTI4MSA3Ljg2ODhDNDkuNTI4MSAxMi4yMTQ2IDUxLjY0NTcgMTUuNzM3NiA1NC4yNTggMTUuNzM3NkM1NC4zODU1IDE1LjcyNSA1NC41MTIxIDE1LjcwMzcgNTQuNjM2NyAxNS42NzQxQzU1LjM1NzkgMTguNDg2NSA1Ny4wMzM5IDIwLjQ1ODkgNTguOTg4IDIwLjQ1ODlDNjAuNDU4OSAyMC40NTg5IDYxLjc1NjUgMTkuMzE4NCA2Mi42MjQgMTcuNTY2N0M2My4zODg3IDIwLjIwMDggNjQuOTk1MSAyMi4wMzI2IDY2Ljg3MTMgMjIuMDMyNkM2OS40ODM2IDIyLjAzMjYgNzEuNjAxMiAxOC41MDk2IDcxLjYwMTIgMTQuMTYzOEM3MS42MDEyIDkuODE4MDEgNjkuNDgzNiA2LjI5NTAxIDY2Ljg3MTMgNi4yOTUwMVoiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTE1Ljc2NjYgODQuMDE0NUMxMy42OTYxIDg0LjAxNDUgMTEuNjQ1OSA4My42MDc0IDkuNzMzMDEgODIuODE2NkM3LjgyMDEyIDgyLjAyNTcgNi4wODIwMyA4MC44NjY1IDQuNjE3OTcgNzkuNDA1MUMzLjE1MzkxIDc3Ljk0MzcgMS45OTI1NiA3Ni4yMDg4IDEuMjAwMjEgNzQuMjk5NEMwLjQwNzg3MiA3Mi4zOTAxIDYuNDI5NWUtMDUgNzAuMzQzNiA2LjQyOTVlLTA1IDY4LjI3NjlMNi40Mjk1ZS0wNSA2MC40MDhDNi40Mjk1ZS0wNSA1Ni4yMzQyIDEuNjYxMTcgNTIuMjMxMyA0LjYxNzk3IDQ5LjI3OTlDNy41NzQ3NyA0Ni4zMjg1IDExLjU4NTEgNDQuNjcwNCAxNS43NjY2IDQ0LjY3MDRWNDQuNjcwNEwxNS43NjY2IDg0LjAxNDVaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMTYuMzk5IDQ0LjY3MDVDMTE4LjQ3IDQ0LjY3MDUgMTIwLjUyIDQ1LjA3NzYgMTIyLjQzMyA0NS44Njg1QzEyNC4zNDYgNDYuNjU5NCAxMjYuMDg0IDQ3LjgxODYgMTI3LjU0OCA0OS4yOEMxMjkuMDEyIDUwLjc0MTMgMTMwLjE3MyA1Mi40NzYyIDEzMC45NjYgNTQuMzg1NkMxMzEuNzU4IDU2LjI5NSAxMzIuMTY2IDU4LjM0MTQgMTMyLjE2NiA2MC40MDgxVjY4LjI3N0MxMzIuMTY2IDcwLjM0MzcgMTMxLjc1OCA3Mi4zOTAxIDEzMC45NjYgNzQuMjk5NUMxMzAuMTczIDc2LjIwODkgMTI5LjAxMiA3Ny45NDM4IDEyNy41NDggNzkuNDA1MUMxMjYuMDg0IDgwLjg2NjUgMTI0LjM0NiA4Mi4wMjU3IDEyMi40MzMgODIuODE2NkMxMjAuNTIgODMuNjA3NSAxMTguNDcgODQuMDE0NiAxMTYuMzk5IDg0LjAxNDZWODQuMDE0NlY0NC42NzA1SDExNi4zOTlaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMjQuNjYxIDYxLjY0NDZIMTIyLjE2QzEyMi4xNiAyOS45Nzc1IDk2LjM0OTIgNC4yMTQyMyA2NC42MjM3IDQuMjE0MjNDMzIuODk4MyA0LjIxNDIzIDcuMDg3NzUgMjkuOTc3NSA3LjA4Nzc1IDYxLjY0NDZINC41ODYxOEM0LjU4NjE4IDI4LjYwMDUgMzEuNTE4OSAxLjcxNzI2IDY0LjYyMzcgMS43MTcyNkM5Ny43Mjg2IDEuNzE3MjYgMTI0LjY2MSAyOC42MDA2IDEyNC42NjEgNjEuNjQ0NloiIGZpbGw9IiM1NTU3RTQiLz4KPC9zdmc+Cg==",alt:"chicken"}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-chiken-eye left"}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-chiken-eye right"}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-path",children:(0,s.jsx)("svg",{width:"12",height:"3",xmlns:"http://www.w3.org/2000/svg",style:{visibility:"hidden"},children:(0,s.jsx)("path",{d:"M 0 2 Q 6 -5 12 2 M 12 2 Q 6 -5 0 2",stroke:"black",fill:"transparent"})})})]}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-ground",style:{position:"absolute",marginLeft:"228px"},children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSI4NyIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDI4NyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yODYuMzUxIDExLjY4Nkw4MS40MDg4IDE0Ljc3MDFMMC4wNTc2MTcyIDAuMzc4MTc0SDEyNy4wNThMMjg2LjM1MSAxMS42ODZaIiBmaWxsPSIjRTZFNkU2Ii8+DQo8L3N2Zz4NCg==",alt:"ground"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-tree one",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-tree two",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-tree three",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-tree four",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-tree five",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-sun"}),(0,s.jsxs)("div",{className:"malibu-desktop_small-uLoading-music-list",style:{position:"absolute"},children:[(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-music six",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMiAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS42NDU5IDEyLjA5MDVMMTkuNjQ3IDEyLjA4ODJMMTYuODM3MiAxMC45MjAyTDUuMDkzNDUgNi4zNjMzNUw4LjA1NzQ1IDMuNzMxMTJDOC4wNTc0NSAzLjczMTEyIDEwLjAyOSAxLjAwMDU1IDEzLjE3NDEgMi44OTQ0OUwxMi4yNTQzIDEuNTI5OTVDMTIuMjU0MyAxLjUyOTk1IDEwLjUyNTEgLTAuNzU1MTU3IDguMTA0NjUgMS42NjI1NEM4LjEwNDY1IDEuNjYyNTQgNS4xMDk3NiA2LjA2OTU0IDAuNDA1NTE4IDQuOTQ2MTlMMTYuNDcxNCAxMS43MzM2TDE2LjU1NTcgMTEuODA5OUwxNS40NzMxIDE0LjM1NzlDMTUuMzI0OSAxNC41OTEgMTUuMTk4NSAxNC44MzcxIDE1LjA5NTQgMTUuMDkzM0MxNC4zMzcgMTcuMDA0NyAxNS43Njk0IDE4LjkwNTkgMTcuMTIzNCAxOS40NDEyQzE4LjQ3NzUgMTkuOTc2NiAyMC4xOTAxIDE4Ljg2MSAyMC45NDg1IDE2Ljk0OTZDMjEuNjk2NSAxNS4wNjQzIDIwLjk2NTQgMTIuNjY5MiAxOS42NDU5IDEyLjA5MDVaIiBmaWxsPSIjM0YzRDU2Ii8+DQo8L3N2Zz4NCg==",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-music five",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAzMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yOS4yNjg5IDIwLjM2ODFDMjMuNDM2OCAxNy4wMzk3IDI0LjYwMzkgOS43MzU4NCAyNC42MDM5IDkuNzM1ODRDMjQuNDU3MSA0Ljk5MDg5IDIwLjUyOTcgNS42NjI1NiAyMC41Mjk3IDUuNjYyNTZMMTkuMTAwMyA1Ljk4ODE0QzE4LjQzNjMgNS42ODA1MSAxNy43MDUxIDUuNTQ1NTMgMTYuOTc0OCA1LjU5NTc1TDE0LjgwMDUgNS45NjFDMTkuNzUxNiA3LjEyMjE5IDE5LjM0NDggMTEuMjU2NCAxOS4zNDQ4IDExLjI1NjRMMjAuMDM4NCAxNi4wOTAzTDcuMDY1MTUgMTAuODY2NEw4LjU1NDY5IDcuMzYwNjdDOC43NjA1NSA3LjAzNjk2IDguOTM2MTggNi42OTUwNiA5LjA3OTM4IDYuMzM5MjhDMTAuMTMyNyAzLjY4NDUzIDguMTQzMyAxLjA0MzkxIDYuMjYyNTkgMC4zMDA0MkM0LjM4MTg5IC0wLjQ0MzA2NyAyLjAwMzM2IDEuMTA2MyAwLjk1MDAxOCAzLjc2MUMtMC4wODg5Nzk3IDYuMzc5NTIgMC45MjY0MDcgOS43MDYxNSAyLjc1OTExIDEwLjUwOTlMMi43NTc1NiAxMC41MTNMNi42NjAyMiAxMi4xMzUzTDYuNjg5MjcgMTIuMDQzNUwyOS4yNjg5IDIwLjM2ODFaTTIyLjY4MDkgMTEuODc0NkwyMy4wOTgzIDE2LjUxNzVDMjAuNjQ4OCAxMy4yNzE5IDIxLjE0OTUgOS40MTU3OCAyMS4xNDk1IDkuNDE1NzhDMjEuMTE1IDguNTIwMjkgMjAuODEyMyA3LjY1NTY5IDIwLjI4MDYgNi45MzM1OUMyMy4wOTQ0IDguNjE0MzIgMjIuNjgwOSAxMS44NzQ2IDIyLjY4MDkgMTEuODc0NkgyMi42ODA5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-music four",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxNyAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMC4yMjE3IDEzLjMzOUw5LjU5Mjc0IDE0LjgxOTJDOS41MDY2NSAxNC45NTQ2IDkuNDMzMjEgMTUuMDk3NiA5LjM3MzM0IDE1LjI0NjRDOC45MzI3NSAxNi4zNTY3IDkuNzY0ODQgMTcuNDYxMSAxMC41NTE0IDE3Ljc3MjFDMTEuMzM4IDE4LjA4MzEgMTIuMzMyOSAxNy40MzUxIDEyLjc3MzQgMTYuMzI0N0MxMy4yMDggMTUuMjI5NSAxMi43ODMzIDEzLjgzODIgMTIuMDE2OCAxMy41MDJMMTIuMDE3NCAxMy41MDA3TDEwLjM4NTEgMTIuODIyMkw0LjgwMTI2IDEwLjY1NTVMNy45OTE3NCAyLjYxNDYzTDcuNTE4ODggMi40Mjc2OEw0LjMyNzE5IDEwLjQ3MTZMMy42MzY3NSAxMC4yMDM3TDYuODQwODMgMi4xMjgzOUw2LjkyNTI1IDIuMTY0MDVMMTMuNDg4OCA0LjkzNjk4TDEzLjUzNzggNC45ODEyOEwxMi45MDg5IDYuNDYxNDNDMTIuODIyOSA2LjU5NjgyIDEyLjc0OTQgNi43Mzk4MiAxMi42ODk1IDYuODg4NjNDMTIuMjQ4OSA3Ljk5ODk5IDEzLjA4MSA5LjEwMzQyIDEzLjg2NzYgOS40MTQzOUMxNC42NTQyIDkuNzI1MzYgMTUuNjQ5MSA5LjA3NzM0IDE2LjA4OTYgNy45NjY5OEMxNi41MjQyIDYuODcxNzkgMTYuMDk5NSA1LjQ4MDQ0IDE1LjMzMyA1LjE0NDI4TDE1LjMzMzYgNS4xNDI5NEwxMy43MDEzIDQuNDY0NDVMNy4wMzA3OCAxLjY0OTc1TDcuMDMwNSAxLjY0OTYyTDYuODE0MTUgMS41NTgzNEw0LjM0NTQ4IDAuNTE2NjYzTDAuODM5ODQ0IDkuMzUxODVMMTAuMTcyNyAxMy4yOTQ3TDEwLjIyMTcgMTMuMzM5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-music three",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMyAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4yNDYzIDcuMDAyN0wxMS4yNDY5IDcuMDAxNDJMOS42MTQ2MSA2LjMyMjg4TDIuNzkyNTkgMy42NzU4MUw0LjUxNDQxIDIuMTQ2NzNDNC44NTEyNSAxLjY5ODUgNS4zNDg2OCAxLjM5NzYyIDUuOTAyNjQgMS4zMDcwNEM2LjQ1NjYgMS4yMTY0NiA3LjAyNDE5IDEuMzQzMTggNy40ODY3MSAxLjY2MDY5TDYuOTUyMzkgMC44NjgwNEM2Ljk1MjM5IDAuODY4MDQgNS45NDc5MSAtMC40NTkzNyA0LjU0MTgyIDAuOTQ1MDg2QzQuNTQxODIgMC45NDUwODYgMi44MDIwNyAzLjUwNTEzIDAuMDY5MzM1OSAyLjg1MjU2TDkuNDAyMTcgNi43OTU0NUw5LjQ1MTE1IDYuODM5NzVMOC44MjIyNiA4LjMxOTkxQzguNzM2MTQgOC40NTUyOSA4LjY2MjY4IDguNTk4MyA4LjYwMjgxIDguNzQ3MTFDOC4xNjIyNyA5Ljg1NzQzIDguOTk0MzQgMTAuOTYxOSA5Ljc4MDkzIDExLjI3MjhDMTAuNTY3NSAxMS41ODM4IDExLjU2MjMgMTAuOTM1OCAxMi4wMDI5IDkuODI1NDZDMTIuNDM3NSA4LjczMDI2IDEyLjAxMjggNy4zMzg5MiAxMS4yNDYzIDcuMDAyN1oiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-music two",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMyAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4zNzkzIDMuODQ5NzdMMTEuMzc5NyAzLjg0ODg0TDEwLjIwNDUgMy4zNjAyOUw1LjI0NTggMS4yNjc4OEwzLjQ2ODM3IDAuNTE3OTE0TDMuMzMxOTYgMC44NjE2NTZMMC45NDQzMzYgNi44NzkxNUw3LjY2Mzg5IDkuNzE4MDJMNy42OTkxNiA5Ljc0OTkxTDcuMjQ2MzUgMTAuODE1NkM3LjE4NDM3IDEwLjkxMzEgNy4xMzE0OSAxMS4wMTYxIDcuMDg4MzYgMTEuMTIzMkM2Ljc3MTE3IDExLjkyMjYgNy4zNzAyNyAxMi43MTc4IDcuOTM2NjEgMTIuOTQxN0M4LjUwMjk1IDEzLjE2NTYgOS4yMTkyMyAxMi42OTkxIDkuNTM2NDIgMTEuODk5NkM5Ljg0OTMgMTEuMTExMSA5LjU0MzU0IDEwLjEwOTMgOC45OTE2MyA5Ljg2NzI4TDguOTkyMTEgOS44NjYzNEw3LjgxNjg3IDkuMzc3NzlMMy43OTY1MiA3LjgxNzhMNi4wOTM2NiAyLjAyODQyTDUuNzUzMTkgMS44OTM4NEwzLjQ1NTIzIDcuNjg1MzdMMi45NTgxIDcuNDkyNDZMNS4yNjUwNCAxLjY3ODMzTDUuMzI1ODEgMS43MDQwMUwxMC4wNTE1IDMuNzAwNUwxMC4wODY4IDMuNzMyMzlMOS42MzQwMiA0Ljc5ODEzQzkuNTcyMDMgNC44OTU2IDkuNTE5MTQgNC45OTg1NSA5LjQ3NjAzIDUuMTA1NjlDOS4xNTg4IDUuOTA1MTIgOS43NTc5IDYuNzAwMzMgMTAuMzI0MiA2LjkyNDE5QzEwLjg5MDYgNy4xNDgwNiAxMS42MDY5IDYuNjgxNTUgMTEuOTI0MSA1Ljg4MjExQzEyLjIzNjkgNS4wOTM1NiAxMS45MzEyIDQuMDkxODEgMTEuMzc5MyAzLjg0OTc3WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-music one",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDEzIDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMTIuNjM2OSA4LjYyMjg0QzEwLjE5NzYgNy4yMzA3NiAxMC42ODU3IDQuMTc1ODcgMTAuNjg1NyA0LjE3NTg3QzEwLjYyNDMgMi4xOTEzMSA4Ljk4MTY5IDIuNDcyMjEgOC45ODE2OSAyLjQ3MjIxTDguMzgzODYgMi42MDg0MUM4LjEwNjE0IDIuNDc5NzUgNy44MDAzMiAyLjQyMzMgNy40OTQ4NyAyLjQ0NDMxTDYuNTg1NDYgMi41OTcwNUM4LjY1NjI2IDMuMDgyNzEgOC40ODYxMyA0LjgxMTg1IDguNDg2MTMgNC44MTE4NUw4Ljc3NjI1IDYuODMzNjZMMy4zNTAxNiA0LjY0ODcyTDMuOTczMTYgMy4xODI1QzQuMDU5MjYgMy4wNDcxMSA0LjEzMjcyIDIuOTA0MTEgNC4xOTI1OSAyLjc1NTNDNC42MzMxNCAxLjY0NDk0IDMuODAxMDcgMC41NDA1MDYgMy4wMTQ0OCAwLjIyOTU3NkMyLjIyNzg4IC0wLjA4MTQzMTQgMS4yMzMwNiAwLjU2NjYzMSAwLjc5MjQ3NiAxLjY3Njk1QzAuMzU3OTQ2IDIuNzcyMTQgMC43ODI2NDIgNC4xNjM0OCAxLjU0OTE2IDQuNDk5NjNMMS41NDg1MSA0LjUwMDk3TDMuMTgwOCA1LjE3OTQ2TDMuMTkyOTUgNS4xNDEwNEwxMi42MzY5IDguNjIyODRaTTkuODgxNDQgNS4wNzA0MUwxMC4wNTU0IDcuMDA1NjRDOS40NDEwNSA2LjE0NTE1IDkuMTUyNDMgNS4wOTUwMSA5LjI0MDkxIDQuMDQyMDVDOS4yMjY0OSAzLjY2NzUgOS4wOTk5MSAzLjMwNTg3IDguODc3NTEgMy4wMDM4NkM5LjIxOTQgMy4yMjI1IDkuNDk0MTEgMy41MzEyMSA5LjY3MTI3IDMuODk1ODlDOS44NDg0MyA0LjI2MDU4IDkuOTIxMTcgNC42NjcwNSA5Ljg4MTQ0IDUuMDcwNFY1LjA3MDQxWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})})]}),(0,s.jsxs)("div",{className:"malibu-desktop_small-uLoading-progress-bar ",children:[(0,s.jsx)("div",{className:"malibu-desktop_small-uLoading-progress",style:{width:this.state.width}}),(0,s.jsx)("label",{className:"loading",children:this.props.dataFull.title}),(0,s.jsxs)("label",{className:"number-percent",children:[(0,s.jsx)("input",{className:"number-percent-input",readOnly:!0}),"%"]})]}),this.props.dataFull.speed.title?(0,s.jsxs)("div",{className:"row",style:{margin:"auto",marginTop:"150px",width:"max-content"},children:[(0,s.jsx)("div",{className:"malibu-desktop-uLoading-rocket",children:(0,s.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfOSURBVHgBzZldbBzVFcf/dz722+t1SJOqH2RT6AMVNCsV+hKgS/pQlxRwGqlK3KjY6gMoqZT1S9SqlWyr5akPXktJVLVVsSVwTNUSC5IIPzSZUHho0hajBAWhAAYChJBk1/Z+785czp31rL27M7vrXQf4P/hez71z5zfnnnPuvbMMXwIlYn0hBZ7IoStq5FwG28AR4mARJiEk6nb3MHxBErAS/AME8BhhRAAeuloEhq7IEGUzfe7gS7E9UQ55mKpRu/ZW4T838MVY/wBN/0F6YKRZ31bgbzl4Mws7qRn8LQMvB5x/mAMxtKlG8LcEPBHrj8hgx6kaRodygE/KWGelhvYJP56haqhRP6lnI5mNepYaR2GACO8PcLyalpAyli9yvLmuFl+K7SPX4CNO7fIdd8Hd+1NIX98C5vWVGbIZlC78F4XZ4zBufuo4dpXlOdfWDbwRNPP64e7bB/X7DzQco/DS88jPPu/YbsF/XMD4urhKM0v7njgE5Z7vmfW8wfGf6zreWNRxccGATtO/ySOZbfKddwE0A/p7l23HsdzmgwJ/rmOLN4NW73sAnv4nzPrFBR3/uloy4VerW2XYs8VllkLp3w81dBsd+kMSOlB5UXGGFnL37jbLhSLHqY+KddBW2/R7hUqb+uCPGg2Jnvi0pmCNivbFQulCMrw9qIv9xZgIcSeJYGQbNpr10580zh4C/kJSx70bFIqFB5Gfecapqyb+tAQuYOHN04ZIesww8lFeAvbfZjS9T9rwlUr9/TRv2v9artxHZByJXti4ed2mF59sCi6AJV/hIEcxBi6ZeTmfL+AXPTq+qmJNsnORWuWa24L829BE6Qge3fNklLHi05yzsHWtVNJxGy9ioAVrC/FsulL/pl/CB+nG9212r+QKe2tDI/+eFxXJHnr/MGPyGdQs2dlsDo+3CC2kv33JXGCE7ulunnnvDpX76JcvOfQwxq2aZA/NRmqvl4olbJYN9AabT7klAV0893IZisBF4Dnp4a+plXRYPP9y/VjAfDB+bMYW3AlaKF8orMnalgq0EvLlad+xWTEBrQXHLTHc7pPMHH738oyIFy2e+3fdOAx8tPr/CvSTYXKPd+0ebhgGArk0jm3V0Y5EhvAd+F0lNTpJuEj2b2MV97IkrN0df3Zr1ZhWZdmnbSUyyTZv6y5SKxFomSN/qLhNrQRojvJ25shTddDm/eC7aq+ZFicXGSAXeRoOWlpK48/fKOJODzqWyNFiTyI2XiYULe3OwWhqIhh/drD2ohktBD1sc4PGDf46bYLmvusxwgQ9jBaVNhiuGRK2KvWuVd7G/q+lcYSL0DZs1K5NEfkaVtpjSHKDjSOnxLWZeNLqdCL285aOXwL4rykvTmdd+MvGRXQq4SJW3q6VAib1lZnZuJFRRlYDW6KI/kGzU94LGTemUx6kOcMOTwGb5LVnoNWizdtoT3xqzqldAWfbqNPgmekjE3Yd0i/8uI+/n4vyGyp4oj4PCysfS3vwIoELCeC9gRw6he6OT4006qOAXEP7+5GZ2obE8WjI5fKNMc4GWDgPdkcRsuylvawLhTkOI1WG/m0igHdLK6viXn+uI2sT9HgzaCHH+c+c2PkaFREKXCjdXigBd6VNQCf+z3DovL8K+lFfHr/syqJD6JbiSXGAHjOhZQnuTV0Q5WpJAeA3b1dDiwzSIfRoK5a2VAeeOvnwAI1ivrUdtNDkq25cvlYN/VRPCu2IPsslGYwhgp5Yy311VBIv53Q15LOFnr3gwuQrKytR5PYS/rg9Db+09pX1co5h7BMMBtcILVRl8aUXe6NUhAXwap+2dHVBMq1tafe9BRz4YRa8QIH6DsyyFaUoqP+ZoJm7KYvVL4k2VAVORzMzp0u+leMN51ysrGZ99qJqwgfcHId2ZnH/t8vnSOaiGfoO7QTnmj/wpQVGwBJu0KP9AQ/OPndUQxuqApeZyOmkkoHCjRSMog7F54IS9CKVZ3jlLRWPb89j9315E77q3i30EnOqsF7ICXh2keFCUYHb7YZXMWNEQ5uqAqfIDgu769llS5LLyF0r/jzWn64DtlTKZcF6WGj1IjWXYXidEs0/EhKykmwC+/0rQU2zOYn1ACeX0MoDYkCUKuVvy02cgE3oVB5cfJLq1pNIqBoZ4Oyvr0g4n5XGVFWB4lXhV+qObvNYPvi2o6q04d15clCnh5ovIaxNbmJJ+HpxsT5PC+DSQvk6+1ZmKBh/Zhdt+uOXEEBXMACP1wOlHloYZFKb/tM82lRdHq+kQ7K2JWFRAccUes/gynVOMZC/njJfyuB8PPDoqYlKo8rCcNY8beji6EBV4InjvWGIdEhnQWFtI18kK+eoLJnt4roJTKClpRz0pbxZJ2mBR05VL9W0eXPaUNAnj0G7XWjb4LKsRKxParkPkxZUlYS7rAIuW7oGunx+tf/Nh1xk9Myxwxo6VJWPS5LIKoROX52WwebIOqMSY+buUVi+RDNgWVnn7KE6S5dHisIB+vTU4RGsg6rTIWdzBuNDYDwpF1yad9fMvLieOfkT+j2Hz5v7Cs7P6pBmuh45odkNWLZ2/VGQXnXozNThjvx6tdb9x6sdew+M1fzSpnEyhjZ1tIV1tXWt+TNzI0X79x/kvAKtiQVGmz46gVugdbN49Ge/6mMyPyi+DFD6mdGmOw/ARvoMZ7pw6Vztu/cAAAAASUVORK5CYII=",alt:"rocket"})}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-speed",children:[(0,s.jsx)("label",{children:this.props.dataFull.speed.title}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-speed-number "+(this.props.dataFull.cmd.error.message?"error":""),children:[(0,s.jsx)("div",{style:{margin:"auto"},children:this.props.dataFull.speed.number_speed}),(0,s.jsx)("img",{src:this.props.dataFull.cmd.error.message?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGiSURBVHgB7ZXRTcMwEIbvXPJStciEB6jUVMkG7QZlg44AE5QNygYdATahG8AGrQRSWx7AEhIvSDli5AQ3cWO7ooiHfpIlxz75fOf/LgAH/gPL0+hSDvgL1jwarcOI5Fjy7hA8YeALg2k+bSBOwBMvhyqNcf5NCMNV2LsGD9DVcMnPY8aCe92hQnyk70kihHA5xznCBgsmBmcS3mJt59Q6Raiim9fZpOln0hGrBVhwipBhMLXZNDC4BQesDr+FgjDS15BoBkSP+poUkEuZWFOa1ZtMZawtibPXpxM5eQmjN8reUNtbZHtJ3Xms3lnXJJRCjaTNFfE67N3ALg6lUBDQq8bUNcZzzrm3Q1kGpXTlFGu4Zb+uTIxvaCsDhEwwhEIKZZtNmtJFRzzPyutHJmPVUbZCgH2b3FSfnVXOLi+U+6UBKZQ7ObAqmp9LyTIx/MI27ikfu8naDxaHhfQNJVOxzfrsQO+zGxE2WWtsOcCXuMmON5ReROjSL3dEZH12kPfZIkL1N9gHXO+zekpHsCdIe6aiLCiFq5RRH/YBVcvjwK/xBRbpfbJqi9GHAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgB3ZZLUuMwEIa7pZqZ5eQInhMM3MBZThlqnBMQdiwIBScIuQFVAYodzgWIgQKW+AaEExBuEJYkZTUtB8dvEtuw4d9EVrr6a0ndagF8d+GqhjtD2/jx0zcF4l9F2NBzAmmiiB5nU+mdtdzxKn6WAnevN0yUsgsE5hJPHpAa9K1r52OzAu0P7Yb/i84ZZEM5ObMp9opWnAvcv7MNX9E9Dw2opjFDm3lQ/ALYAiqnuH7UcifxSZG2Ylj3E2BaRnAkKSWAnZvNNv+0oaKIaOADrvO+ufMJsHXSFQIBxRbUgB1vXLVPLXfE2Xq5cKkzPI4IB+9n9wQVFMJifhI5oEAaJ9bFsx4vVugr34QKWgYLbPxZMxwvgKRwLcffGGrCAghGvqMzRGjEjfj6Ouhbl384kB7UgAWuBf7OAtNGpIIAjjfdQ/7argpLKwISTFJRdffuWkHW9i3XCaFVYKToJQNEQaOsoXLiUN7eZpWVoRCjDFAK6UFudBGUt9crC9OaTcHLAI/+8UWL0R9F0LIwIkj0ykTSkJ+fkSG0c/t/yLAHKHHXIuIg8Z020E4r9MAiOVxaiQzPlIV8DbJxDPWle2JmxzJA3b+kwGZNaGEDzi18nUAaqmsOyopbk268pZ4YcXVu7DaDtxA/fkTpbATCXlg6xfGsqHk5gImg1gjmdyMCvRDQqMwz8fvrDeQ/QIleItNVAAAAAElFTkSuQmCC",alt:"icon"})]})]})]}):null,this.props.dataFull.cmd.error.message?(0,s.jsx)("div",{className:"malibu-desktop-uLoading-message-error",children:this.props.dataFull.cmd.error.message}):null]})]}):"tablet"===this.state.device?(0,s.jsxs)("div",{className:"malibu-tablet-uLoading "+this.state.class,children:[(0,s.jsxs)("div",{style:{display:"none"},children:[(0,s.jsx)("i",{className:"material-icons",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-round",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-outlined",style:{visibility:"hidden"},children:"menu"})]}),(0,s.jsxs)("div",{className:"malibu-tablet-uLoading-header",children:[(0,s.jsxs)("div",{style:{position:"absolute",marginLeft:"198px",zIndex:"3"},children:[(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMzIiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDEzMyAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02Ni4wODI4IDExNy4yNDVDOTUuNjg4NyAxMTcuMjQ1IDExOS42ODkgOTMuMjg5MSAxMTkuNjg5IDYzLjczNzRDMTE5LjY4OSAzNC4xODU4IDk1LjY4ODcgMTAuMjI5NSA2Ni4wODI4IDEwLjIyOTVDMzYuNDc2OSAxMC4yMjk1IDEyLjQ3NjYgMzQuMTg1OCAxMi40NzY2IDYzLjczNzRDMTIuNDc2NiA5My4yODkxIDM2LjQ3NjkgMTE3LjI0NSA2Ni4wODI4IDExNy4yNDVaIiBmaWxsPSIjM0YzRDU2Ii8+CjxwYXRoIGQ9Ik0zMi4zMzQ0IDY4LjAzMjZDMzMuNjY1OCA2Ni40NDE3IDM1LjMzMDkgNjUuMTYyIDM3LjIxMiA2NC4yODM4QzM5LjA5MzIgNjMuNDA1NiA0MS4xNDQ3IDYyLjk1MDUgNDMuMjIxNCA2Mi45NTA1QzQ1LjI5ODEgNjIuOTUwNSA0Ny4zNDk2IDYzLjQwNTYgNDkuMjMwNyA2NC4yODM4QzUxLjExMTkgNjUuMTYyIDUyLjc3NyA2Ni40NDE3IDU0LjEwODQgNjguMDMyNkM1Ni4zODY1IDY1Ljg2MTkgNTcuOTYxIDYzLjA1OTggNTguNjI5MSA1OS45ODc2QzU5LjI5NzIgNTYuOTE1NSA1OS4wMjgyIDUzLjcxNCA1Ny44NTY4IDUwLjc5NThDNTYuNjg1NCA0Ny44Nzc2IDU0LjY2NTIgNDUuMzc2NSA1Mi4wNTY3IDQzLjYxNDhDNDkuNDQ4MiA0MS44NTMxIDQ2LjM3MDkgNDAuOTExNiA0My4yMjE0IDQwLjkxMTZDNDAuMDcxOSA0MC45MTE2IDM2Ljk5NDYgNDEuODUzMSAzNC4zODYxIDQzLjYxNDhDMzEuNzc3NiA0NS4zNzY1IDI5Ljc1NzQgNDcuODc3NiAyOC41ODYgNTAuNzk1OEMyNy40MTQ2IDUzLjcxNCAyNy4xNDU2IDU2LjkxNTUgMjcuODEzNyA1OS45ODc2QzI4LjQ4MTggNjMuMDU5OCAzMC4wNTYzIDY1Ljg2MTkgMzIuMzM0NCA2OC4wMzI2VjY4LjAzMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzQuOTA0IDY4LjAzMjZDNzYuMjM1MyA2Ni40NDE3IDc3LjkwMDQgNjUuMTYxOSA3OS43ODE2IDY0LjI4MzhDODEuNjYyOCA2My40MDU2IDgzLjcxNDIgNjIuOTUwNSA4NS43OTEgNjIuOTUwNUM4Ny44Njc3IDYyLjk1MDUgODkuOTE5MSA2My40MDU2IDkxLjgwMDMgNjQuMjgzOEM5My42ODE1IDY1LjE2MTkgOTUuMzQ2NSA2Ni40NDE3IDk2LjY3NzkgNjguMDMyNkM5OC45NTYgNjUuODYxOSAxMDAuNTMxIDYzLjA1OTggMTAxLjE5OSA1OS45ODc2QzEwMS44NjcgNTYuOTE1NSAxMDEuNTk4IDUzLjcxNCAxMDAuNDI2IDUwLjc5NThDOTkuMjU0OSA0Ny44Nzc2IDk3LjIzNDggNDUuMzc2NSA5NC42MjYzIDQzLjYxNDhDOTIuMDE3OCA0MS44NTMxIDg4Ljk0MDQgNDAuOTExNiA4NS43OTEgNDAuOTExNkM4Mi42NDE1IDQwLjkxMTYgNzkuNTY0MSA0MS44NTMxIDc2Ljk1NTYgNDMuNjE0OEM3NC4zNDcxIDQ1LjM3NjUgNzIuMzI3IDQ3Ljg3NzYgNzEuMTU1NiA1MC43OTU4QzY5Ljk4NDEgNTMuNzE0IDY5LjcxNTEgNTYuOTE1NSA3MC4zODMyIDU5Ljk4NzZDNzEuMDUxMyA2My4wNTk4IDcyLjYyNTkgNjUuODYxOSA3NC45MDQgNjguMDMyNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNy40NTQ4IDgzLjQwOTRDMzAuOTM3OSA4My40MDk0IDMzLjc2MTQgODAuNTkxIDMzLjc2MTQgNzcuMTE0M0MzMy43NjE0IDczLjYzNzcgMzAuOTM3OSA3MC44MTkzIDI3LjQ1NDggNzAuODE5M0MyMy45NzE4IDcwLjgxOTMgMjEuMTQ4MiA3My42Mzc3IDIxLjE0ODIgNzcuMTE0M0MyMS4xNDgyIDgwLjU5MSAyMy45NzE4IDgzLjQwOTQgMjcuNDU0OCA4My40MDk0WiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNOTkuOTgwNyA4My40MDk0QzEwMy40NjQgODMuNDA5NCAxMDYuMjg3IDgwLjU5MSAxMDYuMjg3IDc3LjExNDNDMTA2LjI4NyA3My42Mzc3IDEwMy40NjQgNzAuODE5MyA5OS45ODA3IDcwLjgxOTNDOTYuNDk3NiA3MC44MTkzIDkzLjY3NDEgNzMuNjM3NyA5My42NzQxIDc3LjExNDNDOTMuNjc0MSA4MC41OTEgOTYuNDk3NiA4My40MDk0IDk5Ljk4MDcgODMuNDA5NFoiIGZpbGw9IiNGRjY1ODQiLz4KPHBhdGggZD0iTTYzLjcxNzcgNjQuNTI0MUw1OC45ODc4IDg0Ljk4MzFMNjYuODcxIDc3LjExNDRMNjMuNzE3NyA2NC41MjQxWiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNODguMDIxNiAxNDMuMjEyTDgyLjY1MTYgMTM4LjcxNEw4Mi43NzY3IDE0My4yMTJIODEuMTA4OEw4MC45NzU2IDEzOC40NTZMNzMuNzI1MiAxNDMuMjEySDcwLjY4OTlMODAuOTIxNCAxMzYuNUw4MC41MjUxIDEyMi40MDRMODAuMjI5MSAxMTEuNzU5TDgxLjg5MjggMTExLjcxM0w4Mi4xOTMgMTIyLjQwNEw4Mi41ODkgMTM2LjQ4N0w5MC42MTQ3IDE0My4yMTJIODguMDIxNloiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTYyLjc5MzEgMTQzLjIxMkw1Ny40MjMgMTM4LjcxNEw1Ny41NDgyIDE0My4yMTJINTUuODg0OEw1NS43NTEzIDEzOC40NTZMNDguNTAwOCAxNDMuMjEySDQ1LjQ2NTZMNTUuNjkyOSAxMzYuNUw1NS4yOTY5IDEyMi40MDRMNTUuMDAwOCAxMTEuNzU5TDU2LjY2ODQgMTExLjcxM0w1Ni45Njg3IDEyMi40MDRMNTcuMzYwNSAxMzYuNDg3TDY1LjM4NjUgMTQzLjIxMkg2Mi43OTMxWiIgZmlsbD0iIzNGM0Q1NiIvPgo8cGF0aCBkPSJNNjYuODcxMyA2LjI5NTAxQzY1LjQwMDQgNi4yOTUwMSA2NC4xMDI4IDcuNDM1NDggNjMuMjM1MyA5LjE4NzIzQzYyLjQ3MDYgNi41NTMxMiA2MC44NjQxIDQuNzIxMjcgNTguOTg4IDQuNzIxMjdDNTguODYwNSA0LjczMzkyIDU4LjczNCA0Ljc1NTEzIDU4LjYwOTMgNC43ODQ3NkM1Ny44ODgyIDEuOTcyMzYgNTYuMjEyMSAtMi40Nzk1NWUtMDUgNTQuMjU4IC0yLjQ3OTU1ZS0wNUM1MS42NDU3IC0yLjQ3OTU1ZS0wNSA0OS41MjgxIDMuNTIyOTkgNDkuNTI4MSA3Ljg2ODhDNDkuNTI4MSAxMi4yMTQ2IDUxLjY0NTcgMTUuNzM3NiA1NC4yNTggMTUuNzM3NkM1NC4zODU1IDE1LjcyNSA1NC41MTIxIDE1LjcwMzcgNTQuNjM2NyAxNS42NzQxQzU1LjM1NzkgMTguNDg2NSA1Ny4wMzM5IDIwLjQ1ODkgNTguOTg4IDIwLjQ1ODlDNjAuNDU4OSAyMC40NTg5IDYxLjc1NjUgMTkuMzE4NCA2Mi42MjQgMTcuNTY2N0M2My4zODg3IDIwLjIwMDggNjQuOTk1MSAyMi4wMzI2IDY2Ljg3MTMgMjIuMDMyNkM2OS40ODM2IDIyLjAzMjYgNzEuNjAxMiAxOC41MDk2IDcxLjYwMTIgMTQuMTYzOEM3MS42MDEyIDkuODE4MDEgNjkuNDgzNiA2LjI5NTAxIDY2Ljg3MTMgNi4yOTUwMVoiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTE1Ljc2NjYgODQuMDE0NUMxMy42OTYxIDg0LjAxNDUgMTEuNjQ1OSA4My42MDc0IDkuNzMzMDEgODIuODE2NkM3LjgyMDEyIDgyLjAyNTcgNi4wODIwMyA4MC44NjY1IDQuNjE3OTcgNzkuNDA1MUMzLjE1MzkxIDc3Ljk0MzcgMS45OTI1NiA3Ni4yMDg4IDEuMjAwMjEgNzQuMjk5NEMwLjQwNzg3MiA3Mi4zOTAxIDYuNDI5NWUtMDUgNzAuMzQzNiA2LjQyOTVlLTA1IDY4LjI3NjlMNi40Mjk1ZS0wNSA2MC40MDhDNi40Mjk1ZS0wNSA1Ni4yMzQyIDEuNjYxMTcgNTIuMjMxMyA0LjYxNzk3IDQ5LjI3OTlDNy41NzQ3NyA0Ni4zMjg1IDExLjU4NTEgNDQuNjcwNCAxNS43NjY2IDQ0LjY3MDRWNDQuNjcwNEwxNS43NjY2IDg0LjAxNDVaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMTYuMzk5IDQ0LjY3MDVDMTE4LjQ3IDQ0LjY3MDUgMTIwLjUyIDQ1LjA3NzYgMTIyLjQzMyA0NS44Njg1QzEyNC4zNDYgNDYuNjU5NCAxMjYuMDg0IDQ3LjgxODYgMTI3LjU0OCA0OS4yOEMxMjkuMDEyIDUwLjc0MTMgMTMwLjE3MyA1Mi40NzYyIDEzMC45NjYgNTQuMzg1NkMxMzEuNzU4IDU2LjI5NSAxMzIuMTY2IDU4LjM0MTQgMTMyLjE2NiA2MC40MDgxVjY4LjI3N0MxMzIuMTY2IDcwLjM0MzcgMTMxLjc1OCA3Mi4zOTAxIDEzMC45NjYgNzQuMjk5NUMxMzAuMTczIDc2LjIwODkgMTI5LjAxMiA3Ny45NDM4IDEyNy41NDggNzkuNDA1MUMxMjYuMDg0IDgwLjg2NjUgMTI0LjM0NiA4Mi4wMjU3IDEyMi40MzMgODIuODE2NkMxMjAuNTIgODMuNjA3NSAxMTguNDcgODQuMDE0NiAxMTYuMzk5IDg0LjAxNDZWODQuMDE0NlY0NC42NzA1SDExNi4zOTlaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMjQuNjYxIDYxLjY0NDZIMTIyLjE2QzEyMi4xNiAyOS45Nzc1IDk2LjM0OTIgNC4yMTQyMyA2NC42MjM3IDQuMjE0MjNDMzIuODk4MyA0LjIxNDIzIDcuMDg3NzUgMjkuOTc3NSA3LjA4Nzc1IDYxLjY0NDZINC41ODYxOEM0LjU4NjE4IDI4LjYwMDUgMzEuNTE4OSAxLjcxNzI2IDY0LjYyMzcgMS43MTcyNkM5Ny43Mjg2IDEuNzE3MjYgMTI0LjY2MSAyOC42MDA2IDEyNC42NjEgNjEuNjQ0NloiIGZpbGw9IiM1NTU3RTQiLz4KPC9zdmc+Cg==",alt:"chicken"}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-chiken-eye left"}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-chiken-eye right"}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-path",children:(0,s.jsx)("svg",{width:"12",height:"3",xmlns:"http://www.w3.org/2000/svg",style:{visibility:"hidden"},children:(0,s.jsx)("path",{d:"M 0 2 Q 6 -5 12 2 M 12 2 Q 6 -5 0 2",stroke:"black",fill:"transparent"})})})]}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-ground",style:{position:"absolute",marginLeft:"228px"},children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSI4NyIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDI4NyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yODYuMzUxIDExLjY4Nkw4MS40MDg4IDE0Ljc3MDFMMC4wNTc2MTcyIDAuMzc4MTc0SDEyNy4wNThMMjg2LjM1MSAxMS42ODZaIiBmaWxsPSIjRTZFNkU2Ii8+DQo8L3N2Zz4NCg==",alt:"ground"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-tree one",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-tree two",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-tree three",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-tree four",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-tree five",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-sun"}),(0,s.jsxs)("div",{className:"malibu-tablet-uLoading-music-list",style:{position:"absolute"},children:[(0,s.jsx)("div",{className:"malibu-tablet-uLoading-music six",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMiAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS42NDU5IDEyLjA5MDVMMTkuNjQ3IDEyLjA4ODJMMTYuODM3MiAxMC45MjAyTDUuMDkzNDUgNi4zNjMzNUw4LjA1NzQ1IDMuNzMxMTJDOC4wNTc0NSAzLjczMTEyIDEwLjAyOSAxLjAwMDU1IDEzLjE3NDEgMi44OTQ0OUwxMi4yNTQzIDEuNTI5OTVDMTIuMjU0MyAxLjUyOTk1IDEwLjUyNTEgLTAuNzU1MTU3IDguMTA0NjUgMS42NjI1NEM4LjEwNDY1IDEuNjYyNTQgNS4xMDk3NiA2LjA2OTU0IDAuNDA1NTE4IDQuOTQ2MTlMMTYuNDcxNCAxMS43MzM2TDE2LjU1NTcgMTEuODA5OUwxNS40NzMxIDE0LjM1NzlDMTUuMzI0OSAxNC41OTEgMTUuMTk4NSAxNC44MzcxIDE1LjA5NTQgMTUuMDkzM0MxNC4zMzcgMTcuMDA0NyAxNS43Njk0IDE4LjkwNTkgMTcuMTIzNCAxOS40NDEyQzE4LjQ3NzUgMTkuOTc2NiAyMC4xOTAxIDE4Ljg2MSAyMC45NDg1IDE2Ljk0OTZDMjEuNjk2NSAxNS4wNjQzIDIwLjk2NTQgMTIuNjY5MiAxOS42NDU5IDEyLjA5MDVaIiBmaWxsPSIjM0YzRDU2Ii8+DQo8L3N2Zz4NCg==",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-music five",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAzMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yOS4yNjg5IDIwLjM2ODFDMjMuNDM2OCAxNy4wMzk3IDI0LjYwMzkgOS43MzU4NCAyNC42MDM5IDkuNzM1ODRDMjQuNDU3MSA0Ljk5MDg5IDIwLjUyOTcgNS42NjI1NiAyMC41Mjk3IDUuNjYyNTZMMTkuMTAwMyA1Ljk4ODE0QzE4LjQzNjMgNS42ODA1MSAxNy43MDUxIDUuNTQ1NTMgMTYuOTc0OCA1LjU5NTc1TDE0LjgwMDUgNS45NjFDMTkuNzUxNiA3LjEyMjE5IDE5LjM0NDggMTEuMjU2NCAxOS4zNDQ4IDExLjI1NjRMMjAuMDM4NCAxNi4wOTAzTDcuMDY1MTUgMTAuODY2NEw4LjU1NDY5IDcuMzYwNjdDOC43NjA1NSA3LjAzNjk2IDguOTM2MTggNi42OTUwNiA5LjA3OTM4IDYuMzM5MjhDMTAuMTMyNyAzLjY4NDUzIDguMTQzMyAxLjA0MzkxIDYuMjYyNTkgMC4zMDA0MkM0LjM4MTg5IC0wLjQ0MzA2NyAyLjAwMzM2IDEuMTA2MyAwLjk1MDAxOCAzLjc2MUMtMC4wODg5Nzk3IDYuMzc5NTIgMC45MjY0MDcgOS43MDYxNSAyLjc1OTExIDEwLjUwOTlMMi43NTc1NiAxMC41MTNMNi42NjAyMiAxMi4xMzUzTDYuNjg5MjcgMTIuMDQzNUwyOS4yNjg5IDIwLjM2ODFaTTIyLjY4MDkgMTEuODc0NkwyMy4wOTgzIDE2LjUxNzVDMjAuNjQ4OCAxMy4yNzE5IDIxLjE0OTUgOS40MTU3OCAyMS4xNDk1IDkuNDE1NzhDMjEuMTE1IDguNTIwMjkgMjAuODEyMyA3LjY1NTY5IDIwLjI4MDYgNi45MzM1OUMyMy4wOTQ0IDguNjE0MzIgMjIuNjgwOSAxMS44NzQ2IDIyLjY4MDkgMTEuODc0NkgyMi42ODA5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-music four",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxNyAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMC4yMjE3IDEzLjMzOUw5LjU5Mjc0IDE0LjgxOTJDOS41MDY2NSAxNC45NTQ2IDkuNDMzMjEgMTUuMDk3NiA5LjM3MzM0IDE1LjI0NjRDOC45MzI3NSAxNi4zNTY3IDkuNzY0ODQgMTcuNDYxMSAxMC41NTE0IDE3Ljc3MjFDMTEuMzM4IDE4LjA4MzEgMTIuMzMyOSAxNy40MzUxIDEyLjc3MzQgMTYuMzI0N0MxMy4yMDggMTUuMjI5NSAxMi43ODMzIDEzLjgzODIgMTIuMDE2OCAxMy41MDJMMTIuMDE3NCAxMy41MDA3TDEwLjM4NTEgMTIuODIyMkw0LjgwMTI2IDEwLjY1NTVMNy45OTE3NCAyLjYxNDYzTDcuNTE4ODggMi40Mjc2OEw0LjMyNzE5IDEwLjQ3MTZMMy42MzY3NSAxMC4yMDM3TDYuODQwODMgMi4xMjgzOUw2LjkyNTI1IDIuMTY0MDVMMTMuNDg4OCA0LjkzNjk4TDEzLjUzNzggNC45ODEyOEwxMi45MDg5IDYuNDYxNDNDMTIuODIyOSA2LjU5NjgyIDEyLjc0OTQgNi43Mzk4MiAxMi42ODk1IDYuODg4NjNDMTIuMjQ4OSA3Ljk5ODk5IDEzLjA4MSA5LjEwMzQyIDEzLjg2NzYgOS40MTQzOUMxNC42NTQyIDkuNzI1MzYgMTUuNjQ5MSA5LjA3NzM0IDE2LjA4OTYgNy45NjY5OEMxNi41MjQyIDYuODcxNzkgMTYuMDk5NSA1LjQ4MDQ0IDE1LjMzMyA1LjE0NDI4TDE1LjMzMzYgNS4xNDI5NEwxMy43MDEzIDQuNDY0NDVMNy4wMzA3OCAxLjY0OTc1TDcuMDMwNSAxLjY0OTYyTDYuODE0MTUgMS41NTgzNEw0LjM0NTQ4IDAuNTE2NjYzTDAuODM5ODQ0IDkuMzUxODVMMTAuMTcyNyAxMy4yOTQ3TDEwLjIyMTcgMTMuMzM5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-music three",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMyAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4yNDYzIDcuMDAyN0wxMS4yNDY5IDcuMDAxNDJMOS42MTQ2MSA2LjMyMjg4TDIuNzkyNTkgMy42NzU4MUw0LjUxNDQxIDIuMTQ2NzNDNC44NTEyNSAxLjY5ODUgNS4zNDg2OCAxLjM5NzYyIDUuOTAyNjQgMS4zMDcwNEM2LjQ1NjYgMS4yMTY0NiA3LjAyNDE5IDEuMzQzMTggNy40ODY3MSAxLjY2MDY5TDYuOTUyMzkgMC44NjgwNEM2Ljk1MjM5IDAuODY4MDQgNS45NDc5MSAtMC40NTkzNyA0LjU0MTgyIDAuOTQ1MDg2QzQuNTQxODIgMC45NDUwODYgMi44MDIwNyAzLjUwNTEzIDAuMDY5MzM1OSAyLjg1MjU2TDkuNDAyMTcgNi43OTU0NUw5LjQ1MTE1IDYuODM5NzVMOC44MjIyNiA4LjMxOTkxQzguNzM2MTQgOC40NTUyOSA4LjY2MjY4IDguNTk4MyA4LjYwMjgxIDguNzQ3MTFDOC4xNjIyNyA5Ljg1NzQzIDguOTk0MzQgMTAuOTYxOSA5Ljc4MDkzIDExLjI3MjhDMTAuNTY3NSAxMS41ODM4IDExLjU2MjMgMTAuOTM1OCAxMi4wMDI5IDkuODI1NDZDMTIuNDM3NSA4LjczMDI2IDEyLjAxMjggNy4zMzg5MiAxMS4yNDYzIDcuMDAyN1oiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-music two",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMyAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4zNzkzIDMuODQ5NzdMMTEuMzc5NyAzLjg0ODg0TDEwLjIwNDUgMy4zNjAyOUw1LjI0NTggMS4yNjc4OEwzLjQ2ODM3IDAuNTE3OTE0TDMuMzMxOTYgMC44NjE2NTZMMC45NDQzMzYgNi44NzkxNUw3LjY2Mzg5IDkuNzE4MDJMNy42OTkxNiA5Ljc0OTkxTDcuMjQ2MzUgMTAuODE1NkM3LjE4NDM3IDEwLjkxMzEgNy4xMzE0OSAxMS4wMTYxIDcuMDg4MzYgMTEuMTIzMkM2Ljc3MTE3IDExLjkyMjYgNy4zNzAyNyAxMi43MTc4IDcuOTM2NjEgMTIuOTQxN0M4LjUwMjk1IDEzLjE2NTYgOS4yMTkyMyAxMi42OTkxIDkuNTM2NDIgMTEuODk5NkM5Ljg0OTMgMTEuMTExMSA5LjU0MzU0IDEwLjEwOTMgOC45OTE2MyA5Ljg2NzI4TDguOTkyMTEgOS44NjYzNEw3LjgxNjg3IDkuMzc3NzlMMy43OTY1MiA3LjgxNzhMNi4wOTM2NiAyLjAyODQyTDUuNzUzMTkgMS44OTM4NEwzLjQ1NTIzIDcuNjg1MzdMMi45NTgxIDcuNDkyNDZMNS4yNjUwNCAxLjY3ODMzTDUuMzI1ODEgMS43MDQwMUwxMC4wNTE1IDMuNzAwNUwxMC4wODY4IDMuNzMyMzlMOS42MzQwMiA0Ljc5ODEzQzkuNTcyMDMgNC44OTU2IDkuNTE5MTQgNC45OTg1NSA5LjQ3NjAzIDUuMTA1NjlDOS4xNTg4IDUuOTA1MTIgOS43NTc5IDYuNzAwMzMgMTAuMzI0MiA2LjkyNDE5QzEwLjg5MDYgNy4xNDgwNiAxMS42MDY5IDYuNjgxNTUgMTEuOTI0MSA1Ljg4MjExQzEyLjIzNjkgNS4wOTM1NiAxMS45MzEyIDQuMDkxODEgMTEuMzc5MyAzLjg0OTc3WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-tablet-uLoading-music one",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDEzIDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMTIuNjM2OSA4LjYyMjg0QzEwLjE5NzYgNy4yMzA3NiAxMC42ODU3IDQuMTc1ODcgMTAuNjg1NyA0LjE3NTg3QzEwLjYyNDMgMi4xOTEzMSA4Ljk4MTY5IDIuNDcyMjEgOC45ODE2OSAyLjQ3MjIxTDguMzgzODYgMi42MDg0MUM4LjEwNjE0IDIuNDc5NzUgNy44MDAzMiAyLjQyMzMgNy40OTQ4NyAyLjQ0NDMxTDYuNTg1NDYgMi41OTcwNUM4LjY1NjI2IDMuMDgyNzEgOC40ODYxMyA0LjgxMTg1IDguNDg2MTMgNC44MTE4NUw4Ljc3NjI1IDYuODMzNjZMMy4zNTAxNiA0LjY0ODcyTDMuOTczMTYgMy4xODI1QzQuMDU5MjYgMy4wNDcxMSA0LjEzMjcyIDIuOTA0MTEgNC4xOTI1OSAyLjc1NTNDNC42MzMxNCAxLjY0NDk0IDMuODAxMDcgMC41NDA1MDYgMy4wMTQ0OCAwLjIyOTU3NkMyLjIyNzg4IC0wLjA4MTQzMTQgMS4yMzMwNiAwLjU2NjYzMSAwLjc5MjQ3NiAxLjY3Njk1QzAuMzU3OTQ2IDIuNzcyMTQgMC43ODI2NDIgNC4xNjM0OCAxLjU0OTE2IDQuNDk5NjNMMS41NDg1MSA0LjUwMDk3TDMuMTgwOCA1LjE3OTQ2TDMuMTkyOTUgNS4xNDEwNEwxMi42MzY5IDguNjIyODRaTTkuODgxNDQgNS4wNzA0MUwxMC4wNTU0IDcuMDA1NjRDOS40NDEwNSA2LjE0NTE1IDkuMTUyNDMgNS4wOTUwMSA5LjI0MDkxIDQuMDQyMDVDOS4yMjY0OSAzLjY2NzUgOS4wOTk5MSAzLjMwNTg3IDguODc3NTEgMy4wMDM4NkM5LjIxOTQgMy4yMjI1IDkuNDk0MTEgMy41MzEyMSA5LjY3MTI3IDMuODk1ODlDOS44NDg0MyA0LjI2MDU4IDkuOTIxMTcgNC42NjcwNSA5Ljg4MTQ0IDUuMDcwNFY1LjA3MDQxWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})})]}),(0,s.jsxs)("div",{className:"malibu-tablet-uLoading-progress-bar ",children:[(0,s.jsx)("div",{className:"malibu-tablet-uLoading-progress",style:{width:this.state.width}}),(0,s.jsx)("label",{className:"loading",children:this.props.dataFull.title}),(0,s.jsxs)("label",{className:"number-percent",children:[(0,s.jsx)("input",{className:"number-percent-input",readOnly:!0}),"%"]})]}),this.props.dataFull.speed.title?(0,s.jsxs)("div",{className:"row",style:{margin:"auto",marginTop:"150px",width:"fit-content"},children:[(0,s.jsx)("div",{className:"malibu-desktop-uLoading-rocket",children:(0,s.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfOSURBVHgBzZldbBzVFcf/dz722+t1SJOqH2RT6AMVNCsV+hKgS/pQlxRwGqlK3KjY6gMoqZT1S9SqlWyr5akPXktJVLVVsSVwTNUSC5IIPzSZUHho0hajBAWhAAYChJBk1/Z+785czp31rL27M7vrXQf4P/hez71z5zfnnnPuvbMMXwIlYn0hBZ7IoStq5FwG28AR4mARJiEk6nb3MHxBErAS/AME8BhhRAAeuloEhq7IEGUzfe7gS7E9UQ55mKpRu/ZW4T838MVY/wBN/0F6YKRZ31bgbzl4Mws7qRn8LQMvB5x/mAMxtKlG8LcEPBHrj8hgx6kaRodygE/KWGelhvYJP56haqhRP6lnI5mNepYaR2GACO8PcLyalpAyli9yvLmuFl+K7SPX4CNO7fIdd8Hd+1NIX98C5vWVGbIZlC78F4XZ4zBufuo4dpXlOdfWDbwRNPP64e7bB/X7DzQco/DS88jPPu/YbsF/XMD4urhKM0v7njgE5Z7vmfW8wfGf6zreWNRxccGATtO/ySOZbfKddwE0A/p7l23HsdzmgwJ/rmOLN4NW73sAnv4nzPrFBR3/uloy4VerW2XYs8VllkLp3w81dBsd+kMSOlB5UXGGFnL37jbLhSLHqY+KddBW2/R7hUqb+uCPGg2Jnvi0pmCNivbFQulCMrw9qIv9xZgIcSeJYGQbNpr10580zh4C/kJSx70bFIqFB5Gfecapqyb+tAQuYOHN04ZIesww8lFeAvbfZjS9T9rwlUr9/TRv2v9artxHZByJXti4ed2mF59sCi6AJV/hIEcxBi6ZeTmfL+AXPTq+qmJNsnORWuWa24L829BE6Qge3fNklLHi05yzsHWtVNJxGy9ioAVrC/FsulL/pl/CB+nG9212r+QKe2tDI/+eFxXJHnr/MGPyGdQs2dlsDo+3CC2kv33JXGCE7ulunnnvDpX76JcvOfQwxq2aZA/NRmqvl4olbJYN9AabT7klAV0893IZisBF4Dnp4a+plXRYPP9y/VjAfDB+bMYW3AlaKF8orMnalgq0EvLlad+xWTEBrQXHLTHc7pPMHH738oyIFy2e+3fdOAx8tPr/CvSTYXKPd+0ebhgGArk0jm3V0Y5EhvAd+F0lNTpJuEj2b2MV97IkrN0df3Zr1ZhWZdmnbSUyyTZv6y5SKxFomSN/qLhNrQRojvJ25shTddDm/eC7aq+ZFicXGSAXeRoOWlpK48/fKOJODzqWyNFiTyI2XiYULe3OwWhqIhh/drD2ohktBD1sc4PGDf46bYLmvusxwgQ9jBaVNhiuGRK2KvWuVd7G/q+lcYSL0DZs1K5NEfkaVtpjSHKDjSOnxLWZeNLqdCL285aOXwL4rykvTmdd+MvGRXQq4SJW3q6VAib1lZnZuJFRRlYDW6KI/kGzU94LGTemUx6kOcMOTwGb5LVnoNWizdtoT3xqzqldAWfbqNPgmekjE3Yd0i/8uI+/n4vyGyp4oj4PCysfS3vwIoELCeC9gRw6he6OT4006qOAXEP7+5GZ2obE8WjI5fKNMc4GWDgPdkcRsuylvawLhTkOI1WG/m0igHdLK6viXn+uI2sT9HgzaCHH+c+c2PkaFREKXCjdXigBd6VNQCf+z3DovL8K+lFfHr/syqJD6JbiSXGAHjOhZQnuTV0Q5WpJAeA3b1dDiwzSIfRoK5a2VAeeOvnwAI1ivrUdtNDkq25cvlYN/VRPCu2IPsslGYwhgp5Yy311VBIv53Q15LOFnr3gwuQrKytR5PYS/rg9Db+09pX1co5h7BMMBtcILVRl8aUXe6NUhAXwap+2dHVBMq1tafe9BRz4YRa8QIH6DsyyFaUoqP+ZoJm7KYvVL4k2VAVORzMzp0u+leMN51ysrGZ99qJqwgfcHId2ZnH/t8vnSOaiGfoO7QTnmj/wpQVGwBJu0KP9AQ/OPndUQxuqApeZyOmkkoHCjRSMog7F54IS9CKVZ3jlLRWPb89j9315E77q3i30EnOqsF7ICXh2keFCUYHb7YZXMWNEQ5uqAqfIDgu769llS5LLyF0r/jzWn64DtlTKZcF6WGj1IjWXYXidEs0/EhKykmwC+/0rQU2zOYn1ACeX0MoDYkCUKuVvy02cgE3oVB5cfJLq1pNIqBoZ4Oyvr0g4n5XGVFWB4lXhV+qObvNYPvi2o6q04d15clCnh5ovIaxNbmJJ+HpxsT5PC+DSQvk6+1ZmKBh/Zhdt+uOXEEBXMACP1wOlHloYZFKb/tM82lRdHq+kQ7K2JWFRAccUes/gynVOMZC/njJfyuB8PPDoqYlKo8rCcNY8beji6EBV4InjvWGIdEhnQWFtI18kK+eoLJnt4roJTKClpRz0pbxZJ2mBR05VL9W0eXPaUNAnj0G7XWjb4LKsRKxParkPkxZUlYS7rAIuW7oGunx+tf/Nh1xk9Myxwxo6VJWPS5LIKoROX52WwebIOqMSY+buUVi+RDNgWVnn7KE6S5dHisIB+vTU4RGsg6rTIWdzBuNDYDwpF1yad9fMvLieOfkT+j2Hz5v7Cs7P6pBmuh45odkNWLZ2/VGQXnXozNThjvx6tdb9x6sdew+M1fzSpnEyhjZ1tIV1tXWt+TNzI0X79x/kvAKtiQVGmz46gVugdbN49Ge/6mMyPyi+DFD6mdGmOw/ARvoMZ7pw6Vztu/cAAAAASUVORK5CYII=",alt:"rocket"})}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-speed",children:[(0,s.jsx)("label",{children:this.props.dataFull.speed.title}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoading-speed-number "+(this.props.dataFull.cmd.error.message?"error":""),children:[(0,s.jsx)("div",{style:{margin:"auto"},children:this.props.dataFull.speed.number_speed}),(0,s.jsx)("img",{src:this.props.dataFull.cmd.error.message?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGiSURBVHgB7ZXRTcMwEIbvXPJStciEB6jUVMkG7QZlg44AE5QNygYdATahG8AGrQRSWx7AEhIvSDli5AQ3cWO7ooiHfpIlxz75fOf/LgAH/gPL0+hSDvgL1jwarcOI5Fjy7hA8YeALg2k+bSBOwBMvhyqNcf5NCMNV2LsGD9DVcMnPY8aCe92hQnyk70kihHA5xznCBgsmBmcS3mJt59Q6Raiim9fZpOln0hGrBVhwipBhMLXZNDC4BQesDr+FgjDS15BoBkSP+poUkEuZWFOa1ZtMZawtibPXpxM5eQmjN8reUNtbZHtJ3Xms3lnXJJRCjaTNFfE67N3ALg6lUBDQq8bUNcZzzrm3Q1kGpXTlFGu4Zb+uTIxvaCsDhEwwhEIKZZtNmtJFRzzPyutHJmPVUbZCgH2b3FSfnVXOLi+U+6UBKZQ7ObAqmp9LyTIx/MI27ikfu8naDxaHhfQNJVOxzfrsQO+zGxE2WWtsOcCXuMmON5ReROjSL3dEZH12kPfZIkL1N9gHXO+zekpHsCdIe6aiLCiFq5RRH/YBVcvjwK/xBRbpfbJqi9GHAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgB3ZZLUuMwEIa7pZqZ5eQInhMM3MBZThlqnBMQdiwIBScIuQFVAYodzgWIgQKW+AaEExBuEJYkZTUtB8dvEtuw4d9EVrr6a0ndagF8d+GqhjtD2/jx0zcF4l9F2NBzAmmiiB5nU+mdtdzxKn6WAnevN0yUsgsE5hJPHpAa9K1r52OzAu0P7Yb/i84ZZEM5ObMp9opWnAvcv7MNX9E9Dw2opjFDm3lQ/ALYAiqnuH7UcifxSZG2Ylj3E2BaRnAkKSWAnZvNNv+0oaKIaOADrvO+ufMJsHXSFQIBxRbUgB1vXLVPLXfE2Xq5cKkzPI4IB+9n9wQVFMJifhI5oEAaJ9bFsx4vVugr34QKWgYLbPxZMxwvgKRwLcffGGrCAghGvqMzRGjEjfj6Ouhbl384kB7UgAWuBf7OAtNGpIIAjjfdQ/7argpLKwISTFJRdffuWkHW9i3XCaFVYKToJQNEQaOsoXLiUN7eZpWVoRCjDFAK6UFudBGUt9crC9OaTcHLAI/+8UWL0R9F0LIwIkj0ykTSkJ+fkSG0c/t/yLAHKHHXIuIg8Z020E4r9MAiOVxaiQzPlIV8DbJxDPWle2JmxzJA3b+kwGZNaGEDzi18nUAaqmsOyopbk268pZ4YcXVu7DaDtxA/fkTpbATCXlg6xfGsqHk5gImg1gjmdyMCvRDQqMwz8fvrDeQ/QIleItNVAAAAAElFTkSuQmCC",alt:"icon"})]})]})]}):null,this.props.dataFull.cmd.error.message?(0,s.jsx)("div",{className:"malibu-desktop-uLoading-message-error",children:this.props.dataFull.cmd.error.message}):null]})]}):"mobile"===this.state.device?(0,s.jsxs)("div",{className:"malibu-mobile-uLoading "+this.state.class,children:[(0,s.jsxs)("div",{style:{display:"none"},children:[(0,s.jsx)("i",{className:"material-icons",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-round",style:{visibility:"hidden"},children:"menu"}),(0,s.jsx)("i",{className:"material-icons-outlined",style:{visibility:"hidden"},children:"menu"})]}),(0,s.jsxs)("div",{className:"malibu-mobile-uLoading-header",children:[(0,s.jsxs)("div",{className:"malibu-mobile-uLoading-chicken",style:{position:"absolute",zIndex:"3"},children:[(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMzIiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDEzMyAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02Ni4wODI4IDExNy4yNDVDOTUuNjg4NyAxMTcuMjQ1IDExOS42ODkgOTMuMjg5MSAxMTkuNjg5IDYzLjczNzRDMTE5LjY4OSAzNC4xODU4IDk1LjY4ODcgMTAuMjI5NSA2Ni4wODI4IDEwLjIyOTVDMzYuNDc2OSAxMC4yMjk1IDEyLjQ3NjYgMzQuMTg1OCAxMi40NzY2IDYzLjczNzRDMTIuNDc2NiA5My4yODkxIDM2LjQ3NjkgMTE3LjI0NSA2Ni4wODI4IDExNy4yNDVaIiBmaWxsPSIjM0YzRDU2Ii8+CjxwYXRoIGQ9Ik0zMi4zMzQ0IDY4LjAzMjZDMzMuNjY1OCA2Ni40NDE3IDM1LjMzMDkgNjUuMTYyIDM3LjIxMiA2NC4yODM4QzM5LjA5MzIgNjMuNDA1NiA0MS4xNDQ3IDYyLjk1MDUgNDMuMjIxNCA2Mi45NTA1QzQ1LjI5ODEgNjIuOTUwNSA0Ny4zNDk2IDYzLjQwNTYgNDkuMjMwNyA2NC4yODM4QzUxLjExMTkgNjUuMTYyIDUyLjc3NyA2Ni40NDE3IDU0LjEwODQgNjguMDMyNkM1Ni4zODY1IDY1Ljg2MTkgNTcuOTYxIDYzLjA1OTggNTguNjI5MSA1OS45ODc2QzU5LjI5NzIgNTYuOTE1NSA1OS4wMjgyIDUzLjcxNCA1Ny44NTY4IDUwLjc5NThDNTYuNjg1NCA0Ny44Nzc2IDU0LjY2NTIgNDUuMzc2NSA1Mi4wNTY3IDQzLjYxNDhDNDkuNDQ4MiA0MS44NTMxIDQ2LjM3MDkgNDAuOTExNiA0My4yMjE0IDQwLjkxMTZDNDAuMDcxOSA0MC45MTE2IDM2Ljk5NDYgNDEuODUzMSAzNC4zODYxIDQzLjYxNDhDMzEuNzc3NiA0NS4zNzY1IDI5Ljc1NzQgNDcuODc3NiAyOC41ODYgNTAuNzk1OEMyNy40MTQ2IDUzLjcxNCAyNy4xNDU2IDU2LjkxNTUgMjcuODEzNyA1OS45ODc2QzI4LjQ4MTggNjMuMDU5OCAzMC4wNTYzIDY1Ljg2MTkgMzIuMzM0NCA2OC4wMzI2VjY4LjAzMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzQuOTA0IDY4LjAzMjZDNzYuMjM1MyA2Ni40NDE3IDc3LjkwMDQgNjUuMTYxOSA3OS43ODE2IDY0LjI4MzhDODEuNjYyOCA2My40MDU2IDgzLjcxNDIgNjIuOTUwNSA4NS43OTEgNjIuOTUwNUM4Ny44Njc3IDYyLjk1MDUgODkuOTE5MSA2My40MDU2IDkxLjgwMDMgNjQuMjgzOEM5My42ODE1IDY1LjE2MTkgOTUuMzQ2NSA2Ni40NDE3IDk2LjY3NzkgNjguMDMyNkM5OC45NTYgNjUuODYxOSAxMDAuNTMxIDYzLjA1OTggMTAxLjE5OSA1OS45ODc2QzEwMS44NjcgNTYuOTE1NSAxMDEuNTk4IDUzLjcxNCAxMDAuNDI2IDUwLjc5NThDOTkuMjU0OSA0Ny44Nzc2IDk3LjIzNDggNDUuMzc2NSA5NC42MjYzIDQzLjYxNDhDOTIuMDE3OCA0MS44NTMxIDg4Ljk0MDQgNDAuOTExNiA4NS43OTEgNDAuOTExNkM4Mi42NDE1IDQwLjkxMTYgNzkuNTY0MSA0MS44NTMxIDc2Ljk1NTYgNDMuNjE0OEM3NC4zNDcxIDQ1LjM3NjUgNzIuMzI3IDQ3Ljg3NzYgNzEuMTU1NiA1MC43OTU4QzY5Ljk4NDEgNTMuNzE0IDY5LjcxNTEgNTYuOTE1NSA3MC4zODMyIDU5Ljk4NzZDNzEuMDUxMyA2My4wNTk4IDcyLjYyNTkgNjUuODYxOSA3NC45MDQgNjguMDMyNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNy40NTQ4IDgzLjQwOTRDMzAuOTM3OSA4My40MDk0IDMzLjc2MTQgODAuNTkxIDMzLjc2MTQgNzcuMTE0M0MzMy43NjE0IDczLjYzNzcgMzAuOTM3OSA3MC44MTkzIDI3LjQ1NDggNzAuODE5M0MyMy45NzE4IDcwLjgxOTMgMjEuMTQ4MiA3My42Mzc3IDIxLjE0ODIgNzcuMTE0M0MyMS4xNDgyIDgwLjU5MSAyMy45NzE4IDgzLjQwOTQgMjcuNDU0OCA4My40MDk0WiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNOTkuOTgwNyA4My40MDk0QzEwMy40NjQgODMuNDA5NCAxMDYuMjg3IDgwLjU5MSAxMDYuMjg3IDc3LjExNDNDMTA2LjI4NyA3My42Mzc3IDEwMy40NjQgNzAuODE5MyA5OS45ODA3IDcwLjgxOTNDOTYuNDk3NiA3MC44MTkzIDkzLjY3NDEgNzMuNjM3NyA5My42NzQxIDc3LjExNDNDOTMuNjc0MSA4MC41OTEgOTYuNDk3NiA4My40MDk0IDk5Ljk4MDcgODMuNDA5NFoiIGZpbGw9IiNGRjY1ODQiLz4KPHBhdGggZD0iTTYzLjcxNzcgNjQuNTI0MUw1OC45ODc4IDg0Ljk4MzFMNjYuODcxIDc3LjExNDRMNjMuNzE3NyA2NC41MjQxWiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNODguMDIxNiAxNDMuMjEyTDgyLjY1MTYgMTM4LjcxNEw4Mi43NzY3IDE0My4yMTJIODEuMTA4OEw4MC45NzU2IDEzOC40NTZMNzMuNzI1MiAxNDMuMjEySDcwLjY4OTlMODAuOTIxNCAxMzYuNUw4MC41MjUxIDEyMi40MDRMODAuMjI5MSAxMTEuNzU5TDgxLjg5MjggMTExLjcxM0w4Mi4xOTMgMTIyLjQwNEw4Mi41ODkgMTM2LjQ4N0w5MC42MTQ3IDE0My4yMTJIODguMDIxNloiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTYyLjc5MzEgMTQzLjIxMkw1Ny40MjMgMTM4LjcxNEw1Ny41NDgyIDE0My4yMTJINTUuODg0OEw1NS43NTEzIDEzOC40NTZMNDguNTAwOCAxNDMuMjEySDQ1LjQ2NTZMNTUuNjkyOSAxMzYuNUw1NS4yOTY5IDEyMi40MDRMNTUuMDAwOCAxMTEuNzU5TDU2LjY2ODQgMTExLjcxM0w1Ni45Njg3IDEyMi40MDRMNTcuMzYwNSAxMzYuNDg3TDY1LjM4NjUgMTQzLjIxMkg2Mi43OTMxWiIgZmlsbD0iIzNGM0Q1NiIvPgo8cGF0aCBkPSJNNjYuODcxMyA2LjI5NTAxQzY1LjQwMDQgNi4yOTUwMSA2NC4xMDI4IDcuNDM1NDggNjMuMjM1MyA5LjE4NzIzQzYyLjQ3MDYgNi41NTMxMiA2MC44NjQxIDQuNzIxMjcgNTguOTg4IDQuNzIxMjdDNTguODYwNSA0LjczMzkyIDU4LjczNCA0Ljc1NTEzIDU4LjYwOTMgNC43ODQ3NkM1Ny44ODgyIDEuOTcyMzYgNTYuMjEyMSAtMi40Nzk1NWUtMDUgNTQuMjU4IC0yLjQ3OTU1ZS0wNUM1MS42NDU3IC0yLjQ3OTU1ZS0wNSA0OS41MjgxIDMuNTIyOTkgNDkuNTI4MSA3Ljg2ODhDNDkuNTI4MSAxMi4yMTQ2IDUxLjY0NTcgMTUuNzM3NiA1NC4yNTggMTUuNzM3NkM1NC4zODU1IDE1LjcyNSA1NC41MTIxIDE1LjcwMzcgNTQuNjM2NyAxNS42NzQxQzU1LjM1NzkgMTguNDg2NSA1Ny4wMzM5IDIwLjQ1ODkgNTguOTg4IDIwLjQ1ODlDNjAuNDU4OSAyMC40NTg5IDYxLjc1NjUgMTkuMzE4NCA2Mi42MjQgMTcuNTY2N0M2My4zODg3IDIwLjIwMDggNjQuOTk1MSAyMi4wMzI2IDY2Ljg3MTMgMjIuMDMyNkM2OS40ODM2IDIyLjAzMjYgNzEuNjAxMiAxOC41MDk2IDcxLjYwMTIgMTQuMTYzOEM3MS42MDEyIDkuODE4MDEgNjkuNDgzNiA2LjI5NTAxIDY2Ljg3MTMgNi4yOTUwMVoiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTE1Ljc2NjYgODQuMDE0NUMxMy42OTYxIDg0LjAxNDUgMTEuNjQ1OSA4My42MDc0IDkuNzMzMDEgODIuODE2NkM3LjgyMDEyIDgyLjAyNTcgNi4wODIwMyA4MC44NjY1IDQuNjE3OTcgNzkuNDA1MUMzLjE1MzkxIDc3Ljk0MzcgMS45OTI1NiA3Ni4yMDg4IDEuMjAwMjEgNzQuMjk5NEMwLjQwNzg3MiA3Mi4zOTAxIDYuNDI5NWUtMDUgNzAuMzQzNiA2LjQyOTVlLTA1IDY4LjI3NjlMNi40Mjk1ZS0wNSA2MC40MDhDNi40Mjk1ZS0wNSA1Ni4yMzQyIDEuNjYxMTcgNTIuMjMxMyA0LjYxNzk3IDQ5LjI3OTlDNy41NzQ3NyA0Ni4zMjg1IDExLjU4NTEgNDQuNjcwNCAxNS43NjY2IDQ0LjY3MDRWNDQuNjcwNEwxNS43NjY2IDg0LjAxNDVaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMTYuMzk5IDQ0LjY3MDVDMTE4LjQ3IDQ0LjY3MDUgMTIwLjUyIDQ1LjA3NzYgMTIyLjQzMyA0NS44Njg1QzEyNC4zNDYgNDYuNjU5NCAxMjYuMDg0IDQ3LjgxODYgMTI3LjU0OCA0OS4yOEMxMjkuMDEyIDUwLjc0MTMgMTMwLjE3MyA1Mi40NzYyIDEzMC45NjYgNTQuMzg1NkMxMzEuNzU4IDU2LjI5NSAxMzIuMTY2IDU4LjM0MTQgMTMyLjE2NiA2MC40MDgxVjY4LjI3N0MxMzIuMTY2IDcwLjM0MzcgMTMxLjc1OCA3Mi4zOTAxIDEzMC45NjYgNzQuMjk5NUMxMzAuMTczIDc2LjIwODkgMTI5LjAxMiA3Ny45NDM4IDEyNy41NDggNzkuNDA1MUMxMjYuMDg0IDgwLjg2NjUgMTI0LjM0NiA4Mi4wMjU3IDEyMi40MzMgODIuODE2NkMxMjAuNTIgODMuNjA3NSAxMTguNDcgODQuMDE0NiAxMTYuMzk5IDg0LjAxNDZWODQuMDE0NlY0NC42NzA1SDExNi4zOTlaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMjQuNjYxIDYxLjY0NDZIMTIyLjE2QzEyMi4xNiAyOS45Nzc1IDk2LjM0OTIgNC4yMTQyMyA2NC42MjM3IDQuMjE0MjNDMzIuODk4MyA0LjIxNDIzIDcuMDg3NzUgMjkuOTc3NSA3LjA4Nzc1IDYxLjY0NDZINC41ODYxOEM0LjU4NjE4IDI4LjYwMDUgMzEuNTE4OSAxLjcxNzI2IDY0LjYyMzcgMS43MTcyNkM5Ny43Mjg2IDEuNzE3MjYgMTI0LjY2MSAyOC42MDA2IDEyNC42NjEgNjEuNjQ0NloiIGZpbGw9IiM1NTU3RTQiLz4KPC9zdmc+Cg==",alt:"chicken"}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-chiken-eye left"}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-chiken-eye right"}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-path",children:(0,s.jsx)("svg",{width:"12",height:"3",xmlns:"http://www.w3.org/2000/svg",style:{visibility:"hidden"},children:(0,s.jsx)("path",{d:"M 0 2 Q 6 -5 12 2 M 12 2 Q 6 -5 0 2",stroke:"black",fill:"transparent"})})})]}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-ground",style:{position:"absolute"},children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSI4NyIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDI4NyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yODYuMzUxIDExLjY4Nkw4MS40MDg4IDE0Ljc3MDFMMC4wNTc2MTcyIDAuMzc4MTc0SDEyNy4wNThMMjg2LjM1MSAxMS42ODZaIiBmaWxsPSIjRTZFNkU2Ii8+DQo8L3N2Zz4NCg==",alt:"ground"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-tree one",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-tree two",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-tree three",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-tree four",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-tree five",children:(0,s.jsx)("img",{src:this.tree_item,alt:"tree"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-sun"}),(0,s.jsxs)("div",{className:"malibu-mobile-uLoading-music-list",style:{position:"absolute"},children:[(0,s.jsx)("div",{className:"malibu-mobile-uLoading-music six",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMiAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS42NDU5IDEyLjA5MDVMMTkuNjQ3IDEyLjA4ODJMMTYuODM3MiAxMC45MjAyTDUuMDkzNDUgNi4zNjMzNUw4LjA1NzQ1IDMuNzMxMTJDOC4wNTc0NSAzLjczMTEyIDEwLjAyOSAxLjAwMDU1IDEzLjE3NDEgMi44OTQ0OUwxMi4yNTQzIDEuNTI5OTVDMTIuMjU0MyAxLjUyOTk1IDEwLjUyNTEgLTAuNzU1MTU3IDguMTA0NjUgMS42NjI1NEM4LjEwNDY1IDEuNjYyNTQgNS4xMDk3NiA2LjA2OTU0IDAuNDA1NTE4IDQuOTQ2MTlMMTYuNDcxNCAxMS43MzM2TDE2LjU1NTcgMTEuODA5OUwxNS40NzMxIDE0LjM1NzlDMTUuMzI0OSAxNC41OTEgMTUuMTk4NSAxNC44MzcxIDE1LjA5NTQgMTUuMDkzM0MxNC4zMzcgMTcuMDA0NyAxNS43Njk0IDE4LjkwNTkgMTcuMTIzNCAxOS40NDEyQzE4LjQ3NzUgMTkuOTc2NiAyMC4xOTAxIDE4Ljg2MSAyMC45NDg1IDE2Ljk0OTZDMjEuNjk2NSAxNS4wNjQzIDIwLjk2NTQgMTIuNjY5MiAxOS42NDU5IDEyLjA5MDVaIiBmaWxsPSIjM0YzRDU2Ii8+DQo8L3N2Zz4NCg==",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-music five",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAzMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yOS4yNjg5IDIwLjM2ODFDMjMuNDM2OCAxNy4wMzk3IDI0LjYwMzkgOS43MzU4NCAyNC42MDM5IDkuNzM1ODRDMjQuNDU3MSA0Ljk5MDg5IDIwLjUyOTcgNS42NjI1NiAyMC41Mjk3IDUuNjYyNTZMMTkuMTAwMyA1Ljk4ODE0QzE4LjQzNjMgNS42ODA1MSAxNy43MDUxIDUuNTQ1NTMgMTYuOTc0OCA1LjU5NTc1TDE0LjgwMDUgNS45NjFDMTkuNzUxNiA3LjEyMjE5IDE5LjM0NDggMTEuMjU2NCAxOS4zNDQ4IDExLjI1NjRMMjAuMDM4NCAxNi4wOTAzTDcuMDY1MTUgMTAuODY2NEw4LjU1NDY5IDcuMzYwNjdDOC43NjA1NSA3LjAzNjk2IDguOTM2MTggNi42OTUwNiA5LjA3OTM4IDYuMzM5MjhDMTAuMTMyNyAzLjY4NDUzIDguMTQzMyAxLjA0MzkxIDYuMjYyNTkgMC4zMDA0MkM0LjM4MTg5IC0wLjQ0MzA2NyAyLjAwMzM2IDEuMTA2MyAwLjk1MDAxOCAzLjc2MUMtMC4wODg5Nzk3IDYuMzc5NTIgMC45MjY0MDcgOS43MDYxNSAyLjc1OTExIDEwLjUwOTlMMi43NTc1NiAxMC41MTNMNi42NjAyMiAxMi4xMzUzTDYuNjg5MjcgMTIuMDQzNUwyOS4yNjg5IDIwLjM2ODFaTTIyLjY4MDkgMTEuODc0NkwyMy4wOTgzIDE2LjUxNzVDMjAuNjQ4OCAxMy4yNzE5IDIxLjE0OTUgOS40MTU3OCAyMS4xNDk1IDkuNDE1NzhDMjEuMTE1IDguNTIwMjkgMjAuODEyMyA3LjY1NTY5IDIwLjI4MDYgNi45MzM1OUMyMy4wOTQ0IDguNjE0MzIgMjIuNjgwOSAxMS44NzQ2IDIyLjY4MDkgMTEuODc0NkgyMi42ODA5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-music four",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxNyAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMC4yMjE3IDEzLjMzOUw5LjU5Mjc0IDE0LjgxOTJDOS41MDY2NSAxNC45NTQ2IDkuNDMzMjEgMTUuMDk3NiA5LjM3MzM0IDE1LjI0NjRDOC45MzI3NSAxNi4zNTY3IDkuNzY0ODQgMTcuNDYxMSAxMC41NTE0IDE3Ljc3MjFDMTEuMzM4IDE4LjA4MzEgMTIuMzMyOSAxNy40MzUxIDEyLjc3MzQgMTYuMzI0N0MxMy4yMDggMTUuMjI5NSAxMi43ODMzIDEzLjgzODIgMTIuMDE2OCAxMy41MDJMMTIuMDE3NCAxMy41MDA3TDEwLjM4NTEgMTIuODIyMkw0LjgwMTI2IDEwLjY1NTVMNy45OTE3NCAyLjYxNDYzTDcuNTE4ODggMi40Mjc2OEw0LjMyNzE5IDEwLjQ3MTZMMy42MzY3NSAxMC4yMDM3TDYuODQwODMgMi4xMjgzOUw2LjkyNTI1IDIuMTY0MDVMMTMuNDg4OCA0LjkzNjk4TDEzLjUzNzggNC45ODEyOEwxMi45MDg5IDYuNDYxNDNDMTIuODIyOSA2LjU5NjgyIDEyLjc0OTQgNi43Mzk4MiAxMi42ODk1IDYuODg4NjNDMTIuMjQ4OSA3Ljk5ODk5IDEzLjA4MSA5LjEwMzQyIDEzLjg2NzYgOS40MTQzOUMxNC42NTQyIDkuNzI1MzYgMTUuNjQ5MSA5LjA3NzM0IDE2LjA4OTYgNy45NjY5OEMxNi41MjQyIDYuODcxNzkgMTYuMDk5NSA1LjQ4MDQ0IDE1LjMzMyA1LjE0NDI4TDE1LjMzMzYgNS4xNDI5NEwxMy43MDEzIDQuNDY0NDVMNy4wMzA3OCAxLjY0OTc1TDcuMDMwNSAxLjY0OTYyTDYuODE0MTUgMS41NTgzNEw0LjM0NTQ4IDAuNTE2NjYzTDAuODM5ODQ0IDkuMzUxODVMMTAuMTcyNyAxMy4yOTQ3TDEwLjIyMTcgMTMuMzM5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-music three",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMyAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4yNDYzIDcuMDAyN0wxMS4yNDY5IDcuMDAxNDJMOS42MTQ2MSA2LjMyMjg4TDIuNzkyNTkgMy42NzU4MUw0LjUxNDQxIDIuMTQ2NzNDNC44NTEyNSAxLjY5ODUgNS4zNDg2OCAxLjM5NzYyIDUuOTAyNjQgMS4zMDcwNEM2LjQ1NjYgMS4yMTY0NiA3LjAyNDE5IDEuMzQzMTggNy40ODY3MSAxLjY2MDY5TDYuOTUyMzkgMC44NjgwNEM2Ljk1MjM5IDAuODY4MDQgNS45NDc5MSAtMC40NTkzNyA0LjU0MTgyIDAuOTQ1MDg2QzQuNTQxODIgMC45NDUwODYgMi44MDIwNyAzLjUwNTEzIDAuMDY5MzM1OSAyLjg1MjU2TDkuNDAyMTcgNi43OTU0NUw5LjQ1MTE1IDYuODM5NzVMOC44MjIyNiA4LjMxOTkxQzguNzM2MTQgOC40NTUyOSA4LjY2MjY4IDguNTk4MyA4LjYwMjgxIDguNzQ3MTFDOC4xNjIyNyA5Ljg1NzQzIDguOTk0MzQgMTAuOTYxOSA5Ljc4MDkzIDExLjI3MjhDMTAuNTY3NSAxMS41ODM4IDExLjU2MjMgMTAuOTM1OCAxMi4wMDI5IDkuODI1NDZDMTIuNDM3NSA4LjczMDI2IDEyLjAxMjggNy4zMzg5MiAxMS4yNDYzIDcuMDAyN1oiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-music two",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMyAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4zNzkzIDMuODQ5NzdMMTEuMzc5NyAzLjg0ODg0TDEwLjIwNDUgMy4zNjAyOUw1LjI0NTggMS4yNjc4OEwzLjQ2ODM3IDAuNTE3OTE0TDMuMzMxOTYgMC44NjE2NTZMMC45NDQzMzYgNi44NzkxNUw3LjY2Mzg5IDkuNzE4MDJMNy42OTkxNiA5Ljc0OTkxTDcuMjQ2MzUgMTAuODE1NkM3LjE4NDM3IDEwLjkxMzEgNy4xMzE0OSAxMS4wMTYxIDcuMDg4MzYgMTEuMTIzMkM2Ljc3MTE3IDExLjkyMjYgNy4zNzAyNyAxMi43MTc4IDcuOTM2NjEgMTIuOTQxN0M4LjUwMjk1IDEzLjE2NTYgOS4yMTkyMyAxMi42OTkxIDkuNTM2NDIgMTEuODk5NkM5Ljg0OTMgMTEuMTExMSA5LjU0MzU0IDEwLjEwOTMgOC45OTE2MyA5Ljg2NzI4TDguOTkyMTEgOS44NjYzNEw3LjgxNjg3IDkuMzc3NzlMMy43OTY1MiA3LjgxNzhMNi4wOTM2NiAyLjAyODQyTDUuNzUzMTkgMS44OTM4NEwzLjQ1NTIzIDcuNjg1MzdMMi45NTgxIDcuNDkyNDZMNS4yNjUwNCAxLjY3ODMzTDUuMzI1ODEgMS43MDQwMUwxMC4wNTE1IDMuNzAwNUwxMC4wODY4IDMuNzMyMzlMOS42MzQwMiA0Ljc5ODEzQzkuNTcyMDMgNC44OTU2IDkuNTE5MTQgNC45OTg1NSA5LjQ3NjAzIDUuMTA1NjlDOS4xNTg4IDUuOTA1MTIgOS43NTc5IDYuNzAwMzMgMTAuMzI0MiA2LjkyNDE5QzEwLjg5MDYgNy4xNDgwNiAxMS42MDY5IDYuNjgxNTUgMTEuOTI0MSA1Ljg4MjExQzEyLjIzNjkgNS4wOTM1NiAxMS45MzEyIDQuMDkxODEgMTEuMzc5MyAzLjg0OTc3WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})}),(0,s.jsx)("div",{className:"malibu-mobile-uLoading-music one",children:(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDEzIDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMTIuNjM2OSA4LjYyMjg0QzEwLjE5NzYgNy4yMzA3NiAxMC42ODU3IDQuMTc1ODcgMTAuNjg1NyA0LjE3NTg3QzEwLjYyNDMgMi4xOTEzMSA4Ljk4MTY5IDIuNDcyMjEgOC45ODE2OSAyLjQ3MjIxTDguMzgzODYgMi42MDg0MUM4LjEwNjE0IDIuNDc5NzUgNy44MDAzMiAyLjQyMzMgNy40OTQ4NyAyLjQ0NDMxTDYuNTg1NDYgMi41OTcwNUM4LjY1NjI2IDMuMDgyNzEgOC40ODYxMyA0LjgxMTg1IDguNDg2MTMgNC44MTE4NUw4Ljc3NjI1IDYuODMzNjZMMy4zNTAxNiA0LjY0ODcyTDMuOTczMTYgMy4xODI1QzQuMDU5MjYgMy4wNDcxMSA0LjEzMjcyIDIuOTA0MTEgNC4xOTI1OSAyLjc1NTNDNC42MzMxNCAxLjY0NDk0IDMuODAxMDcgMC41NDA1MDYgMy4wMTQ0OCAwLjIyOTU3NkMyLjIyNzg4IC0wLjA4MTQzMTQgMS4yMzMwNiAwLjU2NjYzMSAwLjc5MjQ3NiAxLjY3Njk1QzAuMzU3OTQ2IDIuNzcyMTQgMC43ODI2NDIgNC4xNjM0OCAxLjU0OTE2IDQuNDk5NjNMMS41NDg1MSA0LjUwMDk3TDMuMTgwOCA1LjE3OTQ2TDMuMTkyOTUgNS4xNDEwNEwxMi42MzY5IDguNjIyODRaTTkuODgxNDQgNS4wNzA0MUwxMC4wNTU0IDcuMDA1NjRDOS40NDEwNSA2LjE0NTE1IDkuMTUyNDMgNS4wOTUwMSA5LjI0MDkxIDQuMDQyMDVDOS4yMjY0OSAzLjY2NzUgOS4wOTk5MSAzLjMwNTg3IDguODc3NTEgMy4wMDM4NkM5LjIxOTQgMy4yMjI1IDkuNDk0MTEgMy41MzEyMSA5LjY3MTI3IDMuODk1ODlDOS44NDg0MyA0LjI2MDU4IDkuOTIxMTcgNC42NjcwNSA5Ljg4MTQ0IDUuMDcwNFY1LjA3MDQxWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})})]}),(0,s.jsxs)("div",{className:"malibu-mobile-uLoading-progress-bar ",children:[(0,s.jsx)("div",{className:"malibu-mobile-uLoading-progress",style:{width:this.state.width}}),(0,s.jsx)("label",{className:"loading",children:this.props.dataFull.title}),(0,s.jsxs)("label",{className:"number-percent",children:[(0,s.jsx)("input",{className:"number-percent-input",readOnly:!0}),"%"]})]}),this.props.dataFull.speed.title?(0,s.jsxs)("div",{className:"row",style:{margin:"auto",marginTop:"150px",width:"fit-content"},children:[(0,s.jsx)("div",{className:"malibu-mobile-uLoading-rocket",children:(0,s.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfOSURBVHgBzZldbBzVFcf/dz722+t1SJOqH2RT6AMVNCsV+hKgS/pQlxRwGqlK3KjY6gMoqZT1S9SqlWyr5akPXktJVLVVsSVwTNUSC5IIPzSZUHho0hajBAWhAAYChJBk1/Z+785czp31rL27M7vrXQf4P/hez71z5zfnnnPuvbMMXwIlYn0hBZ7IoStq5FwG28AR4mARJiEk6nb3MHxBErAS/AME8BhhRAAeuloEhq7IEGUzfe7gS7E9UQ55mKpRu/ZW4T838MVY/wBN/0F6YKRZ31bgbzl4Mws7qRn8LQMvB5x/mAMxtKlG8LcEPBHrj8hgx6kaRodygE/KWGelhvYJP56haqhRP6lnI5mNepYaR2GACO8PcLyalpAyli9yvLmuFl+K7SPX4CNO7fIdd8Hd+1NIX98C5vWVGbIZlC78F4XZ4zBufuo4dpXlOdfWDbwRNPP64e7bB/X7DzQco/DS88jPPu/YbsF/XMD4urhKM0v7njgE5Z7vmfW8wfGf6zreWNRxccGATtO/ySOZbfKddwE0A/p7l23HsdzmgwJ/rmOLN4NW73sAnv4nzPrFBR3/uloy4VerW2XYs8VllkLp3w81dBsd+kMSOlB5UXGGFnL37jbLhSLHqY+KddBW2/R7hUqb+uCPGg2Jnvi0pmCNivbFQulCMrw9qIv9xZgIcSeJYGQbNpr10580zh4C/kJSx70bFIqFB5Gfecapqyb+tAQuYOHN04ZIesww8lFeAvbfZjS9T9rwlUr9/TRv2v9artxHZByJXti4ed2mF59sCi6AJV/hIEcxBi6ZeTmfL+AXPTq+qmJNsnORWuWa24L829BE6Qge3fNklLHi05yzsHWtVNJxGy9ioAVrC/FsulL/pl/CB+nG9212r+QKe2tDI/+eFxXJHnr/MGPyGdQs2dlsDo+3CC2kv33JXGCE7ulunnnvDpX76JcvOfQwxq2aZA/NRmqvl4olbJYN9AabT7klAV0893IZisBF4Dnp4a+plXRYPP9y/VjAfDB+bMYW3AlaKF8orMnalgq0EvLlad+xWTEBrQXHLTHc7pPMHH738oyIFy2e+3fdOAx8tPr/CvSTYXKPd+0ebhgGArk0jm3V0Y5EhvAd+F0lNTpJuEj2b2MV97IkrN0df3Zr1ZhWZdmnbSUyyTZv6y5SKxFomSN/qLhNrQRojvJ25shTddDm/eC7aq+ZFicXGSAXeRoOWlpK48/fKOJODzqWyNFiTyI2XiYULe3OwWhqIhh/drD2ohktBD1sc4PGDf46bYLmvusxwgQ9jBaVNhiuGRK2KvWuVd7G/q+lcYSL0DZs1K5NEfkaVtpjSHKDjSOnxLWZeNLqdCL285aOXwL4rykvTmdd+MvGRXQq4SJW3q6VAib1lZnZuJFRRlYDW6KI/kGzU94LGTemUx6kOcMOTwGb5LVnoNWizdtoT3xqzqldAWfbqNPgmekjE3Yd0i/8uI+/n4vyGyp4oj4PCysfS3vwIoELCeC9gRw6he6OT4006qOAXEP7+5GZ2obE8WjI5fKNMc4GWDgPdkcRsuylvawLhTkOI1WG/m0igHdLK6viXn+uI2sT9HgzaCHH+c+c2PkaFREKXCjdXigBd6VNQCf+z3DovL8K+lFfHr/syqJD6JbiSXGAHjOhZQnuTV0Q5WpJAeA3b1dDiwzSIfRoK5a2VAeeOvnwAI1ivrUdtNDkq25cvlYN/VRPCu2IPsslGYwhgp5Yy311VBIv53Q15LOFnr3gwuQrKytR5PYS/rg9Db+09pX1co5h7BMMBtcILVRl8aUXe6NUhAXwap+2dHVBMq1tafe9BRz4YRa8QIH6DsyyFaUoqP+ZoJm7KYvVL4k2VAVORzMzp0u+leMN51ysrGZ99qJqwgfcHId2ZnH/t8vnSOaiGfoO7QTnmj/wpQVGwBJu0KP9AQ/OPndUQxuqApeZyOmkkoHCjRSMog7F54IS9CKVZ3jlLRWPb89j9315E77q3i30EnOqsF7ICXh2keFCUYHb7YZXMWNEQ5uqAqfIDgu769llS5LLyF0r/jzWn64DtlTKZcF6WGj1IjWXYXidEs0/EhKykmwC+/0rQU2zOYn1ACeX0MoDYkCUKuVvy02cgE3oVB5cfJLq1pNIqBoZ4Oyvr0g4n5XGVFWB4lXhV+qObvNYPvi2o6q04d15clCnh5ovIaxNbmJJ+HpxsT5PC+DSQvk6+1ZmKBh/Zhdt+uOXEEBXMACP1wOlHloYZFKb/tM82lRdHq+kQ7K2JWFRAccUes/gynVOMZC/njJfyuB8PPDoqYlKo8rCcNY8beji6EBV4InjvWGIdEhnQWFtI18kK+eoLJnt4roJTKClpRz0pbxZJ2mBR05VL9W0eXPaUNAnj0G7XWjb4LKsRKxParkPkxZUlYS7rAIuW7oGunx+tf/Nh1xk9Myxwxo6VJWPS5LIKoROX52WwebIOqMSY+buUVi+RDNgWVnn7KE6S5dHisIB+vTU4RGsg6rTIWdzBuNDYDwpF1yad9fMvLieOfkT+j2Hz5v7Cs7P6pBmuh45odkNWLZ2/VGQXnXozNThjvx6tdb9x6sdew+M1fzSpnEyhjZ1tIV1tXWt+TNzI0X79x/kvAKtiQVGmz46gVugdbN49Ge/6mMyPyi+DFD6mdGmOw/ARvoMZ7pw6Vztu/cAAAAASUVORK5CYII=",alt:"rocket"})}),(0,s.jsxs)("div",{className:"malibu-mobile-uLoading-speed",children:[(0,s.jsx)("label",{children:this.props.dataFull.speed.title}),(0,s.jsxs)("div",{className:"malibu-mobile-uLoading-speed-number "+(this.props.dataFull.cmd.error.message?"error":""),children:[(0,s.jsx)("div",{style:{margin:"auto"},children:this.props.dataFull.speed.number_speed}),(0,s.jsx)("img",{src:this.props.dataFull.cmd.error.message?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGiSURBVHgB7ZXRTcMwEIbvXPJStciEB6jUVMkG7QZlg44AE5QNygYdATahG8AGrQRSWx7AEhIvSDli5AQ3cWO7ooiHfpIlxz75fOf/LgAH/gPL0+hSDvgL1jwarcOI5Fjy7hA8YeALg2k+bSBOwBMvhyqNcf5NCMNV2LsGD9DVcMnPY8aCe92hQnyk70kihHA5xznCBgsmBmcS3mJt59Q6Raiim9fZpOln0hGrBVhwipBhMLXZNDC4BQesDr+FgjDS15BoBkSP+poUkEuZWFOa1ZtMZawtibPXpxM5eQmjN8reUNtbZHtJ3Xms3lnXJJRCjaTNFfE67N3ALg6lUBDQq8bUNcZzzrm3Q1kGpXTlFGu4Zb+uTIxvaCsDhEwwhEIKZZtNmtJFRzzPyutHJmPVUbZCgH2b3FSfnVXOLi+U+6UBKZQ7ObAqmp9LyTIx/MI27ikfu8naDxaHhfQNJVOxzfrsQO+zGxE2WWtsOcCXuMmON5ReROjSL3dEZH12kPfZIkL1N9gHXO+zekpHsCdIe6aiLCiFq5RRH/YBVcvjwK/xBRbpfbJqi9GHAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgB3ZZLUuMwEIa7pZqZ5eQInhMM3MBZThlqnBMQdiwIBScIuQFVAYodzgWIgQKW+AaEExBuEJYkZTUtB8dvEtuw4d9EVrr6a0ndagF8d+GqhjtD2/jx0zcF4l9F2NBzAmmiiB5nU+mdtdzxKn6WAnevN0yUsgsE5hJPHpAa9K1r52OzAu0P7Yb/i84ZZEM5ObMp9opWnAvcv7MNX9E9Dw2opjFDm3lQ/ALYAiqnuH7UcifxSZG2Ylj3E2BaRnAkKSWAnZvNNv+0oaKIaOADrvO+ufMJsHXSFQIBxRbUgB1vXLVPLXfE2Xq5cKkzPI4IB+9n9wQVFMJifhI5oEAaJ9bFsx4vVugr34QKWgYLbPxZMxwvgKRwLcffGGrCAghGvqMzRGjEjfj6Ouhbl384kB7UgAWuBf7OAtNGpIIAjjfdQ/7argpLKwISTFJRdffuWkHW9i3XCaFVYKToJQNEQaOsoXLiUN7eZpWVoRCjDFAK6UFudBGUt9crC9OaTcHLAI/+8UWL0R9F0LIwIkj0ykTSkJ+fkSG0c/t/yLAHKHHXIuIg8Z020E4r9MAiOVxaiQzPlIV8DbJxDPWle2JmxzJA3b+kwGZNaGEDzi18nUAaqmsOyopbk268pZ4YcXVu7DaDtxA/fkTpbATCXlg6xfGsqHk5gImg1gjmdyMCvRDQqMwz8fvrDeQ/QIleItNVAAAAAElFTkSuQmCC",alt:"icon"})]})]})]}):null,this.props.dataFull.cmd.error.message?(0,s.jsx)("div",{className:"malibu-mobile-uLoading-message-error",children:this.props.dataFull.cmd.error.message}):null]})]}):(0,s.jsx)("div",{children:"Kh\xf4ng h\u1ed7 tr\u1ee3"})}render(){return this.state.visible?this.renderForDevice():(0,s.jsx)("div",{})}}const r=n;class l extends t.Component{constructor(e){var t;super(e),t=this,this.setPercent=function(e,i,a,s,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=100*n/s,c="Loading...";c="Template Component"===e||"App data"===e?r+" Loading...":"System Loading...",window.process_loading.max.main_script+window.process_loading.max.template_script+window.process_loading.max.template_component+window.process_loading.max.template_css+window.process_loading.max.app_data===n&&(l=100,c="System Ready"),t.createOneLoading((0,o.Z)({title:c,percent:l},t.getInfoNetWork()))},this.callBack_animationPercent=()=>{let e=this.state.index_loading;void 0!==this.state.list_loading[e+1]?(e++,this.flagLoaing=!0,this.setState({index_loading:e})):this.flagLoaing=!1},this.closeLoading=()=>{null!==this.ref_loading&&this.ref_loading.callBack()},this.flagLoaing=!0,this.state={index_loading:0,list_loading:[(0,o.Z)({title:"Loading...",percent:0},this.getInfoNetWork())]}}createOneLoading(e){let t=this.state.list_loading;t[t.length]=e,this.setState({list_loading:t},(()=>{this.flagLoaing||this.callBack_animationPercent()}))}getInfoNetWork(){if(void 0!==navigator.connection){let e="";void 0!==navigator.connection.effectiveType&&(e=": "+navigator.connection.effectiveType);let t=navigator.connection.downlink,i="";return t<=1&&(i="Internet speed slow"),{cmd:{error:{message:i}},speed:{title:"Speed test"+e,number_speed:t+" Mb/s"}}}return{cmd:{error:{message:""}},speed:{title:"",number_speed:""}}}reportWindowSize(){let e=window.innerHeight,t=window.outerWidth>window.innerWidth?window.innerWidth:window.outerWidth;window.outerWidth,window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`);let i="";return i=t>996?"desktop":t<=996&&t>768?"desktop_small":t<=768&&t>575?"tablet":t<=575&&t>350?"mobile":"mobile_small",i}componentDidMount(){var e;e=this,a.start.DOM_Html=e,setTimeout((()=>{document.getElementById("root").style.display=""}),500)}render(){return(0,s.jsx)(r,{ref:e=>this.ref_loading=e,device:this.reportWindowSize(),f_callBack_animationPercent:this.callBack_animationPercent,dataFull:this.state.list_loading[this.state.index_loading]})}}const c=l;var d=__webpack_require__(1896);class h extends t.Component{constructor(e){super(e),this.type_component="uLoadingError",this.code_component="malibu.uLoadingError",this.error_img="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAR8AAACzCAYAAACw/hhsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAACDqSURBVHgB7Z1rbBzXdcfPnd2lRFmWKNtppIi2hrFSxA9EVGEDasDHMF+iGEVMoXylaCMqcNoisC0ybREncWsyNRy3SBspce1+CCyqQGKJZKw10CbOJ60eNYKkgGg0CQJErkYWbcuJYi1t2ZJ2d+b2ntmd1XC5Mzuzc3f2wfMDVtzHcJcid/77P497LgBBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBtD4MCEIwOHhOjcVi3SyuqMBhm8KYyjlXxTukQzxsX9zQxfekxbFpzmEBgC9xgy8oiqLPzXUuAEGUgcRnlTI0dEGDGOtWgPVz4Bp4i0sY0uKygKLEDfOEYRipZLIrDcSqh8RnlSCcTUd8TWJc/MEfFDe7wVts0vkLQ9eSNk1ziTFwFQzGlG1CwFTreuXnRlIc4CVmQoqc0eqFxKeFKREczeUwXbwNhBjwV4HxhRzk9OSRLh1CYL3u2ng3A6aaBu9mCtvBXF+f6YzDTEbJHA77ukRzQeLTglghlcIeFG5lHFa6EHQ0SSE0J7LXssmoQiBbkLgBg4yxfvGzdZc5LAWmeXhu7o4ZIFoeEp8WAkWHxdgTsNJliNCJH2YxSM4fuT0FDcDY2DnVgITGTdi/UoiYDqYxTSLU2pD4tABuosPRSTA+3SiC4wYKUc5MTAkR6hc31RuP5EOy2dmt00C0HCQ+TYKmDXYYRmJQlL/106fnU3ifi+ikOeMHc9dyB2SGVLt2DaqKkuhQFN7BGBehnFIM5/Bnwq+mydJtbVk9lUpW/brDY4vjQjXx/6TeuJecUCtC4tME9PWNPCEcwJR9W1HW6bfc9ncpJb5x3HHYCtFBwTLNtv2MW6V0MAEOnzo1N+P2Onh8JpNQY0zRmMK3MeAiHGIqLBMCn4jkNfb+cFEx42CIEruiv/LKnO/KlrsI8T1UIWsNSHwaHE0bU7lhnrNvr1vfB+tu/rTIJ7fbd7k6nf7e0UPCl4yXPKXOspmB1E+TOt7o6RnSFEXpzwsU81MmDwP+fCnhkE7EjOtJ+2fwwkWEZrIsM03VseaGxKfB6esZwVzIE7HYLbCh43OQWHNn8bHM9bNwZWluIZf7nZq/hydZNjuNJzWKinAwx12eVhf5oKT4449DbcWmEtbPoWQzBysJ0dDYhSnG2X4o/rwUijU7JD4NTn/PyLE17fcO3rzpc0W3YxjvwLvpFyB7/bVy3yKcEEyIGKsLRQuaBRGmmRwOxmLZpFvOyJGY3lv8NoADs0c7J4FoOkh8GpzPPvjymTVr7y2Woq++fxKuvPsTkeS9WulbdagmV1N/dOHgUraDK3fAylCM6SIMG6AwrLkg8WlQsCkvsSZxDAqVLFOIzXuXX4Dr134Bqwc+4yZCVp+QKX4/xR4hpnNm7mv0tgLiBiQ+DYh1YvEE5mtUvJ3LvgFL7xyywq3ViAgjDyiZ8nmhQi6oGF6K61PUF9QcKEA0FMN/ttgthOcM2MKTu5i6fOnZVSs8COMwwRNtx3t7h8dLHxNOZ0okrTHnY+WJROVvamTkjebJda1iSHwaCBQeMAAdj1XRESfS9LEf3jfAzavU1yLEWAF2qL93+Li2a1B1PjB/tPNAjGV3Qj7PRQLUJJD4NAgrhEd8muOnOl4XocRhIAowTbigM729oxPOe4+IZLMQoAFwCNDw6OIhIBoWyvk0AKXCAyJxOndkef9Kf+8INhqqQDgQCelYdtJZmi/Nl1EpvnEh51Nn/AiPdbfB9wAATQBcBhvnRtsZZxi2wgEBTFAI1piQ+NQR/JQWwoPldE/hQVKvzC0w4PQJvhIVk9Faz5Bm31EuBCMBajxIfOoE9vE4wwNMLrsJj43J2DYgyqFyphx35oHK5oCGXx/HQfn4uwei7lDOp06MjL5xjAMfxOs8P3Nnyut4l0WiRAmcwdTJk7PTN6Y5MvE7zs+XLiE/2B7gpRzLJqk7OnpIfOoAhgD4SYzXGbDk7NGte7yOJ+EJxrr1n1pYv+FPugN+WyrLsvtIhKKDxCdiCgPACqvNmZ69ntnpNfSLhCc4TGmHWz/8uHPsSJDvnhF/k0na3qf2UM4nQjDBLITH7j1JW4shPd7kOESMhCc43LwKV6+chOrg44k1bWcGsRhA1BQSnwgxeFtxJbbINXgOwyqdXkgE44P3qxUfhKsJ3nacBKi2kPhEhDUGouhi2AwuCXA7VusdGSThCQe6n2sf/ByqhwSo1pD4RIBV2uX2YC9r9ozrqmtrbCrAt4EIzdUPfgbhQAFK0BKNGkHiEwFtbW04/lO1bpiGZ7jFDbPY+0OEI5t5zRo1GxJtdHRxAgjpkPjUGEwy22V1dD1eM4fzCebWF57162+CzVs+BFHw/ns/gbCYAE9QY6J84kDUlHySmVvXsbrldlxhl4opaEG6d94NPT33W183b/4DIT7rio9dufIBnD2rw9nf6HD69M9h4cyvQCbofrLZNyCR2Aoh6Ii3xdH9TAEhDerzqSGFFdaFbW/YzNzRrfvcjm21VevoboaGH7AuTrGpxMWLv4OZQ3Pw8o9PgCxwu6H1GwYhHMK1Ht3aBYQ0KOyqIYXSuoVXkrnVwi10ON97/p9gfN9QIOFBNm/+EDz21S/BkdlnrOsyuCqqXmblgfsV4OrQ2AUNCGnEgKgJVq4HlJn8LTbz4tE7yg4Ew3BLnBlJaBEefmQvfPlvvmg5nzDYzgnN+cJCyFCM54CxBLSt2Q5hYMDUX/3yX2mwmyTI+dQIv66HG7xlRj2gY8kLhjzQPY3vG4awYNNhePcDGrkfeZD41ABrTo+jodCttG65nhZZPoGOZ/dn+n0ff/Hib638jh9QgMKKWvimwzzOnTKIcJD41AADEpp9nTPT1aa3iuuxE8t+wYTy2Mgj4vIwzM/9yNf3oLh1d98NYbh+9X9BAhp1PcuBxKcWOLqZ3TaxaxXXg0nhIGFRvpo1X7ztV3yQx772pVC5JElNhxA34+NAhIbERzLWECtHN7Pbca3ielB43Cpa2MOzsPDLZeHVyz9OLTsmSLMhCt3Q8GcgDDKaDhlj+6npMDzUZCgZFlP2FpsKY0aq3DGFhsJxaHJQDNzyPCg4D33hK0KA3rdu797dDz1996/o39m9W4MgYHjndE5Bsd1PyMpXR3xtHIeVpYCoGnI+0uFa4etLrmu4DEODFqCn937Xx9Dh2MJj3X75BDz+tW+tSDJjT1AQMOwKm/uRkXjmBoTtWlz1kPhIZHnI5d67w6E1KiZe4oPLKCqBQrJw5pdWeCbrdf1w7Wr4pkNFocW/YSHxkQiP3fg0dAu5evJbvKjQ5FRyIBiOYd+PV5cyOqOnv/mcVfV6+qlnfZfew4oPUv2kQxvaSSQsJD4SYZxZCRCR8Um5hVwxFtsLLcD2j1U+91CAcJnEge884SlUKEIYlj3zXX/NwzKWXYRvOmSUcA4JiY8krPnMDPI7JnDusSrSzgk1N0FK3pbw+FjC7MwRVSKsAIWb82w9Aw2YDwmJjySyZuzGVi1K+SqI9slhPEaFFiDoSvXSURnohrBy5RSRoJWvsIRJPHPaujo0VGqXBWOafdWtsdBgiqYUyvCridJGQqxwoRvCC3Yu48LR7dvVwCvgw2IY71RdducmfxWIUJD4SEIBtgO/co/eD0UxH6zlCCUMhXp677PcxOYtN6pNF9/6LZw9e95yIDi0SwZ+k8NIaThV6nCqKZ0HrZC5gU2H1YiP+BBZACIUJD7ysMIu709EFnQXzYqg4GBiFytAfk5iFA1s9MM+nCACsuJ53vL/vdgFjWEXvh66niALUMuBYhYkP+RFtU2HbtVMwj8kPhIotNpb1Q+mML3cMZjv4YVjZIE5E6/lDeXIr8Uasi7YKYyLPKsBhQQvfhK/eAxWvfweXwnZo1aDuh+vaibhHxIfCcTj8RuOhpW340bMVBVJs9usaX9f+1LoTl8UIHQhE49OV+WCTp/6eaDV7F7CgyM2Tp/6H2uesy1s6OpQWLffqUL3H2GO6B7rNr6uTND9YP4nFrvF1/HMNGmgmARIfGQQuxFOmZnYuXKHMK5oMtI9eAJjpUjWiFF8Hhx5+vRTz1kD3IMQVHzKgeEf9viUdzN5QcTH5ufzSWtcIxZ6smEZsPJ1082f9nGk9w4khH9IfGTAeYeodllXX3zxI+fLHSIe3gEhkS08Nugwnnzqby0HFOTExmNRGIKuz0LQ4WBTYdAQCoWqlJ71G6Hn5g2wOdGWf+5rV2H+8iW4mM2AX7DpsH19Hyis3fM4rx1IiGBQn48UuJr/Wj7fkz8kXEdsUOHBURZPf/PZFSMsvEABCips1eSM8GeaePQboXM329e2w5E7Pw5Pdm6D3Rs3Qfe6m6zL0C23WfeP3/Zh38/lp+mQMz5NuR55kPhIgDHFWmvAgevuB0GoShcmlv0KA+ZL8OTGqhaunfI7sAsdEK7HCgK6nyA5GBQr/JnCVqvQ5Ry446NFt1MOFJ8gAoTuxw0Unvkjt08BIQ0SnwjQtMFQrmf7x9RA5elSt4Mhjl+qKYWjmPhJWKNIhZnF4wSFZ71SOYGP4oNuyA9uc55JeGoDiY8EOC+U2YEvlT9ibSjxwS7gcmCjHTqJx7/+rWWCUzqwC6tEQQi6WwS6mEoVM3zM78LRSnSvW+/peEoJ4n6ufvAz5820KKtPkvDUBko4S0Akkwviolwu93gul1NjrDqdx1DLraT+zHdmiglYdBXPfPc/rNXmYQd22a8ZJPmcD/WmXfNSM8/PhWpqdOLXydhgbsgvouyuiy865u9wyyPK8dQOEp8GxysEKl1igA6kNImL319NdQy/L2hJ2xagfP+Qtuz+clWqagniehA/4ZmTuaOdVNGKAAq7Gpzunfd4PFbZ0WAIhmFZ0B6eagd2odBgDsg5HAxdj0yClNCRK6YBRONBzqfB8epixgY/FAnM+9hrp8qBIRlegpTrsfKFx1UbKqHTwQsKZJB1YH5Y+OCK+Nd/HufstWtANB7kfBoYv+umsDyOa6dwLIUXKCRB9skKsq2NG16iWPVzfvB+QYD88fLSO0A0HiQ+ctDxH15sNpRDkGmB1riMkpJ6OfGqJFCVvh/BhG/QvItsnvntm77Cqfl3LgnxuQxE40HiIwPOrKl2rMyqdVzxvmnTX0kfpVFKaV4Fwx10Q7huC5PH2CuEJfQgPTxX3is/M+eKYcJjWzqhnmAoNfH6a575HxQeFKlAMJpQGBWU85EAB2OJWTq+fAnF6Oib+00wpxJwV8d7S+3AAw4sD9IFjMPCnNgDu9DpBO1aLr7+++Vf/+z1q1b5+uEPfwSeeTvgyS0RFKCx135tLa3YvfGWYlULQ7LTV5as8CwwJs1mjgoSHwlwxtL5ZaX5sAvdTmJN4pgQHs0+Zt36vsBb9QbJlThn+njtJBoEN+eDXMxkYGjTbdYiznqHNfj6sn4GzmAJiEigsEsCCmPFGT5DYxc0ITxnxFXNecy6m/qAMf/NbjZ+BQjn+9gTDXGBaFjQdXktyzh7PV9BQvdT7/yPVHg+f0fUHnI+EjBNM60UOpgZZ8egTO6HKe1VuR+/M3PsqpcfUFScwmKX1Z3J6EorzjH0AthkhTq4zuqhc79piX4azhUdiEgg8ZFAQjEWDF40ka7ruND91Ep8KoEjNnBR59nfnHfNJVkD6Hvug90P9Fdcqb7gyAeh88EE9ONvnIdmJ8YMGgwfEbXbSmGVMTy6iEmHigtIl955Hq5f+wUE4XvP/7NwJdXtzmvN9XnqOem9Nuh4/vMPl3dfz1x627o0MyyW2ZRKJSnpHAGU84mYduF+gjI/+18QFFz3havIca6PbOGxnl+EWJhsdhJkfEWDkibhiQ4SHwkMjy2Og8+dKXCXhETbnRAE9xnH5UHhwQWeQbqZq8FOOjt5slNt2gQ0By5v9StRERIfCXAT9gc53t+g8uXgSFS/G+Wh8AQZIFYt+aTzcjAca1b3w00lBURkkPiEZGzsnMoCjkhF9+N3mxYba7X4U89WPA4XmUYhPMhCmSZE7Dhu1uUMlGyOFhKfkGTNWFVLJ7DsHhQci+ElQCg6ssaU+qHc0oaquoobg3Tq9HwKiMgg8QkLYxpUwdr2+6tqOsT8z0Nf+ErZJLKsMaV+waRzqQA16wpyyvdED4lPSBju2VXN9xWaDqsBHQ7mdZxzm7GkLnsbYT84nQ4KUbM6H3EiJIGIFBKfkNjb5lRDtUsuEHti4NjIw/ldP39Unw9uZ9K5qXt8YlkSn4ihDuew4DgNxqEa0P20r7vfc7+oStgiVC+cvT7Nm+/hM9TfEz3kfEKC4zQgBG1r74Vmxh5Revq9dwPPVm4UROgcbbKMsCDxCQtTQpVnq2k6bCTspPPL7zbtqFKdqlz1gcQnLIyH7g2ppunQSb07irGvB51PM8KATwNRFyjnE5LctdxCYk0C8wVV70pqu59s5jXf34O7duJaqu1r1zom+L1vlbqjbvJr4hnJOmSzKSDqQrDd1IgV/PrXB6/dde/kFgZsF4SCQcbnancc4PXlzVstx9Pm2AkVb/fcvNH6ikKU4dUlwoPSvHN8ePLEKy9SvqdOUNglAcbC94isFYlnP2V3dDs4vtQLnGn88Ie3AOENy2Yp5KojJD4SmD9ye0p8SUEI/DQdoqNB8fEDDlRv8vEWNYVxmE79NKkDUTdIfCTBWfjEZaWmQ3Q0QUABIsqiQy4zAxLRdg2qQASCxEcSBfejQwgquR9MMgeBnE95sMIly/Vo2pja3zd8BuJxFYhAkPhIRKR3D0JI1q67H4iaoqdOzc2ABHp6hjRumMeF7e2GeI7GcQSExEciuevZGfElVJs+zvlxazoM2kF8MZsFYjksmxkACfT1je6PMeW4uNohnNQ+Wp4RHCq1SwTL7nffM9nOqhyzYYMCdO3qyt0jsKQdJI+DCz3LjTpdxaR5LLb2jm0fb+/svHfthQu/uggB0bTBjm2373hOCM5j4qYuxOyPU6+8mAIiMLR7hWQKu5WegxBNh8jlS/9Wtunwe+rHrK2KK4EuCbcSJoro4qKuuBc71DnTTZOd4MxYiIvwyc3FYH6Hm8YxK8wCSLJYhhxPCEh8asDQyIUp4X6egBBkrp+F9O9XTi3Ecjtu0ue1pAId0sTr/7did4lVDDqUAUwya58c7oaYqZo81i3e/DsABWnlGFwhKHyBAxMX/irnXMc7RZhlbQhplelPz04BEQoSnxpQcD+4ZbIKIfjdW18HzlcKCArPw3/wEei5ecOKx7Cz+em3LjTtCvNawLg54LV4FEMpyMW7QQiSyUzVEiVmuZty7lXnHA6jSzIMRX/llTlKNFeJVPERJ52aSCQ03D7YSBgLySNdOqxScM92xtlxCAHubuq1w2l+OcUGa22XvY9WE89QrglhXMoyl8SgrJMVzuilk6fmBoEIjBTxwR0cDJ44JK5qJU9+IHM9O51MdjVtXGztycVhr7hqWXMGLJVhmUk/wjo0ujghfgffhirh5lW49PaTZd0PURmZ4VF/77D4IGGaCN+6rJ4exoQoQbfCFT3130cPABGY0OJTEB78hFddDknNHe2UUt6MmpHRxW9zgIlyjykAk0ePdlZ80wkHNCUcUNX5n0ruhyiPeGMfTp2aHQdJaNjTI0rrIuSaPkn5HimE7vMxeBueWKrHIdrw8Ovj0GSg43ETHsQUjmZQCC9UYP7I7VMmN/dAld3P6/LbK1NFJQCyhQcp5IzSTIEHgZCChCZDrlU8RGFSY2IUhuHRxePiwsXlsnV9eLGq/bPc8LMLacyIT4APfjh7RzLGsgOYqISA4JKLDZs+PwMkQL6ohfDYiL/fQRGCd6MLAiI0Mjqc1UoHiJLlRpDE8Ogbh8QTOvNLHdZ1Bc6MihwLSMLPLqRMYTvAJ0dEjmh+tnNciFBXQYR0P98n3Feqbe0nTjCDD0DItWOtTi2FB1FMbo1O4YztBSI0oXM+6DygQkMdnkDzEvI+heTvIa9jsuLkllFlQ1dV6Ziw/y+siGHDGje5qihKUaA5N88LYdOz17JJZ7LeanLDtUQhS/itSFS9N4XEczeLZbpkNhg6Chsa5F3ugojtJ+fmOlu2lB96jKoJ/LACzDNEYaYpZVochkKsglwWQiEZDigFJdW7lT8PfxVCEHQOUCp1RBcCNMBN8xjafyAsmMkmK1Wc+vpG9iqmeT7ssHh0V+JDRzOya8bFTSlVrryb5+OOu5xu3ldhoxkJHXYlWA5/Mbr7EUyfm7tjBiQgOxTyQiSJK61QTxuxXORvChSgEydnd+InPRC6CEd3+hEe8fuaAZOFdyr5zQXTimJKSTxbjgeWCc8y/BY2mpHQ4oO5DEymQhkBwrAkez2zE5oQTBJ7DAhLi8f21LOJEkMMXE0NqzUPxHlKhD47UxU6jIvCg7+ntqwOIcFQi1v7fDEVJCCzsOGXKAo2fpAyUgMFaO5oZ5c4IQeE4ExaF3Ed8yGSGwxTlQ4IGwo5wTK5+OjZabXTc1jAi2nygyKvtLMQMtUVnEvDYgr+zlfTEPQ0hlknTs8NVMq5OIXHWtslKUejAE/imi+QQJRuHomqYOOHyNd24Toa02zbzziW6Jkq7lI5g/GTJ2crnkCVlyyIJC3LDNTLkezaNWgtLxE/Iy5W3CjepK/KGlxVCa13eFxUFSv1XDU36HZy2X1+phCuEB7J85qx3C5js8EoChvF14qwYOOHSIeJ4QAmbrRdFm+KKWxVF3ep+CnmR3gQdBteoRDE6hMK4RogrIKsSbSdE8n3Q7gOiDEhrvn8QCS0uAvScXGo5XYaQHgQibucpiodIMvN1yPE80K6+OCnv7VKuIT+3tFDwu04E4Npa7VxwHUxGArZvTJ2KISClL2e7Zr7QfRlSXyj8xg7XhBTC6yInDg5tzPqWS+YjD55anZciFBXC4lQ0uDmvhzk31u7Kgxqxw+CWguPTCpvPMB0WYWNqEO8iq8FkhEicw4Tcs71L+IEfSLvdopE9sawQqHYmkGm8G0iQdsh/sMnqgmF0NmIysPhU47vxTe6EJ4zzuMaadYL9gWZhikS09CqTXFpKHZ+52fuYA8O5PMYSfHBZDkGcYLrMc4bdk92j/V/ws3DgKwP1ShDPD/UfLvkQmPcVPEOxhdYJrun1sKTFwZcUY6OpPA758LixrOTUBVM5HLghPMeITzHlh2Bs3xPR5Pj8QM6IfFlXPwNpgoi1A+NnBPCnA4zDwq1yAsK40JEFMtFm5hHyx/UIT7BN4pjOvB6/j5xnVmPd8CNhtdBcdyg9Sj+ZZjlhlLQgKCbHxs7N5MzE1OQH3Am/tv8pdy13IEaFGw0rwNkFmwqUXPxMXPGBLvRGZhkipUwrGk4YoVCeetdRIR8B4UwSItn8wne4omcxuUPqQYdLGWLEF63fm7OHoTCidkAiPAbDgp1Scr4/fX3jZwRHzKqtRzFzKaLW9rE4zo0MEfyucpxP8dW6+YxxBMOS3M/AkO8bGS9azUXHyE8VjOW7JMf6e8dOWea7OApR97IcjwrhAdDobkpkAi/Eco0RW7BpvAmnbHyckZisCBEGoScOR0IdDjAhIs0U7JDIWaakzj6woyzvSdPJtHl6tAihHXzWLARId60e4gnCjY/iK5gU1PxKYRcar79fbYWiqoyxpedNCWhUFp8MkzKDoXwxOWGeANgCKlkB1Knmm+IeCEZPlO45Kf2MUUTn4750IxJW76RFmKzIE6VVxVmpkQ5JVXLRDyKmcjPpcQJNqHtGjzYKlsiy3LzEYZ4Famt88kYHSzG9oiKViQl55JQCFvv99QiFMrl4t1xJqpJSnaiVXYvKPye8LLMReIYUTDjqskw18K3Lc+12IgcDeNpcXIs4XVFJHgBh67ncno9Tn5xUk5zxjSesKZrNtUguyjcfBQhnh9qKj6ON3QkRBUKFbZXGYcWJ+q/nyzy7mdEfOCxQVnNgBFSFzdfivyCzUri586d62hra9NEbkb8p8PX+B/6wlc77rv/Ew8enTu4DWrM2Mh+GPjULuu10ul34a//8u+1u+7eDo/u37uwadMGEdc+B7Jwvlb+HnnPXU9M0zwv/u5pHPpvbxGDt7PZbLqrq3k3AGAxZVKE/CKMtPIbKWhSonLzTqIo2CBx8QbDsKEYFi0uLnazfNkSv9qlWdXvE7a3r4Vbb+0QNpHLyhl4Yr/WG4tvw2ce6IfP78WJpSASqRVbGqp+LWgh7EqkoizvN12zZg28+eabeDWNYgSFxC1eF7+DdKOLFlb4+npGDuL+aVrvnw6mTv0wktBfNrV08/Us2CArwq7Ozk7bahf/WOiO4vF4dywW6xZvNhx8hQ7JbuZaBgrANnUrRI3atRXuvmc71IrbPnQL3HRT5Z1CW5AOIS74d1bxhi3qPkQLj9FRqFCUnKJVeB4dhct+rBaipcQzB7jRtp9DDHcQaTrxKRY2sDoYz+6pQWGjriGer5xPwR2loMS+okvCN6Z4A2qFkE0V4lMXZ7BuXW2F4bvP/AMQwRDvDbXwdYVo4VencNVCtLAYkHc/zdnhbRU2QH6440bUIV6ohHPBJSEp5/126CbeKFrBJalAoz8Jn8gUrUuXfr/0788d7fj+C4vjtXZasikUNlIQEVH3rtWk2hU2dPPLKg6FiDKUE61bb70F/vwvPouCdajWTks2UbZxRBDiraDmHc42XqGbI8FtuyRfoRuFQoQftm3zzkHKcFqFh63b4rLkFC18IJfL6eJLunAeNBxRh3hIZOLjRjmXhJQJ3UK5JIKQjVO0nKBglYqWcPzWVxQuL9F69JF/hLs+/tEd33/hXzR8ICrRijrEQyKfZBiGWoRuBNFELGt7AIdolbY9+BEtUWrn9dz+uanEx40woRtBrALKitbnRicmPrHjruRXHvviS0FESxYtIT5uUOhGEO488vA34IEH+q3ePBekOq1SWlp8yuEM3bBbWfwScbkEiRJB+McxQXIlKE6Qz+Pqhdu6LVb4VZx76S1btuirTnzcoNCN8IFe4XHPkxIfQ+cA3pz3etA+ib2Osd2I2/djuwB4Q2FXI3DhwgUM2TpWcehW6YRCdK8HvU6GwuNLjspPVc9R6aT0c9I180LaZoTEpwqcoRvk5yKXE6O6f8ohhVjci4btPSEIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgmh2/h8XK/UXKq/r/gAAAABJRU5ErkJggg==",this.state={}}renderForDevice(){return(0,s.jsx)("div",{className:"malibu-desktop-uLoadingError",children:(0,s.jsxs)("div",{style:{display:"grid"},children:[(0,s.jsx)("img",{alt:"error",src:this.error_img,style:{margin:"0px auto"}}),(0,s.jsxs)("div",{className:"malibu-desktop-uLoadingError-title",children:[(0,s.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("g",{"clip-path":"url(#clip0_9044_25578)",children:(0,s.jsx)("path",{d:"M3.18491 24.5H24.8032C25.7016 24.5 26.2616 23.5317 25.8182 22.75L15.0032 4.08332C14.5482 3.30165 13.4282 3.30165 12.9849 4.08332L2.16991 22.75C1.72658 23.5317 2.28658 24.5 3.18491 24.5ZM15.1666 21H12.8332V18.6667H15.1666V21ZM13.9999 16.3333C13.3582 16.3333 12.8332 15.8083 12.8332 15.1667V12.8333C12.8332 12.1917 13.3582 11.6667 13.9999 11.6667C14.6416 11.6667 15.1666 12.1917 15.1666 12.8333V15.1667C15.1666 15.8083 14.6416 16.3333 13.9999 16.3333Z",fill:"#E9121D"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_9044_25578",children:(0,s.jsx)("rect",{width:"28",height:"28",fill:"white"})})})]}),(0,s.jsx)("span",{style:{paddingLeft:"10px"},children:this.props.dataFull.title_error})]}),(0,s.jsx)("div",{className:"malibu-desktop-uLoadingError-description",children:this.props.dataFull.description})]})})}render(){return this.renderForDevice()}}const u=h;class p extends t.Component{constructor(e){super(e),this.state={}}render(){return(0,s.jsx)(u,{dataFull:{title_error:"Error",description:this.props.error_info}})}}const _=p;let f=window.location.hostname,g=window.location.port,m=window.location.protocol;console.log("Version of App 1.0.4"),window.isShowErrorNetwork=!1;let v=!1;"www."===f.substr(0,4)&&(f=f.replace("www.",""));var b="//jwebui.com:8066";if(e.ZP.checkIsPublic()){let e=new URL(window.location.href);if(v="true"===e.searchParams.get("isMobile"),v){let t=e.searchParams.get("cordovaProtocol"),i=e.searchParams.get("cordovaDomain"),o=e.searchParams.get("cordovaPort");i&&t&&o?(f=i,m=t,g=o,b=t+"://"+i+":"+o):b=""}else b=""}(0,e.hP)(v),(0,e.v0)(f),(0,e._N)(m),(0,e.t_)(g),i.render((0,s.jsx)(c,{}),document.getElementById("loading"));let y,A=null;function D(){window.process_loading.loading.main_script--,window.processLoadingGUI("Main Script",window.process_loading.max.main_script-window.process_loading.loading.main_script+"/"+window.process_loading.max.main_script),0===window.process_loading.loading.template_script&&0===window.process_loading.loading.main_script&&window.callStart()}function k(e){window.process_loading.loading.template_css--,window.processLoadingGUI("Template CSS",window.process_loading.max.template_css-window.process_loading.loading.template_css+"/"+window.process_loading.max.template_css,e),0===window.process_loading.loading.template_css&&window.obManagerTemplate_libManagerTemplate.managerTemplate_begin_2(y.template,y.screen_working,A,!0,O)}function O(){window.process_loading.loading.template_component--,window.processLoadingGUI("Template Component",window.process_loading.max.template_component-window.process_loading.loading.template_component+"/"+window.process_loading.max.template_component,"Template Component","Application Info"),window.addEventListener("offline",(()=>{window.showLoadingError()})),e.ZP.start(window.mainstart.configGlobal)}window.processLoadingGUI=function(e,t,i,o){((e,t,i,o)=>{null!==a.start.DOM_Html&&(a.start.current++,a.start.DOM_Html.setPercent(e,t,i,a.start.max_pack,a.start.current,o))})(e,t,i,o)},window.callStart=function(){!function(){var t=navigator.onLine;console.log("Initial network status:",t?"Online":"Offline"),setInterval((function(){var i=navigator.onLine;i!==t&&(t=i,console.log("Network status changed:",t?"Online":"Offline"),t?((0,e.zF)(!1,{}),document.body.classList.remove("isOffline")):((0,e.zF)(!0,{title:"#MsgSystem_client_offline",btn:"",list_fo:"",list_fo_start:"",color:"warning"}),document.body.classList.add("isOffline")))}),2e3)}(),!0!==window.mainstart.isDev&&(window.addEventListener("beforeunload",(t=>(0,d.Yr)([{txcode:"bo-delete-session",input:{token_webui:e.ZP.getSessionFromStore()}}],{})),!1),window.addEventListener("onbeforeunload",(t=>(0,d.Yr)([{txcode:"bo-delete-session",input:{token_webui:e.ZP.getSessionFromStore()}}],{})),!1),window.addEventListener("unload",(t=>(0,d.Yr)([{txcode:"bo-delete-session",input:{token_webui:e.ZP.getSessionFromStore()}}],{})),!1),window.addEventListener("pagehide",(t=>{(0,d.Yr)([{txcode:"bo-delete-session",input:{token_webui:e.ZP.getSessionFromStore()}}],{})}),!1)),void 0!==window.mainstart.rsa&&window.mainstart.configGlobal&&(e.ZP.rsa_setPublicKey(window.mainstart.rsa),e.ZP.readHTML5RSA(),y=e.ZP.template_getConfigTemplate(),void 0!==y.theme&&(A=y.theme),window.obManagerTemplate_libManagerTemplate.managerTemplate_begin(y.template,y.screen_working,A,!0,k,window.mainstart.template_host_dev))},window.closeLoading=function(){null!==a.start.DOM_Html&&a.start.DOM_Html.closeLoading()},window.showLoadingError=function(e){window.process_loading.loading.main_script+window.process_loading.loading.template_script+window.process_loading.loading.template_component+window.process_loading.loading.template_css+window.process_loading.loading.app_data>0&&(e?window.isShowErrorNetwork=!1:(e="Please check your internet connection and try again",window.isShowErrorNetwork=!0),i.render((0,s.jsx)(_,{error_info:e},"12"),document.getElementById("root")),window.closeLoading())},e.ZP.addSript(b+"/api/Webchannel/TemplateDynamic",D),e.ZP.addSript(b+"/api/Webchannel/ConfigClient",D)})()})();