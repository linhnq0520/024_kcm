(this.webpackJsonpframeworkcss=this.webpackJsonpframeworkcss||[]).push([[602],{297:function(a,t,e){"use strict";e.r(t);var l=e(1),s=e(2),i=e(4),d=e(3),o=e(0),n=e.n(o),p=e(7),u=function(a){Object(i.a)(e,a);var t=Object(d.a)(e);function e(a){var s;return Object(l.a)(this,e),(s=t.call(this,a)).class_desktop="perseus-uTableColumnEditInputWithHistory",s.readOnly=!0,s.state={readOnly:s.readOnly,valueDefault:s.props.dataFull.data,isChange:!1,isChanged:!1},s}return Object(s.a)(e,[{key:"componentDidUpdate",value:function(a){var t=this.state,e=t.isChange,l=t.valueDefault,s=t.isChanged;void 0!==this.props.dataFull.data&&void 0!==a.dataFull.data&&this.props.dataFull.data!==a.dataFull.data&&(e=!(this.props.dataFull.data===this.state.valueDefault||!this.state.isChanged)),void 0!==this.props.dataFull.isUpdate&&this.props.dataFull.isUpdate!==a.dataFull.isUpdate&&!0===this.props.dataFull.isUpdate&&(e=!1,l=this.props.dataFull.data,s=!1),e===this.state.isChange&&s===this.state.isChanged&&l===this.state.valueDefault||this.setState({isChange:e,isChanged:s,valueDefault:l})}},{key:"render",value:function(){var a,t,e,l,s,i,d,o=this;return n.a.createElement("td",{className:"perseus-uTable-td perseus-uTableColumnEditInputWithHistory-td"+((null===(a=this.props.dataFull.config)||void 0===a?void 0:a.isFrozen)?" frozen":""),"data-title":this.props.dataFull.title_parent},n.a.createElement("div",{className:"row perseus-uTableColumnEditInputWithHistory-div"},n.a.createElement("div",{className:this.class_desktop},this.state.readOnly?this.props.dataFull.data&&n.a.createElement("div",{className:this.class_desktop+"-title"+(this.state.isChange?" change":""),style:{textAlign:(null===(t=this.props.dataFull.default)||void 0===t?void 0:t.textAlign)||"left"}},this.props.dataFull.data):n.a.createElement("input",{ref:function(a){o.myImgEdit=a},className:this.class_desktop+"-input"+(this.state.readOnly?"":" edit")+(this.state.isChange?" change":""),value:this.props.dataFull.data||"",readOnly:this.state.readOnly,disabled:!!(null===(e=this.props.dataFull.cmd)||void 0===e?void 0:e.disable),onChange:function(a){var t;void 0===o.props.dataFull.abs_Change||o.readOnly||(null===(t=o.props.dataFull.cmd)||void 0===t?void 0:t.disable)||o.props.dataFull.abs_Change(a,o.props.dataFull.dataItem,o.props.dataFull.index_row,o.props.dataFull.index_col)},onBlur:function(){o.setState({readOnly:!0},(function(){o.readOnly=!0,o.props.dataFull.abs_Submit&&o.props.dataFull.abs_Submit(o.props.dataFull.dataItem,o.props.dataFull.index_row,o.props.dataFull.index_col)}))},style:{textAlign:(null===(l=this.props.dataFull.default)||void 0===l?void 0:l.textAlign)||"left",background:(null===(s=this.props.dataFull.cmd)||void 0===s?void 0:s.disabled)?"rgba(227, 228, 229, 0.8)":"transparent"}}),!(null===(i=this.props.dataFull.cmd)||void 0===i?void 0:i.disable)&&n.a.createElement("div",{className:this.class_desktop+"-edit perseus-button_square",onClick:function(){o.setState({readOnly:!1},(function(){o.readOnly=!1,void 0!==o.myImgEdit&&o.myImgEdit.focus()}))}},n.a.createElement(p.default,{val:"edit",style:{fontSize:"20px"},title:"edit"})),!this.state.readOnly&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.class_desktop+"-icon_button perseus-cancel",onMouseDown:function(){o.props.dataFull.abs_Cancel&&o.props.dataFull.abs_Cancel(o.props.dataFull.dataItem,o.props.dataFull.index_row,o.props.dataFull.index_col)}},n.a.createElement(p.default,{val:"close",style:{fontSize:"20px",height:"20px",width:"20px"}})),n.a.createElement("div",{className:this.class_desktop+"-icon_button perseus-submit",onMouseDown:function(){o.props.dataFull.abs_Submit&&o.props.dataFull.abs_Submit(o.props.dataFull.dataItem,o.props.dataFull.index_row,o.props.dataFull.index_col)}},n.a.createElement(p.default,{val:"done",style:{fontSize:"20px",height:"20px",width:"20px"}}))))),(null===(d=this.props.dataFull.history)||void 0===d?void 0:d.isShow)&&this.props.dataFull.history.before_value&&n.a.createElement("div",{className:this.class_desktop+"-history",onClick:function(){void 0!==o.props.dataFull.abs_ClickHistory&&o.props.dataFull.abs_ClickHistory(o.props.dataFull.dataItem,o.props.dataFull.index_row,o.props.dataFull.index_col)}},this.props.dataFull.history.before_value))}}]),e}(o.PureComponent);t.default=u}}]);